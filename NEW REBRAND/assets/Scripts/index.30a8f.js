window.__require=function a(t,e,o){function n(r,p){if(!e[r]){if(!t[r]){var l=r.split("/");if(l=l[l.length-1],!t[l]){var s="function"==typeof __require&&__require;if(!p&&s)return s(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+r+"'")}r=l}var c=e[r]={exports:{}};t[r][0].call(c.exports,function(a){return n(t[r][1][a]||a)},c,c.exports,a,t,e,o)}return e[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)n(o[r]);return n}({Byte_analytics:[function(a,t,e){"use strict";cc._RF.push(t,"a16597u6y5E55uQnpMqFCGN","Byte_analytics"),Object.defineProperty(e,"__esModule",{value:!0}),e.Byte_analytics=void 0;var o=function(){function a(){}return a.init=function(a){this.ge=new window.GravityEngineAPI(a)},a.ge=null,a}();e.Byte_analytics=o,cc._RF.pop()},{}],DuckSwimmingCircle:[function(a,t,e){"use strict";cc._RF.push(t,"11ccdLbw0RKmYN9e3qaLbuU","DuckSwimmingCircle");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.DuckSwimmingCircle=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaZombieEnum"),l=a("../Plant/pzaAttackType"),s=a("../pzaGameState"),c=a("./pzaBaseZombie"),u=a("./pzaZombieState"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.duckImg=null,t.stateImgArr=[],t.garlicSkinName=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.duckImg.spriteFrame=this.stateImgArr[0]},t.prototype.refreshFrostState=function(){},t.prototype.playStayAnimation=function(){},t.prototype.logicUpdate=function(){},t.prototype.pauseSelf=function(){},t.prototype.resumeSelf=function(){},t.prototype.refreshHurtState=function(){this.baseData.hp/this.baseData.maxHp<=.5&&this.zombieHurtState!=p.pzaHurtStateEnum.HURT&&this.zombieHurt()},t.prototype.hurt=function(a,t,e){if(void 0===e&&(e=l.pzaAttackType.FLOOR_ATK),this.baseData&&!this.baseData.isDead){if(s.pzaGameState.critValue>0&&Math.random()<s.pzaGameState.critValue&&(a=Math.round(1.5*a)),e==l.pzaAttackType.DEATH)return this.baseData.zombieDie(),void this.death(!1,e);if(!this.baseData.buffData.hasBuff(r.pzaBuffType.HARD_BODY)||e==l.pzaAttackType.BOOM||e==l.pzaAttackType.EAT){var o=this.hurtMap.get(e);if(!o||!o.call(this,a,t)){if(this.zombieHurtSound(e),this.baseData.hurtZombie(a),this.baseData.isDead||this.baseData.hp<=0)return e==l.pzaAttackType.KNOCK?void this.death(!1):void this.death(!0);this.refreshHurtState(!1)}}}},t.prototype.zombieHurt=function(){this.zombieHurtState=p.pzaHurtStateEnum.HURT,this.duckImg.spriteFrame=this.stateImgArr[1]},t.prototype.getZombieHeadWps=function(){return this.node&&this.node.parent?this.node.convertToWorldSpaceAR(cc.v2()):cc.v2(0,0)},t.prototype.playDeathAnimation=function(a){this.zombieState=u.pzaZombieState.DEAD,this.zombieHurtState=p.pzaHurtStateEnum.DEAD,a()},t.prototype.ashesDeath=function(){a.prototype.death.call(this,!1)},i([m({displayName:"\u9e2d\u5b50\u56fe\u7247",type:cc.Sprite})],t.prototype,"duckImg",void 0),i([m({displayName:"\u9e2d\u5b50\u72b6\u6001\u56fe\u7247",type:[cc.SpriteFrame]})],t.prototype,"stateImgArr",void 0),i([h],t)}(c.pzaBaseZombie);e.DuckSwimmingCircle=f,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieState":"pzaZombieState"}],ShufenManager:[function(a,t,e){"use strict";cc._RF.push(t,"96dc0OzT0RL6K7Cl70Ja7Mk","ShufenManager"),Object.defineProperty(e,"__esModule",{value:!0}),e.ShufenEvent=void 0,e.ShufenEvent={login:"login",signup:"signup",custom:"custom",video:"video",prop:"prop",guide:"guide",level:"level",load:"load",onlineTime:"onlineTime"};var o=function(){function a(){}return a.report=function(t,o){void 0===o&&(o=!1),t&&t.event?t.event==e.ShufenEvent.load?1==t.type?(a.uuidStr=a.generateUUID(),a.uuidStr?(a.loadStartTime=a.getTime(),t.userId=a.uuidStr,t.len=0,a.send(t,o)):console.log(".....is loaded")):2==t.type?a.uuidStr?(a.loadStartTime?t.len=""+(a.getTime()-a.loadStartTime):t.len=0,t.userId=a.uuidStr,a.send(t,o)):console.log(".....is loaded 2"):console.error(".....shu fen load type error"):t.event==e.ShufenEvent.login?t.userId?(a.openid=t.userId,a.send(t,o)):console.error("......shufen no openid..."):a.send(t,o):console.error(".....shu fen data error")},a.sendAll=function(){if(a.sendT&&(clearTimeout(a.sendT),a.sendT=null),a.sendDataList.length>0){for(var t=0;t<a.sendDataList.length;t++){var e=a.sendDataList[t];a.send(e,!0)}a.sendDataList=[]}},a.send=function(t,e){if(t.appid||(t.appid=a.appid),t.userId||(t.userId=a.openid),t.timestamp||(t.timestamp=""+Math.floor(a.getTime()/1e3)),e){var o=a.object2String(t,"&")+"&"+a.secret;t.sign=a.getMD5(o),a.httpRequest(a.shufenUrl,t,null,null,"POST")}else a.sendDataList.length>0?(a.sendDataList.push(t),a.queueToSend()):a.send(t,!0)},a.queueToSend=function(){if(a.sendDataList.length>0){var t=a.sendDataList.shift();a.send(t,!0),a.sendDataList.length>0?a.sendT=setTimeout(function(){a.queueToSend()},50):a.sendT=null}},a.getTime=function(){return(new Date).getTime()},a.generateUUID=function(){var t="mj_rsck_local_uuid"+a.appid,e=cc.sys.localStorage.getItem(t);if(e&&e.length>0)return null;var o=(new Date).getTime(),n=Math.floor(o/1e5)%1e6,i="xx-xxx-yxx-xx".replace(/[xy]/g,function(a){var t=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"==a?t:3&t|8).toString(16)}),r="mj_"+a.appid+"_"+n+"_"+i;return cc.sys.localStorage.setItem(t,r),r},a.object2String=function(a,t){for(var e=Object.keys(a).sort(),o="",n=0;n<e.length;n++)n==e.length-1?o+=e[n]+"="+a[e[n]]:o+=e[n]+"="+a[e[n]]+t;return console.log("\u6570\u636e1",o),o},a.getMD5=function(a){function t(a,t){return a<<t|a>>>32-t}function e(a,t){var e,o,n,i,r;return n=2147483648&a,i=2147483648&t,r=(1073741823&a)+(1073741823&t),(e=1073741824&a)&(o=1073741824&t)?2147483648^r^n^i:e|o?1073741824&r?3221225472^r^n^i:1073741824^r^n^i:r^n^i}function o(a,t,e){return a&t|~a&e}function n(a,t,e){return a&e|t&~e}function i(a,t,e){return a^t^e}function r(a,t,e){return t^(a|~e)}function p(a,n,i,r,p,l,s){return a=e(a,e(e(o(n,i,r),p),s)),e(t(a,l),n)}function l(a,o,i,r,p,l,s){return a=e(a,e(e(n(o,i,r),p),s)),e(t(a,l),o)}function s(a,o,n,r,p,l,s){return a=e(a,e(e(i(o,n,r),p),s)),e(t(a,l),o)}function c(a,o,n,i,p,l,s){return a=e(a,e(e(r(o,n,i),p),s)),e(t(a,l),o)}function u(a){var t,e="",o="";for(t=0;t<=3;t++)e+=(o="0"+(a>>>8*t&255).toString(16)).substr(o.length-2,2);return e}var d,h,m,f,z,y,g,b,v,P=new Array;for(P=function(a){for(var t,e=a.length,o=e+8,n=16*((o-o%64)/64+1),i=new Array(n-1),r=0,p=0;p<e;)r=p%4*8,i[t=(p-p%4)/4]=i[t]|a.charCodeAt(p)<<r,p++;return r=p%4*8,i[t=(p-p%4)/4]=i[t]|128<<r,i[n-2]=e<<3,i[n-1]=e>>>29,i}(a=function(a){a=a.replace(/\r\n/g,"\n");for(var t="",e=0;e<a.length;e++){var o=a.charCodeAt(e);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}(a)),y=1732584193,g=4023233417,b=2562383102,v=271733878,d=0;d<P.length;d+=16)h=y,m=g,f=b,z=v,y=p(y,g,b,v,P[d+0],7,3614090360),v=p(v,y,g,b,P[d+1],12,3905402710),b=p(b,v,y,g,P[d+2],17,606105819),g=p(g,b,v,y,P[d+3],22,3250441966),y=p(y,g,b,v,P[d+4],7,4118548399),v=p(v,y,g,b,P[d+5],12,1200080426),b=p(b,v,y,g,P[d+6],17,2821735955),g=p(g,b,v,y,P[d+7],22,4249261313),y=p(y,g,b,v,P[d+8],7,1770035416),v=p(v,y,g,b,P[d+9],12,2336552879),b=p(b,v,y,g,P[d+10],17,4294925233),g=p(g,b,v,y,P[d+11],22,2304563134),y=p(y,g,b,v,P[d+12],7,1804603682),v=p(v,y,g,b,P[d+13],12,4254626195),b=p(b,v,y,g,P[d+14],17,2792965006),y=l(y,g=p(g,b,v,y,P[d+15],22,1236535329),b,v,P[d+1],5,4129170786),v=l(v,y,g,b,P[d+6],9,3225465664),b=l(b,v,y,g,P[d+11],14,643717713),g=l(g,b,v,y,P[d+0],20,3921069994),y=l(y,g,b,v,P[d+5],5,3593408605),v=l(v,y,g,b,P[d+10],9,38016083),b=l(b,v,y,g,P[d+15],14,3634488961),g=l(g,b,v,y,P[d+4],20,3889429448),y=l(y,g,b,v,P[d+9],5,568446438),v=l(v,y,g,b,P[d+14],9,3275163606),b=l(b,v,y,g,P[d+3],14,4107603335),g=l(g,b,v,y,P[d+8],20,1163531501),y=l(y,g,b,v,P[d+13],5,2850285829),v=l(v,y,g,b,P[d+2],9,4243563512),b=l(b,v,y,g,P[d+7],14,1735328473),y=s(y,g=l(g,b,v,y,P[d+12],20,2368359562),b,v,P[d+5],4,4294588738),v=s(v,y,g,b,P[d+8],11,2272392833),b=s(b,v,y,g,P[d+11],16,1839030562),g=s(g,b,v,y,P[d+14],23,4259657740),y=s(y,g,b,v,P[d+1],4,2763975236),v=s(v,y,g,b,P[d+4],11,1272893353),b=s(b,v,y,g,P[d+7],16,4139469664),g=s(g,b,v,y,P[d+10],23,3200236656),y=s(y,g,b,v,P[d+13],4,681279174),v=s(v,y,g,b,P[d+0],11,3936430074),b=s(b,v,y,g,P[d+3],16,3572445317),g=s(g,b,v,y,P[d+6],23,76029189),y=s(y,g,b,v,P[d+9],4,3654602809),v=s(v,y,g,b,P[d+12],11,3873151461),b=s(b,v,y,g,P[d+15],16,530742520),y=c(y,g=s(g,b,v,y,P[d+2],23,3299628645),b,v,P[d+0],6,4096336452),v=c(v,y,g,b,P[d+7],10,1126891415),b=c(b,v,y,g,P[d+14],15,2878612391),g=c(g,b,v,y,P[d+5],21,4237533241),y=c(y,g,b,v,P[d+12],6,1700485571),v=c(v,y,g,b,P[d+3],10,2399980690),b=c(b,v,y,g,P[d+10],15,4293915773),g=c(g,b,v,y,P[d+1],21,2240044497),y=c(y,g,b,v,P[d+8],6,1873313359),v=c(v,y,g,b,P[d+15],10,4264355552),b=c(b,v,y,g,P[d+6],15,2734768916),g=c(g,b,v,y,P[d+13],21,1309151649),y=c(y,g,b,v,P[d+4],6,4149444226),v=c(v,y,g,b,P[d+11],10,3174756917),b=c(b,v,y,g,P[d+2],15,718787259),g=c(g,b,v,y,P[d+9],21,3951481745),y=e(y,h),g=e(g,m),b=e(b,f),v=e(v,z);return(u(y)+u(g)+u(b)+u(v)).toLowerCase()},a.httpRequest=function(a,t,e,o,n){void 0===n&&(n="GET");var i="";for(var r in t)i&&(i+="&"),i+=r+"="+t[r];var p=new XMLHttpRequest;p.onreadystatechange=function(){if(4==p.readyState)if(p.status>=200&&p.status<400){var t=p.responseText;if(console.log("\u8fd4\u56de\u6210\u529f",t),t){if(-1!=a.indexOf(".json"))n=JSON.parse(t);else var n=JSON.parse(t);o&&o(n,e)}else console.log("\u8fd4\u56de\u6570\u636e\u4e0d\u5b58\u5728"),o&&o(!1,e)}else console.log("\u8bf7\u6c42\u5931\u8d25"),o&&o(!1,e)},"GET"==n?(p.open("GET",a+"?"+i,!0),p.send()):(p.open("POST",a,!0),p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(i)),console.log("\u8c03\u7528\u94fe\u63a5\uff1a"+a+"?"+i)},a.appid="yr1lmttwpf89lwaw29ng",a.secret="bugj9akhlb2t23g91ieppkofbabx1j",a.shufenUrl="https://ddht.jinkezhexin.com/shufen/writeLog",a.loadStartTime=null,a.sendDataList=[],a.sendT=null,a.uuidStr=null,a.openid=null,a}();e.default=o,cc._RF.pop()},{}],ks_analytics:[function(a,t,e){"use strict";cc._RF.push(t,"ddb93iGOUtPtL4ZmYA8X8uq","ks_analytics"),Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function a(){}return a.init=function(t,e,o,n,i){if(void 0===t&&(t=""),void 0===e&&(e=""),void 0===o&&(o={}),void 0===n&&(n=function(){}),void 0===i&&(i=function(){}),""!=e){var r={app_id:t,js_code:e,query:JSON.stringify(o)};console.log("param",r),a.httpPost("init_code",r,function(a){console.log(a),null!=a.result?n(a):i(a)},"https://kszt-sdk.tianjinyuren.cn/ks")}else console.error("\u53c2\u6570code\u9519\u8bef")},a.init_uid=function(t,e,o,n,i,r){void 0===t&&(t=""),void 0===e&&(e=""),void 0===o&&(o="test_union_id"),void 0===n&&(n={}),void 0===i&&(i=function(){}),void 0===r&&(r=function(){});var p={app_id:t,open_id:e,union_id:o,query:JSON.stringify(n)};console.log("param",p),a.httpPost("init_uid",p,function(a){console.log(a),0==a.code?i(a):r(a)},"https://kszt-sdk.tianjinyuren.cn/ks")},a.ad_complete=function(t,e,o){void 0===t&&(t=""),void 0===e&&(e=function(){}),void 0===o&&(o=function(){});var n={open_id:t};a.httpPost("handle_ad_complete",n,function(a){console.log(a),0==a.code?e(a):o(a)},"https://kszt-sdk.tianjinyuren.cn/ks")},a.ad_exposure=function(t,e,o){void 0===t&&(t=""),void 0===e&&(e=function(){}),void 0===o&&(o=function(){});var n={open_id:t};a.httpPost("handle_ad_exposure",n,function(a){console.log(a),0==a.code?e(a):o(a)},"https://kszt-sdk.tianjinyuren.cn/ks")},a.httpGet=function(a,t,e,o){var n=new XMLHttpRequest,i=o+"/"+a;n.open("GET",i,!0),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var a=JSON.parse(n.responseText);null!==e&&e(a)}else console.error("httpGet status --\x3e",n.status)},n.send(t)},a.httpPost=function(a,t,e,o){var n=new XMLHttpRequest,i=o+"/"+a;n.open("POST",i,!0),n.setRequestHeader("Content-type","multipart/form-data"),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var a=JSON.parse(n.responseText);null!==e&&e(a)}else console.error("httpGet status --\x3e",n.status)},n.send(t)},a}();e.default=o,cc._RF.pop()},{}],lanfei:[function(a,t,e){"use strict";cc._RF.push(t,"17a64VHWytA+K73wlTh7LLf","lanfei");var o=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var n=a("./pzaChannel"),i=a("./pzakc");function r(a){var t=0;function e(a){for(var t=Array(a.length>>2),e=0;e<t.length;e++)t[e]=0;for(var o=0;o<8*a.length;o+=8)t[o>>5]|=(255&a.charCodeAt(o/8))<<o%32;return t}function o(a){for(var t="",e=0;e<32*a.length;e+=8)t+=String.fromCharCode(a[e>>5]>>>e%32&255);return t}function n(a,t){a[t>>5]|=128<<t%32,a[14+(t+64>>>9<<4)]=t;for(var e=1732584193,o=-271733879,n=-1732584194,i=271733878,u=0;u<a.length;u+=16){var d=e,h=o,m=n,f=i;e=r(e,o,n,i,a[u+0],7,-680876936),i=r(i,e,o,n,a[u+1],12,-389564586),n=r(n,i,e,o,a[u+2],17,606105819),o=r(o,n,i,e,a[u+3],22,-1044525330),e=r(e,o,n,i,a[u+4],7,-176418897),i=r(i,e,o,n,a[u+5],12,1200080426),n=r(n,i,e,o,a[u+6],17,-1473231341),o=r(o,n,i,e,a[u+7],22,-45705983),e=r(e,o,n,i,a[u+8],7,1770035416),i=r(i,e,o,n,a[u+9],12,-1958414417),n=r(n,i,e,o,a[u+10],17,-42063),o=r(o,n,i,e,a[u+11],22,-1990404162),e=r(e,o,n,i,a[u+12],7,1804603682),i=r(i,e,o,n,a[u+13],12,-40341101),n=r(n,i,e,o,a[u+14],17,-1502002290),e=p(e,o=r(o,n,i,e,a[u+15],22,1236535329),n,i,a[u+1],5,-165796510),i=p(i,e,o,n,a[u+6],9,-1069501632),n=p(n,i,e,o,a[u+11],14,643717713),o=p(o,n,i,e,a[u+0],20,-373897302),e=p(e,o,n,i,a[u+5],5,-701558691),i=p(i,e,o,n,a[u+10],9,38016083),n=p(n,i,e,o,a[u+15],14,-660478335),o=p(o,n,i,e,a[u+4],20,-405537848),e=p(e,o,n,i,a[u+9],5,568446438),i=p(i,e,o,n,a[u+14],9,-1019803690),n=p(n,i,e,o,a[u+3],14,-187363961),o=p(o,n,i,e,a[u+8],20,1163531501),e=p(e,o,n,i,a[u+13],5,-1444681467),i=p(i,e,o,n,a[u+2],9,-51403784),n=p(n,i,e,o,a[u+7],14,1735328473),e=l(e,o=p(o,n,i,e,a[u+12],20,-1926607734),n,i,a[u+5],4,-378558),i=l(i,e,o,n,a[u+8],11,-2022574463),n=l(n,i,e,o,a[u+11],16,1839030562),o=l(o,n,i,e,a[u+14],23,-35309556),e=l(e,o,n,i,a[u+1],4,-1530992060),i=l(i,e,o,n,a[u+4],11,1272893353),n=l(n,i,e,o,a[u+7],16,-155497632),o=l(o,n,i,e,a[u+10],23,-1094730640),e=l(e,o,n,i,a[u+13],4,681279174),i=l(i,e,o,n,a[u+0],11,-358537222),n=l(n,i,e,o,a[u+3],16,-722521979),o=l(o,n,i,e,a[u+6],23,76029189),e=l(e,o,n,i,a[u+9],4,-640364487),i=l(i,e,o,n,a[u+12],11,-421815835),n=l(n,i,e,o,a[u+15],16,530742520),e=s(e,o=l(o,n,i,e,a[u+2],23,-995338651),n,i,a[u+0],6,-198630844),i=s(i,e,o,n,a[u+7],10,1126891415),n=s(n,i,e,o,a[u+14],15,-1416354905),o=s(o,n,i,e,a[u+5],21,-57434055),e=s(e,o,n,i,a[u+12],6,1700485571),i=s(i,e,o,n,a[u+3],10,-1894986606),n=s(n,i,e,o,a[u+10],15,-1051523),o=s(o,n,i,e,a[u+1],21,-2054922799),e=s(e,o,n,i,a[u+8],6,1873313359),i=s(i,e,o,n,a[u+15],10,-30611744),n=s(n,i,e,o,a[u+6],15,-1560198380),o=s(o,n,i,e,a[u+13],21,1309151649),e=s(e,o,n,i,a[u+4],6,-145523070),i=s(i,e,o,n,a[u+11],10,-1120210379),n=s(n,i,e,o,a[u+2],15,718787259),o=s(o,n,i,e,a[u+9],21,-343485551),e=c(e,d),o=c(o,h),n=c(n,m),i=c(i,f)}return Array(e,o,n,i)}function i(a,t,e,o,n,i){return c((r=c(c(t,a),c(o,i)))<<(p=n)|r>>>32-p,e);var r,p}function r(a,t,e,o,n,r,p){return i(t&e|~t&o,a,t,n,r,p)}function p(a,t,e,o,n,r,p){return i(t&o|e&~o,a,t,n,r,p)}function l(a,t,e,o,n,r,p){return i(t^e^o,a,t,n,r,p)}function s(a,t,e,o,n,r,p){return i(e^(t|~o),a,t,n,r,p)}function c(a,t){var e=(65535&a)+(65535&t);return(a>>16)+(t>>16)+(e>>16)<<16|65535&e}return function(a){for(var e,o=t?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<a.length;i++)e=a.charCodeAt(i),n+=o.charAt(e>>>4&15)+o.charAt(15&e);return n}(function(a){return o(n(e(a),8*a.length))}(function(a){for(var t,e,o="",n=-1;++n<a.length;)t=a.charCodeAt(n),e=n+1<a.length?a.charCodeAt(n+1):0,55296<=t&&t<=56319&&56320<=e&&e<=57343&&(t=65536+((1023&t)<<10)+(1023&e),n++),t<=127?o+=String.fromCharCode(t):t<=2047?o+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?o+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(o+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return o}(a)))}var p=cc._decorator,l=p.ccclass,s=(p.property,function(){function a(){}var t;return t=a,a.mkSignStr=function(a,e){a.appid=t.appId,a.appsecret=t.appSecret,a.time=e;var o=[];for(var n in a)o.push(""+n);for(var i="",r=(n=0,(o=o.sort()).length);n<r;n++)i+="&"+o[n]+"="+a[o[n]];return i.length<=0?"":i.substring(1)},a.mkSign=function(a,e){var o=r(t.mkSignStr(a,e));return delete a.appsecret,o},a.mkHeader=function(a,e,o){var n=Math.floor(Date.now()/1e3),i=t.mkSign(a,n);e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("KP-Appid",t.appId),e.setRequestHeader("KP-Timestamp",n),e.setRequestHeader("KP-Sign",i),o&&e.setRequestHeader("KP-Token",o)},a.req=function(a,e,o,n){n||(n=function(a){if(a)return console.error(a)});var i=new XMLHttpRequest;i.open("POST",a,!0),t.mkHeader(e,i,o);var r=JSON.stringify(e);console.log("post j:"+r),i.send(r),i.onerror=function(a){n(a)},i.onload=function(){if(200==i.status){if("object"==typeof i.responseText)return n(null,i.responseText);var t={postERR:""+i.responseText};try{t=JSON.parse(i.responseText)}catch(e){return console.error(e),n(null,{code:"555",err:"jsonErr:"+i.responseText,url:a})}return n(null,t)}return n(null,{code:""+i.status})}},a.getToken=function(a,e){var o="4";"wx"==n.pzaChannel.instance().channel?o="3":"tt"==n.pzaChannel.instance().channel&&(o="4");var i={kunpo_appid:t.appId,id:a,channelid:o};t.req("https://game-admin.lanfeitech.com/api/game/getToken",i,null,function(a,t){if(a)return console.error(a),e(a);console.log("LanfeiGetToken====re:",t),e(null,t)})},a.get_list_task=function(a,e,o){var i=4;"wx"==n.pzaChannel.instance().channel?i=3:"tt"==n.pzaChannel.instance().channel&&(i=4);var r={app_account:a,show_position:0,channel_id:i};t.req("https://game-admin.lanfeitech.com/api/minigame/integral/get_list_task",r,e,function(a,t){if(a)return console.error(a),o(a);console.log("get_list_task-re:",t),o(null,t)})},a.get_state=function(a,e,o){var i=4;"wx"==n.pzaChannel.instance().channel?i=3:"tt"==n.pzaChannel.instance().channel&&(i=4);var r={target_kunpo_appid:"yC0pRoqd",app_account:a,channel_id:i};t.req("https://game-admin.lanfeitech.com/api/minigame/integral/get_state",r,e,function(a,t){if(a)return console.error(a),o(a);o(null,t)})},a.do_get_reward=function(a,e,o,i){var r=4;"wx"==n.pzaChannel.instance().channel?r=3:"tt"==n.pzaChannel.instance().channel&&(r=4);var p={received_kunpo_appid:"yC0pRoqd",app_account:a,channel_id:r,task_id:o};t.req("https://game-admin.lanfeitech.com/api/minigame/integral/receive_reward",p,e,function(a,t){if(a)return console.error(a),i(a);console.log("do_get_reward-re:",t),i(null,t)})},a.receive_reward=function(a,e,o,r,p,l,s){var c=n.pzaChannel.instance().getPara("appId");n.pzaChannel.isConfRemote&&(c="wx9f06a674f593285a"),i.default.jpost("https://ga.gamejym.com/fcm/cps/receive_reward",{appId:c,cid:o,openId:a,reward:r,pickState:s},function(o,n){if(o)return console.error(o),void(p&&p(o));console.log("receive_reward code ",n),0==n.code&&(0==l?t.do_get_reward(a,e,r,function(a,t){if(a)return console.error(a),void(p&&p(a));p&&p(null,t,l)}):p&&p(null,null,l))})},a.jumpToGame=function(a,t){var e=3,o="?wxgamecid=CCBgAAoXkpQY9Nnu6r-gll";"wx"==n.pzaChannel.instance().channel&&(e=3,o="?wxgamecid=CCBgAAoXkpQY9Nnu6r-gll"),console.log("jumpToGame msg:",o);var r=n.pzaChannel.instance().getPara("appId");n.pzaChannel.instance().getChannel().channelObj.navigateToMiniProgram({appId:a,path:o,extraData:{from_kunpo_appid:"x8xDF4cn",from_app_account:t,to_kunpo_appid:"yC0pRoqd",channel_id:e},success:function(){i.default.jpost("https://ga.gamejym.com/fcm/cps/jumpTo",{appId:r,cid:a,openId:t})},fail:function(a){console.error("\u8df3\u8f6c\u5931\u8d25 :",a)},complete:function(){console.error("\u8df3\u8f6c\u7ed3\u675f")}})},a.jumpGame=function(a,t){console.log("targetAppID ",a,"openId ",t);var e=n.pzaChannel.instance().getPara("appId");n.pzaChannel.instance().getChannel().channelObj.navigateToMiniProgram({appId:a,extraData:{fromAppId:e,fromUserId:t,fromloginappid:t,from_app_account:t},path:"?fromAppId="+e+"&fromUserId="+t+"&from_app_account="+t+"&fromloginappid="+t,success:function(){i.default.jpost("https://ga.gamejym.com/fcm/cps/jumpTo",{appId:e,cid:a,openId:t})},fail:function(){console.error("\u8df3\u8f6c\u5931\u8d25")},complete:function(){console.error("\u8df3\u8f6c\u7ed3\u675f")}})},a.getTask=function(a,t,e){var o=n.pzaChannel.instance().getPara("appId");n.pzaChannel.isConfRemote&&(o="wx987d4570f328b6d4");var r={appId:o,cid:a,openId:t};i.default.jpost("https://ga.gamejym.com/fcm/cps/getTask",r,function(a,t){if(a)return console.error(a),void e(a,null);console.log("getTask-re:",t),e(null,t)})},a.appId="x8xDF4cn",a.appSecret="255cc053a3f12cd68a650ae2b35936b4",a.token=null,t=o([l],a)}());e.default=s,cc._RF.pop()},{"./pzaChannel":"pzaChannel","./pzakc":"pzakc"}],pzaAES:[function(a,t,e){"use strict";cc._RF.push(t,"b3fcfx7pd9Mp7FHwnuJb1Jb","pzaAES"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAES=void 0;var o=a("./pzakc"),n=function(){function a(t){if(this.outMap={base64:a.base64,hex:a.hex,binary:function(a){return a}},this.inMap={base64:a.base64_to_binary,hex:a.str2hex,binary:function(a){return a}},this.modMap={cbc:{mEncrypt:function(t,e,o){e=a.pad(e);for(var n=new Uint8Array(e.length),i=o,r=0;r<e.length;r+=a.blockSize)i=t.encrypt(a.xor(e.slice(r,r+a.blockSize),i)),n.set(i,r);return n},mDecrypt:function(t,e,o){for(var n=new Uint8Array(e.length),i=o,r=0;r<e.length;r+=a.blockSize){var p=e.slice(r,r+a.blockSize);n.set(a.xor(t.decrypt(p),i),r),i=p}return a.unpad(n)}},cfb:{mEncrypt:function(t,e,o){for(var n=new Uint8Array(e.length),i=o,r=0;r<e.length;r+=a.blockSize)i=a.xor(e.slice(r,r+a.blockSize),t.encrypt(i)),n.set(i,r);return n},mDecrypt:function(t,e,o){for(var n=new Uint8Array(e.length),i=o,r=0;r<e.length;r+=a.blockSize){var p=e.slice(r,Math.min(r+a.blockSize,e.length));n.set(a.xor(p,t.encrypt(i)),r),i=p}return n}},ecb:{mEncrypt:function(t,e){if((e=a.pad(e)).length%a.blockSize!=0)throw"Message is not properly padded";for(var o=new Uint8Array(e.length),n=0;n<e.length;n+=a.blockSize)o.set(t.encrypt(e.slice(n,n+a.blockSize)),n);return o},mDecrypt:function(t,e){if(e.length%a.blockSize!=0)throw"Message is not properly padded";for(var o=new Uint8Array(e.length),n=0;n<e.length;n+=a.blockSize)o.set(t.decrypt(e.slice(n,n+a.blockSize)),n);return a.unpad(o)}}},this.opt={mode:"cbc",iv:new Uint8Array(16),padding:"pkcs5",output:"base64"},!t)throw new Error("AES requires key!");switch(t.length){case 16:this.NK=4,this.NR=10;break;case 24:this.NK=6,this.NR=12;break;case 32:this.NK=8,this.NR=14;break;default:throw new Error("AES supports only 16, 24 and 32 bytes keys!")}this.KEY=new Array(a.AES_NB*(this.NR+1)*4),this.expandKey(t)}return a.subWord=function(t){for(var e=0;e<4;e++)t[e]=a.AES_SBOX[16*((240&t[e])>>4)+(15&t[e])]},a.rotWord=function(a){for(var t=a[0],e=0;e<3;e++)a[e]=a[e+1];a[3]=t},a.gmult=function(a,t){for(var e=0,o=0,n=0;n<8;n++)1&t&&(e^=a),o=128&a,a<<=1,o&&(a^=27),t>>=1;return e},a.coefAdd=function(a,t,e){e[0]=a[0]^t[0],e[1]=a[1]^t[1],e[2]=a[2]^t[2],e[3]=a[3]^t[3]},a.coefMult=function(t,e,o){o[0]=a.gmult(t[0],e[0])^a.gmult(t[3],e[1])^a.gmult(t[2],e[2])^a.gmult(t[1],e[3]),o[1]=a.gmult(t[1],e[0])^a.gmult(t[0],e[1])^a.gmult(t[3],e[2])^a.gmult(t[2],e[3]),o[2]=a.gmult(t[2],e[0])^a.gmult(t[1],e[1])^a.gmult(t[0],e[2])^a.gmult(t[3],e[3]),o[3]=a.gmult(t[3],e[0])^a.gmult(t[2],e[1])^a.gmult(t[1],e[2])^a.gmult(t[0],e[3])},a.xor=function(a,t){for(var e=new Uint8Array(a.length),o=0;o<e.length;o++)e[o]=a[o]^t[o%t.length];return e},a.hex=function(a){for(var t="",e=0;e<a.length;e++)t+=a[e].toString(16).padStart(2,"0");return t},a.str2hex=function(a){if(a.length%2!=0)throw"Invalid hex format";for(var t=new Uint8Array(a.length>>1),e=0,o=0;o<a.length;o+=2)t[e++]=parseInt(a.substring(o,o+2),16);return t},a.concat=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];for(var e=a.reduce(function(a,t){return a+t.length},0),o=new Uint8Array(e),n=0,i=0;i<a.length;i++)o.set(a[i],n),n+=a[i].length;return o},a.random_bytes=function(a){for(var t=new Uint8Array(a),e=0;e<a;e++)t[e]=1+(254*Math.random()|0);return t},a.pad=function(a){var t=16*Math.ceil((a.length+1)/16),e=t-a.length,o=new Uint8Array(t);return o.set(a,0),o.set(new Array(e).fill(e),a.length),o},a.unpad=function(a){var t=a[a.length-1];return new Uint8Array(a.slice(0,a.length-t))},a.base64=function(t){return a.base64encode(String.fromCharCode.apply(null,t))},a.base64encode=function(t){var e,o,n,i,r,p;for(n=t.length,o=0,e="";o<n;){if(i=255&t.charCodeAt(o++),o==n){e+=a.base64EncodeChars.charAt(i>>2),e+=a.base64EncodeChars.charAt((3&i)<<4),e+="==";break}if(r=t.charCodeAt(o++),o==n){e+=a.base64EncodeChars.charAt(i>>2),e+=a.base64EncodeChars.charAt((3&i)<<4|(240&r)>>4),e+=a.base64EncodeChars.charAt((15&r)<<2),e+="=";break}p=t.charCodeAt(o++),e+=a.base64EncodeChars.charAt(i>>2),e+=a.base64EncodeChars.charAt((3&i)<<4|(240&r)>>4),e+=a.base64EncodeChars.charAt((15&r)<<2|(192&p)>>6),e+=a.base64EncodeChars.charAt(63&p)}return e},a.base64decode=function(t){var e,o,n,i,r,p,l;for(p=t.length,r=0,l="";r<p;){do{e=a.base64DecodeChars[255&t.charCodeAt(r++)]}while(r<p&&-1==e);if(-1==e)break;do{o=a.base64DecodeChars[255&t.charCodeAt(r++)]}while(r<p&&-1==o);if(-1==o)break;l+=String.fromCharCode(e<<2|(48&o)>>4);do{if(61==(n=255&t.charCodeAt(r++)))return l;n=a.base64DecodeChars[n]}while(r<p&&-1==n);if(-1==n)break;l+=String.fromCharCode((15&o)<<4|(60&n)>>2);do{if(61==(i=255&t.charCodeAt(r++)))return l;i=a.base64DecodeChars[i]}while(r<p&&-1==i);if(-1==i)break;l+=String.fromCharCode((3&n)<<6|i)}return l},a.utf16to8=function(a){var t,e,o,n;for(t="",o=a.length,e=0;e<o;e++)(n=a.charCodeAt(e))>=1&&n<=127?t+=a.charAt(e):n>2047?(t+=String.fromCharCode(224|n>>12&15),t+=String.fromCharCode(128|n>>6&63),t+=String.fromCharCode(128|n>>0&63)):(t+=String.fromCharCode(192|n>>6&31),t+=String.fromCharCode(128|n>>0&63));return t},a.utf8to16=function(a){var t,e,o,n,i,r;for(t="",o=a.length,e=0;e<o;)switch((n=a.charCodeAt(e++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=a.charAt(e-1);break;case 12:case 13:i=a.charCodeAt(e++),t+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=a.charCodeAt(e++),r=a.charCodeAt(e++),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&r)<<0)}return t},a.base64_to_binary=function(t){for(var e=a.base64decode(t),o=e.length,n=new Uint8Array(o),i=0;i<o;i++)n[i]=e.charCodeAt(i);return n},a.computeMessage=function(a){if("string"!=typeof a)return a;for(var t,e,o=a,n=[],i=0;i<o.length;i++){t=o.charCodeAt(i),e=[];do{e.push(255&t),t>>=8}while(t);n=n.concat(e.reverse())}return Uint8Array.from(n)},a.create=function(t,e){var n=a.computeMessage(t),i=new a(n);return e&&(o.default.forMap(i.opt,function(a){e[a]&&(i.opt[a]=e[a])}),"string"==typeof i.opt.iv&&(i.opt.iv=a.computeMessage(i.opt.iv))),i},a.prototype.encString=function(t){var e=this.modMap[this.opt.mode];if(!e)throw"Unknown mode:"+this.opt.mode;var o=e.mEncrypt(this,a.computeMessage(t),this.opt.iv);return(0,this.outMap[this.opt.output])(o)},a.prototype.Uint8ArrayToString=function(a){var t,e,o,n,i,r;for(t="",o=a.length,e=0;e<o;)switch((n=a[e++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(n);break;case 12:case 13:i=a[e++],t+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=a[e++],r=a[e++],t+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&r)<<0)}return t},a.prototype.decString=function(a){var t=this.modMap[this.opt.mode];if(!t)throw"Unknown mode:"+this.opt.mode;var e=this.inMap[this.opt.output],o=t.mDecrypt(this,e(a),this.opt.iv);return this.Uint8ArrayToString(o)},a.prototype.encrypt=function(a){var t=this.createState(a);this.addRoundKey(t,0);for(var e=1;e<this.NR;e++)this.subBytes(t),this.shiftRows(t),this.mixColumns(t),this.addRoundKey(t,e);return this.subBytes(t),this.shiftRows(t),this.addRoundKey(t,this.NR),this.stateToResult(t)},a.prototype.decrypt=function(a){var t=this.createState(a);this.addRoundKey(t,this.NR);for(var e=this.NR-1;e>=1;e--)this.shiftRows(t,!0),this.subBytes(t,!0),this.addRoundKey(t,e),this.mixColumns(t,!0);return this.shiftRows(t,!0),this.subBytes(t,!0),this.addRoundKey(t,0),this.stateToResult(t)},a.prototype.createState=function(t){for(var e=new Uint8Array(4*a.AES_NB),o=0;o<4;o++)for(var n=0;n<a.AES_NB;n++)e[a.AES_NB*o+n]=t[o+4*n];return e},a.prototype.stateToResult=function(t){for(var e=new Uint8Array(16),o=0;o<4;o++)for(var n=0;n<a.AES_NB;n++)e[o+4*n]=t[a.AES_NB*o+n];return e},a.prototype.expandKey=function(t){for(var e=new Array(4),o=a.AES_NB*(this.NR+1),n=0;n<this.NK;n++)this.KEY[4*n]=t[4*n],this.KEY[4*n+1]=t[4*n+1],this.KEY[4*n+2]=t[4*n+2],this.KEY[4*n+3]=t[4*n+3];for(n=this.NK;n<o;n++)e[0]=this.KEY[4*(n-1)],e[1]=this.KEY[4*(n-1)+1],e[2]=this.KEY[4*(n-1)+2],e[3]=this.KEY[4*(n-1)+3],n%this.NK==0?(a.rotWord(e),a.subWord(e),a.coefAdd(e,a.roundConstant(n/this.NK),e)):this.NK>6&&n%this.NK==4&&a.subWord(e),this.KEY[4*n]=this.KEY[4*(n-this.NK)]^e[0],this.KEY[4*n+1]=this.KEY[4*(n-this.NK)+1]^e[1],this.KEY[4*n+2]=this.KEY[4*(n-this.NK)+2]^e[2],this.KEY[4*n+3]=this.KEY[4*(n-this.NK)+3]^e[3]},a.roundConstant=function(t){if(1==t)a.AES_R[0]=1;else if(t>1)for(a.AES_R[0]=2,t--;t-1>0;)a.AES_R[0]=a.gmult(a.AES_R[0],2),t--;return a.AES_R},a.prototype.addRoundKey=function(t,e){for(var o=0;o<a.AES_NB;o++)t[o]^=this.KEY[4*a.AES_NB*e+4*o],t[a.AES_NB+o]^=this.KEY[4*a.AES_NB*e+4*o+1],t[2*a.AES_NB+o]^=this.KEY[4*a.AES_NB*e+4*o+2],t[3*a.AES_NB+o]^=this.KEY[4*a.AES_NB*e+4*o+3]},a.prototype.mixColumns=function(t,e){void 0===e&&(e=!1);for(var o=e?[14,9,13,11]:[2,1,1,3],n=new Array(4),i=new Array(4),r=0;r<a.AES_NB;r++){for(var p=0;p<4;p++)n[p]=t[a.AES_NB*p+r];for(a.coefMult(o,n,i),p=0;p<4;p++)t[a.AES_NB*p+r]=i[p]}},a.prototype.shiftRows=function(t,e){void 0===e&&(e=!1);for(var o=1;o<4;o++)for(var n=0;n<o;){var i=e?t[a.AES_NB*o+a.AES_NB-1]:t[a.AES_NB*o+0];if(e){for(var r=a.AES_NB-1;r>0;r--)t[a.AES_NB*o+r]=t[a.AES_NB*o+r-1];t[a.AES_NB*o]=i}else{for(r=1;r<a.AES_NB;r++)t[a.AES_NB*o+r-1]=t[a.AES_NB*o+r];t[a.AES_NB*o+a.AES_NB-1]=i}n++}},a.prototype.subBytes=function(t,e){void 0===e&&(e=!1);for(var o=e?a.AES_INVERSE_SBOX:a.AES_SBOX,n=0;n<4;n++)for(var i=0;i<a.AES_NB;i++){var r=(240&t[a.AES_NB*n+i])>>4,p=15&t[a.AES_NB*n+i];t[a.AES_NB*n+i]=o[16*r+p]}},a.AES_NB=4,a.AES_SBOX=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],a.AES_INVERSE_SBOX=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],a.AES_R=[2,0,0,0],a.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a.base64DecodeChars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),a.blockSize=16,a}();e.pzaAES=n,cc._RF.pop()},{"./pzakc":"pzakc"}],pzaATest:[function(a,t,e){"use strict";cc._RF.push(t,"00f4e7Fz0RATYep1rVwZB7o","pzaATest");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaATest=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sp1=null,t.sp2=null,t.sp3=null,t.sp4=null,t.sp5=null,t.pic1=null,t.pic2=null,t.theSlot=null,t.atlasSlotAttMap=new Map,t}return n(t,a),t.prototype.onLoad=function(){var a=this;this.sp2.node.active=!1,this.initAtlasSlot(),this.scheduleOnce(function(){a.changeA()},1),this.scheduleOnce(function(){a.changeB()},2)},t.prototype.initAtlasSlot=function(){for(var a=this.sp2._skeleton.slots,t=0;t<a.length;t++){var e=a[t],o=e.getAttachment();o&&this.atlasSlotAttMap.set(e.data.name,o)}},t.prototype.setSlotAtt=function(a,t,e,o,n){var i=a.findSlot(e);if(i)if(t){var r=this.atlasSlotAttMap.get(t);if(r){var p=r.copy();return p.x=o,p.y=n,p.updateOffset(),i.setAttachment(p),i}console.log("atlasSlotName\u4e0d\u5b58\u5728",t)}else i.setAttachment(null);else console.log("targetSlotName\u4e0d\u5b58\u5728",e)},t.prototype.changeB=function(){var a=this;this.sp3.setSkin("1zombie"),this.setSlotAtt(this.sp3,"5body1","5body",262.41,-1.5),this.scheduleOnce(function(){a.setSlotAtt(a.sp3,"10pr","10pr",-11.57,78.5),a.sp3.paused=!0},2),this.scheduleOnce(function(){a.setSlotAtt(a.sp3,null,"10pr",0,0),a.setSlotAtt(a.sp3,"5body3","5body",262.41,-1.5),a.sp3.timeScale=1},5)},t.prototype.changeA=function(){console.log("pic1",this.pic1.spriteFrame);var a=this.pic1.spriteFrame._texture,t=new sp.SkeletonTexture;t.setRealTexture(a),t._image=a._image;var e=this.pic1.spriteFrame._rect,o=new sp.spine.TextureAtlasPage;o.name=a.name,o.uWrap=sp.spine.TextureWrap.ClampToEdge,o.vWrap=sp.spine.TextureWrap.ClampToEdge,o.texture=t,o.texture.setWraps(o.uWrap,o.vWrap),o.width=e.width,o.height=e.height;var n=new sp.spine.TextureAtlasRegion;n.page=o,n.width=e.width,n.height=e.height,n.originalWidth=a.width,n.originalHeight=a.height,n.offsetX=e.x,n.offsetY=e.y,n.rotate?(n.u=e.x/a.width,n.v=e.y/a.height,n.u2=(e.x+e.height)/a.width,n.v2=(e.y+e.width)/a.height):(n.u=e.x/a.width,n.v=e.y/a.height,n.u2=(e.x+e.width)/a.width,n.v2=(e.y+e.height)/a.height,console.log("\u4e0d\u8f6c")),n.texture=t,console.log("region",n);var i=this.sp1.findSlot("head").getAttachment();i.region=n,i instanceof sp.spine.MeshAttachment?i.updateUVs():i.updateOffset(),console.log("changeA")},i([l(sp.Skeleton)],t.prototype,"sp1",void 0),i([l(sp.Skeleton)],t.prototype,"sp2",void 0),i([l(sp.Skeleton)],t.prototype,"sp3",void 0),i([l(sp.Skeleton)],t.prototype,"sp4",void 0),i([l(sp.Skeleton)],t.prototype,"sp5",void 0),i([l(cc.Sprite)],t.prototype,"pic1",void 0),i([l(cc.Sprite)],t.prototype,"pic2",void 0),i([p],t)}(cc.Component);e.pzaATest=s,cc._RF.pop()},{}],pzaAbsorbIronEquip:[function(a,t,e){"use strict";cc._RF.push(t,"d06f0s2FhRHL5NufHOcxmir","pzaAbsorbIronEquip");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAbsorbIronEquip=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=a("../Data/pzaZombieEnum"),s=a("../../Common/pzaGameCommonPool"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.atlasSpine=null,t.jackBoxAni=null,t.poolPrefab=null,t.absorbFlying=!0,t.returnTime=0,t.plantData=null,t}return n(t,a),t.prototype.init=function(a,t,e,o){var n=this;if(void 0===o&&(o=0),null!=a&&null!=t&&null!=t.zombieData){this.plantData=a,this.node.zIndex=5;var i=cc.v2(80,100);switch(this.atlasSpine.node.active=!0,this.jackBoxAni.node.active=!1,this.atlasSpine.paused=!0,this.atlasSpine.node.opacity=0,this.atlasSpine.node.opacity=255,t.zombieData.zombieType){case l.pzaZombieEnum.BUCKET_HEAD_ZOMBIE:case l.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE:case l.pzaZombieEnum.PeaZombie3:e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("3hat3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("3hat2"):this.atlasSpine.setSkin("3hat1");break;case l.pzaZombieEnum.SCREEN_DOOR_ZOMBIE:case l.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2:case l.pzaZombieEnum.PeaZombie4:e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("4door3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("4door2"):this.atlasSpine.setSkin("4door1");break;case l.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3:case l.pzaZombieEnum.GARGANTUAR2:case l.pzaZombieEnum.RED_GARGANTUAR2:this.createZjAni(e,o);break;case l.pzaZombieEnum.GARGANTUAR3:case l.pzaZombieEnum.RED_GARGANTUAR3:this.createZjAni(e,o,1);break;case l.pzaZombieEnum.GARGANTUAR4:case l.pzaZombieEnum.RED_GARGANTUAR4:this.createZjAni(e,o,2);break;case l.pzaZombieEnum.FOOTBALL_ZOMBIE:e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("6hat3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("6hat2"):this.atlasSpine.setSkin("6hat1");break;case l.pzaZombieEnum.JACK_ZOMBIE:this.jackBoxAni.node.active=!0,this.atlasSpine.node.active=!1,this.jackBoxAni.pauseAnimation(),i=cc.v2(10,60);break;case l.pzaZombieEnum.POGO_ZOMBIE:case l.pzaZombieEnum.POGO_ZOMBIE2:e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("13pr3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("13pr2"):this.atlasSpine.setSkin("13pr1");break;case l.pzaZombieEnum.POGO_ZOMBIE3:0==o?e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("13pr3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("13pr2"):this.atlasSpine.setSkin("13pr1"):e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("3hat3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("3hat2"):this.atlasSpine.setSkin("3hat1");break;case l.pzaZombieEnum.DIGGER_ZOMBIE:case l.pzaZombieEnum.DIGGERFOOTBALL_ZOMBIE2:this.atlasSpine.setSkin("20pr1");break;case l.pzaZombieEnum.LADDER_ZOMBIE:case l.pzaZombieEnum.LADDER_ZOMBIE2:case l.pzaZombieEnum.LADDER_ZOMBIE4:e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("14pr4"):(l.pzaHurtStateEnum.HURT,this.atlasSpine.setSkin("14pr4"));break;case l.pzaZombieEnum.LADDER_ZOMBIE3:1==o?e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("14pr4"):(l.pzaHurtStateEnum.HURT,this.atlasSpine.setSkin("14pr4")):e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("3hat3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("3hat2"):this.atlasSpine.setSkin("3hat1");break;case l.pzaZombieEnum.CATAPULT_ZOMBIE2:case l.pzaZombieEnum.FOOTBALL_ZOMBIE2:e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("7hat3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("7hat2"):this.atlasSpine.setSkin("7hat1")}if(null!=t.logicPos?this.node.setPosition(t.logicPos.clone()):t.zombieData.zombieType==l.pzaZombieEnum.Mac_GARGANTUAR&&(this.node.y+=180,this.node.x-=40),null!=a.logicPos){var r=a.logicPos.clone();null!=i&&(r.x+=i.x,r.y+=i.y),this.absorbFlying=!0,this.node.runAction(cc.sequence(cc.moveTo(.5,r),cc.callFunc(function(){n.absorbFlying=!1,n.returnTime=10,n.node.zIndex=10*-a.yIndex})))}}},t.prototype.createZjAni=function(a,t,e){void 0===t&&(t=0),void 0===e&&(e=0),2==t?a==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("4door3"):a==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("4door2"):this.atlasSpine.setSkin("4door1"):1==t&&(1==e?a==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("7hat3"):a==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("7hat2"):this.atlasSpine.setSkin("7hat1"):2==e?a==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("8hat3"):a==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("8hat2"):this.atlasSpine.setSkin("8hat1"):a==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("3hat3"):a==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("3hat2"):this.atlasSpine.setSkin("3hat1"))},t.prototype.labbyInit=function(a,t){var e=this;if(this.plantData=a,this.node.zIndex=5,this.jackBoxAni.node.active=!1,this.atlasSpine.node.active=!0,null!=t.logicPos&&this.node.setPosition(t.logicPos.clone()),null!=a.logicPos){var o=a.logicPos.clone();this.absorbFlying=!0,this.node.runAction(cc.sequence(cc.moveTo(.5,o),cc.callFunc(function(){e.absorbFlying=!1,e.returnTime=10,e.node.zIndex=10*-a.yIndex})))}},t.prototype.logicUpdate=function(a){this.absorbFlying||(null==this.plantData||this.plantData.isDead?this.close():(this.returnTime-=a,this.returnTime<=0&&this.close()))},t.prototype.pauseSelf=function(){this.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.node.resumeAllActions()},t.prototype.close=function(){this.poolPrefab?s.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([d(sp.Skeleton)],t.prototype,"atlasSpine",void 0),i([d(p.pzaSpineController)],t.prototype,"jackBoxAni",void 0),i([d(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([u],t)}(r.pzaBaseComponent);e.pzaAbsorbIronEquip=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaZombieEnum":"pzaZombieEnum"}],pzaAchieveItem:[function(a,t,e){"use strict";cc._RF.push(t,"3d125L0iahI36Dm6qIZMrRf","pzaAchieveItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaWorldEventManager"),c=a("../Load/pzaBundleObjectPool"),u=a("./pzaAchieveMgr"),d=a("./pzaAchieveRewardItem"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.t_name=null,t.t_desc=null,t.reward_prefab=null,t.pic_icon=null,t.pic_bg=null,t.bt_reward=null,t.reward_rec=null,t.reward=null,t.rewardContainer=null,t.special=null,t.achieve=null,t.bg_res=null,t.rewardItems=null,t}return n(t,a),t.prototype.onEnable=function(){s.pzaWorldEventManager.addListener(s.pzaWorldEventType.SPECIAL_ACH,this.showSpecial,this),this.bt_reward.on(cc.Node.EventType.TOUCH_END,this.clickRecieveReward,this)},t.prototype.onDisable=function(){s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.SPECIAL_ACH,this.showSpecial,this),this.bt_reward.off(cc.Node.EventType.TOUCH_END,this.clickRecieveReward,this)},t.prototype.show=function(a,t,e){return void 0===e&&(e=null),this.achieve=t,this.bg_res=e,this.node.active=!0,this.node.parent=a.container,this.special.active=!1,this.updateUI(!0),this.showRewards(),this},t.prototype.updateUI=function(a){var t=this;return null!=this.achieve&&36==this.achieve.id&&0==this.achieve.state?(this.t_desc.node.active=!1,this.t_name.node.active=!1,void(this.pic_icon.node.active=!1)):this.achieve?(this.t_desc.node.active=!0,this.t_name.node.active=!0,this.pic_icon.node.active=!0,a&&(this.t_name.string=this.achieve.name,this.t_desc.string=this.achieve.desc),c.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/Achieve2/InfantVersion/"+this.achieve.icon,function(a,e){e&&t.pic_icon&&(t.pic_icon.spriteFrame=e)}),this.achieve.state?(this.pic_icon.node.opacity=255,36===this.achieve.id&&(this.t_desc.string=this.achieve.desc.replace("100",p.pzaLocalData.data.specailAchTime.toFixed(2)))):this.pic_icon.node.opacity=80,this.bt_reward.active=1===this.achieve.state,this.reward_rec.active=2===this.achieve.state,void(this.reward.active=!0)):(this.t_desc.node.active=!1,this.t_name.node.active=!1,void(this.pic_icon.node.active=!1))},t.prototype.showRewards=function(){if(this.achieve){this.reward.active=!0;var a=this.achieve.reward;null!=this.rewardItems&&this.rewardItems.forEach(function(a){r.pzaGameCommonPool.returnInstant(a.node)}),this.rewardItems=[];for(var t=0;t<a.length;t++){var e=a[t].split("_"),o=parseInt(e[0]),n=parseInt(e[1]),i=r.pzaGameCommonPool.requestInstant(this.reward_prefab),p=i.getComponent(d.pzaAchieveRewardItem);p.init(o,n),this.rewardItems.push(p),i.parent=this.rewardContainer,i.setPosition(0,0),i.active=!0}null!=this.achieve&&36==this.achieve.id&&0==this.achieve.state&&(this.reward.active=!1)}else this.reward.active=!1},t.prototype.showSpecial=function(){"achieve_i_3"==this.bg_res&&(this.special.active=!0)},t.prototype.clickRecieveReward=function(){null!=this.achieve&&(l.pzaSoundManager.playSFX(),u.default.instance().obtainReward(this.achieve.id),this.bt_reward.active=!1,this.reward_rec.active=!0)},i([f({displayName:"\u6210\u5c31\u540d",type:cc.Label})],t.prototype,"t_name",void 0),i([f({displayName:"\u6210\u5c31\u63cf\u8ff0",type:cc.Label})],t.prototype,"t_desc",void 0),i([f({displayName:"\u5956\u52b1\u5185\u5bb9\u9884\u8bbe",type:cc.Prefab})],t.prototype,"reward_prefab",void 0),i([f({displayName:"\u6210\u5c31icon",type:cc.Sprite})],t.prototype,"pic_icon",void 0),i([f({displayName:"\u6210\u5c31\u9879\u80cc\u666f",type:cc.Sprite})],t.prototype,"pic_bg",void 0),i([f({displayName:"\u5956\u52b1\u6309\u94ae",type:cc.Node})],t.prototype,"bt_reward",void 0),i([f({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],t.prototype,"reward_rec",void 0),i([f({displayName:"\u5956\u52b1\u7236\u8282\u70b9",type:cc.Node})],t.prototype,"reward",void 0),i([f({displayName:"\u5956\u52b1\u5bb9\u5668",type:cc.Node})],t.prototype,"rewardContainer",void 0),i([f({displayName:"\u7279\u6b8a\u6210\u5c31\u8fbe\u6210\u63d0\u793a",type:cc.Node})],t.prototype,"special",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","./pzaAchieveMgr":"pzaAchieveMgr","./pzaAchieveRewardItem":"pzaAchieveRewardItem"}],pzaAchieveMgr:[function(a,t,e){"use strict";cc._RF.push(t,"0b984szx4VDnYKdQmGVCQ6w","pzaAchieveMgr"),Object.defineProperty(e,"__esModule",{value:!0});var o=a("../Battle/pzaGameState"),n=a("../Common/pzaGamePropConfig"),i=a("../Common/pzaLocalData"),r=a("../Common/pzaRewardManager"),p=a("../Common/pzaTipManager"),l=a("../utils/pzaResMgr"),s=a("../utils/pzakc"),c=a("./pzaAchieve"),u=function(){function a(){this.achieveMap=null,this.list=null}return a.instance=function(){return a._me||(a._me=new a),a._me},a.prototype.init=function(a){this.achieveMap=new Map;for(var t=[],e=[],o=[],n=i.pzaLocalData.data.achieves||{},r=0;r<a.length;r++){var p=new c.pzaAchieve(a[r]),l=n[""+p.id];p.state=l||0,this.achieveMap.set(p.id,p),1==l?t.push(p):2==l?o.push(p):0==p.hide&&e.push(p)}this.list=t.concat(e).concat(o),this.checkAddAchieve(c.pzaAchieveType.ACH_4,i.pzaLocalData.data.ownPlants.length,!1)},a.prototype.refreshConf=function(){this.init(l.pzaResMgr.instance().getConf("a9"))},a.prototype.getAchieve=function(a){return this.achieveMap.get(a)},a.prototype.canGetAchieve=function(a,t){var e=this.achieveMap.get(a);return e?!e.state&&(t>=e.condNum?(this.addAchieve(a),!0):void 0):(console.error("\u65e0\u6210\u5c31id",a),!1)},a.prototype.hasAchieve=function(a){return this.achieveMap.get(a)},a.prototype.addAchieve=function(a,t){void 0===t&&(t=1);var e=this.achieveMap.get(a);e&&(e.state=t,i.pzaLocalData.data.achieves[""+a]=t,i.pzaLocalData.addDirty("achieves"),s.default.sendMsg("achieveUpdate"))},a.prototype.obtainReward=function(a){var t=this.achieveMap.get(a);if(t){t.state=2,i.pzaLocalData.data.achieves[""+a]=2,i.pzaLocalData.addDirty("achieves"),s.default.sendMsg("achieveUpdate");var e=[];null!=t.reward&&t.reward.forEach(function(a){if(null!=a){var t=a.split("_"),o=new n.pzaRewardPropData(parseInt(t[0]),parseInt(t[1]));e.push(o)}}),r.pzaRewardManager.recieveRewards(e)}else console.error("\u65e0\u6b64\u6210\u5c31id",a)},a.prototype.getAchieveList=function(){return this.list?this.list:(this.refreshConf(),this.list)},a.prototype.setListNull=function(){this.list=null},a.prototype.obtainPlant=function(){for(var a=i.pzaLocalData.getAdvancedPlant(),t=0;t<a;t++){var e=this.achieveMap.get(c.pzaAchieveType.ACH_28+t);e&&0==e.state&&(e.state=1,i.pzaLocalData.data.achieves[""+e.id]=1,i.pzaLocalData.addDirty("achieves"))}this.checkAddAchieve(c.pzaAchieveType.ACH_4,i.pzaLocalData.data.ownPlants.length,!1)},a.prototype.addMature=function(){var a=this.achieveMap.get(c.pzaAchieveType.ACH_26);null!=a&&0==a.state&&(i.pzaLocalData.data.maturePlantCount++,i.pzaLocalData.addDirty("maturePlantCount"),a.condNum<=i.pzaLocalData.data.maturePlantCount&&(a.state=1,i.pzaLocalData.data.achieves[""+a.id]=1,i.pzaLocalData.addDirty("achieves")))},a.prototype.addGardenPlant=function(a){if(!i.pzaLocalData.data.hasGardenPlants.includes(a)&&(i.pzaLocalData.data.hasGardenPlants.push(a),i.pzaLocalData.addDirty("hasGardenPlants"),i.pzaLocalData.data.hasGardenPlants.length>=39)){var t=this.achieveMap.get(c.pzaAchieveType.ACH_25);if(null==t||0!=t.state)return;t.state=1,i.pzaLocalData.data.achieves[""+t.id]=1,i.pzaLocalData.addDirty("achieves")}},a.prototype.checkAchieve=function(a,t,e){if(void 0===t&&(t=1),void 0===e&&(e=!0),null!=a&&!o.pzaGameState.achieveArr.includes(a)){var n=this.getAchieve(a);if(null!=n&&0==n.state&&!(n.condNum>t)&&(o.pzaGameState.achieveArr.push(a),this.addAchieve(a),e)){var i=n.name+" \u6210\u5c31\u8fbe\u6210";p.pzaTipManager.showGameTip(i)}}},a.prototype.checkAddAchieve=function(a,t,e){void 0===t&&(t=1),void 0===e&&(e=!0),this.checkAchieve(a,t,e)},a.prototype.zombieCheckAchieve=function(a,t,e){void 0===t&&(t=1),void 0===e&&(e=!0),o.pzaGameState.isZombieMode()&&this.checkAchieve(a,t,e)},a._me=null,a}();e.default=u,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaTipManager":"pzaTipManager","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaAchieve":"pzaAchieve"}],pzaAchieveRewardItem:[function(a,t,e){"use strict";cc._RF.push(t,"3acbcbOR+RH8YDGyBTTqyU6","pzaAchieveRewardItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAchieveRewardItem=void 0;var r=a("../Common/pzaGamePropConfig"),p=a("../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.proIcon=null,t.propAni=null,t.propCount=null,t}return n(t,a),t.prototype.init=function(a,t){if(null!=a){switch(a){case r.pzaGamePropEnum.PROP_COIN:this.proIcon.node.active=!0,this.propAni.node.active=!1;break;case r.pzaGamePropEnum.PROP_CHERRY_BOMB:case r.pzaGamePropEnum.PROP_AUTO_PICK:case r.pzaGamePropEnum.PROP_FREE_SUN:this.proIcon.node.active=!1,this.propAni.node.active=!0,a==r.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAni.playAnimation("3ui_1",!0):a==r.pzaGamePropEnum.PROP_AUTO_PICK?this.propAni.playAnimation("2ui_1",!0):a==r.pzaGamePropEnum.PROP_FREE_SUN&&this.propAni.playAnimation("1ui_1",!0)}this.propCount.string="x"+t}},i([c({displayName:"\u9053\u5177\u56fe\u6807",type:cc.Sprite})],t.prototype,"proIcon",void 0),i([c({displayName:"\u9053\u5177\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"propAni",void 0),i([c({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],t.prototype,"propCount",void 0),i([s],t)}(cc.Component);e.pzaAchieveRewardItem=u,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaSpineController":"pzaSpineController"}],pzaAchieveView:[function(a,t,e){"use strict";cc._RF.push(t,"e73c0q6S7BLdbS1+m2BEFUd","pzaAchieveView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaLocalData"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaStatisticsMgr"),s=a("../Common/pzaWorldEventManager"),c=a("../Load/pzaBundleObjectPool"),u=a("../View/pzaCommonMask"),d=a("../utils/pzakc"),h=a("./pzaAchieveItem"),m=a("./pzaAchieveMgr"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.container=null,t.bt_home=null,t.popup=null,t.scrollView=null,t.prefab_top=null,t.prefab_item=null,t.scrollBegin=0,t.scrollBottomTime=0,t.itemArr=[],t.homeView=null,t}var e;return n(t,a),e=t,t.prototype.onEnable=function(){var a=this;l.pzaStatisticsMgr.sendEvent("System",{name:"system",value:2}),this.bt_home.on(cc.Node.EventType.TOUCH_END,this.clickHome,this),d.default.delMsgReciever("achieveUpdate"),d.default.regMsgReciever("achieveUpdate",function(){return a.refreshList(),!1}),m.default.instance().getAchieve(36)&&m.default.instance().getAchieve(36).state||(this.scrollView.node.on("scroll-began",function(){a.scrollBegin||(a.scrollBegin=Date.now(),console.log("\u5f00\u59cb\u6eda\u52a8!!",a.scrollBegin))},this),this.scrollView.node.on("scroll-ended",function(){a.scrollBegin<=0||a.scrollView.getScrollOffset().y+5<a.scrollView.getMaxScrollOffset().y||(a.scrollBottomTime=(Date.now()-a.scrollBegin)/1e3,console.log("\u5230\u5e95\u4e86!!",a.scrollBottomTime),r.pzaLocalData.data.specailAchTime=a.scrollBottomTime,r.pzaLocalData.addDirty("specailAchTime"),m.default.instance().hasAchieve(36).state||(d.default.removeNodeChildren(a.container),a.itemArr=[],m.default.instance().setListNull()),m.default.instance().addAchieve(36),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.SPECIAL_ACH,null),a.scrollBegin=-1)},this))},t.prototype.onDisable=function(){e.instance=null,this.scrollBegin=0,this.bt_home.off(cc.Node.EventType.TOUCH_END,this.clickHome,this),d.default.delMsgReciever("achieveUpdate"),this.scrollView.node.off("scroll-began"),this.scrollView.node.off("scroll-ended")},t.prototype.clickHome=function(){var a=this;p.pzaSoundManager.playSFX(),cc.tween(this.homeView.node).to(.5,{y:0},{easing:"cubicOut"}).call(function(){a.node.active=!1}).start()},t.prototype.show=function(a){return this.node?(this.homeView=a,this.node.active=!0,this.itemArr=[],this.node.parent=a.achUI,this.node.setPosition(0,-360),this.refreshList(),this.scrollView.scrollToTop(),cc.tween(this.homeView.node).to(.5,{y:720},{easing:"cubicOut"}).start(),this):null},t.prototype.refreshList=function(){if(this.itemArr&&this.itemArr.length>0)for(var a=this.itemArr.length,t=0;t<a;t++)(n=this.itemArr[t])&&n.achieve&&n.updateUI(!1);else{d.default.removeNodeChildren(this.container),this.itemArr=[],this.container.addChild(cc.instantiate(this.prefab_top));var e=m.default.instance().getAchieveList();if(e){for(t=0;t<e.length;t++){var o=e[t],n=cc.instantiate(this.prefab_item).getComponent(h.default);this.itemArr.push(n.show(this,o,null))}u.pzaCommonMask.hideMask()}}},t.show=function(a){if(e.instance)return m.default.instance().refreshConf(),void e.instance.show(a);u.pzaCommonMask.showMask(!0),c.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Achieve/AchieveView",!1,function(t,o){!t&&o?(m.default.instance().refreshConf(),e.instance=o.getComponent(e).show(a)):console.error(t)})},t.instance=null,i([y({displayName:"\u6210\u5c31\u5bb9\u5668",type:cc.Node})],t.prototype,"container",void 0),i([y({displayName:"\u8fd4\u56dehome\u6309\u94ae",type:cc.Node})],t.prototype,"bt_home",void 0),i([y({displayName:"\u5f39\u7a97\u5c42",type:cc.Node})],t.prototype,"popup",void 0),i([y(cc.ScrollView)],t.prototype,"scrollView",void 0),i([y(cc.Prefab)],t.prototype,"prefab_top",void 0),i([y(cc.Prefab)],t.prototype,"prefab_item",void 0),e=i([z],t)}(cc.Component);e.default=g,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../View/pzaCommonMask":"pzaCommonMask","../utils/pzakc":"pzakc","./pzaAchieveItem":"pzaAchieveItem","./pzaAchieveMgr":"pzaAchieveMgr"}],pzaAchieve:[function(a,t,e){"use strict";cc._RF.push(t,"ce8dfzoBBFECoL0EhxMStB9","pzaAchieve"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAchieveType=e.pzaAchieve=void 0;var o=a("../utils/pzakc");e.pzaAchieve=function(a){this.id=0,this.name="",this.desc="",this.icon="",this.reward=[],this.condNum=0,this.state=0,this.hide=0,this.id=a.id,this.name=a.name||"",this.desc=a.desc||"",this.icon=a.icon||"",this.reward=o.default.strArr(a.reward),this.condNum=a.condNum||0,this.hide=a.hide||0},function(a){a[a.ACH_1=1]="ACH_1",a[a.ACH_2=2]="ACH_2",a[a.ACH_3=3]="ACH_3",a[a.ACH_4=4]="ACH_4",a[a.ACH_5=5]="ACH_5",a[a.ACH_6=6]="ACH_6",a[a.ACH_7=7]="ACH_7",a[a.ACH_8=8]="ACH_8",a[a.ACH_9=9]="ACH_9",a[a.ACH_10=10]="ACH_10",a[a.ACH_11=11]="ACH_11",a[a.ACH_12=12]="ACH_12",a[a.ACH_13=13]="ACH_13",a[a.ACH_14=14]="ACH_14",a[a.ACH_15=15]="ACH_15",a[a.ACH_16=16]="ACH_16",a[a.ACH_17=17]="ACH_17",a[a.ACH_18=18]="ACH_18",a[a.ACH_19=19]="ACH_19",a[a.ACH_20=20]="ACH_20",a[a.ACH_21=21]="ACH_21",a[a.ACH_22=22]="ACH_22",a[a.ACH_23=23]="ACH_23",a[a.ACH_24=24]="ACH_24",a[a.ACH_25=25]="ACH_25",a[a.ACH_26=26]="ACH_26",a[a.ACH_27=27]="ACH_27",a[a.ACH_28=28]="ACH_28",a[a.ACH_29=29]="ACH_29",a[a.ACH_30=30]="ACH_30",a[a.ACH_31=31]="ACH_31",a[a.ACH_32=32]="ACH_32",a[a.ACH_33=33]="ACH_33",a[a.ACH_34=34]="ACH_34",a[a.ACH_35=35]="ACH_35",a[a.ACH_38=38]="ACH_38",a[a.ACH_39=39]="ACH_39",a[a.ACH_40=40]="ACH_40",a[a.ACH_41=41]="ACH_41",a[a.ACH_42=42]="ACH_42",a[a.ACH_43=43]="ACH_43",a[a.ACH_44=44]="ACH_44",a[a.ACH_45=45]="ACH_45",a[a.ACH_46=46]="ACH_46",a[a.ACH_47=47]="ACH_47",a[a.ACH_48=48]="ACH_48"}(e.pzaAchieveType||(e.pzaAchieveType={})),cc._RF.pop()},{"../utils/pzakc":"pzakc"}],pzaAdNative:[function(a,t,e){"use strict";cc._RF.push(t,"cfc56ai9w5HdaBb5+sG/urM","pzaAdNative");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaChannel"),p=a("./pzakc"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.pic=null,t.close=null,t.clickArea=null,t.adKey=null,t.adList=null,t}return n(t,a),t.prototype.onLoad=function(){var a=this;this.close.on(cc.Node.EventType.TOUCH_END,function(){p.default.log("\u539f\u751f\u5c06\u5173\u95ed");var t=r.pzaChannel.instance().getCtrl("p8");t&&Math.random()<t/100&&r.pzaChannel.instance().reportAdClick(a.adKey),a.hide()}),this.clickArea.on(cc.Node.EventType.TOUCH_END,function(){p.default.log("\u539f\u751f\u70b9\u51fb"),r.pzaChannel.instance().reportAdClick(a.adKey),a.adKey.indexOf("Icon")<0&&a.hide()})},t.prototype.hide=function(){this.node.active=!1,r.pzaChannel.instance().closeNative(this.adKey),this.node.destroy()},t.prototype.show=function(a,t,e,o){var n=this;this.adKey=e,this.adList=o,p.default.log("\u539f\u751f\u5f00\u59cbshow",e,o);var i=o[0];if(i){var l=i.icon;if(i.imgUrlList&&i.imgUrlList.length>0?l=i.imgUrlList[0]:i.iconUrlList&&i.iconUrlList>0&&(l=i.iconUrlList[0]),p.default.log("\u539f\u751fpicUrl:",l),l){var s=".jpg";-1!=l.indexOf(".png")?s=".png":-1!=l.indexOf(".jpg")?s=".jpg":-1!=l.indexOf(".jpeg")&&(s=".jpeg"),cc.assetManager.loadRemote(l,{ext:s},function(o,l){if(o)return p.default.err("\u539f\u751f\u56fe\u7247\u52a0\u8f7d\u5931\u8d25",s,o),void r.pzaChannel.instance().closeNative(n.adKey);var c=new cc.SpriteFrame(l);n.pic.spriteFrame=c,p.default.log("adid==",i.adId);var u=r.pzaChannel.instance().getCtrl("p2");u>0&&n.adKey.indexOf("nsert")>0?setTimeout(function(){n.node.active=!0,n.node.parent=a,n.node.setPosition(t),r.pzaChannel.instance().reportAdShow(e,n.node)},1e3*u):(n.node.active=!0,n.node.parent=a,n.node.setPosition(t),r.pzaChannel.instance().reportAdShow(e,n.node))})}}},i([c(cc.Sprite)],t.prototype,"pic",void 0),i([c(cc.Node)],t.prototype,"close",void 0),i([c(cc.Node)],t.prototype,"clickArea",void 0),i([s],t)}(cc.Component);e.default=u,cc._RF.pop()},{"./pzaChannel":"pzaChannel","./pzakc":"pzakc"}],pzaAdTicketIcon:[function(a,t,e){"use strict";cc._RF.push(t,"7ff46OJBOxMo526UYe9FYB3","pzaAdTicketIcon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAdTicketIcon=void 0;var r=a("../Common/pzaLocalData"),p=a("../Common/pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.icon=null,t}return n(t,a),t.prototype.onEnable=function(){p.pzaWorldEventManager.addListener(p.pzaWorldEventType.UPDATE_ADTICKET,this.updateView,this),this.updateView()},t.prototype.onDisable=function(){p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.UPDATE_ADTICKET,this.updateView,this)},t.prototype.updateView=function(){this.icon.enabled=r.pzaLocalData.data.adTicket>0},i([c({type:cc.Sprite})],t.prototype,"icon",void 0),i([s],t)}(cc.Component);e.pzaAdTicketIcon=u,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaAdTicketView:[function(a,t,e){"use strict";cc._RF.push(t,"21facSkcRpOTYQDmynChyAH","pzaAdTicketView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAdTicketView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaWorldEventManager"),s=a("../utils/pzaChannel"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.adTickCount=null,t}return n(t,a),t.prototype.onEnable=function(){this.updateView(),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.UPDATE_ADTICKET,this.updateView,this),this.node.active=s.pzaChannel.isConfRemote||"ks1"==s.pzaChannel.instance().getChannel().channel||"wx"==s.pzaChannel.instance().getChannel().channel},t.prototype.onDisable=function(){l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.UPDATE_ADTICKET,this.updateView,this)},t.prototype.updateView=function(){this.adTickCount.string=""+p.pzaLocalData.data.adTicket},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({type:cc.Label})],t.prototype,"adTickCount",void 0),i([u],t)}(cc.Component);e.pzaAdTicketView=h,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaWorldEventManager":"pzaWorldEventManager","../utils/pzaChannel":"pzaChannel"}],pzaArtTest:[function(a,t,e){"use strict";cc._RF.push(t,"837feCEGUNN0KW8Hoa9RsO7","pzaArtTest");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaArtTest=void 0;var r=a("../../start/pzaBundleController"),p=a("../Achieve/pzaAchieveMgr"),l=a("../Battle/pzaGameState"),s=a("../Common/pzaGameConfig"),c=a("../Common/pzaGameManager"),u=a("../Common/pzaGamePartConfig"),d=a("../Common/pzaGamePropConfig"),h=a("../Common/pzaLocalData"),m=a("../Common/pzaUtil"),f=a("../Load/pzaBundleObjectPool"),z=a("../Load/pzaPreLoadManager"),y=a("../Shop/pzaShopConfig"),g=a("../Task/pzaTaskMgr"),b=a("../utils/pzaChannel"),v=a("../utils/pzakc"),P=a("../utils/pzaResMgr"),D=cc._decorator,S=D.ccclass,C=D.property,_=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.layer_loading=null,t.progressBar=null,t.progressTxt=null,t.showLoadingView=!1,t}return n(t,a),t.prototype.onLoad=function(){console.log("\u6f14\u793a\u5f00\u59cb"),v.default.init(),m.pzaUtil.initGameSpeed(),this.channelInit()},t.prototype.loadGame=function(){var a=this;cc.assetManager.loadBundle(r.pzaBundleType.Spine,function(t,e){null==t&&null!=e?(cc.assetManager.loadBundle(r.pzaBundleType.Loading,function(t,e){null==t&&null!=e?a.showLoadingView||r.pzaBundleController.loadBundle(r.pzaBundleType.Game,function(t){null!=t?f.pzaBundleObjectPool.preLoadResource(z.pzaPreLoadManager.MainResourceMap.get(z.pzaResourceUrl.MAIN_SCENE),function(t,e){a.progressBar.progress=t/e,a.progressTxt.string=Math.floor(t/e*100)+"%"},function(){a.finishLoad()}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")}):console.error(t)}),r.pzaBundleController.loadBundle(r.pzaBundleType.Spine,function(a){null!=a||console.error("\u52a0\u8f7dSpine Bundle\u5f02\u5e38~")})):console.error(t)})},t.prototype.finishLoad=function(){this.layer_loading.active=!1,console.log("cc.director.loadScene"),cc.director.loadScene("main",function(){c.pzaGameManager.preLoadAndStart(l.pzaGameMode.ART_TEST,1,9)})},t.prototype.channelInit=function(){var a=this;b.pzaChannel.getRemoteTime(),b.pzaChannel.isConfRemote&&(b.pzaChannel.instance().channel="noAD"),h.pzaLocalData.testData(),b.pzaChannel.instance().init(function(){a.loadGame(),a.initConfig()})},t.prototype.initConfig=function(){P.pzaResMgr.instance().loadConf(function(){u.pzaWaveConfig.initBaseWaveConfig(P.pzaResMgr.instance().getConf("a2")),s.pzaGameConfig.initPlantConfig(P.pzaResMgr.instance().getConf("a3")),s.pzaGameConfig.initZombieConfig(P.pzaResMgr.instance().getConf("a4")),u.pzaGamePartConfig.initPartConfig(P.pzaResMgr.instance().getConf("a5")),y.pzaShopConfig.initShopConfig(P.pzaResMgr.instance().getConf("a6")),d.pzaGamePropConfig.initPropConfig(P.pzaResMgr.instance().getConf("a7")),p.default.instance().init(P.pzaResMgr.instance().getConf("a9")),g.default.instance().init()})},i([C(cc.Node)],t.prototype,"layer_loading",void 0),i([C(cc.ProgressBar)],t.prototype,"progressBar",void 0),i([C(cc.Label)],t.prototype,"progressTxt",void 0),i([S],t)}(cc.Component);e.pzaArtTest=_,cc._RF.pop()},{"../../start/pzaBundleController":void 0,"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/pzaGameState":"pzaGameState","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaUtil":"pzaUtil","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../Task/pzaTaskMgr":"pzaTaskMgr","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc"}],pzaAssessView:[function(a,t,e){"use strict";cc._RF.push(t,"173b5FvLf5FWof0z0h/yswq","pzaAssessView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAssessView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaLocalData"),u=a("../../Common/pzaTipManager"),d=a("../../Common/pzaUIManager"),h=a("../../Common/pzaUtil"),m=a("../../Common/pzaWorldEventManager"),f=a("../../Load/pzaPreLoadManager"),z=a("../pzaWarningView"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.assessNode=null,t.noAssessNode=null,t.backBtn=null,t.backTxt=null,t.reStartBtn=null,t.plantStarLab=null,t.backGameCall=null,t}return n(t,a),t.prototype.onEnable=function(){var a=0;s.pzaGameManager.getCurrentGame().skipPartStar()||(a=l.pzaGameConfig.getPartStar(r.pzaGameState.curChapter,r.pzaGameState.curPart)),this.noAssessNode.active=a<=0,this.assessNode.active=a>0,this.backBtn.x=-204,this.reStartBtn.active=!0,this.backTxt.string="\u8fd4\u56de\u6e38\u620f",this.plantStarLab.string="\u4e0d\u88ab\u5403\u63897\u68f5\u690d\u7269"},t.prototype.bindBackGameCall=function(a,t){void 0===t&&(t=!1),this.backGameCall=a,t&&(this.backBtn.x=0,this.reStartBtn.active=!1,this.backTxt.string="\u786e\u5b9a")},t.prototype.clickBackGame=function(){this.backGameCall&&this.backGameCall(),this.close()},t.prototype.clickRestart=function(){var a=this,t=c.pzaLocalData.endLessPowerCost;(s.pzaGameManager.getCurrentGame().isMainMode()||r.pzaGameState.judgeIsMini(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsVase(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsZombie(r.pzaGameState.gameMode))&&(t=c.pzaLocalData.normalPowerCost),c.pzaLocalData.isShowPowerGift||(t=0),d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.WARNING_VIEW,function(e){var o=e&&e.getComponent(z.pzaWarningView);o&&o.show("\u4f60\u60f3\u8981\u518d\u6b21\u4ece\u5934\u8fdb\u884c\u8fd9\u4e00\u5173\u5361\u5417\uff1f","\u91cd\u65b0\u5f00\u59cb","\u53d6\u6d88",function(){if(c.pzaLocalData.data.power<t)return u.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void d.pzaUIManager.showPowerView();c.pzaLocalData.setPower(-t),c.pzaLocalData.data.autoPickLeft=r.pzaGameState.autoPickLeft,c.pzaLocalData.addDirty("autoPickLeft"),s.pzaGameManager.removeBattleUI(),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_OVER,null),h.pzaUtil.changeGameSpeed(1),s.pzaGameManager.getCurrentGame().gameRestart(),a.close()},null,"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1,!1,0,!0,t,!1,1)})},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([b({displayName:"\u8bc4\u4ef7\u8282\u70b9",type:cc.Node})],t.prototype,"assessNode",void 0),i([b({displayName:"\u65e0\u8bc4\u4ef7\u8282\u70b9",type:cc.Node})],t.prototype,"noAssessNode",void 0),i([b({displayName:"\u8fd4\u56de\u6309\u94ae",type:cc.Node})],t.prototype,"backBtn",void 0),i([b({displayName:"\u8fd4\u56de\u6309\u94ae\u6587\u5b57",type:cc.Label})],t.prototype,"backTxt",void 0),i([b({displayName:"\u91cd\u65b0\u5f00\u59cb\u6309\u94ae",type:cc.Node})],t.prototype,"reStartBtn",void 0),i([b({displayName:"\u690d\u7269\u661f\u7ea7\u63cf\u8ff0",type:cc.Label})],t.prototype,"plantStarLab",void 0),i([g],t)}(cc.Component);e.pzaAssessView=v,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../pzaWarningView":"pzaWarningView"}],pzaAttackType:[function(a,t,e){"use strict";cc._RF.push(t,"6732547mBFJwZjBvvCg1w3a","pzaAttackType"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAttackType=void 0,function(a){a[a.FLOOR_ATK=1]="FLOOR_ATK",a[a.BOOM=2]="BOOM",a[a.EAT=3]="EAT",a[a.BANG=4]="BANG",a[a.SPIKE=5]="SPIKE",a[a.TWINE=6]="TWINE",a[a.ROLLING=7]="ROLLING",a[a.CLEAN_CAR=8]="CLEAN_CAR",a[a.BOWLING=9]="BOWLING",a[a.NORMAL_BOOM=10]="NORMAL_BOOM",a[a.KNOCK=11]="KNOCK",a[a.PENETRATE=12]="PENETRATE",a[a.DEATH=13]="DEATH",a[a.THROW_ATK=14]="THROW_ATK",a[a.TALL_BOWLING=15]="TALL_BOWLING",a[a.DEATH_ANI=16]="DEATH_ANI",a[a.FLOOR_ASHES_ATK=17]="FLOOR_ASHES_ATK"}(e.pzaAttackType||(e.pzaAttackType={})),cc._RF.pop()},{}],pzaBackPumpkin:[function(a,t,e){"use strict";cc._RF.push(t,"f2546d9ZlZCerwKwtGHxLQB","pzaBackPumpkin");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBackPumpkin=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.animation=null,t}return n(t,a),t.prototype.bindData=function(a){if(this.baseData=a,null!=a&&null!=a.yIndex){var t=10*-this.baseData.yIndex-2;this.node.zIndex=t}this.animation.playAnimation("idle",!0),this.logicLateUpdate(),this.animation.spineAnimation.node.scaleX-=.2,this.animation.spineAnimation.node.scaleY-=.2},t.prototype.logicUpdate=function(){(null==this.baseData||this.baseData.isDead)&&this.close()},t.prototype.logicLateUpdate=function(){null==this.baseData||this.baseData.isDead||0==this.baseData.floatY||null==this.baseData.logicPos||this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.pauseSelf=function(){this.animation.pauseAnimation()},t.prototype.resumeSelf=function(){this.baseData&&this.baseData.isBePauseControlled()||this.animation.resumeAnimation()},i([c({displayName:"\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"animation",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaBackPumpkin=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController"}],pzaBackUpNarutoZombie:[function(a,t,e){"use strict";cc._RF.push(t,"16535CSGNZDTplMABarYN19","pzaBackUpNarutoZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBackUpNarutoZombie=void 0;var r=a("./pzaBackupDancerZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,61.03,12.86,-93.13))]])},t.prototype.handBookPreview=function(){this.animation.playAnimation("idle6",!0,null,null,.5),this.equipIntact()},i([s],t)}(r.pzaBackupDancerZombie));e.pzaBackUpNarutoZombie=c,cc._RF.pop()},{"./pzaBackupDancerZombie":"pzaBackupDancerZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaBackupDancerFireZombie:[function(a,t,e){"use strict";cc._RF.push(t,"2400fGwBRVBA7VjeiZ9mXVt","pzaBackupDancerFireZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBackupDancerFireZombie=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../Data/pzaBuffData"),l=a("./pzaBackupDancerZombie"),s=a("./pzaZombieBody"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.torchwoodBody=null,t.torchWoodBindData=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.torchWoodBindData=!1,this.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_CONTROL,-1)),this.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_ICE,-1))},t.prototype.logicLateUpdate=function(t){this.torchWoodBindData||(this.torchWoodBindData=!0,this.torchwoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addPlantByRow(this.baseData.yIndex,this.torchwoodBody)),a.prototype.logicLateUpdate.call(this,t)},t.prototype.death=function(t,e){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.flaserDeath.call(this)},i([d({displayName:"\u4f34\u821e\u706b\u7130\u78b0\u649e\u8eab\u4f53",type:s.pzaZombieBody})],t.prototype,"torchwoodBody",void 0),i([u],t)}(l.pzaBackupDancerZombie);e.pzaBackupDancerFireZombie=h,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../Data/pzaBuffData":"pzaBuffData","./pzaBackupDancerZombie":"pzaBackupDancerZombie","./pzaZombieBody":"pzaZombieBody"}],pzaBackupDancerZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"54b23NwbLRGFalKE2O5PKtF","pzaBackupDancerZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBackupDancerZombie2=void 0;var r=a("./pzaBackupDancerZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=p.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,61.03,12.86,-93.13))],[p.pzaZombieSlotType.hat,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.hat).addState(new p.pzaZombieSlotAtt(1,this.equip1Slot+"1",6.57,84.66)).addState(new p.pzaZombieSlotAtt(2,this.equip1Slot+"2",6.57,67.64)).addState(new p.pzaZombieSlotAtt(3,this.equip1Slot+"3",6.57,54.66))]])},t.prototype.handBookPreview=function(){this.animation.playAnimation("idle6",!0,null,null,.5),this.equipIntact()},i([s],t)}(r.pzaBackupDancerZombie));e.pzaBackupDancerZombie2=c,cc._RF.pop()},{"./pzaBackupDancerZombie":"pzaBackupDancerZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaBackupDancerZombie:[function(a,t,e){"use strict";cc._RF.push(t,"6429fMJWr9ANbWhxTI8PfRn","pzaBackupDancerZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBackupDancerZombie=void 0;var r=a("../../Common/pzaUIManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../../Load/pzaPreLoadManager"),s=a("../../View/Battle/pzaNewZombieView"),c=a("../Data/pzaBaseData"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaZombieEnum"),h=a("../pzaGameState"),m=a("./pzaNormalZombie"),f=a("./pzaZombieSlot"),z=a("./pzaZombieState"),y=cc._decorator,g=y.ccclass,b=(y.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="skin2",t.dacing=!1,t.summoning=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[f.pzaZombieSlotType.butter,new f.pzaZombieSlot(this.animation.spineAnimation,f.pzaZombieSlotType.butter).addState(new f.pzaZombieSlotAtt(1,f.pzaZombieSlotType.butter,-1.69,53.99))]])},t.prototype.uiShow=function(){a.prototype.uiShow.call(this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.dacing=!1,this.summoning=!1,this.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.IMM_CONTROL,-1))},t.prototype.breakDirt=function(a){this.breakCall=a,null!=this.mask&&(this.mask.enabled=!0),this.breakDirtTime=.5,this.animation.node.y=-140,this.animation.playAnimation("idle1",!0)},t.prototype.logicUpdate=function(a){var t=this,e=this.lastBePasueControled?0:1;if(this.animation.changeAnimationTimeScale(e),this.baseData.isDead?this.animation.changeAnimationTimeScale(1):this.animation.changeAnimationTimeScale(e),this.breakDirtTime>0){this.breakDirtTime-=a;var o=140*-Math.max(0,this.breakDirtTime/.5);if(this.animation.node.y=o,this.breakDirtTime<=0&&null!=this.mask){this.animation.node.y=31,this.mask.enabled=!1,this.summoning=!0,this.curShadow&&this.curShadow.showShadow();var n=!1,i=this.animation.getAnimationDuration("idle5")/this.animation.spineAnimation.timeScale+.1;this.scheduleOnce(function(){n||(n=!0,t.summoning=!1,t.breakCall&&t.breakCall(),t.baseData.buffData.removeBuff(u.pzaBuffType.IMM_CONTROL))},i),this.animation.playAnimation("idle5",!1,function(){n||(n=!0,t.summoning=!1,t.breakCall&&t.breakCall(),t.baseData.buffData.removeBuff(u.pzaBuffType.IMM_CONTROL))})}}else if(!this.summoning&&null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(a);else{var r=this.findTarget();null==r||r.isDead?this.updateMove(a):(this.dacing&&(this.dacing=!1),this.attack(a,r))}else this.changeRowMove(a)}},t.prototype.updateMove=function(a){if(!this.dacing&&this.baseData.zombieData.danceData){this.zombieState!=z.pzaZombieState.MOVE&&this.playMoveAnimation();var t=this.baseData.zombieData.moveSpd,e=1;if(t*=e+=this.baseData.zombieData.danceData.getSpeedBuff(),this.hasStopZombie()&&(t=0),this.animation.changeAnimationTimeScale(e),1==this.baseData.zombieData.direction?this.baseData.logicPos.x+=a*t:this.baseData.logicPos.x-=a*t,this.baseData.zombieData.hypnosis&&this.baseData.logicPos.x>=640)this.death(!1);else{this.baseData.logicPos.x<(h.pzaGameState.isZombieMode()?-450:-480)&&this.zombieGoHome();var o=this.baseData.xIndex,n=h.pzaGameState.map.getMapXIndex(this.baseData.logicPos);if(this.baseData.xIndex=n,-1==this.changeTargetRow){var i=.1*h.pzaGameState.map.getYInterval(this.baseData.yIndex)+15;h.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,this.baseData.logicPos,i)}if(o<0&&n>=0&&this.zombieScream(),h.pzaGameState.newZombie==this.baseData.zombieData.zombieType&&7==n){h.pzaGameState.gamePause=!0,p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.GAME_PAUSE,null);var c=this.node.convertToWorldSpaceAR(cc.v2());r.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.NEW_ZOMBIE_VIEW,function(a){var t=a&&a.getComponent(s.pzaNewZombieView);t&&t.showNewZombie(h.pzaGameState.newZombie,c),h.pzaGameState.showUnlockZombie()})}}}},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=z.pzaZombieState.MOVE,this.baseData.isDead||(this.baseData.zombieData.danceData.getMainData()==this.baseData?this.baseData.zombieData.danceData.walkStep>=3&&!this.hasStopZombie()?this.dance():this.animation.playAnimation("idle6",!1,function(){a.baseData.zombieData.danceData.walkStep++,a.playMoveAnimation()}):this.animation.playAnimation("idle6",!1,function(){a.playMoveAnimation()}))},t.prototype.dance=function(){var a=this;if(this.dacing=!0,this.animation.playAnimation("idle7",!1,function(){a.animation.playAnimation("idle8",!1,function(){a.dacing=!1,a.playMoveAnimation()})}),this.baseData.zombieData.danceData.getMainData()==this.baseData){this.baseData.zombieData.danceData.walkStep=0,this.zombieState=z.pzaZombieState.SPECIAL;var t=this.baseData.zombieData.danceData.getOtherDatas();t&&t.forEach(function(a){var t=a.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(a):window.pzazombieManager.getZombie(a);t&&t.dance()})}},t.prototype.bePauseControl=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead&&!this.lastBePasueControled){this.lastBePasueControled=!0,this.pauseSelf();var t=this.baseData.zombieData.danceData.getOtherDatas();null!=t&&t.forEach(function(t){if(t!=a.baseData&&null!=t&&!t.isDead){var e=t.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(t):window.pzazombieManager.getZombie(t);e&&e.bePauseControl()}})}},t.prototype.hasStopZombie=function(){if(!this.baseData||!this.baseData.zombieData)return!1;if(!this.baseData.zombieData.danceData)return!1;var a=this.baseData.zombieData.danceData.getOtherDatas(),t=this.baseData.zombieData.danceData.getMainData();if(null==a)return!1;null!=t&&a.push(t);for(var e=0;e<a.length;e++){var o=a[e];if(o!=this.baseData&&null!=o&&!o.isDead){if(o.isBeControlled())return!0;var n=o.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(o):window.pzazombieManager.getZombie(o);if(null==n)continue;var i=n;if(i.zombieState==z.pzaZombieState.EAT_ATK||i.zombieState==z.pzaZombieState.SPECIAL)return!0}}return!1},t.prototype.changeMapRow=function(){a.prototype.changeMapRow.call(this),this.dacing=!1,this.baseData.zombieData.danceData.removeOtherData(this.baseData),this.baseData.zombieData.danceData=new c.pzaDanceData(this.baseData)},t.prototype.zombieHurt=function(){this.zombieHurtState=d.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},t.prototype.death=function(t,e){if(this.breakDirtTime>0||this.summoning)return this.breakCall&&this.breakCall(),void a.prototype.death.call(this,!1,e);a.prototype.death.call(this,t,e)},i([g],t)}(m.pzaNormalZombie));e.pzaBackupDancerZombie=b,cc._RF.pop()},{"../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewZombieView":"pzaNewZombieView","../Data/pzaBaseData":"pzaBaseData","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaBagPlantCard:[function(a,t,e){"use strict";cc._RF.push(t,"d4c9aa5gwhP3pERHLKMrPqN","pzaBagPlantCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBagPlantCard=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGameConfig"),c=a("../../Common/pzaGameManager"),u=a("../../Common/pzaLocalData"),d=a("../../Common/pzaSoundManager"),h=a("../../Common/pzaSpriteFrameManager"),m=a("../../Common/pzaUIManager"),f=a("../../Common/pzaUtil"),z=a("../../Load/pzaPreLoadManager"),y=a("../../utils/pzaChannel"),g=a("../pzaWarningView"),b=cc._decorator,v=b.ccclass,P=b.property,D=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.voidBoard=null,t.swIcon=null,t.cardBoard=null,t.cardBoardFrames=[],t.cardIcon=null,t.priceLabel=null,t.mask=null,t.unselectTag=null,t.videoTrial=null,t.videoIcon=null,t.curPlantType=null,t.plantConfigData=null,t.clickCall=null,t.isSelected=!1,t.isFull=!1,t.isNoRecommend=!1,t.lock=!1,t.imitaterPlant=!1,t.trailPlant=!1,t}return n(t,a),t.prototype.onEnable=function(){this.lock||this.node.on(cc.Node.EventType.TOUCH_END,this.clickCard,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.clickCard,this)},t.prototype.bindData=function(a,t,e,o,n){void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===n&&(n=!1);var i=null!=u.pzaLocalData.data.ownPlants&&u.pzaLocalData.data.ownPlants.indexOf(a)>=0;if(p.pzaGameState.isSurvival()&&u.pzaLocalData.data.preOpenSurvival&&null!=a&&a>=r.pzaPlantEnum.PEA_SHOOTER&&a<=r.pzaPlantEnum.MELON_PULT&&(i=!0),p.pzaGameState.isMiniMode()&&(4==p.pzaGameState.curPart||p.pzaGameState.curPart>=10)&&(i=!0),this.videoTrial.active=!1,n&&(this.trailPlant=!0,this.videoTrial.active=!0,this.videoTrial.getComponent(cc.Button).enabled=!0,this.videoIcon.active=!0,i=!0),null==a||!i&&!o)return this.voidBoard.active=!0,this.cardBoard.node.active=!1,void(this.lock=!0);o||this.node.on(cc.Node.EventType.TOUCH_END,this.clickCard,this),this.lock=!1,this.voidBoard.active=!1,this.cardBoard.node.active=!0,this.imitaterPlant=e,this.curPlantType=a,this.plantConfigData=s.pzaGameConfig.getPlantConfig(a),this.clickCall=t,h.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),this.imitaterPlant?this.cardBoard.spriteFrame=this.cardBoardFrames[0]:this.cardBoard.spriteFrame=this.cardBoardFrames[this.plantConfigData.rareLevel],p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS&&s.pzaGameConfig.isAdvancePlant(a)?this.priceLabel.string=this.plantConfigData.price+"+":this.priceLabel.string=""+this.plantConfigData.price,f.pzaUtil.switchGraySprite(this.cardIcon,this.imitaterPlant),this.node.stopAllActions(),this.unselectTag.active=!1,this.isSelected=!1,this.isFull=!1,this.refreshRecommend(!1),this.swIcon.active=!1,this.isEnablePlant()&&this.node.off(cc.Node.EventType.TOUCH_END,this.clickCard,this)},t.prototype.moveTo=function(a,t,e){var o=this;null!=a?this.node.runAction(cc.sequence(cc.moveTo(t,a),cc.callFunc(function(){o.close(),e&&e()}))):this.close()},t.prototype.initSelect=function(){this.isSelected=!0,this.mask.active=!0,this.mask.opacity=200},t.prototype.disSelect=function(){this.isSelected=!1,this.unselectTag.active=!1,this.isNoRecommend?(this.mask.active=!0,this.mask.opacity=150):this.mask.active=!1,this.isEnablePlant()},t.prototype.selectFull=function(a){this.curPlantType==r.pzaPlantEnum.STAR_FRUIT&&p.pzaGameState.isMiniMode()&&14==p.pzaGameState.curPart&&!a||(this.isFull=a,this.isSelected||(this.unselectTag.active=a,a?(this.mask.active=!0,this.mask.opacity=200):this.isNoRecommend?(this.mask.active=!0,this.mask.opacity=150):this.mask.active=!1,this.isEnablePlant()))},t.prototype.clickCard=function(){if(!p.pzaGameState.cardIsMove)if(this.imitaterPlant)this.clickCall&&this.clickCall(this.curPlantType,null);else if(!this.isFull&&!this.isSelected&&this.curPlantType){if(this.isNoRecommend&&!p.pzaGameState.grayPlantWarning)return p.pzaGameState.grayPlantWarning=!0,void m.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(g.pzaWarningView);t&&t.show("\u4e0d\u63a8\u8350\u4f7f\u7528\u53d8\u7070\u690d\u7269","\u786e\u5b9a",null,null,null)});this.isSelected=!0,this.mask.active=!0,this.mask.opacity=200,p.pzaGameState.cardIsMove=!0;var a=this.node.convertToWorldSpaceAR(cc.v2());this.clickCall&&this.clickCall(this.curPlantType,a),d.pzaSoundManager.playSFX()}},t.prototype.refreshRecommend=function(a){null!=this.plantConfigData&&(c.pzaGameManager.getCurrentGame(),this.plantConfigData.isNight&&a?this.curPlantType==r.pzaPlantEnum.SEA_SHROOM&&3!=p.pzaGameState.curChapter?this.isNoRecommend=s.pzaGameConfig.isNoRecommendPlant(this.curPlantType,p.pzaGameState.curChapter):this.isNoRecommend=!1:this.isNoRecommend=s.pzaGameConfig.isNoRecommendPlant(this.curPlantType,p.pzaGameState.curChapter),this.isSelected?(this.mask.active=!0,this.mask.opacity=200):this.isNoRecommend?(this.mask.active=!0,this.mask.opacity=150):this.mask.active=!1)},t.prototype.isEnablePlant=function(){return(this.curPlantType==r.pzaPlantEnum.LaserBean||this.curPlantType==r.pzaPlantEnum.FireBlover)&&((p.pzaGameState.gameMode==p.pzaGameMode.NORMAL||p.pzaGameState.gameMode==p.pzaGameMode.SURVIVAL||p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS||p.pzaGameState.gameMode==p.pzaGameMode.MINIGAME)&&p.pzaGameState.curChapter>=5||p.pzaGameState.gameMode==p.pzaGameMode.NORMAL_WEEKTWO&&p.pzaGameState.curChapter>=10)&&(this.isNoRecommend=!0,this.unselectTag.active=!0,this.mask.active=!0,this.mask.opacity=200,!0)},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},t.prototype.clickVideoUnlockBtn=function(){var a=this;y.pzaChannel.instance().showVideo({sucCall:function(){a.videoTrial.getComponent(cc.Button).enabled=!1,a.videoIcon.active=!1},failCall:function(){},endCall:function(){},posName:"\u9009\u5361\u8bd5\u7528\u690d\u7269",adsid:"37"})},i([P({displayName:"\u7a7a\u5361\u7247\u6846",type:cc.Node})],t.prototype,"voidBoard",void 0),i([P({displayName:"\u8bd5\u73a9\u8282\u70b9",type:cc.Node})],t.prototype,"swIcon",void 0),i([P({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([P({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([P({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([P({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],t.prototype,"priceLabel",void 0),i([P({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([P({displayName:"\u4e0d\u80fd\u9009\u62e9\u6846",type:cc.Node})],t.prototype,"unselectTag",void 0),i([P({displayName:"\u89c6\u9891\u8bd5\u7528",type:cc.Node})],t.prototype,"videoTrial",void 0),i([P({displayName:"\u89c6\u9891\u56fe\u6807",type:cc.Node})],t.prototype,"videoIcon",void 0),i([v],t)}(cc.Component);e.pzaBagPlantCard=D,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaWarningView":"pzaWarningView"}],pzaBalloonZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"e472cMKRBhMfLYHx9fI0TqZ","pzaBalloonZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBalloonZombie2=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaGameState"),u=a("./pzaBalloonZombie"),d=a("./pzaZombieSlot"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=d.pzaZombieSlotType.helmet_black,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[d.pzaZombieSlotType.butter,new d.pzaZombieSlot(this.animation.spineAnimation,d.pzaZombieSlotType.butter).addState(new d.pzaZombieSlotAtt(1,d.pzaZombieSlotType.butter,-20.56,89.45))],[d.pzaZombieSlotType.helmet_black,new d.pzaZombieSlot(this.animation.spineAnimation,d.pzaZombieSlotType.helmet_black).addState(new d.pzaZombieSlotAtt(1,d.pzaZombieSlotType.helmet_black+"1",0,0)).addState(new d.pzaZombieSlotAtt(2,d.pzaZombieSlotType.helmet_black+"2",0,7.46)).addState(new d.pzaZombieSlotAtt(3,d.pzaZombieSlotType.helmet_black+"3",-4.37,8.71))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.baseData.buffData.removeBuff(l.pzaBuffType.FLY)},t.prototype.equipDeath=function(){var a=this;if(window.pzaMapManager.isInWaterWay(this.baseData.yIndex))return this.baseData.zombieDie(),void this.death(!1);this.equipHurtState=s.pzaHurtStateEnum.DEAD,this.hasEquip=!1,this.equip1Slot!=d.pzaZombieSlotType.head_nut&&this.updateEquipState(this.equip1Slot,0),this.falling=!0,p.pzaSoundManager.playAudio("ball_fall"),this.baseData.buffData.removeBuff(l.pzaBuffType.FLY),this.animation.setAnimationSkin("skin1_1"),this.animation.playAnimation("bao",!1,function(){a.falling=!1;var t=r.pzaGameConfig.getZombieSpecialSpeed(a.baseData.zombieData.zombieType);a.baseData.zombieData.initMSpd=a.baseData.zombieData.moveSpd=c.pzaGameState.map.getBlockWidth()/t,a.baseData.buffData.removeBuff(l.pzaBuffType.IMM_ICE),a.playMoveAnimation()},function(){a.summonZombie()})},t.prototype.summonZombie=function(){var a,t=0;t=this.baseData.xIndex,a=this.baseData.yIndex,t<0&&(t=8);var e=s.pzaZombieEnum.DANCING_ZOMBIE2,o=window.pzazombieManager.createFixBlockZombieData(e,t,a);window.pzazombieManager.createZombie(o,!1,!0),window.pzazombieManager.curWaveZombieDatas.add(o)},i([m],t)}(u.pzaBalloonZombie));e.pzaBalloonZombie2=f,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBalloonZombie":"pzaBalloonZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaBalloonZombie:[function(a,t,e){"use strict";cc._RF.push(t,"9caderigZRMC6ujgVCOQMwS","pzaBalloonZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBalloonZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaWorldEventManager"),s=a("../Data/pzaBuffData"),c=a("../Plant/pzaAttackType"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaBaseZombie"),m=a("./pzaZombieSlot"),f=a("./pzaZombieState"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ballNode=null,t.hasBeenBlow=!1,t.falling=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,38.03,1.35,-90.6))]])},t.prototype.onEnable=function(){a.prototype.onEnable.call(this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.BLOW_WIND,this.onBlowWind,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.BLOW_WIND,this.onBlowWind,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.hasBeenBlow=!1,this.falling=!1,t.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FLY,-1)),t.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_ICE,-1)),p.pzaSoundManager.playAudio("ball_enter")},t.prototype.logicUpdate=function(t){this.falling||a.prototype.logicUpdate.call(this,t)},t.prototype.findTarget=function(){return null!=this.baseData&&this.hasEquip?null:a.prototype.findTarget.call(this)},t.prototype.updateMove=function(t){if(this.hasBeenBlow)return this.baseData.logicPos.x+=1300*t,void(this.baseData.logicPos.x>=640&&(this.baseData.zombieDie(),this.death(!1)));a.prototype.updateMove.call(this,t)},t.prototype.equipDeath=function(){var t=this;if(window.pzaMapManager.isInWaterWay(this.baseData.yIndex))return this.baseData.zombieDie(),void this.death(!1);a.prototype.equipDeath.call(this,!1),this.falling=!0,p.pzaSoundManager.playAudio("ball_fall"),this.baseData.buffData.removeBuff(s.pzaBuffType.FLY),this.animation.playAnimation("bao",!1,function(){t.falling=!1;var a=r.pzaGameConfig.getZombieSpecialSpeed(t.baseData.zombieData.zombieType);t.baseData.zombieData.initMSpd=t.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/a,t.baseData.buffData.removeBuff(s.pzaBuffType.IMM_ICE),t.playMoveAnimation()})},t.prototype.zombieGoHome=function(){if(d.pzaGameState.isZombieMode()&&window.pzaplantManager.hasBrain(this.baseData.yIndex)){if(!this.hasEquip)return;return this.equipDeath(),void(this.body.curTarget=null)}a.prototype.zombieGoHome.call(this)},t.prototype.flaserDeath=function(){if(this.hasEquip)return this.death(!1,c.pzaAttackType.CLEAN_CAR),void(window.pzaMapManager.isInWaterWay(this.baseData.yIndex)||u.pzaEffectManager.createSmokeEffect("blow1",cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+100)));a.prototype.flaserDeath.call(this)},t.prototype.playMoveAnimation=function(){this.zombieState=f.pzaZombieState.MOVE,this.animation.playAnimation(this.hasEquip?"idle":"move2",!0)},t.prototype.onBlowWind=function(){null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.zombieData&&this.hasEquip&&(this.hasBeenBlow||(this.hasBeenBlow=!0))},t.prototype.zombieScream=function(){},t.prototype.getZombieHeadWps=function(){return this.hasEquip?this.ballNode&&this.ballNode.parent?this.ballNode.convertToWorldSpaceAR(cc.v2()):cc.v2(0,0):a.prototype.getZombieHeadWps.call(this)},t.prototype.ashesDeath=function(){if(this.baseData.zombieDie(),this.death(!1),!(this.baseData.xIndex>=0&&window.pzaMapManager.isInWaterWay(this.baseData.yIndex))){var a=this.baseData.zombieData.zombieType,t="blow2";this.hasEquip||(t="blow"),u.pzaEffectManager.createAshesEffect(a,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,this.animation.spineAnimation.node,t)}},t.prototype.onChangeIndex=function(){},i([g({displayName:"\u6c14\u7403\u8282\u70b9",type:cc.Node})],t.prototype,"ballNode",void 0),i([y],t)}(h.pzaBaseZombie);e.pzaBalloonZombie=b,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaBaseBody:[function(a,t,e){"use strict";cc._RF.push(t,"4f0e6uxYcdOJIcW1JqOuhwC","pzaBaseBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseBody=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.body=null,t.circleBody=null,t.baseData=null,t.curTarget=null,t}return n(t,a),t.prototype.onEnable=function(){null!=this.body&&(this.body.enabled=!1),null!=this.circleBody&&(this.circleBody.enabled=!1)},t.prototype.bindData=function(a){this.baseData=a,this.curTarget=null,null!=this.body&&(this.body.enabled=!0),null!=this.circleBody&&(this.circleBody.enabled=!0)},t.prototype.changeBody=function(a,t){null!=this.body&&(null!=a&&(this.body.offset=a),null!=t&&(this.body.size.width=t))},i([l({displayName:"\u8eab\u4f53\u78b0\u649e\u76d2",type:cc.BoxCollider})],t.prototype,"body",void 0),i([l({displayName:"\u8eab\u4f53\u78b0\u649e\u76d2",type:cc.CircleCollider})],t.prototype,"circleBody",void 0),i([p],t)}(cc.Component);e.pzaBaseBody=s,cc._RF.pop()},{}],pzaBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"25e84qr2r5CfK0bp6CEXb0Q","pzaBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaNodeManager"),u=a("../../Common/pzaSoundManager"),d=a("../../Common/pzaUtil"),h=a("../../Common/pzaWorldEventManager"),m=a("../../Load/pzaBundleObjectPool"),f=a("../../Load/pzaPreLoadManager"),z=a("../Data/pzaBuffData"),y=a("../Data/pzaZombieEnum"),g=a("../Effect/pzaBaseEffect"),b=a("../Effect/pzaShadowEffect"),v=a("../Plant/pzaAttackType"),P=a("../Zombie/pzaZombieBody"),D=a("../pzaGameState"),S=cc._decorator,C=S.ccclass,_=S.property,E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletNode=null,t.speed=400,t.ySpeed=300,t.maxLifeTime=3,t.rotateSpeed=0,t.needShadow=!0,t.hitPrefab=null,t.isCanfrost=!1,t.isMine=!1,t.poolPrefab=null,t.lifeTime=0,t.atk=0,t.realYSpeed=0,t.yTargetPos=null,t.direction=cc.v2(1,0),t.bulletYIndex=-1,t.isInAir=!1,t.maxPosX=null,t.curShadow=null,t.originSpeed=400,t.penetrate=!1,t.penetrateCnt=0,t.yMove=!1,t.ignoreDive=!1,t.isPeaBallType=!1,t.collider=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.originSpeed=this.speed,h.pzaWorldEventManager.addListener(h.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.maxLifeTime=3.5,this.isPeaBallType=!1},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.setPeaBallType=function(){this.isPeaBallType=!0},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.init=function(a,t,e,o,n,i,r,l){void 0===e&&(e=0),void 0===o&&(o=null),void 0===n&&(n=cc.v2(1,0)),void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===l&&(l=0),0==e&&(this.isPeaBallType=!0),this.bulletYIndex=a,this.bulletYIndex<0?p.pzaCollisionManager.getInstance.addBulletOther(this):p.pzaCollisionManager.getInstance.addBulletByRow(this.bulletYIndex,this),this.atk=t,this.lifeTime=0,this.yTargetPos=o,this.realYSpeed=this.ySpeed,this.direction=n,this.isInAir=!1,this.maxPosX=null,this.node.scale=1,this.createShadow(),this.speed=this.originSpeed,this.penetrate=i,this.yMove=r,this.penetrateCnt=l,this.ignoreDive=!1},t.prototype.logicUpdate=function(a){this.lifeTime+=a,this.lifeTime>=this.maxLifeTime?this.close():(this.updateMove(a),0!=this.rotateSpeed&&this.bulletNode&&(this.bulletNode.angle-=this.rotateSpeed*a))},t.prototype.yUpdateMove=function(a){this.node.y-=this.speed*a*.5},t.prototype.updateMove=function(a){if(this.yMove)return this.yUpdateMove(a),void this.shadowMove();if(this.node.x+=this.direction.x*this.speed*a,this.node.y+=this.direction.y*this.speed*a,this.shadowMove(),null!=this.maxPosX&&this.node.x>=this.maxPosX)return this.playHitEffect(),void this.close();if(this.yTargetPos&&this.node.y!=this.yTargetPos){if(this.realYSpeed=Math.max(0,this.realYSpeed-400*a),this.node.y>this.yTargetPos){var t=this.node.y-this.ySpeed*a;this.node.y=Math.max(this.yTargetPos,t)}this.node.y<this.yTargetPos&&(t=this.node.y+this.ySpeed*a,this.node.y=Math.min(this.yTargetPos,t))}},t.prototype.createShadow=function(){var a=this;if(this.needShadow){var t=c.pzaNodeManager.getDownEffectNode();m.pzaBundleObjectPool.requestInstantByUrl2(f.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(t);var n=o.getComponent(b.pzaShadowEffect);n&&n.init(null,cc.v2(),.35),a.curShadow=n,a.shadowMove()}else console.error(e)})}else this.curShadow=null},t.prototype.shadowMove=function(){if(null!=this.curShadow){var a=cc.v2(this.node.x,0);if(this.bulletYIndex<0)a.y=this.node.y-60;else{var t=.2*D.pzaGameState.map.getYInterval(this.bulletYIndex);D.pzaGameState.map.fixMapYOffset(this.bulletYIndex,a,t),null!=this.yTargetPos&&this.node.y!=this.yTargetPos&&(a.y-=this.yTargetPos-this.node.y)}this.curShadow.followMove(a)}},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.onCollision=function(a){if(a&&a.node.group==s.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(P.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderZombie=function(a){if(a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==y.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&!(!this.ignoreDive&&a.buffData.hasBuff(z.pzaBuffType.DIVE)||a.buffData.hasBuff(z.pzaBuffType.UNABLE_SELECT))&&(this.isInAir||!a.buffData.hasBuff(z.pzaBuffType.FLY))&&(!this.isInAir||a.buffData.hasBuff(z.pzaBuffType.FLY))&&!(a.buffData.hasBuff(z.pzaBuffType.INVINCIBLE)||a.zombieData&&a.zombieData.hypnosis)){var t=window.pzazombieManager.getZombie(a);null!=t&&(this.isCanfrost?this.frostColliderZombie(a):(this.isMine?this.rangeAtk(a):t.hurt(this.atk),this.penetrate||this.close(),this.playHitEffect(a)))}},t.prototype.close=function(){this.bulletYIndex<0?p.pzaCollisionManager.getInstance.delBulletOther(this):p.pzaCollisionManager.getInstance.delBulletByRow(this.bulletYIndex,this),null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},t.prototype.playHitEffect=function(a){if(this.hitPrefab){var t=5,e=cc.v2(this.node.x,this.node.y);a&&(t=10*-a.yIndex+5,e=cc.v2(a.logicPos.x,a.logicPos.y+70));var o=c.pzaNodeManager.getPlantZombieNode();if(o){var n=l.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.zIndex=t,this.isMine&&(e=cc.v2(a.logicPos.x,a.logicPos.y),n.scale=.6),n.setPosition(e);var i=n.getComponent(g.pzaBaseEffect);i&&i.showEffect(null,null)}}},t.prototype.frostColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(t.hurt(this.atk),this.close(),this.playHitEffect(a),t.baseData.buffData.hasBuff(z.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(z.pzaBuffType.HARD_BODY)||t.baseData.buffData.hasBuff(z.pzaBuffType.IMM_ICE_PEA)||(a.buffData.hasBuff(z.pzaBuffType.FROST)||this.playFrozenSound(),t.baseData.zombieData.zombieType!=y.pzaZombieEnum.NightWear&&a.buffData.addBuff(new z.pzaBuffInfo(z.pzaBuffType.FROST,10,.5))))},t.prototype.playFrozenSound=function(){var a="frozen_"+d.pzaUtil.getRandomNum(1,2);u.pzaSoundManager.playAudio(a)},t.prototype.rangeAtk=function(a){var t=this,e=new Set;window.pzazombieManager.zombieDatas[a.yIndex].forEach(function(t){a&&null!=t&&t.xIndex==a.xIndex&&e.add(t)}),e.forEach(function(e){if(a&&null!=e&&!e.isDead&&!e.buffData.hasBuff(z.pzaBuffType.FLY)&&(e.zombieData.zombieType==y.pzaZombieEnum.DIGGER_ZOMBIE||!e.buffData.hasBuff(z.pzaBuffType.INVINCIBLE)&&!e.buffData.hasBuff(z.pzaBuffType.UNABLE_SELECT))){var o=window.pzazombieManager.getZombie(e);o&&o.hurt(t.atk,a,v.pzaAttackType.NORMAL_BOOM)}})},i([_(cc.Node)],t.prototype,"bulletNode",void 0),i([_({displayName:"\u5b50\u5f39\u98de\u884c\u901f\u5ea6"})],t.prototype,"speed",void 0),i([_({displayName:"\u5b50\u5f39Y\u8f74\u98de\u884c\u901f\u5ea6"})],t.prototype,"ySpeed",void 0),i([_({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],t.prototype,"maxLifeTime",void 0),i([_({displayName:"\u5b50\u5f39\u81ea\u8f6c\u901f\u5ea6"})],t.prototype,"rotateSpeed",void 0),i([_({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],t.prototype,"needShadow",void 0),i([_({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"hitPrefab",void 0),i([_({displayName:"\u662f\u5426\u6709\u51b0\u51bb\u6548\u679c"})],t.prototype,"isCanfrost",void 0),i([_({displayName:"\u5b50\u5f39\u7c7b\u578b\u662f\u5426\u4e3a\u5730\u96f7"})],t.prototype,"isMine",void 0),i([_(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([C],t)}(r.pzaBaseComponent);e.pzaBaseBullet=E,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../Effect/pzaShadowEffect":"pzaShadowEffect","../Plant/pzaAttackType":"pzaAttackType","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaGameState":"pzaGameState"}],pzaBaseComponentManager:[function(a,t,e){"use strict";cc._RF.push(t,"5c468O9/vFPubEpk5DzQ5Lm","pzaBaseComponentManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseComponentManager=void 0;var r=a("../Battle/pzaGameState"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.baseCmpSet=new Set,t}return n(t,a),t.prototype.onLoad=function(){window.pzabaseCmpManager=this},t.prototype.onEnable=function(){this.baseCmpSet.clear()},t.prototype.update=function(a){r.pzaGameState.gamePause||r.pzaGameState.starModeGameOver||(this.baseCmpSet.forEach(function(t){null!=t&&t.logicUpdate(a)}),window.pzaplantManager.logicUpdate(a),window.pzazombieManager.logicUpdate(a))},t.prototype.lateUpdate=function(a){r.pzaGameState.gamePause||this.baseCmpSet.size<=0||this.baseCmpSet.forEach(function(t){null!=t&&t.logicLateUpdate(a)})},t.prototype.addBaseCmp=function(a){this.baseCmpSet.add(a)},t.prototype.deleteBaseCmp=function(a){this.baseCmpSet.delete(a)},i([l],t)}(cc.Component));e.pzaBaseComponentManager=s,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState"}],pzaBaseComponent:[function(a,t,e){"use strict";cc._RF.push(t,"450c507UNlIE55+Gb7BO0ny","pzaBaseComponent");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseComponent=void 0;var r=a("./pzaGameCommonPool"),p=a("./pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lastBePasueControled=!1,t.baseData=null,t}return n(t,a),t.prototype.onEnable=function(){window.pzabaseCmpManager.addBaseCmp(this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.BACK_HOME,this.close,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_OVER,this.close,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this)},t.prototype.onDisable=function(){window.pzabaseCmpManager.deleteBaseCmp(this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.BACK_HOME,this.close,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_OVER,this.close,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this)},t.prototype.bindData=function(a){this.baseData=a},t.prototype.logicUpdate=function(){},t.prototype.logicLateUpdate=function(){},t.prototype.bePauseControl=function(){this.lastBePasueControled=!0},t.prototype.pauseSelf=function(){},t.prototype.resumeSelf=function(){},t.prototype.hurt=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t]},t.prototype.steal=function(){},t.prototype.letPlantSleep=function(){},t.prototype.getZombieHeadWps=function(){return null},t.prototype.updateRoleBuff=function(a){null==this.baseData||this.baseData.isDead||null==this.baseData.buffData||this.baseData.hp<0||this.baseData.buffData.refreshBuff(a,this)},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s],t)}(cc.Component));e.pzaBaseComponent=c,cc._RF.pop()},{"./pzaGameCommonPool":"pzaGameCommonPool","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaBaseData:[function(a,t,e){"use strict";cc._RF.push(t,"74bddgAawJMj7VtGs65WMFT","pzaBaseData"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDanceData=e.pzaZombieData=e.pzaPlantData=e.pzaBaseData=void 0;var o=a("../../Common/pzaLocalData"),n=a("./pzaBuffData"),i=a("./pzaPlantEnum"),r=a("./pzaZombieEnum"),p=function(){function a(a,t,e){void 0===e&&(e=!1),this.plantData=null,this.maxHp=0,this.hp=0,this.atk=0,this.logicPos=null,this.floatY=0,this.xIndex=-1,this.yIndex=-1,this.secondXIndex=-1,this.secondYIndex=-1,this.isDead=!1,this.isBrain=!1,this.zombieData=null,this.buffData=new n.pzaBuffData,this.groundEffect=null,null!=a&&(this.plantData=new l(a)),null!=t&&(this.zombieData=new s(t)),this.isBrain=e}return a.clonePlantData=function(t){var e=new a(t.plantData.plantType,null);return e.maxHp=t.maxHp,e.hp=t.hp,e.atk=t.atk,e.logicPos=cc.v2(t.logicPos.x,t.logicPos.y),e.floatY=t.floatY,e.xIndex=t.xIndex,e.yIndex=t.yIndex,e.secondXIndex=t.secondXIndex,e.secondYIndex=t.secondYIndex,e.plantData.readyTime=t.plantData.readyTime,e.plantData.atkInterval=t.plantData.atkInterval,e.plantData.sleeping=t.plantData.sleeping,e.plantData.hasBreakGround=t.plantData.hasBreakGround,e.plantData.cobLoadFinish=t.plantData.cobLoadFinish,e.plantData.eatTime=t.plantData.eatTime,e.plantData.growTime=t.plantData.growTime,e.plantData.growStep=t.plantData.growStep,e.plantData.growStep=t.plantData.growStep,e.plantData.atkInterval2=t.plantData.atkInterval2,e.plantData.atkArr=t.plantData.atkArr,e.plantData.atk2Arr=t.plantData.atk2Arr,t.plantData.isGrow&&(e.plantData.isGrow=t.plantData.isGrow),e},a.prototype.hurtPlanet=function(a){this.hp-=a,this.hp<=0&&(this.isDead=!0)},a.prototype.destroyIronEquip=function(){if(null!=this.zombieData){this.zombieData.equipType==r.pzaEquipType.IRON_EQUIP?(this.zombieData.equipHp=0,this.zombieData.equipType=r.pzaEquipType.NO_EQUIP):this.zombieData.equipType2==r.pzaEquipType.IRON_EQUIP?(this.zombieData.equipHp2=0,this.zombieData.equipType2=r.pzaEquipType.NO_EQUIP):this.zombieData.toolType==r.pzaEquipType.IRON_EQUIP&&(this.zombieData.toolType=r.pzaEquipType.NO_EQUIP),this.zombieData.needRefreshEquip=!0;var a=window.pzazombieManager.getZombie(this);a&&a.refreshHurtState(!1)}},a.prototype.destroyIronEquipInZj=function(a){null!=this.zombieData&&(this.zombieData.equipType==r.pzaEquipType.IRON_EQUIP&&1==a?(this.zombieData.equipHp=0,this.zombieData.equipType=r.pzaEquipType.NO_EQUIP):this.zombieData.equipType2==r.pzaEquipType.IRON_EQUIP&&2==a?(this.zombieData.equipHp2=0,this.zombieData.equipType2=r.pzaEquipType.NO_EQUIP):this.zombieData.toolType==r.pzaEquipType.IRON_EQUIP&&(this.zombieData.toolType=r.pzaEquipType.NO_EQUIP),this.zombieData.needRefreshEquip=!0)},a.prototype.clearAllEquip=function(){null!=this.zombieData&&(this.zombieData.equipHp=0,this.zombieData.equipHp2=0,this.zombieData.equipType=r.pzaEquipType.NO_EQUIP,this.zombieData.equipType2=r.pzaEquipType.NORMAL_EQUIP,this.zombieData.toolType=r.pzaEquipType.NO_EQUIP,this.zombieData.needRefreshEquip=!0)},a.prototype.hurtZombie=function(a){if(!(null==this.zombieData||this.hp<=0)){if(this.zombieData.cate===r.pzaZombieCate.Gargantuar){if(this.zombieData.equipHp2>0)return void(this.zombieData.equipHp2-=a);if(this.zombieData.equipHp>0)return void(this.zombieData.equipHp-=a)}else{if(this.zombieData.equipHp>0)return void(this.zombieData.equipHp-=a);if(this.zombieData.equipHp2>0)return void(this.zombieData.equipHp2-=a)}a<0||(this.hp-=a,this.hp<=0&&(this.isDead=!0))}},a.prototype.hurtZombie2=function(a){if(!(null==this.zombieData||this.hp<=0)){if(this.zombieData.cate==r.pzaZombieCate.Gargantuar){if(this.zombieData.equipHp>0)return void(this.zombieData.equipHp-=a)}else if(this.zombieData.equipHp2>0)return void(this.zombieData.equipHp2-=a);a<0||(this.hp-=a,this.hp<=0&&(this.isDead=!0))}},a.prototype.hurtZombieWithEquip=function(a){if(!(null==this.zombieData||this.hp<=0)){if(this.zombieData.equipHp>0){if(!(this.zombieData.equipHp<=a))return void(this.zombieData.equipHp-=a);a-=this.zombieData.equipHp,this.zombieData.equipHp=0}if(this.zombieData.equipHp2>0){if(!(this.zombieData.equipHp2<=a))return void(this.zombieData.equipHp2-=a);a-=this.zombieData.equipHp2,this.zombieData.equipHp2=0}a<0||(this.hp-=a,this.hp<=0&&(this.isDead=!0))}},a.prototype.hurtZombieBody=function(a){if(!(null==this.zombieData||this.hp<=0)){if(this.zombieData.cate===r.pzaZombieCate.Gargantuar){if(this.zombieData.equipHp>0){var t=this.zombieData.equipHp;this.zombieData.equipHp-=a,a-=t}}else this.zombieData.equipHp2>0&&(t=this.zombieData.equipHp2,this.zombieData.equipHp2-=a,a-=t);a<0||(this.hp-=a,this.hp<=0&&(this.isDead=!0))}},a.prototype.zombieDie=function(){this.hp<=0||(this.hp=0,this.zombieData.equipHp=0,this.isDead=!0,o.pzaLocalData.bpZombieDie())},a.prototype.isBePauseControlled=function(){return!(this.isDead||!this.buffData.hasBuff(n.pzaBuffType.FROZEN)&&!this.buffData.hasBuff(n.pzaBuffType.IMMOBILIZE)&&!this.buffData.hasBuff(n.pzaBuffType.FLASER))},a.prototype.isBeControlled=function(){return!(this.isDead||!this.buffData.hasBuff(n.pzaBuffType.FROZEN)&&!this.buffData.hasBuff(n.pzaBuffType.IMMOBILIZE)&&!this.buffData.hasBuff(n.pzaBuffType.DIZZ)&&!this.buffData.hasBuff(n.pzaBuffType.GARLIC)&&!this.buffData.hasBuff(n.pzaBuffType.HARD_BODY))},a}();e.pzaBaseData=p;var l=function(){function a(a){this.plantType=i.pzaPlantEnum.PEA_SHOOTER,this.readyTime=0,this.atkInterval=0,this.sleeping=!1,this.hasBreakGround=!1,this._cobLoadFinish=!1,this.adClearPlant=!1,this.eatTime=0,this.growTime=0,this.growStep=0,this.atkArr=null,this.atk2Arr=null,this.atkInterval2=0,this.isChangeLine=!1,this.cate=i.pzaPlantCate.Null,this.isGrow=!1,this.canBeShoot=!0,this.plantType=a}return Object.defineProperty(a.prototype,"cobLoadFinish",{get:function(){return this._cobLoadFinish},set:function(a){this._cobLoadFinish=a},enumerable:!1,configurable:!0}),a}();e.pzaPlantData=l;var s=function(a){this.zombieType=r.pzaZombieEnum.ZOMBIE,this.equipType=0,this.toolType=0,this.equipHp=0,this.maxEquipHp=0,this.direction=-1,this.initMSpd=0,this.moveSpd=0,this.atkInterval=0,this.hypnosis=!1,this.needRefreshEquip=!1,this.typeId=[],this.showWeight=[],this.equipType2=0,this.equipHp2=0,this.maxEquipHp2=0,this.atkArr=null,this.atkInterval2=0,this.danceData=null,this.zomBossFinger=null,this.cate=r.pzaZombieCate.Null,this.hurtCate=r.pzaZombieHurtCate.Null,this.isHoleCreate=!1,this.waveAllZombieData=null,this.canAtkZombie=!1,this.frozen=!1,this.zombieType=a};e.pzaZombieData=s;var c=function(){function a(a){this.mainData=null,this.upData=null,this.downData=null,this.leftData=null,this.rightData=null,this.walkStep=0,this.hypnosis=!1,this.mainData=a,this.hypnosis=a.zombieData.hypnosis}return a.prototype.removeOtherData=function(a){this.upData==a&&(this.upData=null),this.downData==a&&(this.downData=null),this.leftData==a&&(this.leftData=null),this.rightData==a&&(this.rightData=null)},a.prototype.getMainData=function(){return null==this.mainData||this.mainData.isDead||this.mainData.zombieData.hypnosis!=this.hypnosis?null==this.upData||this.upData.isDead||this.upData.zombieData.hypnosis!=this.hypnosis?null==this.downData||this.downData.isDead||this.downData.zombieData.hypnosis!=this.hypnosis?null==this.leftData||this.leftData.isDead||this.leftData.zombieData.hypnosis!=this.hypnosis?null==this.rightData||this.rightData.isDead||this.rightData.zombieData.hypnosis!=this.hypnosis?void 0:this.rightData:this.leftData:this.downData:this.upData:this.mainData},a.prototype.getOtherDatas=function(){var a=[],t=this.getMainData();return t==this.upData||null==this.upData||this.upData.isDead||this.upData.zombieData.hypnosis!=this.hypnosis||a.push(this.upData),t==this.downData||null==this.downData||this.downData.isDead||this.downData.zombieData.hypnosis!=this.hypnosis||a.push(this.downData),t==this.leftData||null==this.leftData||this.leftData.isDead||this.leftData.zombieData.hypnosis!=this.hypnosis||a.push(this.leftData),t==this.rightData||null==this.rightData||this.rightData.isDead||this.rightData.zombieData.hypnosis!=this.hypnosis||a.push(this.rightData),a},a.prototype.hasUpData=function(){return null!=this.upData&&!this.upData.isDead&&this.upData.zombieData.hypnosis==this.hypnosis||(this.upData=null,!1)},a.prototype.hasDownData=function(){return null!=this.downData&&!this.downData.isDead&&this.downData.zombieData.hypnosis==this.hypnosis||(this.downData=null,!1)},a.prototype.hasLeftData=function(){return null!=this.leftData&&!this.leftData.isDead&&this.leftData.zombieData.hypnosis==this.hypnosis||(this.leftData=null,!1)},a.prototype.hasRightData=function(){return null!=this.rightData&&!this.rightData.isDead&&this.rightData.zombieData.hypnosis==this.hypnosis||(this.rightData=null,!1)},a.prototype.getSpeedBuff=function(){var a;return(null==this.mainData||this.mainData.isDead||this.mainData.zombieData.hypnosis!=this.hypnosis||null==(a=this.mainData.buffData.releaseBuff(n.pzaBuffType.FROST)))&&(null==this.upData||this.upData.isDead||this.upData.zombieData.hypnosis!=this.hypnosis||null==(a=this.upData.buffData.releaseBuff(n.pzaBuffType.FROST)))&&(null==this.downData||this.downData.isDead||this.downData.zombieData.hypnosis!=this.hypnosis||null==(a=this.downData.buffData.releaseBuff(n.pzaBuffType.FROST)))&&(null==this.leftData||this.leftData.isDead||this.leftData.zombieData.hypnosis!=this.hypnosis||null==(a=this.leftData.buffData.releaseBuff(n.pzaBuffType.FROST)))&&(null==this.rightData||this.rightData.isDead||this.rightData.zombieData.hypnosis!=this.hypnosis||null==(a=this.rightData.buffData.releaseBuff(n.pzaBuffType.FROST)))?0:-a.buffValue},a}();e.pzaDanceData=c,cc._RF.pop()},{"../../Common/pzaLocalData":"pzaLocalData","./pzaBuffData":"pzaBuffData","./pzaPlantEnum":"pzaPlantEnum","./pzaZombieEnum":"pzaZombieEnum"}],pzaBaseEffect:[function(a,t,e){"use strict";cc._RF.push(t,"b2afbvP8rxKZpOCQLPbuZGR","pzaBaseEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaSpineController"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine=null,t.aniName="",t.starPlantSpine=null,t.starAniName="",t.baseSpineMaterial=null,t.ccAni=null,t.poolPrefab=null,t.endCall=null,t}return n(t,a),t.prototype.showEffect=function(a,t){var e=this;if(this.spine&&(this.spine.node.active=!0),this.starPlantSpine&&(this.starPlantSpine.node.active=!1),this.endCall=t,null==a&&(a=this.aniName),this.ccAni)return this.ccAni.play().wrapMode=cc.WrapMode.Normal,this.ccAni.off("finished",this.aniDone,this),void this.ccAni.on("finished",function(){e.aniDone()},this);this.spine.playAnimation(a,!1,this.aniDone.bind(this))},t.prototype.showStarEffect=function(){this.spine&&(this.spine.node.active=!1),this.starPlantSpine&&(this.starPlantSpine.node.active=!0),this.starPlantSpine.playAnimation(this.starAniName,!1,this.close.bind(this),null,2)},t.prototype.aniDone=function(){this.endCall&&this.endCall(),this.close()},t.prototype.pauseSelf=function(){this.ccAni?this.ccAni.pause():this.spine.pauseAnimation()},t.prototype.resumeSelf=function(){this.ccAni?this.ccAni.resume():this.spine.resumeAnimation()},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"spine\u52a8\u753b",type:l.pzaSpineController})],t.prototype,"spine",void 0),i([u({displayName:"\u52a8\u753b\u540d\u79f0"})],t.prototype,"aniName",void 0),i([u({displayName:"\u661f\u661f\u679c\u5b9e\u79cd\u4e0b\u7279\u6548",type:l.pzaSpineController})],t.prototype,"starPlantSpine",void 0),i([u({displayName:"\u661f\u661f\u679c\u5b9e\u52a8\u753b\u540d\u79f0"})],t.prototype,"starAniName",void 0),i([u(cc.Material)],t.prototype,"baseSpineMaterial",void 0),i([u(cc.Animation)],t.prototype,"ccAni",void 0),i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaBaseEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController"}],pzaBasePlant:[function(a,t,e){"use strict";cc._RF.push(t,"4a9690vgsxE/qlh9aEzanvc","pzaBasePlant");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBasePlant=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameConfig"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaSpineController"),u=a("../../Common/pzaTipManager"),d=a("../../Common/pzaUtil"),h=a("../../Common/pzaWorldEventManager"),m=a("../../Load/pzaBundleObjectPool"),f=a("../../Load/pzaPreLoadManager"),z=a("../Data/pzaBuffData"),y=a("../Data/pzaPlantEnum"),g=a("../Data/pzaZombieEnum"),b=a("../Effect/pzaShadowEffect"),v=a("../pzaGameState"),P=a("./pzaAttackType"),D=a("./pzaPlantBody"),S=cc._decorator,C=S.ccclass,_=S.property,E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.animation=null,t.body=null,t.needShadow=!0,t.shadowOffset=cc.v2(),t.shadowScale=1,t.uiIdleName="idle",t.plantSleepAni=null,t.bodyBindData=!1,t.atkInterval=0,t.hurtState=null,t.passiveSleepTime=0,t.inUI=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.node.scale=1,this.inUI=!1,this.node.stopAllActions()},t.prototype.uiShow=function(){this.plantIntact(),this.animation.playAnimation(this.uiIdleName,!0),this.inUI=!0},t.prototype.uiShowSkin=function(a){this.animation.setAnimationSkin(a)},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.passiveSleepTime=0,this.bodyBindData=!1,this.hurtState=null,this.refreshHurtState(!0),null!=t&&null!=t.yIndex){var e=10*-this.baseData.yIndex;this.node.zIndex=e}if(null!=t&&null!=t.plantData){var o=p.pzaGameConfig.getPlantConfig(t.plantData.plantType);null!=o&&(this.atkInterval=o.atkInterval,this.baseData.plantData.canBeShoot=0==o.avoidshoot,o.float&&(this.node.zIndex+=5))}this.createShadow(),this.setPos()},t.prototype.hasAwakePlant=function(a,t,e){var o=""+a+t,n=window.pzaplantManager.notTargetMap.get(o);return!(!n||!p.pzaPlantConfigData.isCoffeePlant(n.plantData.plantType)||(e.plantData.sleeping=!1,0))},t.prototype.logicUpdate=function(a){this.animation&&this.animation.flashUpdate(a),this.passiveSleepTime>0&&(this.passiveSleepTime-=a,this.passiveSleepTime<=0&&(this.resumeSelf(),this.wakeUp()))},t.prototype.logicLateUpdate=function(){this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),this.setPos()},t.prototype.setPos=function(){null==this.baseData||this.baseData.isDead||0==this.baseData.floatY||null==this.baseData.logicPos||this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.pauseSelf=function(){this.animation.pauseAnimation(),this.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.baseData&&this.baseData.isBePauseControlled()||(this.animation.resumeAnimation(),this.node.resumeAllActions())},t.prototype.findAttackTarget=function(){return null},t.prototype.attack=function(){},t.prototype.wakeUp=function(){this.plantSleepAni&&(this.plantSleepAni.node.active=!1),this.passiveSleepTime=0},t.prototype.createShadow=function(){var a=this;this.needShadow&&m.pzaBundleObjectPool.requestInstantByUrl2(f.pzaResourceUrl.SHADOW,function(t,e){if(null==t&&null!=e){var o=l.pzaNodeManager.getDownEffectNode();if(null!=o){e.setParent(o);var n=e.getComponent(b.pzaShadowEffect);n&&n.init(a.baseData,a.shadowOffset,a.shadowScale)}}else console.error(t)})},t.prototype.preventBreak=function(){this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0},t.prototype.hurt=function(a,t,e){if(void 0===e&&(e=null),this.baseData&&!this.baseData.isDead){if(e==P.pzaAttackType.ROLLING||e==P.pzaAttackType.BOOM||e==P.pzaAttackType.BANG){if(this.baseData.isDead=!0,this.baseData.hp=0,window.pzaplantManager.removePlant(this.baseData),e==P.pzaAttackType.BOOM?this.death(t):this.flaserDeath(),e==P.pzaAttackType.BOOM&&t&&t.plantData&&t.plantData.plantType==y.pzaPlantEnum.DOOM_SHROOM)return;return v.pzaGameState.partStar>0&&v.pzaGameState.lossPlantCount==v.pzaGameState.lossStarCount&&(u.pzaTipManager.showLossStarTip(!1,!0),v.pzaGameState.partStar--),void v.pzaGameState.lossPlantCount++}if(this.baseData.hurtPlanet(a),this.refreshHurtState(!1),this.animation.showLight(),(this.baseData.isDead||this.baseData.hp<=0)&&(window.pzaplantManager.removePlant(this.baseData),this.death(t),v.pzaGameState.partStar>0&&v.pzaGameState.lossPlantCount==v.pzaGameState.lossStarCount&&(u.pzaTipManager.showLossStarTip(!1,!0),v.pzaGameState.partStar--),v.pzaGameState.lossPlantCount++,e!=P.pzaAttackType.DEATH&&s.pzaSoundManager.playAudio("gulp")),e==P.pzaAttackType.THROW_ATK&&this.baseData.hp>0){var o="zombieHurt"+(Math.floor(2*Math.random())+1);s.pzaSoundManager.playAudio(o)}}},t.prototype.flaserDeath=function(){var a=this,t="chomp_plant"+d.pzaUtil.getRandomNum(1,2);s.pzaSoundManager.playAudio(t),this.baseData.buffData.addBuff(new z.pzaBuffInfo(z.pzaBuffType.FLASER,-1)),this.pauseSelf(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},t.prototype.refreshHurtState=function(a){if(a)this.plantIntact();else if(null!=this.baseData&&null!=this.baseData.plantData){var t=this.baseData.hp/this.baseData.maxHp;this.baseData.plantData.plantType==y.pzaPlantEnum.BOOM_NUT?t<=.3?this.hurtState!=g.pzaHurtStateEnum.DYING&&this.plantDying():t<=.5?this.hurtState!=g.pzaHurtStateEnum.HURT&&this.plantHurt2():t<=.75?this.hurtState!=g.pzaHurtStateEnum.HURT&&this.plantHurt():this.hurtState!=g.pzaHurtStateEnum.INTACT&&this.plantIntact():t<=1/3?this.hurtState!=g.pzaHurtStateEnum.DYING&&this.plantDying():t<=2/3?this.hurtState!=g.pzaHurtStateEnum.HURT&&this.plantHurt():this.hurtState!=g.pzaHurtStateEnum.INTACT&&this.plantIntact()}},t.prototype.plantDying=function(){this.hurtState=g.pzaHurtStateEnum.DYING},t.prototype.plantHurt=function(){this.hurtState=g.pzaHurtStateEnum.HURT},t.prototype.plantHurt2=function(){this.hurtState=g.pzaHurtStateEnum.HURT},t.prototype.plantIntact=function(){this.hurtState=g.pzaHurtStateEnum.INTACT},t.prototype.death=function(a,t){void 0===a&&(a=null),void 0===t&&(t=null),this.baseData.isDead=!0,this.close()},t.prototype.letPlantSleep=function(){this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0),this.passiveSleepTime=20)},t.prototype.close=function(){this.deletePlant(),a.prototype.close.call(this)},t.prototype.deletePlant=function(){this.baseData&&v.pzaGameState.deletPlant(this.baseData.plantData.plantType)&&h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.UPDATE_PLANT_PRICE,this.baseData.plantData.plantType)},i([_({displayName:"\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"animation",void 0),i([_({displayName:"\u78b0\u649e\u8eab\u4f53",type:D.pzaPlantBody})],t.prototype,"body",void 0),i([_({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],t.prototype,"needShadow",void 0),i([_({displayName:"\u5f71\u5b50\u504f\u79fb"})],t.prototype,"shadowOffset",void 0),i([_({displayName:"\u5f71\u5b50\u7f29\u653e"})],t.prototype,"shadowScale",void 0),i([_({displayName:"ui\u5f85\u673a\u52a8\u753b"})],t.prototype,"uiIdleName",void 0),i([_({displayName:"\u690d\u7269\u7761\u89c9\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"plantSleepAni",void 0),i([C],t)}(r.pzaBaseComponent);e.pzaBasePlant=E,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaShadowEffect":"pzaShadowEffect","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaPlantBody":"pzaPlantBody"}],pzaBaseShooter:[function(a,t,e){"use strict";cc._RF.push(t,"3e293jO+iZDf4Qky7WYJqZ+","pzaBaseShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseShooter=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab1=null,t.poolPrefab=null,t}return n(t,a),t.prototype.showShooter=function(){},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([c({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab1",void 0),i([c(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaBaseShooter=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaBaseZombie:[function(a,t,e){"use strict";cc._RF.push(t,"fabae/AhBdCuZz/pzZ7aC9g","pzaBaseZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseZombie=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaGroupEnum"),u=a("../../Common/pzaLocalData"),d=a("../../Common/pzaMapManager"),h=a("../../Common/pzaNodeManager"),m=a("../../Common/pzaSoundManager"),f=a("../../Common/pzaSpineController"),z=a("../../Common/pzaUIManager"),y=a("../../Common/pzaUtil"),g=a("../../Common/pzaWorldEventManager"),b=a("../../Load/pzaBundleObjectPool"),v=a("../../Load/pzaPreLoadManager"),P=a("../../View/Battle/pzaNewZombieView"),D=a("../../View/Battle/pzaReviveView"),S=a("../Data/pzaBuffData"),C=a("../Data/pzaPlantEnum"),_=a("../Data/pzaZombieEnum"),E=a("../Effect/pzaShadowEffect"),M=a("../Effect/pzaWaterWaveEffect"),w=a("../Plant/pzaAttackType"),T=a("../pzaEffectManager"),B=a("../pzaGameState"),A=a("../pzaSpineTool"),O=a("./pzaZombieBody"),I=a("./pzaZombieSlot"),N=a("./pzaZombieState"),G=cc._decorator,R=G.ccclass,L=G.property,k=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.animation=null,t.body=null,t.idleAniName=["idle"],t.moveAniName=["move"],t.deathAniName=["death"],t.attackAniName=["attack"],t.srIdleAni=["idle_duck"],t.srMoveAni=["move_duck"],t.srMoveInWaterAni=["move_duck2"],t.srAttackAni=["attack_duck"],t.srAttackInWaterAni=["attack_duck2"],t.srDeathAni=["death_duck"],t.srDeathInWaterAni=["death_duck2"],t.blowDeathAni="blow",t.srBlowDeathAni="blow_duck",t.srBlowDeathInWaterAni="blow_duck2",t.skinName=[],t.needShadow=!0,t.shadowOffset=cc.v2(),t.needWaterWave=!1,t.waterWaveOffset=cc.v2(),t.waterWaveScale=1,t.mask=null,t.uiIdleName="idle",t.waterMask=null,t.curShadow=null,t.curWaterWaveEff=null,t.curSkinName=null,t.zombieState=N.pzaZombieState.STAY,t.zombieHurtState=null,t.equipHurtState=null,t.equipHurtState2=null,t.showFrost=!1,t.showFire=!1,t.showSpeedUp=!1,t.hypnosisState=!1,t.bodyBindData=!1,t.hasEquip=!1,t.hasEquip2=!1,t.hasTool=!1,t.changeTargetRow=-1,t.zombieWin=!1,t.directThrowHurt=!1,t.breakDirtTime=0,t.breakDirtHeight=140,t.animationYOffset=0,t.ladderY=0,t.pushBackTime=0,t.breakCall=null,t.zombieScale=1,t.inUI=!1,t.slotMap=null,t.isInButterState=!1,t.isInGarlicState=!1,t.garlicSkinName=null,t.equip1Slot=null,t.equip2Slot=null,t.butterSlot=I.pzaZombieSlotType.butter,t.hasInWater=!1,t.hasUseSrAni=!1,t.garlicChangeR=!0,t.garlicNoChangeTime=0,t.defBowlingDamge=0,t.bodyWidth=15,t.isPlayEquipDeath=!1,t.hurtMap=new Map([[w.pzaAttackType.TALL_BOWLING,function(a){return t.baseData.hurtZombieWithEquip(a),t.baseData.isDead||t.baseData.hp<=0?(t.baseData.zombieDie(),t.death(!0),m.pzaSoundManager.playAudio("bowlingHitNormal",.5),p.pzaCollisionManager.getInstance.delZombieByRow(t.baseData.yIndex,t.body),!0):(t.zombieHurtSound(w.pzaAttackType.BOWLING),t.refreshHurtState(!1),t.animation&&t.animation.flash(),!0)}],[w.pzaAttackType.CLEAN_CAR,function(){return t.baseData.zombieDie(),t.flaserDeath(),!0}],[w.pzaAttackType.BANG,function(a){return t.baseData.hurtZombieWithEquip(a),t.baseData.isDead||t.baseData.hp<=0?(t.baseData.zombieDie(),t.death(!1),!0):(t.zombieHurtSound(w.pzaAttackType.BANG),t.refreshHurtState(!1),t.animation&&t.animation.flash(),!0)}],[w.pzaAttackType.EAT,function(){return t.baseData.zombieData.cate!==_.pzaZombieCate.Gargantuar&&t.baseData.zombieData.zombieType!==_.pzaZombieEnum.DR_ZOMBOSS&&(t.baseData.zombieDie(),t.death(!1),!0)}],[w.pzaAttackType.TWINE,function(){return t.twineDeath(),!0}],[w.pzaAttackType.BOOM,function(a){return t.baseData.hurtZombieBody(a),t.baseData.isDead||t.baseData.hp<=0?(t.ashesDeath(a,w.pzaAttackType.BOOM),!0):(t.zombieHurtSound(w.pzaAttackType.BOOM),t.refreshHurtState(!1),t.animation&&t.animation.flash(),!0)}],[w.pzaAttackType.NORMAL_BOOM,function(){return t.baseData.zombieData.cate!==_.pzaZombieCate.Gargantuar&&t.baseData.zombieData.zombieType!==_.pzaZombieEnum.DR_ZOMBOSS&&(t.baseData.zombieDie(),t.death(!1),!0)}],[w.pzaAttackType.PENETRATE,function(a){return t.baseData.zombieData.hurtCate==_.pzaZombieHurtCate.PENETRATE_HURT&&(t.zombieHurtSound(w.pzaAttackType.PENETRATE),t.penetrateHurt(a),t.refreshHurtState(!1),t.animation&&t.animation.flash(),!(t.baseData.isDead||t.baseData.hp<=0)||(t.death(!0),!0))}],[w.pzaAttackType.THROW_ATK,function(a){return!!t.directThrowHurt&&(t.zombieHurtSound(w.pzaAttackType.THROW_ATK),t.baseData.zombieData.hurtCate==_.pzaZombieHurtCate.PENETRATE_HURT?t.baseData.hurtZombieBody(a):t.baseData.hurtZombie2(a),t.baseData.isDead||t.baseData.hp<=0?(t.death(!0),!0):(t.refreshHurtState(!1),t.animation&&t.animation.flash(),!0))}],[w.pzaAttackType.SPIKE,function(a){return t.baseData.zombieData.hurtCate==_.pzaZombieHurtCate.PENETRATE_HURT&&(t.baseData.hurtZombieBody(a),(t.baseData.isDead||t.baseData.hp<=0)&&t.death(!0),t.refreshHurtState(!1),t.animation&&t.animation.flash(),!0)}],[w.pzaAttackType.BOWLING,function(a){return t.baseData.zombieData.zombieType==_.pzaZombieEnum.SCREEN_DOOR_ZOMBIE&&(a/=4),t.baseData.zombieData.zombieType==_.pzaZombieEnum.BUCKET_HEAD_ZOMBIE&&(a/=2),(a-=t.defBowlingDamge)<0&&(a=0),t.zombieHurtSound(w.pzaAttackType.BOWLING),t.baseData.hurtZombie(a),t.baseData.isDead||t.baseData.hp<=0?(t.death(!0),p.pzaCollisionManager.getInstance.delZombieByRow(t.baseData.yIndex,t.body),!0):(t.refreshHurtState(!1),t.animation&&t.animation.flash(),!0)}],[w.pzaAttackType.DEATH_ANI,function(a){return t.penetrateHurt(a),t.refreshHurtState(!1),t.animation&&t.animation.flash(),!(t.baseData.isDead||t.baseData.hp<=0)||(t.death(!0),!0)}]]),t.garlicTopJudge=!0,t.color_frozen=cc.Color.fromHEX(cc.color(),"#3B95FF"),t.color_fire=cc.Color.fromHEX(cc.color(),"#FF4242"),t.color_speedUp=cc.Color.fromHEX(cc.color(),"#FFB0B0"),t}return n(t,a),t.prototype.initEquips=function(){},t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.body.node.getComponent(cc.BoxCollider).enabled=!0,this.inUI=!1,this.ladderY=0,g.pzaWorldEventManager.addListener(g.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.initEquips()},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),g.pzaWorldEventManager.removeListener(g.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.preventBreak=function(){this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0},t.prototype.resumeBreak=function(){this.body.node.getComponent(cc.BoxCollider).enabled=!0,this.baseData.hp>0&&(this.baseData.isDead=!1)},t.prototype.uiShow=function(){this.inUI=!0,this.setZombieScale(1),this.node.scaleX=1,this.refreshFrostState(!0),this.animation.playAnimation(this.uiIdleName,!0,null,null,.5),this.refreshHurtState(!0),this.randomZombieSkin()},t.prototype.preview=function(t,e,o){void 0===o&&(o=1),a.prototype.bindData.call(this,t),this.slotMap||this.initEquips(),this.hasEquip=!0,this.hasEquip2=!0,this.hasTool=!0,this.zombieWin=!1,this.setZombieScale(o),this.node.scaleX=o,this.createShadow(e),this.randomZombieSkin(),this.refreshFrostState(!0),this.refreshHurtState(!0),Math.random()>.5&&(this.hasUseSrAni=!0),this.playStayAnimation()},t.prototype.setZombieScale=function(a){this.zombieScale=a,this.node.scale=a},t.prototype.bindData=function(t,e){if(void 0===e&&(e=!1),a.prototype.bindData.call(this,t),null!=t&&null!=t.yIndex){var o=10*-this.baseData.yIndex+5;this.node.zIndex=o}this.createShadow(),this.createWaterWave(),this.hasEquip=t.zombieData.equipType!=_.pzaEquipType.NO_EQUIP,this.hasEquip2=t.zombieData.equipType2!=_.pzaEquipType.NO_EQUIP,this.hasTool=t.zombieData.toolType!=_.pzaEquipType.NO_EQUIP,this.zombieHurtState=null,this.equipHurtState=null,this.equipHurtState2=null,this.bodyBindData=!1,this.hypnosisState=!1,this.zombieWin=!1,this.pushBackTime=0,null!=this.mask&&(this.mask.enabled=!1),this.breakDirtTime=0,this.changeTargetRow=-1,this.isPlayEquipDeath=!1,this.hasInWater=!1,this.hasUseSrAni=!1,this.garlicChangeR=!0,this.garlicNoChangeTime=0,this.garlicTopJudge=!0,window.pzaMapManager.isInWaterWay(this.baseData.yIndex)&&(this.hasUseSrAni=!0),this.randomZombieSkin(),this.slotMap||this.initEquips(),this.refreshOrientation(),this.playStayAnimation(),this.refreshFrostState(!0),this.refreshHurtState(!0),this.baseData.zombieData.hypnosis&&this.beHypnosis(!1)},t.prototype.updateEquipState=function(a,t){if(a){this.slotMap||this.initEquips();var e=this.slotMap.get(a);e?e.updateState(t):console.log("updateEquipState\u672a\u5b9a\u4f4d\u5230slot",this.baseData.zombieData.zombieType,a)}},t.prototype.breakDirt=function(a){void 0===a&&(a=null),this.breakCall=a,null!=this.mask&&(this.mask.enabled=!0),this.breakDirtTime=.3,this.breakDirtHeight=140*this.zombieScale,this.animation.node.y=-this.breakDirtHeight,this.animationYOffset=0,this.curShadow&&this.curShadow.hideShadow()},t.prototype.breakWater=function(a){void 0===a&&(a=null),this.breakCall=a,null!=this.mask&&(this.mask.enabled=!0),this.breakDirtTime=.3,this.breakDirtHeight=160*this.zombieScale,this.animation.node.y=-this.breakDirtHeight,this.animationYOffset=0*this.zombieScale,this.curShadow&&this.curShadow.hideShadow()},t.prototype.update=function(a){!this.inUI&&this.zombieWin&&null!=this.baseData&&this.zombieWinMove(a)},t.prototype.logicUpdate=function(a){if(this.baseData.zombieData.frozen&&(this.baseData.zombieData.frozen=!1,T.pzaEffectManager.createFrozenEffect(this.baseData)),this.breakDirtTime>0){this.breakDirtTime-=a;var t=-Math.max(0,this.breakDirtTime/.3)*this.breakDirtHeight+this.animationYOffset;return this.animation.node.y=t*this.zombieScale,void(this.breakDirtTime<=0&&null!=this.mask&&(this.mask.enabled=!1,this.curShadow&&this.curShadow.showShadow(),this.breakCall&&this.breakCall()))}if(null!=this.baseData&&null!=this.baseData.zombieData&&(!this.isPlayEquipDeath||this.baseData.buffData.hasBuff(S.pzaBuffType.FROZEN))&&!this.baseData.isDead){if(B.pzaGameState.allZombieInvisible?this.node.opacity=0:this.node.opacity=255,this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(a);else{var e=this.findTarget();(3==B.pzaGameState.curChapter||4==B.pzaGameState.curChapter)&&this.baseData.xIndex<0&&(e=null),e&&!e.isDead?this.attack(a,e):this.updateMove(a)}else this.changeRowMove(a)}},t.prototype.createShadow=function(a){var t=this;void 0===a&&(a=null),this.needShadow?(null==a&&(a=h.pzaNodeManager.getDownEffectNode()),b.pzaBundleObjectPool.requestInstantByUrl2(v.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(a);var n=o.getComponent(E.pzaShadowEffect);t.shadowOffset.y+=15,n&&n.init(t.baseData,t.shadowOffset,t.zombieScale),t.breakDirtTime>0&&n&&n.hideShadow(),t.curShadow=n}else console.error(e)})):this.curShadow=null},t.prototype.createWaterWave=function(a){var t=this;void 0===a&&(a=null),this.needWaterWave?(null==a&&(a=h.pzaNodeManager.getDownEffectNode()),b.pzaBundleObjectPool.requestInstantByUrl2(v.pzaResourceUrl.WATERWAVEEFFECT,function(e,o){if(null==e&&null!=o){o.setParent(a);var n=o.getComponent(M.pzaWaterWaveEffect);n&&n.init(t.baseData,t.waterWaveOffset,t.waterWaveScale),t.curWaterWaveEff=n,t.curWaterWaveEff.hideWaterWave()}else console.error(e)})):this.curWaterWaveEff=null},t.prototype.pushBack=function(a){this.pushBackTime=a},t.prototype.pushBackMove=function(a){this.baseData.zombieData.hypnosis||this.baseData.isDead||this.baseData.buffData.hasBuff(S.pzaBuffType.IMM_CONTROL)?this.pushBackTime=0:(this.pushBackTime-=a,this.baseData.logicPos.x+=200*a,this.baseData.logicPos.x>=700&&(this.baseData.logicPos.x=700))},t.prototype.updateMove=function(a){if(!(a>.7||this.isInButterState)){this.zombieState!=N.pzaZombieState.MOVE&&this.playMoveAnimation();var t=this.baseData.zombieData.moveSpd,e=1,o=this.baseData.buffData.releaseBuff(S.pzaBuffType.FROST);null!=o&&(e-=o.buffValue);var n=this.baseData.buffData.releaseBuff(S.pzaBuffType.SPEED_UP);if(null!=n&&(e+=n.buffValue),t*=e,this.animation.changeAnimationTimeScale(e),1==this.baseData.zombieData.direction?this.baseData.logicPos.x+=a*t:this.baseData.logicPos.x-=a*t,(this.baseData.zombieData.hypnosis||this.baseData.zombieData.zombieType==_.pzaZombieEnum.YETI_ZOMBIE&&1==this.baseData.zombieData.direction)&&this.baseData.logicPos.x>=640&&!this.isInGarlicState)return this.baseData.zombieDie(),void this.death(!1);this.baseData.logicPos.x<(B.pzaGameState.isZombieMode()?-450:-480)&&this.zombieGoHome();var i=this.baseData.xIndex,r=this.hypnosisState?this.bodyWidth:-this.bodyWidth,p=B.pzaGameState.map.getMapXIndex(this.baseData.logicPos,null,r),l=B.pzaGameState.map.getMapYIndex(this.baseData.logicPos,null);if(-1==p||-1==l||this.baseData.xIndex==p&&this.baseData.yIndex==l||this.onChangeIndex(p,l),this.baseData.xIndex=p,this.garlicChangeR&&-1==this.changeTargetRow){var s=.1*B.pzaGameState.map.getYInterval(this.baseData.yIndex)+15;B.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,this.baseData.logicPos,s)}if(i<0&&p>=0&&this.zombieScream(),B.pzaGameState.newZombie==this.baseData.zombieData.zombieType&&7==p)if(this.baseData.zombieData.zombieType==_.pzaZombieEnum.BUNGEE_ZOMBIE)B.pzaGameState.showUnlockZombie();else{B.pzaGameState.gamePause=!0,g.pzaWorldEventManager.triggerEvent(g.pzaWorldEventType.GAME_PAUSE,null);var c=this.node.convertToWorldSpaceAR(cc.v2());z.pzaUIManager.baseShowPopUI(v.pzaResourceUrl.NEW_ZOMBIE_VIEW,function(a){var t=a&&a.getComponent(P.pzaNewZombieView);t&&t.showNewZombie(B.pzaGameState.newZombie,c),B.pzaGameState.showUnlockZombie()})}}},t.prototype.onChangeIndex=function(a,t){this.setWaterState(a,t),this.playMoveAnimation()},t.prototype.setWaterState=function(a,t){if(this.hasUseSrAni){var e=""+a+t,o=window.pzaMapManager.BlockTypeMap.get(e);if(!this.hasInWater)switch(o){case d.pzaBlockType.POND:this.hasInWater=!0,this.onWaterEnter()}if(this.hasInWater)switch(o){case d.pzaBlockType.POND:break;default:this.hasInWater=!1,this.onWaterExit()}}},t.prototype.onWaterEnter=function(){this.zombieState==N.pzaZombieState.MOVE&&this.playMoveAnimation(),this.needWaterWave&&this.waterMask&&(this.waterMask.enabled=!0,this.curWaterWaveEff&&this.curWaterWaveEff.showWaterWave())},t.prototype.onWaterExit=function(){this.zombieState==N.pzaZombieState.MOVE&&this.playMoveAnimation(),this.needWaterWave&&this.waterMask&&(this.waterMask.enabled=!1,this.curWaterWaveEff&&this.curWaterWaveEff.hideWaterWave())},t.prototype.changeRowMove=function(a){if(this.updateMove(a),this.baseData.zombieData.zombieType==_.pzaZombieEnum.SKELETON_ZOMBIE||this.baseData.zombieData.zombieType==_.pzaZombieEnum.NECROMANCER_ZOMBIE)return this.garlicNoChangeTime+=a,void(this.garlicNoChangeTime>.25&&(this.garlicNoChangeTime=0,this.changeTargetRow=-1,this.garlicChangeR=!0));this.baseData.logicPos.y+=150*a*(this.baseData.yIndex<this.changeTargetRow?1:-1);var t=.1*B.pzaGameState.map.getYInterval(this.changeTargetRow),e=B.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.changeTargetRow,0,t);(this.baseData.yIndex<this.changeTargetRow&&e.y<=this.baseData.logicPos.y||this.baseData.yIndex>this.changeTargetRow&&e.y>=this.baseData.logicPos.y)&&(this.baseData.logicPos.y=e.y,this.body.curTarget=null,window.pzazombieManager.zombieChangeMapRow(this.body,this.baseData,this.changeTargetRow),this.changeTargetRow=-1,this.isInGarlicState&&(this.isInGarlicState=!1,this.changeSkin(this.curSkinName)),this.baseData.zombieData.hypnosis&&(window.pzazombieManager.zombieHypnosis(this.baseData),this.baseData.buffData.hasBuff(S.pzaBuffType.INVINCIBLE)&&this.baseData.buffData.removeBuff(S.pzaBuffType.INVINCIBLE)))},t.prototype.zombieWinMove=function(a){var t=this;if(!B.pzaGameState.zombieWinShowUI){if(B.pzaGameState.isRoofMode()){if(!B.pzaGameState.zombieWinShowMap)return window.pzaMapManager.failShowInfactMap(function(){t.node.setPosition(cc.v2(-650,180))}),B.pzaGameState.zombieWinShowMap=!0,this.baseData.logicPos=cc.v2(-650,180),this.node.setPosition(cc.v2(1e4,1e4)),void this.pauseSelf();if(!B.pzaGameState.finishShowWinShowMap)return;return this.baseData.logicPos.y-=250*a,this.baseData.logicPos.y<=-60&&(B.pzaGameState.zombieWinShowUI=!0,s.pzaGameManager.showGameFail()),void this.node.setPosition(this.baseData.logicPos)}this.baseData.logicPos.x-=40*a;var e=-720;if(2!=B.pzaGameState.mapId&&4!=B.pzaGameState.mapId&&10!=B.pzaGameState.mapId||(e=-750),this.baseData.logicPos.x<=e)return B.pzaGameState.zombieWinShowUI=!0,s.pzaGameManager.showGameFail(),void this.node.setPosition(this.baseData.logicPos);if(B.pzaGameState.zombieWinShowMap)this.node.setPosition(this.baseData.logicPos);else{var o=-130,n=-570,i=300*a,r=300*a,p=!1,l=!1;7==B.pzaGameState.mapId||17==B.pzaGameState.mapId?(o=-10,n=-620):16!=B.pzaGameState.mapId&&18!=B.pzaGameState.mapId||(o=-50),this.baseData.logicPos.y>o?(this.baseData.logicPos.y-=i,this.baseData.logicPos.y<=o&&(this.baseData.logicPos.y=o,l=!0)):this.baseData.logicPos.y<o?(this.baseData.logicPos.y+=i,this.baseData.logicPos.y>=o&&(this.baseData.logicPos.y=o,l=!0)):l=!0,2==B.pzaGameState.curChapter&&this.baseData.logicPos.x>n?(this.baseData.logicPos.x-=r,this.baseData.logicPos.x<=n&&(this.baseData.logicPos.x=n,p=!0)):p=!0,this.node.setPosition(this.baseData.logicPos),p&&l&&(window.pzaMapManager.failShowInfactMap(),B.pzaGameState.zombieWinShowMap=!0)}}},t.prototype.isCanClimbLabby=function(){return this.baseData.zombieData.cate!==_.pzaZombieCate.Gargantuar&&this.baseData.zombieData.cate!==_.pzaZombieCate.IceCar&&this.baseData.zombieData.zombieType!=_.pzaZombieEnum.CATAPULT_ZOMBIE},t.prototype.logicLateUpdate=function(t){if(!(t>.7)&&(a.prototype.logicLateUpdate.call(this,t),this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData),this.baseData&&B.pzaGameState.map&&this.baseData.xIndex&&-1!=this.baseData.xIndex&&this.baseData.yIndex&&-1!=this.baseData.yIndex&&this.onChangeIndex(this.baseData.xIndex,this.baseData.yIndex)),null!=this.baseData&&null!=this.baseData.logicPos)){var e=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaMapManager.LadderMap.get(e);if(null!=o&&-1==this.baseData.zombieData.direction&&this.isCanClimbLabby()){var n=o.logicPos.x-this.baseData.logicPos.x;if(n>0&&n<=60){var i=1.6*n;return this.ladderY=i,this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+i)),void(this.baseData.buffData.hasBuff(S.pzaBuffType.SPEED_UP)||this.baseData.buffData.addBuff(new S.pzaBuffInfo(S.pzaBuffType.SPEED_UP,-1,1.5)))}}if(this.ladderY>0)return this.baseData.buffData.hasBuff(S.pzaBuffType.SPEED_UP)&&this.baseData.buffData.removeBuff(S.pzaBuffType.SPEED_UP),this.ladderY-=300*t,void this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.ladderY));this.node.setPosition(this.baseData.logicPos)}},t.prototype.bePauseControl=function(){null==this.baseData||this.baseData.isDead||(a.prototype.bePauseControl.call(this),this.pauseSelf())},t.prototype.pauseSelf=function(){this.zombieWin||this.animation.pauseAnimation()},t.prototype.resumeSelf=function(){this.baseData&&this.baseData.isBePauseControlled()||this.animation&&this.animation.resumeAnimation()},t.prototype.hurt=function(a,t,e){if(void 0===e&&(e=w.pzaAttackType.FLOOR_ATK),this.baseData&&!this.baseData.isDead){if(B.pzaGameState.critValue>0&&Math.random()<B.pzaGameState.critValue&&(a=Math.round(1.5*a)),e==w.pzaAttackType.DEATH)return this.baseData.zombieDie(),void this.death(!1,e);if(!this.baseData.buffData.hasBuff(S.pzaBuffType.HARD_BODY)||e==w.pzaAttackType.BOOM||e==w.pzaAttackType.EAT){var o=this.hurtMap.get(e);if(!o||!o.call(this,a,t)){if(this.zombieHurtSound(e),this.baseData.hurtZombie(a),this.baseData.isDead||this.baseData.hp<=0)return e==w.pzaAttackType.KNOCK?void this.death(!1):e==w.pzaAttackType.FLOOR_ASHES_ATK?void this.ashesDeath():void this.death(!0);this.refreshHurtState(!1),this.animation.flash()}}}},t.prototype.penetrateHurt=function(a){this.baseData.hurtZombieBody(a)},t.prototype.twineDeath=function(){this.baseData.zombieDie(),this.death(!1)},t.prototype.death=function(a,t){var e=this;void 0===t&&(t=null),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,!0,t),a?(this.preventBreak(),this.playDeathAnimation(function(){e.close()})):this.close()},t.prototype.flaserDeath=function(){var a=this;window.pzaMapManager.isInWaterWay(this.baseData.yIndex)?this.death(!1,w.pzaAttackType.CLEAN_CAR):(this.preventBreak(),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,!0,w.pzaAttackType.CLEAN_CAR),this.pauseSelf(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.rotateTo(.15,90),cc.scaleTo(.15,.5*this.zombieScale,1*this.zombieScale),cc.delayTime(.1),cc.callFunc(function(){a.node.rotation=0,a.close()}))))},t.prototype.attack=function(a,t){var e=this;if(null!=t&&null!=t.plantData&&(t.plantData.plantType==C.pzaPlantEnum.GARLIC||t.plantData.plantType==C.pzaPlantEnum.GARLIC_CHOMPER)){if(this.baseData.zombieData.zombieType==_.pzaZombieEnum.SKELETON_ZOMBIE||this.baseData.zombieData.zombieType==_.pzaZombieEnum.NECROMANCER_ZOMBIE){if(this.baseData.zombieData.atkInterval+=a,!this.garlicChangeR)return;if(this.changeTargetRow=4,this.garlicChangeR=!1,this.baseData.zombieData.atkInterval>.25||this.garlicTopJudge){if(this.garlicTopJudge=!1,this.baseData.zombieData.atkInterval=0,m.pzaSoundManager.playAudio("Garlic"),this.damage(t),!this.attackAniName[0])return;this.zombieState=N.pzaZombieState.EAT_ATK;var o=this.attackAniName[0];this.baseData.zombieData.zombieType!=_.pzaZombieEnum.SKELETON_ZOMBIE&&this.baseData.zombieData.zombieType!=_.pzaZombieEnum.NECROMANCER_ZOMBIE||(o=this.getAttackAniName()),this.baseData.buffData.addBuff(new S.pzaBuffInfo(S.pzaBuffType.GARLIC,-1)),this.animation.playAnimation(o,!1,null,function(){e.baseData.buffData.removeBuff(S.pzaBuffType.GARLIC)})}return}return this.baseData.zombieData.atkInterval=0,this.changeMapRow(),m.pzaSoundManager.playAudio("Garlic"),void this.damage(t)}if(null!=t&&null!=t.plantData&&t.plantData.plantType==C.pzaPlantEnum.QQFUME_SHROOM)return this.baseData.zombieData.atkInterval=1,this.baseData.zombieData.atkInterval+=a,void(this.baseData.zombieData.atkInterval>=1&&(this.baseData.zombieData.atkInterval=0,this.damage(t)));this.zombieState!=N.pzaZombieState.EAT_ATK&&(this.baseData.zombieData.atkInterval=0,this.playAttakAnimation());var n=this.baseData.buffData.releaseBuff(S.pzaBuffType.FROST);null!=n&&(a*=n.buffValue),this.baseData.zombieData.atkInterval+=a,this.baseData.zombieData.atkInterval>=1&&(this.baseData.zombieData.atkInterval=0,this.damage(t))},t.prototype.damage=function(a){if(null!=a&&null!=this.baseData&&null!=this.baseData.zombieData)if(a.isBrain){var t=window.pzaplantManager.brainMap.get(a);t&&t.hurt(this.baseData.atk,this.baseData)}else if(null!=a.zombieData){var e;this.baseData.zombieData.hypnosis?(e=window.pzazombieManager.getZombie(a))&&e.hurt(this.baseData.atk):(e=window.pzazombieManager.getHypnoZombie(a))&&e.hurt(this.baseData.atk),this.zombieEatSound(a)}else{this.zombieEatSound(a);var o=window.pzaplantManager.getCanAttackPlant(a.xIndex,a.yIndex);o&&o.hurt(this.baseData.atk,this.baseData)}},t.prototype.beHypnosis=function(a){void 0===a&&(a=!0),this.hypnosisState=!0,this.body&&this.body.hypnosischangeGroup(),this.refreshOrientation(),this.animation.node.color=cc.Color.fromHEX(cc.color(),"#F35CFC"),a&&T.pzaEffectManager.createHypnoEffect(this.baseData.logicPos,this.node.zIndex)},t.prototype.findTarget=function(){if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isBrain)return this.body.curTarget;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;if(null!=this.body.curTarget.zombieData&&!this.body.curTarget.buffData.hasBuff(S.pzaBuffType.UNABLE_SELECT)&&!this.body.curTarget.buffData.hasBuff(S.pzaBuffType.DIVE))return this.body.curTarget;if(null==this.body.curTarget.plantData)return null;var a=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(null!=window.pzaMapManager.LadderMap.get(a)&&this.isCanClimbLabby())return null;if(this.body.curTarget.plantData.plantType==C.pzaPlantEnum.PUMPKIN||this.body.curTarget.plantData.plantType==C.pzaPlantEnum.LILY_SHELL)return this.body.curTarget;if(this.body.curTarget.plantData.plantType==C.pzaPlantEnum.TALL_NUT){var t=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex,e=window.pzaplantManager.pumpkinDataMap.get(t);return null==e||e.isDead?this.body.curTarget:e}if(this.body.curTarget.plantData.cate===C.pzaPlantCate.Spike)return this.baseData.zombieData.cate===_.pzaZombieCate.Gargantuar?this.body.curTarget:null;if(l.pzaPlantConfigData.isEnvPlant(this.body.curTarget.plantData.plantType)){var o=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex,n=window.pzaplantManager.plantDataMap.get(o);return null==n||n.isDead?this.body.curTarget:n}return this.body.curTarget},t.prototype.changeMapRow=function(){var a=this;if(this.attackAniName[0]){this.zombieState=N.pzaZombieState.EAT_ATK,this.baseData.buffData.addBuff(new S.pzaBuffInfo(S.pzaBuffType.GARLIC,-1));var t=this.attackAniName[0];this.animation.playAnimation(t,!1,null,function(){if(a.garlicSkinName&&!a.hasInWater&&(a.isInGarlicState=!0,a.changeSkin(a.garlicSkinName)),a.baseData.buffData.removeBuff(S.pzaBuffType.GARLIC),Math.random()>.5){var t=a.changeToUpRow();a.changeTargetRow=t?a.baseData.yIndex+1:a.baseData.yIndex-1}else t=a.changeToDownRow(),a.changeTargetRow=t?a.baseData.yIndex-1:a.baseData.yIndex+1;var e=10*-a.changeTargetRow+5;a.node.zIndex=e})}else{if(Math.random()>.5){var e=this.changeToUpRow();this.changeTargetRow=e?this.baseData.yIndex+1:this.baseData.yIndex-1}else e=this.changeToDownRow(),this.changeTargetRow=e?this.baseData.yIndex-1:this.baseData.yIndex+1;var o=10*-this.changeTargetRow+5;this.node.zIndex=o}},t.prototype.changeToUpRow=function(){var a=this.baseData.yIndex+1;if(a>=B.pzaGameState.map.getMapRow())return!1;var t=window.pzaMapManager.isInWaterWay(a);return l.pzaGameConfig.isWaterZombie(this.baseData.zombieData.zombieType)==t},t.prototype.changeToDownRow=function(){var a=this.baseData.yIndex-1;if(a<0)return!1;var t=window.pzaMapManager.isInWaterWay(a);return l.pzaGameConfig.isWaterZombie(this.baseData.zombieData.zombieType)==t},t.prototype.refreshHurtState=function(a){if(a)return this.animation.node.y=0,this.equipIntact(),this.equipIntact2(),void this.zombieIntact();if(this.baseData&&this.baseData.zombieData){var t;if(this.hasEquip&&(this.baseData.zombieData.equipType==_.pzaEquipType.NO_EQUIP?this.equipDeath(!1):(t=this.baseData.zombieData.equipHp/this.baseData.zombieData.maxEquipHp)<=0?this.equipHurtState!=_.pzaHurtStateEnum.DEAD&&this.equipDeath(!0):t<=1/3?this.equipHurtState!=_.pzaHurtStateEnum.DYING&&this.equipDying():t<=2/3?this.equipHurtState!=_.pzaHurtStateEnum.HURT&&this.equipHurt():this.equipHurtState!=_.pzaHurtStateEnum.INTACT&&this.equipIntact()),this.hasEquip2&&(this.baseData.zombieData.equipType2==_.pzaEquipType.NO_EQUIP?this.equipDeath2(!1):(t=this.baseData.zombieData.equipHp2/this.baseData.zombieData.maxEquipHp2)<=0?this.equipHurtState2!=_.pzaHurtStateEnum.DEAD&&this.equipDeath2(!0):t<=1/3?this.equipHurtState2!=_.pzaHurtStateEnum.DYING&&this.equipDying2():t<=2/3?this.equipHurtState2!=_.pzaHurtStateEnum.HURT&&this.equipHurt2():this.equipHurtState2!=_.pzaHurtStateEnum.INTACT&&this.equipIntact2()),this.baseData.zombieData.cate==_.pzaZombieCate.Gargantuar)if(this.baseData.zombieData.zombieType==_.pzaZombieEnum.GARGANTUAR4||this.baseData.zombieData.zombieType==_.pzaZombieEnum.RED_GARGANTUAR4){var e=this.baseData.zombieData.equipHp/this.baseData.zombieData.maxEquipHp,o=this.baseData.zombieData.equipHp2/this.baseData.zombieData.maxEquipHp2;e<=0&&o<=0&&(this.baseData.buffData.removeBuff(S.pzaBuffType.IMM_CONTROL),this.baseData.buffData.removeBuff(S.pzaBuffType.IMM_ICE),this.baseData.buffData.removeBuff(S.pzaBuffType.IMM_ICE_PEA))}else(o=this.baseData.zombieData.equipHp2/this.baseData.zombieData.maxEquipHp2)<=0&&this.baseData.buffData.removeBuff(S.pzaBuffType.IMM_ICE_PEA);this.hasTool&&this.baseData.zombieData.toolType==_.pzaEquipType.NO_EQUIP&&this.toolDeath();var n=this.baseData.hp/this.baseData.maxHp;n<=1/3?this.zombieHurtState!=_.pzaHurtStateEnum.DYING&&this.zombieDying():n<=2/3?this.zombieHurtState!=_.pzaHurtStateEnum.HURT&&this.zombieHurt():this.zombieHurtState!=_.pzaHurtStateEnum.INTACT&&this.zombieIntact()}},t.prototype.refreshOrientation=function(){null!=this.baseData&&null!=this.baseData.zombieData&&(this.node.scaleX=-this.baseData.zombieData.direction*this.zombieScale)},t.prototype.changeSkin=function(a){this.animation.setAnimationSkin(a),a!==this.garlicSkinName&&(this.curSkinName=a),this.slotMap&&this.slotMap.forEach(function(a){a.state&&a.updateState(a.state,!0)})},t.prototype.randomZombieSkin=function(){null!=this.skinName&&(this.skinName.length<=1?null!=this.skinName[0]&&this.changeSkin(this.skinName[0]):(this.curSkinName=Math.random()>.7?this.skinName[1]:this.skinName[0],this.changeSkin(this.curSkinName)))},t.prototype.getStayAniName=function(){return this.hasUseSrAni&&this.srIdleAni.length>0?y.pzaUtil.getRandomValueFromArray(this.srIdleAni):y.pzaUtil.getRandomValueFromArray(this.idleAniName)},t.prototype.getStayAniNoSr=function(){return y.pzaUtil.getRandomValueFromArray(this.idleAniName)},t.prototype.playStayAnimation=function(){this.zombieState=N.pzaZombieState.STAY,this.animation.playAnimation(this.getStayAniNoSr(),!0)},t.prototype.getMoveAniName=function(){return this.hasUseSrAni&&this.srMoveAni.length>0?this.hasInWater&&this.srMoveInWaterAni.length>0?y.pzaUtil.getRandomValueFromArray(this.srMoveInWaterAni):y.pzaUtil.getRandomValueFromArray(this.srMoveAni):this.hasInWater&&this.srMoveInWaterAni.length>0?y.pzaUtil.getRandomValueFromArray(this.srMoveInWaterAni):y.pzaUtil.getRandomValueFromArray(this.moveAniName)},t.prototype.getMoveAniNameArray=function(){return this.hasUseSrAni&&this.srMoveAni.length>0?this.hasInWater&&this.srMoveInWaterAni.length>0?this.srMoveInWaterAni:this.srMoveAni:this.hasInWater&&this.srMoveInWaterAni.length>0?this.srMoveInWaterAni:this.moveAniName},t.prototype.playMoveAnimation=function(){if(this.zombieState=N.pzaZombieState.MOVE,this.animation){for(var a=this.getMoveAniNameArray(),t=0;t<a.length;t++)if(a[t]==this.animation.spineAnimation.animation)return;this.animation.playAnimation(this.getMoveAniName(),!0,null,null,1)}},t.prototype.getAttackAniName=function(){return this.hasUseSrAni&&this.srAttackAni.length>0?this.hasInWater&&this.srAttackInWaterAni.length>0?y.pzaUtil.getRandomValueFromArray(this.srAttackInWaterAni):y.pzaUtil.getRandomValueFromArray(this.srAttackAni):this.hasInWater&&this.srAttackInWaterAni.length>0?y.pzaUtil.getRandomValueFromArray(this.srAttackInWaterAni):y.pzaUtil.getRandomValueFromArray(this.attackAniName)},t.prototype.playAttakAnimation=function(){var a=this;this.zombieState=N.pzaZombieState.EAT_ATK,this.animation.playAnimation(this.getAttackAniName(),!0,null,function(){var t=a.findTarget();if(null!=t){if(!(t.isDead||null==t.plantData||t.plantData.plantType!=C.pzaPlantEnum.HYPNO_SHROOM&&t.plantData.plantType!=C.pzaPlantEnum.REDHYPNO_SHROOM||t.plantData.sleeping)){m.pzaSoundManager.playAudio("floop"),m.pzaSoundManager.playAudio("mindcontrolled"),t.isDead=!0;var e=window.pzaplantManager.getPlantByData(t);t.plantData.plantType==C.pzaPlantEnum.REDHYPNO_SHROOM?(e&&e.death(),a.death(!1)):(window.pzazombieManager.zombieHypnosis(a.baseData),e&&e.close(),window.pzaplantManager.removePlant(t))}t.isDead||null==t.plantData||t.plantData.plantType!=C.pzaPlantEnum.HYPNO_GARLIC||(m.pzaSoundManager.playAudio("floop"),m.pzaSoundManager.playAudio("mindcontrolled"),a.baseData.zombieData.hypnosis=!0,a.baseData.zombieData.direction=1,a.body.node.group=c.pzaGroupEnum.PLANT,a.baseData.buffData.addBuff(new S.pzaBuffInfo(S.pzaBuffType.INVINCIBLE,-1)),a.changeMapRow(),m.pzaSoundManager.playAudio("Garlic"),a.damage(t))}})},t.prototype.getDeathAniName=function(){return this.hasUseSrAni&&this.srDeathAni.length>0?this.hasInWater&&this.srDeathInWaterAni.length>0?y.pzaUtil.getRandomValueFromArray(this.srDeathInWaterAni):y.pzaUtil.getRandomValueFromArray(this.srDeathAni):this.hasInWater&&this.srDeathInWaterAni.length>0?y.pzaUtil.getRandomValueFromArray(this.srDeathInWaterAni):y.pzaUtil.getRandomValueFromArray(this.deathAniName)},t.prototype.playDeathAnimation=function(a){this.zombieState=N.pzaZombieState.DEAD,this.zombieHurtState=_.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),this.animation.playAnimation(this.getDeathAniName(),!1,a),this.zombieFallSound(),this.hasEquip&&this.updateEquipState(this.equip1Slot,0),this.hasEquip2&&this.updateEquipState(this.equip2Slot,0)},t.prototype.equipDeath=function(){this.equipHurtState=_.pzaHurtStateEnum.DEAD,this.hasEquip=!1,this.equip1Slot!=I.pzaZombieSlotType.head_nut&&this.updateEquipState(this.equip1Slot,0)},t.prototype.equipDeath2=function(){this.equipHurtState=_.pzaHurtStateEnum.DEAD,this.hasEquip2=!1,this.equip2Slot!=I.pzaZombieSlotType.head_nut&&this.updateEquipState(this.equip2Slot,0)},t.prototype.toolDeath=function(){this.hasTool=!1},t.prototype.zombieDying=function(){this.zombieHurtState=_.pzaHurtStateEnum.DYING},t.prototype.zombieHurt=function(){this.zombieHurtState=_.pzaHurtStateEnum.HURT},t.prototype.zombieCharmHurt=function(){this.zombieHurtState=_.pzaHurtStateEnum.HURTCHARM},t.prototype.zombieIntact=function(){this.zombieHurtState=_.pzaHurtStateEnum.INTACT},t.prototype.equipDying=function(){this.equipHurtState=_.pzaHurtStateEnum.DYING,this.updateEquipState(this.equip1Slot,3)},t.prototype.equipHurt=function(){this.equipHurtState=_.pzaHurtStateEnum.HURT,this.updateEquipState(this.equip1Slot,2)},t.prototype.equipIntact=function(){this.equipHurtState=_.pzaHurtStateEnum.INTACT,this.updateEquipState(this.equip1Slot,1)},t.prototype.equipDying2=function(){this.equipHurtState2=_.pzaHurtStateEnum.DYING,this.updateEquipState(this.equip2Slot,3)},t.prototype.equipHurt2=function(){this.equipHurtState2=_.pzaHurtStateEnum.HURT,this.updateEquipState(this.equip2Slot,2)},t.prototype.equipIntact2=function(){this.equipHurtState2=_.pzaHurtStateEnum.INTACT,this.updateEquipState(this.equip2Slot,1)},t.prototype.refreshFrostState=function(a){if(a)return this.showFrost=!1,this.showFire=!1,this.showSpeedUp=!1,void(this.animation.node.color=cc.Color.WHITE);if(!(null==this.baseData||this.animation.flashTime>0||this.baseData.zombieData.hypnosis))if(this.baseData.buffData.hasBuff(S.pzaBuffType.FROST)){if(!this.baseData.isDead&&!this.showFrost)return this.showFrost=!0,void(this.animation.node.color=this.color_frozen)}else if(this.baseData.buffData.hasBuff(S.pzaBuffType.FIRE)){if(!this.baseData.isDead&&!this.showFire)return this.showFire=!0,void(this.animation.node.color=this.color_fire)}else if(this.baseData.buffData.hasBuff(S.pzaBuffType.SPEED_UP)){if(!this.baseData.isDead&&!this.showSpeedUp)return void(this.showSpeedUp=!0)}else(this.showFrost||this.showFire)&&(this.showFire=!1,this.showFrost=!1,this.showSpeedUp=!1,this.animation.node.color=cc.Color.WHITE)},t.prototype.previewClose=function(){this.baseData&&(this.baseData.isDead=!0,this.baseData.hp=0),this.close()},t.prototype.updateRoleBuff=function(t){a.prototype.updateRoleBuff.call(this,t),this.slotMap&&this.slotMap.get(this.butterSlot)&&(this.baseData.buffData.hasBuff(S.pzaBuffType.IMMOBILIZE)?this.isInButterState=!0:this.isInButterState&&(this.isInButterState=!1))},t.prototype.zombieGoHome=function(){var a=this;if(B.pzaGameState.isZombieMode())return this.baseData.zombieDie(),void this.death(!1);if(!window.pzaMapManager.hasCleanCar(this.baseData.yIndex)&&!B.pzaGameState.isGameEnd&&!u.pzaLocalData.isPopReviveView){var t=function(){B.pzaGameState.isGameEnd=!0,a.zombieWin=!0,a.resumeSelf(),a.node.zIndex=100,s.pzaGameManager.getCurrentGame().partFail()};B.pzaGameState.hadRevived?t():(B.pzaGameState.gamePause=!0,g.pzaWorldEventManager.triggerEvent(g.pzaWorldEventType.GAME_PAUSE,null),u.pzaLocalData.isPopReviveView=!0,z.pzaUIManager.baseShowPopUI(v.pzaResourceUrl.GAME_REVIVE_VIEW,function(e){var o=e&&e.getComponent(D.pzaReviveView);o&&o.init(function(){a.baseData&&(a.baseData.zombieDie(),a.death(!1))},t,!1)}))}},t.prototype.getZombieHeadWps=function(){return this.baseData||!this.butterSlot||this.baseData&&this.baseData.zombieData.zombieType==_.pzaZombieEnum.LADDER_ZOMBIE?this.node&&this.node.parent?this.node.convertToWorldSpaceAR(cc.v2()):cc.v2(0,0):A.pzaSpineTool.findBonePos(this.animation.spineAnimation,this.butterSlot,this.node)},t.prototype.ashesDeath=function(a,t,e){if(void 0===a&&(a=0),void 0===t&&(t=w.pzaAttackType.FLOOR_ATK),void 0===e&&(e="blow"),this.baseData.zombieDie(),a!=B.pzaGameState.adCherryBoomDmg||t!=w.pzaAttackType.BOOM||this.baseData.zombieData.zombieType!=_.pzaZombieEnum.YELLOW_DUCK_ZOMBIE&&this.baseData.zombieData.zombieType!=_.pzaZombieEnum.SKELETON_ZOMBIE&&this.baseData.zombieData.zombieType!=_.pzaZombieEnum.BedCar&&this.baseData.zombieData.zombieType!=_.pzaZombieEnum.ZOMBONI3?this.death(!1):this.death(!1,w.pzaAttackType.DEATH),this.hasInWater)e=this.srBlowDeathInWaterAni?this.srBlowDeathInWaterAni:"blow_duck2";else{e=this.hasUseSrAni?this.srBlowDeathAni?this.srBlowDeathAni:"blow_duck":this.blowDeathAni?this.blowDeathAni:"blow";var o=this.baseData.zombieData.zombieType;T.pzaEffectManager.createAshesEffect(o,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,this.animation.spineAnimation.node,e)}},t.prototype.zombieScream=function(){var a="groan"+y.pzaUtil.getRandomNum(1,3);m.pzaSoundManager.playAudio(a)},t.prototype.zombieFallSound=function(){var a="zombie_falling_"+y.pzaUtil.getRandomNum(1,2);m.pzaSoundManager.playAudio(a)},t.prototype.zombieEatSound=function(a){if(null!=a.zombieData){var t="chomp_plant3";m.pzaSoundManager.playAudio(t)}else null!=a.plantData&&(a.plantData.plantType==C.pzaPlantEnum.WALL_NUT||a.plantData.plantType==C.pzaPlantEnum.TALL_NUT?(t="chomp_plant3",m.pzaSoundManager.playAudio(t)):(t="chomp_plant"+y.pzaUtil.getRandomNum(1,2),m.pzaSoundManager.playAudio(t)))},t.prototype.zombieHurtSound=function(a){if(a==w.pzaAttackType.KNOCK)m.pzaSoundManager.playAudio("bangzombie");else{var t="zombieHurt"+y.pzaUtil.getRandomNum(1,2);m.pzaSoundManager.playAudio(t)}},t.prototype.handBookPreview=function(){},t.prototype.close=function(){this.baseData&&(this.baseData.zombieData.hypnosis?p.pzaCollisionManager.getInstance.delPlantByRow(this.baseData.yIndex,this.body):p.pzaCollisionManager.getInstance.delZombieByRow(this.baseData.yIndex,this.body)),a.prototype.close.call(this)},i([L({displayName:"\u52a8\u753b",type:f.pzaSpineController})],t.prototype,"animation",void 0),i([L({displayName:"\u78b0\u649e\u8eab\u4f53",type:O.pzaZombieBody})],t.prototype,"body",void 0),i([L({displayName:"\u5f85\u673a\u52a8\u753b\u540d\u79f0",type:[cc.String]})],t.prototype,"idleAniName",void 0),i([L({displayName:"\u79fb\u52a8\u52a8\u753b\u540d\u79f0",type:[cc.String]})],t.prototype,"moveAniName",void 0),i([L({displayName:"\u6b7b\u4ea1\u52a8\u753b\u540d\u79f0",type:[cc.String]})],t.prototype,"deathAniName",void 0),i([L({displayName:"\u653b\u51fb\u52a8\u753b\u540d\u79f0",type:[cc.String]})],t.prototype,"attackAniName",void 0),i([L({displayName:"\u6cf3\u5708\u5f85\u673a\u52a8\u753b",type:[cc.String]})],t.prototype,"srIdleAni",void 0),i([L({displayName:"\u6cf3\u5708\u79fb\u52a8\u52a8\u753b",type:[cc.String]})],t.prototype,"srMoveAni",void 0),i([L({displayName:"\u6cf3\u5708\u79fb\u52a8\u52a8\u753b\u5728\u6c34\u9762",type:[cc.String]})],t.prototype,"srMoveInWaterAni",void 0),i([L({displayName:"\u6cf3\u5708\u653b\u51fb\u52a8\u753b",type:[cc.String]})],t.prototype,"srAttackAni",void 0),i([L({displayName:"\u6cf3\u5708\u653b\u51fb\u52a8\u753b\u5728\u6c34\u9762",type:[cc.String]})],t.prototype,"srAttackInWaterAni",void 0),i([L({displayName:"\u6cf3\u5708\u6b7b\u4ea1\u52a8\u753b",type:[cc.String]})],t.prototype,"srDeathAni",void 0),i([L({displayName:"\u6cf3\u5708\u6b7b\u4ea1\u52a8\u753b\u5728\u6c34\u9762",type:[cc.String]})],t.prototype,"srDeathInWaterAni",void 0),i([L({displayName:"\u7206\u70b8\u6b7b\u4ea1\u52a8\u753b"})],t.prototype,"blowDeathAni",void 0),i([L({displayName:"\u6cf3\u5708\u7206\u70b8\u6b7b\u4ea1\u52a8\u753b"})],t.prototype,"srBlowDeathAni",void 0),i([L({displayName:"\u6cf3\u5708\u7206\u70b8\u6b7b\u4ea1\u52a8\u753b\u5728\u6c34\u4e2d"})],t.prototype,"srBlowDeathInWaterAni",void 0),i([L({displayName:"\u50f5\u5c38\u76ae\u80a4\u540d\u79f0",type:[cc.String]})],t.prototype,"skinName",void 0),i([L({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],t.prototype,"needShadow",void 0),i([L({displayName:"\u5f71\u5b50\u504f\u79fb"})],t.prototype,"shadowOffset",void 0),i([L({displayName:"\u662f\u5426\u9700\u8981\u6c34\u6ce2"})],t.prototype,"needWaterWave",void 0),i([L({displayName:"\u6c34\u6ce2\u504f\u79fb"})],t.prototype,"waterWaveOffset",void 0),i([L({displayName:"\u6c34\u6ce2\u7f29\u653e"})],t.prototype,"waterWaveScale",void 0),i([L({displayName:"mask",type:cc.Mask})],t.prototype,"mask",void 0),i([L({displayName:"ui\u5f85\u673a\u52a8\u753b"})],t.prototype,"uiIdleName",void 0),i([L({type:cc.Mask})],t.prototype,"waterMask",void 0),i([R],t)}(r.pzaBaseComponent);e.pzaBaseZombie=k,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaMapManager":"pzaMapManager","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewZombieView":"pzaNewZombieView","../../View/Battle/pzaReviveView":"pzaReviveView","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaShadowEffect":"pzaShadowEffect","../Effect/pzaWaterWaveEffect":"pzaWaterWaveEffect","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaZombieBody":"pzaZombieBody","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaBattleData:[function(a,t,e){"use strict";cc._RF.push(t,"3f945218QVK2JRe0zeKr3TM","pzaBattleData"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattleData=void 0;var o=a("../../Common/pzaGameManager"),n=a("../../Common/pzaLocalData"),i=a("../pzaGameState"),r=function(){function a(){this.gameMode=6,this.chapter=1,this.part=1,this.sunLightCount=0,this.selectPlants=null,this.curImitaterPlant=null,this.hasRevive=!1,this.advancePlant=[],this.cdReduceValue=0,this.sunReduceValue=0,this.critValue=0,this.cleanCarState=[],this.TombMap=[],this.DoomHoleMap=[],this.GoldHoleMap=[],this.ZombieHoleMap=[],this.LadderMap=[],this.plantData=[],this.plantEnvData=[],this.pumpkinData=[],this.noTargetData=[],this.zombieEndlessPart=1,this.zombiePlantList=null,this.state=0,this.inGameTime=0,this.adPlantTimes=0,this.toolButtonLeftArr=null,this.tryPlantCountArrayEndLess=[0,0,0,0,0,0,0,0],this.watchADTryPlantCountEndLess=0}return a.saveData=function(t,e){void 0===e&&(e=null);var r=new a;r.gameMode=i.pzaGameState.gameMode,r.chapter=i.pzaGameState.curChapter,r.part=i.pzaGameState.curPart,r.sunLightCount=i.pzaGameState.sunLightCount,r.selectPlants=window.pzaplantManager.curSelectPlants,r.curImitaterPlant=i.pzaGameState.curImitaterPlant,r.hasRevive=i.pzaGameState.hadRevived,i.pzaGameState.advancePlantMap.forEach(function(a,t){r.advancePlant.push({plant:t,count:a})}),r.cdReduceValue=i.pzaGameState.cdReduceValue,r.sunReduceValue=i.pzaGameState.sunReduceValue,r.critValue=i.pzaGameState.critValue,r.cleanCarState=window.pzaMapManager.getCleanCarState(),r.zombieEndlessPart=i.pzaGameState.zombieEndlessPart,r.zombiePlantList=e,r.state=t;var p=o.pzaGameManager.getCurrentGame();return r.adPlantTimes=p.adPlantTimes,r.toolButtonLeftArr=p.toolButtonLeftArr,window.pzaMapManager.TombMap.forEach(function(a){r.TombMap.push({xIndex:a.xIndex,yIndex:a.yIndex})}),window.pzaMapManager.LadderMap.forEach(function(a){r.LadderMap.push({xIndex:a.xIndex,yIndex:a.yIndex})}),window.pzaMapManager.DoomHoleSet.forEach(function(a){r.DoomHoleMap.push({xIndex:a.mapXIndex,yIndex:a.mapYIndex,time:a.holeTime,step:a.holeStep})}),window.pzaMapManager.GoldHoleSet.forEach(function(a){r.GoldHoleMap.push({xIndex:a.mapXIndex,yIndex:a.mapYIndex,time:a.holeTime,step:a.holeStep})}),window.pzaMapManager.ZombieHoleSet.forEach(function(a){r.ZombieHoleMap.push({xIndex:a.mapXIndex,yIndex:a.mapYIndex,time:a.holeTime,step:a.holeStep})}),window.pzaplantManager.plantDataMap.forEach(function(a){r.plantData.push(a)}),window.pzaplantManager.plantEnvDataMap.forEach(function(a){r.plantEnvData.push(a)}),window.pzaplantManager.pumpkinDataMap.forEach(function(a){r.pumpkinData.push(a)}),window.pzaplantManager.notTargetMap.forEach(function(a){r.noTargetData.push(a)}),r.tryPlantCountArrayEndLess=n.pzaLocalData.data.tryPlantCountArrayEndLess,r.watchADTryPlantCountEndLess=n.pzaLocalData.data.watchADTryPlantCountEndLess,n.pzaLocalData.addDirty("tryPlantCountArrayEndLess","watchADTryPlantCountEndLess"),r},a.readData=function(a){if(null==a)return i.pzaGameState.inGameTime=0,i.pzaGameState.hasReportAliveOnly=!1,n.pzaLocalData.data.tryPlantCountArrayEndLess=[0,0,0,0,0,0,0,0],void(n.pzaLocalData.data.watchADTryPlantCountEndLess=0);i.pzaGameState.gameMode=a.gameMode,i.pzaGameState.curChapter=a.chapter,i.pzaGameState.curPart=a.part,i.pzaGameState.sunLightCount=a.sunLightCount,i.pzaGameState.curImitaterPlant=a.curImitaterPlant,i.pzaGameState.hadRevived=a.hasRevive,i.pzaGameState.cdReduceValue=a.cdReduceValue,i.pzaGameState.sunReduceValue=a.sunReduceValue,i.pzaGameState.critValue=a.critValue,i.pzaGameState.zombieEndlessPart=a.zombieEndlessPart,null!=a.advancePlant&&a.advancePlant.forEach(function(a){i.pzaGameState.advancePlantMap.set(a.plant,a.count)}),i.pzaGameState.inGameTime=0,i.pzaGameState.hasReportAliveOnly=!1,n.pzaLocalData.data.tryPlantCountArrayEndLess=a.tryPlantCountArrayEndLess,n.pzaLocalData.data.watchADTryPlantCountEndLess=a.watchADTryPlantCountEndLess},a}();e.pzaBattleData=r,cc._RF.pop()},{"../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../pzaGameState":"pzaGameState"}],pzaBattleDownView:[function(a,t,e){"use strict";cc._RF.push(t,"980c1Mp5PZGYaDiC5mPrVDT","pzaBattleDownView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattleDownView=void 0;var r=a("../../Battle/Data/pzaGuideType"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameManager"),s=a("../../Common/pzaLocalData"),c=a("../../Common/pzaNodeManager"),u=a("../../Common/pzaOperationMgr"),d=a("../../Common/pzaSoundManager"),h=a("../../Common/pzaStatisticsMgr"),m=a("../../Common/pzaUIManager"),f=a("../../Common/pzaUtil"),z=a("../../Common/pzaWorldEventManager"),y=a("../../Load/pzaPreLoadManager"),g=a("../../utils/pzaChannel"),b=a("../pzaBubbleItem"),v=a("../pzaCommonMask"),P=a("../pzaWarningView"),D=a("./pzaBattlePropView"),S=a("./pzaMenuView"),C=cc._decorator,_=C.ccclass,E=C.property,M=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sunUIShowNode=null,t.sunCountLabel=null,t.sunUINode=null,t.shovelShowNode=null,t.shovel=null,t.blackShovel=null,t.guideArrow=null,t.pauseBtn=null,t.speedBtn=null,t.speedAdTag=null,t.speedCount=null,t.gameProp=null,t.freePlantNode=null,t.skipPartBtn=null,t.testNextWaveBtn=null,t.curSunCount=0,t.skipCutDown=0,t}return n(t,a),t.prototype.onLoad=function(){cc.winSize.width<=1300&&(this.node.scale=.9,this.node.x-=50);var a=this.sunUINode.convertToWorldSpaceAR(cc.v2()),t=c.pzaNodeManager.getUpEffectNode();if(null!=t){var e=t.convertToNodeSpaceAR(a);p.pzaGameState.sunMoveUIPos=cc.v2(e.x,e.y)}},t.prototype.onEnable=function(){this.curSunCount=p.pzaGameState.sunLightCount,this.sunCountLabel.string=""+this.curSunCount,this.refreshSkipPartBtn(),this.testNextWaveBtn.active=s.pzaLocalData.testMode,g.pzaChannel.isConfRemote||(this.testNextWaveBtn.active=!1),u.pzaOperationMgr.isShowedChangeSpeedTips=!1,u.pzaOperationMgr.startTipsDetect(),this.shovel.on(cc.Node.EventType.TOUCH_START,this.clickShovel,this),this.shovel._touchListener.setSwallowTouches(!1),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.SELECT_CARD,this.selectCard,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.LACK_SUN,this.blinkSunLabel,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.GUIDE_REFRESH_PROP,this.guideRefreshProp,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.GUIDE_SHOW_SPEED,this.guideShowSpeed,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.GUIDE_USE_SPEED,this.guideUseSpeed,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.SHOW_BUBBLE_TIPS,this.showBubbleTips,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.REFRESH_FREE_PLANT,this.showFreePlant,this),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_PROP_1_3?(this.freePlantNode.active=!1,this.gameProp.hideAllProp()):(h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"3"},{name:"adname",value:"\u5c40\u5185\u6a31\u6843\u70b8\u5f39"}),h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"4"},{name:"adname",value:"\u5c40\u5185\u81ea\u52a8\u62fe\u53d6"}),h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"5"},{name:"adname",value:"\u5c40\u5185\u989d\u5916\u9633\u5149"})),this.refreshGameSpeed(),l.pzaGameManager.getCurrentGame().showBattleDown(this),g.pzaChannel.instance().closeBanner()},t.prototype.onDisable=function(){this.shovel.off(cc.Node.EventType.TOUCH_START,this.clickShovel,this),this.blackShovel.stopAllActions(),this.blackShovel.opacity=0,u.pzaOperationMgr.stopTipsDetect(),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.SELECT_CARD,this.selectCard,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.LACK_SUN,this.blinkSunLabel,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.GUIDE_REFRESH_PROP,this.guideRefreshProp,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.GUIDE_SHOW_SPEED,this.guideShowSpeed,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.GUIDE_USE_SPEED,this.guideUseSpeed,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.SHOW_BUBBLE_TIPS,this.showBubbleTips,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.REFRESH_FREE_PLANT,this.showFreePlant,this)},t.prototype.showFreePlant=function(){this.freePlantNode.active=!0},t.prototype.showPauseBtn=function(){this.pauseBtn.active=!0,this.speedBtn.active=!0},t.prototype.showSunUI=function(){this.sunUIShowNode.active=!0,this.shovelShowNode.active=!0},t.prototype.hideSunUI=function(){this.sunUIShowNode.active=!1,this.shovelShowNode.active=!1},t.prototype.update=function(a){if(this.curSunCount!=p.pzaGameState.sunLightCount&&(p.pzaGameState.sunLightCount=p.pzaGameState.sunLightCount>=99999?99999:p.pzaGameState.sunLightCount,this.curSunCount=p.pzaGameState.sunLightCount,this.sunCountLabel.string=""+this.curSunCount),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_SHOVEL_1_5&&1==window.pzaGuideManager.guideStep&&!this.guideArrow.active){var t=cc.v2(this.shovel.x,this.shovel.y-70);this.guideArrow.active=!0,this.guideArrow.stopAllActions(),this.guideArrow.setPosition(t),this.guideArrow.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(t.x,t.y+20)),cc.moveTo(.2,cc.v2(t.x,t.y)))))}p.pzaGameState.gamePause||this.skipCutDown>0&&(this.skipCutDown-=a,this.skipCutDown<=0&&(this.skipPartBtn.active=!1))},t.prototype.refreshSkipPartBtn=function(){if(p.pzaGameState.isSurvival()||p.pzaGameState.isZombieMode())this.skipPartBtn.active=!1;else if(p.pzaGameState.curChapter<s.pzaLocalData.data.curChapter||p.pzaGameState.curChapter==s.pzaLocalData.data.curChapter&&p.pzaGameState.curPart<s.pzaLocalData.data.curPart)this.skipPartBtn.active=!1;else{var a=g.pzaChannel.instance().getChannel();null!=a.ctrl&&"1"===a.ctrl.p4?(this.skipPartBtn.active=!0,this.skipCutDown=10):this.skipPartBtn.active=!1}},t.prototype.clickShovel=function(){if(p.pzaGameState.selectCard==p.pzaSelectCardType.SHOVE_CARD)return p.pzaGameState.selectCard=null,void this.refreshShovel();p.pzaGameState.selectCard=p.pzaSelectCardType.SHOVE_CARD,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null,this.refreshShovel(),d.pzaSoundManager.playAudio("clickShovel"),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.SELECT_CARD,null),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_SHOVEL_1_5&&1==window.pzaGuideManager.guideStep&&(this.guideArrow.active=!1,window.pzaGuideManager.guideStepNext())},t.prototype.clickPause=function(){s.pzaLocalData.isPopReviveView||(p.pzaGameState.gamePause=!0,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_PAUSE,null),d.pzaSoundManager.pausePlayMusic(),v.pzaCommonMask.showMask(!0),m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.GAME_MENU_VIEW,function(a){v.pzaCommonMask.hideMask();var t=a&&a.getComponent(S.pzaMenuView);t&&t.init(function(){p.pzaGameState.gamePause=!1,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_RESUME,null),d.pzaSoundManager.resumeMusic()},!0)}))},t.prototype.clickGameSpeed=function(){var a=this,t=function(){if(!p.pzaGameState.gameWin||p.pzaGameState.gameMode==p.pzaGameMode.VASE_ENDLESS){p.pzaGameState.gameSpeed<4?(p.pzaGameState.gameSpeed++,window.pzaMapManager.blink(0),d.pzaSoundManager.playAudio("faston")):(p.pzaGameState.isMiniMode()&&11==p.pzaGameState.curPart?p.pzaGameState.gameSpeed=2:p.pzaGameState.gameSpeed=1,window.pzaMapManager.blink(1),d.pzaSoundManager.playAudio("fastoff")),a.refreshGameSpeed(),f.pzaUtil.changeGameSpeed(p.pzaGameState.gameSpeed);var t=220+p.pzaGameState.gameSpeed;h.pzaStatisticsMgr.sendEvent("System",{name:"system",value:t}),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:b.pzaBubbleType.speed,setTime:1})}};this.speedAdTag.active?("hw"!=g.pzaChannel.instance().channel&&(p.pzaGameState.gamePause=!0,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_PAUSE,null),d.pzaSoundManager.pausePlayMusic()),g.pzaChannel.instance().showVideo({sucCall:function(){s.pzaLocalData.data.unlockSpeed=!0,s.pzaLocalData.addDirty("unlockSpeed"),t()},failCall:function(){},endCall:function(){p.pzaGameState.gamePause=!1,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_RESUME,null),d.pzaSoundManager.resumeMusic()},posName:"\u89e3\u9501\u52a0\u901f\u529f\u80fd",adsid:"18"})):t()},t.prototype.clickRestartBt=function(){p.pzaGameState.gamePause=!0,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_PAUSE,null),d.pzaSoundManager.pausePlayMusic(),m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(P.pzaWarningView);t&&t.show("\u6ce8\uff1a\u5012\u8ba1\u65f6\u7ed3\u675f\u524d\u91cd\u65b0\u5f00\u59cb\u4e0d\u6d88\u8017\u6311\u6218\u6b21\u6570","\u91cd\u65b0\u5f00\u59cb","\u8fd4\u56de\u6e38\u620f",function(){l.pzaGameManager.getCurrentGame().gameRestart()},function(){p.pzaGameState.gamePause=!1,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_RESUME,null),d.pzaSoundManager.resumeMusic()},"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1)})},t.prototype.clickSkipPartBtn=function(){h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"21"},{name:"adname",value:"\u5c40\u5185\u8df3\u5173"}),p.pzaGameState.gamePause=!0,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_PAUSE,null),d.pzaSoundManager.pausePlayMusic(),m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(P.pzaWarningView);t&&t.show("\u6ce8\uff1a\u5feb\u901f\u8df3\u5173\u4ec5\u53ef\u83b7\u5f97\u4e00\u661f\u8bc4\u4ef7","\u8df3\u8fc7\u5173\u5361","\u8fd4\u56de\u6e38\u620f",function(){g.pzaChannel.instance().showVideo({sucCall:function(){d.pzaSoundManager.resumeMusic(),window.pzazombieManager.skipPassPart(),d.pzaSoundManager.stopLoopAudio(),d.pzaSoundManager.stopLongAudio(),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_WIN,null)},failCall:function(){p.pzaGameState.gamePause=!1,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_RESUME,null),d.pzaSoundManager.resumeMusic()},endCall:function(){},posName:"\u5c40\u5185\u8df3\u5173",adsid:"21"})},function(){p.pzaGameState.gamePause=!1,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_RESUME,null),d.pzaSoundManager.resumeMusic()},"\u662f\u5426\u5feb\u901f\u8df3\u8fc7\u672c\u5173\uff1f",!0)})},t.prototype.clickTestNextWave=function(){window.pzazombieManager.nextWaveTime=0,window.pzazombieManager.curWaveTime=46},t.prototype.selectCard=function(){p.pzaGameState.selectCard!=p.pzaSelectCardType.SHOVE_CARD&&(this.blackShovel.active=!1)},t.prototype.refreshShovel=function(){if(p.pzaGameState.selectCard==p.pzaSelectCardType.SHOVE_CARD)return this.blackShovel.stopAllActions(),this.blackShovel.active=!0,this.blackShovel.opacity=0,void this.blackShovel.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.4,177),cc.fadeOut(.4))));this.blackShovel.active=!1},t.prototype.blinkSunLabel=function(){var a=this;this.sunCountLabel.node.stopAllActions(),this.sunCountLabel.node.runAction(cc.repeat(cc.sequence(cc.callFunc(function(){a.sunCountLabel.node.color=cc.Color.fromHEX(cc.color(),"#FF0000")}),cc.delayTime(.1),cc.callFunc(function(){a.sunCountLabel.node.color=cc.Color.fromHEX(cc.color(),"#000000")}),cc.delayTime(.1)),4))},t.prototype.guideRefreshProp=function(){window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_PROP_1_3&&(0==window.pzaGuideManager.guideStep?this.freePlantNode.active=!0:1==window.pzaGuideManager.guideStep?this.gameProp.showFreeSun():2==window.pzaGuideManager.guideStep?this.gameProp.showAutoPick():3==window.pzaGuideManager.guideStep&&this.gameProp.showCherryBomb())},t.prototype.refreshGameSpeed=function(){this.speedAdTag.active=!s.pzaLocalData.data.unlockSpeed,p.pzaGameState.gameMode==p.pzaGameMode.NORMAL&&1==p.pzaGameState.curChapter&&p.pzaGameState.curPart<=3&&(this.speedAdTag.active=!1),this.speedCount.string="X"+p.pzaGameState.gameSpeed},t.prototype.guideShowSpeed=function(){this.speedBtn.active=!0,this.speedAdTag.active=!1,this.speedCount.string="X"+p.pzaGameState.gameSpeed},t.prototype.guideUseSpeed=function(){p.pzaGameState.gameSpeed=2,f.pzaUtil.changeGameSpeed(p.pzaGameState.gameSpeed),this.speedCount.string="X"+p.pzaGameState.gameSpeed,window.pzaMapManager.blink(0),d.pzaSoundManager.playAudio("faston")},t.prototype.showBubbleTips=function(){u.pzaOperationMgr.showChangeTipsBubble(this.speedBtn,"\u4e0d\u60f3\u7b49\uff1f\u8bd5\u8bd5\u52a0\u901f",10,function(a){a.tipTxtHideTime=3})},i([E({displayName:"\u9633\u5149\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"sunUIShowNode",void 0),i([E({displayName:"\u9633\u5149\u6570\u91cf",type:cc.Label})],t.prototype,"sunCountLabel",void 0),i([E({displayName:"\u9633\u5149UI\u4f4d\u7f6e",type:cc.Node})],t.prototype,"sunUINode",void 0),i([E({displayName:"\u94f2\u5b50\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"shovelShowNode",void 0),i([E({displayName:"\u94f2\u5b50",type:cc.Node})],t.prototype,"shovel",void 0),i([E({displayName:"\u94f2\u5b50-\u9ed1",type:cc.Node})],t.prototype,"blackShovel",void 0),i([E({displayName:"\u5f15\u5bfc\u7bad\u5934",type:cc.Node})],t.prototype,"guideArrow",void 0),i([E({displayName:"\u83dc\u5355\u6309\u94ae",type:cc.Node})],t.prototype,"pauseBtn",void 0),i([E({displayName:"\u52a0\u901f\u6309\u94ae",type:cc.Node})],t.prototype,"speedBtn",void 0),i([E({displayName:"\u52a0\u901f\u5e7f\u544a\u56fe\u6807",type:cc.Node})],t.prototype,"speedAdTag",void 0),i([E({displayName:"\u901f\u5ea6",type:cc.Label})],t.prototype,"speedCount",void 0),i([E({displayName:"\u6e38\u620f\u5185\u9053\u5177\u8282\u70b9",type:D.pzaBattlePropView})],t.prototype,"gameProp",void 0),i([E({displayName:"\u514d\u8d39\u690d\u7269\u8282\u70b9",type:cc.Node})],t.prototype,"freePlantNode",void 0),i([E({displayName:"\u8df3\u5173\u6309\u94ae",type:cc.Node})],t.prototype,"skipPartBtn",void 0),i([E({displayName:"\u6d4b\u8bd5\u4e0b\u4e00\u6ce2\u6309\u94ae",type:cc.Node})],t.prototype,"testNextWaveBtn",void 0),i([_],t)}(cc.Component);e.pzaBattleDownView=M,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaBubbleItem":"pzaBubbleItem","../pzaCommonMask":"pzaCommonMask","../pzaWarningView":"pzaWarningView","./pzaBattlePropView":"pzaBattlePropView","./pzaMenuView":"pzaMenuView"}],pzaBattleFrameAnim:[function(a,t,e){"use strict";cc._RF.push(t,"7c9ef+mNP5N/ZWOKV0x/u2L","pzaBattleFrameAnim");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattleFrameAnim=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../utils/pzaFrameAnim"),l=a("../../Common/pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani=null,t.poolPrefab=null,t}return n(t,a),t.prototype.showAnim=function(a){var t=this;this.ani.setEndFn(function(){a&&a(),t.close()}),this.ani.reset(),this.ani.play()},t.prototype.logicUpdate=function(a){this.ani.updateFrame(a)},t.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"\u52a8\u753b",type:p.default})],t.prototype,"ani",void 0),i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaBattleFrameAnim=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../utils/pzaFrameAnim":"pzaFrameAnim"}],pzaBattleFreePlant:[function(a,t,e){"use strict";cc._RF.push(t,"34f5dc2/LZLcqUzgVcb9ZdO","pzaBattleFreePlant");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattleFreePlant=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaSpriteFrameManager"),s=a("../../Common/pzaUIManager"),c=a("../../Common/pzaWorldEventManager"),u=a("../../Load/pzaPreLoadManager"),d=a("./pzaTrySelectView"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.freePlantBtn=null,t.freePlantCard=null,t.cardIcon=null,t.selectTag=null,t}return n(t,a),t.prototype.onEnable=function(){null==r.pzaGameState.adFreePlant?(this.freePlantBtn.active=!0,this.freePlantCard.active=!1):(this.freePlantBtn.active=!1,this.freePlantCard.active=!0,this.selectTag.active=!1,l.pzaSpriteFrameManager.loadPlantCard(r.pzaGameState.adFreePlant,this.cardIcon)),this.freePlantCard.on(cc.Node.EventType.TOUCH_START,this.clickFreePlantCard,this),this.freePlantCard._touchListener.setSwallowTouches(!1),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.DISSELECT_CARD,this.disSelectCard,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.PLANT_AD_PLANT,this.plantAdPlant,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.PLANTNUT_AD_PLANT,this.plantAdPlant,this)},t.prototype.onDisable=function(){this.freePlantCard.off(cc.Node.EventType.TOUCH_START,this.clickFreePlantCard,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.DISSELECT_CARD,this.disSelectCard,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.PLANT_AD_PLANT,this.plantAdPlant,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.PLANTNUT_AD_PLANT,this.plantAdPlant,this)},t.prototype.clickFreePlant=function(){var a=this;s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.TRY_SELECT_VIEW,function(t){var e=t&&t.getComponent(d.pzaTrySelectView);e&&e.init(function(t){r.pzaGameState.adFreePlant=t,a.freePlantCard.active=!0,a.selectTag.active=!0,l.pzaSpriteFrameManager.loadPlantCard(t,a.cardIcon),r.pzaGameState.selectCard=r.pzaSelectCardType.AD_CARD,r.pzaGameState.selectPlant=t,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null)})}),r.pzaGameState.gamePause=!0,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.GAME_PAUSE,null)},t.prototype.clickFreePlantCard=function(){r.pzaGameState.selectCard!=r.pzaSelectCardType.AD_CARD&&(this.selectTag.active=!0,r.pzaGameState.selectCard=r.pzaSelectCardType.AD_CARD,r.pzaGameState.selectPlant=r.pzaGameState.adFreePlant,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null))},t.prototype.selectCard=function(){null!=r.pzaGameState.adFreePlant&&r.pzaGameState.selectCard!=r.pzaSelectCardType.AD_CARD&&(this.selectTag.active=!1)},t.prototype.disSelectCard=function(){this.freePlantBtn.active=!0,this.freePlantCard.active=!1,r.pzaGameState.adFreePlant=null},t.prototype.plantAdPlant=function(){this.freePlantBtn.active=!0,this.freePlantCard.active=!1,r.pzaGameState.adFreePlant=null;var a=p.pzaGameManager.getCurrentGame();a.adPlantTimes>0&&(a.adPlantTimes--,a.adPlantTimes<=0&&(this.node.active=!1))},i([f({displayName:"\u514d\u8d39\u690d\u7269\u6309\u94ae",type:cc.Node})],t.prototype,"freePlantBtn",void 0),i([f({displayName:"\u514d\u8d39\u690d\u7269\u5361\u7247",type:cc.Node})],t.prototype,"freePlantCard",void 0),i([f({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([f({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"selectTag",void 0),i([m],t)}(cc.Component);e.pzaBattleFreePlant=z,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaTrySelectView":"pzaTrySelectView"}],pzaBattlePassConf:[function(a,t,e){"use strict";cc._RF.push(t,"0d59cFPYSRF9qVO/8kdkSOY","pzaBattlePassConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattlePassConf=void 0;var o=a("../Common/pzaGamePropConfig");e.pzaBattlePassConf=function(a){this.id=0,this.name="",this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.recFun=0,this.iconIndex=0,this.id=a.iD,this.name=a.name||"",this.rewardType=a.rewardType,this.rewardCount=parseInt(a.rewardValue),this.recFun=a.aDClaim,this.iconIndex=a.icon?parseInt(a.icon):0},cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig"}],pzaBattlePassItem:[function(a,t,e){"use strict";cc._RF.push(t,"ac3dbPphmdBgazpi/cAFgYb","pzaBattlePassItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSpineController"),c=a("../Common/pzaSpriteFrameManager"),u=a("../utils/pzaChannel"),d=a("./pzaBattlePassMgr"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.node_normal=null,t.node_high=null,t.img_propIcon=null,t.img_highPropIcon=null,t.ani_prop=null,t.ani_highProp=null,t.lab_propName=null,t.lab_highPropName=null,t.lab_propAmount=null,t.lab_highPropAmount=null,t.img_block=null,t.img_highBlock=null,t.img_hasGet=null,t.img_highHasGet=null,t.lab_expLv=null,t.node_lvBg1=null,t.node_lvBg2=null,t.node_lvLock=null,t.sprites_arr=[],t.node_ad=null,t.node_goldKuang=null,t.normalRewardType=0,t.normalRewardCount=0,t.highRewardType=0,t.highRewardCount=0,t.idx=0,t.contentWidth=0,t.allItems=0,t.plantUrl=["zw053","zw054","zw055"],t.plantName=["\u83dc\u5e08\u5085","\u96f7\u795e\u679c","\u706b\u7130\u82b1"],t.plantEnm=[53,54,55],t.battlePassView=null,t}return n(t,a),t.prototype.onEnable=function(){var a=this;this.node_normal.on(cc.Node.EventType.TOUCH_END,function(){a.clickGetReward(!1)},this),this.node_high.on(cc.Node.EventType.TOUCH_END,function(){a.clickGetReward(!0)},this)},t.prototype.bindData=function(a,t,e,o,n){this.battlePassView=a,this.call=n,this.node_lvBg1.active=!1,this.node_lvBg2.active=!1,this.img_propIcon.node.active=!1,this.img_block.node.active=!1,this.img_hasGet.node.active=!1,this.ani_prop.node.active=!1,this.img_highPropIcon.node.active=!1,this.img_highBlock.node.active=!1,this.img_highHasGet.node.active=!1,this.ani_highProp.node.active=!1,this.idx=t+1,this.contentWidth=e,this.allItems=o,this.lab_expLv.string=this.idx+"";var i=d.default.instance().normalRewardMap.get(this.idx);this.lab_propName.string=i.name,this.lab_propAmount.string="X"+i.rewardCount;var l=d.default.instance().highRewardMap.get(this.idx);this.lab_highPropName.string=l.name,this.lab_highPropAmount.string="X"+l.rewardCount,this.normalRewardType=i.rewardType,i.rewardType==p.pzaGamePropEnum.PROP_PLANTE?this.normalRewardCount=this.plantEnm[r.pzaGameState.bpRewardPlantId-1]:this.normalRewardCount=i.rewardCount,this.highRewardType=l.rewardType,l.rewardType==p.pzaGamePropEnum.PROP_PLANTE?this.highRewardCount=this.plantEnm[r.pzaGameState.bpRewardPlantId-1]:this.highRewardCount=l.rewardCount,this.node_goldKuang.active=!1,this.refreshUI()},t.prototype.refreshUI=function(){this.refreshItem(),this.refreshLockState(),this.refreshLvBgLen(this.idx),this.refreshItemState()},t.prototype.refreshItem=function(){var a=d.default.instance().normalRewardMap.get(this.idx);switch(a.rewardType){case p.pzaGamePropEnum.PROP_COIN:case p.pzaGamePropEnum.PROP_POWER:this.img_propIcon.node.active=!0,this.img_propIcon.spriteFrame=this.sprites_arr[a.iconIndex-1],this.img_propIcon.node.scale=.6;break;case p.pzaGamePropEnum.PROP_CHERRY_BOMB:this.ani_prop.node.active=!0,this.ani_prop.playAnimation("3ui_1",!0);break;case p.pzaGamePropEnum.PROP_FREE_SUN:this.ani_prop.node.active=!0,this.ani_prop.playAnimation("1ui_1",!0);break;case p.pzaGamePropEnum.PROP_AUTO_PICK:this.ani_prop.node.active=!0,this.ani_prop.playAnimation("2ui_1",!0);break;case p.pzaGamePropEnum.PROP_PLANTE:this.node_goldKuang.active=!0,this.img_propIcon.node.active=!0;var t=this.plantUrl[r.pzaGameState.bpRewardPlantId-1];this.lab_propAmount.string="X1",this.lab_propName.string=this.plantName[r.pzaGameState.bpRewardPlantId-1],c.pzaSpriteFrameManager.loadPlantWholeCard(t,this.img_propIcon)}var e=d.default.instance().highRewardMap.get(this.idx);switch(e.rewardType){case p.pzaGamePropEnum.PROP_COIN:case p.pzaGamePropEnum.PROP_POWER:this.img_highPropIcon.node.active=!0,this.img_highPropIcon.spriteFrame=this.sprites_arr[e.iconIndex-1],this.img_highPropIcon.node.scale=.6;break;case p.pzaGamePropEnum.PROP_CHERRY_BOMB:this.ani_highProp.node.active=!0,this.ani_highProp.playAnimation("3ui_1",!0);break;case p.pzaGamePropEnum.PROP_FREE_SUN:this.ani_highProp.node.active=!0,this.ani_highProp.playAnimation("1ui_1",!0);break;case p.pzaGamePropEnum.PROP_AUTO_PICK:this.ani_highProp.node.active=!0,this.ani_highProp.playAnimation("2ui_1",!0);break;case p.pzaGamePropEnum.PROP_PLANTE:this.img_highPropIcon.node.active=!0,t=this.plantUrl[r.pzaGameState.bpRewardPlantId-1],this.lab_highPropAmount.string="X1",this.lab_highPropName.string=this.plantName[r.pzaGameState.bpRewardPlantId-1],c.pzaSpriteFrameManager.loadPlantWholeCard(t,this.img_highPropIcon)}},t.prototype.refreshItemState=function(){2==l.pzaLocalData.data.bpNormalRewards[this.idx+""]&&(this.img_block.node.active=!0,this.img_hasGet.node.active=!0),2==l.pzaLocalData.data.bpHighRewards[this.idx+""]&&(this.img_highBlock.node.active=!0,this.img_highHasGet.node.active=!0,this.node_ad.active=!1),1==l.pzaLocalData.data.bpHighRewards[this.idx+""]&&(this.node_ad.active=!0)},t.prototype.refreshLockState=function(){this.idx-1<l.pzaLocalData.data.battlePassLv?(this.img_block.node.active=!1,this.img_highBlock.node.active=!1,this.node_lvLock.active=!1,l.pzaLocalData.data.bpNormalRewards[this.idx+""]||(l.pzaLocalData.data.bpNormalRewards[this.idx+""]=1,l.pzaLocalData.addDirty("bpNormalRewards")),l.pzaLocalData.data.bpHighRewards[this.idx+""]||(l.pzaLocalData.data.bpHighRewards[this.idx+""]=1,l.pzaLocalData.addDirty("bpHighRewards"))):(this.img_block.node.active=!0,this.img_highBlock.node.active=!0,this.node_lvLock.active=!0,this.node_ad.active=!1)},t.prototype.refreshLvBgLen=function(a){if(1==a)if(this.node_lvBg1.active=!0,this.node_lvBg2.active=!0,this.node_lvBg1.width=this.contentWidth,this.node_lvBg2.width=this.contentWidth,0==l.pzaLocalData.data.battlePassLv)this.node_lvBg2.active=!0,this.node_lvBg2.x=-50;else if(l.pzaLocalData.data.battlePassLv>=60)this.node_lvBg2.active=!1,this.node_lvBg2.x=-50;else{var t=102*l.pzaLocalData.data.battlePassLv+8*(l.pzaLocalData.data.battlePassLv-1)-40,e=102*(this.allItems-l.pzaLocalData.data.battlePassLv)+8*(this.allItems-1)+10;this.node_lvBg2.width=e,this.node_lvBg2.x=t}},t.prototype.clickGetReward=function(a){var t=this;a?this.node_ad.active?u.pzaChannel.instance().showVideo({sucCall:function(){l.pzaLocalData.data.bpHighRewards[t.idx+""]=2,l.pzaLocalData.data.bpHighAdsCnt++,l.pzaLocalData.addDirty("bpHighRewards","bpHighAdsCnt"),t.refreshUI(),t.call&&t.call(t.highRewardType,t.highRewardCount),t.battlePassView.refreshUI(),l.pzaLocalData.data.bpHighAdsCnt>=10&&t.battlePassView.hideAllAdFlag()},failCall:function(){},endCall:function(){},posName:"\u6218\u4ee4\u83b7\u53d6\u9ad8\u7ea7\u5956\u52b1",adsid:"50"}):(l.pzaLocalData.data.bpHighRewards[this.idx+""]=2,this.refreshUI(),this.call&&this.call(this.highRewardType,this.highRewardCount)):(l.pzaLocalData.data.bpNormalRewards[this.idx+""]=2,l.pzaLocalData.addDirty("bpNormalRewards"),this.refreshUI(),this.call&&this.call(this.normalRewardType,this.normalRewardCount))},t.prototype.clickAllReward=function(a){a?(l.pzaLocalData.data.bpHighRewards[this.idx+""]=2,l.pzaLocalData.addDirty("bpHighRewards"),this.refreshUI()):(l.pzaLocalData.data.bpNormalRewards[this.idx+""]=2,l.pzaLocalData.addDirty("bpNormalRewards"),this.refreshUI())},i([f({displayName:"\u6b63\u5e38\u5956\u52b1\u8282\u70b9",type:cc.Node})],t.prototype,"node_normal",void 0),i([f({displayName:"\u9ad8\u7ea7\u5956\u52b1\u8282\u70b9",type:cc.Node})],t.prototype,"node_high",void 0),i([f({displayName:"\u666e\u901a\u9053\u5177\u56fe\u7247",type:cc.Sprite})],t.prototype,"img_propIcon",void 0),i([f({displayName:"\u9ad8\u7ea7\u9053\u5177\u56fe\u7247",type:cc.Sprite})],t.prototype,"img_highPropIcon",void 0),i([f({displayName:"\u666e\u901a\u9053\u5177\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"ani_prop",void 0),i([f({displayName:"\u9ad8\u7ea7\u9053\u5177\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"ani_highProp",void 0),i([f({displayName:"\u666e\u901a\u9053\u5177\u540d\u79f0",type:cc.Label})],t.prototype,"lab_propName",void 0),i([f({displayName:"\u9ad8\u7ea7\u9053\u5177\u540d\u79f0",type:cc.Label})],t.prototype,"lab_highPropName",void 0),i([f({displayName:"\u666e\u901a\u9053\u5177\u6570\u91cf",type:cc.Label})],t.prototype,"lab_propAmount",void 0),i([f({displayName:"\u9ad8\u7ea7\u9053\u5177\u6570\u91cf",type:cc.Label})],t.prototype,"lab_highPropAmount",void 0),i([f({displayName:"\u666e\u901a\u906e\u6321\u56fe\u7247",type:cc.Sprite})],t.prototype,"img_block",void 0),i([f({displayName:"\u9ad8\u7ea7\u906e\u6321\u56fe\u7247",type:cc.Sprite})],t.prototype,"img_highBlock",void 0),i([f({displayName:"\u666e\u901a\u5df2\u9886\u53d6\u56fe\u7247",type:cc.Sprite})],t.prototype,"img_hasGet",void 0),i([f({displayName:"\u9ad8\u7ea7\u5df2\u9886\u53d6\u56fe\u7247",type:cc.Sprite})],t.prototype,"img_highHasGet",void 0),i([f({displayName:"\u6218\u4ee4\u7ecf\u9a8c\u7b49\u7ea7",type:cc.Label})],t.prototype,"lab_expLv",void 0),i([f({displayName:"\u7b49\u7ea7\u80cc\u666f1",type:cc.Node})],t.prototype,"node_lvBg1",void 0),i([f({displayName:"\u7b49\u7ea7\u80cc\u666f2",type:cc.Node})],t.prototype,"node_lvBg2",void 0),i([f({displayName:"\u7b49\u7ea7\u9501",type:cc.Node})],t.prototype,"node_lvLock",void 0),i([f({displayName:"\u9053\u5177\u56fe\u7247\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"sprites_arr",void 0),i([f({displayName:"\u89c6\u9891\u6807\u8bc6",type:cc.Node})],t.prototype,"node_ad",void 0),i([f({displayName:"\u91d1\u6846",type:cc.Node})],t.prototype,"node_goldKuang",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../utils/pzaChannel":"pzaChannel","./pzaBattlePassMgr":"pzaBattlePassMgr"}],pzaBattlePassMgr:[function(a,t,e){"use strict";cc._RF.push(t,"42562owEDFNUoaU16vWF7w2","pzaBattlePassMgr");var o=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var n=a("./pzaBattlePassConf"),i=cc._decorator,r=i.ccclass,p=(i.property,function(){function a(){this.normalRewardMap=new Map,this.highRewardMap=new Map}var t;return t=a,a.instance=function(){return t._me||(t._me=new t),t._me},a.prototype.normalRewardInit=function(a){for(var t=0;t<a.length;t++){var e=new n.pzaBattlePassConf(a[t]);this.normalRewardMap.set(e.id,e)}},a.prototype.highRewardInit=function(a){for(var t=0;t<a.length;t++){var e=new n.pzaBattlePassConf(a[t]);this.highRewardMap.set(e.id,e)}},a._me=null,t=o([r],a)}());e.default=p,cc._RF.pop()},{"./pzaBattlePassConf":"pzaBattlePassConf"}],pzaBattlePassTaskConf:[function(a,t,e){"use strict";cc._RF.push(t,"c815emsgelKqK1qj/a4n9oM","pzaBattlePassTaskConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattlePassTaskConf=void 0;e.pzaBattlePassTaskConf=function(a){this.id=0,this.taskname="",this.condNum=0,this.taskname=a.taskname||"",this.condNum=a.condNum||0},cc._RF.pop()},{}],pzaBattlePassTaskItem:[function(a,t,e){"use strict";cc._RF.push(t,"ccdbciyjS9MiI7dw4ovhuJx","pzaBattlePassTaskItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaLocalData"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaTipManager"),s=a("../Common/pzaWorldEventManager"),c=a("./pzaBattlePassTaskMgr"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lab_taskName=null,t.pro_task=null,t.lab_task=null,t.btn_get=null,t.node_hasGet=null,t.lab_exp=null,t.idx=0,t.type=0,t}return n(t,a),t.prototype.onEnable=function(){this.btn_get.on(cc.Node.EventType.TOUCH_END,this.clickGetReward,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.BATTLEPASS_GETALL,this.refreshTaskState,this)},t.prototype.bindData=function(a,t,e){this.call=e,this.idx=a+1,this.type=t,this.node_hasGet.active=!1;var o=null;1==t?(o=c.default.instance().BpDayTaskMap.get(this.idx),this.refreshDayTaskState()):2==t&&(o=c.default.instance().BpWeekTaskMap.get(this.idx),this.refreshWeekTaskState()),this.lab_taskName.string=o.taskname,this.lab_exp.string=1==t?"X20":"X100"},t.prototype.refreshDayTaskState=function(){this.btn_get.active=!1,this.node_hasGet.active=!1,2==r.pzaLocalData.data.bpDayTaskStates[this.idx+""]?(this.node_hasGet.active=!0,this.btn_get.active=!1,this.node.zIndex=2e3*(this.idx+1)):1==r.pzaLocalData.data.bpDayTaskStates[this.idx+""]?(this.btn_get.active=!0,this.node.zIndex=this.idx):this.node.zIndex=100*(this.idx+1),1==this.idx?(this.lab_task.string="(1/1)",this.pro_task.progress=1):2==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpDayPassPartCnt+"/1)",this.pro_task.progress=r.pzaLocalData.data.bpDayPassPartCnt/1):3==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpDayPlantCnt+"/50)",this.pro_task.progress=r.pzaLocalData.data.bpDayPlantCnt/50):4==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpDayWatchAdCnt+"/1)",this.pro_task.progress=r.pzaLocalData.data.bpDayWatchAdCnt/1):5==this.idx&&(this.lab_task.string="("+r.pzaLocalData.data.bpDayCostPowerCnt+" / 20)",this.pro_task.progress=r.pzaLocalData.data.bpDayCostPowerCnt/20)},t.prototype.refreshWeekTaskState=function(){this.btn_get.active=!1,this.node_hasGet.active=!1,2==r.pzaLocalData.data.bpWeekTaskStates[this.idx+""]?(this.node_hasGet.active=!0,this.btn_get.active=!1,this.node.zIndex=2e3*(this.idx+1)):1==r.pzaLocalData.data.bpWeekTaskStates[this.idx+""]?(this.btn_get.active=!0,this.node.zIndex=this.idx):this.node.zIndex=100*(this.idx+1),1==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekLoginCnt+"/5)",this.pro_task.progress=r.pzaLocalData.data.bpWeekLoginCnt/5):2==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekCostPowerCnt+"/100)",this.pro_task.progress=r.pzaLocalData.data.bpWeekCostPowerCnt/100):3==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekUsePropCnt+"/10)",this.pro_task.progress=r.pzaLocalData.data.bpWeekUsePropCnt/10):4==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekWatchAdCnt+"/10)",this.pro_task.progress=r.pzaLocalData.data.bpWeekWatchAdCnt/10):5==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekPassPartCnt+"/20)",this.pro_task.progress=r.pzaLocalData.data.bpWeekPassPartCnt/20):6==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekPlantCnt+"/500)",this.pro_task.progress=r.pzaLocalData.data.bpWeekPlantCnt/500):7==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekZombieDeathCnt+"/1000)",this.pro_task.progress=r.pzaLocalData.data.bpWeekZombieDeathCnt/1e3):8==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekGetGoldCnt+"/10000)",this.pro_task.progress=r.pzaLocalData.data.bpWeekGetGoldCnt/1e4):9==this.idx?(this.lab_task.string="("+r.pzaLocalData.data.bpWeekSunCnt+"/20000)",this.pro_task.progress=r.pzaLocalData.data.bpWeekSunCnt/2e4):10==this.idx&&(this.lab_task.string="("+r.pzaLocalData.data.bpWeekEndlessPass+"/20)",this.pro_task.progress=r.pzaLocalData.data.bpWeekEndlessPass/20)},t.prototype.clickGetReward=function(){p.pzaSoundManager.playSFX();var a=0;1==this.type?(r.pzaLocalData.data.bpDayTaskStates[this.idx+""]=2,r.pzaLocalData.data.battlePassExp+=20,a+=20):2==this.type&&(r.pzaLocalData.data.bpWeekTaskStates[this.idx+""]=2,r.pzaLocalData.data.battlePassExp+=100,a+=100),r.pzaLocalData.data.battlePassExp>=100&&(r.pzaLocalData.data.battlePassExp-=100,r.pzaLocalData.data.battlePassLv++),r.pzaLocalData.addDirty("bpDayTaskStates","bpWeekTaskStates","battlePassExp","battlePassLv"),this.refreshTaskState(),l.pzaTipManager.showHomeTip("\u7ecf\u9a8cX"+a,null,1),this.call&&this.call()},t.prototype.refreshTaskState=function(){1==this.type?this.refreshDayTaskState():this.refreshWeekTaskState()},t.prototype.onDisable=function(){this.btn_get.off(cc.Node.EventType.TOUCH_END,this.clickGetReward,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.BATTLEPASS_GETALL,this.refreshTaskState,this)},i([h({displayName:"\u4efb\u52a1\u540d\u79f0",type:cc.Label})],t.prototype,"lab_taskName",void 0),i([h({displayName:"\u4efb\u52a1\u8fdb\u5ea6",type:cc.ProgressBar})],t.prototype,"pro_task",void 0),i([h({displayName:"\u4efb\u52a1\u8fdb\u5ea6lab",type:cc.Label})],t.prototype,"lab_task",void 0),i([h({displayName:"\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"btn_get",void 0),i([h({displayName:"\u5df2\u9886\u53d6",type:cc.Node})],t.prototype,"node_hasGet",void 0),i([h({displayName:"\u7ecf\u9a8c\u503c",type:cc.Label})],t.prototype,"lab_exp",void 0),i([d],t)}(cc.Component);e.default=m,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaBattlePassTaskMgr":"pzaBattlePassTaskMgr"}],pzaBattlePassTaskMgr:[function(a,t,e){"use strict";cc._RF.push(t,"5c1c4aOrFBNDai5fyJ/Y1yw","pzaBattlePassTaskMgr");var o=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var n=a("../Common/pzaLocalData"),i=a("./pzaBattlePassTaskConf"),r=cc._decorator,p=r.ccclass,l=(r.property,function(){function a(){this.BpDayTaskMap=new Map,this.BpWeekTaskMap=new Map}var t;return t=a,a.instance=function(){return t._me||(t._me=new t),t._me},a.prototype.init=function(a){for(var t=0;t<a.length;t++){var e=a[t].iD.split("_"),o=new i.pzaBattlePassTaskConf(a[t]);1==parseInt(e[0])?(o.id=parseInt(e[1]),this.BpDayTaskMap.set(o.id,o)):2==parseInt(e[0])&&(o.id=parseInt(e[1]),this.BpWeekTaskMap.set(o.id,o))}},a.prototype.checkDayTask=function(a,t){if(2!=n.pzaLocalData.data.bpDayTaskStates[a+""]){var e=this.BpDayTaskMap.get(a);e&&t>=e.condNum&&!n.pzaLocalData.data.bpDayTaskStates[a+""]&&(n.pzaLocalData.data.bpDayTaskStates[a+""]=1,n.pzaLocalData.addDirty("bpDayTaskStates"))}},a.prototype.checkWeekTask=function(a,t){2!=n.pzaLocalData.data.bpWeekTaskStates[a+""]&&t>=this.BpWeekTaskMap.get(a).condNum&&!n.pzaLocalData.data.bpWeekTaskStates[a+""]&&(n.pzaLocalData.data.bpWeekTaskStates[a+""]=1,n.pzaLocalData.addDirty("bpWeekTaskStates"))},a._me=null,t=o([p],a)}());e.default=l,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","./pzaBattlePassTaskConf":"pzaBattlePassTaskConf"}],pzaBattlePassTaskView:[function(a,t,e){"use strict";cc._RF.push(t,"3cfd5EPYD9JjZH2gXkiWYyX","pzaBattlePassTaskView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r},r=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSoundManager"),c=a("../Common/pzaTipManager"),u=a("../Common/pzaWorldEventManager"),d=a("../utils/pzaChannel"),h=a("../utils/pzakc"),m=a("./pzaBattlePassTaskItem"),f=a("./pzaBattlePassTaskMgr"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.btn_getAll=null,t.btn_addExp=null,t.btn_close=null,t.btn_day=null,t.btn_week=null,t.lab_countDown=null,t.node_content=null,t.pre_item=null,t.nodes_select=[],t.nodes_unselect=[],t.nodes_RedTip=[],t.node_scrollView=null,t.type=1,t.checkTimes=0,t}return n(t,a),t.prototype.onEnable=function(){var a=this;this.btn_getAll.on(cc.Node.EventType.TOUCH_END,this.getAll,this),this.btn_addExp.on(cc.Node.EventType.TOUCH_END,this.addExp,this),this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_day.on(cc.Node.EventType.TOUCH_END,function(){a.clickSelectBtn(1)},this),this.btn_week.on(cc.Node.EventType.TOUCH_END,function(){a.clickSelectBtn(2)},this),this.clickSelectBtn(1),this.init(),this.schedule(function(){a.countDown()},1,cc.macro.REPEAT_FOREVER),d.pzaChannel.isConfRemote?this.btn_addExp.active=!0:this.btn_addExp.active=!1,this.checkTimes=1,this.nodes_RedTip.forEach(function(a){a.active=!1});for(var t=0;t<this.nodes_RedTip.length;t++)cc.tween(this.nodes_RedTip[t]).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start()},t.prototype.bindData=function(a){this.call=a},t.prototype.init=function(){},t.prototype.clickSelectBtn=function(a){switch(s.pzaSoundManager.playSFX(),a){case 1:this.nodes_select[0].active=!0,this.nodes_select[1].active=!1,this.nodes_unselect[0].active=!1,this.nodes_unselect[1].active=!0,this.showTask(1),this.node_scrollView.getComponent(cc.ScrollView).stopAutoScroll(),this.node_scrollView.getComponent(cc.ScrollView).setContentPosition(cc.v2(0,0));break;case 2:this.nodes_select[0].active=!1,this.nodes_select[1].active=!0,this.nodes_unselect[0].active=!0,this.nodes_unselect[1].active=!1,this.showTask(2),this.node_scrollView.getComponent(cc.ScrollView).stopAutoScroll(),this.node_scrollView.getComponent(cc.ScrollView).setContentPosition(cc.v2(0,0))}},t.prototype.showTask=function(a){var t,e,o,n,i=this;if(this.node_content.removeAllChildren(),1==a){this.node_content.height=124*f.default.instance().BpDayTaskMap.size+15*(f.default.instance().BpDayTaskMap.size-1);for(var p=0;p<f.default.instance().BpDayTaskMap.size;p++)(h=cc.instantiate(this.pre_item)).setParent(this.node_content),h.getComponent(m.default).bindData(p,1,function(){i.checkGetAllBtnState()});this.type=1;var s=!1;try{for(var c=r(Object.keys(l.pzaLocalData.data.bpDayTaskStates)),u=c.next();!u.done;u=c.next()){var d=u.value;1==l.pzaLocalData.data.bpDayTaskStates[d]&&(s=!0)}}catch(g){t={error:g}}finally{try{u&&!u.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}this.btn_getAll.active=s}else if(2==a){for(this.node_content.height=124*f.default.instance().BpWeekTaskMap.size+15*(f.default.instance().BpWeekTaskMap.size-1),p=0;p<f.default.instance().BpWeekTaskMap.size;p++){var h;(h=cc.instantiate(this.pre_item)).setParent(this.node_content),h.getComponent(m.default).bindData(p,2,function(){i.checkGetAllBtnState()})}this.type=2,s=!1;try{for(var z=r(Object.keys(l.pzaLocalData.data.bpWeekTaskStates)),y=z.next();!y.done;y=z.next())d=y.value,1==l.pzaLocalData.data.bpWeekTaskStates[d]&&(s=!0)}catch(b){o={error:b}}finally{try{y&&!y.done&&(n=z.return)&&n.call(z)}finally{if(o)throw o.error}}this.btn_getAll.active=s}},t.prototype.checkGetAllBtnState=function(){var a,t,e,o;if(1==this.type){var n=!1;try{for(var i=r(Object.keys(l.pzaLocalData.data.bpDayTaskStates)),p=i.next();!p.done;p=i.next()){var s=p.value;1==l.pzaLocalData.data.bpDayTaskStates[s]&&(n=!0)}}catch(d){a={error:d}}finally{try{p&&!p.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}this.btn_getAll.active=n}else if(2==this.type){n=!1;try{for(var c=r(Object.keys(l.pzaLocalData.data.bpWeekTaskStates)),u=c.next();!u.done;u=c.next())s=u.value,1==l.pzaLocalData.data.bpWeekTaskStates[s]&&(n=!0)}catch(h){e={error:h}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(e)throw e.error}}this.btn_getAll.active=n}},t.prototype.getAll=function(){var a,t,e,o;s.pzaSoundManager.playSFX();var n=0;if(1==this.type){var i=!1;try{for(var p=r(Object.keys(l.pzaLocalData.data.bpDayTaskStates)),d=p.next();!d.done;d=p.next()){var h=d.value;1==l.pzaLocalData.data.bpDayTaskStates[h]&&(l.pzaLocalData.data.bpDayTaskStates[h]=2,l.pzaLocalData.data.battlePassExp+=20,n+=20,i=!0,l.pzaLocalData.data.battlePassExp>=100&&(l.pzaLocalData.data.battlePassExp-=100,l.pzaLocalData.data.battlePassLv++))}}catch(z){a={error:z}}finally{try{d&&!d.done&&(t=p.return)&&t.call(p)}finally{if(a)throw a.error}}i&&(l.pzaLocalData.addDirty("bpDayTaskStates","battlePassExp","battlePassExp","battlePassLv"),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.BATTLEPASS_GETALL,null))}else{i=!1;try{for(var m=r(Object.keys(l.pzaLocalData.data.bpWeekTaskStates)),f=m.next();!f.done;f=m.next())h=f.value,1==l.pzaLocalData.data.bpWeekTaskStates[h]&&(l.pzaLocalData.data.bpWeekTaskStates[h]=2,l.pzaLocalData.data.battlePassExp+=100,n+=100,i=!0,l.pzaLocalData.data.battlePassExp>=100&&(l.pzaLocalData.data.battlePassExp-=100,l.pzaLocalData.data.battlePassLv++))}catch(y){e={error:y}}finally{try{f&&!f.done&&(o=m.return)&&o.call(m)}finally{if(e)throw e.error}}i&&(l.pzaLocalData.addDirty("bpWeekTaskStates","battlePassExp","battlePassExp","battlePassLv"),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.BATTLEPASS_GETALL,null))}c.pzaTipManager.showHomeTip("\u7ecf\u9a8cX"+n,null,1),this.btn_getAll.active=!1},t.prototype.countDown=function(){var a=(new Date).getDay(),t=h.default.getRemainingSeconds();if(t>0){var e=h.default.format(t);1==this.type?this.lab_countDown.string=e+"":2==this.type&&(this.lab_countDown.string=7-a+"\u5929"+e)}},t.prototype.addExp=function(){l.pzaLocalData.data.battlePassExp+=100,l.pzaLocalData.data.battlePassExp>=100&&(l.pzaLocalData.data.battlePassExp-=100,l.pzaLocalData.data.battlePassLv++)},t.prototype.update=function(a){this.checkTimes>0&&(this.checkTimes-=a,this.checkTimes<=0&&(this.checkTimes=2,this.checkRedShow()))},t.prototype.checkRedShow=function(){var a,t,e,o;if(1==this.type){var n=!1;try{for(var i=r(Object.keys(l.pzaLocalData.data.bpDayTaskStates)),p=i.next();!p.done;p=i.next()){var s=p.value;1==l.pzaLocalData.data.bpDayTaskStates[s]&&(n=!0)}}catch(d){a={error:d}}finally{try{p&&!p.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}this.nodes_RedTip[0].active=!!n}else if(2==this.type){n=!1;try{for(var c=r(Object.keys(l.pzaLocalData.data.bpWeekTaskStates)),u=c.next();!u.done;u=c.next())s=u.value,1==l.pzaLocalData.data.bpWeekTaskStates[s]&&(n=!0)}catch(h){e={error:h}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(e)throw e.error}}this.nodes_RedTip[1].active=!!n}},t.prototype.onDisable=function(){var a=this;this.btn_getAll.off(cc.Node.EventType.TOUCH_END,this.getAll,this),this.btn_addExp.off(cc.Node.EventType.TOUCH_END,this.addExp,this),this.btn_close.off(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_day.off(cc.Node.EventType.TOUCH_END,function(){a.clickSelectBtn(1)},this),this.btn_week.off(cc.Node.EventType.TOUCH_END,function(){a.clickSelectBtn(2)},this)},t.prototype.close=function(){s.pzaSoundManager.playSFX(),this.call&&this.call(),p.pzaGameCommonPool.returnInstant(this.node)},i([g({displayName:"\u5168\u90e8\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"btn_getAll",void 0),i([g({displayName:"\u6dfb\u52a0\u7ecf\u9a8c\u6309\u94ae",type:cc.Node})],t.prototype,"btn_addExp",void 0),i([g({displayName:"\u5173\u95ed\u6309\u94ae",type:cc.Node})],t.prototype,"btn_close",void 0),i([g({displayName:"\u6bcf\u65e5\u6309\u94ae",type:cc.Node})],t.prototype,"btn_day",void 0),i([g({displayName:"\u6bcf\u5468\u6309\u94ae",type:cc.Node})],t.prototype,"btn_week",void 0),i([g({displayName:"\u9886\u53d6\u5012\u8ba1\u65f6",type:cc.Label})],t.prototype,"lab_countDown",void 0),i([g({displayName:"\u5bb9\u5668",type:cc.Node})],t.prototype,"node_content",void 0),i([g({displayName:"item",type:cc.Prefab})],t.prototype,"pre_item",void 0),i([g({displayName:"\u9009\u4e2d\u8282\u70b9",type:[cc.Node]})],t.prototype,"nodes_select",void 0),i([g({displayName:"\u672a\u9009\u4e2d\u8282\u70b9",type:[cc.Node]})],t.prototype,"nodes_unselect",void 0),i([g({displayName:"\u7ea2\u70b9\u7ec4",type:[cc.Node]})],t.prototype,"nodes_RedTip",void 0),i([g({displayName:"\u6eda\u52a8\u8282\u70b9",type:cc.Node})],t.prototype,"node_scrollView",void 0),i([y],t)}(cc.Component);e.default=b,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBattlePassTaskItem":"pzaBattlePassTaskItem","./pzaBattlePassTaskMgr":"pzaBattlePassTaskMgr"}],pzaBattlePassView:[function(a,t,e){"use strict";cc._RF.push(t,"aa78cEKLz5Bo5R17o6BWHDQ","pzaBattlePassView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r},r=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var p=a("../Battle/pzaGameState"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaGamePropConfig"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaRewardManager"),d=a("../Common/pzaSoundManager"),h=a("../Common/pzaStatisticsMgr"),m=a("../Common/pzaTipManager"),f=a("../Common/pzaUIManager"),z=a("../Common/pzaUtil"),y=a("../Load/pzaPreLoadManager"),g=a("../utils/pzaChannel"),b=a("../utils/pzakc"),v=a("./pzaBattlePassItem"),P=a("./pzaBattlePassMgr"),D=a("./pzaBattlePassTaskView"),S=cc._decorator,C=S.ccclass,_=S.property,E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.btn_close=null,t.btn_getExp=null,t.btn_getAll=null,t.lab_lv=null,t.lab_exp=null,t.pro_expPro=null,t.node_content=null,t.pre_item=null,t.lab_highReward=null,t.lab_resetTime=null,t.ani_caiwen=null,t.ani_leishen=null,t.ani_FireBlover=null,t.node_ad=null,t.lab_getAll=null,t.allItems=[],t.allRewards=[],t.getAllBtnState=0,t}return n(t,a),t.prototype.onEnable=function(){var a=this;this.btn_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_getExp.on(cc.Node.EventType.TOUCH_END,this.clickGetExp,this),this.btn_getAll.on(cc.Node.EventType.TOUCH_END,this.clickGetAll,this),this.init(),this.schedule(function(){a.countDown()},1,cc.macro.REPEAT_FOREVER),h.pzaStatisticsMgr.sendEvent("System",{name:"system",value:5}),cc.tween(this.btn_getAll).to(1,{scale:.8},{easing:"sineInOut"}).to(1,{scale:1},{easing:"sineInOut"}).union().repeatForever().start()},t.prototype.init=function(){var a=this;this.ani_caiwen.active=1==p.pzaGameState.bpRewardPlantId,this.ani_leishen.active=2==p.pzaGameState.bpRewardPlantId,this.ani_FireBlover.active=3==p.pzaGameState.bpRewardPlantId;var t=P.default.instance().normalRewardMap.size;this.node_content.width=102*t+8*(t-1)+10;for(var e=function(e){o.scheduleOnce(function(){var o=cc.instantiate(a.pre_item);o.setParent(a.node_content);var n=o.getComponent(v.default);n.bindData(a,e,a.node_content.width,t,function(t,e){a.getItemRewardCall(t,e)}),a.allItems.push(n)},.01*e)},o=this,n=0;n<t;n++)e(n);this.refreshUI(),this.refreshGetAllState()},t.prototype.refreshUI=function(){this.lab_lv.string="LV."+c.pzaLocalData.data.battlePassLv,this.lab_exp.string=c.pzaLocalData.data.battlePassExp+"/100",this.pro_expPro.progress=c.pzaLocalData.data.battlePassExp>=100?1:c.pzaLocalData.data.battlePassExp/100,10-c.pzaLocalData.data.bpHighAdsCnt>0?this.lab_highReward.string="\u518d\u89c2\u770b"+(10-c.pzaLocalData.data.bpHighAdsCnt)+"\u6b21\u5e7f\u544a\u53ef\u4e00\u952e\u83b7\u53d6\u9ad8\u7ea7\u5956\u52b1":this.lab_highReward.string="\u70b9\u51fb\u4e00\u952e\u83b7\u53d6\u53ef\u83b7\u5f97\u9ad8\u7ea7\u5956\u52b1",c.pzaLocalData.data.battlePassLv>=60&&(this.lab_exp.string="100/100",z.pzaUtil.switchGraySprite(this.btn_getExp.getComponent(cc.Sprite),!0))},t.prototype.hideAllAdFlag=function(){this.allItems.forEach(function(a){a.node_ad.active=!1})},t.prototype.refreshGetAllState=function(){var a,t,e,o;this.btn_getAll.active=!0;var n=!1;try{for(var i=r(Object.keys(c.pzaLocalData.data.bpNormalRewards)),p=i.next();!p.done;p=i.next()){var l=p.value;1==c.pzaLocalData.data.bpNormalRewards[l]&&(n=!0,this.getAllBtnState=1)}}catch(h){a={error:h}}finally{try{p&&!p.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}if(n)return this.node_ad.active=!1,void(this.lab_getAll.string="\u4e00\u952e\u9886\u53d6");var s=!1;try{for(var u=r(Object.keys(c.pzaLocalData.data.bpHighRewards)),d=u.next();!d.done;d=u.next())l=d.value,1==c.pzaLocalData.data.bpHighRewards[l]&&(s=!0)}catch(m){e={error:m}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(e)throw e.error}}s?c.pzaLocalData.data.bpHighAdsCnt>=10?(this.node_ad.active=!1,this.lab_getAll.string="\u4e00\u952e\u9886\u53d6",this.getAllBtnState=3):(this.node_ad.active=!0,this.lab_getAll.string="\u70b9\u51fb\u9886\u53d6",this.getAllBtnState=2):(this.getAllBtnState=0,this.btn_getAll.active=!1)},t.prototype.getItemRewardCall=function(a,t){var e=this,o=new s.pzaRewardPropData(a,t);u.pzaRewardManager.recieveRewards([o],function(){e.refreshGetAllState()})},t.prototype.clickGetExp=function(){var a=this;d.pzaSoundManager.playSFX(),c.pzaLocalData.data.battlePassLv>=60?m.pzaTipManager.showHomeTip("\u6218\u4ee4\u7b49\u7ea7\u5df2\u6ee1",null,1):f.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.BATTLEPASSTASK_VIEW,function(t){t&&t.getComponent(D.default).bindData(function(){a.refreshUI(),a.allItems.forEach(function(a){a.refreshUI()}),a.refreshGetAllState()})})},t.prototype.clickGetAll=function(){var a=this;this.allRewards=[],1==this.getAllBtnState?this.allItems.forEach(function(t){if(1==c.pzaLocalData.data.bpNormalRewards[""+t.idx]){t.clickAllReward(!1);var e=new s.pzaRewardPropData(t.normalRewardType,t.normalRewardCount);a.allRewards.push(e)}}):2==this.getAllBtnState?g.pzaChannel.instance().showVideo({sucCall:function(){var t,e;c.pzaLocalData.data.bpHighAdsCnt++,c.pzaLocalData.addDirty("bpHighAdsCnt"),a.refreshUI(),c.pzaLocalData.data.bpHighAdsCnt>=10&&a.hideAllAdFlag();try{for(var o=r(a.allItems),n=o.next();!n.done;n=o.next()){var i=n.value;if(1==c.pzaLocalData.data.bpHighRewards[""+i.idx]){i.clickAllReward(!0);var p=new s.pzaRewardPropData(i.highRewardType,i.highRewardCount);a.allRewards.push(p);break}}}catch(l){t={error:l}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},failCall:function(){},endCall:function(){},posName:"\u6218\u4ee4\u70b9\u51fb\u4e00\u952e\u9886\u53d6",adsid:"51"}):3==this.getAllBtnState&&this.allItems.forEach(function(t){if(1==c.pzaLocalData.data.bpHighRewards[""+t.idx]){t.clickAllReward(!0);var e=new s.pzaRewardPropData(t.highRewardType,t.highRewardCount);a.allRewards.push(e)}}),this.getRewards(),this.refreshGetAllState()},t.prototype.getRewards=function(){var a=this;if(this.allRewards.length>0){var t=this.allRewards.splice(0,24);u.pzaRewardManager.recieveRewards(t,function(){a.getRewards()})}},t.prototype.countDown=function(){(new Date).getDay();var a=b.default.getRemainingSeconds();if(a>0){var t=b.default.format(a);this.lab_resetTime.string="\u6218\u4ee4\u91cd\u7f6e\u65f6\u95f4:"+(p.pzaGameState.bpResetLeftDay-1)+"\u5929"+t}},t.prototype.onDisable=function(){this.btn_close.off(cc.Node.EventType.TOUCH_END,this.close,this),this.btn_getExp.off(cc.Node.EventType.TOUCH_END,this.clickGetExp,this),this.btn_getAll.off(cc.Node.EventType.TOUCH_END,this.clickGetAll,this)},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([_({displayName:"\u8fd4\u56de\u6309\u94ae",type:cc.Node})],t.prototype,"btn_close",void 0),i([_({displayName:"\u83b7\u53d6\u7ecf\u9a8c\u6309\u94ae",type:cc.Node})],t.prototype,"btn_getExp",void 0),i([_({displayName:"\u4e00\u952e\u9886\u53d6",type:cc.Node})],t.prototype,"btn_getAll",void 0),i([_({displayName:"\u7b49\u7ea7lab",type:cc.Label})],t.prototype,"lab_lv",void 0),i([_({displayName:"\u5f53\u524d\u7ecf\u9a8c\u503c",type:cc.Label})],t.prototype,"lab_exp",void 0),i([_({displayName:"\u8fdb\u5ea6\u6761",type:cc.ProgressBar})],t.prototype,"pro_expPro",void 0),i([_({displayName:"item\u5bb9\u5668",type:cc.Node})],t.prototype,"node_content",void 0),i([_({displayName:"item",type:cc.Prefab})],t.prototype,"pre_item",void 0),i([_({displayName:"\u5e7f\u544a\u83b7\u53d6\u9ad8\u7ea7\u5956\u52b1",type:cc.Label})],t.prototype,"lab_highReward",void 0),i([_({displayName:"\u6218\u4ee4\u91cd\u7f6e\u65f6\u95f4",type:cc.Label})],t.prototype,"lab_resetTime",void 0),i([_({displayName:"\u83dc\u95ee\u52a8\u753b",type:cc.Node})],t.prototype,"ani_caiwen",void 0),i([_({displayName:"\u96f7\u795e\u679c\u52a8\u753b",type:cc.Node})],t.prototype,"ani_leishen",void 0),i([_({displayName:"\u706b\u9f99\u8349\u52a8\u753b",type:cc.Node})],t.prototype,"ani_FireBlover",void 0),i([_({displayName:"\u5e7f\u544a\u6807\u8bc6",type:cc.Node})],t.prototype,"node_ad",void 0),i([_({displayName:"\u4e00\u952e\u9886\u53d6lab",type:cc.Label})],t.prototype,"lab_getAll",void 0),i([C],t)}(cc.Component);e.default=E,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBattlePassItem":"pzaBattlePassItem","./pzaBattlePassMgr":"pzaBattlePassMgr","./pzaBattlePassTaskView":"pzaBattlePassTaskView"}],pzaBattlePropView:[function(a,t,e){"use strict";cc._RF.push(t,"7119a5Olx9MbpF1Iusq6ePQ","pzaBattlePropView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattlePropView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaGamePropConfig"),s=a("../../Common/pzaLocalData"),c=a("../../Common/pzaOperationMgr"),u=a("../../Common/pzaSoundManager"),d=a("../../Common/pzaSpineController"),h=a("../../Common/pzaWorldEventManager"),m=a("../../utils/pzaChannel"),f=a("../pzaBubbleItem"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.freeSunNode=null,t.autoPickNode=null,t.clearCDNode=null,t.cherryBombNode=null,t.propCount=[],t.adIcon=[],t.cutDown=null,t.ani=[],t.autoPickAdIcon=null,t.adShareBtnFrames=[],t.refreshInterval=0,t.aniChangeInterval=0,t.isForceAd=!1,t.bombAni_1="3ui_1",t.bombAni_2="3ui_idle3",t}return n(t,a),t.prototype.onEnable=function(){this.showAllProp(),this.cutDown.node.active=!1,this.refreshInterval=0,this.aniChangeInterval=0,this.ani[0].playAnimation(this.bombAni_1,!0),this.ani[1].playAnimation("1ui_1",!0),this.ani[2].playAnimation("2ui_1",!0),this.isForceAd=p.pzaGameManager.getCurrentGame().toolButtonUseTimes>0,this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.USE_GAME_PROP,this.useGameProp,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.SHOW_BUBBLE_ARROW,this.useCherryTips,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.LACK_SUN,this.useSunTips,this)},t.prototype.onDisable=function(){h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.USE_GAME_PROP,this.useGameProp,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.SHOW_BUBBLE_ARROW,this.useCherryTips,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.LACK_SUN,this.useSunTips,this)},t.prototype.useSunTips=function(){c.pzaOperationMgr.showSunTipsBubble(this.freeSunNode,"\u80fd\u91cf\u4e0d\u8db3\uff0c\u7528\u5b83\u8bd5\u8bd5")},t.prototype.useCherryTips=function(){c.pzaOperationMgr.showTips(this.cherryBombNode,0,0,"\u5371\u9669\uff01\u5feb\u7528\u8fd9\u4e2a\uff01",f.pzaBubbleType.cherry)},t.prototype.refreshProp=function(a){if(this.isForceAd)return this.propCount[a-1].node.active=!1,void(this.adIcon[a-1].active=!0);if(a==l.pzaGamePropEnum.PROP_AUTO_PICK&&r.pzaGameState.autoPickLeft>0)return this.adIcon[a-1].active=!1,this.propCount[a-1].node.active=!1,this.cutDown.node.active=!0,this.ani[2].playAnimation("2ui_xi",!0),void this.refreshCutDown();var t=s.pzaLocalData.getPropCount(a);t>0?(this.propCount[a-1].node.active=!0,this.propCount[a-1].string=""+t,this.adIcon[a-1].active=!1):(this.propCount[a-1].node.active=!1,this.adIcon[a-1].active=!0,a==l.pzaGamePropEnum.PROP_AUTO_PICK&&(s.pzaLocalData.maxShareRwdCount>0&&s.pzaLocalData.data.autoPickShareCount<s.pzaLocalData.maxShareRwdCount?(this.autoPickAdIcon.spriteFrame=this.adShareBtnFrames[1],(s.pzaLocalData.isNoShareVideoSwap||"ks"==m.pzaChannel.instance().channel||"tt"==m.pzaChannel.instance().channel||"my"==m.pzaChannel.instance().channel)&&(this.autoPickAdIcon.spriteFrame=this.adShareBtnFrames[0])):this.autoPickAdIcon.spriteFrame=this.adShareBtnFrames[0]))},t.prototype.update=function(a){if(!(r.pzaGameState.gamePause||(this.aniChangeInterval+=a,this.aniChangeInterval>=10&&this.aniChange(),r.pzaGameState.autoPickLeft<=0))){if(this.refreshInterval+=a,!r.pzaGameState.autoPickLock&&(r.pzaGameState.autoPickLeft-=a,r.pzaGameState.autoPickLeft<=0))return this.cutDown.node.active=!1,this.ani[2].playAnimation("2ui_idle",!0),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),s.pzaLocalData.data.autoPickLeft=0,void s.pzaLocalData.addDirty("autoPickLeft");this.refreshInterval>=.5&&(this.refreshInterval=0,this.refreshCutDown())}},t.prototype.clickClearCD=function(){var a=this,t=p.pzaGameManager.getCurrentGame();m.pzaChannel.instance().showVideo({sucCall:function(){window.pzaplantManager.clearAllCD(),t.toolButtonUseTimes<=0||(t.toolButtonLeftArr[2]--,t.toolButtonLeftArr[2]<=0&&(a.clearCDNode.active=!1),s.pzaLocalData.hasUseProp=!0)},failCall:function(){},endCall:function(){a.resumeGame()},posName:"\u6e05cd",adsid:"29"})},t.prototype.clickFreeSun=function(){var a=this,t=p.pzaGameManager.getCurrentGame();if(s.pzaLocalData.getPropCount(l.pzaGamePropEnum.PROP_FREE_SUN)>0)s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_FREE_SUN),window.pzaplantManager.adCreateSun(),this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN),s.pzaLocalData.hasUseProp=!0,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:f.pzaBubbleType.sun,setTime:1}),t.toolButtonUseTimes>0&&(t.toolButtonLeftArr[0]--,t.toolButtonLeftArr[0]<=0&&(this.freeSunNode.active=!1)),s.pzaLocalData.bpUseProp();else{this.pauseGame();var e=function(){h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:f.pzaBubbleType.sun,setTime:5})};m.pzaChannel.instance().showVideo({sucCall:function(){u.pzaSoundManager.playAudio("getSun"),window.pzaplantManager.adCreateSun(),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:f.pzaBubbleType.sun,setTime:1}),t.toolButtonUseTimes<=0||(t.toolButtonLeftArr[0]--,t.toolButtonLeftArr[0]<=0&&(a.freeSunNode.active=!1),s.pzaLocalData.hasUseProp=!0,s.pzaLocalData.bpUseProp())},failCall:function(){return e},endCall:function(){a.resumeGame()},posName:"\u989d\u5916\u9633\u5149",adsid:"5"})}},t.prototype.clickAutoPick=function(){var a=this;if(console.log("pzaGameState.autoPickLeft ",r.pzaGameState.autoPickLeft),!(r.pzaGameState.autoPickLeft>0)){var t=p.pzaGameManager.getCurrentGame();if(s.pzaLocalData.getPropCount(l.pzaGamePropEnum.PROP_AUTO_PICK)>0)s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_AUTO_PICK),r.pzaGameState.autoPickLeft=s.pzaLocalData.data.autoPickLeft=600,s.pzaLocalData.addDirty("autoPickLeft"),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.AUTO_PICK,null),s.pzaLocalData.hasUseProp=!0,t.toolButtonUseTimes>0&&(t.toolButtonLeftArr[1]--,t.toolButtonLeftArr[1]<=0&&(this.autoPickNode.active=!1)),s.pzaLocalData.bpUseProp();else{var e=function(){r.pzaGameState.autoPickLeft=s.pzaLocalData.data.autoPickLeft=600,s.pzaLocalData.addDirty("autoPickLeft"),a.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.AUTO_PICK,null),t.toolButtonUseTimes<=0||(t.toolButtonLeftArr[1]--,t.toolButtonLeftArr[1]<=0&&(a.autoPickNode.active=!1),s.pzaLocalData.hasUseProp=!0,s.pzaLocalData.bpUseProp())};if("ks"!=m.pzaChannel.instance().channel&&!s.pzaLocalData.isNoShareVideoSwap&&s.pzaLocalData.maxShareRwdCount>0&&s.pzaLocalData.data.autoPickShareCount<s.pzaLocalData.maxShareRwdCount)return void m.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"4"},function(){a.resumeGame(),s.pzaLocalData.data.autoPickShareCount++,s.pzaLocalData.addDirty("autoPickShareCount"),e()});this.pauseGame(),m.pzaChannel.instance().showVideo({sucCall:e,failCall:function(){},endCall:function(){a.resumeGame()},posName:"\u81ea\u52a8\u62fe\u53d6",adsid:"4"})}}},t.prototype.clickCherryBomb=function(){var a=this,t=p.pzaGameManager.getCurrentGame();if(s.pzaLocalData.getPropCount(l.pzaGamePropEnum.PROP_CHERRY_BOMB)>0)s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),t.createAdBomb(),this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),s.pzaLocalData.hasUseProp=!0,t.toolButtonUseTimes>0&&(t.toolButtonLeftArr[3]--,t.toolButtonLeftArr[3]<=0&&(this.cherryBombNode.active=!1)),s.pzaLocalData.bpUseProp();else{this.pauseGame();var e=function(){h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:f.pzaBubbleType.cherry,setTime:5})};m.pzaChannel.instance().showVideo({sucCall:function(){t.createAdBomb(),t.toolButtonUseTimes<=0||(t.toolButtonLeftArr[3]--,t.toolButtonLeftArr[3]<=0&&(a.cherryBombNode.active=!1),s.pzaLocalData.hasUseProp=!0,s.pzaLocalData.bpUseProp())},failCall:function(){return e},endCall:function(){a.resumeGame()},posName:"\u6a31\u6843\u70b8\u5f39",adsid:"3"})}},t.prototype.aniChange=function(){var a=this;this.aniChangeInterval=0,this.ani[0].playAnimation(this.bombAni_2,!1,function(){a.ani[0].playAnimation(a.bombAni_1,!0)}),this.ani[1].playAnimation("1ui_idle",!1,function(){a.ani[1].playAnimation("1ui_1",!0)}),r.pzaGameState.autoPickLeft<=0&&this.ani[2].playAnimation("2ui_idle",!1,function(){a.ani[2].playAnimation("2ui_1",!0)})},t.prototype.useGameProp=function(a){a==l.pzaGamePropEnum.PROP_AUTO_PICK?(s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_AUTO_PICK),r.pzaGameState.autoPickLeft=s.pzaLocalData.data.autoPickLeft=600,s.pzaLocalData.addDirty("autoPickLeft"),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.AUTO_PICK,null)):a==l.pzaGamePropEnum.PROP_FREE_SUN?(s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_FREE_SUN),window.pzaplantManager.adCreateSun(),this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:f.pzaBubbleType.sun,setTime:1})):a==l.pzaGamePropEnum.PROP_CHERRY_BOMB&&(s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),window.pzaplantManager.createAdCherry(),this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:f.pzaBubbleType.cherry,setTime:1}))},t.prototype.pauseSelf=function(){this.ani[0].pauseAnimation(),this.ani[1].pauseAnimation(),this.ani[2].pauseAnimation()},t.prototype.resumeSelf=function(){this.ani[0].resumeAnimation(),this.ani[1].resumeAnimation(),this.ani[2].resumeAnimation(),this.refreshPropCnt()},t.prototype.refreshCutDown=function(){this.cutDown.string=this.getTimeCutDownString(r.pzaGameState.autoPickLeft)},t.prototype.getTimeCutDownString=function(a){if(null==a||a<=0)return"00 : 00";var t=Math.floor(a/60),e=Math.floor(a-60*t);return(t>=10?t+"":"0"+t)+" : "+(e>=10?e+"":"0"+e)},t.prototype.hideAllProp=function(){this.freeSunNode.active=!1,this.cherryBombNode.active=!1,this.autoPickNode.active=!1,this.clearCDNode.active=!1},t.prototype.showAllProp=function(){p.pzaGameManager.getCurrentGame().showBattlePropButtons(this)},t.prototype.showFreeSun=function(){this.freeSunNode.active=!0,this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN)},t.prototype.showCherryBomb=function(){this.cherryBombNode.active=!0,this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB)},t.prototype.showAutoPick=function(){this.autoPickNode.active=!0,this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK)},t.prototype.refreshPropCnt=function(){this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN),this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK)},t.prototype.pauseGame=function(){"hw"!=m.pzaChannel.instance().channel&&(r.pzaGameState.gamePause=!0,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.GAME_PAUSE,null),u.pzaSoundManager.pausePlayMusic())},t.prototype.resumeGame=function(){r.pzaGameState.gamePause=!1,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.GAME_RESUME,null),u.pzaSoundManager.resumeMusic()},i([g({displayName:"\u514d\u8d39\u9633\u5149",type:cc.Node})],t.prototype,"freeSunNode",void 0),i([g({displayName:"\u81ea\u52a8\u62fe\u53d6",type:cc.Node})],t.prototype,"autoPickNode",void 0),i([g({displayName:"\u6e05CD",type:cc.Node})],t.prototype,"clearCDNode",void 0),i([g({displayName:"\u6a31\u6843\u6e05\u5c4f",type:cc.Node})],t.prototype,"cherryBombNode",void 0),i([g({displayName:"\u9053\u5177\u6570\u91cf",type:[cc.Label]})],t.prototype,"propCount",void 0),i([g({displayName:"\u5e7f\u544a\u56fe\u6807",type:[cc.Node]})],t.prototype,"adIcon",void 0),i([g({displayName:"\u81ea\u52a8\u62fe\u53d6\u5012\u8ba1\u65f6",type:cc.Label})],t.prototype,"cutDown",void 0),i([g({displayName:"\u52a8\u753b",type:[d.pzaSpineController]})],t.prototype,"ani",void 0),i([g({displayName:"\u81ea\u52a8\u62fe\u53d6\u5e7f\u544a\u56fe\u6807",type:cc.Sprite})],t.prototype,"autoPickAdIcon",void 0),i([g({displayName:"\u5e7f\u544a\u5206\u4eab\u6309\u94ae\u56fe",type:[cc.SpriteFrame]})],t.prototype,"adShareBtnFrames",void 0),i([y],t)}(cc.Component);e.pzaBattlePropView=b,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzaChannel":"pzaChannel","../pzaBubbleItem":"pzaBubbleItem"}],pzaBattleUpView:[function(a,t,e){"use strict";cc._RF.push(t,"62cb1l/69BGA7XnrfIYDdqK","pzaBattleUpView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattleUpView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaLocalData"),s=a("../../Common/pzaNodeManager"),c=a("../../Common/pzaUtil"),u=a("../../Common/pzaWorldEventManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.coinShowNode=null,t.coinUINode=null,t.coinLabel=null,t.partLabel=null,t.partProNode=null,t.partProgress=null,t.zombieHeadNode=null,t.gameStartBtn=null,t.partFlags=[],t.proLabel=null,t.gameTimeTxt=null,t.gamingTimer=null,t.maxWave=0,t.coinShowTime=0,t.lastShowCoinCount=null,t}return n(t,a),t.prototype.onLoad=function(){var a=this.coinUINode.convertToWorldSpaceAR(cc.v2()),t=s.pzaNodeManager.getUpEffectNode();if(null!=t){var e=t.convertToNodeSpaceAR(a);r.pzaGameState.coinMoveUIPos=cc.v2(e.x,e.y)}},t.prototype.onEnable=function(){this.gameStartBtn.y=-450,this.gameStartBtn.active=!1,p.pzaGameManager.getCurrentGame().initPartProcess(this),this.showCoinNode(),this.lastShowCoinCount=null,this.refrshCoinCount(),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.UPDATE_PART_PRO,this.updatePartPro,this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.SELECT_CARD,this.gameStartBtnAni,this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.DISSELECT_CARD,this.gameStartBtnUPAni,this)},t.prototype.onDisable=function(){u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.UPDATE_PART_PRO,this.updatePartPro,this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.SELECT_CARD,this.gameStartBtnAni,this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.DISSELECT_CARD,this.gameStartBtnUPAni,this),this.gamingTimer&&(this.gameTimeTxt.string=""),clearInterval(this.gamingTimer)},t.prototype.update=function(a){this.coinShowTime+=a,this.coinShowTime>=3&&(this.coinShowNode.active=!1),this.refrshCoinCount(),r.pzaGameState.gamePause||this.refreshBossPartPro()},t.prototype.showCoinNode=function(){this.coinShowNode.active=!0,this.coinShowTime=0},t.prototype.refrshCoinCount=function(){this.lastShowCoinCount!=l.pzaLocalData.data.coin&&(this.lastShowCoinCount=l.pzaLocalData.data.coin,this.coinLabel.string=c.pzaUtil.getCurrencyStr(this.lastShowCoinCount))},t.prototype.refreshBossPartPro=function(){if(r.pzaGameState.gameMode==r.pzaGameMode.ZOM_BOSS||r.pzaGameState.isMiniMode()&&(3==r.pzaGameState.curPart||4==r.pzaGameState.curPart)){this.partProNode.active=!0,this.zombieHeadNode.active=!1;var a=window.pzazombieManager.drZomBoss;if(null!=a&&null!=a.baseData){var t=1-a.baseData.hp/a.baseData.maxHp;this.partProgress.fillRange=-t}}},t.prototype.updatePartPro=function(){p.pzaGameManager.getCurrentGame().updatePartProcess(this)},t.prototype.gameStartBtnUPAni=function(){this.gameStartBtn.active&&(this.gameStartBtn.stopAllActions(),this.gameStartBtn.runAction(cc.moveTo(.5,0,-300).easing(cc.easeBackInOut())))},t.prototype.gameStartBtnAni=function(){if(this.gameStartBtn.active){var a;a=null==r.pzaGameState.selectCard?-300:-450,this.gameStartBtn.stopAllActions(),this.gameStartBtn.runAction(cc.moveTo(.5,0,a).easing(cc.easeBackInOut()))}},t.prototype.clickGameStart=function(){this.gameStartBtn.active=!1},i([m({displayName:"\u91d1\u5e01\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"coinShowNode",void 0),i([m({displayName:"\u91d1\u5e01UI\u4f4d\u7f6e",type:cc.Node})],t.prototype,"coinUINode",void 0),i([m({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],t.prototype,"coinLabel",void 0),i([m({displayName:"\u5173\u5361\u663e\u793a",type:cc.Label})],t.prototype,"partLabel",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u8282\u70b9",type:cc.Node})],t.prototype,"partProNode",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u6761",type:cc.Sprite})],t.prototype,"partProgress",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u50f5\u5c38\u5934",type:cc.Node})],t.prototype,"zombieHeadNode",void 0),i([m({displayName:"\u70b9\u51fb\u5f00\u59cb\u6309\u94ae",type:cc.Node})],t.prototype,"gameStartBtn",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u65d7\u5e1c",type:[cc.Node]})],t.prototype,"partFlags",void 0),i([m({displayName:"\u8fdb\u5ea6\u6587\u5b57",type:cc.Label})],t.prototype,"proLabel",void 0),i([h],t)}(cc.Component);e.pzaBattleUpView=f,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaBedCar:[function(a,t,e){"use strict";cc._RF.push(t,"55191LYvo9Gdr8QXvvPlQC9","pzaBedCar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBedCar=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("../Plant/pzaAttackType"),c=a("../pzaGameState"),u=a("./pzaBaseZombie"),d=a("./pzaZombieState"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.butterSlot=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.animation.node.x=40,this.baseData.zombieData.cate=l.pzaZombieCate.IceCar,null!=t.logicPos&&(this.animation.playAnimation("idle",!0),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_ICE,-1)),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_CONTROL,-1)),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_SPATTER,-1)),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_IMMOBILIZE,-1)))},t.prototype.logicUpdate=function(a){null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.isDead||(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow?this.pushBackTime>0?this.pushBackMove(a):(-1!=this.baseData.xIndex&&this.baseData.xIndex<8&&(this.baseData.zombieData.moveSpd-=this.baseData.zombieData.initMSpd/100,this.baseData.zombieData.moveSpd=Math.max(this.baseData.zombieData.moveSpd,3*this.baseData.zombieData.initMSpd/8)),this.updateMove(a),this.rollingPlant()):this.changeRowMove(a))))},t.prototype.changeRowMove=function(a){this.updateMove(a),this.baseData.logicPos.y+=150*a*(this.baseData.yIndex<this.changeTargetRow?1:-1);var t=.1*c.pzaGameState.map.getYInterval(this.changeTargetRow),e=c.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.changeTargetRow,0,t);(this.baseData.yIndex<this.changeTargetRow&&e.y<=this.baseData.logicPos.y||this.baseData.yIndex>this.changeTargetRow&&e.y>=this.baseData.logicPos.y)&&(this.baseData.logicPos.y=e.y,this.body.curTarget=null,window.pzazombieManager.zombieChangeMapRow(this.body,this.baseData,this.changeTargetRow),this.changeTargetRow=-1)},t.prototype.rollingPlant=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a,t=this.findTarget();a=t?""+t.xIndex+t.yIndex:""+this.baseData.xIndex+this.baseData.yIndex;var e=window.pzaplantManager.plantDataMap.get(a);if(null!=e){var o=window.pzaplantManager.getPlantByData(e);o&&o.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var n=window.pzaplantManager.plantEnvDataMap.get(a);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var r=window.pzaplantManager.pumpkinDataMap.get(a);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var l=window.pzaplantManager.notTargetMap.get(a);if(null!=l){var c=window.pzaplantManager.getPlantByData(l);c&&c.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}}},t.prototype.hurt=function(t,e,o){if(void 0===o&&(o=s.pzaAttackType.FLOOR_ATK),this.baseData&&!this.baseData.isDead){if(o==s.pzaAttackType.BANG)return this.baseData.zombieDie(),this.changeSkin("skin3"),this.death(!0),void r.pzaSoundManager.playAudio("zomboniDeath");if(o!=s.pzaAttackType.SPIKE){if(o==s.pzaAttackType.NORMAL_BOOM)return this.baseData.zombieDie(),void this.death(!0);a.prototype.hurt.call(this,t,e,o)}else{if(this.baseData.zombieDie(),this.changeSkin("skin3"),r.pzaSoundManager.playAudio("ball_fall"),this.death(!0),null!=e){var n=window.pzaplantManager.getPlantByData(e);n&&n.hurt(50,this.baseData,s.pzaAttackType.BANG)}r.pzaSoundManager.playAudio("zomboniDeath")}}},t.prototype.spawnZombie=function(){var a=window.pzazombieManager.createFixBlockZombieData(l.pzaZombieEnum.NightWear,this.baseData.xIndex,this.baseData.yIndex);if(this.baseData.xIndex<0){var t=.1*c.pzaGameState.map.getYInterval(this.baseData.yIndex)+15,e=c.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,t);e.x=600,a.logicPos=e}window.pzazombieManager.createZombie(a)},t.prototype.death=function(a,t){var e=this;if(void 0===t&&(t=null),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData),!a)return this.close(),void(t!=s.pzaAttackType.DEATH&&this.spawnZombie());this.playDeathAnimation(function(){e.close(),t!=s.pzaAttackType.DEATH&&e.spawnZombie()}),r.pzaSoundManager.playAudio("explosion")},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.spawnZombie()},t.prototype.playDeathAnimation=function(a){this.zombieState=d.pzaZombieState.DEAD,this.zombieHurtState=l.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),this.changeSkin("skin3"),this.animation.playAnimation("death",!1,a)},t.prototype.zombieDying=function(){this.zombieHurtState=l.pzaHurtStateEnum.DYING,this.changeSkin("skin3")},t.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,this.changeSkin("skin2")},t.prototype.zombieIntact=function(){this.zombieHurtState=l.pzaHurtStateEnum.INTACT,this.changeSkin("skin1")},i([m],t)}(u.pzaBaseZombie));e.pzaBedCar=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieState":"pzaZombieState"}],pzaBeltCard:[function(a,t,e){"use strict";cc._RF.push(t,"8cfbd1YdzlOzJ7ggalAXv4I","pzaBeltCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBeltCard=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaSpriteFrameManager"),u=a("../../Common/pzaWorldEventManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.selectTag=null,t.icon=null,t.plantType=null,t.clickCall=null,t.hasSelect=!1,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.node._touchListener.setSwallowTouches(!1)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this)},t.prototype.bindData=function(a,t){this.plantType=a,this.clickCall=t,a==r.pzaPlantEnum.WALL_NUT_BOWLING?c.pzaSpriteFrameManager.loadPlantCard(r.pzaPlantEnum.WALL_NUT,this.icon):a==r.pzaPlantEnum.TORCH_NUT_BOWLING?c.pzaSpriteFrameManager.loadPlantCard(r.pzaPlantEnum.TorchNut,this.icon):a==r.pzaPlantEnum.ICE_NUT_BOWLING?c.pzaSpriteFrameManager.loadPlantCard(r.pzaPlantEnum.ICE_NUT,this.icon):a==r.pzaPlantEnum.JALAPENO_NUT_BOWLING?c.pzaSpriteFrameManager.loadPlantCard(r.pzaPlantEnum.FireNut,this.icon):c.pzaSpriteFrameManager.loadPlantCard(a,this.icon),this.selectTag.active=!1,this.hasSelect=!1},t.prototype.clickCard=function(){var a=this.hasSelect;this.clickCall&&this.clickCall(),a?(p.pzaGameState.selectCard=null,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null):this.select()},t.prototype.select=function(){p.pzaGameState.selectCard=p.pzaSelectCardType.BELT_CARD,p.pzaGameState.selectPlant=this.plantType,p.pzaGameState.cobCannon=null,this.hasSelect=!0,this.selectTag.active=!0,s.pzaSoundManager.playAudio("selectPlant"),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.SELECT_CARD,null)},t.prototype.diselect=function(){this.hasSelect&&(this.hasSelect=!1,this.selectTag.active=!1)},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([m({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"selectTag",void 0),i([m({displayName:"icon",type:cc.Sprite})],t.prototype,"icon",void 0),i([h],t)}(cc.Component);e.pzaBeltCard=f,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaBeltConfig:[function(a,t,e){"use strict";cc._RF.push(t,"c1564gSGttOob7xInXAhlOo","pzaBeltConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBeltConfig=void 0;var o=a("../Battle/Data/pzaPlantEnum"),n=a("../Battle/pzaGameState"),i=a("./pzaGameManager"),r=a("./pzaGameMiniGame"),p=function(){function a(){}return a.initMiniPlants=function(a){this.miniPlantCards=[];var t=i.pzaGameManager.getGame(n.pzaGameMode.MINIGAME,r.pzaGameMiniGame);this.miniPlantCards=t.getBeltPlantArr(a),this.miniPlantWeights=[],this.miniPlantWeights=t.getBeltPlantWeightArr(a),this.miniInter=[3,3],5!=n.pzaGameState.curPart&&6!=n.pzaGameState.curPart||(this.miniInter=[])},a.initMiniSmallPlants=function(){this.miniInitCards=[],this.miniPlantCards=[],this.miniPlantWeights=[],this.miniPlantCards=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.WALL_NUT,o.pzaPlantEnum.PEA_SHOOTER,o.pzaPlantEnum.CHERRY_BOMB],this.miniPlantWeights=[25,15,25,35],this.miniInter=[]},a.getBeltPlants=function(a,t){if(n.pzaGameState.isMiniMode())return Array.from(this.miniPlantCards);if(1==a||6==a){if(5==t)return Array.from(this.BeltPlant15);if(10==t)return Array.from(this.BeltPlant110)}if((2==a||7==a)&&10==t)return Array.from(this.BeltPlant210);if(3==a||8==a){if(5==t)return Array.from(this.BeltPlant35);if(10==t)return Array.from(this.BeltPlant310)}if((4==a||9==a)&&10==t)return Array.from(this.BeltPlant410);if(5==a||10==a){if(5==t)return Array.from(this.BeltPlant55);if(10==t)return Array.from(this.BeltPlant510)}return null},a.getBeltPlantsWeight=function(a,t){if(n.pzaGameState.isMiniMode())return Array.from(this.miniPlantWeights);if(1==a||6==a){if(5==t)return Array.from(this.BeltPlantWeight15);if(10==t)return Array.from(this.BeltPlantWeight110)}if((2==a||7==a)&&10==t)return Array.from(this.BeltPlantWeight210);if(3==a||8==a){if(5==t)return Array.from(this.BeltPlantWeight35);if(10==t)return Array.from(this.BeltPlantWeight310)}if((4==a||9==a)&&10==t)return Array.from(this.BeltPlantWeight410);if(5==a||10==a){if(5==t)return Array.from(this.BeltPlantWeight55);if(10==t)return Array.from(this.BeltPlantWeight510)}return null},a.firstGraveBusterWeight=function(a,t,e){return t>=e?0:a},a.firstLilypadWeight=function(a,t){return Math.max(1,Math.floor((1-a)*t/18+a+.5))},a.firstPotWeight=function(a,t){return Math.max(1,Math.floor((1-a)*t/35+a+.5))},a.firstCabbageMelonWeight=function(a,t){return t>5?a:t>=3?3:2},a.firstKernelWeight=function(a,t){return t>5?a:1},a.sencondWeight=function(a,t,e,o){return 0==a||t<=2?a:e>=4?1:3==e?5:o?a/2:a},a.getInitCard=function(a,t,e){var o;return 5!=t&&10!=t||10!=e?n.pzaGameState.isMiniMode()?n.pzaGameState.gameMode==n.pzaGameMode.SMALL_ZOMBIE?null:(o=i.pzaGameManager.getGame(n.pzaGameMode.MINIGAME,r.pzaGameMiniGame).getInitPlantArr(e))[a]?o[a]:null:null:(o=[33,21,33,15])[a]},a.getFirstCardInterval=function(a,t){if(1==a||6==a){if(5==t)return.01;if(10==t)return 2}if((2==a||7==a)&&10==t)return 2;if(3==a||8==a){if(5==t)return 2;if(10==t)return 2}if((4==a||9==a)&&10==t)return 2;if(5==a||10==a){if(5==t)return 2;if(10==t)return 10}return 2},a.getNextCardInterval=function(a,t,e){if(n.pzaGameState.isMiniMode()&&this.miniInter.length>0)return this.miniInter.shift();var o=1;5!=a&&10!=a||10!=t||(o=.875),n.pzaGameState.isMiniMode()&&(o=!n.pzaGameState.isMiniMode()||5!=n.pzaGameState.curPart&&6!=n.pzaGameState.curPart?.875:1,n.pzaGameState.gameMode==n.pzaGameMode.SMALL_ZOMBIE&&(o=1));var i=4;return e<=4?(i=4,5!=a&&10!=a||10!=t||(i=3.5),n.pzaGameState.isMiniMode()&&n.pzaGameState.gameMode!=n.pzaGameMode.SMALL_ZOMBIE&&(3==n.pzaGameState.curPart?i=3.5:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=4:9==n.pzaGameState.curPart?(o=1,i=4):o=3.5)):e<=6?(i=4.25,5!=a&&10!=a||10!=t||(i=3.71),n.pzaGameState.isMiniMode()&&n.pzaGameState.gameMode!=n.pzaGameMode.SMALL_ZOMBIE&&(3==n.pzaGameState.curPart?i=3.71:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=4.25:o=9==n.pzaGameState.curPart?4.25:3.71)):e<=8?(i=5,5!=a&&10!=a||10!=t||(i=4.37),n.pzaGameState.isMiniMode()&&n.pzaGameState.gameMode!=n.pzaGameMode.SMALL_ZOMBIE&&(3==n.pzaGameState.curPart?i=4.37:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=5:9==n.pzaGameState.curPart?i=5:o=4.37)):(i=10,5!=a&&10!=a||10!=t||(i=8.75),n.pzaGameState.isMiniMode()&&n.pzaGameState.gameMode!=n.pzaGameMode.SMALL_ZOMBIE&&(3==n.pzaGameState.curPart?i=8.75:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=10:9==n.pzaGameState.curPart?i=10:o=8.75)),o*i},a.BeltPlant15=[o.pzaPlantEnum.WALL_NUT_BOWLING,o.pzaPlantEnum.BOOM_NUT_BOWLING],a.BeltPlantWeight15=[85,15],a.BeltPlant110=[o.pzaPlantEnum.PEA_SHOOTER,o.pzaPlantEnum.CHERRY_BOMB,o.pzaPlantEnum.WALL_NUT,o.pzaPlantEnum.REPEATER,o.pzaPlantEnum.SNOW_PEA,o.pzaPlantEnum.CHOMPER,o.pzaPlantEnum.POTATO_MINE],a.BeltPlantWeight110=[20,20,15,10,10,5,20],a.BeltPlant210=[o.pzaPlantEnum.GRAVE_BUSTER,o.pzaPlantEnum.ICE_SHROOM,o.pzaPlantEnum.DOOM_SHROOM,o.pzaPlantEnum.HYPNO_SHROOM,o.pzaPlantEnum.SCAREDY_SHROOM,o.pzaPlantEnum.FUME_SHROOM,o.pzaPlantEnum.PUFF_SHROOM],a.BeltPlantWeight210=[20,15,15,10,15,15,10],a.BeltPlant35=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.WALL_NUT,o.pzaPlantEnum.PEA_SHOOTER,o.pzaPlantEnum.CHERRY_BOMB],a.BeltPlantWeight35=[25,15,25,35],a.BeltPlant310=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.SQUASH,o.pzaPlantEnum.THREE_PEATER,o.pzaPlantEnum.TANGLE_KELP,o.pzaPlantEnum.JALAPENO,o.pzaPlantEnum.SPIKEWEED,o.pzaPlantEnum.TORCHWOOD,o.pzaPlantEnum.TALL_NUT],a.BeltPlantWeight310=[25,5,25,5,10,10,10,10],a.BeltPlant410=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.SEA_SHROOM,o.pzaPlantEnum.MAGNET_SHROOM,o.pzaPlantEnum.BLOVER,o.pzaPlantEnum.CACTUS,o.pzaPlantEnum.STAR_FRUIT,o.pzaPlantEnum.SPLIT_PEA,o.pzaPlantEnum.PUMPKIN],a.BeltPlantWeight410=[25,10,5,5,15,25,5,10],a.BeltPlant55=[o.pzaPlantEnum.FLOWER_POT,o.pzaPlantEnum.CHOMPER,o.pzaPlantEnum.PUMPKIN,o.pzaPlantEnum.CHERRY_BOMB],a.BeltPlantWeight55=[50,25,15,10],a.BeltPlant510=[o.pzaPlantEnum.FLOWER_POT,o.pzaPlantEnum.MELON_PULT,o.pzaPlantEnum.JALAPENO,o.pzaPlantEnum.CABBAGE_PULT,o.pzaPlantEnum.KERNEL_PULT,o.pzaPlantEnum.ICE_SHROOM],a.BeltPlantWeight510=[55,10,12,10,5,8],a.miniInitCards=[],a.miniPlantCards=[],a.miniPlantWeights=[],a.ZJ_BeltPlant=new Map([[14,[o.pzaPlantEnum.TORCH_NUT_BOWLING,o.pzaPlantEnum.ICE_NUT_BOWLING,o.pzaPlantEnum.JALAPENO_NUT_BOWLING]]]),a.ZJ_BeltPlantWeight=new Map([[14,[80,40,15]]]),a.InitCardInterval=1.6,a.miniInter=[3,5],a}();e.pzaBeltConfig=p,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameManager":"pzaGameManager","./pzaGameMiniGame":"pzaGameMiniGame"}],pzaBeltEquipConfig:[function(a,t,e){"use strict";cc._RF.push(t,"465d7/DoJlGMLRfxXDRdStN","pzaBeltEquipConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBeltEquipConfig=e.pzaBeltGetType=e.pzaBeltEquipState=e.pzaBeltEquipEnum=void 0;var o,n=a("./pzaGamePropConfig"),i=a("./pzaLocalData"),r=a("./pzaRewardManager");(function(a){a[a.null=0]="null",a[a.DianWang=1]="DianWang",a[a.WuQi=2]="WuQi",a[a.HeiQi=3]="HeiQi",a[a.TianDi=4]="TianDi",a[a.ShuangQi=5]="ShuangQi"})(e.pzaBeltEquipEnum||(e.pzaBeltEquipEnum={})),function(a){a[a.lock=0]="lock",a[a.waiting=1]="waiting",a[a.not_equiped=2]="not_equiped",a[a.equiped=3]="equiped"}(o=e.pzaBeltEquipState||(e.pzaBeltEquipState={})),function(a){a[a.shop=0]="shop",a[a.battlePass=1]="battlePass",a[a.activity=2]="activity"}(e.pzaBeltGetType||(e.pzaBeltGetType={}));var p=function(){function a(a,t,e,o,n,i,r){this.id=a,this.name=t,this.growth=e,this.desc=i,this.getType=o,this.getTips=n,this.price=r}return a.initConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=new a(t.id,t.name,t.growth,t.getType,t.getTip,t.desc,t.price);e.configMap.set(t.id,o)}})},a.getConfig=function(){return this.configMap},a.isAbleSlotUnlock=function(){return!0},a.getBeltEquip=function(a,t){if(void 0===t&&(t=!0),i.pzaLocalData.data.beltEquipData.hasEquipList[a]==o.lock)i.pzaLocalData.data.beltEquipData.hasEquipList[a]=o.waiting,i.pzaLocalData.addDirty("beltEquipData"),t&&r.pzaRewardManager.recieveRewards([new n.pzaRewardPropData(n.pzaGamePropEnum.EQUIP_BELT,null,a)],function(){},!0);else{var e=this.getConfig().get(a);r.pzaRewardManager.recieveRewards([new n.pzaRewardPropData(n.pzaGamePropEnum.PROP_COIN,e.price)],function(){})}},a.configMap=new Map,a}();e.pzaBeltEquipConfig=p,cc._RF.pop()},{"./pzaGamePropConfig":"pzaGamePropConfig","./pzaLocalData":"pzaLocalData","./pzaRewardManager":"pzaRewardManager"}],pzaBeltEquipItem:[function(a,t,e){"use strict";cc._RF.push(t,"34a5eKP2FxIi7lwIF74fLxG","pzaBeltEquipItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBeltEquipItem=void 0;var r=a("../../Common/pzaBeltEquipConfig"),p=a("../../Common/pzaLocalData"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.unlockBtn=null,t.equipBtn=null,t.nameLB=null,t.descLB=null,t.getTipsLB=null,t.iconSP=null,t.id=null,t.view=null,t}return n(t,a),t.prototype.init=function(a,t,e,o,n){this.view=a,this.id=t,this.nameLB.string=e,this.getTipsLB.string=o,this.descLB.string=n,this.setView()},t.prototype.unEquipped=function(){p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]=r.pzaBeltEquipState.not_equiped,this.setView()},t.prototype.getCurState=function(){return p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]},t.prototype.setView=function(){this.node.active=!0,this.equipBtn.active=!1,this.unlockBtn.active=!1,this.getTipsLB.node.active=!1,this.descLB.node.active=!1,p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]?p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]==r.pzaBeltEquipState.waiting?this.unlockBtn.active=!0:p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]==r.pzaBeltEquipState.not_equiped?(this.equipBtn.active=!0,this.descLB.node.active=!0):p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]==r.pzaBeltEquipState.equiped&&(this.node.active=!1):(p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]=r.pzaBeltEquipState.lock,this.getTipsLB.node.active=!0),p.pzaLocalData.addDirty("beltEquipData")},t.prototype.clickInstallBtn=function(){this.view.installEquip(this)&&(p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]=r.pzaBeltEquipState.equiped,this.setView())},t.prototype.clickUnlockBtn=function(){p.pzaLocalData.data.beltEquipData.hasEquipList[this.id]=r.pzaBeltEquipState.not_equiped,this.setView()},i([c(cc.Node)],t.prototype,"unlockBtn",void 0),i([c(cc.Node)],t.prototype,"equipBtn",void 0),i([c(cc.Label)],t.prototype,"nameLB",void 0),i([c(cc.Label)],t.prototype,"descLB",void 0),i([c(cc.Label)],t.prototype,"getTipsLB",void 0),i([c(cc.Sprite)],t.prototype,"iconSP",void 0),i([s],t)}(cc.Component);e.pzaBeltEquipItem=u,cc._RF.pop()},{"../../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../../Common/pzaLocalData":"pzaLocalData"}],pzaBeltEquipView:[function(a,t,e){"use strict";cc._RF.push(t,"92755lsKU5L85Nkcyog26bU","pzaBeltEquipView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r},r=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},p=this&&this.__read||function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var o,n,i=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBeltEquipView=void 0;var l=a("../../Common/pzaBaseComponent"),s=a("../../Common/pzaBeltEquipConfig"),c=a("./pzaBeltEquipItem"),u=a("./pzaBeltSlotItem"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equipItemPre=null,t.slotItemPre=null,t.overViewPre=null,t.slotList_Parent=null,t.equipList_Parent=null,t.slotMap=new Map,t.equipMap=new Map,t.slotCount=5,t}return n(t,a),t.prototype.onEnable=function(){this.init()},t.prototype.init=function(){for(var a=this,t=0;t<this.slotCount;t++){var e=cc.instantiate(this.slotItemPre);e.setParent(this.slotList_Parent);var o=e.getComponent(u.pzaBeltSlotItem);o.init(this,t),this.slotMap.set(t,o)}s.pzaBeltEquipConfig.getConfig().forEach(function(t,e){var o=cc.instantiate(a.equipItemPre);o.setParent(a.equipList_Parent);var n=o.getComponent(c.pzaBeltEquipItem);n.init(a,t.id,t.name,t.getTips,t.desc),a.equipMap.set(e,n)}),this.equipListSort()},t.prototype.equipListSort=function(){var a,t;try{for(var e=r(this.equipMap),o=e.next();!o.done;o=e.next()){var n=p(o.value,2),i=(n[0],n[1]);i.getCurState()==s.pzaBeltEquipState.waiting?i.node.zIndex=0:i.getCurState()==s.pzaBeltEquipState.not_equiped?i.node.zIndex=1:i.getCurState()==s.pzaBeltEquipState.lock?i.node.zIndex=2:i.node.zIndex=3}}catch(l){a={error:l}}finally{try{o&&!o.done&&(t=e.return)&&t.call(e)}finally{if(a)throw a.error}}},t.prototype.installEquip=function(a){var t,e;try{for(var o=r(this.slotMap),n=o.next();!n.done;n=o.next()){var i=p(n.value,2);if(i[0],i[1].isAbleInstall(a.id))return this.equipListSort(),!0}}catch(l){t={error:l}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return this.equipListSort(),!1},t.prototype.removeEquip=function(a){this.equipMap.get(a).unEquipped(),this.equipListSort()},t.prototype.clickOverViewBtn=function(){cc.instantiate(this.overViewPre).setParent(this.node)},t.prototype.clickCloseBtn=function(){this.close()},i([m({type:cc.Prefab})],t.prototype,"equipItemPre",void 0),i([m({type:cc.Prefab})],t.prototype,"slotItemPre",void 0),i([m({type:cc.Prefab})],t.prototype,"overViewPre",void 0),i([m({type:cc.Node})],t.prototype,"slotList_Parent",void 0),i([m({type:cc.Node})],t.prototype,"equipList_Parent",void 0),i([h],t)}(l.pzaBaseComponent);e.pzaBeltEquipView=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","./pzaBeltEquipItem":"pzaBeltEquipItem","./pzaBeltSlotItem":"pzaBeltSlotItem"}],pzaBeltOverView:[function(a,t,e){"use strict";cc._RF.push(t,"03c3euE4/pMIbliQ6UPOp4+","pzaBeltOverView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBeltOverView=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaBeltEquipConfig"),l=a("../../Common/pzaLocalData"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.content=null,t.ovItemPre=null,t}return n(t,a),t.prototype.onEnable=function(){this.init()},t.prototype.init=function(){var a=this;l.pzaLocalData.data.beltEquipData.slotList.forEach(function(t){a.setItem(t)})},t.prototype.setItem=function(a){if(a!=p.pzaBeltEquipEnum.null){var t=cc.instantiate(this.ovItemPre);t.setParent(this.content);var e=p.pzaBeltEquipConfig.getConfig().get(a),o=t.getChildByName("name").getComponent(cc.Label),n=t.getChildByName("desc").getComponent(cc.Label);o.string=e.name,n.string=e.desc}},t.prototype.clickCloseBtn=function(){this.close()},i([u({type:cc.Node})],t.prototype,"content",void 0),i([u(cc.Node)],t.prototype,"ovItemPre",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaBeltOverView=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../../Common/pzaLocalData":"pzaLocalData"}],pzaBeltSlotItem:[function(a,t,e){"use strict";cc._RF.push(t,"b0210tmhi9Jm7nSxVX7kHiS","pzaBeltSlotItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBeltSlotItem=void 0;var r=a("../../Common/pzaBeltEquipConfig"),p=a("../../Common/pzaLocalData"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.iconSP=null,t.nameLB=null,t.descLB=null,t.removeBtn=null,t.lock=null,t.slotIndex=null,t.curEquipID=r.pzaBeltEquipEnum.null,t.view=null,t}return n(t,a),t.prototype.init=function(a,t){this.view=a,this.slotIndex=t,null==p.pzaLocalData.data.beltEquipData.slotList[this.slotIndex]&&(p.pzaLocalData.data.beltEquipData.slotList[this.slotIndex]=r.pzaBeltEquipEnum.null),this.curEquipID=p.pzaLocalData.data.beltEquipData.slotList[this.slotIndex],this.setView()},t.prototype.isAbleInstall=function(a){return this.curEquipID==r.pzaBeltEquipEnum.null&&(this.setNewEquip(a),!0)},t.prototype.setNewEquip=function(a){this.curEquipID=a,p.pzaLocalData.data.beltEquipData.slotList[this.slotIndex]=a,p.pzaLocalData.addDirty("slotList"),console.log("slotList :",p.pzaLocalData.data.beltEquipData.slotList),this.setView()},t.prototype.setView=function(){if(this.nameLB.node.active=!1,this.descLB.node.active=!1,this.removeBtn.active=!1,this.lock.active=!1,this.curEquipID!=r.pzaBeltEquipEnum.null){var a=r.pzaBeltEquipConfig.getConfig().get(this.curEquipID);this.nameLB.node.active=!0,this.nameLB.string=a.name,this.descLB.node.active=!0,this.descLB.string=a.desc,this.removeBtn.active=!0}else this.lock.active=!1},t.prototype.clickRemoveBtn=function(){this.view.removeEquip(this.curEquipID),this.curEquipID=r.pzaBeltEquipEnum.null,p.pzaLocalData.data.beltEquipData.slotList[this.slotIndex]=r.pzaBeltEquipEnum.null,p.pzaLocalData.addDirty("slotList"),this.setView()},i([c(cc.Sprite)],t.prototype,"iconSP",void 0),i([c(cc.Label)],t.prototype,"nameLB",void 0),i([c(cc.Label)],t.prototype,"descLB",void 0),i([c(cc.Node)],t.prototype,"removeBtn",void 0),i([c(cc.Node)],t.prototype,"lock",void 0),i([s],t)}(cc.Component);e.pzaBeltSlotItem=u,cc._RF.pop()},{"../../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../../Common/pzaLocalData":"pzaLocalData"}],pzaBlover:[function(a,t,e){"use strict";cc._RF.push(t,"220957hlOBIzLEXNVfa0prp","pzaBlover");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBlover=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lifeTime=0,t.trigger=!1,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.lifeTime=0,this.trigger=!1,r.pzaSoundManager.playAudio("Blover"),this.animation.playAnimation("attack1",!1,function(){e.animation.playAnimation("attack2",!1,function(){window.pzaplantManager.removePlant(e.baseData),e.death()})}),l.pzaGameState.onlyShroomCofee=!1,l.pzaGameState.usePlanternBlover=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.trigger||(this.lifeTime+=t,this.lifeTime>=.5&&this.attack())},t.prototype.hurt=function(t,e,o){this.trigger||this.attack(),a.prototype.hurt.call(this,t,e,o)},t.prototype.attack=function(){this.trigger=!0,window.pzaMapManager.blowFog(),p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.BLOW_WIND,null)},i([u],t)}(s.pzaBasePlant));e.pzaBlover=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaBoomFireEffect:[function(a,t,e){"use strict";cc._RF.push(t,"c78e8ZsdD9NwaSx7lFo8EFm","pzaBoomFireEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBoomFireEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine=null,t.poolPrefab=null,t.delayTime=0,t.endCall=null,t.disappering=!1,t.ani1="fire1",t.ani2="fire2",t}return n(t,a),t.prototype.showEffect=function(a,t,e){var o=this;this.delayTime=a,this.endCall=t,e?(this.ani1="fire3",this.ani2="fire4"):(this.ani1="fire1",this.ani2="fire2"),a<=0?(this.spine.node.scale=.4,this.disappering=!0,this.spine.playAnimation(this.ani2,!1,function(){o.close(),o.endCall&&o.endCall()})):(this.spine.node.scale=1,this.disappering=!1,this.spine.playAnimation(this.ani1,!0))},t.prototype.logicUpdate=function(a){var t=this;this.disappering||(this.delayTime-=a,this.delayTime<=0&&(this.disappering=!0,this.spine.playAnimation(this.ani2,!1,function(){t.close(),t.endCall&&t.endCall()})))},t.prototype.pauseSelf=function(){this.spine.pauseAnimation()},t.prototype.resumeSelf=function(){this.spine.resumeAnimation()},t.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"spine\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"spine",void 0),i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaBoomFireEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController"}],pzaBoomNut:[function(a,t,e){"use strict";cc._RF.push(t,"d4bd0hwIfBFnrY9MO37nsbS","pzaBoomNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBoomNut=void 0;var r=a("../../Common/pzaUtil"),p=a("../../Load/pzaPreLoadManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=8,t.originState="hurt1",t.nutStateMap=new Map([["hurt1",["idle2","idle3_body1"]],["hurt2",["idle2","idle4_body2"]],["hurt3",["idle2"]],["hurt4",["blow_body4"]]]),t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=s.pzaPlantCate.Nut,this.originState="hurt1",this.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var o=function(){if(e.blinkTime>0)e.animation.playAnimation("hurt4"==e.originState?"blow_body4":"idle1",!1,o);else{e.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var a=e.nutStateMap.get(e.originState),t=r.pzaUtil.getRandomValueFromArray(a);e.animation.playAnimation(t,!1,o)}};this.animation.playAnimation("idle1",!1,o),u.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.originState="hurt4",this.animation.setAnimationSkin("body_4")},t.prototype.plantHurt2=function(){a.prototype.plantHurt2.call(this),this.originState="hurt3",this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.originState="hurt2",this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.originState="hurt1",this.animation.setAnimationSkin("body_1")},t.prototype.death=function(t,e){this.attack(),a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.attack(),a.prototype.death.call(this)},t.prototype.attack=function(){var a=this;c.pzaEffectManager.createFrameEffect(p.pzaResourceUrl.CHERRY_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),null),window.pzaMapManager.shakeMap();var t=1.5*u.pzaGameState.map.getBlockWidth(),e=null;null==(e=8==this.baseData.xIndex?window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,t):window.pzazombieManager.findZombiesByXY(this.baseData.xIndex,this.baseData.yIndex))&&(e=[]),this.baseData.xIndex>=7&&null!=window.pzazombieManager.drZomBoss&&e.push(window.pzazombieManager.drZomBoss),e.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||(t&&t.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.BOOM),t.baseData.isDead)}),window.pzaMapManager.LadderMap.forEach(function(e,o){r.pzaUtil.getDistance(a.baseData.logicPos,e.logicPos)>t||(e.close(),window.pzaMapManager.LadderMap.delete(o))})},i([f],t)}(h.pzaBasePlant));e.pzaBoomNut=z,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaBowlingBody:[function(a,t,e){"use strict";cc._RF.push(t,"c203by+yGpE+aE56seGo1fX","pzaBowlingBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBowlingBody=void 0;var r=a("../../Common/pzaCollisionManager"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.circleBody=null,t.baseData=null,t.onCollisionCall=null,t.onCollisionExitCall=null,t}return n(t,a),t.prototype.onEnable=function(){null!=this.circleBody&&(this.circleBody.enabled=!1)},t.prototype.onDisable=function(){r.pzaCollisionManager.getInstance.delBulletOther(this)},t.prototype.bindData=function(a,t,e){this.baseData=a,this.onCollisionCall=t,this.onCollisionExitCall=e,null!=this.circleBody&&(this.circleBody.enabled=!0,r.pzaCollisionManager.getInstance.addBulletOther(this))},t.prototype.onCollisionEnter=function(a,t){this.onCollisionCall&&this.onCollisionCall(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollisionCall&&this.onCollisionCall(a,t)},t.prototype.getCollider=function(){var a=this;return this.node&&this.node.isValid?(this.circleBody.poSource=function(){return{x:a.node.parent.parent.x,y:a.node.parent.parent.y+60}},this.circleBody):null},t.prototype.onCollisionExit=function(a,t){this.onCollisionExitCall&&this.onCollisionExitCall(a,t)},i([s({displayName:"\u8eab\u4f53\u78b0\u649e\u76d2",type:cc.CircleCollider})],t.prototype,"circleBody",void 0),i([l],t)}(cc.Component);e.pzaBowlingBody=c,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager"}],pzaBowlingNut:[function(a,t,e){"use strict";cc._RF.push(t,"7d18elgHKdBmKcYojTvpfSZ","pzaBowlingNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBowlingNut=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaBaseComponent"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaSpineController"),d=a("../../Load/pzaPreLoadManager"),h=a("../Data/pzaBuffData"),m=a("../Data/pzaZombieEnum"),f=a("../Zombie/pzaZombieBody"),z=a("../pzaEffectManager"),y=a("../pzaGameState"),g=a("./pzaAttackType"),b=a("./pzaBowlingBody"),v=cc._decorator,P=v.ccclass,D=v.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.colliderBody=null,t.rotateNode=null,t.isBoom=!1,t.bodyBindData=!1,t.rotateSpeed=360,t.speedX=250,t.yDirection=0,t.colliderInterval=0,t.killCount=0,t.animation=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.rotateNode.angle=0,this.yDirection=0,this.bodyBindData=!1,this.colliderInterval=0,this.killCount=0,this.baseData.plantData.isChangeLine=!1;var e=10*-this.baseData.yIndex+6;this.node.zIndex=e,c.pzaSoundManager.playAudio("plantplant"),c.pzaSoundManager.playAudio("throwBowling")},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.animation.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.animation.resumeAnimation()},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.logicPos){this.colliderInterval-=a,this.baseData.logicPos.x+=this.speedX*a,this.baseData.logicPos.y+=this.speedX*a*this.yDirection;var t=y.pzaGameState.map.getMapYIndex(this.baseData.logicPos),e=y.pzaGameState.map.getMapXIndex(this.baseData.logicPos);if(this.baseData.yIndex!=t){this.baseData.yIndex=t;var o=10*-this.baseData.yIndex+5+this.yDirection;this.node.zIndex=o,this.baseData.plantData.isChangeLine=!0}this.baseData.xIndex!=e&&(this.baseData.xIndex=e),this.baseData.logicPos.x>=640&&this.close()}},t.prototype.logicLateUpdate=function(t){a.prototype.logicLateUpdate.call(this,t),this.bodyBindData||null==this.colliderBody||(this.bodyBindData=!0,this.colliderBody.bindData(this.baseData,this.onCollision.bind(this),this.onCollisionExit.bind(this))),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(this.baseData.logicPos)},t.prototype.onCollision=function(a){var t=this;if(a.node.group!=s.pzaGroupEnum.WALL){if(a.node.group==s.pzaGroupEnum.ZOMBIE){if(this.colliderInterval>0)return;var e=a.node.getComponent(f.pzaZombieBody);if(null==e||null==e.baseData)return;if(this.baseData.yIndex!=e.baseData.yIndex)return;if(e.baseData.buffData.hasBuff(h.pzaBuffType.UNABLE_SELECT))return;if(this.isBoom||c.pzaSoundManager.playAudio("bowlingHitNormal"),this.isBoom){c.pzaSoundManager.playAudio("bowlingHit"),c.pzaSoundManager.playAudio("cherrybomb"),z.pzaEffectManager.createFrameEffect(d.pzaResourceUrl.NUT_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),null);var o=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,1.5*y.pzaGameState.map.getBlockWidth());if(null==o)return;return o.forEach(function(a){a&&a.hurt(1800,t.baseData,g.pzaAttackType.BOOM)}),6==y.pzaGameState.curChapter&&5==y.pzaGameState.curPart&&window.pzaplantManager.plantMap.delete(this.baseData),void this.close()}0==e.baseData.yIndex?this.yDirection=1:4==e.baseData.yIndex?this.yDirection=-1:0==this.yDirection?this.yDirection=Math.random()>.5?1:-1:this.yDirection=-this.yDirection;var n=window.pzazombieManager.getZombie(e.baseData);e.baseData.zombieData.zombieType==m.pzaZombieEnum.SCREEN_DOOR_ZOMBIE&&this.baseData.plantData.isChangeLine?n&&n.hurt(1e4,null,g.pzaAttackType.TALL_BOWLING):n&&n.hurt(1800,null,g.pzaAttackType.BOWLING),e.baseData.isDead&&(this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_6,this.killCount)),this.colliderInterval=.5;var i=10*-(this.baseData.yIndex+this.yDirection)+5+this.yDirection;this.node.zIndex=i}}else this.yDirection=a.tag-2},t.prototype.onCollisionExit=function(){},i([D({displayName:"\u78b0\u649e\u8eab\u4f53",type:b.pzaBowlingBody})],t.prototype,"colliderBody",void 0),i([D({displayName:"\u65cb\u8f6c\u8282\u70b9",type:cc.Node})],t.prototype,"rotateNode",void 0),i([D({displayName:"\u7206\u70b8\u575a\u679c"})],t.prototype,"isBoom",void 0),i([D({type:u.pzaSpineController})],t.prototype,"animation",void 0),i([P],t)}(l.pzaBaseComponent);e.pzaBowlingNut=S,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBowlingBody":"pzaBowlingBody"}],pzaBowlingWallBody:[function(a,t,e){"use strict";cc._RF.push(t,"75e08Ld5bJOToQucGoQZGx8","pzaBowlingWallBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBowlingBodyWall=void 0;var r=a("../../Common/pzaCollisionManager"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.collider=null,t}return n(t,a),t.prototype.onDisable=function(){r.pzaCollisionManager.getInstance.delZombieOther(this)},t.prototype.onCollisionEnter=function(){},t.prototype.getCollider=function(){return this.node&&this.node.isValid?(this.collider.poSource=this.node,this.collider):null},i([s(cc.BoxCollider)],t.prototype,"collider",void 0),i([l],t)}(cc.Component);e.pzaBowlingBodyWall=c,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager"}],pzaBrain:[function(a,t,e){"use strict";cc._RF.push(t,"c6d3100LY1IzLjVhS/o4FIJ","pzaBrain");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBrain=void 0;var r=a("../Common/pzaBaseComponent"),p=a("../Common/pzaCollisionManager"),l=a("../Common/pzaGameManager"),s=a("../Common/pzaSoundManager"),c=a("../Common/pzaWorldEventManager"),u=a("./Data/pzaDropType"),d=a("./Plant/pzaAttackType"),h=a("./pzaBaseBody"),m=a("./pzaEffectManager"),f=a("./pzaGameState"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.brain=null,t.body=null,t.blinkTime=0,t.blinkTween=null,t.collider=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.body.bindData(this.baseData),this.node.stopAllActions(),this.node.scale=1,this.blinkTime=0;var e=f.pzaGameState.map.getMapOriPos();if(null!=e){var o=cc.v2(e.x-26,e.y+f.pzaGameState.map.getYPos(t.yIndex)+55);this.node.setPosition(o);var n=10*-t.yIndex+1;this.node.zIndex=n,p.pzaCollisionManager.getInstance.addBrain(t.yIndex,this)}},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.logicUpdate=function(a){this.blinkTime>0&&(this.blinkTime-=a,this.blinkTime<=0&&this.blink(!0))},t.prototype.blink=function(a){var t=this;if(a)this.blinkTween&&this.blinkTween.stop(),this.brain.node.color=cc.Color.WHITE;else{if(this.blinkTime=5,null==this.blinkTween){var e=function(a,e,o,n){var i=a+(e-a)*n,r=new cc.Color(i,i,i);return t.brain&&t.brain.node?(t.brain.node.color=r,i):(t.blinkTween.stop(),i)};this.blinkTween=cc.tween({c:255}).repeatForever(cc.tween().to(.5,{c:40},{progress:e}).to(.5,{c:255},{progress:e}))}this.blinkTween.start()}},t.prototype.hurt=function(a,t,e){if(void 0===e&&(e=null),!(this.baseData.hp<=0)&&this.baseData){if(e==d.pzaAttackType.ROLLING||e==d.pzaAttackType.BOOM||e==d.pzaAttackType.BANG)return this.baseData.hp=0,this.baseData.isDead=!0,window.pzaplantManager.brainMap.delete(this.baseData),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.UPDATE_PART_PRO,null),this.death(),void(e==d.pzaAttackType.BOOM?this.close():this.flaserDeath());this.baseData.hp-=a,this.baseData.hp<=0&&(this.baseData.isDead=!0,window.pzaplantManager.brainMap.delete(this.baseData),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.UPDATE_PART_PRO,null),this.close(),this.death())}},t.prototype.flaserDeath=function(){var a=this;s.pzaSoundManager.playAudio("chomp_plant1"),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},t.prototype.close=function(){this.blinkTween&&this.blinkTween.stop(),a.prototype.close.call(this)},t.prototype.death=function(){Math.random()<=.1?m.pzaEffectManager.createDropCoin(u.pzaDropType.GOLD_COIN,cc.v2(this.node.x,this.node.y)):m.pzaEffectManager.createDropCoin(u.pzaDropType.SILVER_COIN,cc.v2(this.node.x,this.node.y)),window.pzaplantManager.brainMap.size<=0&&l.pzaGameManager.passPart(cc.v2(0,-300))},i([g({displayName:"\u5927\u8111\u56fe",type:cc.Sprite})],t.prototype,"brain",void 0),i([g({displayName:"\u8eab\u4f53\u78b0\u649e",type:h.pzaBaseBody})],t.prototype,"body",void 0),i([y],t)}(r.pzaBaseComponent);e.pzaBrain=b,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaCollisionManager":"pzaCollisionManager","../Common/pzaGameManager":"pzaGameManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","./Data/pzaDropType":"pzaDropType","./Plant/pzaAttackType":"pzaAttackType","./pzaBaseBody":"pzaBaseBody","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState"}],pzaBubbleItem:[function(a,t,e){"use strict";cc._RF.push(t,"09a73NlOl5G9445DaD59hJJ","pzaBubbleItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBubbleItem=e.pzaBubbleType=void 0;var r,p=a("../Common/pzaBaseComponent"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaGamePropConfig"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaOperationMgr"),d=a("../Common/pzaRewardManager"),h=a("../Common/pzaWorldEventManager"),m=cc._decorator,f=m.ccclass,z=m.property;(function(a){a[a.speed=4]="speed",a[a.cherry=1]="cherry",a[a.sun=2]="sun",a[a.share=3]="share"})(r=e.pzaBubbleType||(e.pzaBubbleType={}));var y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.rewardNode=null,t.tipsNode=null,t.arrowNode=null,t.rewardText=null,t.tipsText=null,t.guideCircle=null,t.guideHand=null,t.closeTimer=null,t.hideTime=5e3,t.propType=s.pzaGamePropEnum.PROP_COIN,t.value=500,t.type=null,t.tipTxtHideTime=99,t}return n(t,a),t.prototype.onEnable=function(){window.pzabaseCmpManager.addBaseCmp(this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.BACK_HOME,this.close,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.GAME_OVER,this.close,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,this.setCloseTime,this),this.guideHand.active=!1},t.prototype.onDisable=function(){window.pzabaseCmpManager.deleteBaseCmp(this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.BACK_HOME,this.close,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.GAME_OVER,this.close,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,this.setCloseTime,this),this.close()},t.prototype.pauseSelf=function(){this.guideHand.pauseAllActions()},t.prototype.resumeSelf=function(){this.guideHand.resumeAllActions()},t.prototype.showReward=function(){this.type=r.share,this.rewardNode.active=!0,this.propType=s.pzaGamePropEnum.PROP_COIN,this.value=500,this.rewardText.string="+"+this.value},t.prototype.showFingerAni=function(){var a=this;this.guideHand.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(110,35)),cc.moveTo(.3,cc.v2(90,-10)),cc.callFunc(function(){a.guideCircle.active=!0,a.guideCircle.stopAllActions(),a.guideCircle.runAction(cc.sequence(cc.callFunc(function(){a.guideCircle.opacity=255,a.guideCircle.scale=.5}),cc.spawn(cc.scaleTo(.3,1.5),cc.sequence(cc.delayTime(.15),cc.fadeOut(.35)))))}),cc.delayTime(.1),cc.moveTo(.3,cc.v2(105,0)),cc.callFunc(function(){a.guideCircle.stopAllActions(),a.guideCircle.runAction(cc.sequence(cc.callFunc(function(){a.guideCircle.opacity=255,a.guideCircle.scale=.5}),cc.spawn(cc.scaleTo(.3,1.5),cc.sequence(cc.delayTime(.15),cc.fadeOut(.35)))))}),cc.delayTime(1))))},t.prototype.showTips=function(){this.guideCircle.active=!0,this.guideHand.active=!0,this.tipsNode.active=!0,this.showFingerAni()},t.prototype.setCloseTime=function(a){var t=a.type,e=a.setTime,o=void 0===e?5e3:e;t&&t==this.type&&(this.hideTime=o)},t.prototype.getReward=function(){var a=new s.pzaRewardPropData(this.propType,this.value);d.pzaRewardManager.recieveRewards([a]),c.pzaLocalData.data.everyDayShareRwdCurrent++,c.pzaLocalData.addDirty("everyDayShareRwdCurrent"),this.close()},t.prototype.setTipText=function(a){this.tipsText.string=a},t.prototype.close=function(){u.pzaOperationMgr.BubbleNode=null,l.pzaGameCommonPool.returnInstant(this.node)},t.prototype.logicUpdate=function(a){this&&this.type!=r.share&&this.node&&(this.hideTime-=a/cc.gameSpeed,this.hideTime<=0&&this.close(),this.tipTxtHideTime-=a/cc.gameSpeed,this.tipTxtHideTime<=0&&(this.tipsText.node.parent.active=!1))},i([z(cc.Node)],t.prototype,"rewardNode",void 0),i([z(cc.Node)],t.prototype,"tipsNode",void 0),i([z(cc.Node)],t.prototype,"arrowNode",void 0),i([z({displayName:"\u5956\u52b1\u6587\u672c",type:cc.Label})],t.prototype,"rewardText",void 0),i([z({displayName:"\u63d0\u793a\u6587\u672c",type:cc.Label})],t.prototype,"tipsText",void 0),i([z({displayName:"\u6559\u7a0b\u5706\u5708",type:cc.Node})],t.prototype,"guideCircle",void 0),i([z({displayName:"\u6559\u7a0b\u624b\u6307",type:cc.Node})],t.prototype,"guideHand",void 0),i([f],t)}(p.pzaBaseComponent);e.pzaBubbleItem=y,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaBucketHeadZombie:[function(a,t,e){"use strict";cc._RF.push(t,"8b2c291wzNAyKkk9KnBsDCS","pzaBucketHeadZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBucketHeadZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("./pzaNormalZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=s.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,67.87,-1.82,-90.94))],[s.pzaZombieSlotType.hat,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.hat).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.hat_iron+"1",58.26,-31.36,-90.67)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.hat_iron+"2",58.26,-31.36,-90.67)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.hat_iron+"3",52.96,-14.3,-90.67))]])},t.prototype.zombieHurtSound=function(t){if(this.hasEquip){var e="shieldhit"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(e)}else a.prototype.zombieHurtSound.call(this,t)},i([u],t)}(l.pzaNormalZombie));e.pzaBucketHeadZombie=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaBuffData:[function(a,t,e){"use strict";var o;cc._RF.push(t,"7aee3sm3VRPvZxOhsmVvDxI","pzaBuffData"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBuffInfo=e.pzaBuffData=e.pzaBuffType=void 0,function(a){a[a.FROST=1]="FROST",a[a.FROZEN=2]="FROZEN",a[a.DIVE=3]="DIVE",a[a.IMM_ICE=4]="IMM_ICE",a[a.IMM_SPATTER=5]="IMM_SPATTER",a[a.HARD_BODY=6]="HARD_BODY",a[a.FLY=7]="FLY",a[a.DIZZ=8]="DIZZ",a[a.UNABLE_SELECT=9]="UNABLE_SELECT",a[a.IMMOBILIZE=10]="IMMOBILIZE",a[a.GARLIC=11]="GARLIC",a[a.SPEED_UP=12]="SPEED_UP",a[a.IMM_CONTROL=13]="IMM_CONTROL",a[a.RICOCHET=14]="RICOCHET",a[a.IMM_HYPNOSIS=15]="IMM_HYPNOSIS",a[a.INVINCIBLE=16]="INVINCIBLE",a[a.IMM_IMMOBILIZE=17]="IMM_IMMOBILIZE",a[a.FLASER=18]="FLASER",a[a.IMM_ICE_PEA=19]="IMM_ICE_PEA",a[a.FIRE=20]="FIRE",a[a.IMM_GARLIC=21]="IMM_GARLIC"}(o=e.pzaBuffType||(e.pzaBuffType={}));var n=function(){function a(){this.buffs=new Map}return a.prototype.refreshBuff=function(a){var t=this;this.buffs.forEach(function(e,o){e?null!=e.buffTime&&-1!=e.buffTime&&(e.buffTime-=a,e.buffTime<=0&&t.buffs.delete(o)):t.buffs.delete(o)})},a.prototype.addBuff=function(a,t,e,n){if(null!=a&&null!=a.buffType&&(!this.hasBuff(o.IMM_ICE)||a.buffType!=o.FROST&&a.buffType!=o.FROZEN)){var i=this.buffs.get(a.buffType);null!=i&&(t||n||e)?(t?i.addTime(a.buffTime):i.buffTime=a.buffTime,e?i.addValue(a.buffValue):i.buffValue=a.buffValue,n?i.addChane(a.buffChance):i.buffChance=a.buffChance,i.buffExcuted=!1):this.buffs.set(a.buffType,a)}},a.prototype.removeBuff=function(a){null!=a&&this.buffs.delete(a)},a.prototype.reduceBuffValue=function(a,t){if(null!=a){var e=this.buffs.get(a);if(null!=e){var o=e.buffValue;null!=o&&(0==(o-=t)?this.removeBuff(a):(e.buffValue=o,this.buffs.set(a,e)))}}},a.prototype.releaseBuff=function(a){if(null==a)return null;var t=this.buffs.get(a);return null==t?null:null!=t.buffChance?Math.random()<=t.buffChance?t:null:t},a.prototype.hasBuff=function(a){return null!=a&&null!=this.buffs.get(a)},a.prototype.getBuffChance=function(a){if(null==a)return 0;var t=this.buffs.get(a);return null==t?0:t.buffChance},a.prototype.getAllForever=function(){if(this.buffs.size<=0)return[];var a=[];return this.buffs.forEach(function(t){-1==t.buffTime&&a.push(t)}),a},a.prototype.getAllBuffs=function(){return Array.from(this.buffs.values())},a.prototype.clone=function(){var t=new a;return null!=this.buffs&&this.buffs.size>0&&this.buffs.forEach(function(a){var e=a.clone();t.addBuff(e)}),t},a.prototype.clear=function(){this.buffs.clear()},a}();e.pzaBuffData=n;var i=function(){function a(a,t,e,o,n,i){this.buffType=null,this.buffTime=null,this.buffValue=null,this.buffChance=null,this.intervalTimer=0,this.buffInterval=null,this.buffMessage=null,this.buffExcuted=!1,this.buffType=a,this.buffTime=t,this.buffValue=e,this.buffChance=o,this.buffInterval=n,this.buffMessage=i,this.buffExcuted=!1}return a.prototype.clone=function(){return new a(this.buffType,this.buffTime,this.buffValue,this.buffChance)},a.prototype.addTime=function(a){null!=a&&(null!=this.buffTime?-1!=this.buffTime&&-1!=a?this.buffTime+=a:this.buffTime=-1:this.buffTime=a)},a.prototype.addChane=function(a){null!=a&&(null!=this.buffChance?this.buffChance+=a:this.buffChance=a)},a.prototype.addValue=function(a){null!=a&&(null!=this.buffValue?this.buffValue+=a:this.buffValue=a)},a}();e.pzaBuffInfo=i,cc._RF.pop()},{}],pzaBulletPool:[function(a,t,e){"use strict";cc._RF.push(t,"08129opfb5H1Z0jUbb2VvxA","pzaBulletPool"),Object.defineProperty(e,"__esModule",{value:!0});var o=a("./pzakc"),n=function(){function a(){this.unuseMap=new Map,this.inuseMap=new Map,this.outPosX=2*o.default.view_x+100*o.default.randomInt(0,20),this.outPosY=-5e3,this.outPosDist=100}return a.prototype.put=function(a){return a.opacity=0,a.x=this.outPosX,this.outPosY+=this.outPosDist,a.y=this.outPosY,this.unuseMap.set(a.uuid,a),this},a.prototype.back=function(a){return a.opacity=0,this.outPosY+=this.outPosDist,this.outPosY>5e3&&(this.outPosY=-5e3),this.inuseMap.delete(a.uuid),this.unuseMap.set(a.uuid,a),this},a.prototype.del=function(a){this.inuseMap.delete(a.uuid),this.unuseMap.delete(a.uuid)},a.prototype.get=function(){var a=this.unuseMap.keys().next();if(a.done)return null;var t=this.unuseMap.get(a.value);return this.unuseMap.delete(a.value),this.inuseMap.set(a.value,t),t},a.prototype.destroy=function(){this.unuseMap.forEach(function(a){a.destroy()}),this.inuseMap.forEach(function(a){a.destroy()}),this.unuseMap.clear(),this.inuseMap.clear()},a}();e.default=n,cc._RF.pop()},{"./pzakc":"pzakc"}],pzaBundleObjectPool:[function(a,t,e){"use strict";cc._RF.push(t,"35ecbUbHqVFoJLa6dyXuLAh","pzaBundleObjectPool");var o=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBundleObjectPool=void 0;var n=a("../../start/pzaBundleController"),i=a("../Common/pzaGameCommonPool"),r=a("./pzaPreLoadManager"),p=function(){function a(){}return a.preLoadSubResource=function(a,t,e){var o=this;if(void 0===e&&(e=null),null==a||a.length<=0)t&&t(!0);else{var n=a.length,i=0;a.forEach(function(a){o.preLoadResource(a,null,function(){i++,e&&e(i/n),i>=n&&t&&t(!0)})})}},a.preLoadResource=function(a,t,e){switch(a.resourceType){case r.pzaResourceType.Prefab:this.preLoadPrefab(a,t,e);break;case r.pzaResourceType.PrefabDir:this.preLoadPrefabDir(a,t,e);break;case r.pzaResourceType.SpriteFrameDir:this.preLoadSpriteFrameDir(a,t,e);break;case r.pzaResourceType.Scene:this.preLoadScene(a,t,e);break;default:e&&e(!0)}},a.preLoadPrefab=function(a,t,e){var o=this;i.pzaGameCommonPool.urlToPrefab.has(a.url)?e&&e(!0):n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(n){null!=n?n.load(a.url,cc.Prefab,function(a,e){t&&t(a,e)},function(n,r){if(null!=n||null==r)return console.error("preLoadPrefab error===>",n),void o.preLoadPrefab(a,t,e);i.pzaGameCommonPool.addUrlToPrefab(a.url,r),e&&e(!0)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})},a.preLoadPrefabDir=function(a,t,e){var r=this;this.LoadedResource.has(a)?e&&e(!0):n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(n){null!=n?n.loadDir(a.url,cc.Prefab,function(a,e){t&&t(a,e)},function(n,p){var l,s;if(null!=n||null==p)return console.error("preLoadPrefabDir error===>",n),void r.preLoadPrefabDir(a,t,e);try{for(var c=o(p),u=c.next();!u.done;u=c.next()){var d=u.value,h=a.url+"/"+(d.data&&d.data._name);i.pzaGameCommonPool.urlToPrefab.has(h)||i.pzaGameCommonPool.addUrlToPrefab(h,d)}}catch(m){l={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(l)throw l.error}}r.LoadedResource.add(a),e&&e(!0)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})},a.preLoadSpriteFrameDir=function(a,t,e){var o=this;this.LoadedResource.has(a)?e&&e(!0):n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(n){null!=n?n.loadDir(a.url,cc.SpriteFrame,function(a,e){t&&t(a,e)},function(n,r){if(null!=n||null==r)return console.error("preLoadSpriteFrameDir error===>",n),void o.preLoadSpriteFrameDir(a,t,e);r.forEach(function(t){i.pzaGameCommonPool.urlToSpriteFame.set(a.url+"/"+t.name,t)}),o.LoadedResource.add(a),e&&e(!0)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})},a.preLoadScene=function(a,t,e){var o=this;cc.director.preloadScene(a.url,function(a,e){t&&t(a,e)},function(n){null!=n&&(console.error("preLoadScene error===>",n),o.preLoadScene(a,t,e)),e&&e(!0)})},a.requestInstantByUrl2=function(a,t){if(a){var e=i.pzaGameCommonPool.urlToPrefab.get(a);if(e){var o=i.pzaGameCommonPool.requestInstant2(e);t&&t(null,o)}else n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(e){null!=e?e.load(a,cc.Prefab,function(e,o){if(e)return console.error("\u52a0\u8f7dPrefab\u5f02\u5e38",a),void t(e);i.pzaGameCommonPool.addUrlToPrefab(a,o);var n=i.pzaGameCommonPool.requestInstant2(o);t&&t(e,n)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})}else t&&t("null url")},a.requestInstantByUrl=function(a,t,e){var o=this;if(a){var r=i.pzaGameCommonPool.urlToPrefab.get(a);if(r){var p=i.pzaGameCommonPool.requestInstant(r,t);e&&e(null,p)}else n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(n){null!=n?n.load(a,cc.Prefab,function(n,r){if(n)return console.error(n),void o.requestInstantByUrl(a,t,e);i.pzaGameCommonPool.addUrlToPrefab(a,r);var p=i.pzaGameCommonPool.requestInstant(r,t);e&&e(n,p)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})}else e&&e("null url")},a.requestSpriteFrameByUrl=function(a,t){if(null!=a)if(i.pzaGameCommonPool.urlToSpriteFame.has(a)){var e=i.pzaGameCommonPool.urlToSpriteFame.get(a);t&&t(null,e)}else n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(e){null!=e?e.load(a,cc.SpriteFrame,function(e,o){null==e&&null!=o&&i.pzaGameCommonPool.urlToSpriteFame.set(a,o),t&&t(e,o)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")});else t&&t("null url")},a.requestSpriteFrameByAtlas=function(a,t,e){if(null!=a&&null!=t){var o=a+"/"+t;if(i.pzaGameCommonPool.urlToSpriteFame.has(o)){var r=i.pzaGameCommonPool.urlToSpriteFame.get(o);e&&e(null,r)}else n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(t){null!=t?t.loadDir(a,cc.SpriteAtlas,null,function(t,n){if(t)console.error(t);else{for(var r=0;r<n.length;r++)for(var p=n[r].getSpriteFrames(),l=0;l<p.length;l++){var s=p[l],c=a+"/"+s.name;i.pzaGameCommonPool.urlToSpriteFame.set(c,s)}var u=i.pzaGameCommonPool.urlToSpriteFame.get(o);e&&e(null,u)}}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})}else e&&e("null url")},a.LoadedResource=new Set,a}();e.pzaBundleObjectPool=p,cc._RF.pop()},{"../../start/pzaBundleController":void 0,"../Common/pzaGameCommonPool":"pzaGameCommonPool","./pzaPreLoadManager":"pzaPreLoadManager"}],pzaBungeeTarget:[function(a,t,e){"use strict";cc._RF.push(t,"8242bUT/KJOJoQL6XKXRfTg","pzaBungeeTarget");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBungeeTarget=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(a,t){void 0===t&&(t=!1),this.baseData=a;var e=10*-this.baseData.yIndex+6;this.node.zIndex=e,this.node.stopAllActions();var o=cc.v2(a.logicPos.x,400-a.logicPos.y),n=a.logicPos.y-40;this.node.setPosition(o),this.node.runAction(cc.sequence(cc.moveTo((400-a.logicPos.y)/720,cc.v2(a.logicPos.x,n)),cc.callFunc(function(){t&&p.pzaSoundManager.playAudio("bungeetarget")})))},t.prototype.logicUpdate=function(){(null==this.baseData||this.baseData.isDead)&&this.close()},t.prototype.pauseSelf=function(){this.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.node.resumeAllActions()},i([s],t)}(r.pzaBaseComponent));e.pzaBungeeTarget=c,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager"}],pzaBungeeZombieEffect:[function(a,t,e){"use strict";cc._RF.push(t,"6de90umtgVMJZ1sORcEGDup","pzaBungeeZombieEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBungeeZombieEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaWorldEventManager"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaGameState"),d=a("../pzaSpineTool"),h=a("../Zombie/pzaZombieSlot"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cordNode=null,t.cordPutNode=null,t.bungeeZombie=null,t.normalZombie=null,t.ladderZombie=null,t.gargantuarZombie=null,t.zombieHeight=0,t.putZombieData=null,t.countDown=0,t.fallTime=0,t.riseTime=0,t.hasFall=!1,t}return n(t,a),t.prototype.init=function(a){if(u.pzaGameState.gameWin)this.close();else if(null!=a){this.putZombieData=a,this.gargantuarZombie.active=!1,a.zombieData.zombieType==c.pzaZombieEnum.ZOMBIE?(this.normalZombie.node.active=!0,this.ladderZombie.node.active=!1,d.pzaSpineTool.instance().setSlotAtt(this.normalZombie,h.pzaZombieSlotType.hat,null,0,0)):a.zombieData.zombieType==c.pzaZombieEnum.CONE_HEAD_ZOMBIE?(this.normalZombie.node.active=!0,this.ladderZombie.node.active=!1,d.pzaSpineTool.instance().setSlotAtt(this.normalZombie,h.pzaZombieSlotType.hat,h.pzaZombieSlotType.hat+"1",-5.4,81.02)):a.zombieData.zombieType==c.pzaZombieEnum.BUCKET_HEAD_ZOMBIE?(this.normalZombie.node.active=!0,this.ladderZombie.node.active=!1,d.pzaSpineTool.instance().setSlotAtt(this.normalZombie,h.pzaZombieSlotType.hat,h.pzaZombieSlotType.hat_iron+"1",-44.8,-9.46)):a.zombieData.zombieType==c.pzaZombieEnum.LADDER_ZOMBIE?(this.normalZombie.node.active=!1,this.ladderZombie.node.active=!0,this.ladderZombie.paused=!0,d.pzaSpineTool.instance().setSlotAtt(this.ladderZombie,h.pzaZombieSlotType.ladder,h.pzaZombieSlotType.ladder+"1",221.34,-20,-119.57)):a.zombieData.zombieType==c.pzaZombieEnum.GARGANTUAR||a.zombieData.zombieType==c.pzaZombieEnum.RED_GARGANTUAR?(this.normalZombie.node.active=!1,this.ladderZombie.node.active=!1,this.gargantuarZombie.active=!0):(this.normalZombie.node.active=!0,this.ladderZombie.node.active=!1,d.pzaSpineTool.instance().setSlotAtt(this.normalZombie,h.pzaZombieSlotType.hat,null,0,0));var t=a.xIndex,e=a.yIndex;this.node.zIndex=10*-e+5;var o=u.pzaGameState.map.getXInterval(t)/2,n=.1*u.pzaGameState.map.getYInterval(e)+33,i=u.pzaGameState.map.getBlockLogicPos(t,e,o,n);this.node.setPosition(i),this.zombieHeight=400-i.y,this.bungeeZombie.y=this.zombieHeight,this.countDown=1,this.fallTime=0,this.riseTime=0,this.hasFall=!1,this.updateCord(),this.cordNode.height=1e3}},t.prototype.logicUpdate=function(a){if(this.fallTime>0)return this.fallTime-=a,this.zombieHeight-=720*a,this.zombieHeight=Math.max(0,this.zombieHeight),this.bungeeZombie.y=this.zombieHeight,void(this.fallTime<=0&&this.putZombie());if(this.riseTime>0)return this.riseTime-=a,this.zombieHeight+=800*a,this.bungeeZombie.y=this.zombieHeight,void(this.riseTime<=0&&this.close());if(this.countDown-=a,!(this.countDown>0||this.hasFall)){this.hasFall=!0,this.fallTime=this.zombieHeight/720;var t="Bungee_fall";return Math.ceil(3*Math.random()),t=t,void p.pzaSoundManager.playAudio(t)}},t.prototype.update=function(){this.updateCord()},t.prototype.updateCord=function(){this.cordNode.setPosition(cc.v2(this.bungeeZombie.position.x,this.bungeeZombie.position.y+60))},t.prototype.putZombie=function(){if(u.pzaGameState.gameWin)this.close();else{for(var a=this.putZombieData.xIndex,t=this.putZombieData.yIndex,e=a-1;e<=a+1;e++)for(var o=t-1;o<=t+1;o++){var n=""+e+o,i=window.pzaplantManager.plantDataMap.get(n);if(null!=i&&!i.isDead&&i.plantData.plantType==s.pzaPlantEnum.UMBRELLA_LEAF)return l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.RICOCHET_ZOMBIE,i),void this.beRicochet()}this.riseTime=1,this.normalZombie.node.active=!1,this.ladderZombie.node.active=!1,window.pzazombieManager.zombieDatas[this.putZombieData.yIndex].add(this.putZombieData),window.pzazombieManager.createZombie(this.putZombieData,!1,!1,!1,null,!1)}},t.prototype.beRicochet=function(){this.riseTime=1},i([z({displayName:"\u7ef3\u5b50\u8282\u70b9",type:cc.Node})],t.prototype,"cordNode",void 0),i([z({displayName:"\u7ef3\u5b50\u6302\u70b9",type:cc.Node})],t.prototype,"cordPutNode",void 0),i([z({displayName:"\u8e66\u6781\u50f5\u5c38\u8282\u70b9",type:cc.Node})],t.prototype,"bungeeZombie",void 0),i([z({displayName:"\u666e\u50f5\u8282\u70b9",type:sp.Skeleton})],t.prototype,"normalZombie",void 0),i([z({displayName:"\u68af\u5b50\u50f5\u5c38\u8282\u70b9",type:sp.Skeleton})],t.prototype,"ladderZombie",void 0),i([z({displayName:"\u5de8\u4eba\u50f5\u5c38\u8282\u70b9",type:cc.Node})],t.prototype,"gargantuarZombie",void 0),i([f],t)}(r.pzaBaseComponent);e.pzaBungeeZombieEffect=y,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieSlot":"pzaZombieSlot","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool"}],pzaBungeeZombie:[function(a,t,e){"use strict";cc._RF.push(t,"840be7Xt5hAxIWKZBLLxR4S","pzaBungeeZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBungeeZombie=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaSpineController"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaPlantEnum"),u=a("../Data/pzaZombieEnum"),d=a("../Effect/pzaBungeeTarget"),h=a("./pzaBaseZombie"),m=a("./pzaZombieSlot"),f=a("./pzaZombieState"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cordNode=null,t.targetPrefab=null,t.carryNode=null,t.handAni=null,t.zombieHeight=0,t.countDown=0,t.fallTime=0,t.riseTime=0,t.fallCheckTime=0,t.hasFall=!1,t.bungeeTarget=null,t.stealPlantIns=null,t.ashesShowTime=0,t.hasRise=!1,t.hasRicoChet=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,48.86,6.63,-87.65))]])},t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.animation.node.active=!0,this.ashesShowTime=0},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.countDown=2,this.fallTime=0,this.riseTime=0,this.fallCheckTime=0,this.hasFall=!1;var e=10*-this.baseData.yIndex-2;this.node.zIndex=e,t&&t.logicPos&&(this.zombieHeight=400-t.logicPos.y,this.animation.node.y=this.zombieHeight,this.animation.playAnimation("attack2",!0),t.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),t.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_CONTROL,-1)),null==this.baseData.zombieData.zomBossFinger?this.createTarget():this.countDown=.6,this.updateCord(),this.hasRise=!1,this.hasRicoChet=!1,this.cordNode.height=1e3)},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&(this.ashesShowTime>0&&(this.ashesShowTime-=a,this.ashesShowTime<=0&&this.death(!1)),!this.baseData.isDead&&(this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled()))){if(this.cordNode.setPosition(cc.v2(this.animation.node.position.x,this.animation.node.position.y+60)),this.baseData.buffData.hasBuff(s.pzaBuffType.RICOCHET)){this.hasRicoChet=!0,this.riseTime=1,this.fallTime=0,this.baseData.buffData.removeBuff(s.pzaBuffType.RICOCHET),this.bungeeTarget&&this.bungeeTarget.close(),this.bungeeTarget=null,this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_CONTROL,-1));var t=10*-this.baseData.yIndex+5;this.node.zIndex=t}if(this.fallTime>0)return this.fallTime-=a,this.zombieHeight-=720*a,this.zombieHeight=Math.max(0,this.zombieHeight),this.animation.node.y=this.zombieHeight-50,this.fallCheckTime>0&&(this.fallCheckTime-=a,this.fallCheckTime<=0&&(this.baseData.buffData.removeBuff(s.pzaBuffType.UNABLE_SELECT),this.baseData.buffData.removeBuff(s.pzaBuffType.IMM_CONTROL))),void(this.fallTime<=0&&(this.animation.playAnimation("move",!0),this.countDown=4));if(this.riseTime>0){if(null!=this.baseData.zombieData.zomBossFinger)return;return this.riseTime-=a,this.zombieHeight+=800*a,this.animation.node.y=this.zombieHeight-50,this.hasRise||this.hasRicoChet||(this.hasRise=!0,this.removePlant()),void(this.riseTime<=0&&this.disappear())}if(this.countDown-=a,!(this.countDown>0)){if(!this.hasFall){this.hasFall=!0,this.fallTime=this.zombieHeight/720,this.fallCheckTime=.9*this.fallTime;var e="Bungee_fall";return Math.ceil(3*Math.random()),e=e,void p.pzaSoundManager.playAudio(e)}this.stealPlant()}}},t.prototype.update=function(){this.updateCord()},t.prototype.updateCord=function(){var a=this.node.convertToWorldSpaceAR(this.animation.node.position),t=this.node.convertToNodeSpaceAR(a);this.cordNode.setPosition(t.add(cc.v3(0,60)))},t.prototype.createTarget=function(){var a=r.pzaGameCommonPool.requestInstant(this.targetPrefab);a.setParent(this.node.parent),this.bungeeTarget=a&&a.getComponent(d.pzaBungeeTarget),this.bungeeTarget&&this.bungeeTarget.bindData(this.baseData)},t.prototype.stealPlant=function(){var a=this;null!=this.baseData.zombieData.zomBossFinger&&this.baseData.isBeControlled()?this.disappear():(this.countDown=2,p.pzaSoundManager.playAudio("Bungee_steal"),this.animation.playAnimation("attack",!1,function(){a.riseTime=1,a.animation.playAnimation("attack3",!0)}),null==this.baseData.zombieData.zomBossFinger?(this.bungeeTarget&&this.bungeeTarget.close(),this.bungeeTarget=null,this.handAni.node.active=!0,this.handAni.playAnimation("attack",!1,function(){a.handAni.playAnimation("attack3",!0)}),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_CONTROL,-1))):this.removePlant())},t.prototype.removePlant=function(){var a=window.pzaplantManager.getCanAttackPlantData(this.baseData.xIndex,this.baseData.yIndex,!0),t=window.pzaplantManager.getPlantByData(a);if(null!=a&&null!=t&&a.plantData.plantType!=c.pzaPlantEnum.COB_CANNON){t.steal(),a.isDead=!0,window.pzaplantManager.removePlant(a);var e=t.node.convertToWorldSpaceAR(cc.v2());t.node.setParent(this.carryNode),t.node.setPosition(this.carryNode.convertToNodeSpaceAR(e)),this.stealPlantIns=t;var o=10*-this.baseData.yIndex+6;this.node.zIndex=o}},t.prototype.close=function(){null!=this.stealPlantIns&&(this.stealPlantIns.close(),this.stealPlantIns=null),a.prototype.close.call(this)},t.prototype.disappear=function(){this.baseData.isDead=!0,this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,!1),this.close()},t.prototype.playDeathAnimation=function(a){this.zombieState=f.pzaZombieState.DEAD,this.zombieHurtState=u.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),a&&a()},t.prototype.zombieIntact=function(){a.prototype.zombieIntact.call(this),this.handAni.node.active=!1},t.prototype.ashesDeath=function(){a.prototype.ashesDeath.call(this),this.baseData.zombieDie(),this.animation.node.active=!1,this.ashesShowTime=.8},t.prototype.logicLateUpdate=function(a){a>.5?console.log("\u8fc7\u9ad8dt====>",a):(this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(this.baseData.logicPos))},t.prototype.refreshFrostState=function(a){if(a)return this.showFrost=!1,this.showFire=!1,this.showSpeedUp=!1,void(this.animation.node.color=cc.Color.WHITE);if(!(null==this.baseData||this.animation.flashTime>0||this.baseData.zombieData.hypnosis))if(this.baseData.buffData.hasBuff(s.pzaBuffType.FROST)){if(!this.baseData.isDead&&!this.showFrost)return this.showFrost=!0,this.animation.node.color=this.color_frozen,void(this.handAni.node.color=this.color_frozen)}else if(this.baseData.buffData.hasBuff(s.pzaBuffType.FIRE)){if(!this.baseData.isDead&&!this.showFire)return this.showFire=!0,this.animation.node.color=this.color_fire,void(this.handAni.node.color=this.color_frozen)}else if(this.baseData.buffData.hasBuff(s.pzaBuffType.SPEED_UP)){if(!this.baseData.isDead&&!this.showSpeedUp)return void(this.showSpeedUp=!0)}else(this.showFrost||this.showFire)&&(this.showFire=!1,this.showFrost=!1,this.showSpeedUp=!1,this.animation.node.color=cc.Color.WHITE)},i([g({displayName:"\u7ef3\u5b50\u8282\u70b9",type:cc.Node})],t.prototype,"cordNode",void 0),i([g({displayName:"\u9776\u5b50\u9884\u8bbe",type:cc.Prefab})],t.prototype,"targetPrefab",void 0),i([g({displayName:"\u5b58\u653e\u690d\u7269\u8282\u70b9",type:cc.Node})],t.prototype,"carryNode",void 0),i([g({displayName:"\u624b\u52a8\u753b",type:l.pzaSpineController})],t.prototype,"handAni",void 0),i([y],t)}(h.pzaBaseZombie);e.pzaBungeeZombie=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBungeeTarget":"pzaBungeeTarget","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaButterBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"0a0c1vHdGJAqYAKBcVznChF","pzaButterBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaButterBaseBullet=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaZombieEnum"),l=a("../Plant/pzaAttackType"),s=a("../pzaEffectManager"),c=a("./pzaBaseBullet"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.colliderZombie=function(a){if(a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==p.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&!(a.zombieData&&a.zombieData.hypnosis||a.buffData.hasBuff(r.pzaBuffType.DIVE)||a.buffData.hasBuff(r.pzaBuffType.FLY)||a.buffData.hasBuff(r.pzaBuffType.INVINCIBLE))){var t=window.pzazombieManager.getZombie(a);if(t){if(t.hurt(this.atk,null,l.pzaAttackType.FLOOR_ATK),!a.buffData.hasBuff(r.pzaBuffType.IMM_CONTROL)&&!a.buffData.hasBuff(r.pzaBuffType.IMM_IMMOBILIZE)){var e=a.buffData.releaseBuff(r.pzaBuffType.IMMOBILIZE);null!=e?e.buffTime=5:(e=new r.pzaBuffInfo(r.pzaBuffType.IMMOBILIZE,5),a.buffData.addBuff(e),t.bePauseControl(),s.pzaEffectManager.createButterEffect(a,cc.v2(a.logicPos.x,a.logicPos.y+130),t.node.zIndex))}this.close(),this.playHitEffect(a)}}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t)},i([d],t)}(c.pzaBaseBullet));e.pzaButterBaseBullet=h,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","./pzaBaseBullet":"pzaBaseBullet"}],pzaButterEffect:[function(a,t,e){"use strict";cc._RF.push(t,"32ccbWnqjdDuLH77GoS4EXI","pzaButterEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaButterEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=a("../Data/pzaBuffData"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.poolPrefab=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.logicUpdate=function(){null!=this.baseData&&!this.baseData.isDead&&this.baseData.buffData.hasBuff(l.pzaBuffType.IMMOBILIZE)||this.close()},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaButterEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../Data/pzaBuffData":"pzaBuffData"}],pzaButterGloomShroom:[function(a,t,e){"use strict";cc._RF.push(t,"27710eqz05MxLpoXxCIBoJ1","pzaButterGloomShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaButterGloomShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaDirBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=a("./pzaAttackType"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.bulletPrefab2=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.playNormalAni()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t)},t.prototype.playNormalAni=function(){var a=this,t=function(){if(a.baseData&&!a.baseData.isDead){var e=!1,o=1.7*h.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(t,n){null==t||null==n||n.isDead||null==n.logicPos||n.buffData.hasBuff(u.pzaBuffType.DIVE)||n.buffData.hasBuff(u.pzaBuffType.FLY)||n.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||s.pzaUtil.getDistance(a.baseData.logicPos,n.logicPos)<o&&(e=!0)}),e||a.canJoinDrZomBoss(a.baseData)&&(e=!0),e)return l.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x,a.baseData.logicPos.y+47);d.pzaEffectManager.createGloomShroomEffect(a.baseData.yIndex,t,null),a.hurtZombies(),a.attack()}});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))}};this.animation.playAnimation("idle1",!1,t)},t.prototype.attack=function(){for(var a=cc.v2(1,0),t=2*Math.PI/8,e=p.pzaNodeManager.getBulletNode(),o=this.node.getPosition(),n=Math.random()<.8?this.bulletPrefab:this.bulletPrefab2,i=0;i<8;i++){var l=r.pzaGameCommonPool.requestInstant2(n);l.setParent(e),l.setPosition(o.x,o.y+50),l.getComponent(c.pzaDirBullet).init(a.rotate(t*i),this.baseData.atk)}},t.prototype.canJoinDrZomBoss=function(a){if(a.xIndex<5)return null;var t=window.pzazombieManager.drZomBoss;return null==t||null==t.baseData||t.baseData.isDead||t.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:t.baseData},t.prototype.hurtZombies=function(){var a=this,t=1.7*h.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(e,o){null==e||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(u.pzaBuffType.DIVE)||o.buffData.hasBuff(u.pzaBuffType.FLY)||o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||s.pzaUtil.getDistance(a.baseData.logicPos,o.logicPos)<t&&e&&e.hurt(a.baseData.atk,a.baseData,m.pzaAttackType.PENETRATE)}),this.canJoinDrZomBoss(this.baseData)){var e=this.canJoinDrZomBoss(this.baseData),o=window.pzazombieManager.getZombie(e);o&&o.hurt(this.baseData.atk,this.baseData,m.pzaAttackType.PENETRATE)}},i([g({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([g({displayName:"\u5b50\u5f39\u9884\u8bbe2",type:cc.Prefab})],t.prototype,"bulletPrefab2",void 0),i([y],t)}(f.pzaBasePlant);e.pzaButterGloomShroom=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaDirBullet":"pzaDirBullet","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaButterJoker:[function(a,t,e){"use strict";cc._RF.push(t,"17c49CbuVtJoLLDs3ZHPIu2","pzaButterJoker");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaButterJoker=void 0;var r=a("../../Common/pzaWorldEventManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaJalapeno"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.attack=function(){var a=this;window.pzaplantManager.removePlant(this.baseData),this.death();var t=window.pzaMapManager,e=this.baseData.xIndex,o=this.baseData.yIndex,n=c.pzaGameState.map.getMapRow();t.shakeMap();for(var i=c.pzaGameState.map.getBlockLogicPos(0,o,0,0),d=0;d<12;d++){(m=i.clone()).x+=100*d,c.pzaGameState.map.fixMapYOffset(o,m,0);var h=.1*d+.5;d>=5&&(h=.05*d+.5),s.pzaEffectManager.createBoomFireEffect(o,h,m,null)}for(i=c.pzaGameState.map.getBlockLogicPos(e,0,0,0),d=0;d<10;d++){var m;(m=i.clone()).x+=50,m.y+=70*d,s.pzaEffectManager.createBoomFireEffect(e,.1*d+.5,m,null)}t.removeColRowIceGround(e,o);for(var f=0;f<=8;f++)t.removeLadder(f,o);for(var z=0;z<=n;z++)t.removeLadder(e,z);r.pzaWorldEventManager.triggerEvent(r.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var y=[];for(d=0;d<n;d++){var g=window.pzazombieManager.zombieDatas[d];d!==o?g.forEach(function(a){a.xIndex===e&&y.push(a)}):y=y.concat(Array.from(g))}null!=window.pzazombieManager.drZomBoss&&y.push(window.pzazombieManager.drZomBoss.baseData),y.forEach(function(t){if(t&&!t.isDead&&!t.buffData.hasBuff(p.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);if(e&&(e.hurt(a.baseData.atk,a.baseData,u.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==l.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(p.pzaBuffType.FROST),t.buffData.removeBuff(p.pzaBuffType.FROZEN)),!e.baseData.isDead&&(e.bePauseControl(),!e.baseData.buffData.hasBuff(p.pzaBuffType.IMM_CONTROL)&&!e.baseData.buffData.hasBuff(p.pzaBuffType.IMM_IMMOBILIZE)))){var o=e.baseData.buffData.releaseBuff(p.pzaBuffType.IMMOBILIZE);null!=o?o.buffTime=5:(o=new p.pzaBuffInfo(p.pzaBuffType.IMMOBILIZE,5),e.baseData.buffData.addBuff(o),e.bePauseControl(),s.pzaEffectManager.createButterEffect(e.baseData,cc.v2(e.baseData.logicPos.x,e.baseData.logicPos.y+130),e.node.zIndex))}}})},i([m],t)}(d.pzaJalapeno));e.pzaButterJoker=f,cc._RF.pop()},{"../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaJalapeno":"pzaJalapeno"}],pzaButterSpike:[function(a,t,e){"use strict";cc._RF.push(t,"33841OfuTxEGog7+E0J6LO2","pzaButterSpike");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaButterSpike=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../utils/pzakc"),l=a("../Data/pzaBuffData"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaSpikeweed"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.baseData.plantData.canBeShoot=!1},t.prototype.attack=function(){var a=this;r.pzaSoundManager.playAudio("Spikeweed"),this.animation.playAnimation(c.pzaGameState.isZombieMode()?"T_attack":"attack",!1,function(){a.animation.playAnimation(c.pzaGameState.isZombieMode()?"T_idle":"idle",!0)}),null==this.baseData||this.baseData.isDead||window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(a.baseData&&t&&!t.isDead&&!t.buffData.hasBuff(l.pzaBuffType.FLY)&&!t.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)&&t.xIndex==a.baseData.xIndex){var e=window.pzazombieManager.getZombie(t);if(e&&e.hurt(a.baseData.atk,a.baseData,u.pzaAttackType.SPIKE),!e.baseData.isDead&&p.default.randomInt(1,100)<30&&(e.bePauseControl(),!e.baseData.buffData.hasBuff(l.pzaBuffType.IMM_CONTROL)&&!e.baseData.buffData.hasBuff(l.pzaBuffType.IMM_IMMOBILIZE))){var o=e.baseData.buffData.releaseBuff(l.pzaBuffType.IMMOBILIZE);null!=o?o.buffTime=5:(o=new l.pzaBuffInfo(l.pzaBuffType.IMMOBILIZE,5),e.baseData.buffData.addBuff(o),e.bePauseControl(),s.pzaEffectManager.createButterEffect(e.baseData,cc.v2(e.baseData.logicPos.x,e.baseData.logicPos.y+130),e.node.zIndex))}}})},i([m],t)}(d.pzaSpikeweed));e.pzaButterSpike=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../utils/pzakc":"pzakc","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaSpikeweed":"pzaSpikeweed"}],pzaBuyConfirmView:[function(a,t,e){"use strict";cc._RF.push(t,"11edfsimUdBF7p40xxx3Rtx","pzaBuyConfirmView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBuyConfirmView=void 0;var r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Common/pzaBeltEquipConfig"),s=a("../Common/pzaGameCommonPool"),c=a("../Common/pzaGamePropConfig"),u=a("../Common/pzaLocalData"),d=a("../Common/pzaSoundManager"),h=a("../Common/pzaSpriteFrameManager"),m=a("../Common/pzaStatisticsMgr"),f=a("../Common/pzaUIManager"),z=a("../Common/pzaUtil"),y=a("../Common/pzaWorldEventManager"),g=a("../Garden/pzaGardenMgr"),b=a("../Load/pzaPreLoadManager"),v=a("../Shop/pzaShopConfig"),P=a("../utils/pzaChannel"),D=a("./pzaWarningView"),S=cc._decorator,C=S.ccclass,_=S.property,E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.price=null,t.priceNode=null,t.itemIcon=null,t.plantCard=null,t.plantIcon=null,t.plantCardBoard=null,t.plantCardBoardFrames=[],t.tittle=null,t.desc=null,t.coin=null,t.confirmTxt=null,t.confirmBtn=null,t.cancelTxt=null,t.cancelBtn=null,t.adIcon=null,t.itemCount=null,t.adShareBtnFrames=[],t.itemType=null,t.shopPos=null,t}var e;return n(t,a),e=t,t.prototype.onEnable=function(){y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.HIDE_DAVE_DIALOG,null)},t.prototype.onDisable=function(){y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.SHOW_DAVE_DIALOG,null)},t.prototype.setCloseCall=function(a){this.closeCall=a},t.prototype.bindData=function(a,t,e){if(this.itemType=a,this.shopPos=t,this.buyCall=e,this.node.getChildByName("board").y=80,this.confirmBtn.active=!0,this.cancelBtn.x=-204,this.coin.node.active=!0,this.coin.string="\u786c\u5e01\uff1a"+z.pzaUtil.getCurrencyStr(u.pzaLocalData.data.coin),this.itemCount.node.active=!1,a==v.pzaShopItemType.DAVE_COIN)return this.tittle.string="\u6234\u592b\u7684\u79d8\u5bc6\u8d27\u7269",this.desc.string="\u5e7f\u544a\u4ee5\u83b7\u5f971000\u786c\u5e01",this.adIcon.enabled=!u.pzaLocalData.data.isShowVideoIcon,this.adIcon.node.active=!u.pzaLocalData.data.isShowVideoIcon,this.confirmTxt.string="\u7acb\u5373\u9886\u53d6",this.cancelTxt.string="\u8fd4\u56de",this.confirmTxt.node.x=31,h.pzaSpriteFrameManager.loadShopItemIcon(a,this.itemIcon),this.priceNode.active=!1,this.itemIcon.node.active=!0,this.plantCard.active=!1,void(u.pzaLocalData.maxShareRwdCount>0&&u.pzaLocalData.data.freeCoinShareCount<u.pzaLocalData.maxShareRwdCount?(this.adIcon.spriteFrame=this.adShareBtnFrames[1],(u.pzaLocalData.isNoShareVideoSwap||"ks"==P.pzaChannel.instance().channel||"tt"==P.pzaChannel.instance().channel||"my"==P.pzaChannel.instance().channel)&&(this.adIcon.spriteFrame=this.adShareBtnFrames[0])):(this.adIcon.spriteFrame=this.adShareBtnFrames[0],m.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"2"},{name:"adname",value:"\u5546\u5e97\u8d2d\u4e70\u91d1\u5e01"})));this.tittle.string="\u8d2d\u4e70\u8fd9\u4e00\u7269\u54c1\uff1f",this.adIcon.node.active=!1,this.confirmTxt.string="\u5426",this.cancelTxt.string="\u662f",this.confirmTxt.node.x=-3,this.priceNode.active=!0;var o=v.pzaShopConfig.SHOP_CONFIG.get(a);null!=o&&(this.desc.string=o.desc,this.price.string=z.pzaUtil.getCurrencyStr(o.price),a>=v.pzaShopItemType.CARD_SLOT_7&&a<=v.pzaShopItemType.CARD_SLOT_9?(this.itemIcon.node.active=!0,this.plantCard.active=!1,h.pzaSpriteFrameManager.loadShopItemIcon(1,this.itemIcon)):a<v.pzaShopItemType.GATLING_PEA||a>v.pzaShopItemType.IMITATER?(this.itemIcon.node.active=!0,this.plantCard.active=!1,h.pzaSpriteFrameManager.loadShopItemIcon(a,this.itemIcon),a==v.pzaShopItemType.PESTICIDE&&(this.itemCount.node.active=!0)):(this.itemIcon.node.active=!1,this.plantCard.active=!0,h.pzaSpriteFrameManager.loadPlantCard(v.pzaShopConfig.getPlantTypeByItem(a),this.plantIcon),a==v.pzaShopItemType.IMITATER?this.plantCardBoard.spriteFrame=this.plantCardBoardFrames[0]:this.plantCardBoard.spriteFrame=this.plantCardBoardFrames[1]),a==v.pzaShopItemType.GATLING_PEA&&(this.priceNode.active=!1,this.coin.node.active=!1,this.tittle.string="\u606d\u559c\u83b7\u5f97\u673a\u67aa\u5c04\u624b\uff01",this.cancelTxt.string="\u786e\u5b9a",this.confirmBtn.active=!1,this.cancelBtn.x=0,this.buyItem(this.itemType,this.shopPos)))},t.prototype.tasksBindData=function(a){this.tittle.node.active=!1,this.priceNode.active=!1,this.coin.node.active=!1,this.confirmBtn.active=!1;var t="";switch(a){case c.pzaGamePropEnum.PROP_SECRET_FLOWER:t="\u795e\u79d8\u7684\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u597d\u597d\u517b\u5b83\uff0c\u6211\u4fdd\u8bc1\u4f60\u4f1a\u6709\u5f88\u5927\u6536\u83b7\uff01",h.pzaSpriteFrameManager.loadGoldPlant(30,this.itemIcon);break;case c.pzaGamePropEnum.PROP_BRONZE_FLOWE:t="\u795e\u79d8\u7684\u9752\u94dc\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u670925%\u7684\u673a\u4f1a\u53d8\u6210\u4f60\u6ca1\u6709\u7684\u690d\u7269\uff01",h.pzaSpriteFrameManager.loadGoldPlant(31,this.itemIcon);break;case c.pzaGamePropEnum.PROP_SILVER_FLOWE:t="\u795e\u79d8\u7684\u767d\u94f6\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u670950%\u7684\u673a\u4f1a\u53d8\u6210\u4f60\u6ca1\u6709\u7684\u690d\u7269\uff01",h.pzaSpriteFrameManager.loadGoldPlant(32,this.itemIcon);break;case c.pzaGamePropEnum.PROP_GOLD_FLOWER:t="\u795e\u79d8\u7684\u9ec4\u91d1\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u6709100%\u7684\u673a\u4f1a\u53d8\u6210\u4f60\u6ca1\u6709\u7684\u690d\u7269\uff01",h.pzaSpriteFrameManager.loadGoldPlant(33,this.itemIcon)}this.desc.string=t,this.itemCount.string="",this.cancelBtn.x=0,this.cancelTxt.string="\u786e\u5b9a"},t.prototype.clickConfirm=function(){var a=this;d.pzaSoundManager.playSFX();var t=function(){a.itemType==v.pzaShopItemType.DAVE_COIN&&(u.pzaLocalData.data.coin+=1e3,u.pzaLocalData.addDirty("coin"),u.pzaLocalData.bpGetGold(1e3),a.closeCall&&a.closeCall()),a.close()};this.itemType==v.pzaShopItemType.DAVE_COIN?u.pzaLocalData.maxShareRwdCount>0&&u.pzaLocalData.data.freeCoinShareCount<u.pzaLocalData.maxShareRwdCount?"ks"==P.pzaChannel.instance().channel||"tt"==P.pzaChannel.instance().channel||"my"==P.pzaChannel.instance().channel||u.pzaLocalData.isNoShareVideoSwap?P.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u5546\u5e97\u8d2d\u4e70\u91d1\u5e01",adsid:"2"}):P.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"2"},function(){u.pzaLocalData.data.freeCoinShareCount++,u.pzaLocalData.addDirty("freeCoinShareCount"),t()}):P.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u5546\u5e97\u8d2d\u4e70\u91d1\u5e01",adsid:"2"}):this.close()},t.prototype.buyItem=function(a,t){switch(a){case v.pzaShopItemType.CARD_SLOT_7:u.pzaLocalData.data.plantSlotCount=7,u.pzaLocalData.addDirty("plantSlotCount"),u.pzaLocalData.obtainGoods(a,1);break;case v.pzaShopItemType.CARD_SLOT_8:u.pzaLocalData.data.plantSlotCount=8,u.pzaLocalData.addDirty("plantSlotCount"),u.pzaLocalData.obtainGoods(a,1);break;case v.pzaShopItemType.CARD_SLOT_9:u.pzaLocalData.data.plantSlotCount=9,u.pzaLocalData.addDirty("plantSlotCount"),u.pzaLocalData.obtainGoods(a,1);break;case v.pzaShopItemType.POOL_CLEAN_CAR:case v.pzaShopItemType.ROOF_CART:case v.pzaShopItemType.NUT_HEALING:u.pzaLocalData.obtainGoods(a,1);break;case v.pzaShopItemType.PITCHFORK:u.pzaLocalData.obtainGoods(a,3);break;case v.pzaShopItemType.SHROOM_GARDEN:g.default.instance().addGardenEnv(g.pzaGardenEnv.night);break;case v.pzaShopItemType.AQUARIUM:g.default.instance().addGardenEnv(g.pzaGardenEnv.water);break;case v.pzaShopItemType.SNAIL:g.default.instance().addGardenTool(g.pzaGardenToolType.snail,1);break;case v.pzaShopItemType.WHEELBARROW:g.default.instance().addGardenTool(g.pzaGardenToolType.cart,1);break;case v.pzaShopItemType.JUKEBOX:g.default.instance().addGardenTool(g.pzaGardenToolType.phonograph,1);break;case v.pzaShopItemType.GLOVE:g.default.instance().addGardenTool(g.pzaGardenToolType.glove,1);break;case v.pzaShopItemType.GOLD_KETTLE:g.default.instance().addGardenTool(g.pzaGardenToolType.goldWaterPot,1);break;case v.pzaShopItemType.GATLING_PEA:u.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.GATLING_PEA),u.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.TWIN_SUNFLOWER:u.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.TWIN_SUNFLOWER),u.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.GLOOM_SHROOM:u.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.GLOOM_SHROOM),u.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.CATTAIL:u.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.CATTAIL),u.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.SPIKEROCK:u.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.SPIKEROCK),u.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.GOLD_MAGNET:u.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.GOLD_MAGNET),u.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.WINTER_MELON:u.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.WINTER_MELON),u.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.COB_CANNON:u.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.COB_CANNON),u.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.IMITATER:u.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.IMITATER),u.pzaLocalData.addDirty("ownPlants");break;case v.pzaShopItemType.PESTICIDE:g.default.instance().addGardenTool(g.pzaGardenToolType.pesticide,5);break;case v.pzaShopItemType.MARIGOLD_FLOWERPOT:g.default.instance().addGardenPlant(p.pzaPlantEnum.MARIGOLD),u.pzaLocalData.data.purchasedPos.push(t),u.pzaLocalData.addDirty("purchasedPos");break;case v.pzaShopItemType.FLOWER_SEED:var e=g.default.instance().randomGardenPlant(0);g.default.instance().addGardenPlant(e),u.pzaLocalData.data.purchasedPos.push(t),u.pzaLocalData.addDirty("purchasedPos");break;case v.pzaShopItemType.BRONZE_FLOWER_SEED:var o=g.default.instance().randomGardenPlant(.25);g.default.instance().addGardenPlant(o),u.pzaLocalData.data.purchasedPos.push(t),u.pzaLocalData.addDirty("purchasedPos");break;case v.pzaShopItemType.SILVER_FLOWER_SEED:var n=g.default.instance().randomGardenPlant(.5);g.default.instance().addGardenPlant(n),u.pzaLocalData.data.purchasedPos.push(t),u.pzaLocalData.addDirty("purchasedPos");break;case v.pzaShopItemType.GOLD_FLOWER_SEED:var i=g.default.instance().randomGardenPlant(1);g.default.instance().addGardenPlant(i),u.pzaLocalData.data.purchasedPos.push(t),u.pzaLocalData.addDirty("purchasedPos");break;case v.pzaShopItemType.BLACK_KNIGHT_BELT:l.pzaBeltEquipConfig.getBeltEquip(l.pzaBeltEquipEnum.HeiQi);break;case v.pzaShopItemType.WITCH_KNIGHT_BELT:l.pzaBeltEquipConfig.getBeltEquip(l.pzaBeltEquipEnum.WuQi)}},t.prototype.clickCancel=function(){if(d.pzaSoundManager.playSFX(),this.close(),this.itemType!=v.pzaShopItemType.DAVE_COIN)if(this.itemType!=v.pzaShopItemType.GATLING_PEA){var a=v.pzaShopConfig.SHOP_CONFIG.get(this.itemType);if(null!=a)return u.pzaLocalData.data.coin>=a.price?(u.pzaLocalData.data.coin-=a.price,this.buyItem(this.itemType,this.shopPos),this.buyCall&&this.buyCall(),this.itemType>=v.pzaShopItemType.CARD_SLOT_7&&this.itemType<=v.pzaShopItemType.CARD_SLOT_9&&f.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(D.pzaWarningView);t&&t.show("\u73b0\u5728\u4f60\u53ef\u4ee5\u5728\u6bcf\u4e2a\u5173\u5361\n\u9009\u62e9"+u.pzaLocalData.data.plantSlotCount+"\u4e2a\u690d\u7269\u79cd\u5b50\u4e86\uff01","\u786e\u5b9a",null,null,null,"\u66f4\u591a\u5361\u7247\u69fd\uff01")}),void(a.price>5e3&&this.scheduleOnce(function(){var a=P.pzaChannel.instance().getChannel();P.pzaChannel.saveToRemote(a.channelUserId,u.pzaLocalData.data)},1))):void f.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.BUY_CONFIRM_VIEW,function(a){var t=a&&a.getComponent(e);t&&t.bindData(v.pzaShopItemType.DAVE_COIN,null,null)})}else this.buyCall&&this.buyCall()},t.prototype.close=function(){P.pzaChannel.instance().closeBanner(),s.pzaGameCommonPool.returnInstant(this.node)},i([_({displayName:"\u4ef7\u683c",type:cc.Label})],t.prototype,"price",void 0),i([_({displayName:"\u4ef7\u683c\u8282\u70b9",type:cc.Node})],t.prototype,"priceNode",void 0),i([_({displayName:"\u7269\u54c1\u56fe\u6807",type:cc.Sprite})],t.prototype,"itemIcon",void 0),i([_({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"plantCard",void 0),i([_({displayName:"\u690d\u7269\u56fe\u7247",type:cc.Sprite})],t.prototype,"plantIcon",void 0),i([_({displayName:"\u690d\u7269\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"plantCardBoard",void 0),i([_({displayName:"\u690d\u7269\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"plantCardBoardFrames",void 0),i([_({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"tittle",void 0),i([_({displayName:"\u63cf\u8ff0",type:cc.Label})],t.prototype,"desc",void 0),i([_({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],t.prototype,"coin",void 0),i([_({displayName:"\u786e\u8ba4\u6587\u6848",type:cc.Label})],t.prototype,"confirmTxt",void 0),i([_({displayName:"\u786e\u8ba4\u6309\u94ae",type:cc.Node})],t.prototype,"confirmBtn",void 0),i([_({displayName:"\u53d6\u6d88\u6587\u6848",type:cc.Label})],t.prototype,"cancelTxt",void 0),i([_({displayName:"\u53d6\u6d88\u6309\u94ae",type:cc.Node})],t.prototype,"cancelBtn",void 0),i([_({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Sprite})],t.prototype,"adIcon",void 0),i([_({displayName:"\u5546\u54c1\u6570\u91cf",type:cc.Label})],t.prototype,"itemCount",void 0),i([_({displayName:"\u5e7f\u544a\u5206\u4eab\u6309\u94ae\u56fe",type:[cc.SpriteFrame]})],t.prototype,"adShareBtnFrames",void 0),e=i([C],t)}(cc.Component);e.pzaBuyConfirmView=E,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../utils/pzaChannel":"pzaChannel","./pzaWarningView":"pzaWarningView"}],pzaCGPaperView:[function(a,t,e){"use strict";cc._RF.push(t,"5ab46dVn0lIiL0A+HFwDcq9","pzaCGPaperView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCGPaperView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameManager"),s=a("../../Common/pzaSoundManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.paperSprite=null,t.paperFrames=[],t}return n(t,a),t.prototype.onEnable=function(){if((5==r.pzaGameState.curChapter||10==r.pzaGameState.curChapter)&&10==r.pzaGameState.curPart)return this.paperSprite.spriteFrame=this.paperFrames[5],void s.pzaSoundManager.playAudio("paper");var a=r.pzaGameState.curChapter>5?r.pzaGameState.curChapter-5:r.pzaGameState.curChapter;this.paperSprite.spriteFrame=this.paperFrames[a-1],s.pzaSoundManager.playAudio("cg")},t.prototype.clickNext=function(){this.close(),l.pzaGameManager.getCurrentGame().partWin()},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u7eb8\u6761",type:cc.Sprite})],t.prototype,"paperSprite",void 0),i([d({displayName:"\u7eb8\u6761\u56fe",type:[cc.SpriteFrame]})],t.prototype,"paperFrames",void 0),i([u],t)}(cc.Component);e.pzaCGPaperView=h,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSoundManager":"pzaSoundManager"}],pzaCabbagePult:[function(a,t,e){"use strict";cc._RF.push(t,"e04dbXPTkRA2IEuUkS7pTRI","pzaCabbagePult");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCabbagePult=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaThrowBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),d.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null!=e)return l.pzaSoundManager.playAudio("CabbagePult"),void a.animation.playAnimation("attack",!1,t,function(){a.attack(e)});a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};t()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(u.pzaBuffType.FLY)&&!o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)&&!o.buffData.hasBuff(u.pzaBuffType.DIVE)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){o.x-=15;var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var s=cc.v2(l.x+this.baseData.logicPos.x+14,l.y+this.baseData.logicPos.y+42);i.setPosition(s);var u=i.getComponent(c.pzaThrowBullet);null!=u&&(u.init(!1,this.baseData.yIndex,this.baseData.atk,a,n),u.updateBulletAngel(90))}}}}}},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaCabbagePult=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaCactus:[function(a,t,e){"use strict";cc._RF.push(t,"a5050dcEfVDkIX49vL7JqiK","pzaCactus");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCactus=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.shootHNode=null,t.bulletPrefab=null,t.blinkTime=3,t.rise=!1,t.atk1AniTime=1.4,t.atk2AniTime=1.4,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.rise=!1,d.pzaGameState.isZombieMode())return this.attacking=!1,this.atk1AniTime=this.animation.getAnimationDuration("T_attack1"),this.atk2AniTime=this.animation.getAnimationDuration("T_attack2"),void this.animation.playAnimation("T_idle1",!0);this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atk1AniTime=this.animation.getAnimationDuration("attack1"),this.atk2AniTime=this.animation.getAnimationDuration("attack2"),d.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()){var o=this.findAttackTarget();if(null!=o)return this.attacking=!0,o.buffData.hasBuff(u.pzaBuffType.FLY)?void(this.rise?(l.pzaSoundManager.playAudio("CactusAtk"),this.animation.playAnimation("T_attack2",!1,function(){e.attacking=!1},function(){e.shoot(!0)},this.atk2AniTime/this.atkInterval)):(l.pzaSoundManager.playAudio("Cactus"),this.animation.playAnimation("T_rise",!1,function(){e.rise=!0,e.attacking=!1}))):void(this.rise?this.animation.playAnimation("T_lower",!1,function(){e.rise=!1,e.attacking=!1,e.animation.playAnimation("T_idle1",!0)}):(l.pzaSoundManager.playAudio("CactusAtk"),this.animation.playAnimation("T_attack1",!1,function(){e.attacking=!1},function(){e.shoot(!1)},this.atk1AniTime/this.atkInterval)));if(this.rise)return this.attacking=!0,void this.animation.playAnimation("T_lower",!1,function(){e.rise=!1,e.attacking=!1,e.animation.playAnimation("T_idle1",!0)})}},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null!=e)return e.buffData.hasBuff(u.pzaBuffType.FLY)?void(a.rise?(l.pzaSoundManager.playAudio("CactusAtk"),a.animation.playAnimation("attack2",!1,t,function(){a.shoot(!0)},a.atk2AniTime/a.atkInterval)):(l.pzaSoundManager.playAudio("Cactus"),a.animation.playAnimation("rise",!1,function(){a.rise=!0,t()}))):void(a.rise?a.animation.playAnimation("lower",!1,function(){a.rise=!1,t()}):(l.pzaSoundManager.playAudio("CactusAtk"),a.animation.playAnimation("attack1",!1,t,function(){a.shoot(!1)},a.atk1AniTime/a.atkInterval)));a.rise?a.animation.playAnimation("lower",!1,function(){a.rise=!1,t()}):a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};t()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x<a.baseData.logicPos.x||o.buffData.hasBuff(u.pzaBuffType.DIVE)||o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||(o.buffData.hasBuff(u.pzaBuffType.FLY)?e=o:t=o)}),null!=e?e:null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.shoot=function(a){if(null!=this.baseData&&!this.baseData.isDead){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=a?this.shootHNode.convertToWorldSpaceAR(cc.v2()):this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o);e.setPosition(n);var i=e.getComponent(c.pzaBaseBullet);if(null!=i){i.init(this.baseData.yIndex,this.baseData.atk,1),i.isInAir=a;var l=d.pzaGameState.map.getMapSkewColumn();l>0&&this.baseData.xIndex<=l-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u53d1\u5c04\u70b9-\u9ad8",type:cc.Node})],t.prototype,"shootHNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaCactus=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaCaiWen:[function(a,t,e){"use strict";cc._RF.push(t,"edfbbLjbIZOIr62ij85brjr","pzaCaiWen");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCaiWen=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaBuffData"),l=a("../pzaGameState"),s=a("./pzaAttackType"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.specialAttackCD=0,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.playNormalAni()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.specialAttackCD-=t)},t.prototype.playNormalAni=function(){var a=this,t=function(){a.attackTarget(t)||(a.animation.node.scaleX=1,a.animation.playAnimation("idle",!1,t))};this.attackTarget(t)||this.animation.playAnimation("idle",!1,t)},t.prototype.attackTarget=function(a){var t=this,e=this.findFixRangeZombies(this.baseData.logicPos,1.5*l.pzaGameState.map.getBlockWidth());return this.specialAttackCD<=0&&e&&e.length>0?(this.specialAttackCD=5,this.animation.node.scaleX=1,this.animation.playAnimation("attack2",!1,a,function(){if(null==t.baseData||t.baseData.isDead)return!0;t.hurtZombies(e,60)}),!0):(e=window.pzazombieManager.getCanAttackZombies(this.baseData,2.5))&&e.length>0?(this.animation.node.scaleX=1,this.animation.playAnimation("attack1",!1,a,function(){if(null==t.baseData||t.baseData.isDead)return!0;t.hurtZombies(e)},1.5),!0):(e=window.pzazombieManager.getCanAttackBackZombies(this.baseData,1.5))&&e.length>0?(this.animation.node.scaleX=-1,this.animation.playAnimation("attack1",!1,a,function(){if(null==t.baseData||t.baseData.isDead)return!0;t.hurtZombies(e)},1.5),!0):void 0},t.prototype.hurtZombies=function(a,t){var e=this;void 0===t&&(t=this.baseData.atk),null!=a&&a.forEach(function(a){if(null!=e.baseData){var o=window.pzazombieManager.getZombie(a);o&&o.hurt(t,e.baseData,s.pzaAttackType.FLOOR_ATK)}})},t.prototype.findFixRangeZombies=function(a,t){if(null==a)return null;var e=[];return window.pzazombieManager.zombieMap.forEach(function(o,n){null==o||null==n||n.isDead||null==n.logicPos||n.buffData.hasBuff(p.pzaBuffType.DIVE)||n.buffData.hasBuff(p.pzaBuffType.FLY)||n.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(p.pzaBuffType.INVINCIBLE)||r.pzaUtil.getDistance(a,n.logicPos)<=t&&e.push(o.baseData)}),e},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this)},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this)},i([d],t)}(c.pzaBasePlant));e.pzaCaiWen=h,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaCatLitterPot:[function(a,t,e){"use strict";cc._RF.push(t,"16bd7Tp+M1N14vv2xRSCKwj","pzaCatLitterPot");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCatLitterPot=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGameConfig"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaTrackBullet"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaPlantEnum"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.animation.playAnimation("idle",!0),null!=t&&null!=t.plantData){var e=p.pzaGameConfig.getPlantConfig(t.plantData.plantType);null!=e&&(this.atkInterval=e.atkInterval)}this.playNormalAni(),this.baseData.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead){var e=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaplantManager.plantDataMap.get(e),n=window.pzaplantManager.pumpkinDataMap.get(e);null!=o&&(o.plantData.plantType==d.pzaPlantEnum.PEA_CATTAIL?o.floatY=45:o.floatY=25),null!=n&&(n.floatY=30)}},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();null==e?a.animation.playAnimation("idle",!1,t):a.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("idle2",!1,t)},function(){a.attack(e)})},function(){a.attack(e)})};this.animation.playAnimation("idle",!1,t)},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=l.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o),i=e.getComponent(c.pzaTrackBullet);i&&i.init(this.baseData.atk,a,n,this.baseData.yIndex)}}}},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(u.pzaBuffType.DIVE)&&!r.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var p=s.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(u.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.flaserDeath=function(){var a=this;this.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FLASER,-1)),this.pauseSelf(),this.node.scaleX=1,this.node.scaleY=.3,this.scheduleOnce(function(){a.node.scale=1,a.close()},5),this.animation.node.stopAllActions()},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaCatLitterPot=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaTrackBullet":"pzaTrackBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","./pzaBasePlant":"pzaBasePlant"}],pzaCatSunBullet:[function(a,t,e){"use strict";cc._RF.push(t,"ea889YFEPhI5p1BWwddmlka","pzaCatSunBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCatSunBullet=void 0;var r=a("../../Common/pzaWorldEventManager"),p=a("./pzaTrackBullet"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.close=function(){r.pzaWorldEventManager.removeListener(r.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.hasColl=!0,null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),window.pzaplantManager.plantCreateSun2(this.node.getPosition(),.5,15),a.prototype.close.call(this)},i([s],t)}(p.pzaTrackBullet));e.pzaCatSunBullet=c,cc._RF.pop()},{"../../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaTrackBullet":"pzaTrackBullet"}],pzaCatSun:[function(a,t,e){"use strict";cc._RF.push(t,"8c9ffB8IU5FTaqE+aik6pNB","pzaCatSun");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCatSun=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../Bullet/pzaTrackBullet"),c=a("../Data/pzaBuffData"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.atkTime=0,t.sunTime=25,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.sunTime=3,this.atkTime=0,this.aniCom()},t.prototype.aniCom=function(){var a=this;if(this.atkTime>0)this.animation.playAnimation("idle1",!1,this.aniCom.bind(this));else{var t=this.findAttackTarget();if(t)return this.atkTime=this.atkInterval,void this.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("idle1",!1,a.aniCom.bind(a))},function(){a.attack(t)});this.animation.playAnimation("idle1",!1,this.aniCom.bind(this))}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.atkTime-=t,this.sunTime-=t,this.sunTime<=0&&(this.sunTime=25,window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1,25))},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(c.pzaBuffType.DIVE)&&!r.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(c.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o),i=e.getComponent(s.pzaTrackBullet);i&&i.init(this.baseData.atk,a,n,this.baseData.yIndex)}}}},i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([h],t)}(u.pzaBasePlant);e.pzaCatSun=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaTrackBullet":"pzaTrackBullet","../Data/pzaBuffData":"pzaBuffData","./pzaBasePlant":"pzaBasePlant"}],pzaCatapultZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"85f89w++5RNd57awPdDQ5Ns","pzaCatapultZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCatapultZombie2=void 0;var r=a("./pzaCatapultZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=p.pzaZombieSlotType.helmet_black,t.hatType=p.pzaZombieSlotType.helmet_black,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,-14.95,68.85))],[p.pzaZombieSlotType.helmet_black,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.helmet_black).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.helmet_black+"1",0,0)).addState(new p.pzaZombieSlotAtt(2,p.pzaZombieSlotType.helmet_black+"2",0,6.97)).addState(new p.pzaZombieSlotAtt(3,p.pzaZombieSlotType.helmet_black+"3",-5,8.36))]])},i([s],t)}(r.pzaCatapultZombie));e.pzaCatapultZombie2=c,cc._RF.pop()},{"./pzaCatapultZombie":"pzaCatapultZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaCatapultZombie:[function(a,t,e){"use strict";cc._RF.push(t,"b8c45xHmH5BNaHGZppu8KLF","pzaCatapultZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCatapultZombie=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaThrowBullet"),c=a("../Data/pzaZombieEnum"),u=a("../Plant/pzaAttackType"),d=a("../pzaGameState"),h=a("../pzaSpineTool"),m=a("./pzaBaseZombie"),f=a("./pzaZombieSlot"),z=a("./pzaZombieState"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.firstStopXPos=-1,t.canAttack=!1,t.leftBullet=20,t.attacking=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[f.pzaZombieSlotType.butter,new f.pzaZombieSlot(this.animation.spineAnimation,f.pzaZombieSlotType.butter).addState(new f.pzaZombieSlotAtt(1,f.pzaZombieSlotType.butter,69.04,2.04,-90.39))]])},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.animation.node.x=65},t.prototype.preview=function(t,e,o){a.prototype.preview.call(this,t,e,o),this.animation.node.x=-50},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.leftBullet=20,this.animation.node.x=45,this.canAttack=!1,this.attacking=!1;var e=d.pzaGameState.map.getMapColumn(),o=d.pzaGameState.map.getBlockLogicPos(e-1,t.yIndex,0,0);this.firstStopXPos=o.x},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead&&(this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled()&&(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),this.rollingPlant(),!this.attacking)))if(this.pushBackTime>0)this.pushBackMove(a);else{if(!this.canAttack&&null!=this.baseData.logicPos&&this.baseData.logicPos.x<=this.firstStopXPos&&(this.canAttack=!0),this.canAttack&&this.leftBullet>0){var t=this.findCapTarget();if(null!=t)return this.baseData.zombieData.atkInterval-=a,void(this.baseData.zombieData.atkInterval<=0?this.attack(a,t):this.zombieState!=z.pzaZombieState.STAY&&this.playStayAnimation())}this.updateMove(a)}},t.prototype.rollingPlant=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a=this.findTarget();if(null!=a){var t=""+a.xIndex+a.yIndex,e=window.pzaplantManager.plantDataMap.get(t);if(null!=e){var o=window.pzaplantManager.getPlantByData(e);o&&o.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.ROLLING)}var n=window.pzaplantManager.plantEnvDataMap.get(t);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.ROLLING)}var r=window.pzaplantManager.pumpkinDataMap.get(t);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.ROLLING)}}}},t.prototype.hurt=function(t,e,o){var n=this;if(void 0===o&&(o=u.pzaAttackType.FLOOR_ATK),this.baseData&&!this.baseData.isDead)if(o!=u.pzaAttackType.SPIKE)a.prototype.hurt.call(this,t,e,o);else if(this.baseData.zombieDie(),l.pzaSoundManager.playAudio("ball_fall"),this.animation.playAnimation("jump",!1,function(){n.death(!0)}),null!=e){var i=window.pzaplantManager.getPlantByData(e);i&&i.hurt(50,this.baseData,u.pzaAttackType.BANG)}},t.prototype.death=function(a){var t=this;this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData),a?(this.playDeathAnimation(function(){t.close()}),l.pzaSoundManager.playAudio("explosion")):this.close()},t.prototype.findCapTarget=function(){for(var a=0;a<this.baseData.xIndex;a++){var t=window.pzaplantManager.getCanAttackPlantData(a,this.baseData.yIndex,!0);if(null!=t)return t}return null},t.prototype.attack=function(a,t){var e=this;this.zombieState=z.pzaZombieState.EAT_ATK,this.attacking=!0,l.pzaSoundManager.playAudio("CatapultAtk"),this.animation.playAnimation("attack",!1,function(){e.baseData&&(e.refreshQiu(e.leftBullet-1),e.leftBullet--,e.attacking=!1,e.baseData.zombieData.atkInterval=2)},function(){e.shoot(t)})},t.prototype.zombieDying=function(){a.prototype.zombieDying.call(this),this.changeSkin(this.leftBullet>0?"che2":"che2_2")},t.prototype.zombieIntact=function(){a.prototype.zombieIntact.call(this),this.changeSkin(this.leftBullet>0?"che1":"che1_2")},t.prototype.refreshQiu=function(a){this.zombieHurtState==c.pzaHurtStateEnum.INTACT?this.changeSkin(a>0?"che1":"che1_2"):this.changeSkin(a>0?"che2":"che2_2")},t.prototype.shoot=function(a){if(null!=a&&null!=a.logicPos&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){var o=h.pzaSpineTool.findBonePos(this.animation.spineAnimation,"qiu0",this.node);if(o){e.setParent(t),e.setPosition(this.node.parent.convertToNodeSpaceAR(o));var n=e.getComponent(s.pzaThrowBullet);null!=n&&n.init(!0,this.baseData.yIndex,this.baseData.atk,a,a.logicPos,a.xIndex)}}}}},i([b({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([g],t)}(m.pzaBaseZombie);e.pzaCatapultZombie=v,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaCatcusBlover:[function(a,t,e){"use strict";cc._RF.push(t,"4511e2ReeVFLrwyHYfx3MaD","pzaCatcusBlover");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCatcusBlover=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaWorldEventManager"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaZombieEnum"),h=a("../pzaGameState"),m=a("./pzaBlover"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.deadTime=0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.lifeTime=0,this.trigger=!1,l.pzaSoundManager.playAudio("Blover"),this.baseData.isDead=!0,this.animation.playAnimation("attack1",!1,function(){e.deadTime=.3,e.animation.playAnimation("attack2",!0)})},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.deadTime>0&&(this.deadTime-=t,this.deadTime<=0&&(window.pzaplantManager.removePlant(this.baseData),this.death()))},t.prototype.attack=function(){this.trigger=!0,window.pzaMapManager.blowFog(),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.BLOW_WIND,null),window.pzazombieManager.zombieMap.forEach(function(a){var t=a.baseData;if(!(t.isDead||t.buffData.hasBuff(u.pzaBuffType.DIVE)||t.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||t.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT))){var e=1;t.zombieData.zombieType!=d.pzaZombieEnum.ZOMBONI&&t.zombieData.zombieType!=d.pzaZombieEnum.ZOMBONI2&&t.zombieData.zombieType!=d.pzaZombieEnum.CATAPULT_ZOMBIE&&t.zombieData.cate!=d.pzaZombieCate.Gargantuar||(e=.25),a.pushBack(e)}});for(var a=h.pzaGameState.map.getMapRow(),t=h.pzaGameState.map.getMapOriPos(),e=t.x-600,o=t.y,n=0;n<a;n++)for(var i=o+h.pzaGameState.map.yPos[n]+80,r=0;r<10;r++)this.shoot(cc.v2(e+50*r,i),n)},t.prototype.shoot=function(a,t){var e=p.pzaNodeManager.getBulletNode(),o=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);o.setParent(e),o.setPosition(a);var n=o.getComponent(c.pzaBaseBullet);n.maxLifeTime=5,n.init(t,this.baseData.atk,0,null,cc.v2(1,0),!0)},i([y({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([z],t)}(m.pzaBlover);e.pzaCatcusBlover=g,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBlover":"pzaBlover"}],pzaCatcusFlower:[function(a,t,e){"use strict";cc._RF.push(t,"f92denhaaRD65eMflr/OudF","pzaCatcusFlower");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCatcusFlower=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaWorldEventManager"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.shootNode=null,t.atkCd=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.playIdleAni(),this.atkCd=3,l.pzaSoundManager.playAudio("Blover"),d.pzaGameState.usePlanternBlover=!0},t.prototype.playIdleAni=function(){var a=this;if(this.atkCd>0)this.animation.playAnimation("idle",!1,this.playIdleAni.bind(this));else{var t=this.findAttackTarget();if(null!=t)return this.atkCd=this.atkInterval,void this.animation.playAnimation("attack1",!1,function(){a.playIdleAni()},function(){l.pzaSoundManager.playAudio("Cactus"),a.attack(t)});this.animation.playAnimation("idle",!1,this.playIdleAni.bind(this))}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.atkCd-=t},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x<a.baseData.logicPos.x||o.buffData.hasBuff(u.pzaBuffType.DIVE)||o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||(o.buffData.hasBuff(u.pzaBuffType.FLY)?e=o:t=o)}),null!=e?e:null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(){var a=this;if(window.pzaMapManager.blowFog(22),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.BLOW_WIND,null),null!=this.baseData&&!this.baseData.isDead){window.pzazombieManager.zombieMap.forEach(function(t){var e=t.baseData;e.isDead||e.buffData.hasBuff(u.pzaBuffType.DIVE)||e.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||e.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||t.baseData.yIndex!=a.baseData.yIndex||t.pushBack(.083)});for(var t=0;t<4;t++){var e=p.pzaNodeManager.getBulletNode();if(null==e)return;var o=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null==o)return;o.setParent(e);var n=this.shootNode.convertToWorldSpaceAR(cc.v2()),i=e.convertToNodeSpaceAR(n);i.y-=30*t,o.setPosition(i);var l=o.getComponent(c.pzaBaseBullet);if(null==l)return;l.needShadow=!1,l.init(this.baseData.yIndex,this.baseData.atk,1,null,cc.v2(1,0),!0),o.scale=.7}}},i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([f],t)}(h.pzaBasePlant);e.pzaCatcusFlower=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaCattail:[function(a,t,e){"use strict";cc._RF.push(t,"5f4ddIxVelOYKh2ks0pgTsL","pzaCattail");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCattail=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../../Common/pzaWorldEventManager"),c=a("../Bullet/pzaTrackBullet"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaPlantEnum"),h=a("../pzaGameState"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.atkAniTime=1.4,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.BACK_HOME,this.close,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.GAME_OVER,this.close,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.BACK_HOME,this.realClose,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.GAME_OVER,this.realClose,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.BACK_HOME,this.realClose,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.GAME_OVER,this.realClose,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack"),h.pzaGameState.onlyShroomCofee=!1,this.animation.setAnimationSkin("skin1")},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null==e)a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t));else{var o=a.atkAniTime/a.atkInterval*2;a.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("idle2",!1,t)},function(){a.attack(e)},o)},function(){a.attack(e)},o)}};this.animation.playAnimation("idle",!1,t)},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(u.pzaBuffType.DIVE)&&!r.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(u.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o),i=e.getComponent(c.pzaTrackBullet);i&&i.init(this.baseData.atk,a,n,this.baseData.yIndex)}}}},t.prototype.close=function(){if(a.prototype.close.call(this),!this.inUI){var t=""+this.baseData.xIndex+this.baseData.yIndex;null!=window.pzaplantManager.pumpkinDataMap.get(t)&&window.pzaplantManager.createPlant(d.pzaPlantEnum.LILY_PAD,this.baseData.xIndex,this.baseData.yIndex)}},t.prototype.realClose=function(){a.prototype.close.call(this)},i([y({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([y({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([z],t)}(m.pzaBasePlant);e.pzaCattail=g,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaTrackBullet":"pzaTrackBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaChannelBiLi:[function(a,t,e){"use strict";cc._RF.push(t,"38c62XJLX1EzL0VQD7ad4bI","pzaChannelBiLi");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelBiLi=void 0;var i=a("../Common/pzaLocalData"),r=a("../Common/pzaSoundManager"),p=a("../Common/pzaStatisticsMgr"),l=a("../Common/pzaWorldEventManager"),s=a("../View/pzaCommonMask"),c=a("./pzaChannelWeb"),u=a("./pzakc"),d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="bl",t.channelId=6,t.paraMap=new Map([["appId","biligame6b65c7dd5e4a917b"],["vedioAd","bili-211735109062822394"],["ctrlId","676cbd1dac07a817fa283c1e"],["gid",""]]),t.sharePicsArr=[],t.shareTitle="",t.shareImgId="",t.channelObj=window.bl,t.sid=null,t.ruanzhu="\u8457\u4f5c\u6743\u4eba: \u62d3\u7ef4\u4fe1\u606f\u7cfb\u7edf\u80a1\u4efd\u6709\u9650\u516c\u53f8\n\u767b\u8bb0\u53f7:2024SA0021151",t.onShowCall=null,t.authorizationButton=null,t.shareIndex=0,t.startTime=0,t}return n(t,a),t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.hasPrivacy=function(){return!0},t.prototype.exit=function(){this.channelObj.exitMiniProgram({isFullExit:!0})},t.prototype.init=function(t){var e=this;console.log("bl init"),a.prototype.init.call(this,t);var o=this.channelObj;o.onShow(function(a){cc.game.resume(),r.pzaSoundManager.resumeMusic(),e.onShowCall&&e.onShowCall(),e.onShowCall=null,console.log("onshow res:",a);var t=u.default.getData("sidebar",{today:"",canGet:"0"});"021036"==a.scene&&(t.canGet="1"),u.default.saveData("sidebar",t),l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.UPDATE_SIDEVIEW_STATE,null)}),o.onHide(function(){cc.game.pause(),e.isShare&&(e.shareTime=(new Date).getTime())});var n=u.default.getData("sid",null);n||(n=this.channelObj.getLaunchOptionsSync().scene,u.default.saveData("sid",n));var p={id:this.getPara("ctrlId"),sid:n},s=this;u.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",p,function(a,o){a?u.default.err(a):""+o.code=="0"?(e.ctrl=o.data,u.default.log("b\u7ad9\u8fd4\u56de",e.ctrl),i.pzaLocalData.maxAdShareCount=parseInt(s.ctrl.p2),i.pzaLocalData.maxShareRwdCount=parseInt(s.ctrl.p3),i.pzaLocalData.data.showBeginViewMax=parseInt(s.ctrl.p5),i.pzaLocalData.data.showDaveViewMax=parseInt(s.ctrl.p5),i.pzaLocalData.data.showGardenViewMax=parseInt(s.ctrl.p5),i.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(s.ctrl.p6),e.blLogin(function(){t&&t()})):u.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))});var c=u.default.getData("sidebar",null),d={today:"",canGet:""};c&&(d=c),o.checkScene?o.checkScene({scene:"sidebar",success:function(a){console.log("check scene success: ",a.isExist),d.canGet="0","021036"==e.channelObj.getLaunchOptionsSync().scene&&(d.canGet="1"),u.default.saveData("sidebar",d),l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.UPDATE_SIDEVIEW_STATE,null)},fail:function(a){console.log("check scene fail:",a),d.canGet="-1",u.default.saveData("sidebar",d)}}):console.log("\u6ca1\u6709checkScene"),o.setKeepScreenOn({keepScreenOn:!0})},t.prototype.initSharePic=function(a){null==a||a.length<=0||(this.sharePicsArr=[])},t.prototype.onLoginSuc=function(){var a=this.channelObj.getLaunchOptionsSync().query;a&&a.act&&a.sid&&(this.sid=a.sid,this.shareFrom(),this.getUserInfo(null))},t.prototype.shareFrom=function(){this.sid&&this.channelUserId},t.prototype.getUserInfoToWeb=function(){},t.prototype.getShareResult=function(a,t){if(!this.channelUserId)return t([]);var e={appId:this.getPara("appId"),openId:this.channelUserId,act:a};u.default.jpost("https://ga.gamejym.com/fcm/zijie/getShareResult",e,function(a,e){if(a)return u.default.err(a),void t([]);u.default.log("getShareResult\u8fd4\u56de",e),e&&0===e.code?t(e.data):t([])})},t.prototype.blLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var t=window.bl,e=this;t.login({force:!0,success:function(o){console.log("login \u8c03\u7528\u6210\u529f",o.code),t.getLaunchOptionsSync(),u.default.jpost("https://ga.gamejym.com/fcm/bili/getOpenId",{appId:e.getPara("appId"),code:o.code},function(t,o){return t?(u.default.err(t),void a(t)):(u.default.log("\u83b7\u53d6openId",o),o.openid?(e.channelUserId=o.openid||"",void a(null)):(u.default.err("\u83b7\u53d6openId\u5931\u8d25",o),void a(o)))})},fail:function(t){a(t.errMsg),console.log("login\u8c03\u7528\u5931\u8d25")}})},t.prototype.getShareObj=function(){var a=Math.floor(Math.random()*this.sharePicsArr.length);return this.sharePicsArr[a]},t.prototype.sendUserInfo=function(a){if(null!=a)if(this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};u.default.jpost("https://ga.gamejym.com/fcm/zijie/sendUserInfo",t,function(a,t){a?u.default.err(a):u.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(a,t,e){void 0===e&&(e=!0);var o=this.channelObj,n=this;o.getUserInfo({success:function(a){console.log("getUserInfo\u8c03\u7528\u6210\u529f: ",a.userInfo),n.sendUserInfo({nickName:a.userInfo.nickName,avatarUrl:a.userInfo.avatarUrl})},fail:function(a){console.log("getUserInfo\u8c03\u7528\u5931\u8d25: ",a.errMsg)}})},t.prototype.destroyAuthorizationButton=function(){try{if(!this.authorizationButton)return;this.authorizationButton.destroy(),this.authorizationButton=null}catch(a){this.authorizationButton=null,console.error(a)}},t.prototype.canShare=function(){return!0},t.prototype.showBanner=function(a,t){var e=this,o=this.getPara("bannerAd");if(o){u.default.log("showBanner isShow",o);var n=this.channelObj,i={adUnitId:o};this.bannerAd=n.createBannerAd(i),this.bannerAd.onResize(function(a){console.log("banner onResize===",a.height,a.width);var o=t?t(a):{top:e.getSysInfo().windowHeight-a.height,left:(e.getSysInfo().windowWidth-a.width)/2};e.bannerAd.style.top=o.top,e.bannerAd.style.left=o.left}),this.bannerAd.onLoad(function(){e.bannerAd.show().then(function(){u.default.log("banner\u52a0\u8f7d\u6210\u529f")}).catch(function(a){e.bannerAd=null,u.default.log("showBanner err:"+JSON.stringify(a))})})}},t.prototype.closeBanner=function(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)},t.prototype.showBannerByTime=function(a){void 0===a&&(a=!1)},t.prototype.closeBannerByTime=function(){this.closeBanner()},t.prototype.copyToClip=function(a,t){this.channelObj.setClipboardData({data:a,success:function(){t(null)},fail:function(a){t(a)}})},t.prototype.showVideo=function(a){var t=this;p.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:a.adsid},{name:"adname",value:a.posName});var e=this.getPara("vedioAd");if(e){cc.game.pause(),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;o.videoFns.onLoad=function(){u.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},this.startTime=Date.now(),o.videoFns.onError=function(e){u.default.err("onError",e),cc.game.resume(),s.pzaCommonMask.hideMask(),r.pzaSoundManager.resumeMusic(),a.failCall(),a.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:-1},{name:"adname",value:a.posName}),t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},o.videoFns.onClose=function(e){if(cc.game.resume(),s.pzaCommonMask.hideMask(),r.pzaSoundManager.resumeMusic(),e&&e.isEnded){if(a.sucCall(),a.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:0},{name:"adname",value:a.posName}),u.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+a.posName),!u.default.getData("ttAdReport",0)||!o.channelUserId)return void console.log("\u9700\u8981\u5148\u6fc0\u6d3b\u624d\u80fd\u56de\u4f20\u5173\u952e\u884c\u4e3a");var n=t.channelObj.getLaunchOptionsSync().query.clickid;if(!n)return void console.log("\u65e0clickid");u.default.jpost("https://ga.gamejym.com/fcm/ttAdReport/report",{appId:o.getPara("appId"),type:"game_addiction",openId:o.channelUserId,clickid:n},function(a,t){a?u.default.err(a):u.default.log("\u56de\u4f20\u5173\u952e\u884c\u4e3a\u8fd4\u56de",t)}),i.pzaLocalData.bpWatchAd()}else a.failCall(),a.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:1},{name:"adname",value:a.posName})},o.rewardedVideoAd.onLoad(o.videoFns.onLoad),o.rewardedVideoAd.onError(o.videoFns.onError),o.rewardedVideoAd.onClose(o.videoFns.onClose),o.rewardedVideoAd.show().then(function(){u.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(){o.rewardedVideoAd.load().then(function(){return u.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){}).catch(function(){cc.game.resume(),s.pzaCommonMask.hideMask()})}).catch(function(){cc.game.resume(),s.pzaCommonMask.hideMask()})})}},t.prototype.showInter=function(a){var t=this.getPara("insertAd");if(t){var e=this.channelObj;this.ctrl&&this.ctrl.p1&&parseInt(this.ctrl.p1)||a?(u.default.log("showInter isShow",t),this.interstitialAd=e.createInterstitialAd({adUnitId:t}),this.interstitialAd.show().then(function(){u.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){u.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})):u.default.log("\u63d2\u5c4f\u4e0d\u5c55\u793a")}},t.prototype.closeInter=function(){this.interstitialAd&&this.interstitialAd.close&&this.interstitialAd.close()},t.prototype.showDesktop=function(){},t.prototype.checkShortcut=function(a){window.bl.checkShortcut({success:function(t){console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f",t.status),t.status&&0==t.status.exist?a.sucCall():a.failCall()},fail:function(t){console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",t.errMsg),a.failCall()}})},t.prototype.addShortcut=function(a){this.channelObj.addShortcut({success:function(){u.default.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f"),a.sucCall()},fail:function(t){u.default.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25:"+t.errMsg),a.failCall()}})},t.prototype.shareAppMessage=function(a,t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.canShare()){var o=this.getShareObj(),n="";if(a&&a.act&&(n=a.act),n){var i=this;i.shareFailBack=null,i.shareSucBack=null,i.isShare=!1,"recruit_share"==a.act&&(i.isShare=!0,i.shareFailBack=e,i.shareSucBack=t);var r={appId:this.getPara("appId"),openId:this.channelUserId,act:n};u.default.jpost("https://ga.gamejym.com/fcm/zijie/shareTo",r,function(a,t){if(a)u.default.err(a);else{u.default.log("shareTo\u8fd4\u56de",t);var e={title:o.title,imageUrl:o.url,imageUrlId:o.id,query:null};t&&0===t.code&&(e.query="sid="+t.data.sid+"&act="+n,u.default.log("shareQuery",e.query)),i.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,query:e.query,success:function(){console.log("act share succ"),i.shareSucBack&&i.shareSucBack()},fail:function(){console.log("act share fail"),i.shareFailBack&&i.shareFailBack()}})}})}else{this.shareFailBack=e,this.shareSucBack=t,this.isShare=!0;var p=this;this.channelObj.shareAppMessage({success:function(){console.log("11share succ"),p.shareSucBack&&p.shareSucBack()},fail:function(){console.log("22share fail"),p.shareFailBack&&p.shareFailBack()}})}}},t.prototype.isShowSideView=function(a){var t=u.default.getData("sidebar",{today:"",canGet:"-1"});window.bl.navigateToScene({scene:"sidebar",success:function(e){console.log("navigate to scene success",e),"021036"==e.scene&&(t.canGet="1"),u.default.saveData("sidebar",t),a&&a(!0)},fail:function(t){console.log("navigate to scene fail: ",t),a&&a(!1)}})},t.prototype.reportScene=function(){this.channelObj.reportScene({sceneId:7,success:function(a){console.log(a)},fail:function(a){console.log(a)}})},t.unionid=null,t}(c.pzaChannelWeb);e.pzaChannelBiLi=d,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaWorldEventManager":"pzaWorldEventManager","../View/pzaCommonMask":"pzaCommonMask","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelHw:[function(a,t,e){"use strict";cc._RF.push(t,"10b6dtUpnBJZ7ZqMj0lHM74","pzaChannelHw");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelHw=void 0;var i,r=a("../Common/pzaLocalData"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaUIManager"),s=a("../Common/pzaUtil"),c=a("../Common/pzaWorldEventManager"),u=a("../Load/pzaBundleObjectPool"),d=a("../Load/pzaPreLoadManager"),h=a("./pzaChannel"),m=a("./pzaChannelWeb"),f=a("./pzakc"),z=a("./pzaNativeInterAd");(function(a){a[a.Show=0]="Show",a[a.Hide=1]="Hide"})(i||(i={}));var y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="hw",t.paraMap=new Map([["appId","113525781"],["bannerAd","testw6vs28auh3"],["nativeInsertAd","testu7m3hc4gvm"],["videoAd","testx9dtjwj8hp"],["ctrlId","67e4f93fc8946b1700d96065"]]),t.channelObj=window.qg,t.bannerState=i.Hide,t.privacyStr=['\u66f4\u65b0\u65e5\u671f: <b>2021\u5e7412\u670812\u65e5</b> \u751f\u6548\u65e5\u671f: <b>2021\u5e7412\u670812\u65e5</b>\n\n<b>\u5357\u4eac\u6854\u67da\u6aac\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u6854\u67da\u6aac\u201d\u6216\u201c\u6211\u4eec\u201d\uff09</b>\u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n<color=#009EFF">\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f</color>\n\n\u7535\u5b50\u90ae\u4ef6: <b>lpx@gamejym.com</b>\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5e02\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885718\u53f71\u680b\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n<color=#009EFF">\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a</color>\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n<color=#009EFF">\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5</color>\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n<b>\u8bbe\u5907\u6743\u9650</b>\t<b>\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684</b>\t<b>\u662f\u5426\u8be2\u95ee</b>\t<b>\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650</b>\n<b>\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef</b>\n<b>\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef</b>\n<b>\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef</b>\n<b>\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef</b>\n<b>\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef</b>\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n<color=#009EFF">1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a     \n\n<color=#009EFF">1.1 \u6ce8\u518c\u3001\u767b\u5f55</color>\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n<color=#009EFF">1.2 \u8ba4\u8bc1</color>\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002                                 \n\n<color=#009EFF">1.3 \u4fe1\u606f\u53d1\u5e03</color>\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n<color=#009EFF">1.4 \u5b89\u5168\u8fd0\u884c</color>\n\n<color=#009EFF">1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd</color>\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n<color=#009EFF">1.4.2 \u65e5\u5fd7\u4fe1\u606f</color>\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n<color=#009EFF">1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4</color>\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n<color=#009EFF">1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n<color=#009EFF">2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528</color>\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n<color=#009EFF">3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">3.1\u5171\u4eab</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n<color=#009EFF">3.2 \u8f6c\u8ba9</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n<color=#009EFF">3.3 \u62ab\u9732</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n<color=#009EFF">3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n<color=#009EFF">4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">4.1 \u5b58\u50a8\u5730\u70b9</color>\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002                       \n\n<color=#009EFF">4.2 \u5b58\u50a8\u671f\u9650</color>\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n<color=#009EFF">5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168</color>\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n<color=#009EFF">6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n<color=#009EFF">6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f</color>\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n<color=#009EFF">6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9</color>\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n<color=#009EFF">6.2 \u6ce8\u9500\u5e10\u53f7</color>\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 <b>lpx@gamejym.com</b>\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n<color=#009EFF">6.3 \u6295\u8bc9\u4e3e\u62a5</color>\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 <b>lpx@gamejym.com</b> \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n<color=#009EFF">6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56</color>\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n<color=#009EFF">6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5</color>\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n<color=#009EFF">7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e</color>\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n<color=#009EFF">8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5</color>\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002'],t.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u62d3\u7ef4\u4fe1\u606f\u7cfb\u7edf\u80a1\u4efd\u6709\u9650\u516c\u53f8  \u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2024SA0026397\n",t.videoReady=!0,t.videoAdClickDelay=null,t.videoParas=null,t.showBannerCDOver=!0,t.bannerTimeId=-1,t.showInterCDOver=!0,t}return n(t,a),t.prototype.hasPrivacy=function(){return!0},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.exit=function(){this.channelObj.exitApplication()},t.prototype.qgLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var t=this;console.log("Sign-in",this.getPara("appId")),this.channelObj.gameLoginWithReal({forceLogin:1,appid:this.getPara("appId"),success:function(e){console.log(" game login with real success:"+JSON.stringify(e)),t.channelUserId=e.playerId,a&&a("login succ")},fail:function(t,e){console.log("game login with real fail:"+t+", code:"+e),7004!=e&&2012!=e||(console.log("\u73a9\u5bb6\u53d6\u6d88\u767b\u5f55\uff0c\u8fd4\u56de\u6e38\u620f\u754c\u9762\u8ba9\u73a9\u5bb6\u91cd\u65b0\u767b\u5f55\u3002"),a&&a("login fail")),7021==e&&(console.log("The player has canceled identity verification. Forbid the player from entering the game."),a&&a("login fail"))}})},t.prototype.sendUserInfo=function(a){if(null!=a)if(r.pzaLocalData.data.playerNick=a.nickName,r.pzaLocalData.data.playerAvatar=a.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/vivo/sendUserInfo",t,function(a,t){a?f.default.err(a):f.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(){},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this,n=this.getPara("ctrlId");if(n){var i={id:n};f.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(a,n){a?f.default.err(a):""+n.code=="0"?(e.ctrl=n.data,f.default.log("\u8fd4\u56de",e.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),r.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),r.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),e.qgLogin(function(){t&&t()}),e.reLoadVideo()):f.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}cc.game.on(cc.game.EVENT_HIDE,function(){console.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0")}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("\u91cd\u65b0\u8fd4\u56de\u6e38\u620f"),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.REPORT_AD_SHOW,null)})},t.prototype.reLoadVideo=function(){var a=this;this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:this.getPara("videoAd"),success:function(){console.log("loadAndShowVideoAd createRewardedVideoAd success")},fail:function(a,t){console.log("loadAndShowVideoAd createRewardedVideoAd fail: "+a+","+t)},complete:function(){console.log("loadAndShowVideoAd createRewardedVideoAd complete")}}),this.rewardedVideoAd.onLoad(function(){console.log("videoAd loaded.")}),this.rewardedVideoAd.onError(function(t){console.error("load ad error:"+JSON.stringify(t)),cc.game.resume(),p.pzaSoundManager.resumeMusic(),a.videoParas.endCall&&a.videoParas.endCall(),a.videoParas.failCall&&a.videoParas.failCall(),a.channelObj.showToast({message:"\u6682\u65e0\u5e7f\u544a"})}),this.rewardedVideoAd.onClose(function(t){f.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u5173\u95ed",t),t&&t.isEnded||void 0===t?(console.log("\u64ad\u653e\u6fc0\u52b1\u89c6\u9891\u7ed3\u675f\uff0c\u7ed9\u4e88\u5956\u52b1"),a.videoParas.sucCall&&a.videoParas.sucCall(),f.default.eventReport("showVideo\u5b8c\u6210-"+a.videoParas.posName),r.pzaLocalData.bpWatchAd()):(console.log("\u64ad\u653e\u6ca1\u7ed3\u675f\uff0c\u4e0d\u7ed9\u4e88\u5956\u52b1"),a.videoParas.failCall()&&a.videoParas.failCall()),cc.game.resume(),p.pzaSoundManager.resumeMusic(),a.videoParas.endCall&&a.videoParas.endCall()}),this.rewardedVideoAd.load()},t.prototype.showVideo=function(a){var t=this;if(!this.videoReady)return cc.game.resume(),p.pzaSoundManager.resumeMusic(),this.videoParas.failCall&&this.videoParas.failCall(),this.videoParas.endCall&&this.videoParas.endCall(),void this.channelObj.showToast({message:"\u6682\u65e0\u5e7f\u544a"});this.videoReady=!1,setTimeout(function(){t.videoReady=!0},3e3),this.videoParas=a,this.rewardedVideoAd.show(),this.rewardedVideoAd.load()},t.prototype.showBanner=function(){var a=this;if(this.showBannerCDOver){var t=this.getPara("bannerAd");if(t)if(this.bannerState!=i.Show){this.bannerState=i.Show,f.default.log("showBanner",t);var e=this.channelObj.getSystemInfoSync().safeArea.height;this.bannerAd=this.channelObj.createBannerAd({adUnitId:t,adIntervals:30,style:{top:e-57,left:0,height:57,width:360}}),this.bannerAd.onLoad(function(){console.log("bannerAd  onload success"),a.bannerState==i.Hide&&a.closeBanner(),a.bannerState==i.Show&&(a.showBannerCDOver=!1,setTimeout(function(){a.showBannerCDOver=!0},3e4))}),this.bannerAd.onError(function(a){f.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.bannerAd.show()}else f.default.log("\u5df2\u7ecf\u663e\u793abanner")}},t.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&this.bannerAd.hide()},t.prototype.showBannerByTime=function(a){var t=this;void 0===a&&(a=!1);var e=30;this.getCtrl("p4")<1?f.default.log("banner\u4e0d\u5c55\u793a"):(this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<30&&(e=30),this.showBanner(a,null,"battle"),this.bannerTimeId=setInterval(function(){t.showBanner(a,null,"battle")},1e3*e))},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.showInter=function(a){var t=s.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",h.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",t),(a||h.pzaChannel.instance().getCtrl("p10")>=t)&&this.createNativeInterAd()},t.prototype.createNativeInterAd=function(){var a=this.getPara("nativeInsertAd");if(a)if(this.showInterCDOver){if(0!=this.getCtrl("p21")){var t=this,e=h.pzaChannel.instance().getCtrl("p11");console.log("p11",e),this.nativeInterAd=this.channelObj.createNativeAd({adUnitId:a,success:function(){console.log("loadNativeAd loadNativeAd : success"),t.showInterCDOver=!1,setTimeout(function(){t.showInterCDOver=!0},1e3*e)},fail:function(a,t){console.log("loadNativeAd loadNativeAd fail: "+a+","+t)},complete:function(){console.log("loadNativeAd loadNativeAd : complete")}}),this.nativeInterAd.offLoad(),this.nativeInterAd.onLoad(function(a){var e=h.pzaChannel.instance().getCtrl("p12");console.log("p12",e);var o=this.getCtrl("p26"),n=s.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",h.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",n);var i=0;.01*o>=n&&(i=1e3),setTimeout(function(){var e=a.adList[0];t.createInterAdNode(e.adId,e.imgUrlList,e.title,e.source,e.clickBtnTxt)},e*i)}),this.nativeInterAd.offError(),this.nativeInterAd.onError(function(a){console.log("ad demo : loadNativeAd onError enter"+a.errCode),console.log("ad demo : loadNativeAd onError enter"+a.errMsg)}),this.nativeInterAd.load()}}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},t.prototype.createInterAdNode=function(a,t,e,o,n){console.log("createInterAd adid="+a),u.pzaBundleObjectPool.requestInstantByUrl(d.pzaResourceUrl.NATIVE_INTER_AD,!1,function(i,r){null==i&&null!=r?l.pzaUIManager.instance&&l.pzaUIManager.instance.node&&(r.setParent(l.pzaUIManager.instance.node),r.zIndex=999,r&&r.getComponent(z.pzaNativeInterAd).init(a,t,e,o,n)):console.error(i)})},t.prototype.reportAdShow=function(a){console.log("reportAdShow:",a),this.nativeInterAd.reportAdShow({adId:a})},t.prototype.reportAdClick=function(a){console.log("reportAdClick:",a),this.nativeInterAd.reportAdClick({adId:a})},t.prototype.shareAppMessage=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.channelObj.systemShare({type:"text/plain",data:"this is a message from quick game.",success:function(){console.info("share text success")},fail:function(a,t){console.info("share text fail --- "+t+":"+a)},cancel:function(){console.info("share cancel ")},complete:function(){console.info("share complete ")}})},t.prototype.addShortcut=function(a){console.log("click hw addShortcut"),this.channelObj.installShortcut({message:"\u6dfb\u52a0\u6e38\u620f\u56fe\u6807\u5230\u4f60\u7684\u684c\u9762",success:function(){console.log("handling install success"),console.log("\u521b\u5efa\u6210\u529f"),a.sucCall&&a.sucCall()},fail:function(a,t){console.log("handling install fail: "+a+", errocode: "+t)},complete:function(){console.log("handling install  complete")}})},t.prototype.checkShortcut=function(a){this.channelObj.hasShortcutInstalled({success:function(t){console.log("hasInstalledsuccess\uff1a "+t),0==t?a.sucCall&&a.sucCall():a.failCall&&a.failCall()},fail:function(a){console.log("hasInstalled fail: "+a)},complete:function(){console.log("hasInstalled complete")}})},t}(m.pzaChannelWeb);e.pzaChannelHw=y,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzaNativeInterAd":"pzaNativeInterAd","./pzakc":"pzakc"}],pzaChannelIOS:[function(a,t,e){"use strict";cc._RF.push(t,"2c6c7wq3+9Eqq7w7Hv7emWW","pzaChannelIOS");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelIOS=void 0;var i=a("./pzaChannelWeb"),r=a("./pzaKDefine"),p=a("./pzakc"),l=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="ios",t}return n(t,a),t.prototype.init=function(t){a.prototype.init.call(this,t),window.showComm=this.showComm,window.exitGame=this.exit,window.showAlert=this.showAlert},t.prototype.copyToClip=function(a){jsb.reflection.callStaticMethod("AppController","copy2Clip:",a)},t.prototype.hasPrivacy=function(){return!!p.default.getData("isAgree",0)},t.prototype.exit=function(){p.default.log("\u9000\u51fa\u6e38\u620f"),jsb.reflection.callStaticMethod("AppController","onExit:",""),cc.game.end()},t.prototype.showVideo=function(a){window.videoSuc=a.sucCall,window.videoFail=a.failCall;var t=a.endCall;a.endCall=function(){cc.game.resume(),t()},cc.game.pause(),window.videoEnd=a.endCall,jsb.reflection.callStaticMethod("AppController","showVideo:","")},t.prototype.showComm=function(){p.default.log("showComm-ios"),jsb.reflection.callStaticMethod("AppController","showComm:","")},t.prototype.showAlert=function(){p.default.log("showAlert-ios"),p.default.sendMsg(r.Msg.showIosAlert)},t}(i.pzaChannelWeb);e.pzaChannelIOS=l,cc._RF.pop()},{"./pzaChannelWeb":"pzaChannelWeb","./pzaKDefine":"pzaKDefine","./pzakc":"pzakc"}],pzaChannelKs:[function(a,t,e){"use strict";cc._RF.push(t,"e9fa8VLpddPsooqAc+gUSe7","pzaChannelKs");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelKs=void 0;var i=a("../Common/pzaLocalData"),r=a("../Common/pzaSoundManager"),p=a("../Common/pzaStatisticsMgr"),l=a("../Common/pzaUtil"),s=a("../Common/pzaWorldEventManager"),c=a("../View/pzaCommonMask"),u=a("./ks_analytics"),d=a("./pzaChannel"),h=a("./pzaChannelWeb"),m=a("./pzakc"),f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="ks",t.channelId=3,t.reportChannel="ks",t.channelGameName="\u690d\u7269\u5927\u6218\u50f5\u5c38",t.paraMap=new Map([["appId","ks681732394039713600"],["vedioAd","2300006644_01"],["insertAd","2300006644_02"],["ctrlId","6653eceda331ce3adb822a39"],["gid","6625cc6ea331ce3adb8228f6"]]),t.sharePicsArr=[{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",url:"https://mmocgame.qpic.cn/wechatgame/a06ia0rK6eLAFOr97s9y4MXbfDz3hjYEjhAT6lWwv10xALzjGl9thAIqw3EYNEwhN/0",id:"Xf4UCePgQ6Owe0gO7nnOkw=="},{title:"\u5927\u54e5\uff0c\u6765\u548c\u59b9\u59b9\u4e00\u8d77\u73a9\u597d\u5417\uff1f",url:"https://mmocgame.qpic.cn/wechatgame/I1v75NcAhVDGbaKAWabMVB4HY5iaW8HfrWOqvibxcq1ic32xLibRswZuVj6txBSykbHl/0",id:"7Ic8CnJeSN+yLEi8xpRO5w=="}],t.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u62d3\u7ef4\u4fe1\u606f\u7cfb\u7edf\u80a1\u4efd\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2024SA0026397",t.channelObj=window.ks,t.sid=null,t.authorizationButton=null,t.onShowCall=null,t.cachedBannerSize=null,t.bannerTimeId=-1,t.shareIndex=0,t.showInterCDOver=!0,t}return n(t,a),t.prototype.hasPrivacy=function(){return!0},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this.channelObj;o.onShow(function(a){cc.game.resume(),r.pzaSoundManager.resumeMusic();var t=o.getLaunchOptionsSync();console.log("onshow result:",t),console.log("onshow res:",a);var n=m.default.getData("sidebar",{today:"",canGet:"0"});t&&t.from&&(t.from.sidebar_new||"sidebar_new"==t.from)&&(n.canGet="1"),m.default.saveData("sidebar",n),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.UPDATE_SIDEVIEW_STATE,null),e.onShowCall&&e.onShowCall()}),o.onHide(function(){cc.game.pause(),e.isShare&&(e.shareTime=(new Date).getTime())});var n=this.getPara("ctrlId"),p=this;if(n){var l=m.default.getData("sid",null);l||(l=p.channelObj.getLaunchOptionsSync().from,m.default.saveData("sid",l));var c={id:n,sid:l};m.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",c,function(a,o){if(a)m.default.err(a);else if(""+o.code=="0"){p.ctrl=o.data,m.default.log("\u5feb\u624b\u8fd4\u56de",p.ctrl),i.pzaLocalData.maxAdShareCount=parseInt(p.ctrl.p2),i.pzaLocalData.maxShareRwdCount=parseInt(p.ctrl.p3),i.pzaLocalData.data.showBeginViewMax=parseInt(p.ctrl.p5),i.pzaLocalData.data.showDaveViewMax=parseInt(p.ctrl.p5),i.pzaLocalData.data.showGardenViewMax=parseInt(p.ctrl.p5),i.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(p.ctrl.p6),e.ksLogin(function(){t&&t()}),console.log("me.channelObj.getLaunchOptionsSync()",p.channelObj.getLaunchOptionsSync());var n=p.channelObj.getLaunchOptionsSync().from;if(n){var r=m.default.getData("game_center",null);r||(r="game_center"==n,m.default.saveData("game_center",r));var l=m.default.getData("search",null);l||(l="search"==n,m.default.saveData("search",l)),console.log("search ",l),console.log("game_center ",r),(r||l)&&(p.ctrl.p31="0"),console.log("me.ctrl.p31 ",p.ctrl.p31)}}else m.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))})}var u=m.default.getData("sidebar",{today:"",canGet:"0"}),h=new Date,f=h.getUTCFullYear()+"-"+h.getUTCMonth()+"-"+h.getUTCDay();u.today!=f&&(u.canGet="0");var z=this.channelObj.getLaunchOptionsSync().sidebar_new;console.log("sidebar_new :",z),z&&(u.canGet="1"),m.default.saveData("sidebar",u),d.pzaChannel.getSharePics("zwdzjs",function(a){e.initSharePic(a)})},t.prototype.onLoginSuc=function(){var a=this.channelObj.getLaunchOptionsSync().query;a&&a.act&&a.sid&&(this.sid=a.sid,this.shareFrom(),null!=i.pzaLocalData.data.playerNick&&null!=i.pzaLocalData.data.playerAvatar||this.getUserInfo(null))},t.prototype.initSharePic=function(a){var t=this;null==a||a.length<=0||(this.sharePicsArr=[],a.forEach(function(a){var e={title:a.txt,url:a.picUrl,id:a.picId};t.sharePicsArr.push(e)}))},t.prototype.ksLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var t=window.ks,e=this;t.login({success:function(t){if(!t.code)return console.log("\u767b\u5f55\u5931\u8d25\uff01"+t.errMsg),void a(t.errMsg);var o=window.ks.getLaunchOptionsSync().query,n=e.getPara("appId");u.default.init(n,t.code,o,function(t){console.log("ks_ana\u521d\u59cb\u5316\u6210\u529f",t),e.channelUserId=t.result.open_id,a(null),console.log("ks-openId:",e.channelUserId)},function(){a("\u83b7\u53d6openid\u5931\u8d25"),console.log("\u521d\u59cb\u5316\u5931\u8d25")}),m.default.jpost("https://ga.gamejym.com/fcm/kuaishou/getOpenId",{appId:e.getPara("appId"),code:t.code},function(a,t){a||m.default.log("get serverTime",t)})},fail:function(){a(null)}})},t.prototype.cacheBanner=function(){var a=this;if(this.getPara("bannerAd")&&(!this.bannerAd||!this.cachedBannerSize)){m.default.log("cacheBanner\u5f00\u59cb,size:",this.cachedBannerSize,"ad:",this.bannerAd);var t=this.channelObj,e={adUnitId:this.getPara("bannerAd"),adIntervals:30,style:{left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1}};this.bannerAd=t.createBannerAd(e),this.bannerAd.onError(function(t){m.default.log("cachedBanner\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(t)),a.bannerAd=null,a.cachedBannerSize=null}),this.bannerAd.onResize(function(t){console.log("cachedBanner onResize===",t.height,t.width),a.cachedBannerSize=t}),this.bannerAd.show().then(function(){m.default.log("cachedBanner\u6210\u529f")}).catch(function(t){m.default.log("cachedBanner err:"+JSON.stringify(t)),a.bannerAd=null,a.cachedBannerSize=null})}},t.prototype.showBanner=function(a,t,e){var o=this,n=this.getPara("bannerAd");if(n&&0!=this.getCtrl("p21")){console.log("getSystemInfo.version",this.getSysInfo().version),m.default.log("showBanner isShow",n,e);var i=this.channelObj,r={adUnitId:n,adIntervals:30,style:{left:0,top:0,width:320,height:100}};this.bannerAd=i.createBannerAd(r),this.bannerAd.onError(function(a){m.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a)),o.bannerAd=null,o.cachedBannerSize=null}),this.bannerAd.onResize(function(a){console.log("banner onResize===",a.height,a.width),m.default.log("bannerAd style:",o.bannerAd.style.top,o.bannerAd.style.left)}),this.bannerAd.show().then(function(){m.default.log("banner\u663e\u793a\u6210\u529f"),m.default.log(o.bannerAd)}).catch(function(a){m.default.log("banner\u663e\u793a\u9519\u8bef"),o.bannerAd=null,o.cachedBannerSize=null,m.default.log("showBanner err:"+JSON.stringify(a))})}},t.prototype.closeBanner=function(){if(this.bannerAd)if(this.cachedBannerSize){var a={left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1};this.bannerAd.style.left=a.left,this.bannerAd.style.top=a.top}else this.bannerAd.destroy()},t.prototype.showBannerByTime=function(a){var t=this;if(void 0===a&&(a=!1),this.getPara("bannerAd")){var e=30;this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<30&&(e=30),this.showBanner(a,null,"battle"),this.bannerTimeId=setInterval(function(){t.showBanner(a,null,"battle")},1e3*e)}},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.canShare=function(){return!0},t.prototype.getShareObj=function(){var a=Math.floor(Math.random()*this.sharePicsArr.length);return this.sharePicsArr[a]},t.prototype.sendUserInfo=function(a){if(null!=a)if(i.pzaLocalData.data.playerNick=a.nickName,i.pzaLocalData.data.playerAvatar=a.avatarUrl,i.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};m.default.jpost("https://ga.gamejym.com/fcm/kuaishou/sendUserInfo",t,function(a,t){a?m.default.err(a):m.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(a,t,e){void 0===e&&(e=!0);var o=this.channelObj,n=this;o.authorize({scope:"scope.userInfo",success:function(){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f"),o.getUserInfo({success:function(t){console.log("userInfo",t.userInfo),n.sendUserInfo(t.userInfo),a&&a()}})},fail:function(a){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25: "+JSON.stringify(a))},complete:function(){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5b8c\u6210")}})},t.prototype.shareAppMessage=function(a,t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.canShare()){var o=this.getShareObj(),n="";if(a&&a.act&&(n=a.act),n){var r=this;r.shareFailBack=null,r.shareSucBack=null,r.isShare=!1,"recruit_share"==a.act&&(r.isShare=!0,r.shareFailBack=e,r.shareSucBack=t);var p={appId:this.getPara("appId"),openId:this.channelUserId,act:n};m.default.jpost("https://ga.gamejym.com/fcm/kuaishou/shareTo",p,function(a,t){if(a)m.default.err(a);else{m.default.log("shareTo\u8fd4\u56de",t);var e={title:o.title,imageUrl:o.url,imageUrlId:o.id,query:null};t&&0===t.code&&(e.query="sid="+t.data.sid+"&act="+n,m.default.log("shareQuery",e.query)),r.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,query:e.query,success:function(){i.pzaLocalData.shareGetCoin(),r.shareSucBack&&r.shareSucBack()},fail:function(){console.log("act share fail"),r.shareFailBack&&r.shareFailBack()}})}})}else{this.shareFailBack=e,this.shareSucBack=t,this.isShare=!0;var l=this;this.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,success:function(){l.shareSucBack&&l.shareSucBack(),i.pzaLocalData.shareGetCoin()},fail:function(){l.shareFailBack&&l.shareFailBack()}})}}},t.prototype.shareByScreenShot=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null);var o=this,n=16*canvas.height/9;try{canvas.toTempFilePath({x:.3234375*n+(canvas.width-n)/2,y:0,width:.5078125*n,height:.85*canvas.height,destWidth:500,destHeight:400,success:function(n){o.channelObj.shareAppMessage({title:a,imageUrl:n.tempFilePath}),o.shareFailBack=e,o.shareSucBack=t,o.isShare=!0},fail:function(a){console.log("shareByScreenShot",a)}})}catch(i){console.log("shareByScreenShot",i)}},t.prototype.shareFrom=function(){if(this.sid&&this.channelUserId){m.default.log("shareFrom join");var a={sid:this.sid,openId:this.channelUserId,star:i.pzaLocalData.getAllStar()};m.default.jpost("https://ga.gamejym.com/fcm/kuaishou/shareFrom",a,function(a,t){a?m.default.err(a):m.default.log("shareFrom\u8fd4\u56de",t)})}else m.default.log("sid null channelUserId null")},t.prototype.getShareResult=function(a,t){if(!this.channelUserId)return t([]);var e={appId:this.getPara("appId"),openId:this.channelUserId,act:a};m.default.jpost("https://ga.gamejym.com/fcm/kuaishou/getShareResult",e,function(a,e){if(a)return m.default.err(a),void t([]);m.default.log("getShareResult\u8fd4\u56de",e),e&&0===e.code?t(e.data):t([])})},t.prototype.copyToClip=function(a,t){this.channelObj.setClipboardData({data:a,success:function(){t()},fail:function(a){console.error("res: ",a),t("\u590d\u5236\u5931\u8d25: ")}})},t.prototype.showVideo=function(a){var t=this;p.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:a.adsid},{name:"adname",value:a.posName});var e=this.getPara("vedioAd");if(e){cc.game.pause(),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;o.videoFns.onLoad=function(){m.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},o.videoFns.onError=function(e){m.default.err(e),a.failCall(),a.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:-1},{name:"adname",value:a.posName}),cc.game.resume(),r.pzaSoundManager.resumeMusic(),c.pzaCommonMask.hideMask(),i.pzaLocalData.maxAdShareCount>0&&i.pzaLocalData.data.adShareCount<i.pzaLocalData.maxAdShareCount?t.shareAppMessage({title:null,act:null,adsid:a.adsid},function(){i.pzaLocalData.data.adShareCount++,i.pzaLocalData.addDirty("adShareCount"),a.sucCall&&a.sucCall()}):t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},o.videoFns.onClose=function(t){c.pzaCommonMask.hideMask(),cc.game.resume(),r.pzaSoundManager.resumeMusic(),t&&t.isEnded?(a.sucCall(),o.channelUserId&&u.default.ad_complete(o.channelUserId),m.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+a.posName),i.pzaLocalData.bpWatchAd(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:0},{name:"adname",value:a.posName})):(a.failCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:1},{name:"adname",value:a.posName})),a.endCall()},o.rewardedVideoAd.onLoad(o.videoFns.onLoad),o.rewardedVideoAd.onError(o.videoFns.onError),o.rewardedVideoAd.onClose(o.videoFns.onClose),o.rewardedVideoAd.show().then(function(){o.channelUserId&&u.default.ad_exposure(o.channelUserId),m.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(){o.rewardedVideoAd.load().then(function(){return m.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){}).catch(function(){cc.game.resume(),r.pzaSoundManager.resumeMusic(),c.pzaCommonMask.hideMask()})}).catch(function(){cc.game.resume(),r.pzaSoundManager.resumeMusic(),c.pzaCommonMask.hideMask()})})}},t.prototype.showInter=function(a){var t=this,e=l.pzaUtil.getRandomFloatNum(0,1);if(console.log("p10: ",d.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",e),a||.01*d.pzaChannel.instance().getCtrl("p10")>=e){if(!this.showInterCDOver)return void console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d");var o=this.getPara("insertAd");if(!o)return;var n=this,i=d.pzaChannel.instance().getCtrl("p11");console.log("p11",i);var r=this.channelObj;m.default.log("showInter isShow",o),this.interstitialAd=r.createInterstitialAd({adUnitId:o}),this.interstitialAd.onError(function(a){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.interstitialAd.offClose(),this.interstitialAd.onClose(function(){var a=l.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",d.pzaChannel.instance().getCtrl("p18")),.1*d.pzaChannel.instance().getCtrl("p18")>=a&&setTimeout(function(){t.showCustomAd(!1)},3e3),t.interstitialAd.destroy(),t.interstitialAd=null});var p=this.getCtrl("p12");console.log("p12",p);var s=this.getCtrl("p26"),c=l.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",d.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",c);var u=0;.01*s>=c&&(u=1e3),setTimeout(function(){t.interstitialAd.show().then(function(){m.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),n.showInterCDOver=!1,setTimeout(function(){n.showInterCDOver=!0},1e3*i)}).catch(function(a){m.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})},p*u)}},t.prototype.showDesktop=function(){},t.prototype.jumpTo=function(a,t,e,o){m.default.log("jumpTo:"+a),this.channelObj.navigateToMiniProgram({appId:a,success:t,fail:e,complete:o})},t.prototype.registerOnshow=function(a){this.onShowCall=a},t.prototype.checkShortcut=function(a){window.ks.checkShortcut({success:function(t){console.log("\u662f\u5426\u5df2\u6dfb\u52a0\u5feb\u6377\u65b9\u5f0f",t.installed),a.sucCall&&a.sucCall()},fail:function(t){-10005===t.code?console.log("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd"):console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",t.msg),a.failCall&&a.failCall()}})},t.prototype.addShortcut=function(a){this.channelObj.addShortcut({success:function(){console.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f"),a.sucCall&&a.sucCall()},fail:function(t){-10005===t.code?console.log("\u6682\u4e0d\u652f\u6301\u8be5\u529f\u80fd"):console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25",t.msg),a.failCall&&a.failCall()}})},t.prototype.isShowSideView=function(a){this.channelObj.checkSliderBarIsAvailable({success:function(t){a&&a(t),console.log("checkSliderBarIsAvailable succ result:",t)},fail:function(t){a&&a(t),console.log("checkSliderBarIsAvailable fail result:",t)}})},t.unionid=null,t}(h.pzaChannelWeb);e.pzaChannelKs=f,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../View/pzaCommonMask":"pzaCommonMask","./ks_analytics":"ks_analytics","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelMg:[function(a,t,e){"use strict";cc._RF.push(t,"ab34fxlx4JPIpbkAiH90oPs","pzaChannelMg");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelMg=void 0;var i=a("../Common/pzaLocalData"),r=a("../Common/pzaSoundManager"),p=a("../View/pzaCommonMask"),l=a("./pzaChannelWeb"),s=a("./pzakc"),c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="mg",t.channelObj=window.mgtv,t.paraMap=new Map([["appId","mg1v46pzizo5npghd"],["videoId","3i6rctuuner1kz6l"],["ctrlId","67d93fd5c8946b1700d95f40"]]),t.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2020SR0911781",t.loginCall=null,t.videoReady=!0,t.videoAdClickDelay=null,t.videoParas=null,t}return n(t,a),t.prototype.hasPrivacy=function(){return!0},t.prototype.init=function(a){this.loginCall=a;var t=this,e=this.getPara("ctrlId");if(console.log("ctrlId :",e),e){var o={id:e};s.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",o,function(a,e){a?s.default.err(a):""+e.code=="0"?(t.ctrl=e.data,s.default.log("\u8fd4\u56de",t.ctrl),i.pzaLocalData.maxAdShareCount=parseInt(t.ctrl.p2),i.pzaLocalData.maxShareRwdCount=parseInt(t.ctrl.p3),i.pzaLocalData.data.showBeginViewMax=parseInt(t.ctrl.p5),i.pzaLocalData.data.showDaveViewMax=parseInt(t.ctrl.p5),i.pzaLocalData.data.showGardenViewMax=parseInt(t.ctrl.p5),i.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(t.ctrl.p6),t.mgLogin(t.loginCall)):s.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(e))})}},t.prototype.mgLogin=function(a){this.loginCall=a;var t=this;this.channelUserId||this.channelObj.login({success:function(){console.log("login succ"),t.channelObj.getUserProfile({success:function(a){console.log(a.data),a&&a.data&&a.data.uuid&&(t.channelUserId=a.data.uuid,console.log("me.channelUserId ",t.channelUserId),t.loginCall())},fail:function(a){var e=this;console.log(a.errMsg),setTimeout(function(){t.mgLogin(e.loginCall)},2e3)},complete:function(){console.log("complete")}})},fail:function(a){var e=this;console.log(a.errMsg),setTimeout(function(){t.mgLogin(e.loginCall)},2e3)},complete:function(){console.log("complete")}})},t.prototype.showVideo=function(a){var t=this,e=this.getPara("videoId");e&&this.channelObj&&(this.rewardedVideoAd||(console.log("\u521b\u5efa\u89c6\u9891"),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e})),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.videoFns.onLoad=function(){console.log("video onload will show"),t.rewardedVideoAd.show()},this.videoFns.onError=function(e){s.default.err(e),a.failCall&&a.failCall(),a.endCall&&a.endCall(),cc.game.resume(),p.pzaCommonMask.hideMask(),r.pzaSoundManager.resumeMusic(),t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(t){t&&t.isEnded?(a.sucCall(),s.default.eventReport("showVideo\u5b8c\u6210-"+a.posName),i.pzaLocalData.bpWatchAd()):a.failCall&&a.failCall(),cc.game.resume(),p.pzaCommonMask.hideMask(),r.pzaSoundManager.resumeMusic(),a.endCall&&a.endCall()},this.rewardedVideoAd.onClose(this.videoFns.onClose),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onLoad(this.videoFns.onLoad),console.log("video load start"),this.rewardedVideoAd.load())},t.prototype.shareAppMessage=function(a,t){var e=this;this.channelObj.shareTo({title:"\u7ecf\u5178\u56de\u5f52\uff01\u50f5\u5c38\u6765\u88ad\uff01",url:"https://app.mgtv.com/mgmp-share/?appid="+this.getPara("appId")+"&host=mgtv/",shareType:"wechat",success:function(){t&&t(),e.channelObj.showToast({title:"\u5206\u4eab\u6210\u529f!"})}})},t}(l.pzaChannelWeb);e.pzaChannelMg=c,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../View/pzaCommonMask":"pzaCommonMask","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelMi:[function(a,t,e){"use strict";cc._RF.push(t,"a6fcacWTxBAQJFTpi1j2M8H","pzaChannelMi");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelMi=void 0;var i,r=a("../Common/pzaLocalData"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaUtil"),s=a("../View/pzaCommonMask"),c=a("./pzaChannel"),u=a("./pzaChannelWeb"),d=a("./pzakc");(function(a){a[a.Show=0]="Show",a[a.Hide=1]="Hide"})(i||(i={}));var h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="mi",t.paraMap=new Map([["appId","2882303761520396089"],["bannerAd","505c909b6c7b7460a1f7c68cc5653a37"],["customInsertAd","e66fcf638dd68334888010ba1af7e608"],["videoId","393cba61edfaf681bf06347ea993419c"],["ctrlId","67d27a9cc8946b1700d95eca"]]),t.gameName="\u690d\u7269\u5927\u6218\u50f5\u5c381\u4ee3",t.bannerState=i.Hide,t.privacyStr=["\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n\u4ea7\u54c1\u540d\u79f0:\n\n\u300a\u852c\u83dc\u50f5\u5c38\u5927\u4e71\u6597\u300b\n\n\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n\n\u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n\u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n\n1.1 \u6ce8\u518c\u3001\u767b\u5f55\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n1.2 \u8ba4\u8bc1\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n\n1.3 \u4fe1\u606f\u53d1\u5e03\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n1.4 \u5b89\u5168\u8fd0\u884c\n\n1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n1.4.2 \u65e5\u5fd7\u4fe1\u606f\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n\n3.1\u5171\u4eab\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n3.2 \u8f6c\u8ba9\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n3.3 \u62ab\u9732\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n\n4.1 \u5b58\u50a8\u5730\u70b9\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n\n4.2 \u5b58\u50a8\u671f\u9650\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n6.2 \u6ce8\u9500\u5e10\u53f7\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n6.3 \u6295\u8bc9\u4e3e\u62a5\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002"],t.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2016SR153979",t.channelObj=window.qg,t.autoShowBannerTimer=30,t.bannerTimeId=-1,t.customAdMap={},t.showInterCDOver=!0,t.firstShowAdClose=!0,t}return n(t,a),t.prototype.hasPrivacy=function(){return!!d.default.getData("isAgree",0)},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.exit=function(){this.channelObj.exitApplication({data:0})},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this;this.channelObj.onShow(function(){cc.game.resume(),console.log("game onShow"),p.pzaSoundManager.resumeMusic()}),this.channelObj.onHide(function(){cc.game.pause(),console.log("game onHide")});var n=this.getPara("ctrlId");if(n){var i={id:n};d.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(a,n){a?d.default.err(a):""+n.code=="0"?(e.ctrl=n.data,d.default.log("\u8fd4\u56de",e.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),r.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),r.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),e.qgLogin(function(){t&&t(),e.getDeviceID()})):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}},t.prototype.getDeviceID=function(){this.channelObj.getDeviceId({success:function(a){console.log("handling success: "+a.deviceId)},fail:function(a,t){console.log("handling fail, code = "+t)}})},t.prototype.qgLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var t=this;this.channelObj.login({success:function(e){var o=JSON.stringify(e.data);console.log(o),t.channelUserId=e.data.appAccountId,console.log("me.channelUserId",t.channelUserId),a&&a("login succ")},fail:function(a){console.log(JSON.stringify(a))}})},t.prototype.sendUserInfo=function(a){if(null!=a)if(r.pzaLocalData.data.playerNick=a.nickName,r.pzaLocalData.data.playerAvatar=a.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/mi/sendUserInfo",t,function(a,t){a?d.default.err(a):d.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(){},t.prototype.showVideo=function(a){var t=this,e=this.getPara("videoId");if(e){d.default.log("showVideo",e,this.rewardedVideoAd),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;this.videoFns.onLoad=function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(a){d.default.err(a)})},this.videoFns.onError=function(e){d.default.err(e),a.failCall&&a.failCall(),a.endCall&&a.endCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(t){t&&t.isEnded?(a.sucCall(),d.default.eventReport("showVideo\u5b8c\u6210-"+a.posName),r.pzaLocalData.bpWatchAd()):a.failCall&&a.failCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),a.endCall&&a.endCall()},this.rewardedVideoAd.onLoad(this.videoFns.onLoad),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onClose(this.videoFns.onClose),this.rewardedVideoAd.load()}},t.prototype.showBanner=function(){var a=this,t=this.getPara("bannerAd");if(t&&0!=this.getCtrl("p21")){clearTimeout(this.autoShowBannerTimer),this.bannerState=i.Show,d.default.log("showBanner",t);var e={adUnitId:t,style:{top:this.getSysInfo().windowHeight-80,left:this.getSysInfo().windowWidth/2-180,width:800}};this.bannerAd=this.channelObj.createBannerAd(e),console.log("this.bannerad.sclae",this.bannerAd.scale),this.bannerAd.onError(function(a){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.bannerAd.show().then(function(){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),a.bannerState==i.Hide&&a.closeBanner()}).catch(function(a){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})}},t.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&this.bannerAd.hide()},t.prototype.showBannerByTime=function(a){var t=this;void 0===a&&(a=!1);var e=this.getCtrl("p1");this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<40&&(e=40),this.showBanner(a),this.bannerTimeId=setInterval(function(){t.showBanner(a)},1e3*e)},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.showInter=function(a,t){void 0===t&&(t=!0);var e=l.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",c.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",e),(a||.01*c.pzaChannel.instance().getCtrl("p10")>=e)&&this.showCustomAd(!1,t)},t.prototype.closeInter=function(){this.closeCustomAd(!1)},t.prototype.showCustomAd=function(a,t){var e=this;void 0===t&&(t=!0);var o=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");if(o)if(this.showInterCDOver){var n=a?this.getSysInfo().windowHeight-300:this.getSysInfo().windowHeight/2-260,i={adUnitId:o,style:{left:245,top:10,width:400}};t&&(i.style.top=50),d.default.log("showCustomAd",o,a,n),this.customAdMap[o]||(d.default.log("\u539f\u751f\u6a21\u677f\u6b63\u5728\u663e\u793a\u4e2d",o),this.customAdMap[o]=this.channelObj.createCustomAd(i),this.customAdMap[o].offClose(),this.customAdMap[o].onClose(function(){var a=l.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",c.pzaChannel.instance().getCtrl("p18")),.1*c.pzaChannel.instance().getCtrl("p18")>=a&&setTimeout(function(){e.showCustomAd(!1)},3e3),e.customAdMap[o].destroy(),e.customAdMap[o]=null}),this.customAdMap[o].offError(),this.customAdMap[o].onError(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.customAdMap[o].onError(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.customAdMap[o].offLoad(),this.customAdMap[o].onLoad(function(){console.log("customAd\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}));var r=this;if(a)this.customAdMap[o].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))});else{var p=this.getCtrl("p12"),s=c.pzaChannel.instance().getCtrl("p11");console.log("p11",s),console.log("p12",p);var u=this.getCtrl("p26"),h=l.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",c.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",h);var m=0;.01*u>=h&&(m=1e3),setTimeout(function(){e.customAdMap[o].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),r.showInterCDOver=!1,setTimeout(function(){r.showInterCDOver=!0},1e3*s)}).catch(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})},p*m)}}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},t.prototype.closeCustomAd=function(a){void 0===a&&(a=!1);var t=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");t&&this.customAdMap[t]&&this.customAdMap[t].hide()},t.prototype.shareAppMessage=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null),e&&e()},t.prototype.addShortcut=function(a){console.log("click oppo addShortcut");var t=this;this.channelObj.hasShortcutInstalled({success:function(e){console.log("hasShortcutInstalled res",e),0==e?t.channelObj.installShortcut({success:function(){console.log("\u521b\u5efa\u6210\u529f"),a.sucCall&&a.sucCall()},fail:function(){},complete:function(){}}):console.log("\u5df2\u7ecf\u521b\u5efa\u684c\u9762\u56fe\u6807")},fail:function(){},complete:function(){}})},t.prototype.checkShortcut=function(a){this.channelObj.hasShortcutInstalled({success:function(t){0==t?a.sucCall&&a.sucCall():a.failCall&&a.failCall()},fail:function(){},complete:function(){}})},t.prototype.copyToClip=function(a,t){this.channelObj.setClipboardData({data:a,success:function(){t&&t()},fail:function(){t&&t()},complete:function(){}})},t}(u.pzaChannelWeb);e.pzaChannelMi=h,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelMy1:[function(a,t,e){"use strict";cc._RF.push(t,"8dc7dTee0dIpLDB9323Q9L5","pzaChannelMy1");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelMy1=void 0;var i=a("./pzaChannelMy"),r=a("./pzakc"),p=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channelId=4,t.channel="my1",t.paraMap=new Map([["appId","2021004144657858"],["bannerAd","ad_tiny_2021004144657858_202407252200174794"],["insertAd","ad_tiny_2021004144657858_202408122200182253"],["vedioAd","ad_tiny_2021004144657858_202405162200097610"],["ctrlId","66f8c4cbc5b6582182fb7bbe"],["gid","66f8c4cbc5b6582182fb7bbe"]]),t.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2021SR1183949\n",t.actsubmit2CD=1e5,t.actsubmit2CDOver=!0,t}return n(t,a),t.prototype.actSubmit=function(){},t.prototype.actSubmit2=function(){var a=this,t=this;if(t.channelUserId&&this.actsubmit2CDOver){this.actsubmit2CDOver=!1,setTimeout(function(){a.actsubmit2CDOver=!0},this.actsubmit2CD),console.log("channelID 4 actsubmit=");var e=t.channelObj.getLaunchOptionsSync().query?t.channelObj.getLaunchOptionsSync().query.channel:"other";null!=e&&null!=e||(e="other"),console.log("channel",e),console.log("me.channelUserId",t.channelUserId),t.jpost("https://ga.gamejym.com/fcm/alipay/gameActionSubmit",{appId:t.getPara("appId"),act:"zwdzjs1_game_shengcun_every_2",channel:e,openId:t.channelUserId},function(a,t){a?r.default.err(a):r.default.log("\u652f\u4ed8\u5b9dactSubmit",t)})}},t}(i.pzaChannelMy);e.pzaChannelMy1=p,cc._RF.pop()},{"./pzaChannelMy":"pzaChannelMy","./pzakc":"pzakc"}],pzaChannelMy:[function(a,t,e){"use strict";cc._RF.push(t,"1e6ecuLuNtLBbRAkcaU1AOA","pzaChannelMy");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__assign||function(){return(i=Object.assign||function(a){for(var t,e=1,o=arguments.length;e<o;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n]);return a}).apply(this,arguments)},r=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},p=this&&this.__read||function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var o,n,i=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelMy=e.reportAct=void 0;var l,s=a("../Common/pzaLocalData"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaStatisticsMgr"),d=a("../View/pzaCommonMask"),h=a("./pzaChannel"),m=a("./pzaChannelWeb"),f=a("./pzakc"),z=a("../Common/pzaUtil");(function(a){a.reportLoadingCompleted="reportLoadingCompleted",a.reportAuthorized="reportAuthorized",a.reportGameCharacterCreated="reportGameCharacterCreated",a.reportGamePlay="reportGamePlay"})(l=e.reportAct||(e.reportAct={}));var y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channelId=2,t.channel="my",t.paraMap=new Map([["appId","2021004149683348"],["bannerAd","ad_tiny_2021004149683348_202407262200175313"],["insertAd","ad_tiny_2021004149683348_202408122200182162"],["vedioAd","ad_tiny_2021004149683348_202406122200105736"],["ctrlId","6645caaaa331ce3adb822a25"],["gid","663db8e6a331ce3adb8229fb"]]),t.channelObj=window.my,t.sid=null,t.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2016SR153979",t.onShowCall=null,t.nextInterTime=0,t}return n(t,a),t.prototype.hasPrivacy=function(){return!0},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this.channelObj;o.onShow(function(a){cc.game.resume(),c.pzaSoundManager.resumeMusic(),e.isShare&&(e.isShareSuc()?(e.shareSucBack&&e.shareSucBack(),o.showToast({content:"\u5206\u4eab\u6210\u529f!"}),s.pzaLocalData.shareGetCoin()):(o.showToast({content:"\u5206\u4eab\u5931\u8d25"}),e.shareFailBack&&e.shareFailBack()),e.isShare=!1);var t=JSON.stringify(a);console.log("onshow "+t),e.onShowCall&&e.onShowCall(),e.onShowCall=null}),o.onHide(function(){cc.game.pause(),e.isShare&&(e.shareTime=(new Date).getTime())});var n=this.getPara("ctrlId"),i=this;if(n){var r=f.default.getData("sid",null);r||(r=i.channelObj.getLaunchOptionsSync().scene,f.default.saveData("sid",r));var p={id:n,sid:r};i.jpost("https://ga.gametdd.com/adCtrl/agd/conf",p,function(a,o){a?f.default.err(a):""+o.code=="0"?(i.ctrl=o.data,f.default.log("\u8fd4\u56de",i.ctrl),s.pzaLocalData.maxAdShareCount=parseInt(i.ctrl.p2),s.pzaLocalData.maxShareRwdCount=parseInt(i.ctrl.p3),s.pzaLocalData.data.showBeginViewMax=parseInt(i.ctrl.p5),s.pzaLocalData.data.showDaveViewMax=parseInt(i.ctrl.p5),s.pzaLocalData.data.showGardenViewMax=parseInt(i.ctrl.p5),s.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(i.ctrl.p6),s.pzaLocalData.data.isShowVideoIcon=1==parseInt(i.ctrl.p7),s.pzaLocalData.data.isSignDouble=1==parseInt(i.ctrl.p8),e.myLogin(function(){t&&t()})):f.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))})}this.channelObj.onShareAppMessage=function(){return{title:"\u690d\u7269\u5927\u6218\u50f5\u5c38\uff01",desc:"\u7ecf\u5178\u56de\u5f52\uff01\u5927\u5bb6\u719f\u6089\u7684\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b\u56de\u6765\u4e86\uff01\u5e26\u4e0a\u4f60\u7684\u690d\u7269\uff0c\u75db\u6253\u5165\u4fb5\u7684\u50f5\u5c38\u4eec\uff01"}},o.onShow(function(a){console.log("onshow "+JSON.stringify(a))}),this.loadRewardVideoAD(),this.loadBannerAD()},t.prototype.loadRewardVideoAD=function(){var a=this.getPara("vedioAd");a&&(this.rewardedVideoAd=this.channelObj.createRewardedAd({adUnitId:a}))},t.prototype.loadBannerAD=function(){var a=this.channelObj;this.bannerAd=a.createBannerAd({adUnitId:this.paraMap.get("bannerAd"),style:{left:this.getSysInfo().windowWidth/2-150,top:this.getSysInfo().windowHeight-100,width:300}}),console.log("bannerAd ",this.bannerAd),this.bannerAd.onLoad(function(){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this.bannerAd.onError(function(a){console.log("banner \u5e7f\u544a\u52a0\u8f7d\u9519\u8bef err: "),console.log(a)})},t.prototype.showBanner=function(){0!=this.getCtrl("p21")&&this.bannerAd.show().then(function(){return console.log("banner \u5e7f\u544a\u663e\u793a")}).catch(function(a){f.default.log("custom\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})},t.prototype.closeBanner=function(){this.bannerAd&&this.bannerAd.hide()},t.prototype.onLoginSuc=function(){},t.prototype.sendUserInfoToWeb=function(a){null==s.pzaLocalData.data.playerNick||null==s.pzaLocalData.data.playerAvatar?this.getUserInfo(a):a&&a(!0)},t.prototype.actSubmit=function(){var a=this;if(a.channelUserId){console.log("channelID 1 actsubmit="),console.log("query====>",a.channelObj.getLaunchOptionsSync().query);var t=a.channelObj.getLaunchOptionsSync().query?a.channelObj.getLaunchOptionsSync().query.channel:"other";a.jpost("https://ga.gamejym.com/fcm/alipay/gameActionSubmit",{appId:a.getPara("appId"),act:"zwdzjs_game_pass_every_1",channel:t,openId:a.channelUserId},function(a,t){a?f.default.err(a):f.default.log("\u652f\u4ed8\u5b9dactSubmit",t)})}},t.SOPReport=function(a){if("my"==h.pzaChannel.instance().channel||"my1"==h.pzaChannel.instance().channel){console.log("SOPReport=");var t=window.my;if(!t||!t.gameBiz||!t.gameBiz[a])return;if(console.log("act =>",a),a===l.reportGameCharacterCreated){var e=!!cc.sys.localStorage.getItem("isSOPcreated");t.gameBiz.reportGameCharacterCreated(e),e||cc.sys.localStorage.setItem("isSOPcreated",1)}else a===l.reportAuthorized?(e=!!cc.sys.localStorage.getItem("isSOPAuthed"))||(cc.sys.localStorage.setItem("isSOPAuthed",1),t.gameBiz.reportAuthorized()):t.gameBiz[a]()}},t.prototype.myLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var e=window.my,o=this;e.getAuthCode({scopes:"auth_base",success:function(e){if(console.log("getAuthCode\u6210\u529f",e),!e.authCode)return console.log("\u767b\u5f55\u5931\u8d25\uff01"+e),void a(e);o.jpost("https://ga.gamejym.com/fcm/alipay/getOpenId",{appId:o.getPara("appId"),code:e.authCode},function(e,n){return e?(f.default.err(e),void a(e)):(f.default.log("\u83b7\u53d6openId my",n),n.openid?(o.channelUserId=n.openid||"",t.unionid=n.unionid||"",void a(null)):(f.default.err("\u83b7\u53d6openId\u5931\u8d25",n),void a("\u83b7\u53d6openId\u5931\u8d25")))}),t.SOPReport(l.reportAuthorized)},fail:function(t){a(null),console.log("my.getAuthCode \u8c03\u7528\u5931\u8d25",t)}})},t.prototype.canShare=function(){return!0},t.prototype.shareFrom=function(){if(f.default.log("shareFrom: ",this.sid,this.channelUserId),this.sid&&this.channelUserId){var a={sid:this.sid,openId:this.channelUserId,star:s.pzaLocalData.getAllStar()};this.jpost("https://ga.gamejym.com/fcm/alipay/shareFrom",a,function(a,t){a?f.default.err(a):f.default.log("shareFrom\u8fd4\u56de",t)})}},t.prototype.sendUserInfo=function(a){if(null!=a)if(s.pzaLocalData.data.playerNick=a.nickName,s.pzaLocalData.data.playerAvatar=a.avatarUrl,s.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/alipay/sendUserInfo",t,function(a,t){a?f.default.err(a):f.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(a){var t=this.channelObj,e=this;t.getAuthCode({scopes:"auth_user",success:function(){t.getAuthUserInfo({success:function(t){e.sendUserInfo({nickName:t.nickName,avatarUrl:t.avatar}),a&&a(!0)},fail:function(t){console.log("getOpenUserInfo fail",t),a&&a(!1)}})},fail:function(a){console.log("auth_user fail",a)}})},t.prototype.shareAppMessage=function(a,t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.canShare()){var o="";if(a&&a.act&&(o=a.act),!o)return this.channelObj.onShareAppMessage=function(){return{title:"\u690d\u7269\u5927\u6218\u50f5\u5c38\uff01",desc:"\u7ecf\u5178\u56de\u5f52\uff01\u5927\u5bb6\u719f\u6089\u7684\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b\u56de\u6765\u4e86\uff01\u5e26\u4e0a\u4f60\u7684\u690d\u7269\uff0c\u75db\u6253\u5165\u4fb5\u7684\u50f5\u5c38\u4eec\uff01"}},this.shareFailBack=e,this.shareSucBack=t,this.isShare=!0,void this.channelObj.showSharePanel({});var n=this;n.shareFailBack=null,n.shareSucBack=null,n.isShare=!1,"recruit_share"==a.act&&(n.isShare=!0,n.shareFailBack=e,n.shareSucBack=t);var i={appId:this.getPara("appId"),openId:this.channelUserId,act:o};this.jpost("https://ga.gamejym.com/fcm/alipay/shareTo",i,function(a,t){if(a)f.default.err(a);else{f.default.log("shareTo\u8fd4\u56de",t);var e=null;t&&0===t.code&&(e="sid="+t.data.sid+"&act="+o,f.default.log("shareQuery",e)),n.channelObj.onShareAppMessage=function(){return{title:"\u690d\u7269\u5927\u6218\u50f5\u5c38\uff01",desc:"\u7ecf\u5178\u56de\u5f52\uff01\u5927\u5bb6\u719f\u6089\u7684\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b\u56de\u6765\u4e86\uff01\u5e26\u4e0a\u4f60\u7684\u690d\u7269\uff0c\u75db\u6253\u5165\u4fb5\u7684\u50f5\u5c38\u4eec\uff01",query:e,success:function(a){console.log(a)},fail:function(a){console.log(a)},complete:function(a){console.log(a)}}},n.channelObj.showSharePanel({})}})}},t.prototype.getShareResult=function(a,t){if(f.default.log("getshareResult start"),!this.channelUserId)return t([]);console.log("getshareResult join");var e={appId:this.getPara("appId"),openId:this.channelUserId,act:a};this.jpost("https://ga.gamejym.com/fcm/alipay/getShareResult",e,function(a,e){if(a)return f.default.err(a),void t([]);f.default.log("getShareResult\u8fd4\u56de",e),e&&0===e.code?t(e.data):t([])})},t.prototype.copyToClip=function(a,t){this.channelObj.setClipboard({text:a,success:function(){t()},fail:function(){t("\u590d\u5236\u5931\u8d25")}})},t.prototype.showInter=function(a){var t=this,e=z.pzaUtil.getRandomFloatNum(0,1);if(console.log("p10 ",h.pzaChannel.instance().getCtrl("p10")),a||.01*h.pzaChannel.instance().getCtrl("p10")>=e){if(this.nextInterTime>Date.now())return void f.default.log("\u63d2\u5c4f\u65f6\u95f4\u95f4\u9694\u672a\u5230");var o=this.getPara("insertAd");if(!o)return;var n=this,i=this.channelObj;f.default.log("showInter isShow",o),this.interstitialAd=i.createInterstitialAd({adUnitId:o}),this.interstitialAd.onError(function(a){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.interstitialAd.onClose(function(a){console.log("\u63d2\u5c4f\u5e7f\u544a\u5173\u95ed"+JSON.stringify(a));var t=z.pzaUtil.getRandomFloatNum(0,1),e=.1*h.pzaChannel.instance().getCtrl("p18");console.log("\u5173\u95ed\u540e\u6982\u7387: ",t,e),e>=t&&setTimeout(function(){n.showInter()},3e3)});var r=this.getCtrl("p12"),p=h.pzaChannel.instance().getCtrl("p11");console.log("p12",r),console.log("p11",p),setTimeout(function(){t.interstitialAd.show().then(function(){f.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){f.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))}),t.nextInterTime=Date.now()+1e3*p},1e3*r)}},t.prototype.showVideo=function(a,t){var e=this;void 0===t&&(t=!1),u.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:a.adsid},{name:"adname",value:a.posName});var o=this.getPara("vedioAd");if(o){cc.game.pause(),this.rewardedVideoAd=this.channelObj.createRewardedAd({adUnitId:o});var n=this;n.videoFns.onLoad=function(){f.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},n.videoFns.onError=function(t){f.default.err(t),cc.game.resume(),c.pzaSoundManager.resumeMusic(),d.pzaCommonMask.hideMask(),a.failCall(),a.endCall(),u.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:-1},{name:"adname",value:a.posName}),e.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},n.videoFns.onClose=function(t){cc.game.resume(),c.pzaSoundManager.resumeMusic(),d.pzaCommonMask.hideMask(),t&&t.isEnded?(a.sucCall(),f.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+a.posName),u.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:0},{name:"adname",value:a.posName}),s.pzaLocalData.bpWatchAd()):(a.failCall(),u.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:1},{name:"adname",value:a.posName})),a.endCall()},n.rewardedVideoAd.onLoad(n.videoFns.onLoad),n.rewardedVideoAd.onError(n.videoFns.onError),n.rewardedVideoAd.onClose(n.videoFns.onClose),n.rewardedVideoAd.show().then(function(){f.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a"),f.default.eventReport("\u5e7f\u544a\u663e\u793a-"+a.posName)}).catch(function(){n.rewardedVideoAd.load().then(function(){return f.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),n.rewardedVideoAd.show().then(function(){}).catch(function(){cc.game.resume(),c.pzaSoundManager.resumeMusic(),d.pzaCommonMask.hideMask()})}).catch(function(){cc.game.resume(),c.pzaSoundManager.resumeMusic(),d.pzaCommonMask.hideMask()})})}},t.prototype.registerOnshow=function(a){this.onShowCall=a},t.prototype.jpost=function(a,t,e){e||(e=function(a){if(a)return f.default.err(a)}),this.channelObj.request({url:a,data:t,method:"POST",headers:{"content-type":"application/json",charset:"utf-8"},success:function(a){e&&e(null,a&&a.data)},fail:function(a){return console.error(a),e(null,{code:""+a.error})}})},t.prototype.schemaToParams=function(a){var t,e;if(!a.startsWith("alipays:"))return{message:"! \u975e alipays: \u5f00\u5934"};var o={};try{for(var n=r(a.replace(/^.*?\?/,"").split("&").map(function(a){var t=a.includes("=")?a.indexOf("="):a.length;return[a.slice(0,t),a.slice(t+1)].map(decodeURIComponent)})),i=n.next();!i.done;i=n.next()){var l=p(i.value,2),s=l[0],c=l[1];if("appId"==s){if(16!=c.length)return{message:"! \u975e 16 \u4f4d appId '"+c+"'"}}else if("chInfo"===s){var u=o.startParam||{};u[s]=c,o.startParam=u;continue}o[s]=c}}catch(d){t={error:d}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return{params:o}},t.prototype.navigateToMiniProgramBySchema=function(a,t){var e="alipays://platformapi/startapp?appId=2021003125685383&url=https%3A%2F%2Frender.alipay.com%2Fp%2Fyuyan%2F180020010001206617%2Findex.html%3FcaprMode%3Dsync&chInfo=gamesetlattice&sms=YES&appClearTop=false",o=this.schemaToParams(e),n=o.params,r=o.message;n?this.channelObj.navigateToMiniProgram(i(i({},n),{success:a,fail:t})):t&&t({error:-1,errorMessage:"\u65e0\u6548\u7684\u5c0f\u7a0b\u5e8f schema "+e+": "+r})},t.prototype.isAddAliDesk=function(a){this.jpost("https://ga.gamejym.com/fcm/alipay/getAddHomeResult",{appId:this.getPara("appId"),openId:this.channelUserId},function(t,e){if(t)f.default.err(t);else{f.default.log("\u652f\u4ed8\u5b9dactSubmit",e);var o;o="Y"==e.data?1:0,a&&a(o)}})},t.unionid=null,t}(m.pzaChannelWeb);e.pzaChannelMy=y,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelNoAD:[function(a,t,e){"use strict";cc._RF.push(t,"751940+7/9O/ZFp9R4PTCQt","pzaChannelNoAD");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelNoAD=void 0;var i=a("../Common/pzaLocalData"),r=a("../View/pzaCommonMask"),p=a("../Common/pzaUIManager"),l=a("../Load/pzaBundleObjectPool"),s=a("../Load/pzaPreLoadManager"),c=a("./pzaChannel"),u=a("./pzaChannelWeb"),d=a("./pzakc"),h=a("./pzaNativeInterAd"),m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channelId=0,t.channel="noAD",t.paraMap=new Map([]),t.isReadRemoteUserData=!1,t.isWhite=!1,t}return n(t,a),t.prototype.init=function(a){this.isWhite=!0,this.ctrl={},this.ctrl.p4="1",this.ctrl.p24=1,this.ctrl.p23=1,this.ctrl.p14="1",this.ctrl.p15="1",this.ctrl.p16="1",this.ctrl.p17="1",a&&a()},t.prototype.showBanner=function(a){void 0===a&&(a=!1)},t.prototype.closeBanner=function(a){void 0===a&&(a=!1)},t.prototype.showInter=function(a){void 0===a&&(a=!1)},t.prototype.closeInter=function(){},t.prototype.showVideo=function(a,t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),this.isWhite||c.pzaChannel.isConfRemote?(a.sucCall(),a.endCall(),r.pzaCommonMask.hideMask(),i.pzaLocalData.bpWatchAd()):(a.failCall(),a.endCall())},t.prototype.copyToClip=function(a,t){a=i.pzaLocalData.data.noADPlayerUid;var e=document.createElement("textarea");e.value=a,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="12pt";var o,n=getSelection();n.rangeCount>0&&(o=n.getRangeAt(0)),document.body.appendChild(e),e.select(),e.selectionStart=0,e.selectionEnd=a.length;try{document.execCommand("copy"),t()}catch(r){d.default.err(r),t("\u590d\u5236\u5931\u8d25!")}document.body.removeChild(e),o&&(n.removeAllRanges(),n.addRange(o))},t.prototype.createInterAdNode=function(){l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.NATIVE_INTER_AD,!1,function(a,t){null==a&&null!=t?(t.setParent(p.pzaUIManager.instance.node),t.zIndex=999,t&&t.getComponent(h.pzaNativeInterAd).init("","https://contentcenter-drcn.dbankcdn.cn/img/pub_1/PPS_realtimeimage_100_1/24/v3/4SllXmP1Sdej4e1YWPS29A/a9CXcpLzRLazKkHo6_siHg.jpg/__source__.jpg","9\u67083\u65e5\u7537\u751f\u5357\u4eac","\u9cb8\u9e3f\u52a8\u80fd","\u7acb\u5373\u6253\u5f00")):console.error(a)})},t}(u.pzaChannelWeb);e.pzaChannelNoAD=m,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaUIManager":"pzaUIManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzaNativeInterAd":"pzaNativeInterAd","./pzakc":"pzakc"}],pzaChannelOppo:[function(a,t,e){"use strict";cc._RF.push(t,"0c79d6z+f9ChZUETpE5tBRV","pzaChannelOppo");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelOppo=void 0;var i,r=a("../Common/pzaLocalData"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaUtil"),s=a("../View/pzaCommonMask"),c=a("./pzaChannel"),u=a("./pzaChannelWeb"),d=a("./pzakc");(function(a){a[a.Show=0]="Show",a[a.Hide=1]="Hide"})(i||(i={}));var h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="oppo",t.paraMap=new Map([["appId","32035923"],["bannerAd","1705916"],["customBannerAd","1705916"],["customInsertAd","1705922"],["videoId","1705927"],["ctrlId","66cc411dc5b6582182fb7ace"]]),t.gameName="\u690d\u7269\u5927\u6218\u50f5\u5c38",t.bannerState=i.Hide,t.privacyStr=["\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n\u4ea7\u54c1\u540d\u79f0:\n\n\u300a\u852c\u83dc\u50f5\u5c38\u5927\u4e71\u6597\u300b\n\n\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n\n\u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n\u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n\u7b2c\u4e09\u65b9\u4ea7\u54c1\u6216\u670d\u52a1\u5982\u4f55\u83b7\u5f97\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u4e3a\u4e86\u5411\u60a8\u63d0\u4f9b\u66f4\u4e30\u5bcc\u548c\u5b8c\u6574\u7684\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0b\u8ff0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\uff08\u7b80\u79f0\u201cSDK\u201d\uff09\u4e3a\u60a8\u63d0\u4f9b\u670d\u52a1\u3002SDK\u7684\u5177\u4f53\u4fe1\u606f\u6536\u96c6\u548c\u4f7f\u7528\u60c5\u51b5\u8bf7\u4ee5SDK\u8fd0\u8425\u65b9\u7684\u9690\u79c1\u653f\u7b56\u6216\u76f8\u5173\u58f0\u660e\u4e3a\u51c6\u3002\n\nSDK\u540d\u79f0\tSDK\u63d0\u4f9b\u65b9\u540d\u79f0\tSDK\u4f7f\u7528\u76ee\u7684\tSDK\u6536\u96c6\u7684\u4fe1\u606f\t\u9690\u79c1\u653f\u7b56\u94fe\u63a5\noppo\u6e38\u620f\u4e2d\u5fc3SDK\toppo\toppo\u8d26\u53f7\u7cfb\u7edf,\u652f\u4ed8\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\thttps://open.oppomobile.com/wiki/doc#id=11007\noppo\u5e7f\u544aSDK\toppo\t\u7528\u4e8e\u63d0\u4f9b\u5e7f\u544a\u670d\u52a1\t\u8054\u7f51\u53ca\u7f51\u7edc\u72b6\u6001\u53d8\u5316,\u83b7\u53d6\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49);\u83b7\u53d6IMEI\u3001IMSI\u3001\u8bbe\u5907 MAC \u5730\u5740\u7b49\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f;(\u7c97\u7565\u6216\u7cbe\u786e\u7684)\u4f4d\u7f6e\u4fe1\u606f;\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8;\thttps://open.oppomobile.com/wiki/doc#id=11007\n\u4ee5\u4e0aSDK\u5185\u7f6e\u7b2c3\u65b9SDK\toppo\t\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,\u4f4d\u7f6e\u4fe1\u606f,mac\u5730\u5740,\u5e94\u7528\u5217\u8868\thttps://open.oppomobile.com/wiki/doc#id=11007\n1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n\n1.1 \u6ce8\u518c\u3001\u767b\u5f55\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n1.2 \u8ba4\u8bc1\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n\n1.3 \u4fe1\u606f\u53d1\u5e03\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n1.4 \u5b89\u5168\u8fd0\u884c\n\n1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n1.4.2 \u65e5\u5fd7\u4fe1\u606f\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n\n3.1\u5171\u4eab\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n3.2 \u8f6c\u8ba9\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n3.3 \u62ab\u9732\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n\n4.1 \u5b58\u50a8\u5730\u70b9\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n\n4.2 \u5b58\u50a8\u671f\u9650\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n6.2 \u6ce8\u9500\u5e10\u53f7\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n6.3 \u6295\u8bc9\u4e3e\u62a5\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002"],t.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2016SR153979",t.channelObj=window.qg,t.autoShowBannerTimer=30,t.bannerTimeId=-1,t.customAdMap={},t.showInterCDOver=!0,t.firstShowAdClose=!0,t}return n(t,a),t.prototype.hasPrivacy=function(){return!!d.default.getData("isAgree",0)},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.exit=function(){this.channelObj.exitApplication({data:0})},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this;this.channelObj.onShow(function(){cc.game.resume(),console.log("game onShow"),p.pzaSoundManager.resumeMusic()}),this.channelObj.onHide(function(){cc.game.pause(),console.log("game onHide")});var n=this.getPara("ctrlId");if(console.log("ctrlId :",n),n){var i={id:n};d.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(a,n){a?d.default.err(a):""+n.code=="0"?(e.ctrl=n.data,d.default.log("\u8fd4\u56de",e.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),r.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),r.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),e.qgLogin(function(){t&&t(),e.getDeviceID()})):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}},t.prototype.getDeviceID=function(){this.channelObj.getDeviceId({success:function(a){console.log("handling success: "+a.deviceId)},fail:function(a,t){console.log("handling fail, code = "+t)}})},t.prototype.qgLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var t=this;this.channelObj.login({success:function(e){var o=JSON.stringify(e.data);console.log(o),t.channelUserId=e.uid,console.log("me.channelUserId",t.channelUserId),a&&a("login succ")},fail:function(a){console.log(JSON.stringify(a))}})},t.prototype.sendUserInfo=function(a){if(null!=a)if(r.pzaLocalData.data.playerNick=a.nickName,r.pzaLocalData.data.playerAvatar=a.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/vivo/sendUserInfo",t,function(a,t){a?d.default.err(a):d.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(){},t.prototype.showVideo=function(a){var t=this,e=this.getPara("videoId");if(e){d.default.log("showVideo",e,this.rewardedVideoAd),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;this.videoFns.onLoad=function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(a){d.default.err(a)})},this.videoFns.onError=function(e){d.default.err(e),a.failCall&&a.failCall(),a.endCall&&a.endCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(t){t&&t.isEnded?(a.sucCall(),d.default.eventReport("showVideo\u5b8c\u6210-"+a.posName),r.pzaLocalData.bpWatchAd()):a.failCall&&a.failCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),a.endCall&&a.endCall()},this.rewardedVideoAd.onLoad(this.videoFns.onLoad),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onClose(this.videoFns.onClose),this.rewardedVideoAd.load()}},t.prototype.showBanner=function(){var a=this,t=this.getPara("bannerAd");if(t&&0!=this.getCtrl("p21")){clearTimeout(this.autoShowBannerTimer),this.bannerState=i.Show,d.default.log("showBanner",t);var e={adUnitId:t};this.bannerAd=this.channelObj.createBannerAd(e),this.bannerAd.onError(function(a){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.bannerAd.show().then(function(){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),a.bannerState==i.Hide&&a.closeBanner()}).catch(function(a){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})}},t.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&this.bannerAd.hide()},t.prototype.showBannerByTime=function(a){var t=this;void 0===a&&(a=!1);var e=this.getCtrl("p1");this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<40&&(e=40),this.showBanner(a),this.bannerTimeId=setInterval(function(){t.showBanner(a)},1e3*e)},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.showInter=function(a){var t=l.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",c.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",t),(a||.01*c.pzaChannel.instance().getCtrl("p10")>=t)&&this.showCustomAd(!1)},t.prototype.closeInter=function(){this.closeCustomAd(!1)},t.prototype.showCustomAd=function(a,t,e){var o=this,n=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");if(n)if(this.showInterCDOver){var i=a?this.getSysInfo().windowHeight-300:this.getSysInfo().windowHeight/2-260,r={adUnitId:n,style:{top:i}};e&&(r.style=e),d.default.log("showCustomAd",n,a,i),this.customAdMap[n]||(d.default.log("\u539f\u751f\u6a21\u677f\u6b63\u5728\u663e\u793a\u4e2d",n),this.customAdMap[n]=this.channelObj.createCustomAd(r),this.customAdMap[n].offHide(),this.customAdMap[n].onHide(function(){var a=l.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",c.pzaChannel.instance().getCtrl("p18")),.1*c.pzaChannel.instance().getCtrl("p18")>=a&&setTimeout(function(){o.showCustomAd(!1)},3e3),o.customAdMap[n].destroy(),o.customAdMap[n]=null}),this.customAdMap[n].offError(),this.customAdMap[n].onError(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.customAdMap[n].onError(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.customAdMap[n].offLoad(),this.customAdMap[n].onLoad(function(){console.log("customAd\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}));var p=this;if(a)this.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))});else{var s=this.getCtrl("p12"),u=c.pzaChannel.instance().getCtrl("p11");console.log("p11",u),console.log("p12",s);var h=this.getCtrl("p26"),m=l.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",c.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",m);var f=0;.01*h>=m&&(f=1e3),setTimeout(function(){o.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),p.showInterCDOver=!1,setTimeout(function(){p.showInterCDOver=!0},1e3*u)}).catch(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})},s*f)}}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},t.prototype.closeCustomAd=function(a){void 0===a&&(a=!1);var t=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");t&&this.customAdMap[t]&&this.customAdMap[t].hide()},t.prototype.shareAppMessage=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null),e&&e()},t.prototype.addShortcut=function(a){console.log("click oppo addShortcut");var t=this;this.channelObj.hasShortcutInstalled({success:function(e){console.log("hasShortcutInstalled res",e),0==e?t.channelObj.installShortcut({success:function(){console.log("\u521b\u5efa\u6210\u529f"),a.sucCall&&a.sucCall()},fail:function(){},complete:function(){}}):console.log("\u5df2\u7ecf\u521b\u5efa\u684c\u9762\u56fe\u6807")},fail:function(){},complete:function(){}})},t.prototype.checkShortcut=function(a){this.channelObj.hasShortcutInstalled({success:function(t){0==t?a.sucCall&&a.sucCall():a.failCall&&a.failCall()},fail:function(){},complete:function(){}})},t.prototype.copyToClip=function(a,t){this.channelObj.setClipboardData({data:a,success:function(){t&&t()},fail:function(){t&&t()},complete:function(){}})},t}(u.pzaChannelWeb);e.pzaChannelOppo=h,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelQQ:[function(a,t,e){"use strict";cc._RF.push(t,"705ce8WFiFFgqGx5GpkB/Qg","pzaChannelQQ");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelQQ=void 0;var i,r,p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaUtil"),c=a("./pzaChannel"),u=a("./pzaChannelWeb"),d=a("./pzakc");(function(a){a[a.Show=0]="Show",a[a.Hide=1]="Hide"})(i||(i={})),function(a){a[a.Play=0]="Play",a[a.Ready=1]="Ready",a[a.UnReady=2]="UnReady"}(r||(r={}));var h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="qq",t.paraMap=new Map([["appId","1112393766"],["bannerAd","fdfc2bce2f2796eb7eb6dafa60f5e065"],["videoId","cd487f2224b1f5915dec2a111372bbb9"],["customInsertAd","b28e0a5c19e8843cd90c52f38628289a"],["ctrlId","66cc3c27c5b6582182fb7ac2"],["gid","66cc3c27c5b6582182fb7ac2"]]),t.gameName="\u690d\u7269\u5927\u6218\u50f5\u5c38",t.bannerState=i.Hide,t.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8  \u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2016SR153979",t.privacyStr=["\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n\u4ea7\u54c1\u540d\u79f0:\n\n\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b\n\n\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n\n\u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n\u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n\n1.1 \u6ce8\u518c\u3001\u767b\u5f55\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n1.2 \u8ba4\u8bc1\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n\n1.3 \u4fe1\u606f\u53d1\u5e03\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n1.4 \u5b89\u5168\u8fd0\u884c\n\n1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n1.4.2 \u65e5\u5fd7\u4fe1\u606f\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n\n3.1\u5171\u4eab\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n3.2 \u8f6c\u8ba9\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n3.3 \u62ab\u9732\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n\n4.1 \u5b58\u50a8\u5730\u70b9\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n\n4.2 \u5b58\u50a8\u671f\u9650\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n6.2 \u6ce8\u9500\u5e10\u53f7\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n6.3 \u6295\u8bc9\u4e3e\u62a5\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002","\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u6b22\u8fce\u60a8\u4f7f\u7528\u7531\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8 \u63d0\u4f9b\u7684\u670d\u52a1\u3002\n\n\u672c\u300a\u7528\u6237\u670d\u52a1\u534f\u8bae\u300b\uff08\u4ee5\u4e0b\u79f0\u201c\u672c\u534f\u8bae\u201d\uff09\u662f\u7528\u6237\uff08\u4ee5\u4e0b\u79f0\u201c\u60a8\u201d\uff09\u63a5\u53d7\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u4e3a\u201c\u672c\u516c\u53f8\u201d\uff09\u6240\u63d0\u4f9b\u7684\u670d\u52a1\u6240\u4f7f\u7528\u7684\u6cd5\u5f8b\u670d\u52a1\u6761\u6b3e\u3002 \u672c\u516c\u53f8\u5728\u6b64\u7279\u522b\u63d0\u9192\u60a8\u8ba4\u771f\u9605\u8bfb\u672c\u534f\u8bae\u7684\u5168\u90e8\u6761\u6b3e\uff0c\u7279\u522b\u662f\u5176\u4e2d\u514d\u9664\u6216\u8005\u9650\u5236\u672c\u516c\u53f8\u8d23\u4efb\u7684\u514d\u8d23\u58f0\u660e\u6761\u6b3e\u4ee5\u53ca\u7528\u6237\u987b\u9075\u5b88\u7684\u6761\u6b3e\u548c\u5176\u5b83\u9650\u5236\u7528\u6237\u6743\u5229\u7684\u6761\u6b3e\uff0c\u8fd9\u4e9b\u6761\u6b3e\u5e94\u5728\u4e2d\u56fd\u6cd5\u5f8b\u6240\u5141\u8bb8\u7684\u8303\u56f4\u5185\u6700\u5927\u7a0b\u5ea6\u5730\u9002\u7528\u3002\u9664\u975e\u7528\u6237 \u63a5\u53d7\u672c\u534f\u8bae\u7684\u5168\u90e8\u6761\u6b3e\uff0c\u5426\u5219\u65e0\u6743\u5b89\u88c5\u8fd0\u884c\u5ba2\u6237\u7aef\u8f6f\u4ef6\u6216\u4ee5\u5176\u5b83\u65b9\u5f0f\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u4efb\u4f55\u670d\u52a1\u5185\u5bb9\u3002\n\n\u5f53\u60a8\u5728\u7ebf\u70b9\u51fb\u201c\u540c\u610f\u201d\u6216\u201c\u63a5\u53d7\u201d\u540e\uff0c\u5219\u89c6\u4e3a\u60a8\u5df2\u8be6\u7ec6\u9605\u8bfb\u5e76\u540c\u610f\u672c\u534f\u8bae\u7684\u5168\u90e8\u5185\u5bb9\uff0c\u5e76\u540c\u610f\u9075\u5b88\u672c\u534f\u8bae\u7684\u89c4\u5b9a\u3002\n\n\u5982\u679c\u60a8\u672a\u6ee118\u5468\u5c81\uff0c\u8bf7\u5728\u6cd5\u5b9a\u76d1\u62a4\u4eba\u7684\u966a\u540c\u4e0b\u9605\u8bfb\u672c\u534f\u8bae\u3002\n\n\u4e00\u3001\u7279\u522b\u63d0\u793a\n\n\u672c\u516c\u53f8\u540c\u610f\u6309\u7167\u672c\u534f\u8bae\u7684\u89c4\u5b9a\u53ca\u5176\u4e0d\u65f6\u53d1\u5e03\u7684\u64cd\u4f5c\u89c4\u5219\u63d0\u4f9b\u57fa\u4e8e\u4e92\u8054\u7f51\u7684\u76f8\u5173 \u670d\u52a1(\u4ee5\u4e0b\u79f0\u201c\u7f51\u7edc\u670d\u52a1\u201d)\uff0c\u4e3a\u83b7\u5f97\u7f51\u7edc\u670d\u52a1\uff0c\u60a8\u540c\u610f\u672c\u534f\u8bae\u7684\u5168\u90e8\u6761\u6b3e\u5e76\u6309\u7167\u9875\u9762\u4e0a\u7684\u63d0\u793a\u5b8c\u6210\u5168\u90e8\u7a0b\u5e8f\u3002\u60a8\u5728\u8fdb\u884c\u7a0b\u5e8f\u8fc7\u7a0b\u4e2d\u70b9\u51fb\u201c\u540c\u610f\u201d\u6309\u94ae\u5373\u8868\u793a\u7528\u6237\u5b8c\u5168\u63a5\u53d7\u672c\u534f\u8bae\u9879\u4e0b\u7684\u5168\u90e8\u6761\u6b3e\u3002\u8fd9\u4e9b\u6761\u6b3e\u53ef\u7531\u672c\u516c\u53f8\u968f\u65f6\u66f4\u65b0\uff0c\u534f\u8bae\u6761\u6b3e\u4e00\u65e6\u53d1\u751f\u53d8\u52a8\uff0c\u672c\u516c\u53f8\u5c06\u4f1a\u5728\u76f8\u5173\u7684\u9875\u9762\u4e0a\u63d0\u793a\u53d8\u66f4\u5185\u5bb9\u3002\u4fee\u6539\u540e\u7684\u534f\u8bae\u4e00\u65e6\u5728\u9875\u9762\u4e0a\u516c\u5e03\u5373\u6709\u6548\u4ee3\u66ff\u539f\u6765\u7684\u534f\u8bae\u3002\u60a8\u5728\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u8f6f\u4ef6\u4ea7\u54c1\u4e4b\u524d\uff0c\u5e94\u4ed4\u7ec6\u9605\u8bfb\u672c\u534f\u8bae\uff0c\u5982\u4e0d\u540c\u610f\u672c\u670d\u52a1\u534f\u8bae\u53ca\u6216\u968f\u65f6\u5bf9\u5176\u7684\u4fee\u6539\uff0c\u8bf7\u505c\u6b62\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u670d\u52a1\u5185\u5bb9\u3002\n\u7279\u522b\u7533\u660e\uff0c\u672a\u6210\u5e74\u4eba\u5e94\u5728\u6cd5\u5b9a\u76d1\u62a4\u4eba\u7684\u966a\u540c\u4e0b\u5ba1\u9605\u548c\u63a5\u53d7\u672c\u534f\u8bae\u3002\u672a\u6210\u5e74\u4eba\u5728\u4f7f\u7528\u672c\u516c\u53f8\u7684\u670d\u52a1\u524d\uff0c\u5e94\u4e8b\u5148\u53d6\u5f97\u7236\u6bcd\uff08\u76d1\u62a4\u4eba\uff09\u7684\u540c\u610f\u3002\u82e5\u7236\u6bcd\uff08\u76d1\u62a4\u4eba\uff09\u5e0c\u671b\u672a\u6210\u5e74\u4eba\uff08\u5c24\u5176\u662f\u5341\u5c81\u4ee5\u4e0b\u5b50\u5973\uff09\u5f97\u4ee5\u4f7f\u7528\u672c\u670d\u52a1\uff0c\u5fc5\u987b\u4ee5\u6cd5\u5b9a\u76d1\u62a4\u4eba\u8eab\u4efd\u52a0\u4ee5\u5224\u65ad\u672c\u670d\u52a1\u662f\u5426\u7b26\u5408\u4e8e\u672a\u6210\u5e74\u4eba\u3002\u672a\u6210\u5e74\u4eba\u7528\u6237\u5e94\u5f53\u5728\u5408\u7406\u7a0b\u5ea6\u5185\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u670d\u52a1\u5185\u5bb9\uff0c\u4e0d\u5f97\u56e0\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u670d\u52a1\u5185\u5bb9\u800c\u5f71\u54cd\u4e86\u65e5\u5e38\u7684\u5b66\u4e60\u751f\u6d3b\u3002\u7528\u6237\u7406\u89e3\u672c\u516c\u53f8\u65e0\u4e49\u52a1\u5bf9\u672c\u6b3e\u524d\u8ff0\u4e8b\u9879\u8fdb\u884c\u4efb\u4f55\u5f62\u5f0f\u7684\u5ba1\u67e5\u548c\u786e\u8ba4\u3002\n\u4e8c\u3001\u6743\u5c5e\u58f0\u660e\n\n\u672c\u516c\u53f8\u53d1\u5e03\u7684\u6240\u6709\u8f6f\u4ef6\u5747\u53d7\u4e2d\u534e\u4eba\u6c11\u5171\u548c\u56fd\u7248\u6743\u6cd5\u4fdd\u62a4\uff0c\u7528\u6237\u53ef\u4ee5\u514d\u8d39\u4e0b\u8f7d\u5e76\u4f7f\u7528\uff0c\u4f46\u672a\u7ecf\u672c\u516c\u53f8\u8bb8\u53ef\uff0c\u7528\u6237\u4e0d\u5f97\u4fee\u6539\u672c\u516c\u53f8\u6e38\u620f\u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f\uff1b\u4e0d\u5f97\u5236\u4f5c\u3001\u4f20\u64ad\u6216\u4f7f\u7528\u6270 \u4e71\u6b63\u5e38\u6e38\u620f\u79e9\u5e8f\u6216\u6709\u635f\u672c\u516c\u53f8\u5229\u76ca\u7684\u4efb\u4f55\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u3002\n\u672c\u516c\u53f8\u6e38\u620f\u670d\u52a1\u7684\u7ecf\u8425\u6743\u5c5e\u4e8e\u672c\u516c\u53f8\u6240\u6709\uff0c\u9664\u975e\u4e0e\u672c\u516c\u53f8\u53e6\u7b7e\u534f\u8bae\uff0c\u7528\u6237\u540c\u610f\u672c\u670d\u52a1\u4ec5\u4f9b\u4e2a\u4eba\u4e14\u4ec5\u4e8e\u672c\u670d\u52a1\u5e73\u53f0\u8303\u56f4\u5185\u975e\u5546\u4e1a\u6027\u8d28\u7684\u4f7f\u7528\u3002\u7528\u6237\u540c\u65f6\u627f\u8bfa\u4e0d\u7ecf\u672c\u516c\u53f8\u4e66\u9762\u540c\u610f\uff0c\u4e0d\u5f97\u5229\u7528\u672c\u670d\u52a1\u8fdb\u884c\u5e7f\u544a\u3001\u9500\u552e\u3001\u5546\u4e1a\u5c55\u793a\u7b49\u5546\u4e1a\u6027\u7528\u9014\u3002\n\u7528\u6237\u53d1\u8868\u4e8e\u672c\u516c\u53f8\u6e38\u620f\u53ca\u914d\u5957\u7f51\u7ad9\u7684\u6240\u6709\u5185\u5bb9\u4ec5\u4ee3\u8868\u7528\u6237\u81ea\u5df1\u7684\u7acb\u573a\u548c\u89c2\u70b9\uff0c\u4e0e\u672c\u516c\u53f8\u65e0\u5173\uff0c\u7531\u7528\u6237\u672c\u4eba\u627f\u62c5\u4e00\u5207\u6cd5\u5f8b\u8d23\u4efb\u3002\n\u4e09\u3001\u7528\u6237\u9690\u79c1\u5236\u5ea6\n\n\u672c\u516c\u53f8\u7edd\u5bf9\u4e0d\u4f1a\u4fee\u6539\u7528\u6237\u7684\u4e2a\u4eba\u8d44\u6599\uff0c\u6216\u7f16\u8f91\u6216\u900f\u9732\u7528\u6237\u5728\u6ce8\u518c\u8d44\u6599\u4e2d\u7684\u5bc6\u7801\u3001\u59d3\u540d\u3001\u5730\u5740\u3001\u7535\u8bdd\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u53ca\u4fdd\u5b58\u5728\u672c\u516c\u53f8\u4e2d\u7684\u975e\u516c\u5f00\u5185\u5bb9\uff0c\u9664\u975e\u6709\u6cd5\u5f8b\u8bb8\u53ef\u8981\u6c42\u6216\u672c\u516c\u53f8\u5728\u8bda\u4fe1\u7684\u57fa\u7840\u4e0a\u8ba4\u4e3a\u900f\u9732\u8fd9\u4e9b\u4fe1\u606f\u5728\u4ee5\u4e0b\u56db\u79cd\u60c5\u51b5\u662f\u5fc5\u8981\u7684\uff1a\n\n\u9075\u5b88\u6709\u5173\u6cd5\u5f8b\u89c4\u5b9a\uff0c\u9075\u4ece\u5408\u6cd5\u670d\u52a1\u7a0b\u5e8f\u3002\n\u7ef4\u62a4\u672c\u516c\u53f8\u7684\u5546\u6807\u6240\u6709\u6743\u3002\n\u5728\u7d27\u6025\u60c5\u51b5\u4e0b\u7aed\u529b\u7ef4\u62a4\u7528\u6237\u4e2a\u4eba\u548c\u793e\u4f1a\u5927\u4f17\u7684\u9690\u79c1\u5b89\u5168\u3002\n\u7b26\u5408\u5176\u4ed6\u76f8\u5173\u7684\u8981\u6c42\u3002\n\u56db\u3001\u6e38\u620f\u6570\u636e\u7684\u7279\u522b\u89c4\u5b9a\n\n\u672c\u516c\u53f8\u4e25\u7981\u4ee5\u4e0b\u884c\u4e3a\uff1a\n\n\u53d1\u5e03\u8fdd\u6cd5\u4fe1\u606f\u3001\u4e25\u91cd\u8fdd\u80cc\u793e\u4f1a\u516c\u5fb7\u3001\u4ee5\u53ca\u5176\u4ed6\u8fdd\u53cd\u6cd5\u5f8b\u7981\u6b62\u6027\u89c4\u5b9a\u7684\u884c\u4e3a\uff1b\n\u5229\u7528\u6e38\u620f\u4f5c\u5f0a\u5de5\u5177\u6216\u8005\u5916\u6302\u3001\u6e38\u620fBUG\u83b7\u53d6\u975e\u6cd5\u5229\u76ca\uff0c\u4e25\u91cd\u4fb5\u72af\u672c\u516c\u53f8\u5229\u76ca\u7684\u884c\u4e3a\uff1b\n\u8bba\u575b\u3001\u6e38\u620f\u4e2d\u4f20\u64ad\u975e\u6cd5\u8baf\u606f\u3001\u6728\u9a6c\u75c5\u6bd2\u3001\u5916\u6302\u8f6f\u4ef6\u7b49\u7684\u884c\u4e3a\uff1b\n\u56e0\u6e38\u620f\u4e2d\u4e3e\u529e\u7684\u6d3b\u52a8\u7ed3\u675f\uff0c\u76f8\u5173\u9053\u5177\u88ab\u5220\u9664\u6216\u5151\u6362\uff0c\u7528\u6237\u4e0d\u5f97\u63d0\u51fa\u7d22\u8d54\u7b49\u8981\u6c42\uff0c\u672c\u516c\u53f8\u5bf9\u4e8e\u6d3b\u52a8\u6709\u6700\u7ec8\u7684\u89e3\u91ca\u6743\u3002\n\u4e94\u3001\u670d\u52a1\u7684\u505c\u6b62\u548c\u66f4\u6539\n\n\u53d1\u751f\u4e0b\u5217\u60c5\u5f62\u4e4b\u4e00\u65f6\uff0c\u672c\u516c\u53f8\u6709\u6743\u505c\u6b62\u6216\u4e2d\u65ad\u5411\u7528\u6237\u63d0\u4f9b\u7684\u670d\u52a1\uff1a\n\u7528\u6237\u6709\u53d1\u5e03\u8fdd\u6cd5\u4fe1\u606f\u3001\u4e25\u91cd\u8fdd\u80cc\u793e\u4f1a\u516c\u5fb7\u3001\u4ee5\u53ca\u5176\u4ed6\u8fdd\u53cd\u6cd5\u5f8b\u7981\u6b62\u6027\u89c4\u5b9a\u7684\u884c\u4e3a\uff1b\n\u53d1\u5e03\u4e0d\u9053\u5fb7\u4fe1\u606f\u3001\u5e7f\u544a\u3001\u8a00\u8bba\u3001\u8fb1\u9a82\u9a9a\u6270\u4ed6\u4eba\uff0c\u6270\u4e71\u6b63\u5e38\u7684\u7f51\u7edc\u79e9\u5e8f\u548c\u6e38\u620f\u79e9\u5e8f\u7684\u884c\u4e3a\uff0c\u4ee5\u53ca\u5b9e\u65bd\u8fdd\u53cd\u672c\u534f\u8bae\u548c\u76f8\u5173\u89c4\u5b9a\u3001\u7ba1\u7406\u529e\u6cd5\u3001\u516c\u544a\u3001\u91cd\u8981\u63d0\u793a\uff0c\u5bf9\u672c\u516c\u53f8\u548c\u5176\u4ed6\u7528\u6237\u5229\u76ca\u9020\u6210\u635f\u5bb3\u7684\u5176\u4ed6\u884c\u4e3a\uff1b\n\u7531\u4e8e\u76f8\u5173\u653f\u5e9c\u673a\u6784\u7684\u8981\u6c42\u3002\n\u5728\u672c\u670d\u52a1\u6761\u6b3e\u7ea6\u5b9a\u7684\u60c5\u5f62\u4e0b\uff0c\u672c\u516c\u53f8\u5c31\u505c\u6b62\u6216\u66f4\u6539\u6216\u7ec8\u6b62\u5411\u7528\u6237\u6240\u63d0\u4f9b\u7684\u670d\u52a1\u800c\u53ef\u80fd\u4ea7\u751f\u7684\u4e0d\u4fbf\u6216\u635f\u5bb3\uff0c\u672c\u516c\u53f8\u5bf9\u7528\u6237\u672c\u4eba\u6216\u4efb\u4f55\u7b2c\u4e09\u4eba\u5747\u4e0d\u8d1f\u4efb\u4f55\u635f\u5bb3\u8d54\u507f\u8d23\u4efb\u3002\n\u672c\u516c\u53f8\u6709\u6743\u4ec5\u6839\u636e\u5176\u5224\u65ad\uff0c\u5355\u65b9\u51b3\u5b9a\u65b0\u589e\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u6682\u505c\u6216\u7ec8\u6b62\u5176\u6240\u63d0\u4f9b\u7684\u5168\u90e8\u6216\u90e8\u5206\u670d\u52a1\uff08\u5305\u62ec\u4e14\u4e0d\u9650\u4e8e\u589e\u52a0\u3001\u6682\u505c\u6216\u7ec8\u6b62\u67d0\u4e2a\u6e38\u620f\u7684\u8fd0\u8425\uff09\uff0c\u4e14\u65e0\u9700\u53e6\u884c\u4e2a\u522b\u901a\u77e5\u7528\u6237\uff0c\u7528\u6237\u4e0d\u5f97\u56e0\u6b64\u8981\u6c42\u4efb\u4f55\u8865\u507f\u6216\u8d54\u507f\u3002\n\u672c\u516c\u53f8\u5bf9\u5176\u670d\u52a1\u4e0d\u4fdd\u8bc1\u4e0d\u51fa\u73b0\u4efb\u4f55\u7a0b\u5e8fBUG\uff0c\u5e76\u5bf9\u7531\u6b64\u53ef\u80fd\u4ea7\u751f\u7684\u95ee\u9898\u4e0d\u627f\u62c5\u4efb\u4f55\u8d54\u507f\u8d23\u4efb\u3002\n\u516d\u3001\u670d\u52a1\u6761\u6b3e\u7684\u4fee\u6539\n\n\u672c\u516c\u53f8\u4fdd\u7559\u968f\u65f6\u4fee\u6539\u672c\u670d\u52a1\u6761\u6b3e\u7684\u6743\u5229\uff0c\u4fee\u6539\u672c\u670d\u52a1\u6761\u6b3e\u65f6\uff0c\u672c\u516c\u53f8\u5c06\u4e8e\u76f8\u5173\u7f51\u7ad9\u516c\u544a\u4fee\u6539\u7684\u4e8b\u5b9e\uff0c\u800c\u4e0d\u53e6\u5bf9\u7528\u6237\u8fdb\u884c\u4e2a\u522b\u901a\u77e5\u3002\u82e5\u7528\u6237\u4e0d\u540c\u610f\u4fee\u6539\u7684\u5185\u5bb9\uff0c\u53ef\u505c\u6b62\u4f7f\u7528\u672c\u516c\u53f8\u7684\u670d\u52a1\u3002\u82e5\u7528\u6237\u7ee7\u7eed\u4f7f\u7528\u672c\u516c\u53f8\u7684\u670d\u52a1\uff0c\u5373\u89c6\u4e3a\u7528\u6237\u5df2\u63a5\u53d7\u672c\u516c\u53f8\u6240\u4fee\u8ba2\u7684\u5185\u5bb9\u3002\n\n\u4e03\u3001\u6cd5\u5f8b\u9002\u7528\u548c\u4e89\u8bae\u89e3\u51b3\n\n\u672c\u534f\u8bae\u7684\u8ba2\u7acb\u3001\u6267\u884c\u548c\u89e3\u91ca\u53ca\u4e89\u8bae\u7684\u89e3\u51b3\u5747\u5e94\u9002\u7528\u4e2d\u56fd\u6cd5\u5f8b\u3002\n\u672c\u534f\u8bae\u6784\u6210\u53cc\u65b9\u5bf9\u672c\u534f\u8bae\u4e4b\u7ea6\u5b9a\u4e8b\u9879\u53ca\u5176\u4ed6\u6709\u5173\u4e8b\u5b9c\u7684\u5b8c\u6574\u534f\u8bae\uff0c\u9664\u672c\u534f\u8bae\u89c4\u5b9a\u7684\u4e4b\u5916\uff0c\u672a\u8d4b\u4e88\u672c\u534f\u8bae\u5404\u65b9\u5176\u4ed6\u6743\u5229\u3002\n\u5982\u672c\u534f\u8bae\u4e2d\u7684\u4efb\u4f55\u6761\u6b3e\u65e0\u8bba\u56e0\u4f55\u79cd\u539f\u56e0\u5b8c\u5168\u6216\u90e8\u5206\u65e0\u6548\u6216\u4e0d\u5177\u6709\u6267\u884c\u529b\uff0c\u672c\u534f\u8bae\u7684\u5176\u4f59\u6761\u6b3e\u4ecd\u5e94\u6709\u6548\u5e76\u4e14\u6709\u7ea6\u675f\u529b\u3002\n\u672c\u534f\u8bae\u4e2d\u7684\u6807\u9898\u4ec5\u4e3a\u65b9\u4fbf\u800c\u8bbe\uff0c\u4e0d\u5177\u6cd5\u5f8b\u6216\u5951\u7ea6\u6548\u679c\u3002\n\u5982\u53cc\u65b9\u5c31\u672c\u534f\u8bae\u5185\u5bb9\u6216\u5176\u6267\u884c\u53d1\u751f\u4efb\u4f55\u4e89\u8bae\uff0c\u53cc\u65b9\u5e94\u5c3d\u91cf\u53cb\u597d\u534f\u5546\u89e3\u51b3\uff1b\u534f\u5546\u4e0d\u6210\u65f6\uff0c\u4efb\u4f55\u4e00\u65b9\u5747\u53ef\u5411\u672c\u516c\u53f8\u6240\u5728\u5730\u7684\u4eba\u6c11\u6cd5\u9662\u63d0\u8d77\u8bc9\u8bbc\u3002\n\u5728\u9002\u7528\u6cd5\u5f8b\u5141\u8bb8\u7684\u6700\u5927\u8303\u56f4\u5185\uff0c\u672c\u516c\u53f8\u4fdd\u7559\u5bf9\u672c\u534f\u8bae\u7684\u6700\u7ec8\u89e3\u91ca\u6743\u3002\u7528\u6237\u5982\u5bf9\u672c\u534f\u8bae\u6709\u4efb\u4f55\u7591\u95ee\uff0c\u8bf7\u8054\u7cfblpx@gamejym.com\u3002"],t.channelObj=window.qq,t.authorizationButton=null,t.videoState=r.UnReady,t.videoAdClickDelay=null,t.videoParas=null,t.autoShowBannerTimer=30,t.bannerTimeId=-1,t.showInterCDOver=!0,t}return n(t,a),t.prototype.hasPrivacy=function(){return!!d.default.getData("isAgree",0)},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.exit=function(){this.channelObj.exitMiniProgram({})},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this;l.pzaSoundManager.initQQPlayAudio(),this.channelObj.onShow(function(){cc.game.resume(),console.log("game onShow"),l.pzaSoundManager.resumeMusic()}),this.channelObj.onHide(function(){cc.game.pause(),console.log("game onHide")});var n=this.getPara("ctrlId");if(n){var i={id:n};d.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(a,n){a?d.default.err(a):""+n.code=="0"?(e.ctrl=n.data,d.default.log("\u8fd4\u56de",e.ctrl),p.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),p.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),p.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),p.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),p.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),p.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),e.qqLogin(function(){t&&t()})):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}this.channelObj.showShareMenu({}),this.initVideoAd(),this.initInterstitialAd()},t.prototype.qqLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var t=this;this.channelObj.login({success:function(e){if(e.code){console.log("qqLogin code:",e.code);var o={appId:t.getPara("appId"),code:e.code};d.default.jpost("https://ga.gamejym.com/fcm/qq/getOpenId",o,function(e,o){console.log("resp==>",o),e?d.default.err(e):""+o.errcode=="0"?(o.openid&&(t.channelUserId=o.openid,console.log("me.channelUserId",t.channelUserId),a&&a("login succ")),null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar||t.getUserInfo(null)):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))})}else console.log("\u767b\u5f55\u5931\u8d25\uff01"+e.errMsg)}})},t.prototype.sendUserInfo=function(a){if(null!=a)if(p.pzaLocalData.data.playerNick=a.nickName,p.pzaLocalData.data.playerAvatar=a.avatarUrl,p.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};d.default.jpost("https://ga.gamejym.com/fcm/qq/sendUserInfo",t,function(a,t){a?d.default.err(a):d.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(a,t,e){void 0===e&&(e=!0),console.log("run getUserInfo!!");var o=this.channelObj,n=this;o.getSetting({success:function(t){t.authSetting["scope.userInfo"]?o.getUserInfo({success:function(t){console.log("userInfo",t.userInfo),n.sendUserInfo(t.userInfo),a&&a()}}):o.authorize({scope:"scope.userInfo",success:function(){o.startRecord(),console.log("userInfo",t.userInfo),n.sendUserInfo(t.userInfo),a&&a()}})}})},t.prototype.destroyAuthorizationButton=function(){try{if(!this.authorizationButton)return;this.authorizationButton.destroy(),this.authorizationButton=null}catch(a){this.authorizationButton=null,console.error(a)}},t.prototype.qqCheckPrivacySetting=function(a,t){var e=window.qq;"function"==typeof e.getPrivacySetting?e.getPrivacySetting({success:function(t){console.log(t),a&&a(t&&t.needAuthorization)},fail:function(){t&&t()},complete:function(){}}):t&&t()},t.prototype.qqPrivacyAuthorize=function(a,t){var e=window.qq;"function"==typeof e.requirePrivacyAuthorize?e.requirePrivacyAuthorize({success:function(){console.log("\u7528\u6237\u540c\u610f\u9690\u79c1\u6388\u6743"),a&&a()},fail:function(){console.log("\u7528\u6237\u62d2\u7edd\u9690\u79c1\u6388\u6743"),t&&t()},complete:function(){}}):t&&t()},t.prototype.initVideoAd=function(){var a=this;this.getPara("videoId")&&(this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:this.getPara("videoId"),success:function(){console.log("loadAndShowVideoAd createRewardedVideoAd success")},fail:function(a,t){console.log("loadAndShowVideoAd createRewardedVideoAd fail: "+a+","+t)},complete:function(){console.log("loadAndShowVideoAd createRewardedVideoAd complete")}}),this.rewardedVideoAd.onLoad(function(){console.log("videoAd loaded.")}),this.rewardedVideoAd.onError(function(t){console.error("load ad error:"+JSON.stringify(t)),cc.game.resume(),l.pzaSoundManager.resumeMusic(),a.videoParas.endCall&&a.videoParas.endCall(),a.videoParas.failCall&&a.videoParas.failCall(),a.channelObj.showToast({message:"\u6682\u65e0\u5e7f\u544a"})}),this.rewardedVideoAd.onClose(function(t){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u5173\u95ed",t),t&&t.isEnded||void 0===t?(console.log("\u64ad\u653e\u6fc0\u52b1\u89c6\u9891\u7ed3\u675f\uff0c\u7ed9\u4e88\u5956\u52b1"),a.videoParas.sucCall&&a.videoParas.sucCall(),d.default.eventReport("showVideo\u5b8c\u6210-"+a.videoParas.posName),p.pzaLocalData.bpWatchAd()):(console.log("\u64ad\u653e\u6ca1\u7ed3\u675f\uff0c\u4e0d\u7ed9\u4e88\u5956\u52b1"),a.videoParas.failCall()&&a.videoParas.failCall()),a.loadVideo(),cc.game.resume(),l.pzaSoundManager.resumeMusic(),a.videoParas.endCall&&a.videoParas.endCall()}),this.loadVideo())},t.prototype.showVideo=function(a){return console.log("pzaVideoState ",this.videoState),this.videoState==r.Play?(cc.game.resume(),l.pzaSoundManager.resumeMusic(),this.videoParas.failCall&&this.videoParas.failCall(),this.videoParas.endCall&&this.videoParas.endCall(),console.log("\u6b63\u5728\u64ad\u653e\u6fc0\u52b1\u89c6\u9891")):this.videoState==r.UnReady?(cc.game.resume(),l.pzaSoundManager.resumeMusic(),this.videoParas.failCall&&this.videoParas.failCall(),this.videoParas.endCall&&this.videoParas.endCall(),void this.channelObj.showToast({message:"\u6682\u65e0\u5e7f\u544a"})):(this.videoParas=a,this.videoState=r.Play,void this.rewardedVideoAd.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}))},t.prototype.loadVideo=function(){var a=this;a.rewardedVideoAd.load().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),setTimeout(function(){a.videoState=r.Ready},3e3)}).catch(function(){console.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),a.videoState=r.UnReady,setTimeout(function(){a.loadVideo()},2e3)})},t.prototype.showBanner=function(){var a=this.getPara("bannerAd");if(a&&0!=this.getCtrl("p21")){clearTimeout(this.autoShowBannerTimer);var t=this.channelObj.getSystemInfoSync(),e=t.windowWidth,o=t.windowHeight;this.bannerState=i.Show,d.default.log("showBanner",a);var n={adUnitId:a,style:{top:0,left:0,width:320}},r=this;this.bannerAd=this.channelObj.createBannerAd(n),this.bannerAd.onResize(function(a){r.bannerAd.style.top=o-a.height,r.bannerAd.style.left=(e-a.width)/2,r.bannerAd.show().then(function(){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),r.bannerState==i.Hide&&r.closeBanner()}).catch(function(a){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})}),this.bannerAd.onError(function(a){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))})}},t.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&this.bannerAd.destroy()},t.prototype.showBannerByTime=function(a){var t=this;void 0===a&&(a=!1);var e=this.getCtrl("p1");this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<40&&(e=40),this.showBanner(a),this.bannerTimeId=setInterval(function(){t.showBanner(a)},1e3*e)},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.showInter=function(a){var t=s.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",c.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",t),(a||c.pzaChannel.instance().getCtrl("p10")>=t)&&this.showInterstitialAd()},t.prototype.closeInter=function(){this.closeInterstitialAd()},t.prototype.initInterstitialAd=function(){var a=this,t=this.getPara("customInsertAd");if(t){var e=this.getSysInfo().windowHeight/2-260,o={adUnitId:t};d.default.log("showCustomAd",t,e),this.interstitialAd=this.channelObj.createInterstitialAd(o),this.interstitialAd.onClose(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5931\u8d25");var t=s.pzaUtil.getRandomFloatNum(0,1),e=.1*c.pzaChannel.instance().getCtrl("p18");console.log("\u5173\u95ed\u540e\u6982\u7387: ",t,e),e>=t&&setTimeout(function(){a.showInter()},3e3)}),this.interstitialAd.onError(function(a){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.interstitialAd.load()}},t.prototype.showInterstitialAd=function(){if(this.getPara("customInsertAd"))if(this.showInterCDOver){var a=this,t=this.getCtrl("p12"),e=c.pzaChannel.instance().getCtrl("p11");console.log("p11",e),console.log("p12",t);var o=this.getCtrl("p26"),n=s.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",c.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",n);var i=0;.01*o>=n&&(i=1e3),setTimeout(function(){a.interstitialAd.show().then(function(){d.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),a.showInterCDOver=!1,a.interstitialAd.load(),setTimeout(function(){a.showInterCDOver=!0},1e3*e)}).catch(function(t){d.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(t)),a.interstitialAd.load()})},t*i)}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},t.prototype.closeInterstitialAd=function(){this.getPara("customInsertAd")&&this.interstitialAd&&this.interstitialAd.hide()},t.prototype.shareAppMessage=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null),console.log("qq shareAppMessage"),this.channelObj.shareAppMessage({title:"\u53eb\u4f60\u7684\u670b\u53cb\u4e00\u8d77\u6765\u73a9\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b!"}),t&&t()},t.prototype.addShortcut=function(a){console.log("click oppo addShortcut");var t=this;this.channelObj.hasShortcutInstalled({success:function(e){console.log("hasShortcutInstalled res",e),0==e?t.channelObj.installShortcut({success:function(){console.log("\u521b\u5efa\u6210\u529f"),a.sucCall&&a.sucCall()},fail:function(){},complete:function(){}}):console.log("\u5df2\u7ecf\u521b\u5efa\u684c\u9762\u56fe\u6807")},fail:function(){},complete:function(){}})},t.prototype.checkShortcut=function(a){this.channelObj.hasShortcutInstalled({success:function(t){0==t?a.sucCall&&a.sucCall():a.failCall&&a.failCall()},fail:function(){},complete:function(){}})},t}(u.pzaChannelWeb);e.pzaChannelQQ=h,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelRY:[function(a,t,e){"use strict";cc._RF.push(t,"674d0i2X6NLzZQde3I2A/+a","pzaChannelRY");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelRY=void 0;var i,r=a("../Common/pzaLocalData"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaUtil"),s=a("../View/pzaCommonMask"),c=a("./pzaChannel"),u=a("./pzaChannelWeb"),d=a("./pzakc");(function(a){a[a.Show=0]="Show",a[a.Hide=1]="Hide"})(i||(i={}));var h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="ry",t.paraMap=new Map([["appId","32035923"],["bannerAd","1705916"],["customBannerAd","1705916"],["customInsertAd","1705922"],["videoId","1705927"],["ctrlId","66cc411dc5b6582182fb7ace"]]),t.gameName="\u690d\u7269\u5927\u6218\u50f5\u5c38",t.bannerState=i.Hide,t.privacyStr=["\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n\u4ea7\u54c1\u540d\u79f0:\n\n\u300a\u852c\u83dc\u50f5\u5c38\u5927\u4e71\u6597\u300b\n\n\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n\n\u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n\u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n\u7b2c\u4e09\u65b9\u4ea7\u54c1\u6216\u670d\u52a1\u5982\u4f55\u83b7\u5f97\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u4e3a\u4e86\u5411\u60a8\u63d0\u4f9b\u66f4\u4e30\u5bcc\u548c\u5b8c\u6574\u7684\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0b\u8ff0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\uff08\u7b80\u79f0\u201cSDK\u201d\uff09\u4e3a\u60a8\u63d0\u4f9b\u670d\u52a1\u3002SDK\u7684\u5177\u4f53\u4fe1\u606f\u6536\u96c6\u548c\u4f7f\u7528\u60c5\u51b5\u8bf7\u4ee5SDK\u8fd0\u8425\u65b9\u7684\u9690\u79c1\u653f\u7b56\u6216\u76f8\u5173\u58f0\u660e\u4e3a\u51c6\u3002\n\nSDK\u540d\u79f0\tSDK\u63d0\u4f9b\u65b9\u540d\u79f0\tSDK\u4f7f\u7528\u76ee\u7684\tSDK\u6536\u96c6\u7684\u4fe1\u606f\t\u9690\u79c1\u653f\u7b56\u94fe\u63a5\noppo\u6e38\u620f\u4e2d\u5fc3SDK\toppo\toppo\u8d26\u53f7\u7cfb\u7edf,\u652f\u4ed8\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\thttps://open.oppomobile.com/wiki/doc#id=11007\noppo\u5e7f\u544aSDK\toppo\t\u7528\u4e8e\u63d0\u4f9b\u5e7f\u544a\u670d\u52a1\t\u8054\u7f51\u53ca\u7f51\u7edc\u72b6\u6001\u53d8\u5316,\u83b7\u53d6\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49);\u83b7\u53d6IMEI\u3001IMSI\u3001\u8bbe\u5907 MAC \u5730\u5740\u7b49\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f;(\u7c97\u7565\u6216\u7cbe\u786e\u7684)\u4f4d\u7f6e\u4fe1\u606f;\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8;\thttps://open.oppomobile.com/wiki/doc#id=11007\n\u4ee5\u4e0aSDK\u5185\u7f6e\u7b2c3\u65b9SDK\toppo\t\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,\u4f4d\u7f6e\u4fe1\u606f,mac\u5730\u5740,\u5e94\u7528\u5217\u8868\thttps://open.oppomobile.com/wiki/doc#id=11007\n1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n\n1.1 \u6ce8\u518c\u3001\u767b\u5f55\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n1.2 \u8ba4\u8bc1\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n\n1.3 \u4fe1\u606f\u53d1\u5e03\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n1.4 \u5b89\u5168\u8fd0\u884c\n\n1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n1.4.2 \u65e5\u5fd7\u4fe1\u606f\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n\n3.1\u5171\u4eab\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n3.2 \u8f6c\u8ba9\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n3.3 \u62ab\u9732\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n\n4.1 \u5b58\u50a8\u5730\u70b9\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n\n4.2 \u5b58\u50a8\u671f\u9650\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n6.2 \u6ce8\u9500\u5e10\u53f7\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n6.3 \u6295\u8bc9\u4e3e\u62a5\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002"],t.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2016SR153979",t.channelObj=window.qg,t.autoShowBannerTimer=30,t.bannerTimeId=-1,t.customAdMap={},t.showInterCDOver=!0,t.firstShowAdClose=!0,t}return n(t,a),t.prototype.hasPrivacy=function(){return!!d.default.getData("isAgree",0)},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.exit=function(){this.channelObj.exitApplication({data:0})},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this;this.channelObj.onShow(function(){cc.game.resume(),console.log("game onShow"),p.pzaSoundManager.resumeMusic()}),this.channelObj.onHide(function(){cc.game.pause(),console.log("game onHide")});var n=this.getPara("ctrlId");if(console.log("ctrlId :",n),n){var i={id:n};d.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(a,n){a?d.default.err(a):""+n.code=="0"?(e.ctrl=n.data,d.default.log("\u8fd4\u56de",e.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),r.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),r.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),e.qgLogin(function(){t&&t(),e.getDeviceID()})):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}},t.prototype.getDeviceID=function(){this.channelObj.getDeviceId({success:function(a){console.log("handling success: "+a.deviceId)},fail:function(a,t){console.log("handling fail, code = "+t)}})},t.prototype.qgLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var t=this;this.channelObj.login({success:function(e){var o=JSON.stringify(e.data);console.log(o),t.channelUserId=e.uid,console.log("me.channelUserId",t.channelUserId),a&&a("login succ")},fail:function(a){console.log(JSON.stringify(a))}})},t.prototype.sendUserInfo=function(a){if(null!=a)if(r.pzaLocalData.data.playerNick=a.nickName,r.pzaLocalData.data.playerAvatar=a.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/vivo/sendUserInfo",t,function(a,t){a?d.default.err(a):d.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(){},t.prototype.showVideo=function(a){var t=this,e=this.getPara("videoId");if(e){d.default.log("showVideo",e,this.rewardedVideoAd),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;this.videoFns.onLoad=function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(a){d.default.err(a)})},this.videoFns.onError=function(e){d.default.err(e),a.failCall&&a.failCall(),a.endCall&&a.endCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(t){console.log("video onClose===>",t),t&&t.isEnded?(a.sucCall(),d.default.eventReport("showVideo\u5b8c\u6210-"+a.posName),r.pzaLocalData.bpWatchAd()):a.failCall&&a.failCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),a.endCall&&a.endCall()},this.rewardedVideoAd.onLoad(this.videoFns.onLoad),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onClose(this.videoFns.onClose),this.rewardedVideoAd.load()}},t.prototype.showBanner=function(){var a=this,t=this.getPara("bannerAd");if(t&&0!=this.getCtrl("p21")){clearTimeout(this.autoShowBannerTimer),this.bannerState=i.Show,d.default.log("showBanner",t);var e={adUnitId:t,style:{left:0,top:0,width:500,gravity:"bottom"}};this.bannerAd=this.channelObj.createBannerAd(e),this.bannerAd.onError&&this.bannerAd.onError(function(a){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.bannerAd.load().then(function(){a.bannerAd.show().then(function(){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),a.bannerState==i.Hide&&a.closeBanner()}).catch(function(a){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})}).catch(function(a){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))})}},t.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&(this.bannerAd.destory(),this.bannerAd=null)},t.prototype.showBannerByTime=function(a){var t=this;void 0===a&&(a=!1);var e=this.getCtrl("p1");this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<40&&(e=40),this.showBanner(a),this.bannerTimeId=setInterval(function(){t.showBanner(a)},1e3*e)},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.showInter=function(a){var t=l.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",c.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",t),(a||.01*c.pzaChannel.instance().getCtrl("p10")>=t)&&this.showCustomAd(!1)},t.prototype.closeInter=function(){this.closeCustomAd(!1)},t.prototype.showCustomAd=function(a,t,e){var o=this,n=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");if(n)if(this.showInterCDOver){var i=a?this.getSysInfo().windowHeight-300:this.getSysInfo().windowHeight/2-260,r={adUnitId:n,style:{top:i}};e&&(r.style=e),d.default.log("showCustomAd",n,a,i),this.customAdMap[n]||(d.default.log("\u539f\u751f\u6a21\u677f\u6b63\u5728\u663e\u793a\u4e2d",n),this.customAdMap[n]=this.channelObj.createNativeAd(r),this.customAdMap[n].offHide(),this.customAdMap[n].onHide(function(){var a=l.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",c.pzaChannel.instance().getCtrl("p18")),.1*c.pzaChannel.instance().getCtrl("p18")>=a&&setTimeout(function(){o.showCustomAd(!1)},3e3),o.customAdMap[n].destroy(),o.customAdMap[n]=null}),this.customAdMap[n].offError(),this.customAdMap[n].onError(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.customAdMap[n].onError(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.customAdMap[n].offLoad(),this.customAdMap[n].onLoad(function(){console.log("customAd\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}));var p=this;if(a)this.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))});else{var s=this.getCtrl("p12"),u=c.pzaChannel.instance().getCtrl("p11");console.log("p11",u),console.log("p12",s);var h=this.getCtrl("p26"),m=l.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",c.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",m);var f=0;.01*h>=m&&(f=1e3),setTimeout(function(){o.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),p.showInterCDOver=!1,setTimeout(function(){p.showInterCDOver=!0},1e3*u)}).catch(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})},s*f)}}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},t.prototype.closeCustomAd=function(a){void 0===a&&(a=!1);var t=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");t&&this.customAdMap[t]&&this.customAdMap[t].hide()},t.prototype.shareAppMessage=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null),e&&e()},t.prototype.addShortcut=function(a){console.log("click oppo addShortcut");var t=this;this.channelObj.hasShortcutInstalled({success:function(e){console.log("hasShortcutInstalled res",e),0==e?t.channelObj.installShortcut({success:function(){console.log("\u521b\u5efa\u6210\u529f"),a.sucCall&&a.sucCall()},fail:function(){},complete:function(){}}):console.log("\u5df2\u7ecf\u521b\u5efa\u684c\u9762\u56fe\u6807")},fail:function(){},complete:function(){}})},t.prototype.checkShortcut=function(a){this.channelObj.hasShortcutInstalled({success:function(t){0==t?a.sucCall&&a.sucCall():a.failCall&&a.failCall()},fail:function(){},complete:function(){}})},t.prototype.copyToClip=function(a,t){this.channelObj.setClipboardData({data:a,success:function(){t&&t()},fail:function(){t&&t()},complete:function(){}})},t}(u.pzaChannelWeb);e.pzaChannelRY=h,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelTT:[function(a,t,e){"use strict";cc._RF.push(t,"c18b6INM5FCMLS581mPF2C7","pzaChannelTT");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelTT=void 0;var i,r,p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaStatisticsMgr"),c=a("../Common/pzaTipManager"),u=a("../Common/pzaUtil"),d=a("../View/pzaCommonMask"),h=a("./lanfei"),m=a("./pzaChannel"),f=a("./pzaChannelWeb"),z=a("./pzakc"),y=a("./pzaKDefine");(function(a){a[a.Show=0]="Show",a[a.Hide=1]="Hide"})(i||(i={})),function(a){a[a.Show=0]="Show",a[a.Hide=1]="Hide"}(r||(r={}));var g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="tt",t.channelId=1,t.paraMap=new Map([["appId","tt4033368edf05cd3c02"],["bannerAd","10jjdff9d2hdcegl6k"],["insertAd","ib9gc5666cacheg31j"],["vedioAd","45oe7a52iep1h468gi"],["ctrlId","663db8e6a331ce3adb8229fb"],["gid","663db8e6a331ce3adb8229fb"]]),t.sharePicsArr=[{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",url:"https://mmocgame.qpic.cn/wechatgame/a06ia0rK6eLAFOr97s9y4MXbfDz3hjYEjhAT6lWwv10xALzjGl9thAIqw3EYNEwhN/0",id:"Xf4UCePgQ6Owe0gO7nnOkw=="},{title:"\u5927\u54e5\uff0c\u6765\u548c\u59b9\u59b9\u4e00\u8d77\u73a9\u597d\u5417\uff1f",url:"https://mmocgame.qpic.cn/wechatgame/I1v75NcAhVDGbaKAWabMVB4HY5iaW8HfrWOqvibxcq1ic32xLibRswZuVj6txBSykbHl/0",id:"7Ic8CnJeSN+yLEi8xpRO5w=="}],t.shareTitle="\u690d\u7269\u6d88\u9664\u50f5\u5c38",t.shareImgId="3grhfxi84lo43cmn9m",t.channelObj=window.tt,t.sid=null,t.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2020SR0911781",t.onShowCall=null,t.authorizationButton=null,t.sdkData=null,t.shareIndex=0,t.bannerState=r.Hide,t.showInterCDOver=!0,t.startRecorderTime=0,t.endRecorderTime=0,t.video_path=null,t.videoTopics=["\u690d\u7269\u6d88\u9664\u50f5\u5c38"],t.title="\u690d\u7269\u6d88\u9664\u50f5\u5c38",t.recordeFlag=0,t.iconState=i.Hide,t.iconAd=null,t}return n(t,a),t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.hasPrivacy=function(){return!0},t.prototype.exit=function(){this.channelObj.exitMiniProgram({isFullExit:!0})},t.prototype.init=function(t){var e=this;console.log("byte init"),a.prototype.init.call(this,t);var o=this.channelObj;o.onShow(function(a){console.log("ttOnShow: ",a),cc.game.resume(),l.pzaSoundManager.resumeMusic(),e.onShowCall&&e.onShowCall(),e.onShowCall=null}),o.onHide(function(){cc.game.pause(),e.isShare&&(e.shareTime=(new Date).getTime())});var n={id:this.getPara("ctrlId")};z.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",n,function(a,o){a?z.default.err(a):""+o.code=="0"?(e.ctrl=o.data,p.pzaLocalData.data.showBeginViewMax=parseInt(e.ctrl.p5),p.pzaLocalData.data.showDaveViewMax=parseInt(e.ctrl.p5),p.pzaLocalData.data.showGardenViewMax=parseInt(e.ctrl.p5),p.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(e.ctrl.p6),z.default.log("\u5b57\u8282\u8fd4\u56de",e.ctrl),e.ttLogin(function(){t&&t()})):z.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))}),this.channelObj.showShareMenu({});var i=z.default.getData("sidebar",null),r={today:"",canGet:""};i&&(r=i),o.checkScene?o.checkScene({scene:"sidebar",success:function(a){console.log("check scene success: ",a.isExist),r.canGet="0",z.default.saveData("sidebar",r)},fail:function(a){console.log("check scene fail:",a),r.canGet="-1",z.default.saveData("sidebar",r)}}):console.log("\u6ca1\u6709checkScene");var s=z.default.getData("shareData",{today:"",shareCount:"0"}),c=new Date,u=c.getUTCFullYear()+"-"+c.getUTCMonth()+"-"+c.getUTCDay();s.today!=u&&(s.today=u,s.shareCount=0,z.default.saveData("shareData",s)),m.pzaChannel.getSharePics("zwdzjs",function(a){e.initSharePic(a)})},t.prototype.initSharePic=function(a){var t=this;null==a||a.length<=0||(this.sharePicsArr=[],a.forEach(function(a){var e={title:a.txt,url:a.picUrl,id:a.picId};t.sharePicsArr.push(e)}))},t.prototype.onLoginSuc=function(){var a=this.channelObj.getLaunchOptionsSync().query;a&&a.act&&a.sid&&(this.sid=a.sid,this.shareFrom(),null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar||this.getUserInfo(null))},t.prototype.getUserInfoToWeb=function(){null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar||this.getUserInfo(null)},t.prototype.shareFrom=function(){if(this.sid&&this.channelUserId){var a={sid:this.sid,openId:this.channelUserId,star:p.pzaLocalData.getAllStar()};z.default.jpost("https://ga.gamejym.com/fcm/zijie/shareFrom",a,function(a,t){a?z.default.err(a):z.default.log("shareFrom\u8fd4\u56de",t)})}},t.prototype.getShareResult=function(a,t){if(!this.channelUserId)return t([]);var e={appId:this.getPara("appId"),openId:this.channelUserId,act:a};z.default.jpost("https://ga.gamejym.com/fcm/zijie/getShareResult",e,function(a,e){if(a)return z.default.err(a),void t([]);z.default.log("getShareResult\u8fd4\u56de",e),e&&0===e.code?t(e.data):t([])})},t.prototype.wxCheckPrivacySetting=function(a,t){var e=window.tt;"function"==typeof e.getPrivacySetting?e.getPrivacySetting({success:function(t){console.log(t),a&&a(t&&t.needAuthorization)},fail:function(){t&&t()},complete:function(){}}):t&&t()},t.prototype.wxPrivacyAuthorize=function(a,t){var e=window.tt;"function"==typeof e.requirePrivacyAuthorize?e.requirePrivacyAuthorize({success:function(){console.log("\u7528\u6237\u540c\u610f\u9690\u79c1\u6388\u6743"),a&&a()},fail:function(){console.log("\u7528\u6237\u62d2\u7edd\u9690\u79c1\u6388\u6743"),t&&t()},complete:function(){}}):t&&t()},t.prototype.ttLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var t=window.tt,e=this;t.login({force:!0,success:function(o){if(!o.code)return console.error("\u672a\u83b7\u53d6\u5230code"),void a("\u672a\u83b7\u53d6\u5230code");console.log("login \u8c03\u7528\u6210\u529f",o.code);var n=t.getLaunchOptionsSync(),i=n.query,r={clickid:i.clickid||"",promotionid:i.promotionid||"",requestid:i.requestid||""};z.default.jpost("https://ga.gamejym.com/fcm/ttAdReport/init",{appId:e.getPara("appId"),code:o.code,scene:n.scene,query:r},function(t,o){return t?(z.default.err(t),void a(t)):0===o.code&&o.data&&o.data.openid?(console.log("init resp===>",o),e.channelUserId=o.data.openid,z.default.saveData("ttAdReport",1),e.getUserInfoToWeb(),void h.default.getToken(e.channelUserId,function(t,e){console.log("lanfei.getToken callRes :",e),h.default.token=e.data.token,a("login succ")})):(z.default.err("\u83b7\u53d6openId\u5931\u8d25",o),void a(t))})},fail:function(t){a(t.errMsg),console.log("login\u8c03\u7528\u5931\u8d25")}}),t.onShareAppMessage(function(){var a=e.getShareObj();return null!=a?{title:a.title,imageUrl:a.url,imageUrlId:a.id,success:function(){console.log("\u5206\u4eab\u6210\u529f")},fail:function(a){console.log("\u5206\u4eab\u5931\u8d25",a)}}:{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",imageUrl:"https://mmocgame.qpic.cn/wechatgame/a06ia0rK6eLAFOr97s9y4MXbfDz3hjYEjhAT6lWwv10xALzjGl9thAIqw3EYNEwhN/0",imageUrlId:"Xf4UCePgQ6Owe0gO7nnOkw==",success:function(){console.log("\u5206\u4eab\u6210\u529f")},fail:function(a){console.log("\u5206\u4eab\u5931\u8d25",a)}}})},t.prototype.getShareObj=function(){var a=Math.floor(Math.random()*this.sharePicsArr.length);return this.sharePicsArr[a]},t.prototype.registerOnshow=function(a){this.onShowCall=a},t.prototype.sendUserInfo=function(a){if(null!=a)if(p.pzaLocalData.data.playerNick=a.nickName,p.pzaLocalData.data.playerAvatar=a.avatarUrl,p.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};z.default.jpost("https://ga.gamejym.com/fcm/zijie/sendUserInfo",t,function(a,t){a?z.default.err(a):z.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(a,t,e){void 0===e&&(e=!0);var o=this.channelObj,n=this;o.getUserInfo({success:function(a){console.log("getUserInfo\u8c03\u7528\u6210\u529f: ",a.userInfo),n.sendUserInfo({nickName:a.userInfo.nickName,avatarUrl:a.userInfo.avatarUrl})},fail:function(a){console.log("getUserInfo\u8c03\u7528\u5931\u8d25: ",a.errMsg)}})},t.prototype.destroyAuthorizationButton=function(){try{if(!this.authorizationButton)return;this.authorizationButton.destroy(),this.authorizationButton=null}catch(a){this.authorizationButton=null,console.error(a)}},t.prototype.canShare=function(){return!0},t.prototype.showBanner=function(){var a=this,t=this.getPara("bannerAd");if(t&&0!=this.getCtrl("p21"))if(this.bannerState!=r.Show){z.default.log("showBanner isShow",t);var e=this.channelObj,o={adUnitId:t,adIntervals:30,style:{width:200,top:50,left:50}};this.bannerState=r.Show,this.bannerAd=e.createBannerAd(o),console.log("this.bannerAd ",this.bannerAd),this.bannerAd.resize&&this.bannerAd.resize(),this.bannerAd.onResize(function(t){console.log("banner onResize===",t.height,t.width),a.bannerAd.style.top=50,a.bannerAd.style.left=50,console.log("this.bannerAd ",a.bannerAd)}),this.bannerAd.onLoad(function(){a.bannerAd.show().then(function(){z.default.log("banner\u52a0\u8f7d\u6210\u529f"),a.bannerState==r.Hide&&(z.default.log("banner\u663e\u793a\u5173\u95ed"),a.closeBanner())}).catch(function(t){a.bannerAd=null,z.default.log("showBanner err:"+JSON.stringify(t))})})}else z.default.log("\u5df2\u7ecf\u663e\u793abanner")},t.prototype.closeBanner=function(){this.bannerState=r.Hide,this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)},t.prototype.showBannerByTime=function(a){void 0===a&&(a=!1)},t.prototype.closeBannerByTime=function(){this.closeBanner()},t.prototype.copyToClip=function(a,t){var e=this;this.channelObj.setClipboardData({data:a,success:function(){e.channelObj.showToast({title:"\u5185\u5bb9\u5df2\u590d\u5236"}),t(null)},fail:function(a){t(a)}})},t.prototype.showVideo=function(a){var t=this;s.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:a.adsid},{name:"adname",value:a.posName});var e=this.getPara("vedioAd");if(e){cc.game.pause(),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;o.videoFns.onLoad=function(){z.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},o.videoFns.onError=function(e){z.default.err("onError",e),cc.game.resume(),l.pzaSoundManager.resumeMusic(),a.failCall(),a.endCall(),s.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:-1},{name:"adname",value:a.posName}),d.pzaCommonMask.hideMask(),t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},o.videoFns.onClose=function(e){if(d.pzaCommonMask.hideMask(),cc.game.resume(),l.pzaSoundManager.resumeMusic(),e&&e.isEnded){a.sucCall(),a.endCall();var n=function(){z.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+a.posName),s.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:0},{name:"adname",value:a.posName})};if(!z.default.getData("ttAdReport",0)||!o.channelUserId)return console.log("\u9700\u8981\u5148\u6fc0\u6d3b\u624d\u80fd\u56de\u4f20\u5173\u952e\u884c\u4e3a"),void n();var i=t.channelObj.getLaunchOptionsSync().query.clickid;if(!i)return console.log("\u65e0clickid"),void n();console.log("clickid ===>",i),z.default.jpost("https://ga.gamejym.com/fcm/ttAdReport/report",{appId:o.getPara("appId"),type:"game_addiction",openId:o.channelUserId,clickid:i},function(a,t){if(a)return z.default.err(a),void n();n(),z.default.log("\u56de\u4f20\u5173\u952e\u884c\u4e3a\u8fd4\u56de",t)}),p.pzaLocalData.bpWatchAd()}else a.failCall(),a.endCall(),s.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:1},{name:"adname",value:a.posName});console.log("==========>\u6062\u590d")},o.rewardedVideoAd.onLoad(o.videoFns.onLoad),o.rewardedVideoAd.onError(o.videoFns.onError),o.rewardedVideoAd.onClose(o.videoFns.onClose),o.rewardedVideoAd.show().then(function(){z.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(){o.rewardedVideoAd.load().then(function(){return z.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){}).catch(function(){cc.game.resume(),l.pzaSoundManager.resumeMusic(),d.pzaCommonMask.hideMask()})}).catch(function(){cc.game.resume(),l.pzaSoundManager.resumeMusic(),d.pzaCommonMask.hideMask()})})}},t.prototype.showInter=function(a){var t=this,e=u.pzaUtil.getRandomFloatNum(0,1);if(console.log("p10: ",m.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",e),a||.01*m.pzaChannel.instance().getCtrl("p10")>=e){if(!this.showInterCDOver)return void console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d");var o=this.getPara("insertAd");if(!o)return;var n=this,i=m.pzaChannel.instance().getCtrl("p11");console.log("p11",i);var r=this.channelObj;z.default.log("showInter isShow",o),this.interstitialAd=r.createInterstitialAd({adUnitId:o}),this.interstitialAd.onError(function(a){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))});var p=this.getCtrl("p12");console.log("p12",p);var l=this.getCtrl("p26"),s=u.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",m.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",s);var c=0;.01*l>=s&&(c=1e3),setTimeout(function(){t.interstitialAd.show().then(function(){z.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),n.showInterCDOver=!1,setTimeout(function(){n.showInterCDOver=!0},1e3*i)}).catch(function(a){z.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})},p*c)}},t.prototype.closeInter=function(){this.interstitialAd&&this.interstitialAd.close&&this.interstitialAd.close()},t.prototype.showDesktop=function(){},t.prototype.checkShortcut=function(a){window.tt.checkShortcut({success:function(t){1==t.status?a.sucCall():a.failCall()},fail:function(){a.failCall()}})},t.prototype.addShortcut=function(a){this.channelObj.addShortcut({success:function(){z.default.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f"),a.sucCall()},fail:function(t){z.default.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25:"+t.errMsg),a.failCall()}})},t.prototype.recorderStart=function(){z.default.log("\u5f55\u5c4f====start"),t.recordTime=0,t.rState="recording";var a=this;try{a.channelObj.getGameRecorderManager().onStart(function(){a.startRecorderTime=Date.now(),z.default.log("\u5f55\u5c4f\u5f00\u59cb",a.startRecorderTime)}),a.channelObj.getGameRecorderManager().start({duration:300}),z.default.sendMsg(y.Msg.recorderStart),a.recordeFlag=setInterval(function(){"recording"===t.rState&&(t.recordTime++,t.recordTime>300&&(a.recorderStop(),z.default.sendMsg(y.Msg.recorderStop)))},1e3)}catch(e){}},t.prototype.recorderStop=function(){var a=this;if(a.endRecorderTime=Date.now(),t.rState="recordEnd",clearInterval(a.recordeFlag),z.default.log("\u5f55\u5c4fStop",a.endRecorderTime),z.default.log("\u505c\u6b62\u5f55\u5c4f"),a.channelObj.getGameRecorderManager().stop(),z.default.sendMsg(y.Msg.recorderStop),a.endRecorderTime-a.startRecorderTime<3e3)return c.pzaTipManager.showHomeTip("\u5f55\u5c4f\u5931\u8d25:\u65f6\u957f\u5c11\u4e8e3\u79d2",null,2),a.video_path=null,a.endRecorderTime=0,a.startRecorderTime=0,t.rState="idle",t.recordTime=0,z.default.sendMsg(y.Msg.recorderFail),void a.channelObj.getGameRecorderManager().onStop(function(){});a.channelObj.getGameRecorderManager().onStop(function(t){a.video_path=t.videoPath,a.endRecorderTime=Date.now()})},t.prototype.getRecordTime=function(){return this.endRecorderTime-this.startRecorderTime},t.prototype.shareAppMessage=function(a,t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.canShare()){var o=this.getShareObj(),n="";if(a&&a.act&&(n=a.act),n){var i=this;i.shareFailBack=null,i.shareSucBack=null,i.isShare=!1,"recruit_share"==a.act&&(i.isShare=!0,i.shareFailBack=e,i.shareSucBack=t);var r={appId:this.getPara("appId"),openId:this.channelUserId,act:n};z.default.jpost("https://ga.gamejym.com/fcm/zijie/shareTo",r,function(a,t){if(a)z.default.err(a);else{z.default.log("shareTo\u8fd4\u56de",t);var e={title:o.title,imageUrl:o.url,imageUrlId:o.id,query:null};t&&0===t.code&&(e.query="sid="+t.data.sid+"&act="+n,z.default.log("shareQuery",e.query)),i.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,query:e.query,success:function(){p.pzaLocalData.shareGetCoin(),i.shareSucBack&&i.shareSucBack()},fail:function(){i.shareFailBack&&i.shareFailBack()}})}})}else{this.shareFailBack=e,this.shareSucBack=t,this.isShare=!0;var l=this;this.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,success:function(){p.pzaLocalData.shareGetCoin(),l.shareSucBack&&l.shareSucBack()},fail:function(){l.shareFailBack&&l.shareFailBack()}})}}},t.prototype.shareVideo=function(a){if(void 0===a&&(a=null),!this.video_path)return z.default.err("\u65e0\u5f55\u5236\u89c6\u9891"),this.video_path=null,this.endRecorderTime=0,this.startRecorderTime=0,t.rState="idle",t.recordTime=0,z.default.sendMsg(y.Msg.recorderFail),void this.channelObj.showToast({title:"\u89c6\u9891\u672a\u5f55\u5236\u8db3\u591f\u65f6\u95f4"});var e=this;this.channelObj.shareAppMessage({channel:"video",title:e.title,imageUrl:"",query:"",extra:{videoPath:e.video_path,videoTopics:e.videoTopics},success:function(){a&&a(),e.channelObj.showToast({title:"\u5206\u4eab\u6210\u529f"}),e.endRecorderTime=0,e.startRecorderTime=0,t.rState="idle",t.recordTime=0,z.default.sendMsg(y.Msg.recorderDone)},fail:function(a){e.channelObj.showToast({title:"\u5206\u4eab\u89c6\u9891\u5931\u8d25"}),z.default.err(a),e.endRecorderTime=0,e.startRecorderTime=0,e.video_path=null,t.rState="idle",t.recordTime=0,z.default.sendMsg(y.Msg.recorderFail)}})},t.prototype.showSidebar=function(a){var t=z.default.getData("sidebar",{today:"",canGet:"-1"});window.tt.navigateToScene({scene:"sidebar",success:function(){console.log("navigate to scene success"),t.canGet="1",z.default.saveData("sidebar",t),a&&a(!0)},fail:function(e){console.log("navigate to scene fail: ",e),t.canGet="0",z.default.saveData("sidebar",t),a&&a(!1)}})},t.prototype.showIconAd=function(a,t,e){var o=this,n=m.pzaChannel.instance().getPara("appId"),r=this.getSysInfo().windowHeight-100,p=this.getSysInfo().windowWidth/2+90;console.log("this.getSysInfo().windowWidth",this.getSysInfo().windowWidth),console.log("this.getSysInfo().windowHeight",this.getSysInfo().windowHeight);var l={gridCount:"one",size:"large",position:{top:r,left:p},query:{tt210457b9be35faff07:"from_kunpo_appid=x8xDF4cn&from_app_account="+m.pzaChannel.instance().getChannel().channelUserId+"&to_kunpo_appid=yC0pRoqd&channel_id=4",ttb058c6e52f6c148702:"fromAppId="+n+"&fromUserId="+t}};this.iconState=i.Show,this.iconAd=this.channelObj.createGridGamePanel(l),this.iconAd&&this.iconAd.show().then(function(){console.error("\u5c55\u793a\u6e38\u620f\u63a8\u8350\u7ec4\u4ef6\u6210\u529f"),o.iconState!=i.Hide?e&&e():o.hideIconAd()}).catch(function(a){console.error("\u5c55\u793a\u6e38\u620f\u63a8\u8350\u7ec4\u4ef6\u5931\u8d25",a),o.iconState=i.Hide}),this.iconAd&&this.iconAd.onStateChange(function(e){if(console.log("onClickIconAd data:",e),e&&"click"===e.state){console.log("\u70b9\u51fb\u5c0f\u6e38\u620f\u8df3\u8f6c!");var o=m.pzaChannel.instance().getPara("appId");z.default.jpost("https://ga.gamejym.com/fcm/cps/jumpTo",{appId:o,cid:a,openId:t})}})},t.prototype.hideIconAd=function(){this.iconState=i.Hide,this.iconAd&&this.iconAd.destroy()},t.unionid=null,t.API_EventType={active:"active",active_register:"active_register",game_addiction:"game_addiction"},t.recordTime=0,t.rState="idle",t.shareMaxTimes=5,t}(f.pzaChannelWeb);e.pzaChannelTT=g,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./lanfei":"lanfei","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzaKDefine":"pzaKDefine","./pzakc":"pzakc"}],pzaChannelTap:[function(a,t,e){"use strict";cc._RF.push(t,"bdf3bDXHLdCIJ9KdMaNOJlp","pzaChannelTap");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelTap=void 0;var i=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="taptap",t.isVideoStarted=!1,t}return n(t,a),t.prototype.copyToClip=function(a){window.AJProxy.copyToClip(a)},t.prototype.hasPrivacy=function(){return!0},t.prototype.showVideo=function(a){var t=this;if(!this.isVideoStarted){this.isVideoStarted=!0;var e=a.endCall;a.endCall=function(){t.isVideoStarted=!1,e()},window.regAndroidCall("videoReward",a.sucCall),window.regAndroidCall("videoClose",a.endCall),window.regAndroidCall("videoFail",a.failCall),window.AJProxy.showVideo("b63ff12ab86fdb")}},t}(a("./pzaChannelWeb").pzaChannelWeb);e.pzaChannelTap=i,cc._RF.pop()},{"./pzaChannelWeb":"pzaChannelWeb"}],pzaChannelVivo2:[function(a,t,e){"use strict";cc._RF.push(t,"b96b61vaR1LSonl8s3hfTzI","pzaChannelVivo2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelVivo2=void 0;var i=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="vivo",t.paraMap=new Map([["appId","com.njtd.zwxcjs.mini"],["bannerAd","edab15f951bb45e1a219c8c0cdd51bd9"],["customInsertAd","2dc3b7723aa6446fb99a0bb7345653be"],["videoAd","0d1d5873f725468fa0cac57ca4e7ff42"],["ctrlId","678f1655c8946b1700d95a1c"]]),t.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2020SR0911781",t.privacyStr=['\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n        \u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n        \n        \u4ea7\u54c1\u540d\u79f0:\n        \n        \u300a\u690d\u7269\u6d88\u9664\u50f5\u5c38\u300b\n        \n        \u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n        \n        \u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n        \n        \u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n        \n        \u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n        \n        \u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n        \n        \u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n        \u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n        \u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n        \u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n        \u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n        \u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n        \n        \u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n        \n        \u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n        \u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n        \u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n        \u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n        \u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n        \u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n        \u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n        \n        \u7b2c\u4e09\u65b9\u4ea7\u54c1\u6216\u670d\u52a1\u5982\u4f55\u83b7\u5f97\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n        \n        \u4e3a\u4e86\u5411\u60a8\u63d0\u4f9b\u66f4\u4e30\u5bcc\u548c\u5b8c\u6574\u7684\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0b\u8ff0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\uff08\u7b80\u79f0\u201cSDK\u201d\uff09\u4e3a\u60a8\u63d0\u4f9b\u670d\u52a1\u3002SDK\u7684\u5177\u4f53\u4fe1\u606f\u6536\u96c6\u548c\u4f7f\u7528\u60c5\u51b5\u8bf7\u4ee5SDK\u8fd0\u8425\u65b9\u7684\u9690\u79c1\u653f\u7b56\u6216\u76f8\u5173\u58f0\u660e\u4e3a\u51c6\u3002\n        \n        SDK\u540d\u79f0\tSDK\u63d0\u4f9b\u65b9\u540d\u79f0\tSDK\u4f7f\u7528\u76ee\u7684\tSDK\u6536\u96c6\u7684\u4fe1\u606f\t\u9690\u79c1\u653f\u7b56\u94fe\u63a5\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u8bbe\u5907\u4fe1\u606f\uff1a\u8bbe\u5907\u5236\u9020\u5546\uff0c\u8bbe\u5907\u578b\u53f7\uff0c\u7cfb\u7edf\u7248\u672c\uff0c\u4f20\u611f\u5668\u4fe1\u606f\uff08\u5982\u52a0\u901f\u5ea6\u3001\u91cd\u529b\u3001\u9640\u87ba\u4eea\u4f20\u611f\u5668\uff09\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u7f51\u7edc\u4fe1\u606f\uff1aIP\u5730\u5740\uff0c\u8054\u7f51\u65b9\u5f0f\uff0c\u8fd0\u8425\u5546\u4fe1\u606f\uff0c\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\uff0c SSID\uff0cBSSID\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\uff0c\u5e7f\u544a\u76d1\u6d4b\uff0c\u53cd\u4f5c\u5f0a\t\u6807\u8bc6\u7b26\u4fe1\u606f\uff1aIMEI\uff08\u4ec5\u9650\u5b89\u53539\u53ca\u4ee5\u524d\u7248\u672c\uff09\uff0cIMSI\uff0cOAID\uff0cVAID\uff0cMAC\u5730\u5740\uff0cAndroid_ID\uff0cICCID\uff0cSN\u53f7\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\uff0c\u53cd\u4f5c\u5f0a\t\u5e94\u7528\u4fe1\u606f\uff1a\u5e94\u7528\u540d\u79f0\uff0c\u5e94\u7528\u5305\u540d\uff0c\u5e94\u7528\u7248\u672c\u53f7\uff0c\u8f6f\u4ef6\u5b89\u88c5\u5217\u8868\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u4e2a\u4eba\u4f4d\u7f6e\u4fe1\u606f\uff1a\u7c97\u7565\u5b9a\u4f4d\u4fe1\u606f\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\t\u5e94\u7528\u4f7f\u7528\u4fe1\u606f\uff1a\u5e7f\u544a\u4ea4\u4e92\u884c\u4e3a\uff08\u5e7f\u544a\u4e92\u52a8\u8bb0\u5f55\uff0c\u5982\u66dd\u5149\u3001\u70b9\u51fb\u3001\u8f6c\u5316\u7b49\u4fe1\u606f\uff09\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u51cf\u5c11App\u5d29\u6e83\uff0c\u63d0\u9ad8\u7a33\u5b9a\u6027\u548c\u6027\u80fd\t\u8bca\u65ad\u6570\u636e\uff1a\u5d29\u6e83\u6570\u636e\u3001\u6027\u80fd\u6570\u636e\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\n        vivo\u8054\u8fd0SDK\tVIVO\tVIVO\u8d26\u53f7\u7cfb\u7edf,\u652f\u4ed8\t\u8bbe\u5907\u4fe1\u606f\uff1a\u624b\u673aimei\uff08Android10\u4ee5\u4e0b\uff09\uff0c\u624b\u673aemmcid\u3001usfid\u3001\u7248\u672c\u53f7\u3001\u7248\u672c\u540d\u79f0 Android10\u552f\u4e00\u6807\u8bc6\u7b26(oaid\u3001vaid\u3001aaid)\uff0c\u5176\u4e2d\uff0cAndroid 10\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5f00\u53d1\u8005\u6807\u8bc6\u4ec5\u9002\u7528\u4e8e\u5b89\u535310\u4ee5\u540e\u7248\u672c;\u7f51\u7edc\u4fe1\u606f\uff1a\u8054\u7f51\u65b9\u5f0f;\u624b\u673a\u5236\u9020\u5546\u4fe1\u606f;\u5e94\u7528\u4fe1\u606f\uff1a\u5f00\u53d1\u8005\u5e94\u7528\u540d\uff0c\u5e94\u7528\u5305\u540d\uff0c\u7248\u672c\u53f7; \u8eab\u4efd\u8bc1\u4fe1\u606f\uff1a\u7528\u4e8e\u5b9e\u540d\u8ba4\u8bc1\thttps://dev.vivo.com.cn/documentCenter/doc/548\n        \u4ee5\u4e0aSDK\u5185\u7f6e\u7b2c3\u65b9SDK(\u5982"\u5feb\u624b"\u7b49)\tVIVO\t\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,\u4f4d\u7f6e\u4fe1\u606f,mac\u5730\u5740,\u5e94\u7528\u5217\u8868\thttps://adnet.vivo.com.cn/home/agreement/18\n        1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n        \n        \u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n        \n        1.1 \u6ce8\u518c\u3001\u767b\u5f55\n        \n        \u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n        \u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n        1.2 \u8ba4\u8bc1\n        \n        \u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n        \n        1.3 \u4fe1\u606f\u53d1\u5e03\n        \n        \u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n        \n        1.4 \u5b89\u5168\u8fd0\u884c\n        \n        1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n        \n        \u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n        \n        1.4.2 \u65e5\u5fd7\u4fe1\u606f\n        \n        \u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n        \n        1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n        \n        \u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n        \n        1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n        \n        \u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n        \n        \u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n        \u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n        \u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n        \u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n        \u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n        \u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n        \u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n        \u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n        2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n        \n        \u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n        \u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n        \u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n        3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n        \n        3.1\u5171\u4eab\n        \n        \u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n        \n        3.2 \u8f6c\u8ba9\n        \n        \u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n        \u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n        3.3 \u62ab\u9732\n        \n        \u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n        \u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n        \u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n        3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n        \n        \u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n        \n        \u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n        \u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n        \u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n        \u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n        4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n        \n        4.1 \u5b58\u50a8\u5730\u70b9\n        \n        \u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n        \n        4.2 \u5b58\u50a8\u671f\u9650\n        \n        \u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n        \n        5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n        \n        \u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n        \u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n        \u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n        \u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n        6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n        \n        \u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n        \n        6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n        \n        6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n        \n        \u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n        \n        6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n        \n        \u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n        \u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n        6.2 \u6ce8\u9500\u5e10\u53f7\n        \n        \u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n        \n        6.3 \u6295\u8bc9\u4e3e\u62a5\n        \n        \u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n        \n        6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n        \n        \u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n        \n        6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n        \n        \u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n        \n        7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n        \n        \u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n        \u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n        \u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n        8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n        \n        \u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n        \u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002'],t}return n(t,a),t}(a("./pzaChannelVivo").pzaChannelVivo);e.pzaChannelVivo2=i,cc._RF.pop()},{"./pzaChannelVivo":"pzaChannelVivo"}],pzaChannelVivo:[function(a,t,e){"use strict";cc._RF.push(t,"822a5eHpGtJnLCyYDZgotAk","pzaChannelVivo");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelVivo=void 0;var i,r=a("../Common/pzaLocalData"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaUtil"),s=a("../View/pzaCommonMask"),c=a("./pzaChannel"),u=a("./pzaChannelWeb"),d=a("./pzakc");(function(a){a[a.Show=0]="Show",a[a.Hide=1]="Hide"})(i||(i={}));var h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="vivo",t.paraMap=new Map([["appId","com.td.zwdazjs.nearme.vivominigame"],["bannerAd","0b3a98a0262d402f8770d8d1f20362f2"],["insertAd","b84bbc07afcd4bfa8b5f010cacd4fc71"],["customInsertAd","b5229754dca84e8e893cebe08211ed05"],["videoAd","4cfe3898b0fe4ca6a5a6808e0c8feb25"],["ctrlId","673aaf5ac5b6582182fb7dbf"]]),t.channelObj=window.qg,t.gameName="\u690d\u7269\u5927\u6218\u50f5\u5c38",t.bannerState=i.Hide,t.privacyStr=['\u66f4\u65b0\u65e5\u671f: 2021\u5e7412\u670812\u65e5 \u751f\u6548\u65e5\u671f: 2021\u5e7412\u670812\u65e5\n\n\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u5929\u8c46\u201d\u6216\u201c\u6211\u4eec\u201d\uff09 \u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n\u4ea7\u54c1\u540d\u79f0:\n\n\u300a\u852c\u83dc\u50f5\u5c38\u5927\u4e71\u6597\u300b\n\n\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f:\n\n\u7535\u5b50\u90ae\u4ef6: lpx@gamejym.com\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885750\u53f7\u5eb7\u7f18\u667a\u6167\u6e2f3\u680b602\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n\u8bbe\u5907\u6743\u9650\t\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\t\u662f\u5426\u8be2\u95ee\t\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650\n\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef\n\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef\n\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef\n\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef\n\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n\u7b2c\u4e09\u65b9\u4ea7\u54c1\u6216\u670d\u52a1\u5982\u4f55\u83b7\u5f97\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u4e3a\u4e86\u5411\u60a8\u63d0\u4f9b\u66f4\u4e30\u5bcc\u548c\u5b8c\u6574\u7684\u529f\u80fd\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4f7f\u7528\u4e0b\u8ff0\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\uff08\u7b80\u79f0\u201cSDK\u201d\uff09\u4e3a\u60a8\u63d0\u4f9b\u670d\u52a1\u3002SDK\u7684\u5177\u4f53\u4fe1\u606f\u6536\u96c6\u548c\u4f7f\u7528\u60c5\u51b5\u8bf7\u4ee5SDK\u8fd0\u8425\u65b9\u7684\u9690\u79c1\u653f\u7b56\u6216\u76f8\u5173\u58f0\u660e\u4e3a\u51c6\u3002\n\nSDK\u540d\u79f0\tSDK\u63d0\u4f9b\u65b9\u540d\u79f0\tSDK\u4f7f\u7528\u76ee\u7684\tSDK\u6536\u96c6\u7684\u4fe1\u606f\t\u9690\u79c1\u653f\u7b56\u94fe\u63a5\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u8bbe\u5907\u4fe1\u606f\uff1a\u8bbe\u5907\u5236\u9020\u5546\uff0c\u8bbe\u5907\u578b\u53f7\uff0c\u7cfb\u7edf\u7248\u672c\uff0c\u4f20\u611f\u5668\u4fe1\u606f\uff08\u5982\u52a0\u901f\u5ea6\u3001\u91cd\u529b\u3001\u9640\u87ba\u4eea\u4f20\u611f\u5668\uff09\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u7f51\u7edc\u4fe1\u606f\uff1aIP\u5730\u5740\uff0c\u8054\u7f51\u65b9\u5f0f\uff0c\u8fd0\u8425\u5546\u4fe1\u606f\uff0c\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\uff0c SSID\uff0cBSSID\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\uff0c\u5e7f\u544a\u76d1\u6d4b\uff0c\u53cd\u4f5c\u5f0a\t\u6807\u8bc6\u7b26\u4fe1\u606f\uff1aIMEI\uff08\u4ec5\u9650\u5b89\u53539\u53ca\u4ee5\u524d\u7248\u672c\uff09\uff0cIMSI\uff0cOAID\uff0cVAID\uff0cMAC\u5730\u5740\uff0cAndroid_ID\uff0cICCID\uff0cSN\u53f7\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\uff0c\u53cd\u4f5c\u5f0a\t\u5e94\u7528\u4fe1\u606f\uff1a\u5e94\u7528\u540d\u79f0\uff0c\u5e94\u7528\u5305\u540d\uff0c\u5e94\u7528\u7248\u672c\u53f7\uff0c\u8f6f\u4ef6\u5b89\u88c5\u5217\u8868\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u53cd\u4f5c\u5f0a\t\u4e2a\u4eba\u4f4d\u7f6e\u4fe1\u606f\uff1a\u7c97\u7565\u5b9a\u4f4d\u4fe1\u606f\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u5e7f\u544a\u6295\u653e\uff0c\u5e7f\u544a\u5f52\u56e0\t\u5e94\u7528\u4f7f\u7528\u4fe1\u606f\uff1a\u5e7f\u544a\u4ea4\u4e92\u884c\u4e3a\uff08\u5e7f\u544a\u4e92\u52a8\u8bb0\u5f55\uff0c\u5982\u66dd\u5149\u3001\u70b9\u51fb\u3001\u8f6c\u5316\u7b49\u4fe1\u606f\uff09\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u6d41\u91cf\u8054\u76dfSDK\tVIVO\t\u51cf\u5c11App\u5d29\u6e83\uff0c\u63d0\u9ad8\u7a33\u5b9a\u6027\u548c\u6027\u80fd\t\u8bca\u65ad\u6570\u636e\uff1a\u5d29\u6e83\u6570\u636e\u3001\u6027\u80fd\u6570\u636e\uff1b\thttps://adnet.vivo.com.cn/home/agreement/18\nvivo\u8054\u8fd0SDK\tVIVO\tVIVO\u8d26\u53f7\u7cfb\u7edf,\u652f\u4ed8\t\u8bbe\u5907\u4fe1\u606f\uff1a\u624b\u673aimei\uff08Android10\u4ee5\u4e0b\uff09\uff0c\u624b\u673aemmcid\u3001usfid\u3001\u7248\u672c\u53f7\u3001\u7248\u672c\u540d\u79f0 Android10\u552f\u4e00\u6807\u8bc6\u7b26(oaid\u3001vaid\u3001aaid)\uff0c\u5176\u4e2d\uff0cAndroid 10\u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5f00\u53d1\u8005\u6807\u8bc6\u4ec5\u9002\u7528\u4e8e\u5b89\u535310\u4ee5\u540e\u7248\u672c;\u7f51\u7edc\u4fe1\u606f\uff1a\u8054\u7f51\u65b9\u5f0f;\u624b\u673a\u5236\u9020\u5546\u4fe1\u606f;\u5e94\u7528\u4fe1\u606f\uff1a\u5f00\u53d1\u8005\u5e94\u7528\u540d\uff0c\u5e94\u7528\u5305\u540d\uff0c\u7248\u672c\u53f7; \u8eab\u4efd\u8bc1\u4fe1\u606f\uff1a\u7528\u4e8e\u5b9e\u540d\u8ba4\u8bc1\thttps://dev.vivo.com.cn/documentCenter/doc/548\n\u4ee5\u4e0aSDK\u5185\u7f6e\u7b2c3\u65b9SDK(\u5982"\u5feb\u624b"\u7b49)\tVIVO\t\t\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,\u4f4d\u7f6e\u4fe1\u606f,mac\u5730\u5740,\u5e94\u7528\u5217\u8868\thttps://adnet.vivo.com.cn/home/agreement/18\n1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a\n\n1.1 \u6ce8\u518c\u3001\u767b\u5f55\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n1.2 \u8ba4\u8bc1\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002\n\n1.3 \u4fe1\u606f\u53d1\u5e03\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n1.4 \u5b89\u5168\u8fd0\u884c\n\n1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n1.4.2 \u65e5\u5fd7\u4fe1\u606f\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002\n3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f\n\n3.1\u5171\u4eab\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n3.2 \u8f6c\u8ba9\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n3.3 \u62ab\u9732\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002\n4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f\n\n4.1 \u5b58\u50a8\u5730\u70b9\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002\n\n4.2 \u5b58\u50a8\u671f\u9650\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\n6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n6.2 \u6ce8\u9500\u5e10\u53f7\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 lpx@gamejym.com\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n6.3 \u6295\u8bc9\u4e3e\u62a5\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 lpx@gamejym.com \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002'],t.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u5317\u4eac\u4e09\u7acb\u6052\u901a\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2016SR153979",t.autoShowBannerTimer=30,t.bannerTimeId=-1,t.lastCustomShowTime=0,t.customGapSec=5e3,t.customAdMap={},t.showInterCDOver=!0,t}return n(t,a),t.prototype.hasPrivacy=function(){return!!d.default.getData("isAgree",0)},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.exit=function(){this.channelObj.exitApplication()},t.prototype.qgLogin=function(a){var t=this;void 0===a&&(a=function(a){a&&console.error(a)});var e=this;this.channelObj.getSystemInfoSync().platformVersionCode>=1063&&this.channelObj.login().then(function(o){if(o.data.token){var n={appId:t.getPara("appId"),token:o.data.token};console.log("reqObj",n),d.default.jpost("https://ga.gamejym.com/fcm/vivo/getOpenId",n,function(t,o){t?d.default.err(t):""+o.code=="0"?(console.log("resp",o),e.channelUserId=o.data.openId,a&&a("login succ")):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))})}},function(a){console.log("\u767b\u5f55\u5931\u8d25"+JSON.stringify(a))})},t.prototype.sendUserInfo=function(a){if(null!=a)if(r.pzaLocalData.data.playerNick=a.nickName,r.pzaLocalData.data.playerAvatar=a.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/vivo/sendUserInfo",t,function(a,t){a?d.default.err(a):d.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(){},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this;this.channelObj.onShow(function(){cc.game.resume(),console.log("game onShow"),p.pzaSoundManager.resumeMusic()}),this.channelObj.onHide(function(){cc.game.pause(),console.log("game onHide")});var n=this.getPara("ctrlId");if(console.log("ctrlId :",n),n){var i={id:n};d.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",i,function(a,n){a?d.default.err(a):""+n.code=="0"?(e.ctrl=n.data,d.default.log("\u8fd4\u56de",e.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(o.ctrl.p2),r.pzaLocalData.maxShareRwdCount=parseInt(o.ctrl.p3),r.pzaLocalData.data.showBeginViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showDaveViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.showGardenViewMax=parseInt(o.ctrl.p5),r.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(o.ctrl.p6),e.qgLogin(function(){t&&t()})):d.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(n))})}},t.prototype.showVideo=function(a){var t=this,e=this.getPara("videoAd");e&&(d.default.log("showVideo",e),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({posId:e}),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose(),this.videoFns.onLoad=function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.rewardedVideoAd.show().then(function(){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(a){d.default.err(a),t.rewardedVideoAd.load().then(function(){d.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f")}).catch(function(){cc.game.resume(),p.pzaSoundManager.resumeMusic(),s.pzaCommonMask.hideMask()})})},this.videoFns.onError=function(e){d.default.err(e),a.failCall&&a.failCall(),a.endCall&&a.endCall(),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),t.channelObj.showToast({message:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(t){d.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u5173\u95ed",t),t&&t.isEnded?(a.sucCall(),d.default.eventReport("showVideo\u5b8c\u6210-"+a.posName),r.pzaLocalData.bpWatchAd()):(console.log("failCall"),a.failCall&&a.failCall()),cc.game.resume(),s.pzaCommonMask.hideMask(),p.pzaSoundManager.resumeMusic(),a.endCall&&a.endCall()},this.rewardedVideoAd.onLoad(this.videoFns.onLoad),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onClose(this.videoFns.onClose))},t.prototype.showBanner=function(){var a=this,t=this.getPara("bannerAd");if(t&&0!=this.getCtrl("p21")){clearTimeout(this.autoShowBannerTimer),this.bannerState=i.Show,d.default.log("showBanner",t);var e={adUnitId:t};this.bannerAd=this.channelObj.createBannerAd(e),this.bannerAd.onError(function(a){d.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.bannerAd.show().then(function(){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),a.bannerState==i.Hide&&a.closeBanner()}).catch(function(a){d.default.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})}},t.prototype.closeBanner=function(){this.bannerState=i.Hide,this.bannerAd&&this.bannerAd.hide()},t.prototype.showBannerByTime=function(a){var t=this;void 0===a&&(a=!1);var e=30;this.getCtrl("p4")<1?d.default.log("banner\u4e0d\u5c55\u793a"):(this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<30&&(e=30),this.showBanner(a,null,"battle"),this.bannerTimeId=setInterval(function(){t.showBanner(a,null,"battle")},1e3*e))},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.showInter=function(a){var t=l.pzaUtil.getRandomFloatNum(0,1);console.log("p10: ",c.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",t),(a||c.pzaChannel.instance().getCtrl("p10")>=t)&&this.showCustomAd(!1)},t.prototype.closeInter=function(){this.closeCustomAd(!1)},t.prototype.showCustomAd=function(a,t,e){var o=this,n=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");if(n)if(this.showInterCDOver){this.lastCustomShowTime=Date.now();var i=a?this.getSysInfo().windowHeight-300:this.getSysInfo().windowHeight/2-300,r=a?this.getSysInfo().windowWidth-300:this.getSysInfo().windowWidth/2-400;d.default.log("showCustomAd",n,a,i,r);var p={posId:n,style:{top:i,left:r}};if(e&&(p.style=e),d.default.log("\u539f\u751f\u6a21\u677f\u5c06\u521b\u5efa",n),this.customAdMap[n]=this.channelObj.createCustomAd(p),this.customAdMap[n].offError(),this.customAdMap[n].onError(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.customAdMap[n].offClose(function(){}),this.customAdMap[n].onClose(function(){console.log("onHide==");var a=l.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",c.pzaChannel.instance().getCtrl("p18")),.1*c.pzaChannel.instance().getCtrl("p18")>=a&&setTimeout(function(){o.showCustomAd(!1)},3e3),o.customAdMap[n].destroy(),o.customAdMap[n]=null}),a)this.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))});else{var s=this,u=c.pzaChannel.instance().getCtrl("p11"),h=c.pzaChannel.instance().getCtrl("p12");console.log("p11",u),console.log("p12",h);var m=this.getCtrl("p26"),f=l.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",c.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",f);var z=0;.01*m>=f&&(z=1e3),setTimeout(function(){o.customAdMap[n].show().then(function(){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),s.showInterCDOver=!1,setTimeout(function(){s.showInterCDOver=!0},1e3*u)}).catch(function(a){d.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})},h*z)}}else console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d")},t.prototype.closeCustomAd=function(a){var t=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");t&&this.customAdMap[t]&&this.customAdMap[t].hide()},t.prototype.shareAppMessage=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null);var o={success:function(){console.log("share success"),t&&t()},fail:function(a){a&&console.log("share fail msg:",a.message),e&&e()}};this.channelObj.share(o)},t.prototype.copyToClip=function(a){this.channelObj.setClipboardData({text:a,success:function(){console.log("handling success")}})},t}(u.pzaChannelWeb);e.pzaChannelVivo=h,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelWeb:[function(a,t,e){"use strict";cc._RF.push(t,"35b06SD/kFLbqmUbKV8Ncm5","pzaChannelWeb"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelWeb=void 0;var o=a("../Load/pzaBundleObjectPool"),n=a("../Load/pzaPreLoadManager"),i=a("../View/pzaCommonMask"),r=a("./pzaChannel"),p=a("./pzakc"),l=a("./pzaPrivacyWin"),s=function(){function a(){this.channel="web",this.channelGameName="\u690d\u7269\u6d88\u9664\u50f5\u5c38",this.paraMap=new Map([]),this.ruanzhu="\n\u51fa\u7248\u5355\u4f4d\u540d\u79f0:\u9ed1\u9f99\u6c5f\u9f99\u534e\u6570\u5b57\u51fa\u7248\u80a1\u4efd\u6709\u9650\u516c\u53f8 \u8fd0\u8425\u5355\u4f4d\u540d\u79f0:\u9ed1\u9f99\u6c5f\u9f99\u534e\u6570\u5b57\u51fa\u7248\u80a1\u4efd\u6709\u9650\u516c\u53f8\n\u5ba1\u6279\u6587\u53f7:\u65b0\u5e7f\u51fa\u5ba1[201712112\u53f7 ISBN 978-7-7979-5524-9\n\u8457\u4f5c\u6743\u4eba:\u5357\u4eac\u5929\u8c46\u4e92\u52a8\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7:2020SR0911781",this.isReadRemoteUserData=!0,this.channelId=0,this.channelObj=window,this.ctrl=null,this.gameName="\u690d\u7269\u5927\u6218\u50f5\u5c381\u4ee3",this.reportChannel="web",this.interstitialAd=null,this.bannerAd=null,this.rewardedVideoAd=null,this.customAd1=null,this.customAd2=null,this.nativeInterAd=null,this.boxPortalAd=null,this.channelUserId=null,this.sysInfo=null,this.privacyStr=['\u66f4\u65b0\u65e5\u671f: <b>2021\u5e7412\u670812\u65e5</b> \u751f\u6548\u65e5\u671f: <b>2021\u5e7412\u670812\u65e5</b>\n\n<b>\u5357\u4eac\u6854\u67da\u6aac\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u6854\u67da\u6aac\u201d\u6216\u201c\u6211\u4eec\u201d\uff09</b>\u975e\u5e38\u91cd\u89c6\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u53ca\u9690\u79c1\u5b89\u5168\u3002 \u6211\u4eec\u5236\u5b9a\u672c\u201c\u9690\u79c1\u653f\u7b56\u201d\u5e0c\u671b\u60a8\u5728\u5411\u6211\u4eec\u63d0\u4f9b\u67d0\u4e9b\u4fe1\u606f\uff08\u5176\u4e2d\u5f88\u53ef\u80fd\u5305\u62ec\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff09\u4ee5\u53ca\u5141\u8bb8\u6211\u4eec\u5904\u7406\u5e76\u5206\u4eab\u67d0\u4e9b\u4fe1\u606f\u4e4b\u524d\uff0c\u80fd\u591f\u6e05\u6670\u5730\u4e86\u89e3\u8fd9\u4e9b\u4fe1\u606f\u6536\u96c6\u7684\u76ee\u7684\u3001\u53ef\u80fd\u7684\u7528\u9014\u4ee5\u53ca\u5176\u4ed6\u65b9\u9762\u7684\u5185\u5bb9\u3002\u672c\u9690\u79c1\u653f\u7b56\u53ef\u80fd\u4f1a\u4e0d\u65f6\u66f4\u65b0\u3002\u5efa\u8bae\u60a8\u5b9a\u671f\u67e5\u9605\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u4e86\u89e3\u4efb\u4f55\u76f8\u5173\u53d8\u66f4\u3002\n\n<color=#009EFF">\u5728\u6b64\u6e29\u99a8\u63d0\u793a\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u7406\u89e3\u672c\u9690\u79c1\u653f\u7b56\u3002\u5982\u679c\u60a8\u6709\u4efb\u4f55\u9690\u79c1\u65b9\u9762\u7684\u7591\u95ee\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u8054\u7cfb\u65b9\u5f0f</color>\n\n\u7535\u5b50\u90ae\u4ef6: <b>lpx@gamejym.com</b>\n\n\u516c\u53f8\u5730\u5740:\u5357\u4eac\u5e02\u5efa\u90ba\u533a\u5609\u9675\u6c5f\u4e1c\u885718\u53f71\u680b\n\n\u8bf7\u60a8\u77e5\u6089\uff0c\u672c\u653f\u7b56\u4ec5\u9002\u7528\u4e8e\u6211\u4eec\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\u6240\u6536\u96c6\u7684\u4fe1\u606f\uff0c\u4e0d\u9002\u7528\u4e8e\u901a\u8fc7\u63a5\u5165\u6211\u4eec\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u7b2c\u4e09\u65b9\u6240\u6536\u96c6\u7684\u4fe1\u606f\u3002\n\n<color=#009EFF">\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u5e76\u5145\u5206\u7406\u89e3\u76f8\u5173\u5185\u5bb9\uff1a</color>\n\n\u4e3a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u6211\u4eec\u5c06\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u5fc5\u8981\u7684\u4fe1\u606f\u3002\n\u57fa\u4e8e\u60a8\u7684\u660e\u793a\u6388\u6743\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u7533\u8bf7\u5f00\u542f\u60a8\u7684\u8bbe\u5907\u6743\u9650\uff0c\u60a8\u6709\u6743\u62d2\u7edd\u6216\u53d6\u6d88\u6388\u6743\u3002\n\u60a8\u53ef\u4ee5\u8bbf\u95ee\u3001\u66f4\u6b63\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u8fd8\u53ef\u4ee5\u64a4\u56de\u6388\u6743\u540c\u610f\u3001\u6ce8\u9500\u8d26\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8c03\u6574\u5176\u4ed6\u9690\u79c1\u8bbe\u7f6e\u3002\n\u6211\u4eec\u5df2\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\u5982\u60a8\u662f\u672a\u6210\u5e74\u4eba\uff0c\u8bf7\u60a8\u548c\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba\u6388\u6743\u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4e2a\u4eba\u4fe1\u606f\u3002\n<color=#009EFF">\u8bbe\u5907\u6743\u9650\u8c03\u7528\u60c5\u51b5</color>\n\n\u5728\u60a8\u4f7f\u7528\u6211\u4eec\u4ea7\u54c1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5728\u5fc5\u8981\u8303\u56f4\u5185\u5411\u60a8\u7533\u8bf7\u83b7\u53d6\u8bbe\u5907\u6743\u9650\u3002\u8bf7\u60a8\u77e5\u6089\uff0c\u6211\u4eec\u4e0d\u4f1a\u9ed8\u8ba4\u5f00\u542f\u60a8\u8bbe\u5907\u7684\u6743\u9650\uff0c\u4ec5\u5728\u60a8\u4e3b\u52a8\u786e\u8ba4\u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u624d\u6709\u53ef\u80fd\u901a\u8fc7\u8bbe\u5907\u6743\u9650\u6536\u96c6\u60a8\u7684\u4fe1\u606f\u3002\u8c03\u7528\u7684\u6743\u9650\u3001\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684\uff0c\u4ee5\u53ca\u8c03\u7528\u6743\u9650\u524d\u5411\u60a8\u8be2\u95ee\u7684\u60c5\u51b5\u5982\u4e0b\uff1a\n\n<b>\u8bbe\u5907\u6743\u9650</b>\t<b>\u8c03\u7528\u6743\u9650\u7684\u76ee\u7684</b>\t<b>\u662f\u5426\u8be2\u95ee</b>\t<b>\u7528\u6237\u53ef\u5426\u5173\u95ed\u6743\u9650</b>\n<b>\u8054\u7f51\u80fd\u529b\u53ca\u83b7\u53d6\u8054\u7f51\u72b6\u6001\u548cWi-Fi\u72b6\u6001\uff0c\u4ee5\u53ca\u7f51\u7edc\u76f8\u5173\u4fe1\u606f, \u5982:IP\u5730\u5740\u3001WLAN\u63a5\u5165\u70b9(\u5982SSID\u3001BSSID\u7b49)\t\u8fde\u63a5\u7f51\u7edc\t\u662f\t\u53ef</b>\n<b>\u8bfb\u53d6\u7535\u8bdd\u72b6\u6001,\u83b7\u53d6\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f,mac\u5730\u5740\t\u8bc6\u522b\u7528\u6237\uff0c\u66f4\u597d\u5730\u4fdd\u969c\u7528\u6237\u6570\u636e\u670d\u52a1\t\u662f\t\u53ef</b>\n<b>\u8bfb\u53d6\u548c\u5199\u5165\u5916\u90e8\u5b58\u50a8\t\u4e0b\u8f7d\u5e76\u4fdd\u5b58\u5185\u5bb9\t\u662f\t\u53ef</b>\n<b>\u9707\u52a8\t\u7528\u4e8e\u63d0\u793a\u7528\u6237\u6216\u63d0\u4f9b\u6e38\u620f\u4f53\u9a8c\t\u662f\t\u53ef</b>\n<b>\u5176\u4ed6\u6743\u9650\t\u63a5\u5165\u6e20\u9053SDK\u9700\u8981\uff0c\u8be6\u89c1\u4e0b\u65b9\t\u662f\t\u53ef</b>\n\u5982\u60a8\u5728\u9996\u6b21\u6388\u6743\u5f00\u542f\u6743\u9650\u540e\u5e0c\u671b\u5173\u95ed\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u5728\u8bbe\u5907\u7684\u8bbe\u7f6e\u529f\u80fd\u4e2d\u9009\u62e9\u5173\u95ed\u6743\u9650\uff0c\u4ece\u800c\u62d2\u7edd\u6211\u4eec\u6536\u96c6\u76f8\u5e94\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\n<color=#009EFF">1. \u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u6211\u4eec\u4f1a\u6309\u7167\u5982\u4e0b\u65b9\u5f0f\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u670d\u52a1\u65f6\u4e3b\u52a8\u63d0\u4f9b\u7684\uff0c\u4ee5\u53ca\u901a\u8fc7\u81ea\u52a8\u5316\u624b\u6bb5\u6536\u96c6\u60a8\u5728\u4f7f\u7528\u529f\u80fd\u6216\u63a5\u53d7\u670d\u52a1\u8fc7\u7a0b\u4e2d\u4ea7\u751f\u7684\u4fe1\u606f\uff1a     \n\n<color=#009EFF">1.1 \u6ce8\u518c\u3001\u767b\u5f55</color>\n\n\u5f53\u60a8\u6ce8\u518c\u65f6\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u624b\u673a\u53f7\u7801\u3001\u90ae\u7bb1\u7b49\uff0c\u6536\u96c6\u8fd9\u4e9b\u4fe1\u606f\u662f\u4e3a\u4e86\u5e2e\u52a9\u60a8\u5b8c\u6210\u6ce8\u518c\u4fdd\u62a4\u60a8\u7684\u5e10\u53f7\u5b89\u5168\u3002\u624b\u673a\u53f7\u7801\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u6536\u96c6\u6b64\u7c7b\u4fe1\u606f\u662f\u4e3a\u4e86\u6ee1\u8db3\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u7f51\u7edc\u5b9e\u540d\u5236\u8981\u6c42\u3002\u82e5\u60a8\u4e0d\u63d0\u4f9b\u8fd9\u7c7b\u4fe1\u606f\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u3002\n\u60a8\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5fae\u4fe1\u3001\u90ae\u7bb1\u6216\u8005\u5404\u5e73\u53f0ID\u767b\u5f55\u5e76\u4f7f\u7528\uff0c\u60a8\u5c06\u6388\u6743\u6211\u4eec\u83b7\u53d6\u60a8\u5728\u7b2c\u4e09\u65b9\u5e73\u53f0\u6ce8\u518c\u7684\u516c\u5f00\u4fe1\u606f\uff08\u5934\u50cf\u3001\u6635\u79f0\u4ee5\u53ca\u60a8\u6388\u6743\u7684\u5176\u4ed6\u4fe1\u606f\uff09\uff0c\u4f7f\u60a8\u53ef\u4ee5\u76f4\u63a5\u767b\u5f55\u5e76\u4f7f\u7528\u672c\u4ea7\u54c1\u548c\u76f8\u5173\u670d\u52a1\u3002\n<color=#009EFF">1.2 \u8ba4\u8bc1</color>\n\n\u5728\u60a8\u4f7f\u7528\u8eab\u4efd\u8ba4\u8bc1\u7684\u529f\u80fd\u6216\u670d\u52a1\u65f6\uff0c\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u60a8\u53ef\u80fd\u9700\u8981\u63d0\u4f9b\u60a8\u7684\u771f\u5b9e\u8eab\u4efd\u4fe1\u606f\uff1a\u771f\u5b9e\u59d3\u540d\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u3001\u7535\u8bdd\u53f7\u7801\u4ee5\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u8fd9\u4e9b\u4fe1\u606f\u5c5e\u4e8e\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\uff0c\u60a8\u53ef\u4ee5\u62d2\u7edd\u63d0\u4f9b\uff0c\u4f46\u60a8\u5c06\u53ef\u80fd\u65e0\u6cd5\u83b7\u5f97\u76f8\u5173\u670d\u52a1\u3002                                 \n\n<color=#009EFF">1.3 \u4fe1\u606f\u53d1\u5e03</color>\n\n\u60a8\u53d1\u5e03\u5185\u5bb9\u65f6\uff0c\u6211\u4eec\u5c06\u6536\u96c6\u60a8\u53d1\u5e03\u7684\u4fe1\u606f\uff0c\u5e76\u5c55\u793a\u60a8\u7684\u6635\u79f0\u3001\u5934\u50cf\u3001\u53d1\u5e03\u5185\u5bb9\u3002\n\n<color=#009EFF">1.4 \u5b89\u5168\u8fd0\u884c</color>\n\n<color=#009EFF">1.4.1 \u5b89\u5168\u4fdd\u969c\u529f\u80fd</color>\n\n\u6211\u4eec\u81f4\u529b\u4e8e\u4e3a\u60a8\u63d0\u4f9b\u5b89\u5168\u3001\u53ef\u4fe1\u7684\u4ea7\u54c1\u4e0e\u4f7f\u7528\u73af\u5883\uff0c\u63d0\u4f9b\u4f18\u8d28\u800c\u53ef\u9760\u7684\u670d\u52a1\u662f\u6211\u4eec\u7684\u6838\u5fc3\u76ee\u6807\u3002\u4e3a\u5b9e\u73b0\u5b89\u5168\u4fdd\u969c\u529f\u80fd\u6240\u6536\u96c6\u7684\u4fe1\u606f\u662f\u5fc5\u8981\u4fe1\u606f\u3002\n\n<color=#009EFF">1.4.2 \u65e5\u5fd7\u4fe1\u606f</color>\n\n\u4e3a\u4e86\u4fdd\u969c\u8f6f\u4ef6\u4e0e\u670d\u52a1\u7684\u5b89\u5168\u8fd0\u884c\uff0c\u6211\u4eec\u4f1a\u6536\u96c6\u60a8\u7684\u64cd\u4f5c\u3001\u4f7f\u7528\u3001\u670d\u52a1\u65e5\u5fd7\u3002\n\n<color=#009EFF">1.5 \u6536\u96c6\u3001\u4f7f\u7528\u4e2a\u4eba\u4fe1\u606f\u76ee\u7684\u53d8\u66f4</color>\n\n\u539f\u5219\u4e0a\uff0c\u5f53\u65b0\u529f\u80fd\u6216\u670d\u52a1\u4e0e\u6211\u4eec\u5f53\u524d\u63d0\u4f9b\u7684\u529f\u80fd\u6216\u670d\u52a1\u76f8\u5173\u65f6\uff0c\u6536\u96c6\u4e0e\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f\u5c06\u4e0e\u539f\u5904\u7406\u76ee\u7684\u5177\u6709\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u3002\u5728\u4e0e\u539f\u5904\u7406\u76ee\u7684\u65e0\u76f4\u63a5\u6216\u5408\u7406\u5173\u8054\u7684\u573a\u666f\u4e0b\uff0c\u6211\u4eec\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4f1a\u518d\u6b21\u8fdb\u884c\u544a\u77e5\uff0c\u5e76\u5f81\u5f97\u60a8\u7684\u540c\u610f\u3002\n\n<color=#009EFF">1.6 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u76f8\u5173\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u4e2a\u4eba\u4fe1\u606f\u4e3b\u4f53\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u6240\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\u6839\u636e\u60a8\u7684\u8981\u6c42\u7b7e\u8ba2\u6216\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\u7528\u4e8e\u7ef4\u62a4\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u8f6f\u4ef6\u53ca\u76f8\u5173\u670d\u52a1\u7684\u6545\u969c\uff1b\n\u4e3a\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u6240\u5fc5\u9700\u7684\uff1b\n\u5b66\u672f\u7814\u7a76\u673a\u6784\u57fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n<color=#009EFF">2.\u5bf9 Cookie \u548c\u540c\u7c7b\u6280\u672f\u7684\u4f7f\u7528</color>\n\n\u6211\u4eec\u53ef\u80fd\u4f1a\u8bbe\u7f6e\u8ba4\u8bc1\u4e0e\u4fdd\u969c\u5b89\u5168\u6027\u7684Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u786e\u8ba4\u60a8\u662f\u5426\u5b89\u5168\u767b\u5f55\u670d\u52a1\uff0c\u5728\u786e\u8ba4\u60a8\u5df2\u6b63\u5e38\u767b\u5f55\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u4ece\u800c\u907f\u514d\u8d26\u53f7\u76d7\u7528\u3001\u4fe1\u606f\u6cc4\u9732\u7b49\u60c5\u51b5\u53d1\u751f\u3002\n\u4f7f\u7528Cookie\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7701\u53bb\u91cd\u590d\u586b\u5199\u4e2a\u4eba\u4fe1\u606f\u3001\u8f93\u5165\u641c\u7d22\u5185\u5bb9\u7684\u6b65\u9aa4\u548c\u6d41\u7a0b\u3002\n\u60a8\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u201c\u8bbe\u7f6e\u201d\u529f\u80fd\u4e2d\u8fdb\u884cCookie\u6570\u636e\u6e05\u9664\u3002\u5982\u60a8\u8fdb\u884c\u6e05\u9664\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u4f7f\u7528\u6211\u4eec\u63d0\u4f9b\u7684\u4f9d\u8d56\u4e8eCookie\u7684\u76f8\u5173\u670d\u52a1\u548c\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u5176\u4ed6\u529f\u80fd\u4e0e\u670d\u52a1\u7684\u6b63\u5e38\u4f7f\u7528\u3002                         \n<color=#009EFF">3.\u6211\u4eec\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">3.1\u5171\u4eab</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u5171\u4eab\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\n<color=#009EFF">3.2 \u8f6c\u8ba9</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u8f6c\u8ba9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7ed9\u4efb\u4f55\u5176\u4ed6\u7b2c\u4e09\u65b9\uff0c\u9664\u975e\u5f81\u5f97\u60a8\u7684\u660e\u786e\u540c\u610f\u3002\n\u968f\u7740\u6211\u4eec\u4e1a\u52a1\u7684\u6301\u7eed\u53d1\u5c55\uff0c\u6211\u4eec\u5c06\u6709\u53ef\u80fd\u8fdb\u884c\u5408\u5e76\u3001\u6536\u8d2d\u3001\u8d44\u4ea7\u8f6c\u8ba9\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u53ef\u80fd\u56e0\u6b64\u800c\u88ab\u8f6c\u79fb\u3002\u5728\u53d1\u751f\u524d\u8ff0\u53d8\u66f4\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u4e0d\u4f4e\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8f7d\u660e\u7684\u5b89\u5168\u6807\u51c6\u8981\u6c42\u7ee7\u53d7\u65b9\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5426\u5219\u6211\u4eec\u5c06\u8981\u6c42\u7ee7\u53d7\u65b9\u91cd\u65b0\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\u3002\n<color=#009EFF">3.3 \u62ab\u9732</color>\n\n\u6211\u4eec\u4e0d\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4fe1\u606f\uff0c\u9664\u975e\u9075\u5faa\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u6216\u8005\u83b7\u5f97\u60a8\u7684\u540c\u610f\u3002\u6211\u4eec\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u91c7\u7528\u7b26\u5408\u884c\u4e1a\u5185\u6807\u51c6\u7684\u5b89\u5168\u4fdd\u62a4\u63aa\u65bd.\n\u5bf9\u8fdd\u89c4\u5e10\u53f7\u3001\u6b3a\u8bc8\u884c\u4e3a\u8fdb\u884c\u5904\u7f5a\u516c\u544a\u65f6\uff0c\u6211\u4eec\u4f1a\u62ab\u9732\u76f8\u5173\u5e10\u53f7\u7684\u4fe1\u606f\u3002\n\u201c\u5bfb\u4eba\u201d\u3001\u201c\u8ffd\u9003\u201d\u7b49\u516c\u76ca\u9879\u76ee\uff0c\u7ecf\u6839\u636e\u7b26\u5408\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u548c\u660e\u786e\u6388\u6743\u540e\uff0c\u6211\u4eec\u4f1a\u516c\u5f00\u62ab\u9732\u4e0e\u4e8b\u4ef6\u76f8\u5173\u7684\u4fe1\u606f\u3002\u5f53\u4e8b\u4ef6\u7ed3\u675f\u540e\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u5220\u9664\u5df2\u62ab\u9732\u7684\u4e2a\u4eba\u654f\u611f\u4fe1\u606f\u3002\n<color=#009EFF">3.4 \u4f9d\u6cd5\u8c41\u514d\u5f81\u5f97\u540c\u610f\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u8bf7\u60a8\u7406\u89e3\uff0c\u5728\u4e0b\u5217\u60c5\u5f62\u4e2d\uff0c\u6839\u636e\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u6211\u4eec\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u65e0\u9700\u5f81\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\n\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\u3002                                                                  \n<color=#009EFF">4.\u6211\u4eec\u5982\u4f55\u5b58\u50a8\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">4.1 \u5b58\u50a8\u5730\u70b9</color>\n\n\u6211\u4eec\u4f1a\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u5c06\u5883\u5185\u6536\u96c6\u7684\u7528\u6237\u4e2a\u4eba\u4fe1\u606f\u5b58\u50a8\u4e8e\u4e2d\u56fd\u5883\u5185\u3002                       \n\n<color=#009EFF">4.2 \u5b58\u50a8\u671f\u9650</color>\n\n\u6211\u4eec\u4ec5\u5728\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\u4fdd\u7559\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u5728\u60a8\u672a\u5220\u9664\u6216\u6ce8\u9500\u5e10\u53f7\u671f\u95f4\u4f1a\u4e88\u4ee5\u4fdd\u7559\u3002\u8d85\u51fa\u5fc5\u8981\u671f\u9650\u540e\uff0c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4f1a\u88ab\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n<color=#009EFF">5.\u6211\u4eec\u5982\u4f55\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168</color>\n\n\u6211\u4eec\u52aa\u529b\u4e3a\u7528\u6237\u7684\u4fe1\u606f\u548c\u9690\u79c1\u5b89\u5168\u63d0\u4f9b\u5305\u4fdd\u969c\uff0c\u9632\u6b62\u4fe1\u606f\u7684\u4e22\u5931\u3001\u4e0d\u5f53\u4f7f\u7528\u3001\u672a\u7ecf\u6388\u6743\u8bbf\u95ee\u6216\u62ab\u9732\u3002\n\u6211\u4eec\u4f1a\u4ee5\u4e1a\u754c\u6210\u719f\u7684\u5b89\u5168\u6807\u51c6\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u548c\u4f20\u8f93\u7528\u6237\u4fe1\u606f\uff1a\u4f8b\u5982\u5728\u8fdb\u884c\u7f51\u7edc\u4f20\u8f93\u65f6\u4f1a\u5bf9\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u5b58\u50a8\uff08SSL\u3001md5\u7b49\uff09\u3002\u5b58\u5728\u4e8eCookie\u91cc\u7684\u4e2a\u4eba\u5b89\u5168\u8ba4\u8bc1\u4fe1\u606f\u4e5f\u4f1a\u88ab\u8fdb\u884c\u52a0\u5bc6\u548c\u6df7\u6dc6\u5904\u7406\u3002\n\u6211\u4eec\u4f1a\u5efa\u7acb\u4e13\u95e8\u7684\u5b89\u5168\u90e8\u95e8\u3001\u5b89\u5168\u7ba1\u7406\u5236\u5ea6\u548c\u6570\u636e\u5b89\u5168\u6d41\u7a0b\u6765\u4fdd\u969c\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u5b89\u5168\u3002\u91c7\u53d6\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u548c\u4f7f\u7528\u5236\u5ea6\uff0c\u786e\u4fdd\u53ea\u6709\u6388\u6743\u4eba\u5458\u624d\u80fd\u8bbf\u95ee\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5e76\u9002\u65f6\u5bf9\u6570\u636e\u548c\u6280\u672f\u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1\u3002\n\u6211\u4eec\u4f1a\u5236\u5b9a\u5e94\u6025\u5904\u7406\u9884\u6848\uff0c\u5e76\u5728\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u65f6\u7acb\u5373\u542f\u52a8\u5e94\u6025\u9884\u6848\uff0c\u52aa\u529b\u963b\u6b62\u5b89\u5168\u4e8b\u4ef6\u7684\u5f71\u54cd\u6269\u5927\u3002\u4e00\u65e6\u53d1\u751f\u7528\u6237\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\uff08\u6cc4\u9732\u3001\u4e22\u5931\uff09\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\u53ca\u65f6\u5411\u60a8\u544a\u77e5\u3002\n<color=#009EFF">6.\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7684\u7ba1\u7406\uff0c\u5e76\u5c3d\u5168\u529b\u4fdd\u62a4\u60a8\u5bf9\u4e8e\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u64a4\u56de\u540c\u610f\u6388\u6743\u3001\u6ce8\u9500\u5e10\u53f7\u3001\u6295\u8bc9\u4e3e\u62a5\u4ee5\u53ca\u8bbe\u7f6e\u9690\u79c1\u529f\u80fd\u7684\u76f8\u5173\u6743\u5229\uff0c\u4ee5\u4f7f\u60a8\u6709\u80fd\u529b\u4fdd\u969c\u60a8\u7684\u9690\u79c1\u548c\u4fe1\u606f\u5b89\u5168\u3002\n\n<color=#009EFF">6.1 \u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f</color>\n\n<color=#009EFF">6.1.1 \u8bbf\u95ee\u3001\u4fee\u6539\u4e2a\u4eba\u5e10\u53f7\u4fe1\u606f</color>\n\n\u60a8\u53ef\u4ee5\u67e5\u8be2\u3001\u8bbf\u95ee\u60a8\u7684\u5934\u50cf\u3001\u7528\u6237\u540d\u3001\u7b80\u4ecb\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u6211\u4eec\u4ea7\u54c1\u7684\u201c\u5e10\u53f7\u4e2d\u5fc3\u201d\u4e2d\u4fee\u6539\u60a8\u7684\u5934\u50cf\u3001\u7b80\u4ecb\u3002\n\n<color=#009EFF">6.1.2 \u5220\u9664\u53d1\u5e03\u7684\u5185\u5bb9</color>\n\n\u5220\u9664\u53d1\u5e03\u5185\u5bb9\uff1a\u8fdb\u5165\u6211\u4eec\u4ea7\u54c1\u201c\u5185\u5bb9\u7ba1\u7406\u201d\u2014\u70b9\u51fb\u6587\u7ae0\u53f3\u4fa7\u201c\u64cd\u4f5c\u201d\u4e0b\u7684\u201c\u4e0b\u7ebf\u201d\u6309\u94ae\u3002\n\u7279\u522b\u63d0\u793a\u60a8\u6ce8\u610f\uff0c\u51fa\u4e8e\u5b89\u5168\u6027\u548c\u8eab\u4efd\u8bc6\u522b\uff08\u5982\u53f7\u7801\u7533\u8bc9\u670d\u52a1\uff09\u7684\u8003\u8651\uff0c\u60a8\u53ef\u80fd\u65e0\u6cd5\u81ea\u4e3b\u4fee\u6539\u6ce8\u518c\u65f6\u63d0\u4ea4\u7684\u67d0\u4e9b\u521d\u59cb\u6ce8\u518c\u4fe1\u606f\u3002\u5982\u60a8\u786e\u6709\u9700\u8981\u4fee\u6539\u8be5\u7c7b\u6ce8\u518c\u4fe1\u606f\uff0c\u8bf7\u6839\u636e\u672c\u9690\u79c1\u653f\u7b56\u8f7d\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002\n<color=#009EFF">6.2 \u6ce8\u9500\u5e10\u53f7</color>\n\n\u60a8\u53ef\u4ee5\u901a\u8fc7\u53d1\u9001\u8bf7\u6c42\u6ce8\u9500\u5e10\u53f7\u7684\u90ae\u4ef6\u81f3 <b>lpx@gamejym.com</b>\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u3002\u5728\u60a8\u6ce8\u9500\u5e10\u53f7\u524d\uff0c\u6211\u4eec\u5c06\u9a8c\u8bc1\u60a8\u7684\u4e2a\u4eba\u8eab\u4efd\u3001\u5b89\u5168\u72b6\u6001\u3001\u8bbe\u5907\u4fe1\u606f\u7b49\u3002\u6ce8\u9500\u5e10\u53f7\u7684\u884c\u4e3a\u662f\u4e0d\u53ef\u9006\u7684\u884c\u4e3a\uff0c\u5f53\u60a8\u6ce8\u9500\u5e10\u53f7\u540e\uff0c\u6211\u4eec\u5c06\u5220\u9664\u60a8\u7684\u76f8\u5173\u4fe1\u606f\u6216\u5c06\u60a8\u7684\u4fe1\u606f\u8fdb\u884c\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\n<color=#009EFF">6.3 \u6295\u8bc9\u4e3e\u62a5</color>\n\n\u5982\u679c\u60a8\u8ba4\u4e3a\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u53ef\u80fd\u53d7\u5230\u4fb5\u5bb3\uff0c\u6216\u8005\u53d1\u73b0\u4fb5\u5bb3\u4e2a\u4eba\u4fe1\u606f\u6743\u5229\u7684\u7ebf\u7d22\uff0c\u8bf7\u901a\u8fc7\u4ee5\u4e0b\u90ae\u7bb1\u5730\u5740 <b>lpx@gamejym.com</b> \u8054\u7cfb\u6211\u4eec\u3002\u6211\u4eec\u6838\u67e5\u540e\u4f1a\u53ca\u65f6\u5904\u7406\u60a8\u7684\u6295\u8bc9\u4e3e\u62a5\u3002\n\n<color=#009EFF">6.4 \u8bbf\u95ee\u9690\u79c1\u653f\u7b56</color>\n\n\u60a8\u53ef\u4ee5\u5728\u4ea7\u54c1\u6ce8\u518c,\u767b\u5f55,\u8bbe\u7f6e,\u5173\u4e8e\u7b49\u754c\u9762\u67e5\u770b\u672c\u9690\u79c1\u653f\u7b56\u7684\u5168\u90e8\u5185\u5bb9\u3002\n\n<color=#009EFF">6.5 \u505c\u6b62\u8fd0\u8425\u5411\u60a8\u544a\u77e5</color>\n\n\u5982\u6211\u4eec\u505c\u6b62\u8fd0\u8425\uff0c\u6211\u4eec\u5c06\u53ca\u65f6\u505c\u6b62\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u5c06\u505c\u6b62\u8fd0\u8425\u7684\u901a\u77e5\u4ee5\u516c\u544a\u7684\u5f62\u5f0f\u901a\u77e5\u60a8\uff0c\u5e76\u5bf9\u6240\u6301\u6709\u7684\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\u3002\n\n<color=#009EFF">7.\u672a\u6210\u5e74\u4eba\u6761\u6b3e</color>\n\n\u6211\u4eec\u4ea7\u54c1\u4e3b\u8981\u9762\u5411\u6210\u5e74\u4eba\u3002\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u672c\u4ea7\u54c1\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\u5982\u60a8\u7684\u76d1\u62a4\u4eba\u4e0d\u540c\u610f\u60a8\u6309\u7167\u672c\u653f\u7b56\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\uff0c\u8bf7\u60a8\u7acb\u5373\u7ec8\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u5e76\u53ca\u65f6\u901a\u77e5\u6211\u4eec\uff0c\u4ee5\u4fbf\u6211\u4eec\u91c7\u53d6\u76f8\u5e94\u7684\u63aa\u65bd\u3002\n\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n<color=#009EFF">8.\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5</color>\n\n\u6211\u4eec\u4f1a\u9002\u65f6\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u8fdb\u884c\u4fee\u8ba2\uff0c\u5982\u8be5\u7b49\u53d8\u66f4\u4f1a\u5bfc\u81f4\u60a8\u5728\u672c\u653f\u7b56\u9879\u4e0b\u6743\u5229\u7684\u5b9e\u8d28\u51cf\u635f\uff0c\u6211\u4eec\u4f1a\u5728\u53d8\u66f4\u751f\u6548\u524d\u5728\u9875\u9762\u663e\u8457\u4f4d\u7f6e\u901a\u77e5\u60a8\u3002\n\u82e5\u60a8\u4e0d\u540c\u610f\u8be5\u7b49\u53d8\u66f4\u53ef\u4ee5\u505c\u6b62\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\uff0c\u82e5\u60a8\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5373\u8868\u793a\u60a8\u540c\u610f\u53d7\u4fee\u8ba2\u540e\u7684\u672c\u9690\u79c1\u653f\u7b56\u7684\u7ea6\u675f\u3002',""],this.privacyPage=0,this.privacyPageTxtCount=400,this.privacyPageSum=[Math.ceil(this.privacyStr[0].length/this.privacyPageTxtCount),Math.ceil(this.privacyStr[1].length/this.privacyPageTxtCount)],this.isShare=!1,this.shareTime=0,this.shareFailBack=null,this.shareSucBack=null,this.videoFns={},this.nativeAds={},this.nativeAdListMap={},this.nativeAdCallMap={},this.nativeNodeMap={}}return a.prototype.setParaMap=function(a){this.paraMap=a},a.prototype.getPara=function(a){return this.paraMap.get(a)},a.prototype.getRuanZhu=function(){return this.ruanzhu},a.prototype.exit=function(){},a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo={windowHeight:cc.view.getVisibleSize().height,windowWidth:cc.view.getVisibleSize().width}),this.sysInfo},a.prototype.hasPrivacy=function(){return!!p.default.getData("isAgree",0)},a.prototype.privacyAgree=function(){return p.default.getData("isAgree",0)||p.default.saveData("isAgree",1),1},a.prototype.privacyReject=function(){return p.default.saveData("isAgree",0),0},a.prototype.privacyNextPage=function(a){this.privacyPage+1<this.privacyPageSum[a]&&this.privacyPage++;var t=this.privacyPage*this.privacyPageTxtCount;return this.privacyStr[a].substring(t,t+this.privacyPageTxtCount)},a.prototype.privacyPrePage=function(a){this.privacyPage-1>=0&&this.privacyPage--;var t=this.privacyPage*this.privacyPageTxtCount;return this.privacyStr[a].substring(t,t+this.privacyPageTxtCount)},a.prototype.privacyPage1=function(a){return this.privacyPage=0,this.privacyStr[a].substring(0,this.privacyPageTxtCount)},a.prototype.getCtrl=function(a){return this.ctrl&&this.ctrl[a]?parseFloat(this.ctrl[a]):0},a.prototype.getPrivacyShort=function(){return""},a.prototype.getPrivacy=function(){return""},a.prototype.init=function(){p.default.log("init1\u76ee\u6807===>"+this.channel+",R:"+r.pzaChannel.isConfRemote+",gid:"+this.getPara("gid"))},a.prototype.isShareSuc=function(){return!((new Date).getTime()-this.shareTime<3e3||(this.shareTime=(new Date).getTime(),0))},a.prototype.canShare=function(){return!1},a.prototype.shareAppMessage=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null),t&&t()},a.prototype.copyToClip=function(a,t){var e=document.createElement("textarea");e.value=a,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="12pt";var o,n=getSelection();n.rangeCount>0&&(o=n.getRangeAt(0)),document.body.appendChild(e),e.select(),e.selectionStart=0,e.selectionEnd=a.length;try{document.execCommand("copy"),t()}catch(i){p.default.err(i),t("\u590d\u5236\u5931\u8d25!")}document.body.removeChild(e),o&&(n.removeAllRanges(),n.addRange(o))},a.prototype.showVideo=function(a,t,e){void 0===t&&(t=!1),void 0===e&&(e=!0),a.sucCall(),a.endCall(),i.pzaCommonMask.hideMask()},a.prototype.addGird9Icon=function(){},a.prototype.gird9IconClick=function(){},a.prototype.showGird9=function(){},a.prototype.canAutoGird9=function(){return!1},a.prototype.closeGird9=function(){},a.prototype.showBanner=function(a,t,e){void 0===a&&(a=!1),void 0===t&&(t=null),void 0===e&&(e=null)},a.prototype.closeBanner=function(){},a.prototype.showBannerByTime=function(a){void 0===a&&(a=!1)},a.prototype.closeBannerByTime=function(){},a.prototype.checkNativeInsert=function(){return!1},a.prototype.showNative=function(a,t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=null)},a.prototype.loadAndShowNative=function(){},a.prototype.loadNative=function(){},a.prototype.findAndReport=function(){},a.prototype.reportAdShow=function(){},a.prototype.reportAdClick=function(){},a.prototype.closeNative=function(){},a.prototype.getNativeData=function(){},a.prototype.showCustomAd=function(a,t,e){void 0===t&&(t=!1),void 0===e&&(e=null)},a.prototype.closeCustomAd=function(a){void 0===a&&(a=!1)},a.prototype.showInter=function(a){void 0===a&&(a=!1),console.log("\u5c55\u793a\u63d2\u5c4f===")},a.prototype.closeInter=function(){},a.prototype.showDesktop=function(){},a.prototype.addShortcut=function(){},a.prototype.checkShortcut=function(){},a.prototype.recorderStart=function(){},a.prototype.recorderStop=function(){},a.prototype.getRecordTime=function(){return 0},a.prototype.shareVideo=function(a){void 0===a&&(a=null)},a.prototype.jumpTo=function(a,t,e,o){void 0===t&&(t=function(){}),void 0===e&&(e=function(){}),void 0===o&&(o=function(){})},a.prototype.canMoreGame=function(){return!1},a.prototype.showMoreGameBox=function(){},a.prototype.showSidebar=function(a){a&&a()},a.prototype.jpost=function(a,t,e){p.default.jpost(a,t,e)},a.prototype.showCustomService=function(){},a.prototype.showPrivacy=function(a,t,e){void 0===e&&(e=!1),o.pzaBundleObjectPool.requestInstantByUrl(n.pzaResourceUrl.PRIVACY_Win,!1,function(o,n){null==o&&null!=n?(n.setParent(a),n&&n.getComponent(l.default).setCallBack(t),e&&n&&n.getComponent(l.default).showContent()):console.error(o)})},a.prototype.showIconAd=function(){},a.prototype.hideIconAd=function(){},a.prototype.isShowSideView=function(){},a}();e.pzaChannelWeb=s,cc._RF.pop()},{"../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaCommonMask":"pzaCommonMask","./pzaChannel":"pzaChannel","./pzaPrivacyWin":"pzaPrivacyWin","./pzakc":"pzakc"}],pzaChannelWx1:[function(a,t,e){"use strict";cc._RF.push(t,"647a5kYA3lKsouIwp/koyBL","pzaChannelWx1");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelWx1=void 0;var i=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="wx1",t.paraMap=new Map([["appId","wx000000000"],["vedioAd","adunit-8326ea3dc016f65f"]]),t.ruanzhu="",t.sharePicsArr=[{title:"{\u6709\u4eba@\u6211}\u5feb\u6765\u6311\u9009\u4f60\u7684\u5fc3\u52a8\u4e3b\u64ad",url:"https://mmocgame.qpic.cn/wechatgame/xQIymonI7UDQNaBQ6DEqwibh5guA7Gf0YyibM8lcVK5WOBOa7aFasHIAz1BJdmaicIz/0",id:"QCLyA+TbRv2sj5Odvg7p6A=="}],t}return n(t,a),t}(a("./pzaChannelWx").pzaChannelWx);e.pzaChannelWx1=i,cc._RF.pop()},{"./pzaChannelWx":"pzaChannelWx"}],pzaChannelWx:[function(a,t,e){"use strict";cc._RF.push(t,"d3233Z4pp5G1ohhvieWKzhz","pzaChannelWx");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelWx=void 0;var i,r=a("./lanfei"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaStatisticsMgr"),c=a("../View/pzaCommonMask"),u=a("./pzaChannel"),d=a("./pzaChannelWeb"),h=a("./pzakc"),m=a("../Common/pzaUtil");(function(a){a[a.Show=0]="Show",a[a.Hide=1]="Hide"})(i||(i={}));var f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="wx",t.channelId=0,t.reportChannel="wx",t.paraMap=new Map([["appId","wx987d4570f328b6d4"],["bannerAd","adunit-f450616e1849881e"],["insertAd","adunit-7255cfe3e290d68a"],["videoAd","adunit-b6ecbee0564eabed"],["ctrlId","662a0b22a331ce3adb82292d"],["gid","6625cc6ea331ce3adb8228f6"],["sharePicId","zwdzjs"]]),t.sharePicsArr=[{title:"\u7ecf\u5178\u56de\u5f52\uff01\u50f5\u5c38\u6765\u88ad\uff01",url:"https://mmocgame.qpic.cn/wechatgame/gyhQqouvXnz8bcDRJIrZKsEYqgTeHMWz6yWlSUefC5f0h4DxHtvRvaOcicicRyicjyP/0",id:"7ReCcKS7S+OkRvB8CMYh7g=="}],t.ruanzhu="",t.channelObj=window.wx,t.sid=null,t.authorizationButton=null,t.onShowCall=null,t.cachedBannerSize=null,t.autoShowBannerTimer=30,t.bannerState=i.Hide,t.bannerTimeId=-1,t.shareIndex=0,t.showInterCDOver=!0,t}return n(t,a),t.prototype.hasPrivacy=function(){return!0},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this.channelObj;o.onShow(function(){cc.game.resume(),l.pzaSoundManager.resumeMusic(),e.isShare&&(e.isShareSuc()?(e.shareSucBack&&e.shareSucBack(),o.showToast({title:"\u5206\u4eab\u6210\u529f!"}),p.pzaLocalData.shareGetCoin()):(o.showToast({title:"\u5206\u4eab\u5931\u8d25"}),e.shareFailBack&&e.shareFailBack()),e.isShare=!1),e.onShowCall&&e.onShowCall(),e.onShowCall=null}),o.onHide(function(){cc.game.pause(),e.isShare&&(e.shareTime=(new Date).getTime())});var n=this.getPara("ctrlId"),i=this;if(n){var r=h.default.getData("sid",null);r||(r=i.channelObj.getLaunchOptionsSync().scene,h.default.saveData("sid",r));var s={id:n,sid:r};h.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",s,function(a,o){a?h.default.err(a):""+o.code=="0"?(i.ctrl=o.data,h.default.log("\u8fd4\u56de",i.ctrl),p.pzaLocalData.maxAdShareCount=parseInt(i.ctrl.p2),p.pzaLocalData.maxShareRwdCount=parseInt(i.ctrl.p3),p.pzaLocalData.data.showBeginViewMax=parseInt(i.ctrl.p5),p.pzaLocalData.data.showDaveViewMax=parseInt(i.ctrl.p5),p.pzaLocalData.data.showGardenViewMax=parseInt(i.ctrl.p5),p.pzaLocalData.data.DelayShowCancelBtnTime=1e3*parseInt(i.ctrl.p6),e.wxLogin(function(){t&&t()})):h.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(o))})}o.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),u.pzaChannel.getSharePics("zwdzjs",function(a){e.initSharePic(a)})},t.prototype.initSharePic=function(a){var t=this;console.log("initsharePic: ",a),null==a||a.length<=0||(this.sharePicsArr=[],a.forEach(function(a){var e={title:a.txt,url:a.picUrl,id:a.picId};t.sharePicsArr.push(e)}))},t.prototype.onLoginSuc=function(){var a=this,t=this.channelObj.getLaunchOptionsSync().query;t&&(console.log("query query: ",t,t.act),t.wxPicId&&t.wxPicId.length>6&&u.pzaChannel.picShareFrom(this.getPara("sharePicId"),t.wxPicId),t.act&&t.sid&&(this.sid=t.sid,this.shareFrom(),null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar||this.wxCheckPrivacySetting(function(t){t?a.wxPrivacyAuthorize(function(){a.getUserInfo(null)},null):a.getUserInfo(null)},null)))},t.prototype.wxCheckPrivacySetting=function(a,t){var e=window.wx;"function"==typeof e.getPrivacySetting?e.getPrivacySetting({success:function(t){console.log(t),a&&a(t&&t.needAuthorization)},fail:function(){t&&t()},complete:function(){}}):t&&t()},t.prototype.wxPrivacyAuthorize=function(a,t){var e=window.wx;"function"==typeof e.requirePrivacyAuthorize?e.requirePrivacyAuthorize({success:function(){console.log("\u7528\u6237\u540c\u610f\u9690\u79c1\u6388\u6743"),a&&a()},fail:function(){console.log("\u7528\u6237\u62d2\u7edd\u9690\u79c1\u6388\u6743"),t&&t()},complete:function(){}}):t&&t()},t.prototype.wxLogin=function(a){void 0===a&&(a=function(){});var e=window.wx,o=this;e.login({success:function(e){if(!e.code)return console.error("\u767b\u5f55\u5931\u8d25\uff01"+e.errMsg),void a();console.log("wxLogin",e.code),h.default.jpost("https://ga.gamejym.com/fcm/wx/getOpenId",{appId:o.getPara("appId"),code:e.code},function(e,n){return e?(h.default.err(e),void a()):(h.default.log("\u83b7\u53d6openId",n),n.openid?(o.channelUserId=n.openid||"",t.unionid=n.unionid||"",a(),void r.default.getToken(o.channelUserId,function(a,t){console.log("lanfei.getToken callRes :",t),r.default.token=t.data.token})):(h.default.err("\u83b7\u53d6openId\u5931\u8d25",n),void a()))})},fail:function(){a()}}),e.onShareAppMessage(function(){var a=o.getShareObj();return null!=a?{title:a.title,imageUrl:a.url,imageUrlId:a.id}:{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",imageUrl:"https://mmocgame.qpic.cn/wechatgame/a06ia0rK6eLAFOr97s9y4MXbfDz3hjYEjhAT6lWwv10xALzjGl9thAIqw3EYNEwhN/0",imageUrlId:"Xf4UCePgQ6Owe0gO7nnOkw=="}})},t.prototype.cacheBanner=function(){var a=this;if(this.getPara("bannerAd")&&(!this.bannerAd||!this.cachedBannerSize)){h.default.log("cacheBanner\u5f00\u59cb,size:",this.cachedBannerSize,"ad:",this.bannerAd);var t=this.channelObj,e={adUnitId:this.getPara("bannerAd"),adIntervals:30,style:{left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1}};this.bannerAd=t.createBannerAd(e),this.bannerAd.onError(function(t){h.default.log("cachedBanner\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(t)),a.bannerAd=null,a.cachedBannerSize=null}),this.bannerAd.onResize(function(t){console.log("cachedBanner onResize===",t.height,t.width),a.cachedBannerSize=t}),this.bannerAd.show().then(function(){h.default.log("cachedBanner\u6210\u529f")}).catch(function(t){h.default.log("cachedBanner err:"+JSON.stringify(t)),a.bannerAd=null,a.cachedBannerSize=null})}},t.prototype.showBanner=function(a,t,e){var o=this,n=this.getPara("bannerAd");if(n&&0!=this.getCtrl("p21"))if(this.bannerState!=i.Show){if(h.default.log("showBanner isShow",n,e),this.bannerAd&&this.cachedBannerSize){var r=t?t(this.cachedBannerSize):{top:this.getSysInfo().windowHeight-this.cachedBannerSize.height,left:(this.getSysInfo().windowWidth-this.cachedBannerSize.width)/2};return this.bannerAd.style.top=r.top,this.bannerAd.style.left=r.left,r.height&&(this.bannerAd.style.height=r.height),void h.default.log("cachedBanner style:",this.bannerAd.style.top,this.bannerAd.style.left,this.bannerAd.style.height)}var p=this.channelObj,l={adUnitId:n,adIntervals:30,style:{left:0,top:this.getSysInfo().windowHeight-1}};this.bannerState=i.Show,this.bannerAd=p.createBannerAd(l),this.bannerAd.onError(function(a){h.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a)),o.bannerAd=null,o.cachedBannerSize=null});var s=this;this.bannerAd.onResize(function(){s.bannerAd.style.top=o.getSysInfo().windowHeight-100,s.bannerAd.style.left=o.getSysInfo().windowWidth/2-150}),this.bannerAd.show().then(function(){h.default.log("banner\u663e\u793a\u6210\u529f"),o.bannerState==i.Hide&&(h.default.log("banner\u663e\u793a\u5173\u95ed"),o.closeBanner())}).catch(function(a){o.bannerAd=null,o.cachedBannerSize=null,h.default.log("showBanner err:"+JSON.stringify(a))})}else h.default.log("\u5df2\u7ecf\u663e\u793abanner")},t.prototype.closeBanner=function(){if(this.bannerState=i.Hide,this.bannerAd)if(this.cachedBannerSize){var a={left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1};this.bannerAd.style.left=a.left,this.bannerAd.style.top=a.top}else this.bannerAd.hide()},t.prototype.showBannerByTime=function(a){var t=this;if(void 0===a&&(a=!1),this.getPara("bannerAd")){var e=30;this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<30&&(e=30),this.showBanner(a,null,"battle"),this.bannerTimeId=setInterval(function(){t.showBanner(a,null,"battle")},1e3*e)}},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.canShare=function(){return!0},t.prototype.getShareObj=function(){var a=this.shareIndex;return this.shareIndex++,this.shareIndex>=this.sharePicsArr.length&&(this.shareIndex=0),this.sharePicsArr[a]},t.prototype.sendUserInfo=function(a){if(null!=a)if(p.pzaLocalData.data.playerNick=a.nickName,p.pzaLocalData.data.playerAvatar=a.avatarUrl,p.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};h.default.jpost("https://ga.gamejym.com/fcm/wx/sendUserInfo",t,function(a,t){a?h.default.err(a):h.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(a,t,e){void 0===e&&(e=!0);var o=this.channelObj,n=this;o.getSetting({success:function(i){if(i.authSetting["scope.userInfo"])o.getUserInfo({success:function(t){console.log("userInfo",t.userInfo),n.sendUserInfo(t.userInfo),a&&a()}});else{n.destroyAuthorizationButton();var r=n.getSysInfo().screenWidth,p=n.getSysInfo().screenHeight;if(n.authorizationButton=o.createUserInfoButton({type:"image",image:"img/startGameButton.png",style:t||{left:0,top:0,width:r,height:p}}),!n.authorizationButton)return;n.authorizationButton.onTap(function(t){e&&n.destroyAuthorizationButton(),console.log("userInfo2",t),n.sendUserInfo(t.userInfo),a&&a()})}}})},t.prototype.destroyAuthorizationButton=function(){try{if(!this.authorizationButton)return;this.authorizationButton.destroy(),this.authorizationButton=null}catch(a){this.authorizationButton=null,console.error(a)}},t.prototype.shareAppMessage=function(a,t,e){var o=this;if(void 0===t&&(t=null),void 0===e&&(e=null),this.canShare()){var n=this.getShareObj(),i="";if(a&&a.act&&(i=a.act),!i){var r={title:n.title,imageUrl:n.url,imageUrlId:n.id,query:null};return r.query="wxPicId="+n.id,this.channelObj.shareAppMessage(r),this.shareFailBack=e,this.shareSucBack=t,this.isShare=!0,s.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:parseInt(a.adsid)},{name:"ShareR",value:1}),void u.pzaChannel.picShareTo(this.getPara("sharePicId"),n.id)}if(!this.channelUserId)return console.error("\u8bf7\u5148\u767b\u5f55"),this.wxLogin(),void this.channelObj.showToast({title:"\u8bf7\u5148\u767b\u5f55"});var p=this;p.shareFailBack=null,p.shareSucBack=null,p.isShare=!1,"recruit_share"==a.act&&(p.isShare=!0,p.shareFailBack=e,p.shareSucBack=t);var l={appId:this.getPara("appId"),openId:this.channelUserId,act:i};h.default.jpost("https://ga.gamejym.com/fcm/wx/shareTo",l,function(a,t){if(a)h.default.err(a);else{h.default.log("shareTo\u8fd4\u56de",t);var e={title:n.title,imageUrl:n.url,imageUrlId:n.id,query:null};t&&0===t.code&&(e.query="sid="+t.data.sid+"&act="+i+"&wxPicId="+n.id,h.default.log("shareQuery",e.query)),p.channelObj.shareAppMessage(e),u.pzaChannel.picShareTo(o.getPara("sharePicId"),n.id)}})}else s.pzaStatisticsMgr.sendEvent("Share",{name:"Shareid",value:parseInt(a.adsid)},{name:"ShareR",value:0})},t.prototype.shareByScreenShot=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null);var o=this,n=16*canvas.height/9;try{canvas.toTempFilePath({x:.3234375*n+(canvas.width-n)/2,y:0,width:.5078125*n,height:.85*canvas.height,destWidth:500,destHeight:400,success:function(n){o.channelObj.shareAppMessage({title:a,imageUrl:n.tempFilePath}),o.shareFailBack=e,o.shareSucBack=t,o.isShare=!0},fail:function(a){console.error("shareByScreenShot",a)}})}catch(i){console.error("shareByScreenShot",i)}},t.prototype.shareFrom=function(){if(h.default.log("sharefrom in"),this.sid&&this.channelUserId){console.log("sharefrom star: ",p.pzaLocalData.getAllStar());var a={sid:this.sid,openId:this.channelUserId,star:p.pzaLocalData.getAllStar()};h.default.jpost("https://ga.gamejym.com/fcm/wx/shareFrom",a,function(a,t){a?h.default.err("sharefrom Error: "+a):h.default.log("shareFrom\u8fd4\u56de",t)})}},t.prototype.getShareResult=function(a,t){if(!this.channelUserId)return t([]);h.default.log("getshareResult in");var e={appId:this.getPara("appId"),openId:this.channelUserId,act:a};h.default.jpost("https://ga.gamejym.com/fcm/wx/getShareResult",e,function(a,e){if(a)return h.default.err("getshareResult: ",a),void t([]);h.default.log("getShareResult\u8fd4\u56de",e),e&&0===e.code?t(e.data):t([])})},t.prototype.copyToClip=function(a,t){this.channelObj.setClipboardData({data:a,success:function(){t()},fail:function(a){console.error("res: ",a),t("\u590d\u5236\u5931\u8d25: ")}})},t.prototype.showVideo=function(a){var t=this;s.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:a.adsid},{name:"adname",value:a.posName});var e=this.getPara("videoAd");if(e){cc.game.pause(),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this,n=this.channelObj;o.videoFns.onLoad=function(){h.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},o.videoFns.onError=function(e){h.default.err(e),c.pzaCommonMask.hideMask(),cc.game.resume(),l.pzaSoundManager.resumeMusic(),a.failCall(),a.endCall(),s.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:-1},{name:"adname",value:a.posName}),p.pzaLocalData.maxAdShareCount>0&&p.pzaLocalData.data.adShareCount<p.pzaLocalData.maxAdShareCount?t.shareAppMessage({title:null,act:null,adsid:a.adsid},function(){p.pzaLocalData.data.adShareCount++,p.pzaLocalData.addDirty("adShareCount"),a.sucCall&&a.sucCall()}):t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},o.videoFns.onClose=function(t){c.pzaCommonMask.hideMask(),cc.game.resume(),l.pzaSoundManager.resumeMusic(),t&&t.isEnded?(a.sucCall(),h.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+a.posName),s.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:0},{name:"adname",value:a.posName}),n.reportEvent("exptcomm_advideo_income",{expt_data:1}),p.pzaLocalData.bpWatchAd()):(a.failCall(),s.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:1},{name:"adname",value:a.posName})),a.endCall()},o.rewardedVideoAd.onLoad(o.videoFns.onLoad),o.rewardedVideoAd.onError(o.videoFns.onError),o.rewardedVideoAd.onClose(o.videoFns.onClose),o.rewardedVideoAd.show().then(function(){n.reportEvent("exptcomm_advideofront_pos_uv",{expt_data:1}),n.reportEvent("exptcomm_advideofront_pos_pv",{expt_data:1})}).catch(function(){o.rewardedVideoAd.load().then(function(){return h.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){}).catch(function(){cc.game.resume(),l.pzaSoundManager.resumeMusic(),c.pzaCommonMask.hideMask()})}).catch(function(){cc.game.resume(),l.pzaSoundManager.resumeMusic(),c.pzaCommonMask.hideMask()})})}},t.prototype.showGird9=function(){var a=this.getPara("gird9");if(a){var t=this.ctrl&&this.ctrl.p3?parseInt(this.ctrl.p3):1;if(h.default.log("showCustomAd-wx","p3",t),t){var e=this.channelObj,o={adUnitId:a,adIntervals:30,style:{top:this.getSysInfo().windowHeight/2-280,left:0}};this.boxPortalAd=e.createCustomAd(o),this.boxPortalAd.offError(),this.boxPortalAd.onError(function(a){h.default.log("custom\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.boxPortalAd.show().then(function(){h.default.log("custom\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){h.default.log("custom\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})}}},t.prototype.closeGird9=function(){this.boxPortalAd&&this.boxPortalAd.hide()},t.prototype.canAutoGird9=function(){return!0},t.prototype.showNative=function(a,t,e){var o=this,n=this.getPara(e);if(n){h.default.log("showCustomAd-wx",e);var i=this.channelObj;if(this.nativeAds[e]&&this.nativeAds[e].isShow())h.default.log("icon\u6b63\u5728\u663e\u793a\u4e2d\uff0c\u4e0d\u518d\u91cd\u590d\u663e\u793a");else{var r=this.getSysInfo().windowHeight;h.default.log("showCustomAd-wx",e,n,r,this.getSysInfo().windowWidth);var p={adUnitId:n,adIntervals:30,style:{top:r/2-100,left:e.indexOf("2")<0?0:this.getSysInfo().windowWidth-70}};this.nativeAds[e]=i.createCustomAd(p),this.nativeAdCallMap.onError&&this.nativeAds[e].offError(this.nativeAdCallMap.onError),this.nativeAds[e].offError(),this.nativeAdCallMap.onError=function(a){h.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a)),o.nativeNodeMap[e]=0},this.nativeAds[e].onError(this.nativeAdCallMap.onError),this.nativeAdCallMap.onHide&&this.nativeAds[e].offHide(this.nativeAdCallMap.onHide),this.nativeAds[e].offHide(),this.nativeAdCallMap.onHide=function(){o.nativeNodeMap[e]=0,h.default.log("\u539f\u751ficon\u5173\u95ed")},this.nativeAds[e].onHide(this.nativeAdCallMap.onHide),this.nativeAds[e].show().then(function(){h.default.log("\u539f\u751ficon\u5c55\u793a\u5b8c\u6210"),o.nativeNodeMap[e]=1}).catch(function(a){h.default.log("\u539f\u751ficon\u5c55\u793a\u5931\u8d25"+JSON.stringify(a)),o.nativeNodeMap[e]=0})}}},t.prototype.checkNativeInsert=function(a){if(a.indexOf("Insert")>0&&this.nativeNodeMap[a]&&this.nativeNodeMap[a].active){if(this.nativeNodeMap.nativeInsertAd&&this.nativeNodeMap.nativeInsertAd.active)return h.default.log("\u539f\u751f\u63d2\u5c4f\u53ea\u80fd\u51fa\u4e00\u4e2a"),!1;if(this.nativeNodeMap.nativeInsertAd2&&this.nativeNodeMap.nativeInsertAd2.active)return h.default.log("\u539f\u751f\u63d2\u5c4f\u53ea\u80fd\u51fa\u4e00\u4e2a2"),!1}return!0},t.prototype.closeNative=function(a){this.nativeAds[a]&&this.nativeAds[a].hide()},t.prototype.showInter=function(a){var t=this,e=m.pzaUtil.getRandomFloatNum(0,1);if(console.log("p10: ",u.pzaChannel.instance().getCtrl("p10")),console.log("showInter random",e),a||.01*u.pzaChannel.instance().getCtrl("p10")>=e){if(!this.showInterCDOver)return void console.log("\u63d2\u5c4f\u663e\u793a\u95f4\u9694\u4e2d");var o=this.getPara("insertAd");if(!o)return;var n=this,i=u.pzaChannel.instance().getCtrl("p11");console.log("p11",i);var r=this.channelObj;h.default.log("showInter isShow",o),this.interstitialAd=r.createInterstitialAd({adUnitId:o}),this.interstitialAd.onError(function(a){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.interstitialAd.offClose(),this.interstitialAd.onClose(function(){var a=m.pzaUtil.getRandomFloatNum(0,1);console.log("p18: ",u.pzaChannel.instance().getCtrl("p18")),.1*u.pzaChannel.instance().getCtrl("p18")>=a&&setTimeout(function(){t.showCustomAd(!1)},3e3),t.interstitialAd.destroy(),t.interstitialAd=null});var p=this.getCtrl("p12");console.log("p12",p);var l=this.getCtrl("p26"),s=m.pzaUtil.getRandomFloatNum(0,1);console.log("p26: ",u.pzaChannel.instance().getCtrl("p26")),console.log("showInter random",s);var c=0;.01*l>=s&&(c=1e3),setTimeout(function(){t.interstitialAd.show().then(function(){h.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210"),n.showInterCDOver=!1,setTimeout(function(){n.showInterCDOver=!0},1e3*i)}).catch(function(a){h.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})},p*c)}},t.prototype.showDesktop=function(){},t.prototype.jumpTo=function(a,t,e,o){h.default.log("jumpTo:"+a),this.channelObj.navigateToMiniProgram({appId:a,success:t,fail:e,complete:o})},t.prototype.requestSubscribeMessage=function(a,t){var e=this.channelObj;if("function"==typeof e.requestSubscribeMessage){console.log("\u89e6\u53d1\u5fae\u4fe1\u8ba2\u9605",a);try{e.requestSubscribeMessage({tmplIds:a,success:function(e){console.log(e,e[a[0]]),"accept"==e[a[0]]&&t&&t()},fail:function(a){console.log(a)}})}catch(o){console.error(o)}}},t.prototype.createGameClubButton=function(a,t,e,o){var n=this.channelObj;if(null!=n.createGameClubButton&&"function"==typeof n.createGameClubButton){var i=this.getSysInfo();if(null!=i){var r=i.screenHeight/720,p={type:"image",image:"img/game_club.png",style:{left:a*r,top:t*r,width:e*r,height:o*r}};return n.createGameClubButton(p)}}},t.prototype.getGameClubData=function(a){var t=this.channelObj;if("function"==typeof t.getGameClubData){var e=function(){t.login({success:function(e){console.log("wxLogin succ  loginRes.code is : "+e.code),t.getGameClubData({dataTypeList:[{type:1},{type:4},{type:5}],success:function(t){console.log(t);var o=t&&t.encryptedData,n=t&&t.signature,i=t&&t.iv;a&&a({authCode:e.code,encryptedData:o,iv:i,signature:n})},fail:function(t){console.error(t),a&&a(null)}})},fail:function(t){console.log("wxlogin fail"),console.error(t),a&&a(null)}})};t.getSetting({success:function(o){null==o||null==o.authSetting||1!=o.authSetting["scope.gameClubData"]?(console.log("autoorize pop"),t.authorize({scope:"scope.gameClubData",success:function(){e()},fail:function(){a&&a(null)}})):e()}})}else a&&a(null)},t.prototype.getAbTest=function(a){var t=this.channelObj;if(null!=t.getExptInfoSync&&"function"==typeof t.getExptInfoSync){var e=t.getExptInfoSync(["expt_1720752823"]);return console.log("getAbTest",e),null==e?null:e[a]}console.log("wx not getExptInfoSync")},t.prototype.getPowerGiftAbTest=function(a){var t=this.channelObj;if(null!=t.getExptInfoSync&&"function"==typeof t.getExptInfoSync){var e=t.getExptInfoSync(["expt_1723794382"]);return console.log("getAbTest",e),null==e?null:("0"==e.expt_1723794382?(p.pzaLocalData.isShowPowerGift=!0,p.pzaLocalData.isShowGift=!0):"1"==e.expt_1723794382&&(p.pzaLocalData.isShowPowerGift=!1,p.pzaLocalData.isShowGift=!1),e[a])}console.log("wx not getExptInfoSync")},t.prototype.registerOnshow=function(a){this.onShowCall=a},t.prototype.showCustomService=function(){console.log("wx showCustomService!"),this.channelObj.openCustomerServiceConversation({success:function(){console.log("wxCustomService success!")},fail:function(a){console.log("wxCustomService fail!",a)}})},t.unionid=null,t}(d.pzaChannelWeb);e.pzaChannelWx=f,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUtil":"pzaUtil","../View/pzaCommonMask":"pzaCommonMask","./lanfei":"lanfei","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannel:[function(a,t,e){"use strict";cc._RF.push(t,"891b1VRbSpD0accy/xnCqYi","pzaChannel"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannel=void 0;var o=a("../Common/pzaLocalData"),n=a("../Common/pzaTipManager"),i=a("../View/pzaCommonMask"),r=a("./pzaChannelHw"),p=a("./pzaChannelIOS"),l=a("./pzaChannelMy"),s=a("./pzaChannelMy1"),c=a("./pzaChannelNoAD"),u=a("./pzaChannelOppo"),d=a("./pzaChannelQQ"),h=a("./pzaChannelTap"),m=a("./pzaChannelTT"),f=a("./pzaChannelVivo"),z=a("./pzaChannelWeb"),y=a("./pzaChannelWx"),g=a("./pzakc"),b=a("../Common/pzaSoundManager"),v=a("../Common/pzaWorldEventManager"),P=a("./pzaChannelBiLi"),D=a("./pzaChannelMi"),S=a("./pzaChannelMg"),C=a("./pzaChannelKs"),_=a("./pzaChannelRY"),E=function(){function a(){this.channel="noAD",this.channelMap=new Map([["web",new z.pzaChannelWeb],["wx",new y.pzaChannelWx],["ios",new p.pzaChannelIOS],["tt",new m.pzaChannelTT],["oppo",new u.pzaChannelOppo],["vivo",new f.pzaChannelVivo],["taptap",new h.pzaChannelTap],["my",new l.pzaChannelMy],["my1",new s.pzaChannelMy1],["ks",new C.pzaChannelKs],["hw",new r.pzaChannelHw],["qq",new d.pzaChannelQQ],["bl",new P.pzaChannelBiLi],["mi",new D.pzaChannelMi],["mg",new S.pzaChannelMg],["ry",new _.pzaChannelRY],["noAD",new c.pzaChannelNoAD]])}return a.instance=function(){return a._me||(a._me=new a),a._me},a.decodeWxData=function(a,t,e,o,n,i){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/decodeWxData",{appId:a,encryptedData:t,iv:e,code:o,signature:n},function(a,t){if(a)return console.error(a),void i(null);0===t.code?i(t.data&&t.data.dataList):i(null)})},a.subMsg=function(a,t,e,o,n){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/wxOrderSubMsg",{appId:a,openId:t,template_id:e,signDay:o},function(a,t){if(a)return console.error(a),void n(-1);0===t.code?n(0):n(-1)})},a.redeem=function(a,t,e,o){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/redeem",{code:e,gameId:a,userId:t},function(a,t){if(a)return console.error(a),void o(null);if(0===t.code){var e=g.default.strArr(t.data);if(e){for(var n=[],i=0;i<e.length;i++){var r=e[i].split(":");r.length<2?console.error("\u5151\u6362\u7801\u914d\u7f6e\u6709\u8bef",e[i]):n.push({key:r[0],val:r[1]})}o(n)}else o(null)}else o(null)})},a.getSharePics=function(a,t){var e={game:a,query:"aaa",v:"1.2.0",s:"s"};this.instance().getChannel().jpost("https://ga.gamejym.com/htApi/ht_api/getSharePic",e,function(a,e){if(a)return g.default.err(a),void t([]);if(!e||0!=e.re||!e.data||e.data.length<=0)return t([]);for(var o=[],n=0;n<e.data.length;n++){var i=e.data[n].split("|");o.push({picId:i[0],txt:i[1],picUrl:i[2]})}t(o)})},a.leaderBoradUpdate=function(a,t,e,o){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/leaderBoradUpdate",{gameId:a,userId:t,score:e},function(a,t){return a?(g.default.err(a),void o(null)):t.code?(g.default.err(t.code),void o(null)):void o(t.data)})},a.leaderBoradRank=function(a,t,e){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/leaderBoradRank",{gameId:a,userId:t},function(a,t){return a?(g.default.err(a),void e(-1)):t.code?(g.default.err(t.code),void e(-1)):void e(t.data)})},a.getLeaderBorad=function(a,t){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/getLeaderBorad",{gameId:a},function(a,e){return a?(g.default.err(a),void t([])):e.code?(g.default.err(e.code),void t([])):void t(e.data)})},a.reportToRankList=function(a,t,e,o,n,i){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/phbUpdate",{userId:t,gameId:a,userName:e,userIcon:o,sortVal:n},function(a){i&&i(),a&&g.default.err(a)})},a.getRankList=function(a,t){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/phbList",{gameId:a},function(a,e){return a?(g.default.err(a),void t([])):e.code?(g.default.err(e.code),void t([])):void t(e.data)})},a.resetBattlePassCircle=function(a,t,e,o,n){void 0===e&&(e="1,2,3"),void 0===o&&(o=30),this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/leaderBoradRankCircle",{gameId:a,userId:t,phbId:e,phbDay:o},function(a,t){if(!a)return t.code?(g.default.err(t.code),void(n&&n(-1,"0"))):void n(t.data.phbDay,t.data.phbId);n&&n(-1,"0")})},a.loadFromRemote=function(t,e){a.isConfRemote?e(null):(g.default.log("\u52a0\u8f7d\u8fdc\u7a0b\u5b58\u6863\u5f00\u59cb....",t,a.instance().getChannel().gameName+a.instance().channel),this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/userSave/getUserData",{game_id:a.instance().getChannel().gameName+a.instance().channel,user_id:t},function(a,t){return a?(g.default.err(a),void e(a)):0===t.code&&t.data?(delete t.data.user_id,delete t.data.game_id,delete t.data._id,g.default.log("\u8fdc\u7a0b\u5b58\u6863\u52a0\u8f7d\u5b8c\u6210"),void e(null,t.data.saveData)):void e(null)}))},a.saveToRemote=function(t,e,o,i){void 0===o&&(o=!1),a.isConfRemote||this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/userSave/saveUserData",{game_id:a.instance().getChannel().gameName+a.instance().channel,user_id:t,saveData:e},function(a,t){a?g.default.err(a):(g.default.log("saveToRemote\u5b8c\u6210:"+JSON.stringify(t)),o&&n.pzaTipManager.showHomeTip("\u6570\u636e\u4e0a\u4f20\u6210\u529f",null,3),i&&i())})},a.picShareTo=function(a,t){var e={game:a,query:"aaa",v:"1.2.0",s:"s",wxPicId:t};this.instance().getChannel().jpost("https://ga.gamejym.com/htApi/ht_api/shareTo",e,function(a){a&&g.default.err(a)})},a.picShareFrom=function(a,t){var e={game:a,query:"aaa",v:"1.2.0",s:"s",wxPicId:t};this.instance().getChannel().jpost("https://ga.gamejym.com/htApi/ht_api/shareFrom",e,function(a){a&&g.default.err(a)})},a.getRemoteTime=function(a){g.default.jpost("https://ga.gamejym.com/fcm/gameApi/serverTime",{},function(t,e){t?console.log("serverTime: ",t):(g.default.log("get serverTime",e),e.ts&&(g.default.setServerTimeToLocal(e.ts),a&&a()))})},a.jumpGame=function(t,e){var o=a.instance().getPara("appId");a.instance().getChannel().channelObj.navigateToMiniProgram({appId:t,success:function(){g.default.jpost("https://ga.gamejym.com/fcm/cps/jumpTo",{appId:o,cid:t,openId:e})},fail:function(){console.error("\u8df3\u8f6c\u5931\u8d25")},complete:function(){console.error("\u8df3\u8f6c\u7ed3\u675f")}})},a.jumpGame2=function(t,e){var o=a.instance().getPara("appId");a.instance().getChannel().channelObj.navigateToMiniProgram({appId:t,path:"?twtraceid=pvzyb",success:function(){g.default.jpost("https://ga.gamejym.com/fcm/cps/jumpTo",{appId:o,cid:t,openId:e})},fail:function(){console.error("\u8df3\u8f6c\u5931\u8d25")},complete:function(){console.error("\u8df3\u8f6c\u7ed3\u675f")}})},a.prototype.getPara=function(a){return this.getChannel().getPara(a)},a.prototype.getChannel=function(){return this.channelMap.get(this.channel)},a.prototype.getRuanZhu=function(){return this.getChannel().getRuanZhu()},a.prototype.exit=function(){this.getChannel().exit()},a.prototype.getSysInfo=function(){return this.getChannel().getSysInfo()},a.prototype.hasPrivacy=function(){return this.getChannel().hasPrivacy()},a.prototype.privacyReject=function(){return this.getChannel().privacyReject()},a.prototype.privacyAgree=function(){return this.getChannel().privacyAgree()},a.prototype.privacyNextPage=function(a){return this.getChannel().privacyNextPage(a)},a.prototype.privacyPrePage=function(a){return this.getChannel().privacyPrePage(a)},a.prototype.privacyPage1=function(a){return this.getChannel().privacyPage1(a)},a.prototype.getCtrl=function(a){return this.getChannel().getCtrl(a)},a.prototype.getPrivacyShort=function(){return this.getChannel().getPrivacyShort()},a.prototype.getPrivacy=function(){return this.getChannel().getPrivacy()},a.prototype.init=function(a){this.getChannel().init(a)},a.prototype.canShare=function(){return this.getChannel().canShare()},a.prototype.shareAppMessage=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.getChannel().shareAppMessage(a,t,e)},a.prototype.copyToClip=function(a,t){this.getChannel().copyToClip(a,t)},a.prototype.showVideo=function(a){if(o.pzaLocalData.data.adTicket>0)return o.pzaLocalData.data.adTicket--,o.pzaLocalData.addDirty("adTicket"),v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.UPDATE_ADTICKET,null),a.sucCall&&a.sucCall(),a.endCall&&a.endCall(),cc.game.resume(),void b.pzaSoundManager.resumeMusic();i.pzaCommonMask.showMask(!0,!0),this.getChannel().showVideo(a)},a.prototype.addGird9Icon=function(a,t){this.getChannel().addGird9Icon(a,t)},a.prototype.gird9IconClick=function(){this.getChannel().gird9IconClick()},a.prototype.showGird9=function(){this.getChannel().showGird9()},a.prototype.canAutoGird9=function(){return this.getChannel().canAutoGird9()},a.prototype.closeGird9=function(){this.getChannel().closeGird9()},a.prototype.showBanner=function(a,t,e){void 0===a&&(a=!1),void 0===t&&(t=null),void 0===e&&(e=null),this.getChannel().showBanner(a,t,e)},a.prototype.closeBanner=function(){this.getChannel().closeBanner()},a.prototype.showBannerByTime=function(a){void 0===a&&(a=!1),this.getChannel().showBannerByTime(a)},a.prototype.closeBannerByTime=function(){this.getChannel().closeBannerByTime()},a.prototype.checkNativeInsert=function(a){return this.getChannel().checkNativeInsert(a)},a.prototype.showNative=function(a,t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=null),this.getChannel().showNative(a,t,e,o,n)},a.prototype.loadAndShowNative=function(a,t,e){this.getChannel().loadAndShowNative(a,t,e)},a.prototype.loadNative=function(a,t){this.getChannel().loadNative(a,t)},a.prototype.findAndReport=function(){this.getChannel().findAndReport()},a.prototype.reportAdShow=function(a,t){this.getChannel().reportAdShow(a,t)},a.prototype.reportAdClick=function(a){this.getChannel().reportAdClick(a)},a.prototype.closeNative=function(a){this.getChannel().closeNative(a)},a.prototype.getNativeData=function(a){this.getChannel().getNativeData(a)},a.prototype.showCustomAd=function(a,t,e){void 0===t&&(t=!1),void 0===e&&(e=null),this.getChannel().showCustomAd(a,t,e)},a.prototype.closeCustomAd=function(a){void 0===a&&(a=!1),this.getChannel().closeCustomAd(a)},a.prototype.showInter=function(a){void 0===a&&(a=!1),this.getChannel().showInter(a)},a.prototype.closeInter=function(){this.getChannel().closeInter()},a.prototype.showDesktop=function(a,t){this.getChannel().showDesktop(a,t)},a.prototype.checkShortcut=function(a){this.getChannel().checkShortcut(a)},a.prototype.addShortcut=function(a){this.getChannel().addShortcut(a)},a.prototype.recorderStart=function(){this.getChannel().recorderStart()},a.prototype.recorderStop=function(){this.getChannel().recorderStop()},a.prototype.getRecordTime=function(){return this.getChannel().getRecordTime()},a.prototype.shareVideo=function(a){void 0===a&&(a=null),this.getChannel().shareVideo(a)},a.prototype.jumpTo=function(a,t,e,o){void 0===t&&(t=function(){}),void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),this.getChannel().jumpTo(a,t,e,o)},a.prototype.canMoreGame=function(){return this.getChannel().canMoreGame()},a.prototype.showMoreGameBox=function(a,t,e){this.getChannel().showMoreGameBox(a,t,e)},a.prototype.showComm=function(){"ios"===this.getChannel().channel&&this.getChannel().showComm()},a.onLoadShowPrivacy=function(t,e){a.instance().hasPrivacy()||!a.isConfRemote&&"noAD"!=a.instance().channel&&"oppo"!=a.instance().channel&&"vivo"!=a.instance().channel&&"hw"!=a.instance().channel&&"qq"!=a.instance().channel&&"mi"!=a.instance().channel?e&&e():a.instance().getChannel().showPrivacy(t,e)},a.prototype.showIconAd=function(a,t,e){this.getChannel().showIconAd(a,t,e)},a.prototype.hideIconAd=function(){this.getChannel().hideIconAd()},a.checkArea=function(t){a.isConfRemote||"noAD"==a.instance().channel||"mg"==a.instance().channel?t&&t(!0):(g.default.log("current Channel",this.instance().channel),this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/checkArea",{ch:this.instance().channel},function(a,e){a?t(!1):(g.default.log("checkArea",e),0==e.code?t(!0):t(!1))}))},a.prototype.isShowSideView=function(a){this.getChannel().isShowSideView(a)},a.cfmChannelAppId=function(t){return a.instance().getChannel().getPara("appId")==t},a.channelAppId={},a.version="1.0.30",a.verMap={maskRider:{key:"TYNOaXvipIvkhDyS",id:"67db7dc8871bed36f2025229"},debug:{key:"ihiKqvgY3kNFwou4",id:"65dbfb5a05db8b4be9b19b21"},majia:{key:"q4L9Px8KjHqwvFWN",id:"66d6cc1c4d0cc96950177eb4"}},a.isConfRemote=!0,a.remoteVerKey="maskRider",a.adDayMax=5,a}();e.pzaChannel=E,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../View/pzaCommonMask":"pzaCommonMask","./pzaChannelBiLi":"pzaChannelBiLi","./pzaChannelHw":"pzaChannelHw","./pzaChannelIOS":"pzaChannelIOS","./pzaChannelKs":"pzaChannelKs","./pzaChannelMg":"pzaChannelMg","./pzaChannelMi":"pzaChannelMi","./pzaChannelMy":"pzaChannelMy","./pzaChannelMy1":"pzaChannelMy1","./pzaChannelNoAD":"pzaChannelNoAD","./pzaChannelOppo":"pzaChannelOppo","./pzaChannelQQ":"pzaChannelQQ","./pzaChannelRY":"pzaChannelRY","./pzaChannelTT":"pzaChannelTT","./pzaChannelTap":"pzaChannelTap","./pzaChannelVivo":"pzaChannelVivo","./pzaChannelWeb":"pzaChannelWeb","./pzaChannelWx":"pzaChannelWx","./pzakc":"pzakc"}],pzaChapterConfig:[function(a,t,e){"use strict";cc._RF.push(t,"3e462gHxl9CDojzK6SoDnHG","pzaChapterConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChapterConfig=void 0;var o=function(){function a(a,t,e){this.chapter=1,this.chapterName=null,this.partCount=0,this.chapter=a,this.chapterName=t,this.partCount=e}return a.chapterConfigMap=new Map([[1,new a(1,"\u50f5\u5c38\u6765\u88ad",10)],[2,new a(2,"\u9ed1\u5e55\u964d\u4e34",10)],[3,new a(3,"\u540e\u9662\u544a\u6025",10)],[4,new a(4,"\u8ff7\u96fe\u91cd\u91cd",10)],[5,new a(5,"\u5c4b\u9876\u51b3\u6218",10)]]),a}();e.pzaChapterConfig=o,cc._RF.pop()},{}],pzaCherryBomb:[function(a,t,e){"use strict";cc._RF.push(t,"f74c6b9TIpBYZF6od1SUQB5","pzaCherryBomb");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCherryBomb=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../../Load/pzaPreLoadManager"),s=a("../Data/pzaBuffData"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.playNormalAni=function(){var a=this;this.animation.playAnimation("attack",!1,function(){},function(){r.pzaSoundManager.playAudio("cherrybomb",1),null!==a.baseData&&null!=a.baseData.plantData&&a.baseData.plantData.adClearPlant?a.adBoom():a.attack()})},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),r.pzaSoundManager.playAudio("JalapenoReady",1),this.preventBreak(),this.playNormalAni(),u.pzaGameState.onlyShroomCofee=!1},t.prototype.getBulletAtk=function(){return this.baseData.atk},t.prototype.attack=function(){var a=this;window.pzaMapManager.shakeMap(),this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),this.death();var t=1.5*u.pzaGameState.map.getBlockWidth(),e=window.pzazombieManager.findZombiesByXY(this.baseData.xIndex,this.baseData.yIndex);null==e&&(e=[]),this.baseData.xIndex>=7&&null!=window.pzazombieManager.drZomBoss&&e.push(window.pzazombieManager.drZomBoss),e.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||(t&&t.hurt(a.getBulletAtk(),a.baseData,d.pzaAttackType.BOOM),t.baseData.isDead)}),window.pzaMapManager.LadderMap.forEach(function(e,o){p.pzaUtil.getDistance(a.baseData.logicPos,e.logicPos)>t||(e.close(),window.pzaMapManager.LadderMap.delete(o))})},t.prototype.adBoom=function(){var a=this;window.pzaMapManager.shakeMap(),c.pzaEffectManager.createFrameEffect(l.pzaResourceUrl.CHERRY_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),null),this.death(),window.pzazombieManager.zombieMap.forEach(function(t,e){if(null!=e&&!e.isDead)if(e.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)){if(t.baseData.zombieData.hypnosis)return;t&&t.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.DEATH)}else t&&t.hurt(u.pzaGameState.adCherryBoomDmg,a.baseData,d.pzaAttackType.BOOM)}),window.pzaMapManager.LadderMap.forEach(function(a,t){a.close(),window.pzaMapManager.LadderMap.delete(t)})},t.prototype.flaserDeath=function(){var a=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},i([f],t)}(h.pzaBasePlant));e.pzaCherryBomb=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaCherryJalapeno:[function(a,t,e){"use strict";cc._RF.push(t,"e4a9ed3tdtP5Zon3JYFIJn7","pzaCherryJalapeno");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCherryJalapeno=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaJalapeno"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.playBoomAni=function(){var a=this;this.animation.playAnimation("attack",!1,function(){if(a.isHideEff)return window.pzaplantManager.removePlant(a.baseData),void a.death();r.pzaSoundManager.playAudio("JalapenoBoom",.1),a.body.node.getComponent(cc.BoxCollider).enabled=!0,a.baseData.isDead=!1,a.attack()})},t.prototype.attack=function(){var a=this;window.pzaplantManager.removePlant(this.baseData),this.death();var t=window.pzaMapManager,e=this.baseData.yIndex,o=u.pzaGameState.map.getMapRow();t.shakeMap();var n;n=0===e?[0,1]:e===o-1?[e,e-1]:[e-1,e,e+1];for(var i=0;i<n.length;i++){for(var r=n[i],h=u.pzaGameState.map.getBlockLogicPos(0,r,0,0),m=0;m<12;m++){var f=h.clone();f.x+=100*m,u.pzaGameState.map.fixMapYOffset(r,f,0);var z=.1*m+.5;m>=5&&(z=.05*m+.5),c.pzaEffectManager.createBoomFireEffect(r,z,f,null)}t.removeRowIceGround(r);for(var y=0;y<=8;y++)t.removeLadder(y,r);var g=window.pzazombieManager.zombieDatas[r],b=Array.from(g);null!=window.pzazombieManager.drZomBoss&&b.push(window.pzazombieManager.drZomBoss.baseData),b.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==s.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(l.pzaBuffType.FROST),t.buffData.removeBuff(l.pzaBuffType.FROZEN))}})}p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.JALAPENO_BOOM,this.baseData)},i([f],t)}(h.pzaJalapeno));e.pzaCherryJalapeno=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaJalapeno":"pzaJalapeno"}],pzaChomper:[function(a,t,e){"use strict";cc._RF.push(t,"a41fdxYsaxBIZPWmsxhOAdl","pzaChomper");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChomper=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.eating=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.eating=!1,c.pzaGameState.isZombieMode()?this.animation.playAnimation(t.plantData.eatTime>0?"T_idle2":"T_idle1",!0):this.animation.playAnimation(t.plantData.eatTime>0?"idle2":"idle1",!0),c.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead){if(this.baseData.plantData.eatTime>0)return this.baseData.plantData.eatTime-=t,void(this.baseData.plantData.eatTime<=0&&(this.eating=!0,this.animation.playAnimation(c.pzaGameState.isZombieMode()?"T_eat":"eat",!1,function(){e.eating=!1,e.animation.playAnimation(c.pzaGameState.isZombieMode()?"T_idle1":"idle1",!0)})));if(!this.eating){var o=this.findAttackTarget();null!=o&&this.attack(o)}}},t.prototype.findAttackTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1;if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.DIVE))&&(o.zombieData.zombieType!=s.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(l.pzaBuffType.FROZEN)||o.zombieData.toolType==s.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType!=s.pzaZombieEnum.BUNGEE_ZOMBIE||o.xIndex!=a.baseData.xIndex)){var n=p.pzaUtil.getDistance(o.logicPos,a.baseData.logicPos);if(o.logicPos.x<=a.baseData.logicPos.x)n<=.5*c.pzaGameState.map.getBlockWidth()&&(t=o,e=0);else if(!(n>1.8*c.pzaGameState.map.getBlockWidth()))return-1==e?(t=o,void(e=n)):void(e<=n||(t=o,e=n))}}),null==t){var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t}},t.prototype.attack=function(a){var t=this;this.baseData.plantData.eatTime=40,this.animation.playAnimation(c.pzaGameState.isZombieMode()?"T_attack":"attack",!1,function(){c.pzaGameState.isZombieMode()?t.animation.playAnimation(t.baseData.plantData.eatTime>0?"T_idle2":"T_idle1",!0):t.animation.playAnimation(t.baseData.plantData.eatTime>0?"idle2":"idle1",!0)},function(){if(null!=t.baseData&&!t.baseData.isDead){var e=window.pzazombieManager.getZombie(a);null==e||null==e.baseData||e.baseData.isDead?t.baseData.plantData.eatTime=0:(e.hurt(t.baseData.atk,t.baseData,u.pzaAttackType.EAT),null==a.zombieData||a.zombieData.cate!==s.pzaZombieCate.Gargantuar&&a.zombieData.zombieType!=s.pzaZombieEnum.DR_ZOMBOSS?(r.pzaSoundManager.playAudio("ChomperAtk"),a.isDead||(t.baseData.plantData.eatTime=0)):t.baseData.plantData.eatTime=0)}})},i([m],t)}(d.pzaBasePlant));e.pzaChomper=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaCleanCar:[function(a,t,e){"use strict";cc._RF.push(t,"5a52ePJqmdPd7fMu7FAbLQM","pzaCleanCar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCleanCar=void 0;var r=a("../Achieve/pzaAchieve"),p=a("../Achieve/pzaAchieveMgr"),l=a("../Common/pzaBaseComponent"),s=a("../Common/pzaCollisionManager"),c=a("../Common/pzaGroupEnum"),u=a("../Common/pzaNodeManager"),d=a("../Common/pzaSoundManager"),h=a("../Common/pzaSpineController"),m=a("../Common/pzaTipManager"),f=a("../Common/pzaWorldEventManager"),z=a("../Load/pzaBundleObjectPool"),y=a("../Load/pzaPreLoadManager"),g=a("./Data/pzaBaseData"),b=a("./Data/pzaZombieEnum"),v=a("./Effect/pzaDrZomBall"),P=a("./Effect/pzaPortalDoor"),D=a("./Effect/pzaShadowEffect"),S=a("./Plant/pzaAttackType"),C=a("./Zombie/pzaZombieBody"),_=a("./pzaEffectManager"),E=a("./pzaGameState"),M=cc._decorator,w=M.ccclass,T=M.property,B=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lawnCar=null,t.poolCar=null,t.roofCar=null,t.hasTrigger=!1,t.carType=1,t.inWater=!1,t.yIndex=0,t.killCount=0,t.isDead=!1,t.shadow=null,t.collider=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),f.pzaWorldEventManager.addListener(f.pzaWorldEventType.CLEAR_SCREEN,this.clearScreen,this),f.pzaWorldEventManager.addListener(f.pzaWorldEventType.CLEAR_CLEANCAR,this.clearCar,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),f.pzaWorldEventManager.removeListener(f.pzaWorldEventType.CLEAR_SCREEN,this.clearScreen,this),f.pzaWorldEventManager.removeListener(f.pzaWorldEventType.CLEAR_CLEANCAR,this.clearCar,this)},t.prototype.clearCar=function(a){this.yIndex==a&&this.close()},t.prototype.init=function(a,t){var e=this;this.lawnCar.active=1==a,this.poolCar.node.active=2==a,this.roofCar.node.active=3==a,this.carType=a,this.yIndex=t,this.hasTrigger=!1,this.inWater=!1,this.isDead=!1,this.killCount=0,2==a?(this.poolCar.playAnimation("idle1",!1),this.poolCar.pauseAnimation()):3==a&&(this.roofCar.node.scale=1,this.roofCar.playAnimation("idle",!1),this.roofCar.pauseAnimation());var o=E.pzaGameState.map.getMapOriPos();if(null!=o){var n=cc.v2(o.x-26,o.y+E.pzaGameState.map.getYPos(t)+55);this.node.stopAllActions(),this.node.setPosition(n.add(cc.v2(-100,0))),this.node.runAction(cc.sequence(cc.moveTo(.05+.02*t,n),cc.callFunc(function(){e.createShadow()})));var i=10*-t+1;this.node.zIndex=i,this.baseData=new g.pzaBaseData(null,null),this.baseData.logicPos=n,this.baseData.hp=1,s.pzaCollisionManager.getInstance.addPlantByRow(this.yIndex,this)}},t.prototype.recover=function(a,t){this.lawnCar.active=1==a,this.poolCar.node.active=2==a,this.roofCar.node.active=3==a,this.carType=a,this.yIndex=t,this.hasTrigger=!1,this.inWater=!1,this.isDead=!1,this.killCount=0,2==a?(this.poolCar.playAnimation("idle1",!1),this.poolCar.pauseAnimation()):3==a&&(this.roofCar.node.scale=1,this.roofCar.playAnimation("idle",!1),this.roofCar.pauseAnimation());var e=E.pzaGameState.map.getMapOriPos();if(null!=e){var o=cc.v2(e.x-26,e.y+E.pzaGameState.map.getYPos(t)+55);this.node.stopAllActions(),this.node.setPosition(o);var n=10*-t+1;this.node.zIndex=n,this.baseData=new g.pzaBaseData(null,null),this.baseData.logicPos=o,this.baseData.hp=1,this.createShadow(),s.pzaCollisionManager.getInstance.addPlantByRow(this.yIndex,this)}},t.prototype.logicUpdate=function(a){if(this.hasTrigger&&!this.isDead){var t=this.node.x;t+=450*a;var e=cc.v2(t,this.node.y);if(E.pzaGameState.map.fixMapYOffset(this.yIndex,e,55),this.baseData.logicPos=e,this.node.setPosition(e),2!=this.carType&&window.pzaMapManager.isInWaterWay(this.yIndex)&&(o=E.pzaGameState.map.getMapOriPos())&&t>=o.x+10)return _.pzaEffectManager.createWaterFlowerEffect(this.yIndex,cc.v2(this.node.x,this.node.y-30),null,1),void this.close();if(2==this.carType){var o=E.pzaGameState.map.getMapOriPos(),n=E.pzaGameState.map.getMapWidth();if(!this.inWater&&t>o.x+10&&t<o.x+n)return this.inWater=!0,this.poolCar.playAnimation("idle2",!0),_.pzaEffectManager.createWaterFlowerEffect(this.yIndex,cc.v2(this.node.x+this.poolCar.node.x,this.node.y+this.poolCar.node.y),null,1),void this.shadow.hideShadow();if(this.inWater&&t>=o.x+n)return this.inWater=!1,this.poolCar.playAnimation("idle1",!0),_.pzaEffectManager.createWaterFlowerEffect(this.yIndex,cc.v2(this.node.x+this.poolCar.node.x,this.node.y+this.poolCar.node.y),null,1),void this.shadow.showShadow()}t>=640&&this.close()}},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.onCollision=function(a){var t=this;if(null!=a&&!this.isDead){if(a.node.group==c.pzaGroupEnum.ZOMBIE){var e=a.node.getComponent(C.pzaZombieBody);this.colliderZombie(e&&e.baseData)}if(a.node.group==c.pzaGroupEnum.ZOMBIE_BULLET&&1==a.tag){var o=a.node.getComponent(v.pzaDrZomBall);if(null==o||o.yIndex!=this.yIndex)return;this.isDead=!0,this.roofCar.node.stopAllActions(),this.roofCar.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){t.close()})))}if(a.node.group==c.pzaGroupEnum.PORTALDOOR){var n=a.node.parent.getComponent(P.pzaPortalDoor);n&&n.yIndex==this.yIndex&&n.node.x<n.targetPortalDoor.node.x&&(this.node.x=n.targetPortalDoor.node.x)}}},t.prototype.colliderZombie=function(a){var t=this;if(null!=a&&!a.isDead&&a.yIndex==this.yIndex&&a.zombieData.zombieType!=b.pzaZombieEnum.DR_ZOMBOSS){if(this.hasTrigger)2==this.carType&&this.inWater&&this.poolCar.playAnimation("suck2",!1,function(){t.poolCar.playAnimation("idle2",!0)},null,2);else{if(null!=a.zombieData&&a.zombieData.direction>0)return;this.hasTrigger=!0;var e=10*-this.yIndex+6;this.node.zIndex=e,E.pzaGameState.partStar>0&&!E.pzaGameState.lossCar&&(E.pzaGameState.lossCar=!0,E.pzaGameState.partStar--,m.pzaTipManager.showLossStarTip(!0,!1)),1==this.carType&&(_.pzaEffectManager.createSmokeEffect("blow2",cc.v2(this.node.x-54,this.node.y+16)),d.pzaSoundManager.playAudio("CleanCar")),2==this.carType?(this.poolCar.playAnimation("idle1",!0),d.pzaSoundManager.playAudio("pool_cleancar")):3==this.carType&&(this.roofCar.playAnimation("idle",!0),d.pzaSoundManager.playAudio("CleanCar"))}var o=window.pzazombieManager.getZombie(a);o&&o.hurt(1800,null,S.pzaAttackType.CLEAN_CAR),this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_17,this.killCount)}},t.prototype.createShadow=function(){var a=this,t=u.pzaNodeManager.getDownEffectNode();z.pzaBundleObjectPool.requestInstantByUrl2(y.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(t);var n=o.getComponent(D.pzaShadowEffect);1==a.carType?n&&n.init(a.baseData,cc.v2(10,-20)):2==a.carType?n&&n.init(a.baseData,cc.v2(0,-35)):n&&n.init(a.baseData,cc.v2(0,-30)),a.shadow=n}else console.error(e)})},t.prototype.pauseSelf=function(){this.hasTrigger&&(this.poolCar.pauseAnimation(),this.roofCar.pauseAnimation())},t.prototype.resumeSelf=function(){this.hasTrigger&&(this.poolCar.resumeAnimation(),this.roofCar.resumeAnimation())},t.prototype.clearScreen=function(){this.hasTrigger&&this.close()},t.prototype.close=function(){s.pzaCollisionManager.getInstance.delPlantByRow(this.yIndex,this),a.prototype.close.call(this),this.baseData.isDead=!0,window.pzaMapManager.CleanCar.delete(this)},i([T({displayName:"\u8349\u5730\u63a8\u8f66",type:cc.Node})],t.prototype,"lawnCar",void 0),i([T({displayName:"\u6c34\u6c60\u63a8\u8f66",type:h.pzaSpineController})],t.prototype,"poolCar",void 0),i([T({displayName:"\u5c4b\u9876\u63a8\u8f66",type:h.pzaSpineController})],t.prototype,"roofCar",void 0),i([w],t)}(l.pzaBaseComponent);e.pzaCleanCar=B,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaCollisionManager":"pzaCollisionManager","../Common/pzaGroupEnum":"pzaGroupEnum","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaTipManager":"pzaTipManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./Data/pzaBaseData":"pzaBaseData","./Data/pzaZombieEnum":"pzaZombieEnum","./Effect/pzaDrZomBall":"pzaDrZomBall","./Effect/pzaPortalDoor":"pzaPortalDoor","./Effect/pzaShadowEffect":"pzaShadowEffect","./Plant/pzaAttackType":"pzaAttackType","./Zombie/pzaZombieBody":"pzaZombieBody","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState"}],pzaClickShowTimer:[function(a,t,e){"use strict";cc._RF.push(t,"f52ef64wOVN6a3TEGtq6X+Z","pzaClickShowTimer");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaClickShowTimer=void 0;var r=a("../utils/pzaChannel"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.time=0,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickScreen,this),this.node._touchListener.setSwallowTouches(!1)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickScreen,this)},t.prototype.update=function(a){"wx"!=r.pzaChannel.instance().channel&&(this.time+=a,this.time>=r.pzaChannel.instance().getCtrl("p16")&&0!=r.pzaChannel.instance().getCtrl("p16")&&(console.log("\u4e3b\u52a8\u5f39\u8d77=="),this.time=0,r.pzaChannel.instance().showInter()))},t.prototype.clickScreen=function(){this.time=0},i([l],t)}(cc.Component));e.pzaClickShowTimer=s,cc._RF.pop()},{"../utils/pzaChannel":"pzaChannel"}],pzaCobBullet:[function(a,t,e){"use strict";cc._RF.push(t,"1a3dcDmX6BMdJpCLB7fJQn3","pzaCobBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCobBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Plant/pzaAttackType"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.targetPos=null,t.targetXIndex=-1,t.logicPos=null,t.moveSpeed=800,t.atk=0,t.up=!0,t}return n(t,a),t.prototype.init=function(a,t,e,o){this.atk=a,this.logicPos=t,this.targetPos=e,this.targetXIndex=o,this.node.scaleY=1,this.up=!0},t.prototype.logicUpdate=function(a){this.logicPos.y+=a*this.moveSpeed*(this.up?1:-1),this.node.setPosition(this.logicPos),this.up?this.logicPos.y>=560&&(this.logicPos.x=this.targetPos.x,this.up=!1,this.node.scaleY=-1):this.logicPos.y<=this.targetPos.y&&this.boom()},t.prototype.boom=function(){var a=this;this.close(),p.pzaSoundManager.playAudio("cobBoom"),c.pzaEffectManager.createCobBoomEffect(this.targetPos),c.pzaEffectManager.createCobBoomHoleEffect(this.targetPos);var t=2*u.pzaGameState.map.getBlockWidth(),e=window.pzazombieManager.findFixRangeZombies(this.targetPos,t);null==e&&(e=[]),this.targetXIndex>=7&&null!=window.pzazombieManager.drZomBoss&&e.push(window.pzazombieManager.drZomBoss),e.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||t&&t.hurt(a.atk,null,s.pzaAttackType.BOOM)})},i([h],t)}(r.pzaBaseComponent));e.pzaCobBullet=m,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaCobCannon:[function(a,t,e){"use strict";cc._RF.push(t,"c43cb9C3IdBn4h1XVq6oIBG","pzaCobCannon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCobCannon=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../../Common/pzaWorldEventManager"),u=a("../Bullet/pzaCobBullet"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cobPrefab=null,t.blinkTime=3,t.loadTime=6.25,t.cobFinishIdle=null,t.cobFinishIdle_eye=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.loadTime=6.25,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),d.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.loadTime-=t,d.pzaGameState.cobCannon&&d.pzaGameState.cobCannon.xIndex==this.baseData.xIndex&&d.pzaGameState.cobCannon.yIndex==this.baseData.yIndex?(this.cobFinishIdle="idle2",this.cobFinishIdle_eye="idle2_eye"):(this.cobFinishIdle="idle3",this.cobFinishIdle_eye="idle3_eye")},t.prototype.playNormalAni=function(){var a=this,t=function(){if(!a.baseData.plantData.cobLoadFinish&&a.loadTime<=0)return l.pzaSoundManager.playAudio("shoop"),void a.animation.playAnimation("out",!1,function(){a.baseData.plantData.cobLoadFinish=!0,t()});a.blinkTime>0?a.animation.playAnimation(a.baseData.plantData.cobLoadFinish?a.cobFinishIdle:"idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation(a.baseData.plantData.cobLoadFinish?a.cobFinishIdle_eye:"idle1_eye",!1,t))};this.animation.playAnimation(this.baseData.plantData.cobLoadFinish?this.cobFinishIdle:"idle1",!1,t)},t.prototype.shoot=function(a,t){var e=this;this.baseData.plantData.cobLoadFinish&&(this.baseData.plantData.cobLoadFinish=!1,this.loadTime=36,d.pzaGameState.cobCannon=null,this.animation.playAnimation("attack",!1,this.playNormalAni.bind(this),function(){l.pzaSoundManager.playAudio("coblaunch");var o=cc.v2(e.baseData.logicPos.x+5,e.baseData.logicPos.y+400),n=p.pzaNodeManager.getUpEffectNode(),i=r.pzaGameCommonPool.requestInstant(e.cobPrefab,!1);if(null!=n&&null!=i){i.setParent(n),i.setPosition(o);var s=i.getComponent(u.pzaCobBullet);s&&s.init(e.baseData.atk,o,a,t)}}))},t.prototype.launchCob=function(a){null!=a.data&&a.data==this.baseData&&this.shoot(a.pos,a.xIndex)},t.prototype.close=function(){a.prototype.close.call(this),this.baseData==d.pzaGameState.cobCannon&&(d.pzaGameState.cobCannon=null)},i([z({displayName:"\u7389\u7c73\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cobPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaCobCannon=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaCobBullet":"pzaCobBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaCobHoleEffect:[function(a,t,e){"use strict";cc._RF.push(t,"7cbbcdIxOBLtofgWQTsMO3q","pzaCobHoleEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCobHoleEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onEnable=function(){var t=this;a.prototype.onEnable.call(this),this.node.stopAllActions(),this.node.opacity=255,this.node.runAction(cc.sequence(cc.delayTime(1),cc.fadeOut(.5),cc.callFunc(function(){t.close()})))},t.prototype.pauseSelf=function(){this.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.node.resumeAllActions()},i([l],t)}(r.pzaBaseComponent));e.pzaCobHoleEffect=s,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent"}],pzaCoffeeBean:[function(a,t,e){"use strict";cc._RF.push(t,"9a409nTfSpAAr41TDJZfv8e","pzaCoffeeBean");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCoffeeBean=void 0;var r=a("../../Common/pzaSoundManager"),p=a("./pzaBasePlant"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.wakeTime=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.wakeTime=0,this.animation.playAnimation("idle",!0)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.awakePlant(t)},t.prototype.awakePlant=function(a){if(!(null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.wakeTime+=a,this.wakeTime<1))){var t=""+this.baseData.xIndex+this.baseData.yIndex,e=window.pzaplantManager.plantDataMap.get(t);this.attack(e)}},t.prototype.attack=function(a){var t=this;r.pzaSoundManager.playAudio("CoffeeBean"),this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),this.animation.playAnimation("death",!1,function(){t.death()},null);var e=window.pzaplantManager.getPlantByData(a);null!=e&&(r.pzaSoundManager.playAudio("garden_wakeup"),e.wakeUp())},i([s],t)}(p.pzaBasePlant));e.pzaCoffeeBean=c,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","./pzaBasePlant":"pzaBasePlant"}],pzaCoffeeUmbrella:[function(a,t,e){"use strict";cc._RF.push(t,"c16619gLhVNrogtTJR5ehy7","pzaCoffeeUmbrella");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCoffeeUmbrella=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../../Common/pzaWorldEventManager"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaZombieEnum"),u=a("../pzaEffectManager"),d=a("./pzaCoffeeBean"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.attacking=!1,t.hasAwake=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.RICOCHET_BULLET,this.ricochetBullet,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.RICOCHET_ZOMBIE,this.ricochetZombie,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.RICOCHET_BULLET,this.ricochetBullet,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.RICOCHET_ZOMBIE,this.ricochetZombie,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.attacking=!1,this.playNormalAni(),this.bodyBindData=!0,this.hasAwake=!1,this.body.node.getComponent(cc.Collider).enabled=!1},t.prototype.playNormalAni=function(){var a=this;this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var t=function(){a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};this.animation.playAnimation("idle",!1,t)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.awakePlant(t)},t.prototype.awakePlant=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead&&!this.attacking){var t=!1;window.pzazombieManager.zombieMap.forEach(function(e,o){null==o||o.isDead||null==o.zombieData||o.zombieData.zombieType!=c.pzaZombieEnum.BUNGEE_ZOMBIE||o.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||o.xIndex>a.baseData.xIndex+1||o.xIndex<a.baseData.xIndex-1||o.yIndex>a.baseData.yIndex+1||o.yIndex<a.baseData.yIndex-1||(o.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.RICOCHET,-1)),t=!0)}),t&&(this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),this.animation.playAnimation("attack",!1,function(){a.attacking=!1,a.playNormalAni()}));var e=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaplantManager.plantDataMap.get(e);o||(o=window.pzaplantManager.plantEnvDataMap.get(e)),this.attack(o)}},t.prototype.attack=function(a){if(!this.hasAwake){var t=window.pzaplantManager.getPlantByData(a);null!=t&&(this.hasAwake=!0,r.pzaSoundManager.playAudio("garden_wakeup"),t.wakeUp())}},t.prototype.ricochetBullet=function(a,t){var e=this;if(a==this.baseData){this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),this.animation.playAnimation("attack",!1,function(){e.attacking=!1,e.playNormalAni()});var o=cc.v2(this.baseData.logicPos.x-80,this.baseData.logicPos.y+70);u.pzaEffectManager.createRicochetBulletEffect(o,t)}},t.prototype.ricochetZombie=function(a){var t=this;a==this.baseData&&(this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),this.animation.playAnimation("attack",!1,function(){t.attacking=!1,t.playNormalAni()}))},t.prototype.close=function(){a.prototype.close.call(this),this.baseData&&window.pzaplantManager.notTargetMap.delete(""+this.baseData.xIndex+this.baseData.yIndex)},i([m],t)}(d.pzaCoffeeBean));e.pzaCoffeeUmbrella=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaCoffeeBean":"pzaCoffeeBean"}],pzaCollisionManager:[function(a,t,e){"use strict";cc._RF.push(t,"f47c5wLAAZL35lEo7ZfwU94","pzaCollisionManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCollisionManager=void 0;var r=a("./pzaWorldEventManager"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.self=null,t.collisionMgr=null,t.bulletRowMap=new Map,t.zombieBulletRowMap=new Map,t.zombieBulletOtherMap=new Map,t.bulletOtherMap=new Map,t.plantRowMap=new Map,t.bulletPlantRowMap=new Map,t.zombieRowMap=new Map,t.zombieOtherMap=new Map,t.jarMap=new Map,t.brainMap=new Map,t.portalRowMap=new Map,t.colliedMap=new Map,t.removeColliedSet=new Set,t.isOn=!1,t.cTime=0,t}var e;return n(t,a),e=t,Object.defineProperty(t,"getInstance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.self=e.instance=this,this.collisionMgr=cc.director.getCollisionManager(),this.collisionMgr.enabled=!1,this.collisionMgr.enabledDebugDraw=!1;for(var a=-1;a<7;a++)this.bulletRowMap.set(a,new Map),this.zombieBulletRowMap.set(a,new Map),this.plantRowMap.set(a,new Map),this.bulletPlantRowMap.set(a,new Map),this.zombieRowMap.set(a,new Map),this.jarMap.set(a,new Map),this.portalRowMap.set(a,new Map);this.collisionMgr.addCollider=function(){},this.collisionMgr.removeCollider=function(){},r.pzaWorldEventManager.addListener(r.pzaWorldEventType.GAME_OVER,this.setOff,this)},t.prototype.zombieToPlant=function(a,t){this.zombieRowMap.get(a).delete(t.uuid),this.plantRowMap.get(a).set(t.uuid,t)},t.prototype.zombieChangeRow=function(a,t,e){this.zombieRowMap.get(t).delete(a.uuid),this.zombieRowMap.get(e).set(a.uuid,a)},t.prototype.addBulletByRow=function(a,t){a<0?this.bulletOtherMap.set(t.uuid,t):this.bulletRowMap.get(a).set(t.uuid,t)},t.prototype.addZombieBulletByRow=function(a,t){a<0?this.zombieBulletOtherMap.set(t.uuid,t):this.zombieBulletRowMap.get(a).set(t.uuid,t)},t.prototype.addPlantByRow=function(a,t){this.plantRowMap.get(a).set(t.uuid,t)},t.prototype.addBulletPlantByRow=function(a,t){this.bulletPlantRowMap.get(a).set(t.uuid,t)},t.prototype.addZombieByRow=function(a,t){a<0?this.zombieOtherMap.set(t.uuid,t):this.zombieRowMap.get(a).set(t.uuid,t)},t.prototype.addJarByRow=function(a,t){this.jarMap.get(a).set(t.uuid,t)},t.prototype.addBulletOther=function(a){this.bulletOtherMap.set(a.uuid,a)},t.prototype.addZombieOther=function(a){this.zombieOtherMap.set(a.uuid,a)},t.prototype.addBrain=function(a,t){this.brainMap.set(a,t)},t.prototype.addPortalByRow=function(a,t){this.portalRowMap.get(a).set(t.uuid,t)},t.prototype.delBrain=function(a){this.brainMap.delete(a)},t.prototype.delJarByRow=function(a,t){this.jarMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delBulletByRow=function(a,t){a<0?this.bulletOtherMap.delete(t.uuid):this.bulletRowMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delZombieBulletByRow=function(a,t){a<0?this.zombieBulletOtherMap.delete(t.uuid):this.zombieBulletRowMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delPlantByRow=function(a,t){this.plantRowMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delBulletPlantByRow=function(a,t){this.bulletPlantRowMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delZombieByRow=function(a,t){a<0?this.zombieOtherMap.delete(t.uuid):this.zombieRowMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delBulletOther=function(a){this.bulletOtherMap.delete(a.uuid),this.removeColliedSet.add(a.getCollider())},t.prototype.delZombieBulletOther=function(a){this.zombieBulletOtherMap.delete(a.uuid),this.removeColliedSet.add(a.getCollider())},t.prototype.delZombieOther=function(a){this.zombieOtherMap.delete(a.uuid),this.removeColliedSet.add(a.getCollider())},t.prototype.delPortalByRow=function(a,t){this.portalRowMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.getCollisionManager=function(){return this.self?this.self.collisionMgr:null},t.prototype.setOn=function(){this.isOn=!0},t.prototype.setOff=function(){this.isOn=!1;for(var a=-1;a<7;a++)this.bulletRowMap.get(a).clear(),this.zombieBulletRowMap.get(a).clear(),this.plantRowMap.get(a).clear(),this.bulletPlantRowMap.get(a).clear(),this.zombieRowMap.get(a).clear(),this.jarMap.get(a).clear(),this.portalRowMap.get(a).clear();this.zombieOtherMap.clear(),this.bulletOtherMap.clear(),this.zombieBulletOtherMap.clear(),this.brainMap.clear(),this.colliedMap.clear(),this.removeColliedSet.clear()},t.prototype.getRectFromCollider=function(a){var t=a.node,e=a.offset,o={x:0,y:0,width:0,height:0},n=a.radius,i=a.poSource;if(i?"function"==typeof i&&(i=i.call(a)):i=t.convertToWorldSpaceAR(cc.v2()),o.x=i.x+e.x,o.y=i.y+e.y,n)o.width=n,o.height=n;else{var r=a.size;o.width=r.width,o.height=r.height}return o},t.prototype.rectRect=function(a,t){var e=a.width/2,o=a.height/2,n=a.x-e,i=a.y-o,r=a.x+e,p=a.y+o,l=t.width/2,s=t.height/2,c=t.x-l,u=t.y-s,d=t.x+l,h=t.y+s;return n<=d&&r>=c&&i<=h&&p>=u},t.prototype.isCollision=function(a,t){return!!this.rectRect(this.getRectFromCollider(a),this.getRectFromCollider(t))},t.prototype.checkColli=function(a,t){var e=this;a.forEach(function(o,n){var i=o.getCollider();if(i){if(i.enabled)for(var r=function(a){var n=t[a];n.forEach(function(a,t){var r=a.getCollider();r?r.enabled&&e.isCollision(i,r)&&(e.colliedMap.has(o.uuid+a.uuid)?o.onCollisionStay&&o.onCollisionStay(r,i):o.onCollisionEnter(r,i),e.colliedMap.set(o.uuid+a.uuid,[e.cTime,o,a]),e.colliedMap.has(a.uuid+o.uuid)?a.onCollisionStay&&a.onCollisionStay(i,r):a.onCollisionEnter(i,r),e.colliedMap.set(a.uuid+o.uuid,[e.cTime,a,o])):n.delete(t)})},p=0;p<t.length;p++)r(p)}else a.delete(n)})},t.prototype.checkColliByOne=function(a,t){var e=this;if(a){var o=a.getCollider();if(o&&o.enabled)for(var n=0;n<t.length;n++)t[n].forEach(function(a){var t=a.getCollider();t&&t.enabled&&e.isCollision(o,t)&&a.onCollisionEnter(o,t)})}},t.prototype.checkCollision=function(){var a=this;this.cTime=Date.now();for(var t=0;t<7;t++){var e=this.bulletRowMap.get(t),o=this.zombieBulletRowMap.get(t),n=this.plantRowMap.get(t),i=this.bulletPlantRowMap.get(t),r=this.zombieRowMap.get(t),p=this.jarMap.get(t),l=this.portalRowMap.get(t);this.checkColli(e,[r,this.zombieOtherMap,i]),this.checkColli(o,[n]),this.checkColli(this.bulletOtherMap,[r,i]),this.checkColli(this.zombieBulletOtherMap,[n]),this.checkColli(p,[r]),this.checkColli(n,[r,this.zombieOtherMap]),this.checkColli(l,[r,e,o,n]),this.checkColliByOne(this.brainMap.get(t),[r,this.zombieOtherMap])}this.checkColli(this.bulletOtherMap,[this.zombieOtherMap]),this.colliedMap.forEach(function(t,e){if(t[0]!==a.cTime)a.colliedMap.delete(e),t[1].onCollisionExit&&t[1].onCollisionExit(t[2].getCollider(),t[1].getCollider());else{var o=t[1].getCollider(),n=t[2].getCollider();(a.removeColliedSet.has(o)||a.removeColliedSet.has(n))&&(a.colliedMap.delete(e),t[1].onCollisionExit&&t[1].onCollisionExit(t[2].getCollider(),t[1].getCollider()))}}),this.removeColliedSet.clear()},t.prototype.update=function(a){this.isOn&&!this.collisionMgr.enabled&&this.checkCollision(a)},t.instance=null,e=i([l],t)}(cc.Component));e.pzaCollisionManager=s,cc._RF.pop()},{"./pzaWorldEventManager":"pzaWorldEventManager"}],pzaCommonMask:[function(a,t,e){"use strict";cc._RF.push(t,"8acf6hM6spH95r2V4yFdaI6","pzaCommonMask");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCommonMask=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.maskNode=null,t.loadSprite=null,t.blackMaskNode=null,t.showLoad=!1,t.loadTime=0,t.loadMaxTime=0,t}var e;return n(t,a),e=t,t.prototype.onLoad=function(){this.maskNode.active=!1,this.showLoad=!1,e.instance=this},t.prototype.update=function(a){this.showLoad&&(this.loadMaxTime>0&&(this.loadMaxTime-=a,this.loadMaxTime<=0)?e.hideMask():(this.loadTime+=a,this.loadTime<=1||(this.loadSprite.active=!0,this.loadSprite.angle+=360*a)))},t.showMask=function(a,t){void 0===a&&(a=!1),void 0===t&&(t=!1);var o=e.instance;null!=o&&(o.showLoad=a,o.loadTime=0,o.loadSprite.active=!1,o.maskNode.active=!0,o.blackMaskNode.active=t,t&&(o.loadTime=.5,o.loadMaxTime=7))},t.hideMask=function(){var a=e.instance;null!=a&&(a.showLoad=!1,a.maskNode.active=!1,a.blackMaskNode.active=!1,a.loadMaxTime=-1)},t.instance=null,i([l({displayName:"\u901a\u7528\u906e\u7f69",type:cc.Node})],t.prototype,"maskNode",void 0),i([l({displayName:"\u52a0\u8f7d\u5706\u56fe",type:cc.Node})],t.prototype,"loadSprite",void 0),i([l({displayName:"\u9ed1\u8272\u906e\u7f69",type:cc.Node})],t.prototype,"blackMaskNode",void 0),e=i([p],t)}(cc.Component);e.pzaCommonMask=s,cc._RF.pop()},{}],pzaCommonRewardView:[function(a,t,e){"use strict";cc._RF.push(t,"7373fYx08ZDraBGpyJDiu8i","pzaCommonRewardView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCommonRewardView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../utils/pzaChannel"),l=a("./pzaRewardItem"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.items=[],t.title=null,t.tip=null,t.bg=null,t.closeCall=null,t}return n(t,a),t.prototype.bindData=function(a,t){this.bg.height=480,a.length>4&&(this.bg.height=580),a.length>8&&(this.bg.height=580),this.title.string="\u4f60\u5df2\u7ecf\u83b7\u5f97";for(var e=this.node.getChildByName("board").getChildByName("content"),o=0;o<e.childrenCount;o++){var n=e.children[o].getComponent(l.pzaRewardItem);if(null==n)return;var i=a[o];null==i?n.node.active=!1:(n.node.active=!0,n.init(i),i.trunToCoin&&(this.title.string="\u4e0d\u6ee1\u8db3\u83b7\u53d6\u6761\u4ef6,\u7b49\u4ef7\u8f6c\u5316\u4e3a\u91d1\u5e01"))}this.tip.string="",this.closeCall=t,this.showAd()},t.prototype.setTip=function(a){this.tip.string=a},t.prototype.clickClose=function(){this.close(),this.closeCall&&this.closeCall()},t.prototype.close=function(){p.pzaChannel.instance().closeBanner(),r.pzaGameCommonPool.returnInstant(this.node)},t.prototype.showAd=function(){p.pzaChannel.instance().showInter()},i([u({displayName:"\u5956\u52b1items",type:[l.pzaRewardItem]})],t.prototype,"items",void 0),i([u({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"title",void 0),i([u({displayName:"\u63d0\u793a",type:cc.Label})],t.prototype,"tip",void 0),i([u(cc.Node)],t.prototype,"bg",void 0),i([c],t)}(cc.Component);e.pzaCommonRewardView=d,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../utils/pzaChannel":"pzaChannel","./pzaRewardItem":"pzaRewardItem"}],pzaConeHeadZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"6d684KM7ohDqpJMHZHPzQTg","pzaConeHeadZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaConeHeadZombie2=void 0;var r=a("./pzaConeHeadZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hatType=p.pzaZombieSlotType.hat_green,t}return n(t,a),i([s],t)}(r.pzaConeHeadZombie));e.pzaConeHeadZombie2=c,cc._RF.pop()},{"./pzaConeHeadZombie":"pzaConeHeadZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaConeHeadZombie3:[function(a,t,e){"use strict";cc._RF.push(t,"58c7dqjF3VFV7no5xztvyX6","pzaConeHeadZombie3");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaConeHeadZombie3=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaZombieEnum"),l=a("./pzaConeHeadZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hatType=s.pzaZombieSlotType.hat_green,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):(this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,67.87,-1.82,-90.94))]]),this.slotMap.set(s.pzaZombieSlotType.hat,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.hat).addState(new s.pzaZombieSlotAtt(1,this.hatType+"1",72.44,-12.04,-90.94)).addState(new s.pzaZombieSlotAtt(2,this.hatType+"2",72.44,-12.04,-90.94)).addState(new s.pzaZombieSlotAtt(3,this.hatType+"3",60.99,-8.35,-90.94))))},t.prototype.updateMove=function(t){var e=this.baseData.xIndex;a.prototype.updateMove.call(this,t);var o=this.baseData.xIndex;e<0&&o>=0&&this.hasUseSrAni?(this.playMoveAnimation(),this.curShadow&&this.curShadow.hideShadow()):o<0&&e>=0&&this.hasUseSrAni&&(null!=this.mask&&(this.mask.enabled=!0),r.pzaSoundManager.playAudio("zombie_leave_water"),this.hasInWater=!1,this.playMoveAnimation())},t.prototype.zombieHurt=function(){this.zombieHurtState=p.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),"zombie_head_1"==this.curSkinName&&(this.curSkinName="zombie_head_2"),this.changeSkin(this.curSkinName)},i([u],t)}(l.pzaConeHeadZombie));e.pzaConeHeadZombie3=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaConeHeadZombie":"pzaConeHeadZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaConeHeadZombie:[function(a,t,e){"use strict";cc._RF.push(t,"7840eOssB1PAL8q0Rc3DOeL","pzaConeHeadZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaConeHeadZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("./pzaNormalZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=s.pzaZombieSlotType.hat,t.hatType=s.pzaZombieSlotType.hat,t.isNut=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):(this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,67.87,-1.82,-90.94))]]),this.isNut?this.slotMap.set(s.pzaZombieSlotType.head_nut,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.head_nut).addState(new s.pzaZombieSlotAtt(1,this.hatType+"1",198,2.55,-90)).addState(new s.pzaZombieSlotAtt(2,this.hatType+"2",197.5,2.55,-90)).addState(new s.pzaZombieSlotAtt(3,this.hatType+"3",197.5,2.55,-90))):this.slotMap.set(s.pzaZombieSlotType.hat,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.hat).addState(new s.pzaZombieSlotAtt(1,this.hatType+"1",14.88,7.05,-90.67)).addState(new s.pzaZombieSlotAtt(2,this.hatType+"2",14.88,7.05,-90.67)).addState(new s.pzaZombieSlotAtt(3,this.hatType+"3",14.3,7.05,-90.67))))},t.prototype.zombieHurtSound=function(t){if(this.hasEquip){var e="plastichit"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(e)}else a.prototype.zombieHurtSound.call(this,t)},i([u],t)}(l.pzaNormalZombie));e.pzaConeHeadZombie=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaCornMortarShooter:[function(a,t,e){"use strict";cc._RF.push(t,"2a0f0uPGexDH5qdmWHBh2Sr","pzaCornMortarShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCornMortarShooter=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaNodeManager"),s=a("../Bullet/pzaThrowBullet"),c=a("../../Common/pzaUtil"),u=a("../pzaGameState"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab1=null,t.bulletPrefab2=null,t.poolPrefab=null,t.hasImmobilize=!1,t}return n(t,a),t.prototype.showShooter=function(a,t){this.hasImmobilize=t,this.shootAtk(a)},t.prototype.shootAtk=function(a){for(var t=a.logicPos.x,e=a.logicPos.y,o=0;o<9;o++){var n=l.pzaNodeManager.getBulletNode();if(null==n)return;var i;i=this.hasImmobilize?this.bulletPrefab2:this.bulletPrefab1;var r=p.pzaGameCommonPool.requestInstant2(i);if(null==r)return;r.setParent(n);var d=r.getComponent(s.pzaThrowBullet);if(null==d)return;var h=this.node.getPosition();r.setPosition(h);var m=0;6==u.pzaGameState.map.getMapRow()?5!=(m=5==a.yIndex?5:a.yIndex)&&(m=o%2==0?a.yIndex:a.yIndex+1):4!=(m=4==a.yIndex?4:a.yIndex)&&(m=o%2==0?a.yIndex:a.yIndex+1);var f=cc.v2(t,e).add(cc.v2(c.pzaUtil.getRandomNum(-150,150),30));d.init(!1,m,20,a,f,-1,!1,!0,c.pzaUtil.getRandomNum(150,250)),this.hasImmobilize?d.hasImmobilize=!0:d.setCornBullet()}this.close()},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab1",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe2",type:cc.Prefab})],t.prototype,"bulletPrefab2",void 0),i([m(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([h],t)}(r.pzaBaseComponent);e.pzaCornMortarShooter=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../pzaGameState":"pzaGameState"}],pzaCornMortar:[function(a,t,e){"use strict";cc._RF.push(t,"2e168T7lj9LJ5J0/yVCok/0","pzaCornMortar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCornMortar=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaThrowBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaMelonPult"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.melonDataInit=function(){this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack1"),d.pzaGameState.useThrowPlant=!0,d.pzaGameState.onlyShroomCofee=!1},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null!=e)return l.pzaSoundManager.playAudio("melonimpact"),void a.animation.playAnimation("attack1",!1,t,function(){a.attack(e)},a.atkAniTime/a.atkInterval);a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};t()},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var s=cc.v2(l.x+this.baseData.logicPos.x+16,l.y+this.baseData.logicPos.y+57);i.setPosition(s);var u=i.getComponent(c.pzaThrowBullet);null!=u&&(u.init(!1,this.baseData.yIndex,this.baseData.atk,a,n),u.updateBulletAngel(90),u.hasSpatter=!0,1*Math.random()<.25&&(u.hasImmobilize=!0))}}}}}},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(u.pzaBuffType.FLY)&&!o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},i([f],t)}(h.pzaMelonPult));e.pzaCornMortar=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaMelonPult":"pzaMelonPult"}],pzaCountDown:[function(a,t,e){"use strict";cc._RF.push(t,"d55652D6PdI0aB+iJLbOaP8","pzaCountDown");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.countDownLB=null,t.interval=null,t}return n(t,a),t.prototype.start=function(){var a=this;this.interval=setInterval(function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,0,0,0,0).getTime()-t.getTime(),o=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4),i=Math.floor(e%6e4/1e3);a.countDownLB.string=o.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")},1e3)},t.prototype.onDestroy=function(){clearInterval(this.interval)},i([l({displayName:"\u5012\u8ba1\u65f6Label",type:cc.Label})],t.prototype,"countDownLB",void 0),i([p],t)}(cc.Component);e.default=s,cc._RF.pop()},{}],pzaCupidBullet:[function(a,t,e){"use strict";cc._RF.push(t,"6a3ceMKp99F1qxlvpvdMxzq","pzaCupidBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCupidBullet=void 0;var r=a("../../Common/pzaGroupEnum"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Zombie/pzaZombieBody"),u=a("./pzaBaseBullet"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.init=function(t,e,o,n,i){void 0===o&&(o=0),void 0===n&&(n=null),void 0===i&&(i=cc.v2(1,0)),a.prototype.init.call(this,t,e,o,n,i)},t.prototype.onCollision=function(a){if(null!=a&&a.node.group==r.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(c.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderZombie=function(a){a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==s.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&(a.zombieData&&a.zombieData.hypnosis||a.buffData.hasBuff(l.pzaBuffType.DIVE)||a.buffData.hasBuff(l.pzaBuffType.FLY)||a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||a.buffData.hasBuff(l.pzaBuffType.IMM_HYPNOSIS)||this.normalColliderZombie(a))},t.prototype.normalColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);return t.baseData.zombieData.zombieType==s.pzaZombieEnum.RED_GARGANTUAR4||t.baseData.zombieData.zombieType==s.pzaZombieEnum.GARGANTUAR4||t.baseData.zombieData.zombieType==s.pzaZombieEnum.DANCING_ZOMBIE3?(t.baseData.zombieData.equipHp>0?t&&t.hurt(1800):(p.pzaSoundManager.playAudio("floop"),p.pzaSoundManager.playAudio("mindcontrolled"),window.pzazombieManager.zombieHypnosis(t.baseData)),this.close(),void this.playHitEffect(a)):t.baseData.zombieData.zombieType==s.pzaZombieEnum.BedCar||t.baseData.zombieData.zombieType==s.pzaZombieEnum.ZOMBONI3||t.baseData.zombieData.zombieType==s.pzaZombieEnum.ZOMBONI2||t.baseData.zombieData.zombieType==s.pzaZombieEnum.ZOMBONI?(t&&t.hurt(1800),this.close(),void this.playHitEffect(a)):(this.isCanHypnosis(a)?(p.pzaSoundManager.playAudio("floop"),p.pzaSoundManager.playAudio("mindcontrolled"),window.pzazombieManager.zombieHypnosis(t.baseData)):t&&t.hurt(1800),this.close(),void this.playHitEffect(a))},t.prototype.isCanHypnosis=function(a){var t=!1,e=window.pzazombieManager.getZombie(a);return e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_NUT||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_HOLE||e.baseData.zombieData.zombieType==s.pzaZombieEnum.LADDER_ZOMBIE||e.baseData.zombieData.zombieType==s.pzaZombieEnum.NEWSPAPER_ZOMBIE||e.baseData.zombieData.cate==s.pzaZombieCate.Gargantuar?e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_NUT||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_HOLE||e.baseData.zombieData.zombieType==s.pzaZombieEnum.NEWSPAPER_ZOMBIE||e.baseData.zombieData.zombieType==s.pzaZombieEnum.LADDER_ZOMBIE?t=e.baseData.zombieData.equipHp<=0:e.baseData.zombieData.cate==s.pzaZombieCate.Gargantuar&&(t=e.baseData.zombieData.equipHp2<=0):t=!0,t},i([h],t)}(u.pzaBaseBullet));e.pzaCupidBullet=m,cc._RF.pop()},{"../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieBody":"pzaZombieBody","./pzaBaseBullet":"pzaBaseBullet"}],pzaCupidShooter:[function(a,t,e){"use strict";cc._RF.push(t,"8ba9eGsT35Dk7qs5Rc9GjN4","pzaCupidShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCupidShooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Bullet/pzaBaseBullet"),s=a("../pzaGameState"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.shootNode=null,t.atkCd=2,t.lifeTime=15,t.originAng=30,t.bulletCnt=5,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.animation.playAnimation("idle",!0),this.atkCd=2,this.lifeTime=15},t.prototype.atkAni=function(){var a=this;this.animation.playAnimation("attack",!1,function(){a.atkCd=2,a.animation.playAnimation("idle",!0)},function(){a.shoot()})},t.prototype.cupidDead=function(){var a=""+this.baseData.xIndex+this.baseData.yIndex,t=window.pzaplantManager.plantDataMap.get(a);this.baseData.isDead=!0,window.pzaplantManager.plantMap.delete(t),window.pzaplantManager.plantDataMap.delete(a),this.close()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.atkCd>0&&(this.atkCd-=t,this.atkCd<=0&&this.atkAni()),this.lifeTime>0&&(this.lifeTime-=t,this.lifeTime<=0&&this.cupidDead()))},t.prototype.shoot=function(){for(var a=p.pzaNodeManager.getBulletNode(),t=2;t>=0;t--){var e=null,o=this.baseData.yIndex+t-1;if(!(o<0||o>=s.pzaGameState.map.getMapRow())){var n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=n){n.setParent(a);var i=this.shootNode.convertToWorldSpaceAR(cc.v2()),c=a.convertToNodeSpaceAR(i);if(n.setPosition(c),o!=this.baseData.yIndex){var u=s.pzaGameState.map.getYInterval(o)/3+this.shootNode.y;e=s.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,o,0,u).y}var d=n.getComponent(l.pzaBaseBullet);d&&d.init(o,this.baseData.atk,1,e);var h=s.pzaGameState.map.getMapSkewColumn();h>0&&this.baseData.xIndex<=h-2&&(d.maxPosX=this.baseData.logicPos.x+1.5*s.pzaGameState.map.getBlockWidth())}}}},i([h({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([h({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([d],t)}(c.pzaBasePlant);e.pzaCupidShooter=m,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaDancingFireZombie:[function(a,t,e){"use strict";cc._RF.push(t,"21444d4gjFC+Y8hsvcz3bET","pzaDancingFireZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDancingFireZombie=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("./pzaDancingZombie"),c=a("./pzaZombieBody"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.torchwoodBody=null,t.torchWoodBindData=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.torchWoodBindData=!1,this.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_CONTROL,-1)),this.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_ICE,-1))},t.prototype.logicLateUpdate=function(t){this.torchWoodBindData||(this.torchWoodBindData=!0,this.torchwoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addPlantByRow(this.baseData.yIndex,this.torchwoodBody)),a.prototype.logicLateUpdate.call(this,t)},t.prototype.getSummonZombieTypes=function(){return[l.pzaZombieEnum.BACKUP_FIRE_DANCER,l.pzaZombieEnum.BACKUP_FIRE_DANCER,l.pzaZombieEnum.BACKUP_FIRE_DANCER,l.pzaZombieEnum.BACKUP_FIRE_DANCER]},t.prototype.death=function(t,e){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.flaserDeath.call(this)},i([h({displayName:"\u821e\u738b\u706b\u7130\u78b0\u649e\u8eab\u4f53",type:c.pzaZombieBody})],t.prototype,"torchwoodBody",void 0),i([d],t)}(s.pzaDancingZombie);e.pzaDancingFireZombie=m,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaDancingZombie":"pzaDancingZombie","./pzaZombieBody":"pzaZombieBody"}],pzaDancingZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"a7cf9gpaXtJlKg3c/YTnXMJ","pzaDancingZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDancingZombie2=void 0;var r=a("../../utils/pzakc"),p=a("../Data/pzaZombieEnum"),l=a("./pzaDancingZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=s.pzaZombieSlotType.helmet_black,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,-5.83,77.07))],[s.pzaZombieSlotType.helmet_black,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.helmet_black).addState(new s.pzaZombieSlotAtt(1,this.equip1Slot+"1",14.54,22.62)).addState(new s.pzaZombieSlotAtt(2,this.equip1Slot+"2",14.54,31.29)).addState(new s.pzaZombieSlotAtt(3,this.equip1Slot+"3",9.51,30.4))]])},t.prototype.getSummonZombieTypes=function(){for(var a=r.default.randomInt(0,3),t=[],e=0;e<4;e++)e===a?t.push(p.pzaZombieEnum.DANCING_ZOMBIE):t.push(p.pzaZombieEnum.BACKUP_DANCER2);return t},i([u],t)}(l.pzaDancingZombie));e.pzaDancingZombie2=d,cc._RF.pop()},{"../../utils/pzakc":"pzakc","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaDancingZombie":"pzaDancingZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaDancingZombie3:[function(a,t,e){"use strict";cc._RF.push(t,"b7a37DqXK1CUZ3dJuqvEusZ","pzaDancingZombie3");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDancingZombie3=void 0;var r=a("../Data/pzaBuffData"),p=a("./pzaDancingZombie2"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=l.pzaZombieSlotType.helmet_fei,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[l.pzaZombieSlotType.butter,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.butter).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.butter,-5.83,77.07))],[l.pzaZombieSlotType.helmet_fei,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.helmet_fei).addState(new l.pzaZombieSlotAtt(1,this.equip1Slot+"1",51.33,30.9)).addState(new l.pzaZombieSlotAtt(2,this.equip1Slot+"2",53.5,30.48)).addState(new l.pzaZombieSlotAtt(3,this.equip1Slot+"3",53.56,30.43))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_CONTROL,-1)),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_ICE,-1))},i([c],t)}(p.pzaDancingZombie2));e.pzaDancingZombie3=u,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","./pzaDancingZombie2":"pzaDancingZombie2","./pzaZombieSlot":"pzaZombieSlot"}],pzaDancingZombieNaruto:[function(a,t,e){"use strict";cc._RF.push(t,"374b0LStthLjbqqsOUfed3g","pzaDancingZombieNaruto");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDancingZombieNaruto=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaZombieEnum"),l=a("./pzaDancingZombie2"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,-5.83,77.07))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_CONTROL,-1)),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_ICE,-1))},t.prototype.getSummonZombieTypes=function(){return[p.pzaZombieEnum.BACKUPNARUTO_DANCER2,p.pzaZombieEnum.BACKUPNARUTO_DANCER2,p.pzaZombieEnum.BACKUPNARUTO_DANCER2,p.pzaZombieEnum.BACKUPNARUTO_DANCER2]},t.prototype.zombieHurt=function(){this.zombieHurtState=p.pzaHurtStateEnum.HURT},i([u],t)}(l.pzaDancingZombie2));e.pzaDancingZombieNaruto=d,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaDancingZombie2":"pzaDancingZombie2","./pzaZombieSlot":"pzaZombieSlot"}],pzaDancingZombie:[function(a,t,e){"use strict";cc._RF.push(t,"20bc9UOvSlIXarlMuYUaqFr","pzaDancingZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDancingZombie=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaUIManager"),u=a("../../Common/pzaWorldEventManager"),d=a("../../Load/pzaPreLoadManager"),h=a("../../View/Battle/pzaNewZombieView"),m=a("../../utils/pzakc"),f=a("../Data/pzaBaseData"),z=a("../Data/pzaBuffData"),y=a("../Data/pzaZombieEnum"),g=a("../pzaGameState"),b=a("./pzaBaseZombie"),v=a("./pzaZombieSlot"),P=a("./pzaZombieState"),D=cc._decorator,S=D.ccclass,C=D.property,_=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.upLight=null,t.upLightFrame=[],t.downLight=null,t.downLightFrame=[],t.garlicSkinName=null,t.backState=!0,t.backTime=3.6,t.dacing=!1,t.summoning=!1,t.showLightState=0,t.lightInterval=0,t.dancingIdx=0,t.isFireType=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[v.pzaZombieSlotType.butter,new v.pzaZombieSlot(this.animation.spineAnimation,v.pzaZombieSlotType.butter).addState(new v.pzaZombieSlotAtt(1,v.pzaZombieSlotType.butter,-1.28,75.68))]])},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.node.scaleX=-1,this.upLight.node.active=!1,this.downLight.node.active=!1},t.prototype.preview=function(t,e,o){a.prototype.preview.call(this,t,e,o),this.node.scaleX=-o,this.upLight.node.active=!1,this.downLight.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.backState=!0,this.backTime=3.6,this.dacing=!1,this.summoning=!1,null!=this.curShadow&&this.curShadow.changeOffset(cc.v2(-this.shadowOffset.x,this.shadowOffset.y)),this.showLightState=0,this.upLight.node.active=!1,this.downLight.node.active=!1,this.baseData.buffData.addBuff(new z.pzaBuffInfo(z.pzaBuffType.IMM_HYPNOSIS,-1)),this.baseData.zombieData.danceData=new f.pzaDanceData(this.baseData),this.dancingIdx=++m.default.dancingZomIdx,m.default.dancingZomIdx>10&&(m.default.dancingZomIdx=1),s.pzaSoundManager.playLongAudio("dancer",this.dancingIdx)},t.prototype.logicUpdate=function(t){var e=this.lastBePasueControled?0:1;this.baseData.isDead?this.animation.changeAnimationTimeScale(1):this.animation.changeAnimationTimeScale(e),this.backTime-=t,this.refreshLight(t),a.prototype.logicUpdate.call(this,t)},t.prototype.updateMove=function(a){if(!this.dacing&&!this.isInButterState){this.zombieState!=P.pzaZombieState.MOVE&&this.playMoveAnimation();var t=this.baseData.zombieData.moveSpd,e=1;if(this.backState||(e+=this.baseData.zombieData.danceData.getSpeedBuff()),t*=e,this.hasStopZombie()&&(t=0),this.animation.changeAnimationTimeScale(e),1==this.baseData.zombieData.direction?this.baseData.logicPos.x+=a*t:this.baseData.logicPos.x-=a*t,this.baseData.zombieData.hypnosis&&this.baseData.logicPos.x>=640)this.death(!1);else{this.baseData.logicPos.x<(g.pzaGameState.isZombieMode()?-450:-480)&&this.zombieGoHome();var o=this.baseData.xIndex,n=this.hypnosisState?this.bodyWidth:-this.bodyWidth,i=g.pzaGameState.map.getMapXIndex(this.baseData.logicPos,null,n),r=g.pzaGameState.map.getMapYIndex(this.baseData.logicPos,null);if(-1==i||-1==r||this.baseData.xIndex==i&&this.baseData.yIndex==r||this.onChangeIndex(i,r),this.baseData.xIndex=i,-1==this.changeTargetRow){var p=.1*g.pzaGameState.map.getYInterval(this.baseData.yIndex)+15;g.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,this.baseData.logicPos,p)}if(o<0&&i>=0&&this.zombieScream(),this.backState&&this.backTime<=0&&-1!=i&&this.changeBackState(),g.pzaGameState.newZombie==this.baseData.zombieData.zombieType&&7==i){g.pzaGameState.gamePause=!0,u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.GAME_PAUSE,null);var l=this.node.convertToWorldSpaceAR(cc.v2());c.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.NEW_ZOMBIE_VIEW,function(a){var t=a&&a.getComponent(h.pzaNewZombieView);t&&t.showNewZombie(g.pzaGameState.newZombie,l),g.pzaGameState.showUnlockZombie()})}}}},t.prototype.attack=function(t,e){this.backState&&null!=e&&null!=e.plantData?this.changeBackState():this.summoning||(this.dacing&&(this.dacing=!1),a.prototype.attack.call(this,t,e))},t.prototype.changeBackState=function(){this.backState=!1,null!=this.curShadow&&this.curShadow.changeOffset(this.shadowOffset),this.summonZombie();var a=l.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=g.pzaGameState.map.getBlockWidth()/a},t.prototype.breakDirt=function(a){if(this.baseData&&this.node){this.backState=!1;var t=l.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=g.pzaGameState.map.getBlockWidth()/t,a&&a()}},t.prototype.summonZombie=function(){var a=this;this.dacing=!0,this.summoning=!0,this.zombieState=P.pzaZombieState.SPECIAL;var t=g.pzaGameState.map.getMapRow(),e=g.pzaGameState.map.getMapColumn(),o=0,n=function(){a.baseData&&--o<=0&&!a.baseData.isDead&&(a.dance(function(){a.changeLight(),a.baseData.buffData.removeBuff(z.pzaBuffType.IMM_HYPNOSIS)}),a.summoning=!1)};this.showLight();var i=this.getSummonZombieTypes();this.animation.playAnimation("idle2",!1,function(){a.baseData.yIndex+1<t&&!window.pzaMapManager.isInWaterWay(a.baseData.yIndex+1)&&(o++,a.summonCreateZombie(0,n,i[0])),a.baseData.yIndex>0&&!window.pzaMapManager.isInWaterWay(a.baseData.yIndex-1)&&(o++,a.summonCreateZombie(1,n,i[1])),a.baseData.xIndex>0&&(o++,a.summonCreateZombie(2,n,i[2])),a.baseData.xIndex+1<e&&(o++,a.summonCreateZombie(3,n,i[3]))})},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=P.pzaZombieState.MOVE,-1==this.changeTargetRow?this.backState?this.animation.playAnimation("idle1",!0):this.baseData.zombieData.danceData.walkStep>=3&&!this.hasStopZombie()?this.dance():this.animation.playAnimation("idle6",!1,function(){a.baseData.zombieData.danceData.walkStep++,a.playMoveAnimation()}):this.animation.playAnimation("idle6",!0)},t.prototype.dance=function(a){var t=this;void 0===a&&(a=null),this.baseData.zombieData.danceData.walkStep=0,this.dacing=!0,this.zombieState=P.pzaZombieState.SPECIAL,this.animation.playAnimation("idle7",!1,function(){t.dacing=!1,t.suppleZombie(),a&&a()});var e=this.baseData.zombieData.danceData.getOtherDatas();e&&e.forEach(function(a){var t=a.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(a):window.pzazombieManager.getZombie(a);t&&t.dance()})},t.prototype.getSummonZombieTypes=function(){return[y.pzaZombieEnum.BACKUP_DANCER,y.pzaZombieEnum.BACKUP_DANCER,y.pzaZombieEnum.BACKUP_DANCER,y.pzaZombieEnum.BACKUP_DANCER]},t.prototype.suppleZombie=function(){var a=this,t=!1,e=!1,o=!1,n=!1,i=this.baseData.zombieData.danceData,r=g.pzaGameState.map.getMapRow(),p=g.pzaGameState.map.getMapColumn();if(this.baseData.yIndex+1<r&&!window.pzaMapManager.isInWaterWay(this.baseData.yIndex+1)&&(t=!i.hasUpData()),this.baseData.yIndex>0&&!window.pzaMapManager.isInWaterWay(this.baseData.yIndex-1)&&(e=!i.hasDownData()),this.baseData.xIndex>0&&(o=!i.hasLeftData()),this.baseData.xIndex+1<p&&(n=!i.hasRightData()),t||e||o||n){this.summoning=!0,this.dacing=!0,this.zombieState=P.pzaZombieState.SPECIAL;var l=0,s=function(){a.baseData&&--l<=0&&!a.baseData.isDead&&(a.playMoveAnimation(),a.summoning=!1,a.dacing=!1)},c=this.getSummonZombieTypes();this.animation.playAnimation("idle2",!1,function(){t&&(l++,a.summonCreateZombie(0,s,c[0])),e&&(l++,a.summonCreateZombie(1,s,c[1])),o&&(l++,a.summonCreateZombie(2,s,c[2])),n&&(l++,a.summonCreateZombie(3,s,c[3]))})}else this.playMoveAnimation()},t.prototype.hasStopZombie=function(){if(!this.baseData||!this.baseData.zombieData)return!1;if(!this.baseData.zombieData.danceData)return!1;var a=this.baseData.zombieData.danceData.getOtherDatas();if(null==a)return!1;for(var t=0;t<a.length;t++){var e=a[t];if(e!=this.baseData&&e&&!e.isDead){if(e.isBeControlled())return!0;var o=e.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(e):window.pzazombieManager.getZombie(e);if(null==o)continue;var n=o;if(n.zombieState==P.pzaZombieState.EAT_ATK||n.zombieState==P.pzaZombieState.SPECIAL)return!0}}return!1},t.prototype.beHypnosis=function(){a.prototype.beHypnosis.call(this);var t=this.baseData.zombieData.danceData;this.baseData.zombieData.danceData=new f.pzaDanceData(this.baseData),this.baseData.zombieData.danceData.walkStep=t.walkStep,t.mainData=null,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_27)},t.prototype.changeMapRow=function(){a.prototype.changeMapRow.call(this);var t=this.baseData.zombieData.danceData;this.baseData.zombieData.danceData=new f.pzaDanceData(this.baseData),this.baseData.zombieData.danceData.walkStep=t.walkStep,t.mainData=null,this.dacing=!1},t.prototype.summonCreateZombie=function(a,t,e){var o=g.pzaGameState.map.getBlockWidth(),n=this.baseData.zombieData.danceData,i=null,r=this.baseData.zombieData.hypnosis;0==a?((i=window.pzazombieManager.createFixBlockZombieData(e,this.baseData.xIndex,this.baseData.yIndex+1,r)).logicPos.x=this.baseData.logicPos.x,i.zombieData.danceData=n,n.upData=i):1==a?((i=window.pzazombieManager.createFixBlockZombieData(e,this.baseData.xIndex,this.baseData.yIndex-1,r)).logicPos.x=this.baseData.logicPos.x,i.zombieData.danceData=n,n.downData=i):2==a?((i=window.pzazombieManager.createFixBlockZombieData(e,this.baseData.xIndex-1,this.baseData.yIndex,r)).logicPos.y=this.baseData.logicPos.y,i.logicPos.x=this.baseData.logicPos.x-o,i.zombieData.danceData=n,n.leftData=i):3==a&&((i=window.pzazombieManager.createFixBlockZombieData(e,this.baseData.xIndex+1,this.baseData.yIndex,r)).logicPos.y=this.baseData.logicPos.y,i.logicPos.x=this.baseData.logicPos.x+o,i.zombieData.danceData=n,n.rightData=i),null!=i&&(r?(i.zombieData.direction=1,window.pzazombieManager.createHypnZombie(i,t)):window.pzazombieManager.createZombie(i,!1,!0,!1,t,!1))},t.prototype.refreshLight=function(a){0!=this.showLightState&&(this.lightInterval-=a,this.lightInterval<=0&&this.changeLight())},t.prototype.showLight=function(){this.showLightState=1,this.lightInterval=10,this.upLight.node.active=!0,this.downLight.node.active=!0,this.upLight.spriteFrame=this.upLightFrame[0],this.downLight.spriteFrame=this.downLightFrame[0]},t.prototype.changeLight=function(){0!=this.showLightState&&(this.showLightState++,this.showLightState>=5&&(this.showLightState=1),this.lightInterval=1,this.upLight.spriteFrame=this.upLightFrame[this.showLightState-1],this.downLight.spriteFrame=this.downLightFrame[this.showLightState-1])},t.prototype.zombieScream=function(){},t.prototype.zombieHurt=function(){this.zombieHurtState=y.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),this.changeSkin(this.curSkinName)},t.prototype.close=function(){a.prototype.close.call(this),s.pzaSoundManager.deleteLongAudio("dancer",this.dancingIdx)},i([C({displayName:"\u4e0a\u706f",type:cc.Sprite})],t.prototype,"upLight",void 0),i([C({displayName:"\u4e0a\u706f\u56fe",type:[cc.SpriteFrame]})],t.prototype,"upLightFrame",void 0),i([C({displayName:"\u4e0b\u706f",type:cc.Sprite})],t.prototype,"downLight",void 0),i([C({displayName:"\u4e0b\u706f\u56fe",type:[cc.SpriteFrame]})],t.prototype,"downLightFrame",void 0),i([S],t)}(b.pzaBaseZombie);e.pzaDancingZombie=_,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewZombieView":"pzaNewZombieView","../../utils/pzakc":"pzakc","../Data/pzaBaseData":"pzaBaseData","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaDaveAdReward:[function(a,t,e){"use strict";cc._RF.push(t,"66b7et7MSpGj6rbaps6XSv5","pzaDaveAdReward");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDaveAdReward=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaGamePropConfig"),s=a("../../Common/pzaLocalData"),c=a("../../Common/pzaStatisticsMgr"),u=a("../../Common/pzaUIManager"),d=a("../../Common/pzaUtil"),h=a("../../Load/pzaPreLoadManager"),m=a("../../utils/pzaChannel"),f=a("../pzaWarningView"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.propName=[],t.propDesc=[],t.adIcon=[],t.recieveIcon=[],t.recieveTxt=[],t.recieveBtn=[],t.skipPartNode=null,t.board=null,t.cherryNode=null,t.getRewardCount=0,t}return n(t,a),t.prototype.onEnable=function(){this.recieveBtn.forEach(function(a){a.interactable=!0}),this.adIcon.forEach(function(a){a.active=!0}),this.recieveTxt.forEach(function(a){a.string="\u9886\u53d6"}),this.recieveIcon.forEach(function(a){d.pzaUtil.switchGraySprite(a,!1)});for(var a=l.pzaGamePropEnum.PROP_CHERRY_BOMB;a<=l.pzaGamePropEnum.PROP_AUTO_PICK;a++){var t=l.pzaGamePropConfig.PorpConfigMap.get(a);null!=t&&(this.propName[a-1].string=t.propName,this.propDesc[a-1].string=t.propDesc)}c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"6"},{name:"adname",value:"\u51c6\u5907\u9875\u9762\u6a31\u6843\u70b8\u5f39"}),c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"7"},{name:"adname",value:"\u51c6\u5907\u9875\u9762\u81ea\u52a8\u62fe\u53d6"}),c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"8"},{name:"adname",value:"\u51c6\u5907\u9875\u9762\u989d\u5916\u9633\u5149"});var e=!1,o=m.pzaChannel.instance().getChannel();if(null!=o.ctrl&&"1"===o.ctrl.p4){if(r.pzaGameState.isMiniMode())return this.skipPartNode.active=!1,this.cherryNode.active=r.pzaGameState.curPart>=10,this.board.height=r.pzaGameState.curPart>=10?330:250,void(4==r.pzaGameState.curPart&&(this.cherryNode.active=!0,this.board.height=330));this.cherryNode.active=!0,e||r.pzaGameState.isSurvival()||r.pzaGameState.curChapter<s.pzaLocalData.data.curChapter||r.pzaGameState.curChapter==s.pzaLocalData.data.curChapter&&r.pzaGameState.curPart<s.pzaLocalData.data.curPart?(this.skipPartNode.active=!1,this.board.height=330):(this.skipPartNode.active=!0,this.board.height=410,c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"20"},{name:"adname",value:"\u6234\u592b\u5b9d\u85cf\u4f4d\u7f6e\u8df3\u5173"}))}else e=!0},t.prototype.clickCherryBomb=function(){var a=this;m.pzaChannel.instance().showVideo({sucCall:function(){a.obtainProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB)},failCall:function(){},endCall:function(){},posName:"\u6a31\u6843\u70b8\u5f39",adsid:"6"})},t.prototype.clickAutoPick=function(){var a=this;m.pzaChannel.instance().showVideo({sucCall:function(){a.obtainProp(l.pzaGamePropEnum.PROP_AUTO_PICK)},failCall:function(){},endCall:function(){},posName:"\u81ea\u52a8\u62fe\u53d6",adsid:"7"})},t.prototype.clickFreeSun=function(){var a=this;m.pzaChannel.instance().showVideo({sucCall:function(){a.obtainProp(l.pzaGamePropEnum.PROP_FREE_SUN)},failCall:function(){},endCall:function(){},posName:"\u989d\u5916\u9633\u5149",adsid:"8"})},t.prototype.clickSkipPart=function(){m.pzaChannel.instance().showVideo({sucCall:function(){p.pzaGameManager.removeBattleUI(),window.pzazombieManager.skipPassPart()},failCall:function(){},endCall:function(){},posName:"\u6234\u592b\u5b9d\u85cf\u4f4d\u7f6e\u8df3\u5173",adsid:"20"})},t.prototype.obtainProp=function(a){var t=this;if(this.recieveBtn[a-1].interactable=!1,this.adIcon[a-1].active=!1,this.recieveTxt[a-1].string="\u5df2\u9886",d.pzaUtil.switchGraySprite(this.recieveIcon[a-1],!0),s.pzaLocalData.obtainProp(a,1),this.getRewardCount++,!(this.getRewardCount>2)){var e=function(){m.pzaChannel.instance().showVideo({sucCall:function(){t.getOtherReward(a)},failCall:function(){},endCall:function(){},posName:"\u51c6\u5907\u9875\u9762\u5168\u90e8\u83b7\u53d6",adsid:"32"})},o="\u60a8\u5df2\u83b7\u5f97"+this.propName[a-1].string+",\u518d\u770b\u4e00\u4e2a\u5e7f\u544a\u989d\u5916\u89e3\u9501\u5176\u4ed6\u4e24\u4e2a\u529f\u80fd\uff0c\u662f\u5426\u7ee7\u7eed\u89c2\u770b\uff1f";c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"32"},{name:"adname",value:"\u51c6\u5907\u9875\u9762\u5168\u90e8\u83b7\u53d6"}),u.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(f.pzaWarningView);t&&t.show(o,"\u6211\u77e5\u9053\u4e86","\u5168\u90e8\u9886\u53d6",null,e,"\u662f\u5426\u83b7\u5f97\u5176\u4ed6\u5956\u52b1",!1,!1,1)})}},t.prototype.getOtherReward=function(a){for(var t=0;t<this.recieveBtn.length;t++)a-1!=t&&(this.recieveBtn[t].interactable=!1,this.adIcon[t].active=!1,this.recieveTxt[t].string="\u5df2\u9886",d.pzaUtil.switchGraySprite(this.recieveIcon[t],!0),s.pzaLocalData.obtainProp(t+1,1))},t.prototype.clickClose=function(){this.node.active=!1},i([g({displayName:"\u9053\u5177\u540d\u79f0",type:[cc.Label]})],t.prototype,"propName",void 0),i([g({displayName:"\u9053\u5177\u63cf\u8ff0",type:[cc.Label]})],t.prototype,"propDesc",void 0),i([g({displayName:"\u5e7f\u544a\u56fe\u6807",type:[cc.Node]})],t.prototype,"adIcon",void 0),i([g({displayName:"\u9886\u53d6\u6309\u94ae\u56fe",type:[cc.Sprite]})],t.prototype,"recieveIcon",void 0),i([g({displayName:"\u9886\u53d6\u6309\u94ae\u6587\u5b57",type:[cc.Label]})],t.prototype,"recieveTxt",void 0),i([g({displayName:"\u9886\u53d6\u6309\u94ae",type:[cc.Button]})],t.prototype,"recieveBtn",void 0),i([g({displayName:"\u8df3\u5173\u8282\u70b9",type:cc.Node})],t.prototype,"skipPartNode",void 0),i([g({displayName:"\u9762\u677f",type:cc.Node})],t.prototype,"board",void 0),i([g({displayName:"\u6a31\u6843\u70b8\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"cherryNode",void 0),i([y],t)}(cc.Component);e.pzaDaveAdReward=b,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaWarningView":"pzaWarningView"}],pzaDaveTreasureView:[function(a,t,e){"use strict";cc._RF.push(t,"52932bAw+lI3Z1YxI198yHJ","pzaDaveTreasureView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDaveTreasureView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaLocalData"),s=a("../../Common/pzaStatisticsMgr"),c=a("../../Common/pzaUtil"),u=a("../../utils/pzaChannel"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.recAllBtn=null,t.recBtn=[],t.cdReduceLevel=null,t.cdReduceLevelFrames=[],t.cdReduceValue=null,t.sunReduceLevel=null,t.sunReduceLevelFrames=[],t.sunReduceValue=null,t.critAddLevel=null,t.critAddLevelFrames=[],t.critAddValue=null,t.cardBoards=[],t.boradFrames=[],t.recNodes=[],t.cdValues=[.15,.25,.35],t.sunValues=[.15,.25,.35],t.critValues=[.15,.25,.35],t.curCdLevel=0,t.curSunLevel=0,t.curCritLevel=0,t.closeCall=null,t}return n(t,a),t.prototype.init=function(a){this.closeCall=a,this.recAllBtn.active=!1,this.recBtn.forEach(function(a){a.active=!0}),this.recNodes.forEach(function(a){a.active=!1}),this.curCdLevel=c.pzaUtil.getRandomNum(0,2),this.curSunLevel=c.pzaUtil.getRandomNum(0,2),this.curCritLevel=c.pzaUtil.getRandomNum(0,2),this.cdReduceLevel.spriteFrame=this.cdReduceLevelFrames[this.curCdLevel],this.cdReduceValue.string="\u51b7\u5374\u65f6\u95f4-"+Math.round(100*this.cdValues[this.curCdLevel])+"%",this.cardBoards[0].spriteFrame=this.boradFrames[this.curCdLevel],this.sunReduceLevel.spriteFrame=this.sunReduceLevelFrames[this.curSunLevel],this.sunReduceValue.string="\u80fd\u91cf\u6d88\u8017-"+Math.round(100*this.sunValues[this.curSunLevel])+"%",this.cardBoards[1].spriteFrame=this.boradFrames[this.curSunLevel],this.critAddLevel.spriteFrame=this.critAddLevelFrames[this.curCritLevel],this.critAddValue.string="\u690d\u7269\u66b4\u51fb+"+Math.round(100*this.critValues[this.curCritLevel])+"%",this.cardBoards[2].spriteFrame=this.boradFrames[this.curCritLevel],s.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"13"},{name:"adname",value:"\u9633\u5149\u6d88\u8017\u51cf\u5c11\u83b7\u53d6"}),s.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"14"},{name:"adname",value:"\u51b7\u5374\u65f6\u95f4\u51cf\u5c11\u83b7\u53d6"}),s.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"15"},{name:"adname",value:"\u690d\u7269\u66b4\u51fb\u589e\u52a0\u83b7\u53d6"}),r.pzaGameState.ableShowBuyGift=!1,this.refreshVideoIcon()},t.prototype.refreshVideoIcon=function(){this.recBtn.forEach(function(a){a.getChildByName("ad_icon").active=!l.pzaLocalData.data.isFreeDaveTre})},t.prototype.clickRecCdReduce=function(a){var t=this,e=function(){t.refreshVideoIcon(),t.recAllBtn.active=!0,t.recBtn.forEach(function(a){a.active=!1}),t.recNodes[0].active=!0,r.pzaGameState.cdReduceValue=t.cdValues[t.curCdLevel],s.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"16"},{name:"adname",value:"\u5361\u7247\u5b9d\u85cf\u5168\u90fd\u8981"})};a.target.getChildByName("ad_icon").active?u.pzaChannel.instance().showVideo({sucCall:e,failCall:function(){},endCall:function(){},posName:"\u51b7\u5374\u65f6\u95f4\u51cf\u5c11",adsid:"14"}):(l.pzaLocalData.data.isFreeDaveTre=!1,l.pzaLocalData.addDirty("isFreeDaveTre"),e())},t.prototype.clickRecSunReduce=function(a){var t=this,e=function(){t.refreshVideoIcon(),t.recAllBtn.active=!0,t.recBtn.forEach(function(a){a.active=!1}),t.recNodes[1].active=!0,r.pzaGameState.sunReduceValue=t.sunValues[t.curSunLevel],s.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"16"},{name:"adname",value:"\u5361\u7247\u5b9d\u85cf\u5168\u90fd\u8981"})};a.target.getChildByName("ad_icon").active?u.pzaChannel.instance().showVideo({sucCall:e,failCall:function(){},endCall:function(){},posName:"\u9633\u5149\u6d88\u8017\u51cf\u5c11",adsid:"13"}):(l.pzaLocalData.data.isFreeDaveTre=!1,l.pzaLocalData.addDirty("isFreeDaveTre"),e())},t.prototype.clickCritAdd=function(a){var t=this,e=function(){t.refreshVideoIcon(),t.recAllBtn.active=!0,t.recBtn.forEach(function(a){a.active=!1}),t.recNodes[2].active=!0,r.pzaGameState.critValue=t.critValues[t.curCritLevel],s.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"16"},{name:"adname",value:"\u5361\u7247\u5b9d\u85cf\u5168\u90fd\u8981"})};a.target.getChildByName("ad_icon").active?u.pzaChannel.instance().showVideo({sucCall:e,failCall:function(){},endCall:function(){},posName:"\u690d\u7269\u66b4\u51fb\u589e\u52a0",adsid:"15"}):(l.pzaLocalData.data.isFreeDaveTre=!1,l.pzaLocalData.addDirty("isFreeDaveTre"),e())},t.prototype.clickRecAll=function(a){var t=this,e=function(){r.pzaGameState.cdReduceValue=t.cdValues[t.curCdLevel],r.pzaGameState.sunReduceValue=t.sunValues[t.curSunLevel],r.pzaGameState.critValue=t.critValues[t.curCritLevel],t.close()};a.target.getChildByName("ad_icon").active?u.pzaChannel.instance().showVideo({sucCall:e,failCall:function(){},endCall:function(){},posName:"\u5b9d\u85cf\u5168\u90fd\u8981",adsid:"16"}):(l.pzaLocalData.data.isFreeDaveTre=!1,l.pzaLocalData.addDirty("isFreeDaveTre"),e())},t.prototype.clickClose=function(){this.close()},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node),this.closeCall&&this.closeCall()},i([m({displayName:"\u5168\u90e8\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"recAllBtn",void 0),i([m({displayName:"\u9886\u53d6\u6309\u94ae",type:[cc.Node]})],t.prototype,"recBtn",void 0),i([m({displayName:"\u51b7\u5374\u65f6\u95f4\u7b49\u7ea7",type:cc.Sprite})],t.prototype,"cdReduceLevel",void 0),i([m({displayName:"\u51b7\u5374\u65f6\u95f4\u7b49\u7ea7\u56fe",type:[cc.SpriteFrame]})],t.prototype,"cdReduceLevelFrames",void 0),i([m({displayName:"\u51b7\u5374\u65f6\u95f4\u6570\u503c",type:cc.Label})],t.prototype,"cdReduceValue",void 0),i([m({displayName:"\u9633\u5149\u6d88\u8017\u7b49\u7ea7",type:cc.Sprite})],t.prototype,"sunReduceLevel",void 0),i([m({displayName:"\u9633\u5149\u6d88\u8017\u7b49\u7ea7\u56fe",type:[cc.SpriteFrame]})],t.prototype,"sunReduceLevelFrames",void 0),i([m({displayName:"\u9633\u5149\u6d88\u8017\u6570\u503c",type:cc.Label})],t.prototype,"sunReduceValue",void 0),i([m({displayName:"\u690d\u7269\u66b4\u51fb\u7b49\u7ea7",type:cc.Sprite})],t.prototype,"critAddLevel",void 0),i([m({displayName:"\u690d\u7269\u66b4\u51fb\u7b49\u7ea7\u56fe",type:[cc.SpriteFrame]})],t.prototype,"critAddLevelFrames",void 0),i([m({displayName:"\u690d\u7269\u66b4\u51fb\u6570\u503c",type:cc.Label})],t.prototype,"critAddValue",void 0),i([m({displayName:"\u5361\u7247\u6846",type:[cc.Sprite]})],t.prototype,"cardBoards",void 0),i([m({displayName:"\u5361\u7247\u6846\u56fe",type:[cc.SpriteFrame]})],t.prototype,"boradFrames",void 0),i([m({displayName:"\u5df2\u9886\u53d6",type:[cc.Node]})],t.prototype,"recNodes",void 0),i([h],t)}(cc.Component);e.pzaDaveTreasureView=f,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaUtil":"pzaUtil","../../utils/pzaChannel":"pzaChannel"}],pzaDaySignConfig:[function(a,t,e){"use strict";cc._RF.push(t,"2062dWUqXhHDaeVfTtiTElm","pzaDaySignConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDaySignConfig=void 0;var o=a("../utils/pzaChannel"),n=a("./pzaGamePropConfig"),i=function(){function a(a,t,e,o,i){this.day=1,this.rewardType=n.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.recFun=0,this.iconIndex=0,this.day=a,this.rewardType=t,this.rewardCount=e,this.recFun=o,this.iconIndex=i}return a.initPropConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){2==t.iD&&("my"==o.pzaChannel.instance().channel||o.pzaChannel.isConfRemote)&&(t.rewardType="5",t.rewardValue="46",t.aDClaim="1");var n=parseInt(t.iD),i=new a(n,parseInt(t.rewardType),parseInt(t.rewardValue),parseInt(t.aDClaim),parseInt(t.icon));e.SignConfigMap.set(n,i)}})},a.SignConfigMap=new Map,a}();e.pzaDaySignConfig=i,cc._RF.pop()},{"../utils/pzaChannel":"pzaChannel","./pzaGamePropConfig":"pzaGamePropConfig"}],pzaDaySignItem:[function(a,t,e){"use strict";cc._RF.push(t,"07009t8FXVPd5/j6Z3klToj","pzaDaySignItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDaySignItem=void 0;var r=a("../Common/pzaDaySignConfig"),p=a("../Common/pzaGameConfig"),l=a("../Common/pzaGamePropConfig"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaSpineController"),u=a("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.recedNode=null,t.coinIcon=null,t.coinFrames=[],t.propAni=null,t.plantCardNode=null,t.plantIcon=null,t.propName=null,t.propCount=null,t}return n(t,a),t.prototype.init=function(a){this.recedNode.active=s.pzaLocalData.data.signDays>=a,this.propCount.node.active=!1;var t=r.pzaDaySignConfig.SignConfigMap.get(a);if(null!=t)switch(t.rewardType){case l.pzaGamePropEnum.PROP_COIN:this.propAni&&(this.propAni.node.active=!1),this.plantCardNode&&(this.plantCardNode.active=!1),this.propName.string=""+t.rewardCount,this.coinIcon&&(this.coinIcon.node.active=!0,t.iconIndex>0&&(this.coinIcon.spriteFrame=this.coinFrames[t.iconIndex-1]));break;case l.pzaGamePropEnum.PROP_CHERRY_BOMB:case l.pzaGamePropEnum.PROP_AUTO_PICK:case l.pzaGamePropEnum.PROP_FREE_SUN:this.coinIcon&&(this.coinIcon.node.active=!1),this.plantCardNode&&(this.plantCardNode.active=!1),this.propCount.node.active=!0,this.propCount.string="x"+t.rewardCount,this.propAni&&(this.propAni.node.active=!0,t.rewardType==l.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAni.playAnimation("3ui_1",!0):t.rewardType==l.pzaGamePropEnum.PROP_AUTO_PICK?this.propAni.playAnimation("2ui_1",!0):t.rewardType==l.pzaGamePropEnum.PROP_FREE_SUN&&this.propAni.playAnimation("1ui_1",!0));var e=l.pzaGamePropConfig.PorpConfigMap.get(t.rewardType);null!=e&&(this.propName.string=""+e.propName);break;case l.pzaGamePropEnum.PROP_PLANTE:this.coinIcon&&(this.coinIcon.node.active=!1),this.propAni&&(this.propAni.node.active=!1),this.plantCardNode&&(this.plantCardNode.active=!0);var o=p.pzaGameConfig.getPlantConfig(t.rewardCount);null!=o&&(this.propName.string=""+o.name,u.pzaSpriteFrameManager.loadPlantCard(t.rewardCount,this.plantIcon))}},i([m({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],t.prototype,"recedNode",void 0),i([m({displayName:"\u91d1\u5e01\u56fe\u6807",type:cc.Sprite})],t.prototype,"coinIcon",void 0),i([m({displayName:"\u91d1\u5e01\u56fe",type:[cc.SpriteFrame]})],t.prototype,"coinFrames",void 0),i([m({displayName:"\u9053\u5177\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"propAni",void 0),i([m({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"plantCardNode",void 0),i([m({displayName:"\u690d\u7269\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"plantIcon",void 0),i([m({displayName:"\u9053\u5177\u540d\u79f0",type:cc.Label})],t.prototype,"propName",void 0),i([m({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],t.prototype,"propCount",void 0),i([h],t)}(cc.Component);e.pzaDaySignItem=f,cc._RF.pop()},{"../Common/pzaDaySignConfig":"pzaDaySignConfig","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaDaySignView:[function(a,t,e){"use strict";cc._RF.push(t,"9f77dOqf6JEWLFQaxF7d/9e","pzaDaySignView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDaySignView=void 0;var r=a("../Common/pzaDaySignConfig"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGamePropConfig"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaRewardManager"),u=a("../Common/pzaSoundManager"),d=a("../Common/pzaStatisticsMgr"),h=a("../Common/pzaTipManager"),m=a("../utils/pzaChannel"),f=a("../utils/pzakc"),z=a("./pzaDaySignItem"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.adRecBtn=null,t.recBtn=null,t.getAllBtn=null,t.adRecBtnTxt=null,t.items=[],t}return n(t,a),t.prototype.onEnable=function(){d.pzaStatisticsMgr.sendEvent("System",{name:"system",value:1}),this.getAllBtn.active=!1;for(var a=0;a<7;a++){var t=this.items[a];null!=t&&t.init(a+1)}if(s.pzaLocalData.data.hasSign||s.pzaLocalData.data.signDays>=7)return this.adRecBtn.active=!1,void(this.recBtn.active=!1);var e=r.pzaDaySignConfig.SignConfigMap.get(s.pzaLocalData.data.signDays+1);null!=e&&(0==e.recFun?(this.adRecBtn.active=!0,this.recBtn.active=!0,this.adRecBtn.x=-222,this.adRecBtnTxt.string="\u53cc\u500d\u9886\u53d6"):(this.adRecBtn.active=!0,this.recBtn.active=!1,this.adRecBtn.x=0,this.adRecBtnTxt.string="\u7acb\u5373\u9886\u53d6"),d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"1"},{name:"adname",value:"\u7b7e\u5230\u53cc\u500d\u9886\u53d6"}),"noAD"!=m.pzaChannel.instance().channel||m.pzaChannel.isConfRemote||(this.adRecBtn.active=!1,this.recBtn.active=!1,this.getAllBtn.active=!0))},t.prototype.clickClose=function(){u.pzaSoundManager.playSFX(),this.close()},t.prototype.clickRec=function(){var a=this;u.pzaSoundManager.playSFX();var t=r.pzaDaySignConfig.SignConfigMap.get(s.pzaLocalData.data.signDays+1);if(null!=t){s.pzaLocalData.data.signDays++,s.pzaLocalData.data.hasSign=!0,s.pzaLocalData.addDirty("signDays","hasSign"),s.pzaLocalData.data.signDays>=7&&(s.pzaLocalData.data.canMonthSign=!0,s.pzaLocalData.addDirty("canMonthSign"),f.default.sendMsg("unlockMonth"));var e=[new l.pzaRewardPropData(t.rewardType,t.rewardCount)];c.pzaRewardManager.recieveRewards(e,function(){a.requestSubscribeMessage(s.pzaLocalData.data.signDays+1)}),this.close()}},t.prototype.clickAdRec=function(){var a=this;u.pzaSoundManager.playSFX(),m.pzaChannel.instance().showVideo({sucCall:function(){var t=r.pzaDaySignConfig.SignConfigMap.get(s.pzaLocalData.data.signDays+1);if(null!=t){s.pzaLocalData.data.signDays++,s.pzaLocalData.data.hasSign=!0,s.pzaLocalData.addDirty("signDays","hasSign"),s.pzaLocalData.data.signDays>=7&&(s.pzaLocalData.data.canMonthSign=!0,s.pzaLocalData.addDirty("canMonthSign"),f.default.sendMsg("unlockMonth"));var e=new l.pzaRewardPropData(t.rewardType,t.rewardCount);0==t.recFun&&(e.propCount=2*t.rewardCount),c.pzaRewardManager.recieveRewards([e],function(){a.requestSubscribeMessage(s.pzaLocalData.data.signDays+1)}),a.close()}},failCall:function(){},endCall:function(){},posName:"\u7b7e\u5230\u53cc\u500d\u9886\u53d6",adsid:"1"})},t.prototype.requestSubscribeMessage=function(a){if(!(a>7)){var t=m.pzaChannel.instance().getChannel();"wx"==t.channel&&t.requestSubscribeMessage(["9AljghJM-RaQdzrE4D9cRyuoz21RyEBL93lYx9lm0gI"],function(){m.pzaChannel.subMsg(t.getPara("appId"),t.channelUserId,"9AljghJM-RaQdzrE4D9cRyuoz21RyEBL93lYx9lm0gI",a,function(a){console.log("subMsg",a)})})}},t.prototype.getAll=function(){if("noAD"==m.pzaChannel.instance().channel&&!m.pzaChannel.isConfRemote){for(var a=0;a<7;a++){var t=r.pzaDaySignConfig.SignConfigMap.get(a+1);if(null==t)return;var e=[new l.pzaRewardPropData(t.rewardType,t.rewardCount)];c.pzaRewardManager.recieveRewardData(e)}s.pzaLocalData.data.canMonthSign=!0,s.pzaLocalData.addDirty("canMonthSign"),f.default.sendMsg("unlockMonth"),h.pzaTipManager.showHomeTip("\u7b7e\u5230\u9886\u53d6\u6210\u529f!",null,2),this.close()}},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([b({displayName:"\u5e7f\u544a\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"adRecBtn",void 0),i([b({displayName:"\u666e\u901a\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"recBtn",void 0),i([b({displayName:"\u4e00\u952e\u7b7e\u5230\u6309\u94ae",type:cc.Node})],t.prototype,"getAllBtn",void 0),i([b({displayName:"\u5e7f\u544a\u9886\u53d6\u6309\u94ae\u6587\u5b57",type:cc.Label})],t.prototype,"adRecBtnTxt",void 0),i([b({displayName:"\u7b7e\u5230items",type:[z.pzaDaySignItem]})],t.prototype,"items",void 0),i([g],t)}(cc.Component);e.pzaDaySignView=v,cc._RF.pop()},{"../Common/pzaDaySignConfig":"pzaDaySignConfig","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaDaySignItem":"pzaDaySignItem"}],pzaDiamondSeeds:[function(a,t,e){"use strict";cc._RF.push(t,"76fc8m8Dz5PSp1tdPPWRZFd","pzaDiamondSeeds");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDiamondSeeds=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../Bullet/pzaGoldBullet"),c=a("../Data/pzaBuffData"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.shootNode=null,t.growTime=30,t.isBig=!1,t.atkTime=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.atkTime=0,this.growTime=30,t.plantData&&t.plantData.isGrow&&(this.growTime=0,this.isBig=!0),this.aniCom()},t.prototype.aniCom=function(){var a=this;if(this.atkTime>0)this.animation.playAnimation(this.isBig?"idle2":"idle1",!1,this.aniCom.bind(this));else{var t=this.findAttackTarget();if(t)return this.atkTime=this.atkInterval,void this.animation.playAnimation("attack",!1,function(){a.animation.playAnimation(a.isBig?"idle2":"idle1",!1,a.aniCom.bind(a))},function(){a.attack(t)});this.animation.playAnimation(this.isBig?"idle2":"idle1",!1,this.aniCom.bind(this))}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.atkTime-=t,this.isBig||(this.growTime-=t,this.growTime<=0&&(this.growUp(),this.baseData&&this.baseData.plantData&&(this.baseData.plantData.isGrow=!0)))},t.prototype.growUp=function(){this.isBig=!0,this.animation.playAnimation("grow",!1,this.aniCom.bind(this))},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t&&this.baseData){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o),i=e.getComponent(s.pzaGoldBullet);i&&i.bulletInit(this.baseData,2),i&&i.init(this.baseData.atk,a,n,this.baseData.yIndex)}}}},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos||0==this.isBig)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(c.pzaBuffType.DIVE)&&!r.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(c.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m({displayName:"\u653b\u51fb\u4f4d\u7f6e",type:cc.Node})],t.prototype,"shootNode",void 0),i([h],t)}(u.pzaBasePlant);e.pzaDiamondSeeds=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaGoldBullet":"pzaGoldBullet","../Data/pzaBuffData":"pzaBuffData","./pzaBasePlant":"pzaBasePlant"}],pzaDiamondSnail:[function(a,t,e){"use strict";cc._RF.push(t,"8576f2TwZxKDLST9goBQFfU","pzaDiamondSnail");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDiamondSnail=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.isInvincible=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.isInvincible=!1,this.aniCom(),this.baseData.plantData.canBeShoot=!1;var e=10*-this.baseData.yIndex-2;this.node.zIndex=e},t.prototype.aniCom=function(){this.isInvincible||this.animation.playAnimation("idle1",!0)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.isInvincible&&(this.baseData.logicPos.x+=50*t,this.baseData.logicPos.x>=640)&&this.death()},t.prototype.logicLateUpdate=function(){a.prototype.logicLateUpdate.call(this),this.isInvincible&&this.node.setPosition(this.baseData.logicPos)},t.prototype.hurt=function(a,t,e){var o=this;if(this.baseData&&!this.baseData.isDead&&!this.isInvincible){a<=0&&(a=100),a=a>100?100:a,this.baseData.hurtPlanet(a),this.refreshHurtState(!1),this.animation.showLight(),this.baseData.hp<=100&&(this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.INVINCIBLE,100)),this.animation.playAnimation("out",!1,function(){o.isInvincible=!0,o.animation.playAnimation("move",!0),window.pzaplantManager.removePlant(o.baseData)}));var n=new Set,i=.6*u.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(a){if(o.baseData&&null!=a&&(a.xIndex==o.baseData.xIndex||a.xIndex-1==o.baseData.xIndex)){if(p.pzaUtil.getDistance(o.baseData.logicPos,a.logicPos)>i)return;n.add(a)}}),n.forEach(function(a){if(o.baseData&&null!=a&&!a.isDead&&!a.buffData.hasBuff(l.pzaBuffType.FLY)&&(a.zombieData.zombieType==s.pzaZombieEnum.DIGGER_ZOMBIE||!a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)&&!a.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT))){var t=window.pzazombieManager.getZombie(a);t.bePauseControl(),t.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROZEN,4)),null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType!=s.pzaZombieEnum.DR_ZOMBOSS&&c.pzaEffectManager.createFrozenEffect(t.baseData),t&&t.hurt(0,o.baseData,d.pzaAttackType.SPIKE)}}),e==d.pzaAttackType.THROW_ATK&&this.baseData.hp>0){var h="zombieHurt"+(Math.floor(2*Math.random())+1);r.pzaSoundManager.playAudio(h)}}},i([f],t)}(h.pzaBasePlant));e.pzaDiamondSnail=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaDiggerFootBallZombie:[function(a,t,e){"use strict";cc._RF.push(t,"83d8bXs2gdJHalSDJ3F4gSD","pzaDiggerFootBallZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDiggerFootBallZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../pzaGameState"),u=a("./pzaDiggerZombie"),d=a("./pzaZombieSlot"),h=a("./pzaZombieState"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=d.pzaZombieSlotType.hat_digger,t.gaoSlot=d.pzaZombieSlotType.gao2,t.hatInDig=d.pzaZombieSlotType.hat_digger,t.garlicSkinName="2biaoqing2",t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[d.pzaZombieSlotType.butter,new d.pzaZombieSlot(this.animation.spineAnimation,d.pzaZombieSlotType.butter).addState(new d.pzaZombieSlotAtt(1,d.pzaZombieSlotType.butter,-31.2,76.01))],[d.pzaZombieSlotType.hat_digger,new d.pzaZombieSlot(this.animation.spineAnimation,d.pzaZombieSlotType.hat_digger).addState(new d.pzaZombieSlotAtt(1,d.pzaZombieSlotType.hat_digger+"1",87.14,-3.08,-86.38))],[this.gaoSlot,new d.pzaZombieSlot(this.animation.spineAnimation,"20pr").addState(new d.pzaZombieSlotAtt(1,this.gaoSlot,94.28,-10.82,-159.29))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE,-1))},t.prototype.findTarget=function(){if(!this.hasBreakGround){var t=a.prototype.findTarget.call(this);if(null!=t){var e=""+t.xIndex+t.yIndex,o=window.pzaplantManager.plantDataMap.get(e);null!=o&&null!=o.plantData&&o.plantData.plantType==s.pzaPlantEnum.HoleNut&&this.breakGround(!1)}return null}return a.prototype.findTarget.call(this)},t.prototype.breakGround=function(a){var t=this;this.body.node.scaleX=1,this.baseData.buffData.removeBuff(l.pzaBuffType.UNABLE_SELECT),this.baseData.buffData.removeBuff(l.pzaBuffType.DIVE),this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_ICE),this.hasBreakGround=!0,this.curShadow&&this.curShadow.showShadow(),this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,a&&(this.baseData.zombieData.direction=1,this.refreshOrientation()),this.hasTool=!1;var e=!1;if(function(){a?p.pzaSoundManager.playAudio("digger_arise"):p.pzaSoundManager.playAudio("gravestone_rumble"),t.updateEquipState(t.equip1Slot,1),t.updateEquipState(t.gaoSlot,0),t.animation.playAnimation("jump",!1,function(){t.body.node.getComponent(cc.BoxCollider).enabled=!0,t.baseData.isDead=!1,t.zombieState=h.pzaZombieState.STAY,e=!0});var o=t.animation.getAnimationDuration("fall")/t.animation.spineAnimation.timeScale+.1;t.scheduleOnce(function(){e||(t.body.node.getComponent(cc.BoxCollider).enabled=!0,t.baseData.isDead=!1)},o),t.body.node.scaleY=1}(),null!=this.baseData&&null!=this.baseData.zombieData){var o=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=c.pzaGameState.map.getBlockWidth()/o}},t.prototype.getMoveAniName=function(){return"move"},i([f],t)}(u.pzaDiggerZombie));e.pzaDiggerFootBallZombie=z,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaDiggerZombie":"pzaDiggerZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaDiggerZombie:[function(a,t,e){"use strict";cc._RF.push(t,"bbc77EVr1JHka/8NvpYWl2d","pzaDiggerZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDiggerZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaGroupEnum"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaSoundManager"),c=a("../../Load/pzaBundleObjectPool"),u=a("../../Load/pzaPreLoadManager"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaPlantEnum"),m=a("../Effect/pzaShadowEffect"),f=a("../pzaGameState"),z=a("./pzaBaseZombie"),y=a("./pzaZombieSlot"),g=a("./pzaZombieState"),b=cc._decorator,v=b.ccclass,P=(b.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hasBreakGround=!1,t.breakPosX=0,t.isNormalBreak=!0,t.equip1Slot=y.pzaZombieSlotType.hat_digger,t.gaoSlot=y.pzaZombieSlotType.gao,t.hatInDig=y.pzaZombieSlotType.hat_digger,t}return n(t,a),t.prototype.initEquips=function(){var a=this;this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[y.pzaZombieSlotType.butter,new y.pzaZombieSlot(this.animation.spineAnimation,y.pzaZombieSlotType.butter).addState(new y.pzaZombieSlotAtt(1,y.pzaZombieSlotType.butter,58.47,-16.35,-86.38))],[this.equip1Slot,new y.pzaZombieSlot(this.animation.spineAnimation,this.equip1Slot).addState(new y.pzaZombieSlotAtt(1,this.equip1Slot+"1",87.14,-3.08,-86.38))],[this.hatInDig,new y.pzaZombieSlot(this.animation.spineAnimation,this.hatInDig).addState(new y.pzaZombieSlotAtt(1,this.hatInDig+"1",87.14,-3.08,-86.38))],[this.gaoSlot,new y.pzaZombieSlot(this.animation.spineAnimation,this.gaoSlot).addState(new y.pzaZombieSlotAtt(1,this.gaoSlot+"1",94.28,-10.82,-159.29))]]),setTimeout(function(){a.updateEquipState(a.hatInDig,1)},100)},t.prototype.bindData=function(t){this.hasBreakGround=!1,a.prototype.bindData.call(this,t),this.body.node.scaleX=.1,t.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.UNABLE_SELECT,-1)),t.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.DIVE,-1)),f.pzaGameState.map&&(this.breakPosX=f.pzaGameState.map.getMapOriPos().x+50),this.isNormalBreak=!0},t.prototype.equipIntact=function(){a.prototype.equipIntact.call(this),this.updateEquipState(this.gaoSlot,1)},t.prototype.findTarget=function(){if(!this.hasBreakGround){var t=a.prototype.findTarget.call(this);if(null!=t){var e=""+t.xIndex+t.yIndex,o=window.pzaplantManager.plantDataMap.get(e);if(null!=o&&null!=o.plantData)if(o.plantData.plantType==h.pzaPlantEnum.POTATO_MINE){if(!o.plantData.hasBreakGround)return o}else o.plantData.plantType==h.pzaPlantEnum.HoleNut&&(this.breakPosX=t.logicPos.x+50,this.isNormalBreak=!1)}return null}return a.prototype.findTarget.call(this)},t.prototype.updateMove=function(t){a.prototype.updateMove.call(this,t),this.hasBreakGround?this.baseData.logicPos.x>=640&&(this.baseData.zombieDie(),this.death(!1)):this.baseData.logicPos.x<=this.breakPosX&&this.breakGround(this.isNormalBreak)},t.prototype.breakGround=function(a){var t=this;this.body.node.scaleX=1,this.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.DIZZ,-1)),this.baseData.buffData.removeBuff(d.pzaBuffType.UNABLE_SELECT),this.baseData.buffData.removeBuff(d.pzaBuffType.DIVE),this.hasBreakGround=!0,this.curShadow&&this.curShadow.showShadow(),this.preventBreak(),a&&(this.baseData.zombieData.direction=1,this.refreshOrientation());var e=function(){a?s.pzaSoundManager.playAudio("digger_arise"):s.pzaSoundManager.playAudio("gravestone_rumble");var e=!1,o=a?"arise":"jump";t.updateEquipState(t.hatInDig,0),t.animation.playAnimation(o,!1,function(){t.updateEquipState(t.equip1Slot,1),t.animation.playAnimation(o+"1",!1,function(){e||(e=!0,t.resumeBreak(),t.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.DIZZ,3)),t.animation.playAnimation("idle2",!0),t.zombieState=g.pzaZombieState.STAY)})});var n=(t.animation.getAnimationDuration(o)+t.animation.getAnimationDuration(o+"1"))/t.animation.spineAnimation.timeScale+.1;t.scheduleOnce(function(){e||(e=!0,t.updateEquipState(t.equip1Slot,1),t.resumeBreak(),t.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.DIZZ,3)),t.animation.playAnimation("idle2",!0),t.zombieState=g.pzaZombieState.STAY)},n),t.body.node.scaleY=1};a?e():this.animation.playAnimation("dig2",!1,e);var o=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=f.pzaGameState.map.getBlockWidth()/o},t.prototype.toolDeath=function(){this.hasTool=!1,this.updateEquipState(this.gaoSlot,0),this.hasBreakGround||this.breakGround(!1)},t.prototype.getMoveAniName=function(){return"move"},t.prototype.playMoveAnimation=function(){var a=this;if(this.zombieState=g.pzaZombieState.MOVE,this.hasBreakGround)this.animation.playAnimation(this.getMoveAniName(),!0);else{this.updateEquipState(this.hatInDig,1),this.updateEquipState(this.equip1Slot,0);var t=function(){s.pzaSoundManager.playAudio("digger_zombie"),a.animation.playAnimation("dig",!1,t),a.body.node.scaleY=.4};t()}},t.prototype.playAttakAnimation=function(){var a=this;this.zombieState=g.pzaZombieState.EAT_ATK,this.hasBreakGround?this.animation.playAnimation("attack",!0,null,function(){var t=a.findTarget();if(null!=t){if(!t.isDead&&null!=t.plantData&&t.plantData.plantType==h.pzaPlantEnum.HYPNO_SHROOM&&!t.plantData.sleeping){s.pzaSoundManager.playAudio("mindcontrolled"),t.isDead=!0,window.pzazombieManager.zombieHypnosis(a.baseData);var e=window.pzaplantManager.getPlantByData(t);e&&e.close(),window.pzaplantManager.removePlant(t)}t.isDead||null==t.plantData||t.plantData.plantType!=h.pzaPlantEnum.HYPNO_GARLIC||(s.pzaSoundManager.playAudio("floop"),s.pzaSoundManager.playAudio("mindcontrolled"),a.baseData.zombieData.hypnosis=!0,a.baseData.zombieData.direction=1,a.body.node.group=p.pzaGroupEnum.PLANT,a.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.INVINCIBLE,-1)),a.changeMapRow(),s.pzaSoundManager.playAudio("Garlic"),a.damage(t))}}):(this.updateEquipState(this.hatInDig,1),this.updateEquipState(this.equip1Slot,0),this.animation.playAnimation("dig",!0))},t.prototype.createShadow=function(a){var t=this;void 0===a&&(a=null),this.needShadow?(null==a&&(a=l.pzaNodeManager.getDownEffectNode()),c.pzaBundleObjectPool.requestInstantByUrl2(u.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(a);var n=o.getComponent(m.pzaShadowEffect);n&&n.init(t.baseData,t.shadowOffset,t.zombieScale),n&&n.hideShadow(),t.curShadow=n}else console.error(e)})):this.curShadow=null},t.prototype.ashesDeath=function(){this.baseData.zombieDie(),this.death(!1),this.hasBreakGround&&a.prototype.ashesDeath.call(this)},t.prototype.logicLateUpdate=function(t){t>.7||(this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null!=this.baseData&&null!=this.baseData.logicPos&&(this.hasBreakGround?a.prototype.logicLateUpdate.call(this,t):this.node.setPosition(this.baseData.logicPos)))},i([v],t)}(z.pzaBaseZombie));e.pzaDiggerZombie=P,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Effect/pzaShadowEffect":"pzaShadowEffect","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaDirBullet:[function(a,t,e){"use strict";cc._RF.push(t,"0d455lSmZ5G4ITb0JWm066z","pzaDirBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDirBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaNodeManager"),u=a("../../Common/pzaSoundManager"),d=a("../../Common/pzaWorldEventManager"),h=a("../../Load/pzaBundleObjectPool"),m=a("../../Load/pzaPreLoadManager"),f=a("../Data/pzaBuffData"),z=a("../Effect/pzaBaseEffect"),y=a("../Effect/pzaShadowEffect"),g=a("../Zombie/pzaZombieBody"),b=a("../pzaEffectManager"),v=a("../pzaGameState"),P=cc._decorator,D=P.ccclass,S=P.property,C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletNode=null,t.speed=400,t.maxLifeTime=3,t.rotateSpeed=0,t.needShadow=!1,t.hitPrefab=null,t.poolPrefab=null,t.hitBuff=0,t.bullet_normal=null,t.bullet_fire=null,t.lifeTime=0,t.atk=0,t.curShadow=null,t.direction=cc.v2(1,0),t.isInAir=!1,t.bulletLevel=1,t.collider=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.maxLifeTime=3,this.bulletLevel=1},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.init=function(a,t,e){void 0===e&&(e=1),p.pzaCollisionManager.getInstance.addBulletOther(this),this.atk=t,this.lifeTime=0,this.direction=a,this.isInAir=!1,this.node.scale=1,this.bulletLevel=e,this.createShadow(),this.refreshBulletState()},t.prototype.refreshBulletState=function(){this.bullet_normal&&(this.bullet_normal.active=1==this.bulletLevel),this.bullet_fire&&(this.bullet_fire.active=2==this.bulletLevel)},t.prototype.logicUpdate=function(a){this.lifeTime+=a,this.lifeTime>=this.maxLifeTime?this.close():(0!=this.rotateSpeed&&this.bulletNode&&(this.bulletNode.angle-=this.rotateSpeed*a),0!=this.rotateSpeed&&this.bullet_fire&&(this.bullet_fire.angle-=this.rotateSpeed*a),this.updateMove(a))},t.prototype.updateMove=function(a){this.node.x+=this.direction.x*this.speed*a,this.node.y+=this.direction.y*this.speed*a,this.shadowMove()},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.onCollision=function(a){if(null!=a&&a.node.group==s.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(g.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderZombie=function(a){a&&!a.isDead&&(a.buffData.hasBuff(f.pzaBuffType.DIVE)||a.buffData.hasBuff(f.pzaBuffType.UNABLE_SELECT)||!this.isInAir&&a.buffData.hasBuff(f.pzaBuffType.FLY)||this.isInAir&&!a.buffData.hasBuff(f.pzaBuffType.FLY)||a.buffData.hasBuff(f.pzaBuffType.INVINCIBLE)||a.zombieData&&a.zombieData.hypnosis||(1==this.bulletLevel?this.normalColliderZombie(a):this.fireColliderZombie(a)))},t.prototype.normalColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);if(t&&(t.hurt(this.atk),this.close(),this.playHitEffect(a),1===this.hitBuff&&!a.buffData.hasBuff(f.pzaBuffType.IMM_CONTROL)&&!a.buffData.hasBuff(f.pzaBuffType.IMM_IMMOBILIZE))){var e=a.buffData.releaseBuff(f.pzaBuffType.IMMOBILIZE);null!=e?e.buffTime=5:(e=new f.pzaBuffInfo(f.pzaBuffType.IMMOBILIZE,5),a.buffData.addBuff(e),t.bePauseControl(),b.pzaEffectManager.createButterEffect(a,cc.v2(a.logicPos.x,a.logicPos.y+130),t.node.zIndex))}},t.prototype.fireColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);if(t&&t.hurt(40),a.buffData.removeBuff(f.pzaBuffType.FROST),a.buffData.removeBuff(f.pzaBuffType.FROZEN),this.close(),this.playHitEffect(a),u.pzaSoundManager.playAudio("firepeaHit",.5),!t.baseData.buffData.hasBuff(f.pzaBuffType.IMM_SPATTER)){var e=window.pzazombieManager.findFixRangeZombies(a.logicPos,.5*v.pzaGameState.map.getBlockWidth());e&&e.forEach(function(t){null!=t&&t.baseData!=a&&(a.buffData.hasBuff(f.pzaBuffType.FLY)||a.buffData.hasBuff(f.pzaBuffType.DIVE)||a.buffData.hasBuff(f.pzaBuffType.INVINCIBLE)||t.hurt(13))})}},t.prototype.createShadow=function(){var a=this;if(this.needShadow){var t=c.pzaNodeManager.getDownEffectNode();h.pzaBundleObjectPool.requestInstantByUrl2(m.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(t);var n=o.getComponent(y.pzaShadowEffect);n&&n.init(null,cc.v2(),.35),a.curShadow=n,a.shadowMove()}else console.error(e)})}else this.curShadow=null},t.prototype.shadowMove=function(){if(null!=this.curShadow){var a=cc.v2(this.node.x,0);a.y=this.node.y-60,this.curShadow.followMove(a)}},t.prototype.close=function(){p.pzaCollisionManager.getInstance.delBulletOther(this),null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},t.prototype.playHitEffect=function(a){var t=cc.v2(this.node.x,this.node.y);if(2==this.bulletLevel&&b.pzaEffectManager.createBoomFireEffect(0,0,t,null),null!=this.hitPrefab){var e=5;null!=a&&(e=10*-a.yIndex+5,t=cc.v2(a.logicPos.x,a.logicPos.y+70));var o=c.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=l.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.zIndex=e,n.setPosition(t);var i=n.getComponent(z.pzaBaseEffect);i&&i.showEffect(null,null)}}},i([S(cc.Node)],t.prototype,"bulletNode",void 0),i([S({displayName:"\u5b50\u5f39\u98de\u884c\u901f\u5ea6"})],t.prototype,"speed",void 0),i([S({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],t.prototype,"maxLifeTime",void 0),i([S({displayName:"\u5b50\u5f39\u81ea\u8f6c\u901f\u5ea6"})],t.prototype,"rotateSpeed",void 0),i([S({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],t.prototype,"needShadow",void 0),i([S({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"hitPrefab",void 0),i([S(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([S({displayName:"\u5b50\u5f39\u51fb\u4e2dbuff"})],t.prototype,"hitBuff",void 0),i([S({displayName:"\u666e\u901a\u5b50\u5f39",type:cc.Node})],t.prototype,"bullet_normal",void 0),i([S({displayName:"\u706b\u7130\u5b50\u5f39",type:cc.Node})],t.prototype,"bullet_fire",void 0),i([D],t)}(r.pzaBaseComponent);e.pzaDirBullet=C,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Effect/pzaBaseEffect":"pzaBaseEffect","../Effect/pzaShadowEffect":"pzaShadowEffect","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDolphinRiderZombie:[function(a,t,e){"use strict";cc._RF.push(t,"e72a1SeCnFGirdVMv2VJly8","pzaDolphinRiderZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDolphinRiderZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaBaseZombie"),m=a("./pzaZombieSlot"),f=a("./pzaZombieState"),z=cc._decorator,y=z.ccclass,g=(z.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.enterWater=!1,t.hasJump=!1,t.jumping=!1,t.jumpMsp=0,t.jumpDuration=1,t.garlicSkinName="biaoqing2",t.yIndexIsWater=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,52.1,-3.44,-89.7))]])},t.prototype.bindData=function(t){if(this.hasJump=!1,this.jumping=!1,this.enterWater=!1,this.jumpMsp=0,this.jumpDuration=this.animation.getAnimationDuration("jump2"),a.prototype.bindData.call(this,t),d.pzaGameState.map){var e=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/e}this.body.changeBody(cc.v2(-20,65),110)},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData)if(this.baseData.isDead)this.baseData.hp>0&&this.jumpMsp>0&&this.jumpMove(a);else if(this.jumpMsp>0)this.jumpMove(a);else if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow){if(this.pushBackTime>0)this.pushBackMove(a);else if(!this.jumping&&!this.enterWater)if(this.hasJump||!this.hasInWater){var t=this.findTarget();null==t||t.isDead?this.updateMove(a):this.attack(a,t)}else{var e=this.findJumpTarget();null!=e?this.jump(e):this.updateMove(a)}}else this.changeRowMove(a)},t.prototype.attack=function(t,e){this.enterWater||a.prototype.attack.call(this,t,e)},t.prototype.updateMove=function(t){this.enterWater||a.prototype.updateMove.call(this,t)},t.prototype.findJumpTarget=function(){if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;if(null==this.body.curTarget.zombieData){var a=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(this.body.curTarget.plantData.cate===s.pzaPlantCate.Spike){var t=window.pzaplantManager.pumpkinDataMap.get(a);return null==t||t.isDead?null:t}if(r.pzaPlantConfigData.isTallPlant(this.body.curTarget.plantData.plantType))return this.body.curTarget;if(this.body.curTarget.plantData.plantType==s.pzaPlantEnum.COB_CANNON)return this.body.curTarget;var e=window.pzaplantManager.plantDataMap.get(a);return null==e||e.isDead||!r.pzaPlantConfigData.isTallPlant(e.plantData.plantType)&&e.plantData.plantType!=s.pzaPlantEnum.COB_CANNON?this.body.curTarget:e}},t.prototype.jumpMove=function(a){this.baseData.logicPos.x-=a*this.jumpMsp},t.prototype.jump=function(a){var t=this;if(null!=a){var e=a.xIndex,o=d.pzaGameState.map.getXPos(e)+d.pzaGameState.map.getMapOriPos().x;this.jumpMsp=(this.baseData.logicPos.x-o)/(this.jumpDuration-.26),this.jumping=!0,this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1));var n=!r.pzaPlantConfigData.isTallPlant(a.plantData.plantType);p.pzaSoundManager.playAudio("dolphin_before_jumping");var i=0;this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.animation.playAnimation(n?"jump2":"jump3",!1,function(){t.resumeBreak(),t.jumpMsp=0,n||p.pzaSoundManager.playAudio("bonk"),p.pzaSoundManager.playAudio("zombie_entering_water"),t.baseData.zombieData.toolType=c.pzaEquipType.NO_EQUIP,t.toolDeath();var a=r.pzaGameConfig.getZombieSpecialSpeed(t.baseData.zombieData.zombieType);t.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/a;var e=d.pzaGameState.map.getMapXIndex(t.baseData.logicPos);t.baseData.xIndex=e,t.hasJump=!0,t.srMoveInWaterAni[0]="move4",t.srMoveAni[0]="move2",t.moveAniName[0]="move2",t.attackAniName[0]="attack3",t.body.changeBody(cc.v2(10,65),60),t.body.curTarget=null,t.jumping=!1,n?t.playMoveAnimation():t.animation.playAnimation("attack",!0),t.baseData.buffData.removeBuff(l.pzaBuffType.IMM_CONTROL)},function(){if(t.jumpMsp=0,n||1==i){var a=cc.v2(t.baseData.logicPos.x,t.baseData.logicPos.y);u.pzaEffectManager.createWaterFlowerEffect(t.baseData.yIndex,a,null)}i++})}},t.prototype.playMoveAnimation=function(){var a=this;if(!this.jumping&&!this.enterWater){this.zombieState=f.pzaZombieState.MOVE;for(var t=this.getMoveAniNameArray(),e=0;e<t.length;e++)if(t[e]==this.animation.spineAnimation.animation)return;this.animation.playAnimation(this.getMoveAniName(),!0,null,function(t,e){a.moveAniEvent(e)},1)}},t.prototype.moveAniEvent=function(a){a&&"attack"==a.data.name&&this.shoot()},t.prototype.shoot=function(){},t.prototype.zombieGoHome=function(){this.jumping||a.prototype.zombieGoHome.call(this)},t.prototype.zombieWinMove=function(t){if(!this.hasJump){this.hasJump=!0;var e=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/e}a.prototype.zombieWinMove.call(this,t)},t.prototype.zombieScream=function(){p.pzaSoundManager.playAudio("Dolphin_Enter")},t.prototype.ashesDeath=function(){this.jumping?this.death(!1):a.prototype.ashesDeath.call(this)},t.prototype.onChangeIndex=function(t,e){this.jumping||a.prototype.onChangeIndex.call(this,t,e)},t.prototype.onWaterEnter=function(){var a=this;this.hasJump||(this.animation.node.y+=20,this.enterWater=!0,this.animation.playAnimation("jump1",!1,function(){a.jumping=!1,a.resumeBreak(),a.enterWater=!1,a.body.curTarget=null;var t=a.animation.findBone("zong");null!=t?a.baseData.logicPos.x+=a.baseData.zombieData.direction*(84.15-t.worldX):a.baseData.logicPos.x-=85;var e=r.pzaGameConfig.getZombieSpeed(a.baseData.zombieData.zombieType);a.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/e,a.playMoveAnimation(),u.pzaEffectManager.createWaterFlowerEffect(a.baseData.yIndex,a.baseData.logicPos,null)},function(){p.pzaSoundManager.playAudio("zombie_entering_water"),u.pzaEffectManager.createWaterFlowerEffect(a.baseData.yIndex,cc.v2(a.baseData.logicPos.x-85,a.baseData.logicPos.y),null)}))},t.prototype.onWaterExit=function(){this.animation.node.y-=20,this.enterWater=!1;var a=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/a},i([y],t)}(h.pzaBaseZombie));e.pzaDolphinRiderZombie=g,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaDoomBullet:[function(a,t,e){"use strict";cc._RF.push(t,"7105651O/ZNMaf3HrdseBE8","pzaDoomBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDoomBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../Plant/pzaAttackType"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.targetPos=null,t.targetXIndex=-1,t.targetYIndex=-1,t.logicPos=null,t.moveSpeed=800,t.atk=0,t.up=!0,t}return n(t,a),t.prototype.init=function(a,t,e,o,n){this.atk=a,this.logicPos=t,this.targetPos=e,this.targetXIndex=o,this.targetYIndex=n,this.node.scaleY=1,this.up=!0},t.prototype.logicUpdate=function(a){this.logicPos.y+=a*this.moveSpeed*(this.up?1:-1),this.node.setPosition(this.logicPos),this.up?this.logicPos.y>=560&&(this.logicPos.x=this.targetPos.x,this.up=!1,this.node.scaleY=-1):this.logicPos.y<=this.targetPos.y&&this.boom()},t.prototype.boom=function(){var a=this;this.close(),p.pzaSoundManager.playAudio("doomshroom"),u.pzaEffectManager.createDoomBoomEffect(this.targetPos);var t=d.pzaGameState.map.getBlockLogicPos(this.targetXIndex,this.targetYIndex,d.pzaGameState.map.getXInterval(this.targetXIndex)/2,50);window.pzaplantManager.holeMap.has(""+this.targetXIndex+this.targetYIndex)||u.pzaEffectManager.createDoomHoleEffect(t,this.targetXIndex,this.targetYIndex);var e=3.5*d.pzaGameState.map.getBlockWidth(),o=window.pzazombieManager.findFixRangeZombies(this.targetPos,e);null==o&&(o=[]),this.targetXIndex>=7&&null!=window.pzazombieManager.drZomBoss&&o.push(window.pzazombieManager.drZomBoss),o.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||t&&t.hurt(a.atk,null,c.pzaAttackType.BOOM)}),window.pzaMapManager.LadderMap.forEach(function(t,o){l.pzaUtil.getDistance(a.targetPos,t.logicPos)>e||(t.close(),window.pzaMapManager.LadderMap.delete(o))})},i([m],t)}(r.pzaBaseComponent));e.pzaDoomBullet=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDoomCannon:[function(a,t,e){"use strict";cc._RF.push(t,"0764dK0M4RI0YKB0Lc41ZJG","pzaDoomCannon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDoomCannon=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaNodeManager"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaUtil"),d=a("../../Common/pzaWorldEventManager"),h=a("../Bullet/pzaDoomBullet"),m=a("../pzaGameState"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cobPrefab=null,t.blinkTime=3,t.loadTime=6.25,t.cobFinishIdle=null,t.cobFinishIdle_eye=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.loadTime=6.25,this.blinkTime=u.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),m.pzaGameState.cobCannonCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_19,m.pzaGameState.cobCannonCount),m.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.loadTime-=t,m.pzaGameState.cobCannon&&m.pzaGameState.cobCannon.xIndex==this.baseData.xIndex&&m.pzaGameState.cobCannon.yIndex==this.baseData.yIndex?(this.cobFinishIdle="idle2",this.cobFinishIdle_eye="idle2_eye"):(this.cobFinishIdle="idle3",this.cobFinishIdle_eye="idle3_eye")},t.prototype.playNormalAni=function(){var a=this,t=function(){if(!a.baseData.plantData.cobLoadFinish&&a.loadTime<=0)return a.scheduleOnce(function(){c.pzaSoundManager.playAudio("shoop")},.2),void a.animation.playAnimation("out",!1,function(){a.baseData.plantData.cobLoadFinish=!0,t()});a.blinkTime>0?a.animation.playAnimation(a.baseData.plantData.cobLoadFinish?a.cobFinishIdle:"idle1",!1,t):(a.blinkTime=u.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation(a.baseData.plantData.cobLoadFinish?a.cobFinishIdle_eye:"idle1_eye",!1,t))};this.animation.playAnimation(this.baseData.plantData.cobLoadFinish?this.cobFinishIdle:"idle1",!1,t)},t.prototype.shoot=function(a,t,e){var o=this;this.baseData.plantData.cobLoadFinish&&(this.baseData.plantData.cobLoadFinish=!1,this.loadTime=36,m.pzaGameState.cobCannon=null,this.animation.playAnimation("attack",!1,this.playNormalAni.bind(this),function(){c.pzaSoundManager.playAudio("coblaunch");var n=cc.v2(o.baseData.logicPos.x+5,o.baseData.logicPos.y+400),i=s.pzaNodeManager.getUpEffectNode(),r=l.pzaGameCommonPool.requestInstant(o.cobPrefab,!1);if(null!=i&&null!=r){r.setParent(i),r.setPosition(n);var p=r.getComponent(h.pzaDoomBullet);p&&p.init(o.baseData.atk,n,a,t,e)}}))},t.prototype.launchCob=function(a){null!=a.data&&a.data==this.baseData&&this.shoot(a.pos,a.xIndex,a.yIndex)},t.prototype.close=function(){a.prototype.close.call(this),this.baseData==m.pzaGameState.cobCannon&&(m.pzaGameState.cobCannon=null)},i([g({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cobPrefab",void 0),i([y],t)}(f.pzaBasePlant);e.pzaDoomCannon=b,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaDoomBullet":"pzaDoomBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaDoomHoleEffect:[function(a,t,e){"use strict";cc._RF.push(t,"e1c4f49UvxH+oX3UHpxrfA2","pzaDoomHoleEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDoomHoleEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaMapManager"),l=a("../pzaGameState"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hole=null,t.holeFrames=[],t.holeTime=0,t.holeStep=1,t.mapXIndex=-1,t.mapYIndex=-1,t}return n(t,a),t.prototype.init=function(a,t){this.mapXIndex=a,this.mapYIndex=t,this.holeTime=0,this.holeStep=1,this.showHole(),window.pzaMapManager.addDoomHole(this)},t.prototype.recover=function(a,t,e,o){this.mapXIndex=a,this.mapYIndex=t,this.holeTime=e,this.holeStep=o,this.showHole(),window.pzaMapManager.addDoomHole(this)},t.prototype.logicUpdate=function(a){if(this.holeTime+=a,this.holeTime>=180)return this.close(),void window.pzaMapManager.removeDoomHole(this);this.holeTime>=90&&1==this.holeStep&&(this.holeStep=2,this.showHole())},t.prototype.clearHole=function(){this.holeTime=0,this.close(),window.pzaMapManager.removeDoomHole(this)},t.prototype.close=function(){a.prototype.close.call(this),window.pzaplantManager.holeMap.delete(""+this.mapXIndex+this.mapYIndex)},t.prototype.showHole=function(){var a=window.pzaMapManager.getBlockType(this.mapXIndex,this.mapYIndex);a==p.pzaBlockType.GRASS?l.pzaGameState.gameTimeType==l.pzaGameTimeType.DAY?this.hole.spriteFrame=1==this.holeStep?this.holeFrames[0]:this.holeFrames[1]:this.hole.spriteFrame=1==this.holeStep?this.holeFrames[2]:this.holeFrames[3]:a==p.pzaBlockType.POND?l.pzaGameState.gameTimeType==l.pzaGameTimeType.DAY?this.hole.spriteFrame=1==this.holeStep?this.holeFrames[4]:this.holeFrames[5]:this.hole.spriteFrame=1==this.holeStep?this.holeFrames[6]:this.holeFrames[7]:a==p.pzaBlockType.ROOF&&(this.hole.spriteFrame=1==this.holeStep?this.holeFrames[8]:this.holeFrames[9]),window.pzaplantManager.holeMap.set(""+this.mapXIndex+this.mapYIndex,1)},i([u({displayName:"\u6d1e",type:cc.Sprite})],t.prototype,"hole",void 0),i([u({displayName:"\u6d1e\u56fe",type:[cc.SpriteFrame]})],t.prototype,"holeFrames",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaDoomHoleEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaMapManager":"pzaMapManager","../pzaGameState":"pzaGameState"}],pzaDoomShroom:[function(a,t,e){"use strict";cc._RF.push(t,"36aa8kF/wpAbJVUIU/KcNOn","pzaDoomShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDoomShroom=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaUtil"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.animation.node.active=!0,t.plantData.sleeping?(this.animation.playAnimation("idle",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.attack()),c.pzaGameState.useShroom=!0},t.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.attack())},t.prototype.attack=function(){var a=this;this.baseData.hp=0,this.baseData.isDead=!0,r.pzaSoundManager.playAudio("JalapenoReady"),this.animation.playAnimation("attack",!1,function(){},function(){a.boom()})},t.prototype.boom=function(){var a=this;r.pzaSoundManager.playAudio("doomshroom"),window.pzaMapManager.shakeMap(),window.pzaMapManager.blink(2),window.pzaplantManager.removePlant(this.baseData),s.pzaEffectManager.createDoomHoleEffect(this.baseData.logicPos,this.baseData.xIndex,this.baseData.yIndex),this.death();var t=3.5*c.pzaGameState.map.getBlockWidth(),e=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,t);null==e&&(e=[]),this.baseData.xIndex>=5&&null!=window.pzazombieManager.drZomBoss&&e.push(window.pzazombieManager.drZomBoss),e.forEach(function(t){t&&t.hurt(a.baseData.atk,a.baseData,u.pzaAttackType.BOOM)});var o=""+this.baseData.xIndex+this.baseData.yIndex,n=window.pzaplantManager.plantEnvDataMap.get(o);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.BOOM)}var p=window.pzaplantManager.pumpkinDataMap.get(o);if(null!=p){var d=window.pzaplantManager.getPlantByData(p);d&&d.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.BOOM)}window.pzaMapManager.LadderMap.forEach(function(e,o){l.pzaUtil.getDistance(a.baseData.logicPos,e.logicPos)>t||(e.close(),window.pzaMapManager.LadderMap.delete(o))})},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},t.prototype.flaserDeath=function(){var a=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},i([f({displayName:"\u7761\u89c9\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"sleepAni",void 0),i([m],t)}(d.pzaBasePlant);e.pzaDoomShroom=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaDrZomBall:[function(a,t,e){"use strict";cc._RF.push(t,"a211c37MKtCApje1YozAb2U","pzaDrZomBall");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDrZomBall=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGroupEnum"),s=a("../../Common/pzaSpineController"),c=a("../../Common/pzaWorldEventManager"),u=a("../Plant/pzaPlantBody"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ballAni=null,t.fireAni=null,t.fireOutNode=null,t.fireAnis=[],t.bodyC=null,t.atk=0,t.yIndex=-1,t.fire=!1,t.xSpeed=60,t.logicPos=null,t.life=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.JALAPENO_BOOM,this.jalapenoBoom,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.ICE_SHROOM_BOOM,this.iceShroomBoom,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.MISSILE_DEATH,this.death,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.JALAPENO_BOOM,this.jalapenoBoom,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.ICE_SHROOM_BOOM,this.iceShroomBoom,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.MISSILE_DEATH,this.death,this)},t.prototype.init=function(a,t,e){var o=this;this.ballAni.node.active=!0,this.node.zIndex=7,this.fire=a,this.yIndex=t,this.atk=e,this.life=!1,this.ballAni.playAnimation(this.fire?"1qiu_1":"2qiu_1",!1,function(){o.node.zIndex=10*-o.yIndex+5,o.ballAni.playAnimation(o.fire?"1qiu_2":"2qiu_2",!0,null,null,.3),o.bodyC.enabled=!0,o.life=!0}),this.fireAni.node.active=!0,this.fireAni.playAnimation(a?"1FX":"2FX",!1,function(){o.fireAni.node.active=!1}),this.fireOutNode.active=!1,this.bodyC.enabled=!1;var n=h.pzaGameState.map.getXInterval(6)/2,i=h.pzaGameState.map.getBlockLogicPos(6,t,n,0);this.logicPos=i,this.node.setPosition(i),p.pzaCollisionManager.getInstance.addZombieByRow(this.yIndex,this)},t.prototype.close=function(){p.pzaCollisionManager.getInstance.delZombieByRow(this.yIndex,this),a.prototype.close.call(this)},t.prototype.logicUpdate=function(a){this.life&&(this.logicPos.x-=this.xSpeed*a,h.pzaGameState.map.fixMapYOffset(this.yIndex,this.logicPos,0),h.pzaGameState.map.getMapXIndex(this.logicPos)<0&&this.death())},t.prototype.lateUpdate=function(){null!=this.logicPos&&this.node.setPosition(this.logicPos)},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?(this.bodyC.poSource=this.node,this.bodyC):null},t.prototype.onCollision=function(a){if(null!=a&&a.node.group==l.pzaGroupEnum.PLANT){var t=a.node.getComponent(u.pzaPlantBody);this.colliderPlant(t&&t.baseData)}},t.prototype.colliderPlant=function(a){a&&!a.isDead&&this.yIndex==a.yIndex&&window.pzaplantManager.bangPlant(a.xIndex,a.yIndex,this.atk,null)},t.prototype.death=function(){var a=this;if(this.life=!1,!this.fire)return d.pzaEffectManager.createIceBoomEffect(this.logicPos),void this.close();this.ballAni.node.active=!1,this.fireOutNode.active=!0,this.fireAnis.forEach(function(t){t.playAnimation("fire2",!1,function(){a.close()})})},t.prototype.pauseSelf=function(){this.ballAni.pauseAnimation(),this.fireOutNode.active&&this.fireAnis.forEach(function(a){a.pauseAnimation()})},t.prototype.resumeSelf=function(){this.ballAni.resumeAnimation(),this.fireOutNode.active&&this.fireAnis.forEach(function(a){a.resumeAnimation()})},t.prototype.jalapenoBoom=function(a){this.fire||null==a||a.yIndex!=this.yIndex||this.death()},t.prototype.iceShroomBoom=function(){this.fire&&this.death()},i([z({displayName:"\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"ballAni",void 0),i([z({displayName:"\u55b7\u706b\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"fireAni",void 0),i([z({displayName:"\u706b\u7130\u6d88\u5931\u8282\u70b9",type:cc.Node})],t.prototype,"fireOutNode",void 0),i([z({displayName:"\u706b\u7130\u6d88\u5931\u52a8\u753b",type:[s.pzaSpineController]})],t.prototype,"fireAnis",void 0),i([z({displayName:"\u78b0\u649e",type:cc.CircleCollider})],t.prototype,"bodyC",void 0),i([f],t)}(r.pzaBaseComponent);e.pzaDrZomBall=y,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Plant/pzaPlantBody":"pzaPlantBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDrZomBoss:[function(a,t,e){"use strict";cc._RF.push(t,"ddb00KgyH1AK6EMwr2kkJQE","pzaDrZomBoss");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDrZomBoss=void 0;var r=a("../../Common/pzaGameManager"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaZombieEnum"),u=a("../Plant/pzaAttackType"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=a("./pzaBaseZombie"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.standing=!0,t.lifeTime=0,t.atk=5e3,t.normalZombieCd=-1,t.bungeeCd=-1,t.bangCarCd=-1,t.trampleCd=-1,t.extendHeadCd=-1,t.commonCd=-1,t.mustBungee=!1,t.mustBangCar=!1,t.fireBallCd=-1,t.backHeadTime=-1,t.releasing=!1,t.backFingerTime=0,t.fingerIndex=1,t.fingerZombies=new Set,t.fingerPos=[[cc.v2(-1025,690),cc.v2(-910,615),cc.v2(-785,630)],[cc.v2(-910,690),cc.v2(-785,615),cc.v2(-665,630)],[cc.v2(-785,690),cc.v2(-665,615),cc.v2(-545,630)]],t.blinkTime=0,t}return n(t,a),t.prototype.bindData=function(a){this.baseData=a,null!=a&&null!=a.yIndex&&(this.node.zIndex=-50),this.zombieHurtState=null,this.equipHurtState=null,this.bodyBindData=!1,this.hypnosisState=!1,this.zombieWin=!1,this.breakDirtTime=0,this.refreshHurtState(!0),this.refreshOrientation(),this.refreshFrostState(!0),this.standing=!0,this.releasing=!1,this.mustBungee=!1,this.mustBangCar=!1,this.lifeTime=0,this.commonCd=0,this.extendHeadCd=50,this.trampleCd=-1,this.bungeeCd=this.bangCarCd=this.fireBallCd=this.backHeadTime=-1,this.normalZombieCd=5,this.backFingerTime=0,this.fingerIndex=1,this.fingerZombies.clear(),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.INVINCIBLE,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_IMMOBILIZE,-1))},t.prototype.logicUpdate=function(a){var t=this;if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead&&(this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),this.blink(a),!this.baseData.isBeControlled()))if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),this.lifeTime+=a,this.commonCd=Math.max(0,this.commonCd-a),this.extendHeadCd=Math.max(0,this.extendHeadCd-a),this.normalZombieCd=Math.max(0,this.normalZombieCd-a),-1!=this.trampleCd&&(this.trampleCd=Math.max(0,this.trampleCd-a)),-1!=this.bungeeCd&&(this.bungeeCd=Math.max(0,this.bungeeCd-a)),-1!=this.bangCarCd&&(this.bangCarCd=Math.max(0,this.bangCarCd-a)),-1!=this.fireBallCd&&(this.fireBallCd=Math.max(0,this.fireBallCd-a)),-1!=this.backHeadTime&&(this.backHeadTime=Math.max(0,this.backHeadTime-a)),this.backFingerTime>0&&(this.backFingerTime-=a,this.backFingerTime<=0))this.playBackFingerAni(this.fingerIndex);else if(!(this.releasing||this.commonCd>0)){if(!this.standing)return-1!=this.fireBallCd&&this.fireBallCd<=0?void this.fireBall():void(-1!=this.backHeadTime&&this.backHeadTime<=0&&(this.backHeadTime=-1,this.releasing=!0,this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.INVINCIBLE,-1)),this.playBackHeadAni(function(){t.standing=!0,t.releasing=!1,t.randomExtendHeadCd(),t.randomCommonCd()})));if(this.mustBangCar)return this.mustBangCar=!1,this.mustBungee=!1,void this.bangCar();if(this.mustBungee)return this.mustBungee=!1,void this.putBungeeZombie();if(-1!=this.trampleCd&&this.trampleCd<=0&&this.hasTramplePlant())this.trample();else{if(-1!=this.bungeeCd&&this.bungeeCd<=0){var e=Math.random();return-1==this.bangCarCd||this.bangCarCd>0||e>.5?void this.putBungeeZombie():void this.bangCar()}this.extendHeadCd<=0?this.extendHead():this.normalZombieCd<=0&&this.putNormalZombie()}}},t.prototype.putNormalZombie=function(){var a=this;this.releasing=!0;var t=[1];this.lifeTime>=125?t=[3,4,5,6,7,8,15,18,21,24,25,26]:this.lifeTime>=80?t=[5]:this.lifeTime>=35&&(t=[3]);var e=l.pzaUtil.getRandomNum(0,4),o=l.pzaUtil.getRandomValueFromArray(t);this.node.zIndex=6,this.playHandZombieAni(e,function(){var a=window.pzazombieManager.createFixBlockZombieData(o,7,e);window.pzazombieManager.createZombie(a,!1)},function(){a.node.zIndex=-50,a.animation.playAnimation("idle",!0),a.randomZombieCd(),a.randomCommonCd(),a.releasing=!1})},t.prototype.putBungeeZombie=function(){this.releasing=!0;var a=l.pzaUtil.getRandomNum(1,3);this.node.zIndex=6;for(var t=this.fingerPos[a-1],e=0;e<=2;e++){for(var o=a-1+e,n=[],i=0;i<5;i++)window.pzaplantManager.hasPlant(o,i)&&n.push(i);(null==n||n.length<=0)&&(n=[0,1,2,3,4]);var r=l.pzaUtil.getRandomValueFromArray(n),p=window.pzazombieManager.createFixBlockZombieData(c.pzaZombieEnum.BUNGEE_ZOMBIE,o,r);p.logicPos.x=this.baseData.logicPos.x+t[e].x,p.zombieData.zomBossFinger=t[e].clone(),window.pzazombieManager.createZombie(p),this.fingerZombies.add(p)}this.playHandBungeeAni(a),this.fingerIndex=a,this.backFingerTime=6},t.prototype.bangCar=function(){var a=this;h.pzaGameState.bangCaring=!0,this.releasing=!0;var t=l.pzaUtil.getRandomNum(0,2),e=l.pzaUtil.getRandomNum(1,4);this.node.zIndex=6,p.pzaSoundManager.playAudio("hydraulic_short"),this.playBangCarAni(t,e,function(){for(var o=t;o<=t+2;o++)for(var n=e;n>=e-1;n--)window.pzaplantManager.bangPlant(o,n,a.atk,a.baseData);p.pzaSoundManager.playAudio("RVthrow"),window.pzaMapManager.trampleShakeMap()},function(){a.node.zIndex=-50,a.animation.playAnimation("idle",!0),a.randomBangCarCd(),a.randomCommonCd(),a.bangCarResetCd(),a.releasing=!1,h.pzaGameState.bangCaring=!1})},t.prototype.hasTramplePlant=function(){for(var a=0;a<=4;a++)if(window.pzaplantManager.hasPlant(5,a)||window.pzaplantManager.hasPlant(6,a)||window.pzaplantManager.hasPlant(7,a))return!0;return!1},t.prototype.trample=function(){var a=this;this.releasing=!0;for(var t=[],e=0;e<=4;e++)(window.pzaplantManager.hasPlant(5,e)||window.pzaplantManager.hasPlant(6,e)||window.pzaplantManager.hasPlant(7,e))&&(e>0&&e<=4&&!t.includes(e)&&t.push(e),e+1>0&&e+1<=4&&!t.includes(e+1)&&t.push(e+1));t.length<=0&&(t=[1,2,3,4]);var o=l.pzaUtil.getRandomValueFromArray(t);this.node.zIndex=6,p.pzaSoundManager.playAudio("hydraulic_short"),this.playTrampleAni(o,function(){for(var t=5;t<=7;t++)for(var e=o;e>=o-1;e--)window.pzaplantManager.bangPlant(t,e,a.atk,a.baseData);p.pzaSoundManager.playAudio("bossfootdown"),window.pzaMapManager.trampleShakeMap()},function(){a.node.zIndex=-50,a.animation.playAnimation("idle",!0),a.randomTrampleCd(),a.randomCommonCd(),a.releasing=!1})},t.prototype.extendHead=function(){var a=this;this.releasing=!0,this.node.zIndex=6,this.fireBallCd=10,this.playExtendHeadAni(function(){a.standing=!1,a.releasing=!1,a.baseData.buffData.removeBuff(s.pzaBuffType.UNABLE_SELECT),a.baseData.buffData.removeBuff(s.pzaBuffType.INVINCIBLE)})},t.prototype.fireBall=function(){var a=this,t=l.pzaUtil.getRandomNum(0,4),e=Math.random()>.5,o=function(){d.pzaEffectManager.createDrZomBallEffect(e,t,a.atk)};this.releasing=!0,this.fireBallCd=-1;var n=function(){a.animation.playAnimation("attack1_idle",!0),a.backHeadTime=6,a.releasing=!1};p.pzaSoundManager.playAudio("bossboulderattack"),e?this.playSpoutFireBallAni(t,o,n):this.playSpoutIceBallAni(t,o,n)},t.prototype.hurt=function(a,t,e){if(void 0===e&&(e=u.pzaAttackType.FLOOR_ATK),h.pzaGameState.critValue>0&&Math.random()<h.pzaGameState.critValue&&(a=Math.round(1.5*a)),this.baseData&&!this.baseData.isDead){if(this.baseData.hurtZombie(a),this.baseData.isDead||this.baseData.hp<=0)return window.pzazombieManager.clearAllZombie(),void this.playDeathAni(function(){r.pzaGameManager.passPart(cc.v2())});this.refreshHurtState(!1),this.animation.flash();var o="shieldhit"+l.pzaUtil.getRandomNum(1,2);p.pzaSoundManager.playAudio(o)}},t.prototype.refreshHurtState=function(a){if(a)this.zombieIntact();else if(null!=this.baseData&&null!=this.baseData.zombieData){var t=this.baseData.hp/this.baseData.maxHp;t<=.5?(this.zombieHurtState!=c.pzaHurtStateEnum.DYING&&this.zombieDying(),-1==this.bangCarCd&&(this.bangCarCd=0,this.mustBangCar=!0),-1==this.trampleCd&&this.randomTrampleCd()):t<=.8?(this.zombieHurtState!=c.pzaHurtStateEnum.HURT&&this.zombieHurt(),-1==this.bungeeCd&&(this.bungeeCd=0,this.mustBungee=!0)):this.zombieHurtState!=c.pzaHurtStateEnum.INTACT&&this.zombieIntact()}},t.prototype.refreshOrientation=function(){null!=this.baseData&&null!=this.baseData.zombieData&&(this.node.scaleX=-this.baseData.zombieData.direction)},t.prototype.zombieDying=function(){this.zombieHurtState=c.pzaHurtStateEnum.DYING,this.animation.setAnimationSkin("skin3")},t.prototype.zombieHurt=function(){this.zombieHurtState=c.pzaHurtStateEnum.HURT,this.animation.setAnimationSkin("skin2")},t.prototype.zombieIntact=function(){this.zombieHurtState=c.pzaHurtStateEnum.INTACT,this.animation.setAnimationSkin("skin1"),this.animation.node.color=new cc.Color(255,255,255,255)},t.prototype.playEnterAni=function(a){var t=this;this.animation.playAnimation("ruchang1",!1,function(){t.animation.playAnimation("idle",!0),a&&a(),p.pzaSoundManager.playBgm(p.pzaBGMName.ZOMBIEBOSS_BGM)},function(){p.pzaSoundManager.playAudio("bossfootdown"),window.pzaMapManager.trampleShakeMap()})},t.prototype.playExtendHeadAni=function(a){var t=this;this.animation.playAnimation("attack1_xia",!1,function(){t.animation.playAnimation("attack1_idle",!0),a&&a()},function(){p.pzaSoundManager.playAudio("hydraulic")})},t.prototype.playBackHeadAni=function(a){var t=this;this.animation.playAnimation("attack1_qi_1",!1,function(){t.animation.playAnimation("idle",!0),a&&a()},function(){t.baseData.buffData.removeBuff(s.pzaBuffType.FROST),p.pzaSoundManager.playAudio("bossfootdown"),window.pzaMapManager.trampleShakeMap()})},t.prototype.playHandZombieAni=function(a,t,e){var o="put1_"+(a+1);this.animation.playAnimation(o,!1,e,t),p.pzaSoundManager.playAudio("hydraulic_short")},t.prototype.playHandBungeeAni=function(a){var t="put"+(a+1)+"_1";this.animation.playAnimation(t,!1,null)},t.prototype.playBackFingerAni=function(a){var t=this,e=!1;if(this.fingerZombies.forEach(function(a){null!=a&&!a.isDead&&a.isBeControlled()&&(e=!0)}),e)this.backFingerTime=.1;else{this.fingerZombies.forEach(function(a){a.zombieData.zomBossFinger=null}),this.fingerZombies.clear();var o="put"+(a+1)+"_3";this.animation.playAnimation(o,!1,function(){t.releasing=!1,t.randomBungeeCd(),t.randomCommonCd()})}},t.prototype.playSpoutFireBallAni=function(a,t,e){var o="attack2_"+(5-a);this.animation.playAnimation(o,!1,e,t)},t.prototype.playSpoutIceBallAni=function(a,t,e){var o="attack3_"+(5-a);this.animation.playAnimation(o,!1,e,t)},t.prototype.playTrampleAni=function(a,t,e){var o="trample1_"+(5-a);this.animation.playAnimation(o,!1,e,t)},t.prototype.playBangCarAni=function(a,t,e,o){var n="attack4_"+(4*a+5-t);this.animation.playAnimation(n,!1,o,e)},t.prototype.playDeathAni=function(a){var t=this;this.animation.closeFlash(),this.refreshFrostState(!0),this.preventBreak();var e=function(){p.pzaSoundManager.playAudio("gargantudeath"),p.pzaSoundManager.playAudio("bossdie"),t.animation.playAnimation("death",!1,function(){t.animation.playAnimation("death_idle_2",!0),a&&a()},function(){p.pzaSoundManager.playAudio("explosion")})};this.standing?e():this.animation.playAnimation("death_idle_1",!1,function(){e()})},t.prototype.getZombieHeadWps=function(a){if(null==a)return null;var t=h.pzaGameState.map.getXInterval(8)/2,e=h.pzaGameState.map.getYInterval(a)/2,o=h.pzaGameState.map.getBlockLogicPos(8,a,t,e);return this.node&&this.node.parent?this.node.parent.convertToWorldSpaceAR(o):cc.v2(0,0)},t.prototype.pauseSelf=function(){this.animation.pauseAnimation()},t.prototype.randomZombieCd=function(){var a=this.baseData.hp/this.baseData.maxHp;this.normalZombieCd=a>=1?5:a>=.8?l.pzaUtil.getRandomFloatNum(4.5,5.5):a>=.5?l.pzaUtil.getRandomFloatNum(3.5,4.5):l.pzaUtil.getRandomFloatNum(1.5,2.5)},t.prototype.randomBungeeCd=function(){var a=this.baseData.hp/this.baseData.maxHp;this.bungeeCd=a>=.8?-1:l.pzaUtil.getRandomFloatNum(40,50)},t.prototype.randomBangCarCd=function(){var a=this.baseData.hp/this.baseData.maxHp;this.bangCarCd=a>=.8?-1:l.pzaUtil.getRandomFloatNum(40,50)},t.prototype.randomTrampleCd=function(){var a=this.baseData.hp/this.baseData.maxHp;this.trampleCd=a>=.5?-1:l.pzaUtil.getRandomFloatNum(55,65)},t.prototype.randomExtendHeadCd=function(){var a=this.baseData.hp/this.baseData.maxHp;this.extendHeadCd=a>=.8?50:l.pzaUtil.getRandomFloatNum(40,50)},t.prototype.randomCommonCd=function(){this.commonCd=l.pzaUtil.getRandomFloatNum(1,2)},t.prototype.bangCarResetCd=function(){this.extendHeadCd=50,this.trampleCd=40,this.bangCarCd=this.bungeeCd=65,this.normalZombieCd=5},t.prototype.updateRoleBuff=function(t){a.prototype.updateRoleBuff.call(this,t);var e=1,o=this.baseData.buffData.releaseBuff(s.pzaBuffType.FROST);null!=o&&(e-=o.buffValue),this.animation.changeAnimationTimeScale(e)},t.prototype.refreshFrostState=function(a){return a?(this.showFrost=!1,void(this.animation.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"))):null==this.baseData||this.animation.flashTime>0||this.baseData.zombieData.hypnosis?void 0:this.baseData.isDead||!this.baseData.buffData.hasBuff(s.pzaBuffType.FROST)||this.showFrost?!this.baseData.isDead&&this.baseData.buffData.hasBuff(s.pzaBuffType.FROST)||!this.showFrost?void 0:(this.showFrost=!1,void(this.animation.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"))):(this.showFrost=!0,void(this.animation.node.color=cc.Color.fromHEX(cc.color(),"#3B95FF")))},t.prototype.blink=function(a){if(!(this.baseData.hp/this.baseData.maxHp>.1))if(this.baseData.isDead||this.baseData.buffData.hasBuff(s.pzaBuffType.FROST))this.blinkTime>0&&(this.blinkTime=0);else{var t;this.blinkTime+=a,this.blinkTime>.6&&(this.blinkTime=0),t=this.blinkTime<=.3?255-this.blinkTime/.3*122:122+(this.blinkTime-.3)/.3*122,this.animation.node.color=new cc.Color(t,t,t,255)}},i([z],t)}(m.pzaBaseZombie));e.pzaDrZomBoss=y,cc._RF.pop()},{"../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie"}],pzaDropCard:[function(a,t,e){"use strict";cc._RF.push(t,"94b08Rs2DtFaZTn5L6m+n0u","pzaDropCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDropCard=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameConfig"),l=a("../../Common/pzaGameManager"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaSpineController"),u=a("../../Common/pzaSpriteFrameManager"),d=a("../../Common/pzaUIManager"),h=a("../../Common/pzaWorldEventManager"),m=a("../../Load/pzaPreLoadManager"),f=a("../../View/Battle/pzaNewPlantView"),z=a("../../View/pzaCommonMask"),y=a("../Data/pzaDropType"),g=a("../pzaEffectManager"),b=a("../pzaGameState"),v=cc._decorator,P=v.ccclass,D=v.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.arrow=null,t.cardBoard=null,t.cardBoardFrames=[],t.cardIcon=null,t.cardPrice=null,t.propNode=null,t.shovel=null,t.handbook=null,t.baconic=null,t.taco=null,t.sprinkler=null,t.paper=null,t.coinPackage=null,t.trophy=null,t.lightAni=null,t.curDropType=null,t.curPlantType=null,t.canClick=!1,t.clickCall=null,t}return n(t,a),t.prototype.showCard=function(a,t,e,o){void 0===o&&(o=null),this.node.stopAllActions(),this.node.opacity=255,this.node.setPosition(e),this.curDropType=a,this.curPlantType=t,this.clickCall=o,this.arrow.active=!1,this.canClick=!1,this.lightAni.node.active=!1,this.curDropType==y.pzaDropType.PLANT_CARD?(this.propNode.active=!1,this.cardBoard.node.active=!0,this.playCardDropAni(e)):(this.propNode.active=!0,this.cardBoard.node.active=!1,this.playPropDropAni(e))},t.prototype.playCardDropAni=function(a){var t=this,e=p.pzaGameConfig.getPlantConfig(this.curPlantType);u.pzaSpriteFrameManager.loadPlantCard(this.curPlantType,this.cardIcon),this.cardBoard.spriteFrame=this.cardBoardFrames[e.rareLevel],this.cardPrice.string=""+e.price,this.cardBoard.node.stopAllActions(),this.cardBoard.node.opacity=255,this.cardBoard.node.setPosition(cc.v2());var o=a.x>500?-150:Math.random()>.5?-50:50,n=a.y>-200?-60:-a.y-200;this.cardBoard.node.runAction(cc.sequence(cc.jumpTo(.4,cc.v2(o,n),60,1),cc.callFunc(function(){t.canClick=!0,t.showArrow(),s.pzaSoundManager.playAudio("poleland")})))},t.prototype.playPropDropAni=function(a){var t=this;this.shovel.active=this.curDropType==y.pzaDropType.SHOVEL,this.paper.active=this.curDropType==y.pzaDropType.CG_PAPER,this.handbook.active=this.curDropType==y.pzaDropType.HAND_BOOK,this.baconic.active=this.curDropType==y.pzaDropType.BACONIC,this.taco.active=this.curDropType==y.pzaDropType.TACO,this.sprinkler.active=this.curDropType==y.pzaDropType.SPRINKLER,this.coinPackage.active=this.curDropType==y.pzaDropType.COIN_PACKAGE,this.trophy.active=this.curDropType>=y.pzaDropType.SURVIVAL_TROPHY,this.propNode.stopAllActions(),this.propNode.opacity=255,this.propNode.setPosition(cc.v2());var e=a.x>500?-150:Math.random()>.5?-50:50,o=a.y>-200?-60:-a.y-200;this.propNode.runAction(cc.sequence(cc.jumpTo(.4,cc.v2(e,o),60,1),cc.callFunc(function(){t.canClick=!0,t.showArrow()})))},t.prototype.clickCard=function(){var a=this;if(this.canClick){s.pzaSoundManager.stopBgm(),5==b.pzaGameState.curChapter&&10==b.pzaGameState.curPart?s.pzaSoundManager.playAudio("finalfanfare"):s.pzaSoundManager.playAudio("winmusic"),z.pzaCommonMask.showMask(),b.pzaGameState.gamePause=!0,this.canClick=!1,this.arrow.active=!1,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.GAME_WIN,null);var t=this.curDropType==y.pzaDropType.PLANT_CARD?this.cardBoard.node:this.propNode,e=cc.v2(-t.x,-t.y-37);if(this.node.runAction(cc.sequence(cc.delayTime(this.curDropType==y.pzaDropType.COIN_PACKAGE?.6:0),cc.callFunc(function(){a.lightAni.node.active=!0,a.lightAni.node.setPosition(cc.v2(t.x,t.y+37)),a.lightAni.playAnimation("idle1",!1,function(){})}),cc.moveTo(3,e),cc.delayTime(1),cc.callFunc(function(){z.pzaCommonMask.hideMask(),t.runAction(cc.fadeOut(1)),b.pzaGameState.gameMode!=b.pzaGameMode.ZOMBIE_ENDLESS&&b.pzaGameState.gameMode!==b.pzaGameMode.VASE_ENDLESS&&(a.curDropType!=y.pzaDropType.COIN_PACKAGE?a.curDropType==y.pzaDropType.CG_PAPER?d.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.CG_PAPER_VIEW,null):d.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.NEW_PLANT_VIEW,function(t){(t&&t.getComponent(f.pzaNewPlantView)).showView(a.curDropType,a.curPlantType)}):l.pzaGameManager.getCurrentGame().partWin())}),cc.fadeOut(.5),cc.callFunc(function(){a.close()}))),this.curDropType==y.pzaDropType.COIN_PACKAGE)if(b.pzaGameState.gameMode==b.pzaGameMode.ZOMBIE_ENDLESS)this.createDiamond();else{var o=3;(b.pzaGameState.curChapter>5||b.pzaGameState.gameMode==b.pzaGameMode.SURVIVAL||b.pzaGameState.gameMode==b.pzaGameMode.ZOMBIE_ENERMY||b.pzaGameState.gameMode===b.pzaGameMode.VASE||b.pzaGameState.isMiniMode())&&(o=5),this.createPackageCoin(o)}else this.curDropType==y.pzaDropType.VASE_TROPHY?this.createPackageCoin(5):this.curDropType!=y.pzaDropType.SURVIVAL_TROPHY&&this.curDropType!=y.pzaDropType.ZOMBIE_TROPHY&&this.curDropType!=y.pzaDropType.MINIGAME_TROPHY||this.createDiamond();this.clickCall&&this.clickCall()}},t.prototype.createPackageCoin=function(a){var t=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y),e=cc.v2(this.node.x+this.propNode.x-112,this.node.y+this.propNode.y+132),o=cc.v2(this.node.x+this.propNode.x-65,this.node.y+this.propNode.y+182),n=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y+200),i=cc.v2(this.node.x+this.propNode.x+65,this.node.y+this.propNode.y+182),r=cc.v2(this.node.x+this.propNode.x+112,this.node.y+this.propNode.y+132);g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.GOLD_COIN,t,e),g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.GOLD_COIN,t,n),g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.GOLD_COIN,t,r),5==a&&(g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.GOLD_COIN,t,o),g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.GOLD_COIN,t,i)),window.pzaMapManager.showCoinUI()},t.prototype.createDiamond=function(){var a=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y),t=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y+200);g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.DIAMOND,a,t),window.pzaMapManager.showCoinUI()},t.prototype.showArrow=function(){var a=this.curDropType==y.pzaDropType.PLANT_CARD?this.cardBoard.node:this.propNode;this.arrow.active=!0,this.arrow.stopAllActions();var t=cc.v2(a.x,a.y+110);this.arrow.setPosition(t),this.arrow.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(t.x,t.y+20)),cc.moveTo(.2,cc.v2(t.x,t.y)))))},t.prototype.pauseSelf=function(){this.arrow.pauseAllActions()},t.prototype.resumeSelf=function(){this.arrow.resumeAllActions()},i([D({displayName:"\u7bad\u5934",type:cc.Node})],t.prototype,"arrow",void 0),i([D({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([D({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([D({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([D({displayName:"\u5361\u7247\u4ef7\u683c",type:cc.Label})],t.prototype,"cardPrice",void 0),i([D({displayName:"\u9053\u5177\u8282\u70b9",type:cc.Node})],t.prototype,"propNode",void 0),i([D({displayName:"\u94f2\u5b50",type:cc.Node})],t.prototype,"shovel",void 0),i([D({displayName:"\u56fe\u9274",type:cc.Node})],t.prototype,"handbook",void 0),i([D({displayName:"\u57f9\u6839",type:cc.Node})],t.prototype,"baconic",void 0),i([D({displayName:"\u7389\u7c73\u5377",type:cc.Node})],t.prototype,"taco",void 0),i([D({displayName:"\u6c34\u58f6",type:cc.Node})],t.prototype,"sprinkler",void 0),i([D({displayName:"\u7eb8\u6761",type:cc.Node})],t.prototype,"paper",void 0),i([D({displayName:"\u94b1\u888b",type:cc.Node})],t.prototype,"coinPackage",void 0),i([D({displayName:"\u5956\u676f",type:cc.Node})],t.prototype,"trophy",void 0),i([D({displayName:"\u5149\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"lightAni",void 0),i([P],t)}(r.pzaBaseComponent);e.pzaDropCard=S,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewPlantView":"pzaNewPlantView","../../View/pzaCommonMask":"pzaCommonMask","../Data/pzaDropType":"pzaDropType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDropCoin:[function(a,t,e){"use strict";cc._RF.push(t,"b02987q0AFJKLS8MgxGVLpM","pzaDropCoin");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDropCoin=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaBaseComponent"),s=a("../../Common/pzaGameCommonPool"),c=a("../../Common/pzaLocalData"),u=a("../../Common/pzaNodeManager"),d=a("../../Common/pzaSoundManager"),h=a("../../Common/pzaSpineController"),m=a("../../Common/pzaTipManager"),f=a("../../Common/pzaUtil"),z=a("../../Common/pzaWorldEventManager"),y=a("../Data/pzaDropType"),g=a("../pzaGameState"),b=cc._decorator,v=b.ccclass,P=b.property,D=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.animation=null,t.dropNode=null,t.dropSpri=null,t.dropFrameArr=[],t.poolPrefab=null,t.liveTime=0,t.liveTimeMax=5,t.disappearing=!1,t.picked=!1,t.clicked=!1,t.curDropType=null,t.isGameWin=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.GAME_WIN,this.winMove,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.AUTO_PICK,this.autoClick,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.PASS_PICK,this.winMove,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.GAME_WIN,this.gameWin,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.CLEAR_SCREEN,this.clearScreen,this),this.isGameWin=!1},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.GAME_WIN,this.winMove,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.AUTO_PICK,this.autoClick,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.PASS_PICK,this.winMove,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.GAME_WIN,this.gameWin,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.CLEAR_SCREEN,this.clearScreen,this)},t.prototype.clearScreen=function(){},t.prototype.gameWin=function(){this.isGameWin=!0},t.prototype.pauseSelf=function(){this.picked||(this.animation.pauseAnimation(),this.node.pauseAllActions())},t.prototype.resumeSelf=function(){this.animation.resumeAnimation(),this.node.resumeAllActions()},t.prototype.init=function(a,t){var e=this;this.clicked=!1,this.animation.node.active=!1,this.dropNode.active=!1,this.curDropType=a,cc.Tween.stopAllByTarget(this.node),a==y.pzaDropType.SILVER_COIN?(d.pzaSoundManager.playAudio("pickSilver"),this.animation.node.active=!0,this.animation.playAnimation("pr3",!0)):a==y.pzaDropType.GOLD_COIN?(this.animation.node.active=!0,d.pzaSoundManager.playAudio("moneyfalls"),this.animation.node.active=!0,this.animation.playAnimation("pr2",!0)):(this.animation.node.active=!0,d.pzaSoundManager.playAudio("chime"),this.animation.playAnimation("pr1_2",!0)),this.liveTime=0,this.disappearing=!1,this.picked=!1,this.node.stopAllActions(),this.node.opacity=255,this.node.setPosition(cc.v2(t.x,t.y+50*Math.random()));var o=f.pzaUtil.getRandomFloatNum(-40,40),n=t.x+o;n>500&&(n=500+o),n<-320&&(n=-320+o),n=Math.min(n,cc.winSize.width/2-100),this.node.runAction(cc.sequence(cc.jumpTo(.6,cc.v2(n,t.y+50*Math.random()),80,1),cc.callFunc(function(){g.pzaGameState.autoPickLeft<=0||e.autoClick()}))),window.pzaMapManager.DropCoinSet.add(this)},t.prototype.initPartRewardCoin=function(a,t,e){var o=this;this.dropNode.active=!1,this.curDropType=a,this.clicked=!1,a==y.pzaDropType.SILVER_COIN?(d.pzaSoundManager.playAudio("pickSilver"),this.animation.playAnimation("pr3",!0),this.animation.pauseAnimation()):a==y.pzaDropType.GOLD_COIN?(this.animation.playAnimation("pr2",!0),this.animation.pauseAnimation()):(d.pzaSoundManager.playAudio("pickDiamond"),this.animation.playAnimation("pr1_2",!0),this.animation.pauseAnimation()),this.liveTime=0,this.disappearing=!0,this.node.stopAllActions(),this.node.opacity=255,this.node.setPosition(t),this.node.runAction(cc.sequence(cc.moveTo(.5,e).easing(cc.easeQuarticActionOut()),cc.delayTime(.1),cc.callFunc(function(){o.moveToUI()})))},t.prototype.logicUpdate=function(a){this.disappearing||(this.liveTime+=a,this.liveTime>=this.liveTimeMax&&this.disappear())},t.prototype.disappear=function(){var a=this;window.pzaMapManager.DropCoinSet.delete(this),this.disappearing=!0,g.pzaGameState.pickCoinCount=0,g.pzaGameState.pickGoldCnt=0,this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){a.close.bind(a)})))},t.prototype.moveToUI=function(){var a,t=this;if(window.pzaMapManager.DropCoinSet.delete(this),this.disappearing=!0,this.picked=!0,null==(a=g.pzaGameState.coinMoveUIPos))return this.addCoin(),void this.close();var e=u.pzaNodeManager.getBattleUINode();this.node.setParent(e),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.5,a).easing(cc.easeQuinticActionOut()),cc.sequence(cc.delayTime(.3),cc.fadeOut(.2))),cc.callFunc(function(){t.addCoin(),t.close()})))},t.prototype.autoClick=function(){this.curDropType&&this.clickCoin()},t.prototype.clickCoin=function(){g.pzaGameState.gamePause||this.disappearing||this.clicked||(this.curDropType==y.pzaDropType.SILVER_COIN?d.pzaSoundManager.playAudio("pickSilver"):this.curDropType==y.pzaDropType.GOLD_COIN?d.pzaSoundManager.playAudio("pickGold"):d.pzaSoundManager.playAudio("pickDiamond"),this.moveToUI(),window.pzaMapManager.showCoinUI(),c.pzaLocalData.data.firstPickCoinTip||(m.pzaTipManager.showGameTip("\u5b58\u94b1\u6765\u4e70\u66f4\u9177\u7684\u9053\u5177\u5427\uff01"),c.pzaLocalData.data.firstPickCoinTip=!0,c.pzaLocalData.addDirty("firstPickCoinTip")),g.pzaGameState.pickGoldCnt++,p.default.instance().canGetAchieve(r.pzaAchieveType.ACH_9,g.pzaGameState.pickGoldCnt)&&g.pzaGameState.achieveArr.push(r.pzaAchieveType.ACH_9))},t.prototype.winMove=function(){this.disappearing||(this.moveToUI(),window.pzaMapManager.showCoinUI())},t.prototype.absorbMove=function(a){var t=this;this.disappearing||this.clicked||(window.pzaMapManager.DropCoinSet.delete(this),this.disappearing=!0,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.8,a).easing(cc.easeQuinticActionOut()),cc.sequence(cc.delayTime(.6),cc.fadeOut(.2))),cc.callFunc(function(){t.addCoin(),t.close()}))),window.pzaMapManager.showCoinUI())},t.prototype.addCoin=function(){var a=10;this.curDropType==y.pzaDropType.GOLD_COIN?a=50:this.curDropType==y.pzaDropType.DIAMOND&&(a=1e3),c.pzaLocalData.bpGetGold(a),c.pzaLocalData.data.coin+=a,d.pzaSoundManager.playAudio("pickCoin")},t.prototype.close=function(){this.poolPrefab?s.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([P({displayName:"\u52a8\u753b",type:h.pzaSpineController})],t.prototype,"animation",void 0),i([P({displayName:"\u6389\u843d\u8282\u70b9",type:cc.Node})],t.prototype,"dropNode",void 0),i([P({displayName:"\u6389\u843d\u7cbe\u7075",type:cc.Sprite})],t.prototype,"dropSpri",void 0),i([P({displayName:"\u6389\u843d\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"dropFrameArr",void 0),i([P(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([v],t)}(l.pzaBaseComponent);e.pzaDropCoin=D,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaDropType":"pzaDropType","../pzaGameState":"pzaGameState"}],pzaDropPlantCard:[function(a,t,e){"use strict";cc._RF.push(t,"7565dzkeSxE9Z+ln9bhzrSX","pzaDropPlantCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDropPlantCard=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameConfig"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpriteFrameManager"),c=a("../../Common/pzaWorldEventManager"),u=a("../pzaGameState"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardBoard=null,t.cardBoardFrames=[],t.cardIcon=null,t.mask=null,t.curPlantType=null,t.lifeTime=0,t.blink=!1,t.blinkTime=0,t.select=!1,t.canBeClick=!0,t.leftDropDis=0,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.cardIcon.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.cardIcon.node.scaleX=1,c.pzaWorldEventManager.addListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),this.cardIcon.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},t.prototype.show=function(a,t,e){this.curPlantType=a,this.lifeTime=0,this.blinkTime=0,this.blink=!1,this.select=!1,this.canBeClick=e;var o=p.pzaGameConfig.getPlantConfig(this.curPlantType);s.pzaSpriteFrameManager.loadPlantCard(this.curPlantType,this.cardIcon),this.cardBoard.spriteFrame=this.cardBoardFrames[o.rareLevel],this.mask.active=!1,this.node.setPosition(t),this.cardBoard.node.setPosition(0,0),this.cardIcon.node.scaleX=1,this.canBeClick||this.onDisable()},t.prototype.init=function(a,t,e){this.show(a,t,!0),this.showDropAni(t,e)},t.prototype.miniInit=function(a,t){this.show(a,t,!0),this.leftDropDis=p.pzaGameConfig.getRandomSunDis()},t.prototype.logicUpdate=function(a){if(this.canBeClick){if(!(this.leftDropDis>0))return this.lifeTime+=a,this.blink?(this.blinkTime+=a,void(this.blinkTime>=3&&!this.select&&this.close())):this.lifeTime>=10?(this.blink=!0,this.mask.active=!0,this.mask.stopAllActions(),this.mask.opacity=150,void this.mask.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeTo(.4,150))))):void 0;this.drop(a)}},t.prototype.drop=function(a){if(!(this.leftDropDis<=0)){var t=a*p.pzaGameConfig.autoSunSpeed;t>this.leftDropDis&&(t=this.leftDropDis),this.leftDropDis-=t,this.node.y=this.node.y-t}},t.prototype.showDropAni=function(a,t){this.cardBoard.node.stopAllActions(),this.cardBoard.node.setPosition(cc.v2());var e=a.x>550?-50:Math.random()>.5?-30:30,o=a.y>-290?-20:0;this.cardBoard.node.runAction(cc.sequence(cc.jumpTo(.4,cc.v2(e,o),60,1),cc.callFunc(function(){t&&t()})))},t.prototype.pauseSelf=function(){this.node.pauseAllActions(),this.mask.pauseAllActions(),this.cardBoard.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.node.resumeAllActions(),this.mask.resumeAllActions(),this.cardBoard.node.resumeAllActions()},t.prototype.clickCard=function(){var a=this;this.canBeClick&&!u.pzaGameState.gamePause&&(this.select=!this.select,this.select?(u.pzaGameState.selectCard=null,u.pzaGameState.selectPlant=null,this.scheduleOnce(function(){a.select&&(u.pzaGameState.selectCard=u.pzaSelectCardType.DROP_CARD,u.pzaGameState.selectPlant=a.curPlantType,a.select=!0,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null))},.3),u.pzaGameState.cobCannon=null,l.pzaSoundManager.playAudio("selectPlant"),this.blink?(this.mask.stopAllActions(),this.mask.opacity=170,this.mask.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.4,100),cc.fadeTo(.4,170))))):(this.mask.active=!0,this.mask.stopAllActions(),this.mask.opacity=150),window.pzaplantManager.dropPlantCards.forEach(function(t){t!=a&&null!=t&&t.disSelect()})):(u.pzaGameState.selectCard=null,u.pzaGameState.selectPlant=null,u.pzaGameState.cobCannon=null,this.mask.active=!1,this.blink&&(this.blink=!1,this.blinkTime=0)),this.leftDropDis>0&&(this.leftDropDis=0))},t.prototype.selectCard=function(){u.pzaGameState.selectCard!=u.pzaSelectCardType.DROP_CARD&&this.disSelect()},t.prototype.disSelect=function(){this.select&&(this.select=!1,this.mask.active=!1,this.blink&&(this.blink=!1,this.blinkTime=0))},t.prototype.plant=function(){return!!this.select&&(this.close(),!0)},t.prototype.close=function(){this.cardIcon&&this.cardIcon.node&&(this.cardIcon.node.scaleX=1),a.prototype.close.call(this),this.select&&(u.pzaGameState.selectCard=null,u.pzaGameState.selectPlant=null)},i([m({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([m({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([m({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([m({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([h],t)}(r.pzaBaseComponent);e.pzaDropPlantCard=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState"}],pzaDropType:[function(a,t,e){"use strict";cc._RF.push(t,"3c472Cq/v5PIIVOFNjzovjN","pzaDropType"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDropType=void 0,function(a){a[a.PLANT_CARD=1]="PLANT_CARD",a[a.SHOVEL=2]="SHOVEL",a[a.CG_PAPER=3]="CG_PAPER",a[a.HAND_BOOK=4]="HAND_BOOK",a[a.SILVER_COIN=5]="SILVER_COIN",a[a.GOLD_COIN=6]="GOLD_COIN",a[a.DIAMOND=7]="DIAMOND",a[a.BACONIC=8]="BACONIC",a[a.TACO=9]="TACO",a[a.SPRINKLER=10]="SPRINKLER",a[a.COIN_PACKAGE=11]="COIN_PACKAGE",a[a.SURVIVAL_TROPHY=12]="SURVIVAL_TROPHY",a[a.ZOMBIE_TROPHY=13]="ZOMBIE_TROPHY",a[a.VASE_TROPHY=14]="VASE_TROPHY",a[a.MINIGAME_TROPHY=15]="MINIGAME_TROPHY",a[a.TOKEN_COIN=19]="TOKEN_COIN",a[a.GARDEN_PLANT=20]="GARDEN_PLANT",a[a.GARDEN_CHOCOLATE=21]="GARDEN_CHOCOLATE",a[a.DROP_KEY=22]="DROP_KEY",a[a.PLANT_SKIN=23]="PLANT_SKIN",a[a.ACTIVITY_GIFT=24]="ACTIVITY_GIFT"}(e.pzaDropType||(e.pzaDropType={})),cc._RF.pop()},{}],pzaDropZombieCard:[function(a,t,e){"use strict";cc._RF.push(t,"155e1n5fZVF1JXbO5/HIHG9","pzaDropZombieCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDropZombieCard=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameConfig"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpriteFrameManager"),c=a("../../Common/pzaWorldEventManager"),u=a("../../utils/pzakc"),d=a("../pzaGameState"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardBoard=null,t.cardIcon=null,t.mask=null,t.curZombieType=null,t.lifeTime=0,t.blink=!1,t.blinkTime=0,t.select=!1,t.canBeClick=!0,t.leftDropDis=0,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.cardIcon.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.cardIcon.node.scaleX=1,c.pzaWorldEventManager.addListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),this.cardIcon.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},t.prototype.show=function(a,t,e){this.curZombieType=a,this.lifeTime=0,this.blinkTime=0,this.blink=!1,this.select=!1,this.canBeClick=e,s.pzaSpriteFrameManager.loadZombieCardIcon(this.curZombieType,this.cardIcon),this.mask.active=!1,this.node.setPosition(t),this.cardBoard.node.setPosition(0,0),this.cardIcon.node.scaleX=1,this.canBeClick||this.onDisable()},t.prototype.init=function(a,t){this.show(a,t,!0),this.showDropAni(t)},t.prototype.logicUpdate=function(a){if(this.canBeClick){if(!(this.leftDropDis>0))return this.lifeTime+=a,this.blink?(this.blinkTime+=a,void(this.blinkTime>=3&&!this.select&&this.close())):this.lifeTime>=10?(this.blink=!0,this.mask.active=!0,this.mask.stopAllActions(),this.mask.opacity=150,void this.mask.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeTo(.4,150))))):void 0;this.drop(a)}},t.prototype.drop=function(a){if(!(this.leftDropDis<=0)){var t=a*p.pzaGameConfig.autoSunSpeed;t>this.leftDropDis&&(t=this.leftDropDis),this.leftDropDis-=t,this.node.y=this.node.y-t}},t.prototype.showDropAni=function(){this.cardBoard.node.stopAllActions(),this.cardBoard.node.setPosition(cc.v2());var a=u.default.randomInt(-100,100),t=u.default.randomInt(-150,150);this.cardBoard.node.runAction(cc.sequence(cc.jumpTo(.4,cc.v2(a,t),60,1),cc.callFunc(function(){})))},t.prototype.pauseSelf=function(){this.node.pauseAllActions(),this.mask.pauseAllActions(),this.cardBoard.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.node.resumeAllActions(),this.mask.resumeAllActions(),this.cardBoard.node.resumeAllActions()},t.prototype.clickCard=function(){var a=this;this.canBeClick&&!d.pzaGameState.gamePause&&(this.select=!this.select,this.select?(d.pzaGameState.selectCard=null,d.pzaGameState.selectPlant=null,d.pzaGameState.selectZombie=null,this.scheduleOnce(function(){a.select&&(d.pzaGameState.selectCard=d.pzaSelectCardType.DROP_CARD,d.pzaGameState.selectZombie=a.curZombieType,a.select=!0,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null))},.3),d.pzaGameState.cobCannon=null,l.pzaSoundManager.playAudio("selectPlant"),this.blink?(this.mask.stopAllActions(),this.mask.opacity=170,this.mask.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.4,100),cc.fadeTo(.4,170))))):(this.mask.active=!0,this.mask.stopAllActions(),this.mask.opacity=150),window.pzaplantManager.dropZombieCards.forEach(function(t){t!=a&&null!=t&&t.disSelect()})):(d.pzaGameState.selectCard=null,d.pzaGameState.selectPlant=null,d.pzaGameState.cobCannon=null,this.mask.active=!1,this.blink&&(this.blink=!1,this.blinkTime=0)),this.leftDropDis>0&&(this.leftDropDis=0))},t.prototype.selectCard=function(){d.pzaGameState.selectCard!=d.pzaSelectCardType.DROP_CARD&&this.disSelect()},t.prototype.disSelect=function(){this.select&&(this.select=!1,this.mask.active=!1,this.blink&&(this.blink=!1,this.blinkTime=0))},t.prototype.plant=function(){return!!this.select&&(this.close(),!0)},t.prototype.close=function(){this.cardIcon&&this.cardIcon.node&&(this.cardIcon.node.scaleX=1),a.prototype.close.call(this),this.select&&(d.pzaGameState.selectCard=null,d.pzaGameState.selectPlant=null)},i([f({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([f({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([f({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([m],t)}(r.pzaBaseComponent);e.pzaDropZombieCard=z,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzakc":"pzakc","../pzaGameState":"pzaGameState"}],pzaDuckyTubeBucketZombie:[function(a,t,e){"use strict";cc._RF.push(t,"829a66bKDxAAJGwm9LZe+Pp","pzaDuckyTubeBucketZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDuckyTubeBucketZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaZombieEnum"),s=a("../Plant/pzaAttackType"),c=a("./pzaBaseZombie"),u=a("./pzaZombieSlot"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="zombie_head_1",t.equip1Slot=u.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.animation.node.stopAllActions(),this.animation.node.y=0},t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[u.pzaZombieSlotType.hat,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.hat).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.hat_iron+"1",113.23,-24.69,-90.94)).addState(new u.pzaZombieSlotAtt(2,u.pzaZombieSlotType.hat_iron+"2",110.61,-23.71,-90.94)).addState(new u.pzaZombieSlotAtt(3,u.pzaZombieSlotType.hat_iron+"3",106.81,-30.46,-90.94))]])},t.prototype.zombieHurtSound=function(a){if(a==s.pzaAttackType.KNOCK)r.pzaSoundManager.playAudio("bangzombie");else if(this.hasEquip){var t="shieldhit"+p.pzaUtil.getRandomNum(1,2);this.baseData.zombieData.zombieType==l.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE&&(t="plastichit"+p.pzaUtil.getRandomNum(1,2)),r.pzaSoundManager.playAudio(t)}else t="zombieHurt"+p.pzaUtil.getRandomNum(1,2),r.pzaSoundManager.playAudio(t)},i([h],t)}(c.pzaBaseZombie));e.pzaDuckyTubeBucketZombie=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaDuckyTubeConeZombie:[function(a,t,e){"use strict";cc._RF.push(t,"ec97fCWqtpGvpJ4aPzTm0vt","pzaDuckyTubeConeZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDuckyTubeConeZombie=void 0;var r=a("./pzaDuckyTubeZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=p.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[p.pzaZombieSlotType.hat,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.hat).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.hat+"1",75.21,-22.29,-90.94)).addState(new p.pzaZombieSlotAtt(2,p.pzaZombieSlotType.hat+"2",55.25,-22.53,-90.94)).addState(new p.pzaZombieSlotAtt(3,p.pzaZombieSlotType.hat+"3",42.77,-22.9,-90.94))]])},i([s],t)}(r.pzaDuckyTubeZombie));e.pzaDuckyTubeConeZombie=c,cc._RF.pop()},{"./pzaDuckyTubeZombie":"pzaDuckyTubeZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaDuckyTubeZombie:[function(a,t,e){"use strict";cc._RF.push(t,"045b3WlsgBOGY909sopESqJ","pzaDuckyTubeZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDuckyTubeZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaZombieEnum"),s=a("../pzaEffectManager"),c=a("./pzaBaseZombie"),u=a("./pzaZombieSlot"),d=a("./pzaZombieState"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.waterGrass=[],t.waterGrassFrame=[],t.garlicSkinName="zombie_head_1",t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,61.81,13.02,-93.13))]])},t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.animation.node.stopAllActions(),this.animation.node.y=0,this.closeWaterGrass()},t.prototype.breakWater=function(t){void 0===t&&(t=null),this.randomWaterGrass(),a.prototype.breakWater.call(this,t)},t.prototype.updateMove=function(t){var e=this,o=this.baseData.xIndex;a.prototype.updateMove.call(this,t),this.baseData.isDead||this.baseData.hp<=0||(o<0&&this.baseData.xIndex>=0?(null!=this.mask&&(this.mask.enabled=!0),this.curShadow&&this.curShadow.hideShadow(),this.animation.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,0)),cc.callFunc(function(){e.baseData.isDead||e.baseData.hp<=0||(e.playMoveAnimation(),null!=e.mask&&(e.mask.enabled=!1))})))):this.baseData.xIndex<0&&o>=0&&(null!=this.mask&&(this.mask.enabled=!0),this.playMoveAnimation(),s.pzaEffectManager.createWaterFlowerEffect(this.baseData.yIndex,this.baseData.logicPos,null),this.animation.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,0)),cc.callFunc(function(){e.curShadow&&e.curShadow.showShadow(),null!=e.mask&&(e.mask.enabled=!1)})))))},t.prototype.playDeathAnimation=function(t){if(this.closeWaterGrass(),null!=this.baseData&&this.baseData.xIndex>=0)return this.zombieState=d.pzaZombieState.DEAD,this.zombieHurtState=l.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),void this.animation.playAnimation(this.hasInWater?"death":"death2",!1,t);a.prototype.playDeathAnimation.call(this,t)},t.prototype.twineDeath=function(){var a=this;null!=this.mask&&(this.mask.enabled=!0),this.animation.node.runAction(cc.sequence(cc.moveTo(.4,cc.v2(0,-100)),cc.callFunc(function(){a.baseData.zombieDie(),a.death(!1)})))},t.prototype.death=function(t){this.animation.node.stopAllActions(),null!=this.mask&&(this.mask.enabled=!1),a.prototype.death.call(this,t)},t.prototype.randomWaterGrass=function(){var a=this;this.waterGrass.forEach(function(t){null!=t&&(Math.random()>=.7||(t.node.active=!0,t.spriteFrame=p.pzaUtil.getRandomValueFromArray(a.waterGrassFrame),t.node.scale=p.pzaUtil.getRandomFloatNum(2,5),t.node.angle=p.pzaUtil.getRandomFloatNum(0,360)))})},t.prototype.closeWaterGrass=function(){this.waterGrass.forEach(function(a){null!=a&&(a.node.active=!1)})},t.prototype.zombieHurtSound=function(t){if(this.hasEquip){var e="plastichit"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(e)}else a.prototype.zombieHurtSound.call(this,t)},i([f({displayName:"\u6c34\u8349",type:[cc.Sprite]})],t.prototype,"waterGrass",void 0),i([f({displayName:"\u6c34\u8349\u56fe",type:[cc.SpriteFrame]})],t.prototype,"waterGrassFrame",void 0),i([m],t)}(c.pzaBaseZombie);e.pzaDuckyTubeZombie=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaEffectManager:[function(a,t,e){"use strict";cc._RF.push(t,"3e827N46slE6aAMNV/k29mW","pzaEffectManager"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaEffectManager=void 0;var o=a("../Common/pzaGameConfig"),n=a("../Common/pzaMapManager"),i=a("../Common/pzaNodeManager"),r=a("../Common/pzaSoundManager"),p=a("../Common/pzaSpineController"),l=a("../Load/pzaBundleObjectPool"),s=a("../Load/pzaPreLoadManager"),c=a("./Data/pzaPlantEnum"),u=a("./Data/pzaZombieEnum"),d=a("./Effect/pzaAbsorbIronEquip"),h=a("./Effect/pzaBackPumpkin"),m=a("./Effect/pzaBaseEffect"),f=a("./Effect/pzaBattleFrameAnim"),z=a("./Effect/pzaBoomFireEffect"),y=a("./Effect/pzaBungeeZombieEffect"),g=a("./Effect/pzaButterEffect"),b=a("./Effect/pzaCornMortarShooter"),v=a("./Effect/pzaDoomHoleEffect"),P=a("./Effect/pzaDrZomBall"),D=a("./Effect/pzaDropCard"),S=a("./Effect/pzaDropCoin"),C=a("./Effect/pzaDropPlantCard"),_=a("./Effect/pzaFireBallEffect"),E=a("./Effect/pzaFogEffect"),M=a("./Effect/pzaFrozenEffect"),w=a("./Effect/pzaGoldHoleEffect"),T=a("./Effect/pzaHammerEffect"),B=a("./Effect/pzaIceGroundEffect"),A=a("./Effect/pzaLongFireEffect"),O=a("./Effect/pzaPlanternEffect"),I=a("./Effect/pzaRainEffect"),N=a("./Effect/pzaRicochetBulletEffect"),G=a("./Effect/pzaShovelPlantShooter"),R=a("./Effect/pzaShowGrassEffect"),L=a("./Effect/pzaSixPlanternShooter"),k=a("./Effect/pzaTangleKelpEffect"),Z=a("./Effect/pzaWaterLightEffect"),U=a("./Effect/pzaWordEffect"),x=a("./Effect/pzaZombieHoleEffect"),F=a("./Zombie/pzaZombieSlot"),j=a("./pzaGameState"),W=a("./pzaSpineTool"),H=function(){function a(){}return a.createReadyWord=function(a){var t=i.pzaNodeManager.getUpBgNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.WORD_EFFECT,!1,function(e,o){if(null!=e||null==o)return console.error(e),void(a&&a());o.setParent(t),o.zIndex=1;var n=o.getComponent(U.pzaWordEffect);n&&n.playReadyPlant(a)})},a.createLargeWord=function(a,t){var e=i.pzaNodeManager.getUpBgNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.WORD_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(e),n.zIndex=1;var i=n.getComponent(U.pzaWordEffect);null!=i&&(t?i.playLastWave():i.playLargeWave(a))}else console.error(o)})},a.createIceGround=function(a,t,e,o){void 0===o&&(o=!1);var n=i.pzaNodeManager.getDownEffectNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ICE_GROUND,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(B.pzaIceGroundEffect);p&&p.init(a,t,e,o)}else console.error(i)})},a.createFogEffect=function(a,t){var e=i.pzaNodeManager.getUpBgNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.FOG_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(e);var i=window.pzaplantManager.getAllPlant(c.pzaPlantEnum.PLANTERN),r=n.getComponent(E.pzaFogEffect);r&&r.init(a,t,i),window.pzaMapManager.fog=r}else console.error(o)})},a.createAbsorbIronEquip=function(a,t,e,o){void 0===o&&(o=0);var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ABSORB_IRON_EQUIP,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(d.pzaAbsorbIronEquip);p&&p.init(a,t,e,o)}else console.error(i)})},a.createLaddyEff=function(a,t){var e=i.pzaNodeManager.getPlantZombieNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ABSORB_IRON_EQUIP,function(o,n){if(null==o&&null!=n){n.setParent(e);var i=n.getComponent(d.pzaAbsorbIronEquip);i&&i.labbyInit(a,t);var r=""+t.xIndex+t.yIndex;t.close(),window.pzaMapManager.LadderMap.delete(r)}else console.error(o)})},a.createGroveEffect=function(){var a=i.pzaNodeManager.getUpBgNode();null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.GROVE_EFFECT,!1,function(t,e){null==t&&null!=e?e.setParent(a):console.error(t)})},a.createShowGrassEffect=function(a,t,e){void 0===e&&(e=!0);var o=i.pzaNodeManager.getGrassNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.SHOW_GRASS_EFFECT,!1,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(R.pzaShowGrassEffect);e&&r&&r.showStaticGrass(a),r&&r.showGrass(a,t)}else console.error(n)})},a.createFrameEffect=function(a,t,e,o){void 0===o&&(o=1);var n=i.pzaNodeManager.getUpEffectNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(a,function(a,i){if(null==a&&null!=i){i.setParent(n),i.setPosition(t),i.scale=o;var r=i.getComponent(f.pzaBattleFrameAnim);r&&r.showAnim(e)}else console.error(a)})},a.createPlantEffect=function(a,t,e){var o=s.pzaResourceUrl.PLANT_EFFECT;t==n.pzaBlockType.POND?(o=s.pzaResourceUrl.PLANT_WATER_EFFECT,r.pzaSoundManager.playAudio("zombie_entering_water",.1)):r.pzaSoundManager.playAudio("plantplant",.1);var p=i.pzaNodeManager.getUpEffectNode();null!=p&&l.pzaBundleObjectPool.requestInstantByUrl2(o,function(t,o){if(null==t&&null!=o){o.setParent(p),o.setPosition(a);var n=o.getComponent(m.pzaBaseEffect);n&&n.showEffect(null,e)}else console.error(t)})},a.createStarFruitEffect=function(a,t){void 0===t&&(t=!0);var e=s.pzaResourceUrl.PLANT_EFFECT;t&&r.pzaSoundManager.playAudio("pickDiamond",.1);var o=i.pzaNodeManager.getUpEffectNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(e,function(t,e){if(null==t&&null!=e){e.setParent(o),e.setPosition(a);var n=e.getComponent(m.pzaBaseEffect);n&&n.showStarEffect()}else console.error(t)})},a.createDropCard=function(a,t,e,o){void 0===o&&(o=null);var n=i.pzaNodeManager.getBattleUINode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DROP_CARD,!1,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(D.pzaDropCard);p&&p.showCard(a,t,e,o)}else console.error(i)})},a.createDirtEffect=function(a,t,e,o){var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.DIRT_EFFECT,function(i,r){if(null==i&&null!=r){r.setParent(n),r.setPosition(e),r.zIndex=10*-t+6;var p=r.getComponent(m.pzaBaseEffect);p&&p.showEffect(a,o)}else console.error(i)})},a.createMineBoomEffect=function(a){var t=i.pzaNodeManager.getPlantZombieNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.MINEBOOM_EFFECT,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a);var n=o.getComponent(m.pzaBaseEffect);n&&n.showEffect("blow",null)}else console.error(e)})},a.createHammerEffect=function(a,t){var e=i.pzaNodeManager.getUpEffectNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.HAMMER_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(e),n.setPosition(a);var i=n.getComponent(T.pzaHammerEffect);t?i&&i.onlyShowHammer():i&&i.showEffect()}else console.error(o)})},a.createDropCoin=function(a,t){var e=i.pzaNodeManager.getUpBgNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.DROP_COIN,function(o,n){if(null==o&&null!=n){n.setParent(e);var i=n.getComponent(S.pzaDropCoin);i&&i.init(a,t)}else console.error(o)})},a.createPartRewardCoin=function(a,t,e){var o=i.pzaNodeManager.getUpBgNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.DROP_COIN,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(S.pzaDropCoin);r&&r.initPartRewardCoin(a,t,e)}else console.error(n)})},a.createWaterLightEffect=function(a,t){void 0===a&&(a=cc.v2(0,0)),void 0===t&&(t=0);var e=i.pzaNodeManager.getDownEffectNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.WATER_LIGHT_EFFECT,!1,function(o,n){null==o&&null!=n?(n.setParent(e),n.setPosition(a),n.zIndex=-2,t>0&&n.getComponent(Z.pzaWaterLightEffect).setMapId(t)):console.error(o)})},a.createWaterFlowerEffect=function(a,t,e,o){void 0===o&&(o=1);var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.WATER_FLOWER_EFFECT,function(i,r){if(null==i&&null!=r){r.scale=o,r.zIndex=10*-a+10,r.setParent(n),r.setPosition(t);var p=r.getComponent(m.pzaBaseEffect);p&&p.showEffect(null,e)}else console.error(i)})},a.createBoomFireEffect=function(a,t,e,o,n){void 0===n&&(n=!1);var r=i.pzaNodeManager.getPlantZombieNode();if(null!=r){var p=!1;n&&(p=!0),l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.BOOM_FIRE_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(r),i.setPosition(e),i.zIndex=10*-a+10;var l=i.getComponent(z.pzaBoomFireEffect);l&&l.showEffect(t,o,p)}else console.error(n)})}},a.createFireBallEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.BOOM_BALL_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(e),i.zIndex=10*-a+10;var r=i.getComponent(_.pzaFireBallEffect);r&&r.showEffect(t)}else console.error(n)})},a.createTangleKelpEffect=function(a,t,e){var o=i.pzaNodeManager.getUpEffectNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.TANGLEKELP_EFFECT,!1,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(a);var r=i.getComponent(k.pzaTangleKelpEffect);r&&r.showEffect(t,e)}else console.error(n)})},a.createBackPumpkin=function(a,t){var e=i.pzaNodeManager.getPlantZombieNode();null!=e&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(t,!1,function(o,n){if(null==o&&null!=n){n.setParent(e),t==s.pzaResourceUrl.BACK_LILYSHELL?n.setPosition(cc.v2(a.logicPos.x,a.logicPos.y+8.5)):n.setPosition(a.logicPos);var i=n.getComponent(h.pzaBackPumpkin);i&&i.bindData(a)}else console.error(o)})},a.createBackPumpkinFire=function(a){var t=i.pzaNodeManager.getPlantZombieNode();null!=t&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.BACK_PUMPKINFIRE,!1,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a.logicPos);var n=o.getComponent(h.pzaBackPumpkin);n&&n.bindData(a)}else console.error(e)})},a.createBackPumpkinPurple=function(a){var t=i.pzaNodeManager.getPlantZombieNode();null!=t&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.BACK_PUMPKINPURPLE,!1,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a.logicPos);var n=o.getComponent(h.pzaBackPumpkin);n&&n.bindData(a)}else console.error(e)})},a.createDoomHoleEffect=function(a,t,e,o,n,r){void 0===o&&(o=!1);var p=i.pzaNodeManager.getDownEffectNode();null!=p&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DOOM_HOLE_EFFECT,!1,function(a,i){if(null==a&&null!=i){i.setParent(p),i.setPosition(j.pzaGameState.map.getBlockLogicPos(t,e,64,52));var l=i.getComponent(v.pzaDoomHoleEffect);o?l&&l.recover(t,e,n,r):l&&l.init(t,e)}else console.error(a)})},a.createGoldHoleEffect=function(a,t,e,o,n,r){void 0===o&&(o=!1);var p=i.pzaNodeManager.getDownEffectNode();null!=p&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.GOLD_HOLE_EFFECT,!1,function(i,l){if(null==i&&null!=l){l.setParent(p),l.setPosition(a);var s=l.getComponent(w.pzaGoldHoleEffect);o?s&&s.recover(t,e,n,r):s&&s.init(t,e)}else console.error(i)})},a.createZombieHoleEffect=function(a,t,e,o,n,r){void 0===o&&(o=!1);var p=i.pzaNodeManager.getDownEffectNode();null!=p&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.ZOMBIE_HOLE_EFFECT,!1,function(i,l){if(null==i&&null!=l){l.setParent(p),l.setPosition(a);var s=l.getComponent(x.pzaZombieHoleEffect);o?s&&s.recover(t,e,n,r):s&&s.init(t,e)}else console.error(i)})},a.createDoomBoomEffect=function(a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DOOM_BOOM_EFFECT,!1,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a);var n=o.getComponent(m.pzaBaseEffect);n&&n.showEffect(null,null)}else console.error(e)})},a.createCobBoomEffect=function(a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.COB_BOOM_EFFECT,!1,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a);var n=o.getComponent(m.pzaBaseEffect);n&&n.showEffect(null,null)}else console.error(e)})},a.createCobBoomHoleEffect=function(a){var t=i.pzaNodeManager.getDownEffectNode();null!=t&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.COB_BOOM_HOLE,!1,function(e,o){null==e&&null!=o?(o.setParent(t),o.setPosition(a)):console.error(e)})},a.createFumeShroomEffect=function(a,t,e,o){void 0===o&&(o="blow2");var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.FUME_SHROOM_EFFECT,function(i,r){if(null==i&&null!=r){r.setParent(n),r.setPosition(t),r.zIndex=10*-a+10;var p=r.getComponent(m.pzaBaseEffect);p&&p.showEffect(o,e)}else console.error(i)})},a.createIceFumeShroomEffect=function(a,t,e,o){void 0===o&&(o=null);var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ICE_FUME_SHROOM_EFFECT,function(i,r){if(null==i&&null!=r){r.setParent(n),r.setPosition(t),r.zIndex=10*-a+10;var p=r.getComponent(m.pzaBaseEffect);p&&p.showEffect(o,e)}else console.error(i)})},a.createGloomShroomEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.GLOOM_SHROOM_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(t),i.zIndex=10*-a+10;var r=i.getComponent(m.pzaBaseEffect);r&&r.showEffect(null,e)}else console.error(n)})},a.createFireGloomShroomEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.FIRE_SHROOM_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(t),i.zIndex=10*-a+10;var r=i.getComponent(m.pzaBaseEffect);r&&r.showEffect(null,e)}else console.error(n)})},a.createIceBoomReadyEffect=function(a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ICE_BOOMREADY_EFFECT,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a);var n=o.getComponent(m.pzaBaseEffect);n&&n.showEffect(null,null)}else console.error(e)})},a.createIceBoomEffect=function(a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ICE_BOOM_EFFECT,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a);var n=o.getComponent(m.pzaBaseEffect);n&&n.showEffect(null,null)}else console.error(e)})},a.createFrozenEffect=function(a){var t=i.pzaNodeManager.getPlantZombieNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.FROZEN_EFFECT,function(e,o){if(null==e&&null!=o){o.setParent(t);var n=o.getComponent(M.pzaFrozenEffect);n&&n.bindData(a)}else console.error(e)})},a.frozenTest=function(){},a.createNutHurtEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&null!=a&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.NUT_HURT_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(o),i.zIndex=e,i.setPosition(a);var r=i.getComponent(m.pzaBaseEffect);r&&r.showEffect(t,null)}else console.error(n)})},a.createRainNightEffect=function(){var a=i.pzaNodeManager.getUpBgNode();null!=a&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.RAIN_NIGHT_EFFECT,!1,function(t,e){null==t&&null!=e?e.setParent(a):console.error(t)})},a.createRainEffect=function(a,t){var e=i.pzaNodeManager.getDownEffectNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.RAIN_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(e),n.setPosition(a);var i=n.getComponent(I.pzaRainEffect);i&&i.showAnim(t)}else console.error(o)})},a.createDropPlantCard=function(a,t,e){var o=i.pzaNodeManager.getCardsNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DROP_PLANT_CARD,!1,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(C.pzaDropPlantCard);window.pzaplantManager.dropPlantCards.add(r),r&&r.init(a,t,e)}else console.error(n)})},a.createAutoCard=function(a){var t=i.pzaNodeManager.getCardsNode();if(null!=t){var e=o.pzaGameConfig.getRandomSunPos();l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DROP_PLANT_CARD,!1,function(o,n){if(null==o&&null!=n){n.setParent(t);var i=n.getComponent(C.pzaDropPlantCard);window.pzaplantManager.dropPlantCards.add(i),i&&i.miniInit(a,e)}else console.error(o)})}},a.createButterEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.BUTTER_EFFECT,function(n,i){null==n&&null!=i?(i.setParent(o),i.setPosition(t),i.zIndex=e,i.getComponent(g.pzaButterEffect).bindData(a)):console.error(n)})},a.createPlanternEffect=function(a,t){var e=i.pzaNodeManager.getUpEffectNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.PLANTERN_EFFECT,!1,function(o,n){null==o&&null!=n?(n.setParent(e),n.setPosition(t),n.getComponent(O.pzaPlanternEffect).bindData(a)):console.error(o)})},a.createSquashEffect=function(a){var t=i.pzaNodeManager.getDownEffectNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.SQUASH_EFFECT,function(e,o){null==e&&null!=o?(o.setParent(t),o.setPosition(a),o.getComponent(m.pzaBaseEffect).showEffect("blow",null)):console.error(e)})},a.createHypnoEffect=function(a,t){var e=i.pzaNodeManager.getPlantZombieNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.HYPNO_EFFECT,function(o,n){null==o&&null!=n?(n.setParent(e),n.zIndex=t,n.setPosition(a),n.getComponent(m.pzaBaseEffect).showEffect("blow",null)):console.error(o)})},a.createImitaterEffect=function(a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.IMITATER_EFFECT,function(e,o){null==e&&null!=o?(o.setParent(t),o.setPosition(a),o.getComponent(m.pzaBaseEffect).showEffect(null,null)):console.error(e)})},a.createSmokeEffect=function(a,t){var e=i.pzaNodeManager.getUpEffectNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.SMOKE_EFFECT,function(o,n){null==o&&null!=n?(n.setParent(e),n.setPosition(t),n.getComponent(m.pzaBaseEffect).showEffect(a,null)):console.error(o)})},a.createDrZomBallEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.DR_ZOM_BALL,!1,function(n,i){null==n&&null!=i?(i.setParent(o),i.getComponent(P.pzaDrZomBall).init(a,t,e)):console.error(n)})},a.createBungeeZombieEffect=function(a){var t=i.pzaNodeManager.getPlantZombieNode();null!=t&&l.pzaBundleObjectPool.requestInstantByUrl(s.pzaResourceUrl.BUNGEE_ZOMBIE_EFFECT,!1,function(e,o){null==e&&null!=o?(o.setParent(t),o.getComponent(y.pzaBungeeZombieEffect).init(a)):console.error(e)})},a.createRicochetBulletEffect=function(a,t){var e=i.pzaNodeManager.getBulletNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.RICOCHET_BULLET_EFFECT,function(o,n){if(null==o&&null!=n){n.setParent(e),n.setPosition(a);var i=n.getComponent(N.pzaRicochetBulletEffect);i&&i.init(t)}else console.error(o)})},a.createPolevaultingEffect=function(a,t){var e=i.pzaNodeManager.getPlantZombieNode();null!=e&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.POLEVAULTING_EFFECT,function(o,n){null==o&&null!=n?(n.setParent(e),n.setPosition(a),n.zIndex=t,n.getComponent(m.pzaBaseEffect).showEffect(null,null)):console.error(o)})},a.createAshesEffect=function(a,t,e,o,n,r,c){void 0===c&&(c="blow");var d=i.pzaNodeManager.getPlantZombieNode();if(null!=d){var h=s.pzaResourceUrl.NORMAL_ASHES_EFFECT;l.pzaBundleObjectPool.requestInstantByUrl2(h,function(i,l){if(null==i&&null!=l){l.setParent(d),l.setPosition(t),l.scale=n,l.zIndex=o,l.scaleX=-e*n;var s=cc.instantiate(r);s.setParent(l),s.setPosition(0,0);var h=s.getComponent(sp.Skeleton);h.premultipliedAlpha=!0,a==u.pzaZombieEnum.TALLNUT_ZOMBIE?W.pzaSpineTool.instance().setSlotAtt(h,"Dbody1",F.pzaZombieSlotType.head_tallnut,246.08,-7.02,-90):a==u.pzaZombieEnum.Nut_Zombie||a==u.pzaZombieEnum.Nut_Zombie1||a==u.pzaZombieEnum.Nut_Zombie1_Conehead||a==u.pzaZombieEnum.Nut_Zombie1_Bucket?W.pzaSpineTool.instance().setSlotAtt(h,F.pzaZombieSlotType.head_nut,F.pzaZombieSlotType.head_nut+"3",244.29,-2.07,-90.45):a==u.pzaZombieEnum.Nut_Zombie2||a==u.pzaZombieEnum.Nut_Zombie2_Bucket||a==u.pzaZombieEnum.Nut_Zombie2_Conehead?W.pzaSpineTool.instance().setSlotAtt(h,F.pzaZombieSlotType.head_nut,F.pzaZombieSlotType.head_nut_hole+"3",244.29,-2.07,-90.45):a==u.pzaZombieEnum.ZOMBONI2?(W.pzaSpineTool.instance().setSlotAtt(h,F.pzaZombieSlotType.ice_car,F.pzaZombieSlotType.ice_car+"1",493.34,-14.36,-90.31),W.pzaSpineTool.instance().setSlotAtt(h,F.pzaZombieSlotType.ice_car_b,F.pzaZombieSlotType.ice_car_b+"1",-4.91,-3.07,-90.31)):a==u.pzaZombieEnum.ZOMBONI3?(W.pzaSpineTool.instance().setSlotAtt(h,F.pzaZombieSlotType.ice_car,F.pzaZombieSlotType.ice_car+"1",493.34,-14.36,-90.31),W.pzaSpineTool.instance().setSlotAtt(h,F.pzaZombieSlotType.ice_car_b,F.pzaZombieSlotType.ice_car_b+"1",-4.91,-3.07,-90.31)):a==u.pzaZombieEnum.POGO_ZOMBIE2?W.pzaSpineTool.instance().setSlotAtt(h,F.pzaZombieSlotType.head_nut,F.pzaZombieSlotType.head_nut+"1",0,0):a==u.pzaZombieEnum.LADDER_ZOMBIE4?W.pzaSpineTool.instance().setSlotAtt(h,F.pzaZombieSlotType.head_nut,F.pzaZombieSlotType.head_nut+"1",0,0,0):a==u.pzaZombieEnum.SCREEN_DOOR_NUT?W.pzaSpineTool.instance().setSlotAtt(h,F.pzaZombieSlotType.head_nut,F.pzaZombieSlotType.head_nut+"1",198,2.55,-90):a==u.pzaZombieEnum.SCREEN_DOOR_HOLE?W.pzaSpineTool.instance().setSlotAtt(h,F.pzaZombieSlotType.head_nut,F.pzaZombieSlotType.head_nut_hole+"1",198,2.55,-90):a==u.pzaZombieEnum.POLEVAULTING_ZOMBIE2&&W.pzaSpineTool.instance().setSlotAtt(h,F.pzaZombieSlotType.head_nut,F.pzaZombieSlotType.head_nut+"1",194.65,15.01,-88.24);var f=l.getComponent(p.pzaSpineController);f.spineAnimation&&f.spineAnimation.node.destroy(),f.spineAnimation=h;var z=l.getComponent(m.pzaBaseEffect);z.showEffect(c,null),h.setMaterial(0,z.baseSpineMaterial)}else console.error(i)})}},a.createLongFireEffect=function(a,t,e,o){var n=i.pzaNodeManager.getUpEffectNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.LONGFIRE_EFFECT,function(i,r){if(null==i&&null!=r){r.setParent(n),r.setPosition(a);var p=r.getComponent(A.pzaLongFireEffect);p&&p.showEffect(a,t,e,o)}else console.error(i)})},a.createShooter=function(a,t,e){var o=i.pzaNodeManager.getUpEffectNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(t,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(a);var r=null;t==s.pzaResourceUrl.SIX_PLANTERN_SHOOTER?r=i.getComponent(L.pzaSixPlanternShooter):t==s.pzaResourceUrl.SHOVEL_PLANT_SHOOTER&&(r=i.getComponent(G.pzaShovelPlantShooter)),r&&r.showShooter(e)}else console.error(n)})},a.createHitShooter=function(a,t,e){var o=i.pzaNodeManager.getUpEffectNode();null!=o&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.CORN_MORTAR_SHOOTER,function(n,i){if(null==n&&null!=i){i.setParent(o),t=cc.v2(a.logicPos.x,a.logicPos.y+70),i.setPosition(t);var r=i.getComponent(b.pzaCornMortarShooter);r&&r.showShooter(a,e)}else console.error(n)})},a.createIceGroundStart=function(a,t,e,o){var n=i.pzaNodeManager.getDownEffectNode();null!=n&&l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.ICE_GROUND,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(B.pzaIceGroundEffect);p&&p.miniInit(a,t,e,o)}else console.error(i)})},a}();e.pzaEffectManager=H,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaMapManager":"pzaMapManager","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./Data/pzaPlantEnum":"pzaPlantEnum","./Data/pzaZombieEnum":"pzaZombieEnum","./Effect/pzaAbsorbIronEquip":"pzaAbsorbIronEquip","./Effect/pzaBackPumpkin":"pzaBackPumpkin","./Effect/pzaBaseEffect":"pzaBaseEffect","./Effect/pzaBattleFrameAnim":"pzaBattleFrameAnim","./Effect/pzaBoomFireEffect":"pzaBoomFireEffect","./Effect/pzaBungeeZombieEffect":"pzaBungeeZombieEffect","./Effect/pzaButterEffect":"pzaButterEffect","./Effect/pzaCornMortarShooter":"pzaCornMortarShooter","./Effect/pzaDoomHoleEffect":"pzaDoomHoleEffect","./Effect/pzaDrZomBall":"pzaDrZomBall","./Effect/pzaDropCard":"pzaDropCard","./Effect/pzaDropCoin":"pzaDropCoin","./Effect/pzaDropPlantCard":"pzaDropPlantCard","./Effect/pzaFireBallEffect":"pzaFireBallEffect","./Effect/pzaFogEffect":"pzaFogEffect","./Effect/pzaFrozenEffect":"pzaFrozenEffect","./Effect/pzaGoldHoleEffect":"pzaGoldHoleEffect","./Effect/pzaHammerEffect":"pzaHammerEffect","./Effect/pzaIceGroundEffect":"pzaIceGroundEffect","./Effect/pzaLongFireEffect":"pzaLongFireEffect","./Effect/pzaPlanternEffect":"pzaPlanternEffect","./Effect/pzaRainEffect":"pzaRainEffect","./Effect/pzaRicochetBulletEffect":"pzaRicochetBulletEffect","./Effect/pzaShovelPlantShooter":"pzaShovelPlantShooter","./Effect/pzaShowGrassEffect":"pzaShowGrassEffect","./Effect/pzaSixPlanternShooter":"pzaSixPlanternShooter","./Effect/pzaTangleKelpEffect":"pzaTangleKelpEffect","./Effect/pzaWaterLightEffect":"pzaWaterLightEffect","./Effect/pzaWordEffect":"pzaWordEffect","./Effect/pzaZombieHoleEffect":"pzaZombieHoleEffect","./Zombie/pzaZombieSlot":"pzaZombieSlot","./pzaGameState":"pzaGameState","./pzaSpineTool":"pzaSpineTool"}],pzaFireBallEffect:[function(a,t,e){"use strict";cc._RF.push(t,"0899ebRMVBGG6e/r2A7TOlc","pzaFireBallEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFireBallEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine=null,t.poolPrefab=null,t}return n(t,a),t.prototype.showEffect=function(a){var t=this;0==a?this.spine.playAnimation("attack",!1,function(){t.close()}):1==a?(this.node.scaleY=1,this.spine.playAnimation("attack2",!1,function(){t.close()})):2==a&&(this.node.scaleY=-1,this.spine.playAnimation("attack2",!1,function(){t.close()}))},t.prototype.pauseSelf=function(){this.spine.pauseAnimation()},t.prototype.resumeSelf=function(){this.spine.resumeAnimation()},t.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"spine\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"spine",void 0),i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaFireBallEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController"}],pzaFireBlover:[function(a,t,e){"use strict";cc._RF.push(t,"61b7060u2lBZ6SvjcBC0R3A","pzaFireBlover");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFireBlover=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.attackCD=0,t.specialCD=0,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.baseData.plantData.atkInterval=2.9,this.playNormalAni()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.attackCD-=t)},t.prototype.playNormalAni=function(){var a=this,t=function(){a.attackTarget(t)||(a.animation.node.scaleX=1,a.animation.playAnimation("idle",!1,t,null,1.6))};this.attackTarget(t)||this.animation.playAnimation("idle",!1,t,null,1.6)},t.prototype.attackTarget=function(a){var t=this;if(this.attackCD>0)return!1;var e=this,o=this.getCanSpeAttackZombies(this.baseData,0,3.5),n=this.getCanAttackZombies(this.baseData,0,3.5),i=p.pzaUtil.getRandomFloatNum(0,1);if(.2>i&&o&&o.length>0)return this.animation.playAnimation("attack2",!1,a,function(){if(null==e.baseData||e.baseData.isDead)return!0;r.pzaSoundManager.playAudio("firebloverSpecial"),e.speFireEffect(),o.forEach(function(a){n.push(a)}),setTimeout(function(){e.hurtZombies(n,2*t.baseData.atk,t.node.x)},800/p.pzaUtil.getGameSpeed()),e.attackCD=2*e.baseData.plantData.atkInterval},1.8),!0;if(n&&n.length>0){var l=.2>i?2*this.baseData.atk:this.baseData.atk,s=.2>i?"attack2":"attack",c=.2>i?1.8:1;return this.animation.playAnimation(s,!1,a,function(){if(null==e.baseData||e.baseData.isDead)return!0;"attack"==s?(r.pzaSoundManager.playAudio("firebloverNormal"),e.normalFireEffect(),e&&e.hurtZombies(n,l,e.node.x,!0),e.attackCD=e.baseData.plantData.atkInterval):(r.pzaSoundManager.playAudio("firebloverSpecial"),e.speFireEffect(),o.forEach(function(a){n.push(a)}),setTimeout(function(){e&&e.hurtZombies(n,l,t.node.x)},800/p.pzaUtil.getGameSpeed()),e.attackCD=2*e.baseData.plantData.atkInterval)},c),!0}},t.prototype.hurtZombies=function(a,t,e,o){var n=this;void 0===t&&(t=this.baseData.atk),void 0===o&&(o=!1),null!=a&&a.forEach(function(a){if(null!=n.baseData){var i=window.pzazombieManager.getZombie(a);if(i){var r=Math.abs(e-i.node.x);o||(r=0),setTimeout(function(){i&&i.hurt(t,n.baseData,u.pzaAttackType.FLOOR_ASHES_ATK)},2*r/p.pzaUtil.getGameSpeed())}}})},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this)},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this)},t.prototype.getCanAttackZombies=function(a,t,e){if(null==a||null==a.logicPos)return null;var o=[];return window.pzazombieManager.zombieDatas[a.yIndex].forEach(function(n){!n||!n.logicPos||n.logicPos.x<a.logicPos.x||n.buffData.hasBuff(l.pzaBuffType.DIVE)||n.buffData.hasBuff(l.pzaBuffType.FLY)||n.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||!(n.xIndex<=-1)&&a.xIndex+t<=n.xIndex&&a.xIndex+e>=n.xIndex&&o.push(n)}),o},t.prototype.getCanSpeAttackZombies=function(a,t,e){if(null==a||null==a.logicPos)return null;var o=[],n=window.pzazombieManager.zombieDatas[a.yIndex+1],i=window.pzazombieManager.zombieDatas[a.yIndex-1];return n&&n.forEach(function(n){!n||!n.logicPos||n.logicPos.x<a.logicPos.x||n.buffData.hasBuff(l.pzaBuffType.DIVE)||n.buffData.hasBuff(l.pzaBuffType.FLY)||n.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||!(n.xIndex<=-1)&&a.xIndex+t<=n.xIndex&&a.xIndex+e>=n.xIndex&&o.push(n)}),i&&i.forEach(function(n){!n||!n.logicPos||n.logicPos.x<a.logicPos.x||n.buffData.hasBuff(l.pzaBuffType.DIVE)||n.buffData.hasBuff(l.pzaBuffType.FLY)||n.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||!(n.xIndex<=-1)&&a.xIndex+t<=n.xIndex&&a.xIndex+e>=n.xIndex&&o.push(n)}),o},t.prototype.normalFireEffect=function(){var a=c.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.baseData.yIndex,0,0);a.x+=50,a.y+=50,s.pzaEffectManager.createFireBallEffect(this.baseData.yIndex,0,a)},t.prototype.speFireEffect=function(){var a=this;setTimeout(function(){for(var t=0;t<4;t++)a.createBoomFireEffect(a.baseData.xIndex+1+t,a.baseData.yIndex,.1)},800/p.pzaUtil.getGameSpeed());var t=c.pzaGameState.map.getMapRow(),e=c.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.baseData.yIndex,0,0);e.x+=50,e.y+=60,this.baseData.yIndex-1>=0&&(s.pzaEffectManager.createFireBallEffect(this.baseData.yIndex,1,e),setTimeout(function(){for(var t=0;t<4;t++)a.createBoomFireEffect(a.baseData.xIndex+1+t,a.baseData.yIndex-1,.1)},800/p.pzaUtil.getGameSpeed())),this.baseData.yIndex+1<=t&&(s.pzaEffectManager.createFireBallEffect(this.baseData.yIndex,1,e),setTimeout(function(){for(var t=0;t<4;t++)a.createBoomFireEffect(a.baseData.xIndex+1+t,a.baseData.yIndex+1,.1)},800/p.pzaUtil.getGameSpeed()))},t.prototype.createBoomFireEffect=function(a,t,e){a>c.pzaGameState.map.getMapColumn()||setTimeout(function(){var o=c.pzaGameState.map.getBlockLogicPos(a,t,0,0);c.pzaGameState.map.fixMapYOffset(t,o,0),s.pzaEffectManager.createBoomFireEffect(t,e,o,null)},500*e/p.pzaUtil.getGameSpeed())},i([m],t)}(d.pzaBasePlant));e.pzaFireBlover=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaFireEffect:[function(a,t,e){"use strict";cc._RF.push(t,"18e573ExS5MQq+lMH3vrgTB","pzaFireEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFireEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaSpineController"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.fireAnis=[],t.poolPrefab=null,t.yIndex=-1,t.xIndex=-1,t}return n(t,a),t.prototype.init=function(){var a=this;this.fireAnis.forEach(function(t){t.playAnimation("fire2",!1,function(){a.close()})})},t.prototype.pauseSelf=function(){this.fireAnis.forEach(function(a){a.pauseAnimation()})},t.prototype.resumeSelf=function(){this.fireAnis.forEach(function(a){a.resumeAnimation()})},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"\u706b\u7130\u6d88\u5931\u52a8\u753b",type:[l.pzaSpineController]})],t.prototype,"fireAnis",void 0),i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaFireEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController"}],pzaFireGloomShroom:[function(a,t,e){"use strict";cc._RF.push(t,"59d56rAt8hD16Kg87YfNFZe","pzaFireGloomShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFireGloomShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaDirBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=a("./pzaAttackType"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.playNormalAni()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t)},t.prototype.playNormalAni=function(){var a=this,t=function(){if(a.baseData&&!a.baseData.isDead){var e=!1,o=1.7*h.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(t,n){null==t||null==n||n.isDead||null==n.logicPos||n.buffData.hasBuff(u.pzaBuffType.DIVE)||n.buffData.hasBuff(u.pzaBuffType.FLY)||n.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||s.pzaUtil.getDistance(a.baseData.logicPos,n.logicPos)<o&&(e=!0)}),e||a.canJoinDrZomBoss(a.baseData)&&(e=!0),e)return l.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x,a.baseData.logicPos.y+47);d.pzaEffectManager.createFireGloomShroomEffect(a.baseData.yIndex,t,null),a.hurtZombies(),a.attack()}});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))}};this.animation.playAnimation("idle1",!1,t)},t.prototype.attack=function(){for(var a=cc.v2(1,0),t=2*Math.PI/8,e=p.pzaNodeManager.getBulletNode(),o=this.node.getPosition(),n=this.bulletPrefab,i=0;i<8;i++){var l=r.pzaGameCommonPool.requestInstant2(n);l.setParent(e),l.setPosition(o.x,o.y+50),l.getComponent(c.pzaDirBullet).init(a.rotate(t*i),this.baseData.plantData.atkArr[0],2)}},t.prototype.canJoinDrZomBoss=function(a){if(a.xIndex<5)return null;var t=window.pzazombieManager.drZomBoss;return null==t||null==t.baseData||t.baseData.isDead||t.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:t.baseData},t.prototype.hurtZombies=function(){var a=this,t=1.7*h.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(e,o){null==e||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(u.pzaBuffType.DIVE)||o.buffData.hasBuff(u.pzaBuffType.FLY)||o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||s.pzaUtil.getDistance(a.baseData.logicPos,o.logicPos)<t&&e&&e.hurt(a.baseData.plantData.atk2Arr[0],a.baseData,m.pzaAttackType.PENETRATE)}),this.canJoinDrZomBoss(this.baseData)){var e=this.canJoinDrZomBoss(this.baseData),o=window.pzazombieManager.getZombie(e);o&&o.hurt(this.baseData.atk,this.baseData,m.pzaAttackType.PENETRATE)}},i([g({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([y],t)}(f.pzaBasePlant);e.pzaFireGloomShroom=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaDirBullet":"pzaDirBullet","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaFireMine:[function(a,t,e){"use strict";cc._RF.push(t,"91f80St/sJJMp81Cx8Rcg97","pzaFireMine");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFireMine=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaPotatoMine"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.attack=function(){var a=this;this.hasBomb=!0,this.baseData.isDead=!0,this.death(),r.pzaSoundManager.playAudio("JalapenoBoom"),window.pzaplantManager.removePlant(this.baseData),window.pzaMapManager.shakeMap();for(var t=u.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),e=0;e<12;e++){var o=t.clone();o.x+=100*e,u.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,o,0);var n=.1*e+.5;e>=5&&(n=.05*e+.5),c.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,n,o,null)}window.pzaMapManager.removeRowIceGround(this.baseData.yIndex);for(var i=0;i<=8;i++)window.pzaMapManager.removeLadder(i,this.baseData.yIndex);p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var h=window.pzazombieManager.zombieDatas[this.baseData.yIndex],m=Array.from(h);null!=window.pzazombieManager.drZomBoss&&m.push(window.pzazombieManager.drZomBoss.baseData),m.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==s.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(l.pzaBuffType.FROST),t.buffData.removeBuff(l.pzaBuffType.FROZEN))}})},i([f],t)}(h.pzaPotatoMine));e.pzaFireMine=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaPotatoMine":"pzaPotatoMine"}],pzaFireNut:[function(a,t,e){"use strict";cc._RF.push(t,"04fa0ONLBhAJ6KKZ458m4Ks","pzaFireNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFireNut=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaAttackType"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=s.pzaPlantCate.Nut,this.animation.playAnimation("idle1",!0)},t.prototype.hurt=function(t,e,o){if(a.prototype.hurt.call(this,t,e,o),e){e.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FIRE,3,this.baseData.atk));var n=window.pzazombieManager.getZombie(e);n&&n.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.FLOOR_ATK)}},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.attack()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.attack()},t.prototype.attack=function(){var a=this;r.pzaSoundManager.playAudio("JalapenoBoom"),window.pzaplantManager.removePlant(this.baseData),window.pzaMapManager.shakeMap();for(var t=d.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),e=0;e<12;e++){var o=t.clone();o.x+=100*e,d.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,o,0);var n=.1*e+.5;e>=5&&(n=.05*e+.5),u.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,n,o,null)}window.pzaMapManager.removeRowIceGround(this.baseData.yIndex);for(var i=0;i<=8;i++)window.pzaMapManager.removeLadder(i,this.baseData.yIndex);p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var s=window.pzazombieManager.zombieDatas[this.baseData.yIndex],m=Array.from(s);null!=window.pzazombieManager.drZomBoss&&m.push(window.pzazombieManager.drZomBoss.baseData),m.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.plantData.atk2Arr[0],a.baseData,h.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==c.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(l.pzaBuffType.FROST),t.buffData.removeBuff(l.pzaBuffType.FROZEN))}})},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([z],t)}(m.pzaBasePlant));e.pzaFireNut=y,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaFitIPhoneX:[function(a,t,e){"use strict";cc._RF.push(t,"42313kvA4BFtrzlzDcwp0vx","pzaFitIPhoneX");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFitIPhoneX=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.widget=null,t.topOffset=0,t.bottomOffset=0,t.leftOffset=0,t.rightOffset=0,t}return n(t,a),t.prototype.onLoad=function(){this.widget&&cc.winSize.width/cc.winSize.height>2&&(this.widget.top+=this.topOffset,this.widget.bottom+=this.bottomOffset,this.widget.left+=this.leftOffset,this.widget.right+=this.rightOffset)},i([l(cc.Widget)],t.prototype,"widget",void 0),i([l(cc.Float)],t.prototype,"topOffset",void 0),i([l(cc.Float)],t.prototype,"bottomOffset",void 0),i([l(cc.Float)],t.prototype,"leftOffset",void 0),i([l(cc.Float)],t.prototype,"rightOffset",void 0),i([p],t)}(cc.Component);e.pzaFitIPhoneX=s,cc._RF.pop()},{}],pzaFlagZombie:[function(a,t,e){"use strict";cc._RF.push(t,"4ea6aBnvahK862jVHmtItra","pzaFlagZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFlagZombie=void 0;var r=a("../Data/pzaZombieEnum"),p=a("./pzaNormalZombie"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[l.pzaZombieSlotType.butter,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.butter).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.butter,67.87,-1.82,-90.94))],[l.pzaZombieSlotType.flag,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.flag).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.flag+"1",157.57,-72.8,-103.75)).addState(new l.pzaZombieSlotAtt(2,l.pzaZombieSlotType.flag+"2",157.34,-73.82,-103.75)).addState(new l.pzaZombieSlotAtt(3,l.pzaZombieSlotType.flag+"3",159.47,-65.08,-103.75))]])},t.prototype.updateFlagState=function(a){this.slotMap||this.initEquips(),this.slotMap.get(l.pzaZombieSlotType.flag).updateState(a)},t.prototype.playDeathAnimation=function(t){this.updateFlagState(3),a.prototype.playDeathAnimation.call(this,t)},t.prototype.zombieDying=function(){this.zombieHurtState=r.pzaHurtStateEnum.DYING,this.updateFlagState(2)},t.prototype.zombieHurt=function(){this.zombieHurtState=r.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),"zombie_2"==this.curSkinName&&(this.curSkinName="zombie_2_2"),this.updateFlagState(2)},t.prototype.zombieIntact=function(){this.zombieHurtState=r.pzaHurtStateEnum.INTACT,this.updateFlagState(1)},i([c],t)}(p.pzaNormalZombie));e.pzaFlagZombie=u,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaFlowerPotShadow:[function(a,t,e){"use strict";cc._RF.push(t,"3cb5e7sHptMHLEqHP+gP7Z+","pzaFlowerPotShadow");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFlowerPotShadow=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onEnable=function(){p.pzaWorldEventManager.addListener(p.pzaWorldEventType.BACK_HOME,this.closeNode,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_OVER,this.closeNode,this),this.node.zIndex=-300},t.prototype.showNode=function(){this.node.opacity=120},t.prototype.hideNode=function(){this.node.opacity=0},t.prototype.onDisable=function(){p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.BACK_HOME,this.closeNode,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_OVER,this.closeNode,this)},t.prototype.closeNode=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s],t)}(cc.Component));e.pzaFlowerPotShadow=c,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaFlowerPotShroom:[function(a,t,e){"use strict";cc._RF.push(t,"15570phtQ1J+Ll2hyCCCx41","pzaFlowerPotShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFlowerPotShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpineController"),c=a("../../Common/pzaUtil"),u=a("../Bullet/pzaBaseBullet"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaPlantEnum"),m=a("../pzaGameState"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t.atkAniTime=1.4,t.hasPlant=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.animation.node.y=0},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.hasPlant=!1,this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()),m.pzaGameState.useShroom=!0,t.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead){var e=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaplantManager.plantDataMap.get(e),n=window.pzaplantManager.pumpkinDataMap.get(e);null!=o&&(o.plantData.plantType==h.pzaPlantEnum.PEA_CATTAIL?o.floatY=50:o.floatY=30),null!=n&&(n.floatY=30)}},t.prototype.wakeUp=function(){a.prototype.wakeUp.call(this),null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni())},t.prototype.letPlantSleep=function(){!this.sleepAni.node.active&&this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},t.prototype.flaserDeath=function(){var a=this;this.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FLASER,-1)),this.pauseSelf(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()}))),this.animation.node.stopAllActions(),this.animation.node.runAction(cc.moveTo(.15,cc.v2(0,100)))},t.prototype.playNormalAni=function(){var a=this,t=function(){if(window.pzazombieManager.hasCanAttackZombie(a.baseData,3))return l.pzaSoundManager.playAudio("PuffShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){a.shoot()});if(a.blinkTime>0){a.animation.playAnimation("idle1",!1,t);var e=""+a.baseData.xIndex+a.baseData.yIndex,o=window.pzaplantManager.plantDataMap.get(e),n=window.pzaplantManager.pumpkinDataMap.get(e);return null==o&&null==n&&a.hasPlant?(a.hasPlant=!1,void a.animation.playAnimation("idle1",!0,function(){t()})):null==o&&null==n||a.hasPlant?void 0:(a.hasPlant=!0,void a.animation.playAnimation("idle2",!0,function(){t()}))}a.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t)};t()},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(u.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0));var i=m.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*m.pzaGameState.map.getBlockWidth())}}}}},t.prototype.close=function(){a.prototype.close.call(this)},i([g({displayName:"\u7761\u89c9\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"sleepAni",void 0),i([g({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([g({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([y],t)}(f.pzaBasePlant);e.pzaFlowerPotShroom=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaFlowerPot:[function(a,t,e){"use strict";cc._RF.push(t,"844b3i3LINC/YeQXQ5ZJ4Rg","pzaFlowerPot");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFlowerPot=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaPlantEnum"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hasPlant=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.animation.node.y=0},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.hasPlant=!1,this.animation.playAnimation("idle1",!0),l.pzaGameState.onlyShroomCofee=!1,t.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead){var e=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaplantManager.plantDataMap.get(e),n=window.pzaplantManager.pumpkinDataMap.get(e);return null!=o&&(o.plantData.plantType==p.pzaPlantEnum.PEA_CATTAIL?o.floatY=45:o.floatY=25),null!=n&&(n.floatY=30),null==o&&null==n&&this.hasPlant?(this.hasPlant=!1,void this.animation.playAnimation("idle1",!0)):null==o&&null==n||this.hasPlant?void 0:(this.hasPlant=!0,void this.animation.playAnimation("idle2",!0))}},t.prototype.flaserDeath=function(){var a=this;this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.FLASER,-1)),this.pauseSelf(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()}))),this.animation.node.stopAllActions(),this.animation.node.runAction(cc.moveTo(.15,cc.v2(0,100)))},t.prototype.close=function(){a.prototype.close.call(this)},i([u],t)}(s.pzaBasePlant));e.pzaFlowerPot=d,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaFogEffect:[function(a,t,e){"use strict";cc._RF.push(t,"89d9aoAzfxKuobLHg49NVFI","pzaFogEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFogEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../pzaGameState"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.column5Cloud=[],t.column6Cloud=[],t.column7Cloud=[],t.column8Cloud=[],t.column9Cloud=[],t.planternDatas=new Set,t.allScatterNode=null,t.hasBeBlow=!1,t.beBlowTime=0,t.backing=!1,t.fogOffsetX=0,t.minFogColumn=0,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.node.zIndex=-10},t.prototype.init=function(a,t,e){var o=this;this.planternDatas.clear(),this.allScatterNode=null,this.hasBeBlow=!1,this.backing=!1,this.beBlowTime=0,this.fogOffsetX=0,this.minFogColumn=a,this.initFog(),this.node.stopAllActions();var n=cc.winSize;this.node.setPosition(cc.v2(n.width/2,0)),this.node.runAction(cc.sequence(cc.moveTo(1.5,cc.v2(0,0)).easing(cc.easeQuadraticActionOut()),cc.callFunc(function(){t&&t()}))),null!=e&&e.length>0&&(e.forEach(function(a){o.planternDatas.add(a)}),this.getAllScatterFogNode(),this.allScatterNode.forEach(function(a){null!=a&&(a.stopAllActions(),a.opacity=255,a.runAction(cc.fadeOut(.3)))}))},t.prototype.initFog=function(){var a=this;this.column5Cloud.forEach(function(t){null!=t&&(t.stopAllActions(),t.active=a.minFogColumn<=5,t.opacity=255)}),this.column6Cloud.forEach(function(t){null!=t&&(t.stopAllActions(),t.active=a.minFogColumn<=6,t.opacity=255)}),this.column7Cloud.forEach(function(t){null!=t&&(t.stopAllActions(),t.active=a.minFogColumn<=7,t.opacity=255)}),this.column8Cloud.forEach(function(a){null!=a&&(a.stopAllActions(),a.opacity=255)}),this.column9Cloud.forEach(function(a){null!=a&&(a.stopAllActions(),a.opacity=255)})},t.prototype.logicUpdate=function(a){this.backing?this.backFog(a):this.hasBeBlow&&(this.beBlowTime+=a,this.beBlowTime<24||(this.hasBeBlow=!1,this.backing=!0,this.initFog(),this.fogOffsetX=Math.floor(cc.winSize.width/2/p.pzaGameState.map.getBlockWidth()),this.allScatterNode=null))},t.prototype.pauseSelf=function(){this.node.pauseAllActions(),this.column5Cloud.forEach(function(a){a&&a.pauseAllActions()}),this.column6Cloud.forEach(function(a){a&&a.pauseAllActions()}),this.column7Cloud.forEach(function(a){a&&a.pauseAllActions()}),this.column8Cloud.forEach(function(a){a&&a.pauseAllActions()}),this.column9Cloud.forEach(function(a){a&&a.pauseAllActions()})},t.prototype.resumeSelf=function(){this.node.resumeAllActions(),this.column5Cloud.forEach(function(a){a&&a.resumeAllActions()}),this.column6Cloud.forEach(function(a){a&&a.resumeAllActions()}),this.column7Cloud.forEach(function(a){a&&a.resumeAllActions()}),this.column8Cloud.forEach(function(a){a&&a.resumeAllActions()}),this.column9Cloud.forEach(function(a){a&&a.resumeAllActions()})},t.prototype.backFog=function(a){var t=this,e=this.fogOffsetX,o=cc.winSize.width/28,n=this.node.x-o*a;if(n<=0&&(n=0,this.backing=!1),this.node.setPosition(cc.v2(n,0)),this.fogOffsetX=Math.floor(n/p.pzaGameState.map.getBlockWidth()),this.fogOffsetX!=e){var i=this.allScatterNode;this.getAllScatterFogNode(),this.allScatterNode.forEach(function(a){null==a||i&&i.has(a)||(a.stopAllActions(),a.opacity=255,a.runAction(cc.fadeOut(.3)))}),i&&i.forEach(function(a){null==a||t.allScatterNode&&t.allScatterNode.has(a)||(a.stopAllActions(),a.opacity=0,a.runAction(cc.fadeIn(.3)))})}},t.prototype.blowFog=function(a){if(void 0===a&&(a=0),!this.hasBeBlow){this.hasBeBlow=!0,this.backing=!1,this.beBlowTime=a,this.node.stopAllActions();var t=cc.winSize;this.node.runAction(cc.moveTo(.7,cc.v2(t.width/2,0)).easing(cc.easeQuadraticActionOut()))}},t.prototype.addPlantern=function(a){if(null!=a){var t=this.allScatterNode;this.planternDatas.add(a),this.getAllScatterFogNode(),this.allScatterNode.forEach(function(a){null==a||t&&t.has(a)||(a.stopAllActions(),a.opacity=255,a.runAction(cc.fadeOut(.3)))})}},t.prototype.removePlantern=function(a){var t=this;if(null!=a){var e=this.allScatterNode;this.planternDatas.delete(a),this.getAllScatterFogNode(),e&&e.forEach(function(a){null==a||t.allScatterNode&&t.allScatterNode.has(a)||(a.stopAllActions(),a.opacity=0,a.runAction(cc.fadeIn(.3)))})}},t.prototype.getAllScatterFogNode=function(){this.allScatterNode=new Set;for(var a=p.pzaGameState.map.getMapRow(),t=4;t<=8;t++){var e=this.getColumnFog(t);if(null!=e)for(var o=0;o<a;o++){var n=e[o];null!=n&&this.planterContainFog(t+this.fogOffsetX,o)&&this.allScatterNode.add(n)}}},t.prototype.getColumnFog=function(a){switch(a){case 4:return this.column5Cloud;case 5:return this.column6Cloud;case 6:return this.column7Cloud;case 7:return this.column8Cloud;case 8:return this.column9Cloud}},t.prototype.planterContainFog=function(a,t){var e=!1;return this.planternDatas.forEach(function(o){e||null==o||o.xIndex<=-1||o.yIndex<=-1||t>o.yIndex+2||t<o.yIndex-2||(e=t==o.yIndex+2||t==o.yIndex-2?a>=o.xIndex-2&&a<=o.xIndex+2:a>=o.xIndex-3&&a<=o.xIndex+3)}),e},i([c({displayName:"5\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],t.prototype,"column5Cloud",void 0),i([c({displayName:"6\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],t.prototype,"column6Cloud",void 0),i([c({displayName:"7\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],t.prototype,"column7Cloud",void 0),i([c({displayName:"8\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],t.prototype,"column8Cloud",void 0),i([c({displayName:"9\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],t.prototype,"column9Cloud",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaFogEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../pzaGameState":"pzaGameState"}],pzaFootballZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"34090u4Bz1JRqRdXAhTJa/f","pzaFootballZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFootballZombie2=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaZombieEnum"),l=a("./pzaFootballZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.isFei=!1,t.equip1Slot=s.pzaZombieSlotType.helmet_fei,t.slotName=null,t.equipSet1=[0,0,0],t.equipSet2=[0,0,0],t.equipSet3=[0,0,0],t}return n(t,a),t.prototype.bindData=function(t,e){a.prototype.bindData.call(this,t,e),this.isFei&&(t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_CONTROL,-1)),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_ICE,-1)))},t.prototype.initEquips=function(){this.baseData&&this.baseData.zombieData&&(this.baseData.zombieData.zombieType==p.pzaZombieEnum.FOOTBALL_ZOMBIE2?(this.equip1Slot=s.pzaZombieSlotType.helmet_red,this.slotName=s.pzaZombieSlotType.helmet_black,this.equipSet1=[54.94,2.84,-89.7],this.equipSet2=[54.94,2.84,-89.7],this.equipSet3=[48.91,7.31,-89.7],this.isFei=!1):this.baseData.zombieData.zombieType==p.pzaZombieEnum.FOOTBALL_ZOMBIE3&&(this.equip1Slot=s.pzaZombieSlotType.helmet_fei,this.slotName=this.equip1Slot,this.equipSet1=[65.69,-23.72,-89.7],this.equipSet2=[65.69,-23.72,-89.7],this.equipSet3=[65.69,-23.72,-89.7],this.isFei=!0),this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,-29.65,88.31))],[this.equip1Slot,new s.pzaZombieSlot(this.animation.spineAnimation,this.equip1Slot).addState(new s.pzaZombieSlotAtt(1,this.slotName+"1",this.equipSet1[0],this.equipSet1[1],this.equipSet1[2])).addState(new s.pzaZombieSlotAtt(2,this.slotName+"2",this.equipSet2[0],this.equipSet2[1],this.equipSet2[2])).addState(new s.pzaZombieSlotAtt(3,this.slotName+"3",this.equipSet3[0],this.equipSet3[1],this.equipSet3[2]))]]))},t.prototype.equipDeath=function(t){a.prototype.equipDeath.call(this,t),this.isFei&&this.baseData&&this.baseData.zombieData&&(this.isFei=!1,this.baseData.buffData.hasBuff(r.pzaBuffType.IMM_CONTROL)&&this.baseData.buffData.removeBuff(r.pzaBuffType.IMM_CONTROL),this.baseData.buffData.hasBuff(r.pzaBuffType.IMM_ICE)&&this.baseData.buffData.removeBuff(r.pzaBuffType.IMM_ICE))},i([u],t)}(l.pzaFootballZombie));e.pzaFootballZombie2=d,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaFootballZombie":"pzaFootballZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaFootballZombie:[function(a,t,e){"use strict";cc._RF.push(t,"f3422LKR3FJdJV8UNfW8IGR","pzaFootballZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFootballZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaZombieEnum"),l=a("../Plant/pzaAttackType"),s=a("./pzaBaseZombie"),c=a("./pzaZombieSlot"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=c.pzaZombieSlotType.helmet_red,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[c.pzaZombieSlotType.butter,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.butter).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.butter,-29.65,88.31))],[c.pzaZombieSlotType.helmet_red,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.helmet_red).addState(new c.pzaZombieSlotAtt(1,this.equip1Slot+"1",75.55,-25.98,-90.67)).addState(new c.pzaZombieSlotAtt(2,this.equip1Slot+"2",75.32,-44.98,-90.67)).addState(new c.pzaZombieSlotAtt(3,this.equip1Slot+"3",43.62,-19.1,-90.67))]])},t.prototype.zombieHurt=function(){this.zombieHurtState=p.pzaHurtStateEnum.HURT,"biaoqing1"==this.curSkinName&&(this.curSkinName="biaoqing2"),this.changeSkin(this.curSkinName)},t.prototype.zombieHurtSound=function(t){t!=l.pzaAttackType.KNOCK&&this.hasEquip?r.pzaSoundManager.playAudio("screenHurt"):a.prototype.zombieHurtSound.call(this,t)},i([d],t)}(s.pzaBaseZombie));e.pzaFootballZombie=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaFrameAnimComponent:[function(a,t,e){"use strict";cc._RF.push(t,"c0754jcq6ZBT7iiagRYrYIF","pzaFrameAnimComponent");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaFrameAnim"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.update=function(a){this.updateFrame(a)},i([l],t)}(r.default));e.default=s,cc._RF.pop()},{"./pzaFrameAnim":"pzaFrameAnim"}],pzaFrameAnim:[function(a,t,e){"use strict";cc._RF.push(t,"2f54fyh8VpKBaCciEDVPkHC","pzaFrameAnim");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spriteFrames=[],t.duration=.1,t.loop=!1,t.playOnload=!1,t.endCallback=null,t.isPlaying=!1,t.playTime=0,t.spriteLen=0,t.spriteIndex=0,t}return n(t,a),t.prototype.onLoad=function(){this.sprite||(this.sprite=this.node.getComponent(cc.Sprite),this.spriteLen=this.spriteFrames.length),this.sprite?(this.sprite.sizeMode=cc.Sprite.SizeMode.RAW,this.sprite.trim=!1,this.playOnload&&this.play()):console.error("====[ERR]FrameAnim, \u672a\u914d\u7f6esprite")},t.prototype.setFrames=function(a){return this.spriteFrames=a,this.spriteLen=this.spriteFrames.length,this.node.getComponent(cc.Sprite).spriteFrame=a[0],this},t.prototype.setDuration=function(a){return this.duration=a,this},t.prototype.setLoop=function(a){return this.loop=a,this},t.prototype.setEndFn=function(a){return this.endCallback=a,this},t.prototype.play=function(){return this.spriteLen<=0?(console.error("====[ERR]FrameAnim, spriteLen\u4e3a\u7a7a"),this):(this.isPlaying=!0,this)},t.prototype.stop=function(){return this.isPlaying=!1,this},t.prototype.reset=function(){return this.spriteIndex=0,this.playTime=0,this.sprite.spriteFrame=this.spriteFrames[0],this},t.prototype.updateFrame=function(a){if(this.isPlaying&&(this.playTime+=a,!(this.playTime<this.duration))){if(this.spriteIndex++,this.playTime=0,this.spriteIndex>=this.spriteLen){if(!this.loop)return this.isPlaying=!1,void(this.endCallback&&this.endCallback());this.spriteIndex=0}this.sprite.spriteFrame=this.spriteFrames[this.spriteIndex]}},i([l({type:[cc.SpriteFrame]})],t.prototype,"spriteFrames",void 0),i([l({tooltip:"\u6bcf\u4e00\u5e27\u65f6\u957f"})],t.prototype,"duration",void 0),i([l(cc.Boolean)],t.prototype,"loop",void 0),i([l(cc.Boolean)],t.prototype,"playOnload",void 0),i([p],t)}(cc.Component);e.default=s,cc._RF.pop()},{}],pzaFrozenEffect:[function(a,t,e){"use strict";cc._RF.push(t,"2216dff601LwaALsQ/9tumg","pzaFrozenEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFrozenEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaSpineController"),s=a("../Data/pzaBuffData"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine=null,t.frostNode=null,t.poolPrefab=null,t.thawing=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.thawing=!1,this.node.setPosition(t.logicPos),this.spine.node.active=!1,this.frostNode.active=!0;var e=10*-this.baseData.yIndex+5;this.node.zIndex=e},t.prototype.logicUpdate=function(){this.thawing||(null==this.baseData||this.baseData.isDead?this.close():this.baseData.buffData.hasBuff(s.pzaBuffType.FROZEN)||this.thaw())},t.prototype.thaw=function(){var a=this;this.thawing=!0,this.spine.node.active=!0,this.frostNode.active=!1,this.spine.playAnimation("blow1",!1,function(){a.close()})},t.prototype.pauseSelf=function(){this.thawing&&this.spine.pauseAnimation()},t.prototype.resumeSelf=function(){this.thawing&&this.spine.resumeAnimation()},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([d({displayName:"spine\u52a8\u753b",type:l.pzaSpineController})],t.prototype,"spine",void 0),i([d({displayName:"\u51b0\u51bb\u56fe\u8282\u70b9",type:cc.Node})],t.prototype,"frostNode",void 0),i([d(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([u],t)}(r.pzaBaseComponent);e.pzaFrozenEffect=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData"}],pzaFumeShroom:[function(a,t,e){"use strict";cc._RF.push(t,"3a637jM3wtCYrxURFH0/B6g","pzaFumeShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFumeShroom=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaSpineController"),l=a("../pzaEffectManager"),s=a("../pzaGameState"),c=a("./pzaAttackType"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.shootNode=null,t.attacking=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),s.pzaGameState.isZombieMode())return this.attacking=!1,this.sleepAni.node.active=!1,void this.animation.playAnimation("T_idle",!0);t.plantData.sleeping?(this.animation.playAnimation("idle",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.playNormalAni()),s.pzaGameState.useShroom=!0},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData&&!this.baseData.plantData.sleeping&&!this.attacking&&s.pzaGameState.isZombieMode()){var o=window.pzazombieManager.getCanAttackZombies(this.baseData,4);if(o&&o.length>0)return r.pzaSoundManager.playAudio("FumeShroomAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){if(null!=e.baseData&&!e.baseData.isDead){var a=cc.v2(e.baseData.logicPos.x+e.shootNode.x,e.baseData.logicPos.y+e.shootNode.y);l.pzaEffectManager.createFumeShroomEffect(e.baseData.yIndex,a,null),e.hurtZombies(o)}})}},t.prototype.wakeUp=function(){a.prototype.wakeUp.call(this),null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.letPlantSleep=function(){!this.sleepAni.node.active&&this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=window.pzazombieManager.getCanAttackZombies(a.baseData,4);if(e&&e.length>0)return r.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(null!=a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x+a.shootNode.x,a.baseData.logicPos.y+a.shootNode.y);l.pzaEffectManager.createFumeShroomEffect(a.baseData.yIndex,t,null),a.hurtZombies(e)}});a.animation.playAnimation("idle",!1,t)};this.animation.playAnimation("idle",!1,t)},t.prototype.hurtZombies=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=t.baseData){var e=window.pzazombieManager.getZombie(a);e&&e.hurt(t.baseData.atk,t.baseData,c.pzaAttackType.PENETRATE)}})},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([m({displayName:"\u7761\u89c9\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"sleepAni",void 0),i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([h],t)}(u.pzaBasePlant);e.pzaFumeShroom=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaGameArtTest:[function(a,t,e){"use strict";cc._RF.push(t,"61a88oJCZVJxIGp4tVyn+Ei","pzaGameArtTest");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameArtTest=void 0;var i=a("../Battle/Data/pzaPlantEnum"),r=a("../Battle/pzaGameState"),p=a("../Load/pzaPreLoadManager"),l=a("../View/Battle/pzaPlantSelectView"),s=a("../View/pzaCommonMask"),c=a("./pzaGameManager"),u=a("./pzaGameNormal"),d=a("./pzaGamePartConfig"),h=a("./pzaUIManager"),m=a("./pzaUtil"),f=a("./pzaWorldEventManager"),z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=r.pzaGameMode.ART_TEST,t}return n(t,a),t.prototype.skipPartStar=function(){return!1},t.prototype.beforeLoad=function(a,t){r.pzaGameState.newZombie=null;var e=d.pzaGamePartConfig.getPartConfig(a,t);e.zombieTypes=[1,4,5,6],e.initSun=9900,window.pzaMapManager.preImgByMapId=new Map,window.pzaMapManager.DoorByMapId=new Map,r.pzaGameState.hadRevived=!0},t.prototype.gameStart=function(t,e){a.prototype.resetTryPlant.call(this),this.beforeGameStart(t,e),this.normalStartGameCall(t,e)},t.prototype.normalStartGameCall=function(a,t,e,o){void 0===e&&(e=!0),void 0===o&&(o=!1),console.log("normalStartGameCall\u6f14\u793a\u5f00\u59cb",a,t),window.pzaMapManager.node.x=0,c.pzaGameManager.showBattleUI(p.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(l.pzaPlantSelectView),e=[i.pzaPlantEnum.PEA_SHOOTER,i.pzaPlantEnum.SNOW_PEA,i.pzaPlantEnum.WALL_NUT];t&&t.init(e),t&&t.initPlant(),s.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),r.pzaGameState.gamePause=!1,r.pzaGameState.guideSunPause=!0,r.pzaGameState.guideZombiePause=!1,window.pzazombieManager.nextWaveTime=0,window.pzazombieManager.curWaveTime=46})},t.prototype.gameRestart=function(){h.pzaUIManager.removeBoardUI(),r.pzaGameState.midOut=!1,c.pzaGameManager.removeBattleUI(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),this.loadAndStart(r.pzaGameState.curChapter,r.pzaGameState.curPart),r.pzaGameState.hadRevived=!0,r.pzaGameState.restartGame()},t.prototype.showBattleDown=function(a){a.freePlantNode.active=!1,a.gameProp.node.active=!0,a.speedBtn.active=!0,a.sunUIShowNode.active=!0,a.gameProp.hideAllProp(),a.shovelShowNode.active=!0,a.skipPartBtn.active=!1,a.testNextWaveBtn.active=!1},t.prototype.showPreviewTip=function(a,t){a.word.string=a.chapterPreviewTips[t%100-1],a.flagWord.node.active=!1},t.prototype.getPreviewZombieCnt=function(a,t){var e=10==t?m.pzaUtil.getRandomNum(16,17):m.pzaUtil.getRandomNum(9,10);return a%300==1&&1==t&&(e=5),a%100==3&&5==t&&(e=m.pzaUtil.getRandomNum(13,14)),e},t.prototype.clickSelectPartInFailView=function(){},t}(u.pzaGameNormal);e.pzaGameArtTest=z,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","./pzaGameManager":"pzaGameManager","./pzaGameNormal":"pzaGameNormal","./pzaGamePartConfig":"pzaGamePartConfig","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameBase:[function(a,t,e){"use strict";cc._RF.push(t,"2ea68IoCGRJ3oY1yVnC2lvC","pzaGameBase"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameBase=void 0;var o=a("../Battle/Data/pzaDropType"),n=a("../Battle/pzaEffectManager"),i=a("../Battle/pzaGameState"),r=a("../Load/pzaBundleObjectPool"),p=a("../Load/pzaPreLoadManager"),l=a("../View/Battle/pzaDaveTreasureView"),s=a("../View/Battle/pzaGetAchieveView"),c=a("../View/Battle/pzaPlantSelectView"),u=a("../View/pzaCommonMask"),d=a("../View/pzaWarningView"),h=a("../utils/pzaChannel"),m=a("../utils/pzakc"),f=a("./pzaCollisionManager"),z=a("./pzaGameConfig"),y=a("./pzaGameManager"),g=a("./pzaGamePartConfig"),b=a("./pzaLocalData"),v=a("./pzaRankMgr"),P=a("./pzaSoundManager"),D=a("./pzaStatisticsMgr"),S=a("./pzaTipManager"),C=a("./pzaUIManager"),_=a("./pzaUtil"),E=a("./pzaWorldEventManager"),M=a("../Battle/Data/pzaBaseData"),w=a("../Battle/Data/pzaZombieEnum"),T=a("../Battle/Zombie/pzaBaseZombie"),B=a("../Garden/pzaGardenMgr"),A=a("./pzaOperationMgr"),O=function(){function a(){this.gameMode=i.pzaGameMode.NORMAL,this.toolButtonUseTimes=0,this.toolButtonLeftArr=null,this.adPlantTimes=0,this.autoSunCreate=null,this.showErrorViewTimer=null,this.preLoadFun=null}return a.prototype.getGameModeName=function(){return"\u666e\u901a\u6a21\u5f0f-"},a.prototype.getRankKey=function(){return""},a.prototype.createAdBomb=function(){window.pzaplantManager.createAdCherry()},a.prototype.init=function(){return this},a.prototype.isMainMode=function(){return!1},a.prototype.isEndless=function(){return!1},a.prototype.isAutoCreateSun=function(){return!0},a.prototype.beforeLoad=function(){},a.prototype.skipPartStar=function(){return!0},a.prototype.getPlantArr=function(){return b.pzaLocalData.data.ownPlants},a.prototype.getZombieTypeArr=function(){return null},a.prototype.addOtherRes=function(){},a.prototype.getResArr=function(a,t){var e=Array.from(p.pzaPreLoadManager.getPartSubResources(a,t)),o=this.getPlantArr(a,t),n=[];o.forEach(function(a){var t=p.pzaPreLoadManager.getPlantUrl(a);if(null!=t&&!(n.indexOf(t)>=0)){e.push(new p.pzaResourceDetail(t));var o=p.pzaPreLoadManager.getSubResources(t);null!=o&&(e=e.concat(o)),n.push(t)}});var i=this.getZombieTypeArr(a,t);return null!=i&&(e.push(new p.pzaResourceDetail(p.pzaResourceUrl.FLAG_ZOMBIE)),i.forEach(function(a){var t=p.pzaPreLoadManager.getZombieUrl(a);if(null!=t){e.push(new p.pzaResourceDetail(t));var o=p.pzaPreLoadManager.getSubResources(t);null!=o&&(e=e.concat(o))}})),this.addOtherRes(e),e},a.prototype.readData=function(){},a.prototype.initMapPlantZombie=function(a,t){window.pzaMapManager.init(a,t,1),window.pzaplantManager.init(),window.pzazombieManager.init()},a.prototype.initGameState=function(){},a.prototype.preLoad=function(a,t,e){var o=this;this.preLoadFun=function(){o.preLoad(a,t,e)},this.init(),this.beforeLoad(a,t),C.pzaUIManager.hideLoadErrorView(),this.showErrorViewTimer=setTimeout(function(){C.pzaUIManager.showLoadErrorView()},2e4),this.initGameState(a,t),this.toolButtonUseTimes>0&&(this.toolButtonLeftArr=[this.toolButtonUseTimes,this.toolButtonUseTimes,this.toolButtonUseTimes,this.toolButtonUseTimes]),i.pzaGameState.isGameEnd=!1,f.pzaCollisionManager.getInstance.setOn();var n=this.getResArr(a,t);C.pzaUIManager.showLoading(),P.pzaSoundManager.clearAllLoopAudio(),this.readData(a,t),C.pzaUIManager.setLoadingActText("\u51c6\u5907\u52a0\u8f7d..");var p=!1;r.pzaBundleObjectPool.preLoadSubResource(n,function(){if(h.pzaChannel.isConfRemote)C.pzaUIManager.setLoadingActText("\u52a0\u8f7d\u5b8c\u62101"),p=!0,C.pzaUIManager.hideLoading(e),o.showErrorViewTimer&&clearTimeout(o.showErrorViewTimer),o.showErrorViewTimer=null;else try{C.pzaUIManager.setLoadingActText("\u52a0\u8f7d\u5b8c\u62101"),p=!0,C.pzaUIManager.hideLoading(e),o.showErrorViewTimer&&clearTimeout(o.showErrorViewTimer),o.showErrorViewTimer=null}catch(a){C.pzaUIManager.setLoadingActText("\u8fdb\u5165\u5f02\u5e381: "+a)}},function(a){C.pzaUIManager.setLoadingActText("\u52a0\u8f7d\u4e2d..");var t=Math.min(100,Math.ceil(100*a));C.pzaUIManager.updateLoadPro(t),100==t&&(C.pzaUIManager.setLoadingActText("\u5373\u5c06\u8fdb\u5165.."),setTimeout(function(){if(p)C.pzaUIManager.setLoadingActText("\u52a0\u8f7d\u672a\u5b8c\u6210..");else try{C.pzaUIManager.setLoadingActText("\u52a0\u8f7d\u5b8c\u62102"),C.pzaUIManager.instance.loadNode.active=!1,e(),o.showErrorViewTimer&&clearTimeout(o.showErrorViewTimer),o.showErrorViewTimer=null}catch(a){C.pzaUIManager.setLoadingActText("\u8fdb\u5165\u5f02\u5e382: "+a)}},2e3))}),P.pzaSoundManager.playAudio("loadingbar_zombie"),i.pzaGameState.autoPickLock=!1},a.prototype.beforeGameStart=function(){P.pzaSoundManager.playBgm(P.pzaBGMName.LOADING),u.pzaCommonMask.showMask(),5!=i.pzaGameState.mapId&&6!=i.pzaGameState.mapId&&12!=i.pzaGameState.mapId&&n.pzaEffectManager.createGroveEffect()},a.prototype.gameStart=function(a,t){this.beforeGameStart(a,t),this.normalStartGameCall(a,t)},a.prototype.loadAndStart=function(a,t){var e=this;this.preLoad(a,t,function(){e.gameStart(a,t)})},a.prototype.firstStart=function(a,t,e){void 0===e&&(e=!1),i.pzaGameState.gameMode==i.pzaGameMode.NORMAL_WEEKTWO&&(this.gameMode=i.pzaGameMode.NORMAL_WEEKTWO),i.pzaGameState.inGameTime=0,i.pzaGameState.hasReportAliveOnly=!1,i.pzaGameState.hadRevived=!1,this.loadAndStart(a,t)},a.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u5192\u9669\u6a21\u5f0f\u201d\uff0c"+["\u4e00\u5468\u76ee\u767d\u5929","\u4e00\u5468\u76ee\u9ed1\u591c","\u4e00\u5468\u76ee\u6c34\u6c60","\u4e00\u5468\u76ee\u6d53\u96fe","\u4e00\u5468\u76ee\u5c4b\u9876","\u4e8c\u5468\u76ee\u767d\u5929","\u4e8c\u5468\u76ee\u9ed1\u591c","\u4e8c\u5468\u76ee\u6c34\u6c60","\u4e8c\u5468\u76ee\u6d53\u96fe","\u4e8c\u5468\u76ee\u5c4b\u9876"][i.pzaGameState.curChapter-1]+"\u7b2c"+i.pzaGameState.curPart+"\u5173\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},a.prototype.midOutAndStart=function(a,t,e,o,n,r){var l=this,s=b.pzaLocalData.endLessPowerCost,c=1,h=1500;if((r||i.pzaGameState.judgeIsMini(n)||i.pzaGameState.judgeIsVase(n)||i.pzaGameState.judgeIsZombie(n))&&(s=b.pzaLocalData.normalPowerCost),n==i.pzaGameMode.VASE_ENDLESS&&b.pzaLocalData.data.vaseEndLessLevelIndex&&b.pzaLocalData.data.vaseEndLessLevelIndex>0&&(s=0,h=0,c=0),b.pzaLocalData.isShowPowerGift||(s=0,h=0),a)C.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.WARNING_VIEW,function(r){var p=r&&r.getComponent(d.pzaWarningView);p&&p.show(a,"\u662f","\u5426",function(){if(b.pzaLocalData.data.power<s)return S.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void C.pzaUIManager.showPowerView();u.pzaCommonMask.showMask(),b.pzaLocalData.setPower(-s),m.default.sendMsg("powerani"),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.POWER_ANI,{cost:s}),setTimeout(function(){u.pzaCommonMask.hideMask(),i.pzaGameState.gameMode=l.gameMode,y.pzaGameManager.removeBattleUI(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),o&&o(),C.pzaUIManager.removeBoardUI(),l.loadAndStart(t,e),n!=i.pzaGameMode.VASE&&(i.pzaGameState.hadRevived=!1),b.pzaLocalData.isWeekTwo&&(i.pzaGameState.weekTwoInitPlants=[])},h)},null,"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,s,!1,c)});else{if(b.pzaLocalData.data.power<s)return S.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void C.pzaUIManager.showPowerView();u.pzaCommonMask.showMask(),b.pzaLocalData.setPower(-s),m.default.sendMsg("powerani"),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.POWER_ANI,{cost:s});var f=this;setTimeout(function(){i.pzaGameState.gameMode=f.gameMode,y.pzaGameManager.removeBattleUI(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),o&&o(),C.pzaUIManager.removeBoardUI(),l&&f.firstStart(t,e),b.pzaLocalData.isWeekTwo&&(i.pzaGameState.weekTwoInitPlants=[])},h)}},a.prototype.initPartProcess=function(){},a.prototype.updatePartProcess=function(a){a.partProNode.active=!0,a.zombieHeadNode.active=!0;var t=window.pzazombieManager.wave/a.maxWave;t=Math.min(1,t);var e=a.partProgress.fillRange+t,o=Math.max(.05,3*e);cc.Tween.stopAllByTarget(a.partProgress),cc.Tween.stopAllByTarget(a.zombieHeadNode),cc.tween(a.partProgress).to(o,{fillRange:-t}).start(),cc.tween(a.zombieHeadNode).to(o,{x:Math.min(10+-315*t,-15)}).start()},a.prototype.showBattleDown=function(a){a.pauseBtn.active=!0,a.blackShovel.active=!1,a.guideArrow.active=!1,a.speedBtn.active=!1,a.sunUIShowNode.active=!1,a.freePlantNode.active=!1,a.gameProp.bombAni_1="3ui_1",a.gameProp.bombAni_2="3ui_idle3",a.gameProp.node.active=!0},a.prototype.refreshNextWave=function(a,t){a.curWaveTime+=t,a.nextWaveTime-=t},a.prototype.createWave=function(a){a.wave++,console.log("createWaveZombie",a.wave),a.curWaveZombieDatas.clear(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.UPDATE_PART_PRO,null),a.curWaveTime=0,a.preRefreshHp=g.pzaWaveConfig.getPreRefreshHp(),a.hasShowRedTip=!1},a.prototype.createTombWaterWaveData=function(a){var t=g.pzaGamePartConfig.getPartConfig(i.pzaGameState.curChapter,i.pzaGameState.curPart);if(null!=t){var e=[],o=[],n=[];if(window.pzaMapManager.TombMap.forEach(function(o){if(null!=o&&null!=o.xIndex&&null!=o.yIndex&&!window.pzaplantManager.hasPlant(o.xIndex,o.yIndex)){var n=t.getRandomTombZombie(),i=a.createFixBlockZombieData(n,o.xIndex,o.yIndex);a.curWaveZombieDatas.add(i),e.push(i)}}),window.pzazombieManager.lastZombieDataMap.set(0,e),t.lastWaterWaveZombie>0){for(var r=[],p=t.lastWaterWaveMinColumn-1;p<9;p++)r.push([p,2]),r.push([p,3]);r.sort(function(){return Math.random()-.5});for(var l=0;l<t.lastWaterWaveZombie;l++)if(null!=(u=r[l])){var s=t.getRandomDiveZombie(),c=a.createFixBlockZombieData(s,u[0],u[1]);a.curWaveZombieDatas.add(c),o.push(c)}}if(window.pzazombieManager.lastZombieDataMap.set(1,o),t.lastBungeeZombie>0){for(r=[],p=t.lastBungeeMinColumn-1;p<9;p++)r.push([p,0]),r.push([p,1]),r.push([p,2]),r.push([p,3]),r.push([p,4]);for(r.sort(function(){return Math.random()-.5}),l=0;l<t.lastBungeeZombie;l++){var u;if(null!=(u=r[l])){var d=t.getRandomTombZombie();c=window.pzazombieManager.createFixBlockZombieData(d,u[0],u[1]),a.zombieDatas[u[1]].delete(c),a.curWaveZombieDatas.add(c),n.push(c)}}window.pzazombieManager.lastZombieDataMap.set(2,n)}}},a.prototype.lastTombWaterZombie=function(a){window.pzazombieManager.lastZombieDataMap.forEach(function(t,e){for(var o=0;o<t.length;o++){var i=t[o];0==e?a.createZombie(i,!1,!0):1==e?a.createZombie(i,!1,!1,!0):2==e&&n.pzaEffectManager.createBungeeZombieEffect(i)}})},a.prototype.createRandomDrop=function(a){var t=Math.random();t<=z.pzaGameConfig.DIAMOND_CHANCE?n.pzaEffectManager.createDropCoin(o.pzaDropType.DIAMOND,a):t<=z.pzaGameConfig.DIAMOND_CHANCE+z.pzaGameConfig.GOLD_CHANCE?n.pzaEffectManager.createDropCoin(o.pzaDropType.GOLD_COIN,a):t<=z.pzaGameConfig.DIAMOND_CHANCE+z.pzaGameConfig.GOLD_CHANCE+z.pzaGameConfig.SILVER_CHANCE&&n.pzaEffectManager.createDropCoin(o.pzaDropType.SILVER_COIN,a)},a.prototype.createPassLastPartDrop=function(a){var t=Math.random();t<=z.pzaGameConfig.PLANT_CHANCE&&B.default.instance().isDropGardenPlant()?n.pzaEffectManager.createDropCoin(o.pzaDropType.GARDEN_PLANT,a):t<=z.pzaGameConfig.CHOCOLATE_CHANCE?n.pzaEffectManager.createDropCoin(o.pzaDropType.GARDEN_CHOCOLATE,a):this.createRandomDrop(a)},a.prototype.createYetiDrops=function(a){for(var t=0;t<4;t++)n.pzaEffectManager.createDropCoin(o.pzaDropType.DIAMOND,cc.v2(a.x+80*Math.random()-40,a.y+80*Math.random()-40));b.pzaLocalData.data.hasKillYeti||(b.pzaLocalData.data.hasKillYeti=!0,b.pzaLocalData.addDirty("hasKillYeti"))},a.prototype.zombieDeathDrop=function(a){a.zombieData.zombieType!=w.pzaZombieEnum.YETI_ZOMBIE?b.pzaLocalData.data.passLastPart&&y.pzaGameManager.getCurrentGame().isMainMode()&&i.pzaGameState.gameMode!=i.pzaGameMode.ZOM_BOSS?this.createPassLastPartDrop(a.logicPos):this.createRandomDrop(a.logicPos):a.logicPos.x<640&&this.createYetiDrops(a.logicPos)},a.prototype.checkAllZombieDeath=function(a){var t=0;return a.zombieDatas.forEach(function(a){a.forEach(function(a){a.isDead||t++})}),console.log("zombieData.size",t),!(t>0)},a.prototype.isLastWave=function(a){return a.wave>=g.pzaGamePartConfig.getPartConfig(i.pzaGameState.curChapter,i.pzaGameState.curPart).maxWave},a.prototype.onZombieDeath=function(a,t,e,o){void 0===e&&(e=!0),void 0===o&&(o=null),e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)&&y.pzaGameManager.passPart(t.logicPos)},a.prototype.createPreviewZombie=function(a,t,e){var o=10==e?_.pzaUtil.getRandomNum(16,17):_.pzaUtil.getRandomNum(9,10),n=1;1==t&&1==e&&(o=5),3!=t&&8!=t||5!=e||(o=_.pzaUtil.getRandomNum(13,14),n=z.pzaGameConfig.miniZombieScale);var l=null;if(i.pzaGameState.isSurvival()?(l=i.pzaGameState.survivalConfig,o=_.pzaUtil.getRandomNum(9,10),n=1):l=g.pzaGamePartConfig.getPartConfig(t,e),null!=l){var s=l.getPreviewZombies(o);if(null!=s){var c=[];5==t||10==t?(c.push(cc.v2(1450+_.pzaUtil.getRandomFloatNum(-25,25),75)),c.push(cc.v2(1550+_.pzaUtil.getRandomFloatNum(-25,25),75)),c.push(cc.v2(1450+_.pzaUtil.getRandomFloatNum(-25,25),125)),c.push(cc.v2(1550+_.pzaUtil.getRandomFloatNum(-25,25),125)),c.push(cc.v2(1450+_.pzaUtil.getRandomFloatNum(-25,25),175)),c.push(cc.v2(1550+_.pzaUtil.getRandomFloatNum(-25,25),175)),c.push(cc.v2(1450+_.pzaUtil.getRandomFloatNum(-25,25),225)),c.push(cc.v2(1550+_.pzaUtil.getRandomFloatNum(-25,25),225)),c.push(cc.v2(1450+_.pzaUtil.getRandomFloatNum(-25,25),275)),c.push(cc.v2(1550+_.pzaUtil.getRandomFloatNum(-25,25),275)),c.push(cc.v2(1450+_.pzaUtil.getRandomFloatNum(-25,25),325)),c.push(cc.v2(1550+_.pzaUtil.getRandomFloatNum(-25,25),325)),c.push(cc.v2(1450+_.pzaUtil.getRandomFloatNum(-25,25),375)),c.push(cc.v2(1550+_.pzaUtil.getRandomFloatNum(-25,25),375)),c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-25,25),75)),c.push(cc.v2(1750+_.pzaUtil.getRandomFloatNum(-25,25),75)),c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-25,25),125)),c.push(cc.v2(1750+_.pzaUtil.getRandomFloatNum(-25,25),125)),c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-25,25),175)),c.push(cc.v2(1750+_.pzaUtil.getRandomFloatNum(-25,25),175)),c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-25,25),225)),c.push(cc.v2(1750+_.pzaUtil.getRandomFloatNum(-25,25),225)),c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-25,25),275)),c.push(cc.v2(1750+_.pzaUtil.getRandomFloatNum(-25,25),275)),c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-25,25),325)),c.push(cc.v2(1750+_.pzaUtil.getRandomFloatNum(-25,25),325)),c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-25,25),375)),c.push(cc.v2(1750+_.pzaUtil.getRandomFloatNum(-25,25),375)),c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-25,25),410)),c.push(cc.v2(1750+_.pzaUtil.getRandomFloatNum(-25,25),410))):(c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-60,60),40+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-60,60),90+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-60,60),140+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1650+_.pzaUtil.getRandomFloatNum(-60,60),190+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1580+_.pzaUtil.getRandomFloatNum(-60,60),240+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1680+_.pzaUtil.getRandomFloatNum(-60,60),240+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1580+_.pzaUtil.getRandomFloatNum(-60,60),290+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1680+_.pzaUtil.getRandomFloatNum(-60,60),290+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1580+_.pzaUtil.getRandomFloatNum(-60,60),340+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1680+_.pzaUtil.getRandomFloatNum(-60,60),340+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1570+_.pzaUtil.getRandomFloatNum(-60,60),390+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1670+_.pzaUtil.getRandomFloatNum(-60,60),390+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1570+_.pzaUtil.getRandomFloatNum(-60,60),440+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1670+_.pzaUtil.getRandomFloatNum(-60,60),440+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1570+_.pzaUtil.getRandomFloatNum(-60,60),490+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1670+_.pzaUtil.getRandomFloatNum(-60,60),490+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1560+_.pzaUtil.getRandomFloatNum(-60,60),540+_.pzaUtil.getRandomFloatNum(-60,60))),c.push(cc.v2(1600+_.pzaUtil.getRandomFloatNum(-60,60),540+_.pzaUtil.getRandomFloatNum(-60,60)))),c.sort(function(){return Math.random()-.5});for(var u=function(t,e){var o=p.pzaPreLoadManager.getZombieUrl(t);r.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(o,i){if(null==o&&null!=i){i.setParent(a.previewZombieNode),i.setPosition(e),i.zIndex=-e.y;var r=i.getComponent(T.pzaBaseZombie),p=new M.pzaBaseData(null,t);p.hp=1,p.logicPos=e,r&&r.preview(p,a.previewShadowNode,n),a.PreviewZombies.add(r)}else console.error(o)})},d=0;d<s.length;d++){var h=s[d],m=c[d];h==w.pzaZombieEnum.BUNGEE_ZOMBIE&&(m=5==t?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),u(h,m)}if((5==t||10==t)&&5==e&&!i.pzaGameState.isSurvival()){var f=[cc.v2(1400,550+100*Math.random()),cc.v2(1500,550+100*Math.random()),cc.v2(1600,550+100*Math.random())];for(d=0;d<3;d++)m=f[d],u(w.pzaZombieEnum.BUNGEE_ZOMBIE,m)}P.pzaSoundManager.playBgm(P.pzaBGMName.PRE_BGM)}}},a.prototype.showPreviewTip=function(a,t){a.word.string=a.chapterPreviewTips[t-1],a.flagWord.node.active=!1},a.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=!0,a.cherryBombNode.active=!0,a.autoPickNode.active=!0,a.clearCDNode.active=!1},a.prototype.clickSelectPartInFailView=function(){C.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.PART_SELECT_VIEW,function(){C.pzaUIManager.baseShowBoardUI(p.pzaResourceUrl.HOME_SELECT_VIEW,null)})},a.prototype.setAdPlantArr=function(){return null},a.prototype.getAdPlantArr=function(){return null},a.prototype.playBgm=function(){switch(i.pzaGameState.curChapter){case 1:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_1);break;case 2:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_2);break;case 3:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_3);break;case 4:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_4);break;case 5:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_5);break;case 6:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_1);break;case 7:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_2);break;case 8:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_3);break;case 9:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_4);break;case 10:P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_5)}},a.prototype.normalStartGameCall=function(a,t,e){var o=this;void 0===e&&(e=!0);var r=null;(this.gameMode==i.pzaGameMode.NORMAL||this.gameMode==i.pzaGameMode.NORMAL_WEEKTWO&&7==a&&5==t)&&(r=g.pzaGamePartConfig.getPartDefaultPlant(a,t)),window.pzaMapManager.previewMap(function(){y.pzaGameManager.showBattleUI(p.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){u.pzaCommonMask.hideMask();var s=e&&e.getComponent(c.pzaPlantSelectView);s&&s.init(r,function(){window.pzaplantManager.initFlowerPot(),u.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(null==r?0:1,function(){if(o.gameMode!=i.pzaGameMode.SURVIVAL&&o.gameMode!=i.pzaGameMode.SUR_ENDLESS&&1==a&&3==t)return window.pzaMapManager.initCleanCar(),void n.pzaEffectManager.createReadyWord(function(){u.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s&&s.initPlant(),i.pzaGameState.gamePause=!1,E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_RESUME,null)});var e=function(){null!=r&&window.pzaMapManager.initCleanCar(),window.pzaMapManager.initMapTomb(a,t,function(){window.pzaMapManager.fogEnter(function(){null==r&&window.pzaMapManager.initCleanCar(),n.pzaEffectManager.createReadyWord(function(){if(o.playBgm(),u.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s&&s.initPlant(),i.pzaGameState.gamePause=!1,E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_RESUME,null),i.pzaGameState.gameMode==i.pzaGameMode.SURVIVAL&&1==i.pzaGameState.curPart)S.pzaTipManager.showGameTip("\u4f60\u80fd\u575a\u6301\u5230\u7b2c5\u6ce2\u653b\u51fb\u5417\uff1f");else if(i.pzaGameState.gameMode==i.pzaGameMode.SUR_ENDLESS&&1==i.pzaGameState.curPart){var a="\u4f60\u80fd\u575a\u6301\u5230\u7b2c\u51e0\u6ce2\u653b\u51fb\u5462\uff1f",t=b.pzaLocalData.data.survivalFlagCount[i.pzaGameState.curChapter-1];if(null!=t&&t>0){a+="\n\u5386\u53f2\u6700\u9ad8\u65d7\u5e1c\uff1a"+t;var e=v.pzaRankMgr.endlessRank[i.pzaGameState.curChapter-1];null!=e&&e>0&&(a+=" \u5168\u670d\u6392\u540d\uff1a"+e)}S.pzaTipManager.showGameTip(a)}})})})},c=h.pzaChannel.instance().getChannel();null!=c.ctrl&&"1"===c.ctrl.p1&&(o.gameMode==i.pzaGameMode.SURVIVAL||o.gameMode==i.pzaGameMode.SUR_ENDLESS||t%5!=0&&(a>1||1==a&&t>=6))?C.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.DAVE_TREASURE_VIEW,function(a){var t=a&&a.getComponent(l.pzaDaveTreasureView);t&&t.init(e)}):e()})})})},e)},a.prototype.gameRestart=function(){C.pzaUIManager.removeBoardUI(),i.pzaGameState.midOut=!1,y.pzaGameManager.removeBattleUI(),i.pzaGameState.gameMode!==i.pzaGameMode.BANG_JAR&&i.pzaGameState.gameMode!==i.pzaGameMode.VASE&&i.pzaGameState.gameMode!==i.pzaGameMode.VASE_ENDLESS||(i.pzaGameState.isGameEnd=!1,i.pzaGameState.isMenuShow=!1),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),this.loadAndStart(i.pzaGameState.curChapter,i.pzaGameState.curPart),i.pzaGameState.hadRevived=!1,i.pzaGameState.gameMode!==i.pzaGameMode.VASE&&i.pzaGameState.gameMode!==i.pzaGameMode.VASE_ENDLESS||(i.pzaGameState.hadRevived=!0)},a.prototype.gameRecover=function(a,t){var e=this;C.pzaUIManager.removeBoardUI(),i.pzaGameState.midOut=!1;var o=b.pzaLocalData.endLessPowerCost;(y.pzaGameManager.getCurrentGame().isMainMode()||i.pzaGameState.gameMode==i.pzaGameMode.NORMAL||i.pzaGameState.gameMode==i.pzaGameMode.NORMAL_WEEKTWO||i.pzaGameState.judgeIsMini(i.pzaGameState.gameMode)||i.pzaGameState.judgeIsVase(i.pzaGameState.gameMode)||i.pzaGameState.judgeIsZombie(i.pzaGameState.gameMode))&&(o=b.pzaLocalData.normalPowerCost),C.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.WARNING_VIEW,function(n){var r=n&&n.getComponent(d.pzaWarningView);r&&r.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){i.pzaGameState.gamePause=!1,E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_RESUME,null),_.pzaUtil.changeGameSpeed(i.pzaGameState.gameSpeed),P.pzaSoundManager.clearAllLoopAudio(),window.pzazombieManager.getZombieMapData()>0&&P.pzaSoundManager.playLoopAudio("jack_enter",!0),4!=a&&9!=a||10!=t||P.pzaSoundManager.playLoopAudio("rain",!0),5!=a&&10!=a||10!=t?e.playBgm():P.pzaSoundManager.playBgm(P.pzaBGMName.ZOMBIEBOSS_BGM)},function(){y.pzaGameManager.removeBattleUI(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),i.pzaGameState.gameMode==i.pzaGameMode.VASE_ENDLESS&&(b.pzaLocalData.data.vaseEndLessLevelIndex=0,b.pzaLocalData.data.vaseEndLessSunCount=0,b.pzaLocalData.addDirty("vaseEndLessLevelIndex","vaseEndLessSunCount")),e.firstStart(a,t,!0),b.pzaLocalData.isWeekTwo&&(i.pzaGameState.weekTwoInitPlants=[])},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,o,!0,2)})},a.prototype.guide=function(){},a.prototype.showPassUiNoStar=function(){C.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.PART_SELECT_VIEW,function(){A.pzaOperationMgr.showNormalGameGift(),C.pzaUIManager.baseShowBoardUI(p.pzaResourceUrl.HOME_SELECT_VIEW,null)})},a.prototype.winDrop=function(){return"my"===h.pzaChannel.instance().channel&&h.pzaChannel.instance().getChannel().actSubmit(),o.pzaDropType.COIN_PACKAGE},a.prototype.partWin=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null),_.pzaUtil.changeGameSpeed(1),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_PAUSE,null),i.pzaGameState.gamePause=!0;var o=0;b.pzaLocalData.hasUseProp&&(o=1);var n=Date.now()-b.pzaLocalData.gameStartTimeStamp;n=Math.ceil(n/1e3);var r=10*(i.pzaGameState.curChapter-1)+i.pzaGameState.curPart;this.isMainMode()&&(D.pzaStatisticsMgr.sendLevelEvent(r,1,o,n,i.pzaGameMode.NORMAL),m.default.eventReport(r+"\u5173\u5361\u6210\u529f")),b.pzaLocalData.hasUseProp=!1;var l=function(){var a=0;e.skipPartStar()||(a=z.pzaGameConfig.getPartStar(i.pzaGameState.curChapter,i.pzaGameState.curPart)),a<=0?(E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),y.pzaGameManager.removeBattleUI(),h.pzaChannel.instance().showInter(!0),e.showPassUiNoStar()):C.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.GAME_WIN_VIEW,null)};null!=i.pzaGameState.achieveArr&&i.pzaGameState.achieveArr.length>0?C.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.GET_ACHIEVE_VIEW,function(a){var t=a&&a.getComponent(s.pzaGetAchieveView);t&&t.init(i.pzaGameState.achieveArr,l)}):l()},a.prototype.partFail=function(){P.pzaSoundManager.playAudio("losemusic"),P.pzaSoundManager.stopBgm(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_PAUSE,null),i.pzaGameState.gamePause=!0,window.pzaMapManager.closeBattleUI(),window.pzaMapManager.openDoor(),y.pzaGameManager.removeBattleUI(),b.pzaLocalData.data.autoPickLeft=i.pzaGameState.autoPickLeft,b.pzaLocalData.addDirty("autoPickLeft")},a.prototype.nextPart=function(a,t){void 0===a&&(a=!1),void 0===t&&(t=null)},a.prototype.checkAchieve=function(){},a.prototype.resetTryPlant=function(){i.pzaGameState.gameMode!=i.pzaGameMode.SUR_ENDLESS&&i.pzaGameState.gameMode!=i.pzaGameMode.SURVIVAL&&i.pzaGameState.gameMode!=i.pzaGameMode.ZOMBIE_ENDLESS&&(b.pzaLocalData.data.tryPlantCountArrayNormal=[0,0,0,0,0,0,0,0],b.pzaLocalData.data.watchADTryPlantCountNormal=0,b.pzaLocalData.addDirty("tryPlantCountArrayNormal","watchADTryPlantCountNormal"))},a}();e.pzaGameBase=O,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaDaveTreasureView":"pzaDaveTreasureView","../View/Battle/pzaGetAchieveView":"pzaGetAchieveView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCollisionManager":"pzaCollisionManager","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaOperationMgr":"pzaOperationMgr","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameBelt:[function(a,t,e){"use strict";cc._RF.push(t,"40c26ZTwkxDsaPtR7venpN4","pzaGameBelt");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameBelt=void 0;var i=a("../Battle/pzaGameState"),r=a("../utils/pzaChannel"),p=a("./pzaBeltConfig"),l=a("./pzaGameNormal"),s=a("./pzaSoundManager"),c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=i.pzaGameMode.BELT,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u4f20\u9001\u5e26\u6a21\u5f0f-"},t.prototype.isAutoCreateSun=function(){return!1},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1},t.prototype.playBgm=function(){var t=i.pzaGameState.curChapter,e=i.pzaGameState.curPart;if((4==t||9==t)&&10==e)return s.pzaSoundManager.playBgm(s.pzaBGMName.BELT_BGM),void s.pzaSoundManager.playLoopAudio("rain",!0);10!=e||1!=t&&2!=t&&3!=t?a.prototype.playBgm.call(this):s.pzaSoundManager.playBgm(s.pzaBGMName.BELT_BGM)},t.prototype.getPlantArr=function(a,t){return p.pzaBeltConfig.getBeltPlants(a,t)},t.prototype.showBattlePropButtons=function(t){5==i.pzaGameState.curPart||10==i.pzaGameState.curPart?(t.freeSunNode.active=!1,t.cherryBombNode.active=!1,r.pzaChannel.isConfRemote&&(t.cherryBombNode.active=!0),t.autoPickNode.active=!0,t.clearCDNode.active=!1):a.prototype.showBattlePropButtons.call(this,t)},t}(l.pzaGameNormal);e.pzaGameBelt=c,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../utils/pzaChannel":"pzaChannel","./pzaBeltConfig":"pzaBeltConfig","./pzaGameNormal":"pzaGameNormal","./pzaSoundManager":"pzaSoundManager"}],pzaGameBoss:[function(a,t,e){"use strict";cc._RF.push(t,"a3942RVNM9J56CNGXZCTBw9","pzaGameBoss");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameBoss=void 0;var i=a("../Battle/pzaGameState"),r=a("../utils/pzaChannel"),p=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=i.pzaGameMode.ZOM_BOSS,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u50f5\u738b\u6a21\u5f0f-"},t.prototype.isAutoCreateSun=function(){return!1},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1},t.prototype.refreshNextWave=function(){},t.prototype.isLastWave=function(){return!1},t.prototype.checkAllZombieDeath=function(){return!1},t.prototype.showBattlePropButtons=function(t){5==i.pzaGameState.curPart||10==i.pzaGameState.curPart?(t.freeSunNode.active=!1,t.cherryBombNode.active=!1,r.pzaChannel.isConfRemote&&(t.cherryBombNode.active=!0),t.autoPickNode.active=!0,t.clearCDNode.active=!1):a.prototype.showBattlePropButtons.call(this,t)},t}(a("./pzaGameNormal").pzaGameNormal);e.pzaGameBoss=p,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../utils/pzaChannel":"pzaChannel","./pzaGameNormal":"pzaGameNormal"}],pzaGameCommonPool:[function(a,t,e){"use strict";cc._RF.push(t,"9a66aQkbvNLt4aUJDAQRYyG","pzaGameCommonPool"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameCommonPool=void 0;var o=function(){function a(){}return a.addUrlToPrefab=function(a,t){a&&t&&this.urlToPrefab.set(a,t)},a.getPrefabList=function(a){var t=this.currentPool.get(a);return t||(t=[],this.currentPool.set(a,t)),t},a.requestInstant2=function(a){var t=this.getPrefabList(a._uuid).pop();return t&&t.isValid?t.active=!0:t=cc.instantiate(a),t},a.requestInstant=function(a,t){return void 0===t&&(t=!1),cc.instantiate(a)},a.returnInstant2=function(t,e){t&&t.isValid&&(t.active=!1,t.removeFromParent(),e?this.addToCurrentPool(t,e):a.returnInstant(t))},a.returnInstant=function(a){a&&a.isValid&&a.destroy()},a.addToCurrentPool=function(a,t){if(a&&t){var e=this.currentPool.get(t);e?-1===e.indexOf(a)&&e.push(a):this.currentPool.set(t,[a])}},a.clear=function(){a.currentPool.forEach(function(a){var t=a.length;if(!(t<=20))for(var e=20;e<t;e++){var o=a.pop();o&&o.isValid&&o.destroy()}})},a.currentPool=new Map,a.urlToPrefab=new Map,a.urlToSpriteFame=new Map,a.urlToJson=new Map,a}();e.pzaGameCommonPool=o,cc._RF.pop()},{}],pzaGameConfig:[function(a,t,e){"use strict";cc._RF.push(t,"324edpOc/VIO7o/KS+DqQdc","pzaGameConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameConfig=e.pzaMapConifg=e.pzaZjZombieBookConfig=e.pzaPlantSkinUnLockConf=e.pzaZombieBookConfig=e.pzaZombieConfigData=e.pzaZjPlantBookConfig=e.pzaPlantBookConfig=e.pzaPlantConfigData=void 0;var o=a("../Battle/Data/pzaDropType"),n=a("../Battle/Data/pzaJarData"),i=a("../Battle/Data/pzaPlantEnum"),r=a("../Battle/Data/pzaZombieEnum"),p=a("../Battle/pzaGameState"),l=a("./pzaLocalData"),s=a("./pzaUtil"),c=function(){function a(a,t,e,o,n,r,p,l,s,c,u,d){void 0===c&&(c=!1),void 0===u&&(u=0),void 0===d&&(d=0),this.plantType=null,this.name=null,this.env=i.pzaPlantEnvEnum.NORMAL,this.hp=0,this.atk=0,this.atkInterval=0,this.price=0,this.createCD=0,this.initCD=0,this.rareLevel=0,this.isNight=!1,this.avoidshoot=0,this.float=0,this.plantType=a,this.name=t,this.env=e,this.hp=o,this.atk=n,this.atkInterval=r,this.price=p,this.createCD=l,this.initCD=s,this.isNight=c,this.avoidshoot=u,this.float=d}return a.isEnvPlant=function(t){return a.isLilyPad(t)||a.isPotPlant(t)},a.isPotEnv5Plant=function(a){return a==i.pzaPlantEnum.FLOWER_POT||a==i.pzaPlantEnum.SunPot||a==i.pzaPlantEnum.CATLITTERPOT},a.isPotPlant=function(a){return a==i.pzaPlantEnum.FLOWER_POT||a==i.pzaPlantEnum.SunPot||a==i.pzaPlantEnum.CATLITTERPOT||a==i.pzaPlantEnum.FLOWERPOT_SHROOM||a==i.pzaPlantEnum.LILY_FLOWERPOT},a.isPotRecoverPlant=function(a){return a==i.pzaPlantEnum.FLOWER_POT||a==i.pzaPlantEnum.SunPot||a==i.pzaPlantEnum.CATLITTERPOT||a==i.pzaPlantEnum.FLOWERPOT_SHROOM},a.isPumPkin=function(a){return a==i.pzaPlantEnum.PUMPKIN||a==i.pzaPlantEnum.PumpkinPurple||a==i.pzaPlantEnum.PumpkinPurpleFire},a.isBowling=function(a){return a==i.pzaPlantEnum.WALL_NUT_BOWLING||a==i.pzaPlantEnum.BOOM_NUT_BOWLING||a==i.pzaPlantEnum.TALL_NUT_BOWLING||a==i.pzaPlantEnum.TORCH_NUT_BOWLING||a==i.pzaPlantEnum.ICE_NUT_BOWLING||a==i.pzaPlantEnum.JALAPENO_NUT_BOWLING},a.isBuster=function(a){return a==i.pzaPlantEnum.GRAVE_BUSTER||a==i.pzaPlantEnum.MINE_BUSTER},a.isLilyPad=function(a,t){return void 0===t&&(t=!1),t?a==i.pzaPlantEnum.LILY_PAD||a===i.pzaPlantEnum.PEALILY_PAD:a==i.pzaPlantEnum.LILY_PAD||a===i.pzaPlantEnum.PEALILY_PAD||a===i.pzaPlantEnum.LILY_SHELL||a===i.pzaPlantEnum.LILY_FLOWERPOT},a.isTangleKelp=function(a){return a==i.pzaPlantEnum.TANGLE_KELP||a==i.pzaPlantEnum.PEATANGLE_KELP},a.isCannonPlant=function(a){return a==i.pzaPlantEnum.COB_CANNON||a==i.pzaPlantEnum.DoomCannon||a==i.pzaPlantEnum.PUMPKIN_CANNON},a.isBoomPlant=function(a){return[i.pzaPlantEnum.SunBomb,i.pzaPlantEnum.SunMine,i.pzaPlantEnum.TANGLE_DOOM,i.pzaPlantEnum.CherryJalapeno,i.pzaPlantEnum.DoomCannon,i.pzaPlantEnum.FireMine,i.pzaPlantEnum.FireNut,i.pzaPlantEnum.ButterJoker,i.pzaPlantEnum.GarlicJalapeno,i.pzaPlantEnum.STAR_MINE,i.pzaPlantEnum.PUMPKIN_CANNON].indexOf(a)>=0},a.isCoffeePlant=function(a){return a==i.pzaPlantEnum.COFFEE_BEAN||a==i.pzaPlantEnum.COFFEE_Umbrella},a.isOnWaterPlant=function(a){return[i.pzaPlantEnum.PEALILY_PAD,i.pzaPlantEnum.PEATANGLE_KELP,i.pzaPlantEnum.SEA_PEA,i.pzaPlantEnum.SEAFUME_SHROOM,i.pzaPlantEnum.TANGLE_DOOM].indexOf(a)>=0},a.isTallPlant=function(a){return[i.pzaPlantEnum.TALL_NUT,i.pzaPlantEnum.TALL_NUT_LEAF,i.pzaPlantEnum.HeighIceNut,i.pzaPlantEnum.SpikeRockNut].indexOf(a)>=0},a}();e.pzaPlantConfigData=c;var u=function(a,t,e,o,n,i,r){this.plantType=null,this.desc=null,this.prop=null,this.special=null,this.bg1=null,this.bg2=null,this.cd=null,this.plantType=a,this.desc=t,this.prop=e,this.special=o,this.bg1=n,this.bg2=i,this.cd=r};e.pzaPlantBookConfig=u;e.pzaZjPlantBookConfig=function(a,t,e,o,n,i,r,p,l,s,c){this.plantType=null,this.prop=null,this.tenacty=null,this.power=null,this.area=null,this.special=null,this.deathWord=null,this.desc=null,this.cost=null,this.speed=null,this.name=null,this.plantType=a,this.prop=t,this.tenacty=e,this.power=o,this.area=n,this.special=i,this.deathWord=r,this.desc=p,this.cost=l,this.speed=s,this.name=c};var d=function(){function a(a,t,e,o,n,i,r,p,l,s,c,u,d,h,m,f){var z=this;if(this.zombieType=null,this.name=null,this.hp=0,this.equipHp=0,this.equipType=0,this.toolType=0,this.atk=0,this.atkInterval=0,this.minSpeed=0,this.maxSpeed=0,this.specialMinSpeed=0,this.specialMaxSpeed=0,this.refreshLevel=1,this.refrshWeight=0,this.refrshMinWave=1,this.unlockChapter=1,this.unlockPart=1,this.price=0,this.ableRoad=0,this.ableRoad_old=0,this.typeId=[],this.showWeight=[],this.zombieType=a,this.name=t,this.hp=e,this.equipHp=o,this.atk=r,this.atkInterval=p,this.equipType=n,this.toolType=i,this.refreshLevel=s,this.refrshWeight=c,this.refrshMinWave=u,this.minSpeed=this.maxSpeed=l,this.specialMinSpeed=this.specialMaxSpeed=l,this.ableRoad=d,this.ableRoad_old=h,this.ableRoad_old||(this.ableRoad_old=this.ableRoad),m&&"0"!=m){var y=m.split(",");y.length>0&&y.forEach(function(a){z.typeId.push(parseFloat(a))}),null!=f&&f.split(",").forEach(function(a){z.showWeight.push(parseFloat(a))})}}return Object.defineProperty(a.prototype,"speed",{get:function(){return s.pzaUtil.getRandomFloatNum(this.minSpeed,this.maxSpeed)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"specialSpeed",{get:function(){return s.pzaUtil.getRandomFloatNum(this.specialMinSpeed,this.specialMaxSpeed)},enumerable:!1,configurable:!0}),a}();e.pzaZombieConfigData=d;var h=function(a,t,e,o,n,i){void 0===i&&(i=null),this.zombieType=null,this.desc=null,this.prop=null,this.special=!1,this.bg=null,this.bg2=null,this.zombieType=a,this.desc=t,this.prop=e,this.special=o,this.bg=n,this.bg2=i};e.pzaZombieBookConfig=h;e.pzaPlantSkinUnLockConf=function(a,t){this.plantType=null,this.state=0,this.plantType=a,this.state=t};e.pzaZjZombieBookConfig=function(a,t,e,o,n,i,r,p,l){void 0===l&&(l=null),this.zombieType=null,this.name=null,this.desc=null,this.tenacty=null,this.wear=null,this.dmage=null,this.speed=null,this.special=null,this.bg=null,this.zombieType=a,this.name=t,this.desc=e,this.tenacty=o,this.wear=n,this.dmage=i,this.speed=r,this.special=p,this.bg=l};var m=function(){function a(a,t,e,o,n,i,r,p,l,s,c){this.xInterval=[97,97,94,97,97,94,97,97,117],this.xPos=[0,97,194,288,385,482,576,673,770],this.yInterval=[125,102,124,115,148],this.yPos=[0,125,227,351,466],this.mapOriPos=cc.v2(-380,-326),this.blockWidth=97,this.mapHeight=614,this.mapWidth=887,this.mapRow=5,this.skewAngel=12,this.skewColumn=5,this.mapHeight=a,this.mapWidth=t,this.blockWidth=e,this.mapOriPos=o,this.xPos=n,this.xInterval=i,this.yPos=r,this.yInterval=p,this.mapRow=l,this.skewAngel=s,this.skewColumn=c}return a.prototype.getMapSkewRadion=function(){return this.skewAngel/180*Math.PI},a.prototype.getMapSkewColumn=function(){return this.skewColumn},a.prototype.getXInterval=function(a){return this.xInterval[a]},a.prototype.getXPos=function(a){return this.xPos[a]},a.prototype.getYInterval=function(a){return this.yInterval[a]},a.prototype.getYPos=function(a){return this.yPos[a]},a.prototype.getBlockAllPos=function(a,t,e){var o=this.skewAngel/180*Math.PI;if(0==e){var n=Math.min(this.skewColumn,a),i=Math.tan(o)*this.xPos[n];return cc.v2(this.xPos[a],this.yPos[t]+i)}return 1==e?(n=Math.min(this.skewColumn,a+1),i=Math.tan(o)*this.xPos[n],cc.v2(this.xPos[a+1],this.yPos[t]+i)):2==e?(n=Math.min(this.skewColumn,a+1),i=Math.tan(o)*this.xPos[n],cc.v2(this.xPos[a+1],this.yPos[t+1]+i)):3==e?(n=Math.min(this.skewColumn,a),i=Math.tan(o)*this.xPos[n],cc.v2(this.xPos[a],this.yPos[t+1]+i)):void 0},a.prototype.getMapOriPos=function(){return this.mapOriPos},a.prototype.getMapWidth=function(){return this.mapWidth},a.prototype.getBlockWidth=function(){return this.blockWidth},a.prototype.getMapColumn=function(){return 9},a.prototype.getMapRow=function(){return this.mapRow},a.prototype.getMapXIndex=function(a,t,e){if(void 0===t&&(t=null),void 0===e&&(e=0),null==a&&null==t)return-1;var o=-1;if((o=null!=t?t.x:a.x-this.getMapOriPos().x)<0)return-1;o+=e;for(var n=0,i=this.getMapColumn(),r=0;r<i;r++)if((n+=this.getXInterval(r))>o)return r;return-1},a.prototype.getMapYIndex=function(a,t){if(void 0===t&&(t=null),null==a&&null==t)return-1;var e=-1,o=-1;if(null!=t)e=t.x,o=t.y;else{var n=this.getMapOriPos();e=a.x-n.x,o=a.y-n.y}var i=this.getMapSkewRadion(),r=this.getMapSkewColumn();if(e=Math.min(e,this.getXPos(r)),(o-=Math.tan(i)*e)<0)return-1;for(var p=this.getMapRow(),l=0,s=0;s<p;s++)if((l+=this.getYInterval(s))>o)return s;return-1},a.prototype.getBlockLogicPos=function(a,t,e,o){void 0===e&&(e=0);var n=this.xPos[a]+e,i=this.yPos[t]+o,r=this.getMapSkewRadion(),p=this.skewColumn,l=Math.min(n,this.xPos[p]),s=Math.tan(r)*l;return cc.v2(n+this.mapOriPos.x,i+s+this.mapOriPos.y)},a.prototype.fixMapYOffset=function(a,t,e){if(null!=t){var o=this.yPos[a]+e;if(this.skewAngel<=0||this.skewColumn<=0)t.y=o+this.mapOriPos.y;else{var n=this.skewColumn,i=this.xPos[n],r=t.x-this.mapOriPos.x;r>=i&&(r=i);var p=this.getMapSkewRadion(),l=r*Math.tan(p);t.y=o+l+this.mapOriPos.y}}},a.prototype.returnYOffset=function(a,t,e){var o=this.yPos[a]+e,n=this.skewColumn,i=this.xPos[n],r=t.x-this.mapOriPos.x;r>=i&&(r=i);var p=this.getMapSkewRadion(),l=r*Math.tan(p);return t.y=o+l+this.mapOriPos.y,t.y},a}();e.pzaMapConifg=m;var f=function(){function a(){}return a.initPlantConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var e=1==a.hy,o=new c(parseInt(a.id),a.name,parseInt(a.lx),parseInt(a.hp),parseInt(a.atk),0,parseInt(a.gold),0,parseInt(a.openingcd),e);null!=a.cd&&(o.atkInterval=parseFloat(a.cd)),null!=a.plantcd&&(o.createCD=parseFloat(a.plantcd)),null!=a.senior&&(o.rareLevel=parseInt(a.senior)),t.PlantConfigMap.set(a.id,o)}})},a.initZombieConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var e,o=new d(parseInt(a.id),a.name,parseInt(a.hp),parseInt(a.armorhp),parseInt(a.armor),parseInt(a.tool),parseInt(a.atk),parseFloat(a.cd),0,parseInt(a.level),parseInt(a.weight),parseInt(a.mini),parseInt(a.ableroad),parseInt(a.ableroad_old),a.typeId,a.showWeight);if(null!=a.speed)if((e=a.speed.split(",")).length>1){var n=parseFloat(e[0]),i=parseFloat(e[1]);o.minSpeed=Math.min(n,i),o.maxSpeed=Math.max(n,i)}else o.minSpeed=o.maxSpeed=parseFloat(e[0]);if(null!=a.bspeed&&((e=a.bspeed.split(",")).length>1?(n=parseFloat(e[0]),i=parseFloat(e[1]),o.specialMinSpeed=Math.min(n,i),o.specialMaxSpeed=Math.max(n,i)):o.specialMinSpeed=o.specialMaxSpeed=parseFloat(e[0])),null!=a.unlock){var r=a.unlock.split("-");o.unlockChapter=parseFloat(r[0])||1,o.unlockPart=parseFloat(r[1])||1}null!=a.gold&&(o.price=parseInt(a.gold)),t.ZombieConfigMap.set(a.id,o)}})},a.getPartDrop=function(a,t){if(4==t){if(1==a)return o.pzaDropType.SHOVEL;if(2==a)return o.pzaDropType.HAND_BOOK;if(3==a)return o.pzaDropType.BACONIC;if(4==a)return o.pzaDropType.TACO;if(5==a)return o.pzaDropType.SPRINKLER}if(9==t||5==a&&10==t||10==a&&10==t)return o.pzaDropType.CG_PAPER;var e=a+"-"+t;return this.newPlantDropMap.has(e)?o.pzaDropType.PLANT_CARD:a>5?o.pzaDropType.COIN_PACKAGE:null},a.getPartStar=function(a,t){return this.AllPartStar[a-1][t-1]},a.getAllPartStar=function(a,t){void 0===a&&(a=!1),void 0===t&&(t=!1);var e=0,o=0,n=this.AllPartStar.length;a&&(e=5),t&&(e=0,n=5);for(var i=e;i<n;i++)for(var r=this.AllPartStar[i],p=0;p<r.length;p++)o+=r[p];return o},a.isWaterZombie=function(a){return this.waterWayZombies.has(a)},a.isAllWayZombie=function(a){return this.allWayZombies.has(a)},a.isFlyZombie=function(a){return a==r.pzaZombieEnum.BALLOON_ZOMBIE},a.isAdvancePlant=function(a){return!(a<=i.pzaPlantEnum.MELON_PULT||a>=i.pzaPlantEnum.IMITATER)},a.getPlantConfig=function(a){return this.PlantConfigMap.get(a)},a.getZombieConfig=function(a){return this.ZombieConfigMap.get(a)},a.getZombieSpecialSpeed=function(a){var t=this.ZombieConfigMap.get(a);return null==t?0:t.specialSpeed},a.getZombieSpeed=function(a){var t=this.ZombieConfigMap.get(a);return null==t?0:t.speed},a.getRandomSunPos=function(){var a=s.pzaUtil.getRandomFloatNum(this.autoSunMinX,this.autoSunMaxX);return cc.v2(a,this.autoSunY)},a.getRandomSunDis=function(){return s.pzaUtil.getRandomFloatNum(this.autoSunMaxDis/2,this.autoSunMaxDis)},a.getZombieLevel=function(a){var t=this.ZombieConfigMap.get(a);return null==t?1:t.refreshLevel},a.get45JarData=function(a){var t=[],e=6,o=0,i=null,r=null;if(1==a){e=6,i=[1,1,1,1,5],r=[];for(var l=0;l<5;l++)r.push(1);for(l=0;l<5;l++)r.push(18);o=0}else if(2==a){for(e=5,i=[1,1,1,1,1,5,8],r=[],l=0;l<4;l++)r.push(1);for(l=0;l<4;l++)r.push(18);for(l=0;l<5;l++)r.push(6);o=2}else if(3==a){for(e=4,i=[1,1,1,1,1,1,5,5,9,18],r=[],l=0;l<5;l++)r.push(1);for(l=0;l<5;l++)r.push(6);for(l=0;l<5;l++)9==p.pzaGameState.curChapter&&5==p.pzaGameState.curPart?r.push(13):r.push(18);o=3}r.sort(function(){return Math.random()-.5});for(var c=e;c<9;c++)for(var u=0;u<5;u++){var d=new n.pzaJarData(c,u);t.push(d)}var h=s.pzaUtil.getRandomArrayValue(t,i.length);for(l=0;l<i.length;l++){var m=h[l];null!=m&&(m.zombieType=i[l])}var f=[];if(t.forEach(function(a){h.indexOf(a)>=0||(a.plantType=r.shift(),f.push(a))}),o>0){var z=s.pzaUtil.getRandomArrayValue(f,o);for(l=0;l<o;l++){var y=z[l];null!=y&&(y.jarType=n.pzaJarType.GREEN_JAR)}}return t},a.canChoosePlants=function(a){var t=this.NO_RECOMMEND_PLANT.get(a),e=l.pzaLocalData.data.ownPlants;if(t){for(var o=Array.from(t),n=i.pzaPlantEnum.GATLING_PEA;n<=i.pzaPlantEnum.IMITATER;n++)o.push(n);o.push(51),o.push(36),o.push(53),o.push(54),e=e.filter(function(a){return!o.includes(a)})}return Array.from(new Set(e))},a.isNoRecommendPlant=function(a,t){var e=this.NO_RECOMMEND_PLANT.get(t);return null!=e&&e.has(a)},a.isNoRecommendPlantInMini=function(a,t){var e=this.MINI_NO_RECOMMEND_PLANT.get(t);return null!=e&&e.has(a)},a.isNoRecommendPlantCreateNormal=function(a){return new Set([20,25,26,28,34,36,44,17]).has(a)},a.setBlockTypeMap=function(t){for(var e=window.pzaMapManager.BlockTypeMap,o=a.mapTerrain.get(t),n=0;n<o.length;n++)for(var i=0;i<o[n].length;i++){var r=""+i+Math.abs(n-4);e.set(r,o[n][i])}},a.chapterMapConfig=new Map([[0,new m(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[1,new m(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[2,new m(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[3,new m(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[0,100,215,305,415,515,610],[100,115,90,110,100,105],6,0,0)],[4,new m(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[0,100,215,305,415,515,610],[100,115,90,110,100,105],6,0,0)],[5,new m(619,1020,120,cc.v2(-425,-378),[0,115,230,345,460,575,690,800,910,1020],[115,115,115,115,115,115,110,110,110],[0,90,190,293,396,499],[90,100,103,103,103],5,13,5)],[6,new m(619,1020,120,cc.v2(-425,-378),[0,115,230,345,460,575,690,800,910,1020],[115,115,115,115,115,115,110,110,110],[0,90,190,293,396,499],[90,100,103,103,103],5,13,5)],[7,new m(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[-20,110,227,351,466,610],[125,102,124,115,144],5,0,0)],[8,new m(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[-20,80,215,305,415,515,610],[100,115,90,110,100,105],6,0,0)],[9,new m(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[-20,80,195,305,415,515,610],[100,115,90,110,100,105],6,0,0)],[10,new m(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[11,new m(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[12,new m(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[-30,80,195,295,395,495,610],[100,115,90,110,100,105],6,0,0)],[13,new m(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[0,100,215,305,415,515,610],[100,115,90,110,100,105],6,0,0)],[14,new m(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[15,new m(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[16,new m(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[17,new m(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[0,100,215,305,415,515,610],[100,115,90,110,100,105],6,0,0)],[18,new m(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[19,new m(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[-40,80,195,285,395,495,590],[100,115,90,110,100,105],6,0,0)],[20,new m(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[0,100,215,305,415,515,610],[100,115,90,110,100,105],6,0,0)]]),a.sunLiveTime=15,a.autoSunY=280,a.autoSunMaxDis=600,a.autoSunMinX=-450,a.autoSunMaxX=390,a.autoSunSpeed=80,a.bigSunValue=25,a.smallSunValue=15,a.DIAMOND_CHANCE=.005,a.GOLD_CHANCE=.02,a.SILVER_CHANCE=.08,a.PLANT_CHANCE=.004,a.CHOCOLATE_CHANCE=.01,a.miniZombieScale=.55,a.miniZombieHp=.2,a.miniZombieWaveInterval=8,a.PlantConfigMap=new Map,a.ZombieConfigMap=new Map,a.ZombieDescMap=new Map([[r.pzaZombieEnum.ZOMBIE,"\u6700\u666e\u901a\u6700\u5e38\u89c1\u7684\u50f5\u5c38\uff0c\u751f\u547d\u529b\u4f4e\uff0c\u79fb\u52a8\u901f\u5ea6\u6162"],[r.pzaZombieEnum.FLAG_ZOMBIE,"\u9664\u4e86\u62ff\u7740\u65d7\u5b50\uff0c\u901f\u5ea6\u6bd4\u666e\u901a\u50f5\u5c38\u7565\u5feb\uff0c\u65d7\u5b50\u6389\u65f6\u50f5\u5c38\u6b7b\u4ea1"],[r.pzaZombieEnum.CONE_HEAD_ZOMBIE,"\u7eb8\u76d2\u5177\u5907\u66f4\u9ad8\u9632\u5fa1\uff0c\u591a\u79cd\u4e2a\u9999\u8549\u6216\u69b4\u83b2\u5427\uff01"],[r.pzaZombieEnum.POLEVAULTING_ZOMBIE,"\u5b83\u80fd\u8df3\u8fc7\u4e00\u4e2a\u690d\u7269\uff0c\u591a\u79cd\u4e2a\u9999\u8549\uff0c\u5feb\u901f\u89e3\u51b3\u5b83\uff01"],[r.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,"\u94c1\u9505\u9632\u5fa1\u6781\u9ad8\uff0c\u63d0\u524d\u79cd\u4e2a\u756a\u8304\u5730\u96f7\u79d2\u6740\u5b83\uff01"],[r.pzaZombieEnum.NEWSPAPER_ZOMBIE,"\u5b83\u624b\u91cc\u7684\u4e66\u7c4d\u80fd\u62b5\u6321\u4e00\u5b9a\u4f24\u5bb3\uff0c\u591a\u79cd\u70b9\u5c0f\u5c71\u7af9"],[r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,"\u94c1\u95e8\u5177\u5907\u9ad8\u9632\u5fa1\uff0c\u5927\u5c71\u7af9\u7684\u653b\u51fb\u80fd\u7a7f\u900f\u94c1\u95e8"],[r.pzaZombieEnum.FOOTBALL_ZOMBIE,"\u8fd9\u5bb6\u4f19\u8d85\u5389\u5bb3\uff0c\u79cd\u4e2a\u9b54\u5e7b\u8349\u8ff7\u60d1\u5b83!"],[r.pzaZombieEnum.DANCING_ZOMBIE,"\u4f1a\u53ec\u5524\u4f34\u821e\u50f5\u5c38\uff0c\u7528\u51b0\u51b0\u83c7\u51bb\u4f4f\u5b83\u4eec\u5427!"],[r.pzaZombieEnum.SNORKEL_ZOMBIE,"\u85cf\u5728\u6c34\u91cc\u65f6\u9999\u8549\u6253\u4e0d\u5230\uff0c\u79cd\u4e2a\u69b4\u83b2\u8ba9\u5b83\u54ac\u5c31\u80fd\u6253\u5230\u4e86"],[r.pzaZombieEnum.ZOMBONI,"\u80fd\u538b\u6241\u9047\u5230\u7684\u690d\u7269\uff0c\u79cd\u4e2a\u7206\u70b8\u8fa3\u6912\uff01"],[r.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,"\u80fd\u8df3\u8fc7\u4e00\u4e2a\u690d\u7269\uff0c\u52a0\u5927\u706b\u529b\u6d88\u706d\u5b83!"],[r.pzaZombieEnum.JACK_ZOMBIE,"\u5c0f\u5fc3\uff0c\u8fd9\u4e2a\u5bb6\u4f19\u4f1a\u81ea\u7206\uff01"],[r.pzaZombieEnum.BALLOON_ZOMBIE,"\u98de\u5728\u5929\u4e0a\uff0c\u79cd\u4e2a\u7518\u8517\u4fa0\u5c31\u80fd\u6253\u5230\u5b83\uff01"],[r.pzaZombieEnum.DIGGER_ZOMBIE,"\u80fd\u94bb\u5230\u573a\u5730\u540e\u65b9\uff0c\u79cd\u4e2a\u5206\u5411\u5c04\u624b\u5427\uff01"],[r.pzaZombieEnum.POGO_ZOMBIE,"\u76f4\u63a5\u8df3\u8fc7\u6240\u6709\u690d\u7269\uff0c\u52a0\u5927\u706b\u529b\u89e3\u51b3\u5b83!"],[r.pzaZombieEnum.LADDER_ZOMBIE,"\u753b\u677f\u80fd\u67b6\u5728\u69b4\u83b2\u4e0a\uff0c\u7528\u6295\u63b7\u7c7b\u690d\u7269\u80fd\u76f4\u63a5\u6253\u5230\u5b83"],[r.pzaZombieEnum.CATAPULT_ZOMBIE,"\u6295\u51fa\u7684\u793c\u54c1\u80fd\u76f4\u63a5\u4f24\u5bb3\u5e95\u7ebf\u690d\u7269\uff0c\u52a0\u5927\u706b\u529b\u5427\uff01"],[r.pzaZombieEnum.GARGANTUAR,"\u8fd9\u5bb6\u4f19\u5341\u5206\u53d8\u6001\uff0c\u7528\u70b8\u5f39\u5427\uff01\u5c0f\u5fc3\u5b83\u4f1a\u4e22\u51fa\u5c0f\u5c0f\u50f5\u5c38\uff01"]]),a.PlantDescMap=new Map([[i.pzaPlantEnum.SUN_FLOWER,"\u4e3a\u4f60\u63d0\u4f9b\u66f4\u591a\u80fd\u91cf"],[i.pzaPlantEnum.CHERRY_BOMB,"\u70b8\u5149\u4e00\u5b9a\u533a\u57df\u5185\u7684\u5168\u90e8\u50f5\u5c38"],[i.pzaPlantEnum.WALL_NUT,"\u6321\u4f4f\u50f5\u5c38\uff0c\u4fdd\u62a4\u5b83\u80cc\u540e\u7684\u690d\u7269"],[i.pzaPlantEnum.POTATO_MINE,"\u70b8\u98de\u78b0\u5230\u5b83\u7684\u654c\u4eba\uff0c\u4f46\u5b89\u653e\u540e\u9700\u8981\u4e00\u5b9a\u65f6\u95f4\u542f\u52a8"],[i.pzaPlantEnum.SNOW_PEA,"\u5c04\u51fa\u5bd2\u51b0\u5b50\u5f39\uff0c\u4f24\u5bb3\u654c\u4eba\u7684\u540c\u65f6\u51cf\u6162\u654c\u4eba\u901f\u5ea6"],[i.pzaPlantEnum.CHOMPER,"\u4e00\u53e3\u541e\u4e0b\u4e00\u4e2a\u50f5\u5c38\uff0c\u4f46\u5728\u5480\u56bc\u50f5\u5c38\u7684\u65f6\u5019\u975e\u5e38\u8106\u5f31"],[i.pzaPlantEnum.REPEATER,"\u4e00\u6b21\u53d1\u5c04\u4e24\u4e2a\u53cc\u622a\u68cd"],[i.pzaPlantEnum.PUFF_SHROOM,"\u5728\u77ed\u8ddd\u79bb\u5185\u5411\u654c\u4eba\u53d1\u5c04\u5b50\u5f39"],[i.pzaPlantEnum.SUN_SHROOM,"\u5f00\u59cb\u65f6\u63d0\u4f9b\u5c11\u91cf\u80fd\u91cf\uff0c\u4e00\u6bb5\u65f6\u95f4\u540e\u4ea7\u91cf\u5c06\u548c\u80fd\u91cf\u82b1\u76f8\u540c"],[i.pzaPlantEnum.FUME_SHROOM,"\u55b7\u5c04\u80fd\u7a7f\u8fc7\u94c1\u95e8\u7684\u5b50\u5f39"],[i.pzaPlantEnum.GRAVE_BUSTER,"\u628a\u5b83\u79cd\u690d\u5728\u5893\u7891\u4e0a\uff0c\u5b83\u5c31\u80fd\u54ac\u6389\u5893\u7891"],[i.pzaPlantEnum.HYPNO_SHROOM,"\u8ba9\u4e00\u53ea\u50f5\u5c38\u4e3a\u4f60\u4f5c\u6218"],[i.pzaPlantEnum.SCAREDY_SHROOM,"\u53d1\u5c04\u8fdc\u7a0b\u5b50\u5f39\uff0c\u4f46\u654c\u4eba\u9760\u8fd1\u65f6\u4f1a\u80c6\u5c0f\u5730\u7f29\u8fdb\u5730\u91cc"],[i.pzaPlantEnum.ICE_SHROOM,"\u6682\u65f6\u4f7f\u753b\u9762\u4e2d\u7684\u5168\u90e8\u50f5\u5c38\u90fd\u65e0\u6cd5\u52a8\u5f39"],[i.pzaPlantEnum.DOOM_SHROOM,"\u9020\u6210\u5927\u8303\u56f4\u6bc1\u706d\u6548\u679c\uff0c\u4f46\u4f1a\u5728\u539f\u5730\u7559\u4e0b\u65e0\u6cd5\u8fdb\u884c\u79cd\u690d\u7684\u5f39\u5751"],[i.pzaPlantEnum.LILY_PAD,"\u53ef\u4ee5\u5728\u6c34\u6c60\u79cd\u690d\u975e\u6c34\u751f\u690d\u7269"],[i.pzaPlantEnum.SQUASH,"\u538b\u6241\u8eab\u65c1\u7684\u50f5\u5c38"],[i.pzaPlantEnum.THREE_PEATER,"\u4e00\u6b21\u5c04\u51fa\u4e09\u884c\u8c4c\u8c46"],[i.pzaPlantEnum.TANGLE_KELP,"\u80fd\u591f\u628a\u4e00\u53ea\u50f5\u5c38\u62d6\u8fdb\u6c34\u91cc\u7684\u6c34\u751f\u690d\u7269"],[i.pzaPlantEnum.JALAPENO,"\u70e7\u5149\u4e00\u6574\u884c\u7684\u50f5\u5c38"],[i.pzaPlantEnum.SPIKEWEED,"\u80fd\u624e\u7834\u8f6e\u80ce\uff0c\u4e5f\u80fd\u523a\u4f24\u8e0f\u5728\u4e0a\u9762\u7684\u50f5\u5c38"],[i.pzaPlantEnum.TORCHWOOD,"\u7a7f\u8fc7\u7bdd\u706b\u7684\u5b50\u5f39\u4f1a\u53d8\u6210\u706b\u5f39"],[i.pzaPlantEnum.TALL_NUT,"\u65e0\u6cd5\u8df3\u8fc7\u7684\u539a\u5b9e\u69b4\u83b2\u5899"],[i.pzaPlantEnum.SEA_SHROOM,"\u53d1\u5c04\u77ed\u7a0b\u5b50\u5f39\u7684\u6c34\u751f\u690d\u7269"],[i.pzaPlantEnum.PLANTERN,"\u7167\u4eae\u4e00\u7247\u533a\u57df\uff0c\u9a71\u6563\u8ff7\u96fe"],[i.pzaPlantEnum.CACTUS,"\u53d1\u5c04\u80fd\u591f\u523a\u7834\u6c14\u7403\u7684\u98de\u9556"],[i.pzaPlantEnum.BLOVER,"\u5439\u8d70\u6240\u6709\u98de\u884c\u50f5\u5c38\u548c\u8ff7\u96fe"],[i.pzaPlantEnum.SPLIT_PEA,"\u540c\u65f6\u5411\u524d\u540e\u53d1\u5c04\u53cc\u622a\u68cd"],[i.pzaPlantEnum.STAR_FRUIT,"\u5411\u4e94\u4e2a\u65b9\u5411\u53d1\u5c04\u5c0f\u661f\u661f"],[i.pzaPlantEnum.PUMPKIN,"\u4fdd\u62a4\u88ab\u5957\u5728\u91cc\u9762\u7684\u690d\u7269"],[i.pzaPlantEnum.MAGNET_SHROOM,"\u5438\u8d70\u94c1\u9505\u3001\u5934\u76d4\u6216\u8005\u5176\u5b83\u91d1\u5c5e\u7269\u54c1"],[i.pzaPlantEnum.CABBAGE_PULT,"\u5411\u654c\u4eba\u6295\u63b7\u6d0b\u8471"],[i.pzaPlantEnum.FLOWER_POT,"\u8ba9\u690d\u7269\u53ef\u4ee5\u79cd\u690d\u5728\u623f\u9876\u4e0a"],[i.pzaPlantEnum.KERNEL_PULT,"\u5411\u50f5\u5c38\u6295\u63b7\u91d1\u7b8d\u68d2"],[i.pzaPlantEnum.COFFEE_BEAN,"\u653e\u5728\u690d\u7269\u5934\u4e0a\uff0c\u5c31\u80fd\u628a\u767d\u5929\u7761\u89c9\u7684\u8611\u83c7\u53eb\u9192"],[i.pzaPlantEnum.GARLIC,"\u628a\u50f5\u5c38\u8d76\u5230\u5176\u5b83\u524d\u8fdb\u8def\u7ebf\u4e0a"],[i.pzaPlantEnum.UMBRELLA_LEAF,"\u4fdd\u62a4\u5468\u56f4\u7684\u690d\u7269\uff0c\u514d\u53d7\u7334\u5b50\u50f5\u5c38\u548c\u793c\u54c1\u8f66\u50f5\u5c38\u7684\u4f24\u5bb3"],[i.pzaPlantEnum.MARIGOLD,"\u63d0\u4f9b\u91d1\u5e01\u548c\u94f6\u5e01"],[i.pzaPlantEnum.MELON_PULT,"\u6295\u51fa\u897f\u74dc\uff0c\u91cd\u91cd\u6253\u51fb\u6210\u7fa4\u7684\u50f5\u5c38"]]),a.newPlantDropMap=new Map([["1-1",i.pzaPlantEnum.SUN_FLOWER],["1-2",i.pzaPlantEnum.CHERRY_BOMB],["1-3",i.pzaPlantEnum.WALL_NUT],["1-5",i.pzaPlantEnum.POTATO_MINE],["1-6",i.pzaPlantEnum.SNOW_PEA],["1-7",i.pzaPlantEnum.CHOMPER],["1-8",i.pzaPlantEnum.REPEATER],["1-10",i.pzaPlantEnum.PUFF_SHROOM],["2-1",i.pzaPlantEnum.SUN_SHROOM],["2-2",i.pzaPlantEnum.FUME_SHROOM],["2-3",i.pzaPlantEnum.GRAVE_BUSTER],["2-5",i.pzaPlantEnum.HYPNO_SHROOM],["2-6",i.pzaPlantEnum.SCAREDY_SHROOM],["2-7",i.pzaPlantEnum.ICE_SHROOM],["2-8",i.pzaPlantEnum.DOOM_SHROOM],["2-10",i.pzaPlantEnum.LILY_PAD],["3-1",i.pzaPlantEnum.SQUASH],["3-2",i.pzaPlantEnum.THREE_PEATER],["3-3",i.pzaPlantEnum.TANGLE_KELP],["3-5",i.pzaPlantEnum.JALAPENO],["3-6",i.pzaPlantEnum.SPIKEWEED],["3-7",i.pzaPlantEnum.TORCHWOOD],["3-8",i.pzaPlantEnum.TALL_NUT],["3-10",i.pzaPlantEnum.SEA_SHROOM],["4-1",i.pzaPlantEnum.PLANTERN],["4-2",i.pzaPlantEnum.CACTUS],["4-3",i.pzaPlantEnum.BLOVER],["4-5",i.pzaPlantEnum.SPLIT_PEA],["4-6",i.pzaPlantEnum.STAR_FRUIT],["4-7",i.pzaPlantEnum.PUMPKIN],["4-8",i.pzaPlantEnum.MAGNET_SHROOM],["4-10",i.pzaPlantEnum.CABBAGE_PULT],["5-1",i.pzaPlantEnum.FLOWER_POT],["5-2",i.pzaPlantEnum.KERNEL_PULT],["5-3",i.pzaPlantEnum.COFFEE_BEAN],["5-5",i.pzaPlantEnum.GARLIC],["5-6",i.pzaPlantEnum.UMBRELLA_LEAF],["5-7",i.pzaPlantEnum.MARIGOLD],["5-8",i.pzaPlantEnum.MELON_PULT]]),a.AllPartStar=[[0,0,0,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0]],a.waterWayZombies=new Set([r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,r.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE,r.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE,r.pzaZombieEnum.SNORKEL_ZOMBIE,r.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE]),a.allWayZombies=new Set([r.pzaZombieEnum.NormalPeaZombie,r.pzaZombieEnum.Nut_Zombie,r.pzaZombieEnum.TALLNUT_ZOMBIE,r.pzaZombieEnum.GATLINGSHOOT_ZOMBIE,r.pzaZombieEnum.SQUASH_ZOMBIE]),a.PlantBookMap=new Map([[i.pzaPlantEnum.PEA_SHOOTER,new u(i.pzaPlantEnum.PEA_SHOOTER,"\u9999\u8549\u5c04\u624b\u662f\u4f60\u7b2c\u4e00\u9053\u9632\u7ebf\u53d1\u5c04\u53cc\u622a\u68cd\u653b\u51fb\u50f5\u5c38\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.SUN_FLOWER,new u(i.pzaPlantEnum.SUN_FLOWER,"\u80fd\u91cf\u82b1\uff0c\u4e3a\u4f60\u751f\u4ea7\u66f4\u591a\u80fd\u91cf\u7684\u57fa\u7840\u4f5c\u7269\u3002\u5c3d\u53ef\u80fd\u591a\u5730\u79cd\u690d\u4e00\u4e9b\u5427!","<color=#aa582b>\u80fd\u91cf\u4ea7\u91cf\uff1a</c><color=#e6300d>\u4e2d\u7b49</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.CHERRY_BOMB,new u(i.pzaPlantEnum.CHERRY_BOMB,"\u6a31\u6843\u96f7\uff0c\u53ef\u4ee5\u70b8\u6389\u4e00\u5b9a\u8303\u4ed6\u4eec\u56f4\u5185\u7684\u5168\u90e8\u50f5\u5c38\u3002\u4ed6\u4eec\u53ea\u6709\u5f88\u77ed\u7684\u5f15\u7ebf\uff0c\u53ea\u8981\u4e00\u79cd\u4e0b\u5c31\u4f1a\u7acb\u523b\u5f15\u7206\uff0c\u6240\u4ee5\u8bf7\u628a\u4ed6\u4eec\u79cd\u5728\u50f5\u5c38\u8eab\u8fb9\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e2d\u7b49\u8303\u56f4\u5185\u7684\u5168\u90e8\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.WALL_NUT,new u(i.pzaPlantEnum.WALL_NUT,"\u69b4\u83b2\u62e5\u6709\u8db3\u4ee5\u4fdd\u62a4\u5176\u4ed6\u690d\u7269\u7684\u575a\u786c\u5916\u58f3\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.POTATO_MINE,new u(i.pzaPlantEnum.POTATO_MINE,"\u756a\u8304\u5730\u96f7\u5177\u6709\u5f3a\u5927\u7684\u5a01\u529b\uff0c\u4f46\u4ed6\u4eec\u9700\u8981\u70b9\u65f6\u95f4\u6765\u542f\u52a8\u81ea\u5df1\u3002\u4f60\u5e94\u628a\u4ed6\u4eec\u79cd\u5728\u50f5\u5c38\u524d\u8fdb\u7684\u8def\u4e0a\uff0c\u5f53\u4ed6\u4eec\u4e00\u88ab\u78b0\u5230\u5c31\u4f1a\u7acb\u523b\u7206\u70b8\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5c0f\u8303\u56f4\u5185\u7684\u5168\u90e8\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u9700\u8981\u4e00\u5b9a\u65f6\u95f4\u51c6\u5907\u624d\u80fd\u542f\u52a8\u3002</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.SNOW_PEA,new u(i.pzaPlantEnum.SNOW_PEA,"\u51b0\u51bb\u84dd\u8393\u4f1a\u53d1\u5c04\u5bd2\u51b0\u679c\u5b9e\u653b\u51fb\u654c\u4eba\uff0c\u5e76\u5177\u6709\u51cf\u901f\u6548\u679c\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49\uff0c\u5177\u6709\u51cf\u901f\u6548\u679c</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.CHOMPER,new u(i.pzaPlantEnum.CHOMPER,"\u706b\u9f99\u679c\u53ef\u4ee5\u4e00\u53e3\u541e\u6389\u4e00\u6574\u53ea\u50f5\u5c38\uff0c\u4f46\u5728\u4ed6\u4eec\u5480\u56bc\u50f5\u5c38\u7684\u65f6\u5019\u5f88\u8106\u5f31\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u975e\u5e38\u8fd1</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u5480\u56bc\u65f6\u95f4\u957f</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.REPEATER,new u(i.pzaPlantEnum.REPEATER,"\u591a\u53d1\u5c04\u624b\u80fd\u4e00\u6b21\u53d1\u5c04\u4e24\u4e2a\u53cc\u622a\u68cd","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49\uff08\u6bcf\u4e2a\uff09</color><br/><color=#aa582b>\u53d1\u5c04\u901f\u5ea6\uff1a</c><color=#e6300d>\u4e24\u500d</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.PUFF_SHROOM,new u(i.pzaPlantEnum.PUFF_SHROOM,"\u5c0f\u5c71\u7af9\u662f\u514d\u8d39\u7684\uff0c\u4e0d\u8fc7\u5b83\u7684\u5c04\u7a0b\u5374\u5f88\u8fd1\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u8fd1</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.SUN_SHROOM,new u(i.pzaPlantEnum.SUN_SHROOM,"\u5149\u80fd\u8349\u5f00\u59cb\u63d0\u4f9b\u5c11\u91cf\u80fd\u91cf\uff0c\u7a0d\u540e\u63d0\u4f9b\u6b63\u5e38\u6570\u91cf\u80fd\u91cf\u3002","<color=#aa582b>\u80fd\u91cf\u4ea7\u91cf\uff1a</c><color=#e6300d>\u5f00\u59cb\u4f4e\uff0c\u4e4b\u540e\u6b63\u5e38</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.FUME_SHROOM,new u(i.pzaPlantEnum.FUME_SHROOM,"\u5927\u5c71\u7af9\u55b7\u51fa\u7684\u6c14\u6ce1\u53ef\u4ee5\u7a7f\u900f\u94c1\u4e1d\u7f51\u95e8\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u666e\u901a\uff0c\u80fd\u7a7f\u900f\u94c1\u7f51\u95e8</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u88ab\u6c14\u6ce1\u55b7\u4e2d\u7684\u50f5\u5c38</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.GRAVE_BUSTER,new u(i.pzaPlantEnum.GRAVE_BUSTER,"\u541e\u566c\u8005\u4f1a\u5403\u6389\u5893\u7891","<color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u53ea\u5bf9\u5893\u7891\u6709\u6548</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5403\u6389\u5893\u7891</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.HYPNO_SHROOM,new u(i.pzaPlantEnum.HYPNO_SHROOM,"\u5f53\u50f5\u5c38\u5403\u4e0b\u9b54\u5e7b\u8349\u540e\uff0c\u4ed6\u5c06\u4f1a\u6389\u8f6c\u65b9\u5411\u4e3a\u4f60\u4f5c\u6218\u3002","<color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u63a5\u89e6\u751f\u6548</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u8ba9\u4e00\u53ea\u50f5\u5c38\u4e3a\u4f60\u4f5c\u6218</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.SCAREDY_SHROOM,new u(i.pzaPlantEnum.SCAREDY_SHROOM,"\u542b\u7f9e\u8349\u662f\u4e00\u79cd\u8fdc\u7a0b\u5c04\u624b\uff0c\u654c\u4eba\u63a5\u8fd1\u540e\u4f1a\u8eb2\u8d77\u6765\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u654c\u4eba\u63a5\u8fd1\u540e\u505c\u6b62\u653b\u51fb</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.ICE_SHROOM,new u(i.pzaPlantEnum.ICE_SHROOM,"\u51b0\u51b0\u83c7\uff0c\u77ed\u6682\u7684\u51bb\u7ed3\u5c4f\u5e55\u4e0a\u6240\u6709\u50f5\u5c38\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u975e\u5e38\u4f4e\uff0c\u51bb\u7ed3\u50f5\u5c38</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5c4f\u5e55\u4e0a\u7684\u6240\u6709\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.DOOM_SHROOM,new u(i.pzaPlantEnum.DOOM_SHROOM,"\u7206\u7834\u83c7\u53ef\u4ee5\u6467\u6bc1\u5927\u8303\u56f4\u7684\u50f5\u5c38\uff0c\u5e76\u7559\u4e0b\u4e00\u4e2a\u4e0d\u80fd\u79cd\u690d\u7269\u7684\u5927\u5f39\u5751\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5927\u8303\u56f4\u5185\u7684\u6240\u6709\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u7559\u4e0b\u4e00\u4e2a\u5f39\u5751</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.LILY_PAD,new u(i.pzaPlantEnum.LILY_PAD,"\u8377\u53f6\u53ef\u4ee5\u8ba9\u4f60\u5728\u5b83\u4e0a\u9762\u79cd\u690d\u975e\u6c34\u751f\u690d\u7269\u3002","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u53ef\u4ee5\u5728\u4e0a\u9762\u79cd\u690d\u975e\u6c34\u751f\u690d\u7269</color>","<color=#30a7db>\u5fc5\u987b\u79cd\u690d\u5728\u6c34\u9762</c>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.SQUASH,new u(i.pzaPlantEnum.SQUASH,"\u51ac\u74dc\u4f1a\u538b\u6241\u7b2c\u4e00\u53ea\u63a5\u8fd1\u4ed6\u7684\u50f5\u5c38\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u538b\u6241\u63a5\u8fd1\u5b83\u7684\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.THREE_PEATER,new u(i.pzaPlantEnum.THREE_PEATER,"\u8c4c\u8c46\u835a\u80fd\u5728\u4e09\u6761\u8def\u4e0a\u53d1\u5c04\u8c4c\u8c46\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49\uff08\u6bcf\u9897\uff09</color><br/><color=#aa582b>\u53d1\u5c04\u901f\u5ea6\uff1a</c><color=#e6300d>\u4e09\u7ebf</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.TANGLE_KELP,new u(i.pzaPlantEnum.TANGLE_KELP,"\u7f20\u7ed5\u83b2\u85d5\u662f\u4e00\u79cd\u53ef\u4ee5\u628a\u63a5\u8fd1\u4ed6\u7684\u50f5\u5c38\u62c9\u8fdb\u6c34\u4e2d\u7684\u6c34\u751f\u690d\u7269\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u63a5\u89e6\u751f\u6548</color>","<color=#30a7db>\u5fc5\u987b\u79cd\u690d\u5728\u6c34\u9762</c>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.JALAPENO,new u(i.pzaPlantEnum.JALAPENO,"\u7206\u70b8\u8fa3\u6912\u53ef\u4ee5\u6467\u6bc1\u4e00\u6574\u6761\u7ebf\u4e0a\u7684\u50f5\u5c38\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u6574\u6761\u7ebf\u4e0a\u7684\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.SPIKEWEED,new u(i.pzaPlantEnum.SPIKEWEED,"\u6309\u6307\u7248\u53ef\u4ee5\u624e\u7834\u8f6e\u80ce\uff0c\u5e76\u5bf9\u8e29\u5230\u5b83\u7684\u50f5\u5c38\u9020\u6210\u4f24\u5bb3\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u6240\u6709\u8e29\u5230\u5b83\u7684\u50f5\u5c38</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4e0d\u4f1a\u88ab\u50f5\u5c38\u5403\u6389</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.TORCHWOOD,new u(i.pzaPlantEnum.TORCHWOOD,"\u7bdd\u706b\u53ef\u4ee5\u628a\u7a7f\u8fc7\u4ed6\u7684\u5b50\u5f39\u8f6c\u53d8\u6210\u706b\u7403\uff0c\u9020\u6210\u4e24\u500d\u4f24\u5bb3","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u8ba9\u7a7f\u8fc7\u4ed6\u7684\u5b50\u5f39\u53d8\u6210\u706b\u7403\u9020\u6210\u4e24\u500d\u4f24\u5bb3\u3002\u706b\u7403\u5bf9\u9644\u8fd1\u50f5\u5c38\u9020\u6210\u6e85\u5c04\u4f24\u5bb3\u3002</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.TALL_NUT,new u(i.pzaPlantEnum.TALL_NUT,"\u9ad8\u69b4\u83b2\u662f\u91cd\u578b\u58c1\u5792\u690d\u7269\uff0c\u5b83\u4e0d\u4f1a\u88ab\u50f5\u5c38\u4ece\u5934\u4e0a\u8df3\u8fc7\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u975e\u5e38\u9ad8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4e0d\u4f1a\u88ab\u8de8\u8fc7\u6216\u8df3\u8fc7</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.SEA_SHROOM,new u(i.pzaPlantEnum.SEA_SHROOM,"\u6c34\u4ed9\u82b1\uff0c\u80fd\u591f\u53d1\u5c04\u77ed\u7a0b\u5b50\u5f39\u7684\u6c34\u751f\u690d\u7269\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u8fd1</color>","<color=#30a7db>\u5fc5\u987b\u79cd\u690d\u5728\u6c34\u9762</c><br/><color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.PLANTERN,new u(i.pzaPlantEnum.PLANTERN,"\u7167\u660e\u83c7\uff0c\u80fd\u7167\u4eae\u4e00\u7247\u533a\u57df\uff0c\u4e3a\u4f60\u9a71\u6563\u6218\u573a\u8ff7\u96fe\u3002 ","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e00\u7247\u5706\u5f62\u533a\u57df</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u9a71\u6563\u6218\u573a\u8ff7\u96fe</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.CACTUS,new u(i.pzaPlantEnum.CACTUS,"\u7518\u8517\u4fa0\u53d1\u5c04\u7684\u7a7f\u523a\u98de\u9556\u53ef\u4ee5\u7528\u6765\u6253\u51fb\u5730\u9762\u548c\u7a7a\u4e2d\u76ee\u6807\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5730\u9762\u548c\u7a7a\u4e2d</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.BLOVER,new u(i.pzaPlantEnum.BLOVER,"\u5c0f\u98ce\u8f66\uff0c\u80fd\u5439\u8d70\u6240\u6709\u7684\u98de\u884c\u50f5\u5c38\uff0c\u4e5f\u53ef\u4ee5\u628a\u96fe\u5439\u6563\u3002","<color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5439\u8d70\u5c4f\u5e55\u4e0a\u6240\u6709\u7684\u6c14\u7403\u50f5\u5c38</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.SPLIT_PEA,new u(i.pzaPlantEnum.SPLIT_PEA,"\u5206\u5411\u5c04\u624b\u80fd\u5411\u524d\u540e\u53cc\u5411\u53d1\u5c04\u53cc\u622a\u68cd\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u524d\u9762\u548c\u540e\u9762</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5411\u524d\u4e3a\u6b63\u5e38\u901f\u5ea6\uff0c\u5411\u540e\u4e3a\u4e24\u500d\u901f\u5ea6</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.STAR_FRUIT,new u(i.pzaPlantEnum.STAR_FRUIT,"\u53ef\u4ee5\u5411\u4e94\u4e2a\u65b9\u5411\u53d1\u5c04\u5c0f\u661f\u661f\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e94\u4e2a\u65b9\u5411</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.PUMPKIN,new u(i.pzaPlantEnum.PUMPKIN,"\u9e2d\u5b50\u76c6\uff0c\u53ef\u4ee5\u7528\u4ed6\u7684\u5916\u58f3\u4fdd\u62a4\u5176\u4ed6\u690d\u7269\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u53ef\u4ee5\u79cd\u690d\u5728\u5176\u4ed6\u690d\u7269\u4e0a</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.MAGNET_SHROOM,new u(i.pzaPlantEnum.MAGNET_SHROOM,"\u78c1\u529b\u83b2\u85d5\u53ef\u4ee5\u7528\u78c1\u529b\u5438\u53d6\u50f5\u5c38\u7684\u5934\u76d4\u7b49\u5176\u5b83\u91d1\u5c5e\u7269\u54c1\u3002","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u9760\u8fd1\u7684\u50f5\u5c38</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u79fb\u9664\u50f5\u5c38\u4eec\u8eab\u4e0a\u6240\u6709\u7684\u91d1\u5c5e\u7269\u54c1</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.CABBAGE_PULT,new u(i.pzaPlantEnum.CABBAGE_PULT,"\u6d0b\u8471\u6295\u624b\u80fd\u5411\u50f5\u5c38\u6295\u63b7\u6d0b\u8471\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u629b\u63b7</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.FLOWER_POT,new u(i.pzaPlantEnum.FLOWER_POT,"\u82b1\u76c6\u53ef\u4ee5\u8ba9\u4f60\u5728\u5c4b\u9876\u4e0a\u79cd\u690d\u3002","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u53ef\u4ee5\u8ba9\u4f60\u5728\u5c4b\u9876\u79cd\u690d</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.KERNEL_PULT,new u(i.pzaPlantEnum.KERNEL_PULT,"\u53ef\u4ee5\u6295\u63b7\u91d1\u7b8d\u68d2\u3002  ","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u629b\u63b7</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u91d1\u7b8d\u68d2\u6709\u6982\u7387\u51fb\u6655\u50f5\u5c38</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.COFFEE_BEAN,new u(i.pzaPlantEnum.COFFEE_BEAN,"\u53ef\u4ee5\u5524\u9192\u7761\u7720\u4e2d\u7684\u690d\u7269\u4eec\u3002","<color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u79cd\u690d\u5728\u5176\u5b83\u690d\u7269\u4e0a\uff0c\u7528\u6765\u5728\u767d\u5929\u5524\u9192\u8611\u83c7</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.GARLIC,new u(i.pzaPlantEnum.GARLIC,"\u53ef\u4ee5\u8ba9\u50f5\u5c38\u6539\u53d8\u524d\u8fdb\u7684\u8def\u7ebf\u3002","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u8fd1\u8ddd\u79bb\u63a5\u89e6</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6539\u53d8\u50f5\u5c38\u7684\u524d\u8fdb\u8def\u7ebf</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.UMBRELLA_LEAF,new u(i.pzaPlantEnum.UMBRELLA_LEAF,"\u83e0\u841d\u4f1e\u4fdd\u62a4\u4e34\u8fd1\u7684\u690d\u7269\u4e0d\u88ab\u7334\u5b50\u50f5\u5c38\u548c\u793c\u54c1\u8f66\u50f5\u5c38\u6240\u4f24\u5bb3\u3002","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4fdd\u62a4\u9644\u8fd1\u7684\u690d\u7269\uff0c\u4e0d\u88ab\u7334\u5b50\u50f5\u5c38\u548c\u793c\u54c1\u8f66\u50f5\u5c38\u6240\u4f24\u5bb3</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.MARIGOLD,new u(i.pzaPlantEnum.MARIGOLD,"\u4e03\u5f69\u82b1\u53ef\u4ee5\u63d0\u4f9b\u91d1\u5e01\u548c\u94f6\u5e01\u3002","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u63d0\u4f9b\u91d1\u5e01\u548c\u94f6\u5e01</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.MELON_PULT,new u(i.pzaPlantEnum.MELON_PULT,"\u897f\u74dc\u529b\u58eb\u80fd\u5bf9\u6210\u7fa4\u50f5\u5c38\u9020\u6210\u5de8\u5927\u4f24\u5bb3\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u629b\u63b7</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u897f\u74dc\u80fd\u5bf9\u76ee\u6807\u9644\u8fd1\u7684\u50f5\u5c38\u9020\u6210\u4f24\u5bb3</color>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.GATLING_PEA,new u(i.pzaPlantEnum.GATLING_PEA,"\u9f99\u864e\u9999\u8549\u4e00\u6b21\u53d1\u5c04\u56db\u4e2a\u53cc\u622a\u68cd\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u53d1\u5c04\u901f\u5ea6\uff1a</c><color=#e6300d>\u56db\u500d</color><br/><color=#aa582b>\u53ea\u80fd\u79cd\u690d\u5728\u591a\u53d1\u5c04\u624b\u4e0a</c>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.TWIN_SUNFLOWER,new u(i.pzaPlantEnum.TWIN_SUNFLOWER,"\u63d0\u4f9b\u4e24\u500d\u7684\u80fd\u91cf\u4ea7\u91cf","<color=#aa582b>\u80fd\u91cf\u4ea7\u91cf\uff1a</c><color=#e6300d>\u53cc\u500d</color><br/><color=#aa582b>\u53ea\u80fd\u79cd\u690d\u5728\u80fd\u91cf\u82b1\u4e0a</c>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.GLOOM_SHROOM,new u(i.pzaPlantEnum.GLOOM_SHROOM,"\u4f50\u7af9\u56f4\u7ed5\u81ea\u8eab\u91ca\u653e\u5927\u91cf\u5b50\u5f39\uff0c\u653b\u51fb\u50f5\u5c38","<color=#aa582b>\u5fc5\u987b\u79cd\u690d\u5728\u5927\u5c71\u7af9\u4e0a</c>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.CATTAIL,new u(i.pzaPlantEnum.CATTAIL,"\u653b\u51fb\u4efb\u4f55\u7ebf\u4e0a\u7684\u50f5\u5c38\u4ee5\u53ca\u98de\u884c\u50f5\u5c38\u3002","<color=#aa582b>\u5fc5\u987b\u79cd\u690d\u5728\u83b2\u53f6\u4e0a</c>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.WINTER_MELON,new u(i.pzaPlantEnum.WINTER_MELON,"\u51b0\u897f\u74dc\u529b\u58eb\u80fd\u9020\u6210\u8303\u56f4\u6027\u7684\u4f24\u5bb3\u5e76\u8ba9\u50f5\u5c38\u51cf\u901f","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u975e\u5e38\u9ad8</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u629b\u63b7</color><br/><color=#aa582b>\u53d1\u5c04\u901f\u5ea6\uff1a</c><color=#e6300d>1/2\u500d\u6570</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u51fb\u4e2d\u540e\u7167\u6210\u8303\u56f4\u4f24\u5bb3\u5e76\u51cf\u901f</color><br/><color=#aa582b>\u5fc5\u987b\u88ab\u79cd\u690d\u5728\u897f\u74dc\u529b\u58eb\u4e0a</c>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.GOLD_MAGNET,new u(i.pzaPlantEnum.GOLD_MAGNET,"\u53ef\u4ee5\u4e3a\u4f60\u6536\u96c6\u786c\u5e01\u548c\u94bb\u77f3\u3002","<color=#aa582b>\u5fc5\u987b\u79cd\u690d\u5728\u78c1\u529b\u83b2\u85d5\u4e0a</c>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.SPIKEROCK,new u(i.pzaPlantEnum.SPIKEROCK,"\u6500\u5ca9\u7248\u53ef\u4ee5\u624e\u7834\u591a\u4e2a\u8f6e\u80ce\uff0c\u5e76\u5bf9\u8e29\u5230\u4ed6\u7684\u50f5\u5c38\u9020\u6210\u4f24\u5bb3","<color=#aa582b>\u5fc5\u987b\u79cd\u690d\u5728\u6309\u6307\u7248\u4e0a</c>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.COB_CANNON,new u(i.pzaPlantEnum.COB_CANNON,"\u70b9\u51fb\u841d\u535c\u52a0\u519c\u70ae\uff0c\u53d1\u5c04\u81f4\u547d\u7684\u841d\u535c\u70ae\u5f39","<color=#aa582b>\u5fc5\u987b\u88ab\u79cd\u690d\u5728\u4e00\u884c\u4e24\u4e2a\u76f8\u90bb\u7684\u6843\u5b50\u6295\u624b\u4e0a</c>",null,null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.IMITATER,new u(i.pzaPlantEnum.IMITATER,"\u53d8\u8eab\u68a8\u5b50\u53ef\u4ee5\u8ba9\u4f60\u5728\u540c\u4e00\u5173\u5361\u5185\u4f7f\u7528\u4e24\u4efd\u76f8\u540c\u690d\u7269\uff01 ",null,null,null,null,null)],[i.pzaPlantEnum.SUPER_CHOMPER,new u(i.pzaPlantEnum.SUPER_CHOMPER,"\u8d85\u7ea7\u706b\u9f99\u679c\u6bcf\u6b21\u653b\u51fb\u670920%\u6982\u7387\u89e6\u53d1\u7279\u6b8a\u653b\u51fb\uff0c\u53ef\u4ee5\u541e\u566c\u524d\u65b93\u683c\u6240\u6709\u50f5\u5c38\u3002 ","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u975e\u5e38\u8fd1</color>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.BOOM_NUT,new u(i.pzaPlantEnum.BOOM_NUT,"\u7206\u70b8\u69b4\u83b2\u53ef\u70b8\u6b7b3X3\u8303\u56f4\u5185\u7684\u50f5\u5c38\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color>","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927\n</color><color=#aa582b>\u8303\u56f4: </c><color=#e6300d>3X3\u8303\u56f4\u5185\u7684\u5168\u90e8\u50f5\u5c38</color>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u4e2d\u7b49</color>")],[i.pzaPlantEnum.CAIWEN,new u(i.pzaPlantEnum.CAIWEN,"\u83dc\u5e08\u5085\u53ef\u4ee5\u653b\u51fb\u63a5\u8fd1\u7684\u50f5\u5c38","<color=#aa582b>\u666e\u901a\u653b\u51fb\u8303\u56f4\uff1a</c><color=#e6300d>\u6b63\u524d\u65b9\u4e8c\u683c\u548c\u6b63\u540e\u65b9\u4e00\u683c</color>\n<color=#aa582b>\u666e\u901a\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color>","<color=#aa582b>\u7279\u6b8a\u653b\u51fb\u8303\u56f4:</c><color=#e6300d>\u5468\u56f4\u4e5d\u683c</color>\n<color=#aa582b>\u7279\u6b8a\u653b\u51fb\u4f24\u5bb3:</c><color=#e6300d>\u9ad8</color>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.LaserBean,new u(i.pzaPlantEnum.LaserBean,"\u96f7\u795e\u679c\u53ef\u4ee5\u53d1\u5c04\u6fc0\u5149\u653b\u51fb\u524d\u65b9\u7684\u6240\u6709\u654c\u4eba","<color=#aa582b>\u666e\u901a\u653b\u51fb\u8303\u56f4\uff1a</c><color=#e6300d>\u6b63\u524d\u65b9</color>\n<color=#aa582b>\u666e\u901a\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color>","<color=#aa582b>\u7279\u6b8a\u653b\u51fb\u8303\u56f4:</c><color=#e6300d>\u6b63\u524d\u65b9</color>\n<color=#aa582b>\u7279\u6b8a\u653b\u51fb\u4f24\u5bb3:</c><color=#e6300d>\u9ad8</color>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.FireBlover,new u(i.pzaPlantEnum.FireBlover,"\u706b\u7130\u82b1\u53ef\u4ee5\u55b7\u51fa\u706b\u7130\u653b\u51fb\u524d\u65b9\u7684\u50f5\u5c38","<color=#aa582b>\u666e\u901a\u653b\u51fb\u8303\u56f4\uff1a</c><color=#e6300d>\u6b63\u524d\u65b9\u4e09\u683c</color>\n<color=#aa582b>\u666e\u901a\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color>","<color=#aa582b>\u7279\u6b8a\u653b\u51fb\u8303\u56f4:</c><color=#e6300d>\u6b63\u524d\u65b9\u4e5d\u683c</color>\n<color=#aa582b>\u7279\u6b8a\u653b\u51fb\u4f24\u5bb3:</c><color=#e6300d>\u9ad8</color>",null,null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")]]),a.ZombieBookMap=new Map([[r.pzaZombieEnum.ZOMBIE,new h(r.pzaZombieEnum.ZOMBIE,"\u666e\u901a\u50f5\u5c38","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color>",!1,null)],[r.pzaZombieEnum.FLAG_ZOMBIE,new h(r.pzaZombieEnum.FLAG_ZOMBIE,"\u6447\u65d7\u50f5\u5c38\u6807\u5fd7\u7740\u5373\u5c06\u6765\u88ad\u7684\u4e00\u201c\u6ce2\u201d\u5927\u89c4\u6a21\u50f5\u5c38\u7fa4\u3002 ","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color>",!1,null)],[r.pzaZombieEnum.CONE_HEAD_ZOMBIE,new h(r.pzaZombieEnum.CONE_HEAD_ZOMBIE,"\u4ed6\u7684\u7eb8\u7bb1\u5934\u76d4\uff0c\u4f7f\u4ed6\u4e24\u500d\u575a\u97e7\u4e8e\u666e\u901a\u50f5\u5c38\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color>",!1,null)],[r.pzaZombieEnum.POLEVAULTING_ZOMBIE,new h(r.pzaZombieEnum.POLEVAULTING_ZOMBIE,"\u592a\u7a7a\u50f5\u5c38\u8fd0\u7528\u706b\u7bad\u8dc3\u8fc7\u969c\u788d\u7269\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb\u800c\u540e\u6162\uff08\u8df3\u8dc3\u540e\uff09</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u8dc3\u8fc7\u4ed6\u6240\u78b0\u5230\u7684\u7b2c\u4e00\u682a\u690d\u7269</color>",!1,null)],[r.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,new h(r.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,"\u4ed6\u7684\u94c1\u9505\u5934\u76d4\uff0c\u80fd\u6781\u5927\u7a0b\u5ea6\u7684\u627f\u53d7\u4f24\u5bb3\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u78c1\u529b\u83b2\u85d5</color>",!1,null)],[r.pzaZombieEnum.NEWSPAPER_ZOMBIE,new h(r.pzaZombieEnum.NEWSPAPER_ZOMBIE,"\u4ed6\u7684\u4e66\u7c4d\u53ea\u80fd\u63d0\u4f9b\u975e\u5e38\u6709\u9650\u7684\u9632\u5fa1\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u4e66\u7c4d\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u6b63\u5e38\uff0c\u800c\u540e\u5feb(\u5931\u53bb\u4e66\u7c4d\u540e)</color>",!1,null)],[r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,new h(r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,"\u4ed6\u7684\u94c1\u95e8\u662f\u6709\u6548\u7684\u76fe\u724c\u3002 ","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u94c1\u95e8\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u5927\u5c71\u7af9\u548c\u78c1\u529b\u83b2\u85d5</color>",!1,null)],[r.pzaZombieEnum.FOOTBALL_ZOMBIE,new h(r.pzaZombieEnum.FOOTBALL_ZOMBIE,"\u94e0\u7532\u50f5\u5c38\u7684\u8868\u6f14\u79c0\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u5f88\u9ad8</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u78c1\u529b\u83b2\u85d5</color>",!1,null)],[r.pzaZombieEnum.DANCING_ZOMBIE,new h(r.pzaZombieEnum.DANCING_ZOMBIE,"\u821e\u738b\u50f5\u5c38\u548c\u4eba\u7c7b(\u5728\u4e16\u6216\u8005\u6b7b\u53bb\u7684)\u5982\u6709\u96f7\u540c,\u7eaf\u5c5e\u5de7\u5408\u3002 ","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u53ec\u5524\u4f34\u821e\u50f5\u5c38</color>",!1,null)],[r.pzaZombieEnum.BACKUP_DANCER,new h(r.pzaZombieEnum.BACKUP_DANCER,"\u5f53\u821e\u738b\u50f5\u5c38\u6447\u6446\u65f6\uff0c\u8fd9\u79cd\u50f5\u5c38\u56db\u4e2a\u7ed3\u4f19\u51fa\u73b0\u3002 ","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color>",!1,null)],[r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,new h(r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,"\u6551\u751f\u5708\u80fd\u8ba9\u50f5\u5c38\u80fd\u6d6e\u5728\u6c34\u9762\u4e0a\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color>",!0,null)],[r.pzaZombieEnum.SNORKEL_ZOMBIE,new h(r.pzaZombieEnum.SNORKEL_ZOMBIE,"\u9ca8\u9c7c\u50f5\u5c38\u53ef\u4ee5\u5728\u6c34\u4e0b\u524d\u884c\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6f5c\u6cf3\u4ee5\u907f\u514d\u906d\u5230\u653b\u51fb</color>",!0,null,null)],[r.pzaZombieEnum.ZOMBONI,new h(r.pzaZombieEnum.ZOMBONI,"\u73a9\u5177\u8f66\u50f5\u5c38\u8fd0\u7528\u51b0\u96ea\uff0c\u78be\u8fc7\u4f60\u7684\u690d\u7269\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u78be\u538b\u690d\u7269\uff0c\u7559\u4e0b\u6761\u51b0\u9053</color>",!1,null)],[r.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM,new h(r.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM,"\u4ee5\u56db\u4eba\u5c0f\u961f\u5f62\u5f0f\u51fa\u73b0\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e(\u6bcf\u4e2a\u50f5\u5c38)</color><br/><color=#aa582b>\u51b0\u8f66\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u53ea\u5728\u96ea\u5730\u91cc\u51fa\u73b0</color>",!1,null)],[r.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,new h(r.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,"\u51b2\u6d6a\u50f5\u5c38\u5584\u4e8e\u5229\u7528\u4f60\u6c34\u6c60\u9632\u5fa1\u7684\u5f31\u70b9\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb\u800c\u540e\u6162(\u8df3\u8dc3\u540e)</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u8dc3\u8fc7\u4ed6\u6240\u78b0\u5230\u7684\u7b2c\u4e00\u682a\u690d\u7269</color>",!0,null)],[r.pzaZombieEnum.JACK_ZOMBIE,new h(r.pzaZombieEnum.JACK_ZOMBIE,"\u8fd9\u79cd\u50f5\u5c38\u5e26\u7740\u4e2a\u4f1a\u7206\u70b8\u7684\u5c0f\u732b\u76d2\u5b50\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6253\u5f00\u5c0f\u732b\u76d2\u5b50\u4f1a\u7206\u70b8</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u78c1\u529b\u83b2\u85d5</color>",!1,null)],[r.pzaZombieEnum.BALLOON_ZOMBIE,new h(r.pzaZombieEnum.BALLOON_ZOMBIE,"\u98de\u884c\u50f5\u5c38\u6f02\u6d6e\u5728\u7a7a\u4e2d\uff0c\u8eb2\u8fc7\u5927\u591a\u6570\u653b\u51fb\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u98de\u884c</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u7518\u8517\u4fa0\u548c\u5c0f\u98ce\u8f66</color>",!1,null)],[r.pzaZombieEnum.DIGGER_ZOMBIE,new h(r.pzaZombieEnum.DIGGER_ZOMBIE,"\u8fd9\u79cd\u50f5\u5c38\u901a\u8fc7\u6316\u96a7\u9053\u6765\u7a7f\u8fc7\u4f60\u7684\u9632\u5fa1\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb\uff0c\u800c\u540e\u6162</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u7a7f\u8fc7\u5730\u4e0b\u96a7\u9053\u5e76\u51fa\u73b0\u5728\u8349\u576a\u7684\u5de6\u4fa7</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u5206\u5411\u5c04\u624b\u548c\u78c1\u529b\u83b2\u85d5</color>",!1,null)],[r.pzaZombieEnum.POGO_ZOMBIE,new h(r.pzaZombieEnum.POGO_ZOMBIE,"\u8df3\u8df3\u50f5\u5c38\u80fd\u8df3\u8dc3\u8fc7\u4f60\u7684\u9632\u5b88\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u8dc3\u8fc7\u690d\u7269</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u78c1\u529b\u83b2\u85d5</color>",!1,null)],[r.pzaZombieEnum.YETI_ZOMBIE,new h(r.pzaZombieEnum.YETI_ZOMBIE,"\u4e00\u79cd\u7f55\u89c1\u800c\u53e4\u602a\u7684\u751f\u7269\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4e00\u5c0f\u4f1a\u513f\u540e\u4f1a\u9003\u8dd1</color>",!1,null)],[r.pzaZombieEnum.BUNGEE_ZOMBIE,new h(r.pzaZombieEnum.BUNGEE_ZOMBIE,"\u7334\u5b50\u50f5\u5c38\u4ece\u5929\u4e0a\u653b\u51fb\u3002 ","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4ece\u5929\u800c\u964d\u5e76\u7a83\u53d6\u4f60\u7684\u690d\u7269</color>",!1,null)],[r.pzaZombieEnum.LADDER_ZOMBIE,new h(r.pzaZombieEnum.LADDER_ZOMBIE,"\u753b\u5bb6\u50f5\u5c38\u80fd\u722c\u8fc7\u969c\u788d\u7269\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u753b\u677f\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb\uff0c\u800c\u540e\u6162(\u653e\u7f6e\u753b\u677f\u540e)</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u5927\u5c71\u7af9\u548c\u78c1\u529b\u83b2\u85d5</color>",!1,null)],[r.pzaZombieEnum.CATAPULT_ZOMBIE,new h(r.pzaZombieEnum.CATAPULT_ZOMBIE,"\u793c\u54c1\u8f66\u50f5\u5c38\u64cd\u4f5c\u7740\u91cd\u578b\u673a\u5668\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5bf9\u4f60\u7684\u690d\u7269\u6295\u63b7\u793c\u54c1</color>",!1,null)],[r.pzaZombieEnum.GARGANTUAR,new h(r.pzaZombieEnum.GARGANTUAR,"\u5927\u738b\u50f5\u5c38\u662f\u4e00\u79cd\u5de8\u578b\u50f5\u5c38","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u6781\u9ad8</color>",!1,null)],[r.pzaZombieEnum.IMP,new h(r.pzaZombieEnum.IMP,"\u5c0f\u5c0f\u50f5\u5c38\u662f\u4e00\u7fa4\u5c0f\u578b\u50f5\u5c38\uff0c\u88ab\u5927\u738b\u50f5\u5c38\u7528\u6765\u6295\u63b7\u8fdb\u4f60\u7684\u9632\u5fa1\u4f53\u7cfb\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color>",!1,null)],[r.pzaZombieEnum.DR_ZOMBOSS,new h(r.pzaZombieEnum.DR_ZOMBOSS,"\u50f5\u738b\u673a\u7532\u7edf\u6cbb\u6240\u6709\u7684\u50f5\u5c38","<color=#aa582b>\u5f3a\u5ea6(\u53d7\u50f5\u5c38\u673a\u5668\u4eba\u4fdd\u62a4)\uff1a</c><color=#e6300d>\u6781\u9ad8</color>",!1,null)]]),a.NO_RECOMMEND_PLANT=new Map([[1,new Set([9,10,11,12,13,14,15,16,17,20,25,26,32,34,43,44])],[2,new Set([17,20,25,26,34,36,44])],[3,new Set([9,10,11,12,13,14,15,16,25,26,32,34,43])],[4,new Set([12,34,36])],[5,new Set([9,10,11,12,13,14,15,16,17,20,22,25,26,32,43,44,47])],[6,new Set([9,10,11,12,13,14,15,16,17,20,25,26,32,34,43,44])],[7,new Set([17,20,25,26,34,36,44])],[8,new Set([9,10,11,12,13,14,15,16,25,26,32,34,43])],[9,new Set([12,34,36])],[10,new Set([9,10,11,12,13,14,15,16,17,20,22,25,26,32,43,44,47])]]),a.MINI_NO_RECOMMEND_PLANT=new Map([[1,new Set([12,17,20,22,25,26,44,47])]]),a.mapTerrain=new Map([[8,[[3,3,3,3,3,1,1,1,1,1],[3,3,3,3,3,1,1,1,1,1],[3,3,3,1,1,1,1,1,1,1],[3,3,1,1,1,1,1,1,1,1],[3,3,1,1,1,1,1,1,1,1]]]]),a}();e.pzaGameConfig=f,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaJarData":"pzaJarData","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","./pzaLocalData":"pzaLocalData","./pzaUtil":"pzaUtil"}],pzaGameFailView:[function(a,t,e){"use strict";cc._RF.push(t,"67529Lq27tAbLepZ8j8zGaa","pzaGameFailView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameFailView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameManager"),s=a("../../Common/pzaGamePropConfig"),c=a("../../Common/pzaGameVaseEndless"),u=a("../../Common/pzaLocalData"),d=a("../../Common/pzaOperationMgr"),h=a("../../Common/pzaSoundManager"),m=a("../../Common/pzaTipManager"),f=a("../../Common/pzaUIManager"),z=a("../../Common/pzaWorldEventManager"),y=a("../../Load/pzaPreLoadManager"),g=a("../../utils/pzaChannel"),b=a("../pzaWarningView"),v=cc._decorator,P=v.ccclass,D=v.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.failWord=null,t.mask=null,t.board=null,t.tittle=null,t.txt=null,t.rankBtn=null,t.adIcon=null,t.shareIcon=null,t.expandShareNode=null,t.powerProNode=null,t.costPowerNode=null,t.costPowerLab=null,t.rewardBubble=null,t.adFlag=!1,t.shareFlag=!1,t.createMode=!1,t.costPower=0,t.shareBubble=null,t.tmpPart=0,t}return n(t,a),t.prototype.onEnable=function(){var a=this;return this.adFlag=!1,this.shareFlag=!1,this.createMode=!1,this.powerProNode.active=!1,this.costPowerNode.active=!1,h.pzaSoundManager.clearAllLoopAudio(),this.createMode?(this.tittle.y=0,this.txt.node.y=-10):u.pzaLocalData.isShowPowerGift&&(this.txt.node.y=20,this.powerProNode.y=0,this.powerProNode.active=!0,this.costPowerNode.active=!0,l.pzaGameManager.getCurrentGame().isMainMode()||r.pzaGameState.judgeIsMini(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsVase(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsZombie(r.pzaGameState.gameMode)?this.costPower=u.pzaLocalData.normalPowerCost:this.costPower=u.pzaLocalData.endLessPowerCost,this.costPowerLab.string=""+this.costPower),this.expandShareNode.active=!1,this.adIcon.active=this.adFlag,this.shareIcon.active=this.shareFlag,r.pzaGameState.isZombieMode()?(this.failWord.active=!1,this.mask.active=!0,this.board.active=!0,this.tittle.y=95,this.txt.node.active=!0,this.rankBtn.active=!1,this.txt.string=r.pzaGameState.gameMode==r.pzaGameMode.ZOMBIE_ENERMY?"\u4f60\u5931\u53bb\u4e86\u6240\u6709\u7684\u50f5\u5c38\uff01":"\u4f60\u5df2\u7ecf\u8fde\u7eed\u901a\u8fc7"+(r.pzaGameState.curPart-1)+"\u5173",r.pzaGameState.gameMode==r.pzaGameMode.ZOMBIE_ENDLESS&&(this.expandShareNode.active=!0),g.pzaChannel.instance().showInter(!0),d.pzaOperationMgr.showZombieModeGift(function(){a.board.active=!0}),void(this.powerProNode.y=-45)):r.pzaGameState.gameMode===r.pzaGameMode.VASE_ENDLESS?(this.failWord.active=!1,this.mask.active=!0,this.board.active=!0,this.tittle.y=95,this.txt.node.active=!0,this.rankBtn.active=!1,this.txt.string="\u4f60\u5df2\u7ecf\u8fde\u7eed\u901a\u8fc7"+(l.pzaGameManager.getGame(r.pzaGameMode.VASE_ENDLESS,c.pzaGameVaseEndless).endLessRound||0)+"\u5173",this.expandShareNode.active=!0,this.powerProNode.y=-45,u.pzaLocalData.data.vaseEndLessLevelIndex=0,u.pzaLocalData.data.vaseEndLessSunCount=0,u.pzaLocalData.addDirty("vaseEndLessLevelIndex","vaseEndLessSunCount"),void d.pzaOperationMgr.showZombieModeGift(null)):r.pzaGameState.starWaveOverFail?(this.failWord.active=!1,this.mask.active=!0,this.board.active=!0,this.tittle.y=95,this.txt.node.active=!0,this.rankBtn.active=!1,this.txt.string="",void d.pzaOperationMgr.showZombieModeGift(null)):(this.failWord.active=!0,this.mask.active=!1,this.board.active=!1,h.pzaSoundManager.playAudio("eatmind"),this.failWord.stopAllActions(),this.failWord.scale=.01,this.failWord.runAction(cc.sequence(cc.scaleTo(1.2,1),cc.callFunc(function(){h.pzaSoundManager.playAudio("scream")}),cc.repeat(cc.sequence(cc.moveTo(.05,cc.v2(-5,0)),cc.moveTo(.05,cc.v2()),cc.moveTo(.05,cc.v2(0,-5)),cc.moveTo(.05,cc.v2())),6),cc.delayTime(2),cc.callFunc(function(){a.failWord.active=!1,a.mask.active=!0,a.showResultView()}))),r.pzaGameState.gameMode==r.pzaGameMode.SUR_ENDLESS?(this.tittle.y=95,this.txt.node.active=!0,this.rankBtn.active=!0,this.txt.string="\u5728\u88ab\u6050\u6016\u7684\u50f5\u5c38\u6d6a\u6f6e\u6df9\u6ca1\u4e4b\u524d\uff0c\u4f60\u575a\u6301\u5230\u4e86\u7b2c"+(r.pzaGameState.curPart-1)+"\u9762\u65d7\u5e1c\uff01\uff01\uff01",this.expandShareNode.active=!0,this.createWxUserInfoButton(!1,null),this.powerProNode.y=-45,void d.pzaOperationMgr.showZombieModeGift(null)):(this.txt.node.active=!1,this.rankBtn.active=!1,u.pzaLocalData.isShowPowerGift||(this.costPower=0),void(this.expandShareNode.active&&d.pzaOperationMgr.showShareBubble(this.expandShareNode,function(t){a.shareBubble=t}))))},t.prototype.showResultView=function(){var a=this;g.pzaChannel.instance().showInter(!0),d.pzaOperationMgr.showFailGameGift(this.tmpPart,function(){f.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(b.pzaWarningView);e&&e.showUseItemView(s.pzaGamePropEnum.PLAY_TICKET_ITEM,function(){a.close(),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_OVER,null),l.pzaGameManager.getCurrentGame().gameRestart()},function(){a.board.active=!0,d.pzaOperationMgr.showShareBubble(a.expandShareNode,function(t){a.rewardBubble=t})})})},function(){a.board.active=!0,d.pzaOperationMgr.showShareBubble(a.expandShareNode,function(t){a.rewardBubble=t})})},t.prototype.clickRestart=function(){var a=this,t=function(){a.close(),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_OVER,null),l.pzaGameManager.getCurrentGame().gameRestart()};if(this.adFlag)g.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"});else if(this.shareFlag)"ks"==g.pzaChannel.instance().channel||"tt"==g.pzaChannel.instance().channel||"my"==g.pzaChannel.instance().channel?g.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):g.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"27"},function(){t(),a.rewardBubble&&a.rewardBubble.getReward(),a.rewardBubble=null});else if(this.createMode)t();else{if(u.pzaLocalData.data.power<this.costPower)return m.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void f.pzaUIManager.showPowerView();u.pzaLocalData.setPower(-this.costPower),t()}},t.prototype.clickMainView=function(){this.close(),r.pzaGameState.gameMode!==r.pzaGameMode.BANG_JAR&&r.pzaGameState.gameMode!==r.pzaGameMode.VASE&&r.pzaGameState.gameMode!==r.pzaGameMode.VASE_ENDLESS||(r.pzaGameState.isGameEnd=!1,r.pzaGameState.isMenuShow=!1),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_OVER,null),l.pzaGameManager.removeBattleUI(),f.pzaUIManager.baseShowBoardUI(y.pzaResourceUrl.HOME_SELECT_VIEW,null),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.BACK_HOMEVIEW,null)},t.prototype.clickSelectPart=function(){this.close(),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_OVER,null),l.pzaGameManager.removeBattleUI(),r.pzaGameState.gameMode!==r.pzaGameMode.BANG_JAR&&r.pzaGameState.gameMode!==r.pzaGameMode.VASE&&r.pzaGameState.gameMode!==r.pzaGameMode.VASE_ENDLESS||(r.pzaGameState.isGameEnd=!1,r.pzaGameState.isMenuShow=!1),l.pzaGameManager.getCurrentGame().clickSelectPartInFailView()},t.prototype.clickShare=function(){var a=this;g.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){console.log("gameFailView share sucess"),a.rewardBubble&&a.rewardBubble.getReward(),a.rewardBubble=null})},t.prototype.clickRankBtn=function(){"hw"!=g.pzaChannel.instance().channel&&"oppo"!=g.pzaChannel.instance().channel&&"vivo"!=g.pzaChannel.instance().channel?this.createWxUserInfoButton(!0,function(){f.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.RANK_VIEW,null)}):m.pzaTipManager.showHomeTip("\u6682\u672a\u5f00\u653e",this.node,2)},t.prototype.createWxUserInfoButton=function(a,t){var e=this,o=g.pzaChannel.instance().getChannel();"wx"!==o.channel||null!=u.pzaLocalData.data.playerNick&&null!=u.pzaLocalData.data.playerAvatar?t&&t():o.wxCheckPrivacySetting(function(n){var i=function(){var a=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width-e.rankBtn.x-60)/n.width*a.width,top:(.5*n.height-e.rankBtn.y-60)/n.height*a.height,width:120/n.width*a.width,height:120/n.height*a.height};o.getUserInfo(function(){null!=u.pzaLocalData.data.playerNick&&null!=u.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),t&&t())},i,!1)};if(n)return a?void o.wxPrivacyAuthorize(i,null):void(t&&t());i()},null)},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node);var a=g.pzaChannel.instance().getChannel();"wx"==a.channel&&a.destroyAuthorizationButton()},i([D({displayName:"\u5931\u8d25\u6587\u5b57",type:cc.Node})],t.prototype,"failWord",void 0),i([D({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([D({displayName:"\u5931\u8d25\u754c\u9762",type:cc.Node})],t.prototype,"board",void 0),i([D({displayName:"\u5931\u8d25\u6807\u9898",type:cc.Node})],t.prototype,"tittle",void 0),i([D({displayName:"\u5931\u8d25\u6587\u6848",type:cc.Label})],t.prototype,"txt",void 0),i([D({displayName:"\u6392\u884c\u699c",type:cc.Node})],t.prototype,"rankBtn",void 0),i([D({displayName:"\u5e7f\u544a\u6807\u5fd7",type:cc.Node})],t.prototype,"adIcon",void 0),i([D({displayName:"\u5206\u4eab\u6807\u5fd7",type:cc.Node})],t.prototype,"shareIcon",void 0),i([D({displayName:"\u62d3\u5c55\u5206\u4eab\u6309\u94ae",type:cc.Node})],t.prototype,"expandShareNode",void 0),i([D({displayName:"\u4f53\u529b\u8fdb\u5ea6\u8282\u70b9",type:cc.Node})],t.prototype,"powerProNode",void 0),i([D({displayName:"\u4f53\u529b\u6d88\u8017\u8282\u70b9",type:cc.Node})],t.prototype,"costPowerNode",void 0),i([D({displayName:"\u4f53\u529b\u6d88\u8017\u6587\u5b57",type:cc.Label})],t.prototype,"costPowerLab",void 0),i([P],t)}(cc.Component);e.pzaGameFailView=S,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaGameVaseEndless":"pzaGameVaseEndless","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaWarningView":"pzaWarningView"}],pzaGameJar:[function(a,t,e){"use strict";cc._RF.push(t,"afeaeDHx7BNxpxWAQ8LqAI5","pzaGameJar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameJar=void 0;var i=a("../Battle/pzaGameState"),r=a("./pzaGameConfig"),p=a("./pzaGameManager"),l=a("./pzaGameNormal"),s=a("./pzaWorldEventManager"),c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=i.pzaGameMode.BANG_JAR,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u7838\u7f50\u5b50-"},t.prototype.initPartProcess=function(a){a.partProNode.active=!1,a.partLabel.string=i.pzaGameState.curChapter+"-"+i.pzaGameState.curPart},t.prototype.updatePartProcess=function(){},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1},t.prototype.refreshNextWave=function(a,t){if(!(a.specialNextWaveTime<=0||(a.specialNextWaveTime-=t,a.specialNextWaveTime>0))){i.pzaGameState.selectCard=null,i.pzaGameState.selectPlant=null,s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.SELECT_CARD,null),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.CLEAR_SCREEN,null),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.wave++,3==window.pzazombieManager.wave&&(window.pzazombieManager.lastWave=!0);var e=r.pzaGameConfig.get45JarData(window.pzazombieManager.wave);null!=e&&e.forEach(function(a){window.pzaplantManager.createJar(a)}),i.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,window.pzaGuideManager.guideShow(function(){i.pzaGameState.gamePause=!1})}},t.prototype.onZombieDeath=function(a,t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o=null),e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.checkAllZombieDeath(a))if(a.lastWave){var n=!1;window.pzaplantManager.pzaJarMap.forEach(function(a){null!=a&&null!=a.jarData&&null!=a.jarData.zombieType&&(n=!0)}),n||p.pzaGameManager.passPart(t.logicPos)}else if(window.pzaplantManager.pzaJarMap.size<=0){if(i.pzaGameState.gameMode===i.pzaGameMode.VASE)return void p.pzaGameManager.passPart(t.logicPos);if(i.pzaGameState.gameMode===i.pzaGameMode.VASE_ENDLESS)return void p.pzaGameManager.getCurrentGame().partWin();a.specialNextWaveTime=1}},t.prototype.showBattlePropButtons=function(t){5==i.pzaGameState.curPart||10==i.pzaGameState.curPart?(t.freeSunNode.active=!1,t.cherryBombNode.active=!1,t.autoPickNode.active=!0,t.clearCDNode.active=!1):a.prototype.showBattlePropButtons.call(this,t)},t}(l.pzaGameNormal);e.pzaGameJar=c,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGameNormal":"pzaGameNormal","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameKnock:[function(a,t,e){"use strict";cc._RF.push(t,"18dd45jI79JLaKO2BhiuGH2","pzaGameKnock");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameKnock=void 0;var i=a("../Achieve/pzaAchieve"),r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaBuffData"),l=a("../Battle/Plant/pzaAttackType"),s=a("../Battle/pzaGameState"),c=a("../utils/pzakc"),u=a("./pzaGameManager"),d=a("./pzaGameNormal"),h=a("./pzaGamePartConfig"),m=a("./pzaLocalData"),f=a("./pzaSoundManager"),z=a("./pzaStatisticsMgr"),y=a("./pzaUtil"),g=a("./pzaWorldEventManager"),b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=s.pzaGameMode.KNOCK_ZOMBIE,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u6253\u50f5\u5c38-"},t.prototype.isAutoCreateSun=function(){return!1},t.prototype.refreshNextWave=function(a,t){if(a.curWaveTime+=t,a.nextWaveTime-=t,!(a.lastWave||a.nextWaveTime>0)){a.wave++,console.log("wave:",a.wave),g.pzaWorldEventManager.triggerEvent(g.pzaWorldEventType.UPDATE_PART_PRO,null),1==a.wave&&f.pzaSoundManager.playAudio("awooga"),a.curWaveTime=0,a.preRefreshHp=0,a.hasShowRedTip=!1;var e=h.pzaGamePartConfig.getPartConfig(s.pzaGameState.curChapter,s.pzaGameState.curPart);if(!(null==e||e.maxWave<a.wave)){e.maxWave==a.wave&&(a.lastWave=!0);var o=window.pzaMapManager.TombSet.size;if(0==e.getWaveZombieDensity()[a.wave]){a.nextWaveTime=2;var n=1;return o<5&&(n=5-o),window.pzaMapManager.randomCreateTomb(n),void(e.maxWave==a.wave+1&&a.showBigWaveTip(!0,!0))}if(a.nextWaveTime=1.4,0==o)return a.wave--,void window.pzaMapManager.randomCreateTomb(5);var i=e.getRandomWaveZombie(a.wave,!1,window.pzaMapManager.getIceYCount());if(null!=i){var r=Math.min(.4,.05*a.wave);if(a.lastWave)window.pzaMapManager.TombMap.forEach(function(t){if(null!=t&&null!=t.xIndex&&null!=t.yIndex&&!window.pzaplantManager.hasPlant(t.xIndex,t.yIndex)){var o=e.getRandomTombZombie(),n=a.createFixBlockZombieData(o,t.xIndex,t.yIndex);Math.random()<=r&&n.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.SPEED_UP,-1,3)),a.createZombie(n,!1,!0)}});else{var l=[];window.pzaMapManager.TombMap.forEach(function(a){null!=a&&null!=a.xIndex&&null!=a.yIndex&&(window.pzaplantManager.hasPlant(a.xIndex,a.yIndex)||l.push(a))});for(var c=y.pzaUtil.getRandomArrayValue(l,i.length),u=0;u<i.length;u++){var d=c[u];if(null!=d&&null!=d.xIndex&&null!=d.yIndex){var m=a.createFixBlockZombieData(i[u],d.xIndex,d.yIndex);Math.random()<=r&&m.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.SPEED_UP,-1,3)),a.createZombie(m,!1,!0)}}}}}}},t.prototype.onZombieDeath=function(a,t,e,o){if(Math.random()<=.1)for(var n=0;n<3;n++)window.pzaplantManager.plantCreateSun(cc.v2(t.logicPos.x+30*(n-1),t.logicPos.y),!0,!0);if(e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)){o==l.pzaAttackType.CLEAN_CAR&&r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_13);var p=0;m.pzaLocalData.hasUseProp&&(p=1);var d=Date.now()-m.pzaLocalData.gameStartTimeStamp;d=Math.ceil(d/1e3);var h=10*(s.pzaGameState.curChapter-1)+s.pzaGameState.curPart;z.pzaStatisticsMgr.sendLevelEvent(h,1,p,d,s.pzaGameMode.NORMAL),c.default.eventReport(h+"\u5173\u5361\u6210\u529f"),u.pzaGameManager.passPart(t.logicPos),m.pzaLocalData.hasUseProp=!1}},t.prototype.showBattlePropButtons=function(t){5==s.pzaGameState.curPart||10==s.pzaGameState.curPart?(t.freeSunNode.active=!1,t.cherryBombNode.active=!1,t.autoPickNode.active=!0,t.clearCDNode.active=!1):a.prototype.showBattlePropButtons.call(this,t)},t}(d.pzaGameNormal);e.pzaGameKnock=b,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaBuffData":"pzaBuffData","../Battle/Plant/pzaAttackType":"pzaAttackType","../Battle/pzaGameState":"pzaGameState","../utils/pzakc":"pzakc","./pzaGameManager":"pzaGameManager","./pzaGameNormal":"pzaGameNormal","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameManager:[function(a,t,e){"use strict";cc._RF.push(t,"dbef5/qfMpJKpk2vS74YyJq","pzaGameManager"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameManager=void 0;var o=a("../Achieve/pzaAchieve"),n=a("../Achieve/pzaAchieveMgr"),i=a("../Battle/Data/pzaDropType"),r=a("../Battle/Plant/pzaBowlingWallBody"),p=a("../Battle/pzaEffectManager"),l=a("../Battle/pzaGameState"),s=a("../Garden/pzaGardenMgr"),c=a("../Load/pzaBundleObjectPool"),u=a("../Load/pzaPreLoadManager"),d=a("../View/pzaCommonMask"),h=a("./pzaCollisionManager"),m=a("./pzaGameArtTest"),f=a("./pzaGameBelt"),z=a("./pzaGameBoss"),y=a("./pzaGameCommonPool"),g=a("./pzaGameConfig"),b=a("./pzaGameJar"),v=a("./pzaGameKnock"),P=a("./pzaGameMiniGame"),D=a("./pzaGameNormal"),S=a("./pzaGameSmall"),C=a("./pzaGameSurEndless"),_=a("./pzaGameSurvival"),E=a("./pzaGameVase"),M=a("./pzaGameVaseEndless"),w=a("./pzaGameZombieEnemy"),T=a("./pzaGameZombieEnemyEndless"),B=a("./pzaKnockMiniGame"),A=a("./pzaLocalData"),O=a("./pzaNodeManager"),I=a("./pzaSmallMiniGame"),N=a("./pzaSoundManager"),G=a("./pzaUIManager"),R=a("./pzaUtil"),L=a("./pzaWorldEventManager"),k=function(){function a(){}return a.getGame=function(t){return a.gameMap.get(t).init()},a.getCurrentGame=function(){return a.gameMap.get(l.pzaGameState.gameMode)},a.getGameMode=function(t,e){return a.normalGameModeMap.get(t+"-"+e)||(A.pzaLocalData.isWeekTwo?l.pzaGameMode.NORMAL_WEEKTWO:l.pzaGameMode.NORMAL)},a.preLoadAndStart=function(t,e,o){l.pzaGameState.gameMode=t;var n=a.gameMap.get(t);n?n.firstStart(e,o):console.error("\u65e0\u6b64\u6e38\u620f\u6a21\u5f0f",t)},a.midOutStart=function(t,e,o,n,i){void 0===i&&(i=!1);var r=a.getCurrentGame(),p=r.isEndless()?null:r.getMidOutTip();a.gameMap.get(t).midOutAndStart(p,e,o,n,t,i)},a.passPart=function(t){A.pzaLocalData.data.autoPickLeft=l.pzaGameState.autoPickLeft,A.pzaLocalData.addDirty("autoPickLeft"),R.pzaUtil.changeGameSpeed(1);var e=a.getCurrentGame();e.checkAchieve(!0),l.pzaGameState.gameWin=!0;var r=e.winDrop();if(null==r)return N.pzaSoundManager.stopBgm(),void e.partWin();switch(r){case i.pzaDropType.PLANT_CARD:var c=l.pzaGameState.curChapter+"-"+l.pzaGameState.curPart,u=g.pzaGameConfig.newPlantDropMap.get(c);A.pzaLocalData.data.ownPlants.push(u),A.pzaLocalData.addDirty("ownPlants"),p.pzaEffectManager.createDropCard(i.pzaDropType.PLANT_CARD,u,t),n.default.instance().checkAddAchieve(o.pzaAchieveType.ACH_4,A.pzaLocalData.data.ownPlants.length,!1);break;case i.pzaDropType.HAND_BOOK:A.pzaLocalData.data.unlockBook=!0,A.pzaLocalData.addDirty("unlockBook"),p.pzaEffectManager.createDropCard(r,null,t);break;case i.pzaDropType.SHOVEL:case i.pzaDropType.CG_PAPER:case i.pzaDropType.BACONIC:case i.pzaDropType.TACO:case i.pzaDropType.COIN_PACKAGE:case i.pzaDropType.SURVIVAL_TROPHY:case i.pzaDropType.ZOMBIE_TROPHY:case i.pzaDropType.VASE_TROPHY:case i.pzaDropType.MINIGAME_TROPHY:p.pzaEffectManager.createDropCard(r,null,t);break;case i.pzaDropType.SPRINKLER:p.pzaEffectManager.createDropCard(r,null,t),s.default.instance().addGardenTool(s.pzaGardenToolType.waterPot,1);break;case i.pzaDropType.DROP_KEY:case i.pzaDropType.PLANT_SKIN:p.pzaEffectManager.createDropCard(r,null,t);break;default:e.partWin()}A.pzaLocalData.bpPassPart()},a.bangJarNextWave=function(){l.pzaGameState.selectCard=null,l.pzaGameState.selectPlant=null,L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.SELECT_CARD,null),L.pzaWorldEventManager.triggerEvent(L.pzaWorldEventType.CLEAR_SCREEN,null),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.wave++,3==window.pzazombieManager.wave&&(window.pzazombieManager.lastWave=!0);var a=g.pzaGameConfig.get45JarData(window.pzazombieManager.wave);null!=a&&a.forEach(function(a){window.pzaplantManager.createJar(a)}),l.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,window.pzaGuideManager.guideShow(function(){l.pzaGameState.gamePause=!1})},a.showGameFail=function(){R.pzaUtil.changeGameSpeed(1),G.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.GAME_FAIL_VIEW,null)},a.showBattleUI=function(t,e){var o=this;this.removeBattleUI();var n=O.pzaNodeManager.getBattleUINode();if(null!=n){d.pzaCommonMask.showMask(!0);var i=function(){c.pzaBundleObjectPool.requestInstantByUrl(t,!1,function(t,i){if(null==t&&null!=i){o.battleUINode=i,i.setParent(n),d.pzaCommonMask.hideMask(),e&&e(i);var p=l.pzaGameState.curPart,s=l.pzaGameState.curChapter,c=O.pzaNodeManager.getGrassNode().parent,u=c.getChildByName("wall_up").getComponent(r.pzaBowlingBodyWall),m=c.getChildByName("wall_down").getComponent(r.pzaBowlingBodyWall);5==p&&1==s||5==p&&6==s&&a.getCurrentGame().isMainMode()?(h.pzaCollisionManager.getInstance.addZombieOther(u),h.pzaCollisionManager.getInstance.addZombieOther(m)):!l.pzaGameState.isMiniMode()||5!=l.pzaGameState.curPart&&6!=l.pzaGameState.curPart?(h.pzaCollisionManager.getInstance.delZombieOther(u),h.pzaCollisionManager.getInstance.delZombieOther(m)):(h.pzaCollisionManager.getInstance.addZombieOther(u),h.pzaCollisionManager.getInstance.addZombieOther(m))}else console.error(t)})},p=u.pzaPreLoadManager.getSubResources(t);null!=p?c.pzaBundleObjectPool.preLoadSubResource(p,function(){i()}):i()}},a.removeBattleUI=function(){if(null==this.battleUINode)return null;y.pzaGameCommonPool.returnInstant(this.battleUINode),this.battleUINode=null},a.battleUINode=null,a.gameMap=new Map([[l.pzaGameMode.NORMAL,new D.pzaGameNormal],[l.pzaGameMode.BELT,new f.pzaGameBelt],[l.pzaGameMode.KNOCK_ZOMBIE,new v.pzaGameKnock],[l.pzaGameMode.SMALL_ZOMBIE,new S.pzaGameSmall],[l.pzaGameMode.BANG_JAR,new b.pzaGameJar],[l.pzaGameMode.ZOM_BOSS,new z.pzaGameBoss],[l.pzaGameMode.SURVIVAL,new _.pzaGameSurvival],[l.pzaGameMode.SUR_ENDLESS,new C.pzaGameSurEndless],[l.pzaGameMode.ZOMBIE_ENERMY,new w.pzaGameZombieEnemy],[l.pzaGameMode.ZOMBIE_ENDLESS,new T.pzaGameZombieEnemyEndless],[l.pzaGameMode.VASE,new E.pzaGameVase],[l.pzaGameMode.VASE_ENDLESS,new M.pzaGameVaseEndless],[l.pzaGameMode.MINIGAME,new P.pzaGameMiniGame],[l.pzaGameMode.KNOCK_ZOMBIE_MINIGAME,new B.pzaKnockMiniGame],[l.pzaGameMode.SMALL_ZOMBIE,new I.pzaSmallMiniGame],[l.pzaGameMode.NORMAL_WEEKTWO,new D.pzaGameNormal],[l.pzaGameMode.ART_TEST,new m.pzaGameArtTest]]),a.normalGameModeMap=new Map([["1-10",l.pzaGameMode.BELT],["2-10",l.pzaGameMode.BELT],["3-10",l.pzaGameMode.BELT],["2-5",l.pzaGameMode.KNOCK_ZOMBIE],["3-5",l.pzaGameMode.SMALL_ZOMBIE],["4-5",l.pzaGameMode.BANG_JAR],["5-10",l.pzaGameMode.ZOM_BOSS],["6-10",l.pzaGameMode.BELT],["7-10",l.pzaGameMode.BELT],["8-10",l.pzaGameMode.BELT],["7-5",l.pzaGameMode.KNOCK_ZOMBIE],["8-5",l.pzaGameMode.SMALL_ZOMBIE],["9-5",l.pzaGameMode.BANG_JAR],["10-10",l.pzaGameMode.ZOM_BOSS]]),a}();e.pzaGameManager=k,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Plant/pzaBowlingWallBody":"pzaBowlingWallBody","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaCommonMask":"pzaCommonMask","./pzaCollisionManager":"pzaCollisionManager","./pzaGameArtTest":"pzaGameArtTest","./pzaGameBelt":"pzaGameBelt","./pzaGameBoss":"pzaGameBoss","./pzaGameCommonPool":"pzaGameCommonPool","./pzaGameConfig":"pzaGameConfig","./pzaGameJar":"pzaGameJar","./pzaGameKnock":"pzaGameKnock","./pzaGameMiniGame":"pzaGameMiniGame","./pzaGameNormal":"pzaGameNormal","./pzaGameSmall":"pzaGameSmall","./pzaGameSurEndless":"pzaGameSurEndless","./pzaGameSurvival":"pzaGameSurvival","./pzaGameVase":"pzaGameVase","./pzaGameVaseEndless":"pzaGameVaseEndless","./pzaGameZombieEnemy":"pzaGameZombieEnemy","./pzaGameZombieEnemyEndless":"pzaGameZombieEnemyEndless","./pzaKnockMiniGame":"pzaKnockMiniGame","./pzaLocalData":"pzaLocalData","./pzaNodeManager":"pzaNodeManager","./pzaSmallMiniGame":"pzaSmallMiniGame","./pzaSoundManager":"pzaSoundManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameMiniGame:[function(a,t,e){"use strict";cc._RF.push(t,"8a4a6GFcAlF7bID9Vfm8HRH","pzaGameMiniGame");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameMiniGame=void 0;var i=a("../Battle/Data/pzaDropType"),r=a("../Battle/Data/pzaPlantEnum"),p=a("../Battle/Data/pzaZombieEnum"),l=a("../Battle/pzaEffectManager"),s=a("../Battle/pzaGameState"),c=a("../Load/pzaPreLoadManager"),u=a("../MiniGame/pzaMiniGameConf"),d=a("../View/Battle/pzaPlantBeltView"),h=a("../View/pzaCommonMask"),m=a("../utils/pzaResMgr"),f=a("../utils/pzakc"),z=a("./pzaBeltConfig"),y=a("./pzaGameBase"),g=a("./pzaGameConfig"),b=a("./pzaGameManager"),v=a("./pzaGamePartConfig"),P=a("./pzaLocalData"),D=a("./pzaSoundManager"),S=a("./pzaUIManager"),C=a("./pzaUtil"),_=a("./pzaWorldEventManager"),E=a("../View/Battle/pzaGetAchieveView"),M=a("../View/pzaWarningView"),w=a("./pzaStatisticsMgr"),T=a("../Battle/Data/pzaBaseData"),B=a("../Load/pzaBundleObjectPool"),A=a("../Battle/Zombie/pzaBaseZombie"),O=a("./pzaCollisionManager"),I=a("../View/Battle/pzaPlantSelectView"),N=a("../View/Battle/pzaDaveTreasureView"),G=a("../utils/pzaChannel"),R=a("./pzaTipManager"),L=a("./pzaOperationMgr"),k=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=s.pzaGameMode.MINIGAME,t.confMap=null,t.confArr=[],t.waveZombieDensity=null,t.randomZombies=[],t.createCardTime=0,t}return n(t,a),t.prototype.init=function(){var a=this;if(null!==this.confMap)return this;this.confMap=new Map,m.pzaResMgr.instance().getConf("a14").forEach(function(t){if(null!=t){var e=null;null!=t.density&&(e=t.density.split(",")).forEach(function(a,t){e[t]=parseInt(a)});var o=null;null!=t.zombie&&(o=t.zombie.split(",")).forEach(function(a,t){o[t]=parseInt(a)});var n=null;null!=t.initcards&&(n=t.initcards.split(",")).forEach(function(a,t){n[t]=parseInt(a)});var i=null;null!=t.plant&&((i=t.plant.split(",")).forEach(function(a,t){i[t]=parseInt(a)}),2==i.length?10==i[0]&&11==i[1]&&(i[0]=1e3,i[1]=1001):3==i.length&&10==i[0]&&11==i[1]&&12==i[2]&&(i[0]=1e3,i[1]=1001,i[2]=1002));var r=null;null!=t.plantweight&&(r=t.plantweight.split(",")).forEach(function(a,t){r[t]=parseInt(a)});var p=0,l=0;if(null!=t.fall){var s=t.fall.split(",");p=parseInt(s[0]),l=parseInt(s[1])}var c=0,d=0;if(null!=t.waterend){var h=t.waterend.split(",");null!=h&&(c=parseInt(h[0]),d=parseInt(h[1]))}var m=0;null!=t.waterexit&&(m=parseInt(t.waterexit));var f=0;null!=t.fog&&(f=parseInt(t.fog));var z=new u.pzaMiniGameConf(parseInt(t.id),t.name,parseInt(t.wave),e,o,parseInt(t.multiple),parseInt(t.flowerpot),n,i,r,p,l,parseInt(t.initsun),parseInt(t.bosshp),parseInt(t.tombstone),parseInt(t.tombstonemini),c,d,m,f,t.map,t.isnight);a.confMap.set(t.id+"",z),a.confArr.push(z)}})},t.prototype.getConf=function(a){var t=this.confMap.get(a+"");return null==t?(console.log("\u8ff7\u4f60\u6e38\u620f\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u5173\u5361\u914d\u7f6e"),null):t},t.prototype.getConfById=function(a){var t=this.confArr[a];if(null!=t)return t;console.error("\u8ff7\u4f60\u6e38\u620f\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u5173\u5361\u6570\u636e")},t.prototype.initMapPlantZombie=function(a,t){window.pzaMapManager.init(a,t,this.getConf(t).mapId),window.pzaplantManager.init(),window.pzazombieManager.init()},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var e=b.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,t).getConf(s.pzaGameState.curPart);a.maxWave=e.maxWave;for(var o=Math.floor(a.maxWave/10),n=0;n<a.partFlags.length;n++){var i=a.partFlags[n];n+1>o?i.active=!1:(i.active=!0,i.setPosition(-315*(n+1)/o-30,42))}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0,a.partLabel.string=this.getConf(s.pzaGameState.curPart).name},t.prototype.updatePartProcess=function(t){a.prototype.updatePartProcess.call(this,t);var e=Math.floor(window.pzazombieManager.wave/10)-1;if(!(e<0||e>3)){var o=t.partFlags[e];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=4==s.pzaGameState.curPart||s.pzaGameState.curPart>=10&&s.pzaGameState.curPart<=12||14==s.pzaGameState.curPart||15==s.pzaGameState.curPart||16==s.pzaGameState.curPart,t.skipPartBtn.active=!1,t.freePlantNode.active=!0,t.speedBtn.active=!0,5==s.pzaGameState.curPart||6==s.pzaGameState.curPart||7==s.pzaGameState.curPart?t.shovelShowNode.active=!1:t.shovelShowNode.active=!0},t.prototype.refreshNextWave=function(e,o){if(3!=s.pzaGameState.curPart&&4!=s.pzaGameState.curPart){a.prototype.refreshNextWave.call(this,e,o);var n=b.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,t);if(null!=n&&(13!=s.pzaGameState.curPart||s.pzaGameState.gameWin||(this.createCardTime-=o,this.createCardTime<=0&&this.createPlantCard()),!e.lastWave)){var i=!1;if(n.getConf(s.pzaGameState.curPart).maxWave==e.wave+1&&(i=!0),(e.wave+1)%10==0||i){if(!e.hasShowRedTip)return void((e.zombieMap.size<=0||e.curWaveTime>=v.pzaWaveConfig.activeRedTipTime)&&e.showBigWaveTip(i,!1))}else if(0!=e.wave&&e.nextWaveTime>v.pzaWaveConfig.preRefreshTime)if(10==s.pzaGameState.curPart){if(e.zombieMap.size<=0)return void(e.nextWaveTime=1)}else if(e.getCurWaveLeftHp()<=e.preRefreshHp)return void(e.nextWaveTime=v.pzaWaveConfig.preRefreshTime);e.curWaveTime<v.pzaWaveConfig.minRefreshTime||e.nextWaveTime>0||this.createWave(e)}}},t.prototype.createWave=function(e){a.prototype.createWave.call(this,e),5==s.pzaGameState.curPart||6==s.pzaGameState.curPart||s.pzaGameState.curPart>=9?e.nextWaveTime=v.pzaWaveConfig.getWaveRandomTime():e.nextWaveTime=C.pzaUtil.getRandomFloatNum(8,10);var o=b.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,t);if(null!=o){var n=o.getConf(s.pzaGameState.curPart);if(!(null==n||n.maxWave<e.wave)){n.maxWave==e.wave&&(e.lastWave=!0);var i=o.getRandomWaveZombie(e.wave,!0,window.pzaMapManager.getIceYCount(),0,s.pzaGameState.redLeft);if(null==i&&!(s.pzaGameState.curPart>=9))return e.nextWaveTime=0,void(e.curWaveTime=6);if(9!=s.pzaGameState.curPart){var r=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||r.indexOf(a.yIndex)>=0||r.push(a.yIndex)});var l=s.pzaGameState.map.getMapRow(),c=!0,u=[],d=[];for(f=0;f<l;f++)d.push(f);d.sort(function(){return Math.random()-.5});var h=0;i.forEach(function(a){var t=window.pzaMapManager.getRandomWayIndex(h,a,d);if(h++,a==p.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,u);if(null==o)return;u.push(o);var n=o.split("-"),i=e.createFixBlockZombieData(a,parseInt(n[0]),parseInt(n[1]));return e.createZombie(i),void e.curWaveZombieDatas.add(i)}a==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&r.length>0&&(t=r.shift());var l=e.createZombieData(a,t);!c&&l.logicPos&&(l.logicPos.x+=C.pzaUtil.getRandomFloatNum(.2,1)*s.pzaGameState.map.getBlockWidth()),e.createZombie(l),e.curWaveZombieDatas.add(l),c=!1}),e.lastWave&&(this.createTombWaterWaveData(e),e.lastWayZombieTime=2)}else if(10!=e.wave&&e.createBungeePutZombie([7,5,6,5,5,8,7,6,5,1,5,6,5,5,5,5,5,5,5,5,6,5,5,5,5,5,5,5,5,5][e.wave-1]-1,i),e.wave%10==0)for(var m=[],f=0;f<5;f++){var z=window.pzaplantManager.getRandomBlock(!0,m);if(null==z)return;m.push(z);var y=z.split("-"),g=e.createFixBlockZombieData(p.pzaZombieEnum.BUNGEE_ZOMBIE,parseInt(y[0]),parseInt(y[1]));e.createZombie(g),e.curWaveZombieDatas.add(g)}}}},t.prototype.lastTombWaterZombie=function(a){var t=this,e=this.getConf(s.pzaGameState.curPart);if(window.pzaMapManager.TombMap.forEach(function(e){if(null!=e&&null!=e.xIndex&&null!=e.yIndex&&!window.pzaplantManager.hasPlant(e.xIndex,e.yIndex)){var o=t.getRandomTombZombie(),n=a.createFixBlockZombieData(o,e.xIndex,e.yIndex);a.createZombie(n,!1,!0),a.curWaveZombieDatas.add(n)}}),e.lastWaterWaveZombie>0){for(var o=[],n=e.lastWaterWaveMinColumn-1;n<9;n++)o.push([n,2]),o.push([n,3]);o.sort(function(){return Math.random()-.5});for(var i=0;i<e.lastWaterWaveZombie;i++)if(null!=(c=o[i])){var r=this.getRandomDiveZombie(),p=a.createFixBlockZombieData(r,c[0],c[1]);a.createZombie(p,!1,!1,!0),a.curWaveZombieDatas.add(p)}}if(e.lastBungeeZombie>0){for(o=[],n=e.lastBungeeMinColumn-1;n<9;n++)o.push([n,0]),o.push([n,1]),o.push([n,2]),o.push([n,3]),o.push([n,4]);for(o.sort(function(){return Math.random()-.5}),i=0;i<e.lastBungeeZombie;i++){var c;if(null!=(c=o[i])){var u=this.getRandomTombZombie();p=window.pzazombieManager.createFixBlockZombieData(u,c[0],c[1]),a.zombieDatas[c[1]].delete(p),l.pzaEffectManager.createBungeeZombieEffect(p),a.curWaveZombieDatas.add(p)}}}},t.prototype.isLastWave=function(a){var e=b.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,t).getConf(s.pzaGameState.curPart);return a.wave==e.maxWave},t.prototype.checkAllZombieDeath=function(a){if(3==s.pzaGameState.curPart||4==s.pzaGameState.curPart)return!1;var t=0;return a.zombieDatas.forEach(function(a){t+=a.size}),!(t>0)},t.prototype.onZombieDeath=function(a,t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o=null),e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)&&!s.pzaGameState.starModeGameOver)return s.pzaGameState.partWin||14!=s.pzaGameState.curPart?void b.pzaGameManager.passPart(t.logicPos):(s.pzaGameState.starWaveOverFail=!0,b.pzaGameManager.getCurrentGame().partFail(),void b.pzaGameManager.showGameFail())},t.prototype.createPreviewZombie=function(a,e,o){if(3!==o&&4!=o){var n=1==o?C.pzaUtil.getRandomNum(6,7):C.pzaUtil.getRandomNum(8,9),i=b.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,t);if(null!=i){var r=i.getPreviewZombies(n);if(null!=r){var l=[];5==e?(l.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),75)),l.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),75)),l.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),125)),l.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),125)),l.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),175)),l.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),175)),l.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),225)),l.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),225)),l.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),275)),l.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),275)),l.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),325)),l.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),325)),l.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),375)),l.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),375)),l.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),75)),l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),75)),l.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),125)),l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),125)),l.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),175)),l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),175)),l.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),225)),l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),225)),l.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),275)),l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),275)),l.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),325)),l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),325)),l.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),375)),l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),375)),l.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),410)),l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),410))):(l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),40)),l.push(cc.v2(1925+C.pzaUtil.getRandomFloatNum(-25,25),40)),l.push(cc.v2(2025+C.pzaUtil.getRandomFloatNum(-25,25),40)),l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),90)),l.push(cc.v2(1925+C.pzaUtil.getRandomFloatNum(-25,25),90)),l.push(cc.v2(2025+C.pzaUtil.getRandomFloatNum(-25,25),90)),l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),140)),l.push(cc.v2(1925+C.pzaUtil.getRandomFloatNum(-25,25),140)),l.push(cc.v2(2025+C.pzaUtil.getRandomFloatNum(-25,25),140)),l.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),190)),l.push(cc.v2(1925+C.pzaUtil.getRandomFloatNum(-25,25),190)),l.push(cc.v2(2025+C.pzaUtil.getRandomFloatNum(-25,25),190)),l.push(cc.v2(1680+C.pzaUtil.getRandomFloatNum(-20,20),240)),l.push(cc.v2(1780+C.pzaUtil.getRandomFloatNum(-20,20),240)),l.push(cc.v2(1880+C.pzaUtil.getRandomFloatNum(-20,20),240)),l.push(cc.v2(1680+C.pzaUtil.getRandomFloatNum(-20,20),290)),l.push(cc.v2(1780+C.pzaUtil.getRandomFloatNum(-20,20),290)),l.push(cc.v2(1880+C.pzaUtil.getRandomFloatNum(-20,20),290)),l.push(cc.v2(1680+C.pzaUtil.getRandomFloatNum(-20,20),340)),l.push(cc.v2(1780+C.pzaUtil.getRandomFloatNum(-20,20),340)),l.push(cc.v2(1880+C.pzaUtil.getRandomFloatNum(-20,20),340)),l.push(cc.v2(1670+C.pzaUtil.getRandomFloatNum(-30,30),390)),l.push(cc.v2(1770+C.pzaUtil.getRandomFloatNum(-30,30),390)),l.push(cc.v2(1670+C.pzaUtil.getRandomFloatNum(-30,30),440)),l.push(cc.v2(1770+C.pzaUtil.getRandomFloatNum(-30,30),440)),l.push(cc.v2(1670+C.pzaUtil.getRandomFloatNum(-30,30),490)),l.push(cc.v2(1770+C.pzaUtil.getRandomFloatNum(-30,30),490)),l.push(cc.v2(1660+C.pzaUtil.getRandomFloatNum(-20,20),540)),l.push(cc.v2(1700+C.pzaUtil.getRandomFloatNum(-20,20),540))),l.sort(function(){return Math.random()-.5});for(var u=function(t,e){var o=c.pzaPreLoadManager.getZombieUrl(t);B.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(o,n){if(null==o&&null!=n){n.setParent(a.previewZombieNode),n.setPosition(e),n.zIndex=-e.y;var i=n.getComponent(A.pzaBaseZombie),r=new T.pzaBaseData(null,t);r.hp=1,r.logicPos=e,i&&i.preview(r,a.previewShadowNode,1),a.PreviewZombies.add(i)}else console.error(o)})},d=0;d<r.length;d++){var h=r[d],m=l[d];h==p.pzaZombieEnum.BUNGEE_ZOMBIE&&(m=5==e?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),u(h,m)}if(9==s.pzaGameState.curPart){var f=[cc.v2(1400,550+100*Math.random()),cc.v2(1500,550+100*Math.random()),cc.v2(1600,550+100*Math.random())];for(d=0;d<3;d++)m=f[d],u(p.pzaZombieEnum.BUNGEE_ZOMBIE,m)}13!=o&&(3==o?D.pzaSoundManager.playBgm(D.pzaBGMName.LOADING):D.pzaSoundManager.playBgm(D.pzaBGMName.PRE_BGM))}}}else 3==o&&D.pzaSoundManager.stopBgm()},t.prototype.showPreviewTip=function(a){a.word.string=this.getConf(s.pzaGameState.curPart).name,a.flagWord.node.active=!1},t.prototype.getAllZombies=function(a){var t=[];return this.confMap.get(a+"").zombieTypes.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),t},t.prototype.getBeltPlantArr=function(a){var t=[];return this.confMap.get(a+"").plantCardsId.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),t},t.prototype.getBeltPlantWeightArr=function(a){var t=[];return this.confMap.get(a+"").plantCardsWeight.forEach(function(a){t.push(a)}),t},t.prototype.getAllPlantArr=function(a){var t=[],e=this.confMap.get(a+"");return e.initialCards.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),e.plantCardsId.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),t},t.prototype.getInitPlantArr=function(a){var t=[];return this.confMap.get(a+"").initialCards.forEach(function(a){t.push(a)}),t},t.prototype.getPreviewZombies=function(a){var t=[],e=this.getAllZombies(s.pzaGameState.curPart);if(null==e||e.length<=1){for(var o=0;o<a;o++)t.push(p.pzaZombieEnum.ZOMBIE);return t}for(o=0;o<e.length;o++)t.push(e[o]);if(t.length>=a)return t;var n=[],i=[];e.forEach(function(a){if(null!=a&&a!=p.pzaZombieEnum.BUNGEE_ZOMBIE&&null!=a&&a!=p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM){var t=g.pzaGameConfig.getZombieConfig(a);null!=t&&0!=t.refrshWeight&&(12==s.pzaGameState.curPart&&a==p.pzaZombieEnum.ZOMBIE&&(t.refrshWeight=200),n.push(a),i.push(t.refrshWeight))}});var r=t.length;for(o=0;o<a-r;o++){var l=C.pzaUtil.getRandomIndexByWeight(i);t.push(n[l])}return t},t.prototype.getRandomWaveZombie=function(a,t,e,o,n){var i=this;if(void 0===o&&(o=0),void 0===n&&(n=0),this.randomZombies=[],this.waveZombieDensity=this.getConf(s.pzaGameState.curPart).waveZombieDensity,null==this.waveZombieDensity||a-1<0)return[p.pzaZombieEnum.ZOMBIE];var r=this.waveZombieDensity[a-1];if(0==r)return null;if(null==r||r<=1)return 15==s.pzaGameState.curPart||16==s.pzaGameState.curPart?[p.pzaZombieEnum.NormalPeaZombie]:[p.pzaZombieEnum.ZOMBIE];var l=this.getConf(s.pzaGameState.curPart),c=l.maxWave,u=l.zombieTypes;if(r=this.fixedZombie(r,a),a==c&&u.forEach(function(a){a!=p.pzaZombieEnum.ZOMBIE&&(i.randomZombies.push(a),r-=g.pzaGameConfig.getZombieLevel(a))}),a%10==0)for(var d=Math.min(Math.floor(r/2),8),h=0;h<d&&15!=s.pzaGameState.curPart&&16!=s.pzaGameState.curPart;h++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),r-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(;r>0;){var m=this.getRandomZombie(r,a,e,o,n);if(null==m)break;if(m==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?e--:m==p.pzaZombieEnum.RED_GARGANTUAR&&a%10!=0&&n--,this.randomZombies.push(m),this.randomZombies.length>=50)break;r-=g.pzaGameConfig.getZombieLevel(m)}return this.randomZombies},t.prototype.fixedZombie=function(a,t){if((16==t||26==t)&&1==s.pzaGameState.curPart)for(var e=0;e<10;e++)this.randomZombies.push(p.pzaZombieEnum.LADDER_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.LADDER_ZOMBIE);if((19==t||29==t)&&1==s.pzaGameState.curPart)for(e=0;e<10;e++)this.randomZombies.push(p.pzaZombieEnum.JACK_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.JACK_ZOMBIE);if(10==t&&1==s.pzaGameState.curPart){for(e=0;e<4;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE)}if(20==t&&1==s.pzaGameState.curPart){for(e=0;e<7;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),e=0;e<3;e++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}if(30==t&&1==s.pzaGameState.curPart){for(e=0;e<8;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),e=0;e<5;e++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}if((16==t||26==t)&&2==s.pzaGameState.curPart)for(e=0;e<10;e++)this.randomZombies.push(p.pzaZombieEnum.DIGGER_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.DIGGER_ZOMBIE);if((19==t||29==t)&&2==s.pzaGameState.curPart)for(e=0;e<10;e++)this.randomZombies.push(p.pzaZombieEnum.POGO_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.POGO_ZOMBIE);if(10==t&&2==s.pzaGameState.curPart){for(e=0;e<4;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE)}if(20==t&&2==s.pzaGameState.curPart){for(e=0;e<7;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),e=0;e<3;e++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}if(30==t&&2==s.pzaGameState.curPart){for(e=0;e<8;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),e=0;e<5;e++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}return t%10==0&&s.pzaGameState.curPart>=10&&15!=s.pzaGameState.curPart&&16!=s.pzaGameState.curPart&&(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE)),a},t.prototype.getRandomTombZombie=function(){return[p.pzaZombieEnum.ZOMBIE,p.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,p.pzaZombieEnum.CONE_HEAD_ZOMBIE][Math.floor(3*Math.random())]},t.prototype.getRandomDiveZombie=function(){var a=[p.pzaZombieEnum.DUCKY_TUBE_ZOMBIE];a.push(p.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE);var t=[];return a.forEach(function(a){var e=g.pzaGameConfig.getZombieConfig(a);t.push(e.refrshWeight)}),a[C.pzaUtil.getRandomIndexByWeight(t)]},t.prototype.getRandomZombie=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[],r=[],l=this.getConf(s.pzaGameState.curPart).zombieTypes,c=1;if(t>=5&&t<10&&(c=2),t>=10&&t<15?c=3:t>=15&&(c=4),l.forEach(function(e){if(null!=e){var l=g.pzaGameConfig.getZombieConfig(e);if(12==s.pzaGameState.curPart&&l&&(l.refrshMinWave=1),10==s.pzaGameState.curPart){if(e==p.pzaZombieEnum.ZOMBONI&&l&&(l.refrshMinWave=1),t%10!=0&&(e==p.pzaZombieEnum.ZOMBIE||e==p.pzaZombieEnum.DUCKY_TUBE_ZOMBIE))return;if(e==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM)return}15==s.pzaGameState.curPart&&(l.refrshMinWave=1),null==l||0==l.refrshWeight||l.refreshLevel>a||l.refrshMinWave>c||o>0&&e==p.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&t%10!=0||(12!=s.pzaGameState.curPart&&10!=s.pzaGameState.curPart||e!=p.pzaZombieEnum.ZOMBIE)&&(1!=s.pzaGameState.curPart||e!=p.pzaZombieEnum.JACK_ZOMBIE&&e!=p.pzaZombieEnum.LADDER_ZOMBIE&&e!=p.pzaZombieEnum.GARGANTUAR)&&(2!=s.pzaGameState.curPart||e!=p.pzaZombieEnum.DIGGER_ZOMBIE&&e!=p.pzaZombieEnum.POGO_ZOMBIE&&e!=p.pzaZombieEnum.GARGANTUAR)&&(i.push(e),o>0||r.push(l.refrshWeight))}}),e>0){var u=g.pzaGameConfig.getZombieConfig(p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM);null!=u&&u.refreshLevel<=a&&(i.push(p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),r.push(u.refrshWeight))}var d=C.pzaUtil.getRandomIndexByWeight(r);return i[d]},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=4==s.pzaGameState.curPart||s.pzaGameState.curPart>=10&&s.pzaGameState.curPart<=12||14==s.pzaGameState.curPart||15==s.pzaGameState.curPart||16==s.pzaGameState.curPart,G.pzaChannel.isConfRemote?a.cherryBombNode.active=!0:a.cherryBombNode.active=3!=s.pzaGameState.curPart&&4!=s.pzaGameState.curPart,a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.clickSelectPartInFailView=function(){S.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.PUZZLE_VIEW,function(){S.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.getAdPlantArr=function(){return 1==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.COB_CANNON]:2==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.SPIKEROCK]:3==s.pzaGameState.curPart?[r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.COB_CANNON,r.pzaPlantEnum.JALAPENO,r.pzaPlantEnum.ICE_SHROOM]:4==s.pzaGameState.curPart?[r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.COB_CANNON,r.pzaPlantEnum.JALAPENO,r.pzaPlantEnum.ICE_SHROOM]:5==s.pzaGameState.curPart||6==s.pzaGameState.curPart?[r.pzaPlantEnum.BOOM_NUT_BOWLING,r.pzaPlantEnum.TALL_NUT_BOWLING]:9==s.pzaGameState.curPart?[r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.COB_CANNON]:13==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.CATTAIL,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.SPIKEROCK,r.pzaPlantEnum.COB_CANNON]:14==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.TWIN_SUNFLOWER,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.SPIKEROCK]:15==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.TWIN_SUNFLOWER,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.SPIKEROCK,r.pzaPlantEnum.COB_CANNON]:16==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.TWIN_SUNFLOWER,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.SPIKEROCK,r.pzaPlantEnum.COB_CANNON,r.pzaPlantEnum.CATTAIL]:void 0},t.prototype.getGameModeName=function(){return"\u8ff7\u4f60\u6e38\u620f-"},t.prototype.getZombieTypeArr=function(a,t){return this.getAllZombies(t)},t.prototype.getPlantArr=function(a,t){return this.getAllPlantArr(t)},t.prototype.isAutoCreateSun=function(){return 4==s.pzaGameState.curPart||s.pzaGameState.curPart>=10&&s.pzaGameState.curPart<=12||14==s.pzaGameState.curPart||15==s.pzaGameState.curPart||16==s.pzaGameState.curPart},t.prototype.beforeLoad=function(){s.pzaGameState.partStar=0,this.init()},t.prototype.readData=function(){},t.prototype.winDrop=function(){var a=i.pzaDropType.COIN_PACKAGE;return!P.pzaLocalData.passMiniGame(s.pzaGameState.curPart-1)&&(a=i.pzaDropType.MINIGAME_TROPHY),P.pzaLocalData.data.miniFirstPassArr[s.pzaGameState.curPart-1]||(P.pzaLocalData.data.miniFirstPassArr[s.pzaGameState.curPart-1]=1),P.pzaLocalData.addDirty("miniFirstPassArr"),"my"===G.pzaChannel.instance().channel&&G.pzaChannel.instance().getChannel().actSubmit(),a},t.prototype.showPassUiNoStar=function(){S.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.PUZZLE_VIEW,function(){L.pzaOperationMgr.showCreativeVaseModeGift(null),S.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.beforeGameStart=function(a,t){8==t?w.pzaStatisticsMgr.sendEvent("System",{name:"system",value:18}):7==t?w.pzaStatisticsMgr.sendEvent("System",{name:"system",value:17}):t>=5?w.pzaStatisticsMgr.sendEvent("System",{name:"system",value:16}):t<3?w.pzaStatisticsMgr.sendEvent("System",{name:"system",value:12}):w.pzaStatisticsMgr.sendEvent("System",{name:"system",value:13}),h.pzaCommonMask.showMask(),2!=t&&5!=t&&6!=t&&7!=t&&10!=t&&11!=t&&13!=t&&14!=t&&15!=t&&16!=t||l.pzaEffectManager.createGroveEffect()},t.prototype.gameStart=function(t,e){P.pzaLocalData.gameStartTimeStamp=Date.now();var o=400+e;w.pzaStatisticsMgr.sendLevelEvent(this.getConf(s.pzaGameState.curPart).id,2,0,0,s.pzaGameMode.MINIGAME),f.default.eventReport(o+"\u5173\u5361\u8fdb\u5165"),this.beforeGameStart(t,e),this.normalStartGameCall(t,e),a.prototype.resetTryPlant.call(this)},t.prototype.loadAndStart=function(a,t){var e=this;this.preLoad(a,t,function(){e.gameStart(a,t)})},t.prototype.preLoad=function(a,t,e){this.init();var o=0,n=this.getConf(t);4==t&&(o=n.initSun),s.pzaGameState.init(a,t,this.gameMode,this.skipPartStar(),o,n.isnight,n.mapId),this.beforeLoad(a,t),s.pzaGameState.isGameEnd=!1,O.pzaCollisionManager.getInstance.setOn();var i=this.getResArr(a,t);S.pzaUIManager.showLoading(),this.initMapPlantZombie(a,t),D.pzaSoundManager.clearAllLoopAudio(),this.readData(a,t),B.pzaBundleObjectPool.preLoadSubResource(i,function(){S.pzaUIManager.hideLoading(e)},function(a){S.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*a)))}),D.pzaSoundManager.playAudio("loadingbar_zombie"),s.pzaGameState.autoPickLock=!1},t.prototype.playGameBgm=function(){13!=s.pzaGameState.curPart&&(5==s.pzaGameState.curPart||6==s.pzaGameState.curPart?D.pzaSoundManager.playBgm(D.pzaBGMName.BOWLING_BGM):D.pzaSoundManager.playBgm(D.pzaBGMName.BELT_BGM))},t.prototype.normalStartGameCall=function(a,t){var e=this;5==a&&this.initFlowerPot(t),14==t&&this.initStarFruitShadow(),3!=t&&13!=t&&D.pzaSoundManager.playBgm(D.pzaBGMName.PRE_BGM),3==t?this.createDrZomBoss(t):4==t?this.createDrZomBossNormal(t):10==t||11==t||12==t||14==t||15==t||16==t?this.createPlantSelectNormal(t):13==t?(l.pzaEffectManager.createRainNightEffect(),D.pzaSoundManager.playBgm(D.pzaBGMName.CHAPTER_4),D.pzaSoundManager.playLoopAudio("rain",!0),this.createChapterFour(t)):window.pzaMapManager.previewMap(function(){h.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){b.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var o=a&&a.getComponent(d.pzaPlantBeltView);o&&o.showView(function(){window.pzaMapManager.initCleanCar(),l.pzaEffectManager.createReadyWord(function(){h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,5==s.pzaGameState.curPart||6==s.pzaGameState.curPart?(window.pzazombieManager.nextWaveTime=2,window.pzaMapManager.showRedLine(3)):9==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=2:12==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=55:window.pzazombieManager.nextWaveTime=25,z.pzaBeltConfig.initMiniPlants(t),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),e.playGameBgm()})})})})},!0)},t.prototype.createDrZomBoss=function(a){var t=this.getConf(a).bossHp;window.pzaMapManager.previewMap(function(){h.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){b.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_BELT_VIEW,function(e){var o=e&&e.getComponent(d.pzaPlantBeltView);o&&o.showView(function(){window.pzaMapManager.initCleanCar(),window.pzazombieManager.createDrZomBoss(function(){l.pzaEffectManager.createReadyWord(function(){h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,z.pzaBeltConfig.initMiniPlants(a),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),D.pzaSoundManager.playBgm(D.pzaBGMName.ZOMBIEBOSS_BGM)})},t)})})})},!0)},t.prototype.createDrZomBossNormal=function(a){var t=this.getConf(a).bossHp;window.pzaMapManager.previewMap(function(){b.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){h.pzaCommonMask.hideMask();var e=a&&a.getComponent(I.pzaPlantSelectView);e&&e.miniGameInit(null,function(){h.pzaCommonMask.showMask(),e&&e.initPlant();var a=function(){window.pzazombieManager.createDrZomBoss(function(){l.pzaEffectManager.createReadyWord(function(){e&&e.initPlant(),h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,window.pzaMapManager.battleDownView.showSunUI(),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),D.pzaSoundManager.playBgm(D.pzaBGMName.ZOMBIEBOSS_BGM)})},t)};window.pzaMapManager.cancelPreviewMap(0,function(){var t=G.pzaChannel.instance().getChannel();null!=t.ctrl&&"1"===t.ctrl.p1?S.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.DAVE_TREASURE_VIEW,function(t){var e=t&&t.getComponent(N.pzaDaveTreasureView);e&&e.init(function(){a()})}):a()})})})},!0)},t.prototype.createPlantSelectNormal=function(a){var t=this;window.pzaMapManager.previewMap(function(){b.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){h.pzaCommonMask.hideMask();var o=e&&e.getComponent(I.pzaPlantSelectView);o&&o.miniGameInit(null,function(){h.pzaCommonMask.showMask(),window.pzaMapManager.initCleanCar(),o&&o.initPlant();var e=function(){l.pzaEffectManager.createReadyWord(function(){o&&o.initPlant(),t.playBgm(),h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,window.pzaMapManager.battleDownView.showSunUI(),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),C.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed),10==a&&t.createIceGround(),12==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=55:10==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=45:window.pzazombieManager.nextWaveTime=18,14==a&&R.pzaTipManager.showGameTip("\u7528\u5c0f\u661f\u661f\u585e\u6ee1\u8fd9\u4e2a\u88ab\u56f4\u51fa\u7684\u7a7a\u95f4\u5427!")})};window.pzaMapManager.cancelPreviewMap(0,function(){var a=G.pzaChannel.instance().getChannel();("wx"!==a.channel||null!=a.ctrl&&"1"===a.ctrl.p1)&&("ks"!==a.channel||null!=a.ctrl&&"1"===a.ctrl.p1)&&("tt"!==a.channel||null!=a.ctrl&&"1"===a.ctrl.p1)&&("my"!==a.channel||null!=a.ctrl&&"1"===a.ctrl.p1)?S.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.DAVE_TREASURE_VIEW,function(a){var t=a&&a.getComponent(N.pzaDaveTreasureView);t&&t.init(function(){e()})}):e()})})})},!0)},t.prototype.createChapterFour=function(){var a=this;window.pzaMapManager.previewMap(function(){h.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.initCleanCar(),window.pzaMapManager.fogEnter(function(){l.pzaEffectManager.createReadyWord(function(){h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=25,_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),a.playGameBgm(),a.createCardTime=10})})})},!0)},t.prototype.initFlowerPot=function(a){var t=this.getConf(a);if(!(null==t||t.flowerPotColumn<=0))for(var e=s.pzaGameState.map.getMapRow(),o=0;o<t.flowerPotColumn;o++)for(var n=0;n<e;n++)window.pzaplantManager.createPlant(r.pzaPlantEnum.FLOWER_POT,o,n,!0)},t.prototype.initStarFruitShadow=function(){for(var a=[[3,0],[6,0],[3,1],[4,1],[5,1],[1,2],[2,2],[3,2],[4,2],[5,2],[6,2],[3,3],[4,3],[3,4]],t=0;t<a.length;t++)window.pzaplantManager.createStarFruitShadow(a[t][0],a[t][1])},t.prototype.createIceGround=function(){for(var a=[0,1,4,5],t=0;t<a.length;t++){var e=.1*s.pzaGameState.map.getYInterval(1),o=s.pzaGameState.map.getBlockLogicPos(4,a[t],50,e),n=a[t];l.pzaEffectManager.createIceGroundStart(o.x,o.y,4,n)}},t.prototype.gameRecover=function(a,t){var e=this;S.pzaUIManager.removeBoardUI(),s.pzaGameState.midOut=!1,S.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.WARNING_VIEW,function(o){var n=o&&o.getComponent(M.pzaWarningView);n&&n.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){s.pzaGameState.gamePause=!1,_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),C.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed),s.pzaGameState.curPart>=5&&s.pzaGameState.curPart<=8?D.pzaSoundManager.playBgm(D.pzaBGMName.BOWLING_BGM):s.pzaGameState.curPart>=10?e.playBgm():D.pzaSoundManager.playBgm(D.pzaBGMName.BELT_BGM),D.pzaSoundManager.clearAllLoopAudio(),window.pzazombieManager.getZombieMapData()>0&&D.pzaSoundManager.playLoopAudio("jack_enter",!0),13==t&&(D.pzaSoundManager.playBgm(D.pzaBGMName.CHAPTER_4),D.pzaSoundManager.playLoopAudio("rain",!0))},function(){b.pzaGameManager.removeBattleUI(),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_OVER,null),e.firstStart(a,t)},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,P.pzaLocalData.normalPowerCost,!0,2)})},t.prototype.createPlantCard=function(){for(var a=[],t=r.pzaPlantEnum.PEA_SHOOTER;t<=r.pzaPlantEnum.MELON_PULT;t++)a.push(t);var e=[r.pzaPlantEnum.GRAVE_BUSTER,r.pzaPlantEnum.FLOWER_POT,r.pzaPlantEnum.COFFEE_BEAN,r.pzaPlantEnum.SUN_FLOWER,r.pzaPlantEnum.TWIN_SUNFLOWER,r.pzaPlantEnum.SUN_SHROOM,r.pzaPlantEnum.IMITATER,r.pzaPlantEnum.UMBRELLA_LEAF];a=a.filter(function(a){return!e.includes(a)});var o=C.pzaUtil.getRandomValueFromArray(a),n=0;window.pzaplantManager.plantEnvDataMap.forEach(function(a){a.plantData.plantType==r.pzaPlantEnum.LILY_PAD&&n++});var i=30-29*(n=n>=18?18:n)/18,p=!1;100*Math.random()<i&&(p=!0),p&&(o=r.pzaPlantEnum.LILY_PAD),l.pzaEffectManager.createAutoCard(o),this.createCardTime=C.pzaUtil.getRandomFloatNum(5,9.9)},t.prototype.partFail=function(){var t=0;P.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-P.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3);var o=400+s.pzaGameState.curPart;w.pzaStatisticsMgr.sendLevelEvent(this.getConf(s.pzaGameState.curPart).id,0,t,e,s.pzaGameMode.MINIGAME),f.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),P.pzaLocalData.hasUseProp=!1,a.prototype.partFail.call(this)},t.prototype.partWin=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null);var o=0;P.pzaLocalData.hasUseProp&&(o=1);var n=Date.now()-P.pzaLocalData.gameStartTimeStamp;n=Math.ceil(n/1e3);var i=400+s.pzaGameState.curPart;w.pzaStatisticsMgr.sendLevelEvent(this.getConf(s.pzaGameState.curPart).id,1,o,n,s.pzaGameMode.MINIGAME),f.default.eventReport(i+"\u5173\u5361\u6210\u529f"),P.pzaLocalData.hasUseProp=!1,_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_OVER,null),b.pzaGameManager.removeBattleUI(),this.showPassUiNoStar();var r=function(){var a=0;e.skipPartStar()||(a=g.pzaGameConfig.getPartStar(s.pzaGameState.curChapter,s.pzaGameState.curPart)),a<=0?(_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_OVER,null),b.pzaGameManager.removeBattleUI(),G.pzaChannel.instance().showInter(!0),L.pzaOperationMgr.showMiniGameGift()):S.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.GAME_WIN_VIEW,null)};null!=s.pzaGameState.achieveArr&&s.pzaGameState.achieveArr.length>0?S.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.GET_ACHIEVE_VIEW,function(a){var t=a&&a.getComponent(E.pzaGetAchieveView);t&&t.init(s.pzaGameState.achieveArr,r)}):r()},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u8ff7\u4f60\u6e38\u620f\u201d\uff0c"+this.getConf(s.pzaGameState.curPart).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t}(y.pzaGameBase);e.pzaGameMiniGame=k,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../MiniGame/pzaMiniGameConf":"pzaMiniGameConf","../View/Battle/pzaDaveTreasureView":"pzaDaveTreasureView","../View/Battle/pzaGetAchieveView":"pzaGetAchieveView","../View/Battle/pzaPlantBeltView":"pzaPlantBeltView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaBeltConfig":"pzaBeltConfig","./pzaCollisionManager":"pzaCollisionManager","./pzaGameBase":"pzaGameBase","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaOperationMgr":"pzaOperationMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameNormal:[function(a,t,e){"use strict";cc._RF.push(t,"0e86aspu6xM+p2NF6QIxdIG","pzaGameNormal");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameNormal=void 0;var i=a("../Achieve/pzaAchieve"),r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaDropType"),l=a("../Battle/Data/pzaGuideType"),s=a("../Battle/Data/pzaPlantEnum"),c=a("../Battle/Data/pzaZombieEnum"),u=a("../Battle/Plant/pzaAttackType"),d=a("../Battle/pzaEffectManager"),h=a("../Battle/pzaGameState"),m=a("../Load/pzaPreLoadManager"),f=a("../View/Battle/pzaPlantBeltView"),z=a("../View/Battle/pzaPlantSelectView"),y=a("../View/pzaCommonMask"),g=a("../utils/pzaChannel"),b=a("../utils/pzaChannelTT"),v=a("../utils/pzakc"),P=a("./pzaGameBase"),D=a("./pzaGameConfig"),S=a("./pzaGameManager"),C=a("./pzaGamePartConfig"),_=a("./pzaLocalData"),E=a("./pzaSoundManager"),M=a("./pzaStatisticsMgr"),w=a("./pzaTipManager"),T=a("./pzaUtil"),B=a("./pzaWorldEventManager"),A=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=h.pzaGameMode.NORMAL,t.guideMap=new Map([[l.pzaGuideType.GUIDE_PLANT_1_1,t.guidePlant11.bind(t)],[l.pzaGuideType.GUIDE_NEW_PLANT_1_2,t.guidePlant12.bind(t)],[l.pzaGuideType.GUIDE_PROP_1_3,t.guidePlant13.bind(t)],[l.pzaGuideType.GUIDE_SHOVEL_1_5,t.guidePlant15.bind(t)],[l.pzaGuideType.GUIDE_BELT_MODE,t.guideBletMode.bind(t)],[l.pzaGuideType.GUIDE_NINGHT_4_10,t.guide_night_4_10.bind(t)],[l.pzaGuideType.GUIDE_5_5,t.guide_night_4_10.bind(t)],[l.pzaGuideType.GUIDE_NINGHT_2_1,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_CARD_SLOT_2_2,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_CARD_SLOT_2_3,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_CARD_SLOT_2_6,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_POOL_3_1,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_4_1,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_5_1,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5,t.guidePlant25.bind(t)],[l.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5,t.guidePlant35.bind(t)],[l.pzaGuideType.GUIDE_BANG_JAR_4_5,t.guidePlant45.bind(t)],[l.pzaGuideType.GUIDE_BOSS_5_10,t.guidePlant510.bind(t)],[l.pzaGuideType.GUIDE_6_1,t.guide6_1.bind(t)],[l.pzaGuideType.GUIDE_6_5,t.guidePlant65.bind(t)],[l.pzaGuideType.GUIDE_10_5,t.guide_night_4_10.bind(t)]]),t}return n(t,a),t.prototype.isMainMode=function(){return!0},t.prototype.initMapPlantZombie=function(a,t){var e=C.pzaGamePartConfig.getPartConfig(a,t);window.pzaMapManager.init(a,t,e.mapId),window.pzaplantManager.init(),window.pzazombieManager.init()},t.prototype.initGameState=function(a,t){var e,o=C.pzaGamePartConfig.getPartConfig(a,t);e=o.initSun;var n=o.isnight;h.pzaGameState.init(a,t,this.gameMode,this.skipPartStar(),e,n,o.mapId),this.initMapPlantZombie(a,t),h.pzaGameState.autoPickLock=!1},t.prototype.getPlantArr=function(a,t){var e=C.pzaGamePartConfig.getPartDefaultPlant(a,t);return null==e&&(e=_.pzaLocalData.data.ownPlants),e},t.prototype.getZombieTypeArr=function(a,t){var e=C.pzaGamePartConfig.getPartConfig(a,t);return e&&e.zombieTypes},t.prototype.skipPartStar=function(){return!1},t.prototype.winDrop=function(){var a=p.pzaDropType.COIN_PACKAGE;return _.pzaLocalData.passPart(h.pzaGameState.curChapter,h.pzaGameState.curPart,h.pzaGameState.partStar)&&(5==h.pzaGameState.curChapter&&10==h.pzaGameState.curPart&&r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_1),a=D.pzaGameConfig.getPartDrop(h.pzaGameState.curChapter,h.pzaGameState.curPart),3==h.pzaGameState.curChapter&&4==h.pzaGameState.curPart?(_.pzaLocalData.data.curGuideType=l.pzaGuideType.GUIDE_SHOP_3_4,_.pzaLocalData.data.unlockShop=!0,_.pzaLocalData.addDirty("curGuideType","unlockShop")):4==h.pzaGameState.curChapter&&4==h.pzaGameState.curPart?(_.pzaLocalData.data.curGuideType=l.pzaGuideType.GUIDE_SHOP_4_4,_.pzaLocalData.addDirty("curGuideType")):5==h.pzaGameState.curChapter&&1==h.pzaGameState.curPart?(_.pzaLocalData.data.curGuideType=l.pzaGuideType.GUIDE_SHOP_5_1,_.pzaLocalData.addDirty("curGuideType")):5==h.pzaGameState.curChapter&&4==h.pzaGameState.curPart&&(_.pzaLocalData.data.curGuideType=l.pzaGuideType.GUIDE_GARDEN_5_4,_.pzaLocalData.data.unlockGarden=!0,_.pzaLocalData.addDirty("curGuideType","unlockGarden"))),"my"===g.pzaChannel.instance().channel&&g.pzaChannel.instance().getChannel().actSubmit(),a},t.prototype.partFail=function(){a.prototype.partFail.call(this),v.default.eventReport(h.pzaGameState.curChapter+"-"+h.pzaGameState.curPart+"\u5931\u8d25");var t=0;_.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-_.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3);var o=10*(h.pzaGameState.curChapter-1)+h.pzaGameState.curPart;M.pzaStatisticsMgr.sendLevelEvent(o,1,t,e,h.pzaGameMode.NORMAL),v.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),_.pzaLocalData.hasUseProp=!1},t.prototype.beforeLoad=function(a,t){h.pzaGameState.sunLightCount=C.pzaWaveConfig.initSunCount,h.pzaGameState.map=4!=a&&9!=a||5!=t?D.pzaGameConfig.chapterMapConfig.get(a):D.pzaGameConfig.chapterMapConfig.get(2),h.pzaGameState.gameTimeType=2==a||4==a||7==a||9==a||(5==a||10==a)&&10==t?h.pzaGameTimeType.NIGHT:h.pzaGameTimeType.DAY,h.pzaGameState.newZombie=null;var e=C.pzaGamePartConfig.getPartConfig(a,t);null==e||null==e.newZombieType||_.pzaLocalData.hasUnlockZombie(e.newZombieType)||(h.pzaGameState.newZombie=e.newZombieType),h.pzaGameState.partStar=D.pzaGameConfig.getPartStar(a,t)},t.prototype.beforeGameStart=function(a){E.pzaSoundManager.playBgm(E.pzaBGMName.LOADING),y.pzaCommonMask.showMask(),(a<=4||_.pzaLocalData.isWeekTwo&&a<=9)&&d.pzaEffectManager.createGroveEffect()},t.prototype.gameStart=function(t,e){var o=this;a.prototype.resetTryPlant.call(this),_.pzaLocalData.gameStartTimeStamp=Date.now();var n=10*(h.pzaGameState.curChapter-1)+h.pzaGameState.curPart;if(M.pzaStatisticsMgr.sendLevelEvent(n,2,0,0,h.pzaGameMode.NORMAL),v.default.eventReport(n+"\u5173\u5361\u8fdb\u5165"),this.beforeGameStart(t,e),4!=t&&9!=t||10!=e||(d.pzaEffectManager.createRainNightEffect(),E.pzaSoundManager.playBgm(E.pzaBGMName.RAIN_BGM)),window.pzaGuideManager.guideStart(function(){o.normalStartGameCall(t,e)}),null!==window.pzaGuideManager.guideType){var i=this.guideMap.get(window.pzaGuideManager.guideType);i&&i(t,e)}"tt"==g.pzaChannel.instance().channel&&"idle"==b.pzaChannelTT.rState&&g.pzaChannel.instance().recorderStart()},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=C.pzaGamePartConfig.getPartConfig(h.pzaGameState.curChapter,h.pzaGameState.curPart);if(null!=t){if(a.maxWave=t.maxWave,(2==h.pzaGameState.curChapter||7==h.pzaGameState.curChapter)&&5==h.pzaGameState.curPart||(5==h.pzaGameState.curChapter||10==h.pzaGameState.curChapter)&&10==h.pzaGameState.curPart)for(var e=0;e<a.partFlags.length;e++)(n=a.partFlags[e]).active=!1;else{var o=Math.floor(a.maxWave/10);for(h.pzaGameState.isSurvival()||1!=h.pzaGameState.curChapter||2!=h.pzaGameState.curPart&&3!=h.pzaGameState.curPart&&5!=h.pzaGameState.curPart||(o=1),e=0;e<a.partFlags.length;e++){var n=a.partFlags[e];e+1>o?n.active=!1:(n.active=!0,n.setPosition(-315*(e+1)/o-30,42))}}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0,a.partLabel.string=(h.pzaGameState.curChapter>5?h.pzaGameState.curChapter-5:h.pzaGameState.curChapter)+"-"+h.pzaGameState.curPart}},t.prototype.updatePartProcess=function(t){if(a.prototype.updatePartProcess.call(this,t),1!=h.pzaGameState.curChapter||2!=h.pzaGameState.curPart&&3!=h.pzaGameState.curPart&&5!=h.pzaGameState.curPart){var e=Math.floor(window.pzazombieManager.wave/10)-1;if(!(e<0||e>3)){var o=t.partFlags[e];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}}else if(t.maxWave==window.pzazombieManager.wave){var n=t.partFlags[0];cc.Tween.stopAllByTarget(n),cc.tween(n).to(.2,{y:72}).start()}},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.gameProp.node.active=h.pzaGameState.curChapter>1||1==h.pzaGameState.curChapter&&h.pzaGameState.curPart>=3,t.freePlantNode.active=(h.pzaGameState.curChapter>1||1==h.pzaGameState.curChapter&&h.pzaGameState.curPart>=3)&&5!=h.pzaGameState.curPart&&10!=h.pzaGameState.curPart,t.freePlantNode.active=!0,h.pzaGameState.curChapter%5==1&&5==h.pzaGameState.curPart&&(t.freePlantNode.active=!1),1==h.pzaGameState.curChapter&&h.pzaGameState.curPart<=3&&(t.freePlantNode.active=!1),t.shovelShowNode.active=h.pzaGameState.curChapter>1||h.pzaGameState.curPart>4,_.pzaLocalData.hasPass12()?(M.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"18"},{name:"adname",value:"\u89e3\u9501\u52a0\u901f\u529f\u80fd"}),t.speedBtn.active=!0):t.speedBtn.active=!1,t.sunUIShowNode.active=!0,5!=h.pzaGameState.curChapter&&10!=h.pzaGameState.curChapter||10!=h.pzaGameState.curPart||!g.pzaChannel.isConfRemote||(t.freePlantNode.active=!0),window.pzaGuideManager.guideType==l.pzaGuideType.GUIDE_PROP_1_3?(t.freePlantNode.active=!1,t.gameProp.hideAllProp()):(M.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"3"},{name:"adname",value:"\u5c40\u5185\u6a31\u6843\u70b8\u5f39"}),M.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"4"},{name:"adname",value:"\u5c40\u5185\u81ea\u52a8\u62fe\u53d6"}),M.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"5"},{name:"adname",value:"\u5c40\u5185\u989d\u5916\u9633\u5149"})),1==h.pzaGameState.curChapter&&5==h.pzaGameState.curPart&&(t.pauseBtn.active=!1,t.speedBtn.active=!1)},t.prototype.refreshNextWave=function(t,e){if(a.prototype.refreshNextWave.call(this,t,e),window.pzaGuideManager.guideType==l.pzaGuideType.GUIDE_PROP_1_3)if(0==window.pzaGuideManager.guideStep&&1==t.wave&&t.curWaveTime>=10)B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GUIDE_REFRESH_PROP,null),h.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_PAUSE,null),window.pzaGuideManager.guideShow(function(){h.pzaGameState.gamePause=!1,B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_RESUME,null)});else{if(1==window.pzaGuideManager.guideStep&&2==t.wave&&(t.curWaveTime>=10||t.nextWaveTime<=0))return h.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_PAUSE,null),void window.pzaGuideManager.guideShow(function(){h.pzaGameState.gamePause=!1,B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_RESUME,null)});2==window.pzaGuideManager.guideStep&&3==t.wave&&t.curWaveTime>=10&&(h.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_PAUSE,null),window.pzaGuideManager.guideShow(function(){h.pzaGameState.gamePause=!1,B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_RESUME,null)}))}if(!t.lastWave){var o=!1;if(1!=h.pzaGameState.curChapter||1!=h.pzaGameState.curPart&&2!=h.pzaGameState.curPart&&3!=h.pzaGameState.curPart&&5!=h.pzaGameState.curPart||null!=(n=C.pzaGamePartConfig.getPartConfig(h.pzaGameState.curChapter,h.pzaGameState.curPart))&&n.maxWave==t.wave+1&&(o=!0),(t.wave+1)%10==0||o){if(!t.hasShowRedTip){if(t.zombieMap.size<=0||t.curWaveTime>=C.pzaWaveConfig.activeRedTipTime){var n;null!=(n=C.pzaGamePartConfig.getPartConfig(h.pzaGameState.curChapter,h.pzaGameState.curPart))&&n.maxWave==t.wave+1&&(o=!0);var i=1==h.pzaGameState.curChapter&&1==h.pzaGameState.curPart||2==h.pzaGameState.curChapter&&5==h.pzaGameState.curPart;t.showBigWaveTip(o,i)}return}}else if(0!=t.wave&&t.nextWaveTime>C.pzaWaveConfig.preRefreshTime&&t.getCurWaveLeftHp()<=t.preRefreshHp)return void(t.nextWaveTime=C.pzaWaveConfig.preRefreshTime);t.curWaveTime<C.pzaWaveConfig.minRefreshTime||t.nextWaveTime>0||(this.createWave(t),1!=t.wave||1!=h.pzaGameState.curChapter||1!=h.pzaGameState.curPart||_.pzaLocalData.hasPass12()||(h.pzaGameState.gamePause=!0,B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_PAUSE,null),window.pzaGuideManager.guideShowSpeedBtn(function(){h.pzaGameState.gamePause=!1,B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_RESUME,null)})))}},t.prototype.createWave=function(t){a.prototype.createWave.call(this,t),1==t.wave&&E.pzaSoundManager.playAudio("awooga"),t.nextWaveTime=C.pzaWaveConfig.getWaveRandomTime();var e=C.pzaGamePartConfig.getPartConfig(h.pzaGameState.curChapter,h.pzaGameState.curPart);if(!(null==e||e.maxWave<t.wave)){e.maxWave==t.wave&&(t.lastWave=!0);var o=e.getRandomWaveZombie(t.wave,!0,window.pzaMapManager.getIceYCount(),0,h.pzaGameState.redLeft);if(null!=o)if(5!=h.pzaGameState.curChapter&&10!=h.pzaGameState.curChapter||5!=h.pzaGameState.curPart){window.pzaGuideManager.guideType==l.pzaGuideType.GUIDE_PROP_1_3&&1==t.wave&&(o=[1,1,1,1,1]);var n=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||n.indexOf(a.yIndex)>=0||n.push(a.yIndex)});var i=h.pzaGameState.map.getMapRow(),r=!0,p=[],s=[];if(1==h.pzaGameState.curChapter&&1==h.pzaGameState.curPart)s=[2];else if(1!=h.pzaGameState.curChapter||2!=h.pzaGameState.curPart&&3!=h.pzaGameState.curPart){for(f=0;f<i;f++)s.push(f);s.sort(function(){return Math.random()-.5})}else(s=[1,2,3]).sort(function(){return Math.random()-.5});var u=0;o.forEach(function(a){var e=window.pzaMapManager.getRandomWayIndex(u,a,s);if(u++,a==c.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,p);if(null==o)return;p.push(o);var i=o.split("-"),l=t.createFixBlockZombieData(a,parseInt(i[0]),parseInt(i[1]));return t.createZombie(l),void t.curWaveZombieDatas.add(l)}a==c.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&n.length>0&&(e=n.shift());var d=t.createZombieData(a,e);!r&&d.logicPos&&(d.logicPos.x+=T.pzaUtil.getRandomFloatNum(.2,1)*h.pzaGameState.map.getBlockWidth()),t.createZombie(d),t.curWaveZombieDatas.add(d),r=!1}),t.lastWave&&(this.createTombWaterWaveData(t),t.lastWayZombieTime=2)}else{var d;if(d=5==h.pzaGameState.curChapter?[7,5,6,5,5,8,7,6,5,1,5,6,5,5,5,5,5,5,5,5]:[7,5,6,5,5,8,7,6,5,1,5,6,5,5,5,5,5,5,5,5,6,5,5,5,5,5,5,5,5,5],10!=t.wave&&t.createBungeePutZombie(d[t.wave-1]-1,o),t.wave%10==0){for(var m=[],f=0;f<5;f++){var z=window.pzaplantManager.getRandomBlock(!0,m);if(null==z)return;m.push(z);var y=z.split("-"),g=t.createFixBlockZombieData(c.pzaZombieEnum.BUNGEE_ZOMBIE,parseInt(y[0]),parseInt(y[1]));t.createZombie(g),t.curWaveZombieDatas.add(g)}w.pzaTipManager.showGameTip("\u8e66\u6781\u50f5\u5c38\u6765\u5566\uff01")}}}},t.prototype.zombieDeathDrop=function(t){h.pzaGameState.curChapter<=1||a.prototype.zombieDeathDrop.call(this,t)},t.prototype.createPreviewZombie=function(t,e,o){(5!==h.pzaGameState.curChapter&&10!=h.pzaGameState.curChapter||10!==h.pzaGameState.curPart)&&a.prototype.createPreviewZombie.call(this,t,e,o)},t.prototype.onZombieDeath=function(a,t,e,o){e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)&&(o==u.pzaAttackType.CLEAN_CAR&&r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_13),S.pzaGameManager.passPart(t.logicPos))},t.prototype.checkAchieve=function(a){h.pzaGameState.onlyBoomPlant&&r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_16,1,a),h.pzaGameState.gameMode!=h.pzaGameMode.NORMAL&&h.pzaGameState.gameMode!=h.pzaGameMode.SURVIVAL&&h.pzaGameState.gameMode!=h.pzaGameMode.NORMAL_WEEKTWO||(h.pzaGameState.curChapter%5!=3||h.pzaGameState.usePeaPlant||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_5,1,a),5!=h.pzaGameState.curChapter&&10!=h.pzaGameState.curChapter||h.pzaGameState.useThrowPlant||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_7,1,a),h.pzaGameState.curChapter%5!=1&&h.pzaGameState.curChapter%5!=3&&5!=h.pzaGameState.curChapter&&10!=h.pzaGameState.curChapter||!h.pzaGameState.onlyShroomCofee||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_11,1,a),h.pzaGameState.curChapter%5!=2&&h.pzaGameState.curChapter%5!=4||h.pzaGameState.useShroom||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_12,1,a),h.pzaGameState.curChapter%5!=4||5==h.pzaGameState.curPart||h.pzaGameState.usePlanternBlover||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_21,1,a),h.pzaGameState.curChapter%5!=3&&(h.pzaGameState.curChapter%5!=4||5==h.pzaGameState.curPart)||h.pzaGameState.usePondPlant||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_22,1,a))},t.prototype.playBgm=function(){var t=h.pzaGameState.curChapter,e=h.pzaGameState.curPart;if(4!=t&&9!=t||5!=e)return 4!=t&&9!=t||10!=e?void(5!=e||1!=t&&2!=t&&3!=t&&5!=t&&6!=t&&7!=t&&8!=t&&10!=t?(5!=t&&10!=t||10!=e)&&(10!=e||1!=t&&2!=t&&3!=t&&6!=t&&7!=t&&8!=t?a.prototype.playBgm.call(this):E.pzaSoundManager.playBgm(E.pzaBGMName.BELT_BGM)):E.pzaSoundManager.playBgm(E.pzaBGMName.BOWLING_BGM)):(E.pzaSoundManager.playBgm(E.pzaBGMName.BELT_BGM),void E.pzaSoundManager.playLoopAudio("rain",!0));E.pzaSoundManager.playBgm(E.pzaBGMName.PUZZLE_BGM)},t.prototype.guidePlant11=function(){var a=this;d.pzaEffectManager.createShowGrassEffect(1,null),window.pzaMapManager.previewMap(function(){y.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){a.playBgm(),window.pzaMapManager.initCleanCar(),S.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(z.pzaPlantSelectView),e=C.pzaGamePartConfig.getPartDefaultPlant(1,1);t&&t.init(e),t&&t.initPlant(),y.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1,h.pzaGameState.guideSunPause=!0,h.pzaGameState.guideZombiePause=!0,window.pzaGuideManager.guideShow()})})},!0)},t.prototype.guidePlant12=function(){var a=this;d.pzaEffectManager.createShowGrassEffect(2,null),window.pzaMapManager.previewMap(function(){y.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){a.playBgm(),window.pzaMapManager.initCleanCar(),S.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(z.pzaPlantSelectView),e=C.pzaGamePartConfig.getPartDefaultPlant(1,2);t&&t.init(e),t&&t.initPlant(),y.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1,h.pzaGameState.guideZombiePause=!0,window.pzaGuideManager.guideShow(),window.pzazombieManager.nextWaveTime=50})})},!0)},t.prototype.guidePlant13=function(){var a=this;window.pzaMapManager.previewMap(function(){S.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_SELECT_VIEW,function(t){var e=t&&t.getComponent(z.pzaPlantSelectView),o=C.pzaGamePartConfig.getPartDefaultPlant(1,3);e&&e.init(o,function(){y.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){a.playBgm(),window.pzaMapManager.initCleanCar(),d.pzaEffectManager.createReadyWord(function(){y.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),e&&e.initPlant(),h.pzaGameState.gamePause=!1,B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_RESUME,null)})})})})},!0)},t.prototype.guidePlant15=function(){var a=this;h.pzaGameState.gameMode=h.pzaGameMode.BELT,window.pzaplantManager.createPlant(s.pzaPlantEnum.PEA_SHOOTER,6,1,!0),window.pzaplantManager.createPlant(s.pzaPlantEnum.PEA_SHOOTER,7,2,!0),window.pzaplantManager.createPlant(s.pzaPlantEnum.PEA_SHOOTER,5,3,!0),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.createPitchFork(),y.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){window.pzaMapManager.openBattleUI(),window.pzaGuideManager.guideStepNext()},function(){a.playBgm(),y.pzaCommonMask.showMask(),window.pzaMapManager.initCleanCar(),S.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var t=a&&a.getComponent(f.pzaPlantBeltView);t&&t.showView(function(){y.pzaCommonMask.hideMask(),B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.REFRESH_FREE_PLANT,null),h.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})},t.prototype.guidePlant65=function(){var a=this;h.pzaGameState.gameMode=h.pzaGameMode.BELT,window.pzaMapManager.initMapPos(!1),window.pzaMapManager.createPitchFork(),window.pzaMapManager.showRedLine(3),y.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){a.playBgm(),y.pzaCommonMask.showMask(),window.pzaMapManager.initCleanCar(),window.pzaMapManager.openBattleUI(),B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.REFRESH_FREE_PLANT,null),S.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var t=a&&a.getComponent(f.pzaPlantBeltView);t&&t.showView(function(){y.pzaCommonMask.hideMask(),h.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})},t.prototype.guideBletMode=function(){var a=this;h.pzaGameState.gameMode=h.pzaGameMode.BELT,window.pzaMapManager.previewMap(function(){y.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.initMapTomb(h.pzaGameState.curChapter,h.pzaGameState.curPart,function(){window.pzaMapManager.initCleanCar(),S.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_BELT_VIEW,function(t){var e=t&&t.getComponent(f.pzaPlantBeltView);e&&e.showView(function(){d.pzaEffectManager.createReadyWord(function(){a.playBgm(),y.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})})})},!0)},t.prototype.guidePlant25=function(){var a=this;h.pzaGameState.sunLightCount=0,window.pzaMapManager.initMapPos(!1),h.pzaGameState.gameMode=h.pzaGameMode.KNOCK_ZOMBIE,y.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){a.playBgm(),window.pzaMapManager.initCleanCar(),window.pzaMapManager.openBattleUI(),window.pzaMapManager.hideSunUI(),h.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})},t.prototype.guidePlant35=function(){var a=this;h.pzaGameState.gameMode=h.pzaGameMode.SMALL_ZOMBIE,y.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){window.pzaMapManager.previewMap(function(){y.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){S.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_BELT_VIEW,function(t){var e=t&&t.getComponent(f.pzaPlantBeltView);e&&e.showView(function(){window.pzaMapManager.initCleanCar(),d.pzaEffectManager.createReadyWord(function(){a.playBgm(),y.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})})},!1)})},t.prototype.guidePlant45=function(){var a=this;window.pzaMapManager.initMapPos(!1),window.pzaMapManager.initCleanCar(),window.pzaMapManager.createPitchFork(),window.pzazombieManager.wave=1;var t=D.pzaGameConfig.get45JarData(window.pzazombieManager.wave);null!=t&&t.forEach(function(a){window.pzaplantManager.createJar(a)}),h.pzaGameState.gameMode=h.pzaGameMode.BANG_JAR,y.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){a.playBgm(),window.pzaGuideManager.guideStepNext(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1})},t.prototype.guidePlant510=function(){var a=this;h.pzaGameState.gameMode=h.pzaGameMode.ZOM_BOSS,y.pzaCommonMask.hideMask(),window.pzaplantManager.initFlowerPot(),window.pzaGuideManager.guideShow(function(){E.pzaSoundManager.stopBgm(),window.pzaMapManager.previewMap(function(){y.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.initCleanCar();var t=0;10==h.pzaGameState.curChapter&&10==h.pzaGameState.curPart&&(t=6e4),window.pzazombieManager.createDrZomBoss(function(){S.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_BELT_VIEW,function(t){var e=t&&t.getComponent(f.pzaPlantBeltView);e&&e.showView(function(){d.pzaEffectManager.createReadyWord(function(){a.playBgm(),y.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1,B.pzaWorldEventManager.triggerEvent(B.pzaWorldEventType.GAME_RESUME,null)})})})},t)})},!1)})},t.prototype.guide_night_4_10=function(){var a=this;y.pzaCommonMask.hideMask(),window.pzaplantManager.initFlowerPot(),window.pzaGuideManager.guideShow(function(){a.guideBletMode()})},t.prototype.guide_night_2_1=function(a,t){var e=this;y.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){e.normalStartGameCall(a,t,!1)})},t.prototype.guide6_1=function(a,t){var e=this;y.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){e.normalStartGameCall(a,t,!1)})},t.prototype.getAdPlantArr=function(){return 10!=h.pzaGameState.curPart||h.pzaGameState.curChapter%5!=1&&h.pzaGameState.curChapter%5!=2?5==h.pzaGameState.curPart&&h.pzaGameState.curChapter%5==1?[s.pzaPlantEnum.BOOM_NUT_BOWLING,s.pzaPlantEnum.TALL_NUT_BOWLING]:5==h.pzaGameState.curPart&&h.pzaGameState.curChapter%5==2?[s.pzaPlantEnum.GATLING_PEA,s.pzaPlantEnum.GLOOM_SHROOM,s.pzaPlantEnum.WINTER_MELON,s.pzaPlantEnum.GOLD_MAGNET,s.pzaPlantEnum.SPIKEROCK]:5!=h.pzaGameState.curPart&&10!=h.pzaGameState.curPart||h.pzaGameState.curChapter%5!=3?h.pzaGameState.curChapter%5==4&&10==h.pzaGameState.curPart?[s.pzaPlantEnum.GATLING_PEA,s.pzaPlantEnum.GLOOM_SHROOM,s.pzaPlantEnum.CATTAIL,s.pzaPlantEnum.WINTER_MELON,s.pzaPlantEnum.GOLD_MAGNET,s.pzaPlantEnum.SPIKEROCK,s.pzaPlantEnum.COB_CANNON]:h.pzaGameState.curChapter%5==4&&5==h.pzaGameState.curPart?[s.pzaPlantEnum.SQUASH,s.pzaPlantEnum.ICE_SHROOM]:5!=h.pzaGameState.curChapter&&10!=h.pzaGameState.curChapter||5!=h.pzaGameState.curPart?5!=h.pzaGameState.curChapter&&10!=h.pzaGameState.curChapter||10!=h.pzaGameState.curPart?void 0:[s.pzaPlantEnum.WINTER_MELON,s.pzaPlantEnum.GOLD_MAGNET,s.pzaPlantEnum.COB_CANNON,s.pzaPlantEnum.JALAPENO,s.pzaPlantEnum.ICE_SHROOM]:[s.pzaPlantEnum.GATLING_PEA,s.pzaPlantEnum.GLOOM_SHROOM,s.pzaPlantEnum.WINTER_MELON,s.pzaPlantEnum.GOLD_MAGNET,s.pzaPlantEnum.COB_CANNON]:[s.pzaPlantEnum.GATLING_PEA,s.pzaPlantEnum.GLOOM_SHROOM,s.pzaPlantEnum.CATTAIL,s.pzaPlantEnum.WINTER_MELON,s.pzaPlantEnum.GOLD_MAGNET,s.pzaPlantEnum.SPIKEROCK,s.pzaPlantEnum.COB_CANNON]:[s.pzaPlantEnum.GATLING_PEA,s.pzaPlantEnum.GLOOM_SHROOM,s.pzaPlantEnum.WINTER_MELON,s.pzaPlantEnum.GOLD_MAGNET,s.pzaPlantEnum.SPIKEROCK,s.pzaPlantEnum.COB_CANNON]},t}(P.pzaGameBase);e.pzaGameNormal=A,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Plant/pzaAttackType":"pzaAttackType","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantBeltView":"pzaPlantBeltView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzaChannelTT":"pzaChannelTT","../utils/pzakc":"pzakc","./pzaGameBase":"pzaGameBase","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGamePartConfig:[function(a,t,e){"use strict";cc._RF.push(t,"1da54Pqt3NJaJJrwLTjkbmX","pzaGamePartConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWaveConfig=e.pzaGamePartConfig=void 0;var o=a("../Battle/Data/pzaGuideType"),n=a("../Battle/Data/pzaPlantEnum"),i=a("../Battle/Data/pzaZombieEnum"),r=a("../Battle/pzaGameState"),p=a("./pzaGameConfig"),l=a("./pzaLocalData"),s=a("./pzaUtil"),c=function(){function a(a,t,e,o,n,i,r,p,l,s,c,u,d,h){void 0===i&&(i=1),void 0===r&&(r=0),void 0===p&&(p=0),void 0===l&&(l=0),this.part=null,this.maxWave=0,this.waveZombieDensity=null,this.zombieTypes=null,this.newZombieType=null,this.newZombieWave=0,this.magnification=1,this.tombCount=0,this.tombMinRow=0,this.flowerPotColumn=0,this.minWaterWave=0,this.lastWaterWaveMinColumn=0,this.lastWaterWaveZombie=0,this.lastBungeeMinColumn=0,this.lastBungeeZombie=0,this.minFogColumn=0,this.redLimit=0,this.initSun=0,this.mapId=0,this.isnight=0,this.gamename="",this.partPlantType=0,this.type2=[],this.limitation=0,this.part=a,this.maxWave=t,this.waveZombieDensity=e,this.zombieTypes=o,0!=n&&(this.newZombieType=n),this.magnification=i,this.tombCount=r,this.tombMinRow=p,this.flowerPotColumn=l,this.initSun=s,this.mapId=c,this.isnight=u,this.gamename=d,this.partPlantType=h||0}return a.initPartConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=null;null!=t.density&&(o=t.density.split(",")).forEach(function(a,t){o[t]=parseInt(a)});var n=null;null!=t.type&&(n=t.type.split(",")).forEach(function(a,t){n[t]=parseInt(a)});var i=null,r=0;if(null!=t.new){var p=t.new.split(",");null!=p&&(i=parseInt(p[0]),r=parseInt(p[1]))}var l=new a(t.Level,parseInt(t.wave),o,n,i,parseInt(t.multiple),parseInt(t.tombstone),parseInt(t.tombstonemini),parseInt(t.flowerpot),parseInt(t.initsun),parseInt(t.map),parseInt(t.isnight),t.gamename,t.planttype);if(l.newZombieWave=r,null!=t.waterexit&&(l.minWaterWave=parseInt(t.waterexit)),null!=t.waterend){var s=t.waterend.split(",");null!=s&&(l.lastWaterWaveMinColumn=parseInt(s[0]),l.lastWaterWaveZombie=parseInt(s[1]))}if(null!=t.fall){var c=t.fall.split(",");null!=c&&(l.lastBungeeMinColumn=parseInt(c[0]),l.lastBungeeZombie=parseInt(c[1]))}null!=t.fog&&(l.minFogColumn=parseInt(t.fog)),e.partConfigMap.set(t.Level,l)}})},a.getPartConfig=function(a,t){var e=this.partConfigMap.get(a+"-"+t);if(null==e)return console.error("\u672a\u627e\u5230\u5bf9\u5e94\u5173\u5361\u914d\u7f6e"),null;if(window.pzaGuideManager.guideType==o.pzaGuideType.GUIDE_PROP_1_3){var n=e.clone();return n.maxWave=5,n.waveZombieDensity=[5,1,30,1,5],n}return e},a.getPartDefaultPlant=function(a,t){var e=a+"-"+t;return this.PartDefaultPlantMap.get(e)},a.prototype.clone=function(){var t=new a(this.part,this.maxWave,this.waveZombieDensity,this.zombieTypes,this.newZombieType,this.magnification,this.tombCount,this.tombMinRow,this.flowerPotColumn,this.initSun,this.mapId,this.isnight,this.gamename,this.partPlantType);return t.minWaterWave=this.minWaterWave,t.lastWaterWaveMinColumn=this.lastWaterWaveMinColumn,t.lastWaterWaveZombie=this.lastWaterWaveZombie,t.lastBungeeMinColumn=this.lastBungeeMinColumn,t.lastBungeeZombie=this.lastBungeeZombie,t},a.prototype.getWaveZombieDensity=function(){return null==this.waveZombieDensity&&this.createZombieDensity(),this.waveZombieDensity},a.prototype.createZombieDensity=function(){this.waveZombieDensity=[];for(var a=1;a<=this.maxWave;a++){var t=Math.floor(Math.floor(.8*(a-1))/2)+1;t=a%10==0?Math.floor(2.5*t):Math.floor(t*this.magnification),this.waveZombieDensity.push(t)}},a.prototype.getRandomWaveZombie=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0),this.getWaveZombieDensity();var s=[];if(null==this.waveZombieDensity||a-1<0)return[i.pzaZombieEnum.ZOMBIE];var c=this.waveZombieDensity[a-1];if(null==c||c<=1)return[i.pzaZombieEnum.ZOMBIE];if(null!=this.newZombieType&&this.newZombieWave==a&&(s.push(this.newZombieType),c-=p.pzaGameConfig.getZombieLevel(this.newZombieType)),t&&a%10==0){s.push(i.pzaZombieEnum.FLAG_ZOMBIE),c-=p.pzaGameConfig.getZombieLevel(i.pzaZombieEnum.FLAG_ZOMBIE);for(var u=Math.min(Math.floor(c/2),8),d=0;d<u;d++)s.push(i.pzaZombieEnum.ZOMBIE),c-=p.pzaGameConfig.getZombieLevel(i.pzaZombieEnum.ZOMBIE)}for(l.pzaLocalData.hasUnlockZombie(i.pzaZombieEnum.YETI_ZOMBIE)||9!=r.pzaGameState.curChapter||10!=r.pzaGameState.curPart||15!=a||(s.push(i.pzaZombieEnum.YETI_ZOMBIE),c-=p.pzaGameConfig.getZombieLevel(i.pzaZombieEnum.YETI_ZOMBIE)),a==this.maxWave&&a>=10&&this.zombieTypes.forEach(function(a){a!=i.pzaZombieEnum.ZOMBIE&&a!=i.pzaZombieEnum.YETI_ZOMBIE&&(s.push(a),c-=p.pzaGameConfig.getZombieLevel(a))});c>0;){var h=this.getRandomZombie(c,a,e,o,n);if(null==h)break;if(h==i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?e--:h==i.pzaZombieEnum.RED_GARGANTUAR&&a%10!=0&&n--,s.push(h),s.length>=50)break;c-=p.pzaGameConfig.getZombieLevel(h)}return s},a.prototype.getRandomZombie=function(a,t,e,o,n){var c=this;void 0===o&&(o=0),void 0===n&&(n=0);var u,d=[],h=[];this.zombieTypes.forEach(function(e){if(null!=e&&!(p.pzaGameConfig.isWaterZombie(e)&&t<c.minWaterWave)){var r=p.pzaGameConfig.getZombieConfig(e);if(!(null==r||0==r.refrshWeight||r.refreshLevel>a||r.refrshMinWave>t||o>0&&e==i.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&t%10!=0))if(d.push(e),o>0)if(e==i.pzaZombieEnum.RED_GARGANTUAR)h.push(t%10==0?6e3:1e3);else if(e==i.pzaZombieEnum.ZOMBIE){var l=r.refrshWeight;o>5&&(l=Math.max(l-180*(o-5),400)),h.push(l)}else e==i.pzaZombieEnum.ZOMBIE?(l=r.refrshWeight,o>5&&(l=Math.max(l-150*(o-5),1e3)),h.push(l)):h.push(r.refrshWeight);else h.push(r.refrshWeight)}}),e>0&&null!=(u=p.pzaGameConfig.getZombieConfig(i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM))&&u.refreshLevel<=a&&(d.push(i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),h.push(u.refrshWeight)),l.pzaLocalData.data.hasKillYeti&&r.pzaGameState.isSelectPlant&&null!=(u=p.pzaGameConfig.getZombieConfig(i.pzaZombieEnum.YETI_ZOMBIE))&&u.refreshLevel<=a&&(d.push(i.pzaZombieEnum.YETI_ZOMBIE),h.push(u.refrshWeight));var m=s.pzaUtil.getRandomIndexByWeight(h);return d[m]},a.prototype.getPreviewZombies=function(a){var t=[];if(null==this.zombieTypes||this.zombieTypes.length<=1){for(var e=0;e<a;e++)t.push(i.pzaZombieEnum.ZOMBIE);return t}for(e=0;e<this.zombieTypes.length;e++)t.push(this.zombieTypes[e]);if(t.length>=a)return t;var o=[],n=[];this.zombieTypes.forEach(function(a){if(null!=a&&a!=i.pzaZombieEnum.BUNGEE_ZOMBIE){var t=p.pzaGameConfig.getZombieConfig(a);null!=t&&0!=t.refrshWeight&&(o.push(a),n.push(t.refrshWeight))}});var r=t.length;for(e=0;e<a-r;e++){var l=s.pzaUtil.getRandomIndexByWeight(n);t.push(o[l])}return t},a.prototype.getRandomTombZombie=function(){var a=this,t=[i.pzaZombieEnum.ZOMBIE,i.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,i.pzaZombieEnum.CONE_HEAD_ZOMBIE],e=[];return t.forEach(function(t){if(a.zombieTypes.includes(t)){var o=p.pzaGameConfig.getZombieConfig(t);e.push(o.refrshWeight)}}),t[s.pzaUtil.getRandomIndexByWeight(e)]},a.prototype.getRandomDiveZombie=function(){var a=[i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE];null!=this.zombieTypes&&(this.zombieTypes.indexOf(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE)>=0&&a.push(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),this.zombieTypes.indexOf(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE)>=0&&a.push(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE));var t=[];return a.forEach(function(a){var e=p.pzaGameConfig.getZombieConfig(a);t.push(e.refrshWeight)}),a[s.pzaUtil.getRandomIndexByWeight(t)]},a.partConfigMap=new Map,a.PartDefaultPlantMap=new Map([["1-1",[n.pzaPlantEnum.PEA_SHOOTER]],["1-2",[n.pzaPlantEnum.PEA_SHOOTER,n.pzaPlantEnum.SUN_FLOWER]],["1-3",[n.pzaPlantEnum.PEA_SHOOTER,n.pzaPlantEnum.SUN_FLOWER,n.pzaPlantEnum.CHERRY_BOMB]],["1-4",[n.pzaPlantEnum.PEA_SHOOTER,n.pzaPlantEnum.SUN_FLOWER,n.pzaPlantEnum.CHERRY_BOMB,n.pzaPlantEnum.WALL_NUT]],["2-5",[n.pzaPlantEnum.POTATO_MINE,n.pzaPlantEnum.GRAVE_BUSTER,n.pzaPlantEnum.CHERRY_BOMB]],["7-5",[n.pzaPlantEnum.POTATO_MINE,n.pzaPlantEnum.GRAVE_BUSTER,n.pzaPlantEnum.CHERRY_BOMB]]]),a}();e.pzaGamePartConfig=c;var u=function(){function a(){}return a.getWaveRandomTime=function(){return s.pzaUtil.getRandomFloatNum(this.minWaveRandomTime,this.maxWaveRandomTime)},a.getPreRefreshHp=function(){return s.pzaUtil.getRandomFloatNum(this.preRefreshMinHp,this.preRefreshMaxHp)},a.initBaseWaveConfig=function(a){var t=a&&a[0];null!=t&&(this.firstWaveTime=parseFloat(t.first),this.initSunCount=parseInt(t.lnitial),this.minRefreshTime=parseFloat(t.interval),this.minWaveRandomTime=parseFloat(t.randommini),this.maxWaveRandomTime=parseFloat(t.randommax),this.preRefreshMinHp=parseFloat(t.advancemini),this.preRefreshMaxHp=parseFloat(t.advancemax),this.preRefreshTime=parseFloat(t.advance),this.activeRedTipTime=parseFloat(t.delay),this.redTipNextWaveTime=parseFloat(t.cd))},a.firstWaveTime=18,a.minRefreshTime=6,a.minWaveRandomTime=25,a.maxWaveRandomTime=31,a.preRefreshMinHp=.5,a.preRefreshMaxHp=.67,a.preRefreshTime=2,a.activeRedTipTime=45,a.redTipNextWaveTime=7.2,a.initSunCount=50,a}();e.pzaWaveConfig=u,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameConfig":"pzaGameConfig","./pzaLocalData":"pzaLocalData","./pzaUtil":"pzaUtil"}],pzaGamePropConfig:[function(a,t,e){"use strict";var o;cc._RF.push(t,"41a32ESnYpIMY3MttEXjBfJ","pzaGamePropConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRewardPropData=e.pzaGamePropConfig=e.pzaItemType=e.pzaGamePropEnum=void 0,function(a){a[a.PROP_CHERRY_BOMB=1]="PROP_CHERRY_BOMB",a[a.PROP_FREE_SUN=2]="PROP_FREE_SUN",a[a.PROP_AUTO_PICK=3]="PROP_AUTO_PICK",a[a.PROP_COIN=4]="PROP_COIN",a[a.PROP_PLANTE=5]="PROP_PLANTE",a[a.PROP_FERTILIZER=6]="PROP_FERTILIZER",a[a.PROP_FLOWER_POT=7]="PROP_FLOWER_POT",a[a.PROP_SECRET_FLOWER=8]="PROP_SECRET_FLOWER",a[a.PROP_BRONZE_FLOWE=9]="PROP_BRONZE_FLOWE",a[a.PROP_SILVER_FLOWE=10]="PROP_SILVER_FLOWE",a[a.PROP_GOLD_FLOWER=11]="PROP_GOLD_FLOWER",a[a.PROP_ACHIEVE=12]="PROP_ACHIEVE",a[a.PROP_POWER=13]="PROP_POWER",a[a.PROP_AD_TICKET=14]="PROP_AD_TICKET",a[a.RANDOM_GIFT=15]="RANDOM_GIFT",a[a.EQUIP_BELT=16]="EQUIP_BELT",a[a.ACTIVITY_COIN=17]="ACTIVITY_COIN",a[a.PROP_CHOCOLATES=999]="PROP_CHOCOLATES"}(o=e.pzaGamePropEnum||(e.pzaGamePropEnum={})),function(a){a[a.PROP=0]="PROP",a[a.PLANT=1]="PLANT",a[a.SKIN=2]="SKIN"}(e.pzaItemType||(e.pzaItemType={}));var n=function(){function a(a,t,e){this.propType=o.PROP_FREE_SUN,this.propName=null,this.propDesc=null,this.propType=a,this.propName=t,this.propDesc=e}return a.initPropConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=parseInt(t.id),n=new a(o,t.name,t.txt);e.PorpConfigMap.set(o,n)}})},a.PorpConfigMap=new Map,a}();e.pzaGamePropConfig=n;e.pzaRewardPropData=function(a,t,e){void 0===e&&(e=0),this.propType=o.PROP_FREE_SUN,this.propCount=0,this.limitGet=0,this.trunToCoin=0,this.targetID=0,this.propType=a,this.propCount=t,this.targetID=e},cc._RF.pop()},{}],pzaGameSmall:[function(a,t,e){"use strict";cc._RF.push(t,"d6478vg2ZdNxIDU+EJlpdbm","pzaGameSmall");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameSmall=void 0;var i=a("../Battle/Data/pzaZombieEnum"),r=a("../Battle/pzaGameState"),p=a("./pzaGameConfig"),l=a("./pzaGameNormal"),s=a("./pzaGamePartConfig"),c=a("./pzaUtil"),u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=r.pzaGameMode.SMALL_ZOMBIE,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u5c0f\u50f5\u5c38-"},t.prototype.isAutoCreateSun=function(){return!1},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1},t.prototype.createWave=function(t){a.prototype.createWave.call(this,t),t.nextWaveTime=p.pzaGameConfig.miniZombieWaveInterval;var e=s.pzaGamePartConfig.getPartConfig(r.pzaGameState.curChapter,r.pzaGameState.curPart);if(!(null==e||e.maxWave<t.wave)){e.maxWave==t.wave&&(t.lastWave=!0);var o=e.getRandomWaveZombie(t.wave,!0,window.pzaMapManager.getIceYCount(),0,r.pzaGameState.redLeft);if(null!=o){var n=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||n.indexOf(a.yIndex)>=0||n.push(a.yIndex)});for(var l=r.pzaGameState.map.getMapRow(),u=!0,d=[],h=[],m=0;m<l;m++)h.push(m);h.sort(function(){return Math.random()-.5});var f=0;o.forEach(function(a){var e=window.pzaMapManager.getRandomWayIndex(f,a,h);if(f++,a==i.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,d);if(null==o)return;d.push(o);var p=o.split("-"),l=t.createFixBlockZombieData(a,parseInt(p[0]),parseInt(p[1]));return t.createZombie(l),void t.curWaveZombieDatas.add(l)}a==i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&n.length>0&&(e=n.shift());var s=t.createZombieData(a,e);!u&&s.logicPos&&(s.logicPos.x+=c.pzaUtil.getRandomFloatNum(.2,1)*r.pzaGameState.map.getBlockWidth()),t.createZombie(s),t.curWaveZombieDatas.add(s),u=!1})}}},t.prototype.showBattlePropButtons=function(t){5==r.pzaGameState.curPart||10==r.pzaGameState.curPart?(t.freeSunNode.active=!1,t.cherryBombNode.active=!1,t.autoPickNode.active=!0,t.clearCDNode.active=!1):a.prototype.showBattlePropButtons.call(this,t)},t}(l.pzaGameNormal);e.pzaGameSmall=u,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameConfig":"pzaGameConfig","./pzaGameNormal":"pzaGameNormal","./pzaGamePartConfig":"pzaGamePartConfig","./pzaUtil":"pzaUtil"}],pzaGameState:[function(a,t,e){"use strict";cc._RF.push(t,"ec118RIzbVBC4zMJO2TojyG","pzaGameState"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameState=e.pzaSelectCardType=e.pzaGameMode=e.pzaGameTimeType=void 0;var o,n,i=a("../Common/pzaGameConfig"),r=a("../Common/pzaGamePartConfig"),p=a("../Common/pzaLocalData"),l=a("./Data/pzaPlantEnum");(function(a){a[a.DAY=1]="DAY",a[a.NIGHT=2]="NIGHT"})(o=e.pzaGameTimeType||(e.pzaGameTimeType={})),function(a){a[a.NORMAL=0]="NORMAL",a[a.BELT=1]="BELT",a[a.KNOCK_ZOMBIE=2]="KNOCK_ZOMBIE",a[a.SMALL_ZOMBIE=3]="SMALL_ZOMBIE",a[a.BANG_JAR=4]="BANG_JAR",a[a.ZOM_BOSS=5]="ZOM_BOSS",a[a.SURVIVAL=6]="SURVIVAL",a[a.SUR_ENDLESS=7]="SUR_ENDLESS",a[a.ZOMBIE_ENERMY=8]="ZOMBIE_ENERMY",a[a.ZOMBIE_ENDLESS=9]="ZOMBIE_ENDLESS",a[a.VASE=10]="VASE",a[a.VASE_ENDLESS=11]="VASE_ENDLESS",a[a.MINIGAME=12]="MINIGAME",a[a.KNOCK_ZOMBIE_MINIGAME=13]="KNOCK_ZOMBIE_MINIGAME",a[a.NORMAL_WEEKTWO=18]="NORMAL_WEEKTWO",a[a.ART_TEST=999]="ART_TEST"}(n=e.pzaGameMode||(e.pzaGameMode={})),function(a){a[a.SLOT_CARD=0]="SLOT_CARD",a[a.BELT_CARD=1]="BELT_CARD",a[a.DROP_CARD=2]="DROP_CARD",a[a.AD_CARD=3]="AD_CARD",a[a.SHOVE_CARD=4]="SHOVE_CARD"}(e.pzaSelectCardType||(e.pzaSelectCardType={}));var s=function(){function a(){}return Object.defineProperty(a,"curPart",{get:function(){return a._curPart},set:function(t){a._curPart=t},enumerable:!1,configurable:!0}),a.init=function(t,e,l,s,c,u,d){if(void 0===l&&(l=n.NORMAL),void 0===s&&(s=!1),void 0===c&&(c=0),void 0===u&&(u=0),this.endLessResetPlantCd=!0,this.gameMode=l,this.curChapter=t,this.mapId=d,this.curPart=e,this.midOut=!1,this.gamePause=!0,this.guideSunPause=!1,this.guideZombiePause=!1,this.selectCard=null,this.selectPlant=null,this.selectZombie=null,this.curImitaterPlant=null,this.cobCannon=null,this.adFreePlant=null,this.zombieWinShowMap=!1,this.finishShowWinShowMap=!1,this.zombieWinShowUI=!1,this.zombieWinInVase=!1,this.envPlantTip.clear(),this.pondPlantTip.clear(),this.specialPlantTip.clear(),this.gameSpecialTip.clear(),this.advancePlantMap.clear(),this.goldPlantMap.clear(),this.InflationPlantMap.clear(),this.tombTip=!1,this.cantPlantTip=!1,this.putZombieTipLeft=!1,this.putZombieTipRight=!1,this.sunLightCount=r.pzaWaveConfig.initSunCount,this.lossCar=!1,this.lossPlantCount=0,this.showSunUI=!0,this.grayPlantWarning=!1,this.cardIsMove=!1,this.bangCaring=!1,this.gameWin=!1,this.achieveArr=[],this.pickCoinCount=0,this.pickGoldCnt=0,this.twinFlowerCount=0,this.killZombieTeam=0,this.cobCannonCount=0,this.winterMelon=[],this.usePeaPlant=!1,this.useThrowPlant=!1,this.onlyShroomCofee=!0,this.useShroom=!1,this.onlyBoomPlant=!0,this.usePlanternBlover=!1,this.usePondPlant=!1,this.gameSpeed=1,this.redLeft=0,this.autoPickLeft=p.pzaLocalData.data.autoPickLeft,this.cdReduceValue=0,this.sunReduceValue=0,this.critValue=0,this.maxMarigold=5e3,this.starModeGameOver=!1,this.starWaveOverFail=!1,this.map=i.pzaGameConfig.chapterMapConfig.get(d),this.isSelectPlant=!1,this.lockPlants=[],this.partWin=!1,this.allZombieInvisible=!1,this.hasPlantCandy=!1,this.createPlantNoCD=!1,this.ableShowBuyGift=!0,this.sunLightCount=c,this.leftMoney=5e3,this.leftMoneyTime=2,this.moneyIsNotEnough=!1,0==c&&(this.sunLightCount=50),this.isNightScene=u,this.gameTimeType=u?o.NIGHT:o.DAY,a.isMiniMode()&&4==e&&(this.sunLightCount=c),a.isMiniMode()&&11==e&&(this.gameSpeed=2),a.gameMode==n.VASE_ENDLESS&&(a.sunLightCount=p.pzaLocalData.data.vaseEndLessSunCount,console.log("pzaGameState.sunLightCount",a.sunLightCount)),!s){4!=t&&9!=t||5!=e||(this.map=i.pzaGameConfig.chapterMapConfig.get(2)),this.newZombie=null;var h=r.pzaGamePartConfig.getPartConfig(t,e);null==h||null==h.newZombieType||p.pzaLocalData.hasUnlockZombie(h.newZombieType)||(this.newZombie=h.newZombieType),this.partStar=i.pzaGameConfig.getPartStar(t,e)}},a.getStorageSun=function(a){this.sunLightCount=a},a.endLessWin=function(){this.selectCard=null,this.selectPlant=null,this.selectZombie=null,this.cobCannon=null,this.pickCoinCount=0,this.pickGoldCnt=0,this.lossCar=!1,this.lossPlantCount=0,this.gameWin=!1,this.usePeaPlant=!1,this.useThrowPlant=!1,this.onlyShroomCofee=!0,this.useShroom=!1,this.onlyBoomPlant=!0,this.usePlanternBlover=!1,this.usePondPlant=!1,this.maxMarigold=5e3},a.restartGame=function(){this.leftMoney=5e3,this.leftMoneyTime=2,this.moneyIsNotEnough=!1,this.recordPlantData={}},a.survivalPartWin=function(){this.gamePause=!0,this.curPart++,a.endLessWin()},a.isSmallGame=function(){return a.gameMode==n.SMALL_ZOMBIE},a.isEndLess=function(){return a.gameMode==n.SUR_ENDLESS||a.gameMode==n.SURVIVAL||a.gameMode==n.ZOMBIE_ENDLESS},a.isRoofMode=function(){return!1},a.isSurvival=function(){return this.gameMode==n.SURVIVAL||this.gameMode==n.SUR_ENDLESS},a.isZombieMode=function(){return this.gameMode==n.ZOMBIE_ENERMY||this.gameMode==n.ZOMBIE_ENDLESS},a.isVaseMode=function(){return this.gameMode===n.VASE||this.gameMode===n.VASE_ENDLESS},a.isMiniMode=function(){return this.gameMode==n.MINIGAME||this.gameMode==n.KNOCK_ZOMBIE_MINIGAME||this.gameMode==n.KNOCK_ZOMBIE||this.gameMode==n.SMALL_ZOMBIE},a.judgeIsMini=function(a){return a==n.MINIGAME||a==n.KNOCK_ZOMBIE||a==n.SMALL_ZOMBIE},a.judgeIsVase=function(a){return a==n.VASE},a.judgeIsZombie=function(a){return a==n.ZOMBIE_ENERMY},a.isWatchStarMode=function(){return a.isMiniMode()&&14==a.curPart},a.isPsdhMode=function(){return a.isMiniMode()&&a.curPart<=2},a.showUnlockZombie=function(){this.newZombie=null},a.addPlant=function(a){if(i.pzaGameConfig.isAdvancePlant(a)){var t=0;this.advancePlantMap.has(a)&&(t=this.advancePlantMap.get(a)),this.advancePlantMap.set(a,t+1)}},a.deletPlant=function(a){if(!this.advancePlantMap.has(a))return!1;var t=this.advancePlantMap.get(a);return this.advancePlantMap.set(a,Math.max(t-1,0)),!0},a.getPlantPrice=function(t,e){if(void 0===e&&(e=!1),t==l.pzaPlantEnum.IMITATER&&(t=a.curImitaterPlant),t==l.pzaPlantEnum.XXLCandy&&this.hasPlantCandy)return 100;var o,n=i.pzaGameConfig.getPlantConfig(t),r=0;return null==n?r:(r=i.pzaGameConfig.isAdvancePlant(t)&&this.advancePlantMap.has(t)?e?n.price+50*this.advancePlantMap.get(t):Math.round((n.price+50*this.advancePlantMap.get(t))*(1-this.sunReduceValue)):e?n.price:Math.round(n.price*(1-this.sunReduceValue)),o=this.goldPlantMap.get(t)||0,r=e?n.price:n.price+100*o,this.sunDecreaseValue&&i.pzaGameConfig.getPlantConfig(t).rareLevel<4&&(r-=this.sunDecreaseValue)<0&&(r=0),this.sunDecreaseValueAllLevel&&(r-=this.sunDecreaseValueAllLevel)<0&&(r=0),r)},a.curChapter=1,a._curPart=1,a.firstPassCurPart=!1,a.isGameEnd=!1,a.isMenuShow=!1,a.midOut=!1,a.hasPlantSelect=!1,a.gamePause=!0,a.guideSunPause=!1,a.guideZombiePause=!1,a.selectCard=null,a.selectPlant=null,a.selectIdx=0,a.selectZombie=null,a.curImitaterPlant=null,a.cobCannon=null,a.adFreePlant=null,a.sunLightCount=50,a.pickSunCount=0,a.sunMoveUIPos=null,a.coinMoveUIPos=null,a.speedUIPos=null,a.guideSunPos=null,a.guideAutoPickPos=null,a.guideCherryPos=null,a.gameTimeType=o.DAY,a.gameMode=n.NORMAL,a.newZombie=null,a.zombieWinShowMap=!1,a.finishShowWinShowMap=!1,a.zombieWinShowUI=!1,a.zombieWinInVase=!1,a.partStar=3,a.lossCar=!1,a.lossPlantCount=0,a.lossStarCount=6,a.showSunUI=!0,a.envPlantTip=new Set,a.pondPlantTip=new Set,a.specialPlantTip=new Set,a.gameSpecialTip=new Set,a.tombTip=!1,a.cantPlantTip=!1,a.grayPlantWarning=!1,a.cardIsMove=!1,a.putZombieTipLeft=!1,a.putZombieTipRight=!1,a.bangCaring=!1,a.gameWin=!1,a.autoPickLeft=0,a.autoPickLock=!1,a.hadRevived=!1,a.achieveArr=[],a.pickCoinCount=0,a.pickGoldCnt=0,a.twinFlowerCount=0,a.killZombieTeam=0,a.cobCannonCount=0,a.winterMelon=[],a.usePeaPlant=!1,a.useThrowPlant=!1,a.onlyShroomCofee=!0,a.useShroom=!1,a.onlyBoomPlant=!0,a.usePlanternBlover=!1,a.usePondPlant=!1,a.gameSpeed=1,a.survivalConfig=null,a.zombieEndlessPart=1,a.zombiePuffCount=0,a.map=null,a.redLeft=0,a.advancePlantMap=new Map,a.goldPlantMap=new Map,a.InflationPlantMap=new Map,a.cdReduceValue=0,a.sunReduceValue=0,a.createPlantNoCD=!1,a.sunDecreaseValue=0,a.sunDecreaseValueAllLevel=0,a.hasPlantCandy=!1,a.critValue=0,a.maxMarigold=5e3,a.isInHandBookView=!1,a.starModeGameOver=!1,a.starWaveOverFail=!1,a.reviveViewBtnState=1,a.weekTwoInitPlants=[],a.lockPlants=[],a.miniGameIsClickBack=!1,a.isSelectPlant=!1,a.curTryPlantIndex=null,a.inGameTime=0,a.inGameTimeAcc=0,a.hasReportAliveOnly=!1,a.partWin=!1,a.allZombieInvisible=!1,a.adCherryBoomDmg=5e5,a.endLessResetPlantCd=!0,a.setBgmCount=0,a.ableShowBuyGift=!1,a.mapId=0,a.isNightScene=0,a.leftMoney=5e3,a.leftMoneyTime=2,a.moneyIsNotEnough=!1,a.recordPlantData={},a.scrollviewPos=cc.v2(0,0),a.phbLeftDay=0,a.phbPartId=0,a.phbLastRank=0,a.testUserId="_000DFmwtc490IfA15oeyXGHzCrLp572zu23",a.bpResetLeftDay=0,a.bpRewardPlantId=0,a.hasJoinChallenge=!1,a.isShowSpePlant=!1,a}();e.pzaGameState=s,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaLocalData":"pzaLocalData","./Data/pzaPlantEnum":"pzaPlantEnum"}],pzaGameSurEndless:[function(a,t,e){"use strict";cc._RF.push(t,"3a13fbeYHtM9JhoujbIjtUz","pzaGameSurEndless");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameSurEndless=void 0;var i=a("../Battle/Data/pzaBattleData"),r=a("../Battle/pzaGameState"),p=a("../View/pzaCommonMask"),l=a("../utils/pzaChannel"),s=a("../utils/pzakc"),c=a("./pzaGameManager"),u=a("./pzaGameSurvival"),d=a("./pzaLocalData"),h=a("./pzaRankMgr"),m=a("./pzaStatisticsMgr"),f=a("./pzaSurvivalConfig"),z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=r.pzaGameMode.SUR_ENDLESS,t}return n(t,a),t.prototype.isEndless=function(){return!0},t.prototype.getRankKey=function(){var a=l.pzaChannel.instance().channel;return"wx"!==a?a+"endless_rank_":"endless_rank_"},t.prototype.getGameModeName=function(){return"\u751f\u5b58\u65e0\u5c3d-"},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u751f\u5b58\u6a21\u5f0f\u201d\uff0c"+["\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876"][r.pzaGameState.curChapter-1]+"(\u65e0\u5c3d)\u7b2c"+(r.pzaGameState.curPart-1)+"\u9762\u65d7\u5e1c\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=r.pzaGameState.survivalConfig;if(null!=t){a.maxWave=t.maxWave;for(var e=Math.floor(a.maxWave/10),o=0;o<a.partFlags.length;o++){var n=a.partFlags[o];o+1>e?n.active=!1:(n.active=!0,n.setPosition(-315*(o+1)/e-30,42))}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0;var i="\u751f\u5b58\u6a21\u5f0f\uff1a"+["\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876"][r.pzaGameState.curChapter-1]+"(\u65e0\u5c3d)";r.pzaGameState.curPart>1&&(i+="-\u5b8c\u6210"+(r.pzaGameState.curPart-1)+"\u9762\u65d7\u5e1c"),a.partLabel.string=i}},t.prototype.beforeLoad=function(a,t){r.pzaGameState.partStar=0,r.pzaGameState.survivalConfig=f.pzaSurvivalConfig.createEndlessConfig(a,t),r.pzaGameState.redLeft=r.pzaGameState.survivalConfig.redLimit,d.pzaLocalData.gameStartTimeStamp=Date.now();var e=100+a+5;m.pzaStatisticsMgr.sendLevelEvent(a+5,2,0,0,r.pzaGameMode.SUR_ENDLESS),s.default.eventReport(e+"\u5173\u5361\u8fdb\u5165")},t.prototype.getZombieTypeArr=function(a){return f.pzaSurvivalConfig.getAllEndlessZombies(a)},t.prototype.readData=function(a){var t=d.pzaLocalBattleData.data.endlessBattleData[a-1];i.pzaBattleData.readData(t)},t.prototype.gameRestart=function(){r.pzaGameState.hadRevived=!1,d.pzaLocalBattleData.clearEndlessBattleData(r.pzaGameState.curChapter),this.loadAndStart(r.pzaGameState.curChapter,1)},t.prototype.updatePartProcess=function(t){a.prototype.updatePartProcess.call(this,t);var e=Math.floor(window.pzazombieManager.wave/10)-1;if(!(e<0||e>2)){var o=t.partFlags[e];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}},t.prototype.partFail=function(){a.prototype.partFail.call(this),d.pzaLocalData.passSurvivalEndless(r.pzaGameState.curChapter,r.pzaGameState.curPart-1),d.pzaLocalBattleData.clearEndlessBattleData(r.pzaGameState.curChapter);var t=0;d.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-d.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3);var o=100+r.pzaGameState.curPart+5;m.pzaStatisticsMgr.sendLevelEvent(r.pzaGameState.curPart+5,0,t,e,r.pzaGameMode.SUR_ENDLESS),s.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),d.pzaLocalData.hasUseProp=!1},t.prototype.onZombieDeath=function(a,t,e){var o=this;if(e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)){var n=0;d.pzaLocalData.hasUseProp&&(n=1);var i=Date.now()-d.pzaLocalData.gameStartTimeStamp;i=Math.ceil(i/1e3);var l=100+r.pzaGameState.curPart+5;m.pzaStatisticsMgr.sendLevelEvent(r.pzaGameState.curPart+5,0,n,i,r.pzaGameMode.SUR_ENDLESS),s.default.eventReport(l+"\u5173\u5361\u6210\u529f"),d.pzaLocalData.hasUseProp=!1,c.pzaGameManager.getCurrentGame().checkAchieve(!1),p.pzaCommonMask.showMask(),h.pzaRankMgr.uploadEndlssScore(r.pzaGameState.curChapter,r.pzaGameState.curPart,function(a){p.pzaCommonMask.hideMask(),d.pzaLocalData.passSurvivalEndless(r.pzaGameState.curChapter,r.pzaGameState.curPart),o.nextPart(!1,a)}),d.pzaLocalData.bpEndlessPassPart(r.pzaGameState.curPart)}},t.prototype.showPreviewTip=function(a,t,e){a.word.string="\u751f\u5b58\u6a21\u5f0f\uff1a"+a.survivalPreviewTips[t-1]+"(\u65e0\u5c3d)",e>1?(a.flagWord.node.active=!0,a.flagWord.string=e-1+"\u9762\u65d7\u5e1c\u5b8c\u6210"):a.flagWord.node.active=!1},t}(u.pzaGameSurvival);e.pzaGameSurEndless=z,cc._RF.pop()},{"../Battle/Data/pzaBattleData":"pzaBattleData","../Battle/pzaGameState":"pzaGameState","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameManager":"pzaGameManager","./pzaGameSurvival":"pzaGameSurvival","./pzaLocalData":"pzaLocalData","./pzaRankMgr":"pzaRankMgr","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaSurvivalConfig":"pzaSurvivalConfig"}],pzaGameSurvival:[function(a,t,e){"use strict";cc._RF.push(t,"25b1fp6ux1Drb6N1Vwwqh7X","pzaGameSurvival");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameSurvival=void 0;var i=a("../Battle/Data/pzaBattleData"),r=a("../Battle/Data/pzaDropType"),p=a("../Battle/Data/pzaZombieEnum"),l=a("../Battle/pzaEffectManager"),s=a("../Battle/pzaGameState"),c=a("../Load/pzaPreLoadManager"),u=a("../View/Battle/pzaPlantSelectView"),d=a("../View/pzaCommonMask"),h=a("../View/pzaWarningView"),m=a("../utils/pzaChannel"),f=a("../utils/pzakc"),z=a("./pzaGameBase"),y=a("./pzaGameManager"),g=a("./pzaGamePartConfig"),b=a("./pzaLocalData"),v=a("./pzaOperationMgr"),P=a("./pzaRankMgr"),D=a("./pzaSoundManager"),S=a("./pzaStatisticsMgr"),C=a("./pzaSurvivalConfig"),_=a("./pzaTipManager"),E=a("./pzaUIManager"),M=a("./pzaUtil"),w=a("./pzaWorldEventManager"),T=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=s.pzaGameMode.SURVIVAL,t.isStopCreateSun=!1,t.stopCreateSunTime=0,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u751f\u5b58\u6a21\u5f0f-"},t.prototype.initMapPlantZombie=function(a,t){var e=C.pzaSurvivalConfig.getSurvivaliConfig(a,t);window.pzaMapManager.init(a,t,e.mapId),window.pzaplantManager.init(),window.pzazombieManager.init()},t.prototype.initGameState=function(a,t){var e,o=C.pzaSurvivalConfig.getSurvivaliConfig(a,t);e=o.initSun;var n=o.isnight;s.pzaGameState.init(a,t,this.gameMode,this.skipPartStar(),e,n,o.mapId),this.initMapPlantZombie(a,t)},t.prototype.getZombieTypeArr=function(a){return C.pzaSurvivalConfig.getAllZombies(a)},t.prototype.beforeLoad=function(a,t){s.pzaGameState.partStar=0,s.pzaGameState.survivalConfig=C.pzaSurvivalConfig.getSurvivaliConfig(a,t);var e=100+a;S.pzaStatisticsMgr.sendLevelEvent(a+5,2,0,0,s.pzaGameMode.SURVIVAL),f.default.eventReport(e+"\u5173\u5361\u8fdb\u5165")},t.prototype.readData=function(a){var t=b.pzaLocalBattleData.data.survivalBattleData[a-1];i.pzaBattleData.readData(t)},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=s.pzaGameState.survivalConfig;if(null!=t){a.maxWave=t.maxWave;for(var e=Math.floor(a.maxWave/10),o=0;o<a.partFlags.length;o++){var n=a.partFlags[o];o+1>e?n.active=!1:(n.active=!0,n.setPosition(-315*(o+1)/e-30,42))}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0;var i="\u751f\u5b58\u6a21\u5f0f\uff1a"+["\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876"][s.pzaGameState.curChapter-1];s.pzaGameState.curPart>1&&(i+="-\u5b8c\u6210"+(s.pzaGameState.curPart-1)+"\u9762\u65d7\u5e1c"),a.partLabel.string=i}},t.prototype.updatePartProcess=function(t){if(a.prototype.updatePartProcess.call(this,t),1!=s.pzaGameState.curChapter||2!=s.pzaGameState.curPart&&3!=s.pzaGameState.curPart&&5!=s.pzaGameState.curPart){var e=Math.floor(window.pzazombieManager.wave/10)-1;if(!(e<0||e>2)){var o=t.partFlags[e];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}}else if(t.maxWave==window.pzazombieManager.wave){var n=t.partFlags[0];cc.Tween.stopAllByTarget(n),cc.tween(n).to(.2,{y:72}).start()}},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.gameProp.node.active=!0,t.freePlantNode.active=!0,t.shovelShowNode.active=!0,t.speedBtn.active=!0,t.sunUIShowNode.active=!0},t.prototype.getSurvivalSunState=function(){return this.isStopCreateSun},t.prototype.refreshNextWave=function(t,e){if(a.prototype.refreshNextWave.call(this,t,e),t.lastWave)return this.stopCreateSunTime+=e,void(this.stopCreateSunTime>=60&&(this.isStopCreateSun=!0));this.stopCreateSunTime=0,this.isStopCreateSun=!1;var o=!1;if(s.pzaGameState.gameMode==s.pzaGameMode.SUR_ENDLESS&&(o=!1),(t.wave+1)%10==0||o){if(!t.hasShowRedTip){if(t.zombieMap.size<=0||t.curWaveTime>=g.pzaWaveConfig.activeRedTipTime){var n=s.pzaGameState.survivalConfig;null!=n&&n.maxWave==t.wave+1&&s.pzaGameState.gameMode==s.pzaGameMode.SURVIVAL&&5==s.pzaGameState.curPart&&(o=!0),t.showBigWaveTip(o,!1)}return}}else if(0!=t.wave&&t.nextWaveTime>g.pzaWaveConfig.preRefreshTime&&t.getCurWaveLeftHp()<=t.preRefreshHp)return void(t.nextWaveTime=g.pzaWaveConfig.preRefreshTime);t.curWaveTime<g.pzaWaveConfig.minRefreshTime||t.nextWaveTime>0||this.createWave(t)},t.prototype.createWave=function(t){a.prototype.createWave.call(this,t),1==t.wave&&D.pzaSoundManager.playAudio("awooga"),t.nextWaveTime=g.pzaWaveConfig.getWaveRandomTime();var e=s.pzaGameState.survivalConfig;if(!(null==e||e.maxWave<t.wave)){e.maxWave==t.wave&&(t.lastWave=!0);var o=s.pzaGameState.curPart,n=e.getRandomWaveZombie(t.wave,!0,window.pzaMapManager.getIceYCount(),o,s.pzaGameState.redLeft);if(null!=n){var i=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||i.indexOf(a.yIndex)>=0||i.push(a.yIndex)});for(var r=s.pzaGameState.map.getMapRow(),l=!0,c=[],u=[],d=0;d<r;d++)u.push(d);u.sort(function(){return Math.random()-.5});var h=0;n.forEach(function(a){var e=window.pzaMapManager.getRandomWayIndex(h,a,u);if(h++,a==p.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,c);if(null==o)return;c.push(o);var n=o.split("-"),r=t.createFixBlockZombieData(a,parseInt(n[0]),parseInt(n[1]));return t.createZombie(r),void t.curWaveZombieDatas.add(r)}a==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&i.length>0&&(e=i.shift());var d=t.createZombieData(a,e);!l&&d.logicPos&&(d.logicPos.x+=M.pzaUtil.getRandomFloatNum(.2,1)*s.pzaGameState.map.getBlockWidth()),t.createZombie(d),t.curWaveZombieDatas.add(d),l=!1}),t.lastWave&&(this.createTombWaterWaveData(t),t.lastWayZombieTime=2,2==s.pzaGameState.curChapter&&window.pzaMapManager.randomCreateTomb(1))}}},t.prototype.isLastWave=function(a){return a.wave===s.pzaGameState.survivalConfig.maxWave},t.prototype.onZombieDeath=function(a,t,e){if(e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)){var o=0;b.pzaLocalData.hasUseProp&&(o=1);var n=Date.now()-b.pzaLocalData.gameStartTimeStamp;n=Math.ceil(n/1e3);var i=100+s.pzaGameState.curChapter;S.pzaStatisticsMgr.sendLevelEvent(s.pzaGameState.curChapter,1,o,n,s.pzaGameMode.SURVIVAL),f.default.eventReport(i+"\u5173\u5361\u6210\u529f"),b.pzaLocalData.hasUseProp=!1,5==s.pzaGameState.curPart?(y.pzaGameManager.passPart(t.logicPos),b.pzaLocalBattleData.clearSurvivalBattleData(s.pzaGameState.curChapter)):(y.pzaGameManager.getCurrentGame().checkAchieve(!1),this.nextPart())}},t.prototype.showPreviewTip=function(a,t,e){a.word.string="\u751f\u5b58\u6a21\u5f0f\uff1a"+a.survivalPreviewTips[t-1],e>1?(a.flagWord.node.active=!0,a.flagWord.string=e-1+"\u9762\u65d7\u5e1c\u5b8c\u6210"):a.flagWord.node.active=!1},t.prototype.clickSelectPartInFailView=function(){if(b.pzaLocalData.data.preOpenSurvival)return b.pzaLocalData.data.preOpenSurvival=!1,b.pzaLocalData.addDirty("preOpenSurvival"),void E.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null);E.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.SURVIVAL_VIEW,function(){E.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.winDrop=function(){var a=r.pzaDropType.COIN_PACKAGE;return!b.pzaLocalData.data.preOpenSurvival&&b.pzaLocalData.passSurvival(s.pzaGameState.curChapter)&&(a=r.pzaDropType.SURVIVAL_TROPHY),"my"===m.pzaChannel.instance().channel&&m.pzaChannel.instance().getChannel().actSubmit(),a},t.prototype.showPassUiNoStar=function(){b.pzaLocalData.data.preOpenSurvival?(b.pzaLocalData.data.preOpenSurvival=!1,b.pzaLocalData.addDirty("preOpenSurvival"),E.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null),v.pzaOperationMgr.showCreativeVaseModeGift(null)):E.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.SURVIVAL_VIEW,function(){v.pzaOperationMgr.showCreativeVaseModeGift(null),E.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.beforeGameStart=function(a){D.pzaSoundManager.playBgm(D.pzaBGMName.LOADING),d.pzaCommonMask.showMask(),5!==a&&10!==a&&l.pzaEffectManager.createGroveEffect()},t.prototype.gameStart=function(t,e){var o=this;a.prototype.resetTryPlant.call(this),this.beforeGameStart(t,e);var n=this.gameMode===s.pzaGameMode.SURVIVAL?b.pzaLocalBattleData.data.survivalBattleData[t-1]:b.pzaLocalBattleData.data.endlessBattleData[t-1];if(n)return window.pzaMapManager.initMapPos(!1),window.pzaplantManager.recoverSurvivalPlant(n),window.pzaMapManager.recoverMap(n),0==n.state?(y.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(u.pzaPlantSelectView);t&&t.survivalInit(n.selectPlants,null)}),window.pzaMapManager.openBattleUI()):1==n.state&&_.pzaTipManager.showPreviewTip(s.pzaGameState.curChapter,s.pzaGameState.curPart+1,s.pzaGameState.gameMode,null),void E.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.WARNING_VIEW,function(a){var i=a&&a.getComponent(h.pzaWarningView);i&&i.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){0==n.state&&(window.pzaMapManager.closeBattleUI(),window.pzaMapManager.fogEnter(function(){l.pzaEffectManager.createReadyWord(function(){o.playBgm(),d.pzaCommonMask.hideMask(),s.pzaGameState.gamePause=!1,window.pzaMapManager.openBattleUI(),w.pzaWorldEventManager.triggerEvent(w.pzaWorldEventType.GAME_RESUME,null)})})),1==n.state&&o.nextPart(!0)},function(){n.gameMode==s.pzaGameMode.SURVIVAL?b.pzaLocalBattleData.clearSurvivalBattleData(n.chapter):n.gameMode==s.pzaGameMode.SUR_ENDLESS&&b.pzaLocalBattleData.clearEndlessBattleData(n.chapter),y.pzaGameManager.removeBattleUI(),w.pzaWorldEventManager.triggerEvent(w.pzaWorldEventType.GAME_OVER,null),o.firstStart(t,e)},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,b.pzaLocalData.endLessPowerCost,!0,2)});this.normalStartGameCall(t,e)},t.prototype.gameRestart=function(){s.pzaGameState.hadRevived=!1,b.pzaLocalBattleData.clearSurvivalBattleData(s.pzaGameState.curChapter),this.loadAndStart(s.pzaGameState.curChapter,1)},t.prototype.gameRecover=function(a,t){var e=this;E.pzaUIManager.removeBoardUI(),s.pzaGameState.midOut=!1,E.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.WARNING_VIEW,function(o){var n=o&&o.getComponent(h.pzaWarningView);n&&n.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){s.pzaGameState.hasPlantSelect?D.pzaSoundManager.playBgm(D.pzaBGMName.PRE_BGM):(s.pzaGameState.gamePause=!1,M.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed),w.pzaWorldEventManager.triggerEvent(w.pzaWorldEventType.GAME_RESUME,null),e.playBgm())},function(){var o=function(){y.pzaGameManager.removeBattleUI(),w.pzaWorldEventManager.triggerEvent(w.pzaWorldEventType.GAME_OVER,null),e.firstStart(a,t)};e.gameMode==s.pzaGameMode.SURVIVAL?b.pzaLocalBattleData.clearSurvivalBattleData(s.pzaGameState.curChapter):e.gameMode==s.pzaGameMode.SUR_ENDLESS&&b.pzaLocalBattleData.clearEndlessBattleData(s.pzaGameState.curChapter),s.pzaGameState.gameMode==s.pzaGameMode.SUR_ENDLESS?P.pzaRankMgr.queryMyRank(s.pzaGameState.curChapter,o):o()},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,b.pzaLocalData.endLessPowerCost,!0,2)})},t.prototype.partFail=function(){a.prototype.partFail.call(this),b.pzaLocalBattleData.clearSurvivalBattleData(s.pzaGameState.curChapter);var t=0;b.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-b.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3);var o=100+s.pzaGameState.curChapter;S.pzaStatisticsMgr.sendLevelEvent(s.pzaGameState.curChapter,0,t,e,s.pzaGameMode.SURVIVAL),f.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),b.pzaLocalData.hasUseProp=!1},t.prototype.nextPart=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null),M.pzaUtil.changeGameSpeed(1),s.pzaGameState.gameWin=!0,d.pzaCommonMask.showMask();var o=function(){d.pzaCommonMask.hideMask(),s.pzaGameState.survivalPartWin(),e.gameMode===s.pzaGameMode.SURVIVAL?s.pzaGameState.survivalConfig=C.pzaSurvivalConfig.getSurvivaliConfig(s.pzaGameState.curChapter,s.pzaGameState.curPart):s.pzaGameState.survivalConfig=C.pzaSurvivalConfig.createEndlessConfig(s.pzaGameState.curChapter,s.pzaGameState.curPart),window.pzaMapManager.previewMap(function(){y.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){d.pzaCommonMask.hideMask();var t=a&&a.getComponent(u.pzaPlantSelectView);s.pzaGameState.cardIsMove=!1,t&&t.survivalInit(null,function(){var a=i.pzaBattleData.saveData(0);s.pzaGameState.gameMode==s.pzaGameMode.SURVIVAL?b.pzaLocalBattleData.saveSurvivalBattleData(a):s.pzaGameState.gameMode==s.pzaGameMode.SUR_ENDLESS&&b.pzaLocalBattleData.saveEndlessBattleData(a),d.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.fogEnter(function(){l.pzaEffectManager.createReadyWord(function(){e.playBgm(),d.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),t&&t.initPlant(),s.pzaGameState.gamePause=!1,w.pzaWorldEventManager.triggerEvent(w.pzaWorldEventType.GAME_RESUME,null),M.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed)})})})})})},!0)};if(a)o();else{var n=i.pzaBattleData.saveData(1);s.pzaGameState.gameMode==s.pzaGameMode.SURVIVAL?b.pzaLocalBattleData.saveSurvivalBattleData(n):s.pzaGameState.gameMode==s.pzaGameMode.SUR_ENDLESS&&b.pzaLocalBattleData.saveEndlessBattleData(n);var r="\u66f4\u591a\u50f5\u5c38\u6765\u88ad\uff01";null!=t&&(r+="\n"+t),"my"===m.pzaChannel.instance().channel&&m.pzaChannel.instance().getChannel().actSubmit();var p=!1;_.pzaTipManager.showGameTip(r,function(){p=!0,e.showGameTipNext(),o()}),setTimeout(function(){p||!e||s.pzaGameState.gamePause||(p=!0,e.showGameTipNext(),o(),_.pzaTipManager.hideGuideTip())},6e3)}},t.prototype.showGameTipNext=function(){w.pzaWorldEventManager.triggerEvent(w.pzaWorldEventType.CLOSE_REDTIP,null),w.pzaWorldEventManager.triggerEvent(w.pzaWorldEventType.GAME_PAUSE,null),window.pzaMapManager.closeBattleUI(),window.pzaMapManager.removeFog(),window.pzaMapManager.removeAllIceGround(),y.pzaGameManager.removeBattleUI(),d.pzaCommonMask.showMask(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.init(),D.pzaSoundManager.clearAllLoopAudio()},t.prototype.partWin=function(a,t){void 0===a&&(a=!1),void 0===t&&(t=null),w.pzaWorldEventManager.triggerEvent(w.pzaWorldEventType.GAME_OVER,null),y.pzaGameManager.removeBattleUI(),this.showPassUiNoStar(),m.pzaChannel.instance().showInter(!0),f.default.eventReport("\u751f\u5b58\u6a21\u5f0f-"+s.pzaGameState.curChapter+"\u6210\u529f")},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u751f\u5b58\u6a21\u5f0f\u201d\uff0c"+["\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876"][s.pzaGameState.curChapter-1]+"\u7b2c"+s.pzaGameState.curPart+"\u9762\u65d7\u5e1c\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t}(z.pzaGameBase);e.pzaGameSurvival=T,cc._RF.pop()},{"../Battle/Data/pzaBattleData":"pzaBattleData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameBase":"pzaGameBase","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaOperationMgr":"pzaOperationMgr","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaSurvivalConfig":"pzaSurvivalConfig","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameTime:[function(a,t,e){"use strict";cc._RF.push(t,"6596eId2FRLVqFNHXeYVQ+4","pzaGameTime");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameTime=void 0;var r=a("../Battle/pzaGameState"),p=a("../utils/pzaChannel"),l=a("./pzaLocalData"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.saveRemoteInterval=0,t.gameInterval=0,t}return n(t,a),t.prototype.update=function(a){if(this.saveRemoteInterval+=a,this.gameInterval+=a,!l.pzaLocalData.gardenGuiding&&l.pzaLocalData.hasDirty&&l.pzaLocalData.localSaveData(),!p.pzaChannel.isConfRemote){if(this.saveRemoteInterval>600){var t=p.pzaChannel.instance().getChannel();p.pzaChannel.saveToRemote(t.channelUserId,l.pzaLocalData.data),this.saveRemoteInterval=0}this.gameInterval>3&&(r.pzaGameState.setBgmCount=0,this.gameInterval=0)}},i([c],t)}(cc.Component));e.pzaGameTime=u,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../utils/pzaChannel":"pzaChannel","./pzaLocalData":"pzaLocalData"}],pzaGameTouch:[function(a,t,e){"use strict";cc._RF.push(t,"ac5c4atzNFKvqhf2EX+LIiv","pzaGameTouch");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameTouch=void 0;var r=cc._decorator,p=r.ccclass,l=(r.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node._touchListener.setSwallowTouches(!1)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.touchStart=function(a){this.touch(a,!0)},t.prototype.touchMove=function(a){this.touch(a,!1)},t.prototype.touch=function(a,t){var e=a&&a.getLocation();if(null!=e){var o=this.node.convertToNodeSpaceAR(e),n=!1;window.pzaplantManager.AllSunLight.forEach(function(a){a&&a.node&&(Math.abs(a.node.x-o.x)>50||Math.abs(a.node.y-o.y)>50||(a.clickSun(),n=!0))}),window.pzaMapManager.DropCoinSet.forEach(function(a){a&&a.node&&(Math.abs(a.node.x-o.x)>35||Math.abs(a.node.y-o.y)>35||(a.clickCoin(),n=!0))}),t&&n&&this.node._touchListener.setSwallowTouches(!0)}},t.prototype.touchEnd=function(){this.node._touchListener.setSwallowTouches(!1)},t.prototype.setSwllowTouch=function(){null!=this.node._touchListener&&this.node._touchListener.setSwallowTouches(!1)},i([p],t)}(cc.Component));e.pzaGameTouch=l,cc._RF.pop()},{}],pzaGameVaseEndless:[function(a,t,e){"use strict";cc._RF.push(t,"47c3chsWYZLA6hDmnpsTMNx","pzaGameVaseEndless");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameVaseEndless=void 0;var i=a("../Battle/Data/pzaDropType"),r=a("../Battle/Data/pzaPlantEnum"),p=a("../Battle/pzaEffectManager"),l=a("../Battle/pzaGameState"),s=a("../Load/pzaPreLoadManager"),c=a("../View/Battle/pzaBattleUpView"),u=a("../View/Battle/pzaPlantSelectView"),d=a("../View/pzaCommonMask"),h=a("../utils/pzaChannel"),m=a("../utils/pzakc"),f=a("./pzaCollisionManager"),z=a("./pzaGameManager"),y=a("./pzaGameVase"),g=a("./pzaLocalData"),b=a("./pzaNodeManager"),v=a("./pzaRankMgr"),P=a("./pzaSoundManager"),D=a("./pzaStatisticsMgr"),S=a("./pzaTipManager"),C=a("./pzaUtil"),_=a("./pzaWorldEventManager"),E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.endLessRound=0,t.changeRound=10,t.gameMode=l.pzaGameMode.VASE_ENDLESS,t.myRank=0,t.nextPartTimer=null,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u7834\u7f50\u8005\u65e0\u5c3d-"},t.prototype.getRankKey=function(){return"vase_endless_rank"},t.prototype.isEndless=function(){return!0},t.prototype.initPartProcess=function(a){a.partLabel.string=this.getConf(l.pzaGameState.curPart).name+(this.endLessRound>1?"-\u8bb0\u5f55\uff1a"+this.endLessRound:""),a.partProNode.active=!1,a.zombieHeadNode.active=!1},t.prototype.loadAndStart=function(t,e){this.endLessRound=g.pzaLocalData.data.vaseEndLessLevelIndex,l.pzaGameState.sunLightCount=g.pzaLocalData.data.vaseEndLessSunCount,a.prototype.loadAndStart.call(this,t,e)},t.prototype.gameStart=function(t,e){a.prototype.resetTryPlant.call(this),g.pzaLocalData.gameStartTimeStamp=Date.now();var o=300+e;D.pzaStatisticsMgr.sendLevelEvent(e,2,0,0,l.pzaGameMode.VASE_ENDLESS),m.default.eventReport(o+"\u5173\u5361\u8fdb\u5165"),d.pzaCommonMask.hideMask(),l.pzaGameState.hadRevived=!1;var n=this;v.pzaRankMgr.queryLeaderBoardRank(v.pzaRankMgr.Vase_Rank_Key,function(a){n.endLessRound=g.pzaLocalData.data.vaseEndLessLevelIndex,console.log("self.endLessRound :",n.endLessRound),g.pzaLocalData.addDirty("vaseEndLessLevelIndex"),l.pzaGameState.showSunUI=!1,n.myRank=a,n.startCall(),b.pzaNodeManager.getBattleUINode().getChildByName("BattleUpUI").getComponent(c.pzaBattleUpView).partLabel.string=n.getConf(l.pzaGameState.curPart).name+(n.endLessRound>0?"-\u8bb0\u5f55\uff1a"+n.endLessRound:""),l.pzaGameState.sunLightCount>0&&(window.pzaMapManager.showSunUI(),z.pzaGameManager.showBattleUI(s.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(u.pzaPlantSelectView);t&&t.init([r.pzaPlantEnum.CHERRY_BOMB],function(){t&&t.initPlant()})}))})},t.prototype.gameRestart=function(){this.endLessRound=0,g.pzaLocalData.data.vaseEndLessLevelIndex=0,g.pzaLocalData.data.vaseEndLessSunCount=0,g.pzaLocalData.addDirty("vaseEndLessLevelIndex","vaseEndLessSunCount"),a.prototype.gameRestart.call(this)},t.prototype.showTip=function(a){var t=this;void 0===a&&(a=null),C.pzaUtil.changeGameSpeed(1),l.pzaGameState.gameWin=!0;var e="\u6311\u6218\u66f4\u591a\u7f50\u5b50\uff01\n\u5df2\u5b8c\u6210"+this.endLessRound+"\u5173",o=g.pzaLocalData.data.vaseFlagCount;o&&(e+="\n\u5386\u53f2\u6700\u9ad8\u8bb0\u5f55\uff1a"+o,this.myRank&&this.myRank>0&&(e+=" \u5168\u670d\u6392\u540d"+this.myRank)),null!=a&&(e+="\n"+a),this.nextPartTimer=setInterval(function(){t.doNextPart()},4e3),S.pzaTipManager.showGameTip(e,null)},t.prototype.winDrop=function(){return null},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u76ca\u667a\u6a21\u5f0f\u201d\uff0c"+this.getConf(this.endLessId).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t.prototype.partWin=function(a,t){this.nextPart(a,t),"my"===h.pzaChannel.instance().channel&&h.pzaChannel.instance().getChannel().actSubmit()},t.prototype.doNextPart=function(){clearInterval(this.nextPartTimer),console.log("\u7834\u7f50\u8005\u4e0b\u4e00\u6ce2",this.endLessRound),C.pzaUtil.changeGameSpeed(l.pzaGameState.gameSpeed),this.endLessRound%this.changeRound==0&&console.log("\u8fc7\u4e86"+this.changeRound+"\u6ce2\u4e86,\u6389\u5de7\u514b\u529b\u5e76\u591a\u4e00\u4e2a\u5de8\u4eba"),P.pzaSoundManager.playBgm(P.pzaBGMName.PUZZLE_BGM),b.pzaNodeManager.getBattleUINode().getChildByName("BattleUpUI").getComponent(c.pzaBattleUpView).partLabel.string=this.getConf(l.pzaGameState.curPart).name+(this.endLessRound>0?"-\u8bb0\u5f55\uff1a"+this.endLessRound:""),l.pzaGameState.selectCard=null,l.pzaGameState.selectPlant=null,_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.SELECT_CARD,null),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.CLEAR_SCREEN,null),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),m.default.removeNodeChildren(b.pzaNodeManager.getCardsNode()),window.pzazombieManager.lastWave=!1;for(var a=this.getConf(this.endLessId),t=m.default.strArr(a.zombie),e=m.default.strArr(a.plant),o=Math.floor((this.endLessRound+1)/this.changeRound);o>0;){o--;for(var n=0,i=0;i<t.length&&!(n>=2);i++)if((s=t[i]).startsWith("1-")){if((r=parseInt(s.substring(2)))>1){t[i]="1-"+(r-1),n++;continue}if(1===r){t.splice(i,1),i--,n++;continue}}else if(s.startsWith("26-")){var r=parseInt(s.substring(3));t[i]="26-"+(r+1),n++;continue}}var p=6;for(i=0;i<t.length;i++)(s=t[i]).startsWith("1-")?p+=r=parseInt(s.substring(2)):s.startsWith("26-")&&(p+=r=parseInt(s.substring(3)));for(i=0;i<t.length;i++){var s;if((s=t[i]).startsWith("26-")){for(r=parseInt(s.substring(3));p>15;)r--,p--;t[i]="26-"+r;break}}this.gameInit(a,t,e),l.pzaGameState.gamePause=!1,f.pzaCollisionManager.getInstance.setOn()},t.prototype.nextPart=function(a,t){void 0===a&&(a=!1),void 0===t&&(t=null);var e=this;e.endLessRound++,d.pzaCommonMask.showMask(),v.pzaRankMgr.uploadLeaderboardScore(v.pzaRankMgr.Vase_Rank_Key,e.endLessRound,g.pzaLocalData.data.vaseFlagCount,function(){g.pzaLocalData.data.vaseEndLessLevelIndex=e.endLessRound,g.pzaLocalData.data.vaseEndLessSunCount=l.pzaGameState.sunLightCount,console.log("pzaGameState.sunLightCount",l.pzaGameState.sunLightCount),g.pzaLocalData.addDirty("vaseEndLessLevelIndex","vaseEndLessSunCount"),d.pzaCommonMask.hideMask(),e.endLessRound>g.pzaLocalData.data.vaseFlagCount&&(g.pzaLocalData.data.vaseFlagCount=e.endLessRound,g.pzaLocalData.addDirty("vaseFlagCount")),e.endLessRound%3!=0?e.showTip(null,e.doNextPart):p.pzaEffectManager.createDropCard(i.pzaDropType.COIN_PACKAGE,null,cc.v2(),function(){e.showTip(null,e.doNextPart)})}),g.pzaLocalData.bpEndlessPassPart(e.endLessRound)},t.prototype.partFail=function(){a.prototype.partFail.call(this);var t=0;g.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-g.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3);var o=300+l.pzaGameState.curPart;D.pzaStatisticsMgr.sendLevelEvent(l.pzaGameState.curPart,0,t,e,l.pzaGameMode.VASE_ENDLESS),m.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),g.pzaLocalData.hasUseProp=!1},t}(y.pzaGameVase);e.pzaGameVaseEndless=E,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaBattleUpView":"pzaBattleUpView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCollisionManager":"pzaCollisionManager","./pzaGameManager":"pzaGameManager","./pzaGameVase":"pzaGameVase","./pzaLocalData":"pzaLocalData","./pzaNodeManager":"pzaNodeManager","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameVase:[function(a,t,e){"use strict";cc._RF.push(t,"ff73fmGXbpGz5Qjre4T4OU8","pzaGameVase");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameVase=void 0;var i=a("../Battle/Data/pzaDropType"),r=a("../Battle/Data/pzaJarData"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Battle/pzaEffectManager"),s=a("../Battle/pzaGameState"),c=a("../Load/pzaBundleObjectPool"),u=a("../Load/pzaPreLoadManager"),d=a("../MiniVase/pzaMiniVaseConf"),h=a("../View/pzaCommonMask"),m=a("../utils/pzaChannel"),f=a("../utils/pzaResMgr"),z=a("../utils/pzakc"),y=a("./pzaCollisionManager"),g=a("./pzaGameBase"),b=a("./pzaGameManager"),v=a("./pzaLocalData"),P=a("./pzaOperationMgr"),D=a("./pzaSoundManager"),S=a("./pzaStatisticsMgr"),C=a("./pzaUIManager"),_=a("./pzaWorldEventManager"),E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=s.pzaGameMode.VASE,t.confMap=null,t.endLessId=0,t}return n(t,a),t.prototype.init=function(){if(null!==this.confMap)return this;var a=f.pzaResMgr.instance().getConf("a12");this.confMap=new Map;for(var t=0;t<a.length;t++){var e=new d.pzaMiniVaseConf(a[t]);this.confMap.set(e.id,e),e.endless&&(this.endLessId=e.id)}return this},t.prototype.getConf=function(a){return this.confMap.get(a)},t.prototype.getGameModeName=function(){return"\u7834\u7f50\u8005-"},t.prototype.playBgm=function(){D.pzaSoundManager.playBgm(D.pzaBGMName.PUZZLE_BGM)},t.prototype.initPartProcess=function(a){a.partLabel.string=this.getConf(s.pzaGameState.curPart).name,a.partProNode.active=!1,a.zombieHeadNode.active=!1},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS,a.cherryBombNode.active=!1,m.pzaChannel.isConfRemote&&(a.cherryBombNode.active=!0),a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.clickSelectPartInFailView=function(){C.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PUZZLE_VIEW,function(){C.pzaUIManager.baseShowBoardUI(u.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.getAdPlantArr=function(){return[p.pzaPlantEnum.PLANTERN,p.pzaPlantEnum.SQUASH,p.pzaPlantEnum.ICE_SHROOM]},t.prototype.updatePartProcess=function(){},t.prototype.refreshNextWave=function(){},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.speedBtn.active=!0,t.shovelShowNode.active=!0,t.sunUIShowNode.active=!1,t.freePlantNode.active=!0,t.pauseBtn.active=!0,t.skipPartBtn.active=!1},t.prototype.gameInit=function(a,t,e){v.pzaLocalData.testMode=!1,window.pzaMapManager.initMapPos(!1),window.pzazombieManager.wave=1;for(var o=[],n=0;n<e.length;n++)if(2===(d=e[n].split("-")).length){var i=parseInt(d[0]);50===i&&(i=8);for(var p=parseInt(d[1]),l=0;l<p;l++)(m=new r.pzaJarData(0,0)).plantType=i,o.push(m)}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef3",a.id);var c=z.default.randomChooseIndex(o,a.green);for(n=0;n<a.green;n++)o[c[n]].jarType=r.pzaJarType.GREEN_JAR;var u=o.length;for(n=0;n<t.length;n++){var d;if(2===(d=t[n].split("-")).length){var h=parseInt(d[0]);for(p=parseInt(d[1]),l=0;l<p;l++){var m;(m=new r.pzaJarData(0,0)).zombieType=h,o.push(m)}}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef2",a.id)}if(s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS){var f=z.default.randomInt(1,3);for(n=u;n<u+f;n++)o[n].jarType=r.pzaJarType.ZOMBIE_JAR}if(s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS){var y=o[u-1];y.isSunLight=!0,y.plantType=null,y.zombieType=null,y.jarType=r.pzaJarType.BRONZE_JAR}z.default.shuffle(o);for(var g=a.min-1;g<a.max;g++)for(var b=0;b<5;b++){var P=o.shift();if(!P)return;P.xIndex=g,P.yIndex=b,P.hasColli=!0,window.pzaplantManager.createJar(P)}},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u76ca\u667a\u6a21\u5f0f\u201d\uff0c"+this.getConf(s.pzaGameState.curPart).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t.prototype.preLoad=function(a,t,e){this.init(),s.pzaGameState.init(2,t,this.gameMode,this.skipPartStar(),0,1,2),s.pzaGameState.partStar=0,s.pzaGameState.autoPickLock=!1,s.pzaGameState.isGameEnd=!1;var o=[new u.pzaResourceDetail(u.pzaResourceUrl.SUN),new u.pzaResourceDetail(u.pzaResourceUrl.CLEANER_CAR),new u.pzaResourceDetail(u.pzaResourceUrl.WORD_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.SHADOW),new u.pzaResourceDetail(u.pzaResourceUrl.SHOVEL_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.PLANT_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.DROP_COIN),new u.pzaResourceDetail(u.pzaResourceUrl.DROP_CARD),new u.pzaResourceDetail(u.pzaResourceUrl.DROP_PLANT_CARD),new u.pzaResourceDetail(u.pzaResourceUrl.NORMAL_ASHES_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.SMOKE_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.JAR),new u.pzaResourceDetail(u.pzaResourceUrl.HAMMER_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.FOG_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.TOMB),new u.pzaResourceDetail(u.pzaResourceUrl.DIRT_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.TOMB),new u.pzaResourceDetail(u.pzaResourceUrl.PLANT_ICON,u.pzaResourceType.SpriteFrameDir),new u.pzaResourceDetail(u.pzaResourceUrl.ZOMBIE_ICON,u.pzaResourceType.SpriteFrameDir)],n=this.getConf(t);if(n){var i=z.default.strArr(n.zombie),r=z.default.strArr(n.plant);if(i&&r){for(var p=0;p<i.length;p++)if(2===(h=i[p].split("-")).length){var d=u.pzaPreLoadManager.getZombieUrl(parseInt(h[0]));null!=d?(o.push(new u.pzaResourceDetail(d)),null!=(f=u.pzaPreLoadManager.getSubResources(d))&&o.concat(f)):console.error("zombieUrl",h[0])}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef1",t,i[p]);for(p=0;p<r.length;p++){var h;if(2===(h=r[p].split("-")).length){var m=parseInt(h[0]);50===m&&(m=8);var f,y=u.pzaPreLoadManager.getPlantUrl(m);null!=y?(o.push(new u.pzaResourceDetail(y)),null!=(f=u.pzaPreLoadManager.getSubResources(y))&&o.concat(f)):console.error("theur",m)}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef1",t,r[p])}C.pzaUIManager.showLoading(),l.pzaEffectManager.createGroveEffect(),window.pzaplantManager.init(),window.pzazombieManager.init(),window.pzaMapManager.init(2,t),D.pzaSoundManager.clearAllLoopAudio(),this.gameInit(n,i,r),c.pzaBundleObjectPool.preLoadSubResource(o,function(){C.pzaUIManager.hideLoading(e)},function(a){C.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*a)))})}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef",t)}else z.default.err("\u7834\u7f50\u8005id\u9519\u8bef",t)},t.prototype.startCall=function(){D.pzaSoundManager.playBgm(D.pzaBGMName.PUZZLE_BGM),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,y.pzaCollisionManager.getInstance.setOn()},t.prototype.gameStart=function(t,e){a.prototype.resetTryPlant.call(this),v.pzaLocalData.gameStartTimeStamp=Date.now();var o=300+e;S.pzaStatisticsMgr.sendLevelEvent(e,2,0,0,s.pzaGameMode.VASE),z.default.eventReport(o+"\u5173\u5361\u8fdb\u5165"),h.pzaCommonMask.hideMask(),window.pzaGuideManager.guideStart(this.startCall.bind(this)),window.pzaGuideManager.guideShow(this.startCall.bind(this)),s.pzaGameState.hadRevived=!0},t.prototype.showPassUiNoStar=function(){C.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PUZZLE_VIEW,function(){P.pzaOperationMgr.showCreativeVaseModeGift(null),C.pzaUIManager.baseShowBoardUI(u.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.winDrop=function(){var a=i.pzaDropType.COIN_PACKAGE;return v.pzaLocalData.passVaseMode(s.pzaGameState.curPart)&&(a=i.pzaDropType.VASE_TROPHY),"my"===m.pzaChannel.instance().channel&&m.pzaChannel.instance().getChannel().actSubmit(),a},t.prototype.partWin=function(){_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_OVER,null),b.pzaGameManager.removeBattleUI(),m.pzaChannel.instance().showInter(!0),this.showPassUiNoStar();var a=0;v.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-v.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3);var e=300+s.pzaGameState.curPart;S.pzaStatisticsMgr.sendLevelEvent(s.pzaGameState.curPart,1,a,t,s.pzaGameMode.VASE),z.default.eventReport(e+"\u5173\u5361\u6210\u529f"),v.pzaLocalData.hasUseProp=!1},t.prototype.partFail=function(){a.prototype.partFail.call(this);var t=0;v.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-v.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3);var o=300+s.pzaGameState.curPart;S.pzaStatisticsMgr.sendLevelEvent(s.pzaGameState.curPart,0,t,e,s.pzaGameMode.VASE),z.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),v.pzaLocalData.hasUseProp=!1},t.prototype.onZombieDeath=function(a,t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o=null),e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.checkAllZombieDeath(a))if(a.lastWave){var n=!1;window.pzaplantManager.pzaJarMap.forEach(function(a){null!=a&&null!=a.jarData&&null!=a.jarData.zombieType&&(n=!0)}),n||b.pzaGameManager.passPart(t.logicPos)}else if(window.pzaplantManager.pzaJarMap.size<=0){if(s.pzaGameState.gameMode===s.pzaGameMode.VASE)return void b.pzaGameManager.passPart(t.logicPos);if(s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS)return void b.pzaGameManager.getCurrentGame().partWin();a.specialNextWaveTime=1}},t}(g.pzaGameBase);e.pzaGameVase=E,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaJarData":"pzaJarData","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../MiniVase/pzaMiniVaseConf":"pzaMiniVaseConf","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaCollisionManager":"pzaCollisionManager","./pzaGameBase":"pzaGameBase","./pzaGameManager":"pzaGameManager","./pzaLocalData":"pzaLocalData","./pzaOperationMgr":"pzaOperationMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUIManager":"pzaUIManager","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameWinView:[function(a,t,e){"use strict";cc._RF.push(t,"f02d8BZIw9Bu48fazOB3R6s","pzaGameWinView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameWinView=void 0;var r=a("../../Battle/Data/pzaGuideType"),p=a("../../Battle/Data/pzaPlantEnum"),l=a("../../Battle/pzaGameState"),s=a("../../Common/pzaGameCommonPool"),c=a("../../Common/pzaGameManager"),u=a("../../Common/pzaLocalData"),d=a("../../Common/pzaSoundManager"),h=a("../../Common/pzaSpineController"),m=a("../../Common/pzaUIManager"),f=a("../../Common/pzaUtil"),z=a("../../Common/pzaWorldEventManager"),y=a("../../Garden/pzaGardenView"),g=a("../../Load/pzaPreLoadManager"),b=a("../../utils/pzaChannel"),v=a("../pzaVideoPlantGiftView"),P=a("../../Common/pzaOperationMgr"),D=a("../../Common/pzaGamePropConfig"),S=a("../pzaCommonRewardView"),C=cc._decorator,_=C.ccclass,E=C.property,M=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.stars=[],t.mainViewBtn=null,t.nextBtn=null,t.nextTxt=null,t.plantTarget=null,t.carTarget=null,t.shareBtn=null,t.bottomHome=null,t.topHome=null,t.videoToggle=null,t.videoIcon=null,t.rewardBubble=null,t}return n(t,a),t.prototype.onEnable=function(){var a=this;this.stars.forEach(function(a){null!=a&&(a.node.active=!1)});var t=l.pzaGameState.partStar;t>0&&this.showStarAni(0,function(){t>1&&a.showStarAni(1,function(){t>2&&a.showStarAni(2,null)})}),u.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_3_4||u.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_4_4||u.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_5_1||u.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_GARDEN_5_4?(this.videoIcon.active=!1,this.topHome.active=!1,this.bottomHome.active=!0,this.videoToggle.node.active=!1,this.mainViewBtn.active=!1,this.nextBtn.x=0,this.nextTxt.string="\u7ee7\u7eed"):(this.mainViewBtn.active=!0,this.nextBtn.x=211,this.nextTxt.string="\u4e0b\u4e00\u5173",this.videoIcon.active=!1,this.topHome.active=!1,this.bottomHome.active=!0,this.videoToggle.node.active=!1);var e;e=1==l.pzaGameState.curChapter||3==l.pzaGameState.curChapter||5==l.pzaGameState.curChapter||6==l.pzaGameState.curChapter||8==l.pzaGameState.curChapter||10==l.pzaGameState.curChapter?l.pzaGameState.lossPlantCount>=4:l.pzaGameState.lossPlantCount>=6,f.pzaUtil.switchGraySprite(this.plantTarget,e),f.pzaUtil.switchGraySprite(this.carTarget,l.pzaGameState.lossCar),this.showGift(),this.rewardBubble=null,P.pzaOperationMgr.showShareBubble(this.shareBtn,function(t){a.rewardBubble=t}),"my"!=b.pzaChannel.instance().channel&&b.pzaChannel.instance().showInter(!0)},t.prototype.clickVideoToggle=function(){this.videoIcon.active=this.videoToggle.isChecked},t.prototype.showGift=function(){var a,t=l.pzaGameState.curChapter,e=l.pzaGameState.curPart;2==t&&6==e?a=p.pzaPlantEnum.GATLING_PEA:2==t&&8==e?a=p.pzaPlantEnum.GLOOM_SHROOM:3==t&&1==e?a=p.pzaPlantEnum.CATTAIL:4==t&&9==e?a=p.pzaPlantEnum.SPIKEROCK:5==t&&4==e?a=p.pzaPlantEnum.COB_CANNON:5==t&&9==e&&(a=p.pzaPlantEnum.WINTER_MELON);var o=u.pzaLocalData.data.ownPlants.includes(a);a&&!o&&"wx"!=b.pzaChannel.instance().channel?m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.VIDEO_PLANT_GIFT_VIEW,function(t){var e=t&&t.getComponent(v.pzaVideoPlantGiftView);e&&e.bindData(a)}):P.pzaOperationMgr.showNormalGameGift()},t.prototype.showStarAni=function(a,t){var e=this.stars[a];null!=e?(e.node.active=!0,e.playAnimation("idle",!1,null,t),d.pzaSoundManager.playAudio("getstar")):t&&t()},t.prototype.clickMainView=function(){this.close(),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_OVER,null),c.pzaGameManager.removeBattleUI(),m.pzaUIManager.baseShowBoardUI(g.pzaResourceUrl.HOME_SELECT_VIEW,null),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.BACK_HOMEVIEW,null)},t.prototype.clickShare=function(){var a=this;b.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){console.log("gamewinView share sucess"),a.rewardBubble&&a.rewardBubble.getReward(),a.rewardBubble=null})},t.prototype.clickNext=function(){var a=this,t=function(){a.close(),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_OVER,null),c.pzaGameManager.removeBattleUI(),u.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_3_4&&u.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_4_4&&u.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_5_1?u.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_GARDEN_5_4?m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.PART_SELECT_VIEW,function(){m.pzaUIManager.baseShowBoardUI(g.pzaResourceUrl.HOME_SELECT_VIEW,null)}):m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.GARDEN_VIEW,function(a){var t=a&&a.getComponent(y.pzaGardenView);t&&t.init(),m.pzaUIManager.baseShowBoardUI(g.pzaResourceUrl.HOME_SELECT_VIEW,null),d.pzaSoundManager.playBgm(d.pzaBGMName.GARDEN)}):m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.SHOP_VIEW,function(){m.pzaUIManager.baseShowBoardUI(g.pzaResourceUrl.HOME_SELECT_VIEW,null)})};this.videoIcon.active?b.pzaChannel.instance().showVideo({sucCall:function(){var a=new D.pzaRewardPropData(D.pzaGamePropEnum.PROP_COIN,500);m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.COMMON_REWARD_VIEW,function(e){var o=e&&e.getComponent(S.pzaCommonRewardView);o&&o.bindData([a],function(){t()})})},failCall:function(){},endCall:function(){},posName:"\u5173\u5361\u7ed3\u675f\u89c6\u9891",adsid:"41"}):t()},t.prototype.close=function(){s.pzaGameCommonPool.returnInstant(this.node)},i([E({displayName:"\u661f\u661f",type:[h.pzaSpineController]})],t.prototype,"stars",void 0),i([E({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae",type:cc.Node})],t.prototype,"mainViewBtn",void 0),i([E({displayName:"\u4e0b\u4e00\u5173\u6309\u94ae",type:cc.Node})],t.prototype,"nextBtn",void 0),i([E({displayName:"\u4e0b\u4e00\u5173\u6587\u6848",type:cc.Label})],t.prototype,"nextTxt",void 0),i([E({displayName:"\u690d\u7269\u76ee\u6807",type:cc.Sprite})],t.prototype,"plantTarget",void 0),i([E({displayName:"\u63a8\u8f66\u76ee\u6807",type:cc.Sprite})],t.prototype,"carTarget",void 0),i([E({displayName:"\u5206\u4eab\u6309\u94ae",type:cc.Node})],t.prototype,"shareBtn",void 0),i([E({displayName:"\u4e0b\u65b9\u4e3b\u9875\u6309\u94ae",type:cc.Node})],t.prototype,"bottomHome",void 0),i([E({displayName:"\u4e0a\u65b9\u4e3b\u9875\u6309\u94ae",type:cc.Node})],t.prototype,"topHome",void 0),i([E({type:cc.Toggle})],t.prototype,"videoToggle",void 0),i([E({displayName:"\u89c6\u9891\u56fe\u6807",type:cc.Node})],t.prototype,"videoIcon",void 0),i([_],t)}(cc.Component);e.pzaGameWinView=M,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Garden/pzaGardenView":"pzaGardenView","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaCommonRewardView":"pzaCommonRewardView","../pzaVideoPlantGiftView":"pzaVideoPlantGiftView"}],pzaGameZombieEnemyEndless:[function(a,t,e){"use strict";cc._RF.push(t,"6b8bcwDBmlBOqZEjxzb3suT","pzaGameZombieEnemyEndless");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameZombieEnemyEndless=void 0;var i=a("../Achieve/pzaAchieve"),r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaBattleData"),l=a("../Battle/Data/pzaDropType"),s=a("../Battle/Data/pzaPlantEnum"),c=a("../Battle/pzaEffectManager"),u=a("../Battle/pzaGameState"),d=a("../Load/pzaPreLoadManager"),h=a("../View/Battle/pzaZombieSelectView"),m=a("../View/pzaCommonMask"),f=a("../View/pzaWarningView"),z=a("../utils/pzaChannel"),y=a("../utils/pzakc"),g=a("./pzaGameManager"),b=a("./pzaGameZombieEnemy"),v=a("./pzaLocalData"),P=a("./pzaRankMgr"),D=a("./pzaSoundManager"),S=a("./pzaStatisticsMgr"),C=a("./pzaTipManager"),_=a("./pzaUIManager"),E=a("./pzaUtil"),M=a("./pzaWorldEventManager"),w=a("./pzaZombieEnermyPartCfg"),T=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=u.pzaGameMode.ZOMBIE_ENDLESS,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u50f5\u5c38\u516c\u654c\u65e0\u5c3d-"},t.prototype.isEndless=function(){return!0},t.prototype.getRankKey=function(){return"zombie_endless_rank"},t.prototype.getPlantArr=function(){var a=w.pzaZombieEnermyPartCfg.getPlantType(u.pzaGameState.zombieEndlessPart);return a.push(s.pzaPlantEnum.PUFF_SHROOM),a},t.prototype.getZombieTypeArr=function(){return w.pzaZombieEnermyPartCfg.getZombiePool(u.pzaGameState.zombieEndlessPart)},t.prototype.addOtherRes=function(a){a.push(new d.pzaResourceDetail(d.pzaResourceUrl.BRAIN))},t.prototype.initPartProcess=function(a){a.partLabel.string="\u50f5\u5c38\u516c\u654c(\u65e0\u5c3d)"+(u.pzaGameState.curPart>1?"-\u8bb0\u5f55\uff1a"+(u.pzaGameState.curPart-1):""),a.zombieHeadNode.active=!1;for(var t=0;t<a.partFlags.length;t++)a.partFlags[t].active=!1;a.proLabel.node.active=!0,a.proLabel.string="0/5 \u5403\u6389\u7684\u5976\u74f6",a.partProgress.fillRange=0},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u76ca\u667a\u6a21\u5f0f\u201d\uff0c\u201c\u50f5\u5c38\u516c\u654c(\u65e0\u5c3d)\u201d\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t.prototype.readData=function(){var a=v.pzaLocalBattleData.data.zombieEndlessData;p.pzaBattleData.readData(a)},t.prototype.beforeLoad=function(){u.pzaGameState.partStar=0,u.pzaGameState.sunLightCount=150,u.pzaGameState.zombiePuffCount=w.pzaZombieEnermyPartCfg.getRandomPuff(1),u.pzaGameState.zombieEndlessPart=w.pzaZombieEnermyPartCfg.getEndlessCfgLevel(1)},t.prototype.preLoad=function(t,e,o){a.prototype.preLoad.call(this,2,1,o)},t.prototype.gameRestart=function(){u.pzaGameState.hadRevived=!1,v.pzaLocalBattleData.data.zombieEndlessData=null,v.pzaLocalBattleData.localSaveData(),this.loadAndStart(2,1)},t.prototype.gameStart=function(t,e){var o=this;a.prototype.resetTryPlant.call(this),v.pzaLocalData.gameStartTimeStamp=Date.now();var n=200+e;S.pzaStatisticsMgr.sendLevelEvent(e,2,0,0,u.pzaGameMode.ZOMBIE_ENDLESS),y.default.eventReport(n+"\u5173\u5361\u8fdb\u5165"),this.beforeGameStart(t,e);var i=v.pzaLocalBattleData.data.zombieEndlessData;if(u.pzaGameState.isGameEnd=!1,i)return window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.init(),D.pzaSoundManager.clearAllLoopAudio(),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(w.pzaZombieEnermyPartCfg.getPlantColumn(u.pzaGameState.zombieEndlessPart)),window.pzaplantManager.initSimulatePlant(i.zombiePlantList),window.pzaplantManager.initBrain(),window.pzaMapManager.openBattleUI(),g.pzaGameManager.showBattleUI(d.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(a){var t=a&&a.getComponent(h.pzaZombieSelectView);t&&t.init(w.pzaZombieEnermyPartCfg.getZombiePool(u.pzaGameState.zombieEndlessPart))}),void this.gameRecover(t,e,i);P.pzaRankMgr.queryLeaderBoardRank(P.pzaRankMgr.Zombie_Rank_Key,function(a){m.pzaCommonMask.hideMask(),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(w.pzaZombieEnermyPartCfg.getPlantColumn(u.pzaGameState.zombieEndlessPart)),window.pzaplantManager.initSimulatePlant(w.pzaZombieEnermyPartCfg.getPlantList(u.pzaGameState.zombieEndlessPart,u.pzaGameState.zombiePuffCount)),window.pzaplantManager.initBrain();var t="\u83b7\u5f97\u5168\u90e8\u5976\u74f6\uff0c\u901a\u8fc7\u8fd9\u4e00\u5173\u5361\uff01",e=v.pzaLocalData.data.zombieFlagCount;null!=e&&e>0&&(t+="\n\u5386\u53f2\u6700\u9ad8\u8bb0\u5f55\uff1a"+e,null!=a&&a>0&&(t+=" \u5168\u670d\u6392\u540d\uff1a"+a)),C.pzaTipManager.showGameTip(t,function(){C.pzaTipManager.showGameTip("\u80fd\u91cf\u53ef\u4ee5\u5e26\u5230\u4e0b\u4e00\u5173\uff0c\u4f60\u5fc5\u987b\u5e26\u8d85\u8fc750\u4e2a\u80fd\u91cf\uff0c\u5426\u5219\u4f60\u5c06\u8fc7\u5173\u5931\u8d25\uff01")}),window.pzaplantManager.blinkBrain(),window.pzaMapManager.openBattleUI(),g.pzaGameManager.showBattleUI(d.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(a){var t=a&&a.getComponent(h.pzaZombieSelectView);t&&t.init(w.pzaZombieEnermyPartCfg.getZombiePool(u.pzaGameState.zombieEndlessPart))}),o.playBgm(),u.pzaGameState.gamePause=!1})},t.prototype.gameRecover=function(){var a=this;_.pzaUIManager.removeBoardUI(),u.pzaGameState.midOut=!1,_.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(f.pzaWarningView);e&&e.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){a.playBgm(),window.pzazombieManager.zombieModeCheckTime=2,u.pzaGameState.gamePause=!1,M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_RESUME,null),E.pzaUtil.changeGameSpeed(u.pzaGameState.gameSpeed),a.playBgm()},function(){v.pzaLocalBattleData.data.zombieEndlessData=null,v.pzaLocalBattleData.localSaveData(),g.pzaGameManager.removeBattleUI(),M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_OVER,null),P.pzaRankMgr.queryLeaderBoardRank(P.pzaRankMgr.Zombie_Rank_Key,function(){a.firstStart(u.pzaGameState.curChapter,1)})},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,0,!0,v.pzaLocalData.endLessPowerCost,!0,2)})},t.prototype.winDrop=function(){return null},t.prototype.partFail=function(){a.prototype.partFail.call(this),v.pzaLocalBattleData.data.zombieEndlessData=null,v.pzaLocalBattleData.localSaveData();var t=0;v.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-v.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3);var o=200+u.pzaGameState.curPart;S.pzaStatisticsMgr.sendLevelEvent(u.pzaGameState.curPart,0,t,e,u.pzaGameMode.ZOMBIE_ENDLESS),y.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),v.pzaLocalData.hasUseProp=!1},t.prototype.partWin=function(a,t){this.nextPart(a,t)},t.prototype.doNextPart=function(){window.pzaMapManager.blink(2),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.init(),D.pzaSoundManager.clearAllLoopAudio(),u.pzaGameState.survivalPartWin(),u.pzaGameState.zombiePuffCount=w.pzaZombieEnermyPartCfg.getRandomPuff(u.pzaGameState.curPart),u.pzaGameState.zombieEndlessPart=w.pzaZombieEnermyPartCfg.getEndlessCfgLevel(u.pzaGameState.curPart),window.pzaMapManager.clearLadder(),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(w.pzaZombieEnermyPartCfg.getPlantColumn(u.pzaGameState.zombieEndlessPart));var a=w.pzaZombieEnermyPartCfg.getPlantList(u.pzaGameState.zombieEndlessPart,u.pzaGameState.zombiePuffCount);window.pzaplantManager.initSimulatePlant(a),window.pzaplantManager.initBrain(),window.pzaMapManager.openBattleUI(),g.pzaGameManager.showBattleUI(d.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(a){var t=a&&a.getComponent(h.pzaZombieSelectView);t&&t.init(w.pzaZombieEnermyPartCfg.getZombiePool(u.pzaGameState.zombieEndlessPart))}),this.playBgm(),u.pzaGameState.gamePause=!1,window.pzazombieManager.zombieModeCheckTime=2,M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.PASS_PICK,null),E.pzaUtil.changeGameSpeed(u.pzaGameState.gameSpeed),v.pzaLocalBattleData.data.zombieEndlessData=p.pzaBattleData.saveData(0,a),v.pzaLocalBattleData.localSaveData(),u.pzaGameState.isGameEnd=!1,u.pzaGameState.curPart>10&&r.default.instance().zombieCheckAchieve(i.pzaAchieveType.ACH_8)},t.prototype.nextPart=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null),u.pzaGameState.isGameEnd=!0;var o=function(){E.pzaUtil.changeGameSpeed(1),window.pzaMapManager.closeBattleUI(),g.pzaGameManager.removeBattleUI();var a="\u5e72\u5f97\u597d\uff01\u5df2\u5b8c\u6210"+u.pzaGameState.curPart+"\u5173";null!=t&&(a+="\n"+t),C.pzaTipManager.showGameTip(a,function(){m.pzaCommonMask.showMask(),P.pzaRankMgr.uploadLeaderboardScore(P.pzaRankMgr.Zombie_Rank_Key,v.pzaLocalData.data.zombieFlagCount,u.pzaGameState.curPart-1,function(){m.pzaCommonMask.hideMask(),u.pzaGameState.curPart>v.pzaLocalData.data.zombieFlagCount&&(v.pzaLocalData.data.zombieFlagCount=u.pzaGameState.curPart,v.pzaLocalData.addDirty("zombieFlagCount")),e.doNextPart()}),v.pzaLocalData.bpEndlessPassPart(u.pzaGameState.curPart)})};u.pzaGameState.curPart%3==0?c.pzaEffectManager.createDropCard(l.pzaDropType.COIN_PACKAGE,null,cc.v2(),o):o(),"my"===z.pzaChannel.instance().channel&&z.pzaChannel.instance().getChannel().actSubmit()},t}(b.pzaGameZombieEnemy);e.pzaGameZombieEnemyEndless=T,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaBattleData":"pzaBattleData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaZombieSelectView":"pzaZombieSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameManager":"pzaGameManager","./pzaGameZombieEnemy":"pzaGameZombieEnemy","./pzaLocalData":"pzaLocalData","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager","./pzaZombieEnermyPartCfg":"pzaZombieEnermyPartCfg"}],pzaGameZombieEnemy:[function(a,t,e){"use strict";cc._RF.push(t,"4ce2aoYXkZA5IeWQ//Zc2vL","pzaGameZombieEnemy");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameZombieEnemy=void 0;var i=a("../Battle/Data/pzaDropType"),r=a("../Battle/Data/pzaGuideType"),p=a("../Battle/pzaGameState"),l=a("../Load/pzaPreLoadManager"),s=a("../View/Battle/pzaZombieSelectView"),c=a("../View/pzaCommonMask"),u=a("../utils/pzaChannel"),d=a("../utils/pzakc"),h=a("./pzaGameBase"),m=a("./pzaGameManager"),f=a("./pzaLocalData"),z=a("./pzaOperationMgr"),y=a("./pzaSoundManager"),g=a("./pzaStatisticsMgr"),b=a("./pzaTipManager"),v=a("./pzaUIManager"),P=a("./pzaWorldEventManager"),D=a("./pzaZombieEnermyPartCfg"),S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=p.pzaGameMode.ZOMBIE_ENERMY,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u50f5\u5c38\u516c\u654c-"},t.prototype.playBgm=function(){y.pzaSoundManager.playBgm(y.pzaBGMName.PUZZLE_BGM)},t.prototype.winDrop=function(){var a=i.pzaDropType.COIN_PACKAGE;return f.pzaLocalData.passZombieMode(p.pzaGameState.curPart)&&(a=i.pzaDropType.ZOMBIE_TROPHY),"my"===u.pzaChannel.instance().channel&&u.pzaChannel.instance().getChannel().actSubmit(),a},t.prototype.showPassUiNoStar=function(){v.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.PUZZLE_VIEW,function(){z.pzaOperationMgr.showCreativeVaseModeGift(null),v.pzaUIManager.baseShowBoardUI(l.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=!0,a.cherryBombNode.active=!1,a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.clickSelectPartInFailView=function(){v.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.PUZZLE_VIEW,function(){v.pzaUIManager.baseShowBoardUI(l.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.getPlantArr=function(a,t){return D.pzaZombieEnermyPartCfg.getPlantType(t)},t.prototype.getZombieTypeArr=function(a,t){return D.pzaZombieEnermyPartCfg.getZombiePool(t)},t.prototype.addOtherRes=function(a){a.push(new l.pzaResourceDetail(l.pzaResourceUrl.BRAIN))},t.prototype.beforeLoad=function(){p.pzaGameState.partStar=0,p.pzaGameState.sunLightCount=150},t.prototype.partFail=function(){a.prototype.partFail.call(this);var t=0;f.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-f.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3);var o=200+p.pzaGameState.curPart;g.pzaStatisticsMgr.sendLevelEvent(p.pzaGameState.curPart,0,t,e,p.pzaGameMode.ZOMBIE_ENERMY),d.default.eventReport(o+"\u5173\u5361\u5931\u8d25"),f.pzaLocalData.hasUseProp=!1},t.prototype.partWin=function(){P.pzaWorldEventManager.triggerEvent(P.pzaWorldEventType.GAME_OVER,null),m.pzaGameManager.removeBattleUI(),this.showPassUiNoStar();var a=0;f.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-f.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3);var e=200+p.pzaGameState.curPart;g.pzaStatisticsMgr.sendLevelEvent(p.pzaGameState.curPart,1,a,t,p.pzaGameMode.ZOMBIE_ENERMY),d.default.eventReport(e+"\u5173\u5361\u6210\u529f"),f.pzaLocalData.hasUseProp=!1},t.prototype.preLoad=function(t,e,o){a.prototype.preLoad.call(this,2,e,o)},t.prototype.initPartProcess=function(a){a.partLabel.string=D.pzaZombieEnermyPartCfg.getName(p.pzaGameState.curPart),a.zombieHeadNode.active=!1;for(var t=0;t<a.partFlags.length;t++)a.partFlags[t].active=!1;a.proLabel.node.active=!0,a.proLabel.string="0/5 \u5403\u6389\u7684\u5976\u74f6",a.partProgress.fillRange=0},t.prototype.updatePartProcess=function(a){var t=5-window.pzaplantManager.brainMap.size,e=t/5,o=a.partProgress.fillRange+e,n=Math.max(.05,3*o);cc.Tween.stopAllByTarget(a.partProgress),cc.tween(a.partProgress).to(n,{fillRange:-e}).start(),a.proLabel.string=t+"/5 \u5403\u6389\u7684\u5976\u74f6"},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.freePlantNode.active=!1,t.shovelShowNode.active=!1,t.sunUIShowNode.active=!0,t.speedBtn.active=!0},t.prototype.refreshNextWave=function(){},t.prototype.onZombieDeath=function(){window.pzazombieManager.zombieModeCheckTime=2},t.prototype.gameStart=function(t,e){var o=this;a.prototype.resetTryPlant.call(this),f.pzaLocalData.gameStartTimeStamp=Date.now();var n=200+e;g.pzaStatisticsMgr.sendLevelEvent(p.pzaGameState.curPart,2,0,0,p.pzaGameMode.ZOMBIE_ENERMY),d.default.eventReport(n+"\u5173\u5361\u8fdb\u5165"),this.beforeGameStart(t,e),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(D.pzaZombieEnermyPartCfg.getPlantColumn(e)),window.pzaplantManager.initSimulatePlant(D.pzaZombieEnermyPartCfg.getPlantList(e,0)),window.pzaplantManager.initBrain();var i=function(){b.pzaTipManager.showGameTip("\u83b7\u5f97\u5168\u90e8\u5976\u74f6\uff0c\u901a\u8fc7\u8fd9\u4e00\u5173\u5361\uff01"),window.pzaplantManager.blinkBrain(),window.pzaMapManager.openBattleUI(),m.pzaGameManager.showBattleUI(l.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(a){var t=a&&a.getComponent(s.pzaZombieSelectView);t&&t.init(D.pzaZombieEnermyPartCfg.getZombiePool(p.pzaGameState.curPart))}),o.playBgm(),p.pzaGameState.gamePause=!1};if(window.pzaGuideManager.guideStart(i),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_ZOMBIE_ENERMY_1)return c.pzaCommonMask.hideMask(),void window.pzaGuideManager.guideShow(i)},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u76ca\u667a\u6a21\u5f0f\u201d\uff0c"+D.pzaZombieEnermyPartCfg.getName(p.pzaGameState.curPart)+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t}(h.pzaGameBase);e.pzaGameZombieEnemy=S,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaZombieSelectView":"pzaZombieSelectView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameBase":"pzaGameBase","./pzaGameManager":"pzaGameManager","./pzaLocalData":"pzaLocalData","./pzaOperationMgr":"pzaOperationMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaWorldEventManager":"pzaWorldEventManager","./pzaZombieEnermyPartCfg":"pzaZombieEnermyPartCfg"}],pzaGardenDave:[function(a,t,e){"use strict";cc._RF.push(t,"94090H3UhRGB5UEMEdqCS5D","pzaGardenDave");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenDave=void 0;var r=a("../Common/pzaSoundManager"),p=a("../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.daveAni=null,t.sell_yes=null,t.sell_no=null,t.continueTxt=null,t.dialogTxt=null,t.dialogNode=null,t.canContinue=!1,t.words=null,t.sellCall=null,t.guideEndCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.sell_yes.on(cc.Node.EventType.TOUCH_END,this.onSellYes,this),this.sell_no.on(cc.Node.EventType.TOUCH_END,this.onSellNo,this),this.node.on(cc.Node.EventType.TOUCH_END,this.clickContinue,this)},t.prototype.onDisable=function(){this.sell_yes.off(cc.Node.EventType.TOUCH_END,this.onSellYes,this),this.sell_no.off(cc.Node.EventType.TOUCH_END,this.onSellNo,this),this.node.off(cc.Node.EventType.TOUCH_END,this.clickContinue,this)},t.prototype.showSell=function(a,t){var e=this;this.node.active=!0,this.canContinue=!1,this.dialogNode.active=!1,this.continueTxt.active=!1,this.sell_yes.active=!0,this.sell_no.active=!0,this.dialogTxt.string=a,this.sellCall=t,this.daveAni.playAnimation("1enter1",!1,function(){e.dialogNode.active=!0,e.daveAni.playAnimation("1idle1",!0)})},t.prototype.showGuide=function(a,t){var e=this;this.node.active=!0,this.canContinue=!1,this.dialogNode.active=!1,this.continueTxt.active=!0,this.sell_yes.active=!1,this.sell_no.active=!1,this.words=a,this.guideEndCall=t,this.daveAni.playAnimation("1enter1",!1,function(){e.dialogNode.active=!0,e.canContinue=!0,e.daveAni.playAnimation("1idle1",!0),e.showNextWord()})},t.prototype.onSellYes=function(){var a=this;this.sellCall&&this.sellCall(),this.dialogNode.active=!1,this.daveAni.playAnimation("leave",!1,function(){a.node.active=!1})},t.prototype.onSellNo=function(){var a=this;this.dialogNode.active=!1,this.daveAni.playAnimation("leave",!1,function(){a.node.active=!1})},t.prototype.clickContinue=function(){this.canContinue&&this.showNextWord()},t.prototype.showNextWord=function(){var a=this;if(null!=this.words){var t=this.words.shift();if(null==t)return this.canContinue=!1,this.dialogNode.active=!1,void this.daveAni.playAnimation("leave",!1,function(){a.node.active=!1,a.guideEndCall&&a.guideEndCall()});this.playShortSound(),this.daveAni.playAnimation("1talk3",!1,function(){a.daveAni.playAnimation("1idle1",!0)}),this.dialogTxt.string=t.word,t.event&&t.event()}else this.node.active=!1},t.prototype.playShortSound=function(){r.pzaSoundManager.playAudio("daveshort")},i([c({displayName:"\u6234\u592b\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"daveAni",void 0),i([c({displayName:"\u552e\u5356_\u662f",type:cc.Node})],t.prototype,"sell_yes",void 0),i([c({displayName:"\u552e\u5356_\u5426",type:cc.Node})],t.prototype,"sell_no",void 0),i([c({displayName:"\u70b9\u51fb\u7ee7\u7eed",type:cc.Node})],t.prototype,"continueTxt",void 0),i([c({displayName:"\u5bf9\u8bdd\u6587\u672c",type:cc.Label})],t.prototype,"dialogTxt",void 0),i([c({displayName:"\u5bf9\u8bdd\u6846\u8282\u70b9",type:cc.Node})],t.prototype,"dialogNode",void 0),i([s],t)}(cc.Component);e.pzaGardenDave=u,cc._RF.pop()},{"../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController"}],pzaGardenDropCoin:[function(a,t,e){"use strict";cc._RF.push(t,"030adx5J0RGg7CKdbyuWmfs","pzaGardenDropCoin");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenDropCoin=void 0;var r=a("../Battle/Data/pzaDropType"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Load/pzaBundleObjectPool"),c=a("../utils/pzakc"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine_coin=null,t.curDropType=null,t.priceMap=new Map([[r.pzaDropType.SILVER_COIN,10],[r.pzaDropType.GOLD_COIN,50],[r.pzaDropType.DIAMOND,1e3]]),t.canPick=!0,t.pickTargetPos=null,t.pickCall=null,t.price=0,t}var e;return n(t,a),e=t,t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.pickUp,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.pickUp,this)},t.prototype.pickUp=function(){var a=this;this.canPick&&(this.canPick=!1,cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{position:this.pickTargetPos},{easing:"cubicOut"}).call(function(){p.pzaLocalData.data.coin+=a.price,p.pzaLocalData.addDirty("coin"),a.close()}).start(),l.pzaSoundManager.playAudio("pickCoin"),this.pickCall&&this.pickCall())},t.prototype.init=function(a,t,e,o){var n=this;this.curDropType=a,this.pickTargetPos=cc.v3(e.x,e.y),this.pickCall=o,this.price=this.priceMap.get(this.curDropType);var i="pr3";a==r.pzaDropType.SILVER_COIN?(l.pzaSoundManager.playAudio("pickSilver"),i="pr3"):a==r.pzaDropType.GOLD_COIN?(l.pzaSoundManager.playAudio("pickGold"),i="pr2"):(l.pzaSoundManager.playAudio("pickDiamond"),i="pr1_2"),this.spine_coin.setAnimation(0,i,!0),this.node.setPosition(t);var p=t.clone();p.x+=c.default.randomInt(-100,100),p.y+=c.default.randomInt(-100,100),p.y>210&&(p.y-=50),this.node.parent.convertToWorldSpaceAR(p).y<20&&(p.y+=70),cc.tween(this.node).bezierTo(.3,cc.v2(t.x,p.y+100),cc.v2(t.x,p.y+300),p).start(),this.scheduleOnce(function(){n.close()},60)},t.show=function(a,t,o,n,i){s.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Effect/GardenDropCoin",!1,function(r,p){if(null==r&&null!=p){p.setParent(a);var l=p.getComponent(e);l&&l.init(t,o,n,i)}else console.error(r)})},t.prototype.close=function(){this.node&&this.node.isValid&&this.node.destroy()},i([h({displayName:"\u52a8\u753b",type:sp.Skeleton})],t.prototype,"spine_coin",void 0),e=i([d],t)}(cc.Component);e.pzaGardenDropCoin=m,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../utils/pzakc":"pzakc"}],pzaGardenMgr:[function(a,t,e){"use strict";cc._RF.push(t,"5ab27xFOGlJ7ocM9eNExUUr","pzaGardenMgr"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenToolType=e.pzaGardenOpType=e.pzaGardenEnv=e.pzaGardenOpResult=void 0;var o,n,i,r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaDropType"),l=a("../Battle/Data/pzaPlantEnum"),s=a("../Battle/pzaGameState"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaUtil"),d=a("../Common/pzaWorldEventManager"),h=a("../utils/pzakc"),m=a("./pzaGardenPlant"),f=a("./pzaGardenPlantConfig");e.pzaGardenOpResult=function(a,t,e,o,n,i){void 0===a&&(a=0),void 0===t&&(t=p.pzaDropType.SILVER_COIN),void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),this.dropNum=0,this.dropType=p.pzaDropType.SILVER_COIN,this.isLight=!1,this.isWet=!1,this.isLevelUp=!1,this.offLight=!1,this.dropNum=a,this.dropType=t,this.isLight=n,this.isLevelUp=o,this.isWet=e,this.offLight=i},function(a){a[a.normal=0]="normal",a[a.night=1]="night",a[a.water=2]="water"}(o=e.pzaGardenEnv||(e.pzaGardenEnv={})),function(a){a[a.water=0]="water",a[a.manure=1]="manure",a[a.pesticide=2]="pesticide",a[a.phonograph=3]="phonograph",a[a.chocolate=4]="chocolate",a[a.income=5]="income",a[a.null=-1]="null"}(n=e.pzaGardenOpType||(e.pzaGardenOpType={})),function(a){a[a.null=-1]="null",a[a.waterPot=0]="waterPot",a[a.goldWaterPot=1]="goldWaterPot",a[a.manure=2]="manure",a[a.pesticide=3]="pesticide",a[a.phonograph=4]="phonograph",a[a.chocolate=5]="chocolate",a[a.glove=6]="glove",a[a.sell=7]="sell",a[a.cart=8]="cart",a[a.nextEnv=9]="nextEnv",a[a.snail=10]="snail"}(i=e.pzaGardenToolType||(e.pzaGardenToolType={}));var z=function(){function a(){this.gardenPlantConfMap=null,this.curGardenPlantMap=null,this.addPlantArr=[],this.snailSpeedUpTime=0,this.envMaxMap=new Map([[o.normal,32],[o.water,8],[o.night,8]]),this.opPicMap=new Map([[n.water,"Texture/MainView/GardenView/garden_drop"],[n.manure,"resources/Texture/ShopItemIcon/22"],[n.pesticide,"resources/Texture/ShopItemIcon/23"],[n.phonograph,"resources/Texture/ShopItemIcon/24"]]),this.toolPicMap=new Map([[i.waterPot,"Texture/Effect/drop_sprinkler"],[i.goldWaterPot,"resources/Texture/ShopItemIcon/21"],[i.manure,"resources/Texture/ShopItemIcon/22"],[i.pesticide,"resources/Texture/ShopItemIcon/23"],[i.phonograph,"resources/Texture/ShopItemIcon/24"],[i.glove,"resources/Texture/ShopItemIcon/25"],[i.sell,"Texture/MainView/GardenView/garden_dollar"],[i.cart,"resources/Texture/ShopItemIcon/28"],[i.chocolate,"Texture/MainView/GardenView/chocolate"],[i.nextEnv,"Texture/MainView/GardenView/garden_arrow1"]]),this.toolSpineMap=new Map([[i.waterPot,"Garden/28FX_pr4"],[i.goldWaterPot,"Garden/28FX_pr4"],[i.manure,"Garden/28FX_pr2"],[i.pesticide,"Garden/28FX_pr3"],[i.phonograph,"Garden/28FX_pr5"],[i.chocolate,"Effect/DropEffect/05_light"]])}return a.instance=function(){return a._me||(a._me=new a),a._me},a.prototype.init=function(a){if(!this.gardenPlantConfMap){this.gardenPlantConfMap=new Map;for(var t=0;t<a.length;t++){var e=new f.pzaGardenPlantConfig(a[t]);this.gardenPlantConfMap.set(e.plantId,e)}}this.loadPlantsFromSave()},a.prototype.addPlantByOther=function(a){this.addPlantArr.push(a)},a.prototype.getPriceFromLevel=function(a){if(0===a.level)return 1500;var t=this.getGardenPlantConf(a.plantId);return 1===a.level?t.price1:2===a.level?t.price2:t.price3},a.prototype.loadPlantsFromSave=function(){var a=h.default.isNewDay(c.pzaLocalData.data.gardenLastTime),t=c.pzaLocalData.data.gardenPlants||[];this.curGardenPlantMap=new Map,Date.now();for(var e=0;e<t.length;e++){var o=m.pzaGardenPlant.create(t[e]);this.curGardenPlantMap.has(o.env)||this.curGardenPlantMap.set(o.env,[]),a&&(4===o.level&&(o.level=3),o.cdCount=0),this.curGardenPlantMap.get(o.env).push(o)}h.default.log("\u52a0\u8f7d\u5b8c\u82b1\u56ed",this.curGardenPlantMap)},a.prototype.getOffLineReward=function(){var a=c.pzaLocalData.data.gardenLastTime;if(!a)return 0;var t=Date.now(),e=Math.floor((t-a)/1e3);e>3600&&(e=3600);var n=this.curGardenPlantMap.get(o.normal);if(!n)return 0;for(var i=0;i<n.length;i++){var r=n[i];4===r.level&&this.getPriceFromLevel(r)}return 0},a.prototype.getCurPlants=function(a){return this.curGardenPlantMap.get(a)||(this.curGardenPlantMap.set(a,[]),[])},a.prototype.canOperate=function(){if(!this.curGardenPlantMap)return!1;var a=Date.now(),t=!1;return this.curGardenPlantMap.forEach(function(e){if(e&&!t)for(var o=0;o<e.length;o++){var n=e[o];if(n&&n.opLeft>0&&n.opTime>0&&n.opTime<a)return void(t=!0)}}),t},a.prototype.getGardenPlantConf=function(a){return this.gardenPlantConfMap.get(a)},a.prototype.getEmptyPos=function(a){var t=this.envMaxMap.get(a),e=[],n=[],i=c.pzaLocalData.data.gardenPlants||[];console.log("pzaLocalData.data.gardenPlants",c.pzaLocalData.data.gardenPlants);for(var r=0;r<i.length;r++){var p=i[r];p.env===o.normal&&(e[p.pos]=1)}for(r=0;r<t;r++)void 0===e[r]&&n.push(r);return n.length<=0?-1:h.default.randomChoose(n,1)[0]},a.prototype.hasEmptyPos=function(a){void 0===a&&(a=o.normal);var t=this.envMaxMap.get(a);return this.getCurPlants(a).length<t},a.prototype.addGardenEnv=function(a){var t=c.pzaLocalData.data.gardenEnv||{};t[""+a]=1,c.pzaLocalData.data.gardenEnv=t,c.pzaLocalData.addDirty("gardenEnv"),h.default.sendMsg("addNewGardenTool")},a.prototype.addGardenPlant=function(t,e){void 0===e&&(e=o.normal);var i=this.getEmptyPos(e);if(i<0)return null;var p=new m.pzaGardenPlant(null,t,i,e);return p.opLeft=p.getLeftTimes(),p.opType=n.water,p.opTime=a.opGapTime+Date.now(),p.towards=Math.random()<.5?-1:1,this.getCurPlants(e).push(p),c.pzaLocalData.data.gardenPlants.push(p.toJson()),c.pzaLocalData.addDirty("gardenPlants"),console.log("\u82b1\u56ed\u52a0\u5165\u65b0\u690d\u7269",t,e,"pos",i),h.default.sendMsg("addNewGardenPlant"),r.default.instance().addGardenPlant(t),p},a.prototype.addGuidePlant=function(a,t){void 0===t&&(t=0);var e=new m.pzaGardenPlant(null,39,a,o.normal);e.level=t,e.opLeft=3,e.opType=n.water,e.opTime=6e3+Date.now(),e.opGapTime=6e3;for(var i=!1,p=0;p<this.getCurPlants(o.normal).length;p++){var l=this.getCurPlants(o.normal)[p];if(l.pos==a){l.level=1,i=!0;break}}if(!i)return this.getCurPlants(o.normal).push(e),c.pzaLocalData.data.gardenPlants.push(e.toJson()),c.pzaLocalData.addDirty("gardenPlants"),console.log("\u82b1\u56ed\u52a0\u5165\u5f15\u5bfc\u690d\u7269",39,"pos",a),h.default.sendMsg("addNewGardenPlant"),r.default.instance().addGardenPlant(39),e;d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.UPDATE_GARDEN_STATE,null)},a.prototype.addGardenTool=function(a,t,e){void 0===t&&(t=1),void 0===e&&(e=!0);var o=c.pzaLocalData.data.gardenToolNum;o[""+a]||(o[""+a]=0),o[""+a]+=t,c.pzaLocalData.addDirty("gardenToolNum"),console.log("\u82b1\u56ed\u52a0\u5165\u65b0\u5de5\u5177",a,t),e&&h.default.sendMsg("addNewGardenTool")},a.prototype.useGardenTool=function(t,e){if(void 0===e&&(e=1),a.numToolMap.has(t)){var o=c.pzaLocalData.data.gardenToolNum;o[""+t]&&(o[""+t]-=e,o[""+t]<0&&(o[""+t]=0),c.pzaLocalData.addDirty("gardenToolNum"))}},a.prototype.savePlant=function(a){for(var t=c.pzaLocalData.data.gardenPlants,e=0;e<t.length;e++)if(t[e].id===a.id)return c.pzaLocalData.data.gardenPlants[e]=a.toJson(),void c.pzaLocalData.addDirty("gardenPlants")},a.prototype.removePlant=function(a){for(var t=this,e=c.pzaLocalData.data.gardenPlants,o=0;o<e.length;o++)if(e[o].id===a.id)return c.pzaLocalData.data.gardenPlants.splice(o,1),c.pzaLocalData.addDirty("gardenPlants"),void this.curGardenPlantMap.get(a.env).forEach(function(e,o){e.id===a.id&&t.curGardenPlantMap.get(a.env).splice(o,1)})},a.prototype.changeEnv=function(a,t){var e=this;a.env!==t&&(this.curGardenPlantMap.get(a.env).forEach(function(t,o){t.id!==a.id||e.curGardenPlantMap.get(a.env).splice(o,1)}),a.env=t,this.curGardenPlantMap.has(t)||this.curGardenPlantMap.set(t,[]),this.curGardenPlantMap.get(t).push(a))},a.prototype.saveAllPlants=function(){var a=[];this.curGardenPlantMap.forEach(function(t){for(var e=0;e<t.length;e++)a.push(t[e].toJson())}),c.pzaLocalData.data.gardenPlants=a,c.pzaLocalData.addDirty("gardenPlants")},a.prototype.checkPlantState=function(a){var t=!1,e=Date.now();return this.curGardenPlantMap.forEach(function(o){null!=o&&o.forEach(function(o){null!=o&&o.opType==a&&o.opTime>0&&o.opTime<e&&(t=!0)})}),t},a.prototype.randomGardenPlant=function(a){var t=[],e=[];if(a<=0||Math.random()>a){for(var o=l.pzaPlantEnum.PEA_SHOOTER;o<=l.pzaPlantEnum.MELON_PULT;o++)o!=l.pzaPlantEnum.FLOWER_POT&&(t.push(o),e.push(this.getGardenPlantConf(o).ratio));return t[u.pzaUtil.getRandomIndexByWeight(e)]}var n=new Set,i=c.pzaLocalData.data.gardenPlants;for(o=0;o<i.length;o++){var r=i[o];null!=r&&n.add(r.plantId)}for(o=l.pzaPlantEnum.PEA_SHOOTER;o<=l.pzaPlantEnum.MELON_PULT;o++)o!=l.pzaPlantEnum.FLOWER_POT&&(n.has(o)||(t.push(o),e.push(this.getGardenPlantConf(o).ratio)));if(t.length<=0&&(a<=0||Math.random()>a)){for(o=l.pzaPlantEnum.PEA_SHOOTER;o<=l.pzaPlantEnum.MELON_PULT;o++)o!=l.pzaPlantEnum.FLOWER_POT&&(t.push(o),e.push(this.getGardenPlantConf(o).ratio));return t[u.pzaUtil.getRandomIndexByWeight(e)]}return t[u.pzaUtil.getRandomIndexByWeight(e)]},a.prototype.dropGardenPlant=function(){var a=0;switch(s.pzaGameState.curChapter>5?s.pzaGameState.curChapter-5:s.pzaGameState.curChapter){case 1:a=this.chapter1Drop();break;case 2:a=this.chapter2Drop();break;case 3:a=this.chapter3Drop();break;case 4:a=this.chapter4Drop();break;case 5:a=this.chapter5Drop()}c.pzaLocalData.data.dropPlantArr.push(a),c.pzaLocalData.addDirty("dropPlantArr")},a.prototype.chapter1Drop=function(){var a=[l.pzaPlantEnum.PEA_SHOOTER,l.pzaPlantEnum.SUN_FLOWER,l.pzaPlantEnum.CHERRY_BOMB,l.pzaPlantEnum.WALL_NUT,l.pzaPlantEnum.POTATO_MINE,l.pzaPlantEnum.SNOW_PEA,l.pzaPlantEnum.CHOMPER,l.pzaPlantEnum.REPEATER];return u.pzaUtil.getRandomValueFromArray(a)},a.prototype.chapter2Drop=function(){var a=[l.pzaPlantEnum.PUFF_SHROOM,l.pzaPlantEnum.SUN_SHROOM,l.pzaPlantEnum.FUME_SHROOM,l.pzaPlantEnum.GRAVE_BUSTER,l.pzaPlantEnum.HYPNO_SHROOM,l.pzaPlantEnum.SCAREDY_SHROOM,l.pzaPlantEnum.ICE_SHROOM,l.pzaPlantEnum.DOOM_SHROOM];return u.pzaUtil.getRandomValueFromArray(a)},a.prototype.chapter3Drop=function(){var a=[l.pzaPlantEnum.LILY_PAD,l.pzaPlantEnum.SQUASH,l.pzaPlantEnum.THREE_PEATER,l.pzaPlantEnum.TANGLE_KELP,l.pzaPlantEnum.JALAPENO,l.pzaPlantEnum.SPIKEWEED,l.pzaPlantEnum.TORCHWOOD,l.pzaPlantEnum.TALL_NUT];return u.pzaUtil.getRandomValueFromArray(a)},a.prototype.chapter4Drop=function(){var a=[l.pzaPlantEnum.SEA_SHROOM,l.pzaPlantEnum.PLANTERN,l.pzaPlantEnum.CACTUS,l.pzaPlantEnum.BLOVER,l.pzaPlantEnum.SPLIT_PEA,l.pzaPlantEnum.STAR_FRUIT,l.pzaPlantEnum.PUMPKIN,l.pzaPlantEnum.MAGNET_SHROOM];return u.pzaUtil.getRandomValueFromArray(a)},a.prototype.chapter5Drop=function(){var a=[l.pzaPlantEnum.CABBAGE_PULT,l.pzaPlantEnum.KERNEL_PULT,l.pzaPlantEnum.COFFEE_BEAN,l.pzaPlantEnum.GARLIC,l.pzaPlantEnum.UMBRELLA_LEAF,l.pzaPlantEnum.MELON_PULT];return u.pzaUtil.getRandomValueFromArray(a)},a.prototype.hasAllGardenPlant=function(){for(var a=new Set,t=c.pzaLocalData.data.gardenPlants,e=0;e<t.length;e++){var o=t[e];null!=o&&a.add(o.plantId)}for(e=l.pzaPlantEnum.PEA_SHOOTER;e<=l.pzaPlantEnum.MELON_PULT;e++)if(e!=l.pzaPlantEnum.FLOWER_POT&&!a.has(e))return!1;return!0},a.prototype.isDropGardenPlant=function(){for(var a=0,t=c.pzaLocalData.data.gardenPlants||[],e=0;e<t.length;e++)t[e].env===o.normal&&a++;return!(a+c.pzaLocalData.data.dropPlantArr.length>=32)},a._me=null,a.opGapTime=1e4,a.numToolMap=new Map([[i.manure,1],[i.pesticide,1],[i.chocolate,1]]),a}();e.default=z,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../Common/pzaLocalData":"pzaLocalData","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../utils/pzakc":"pzakc","./pzaGardenPlant":"pzaGardenPlant","./pzaGardenPlantConfig":"pzaGardenPlantConfig"}],pzaGardenPlantConfig:[function(a,t,e){"use strict";cc._RF.push(t,"57b1bqRI45FSKvH8QOofR3i","pzaGardenPlantConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenPlantConfig=void 0;var o=function(){function a(a){this.id=0,this.plantId=0,this.name="",this.plantSpine="",this.skin="",this.ani="",this.from="",this.price1=0,this.price2=0,this.price3=0,this.ratio=0,this.id=a.id,this.plantId=a.plantId,this.name=a.name||"",this.plantSpine=a.plantSpine||"",this.skin=a.skin||"",this.ani=a.ani||"",this.from=a.from||"",this.price1=a.price1||0,this.price2=a.price2||0,this.price3=a.price3||0,this.ratio=a.ratio||0}return a.prototype.isFromShop=function(){return"shop"===this.from},a}();e.pzaGardenPlantConfig=o,cc._RF.pop()},{}],pzaGardenPlant:[function(a,t,e){"use strict";cc._RF.push(t,"49310gXvulP3rT+g9EkECHt","pzaGardenPlant"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenPlant=void 0;var o=a("../utils/pzakc"),n=a("./pzaGardenMgr"),i=a("../Battle/Data/pzaDropType"),r=a("../Achieve/pzaAchieveMgr"),p=function(){function a(a,t,e,o){this.id=null,this.plantId=0,this.level=0,this.pos=0,this.env=n.pzaGardenEnv.normal,this.opTime=0,this.opType=0,this.opLeft=0,this.lightGoneTime=0,this.cdCount=0,this.opGapTime=1e4,this.pot=null,this.towards=1,this.plantId=t,this.pos=e,this.env=o,this.id=a||""+e+o+Date.now()}return a.create=function(t){var e=new a(t.id,t.plantId,t.pos,t.env);return e.level=t.level||0,void 0===t.opLeft?(e.opType=n.pzaGardenOpType.water,e.opTime=Date.now()+n.default.opGapTime,e.opLeft=e.getLeftTimes()):(e.opType=t.opType||n.pzaGardenOpType.water,e.opTime=t.opTime||Date.now()+n.default.opGapTime,e.opLeft=t.opLeft),e.towards=t.towards||(Math.random()<.5?-1:1),e.cdCount=t.cdCount=0,e.lightGoneTime=t.lightGoneTime||0,e},a.prototype.getLeftTimes=function(){var a=o.default.randomDraw({3:.3333,4:.3333,5:.3333});return parseInt(a)},a.prototype.goNextOp=function(a,t,e){void 0===t&&(t=Date.now()),void 0===e&&(e=this.getLeftTimes()),this.opType=a,this.opLeft=e,this.opTime=t+this.opGapTime,this.cdCount++,this.cdCount>5&&(this.opTime=t+36e5)},a.prototype.goLight=function(a,t){void 0===a&&(a=Date.now()),void 0===t&&(t=!1),this.opType=n.pzaGardenOpType.income,this.opLeft=1,this.level=4,(this.lightGoneTime<=0||t)&&(this.lightGoneTime=a+36e6);var e=this.lightGoneTime-a;if(e<=0)return this.level=3,void this.goNextOp(n.pzaGardenOpType.water,a);var i=36e6-e,r=0;if(i<9e5)r=o.default.randomInt(20,30);else if(i<18e6){var p=Math.ceil(i/9e5);r=o.default.randomInt(30*p,30*(p+1))}else r=o.default.randomInt(900,1200);this.pot.isSpeedUp&&(r/=2),this.opTime=1e3*r+a},a.prototype.doOperation=function(){if(this.opLeft>0){var a=Date.now();if(this.canLight()){if(this.lightGoneTime<=0||a>this.lightGoneTime)return this.level=3,this.goNextOp(n.pzaGardenOpType.water,a),new n.pzaGardenOpResult(0,null,!1,!1,!1,!0);if(this.opType===n.pzaGardenOpType.water){var t=Math.random()<.3?n.pzaGardenOpType.phonograph:n.pzaGardenOpType.pesticide;return this.goNextOp(t,a,1),new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0)}return this.goLight(a),null}if(this.opTime<a)if(this.opLeft--,this.opLeft<=0){if(this.opGapTime=n.default.opGapTime,this.opType===n.pzaGardenOpType.water)return 3===this.level?(this.goNextOp(n.pzaGardenOpType.pesticide,a,1),new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0)):(this.goNextOp(n.pzaGardenOpType.manure,a,1),new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0));if(this.opType===n.pzaGardenOpType.pesticide)return this.goLight(a,!0),this.env===n.pzaGardenEnv.water?new n.pzaGardenOpResult(3,i.pzaDropType.GOLD_COIN,!1,!1,!0):new n.pzaGardenOpResult(1,i.pzaDropType.GOLD_COIN,!1,!1,!0);if(this.opType===n.pzaGardenOpType.phonograph)return this.goLight(a,!0),this.env===n.pzaGardenEnv.water?new n.pzaGardenOpResult(3,i.pzaDropType.GOLD_COIN,!1,!1,!0):new n.pzaGardenOpResult(1,i.pzaDropType.GOLD_COIN,!1,!1,!0);if(this.opType===n.pzaGardenOpType.manure)return this.goNextOp(n.pzaGardenOpType.water,a),this.level<4&&this.level++,3===this.level&&r.default.instance().addMature(),1===this.level?new n.pzaGardenOpResult(1,i.pzaDropType.GOLD_COIN,!1,!0):2===this.level?new n.pzaGardenOpResult(2,i.pzaDropType.GOLD_COIN,!1,!0):this.env===n.pzaGardenEnv.water?new n.pzaGardenOpResult(2,i.pzaDropType.DIAMOND,!1,!0):new n.pzaGardenOpResult(1,i.pzaDropType.DIAMOND,!1,!0)}else{if(this.opType===n.pzaGardenOpType.water)return this.goNextOp(n.pzaGardenOpType.water,a,this.opLeft),this.env===n.pzaGardenEnv.water?null:new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0);this.opLeft=1}}return null},a.prototype.canLight=function(){return 4===this.level},a.prototype.toJson=function(){return{id:this.id,plantId:this.plantId,towards:this.towards,level:this.level,pos:this.pos,env:this.env,opTime:this.opTime,opType:this.opType,opLeft:this.opLeft,lightGoneTime:this.lightGoneTime}},a}();e.pzaGardenPlant=p,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../utils/pzakc":"pzakc","./pzaGardenMgr":"pzaGardenMgr"}],pzaGardenPot:[function(a,t,e){"use strict";cc._RF.push(t,"f845cbgBS1KiZFxOIwQn3cR","pzaGardenPot");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenPot=void 0;var r=a("../Battle/Data/pzaDropType"),p=a("./pzaGardenMgr"),l=a("../Load/pzaBundleObjectPool"),s=a("../utils/pzaResMgr"),c=a("../utils/pzakc"),u=a("./pzaGardenShadow"),d=a("../Common/pzaSoundManager"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.water_shadow=null,t.pumpkin=null,t.pic_pot=null,t.pic_water=null,t.pic_op=null,t.spine_plant=null,t.spine_light=null,t.spine_sleep=null,t.plant=null,t.plantConf=null,t.view=null,t.isLock=!1,t.isForShow=!1,t.isSpeedUp=!1,t.color_gray=(new cc.Color).fromHEX("#747474"),t.choosingTW=null,t}return n(t,a),t.prototype.onTouchStart=function(){if(!this.isForShow&&this.view&&this.view.curTool&&this.view.curTool.isChoosing){var a=this.view.curTool.getOpType();if(a!==p.pzaGardenOpType.null)a===this.plant.opType&&this.choosing();else{if(this.view.glovePot)return;this.view.curTool.exec(null,!1,this.node)}}},t.prototype.onTouchEnd=function(){var a=this;if(!this.isForShow&&this.view&&this.view.curTool&&this.view.curTool.isChoosing){var t=this.view.curTool.getOpType();t!==p.pzaGardenOpType.null&&this.view.curTool.exec(this.node.getPosition(),!0,this.node,function(){a.doOperation(t),a.isLock=!1,a.view.curTool.updateToolNum()},this)}},t.prototype.init=function(a,t){if(this.plant=a,this.view=t,this.plant.pot=this,this.node.parent=this.view.pots_container,a.pos<0){t.cartPot=this;var e=t.toolMap.get(p.pzaGardenToolType.cart);e&&e.putInCart(this)}else{var o=this.view.curShadowArr[a.pos];this.node.setPosition(o.getPosition()),o.getComponent(u.pzaGardenShadow).pot=this}return this.plantConf=p.default.instance().getGardenPlantConf(a.plantId),this.show(),this.node.zIndex=a.pos+1,this},t.prototype.getPrice=function(){var a=1500;return 1===this.plant.level?a=this.plantConf.price1:2===this.plant.level?a=this.plantConf.price2:this.plant.level>=3&&(a=this.plantConf.price3),a},t.prototype.remove=function(){p.default.instance().removePlant(this.plant),this.node.removeFromParent(!0),this.node.destroy()},t.prototype.speedUp=function(){var a=this;if(4===this.plant.level){this.isSpeedUp=!0,this.spine_plant.timeScale=2,this.pumpkin.timeScale=2;var t=Date.now();this.plant.opTime>t&&(this.plant.opTime=(this.plant.opTime-t)/2+t),this.scheduleOnce(function(){a.spine_plant.timeScale=1,a.pumpkin.timeScale=1,a.isSpeedUp=!1},60)}},t.prototype.canBeChoosed=function(a){return a<0||!(this.plant.opType!==a||!this.pic_op.node.active)},t.prototype.willBeChoosed=function(a,t){void 0===t&&(t=!1),!t&&this.canBeChoosed(a)||(this.spine_plant.node.color=this.color_gray,this.pic_pot.node.color=this.color_gray,this.hideChoosingEffect())},t.prototype.unChoosed=function(){this.unChoosing(),this.node.opacity=255},t.prototype.reShow=function(a){var t=this;this.node.parent=this.view.pots_container,this.changePos(a),this.isForShow=!1,this.isLock=!1,this.pic_op=this.node.getChildByName("pic_op").getComponent(cc.Sprite),this.node.scale=1,this.show();var e="garden_move_normal",o=null;this.view.curEnv===p.pzaGardenEnv.night?(e="garden_move_night",o="Effect/PlantEffect/05_plant"):this.view.curEnv===p.pzaGardenEnv.water&&(e="garden_move_water",o="Effect/PlantEffect/13_water"),d.pzaSoundManager.playAudio(e),o&&s.pzaResMgr.instance().getSpineSync(o,function(e,o){if(e)console.error(e);else{var n=new cc.Node,i=n.addComponent(sp.Skeleton);i.skeletonData=o,n.setPosition(a.node.getPosition()),n.parent=t.view.layer_tip,i.setCompleteListener(function(){n.destroy()}),i.setAnimation(0,"idle",!1)}})},t.prototype.showChoosingEffect=function(){var a=this;if(!this.choosingTW){var t=function(t,e,o,n){var i=t+(e-t)*n;return a.pic_pot.getMaterial(0).setProperty("brightness",i),a.spine_plant.getMaterial(0).setProperty("brightness",i),i};this.choosingTW=cc.tween({c:1}).repeatForever(cc.tween().to(.5,{c:3},{progress:t}).to(.5,{c:1},{progress:t})),this.choosingTW.start()}},t.prototype.choosing=function(){this.isLock=!0,this.showChoosingEffect()},t.prototype.onlyForShow=function(){this.isForShow=!0,this.unChoosed()},t.prototype.hideChoosingEffect=function(){this.choosingTW&&(this.choosingTW.stop(),this.choosingTW=null,this.pic_pot.getMaterial(0).setProperty("brightness",1),this.spine_plant.getMaterial(0).setProperty("brightness",1))},t.prototype.unChoosing=function(){this.isLock=!1,this.spine_plant.node&&(this.spine_plant.node.color=cc.Color.WHITE),this.pic_pot.node&&(this.pic_pot.node.color=cc.Color.WHITE),this.hideChoosingEffect()},t.prototype.watered=function(){var a=this;"Texture/MainView/GardenView/garden_pot"===this.pic_pot.spriteFrame.name&&l.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_pot_wet",function(t,e){null==t?e?a.pic_pot.spriteFrame=e:c.default.err("\u65e0pot\u56fe"):console.error(t)})},t.prototype.unwatered=function(){var a=this;"Texture/MainView/GardenView/garden_pot_wet"===this.pic_pot.spriteFrame.name&&l.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_pot",function(t,e){null==t?e?a.pic_pot.spriteFrame=e:c.default.err("\u65e0pot\u56feunwatered"):console.error(t)})},t.prototype.isSleep=function(){return!1},t.prototype.getLevelScale=function(){return this.plant.env!==this.view.curEnv&&this.view.curEnv===p.pzaGardenEnv.normal?.6:1===this.plant.level?.5:2===this.plant.level?.7:.9},t.prototype.fixSpineY=function(){7==this.plant.plantId?this.spine_plant.node.x=-15:this.spine_plant.node.x=0,17===this.plant.plantId?this.spine_plant.node.y=15:20==this.plantConf.plantId?this.spine_plant.node.y=-30:25==this.plantConf.plantId?this.spine_plant.node.y=-40:this.spine_plant.node.y=0},t.prototype.updatePlantAni=function(){if(39===this.plant.plantId&&this.plant.level>0&&this.spine_plant.setSkin("skin1"),this.water_shadow.active=!1,0===this.plant.level){var a=39===this.plant.plantId?"idle3":"idle4";this.spine_plant.setAnimation(0,a,!0),this.view.curEnv!==p.pzaGardenEnv.normal&&(this.pic_pot.node.active=!1,this.water_shadow.active=!0),this.spine_plant.node.scale=1,this.pumpkin.node.scale=1,this.spine_plant.node.scaleX=1*this.plant.towards,this.pumpkin.node.scale=1}else a=this.spine_plant.findAnimation("idle")?"idle":"idle1",this.isSleep()?(this.spine_sleep.node.active=!0,this.spine_sleep.setAnimation(0,"idle",!0),a=this.plantConf.ani?this.plantConf.ani:"idle2"):this.plantConf.ani&&(a=this.plantConf.ani),this.spine_plant.setAnimation(0,a,!0),this.spine_plant.paused=!1,31==this.plantConf.plantId&&(this.pumpkin.setAnimation(0,a,!0),this.pumpkin.paused=!1,this.pumpkin.timeScale=.985),this.pic_water.node.active=!1,this.view.curEnv===p.pzaGardenEnv.normal?this.pic_pot.node.active=!0:(this.pic_pot.node.active=!1,this.view.curEnv===p.pzaGardenEnv.water&&(this.water_shadow.active=!0,this.isForShow&&(this.pic_water.node.active=!0))),this.spine_plant.node.scale=this.getLevelScale(this.plant),38==this.plantConf.plantId?this.spine_plant.node.scale*=3:10==this.plantConf.plantId&&(this.spine_plant.node.scale*=.6),this.spine_plant.node.scaleX*=this.plant.towards,this.spine_plant.premultipliedAlpha=!1,this.plant.canLight()&&this.showLight(),this.fixSpineY();this.spine_plant.paused=!1,this.pumpkin.paused=!1},t.prototype.changePos=function(a){var t=this.plant.pos;this.plant.pos=a.posId,a.pot=null,this.plant.env!==this.view.curEnv?p.default.instance().changeEnv(this.plant,this.view.curEnv):t>=0&&t!==this.plant.pos&&(this.view.curShadowArr[t].getComponent(u.pzaGardenShadow).pot=null),this.node.setPosition(a.node.getPosition()),this.view.curShadowArr[this.plant.pos].getComponent(u.pzaGardenShadow).pot=this,p.default.instance().savePlant(this.plant),d.pzaSoundManager.playAudio("garden_move_normal"),this.pic_water.node.active=!1,this.view.curEnv!==p.pzaGardenEnv.normal||this.pic_pot.node.active||(this.pic_pot.node.active=!0),this.node.zIndex=a.posId+1},t.prototype.show=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null),this.unChoosed(),this.spine_sleep.node.active=!1,this.spine_light.node.active=!1,this.pic_op.node.active=!1;var o=0===this.plant.level?"Plant/50_plant":this.plantConf.plantSpine;s.pzaResMgr.instance().getSpineSync(o,function(a,o){a?console.error(a):e.spine_plant&&(e.spine_plant.skeletonData=o,e.plantConf.skin&&e.plant.level>0&&e.spine_plant.setSkin(e.plantConf.skin),e.plant.level>0&&(7==e.plantConf.plantId||28==e.plantConf.plantId||1==e.plantConf.plantId||2==e.plantConf.plantId||6==e.plantConf.plantId||18==e.plantConf.plantId?e.spine_plant.setSkin("skin1"):4==e.plantConf.plantId&&e.spine_plant.setSkin("body_1"),31==e.plantConf.plantId&&(e.pumpkin.node.active=!0,e.pumpkin.timeScale=e.spine_plant.timeScale)),e.updatePlantAni(),t&&t.call(e))});var n=Date.now();3==this.plant.level&&this.plant.opType==p.pzaGardenOpType.income&&this.plant.opLeft<=0&&this.plant.opTime>0&&this.plant.opTime<n&&(this.plant.opType=p.pzaGardenOpType.water,this.plant.opLeft=parseInt(c.default.randomDraw({3:.3333,4:.3333,5:.3333}))),4==this.plant.level&&this.showLight(),this.updateState()},t.prototype.showLight=function(){this.spine_light.node.active=!0;var a="idle1";this.view.curEnv===p.pzaGardenEnv.normal?"Texture/MainView/GardenView/garden_pot_water"===this.pic_pot.spriteFrame.name&&(a="idle3"):a="idle2",this.spine_light.setAnimation(0,a,!0)},t.prototype.doOperation=function(a){var t=this;if(this.plant&&this.canBeChoosed(a)){var e=this.plant.doOperation();if(p.default.instance().savePlant(this.plant),e){if(this.spine_light.node.active=!1,e.isLight&&this.showLight(),e.dropNum>0)for(var o=0;o<e.dropNum;o++)this.view.dropCoin(this.node.getPosition(),e.dropType);if(e.isWet&&this.watered(),e.isLevelUp){var n=this.getLevelScale(this.plant);1===this.plant.level?this.show(!1,function(){cc.tween(t.spine_plant.node).to(1,{scaleX:n*t.plant.towards,scaleY:n}).start()}):cc.tween(this.spine_plant.node).to(1,{scaleX:n*this.plant.towards,scaleY:n}).start(),d.pzaSoundManager.playAudio("garden_plantgrow")}this.pic_op.node.active=!1}}},t.prototype.updateState=function(){var a=this;if(!this.spine_sleep.node.active&&this.plant){this.plant.canLight&&(this.spine_light.node.active=!0);var t=Date.now();if(this.plant.canLight()&&this.plant.lightGoneTime<t)return this.plant.doOperation(),p.default.instance().savePlant(this.plant),void(this.spine_light.node.active=!1);if(this.plant.opLeft>0&&this.plant.opTime>0&&this.plant.opTime<t){if(this.pic_op.node.active)return;if(this.pic_op.node.active=!1,this.plant.opType===p.pzaGardenOpType.income){var e=Math.random()<.025?r.pzaDropType.GOLD_COIN:r.pzaDropType.SILVER_COIN;this.view.dropCoin(this.node.getPosition(),e);var o=this.plant.doOperation();p.default.instance().savePlant(this.plant),o&&o.offLight&&(this.spine_light.node.active=!1)}else{this.pic_op.node.active=!0;var n=p.default.instance().opPicMap.get(this.plant.opType);l.pzaBundleObjectPool.requestSpriteFrameByUrl(n,function(t,e){null==t?e?a.pic_op&&(a.pic_op.spriteFrame=e,a.plant.opType===p.pzaGardenOpType.water?(a.pic_op.node.scale=1,a.unwatered()):a.pic_op.node.scale=1):c.default.err("\u82b1\u56ed\u65e0op\u56fe"):console.error(t)})}}}},t.prototype.update=function(){this.isLock||this.updateState()},i([f({displayName:"\u6c34\u751f\u5e7c\u82d7\u9634\u5f71",type:cc.Node})],t.prototype,"water_shadow",void 0),i([f({type:sp.Skeleton})],t.prototype,"pumpkin",void 0),i([f({displayName:"\u82b1\u76c6\u56fe",type:cc.Sprite})],t.prototype,"pic_pot",void 0),i([f({displayName:"\u82b1\u76c6\u6c34\u56fe",type:cc.Sprite})],t.prototype,"pic_water",void 0),i([f({displayName:"\u64cd\u4f5c\u7c7b\u578b\u56fe",type:cc.Sprite})],t.prototype,"pic_op",void 0),i([f({displayName:"\u690d\u7269spine",type:sp.Skeleton})],t.prototype,"spine_plant",void 0),i([f({displayName:"\u53d1\u5149",type:sp.Skeleton})],t.prototype,"spine_light",void 0),i([f({displayName:"\u7761\u89c9",type:sp.Skeleton})],t.prototype,"spine_sleep",void 0),i([m],t)}(cc.Component);e.pzaGardenPot=z,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaGardenMgr":"pzaGardenMgr","./pzaGardenShadow":"pzaGardenShadow"}],pzaGardenShadow:[function(a,t,e){"use strict";cc._RF.push(t,"1c55ehgrAxMcK6K+8S4IhPN","pzaGardenShadow");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenShadow=void 0;var r=a("./pzaGardenMgr"),p=a("./pzaGardenView"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.view=null,t.posId=0,t.pot=null,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.view=this.node.parent.parent.parent.parent.getComponent(p.pzaGardenView),this.view||(this.view=this.node.parent.parent.parent.getComponent(p.pzaGardenView))},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchStart=function(){if(this.view&&(!this.view.curTool||this.view.curTool.type!==r.pzaGardenToolType.goldWaterPot))if(this.pot&&this.pot.node)this.pot.onTouchStart();else if(this.view.cartPot&&this.view.curTool&&this.view.curTool.type===r.pzaGardenToolType.cart)(a=this.view.toolMap.get(r.pzaGardenToolType.cart))&&a.execTarget(this);else if(this.view.glovePot&&this.view.curTool&&this.view.curTool.type===r.pzaGardenToolType.glove){var a;(a=this.view.toolMap.get(r.pzaGardenToolType.glove))&&a.execTarget(this)}},t.prototype.onTouchEnd=function(){this.pot&&this.view&&this.view.curTool&&this.view.curTool.type!==r.pzaGardenToolType.goldWaterPot&&this.pot.onTouchEnd()},i([s],t)}(cc.Component));e.pzaGardenShadow=c,cc._RF.pop()},{"./pzaGardenMgr":"pzaGardenMgr","./pzaGardenView":"pzaGardenView"}],pzaGardenSnail:[function(a,t,e){"use strict";cc._RF.push(t,"21d1eYCqihAeaMR/47RoFBe","pzaGardenSnail");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenSnail=e.pzaGardenSnailState=void 0;var r,p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../utils/pzakc"),c=a("./pzaGardenDropCoin"),u=a("./pzaGardenMgr"),d=cc._decorator,h=d.ccclass,m=d.property;(function(a){a.collect="collect",a.sleep="sleep"})(r=e.pzaGardenSnailState||(e.pzaGardenSnailState={}));var f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine_snail=null,t.spine_sleep=null,t.sleep_arrow=null,t.chocolateNode=null,t.view=null,t.state=r.collect,t.targetNode=null,t.maxActiveTime=60,t.activeTime=0,t.speedX=50,t.speedXSwitchTime=1,t.speedY=50,t.isLock=!0,t.speedUp=1,t.speedTime=0,t}return n(t,a),t.prototype.onEnable=function(){var a=this;this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.speedTime=p.pzaLocalData.data.snailSpeedUpTime,this.speedTime>0&&(this.speedUp=2,this.scheduleOnce(function(){a.speedUp=1},this.speedTime))},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.init=function(a){var t=this;return this.view=a,this.node.parent=a.layer_snail,this.node.active=!0,this.node.setPosition(cc.v2(-10,-10)),this.scheduleOnce(function(){t.changeTarget(null,!0)}),this.stateCollect(),this.chocolateNode.active=!1,this},t.prototype.onTouchStart=function(a){this.state!==r.sleep?this.view.curTool&&this.view.curTool.type===u.pzaGardenToolType.chocolate&&this.view.curTool.isChoosing&&(this.eatChocolate(),this.view.curTool.updateToolNum(),this.view.curTool.playAni(this.view.layer_tool_drag.convertToNodeSpaceAR(a.getLocation()),null,null)):this.wakeUp()},t.prototype.eatChocolate=function(){var a=this;this.speedUp=2,this.speedTime=3600,p.pzaLocalData.data.snailSpeedUpTime=this.speedTime,p.pzaLocalData.addDirty("snailSpeedUpTime"),this.scheduleOnce(function(){a.speedUp=1},this.speedTime),l.pzaSoundManager.playAudio("garden_speedup")},t.prototype.hide=function(){this.isLock=!0,this.node.active=!1},t.prototype.show=function(){this.isLock=!1,this.node.active=!0},t.prototype.wakeUp=function(){var a=this;this.isLock=!0,this.spine_snail.setCompleteListener(null),this.spine_snail.setCompleteListener(function(){a.isLock=!1,a.spine_snail.setCompleteListener(null),a.spine_snail.setAnimation(0,"move",!0),a.stateCollect()}),this.spine_snail.setAnimation(0,"out",!1)},t.prototype.toSleep=function(){var a=this;this.isLock=!0,this.spine_snail.setCompleteListener(null),this.spine_snail.setCompleteListener(function(){a.isLock=!1,a.stateSleep()}),this.spine_snail.setAnimation(0,"in",!1)},t.prototype.findTarget=function(a){void 0===a&&(a=null);for(var t=this.view.layer_coin.children,e=this.node.getPosition(),o=null,n=1280,i=0;i<t.length;i++){var r=t[i];if(r.getComponent(c.pzaGardenDropCoin).canPick){var p=e.sub(r.getPosition()).mag();p<n&&(n=p,o=r)}}if(o)n<10&&(o.getComponent(c.pzaGardenDropCoin).pickUp(),this.changeTarget());else{if(t=this.view.pots_container.children,a){var l=[];for(i=0;i<t.length;i++)t[i].uuid!==a.uuid&&l.push(t[i]);t=l}o=s.default.randomChoose(t,1)[0]}return o},t.prototype.changeTarget=function(a,t){var e=this;if(void 0===a&&(a=null),void 0===t&&(t=!1),this.targetNode=this.findTarget(a),this.targetNode){var o=this.node.x;this.targetNode.x>o&&this.node.scaleX<0||this.targetNode.x<o&&this.node.scaleX>0?(this.isLock=!0,this.spine_snail.setCompleteListener(null),this.spine_snail.setCompleteListener(function(){e.node.scaleX=-e.node.scaleX,e.isLock=!1,e.spine_snail.setCompleteListener(null),e.spine_snail.setAnimation(0,"move",!0)}),this.spine_snail.setAnimation(0,"turn",!1)):t&&(this.isLock=!1,this.spine_snail.setCompleteListener(null),this.spine_snail.setAnimation(0,"move",!0))}else console.error("\u8717\u725b\u65e0\u76ee\u6807")},t.prototype.stateCollect=function(){this.activeTime=0,this.state=r.collect,cc.Tween.stopAllByTarget(this.sleep_arrow),this.spine_sleep.node.active=!1,this.sleep_arrow.active=!1,this.spine_sleep.paused=!0},t.prototype.stateSleep=function(){this.activeTime=this.maxActiveTime,this.state=r.sleep,this.spine_sleep.node.active=!0,this.sleep_arrow.active=!0,cc.Tween.stopAllByTarget(this.sleep_arrow),cc.tween(this.sleep_arrow).repeatForever(cc.tween().to(.2,{y:85}).to(.2,{y:50})).start(),this.spine_sleep.setAnimation(0,"idle",!0),this.spine_sleep.paused=!1,this.spine_snail.setCompleteListener(null),this.spine_snail.setAnimation(0,"idle1",!1)},t.prototype.update=function(a){if(!this.isLock&&this.state!==r.sleep)if(this.activeTime+=a,this.activeTime>=(this.speedUp>1?3600:this.maxActiveTime))this.toSleep();else{var t=this.node.getPosition();if(this.targetNode&&this.targetNode.isValid){this.targetNode&&!this.targetNode.getComponent(c.pzaGardenDropCoin)&&this.view.layer_coin.children.length>0&&this.changeTarget();var e=this.targetNode.getPosition();t.fuzzyEquals(e,10)&&(this.targetNode.getComponent(c.pzaGardenDropCoin)?(this.targetNode.getComponent(c.pzaGardenDropCoin).pickUp(),this.changeTarget()):this.changeTarget(this.targetNode)),this.speedXSwitchTime-=a,this.speedXSwitchTime<=0&&(50===this.speedX?(this.speedX=120,this.speedXSwitchTime=.6):(this.speedX=50,this.speedXSwitchTime=1));var o=e.sub(t),n=o.mag(),i=this.speedX*a*this.speedUp/n*o.x,p=this.speedY*a*this.speedUp/n*o.y;this.node.x+=i,this.node.y+=p}else this.changeTarget()}},t.prototype.showChololateNode=function(){this.chocolateNode.active=!0},t.prototype.hideChololateNode=function(){this.chocolateNode.active=!1},i([m({displayName:"\u8717\u725bspine",type:sp.Skeleton})],t.prototype,"spine_snail",void 0),i([m({displayName:"\u7761\u89c9spine",type:sp.Skeleton})],t.prototype,"spine_sleep",void 0),i([m({displayName:"\u7761\u89c9\u7bad\u5934",type:cc.Node})],t.prototype,"sleep_arrow",void 0),i([m({displayName:"\u5de7\u514b\u529b\u8282\u70b9",type:cc.Node})],t.prototype,"chocolateNode",void 0),i([h],t)}(cc.Component);e.pzaGardenSnail=f,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../utils/pzakc":"pzakc","./pzaGardenDropCoin":"pzaGardenDropCoin","./pzaGardenMgr":"pzaGardenMgr"}],pzaGardenTool:[function(a,t,e){"use strict";cc._RF.push(t,"9d63ec3acNAlLxgE9iS6YIg","pzaGardenTool");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenTool=void 0;var r=a("./pzaGardenMgr"),p=a("../Load/pzaBundleObjectPool"),l=a("../utils/pzaResMgr"),s=a("../utils/pzakc"),c=a("./pzaGardenView"),u=a("./pzaGardenPot"),d=a("./pzaGardenShadow"),h=a("../Common/pzaLocalData"),m=a("../Common/pzaSoundManager"),f=a("../Common/pzaOperationMgr"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.pic_tool=null,t.plant_cart=null,t.pic_plant_op=null,t.t_num=null,t.spine_tool=null,t.guide_arrow=null,t.type=r.pzaGardenToolType.waterPot,t.num=0,t.view=null,t.isDrag=!1,t.isChoosing=!1,t.isDoing=!1,t.dragNode=null,t.moveMinDist=50,t.moveStartPos=null,t.guideClickCall=null,t.guideUseCall=null,t.toolAudioMap=new Map([[r.pzaGardenToolType.manure,"garden_manure"],[r.pzaGardenToolType.phonograph,"garden_phonograph"],[r.pzaGardenToolType.waterPot,"garden_water"],[r.pzaGardenToolType.goldWaterPot,"garden_water"],[r.pzaGardenToolType.pesticide,"garden_pesticide"],[r.pzaGardenToolType.chocolate,"garden_wakeup"]]),t}var e;return n(t,a),e=t,t.prototype.getOpType=function(){return this.type===r.pzaGardenToolType.waterPot||this.type===r.pzaGardenToolType.goldWaterPot?r.pzaGardenOpType.water:this.type===r.pzaGardenToolType.manure?r.pzaGardenOpType.manure:this.type===r.pzaGardenToolType.pesticide?r.pzaGardenOpType.pesticide:this.type===r.pzaGardenToolType.phonograph?r.pzaGardenOpType.phonograph:this.type===r.pzaGardenToolType.chocolate?r.pzaGardenOpType.chocolate:r.pzaGardenOpType.null},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.plant_cart.removeAllChildren(),this.plant_cart.active=!1},t.prototype.onDisable=function(){this.unChoosed(!0),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.init=function(a,t){var e=this;this.type=a,this.view=t,this.node.parent=t.layer_tool,this.view.toolMap.set(this.type,this),this.plant_cart.active=!1,this.guide_arrow.active=!1,this.guideClickCall=null,r.default.numToolMap.has(this.type)?(this.t_num.node.active=!0,this.t_num.string="x"+(h.pzaLocalData.data.gardenToolNum[""+a]||0)):this.t_num.node.active=!1,this.type===r.pzaGardenToolType.cart&&t.cartPot&&this.putInCart(t.cartPot),p.pzaBundleObjectPool.requestSpriteFrameByUrl(r.default.instance().toolPicMap.get(this.type),function(a,t){null==a?t?e.pic_tool.spriteFrame=t:s.default.err("\u65e0tool\u56fe"):console.error(a)});var o=r.default.instance().toolSpineMap.get(this.type);return o&&l.pzaResMgr.instance().getSpineSync(o,function(a,t){a?console.error(a):e.spine_tool.skeletonData=t}),this},t.prototype.setTouchStart=function(a){this.moveStartPos=this.view.layer_tool_drag.convertToNodeSpaceAR(a.getLocation())},t.prototype.onTouchStart=function(a){c.pzaGardenView.toolInUse!=r.pzaGardenToolType.null&&c.pzaGardenView.toolInUse!==this.type||(this.isChoosing?this.unChoosed(!0):(c.pzaGardenView.toolInUse=this.type,this.view.curTool=this,m.pzaSoundManager.playAudio("garden_tool_click"),this.type!==r.pzaGardenToolType.nextEnv?(this.setTouchStart(a),this.choosed(),null!=this.guideClickCall&&(this.guideClickCall(),this.guideClickCall=null)):this.exec(null,!1,null)))},t.prototype.onTouchEnd=function(a){var t=this;if(this.isDrag){var e=null;if(this.dragNode&&(this.dragNode.isValid&&(e=this.view.dragPoint.getPosition(),this.dragNode.destroy()),this.dragNode=null),this.isChoosing&&e){if(this.type===r.pzaGardenToolType.glove&&this.view.glovePot)return void this.execTarget(this.view.curShadow);if(this.type===r.pzaGardenToolType.cart&&this.view.cartPot)return void this.unChoosed(!1);var o=this.getOpType(),n=this.view.choosedPots.slice();n.length>0?this.exec(e,!1,n[0].node,function(){for(var a=0;a<n.length;a++){var e=n[a];e.doOperation(o),e.unChoosing()}t.view.curTool.updateToolNum()},this):this.type===r.pzaGardenToolType.goldWaterPot&&this.playAni(this.view.layer_tool_drag.convertToNodeSpaceAR(a.getLocation()),null,null)}}else this.moveStartPos=null,this.isDrag=!1},t.prototype.onTouchMove=function(a){var t=this;if(this.isChoosing&&this.moveStartPos&&this.type!==r.pzaGardenToolType.nextEnv){var e=this.view.layer_tool_drag.convertToNodeSpaceAR(a.getLocation());if(!(e.sub(this.moveStartPos).mag()<this.moveMinDist)){if(this.type===r.pzaGardenToolType.glove&&this.view.glovePot)return this.dragNode?void this.view.dragPoint.setPosition(e):(this.isDrag=!0,this.dragNode=cc.instantiate(this.view.glovePot.node),this.dragNode.getComponent(u.pzaGardenPot).onlyForShow(),this.dragNode.scale=1.5,this.dragNode.parent=this.view.dragPoint,this.dragNode.setPosition(60,60),this.view.dragPoint.setPosition(e),void(this.view.glovePot.node.opacity=0));if(this.isDrag=!0,this.dragNode)this.view.dragPoint.setPosition(e);else{if(this.dragNode=cc.instantiate(this.pic_tool.node),this.dragNode.color=cc.Color.WHITE,this.type===r.pzaGardenToolType.goldWaterPot){if(this.isDoing)return;if(!this.dragNode.children[0]||"waterBall"!==this.dragNode.children[0].name)return void p.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_water_ball",function(a,o){if(null==a)if(o){var n=new cc.Node("waterBall");n.addComponent(cc.Sprite).spriteFrame=o,t.dragNode.parent=n,t.dragNode.setPosition(150,30),t.dragNode=n,t.dragNode.parent=t.view.dragPoint,t.view.dragPoint.setPosition(e)}else s.default.err("\u65e0\u6c34\u5708");else console.error(a)})}this.dragNode.setPosition(150,30),this.dragNode.parent=this.view.dragPoint,this.view.dragPoint.setPosition(e)}}}},t.prototype.putInCart=function(a){this.view.cartPot=a,a.isForShow=!0,a.unChoosed(),a.spine_plant.paused=!0,a.pumpkin.paused=!0,a.node.scale=.5,a.pic_op.node.active&&(this.pic_plant_op.spriteFrame=a.pic_op.spriteFrame),a.pic_op.node.active=!1,s.default.removeNodeChildren(this.plant_cart),a.node.parent=this.plant_cart,a.node.setPosition(0,0),a.plant.pos>=0&&(this.view.curShadowArr[a.plant.pos].getComponent(d.pzaGardenShadow).pot=null),a.pic_op=this.pic_plant_op,a.plant.opType===r.pzaGardenOpType.water?this.pic_plant_op.node.scale=1:this.pic_plant_op.node.scale=.6,a.plant.pos=-1,a.water_shadow.active=!1,a.pic_pot.node.active||(a.pic_water.node.active=!0),r.default.instance().savePlant(a.plant),this.plant_cart.active=!0,this.unChoosed(!1),m.pzaSoundManager.playAudio("garden_cart")},t.prototype.choosed=function(){if(r.default.numToolMap.has(this.type)&&!h.pzaLocalData.data.gardenToolNum[""+this.type])return this.view.showTip("\u6570\u91cf\u4e0d\u8db3!"),void this.unChoosed(!1);this.isChoosing=!0,this.view.chooseTool(this),this.choosedAni(this.pic_tool.node),this.type!==r.pzaGardenToolType.cart&&this.type!==r.pzaGardenToolType.glove||this.view.curEnv!==r.pzaGardenEnv.normal&&this.view.showShadows()},t.prototype.choosedAni=function(a,t){if(void 0===t&&(t=!1),t){var e=a.tw;return e&&e.stop(),void(a.color=cc.Color.WHITE)}var o=function(t,e,o,n){var i=t+(e-t)*n,r=new cc.Color(i,i,i);return a&&(a.color=r),i},n=cc.tween({c:255}).repeatForever(cc.tween().to(.5,{c:40},{progress:o}).to(.5,{c:255},{progress:o}));a.tw=n,n.start()},t.prototype.unChoosed=function(a){this.node?(this.isDrag=!1,this.pic_tool.node.color=cc.Color.WHITE,this.isChoosing=!1,this.isDoing=!1,this.dragNode=null,a&&this.view.unchooseTool(),this.choosedAni(this.pic_tool.node,!0),!1===this.pic_tool.node.active&&(this.pic_tool.node.active=!0,this.view.glovePot=null,this.view.hideShadows()),this.view.cartPot||(this.plant_cart.active=!1),this.type===r.pzaGardenToolType.sell?this.view.sellPot=null:this.type===r.pzaGardenToolType.cart&&(this.view.hideShadows(),this.view.unchooseTool()),c.pzaGardenView.toolInUse=r.pzaGardenToolType.null):c.pzaGardenView.toolInUse=r.pzaGardenToolType.null},t.prototype.playAni=function(a,t,e){if(void 0===e&&(e=null),!this.isDoing){this.isDoing=!0;var o=this.spine_tool.node;o.parent=this.view.layer_tool_drag,o.setPosition(a),o.active=!0,this.spine_tool.setCompleteListener(null);var n=this,i=!1,p=function(){i||(i=!0,o.active=!1,o.parent=n.node,t&&t.call(e),n.unChoosed(!0))},l="idle";this.type!==r.pzaGardenToolType.goldWaterPot&&this.type!==r.pzaGardenToolType.chocolate||(l="idle2");var s=this.spine_tool.findAnimation(l);s||(l="idle1",s=this.spine_tool.findAnimation(l)),this.scheduleOnce(p,s.duration+.1),this.spine_tool.setCompleteListener(p),this.type===r.pzaGardenToolType.chocolate?this.spine_tool.node.scale=.5:this.spine_tool.node.scale=1,this.spine_tool.setAnimation(0,l,!1);var c=this.toolAudioMap.get(this.type);if(c&&m.pzaSoundManager.playAudio(c),null!=this.guideUseCall){var u=this.guideUseCall;this.guideUseCall=null,u()}}},t.prototype.updateToolNum=function(a){if(void 0===a&&(a=1),r.default.numToolMap.has(this.type)){r.default.instance().useGardenTool(this.type,a),this.t_num.node.active=!0;var t=h.pzaLocalData.data.gardenToolNum[""+this.type]||0;this.t_num.string="x"+t,f.pzaOperationMgr.showGardenGift(t)}},t.prototype.exec=function(a,t,e,o,n){var i=this;if(void 0===o&&(o=null),void 0===n&&(n=null),this.type===r.pzaGardenToolType.nextEnv)return this.unChoosed(!0),this.view.nextEnv(),void(o&&o.call(n));if(this.type===r.pzaGardenToolType.glove)return!e||this.view.glovePot?void this.unChoosed(!0):(this.view.glovePot=e.getComponent(u.pzaGardenPot),this.view.glovePot.isLock=!0,this.view.glovePot.willBeChoosed(null,!0),this.isDoing=!0,void(this.pic_tool.node.active=!1));if(this.type===r.pzaGardenToolType.cart){if(!e||this.view.cartPot)return void this.unChoosed(!0);var p=e.getComponent(u.pzaGardenPot);return this.putInCart(p),void this.choosedAni(this.pic_tool.node,!0)}return this.type===r.pzaGardenToolType.sell?e?(this.unChoosed(!0),this.view.sellPot=e.getComponent(u.pzaGardenPot),void this.view.showSell()):void this.unChoosed(!0):this.type===r.pzaGardenToolType.chocolate?e?h.pzaLocalData.data.gardenToolNum[""+r.pzaGardenToolType.chocolate]?(e.getComponent(u.pzaGardenPot).speedUp(),this.updateToolNum(),void this.playAni(a,o,n)):(this.unChoosed(!0),console.error("\u5de7\u514b\u529b\u6570\u91cf\u4e0d\u8db3!"),void this.view.showTip("\u5de7\u514b\u529b\u6570\u91cf\u4e0d\u8db3!")):void this.unChoosed(!0):this.type===r.pzaGardenToolType.goldWaterPot?(this.playAni(a,function(){var a=i.view.choosedPots.slice();if(a.length>0)for(var t=0;t<a.length;t++){var e=a[t];e.doOperation(r.pzaGardenOpType.water),e.unChoosing()}},this),void this.view.curTool.updateToolNum()):void(!t&&this.view.choosedPots.length<=0?this.isDrag=!1:this.spine_tool.skeletonData&&a?this.playAni(a,o,n):this.unChoosed(!0))},t.prototype.execTarget=function(a){if(this.type!==r.pzaGardenToolType.sell){if(!a)return s.default.err("\u672a\u9009\u62e9\u76ee\u6807\u6216\u76ee\u6807\u4f4d\u7f6e"),void(this.view.glovePot&&(this.view.curShadowArr[this.view.glovePot.plant.pos].getComponent(d.pzaGardenShadow).pot=this.view.glovePot,this.view.glovePot.unChoosed(),this.unChoosed(!1)));if(this.type===r.pzaGardenToolType.glove){if(!this.view.glovePot)return;return this.view.glovePot.changePos(a),this.view.glovePot.unChoosed(),this.view.glovePot=null,void this.unChoosed(!1)}if(this.type===r.pzaGardenToolType.cart){var t=this.view.cartPot;if(!t)return void this.unChoosed(!1);var e=this.putEnvMsg(t);if(e)return console.error(e),void this.view.showTip(e);this.pic_plant_op.spriteFrame=null,t.reShow(a),this.view.cartPot=null,this.unChoosed(!1)}}},t.prototype.putEnvMsg=function(){return this.view.curEnv,null},t.prototype.showGuideArrow=function(a,t){this.guide_arrow.active=!0,this.guideClickCall=a,this.guideUseCall=t,cc.Tween.stopAllByTarget(this.guide_arrow),cc.tween(this.guide_arrow).repeatForever(cc.tween().to(.3,{y:-110}).to(.3,{y:-85})).start()},t.prototype.hideGuideArrow=function(){this.guide_arrow.active=!1},t.show=function(a,t){p.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Garden/garden_tool",!1,function(o,n){if(null==o&&null!=n){var i=n.getComponent(e);i&&i.init(a,t)}else console.error(o)})},i([g({displayName:"\u5de5\u5177\u56fe",type:cc.Sprite})],t.prototype,"pic_tool",void 0),i([g({displayName:"\u63a8\u8f66\u653e\u7684\u690d\u7269",type:cc.Node})],t.prototype,"plant_cart",void 0),i([g({displayName:"\u63a8\u8f66\u690d\u7269\u72b6\u6001\u56fe",type:cc.Sprite})],t.prototype,"pic_plant_op",void 0),i([g({displayName:"\u6570\u91cf",type:cc.Label})],t.prototype,"t_num",void 0),i([g({displayName:"\u5bf9\u5e94spine",type:sp.Skeleton})],t.prototype,"spine_tool",void 0),i([g({displayName:"\u5f15\u5bfc\u7bad\u5934",type:cc.Node})],t.prototype,"guide_arrow",void 0),e=i([y],t)}(cc.Component);e.pzaGardenTool=b,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaGardenMgr":"pzaGardenMgr","./pzaGardenPot":"pzaGardenPot","./pzaGardenShadow":"pzaGardenShadow","./pzaGardenView":"pzaGardenView"}],pzaGardenView:[function(a,t,e){"use strict";cc._RF.push(t,"dbaecoUK+pJfZ+nZqv2jsG2","pzaGardenView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenView=void 0;var r=a("./pzaGardenDropCoin"),p=a("../Common/pzaGameCommonPool"),l=a("./pzaGardenMgr"),s=a("../Common/pzaUIManager"),c=a("../Load/pzaPreLoadManager"),u=a("../utils/pzakc"),d=a("./pzaGardenPot"),h=a("./pzaGardenTool"),m=a("./pzaGardenShadow"),f=a("../Common/pzaGameConfig"),z=a("../Common/pzaLocalData"),y=a("../Common/pzaTipManager"),g=a("../Load/pzaBundleObjectPool"),b=a("./pzaGardenSnail"),v=a("../Common/pzaSoundManager"),P=a("../Battle/Data/pzaGuideType"),D=a("./pzaGardenDave"),S=a("../View/pzaShopView"),C=a("../Common/pzaUtil"),_=a("../Common/pzaStatisticsMgr"),E=a("../Common/pzaWorldEventManager"),M=a("../utils/pzaChannel"),w=cc._decorator,T=w.ccclass,B=w.property,A=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.dragPoint=null,t.layer_snail=null,t.layer_tip=null,t.layer_board=null,t.layer_coin=null,t.layer_tool_drag=null,t.layer_tool=null,t.pots_container=null,t.pic_bg=null,t.pots_normal_shadow=null,t.pots_night_shadow=null,t.pots_water_shadow=null,t.bt_shop=null,t.bt_home=null,t.moneyCount=null,t.moneyShowNode=null,t.moneyTarget=null,t.dave=null,t.prefab_pot=null,t.prefab_snail=null,t.skipGuideBtn=null,t.shadows_normal=[],t.shadows_night=[],t.shadows_water=[],t.toolMap=new Map,t.curEnv=l.pzaGardenEnv.normal,t.curShadowContainer=null,t.curShadowArr=null,t.curTool=null,t.glovePot=null,t.sellPot=null,t.cartPot=null,t.snail=null,t.curShadow=null,t.choosedPots=[],t.lastShowCoinCount=null,t.hideMoneyNodeTime=0,t.guideManureCheck=!1,t.isNeedRefreshPlants=!1,t.isNeedRefreshTools=!1,t.unPickCoin=0,t.clickCloseDelay=!0,t}var e;return n(t,a),e=t,t.prototype.onEnable=function(){var a=this;this.clickCloseDelay=!0,setTimeout(function(){a.clickCloseDelay=!1},2e3),"noAD"!=M.pzaChannel.instance().channel&&"oppo"!=M.pzaChannel.instance().channel&&"vivo"!=M.pzaChannel.instance().channel||(this.skipGuideBtn.getComponent(cc.Widget).enabled=!1,this.skipGuideBtn.x-=100),E.pzaWorldEventManager.addListener(E.pzaWorldEventType.UPDATE_GARDEN_STATE,this.updatePlant,this),_.pzaStatisticsMgr.sendEvent("System",{name:"system",value:5}),this.curShadowContainer=this.pots_normal_shadow,this.bt_home.on(cc.Node.EventType.TOUCH_END,function(){a.clickCloseDelay||(v.pzaSoundManager.playSFX(),y.pzaTipManager.hideHomeTip(),p.pzaGameCommonPool.returnInstant(a.node))},this),this.bt_shop.on(cc.Node.EventType.TOUCH_END,this.clickShop,this),C.pzaUtil.blinkAni(this.bt_shop,!0),C.pzaUtil.blinkAni(this.bt_home,!0),this.layer_board.on(cc.Node.EventType.TOUCH_START,this.onToolTouchStart,this),this.layer_board.on(cc.Node.EventType.TOUCH_MOVE,this.onToolTouchMove,this),this.layer_board.on(cc.Node.EventType.TOUCH_CANCEL,this.onToolTouchEnd,this),this.layer_board.on(cc.Node.EventType.TOUCH_END,this.onToolTouchEnd,this),this.dave.node.active=!1,this.isNeedRefreshPlants=!1,u.default.delMsgReciever("addNewGardenPlant"),u.default.regMsgReciever("addNewGardenPlant",function(){return a.isNeedRefreshPlants=!0,!1}),this.isNeedRefreshTools=!1,u.default.delMsgReciever("addNewGardenTool"),u.default.regMsgReciever("addNewGardenTool",function(){return a.isNeedRefreshTools=!0,!1}),this.moneyShowNode.active=!1,this.lastShowCoinCount=null,this.hideMoneyNodeTime=0,this.guideManureCheck=!1,z.pzaLocalData.data.curGuideType==P.pzaGuideType.GUIDE_GARDEN_5_4&&(z.pzaLocalData.gardenGuiding=!0,this.showGardenGuide()),this.cartPot=null,this.curTool=null,e.toolInUse=l.pzaGardenToolType.null;for(var t=0;t<l.default.instance().addPlantArr.length;t++)l.default.instance().addGardenPlant(l.default.instance().addPlantArr[t]);for(l.default.instance().addPlantArr=[],t=0;t<z.pzaLocalData.data.dropPlantArr.length;t++)l.default.instance().addGardenPlant(z.pzaLocalData.data.dropPlantArr[t]);z.pzaLocalData.data.dropPlantArr=[],z.pzaLocalData.addDirty("dropPlantArr"),l.default.instance().hasAllGardenPlant()&&y.pzaTipManager.showHomeTip("\u60a8\u5df2\u96c6\u9f50\u6240\u6709\u82b1\u56ed\u690d\u7269\uff0c\u9ec4\u91d1\u82b1\u82d7\u5c06\u53d8\u4e3a\u968f\u673a\u690d\u7269",null,2),console.log("pzaLocalData.data.gardenPlants :",z.pzaLocalData.data.gardenPlants)},t.prototype.onDisable=function(){this.unschedule(this.saveLastTime),this.removeUnPickCoin(),E.pzaWorldEventManager.removeListener(E.pzaWorldEventType.UPDATE_GARDEN_STATE,this.updatePlant,this),this.bt_home.off(cc.Node.EventType.TOUCH_END),this.bt_shop.off(cc.Node.EventType.TOUCH_END),this.layer_board.off(cc.Node.EventType.TOUCH_START,this.onToolTouchStart,this),this.layer_board.off(cc.Node.EventType.TOUCH_MOVE,this.onToolTouchMove,this),this.layer_board.off(cc.Node.EventType.TOUCH_CANCEL,this.onToolTouchEnd,this),this.layer_board.off(cc.Node.EventType.TOUCH_END,this.onToolTouchEnd,this),v.pzaSoundManager.playBgm(v.pzaBGMName.LOADING)},t.prototype.removeUnPickCoin=function(){var a=this;if(!z.pzaLocalData.data.gardenToolNum[""+l.pzaGardenToolType.snail])return this.layer_coin.children.forEach(function(a){var t=a.getComponent(r.pzaGardenDropCoin);t.canPick&&(z.pzaLocalData.data.coin+=t.price),a.isValid&&a.destroy()}),void z.pzaLocalData.addDirty("coin");this.layer_coin.children.forEach(function(t){var e=t.getComponent(r.pzaGardenDropCoin);e.canPick&&(a.unPickCoin+=e.price),t.isValid&&t.destroy()})},t.prototype.onToolTouchStart=function(a){this.curTool&&this.curTool.isChoosing&&this.curTool.setTouchStart(a)},t.prototype.onToolTouchMove=function(a){this.curTool&&this.curTool.onTouchMove(a)},t.prototype.onToolTouchEnd=function(a){var t=this;if(this.curTool&&this.curTool.isChoosing)if(this.curTool.isDrag)this.curTool.onTouchEnd(a);else if(this.curTool.type===l.pzaGardenToolType.goldWaterPot){if(this.curTool.isDoing)return;var e=this.layer_tool_drag.convertToNodeSpaceAR(a.getLocation());if(g.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_water_ball",function(a,o){if(null==a)if(o){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=o,n.parent=t.layer_tool_drag,n.setPosition(e),t.scheduleOnce(function(){n.destroy()},.3)}else u.default.err("\u65e0\u6c34\u5708");else console.error(a)}),this.dragChoose(e)){var o=this.choosedPots.slice();o.length>0&&this.curTool.exec(e,!1,o[0].node,null,null)}else this.curTool.playAni(e,null,null)}else this.curTool.isDoing||this.curTool.unChoosed(!0)},t.prototype.init=function(){this.shadows_normal=[];for(var a=0;a<this.pots_normal_shadow.children.length;a++)this.shadows_normal[a]=this.pots_normal_shadow.children[a],this.shadows_normal[a].getComponent(m.pzaGardenShadow).posId=a;for(this.shadows_night=[],a=0;a<this.pots_night_shadow.children.length;a++)this.shadows_night[a]=this.pots_night_shadow.children[a],this.shadows_night[a].getComponent(m.pzaGardenShadow).posId=a;for(this.shadows_water=[],a=0;a<this.pots_water_shadow.children.length;a++)this.shadows_water[a]=this.pots_water_shadow.children[a],this.shadows_water[a].getComponent(m.pzaGardenShadow).posId=a;this.curShadowArr=this.shadows_normal,this.showTools(),this.showOffLineReward(),this.unschedule(this.saveLastTime),this.schedule(this.saveLastTime,1,cc.macro.REPEAT_FOREVER),this.changeEnv(this.curEnv),v.pzaSoundManager.playBgm(v.pzaBGMName.GARDEN)},t.prototype.showOffLineReward=function(){if(z.pzaLocalData.data.gardenToolNum[""+l.pzaGardenToolType.snail]){var a=this.unPickCoin+l.default.instance().getOffLineReward();a&&(z.pzaLocalData.data.coin+=a,z.pzaLocalData.addDirty("coin"),this.showTip("\u5f53\u4f60\u4e0d\u5728\u7684\u65f6\u5019\uff0c\u8717\u725b\u4e3a\u4f60\u6536\u96c6\u4e86"+a+"!")),this.unPickCoin=0}},t.prototype.saveLastTime=function(){z.pzaLocalData.data.gardenLastTime=Date.now(),z.pzaLocalData.addDirty("gardenLastTime")},t.prototype.showTip=function(a,t){void 0===t&&(t=3),y.pzaTipManager.showHomeTip(a,this.layer_tip,t)},t.prototype.showSell=function(){var a=this;if(!this.sellPot)return this.showTip("\u65e0\u53ef\u552e\u5356\u690d\u7269"),!1;var t="\u6211\u7ed9\u4f60$"+this.sellPot.getPrice()+"\u6765\u6362 "+f.pzaGameConfig.getPlantConfig(this.sellPot.plant.plantId).name+"!";return this.dave.showSell(t,function(){if(a.sellPot){var t=a.sellPot.getPrice();z.pzaLocalData.data.coin+=t,z.pzaLocalData.addDirty("coin"),v.pzaSoundManager.playAudio("garden_sell"),a.sellPot.remove(),a.sellPot=null,a.moneyShowNode.active=!0,a.hideMoneyNodeTime=8}}.bind(this)),this.moneyShowNode.active=!0,this.hideMoneyNodeTime=8,!0},t.prototype.chooseTool=function(a){if(e.toolInUse==l.pzaGardenToolType.null||e.toolInUse===a.type){this.curTool&&this.curTool!==a&&this.curTool.unChoosed(!1),this.curTool=a;for(var t=this.pots_container.children,o=0;o<t.length;o++)t[o].getComponent(d.pzaGardenPot).willBeChoosed(this.curTool.getOpType());this.curTool.getOpType()==l.pzaGardenOpType.chocolate&&this.snail&&this.snail.showChololateNode()}},t.prototype.unchooseTool=function(){for(var a=this.pots_container.children,t=0;t<a.length;t++)a[t].getComponent(d.pzaGardenPot).unChoosed();this.choosedPots.length=0,this.snail&&this.snail.hideChololateNode()},t.prototype.hideShadows=function(){this.curEnv!==l.pzaGardenEnv.normal&&(this.curShadowContainer.opacity=0)},t.prototype.showShadows=function(){if(this.curEnv!==l.pzaGardenEnv.normal){var a=new Map;this.pots_container.children.forEach(function(t){var e=t.getComponent(d.pzaGardenPot).plant.pos;a.set(e,1)}),this.curShadowContainer.opacity=255;for(var t=0;t<this.curShadowArr.length;t++){var e=this.curShadowArr[t];a.has(e.getComponent(m.pzaGardenShadow).posId)?e.opacity=0:e.opacity=255}}},t.prototype.getNextEnv=function(a){var t=a+1;return t>l.pzaGardenEnv.water&&(t=l.pzaGardenEnv.normal),t},t.prototype.changeEnv=function(a){var t=this;this.curEnv=a,this.curEnv===l.pzaGardenEnv.normal?(this.curShadowContainer=this.pots_normal_shadow,this.curShadowArr=this.shadows_normal,this.pots_night_shadow.active=!1,this.pots_water_shadow.active=!1):this.curEnv===l.pzaGardenEnv.night?(this.curShadowContainer=this.pots_night_shadow,this.curShadowArr=this.shadows_night,this.pots_normal_shadow.active=!1,this.pots_water_shadow.active=!1,this.curShadowContainer.opacity=0):(this.curShadowContainer=this.pots_water_shadow,this.curShadowArr=this.shadows_water,this.pots_night_shadow.active=!1,this.pots_normal_shadow.active=!1,this.curShadowContainer.opacity=0),this.curShadowContainer.active=!0,this.removeUnPickCoin(),this.curTool&&(this.curTool.unChoosed(!0),this.curTool=null),g.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_bg"+this.curEnv,function(a,e){null==a?e?t.pic_bg.spriteFrame=e:u.default.err("\u65e0\u80cc\u666f\u56fe"):console.error(a)}),this.showPlants(),this.snail&&(this.curEnv===l.pzaGardenEnv.normal?this.snail.show():this.snail.hide())},t.prototype.nextEnv=function(){for(var a=this.getNextEnv(this.curEnv);a!==l.pzaGardenEnv.normal&&!z.pzaLocalData.data.gardenEnv[""+a];)a=this.getNextEnv(a);this.changeEnv(a)},t.prototype.showPlants=function(){u.default.removeNodeChildren(this.pots_container);for(var a=l.default.instance().getCurPlants(this.curEnv),t=0;t<a.length;t++){var e=a[t];cc.instantiate(this.prefab_pot).getComponent(d.pzaGardenPot).init(e,this)}},t.prototype.showTools=function(){u.default.removeNodeChildren(this.layer_tool),null!=z.pzaLocalData.data.gardenToolNum[""+l.pzaGardenToolType.goldWaterPot]?h.pzaGardenTool.show(l.pzaGardenToolType.goldWaterPot,this):h.pzaGardenTool.show(l.pzaGardenToolType.waterPot,this);for(var a=l.pzaGardenToolType.manure;a<=l.pzaGardenToolType.cart;a++)null!=z.pzaLocalData.data.gardenToolNum[""+a]&&h.pzaGardenTool.show(a,this);(z.pzaLocalData.data.gardenEnv[""+l.pzaGardenEnv.night]||z.pzaLocalData.data.gardenEnv[""+l.pzaGardenEnv.water])&&h.pzaGardenTool.show(l.pzaGardenToolType.nextEnv,this),this.curEnv===l.pzaGardenEnv.normal&&z.pzaLocalData.data.gardenToolNum[""+l.pzaGardenToolType.snail]&&(u.default.removeNodeChildren(this.layer_snail),this.snail=cc.instantiate(this.prefab_snail).getComponent(b.pzaGardenSnail).init(this))},t.prototype.dropCoin=function(a,t){var e=this,o=this.moneyTarget.convertToWorldSpaceAR(cc.v2()),n=this.layer_coin.convertToNodeSpaceAR(o);r.pzaGardenDropCoin.show(this.layer_coin,t,a,n,function(){e.moneyShowNode.active=!0,e.hideMoneyNodeTime=8,e.updateMoney(0)})},t.prototype.dragChoose=function(a){var t=1;if(this.curTool.type!==l.pzaGardenToolType.goldWaterPot||(t=4,!this.curTool.isDoing)){this.choosedPots.length=0;for(var e=this.pots_container.children,o=[],n=0;n<e.length;n++){var i=(p=e[n]).getComponent(d.pzaGardenPot),r=p.getPosition().sub(a).mag();r>120?i.unChoosing():o.push({pot:i,dist:r})}if(o.length<=0)return!1;for(o.sort(function(a,t){return a.dist-t.dist}),n=0;n<o.length;n++){var p=o[n];n>=t?p.pot.unChoosing():(p.pot.choosing(),this.choosedPots.push(p.pot))}return this.choosedPots.length>0}},t.prototype.dragForGlove=function(){if(this.glovePot){for(var a=this.curShadowContainer.children,t=this.dragPoint.getPosition(),e=0;e<a.length;e++){var o=a[e];if(o.getPosition().sub(t).mag()<40){if(o.getComponent(m.pzaGardenShadow).pot)continue;return this.curTool.dragNode.setPosition(0,0),this.dragPoint.setPosition(o.getPosition()),this.curTool.dragNode.scale=1,void(this.curShadow=o.getComponent(m.pzaGardenShadow))}}this.curTool.dragNode.setPosition(60,60),this.curTool.dragNode.scale=1.2,this.curShadow=null}},t.prototype.clickShop=function(){var a=this;v.pzaSoundManager.playSFX(),s.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.SHOP_VIEW,function(t){var e=t&&t.getComponent(S.pzaShopView);a.curTool&&a.curTool.unChoosed(!0),z.pzaLocalData.gardenGuiding?(e&&e.bindCloseCall(!1,function(){var t=a.toolMap.get(l.pzaGardenToolType.manure);null!=t&&t.showGuideArrow(null,function(){t.showGuideArrow(null,function(){t.hideGuideArrow(),a.showTip("\u73b0\u5728\u4f60\u53ea\u80fd\u505a\u8fd9\u4e9b\u4e86\uff01\n\u5f53\u4f60\u7684\u690d\u7269\u9700\u8981\u66f4\u591a\u5475\u62a4\u7684\u65f6\u5019\u5728\u56de\u6765\u5427\uff01",10),a.bt_home.active=!0,C.pzaUtil.blinkAni(a.bt_home),l.default.instance().addGardenTool(l.pzaGardenToolType.sell,1,!1),z.pzaLocalData.gardenGuiding=!1,z.pzaLocalData.data.curGuideType=null,z.pzaLocalData.addDirty("curGuideType")})}),a.showTip("\u73b0\u5728\uff0c\u7ed9\u4f60\u7684\u690d\u7269\u65bd\u80a5\uff0c\u770b\u5b83\u4eec\u957f\u5927\u5427\uff01",0)}),C.pzaUtil.blinkAni(a.bt_shop,!0)):e&&e.showShopItem(3)})},t.prototype.update=function(a){this.guideManureCheck&&l.default.instance().checkPlantState(l.pzaGardenOpType.manure)&&(this.bt_shop.active=!0,this.showTip("\u4f60\u7684\u690d\u7269\u9700\u8981\u80a5\u6599\u624d\u80fd\u751f\u957f\uff01\n\u8bbf\u95ee\u5546\u5e97\uff0c\u53bb\u641e\u4e9b\u80a5\u6599\u6765\u628a\uff01",0),this.guideManureCheck=!1,C.pzaUtil.blinkAni(this.bt_shop)),this.skipGuideBtn.active=z.pzaLocalData.gardenGuiding,this.updateMoney(a),this.curTool&&this.curTool.isDrag&&this.curTool.dragNode&&(this.curTool.type===l.pzaGardenToolType.glove&&this.glovePot?this.dragForGlove():this.dragChoose(this.dragPoint.getPosition()))},t.prototype.lateUpdate=function(){this.isNeedRefreshPlants&&(this.isNeedRefreshPlants=!1,this.showPlants()),this.isNeedRefreshTools&&(this.isNeedRefreshTools=!1,this.showTools())},t.prototype.updateMoney=function(a){this.moneyShowNode.active&&(this.lastShowCoinCount!=z.pzaLocalData.data.coin&&(this.lastShowCoinCount=z.pzaLocalData.data.coin,this.moneyCount.string=C.pzaUtil.getCurrencyStr(this.lastShowCoinCount)),this.hideMoneyNodeTime-=a,this.hideMoneyNodeTime<=0&&(this.moneyShowNode.active=!1))},t.prototype.showGardenGuide=function(){var a=this;this.bt_shop.active=!1,this.bt_home.active=!1,this.dave.showGuide([new P.pzaDialog("\u563f\uff01\u5feb\u6765\u770b\uff0c\n\u4f60\u627e\u5230\u4e86\u4e00\u4e2a\u6d12\u6c34\u58f6\uff01"),new P.pzaDialog("\u4e3a\u4e86\u7eaa\u5ff5\u8fd9\u4e00\u523b\n\u6211\u5ba3\u5e03\uff1a\n\u4f60\u6b63\u5f0f\u62e5\u6709\u4e86\u4f11\u95f2\u82b1\u56ed\uff01"),new P.pzaDialog("\u563f\uff0c\u4e3a\u4e86\u6709\u4e2a\u597d\u7684\u5f00\u59cb\uff0c\n\u6211\u51b3\u5b9a\u9001\u4f60\u4e00\u4e9b\u82b1\u82d7\uff01",function(){l.default.instance().addGuidePlant(13),l.default.instance().addGuidePlant(14)}),new P.pzaDialog("\u597d\u597d\u7167\u987e\u5b83\u4eec\uff0c\u6211\u4fdd\u8bc1\n\u4f60\u4f1a\u6709\u5f88\u5927\u6536\u83b7\uff01"),new P.pzaDialog("\u73a9\u7684\u5f00\u5fc3\uff01")],function(){var t=a.toolMap.get(l.pzaGardenToolType.waterPot);null!=t&&t.showGuideArrow(function(){t.hideGuideArrow(),a.showTip("\u70b9\u51fb\u4e00\u682a\u5e7c\u82d7\uff0c\u7ed9\u5b83\u6d47\u6c34\uff01",0)},function(){a.showTip("\u4e00\u5b9a\u8981\u7ed9\u5e72\u6e34\u7684\u690d\u7269\u6d47\u6c34\uff01",0),a.guideManureCheck=!0}),a.showTip("\u70b9\u51fb\u55b7\u58f6\uff0c\u5c31\u80fd\u628a\u5b83\u62fe\u8d77\u4e86\uff01",0)})},t.prototype.skipGuide=function(){l.default.instance().addGuidePlant(13,1),l.default.instance().addGuidePlant(14,1),this.dave.node.active=!1,this.bt_home.active=!0,this.bt_shop.active=!0,h.pzaGardenTool.show(l.pzaGardenToolType.sell,this),l.default.instance().addGardenTool(l.pzaGardenToolType.sell,1,!1),z.pzaLocalData.gardenGuiding=!1,z.pzaLocalData.data.curGuideType=null,z.pzaLocalData.addDirty("curGuideType"),y.pzaTipManager.hideHomeTip(),this.guideManureCheck=!1,C.pzaUtil.blinkAni(this.bt_home,!0),C.pzaUtil.blinkAni(this.bt_shop,!0)},t.prototype.updatePlant=function(){this.changeEnv(l.pzaGardenEnv.normal)},t.prototype.close=function(){C.pzaUtil.blinkAni(this.bt_home,!0),C.pzaUtil.blinkAni(this.bt_shop,!0),this.curTool&&this.curTool.unChoosed(!0),p.pzaGameCommonPool.returnInstant(this.node)},t.toolInUse=l.pzaGardenToolType.null,i([B({displayName:"\u62d6\u52a8\u70b9",type:cc.Node})],t.prototype,"dragPoint",void 0),i([B({displayName:"\u8717\u725b\u5c42",type:cc.Node})],t.prototype,"layer_snail",void 0),i([B({displayName:"tip\u5c42",type:cc.Node})],t.prototype,"layer_tip",void 0),i([B({displayName:"\u690d\u7269\u5e95\u5c42",type:cc.Node})],t.prototype,"layer_board",void 0),i([B({displayName:"\u91d1\u5e01\u5c42",type:cc.Node})],t.prototype,"layer_coin",void 0),i([B({displayName:"\u5de5\u5177\u62d6\u52a8\u5c42",type:cc.Node})],t.prototype,"layer_tool_drag",void 0),i([B({displayName:"\u5de5\u5177\u5c42",type:cc.Node})],t.prototype,"layer_tool",void 0),i([B({displayName:"pots\u5bb9\u5668",type:cc.Node})],t.prototype,"pots_container",void 0),i([B({displayName:"\u80cc\u666f\u56fe",type:cc.Sprite})],t.prototype,"pic_bg",void 0),i([B({displayName:"\u6e29\u5ba4\u5f71\u5b50",type:cc.Node})],t.prototype,"pots_normal_shadow",void 0),i([B({displayName:"\u591c\u665a\u5f71\u5b50",type:cc.Node})],t.prototype,"pots_night_shadow",void 0),i([B({displayName:"\u6c34\u65cf\u9986\u5f71\u5b50",type:cc.Node})],t.prototype,"pots_water_shadow",void 0),i([B({displayName:"\u5546\u5e97",type:cc.Node})],t.prototype,"bt_shop",void 0),i([B({displayName:"\u4e3b\u83dc\u5355",type:cc.Node})],t.prototype,"bt_home",void 0),i([B({displayName:"\u91d1\u94b1\u6570\u91cf",type:cc.Label})],t.prototype,"moneyCount",void 0),i([B({displayName:"\u91d1\u94b1\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"moneyShowNode",void 0),i([B({displayName:"\u91d1\u94b1\u98de\u884c\u76ee\u6807",type:cc.Node})],t.prototype,"moneyTarget",void 0),i([B({displayName:"\u6234\u592b",type:D.pzaGardenDave})],t.prototype,"dave",void 0),i([B(cc.Prefab)],t.prototype,"prefab_pot",void 0),i([B(cc.Prefab)],t.prototype,"prefab_snail",void 0),i([B({displayName:"\u8df3\u8fc7\u6559\u7a0b\u6309\u94ae",type:cc.Node})],t.prototype,"skipGuideBtn",void 0),e=i([T],t)}(cc.Component);e.pzaGardenView=A,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaShopView":"pzaShopView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGardenDave":"pzaGardenDave","./pzaGardenDropCoin":"pzaGardenDropCoin","./pzaGardenMgr":"pzaGardenMgr","./pzaGardenPot":"pzaGardenPot","./pzaGardenShadow":"pzaGardenShadow","./pzaGardenSnail":"pzaGardenSnail","./pzaGardenTool":"pzaGardenTool"}],pzaGargantuar2:[function(a,t,e){"use strict";cc._RF.push(t,"38cc8ENFo9HYJTrUp6iNgHL","pzaGargantuar2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGargantuar2=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaZombieEnum"),l=a("./pzaGargantuar"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.directThrowHurt=!0,t.equip1Slot=s.pzaZombieSlotType.hat_iron,t.equip2Slot=s.pzaZombieSlotType.door,t.isFei=!1,t.hatSlotMap=new Map([[p.pzaZombieEnum.GARGANTUAR2,{slotName:s.pzaZombieSlotType.hat_iron,attNameArr:[s.pzaZombieSlotType.hat_iron+"1",s.pzaZombieSlotType.hat_iron+"2",s.pzaZombieSlotType.hat_iron+"3"],arr1:[61.56,100.32],arr2:[61.56,89.34],arr3:[53.03,89.34],isFei:!1}],[p.pzaZombieEnum.GARGANTUAR3,{slotName:s.pzaZombieSlotType.helmet_black,attNameArr:[s.pzaZombieSlotType.helmet_black+"1",s.pzaZombieSlotType.helmet_black+"2",s.pzaZombieSlotType.helmet_black+"3"],arr1:[0,0],arr2:[.39,-1.42],arr3:[5.1,-1.7],isFei:!1}],[p.pzaZombieEnum.GARGANTUAR4,{slotName:s.pzaZombieSlotType.helmet_fei,attNameArr:[s.pzaZombieSlotType.helmet_fei+"1",s.pzaZombieSlotType.helmet_fei+"2",s.pzaZombieSlotType.helmet_fei+"3"],arr1:[40.68,55.93],arr2:[40.68,43.58],arr3:[40.68,43.02],isFei:!0}],[p.pzaZombieEnum.RED_GARGANTUAR2,{slotName:s.pzaZombieSlotType.hat_iron,attNameArr:[s.pzaZombieSlotType.hat_iron+"1",s.pzaZombieSlotType.hat_iron+"2",s.pzaZombieSlotType.hat_iron+"3"],arr1:[61.56,100.32],arr2:[61.56,89.34],arr3:[53.03,89.34],isFei:!1}],[p.pzaZombieEnum.RED_GARGANTUAR3,{slotName:s.pzaZombieSlotType.helmet_black,attNameArr:[s.pzaZombieSlotType.helmet_black+"1",s.pzaZombieSlotType.helmet_black+"2",s.pzaZombieSlotType.helmet_black+"3"],arr1:[0,0],arr2:[.39,-1.42],arr3:[5.1,-1.7],isFei:!1}],[p.pzaZombieEnum.RED_GARGANTUAR4,{slotName:s.pzaZombieSlotType.helmet_fei,attNameArr:[s.pzaZombieSlotType.helmet_fei+"1",s.pzaZombieSlotType.helmet_fei+"2",s.pzaZombieSlotType.helmet_fei+"3"],arr1:[40.68,55.93],arr2:[40.68,43.58],arr3:[40.68,43.02],isFei:!0}]]),t}return n(t,a),t.prototype.initEquips=function(){if(this.baseData&&this.baseData.zombieData){var a=this.hatSlotMap.get(this.baseData.zombieData.zombieType);this.isFei=a.isFei,this.equip1Slot=a.slotName,this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,285.32,210.87,4.33))],[s.pzaZombieSlotType.gar_hand,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.gar_hand).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.gar_hand+"1",411.27,29.76,174.13)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.gar_hand+"1",411.27,29.76,174.13)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.gar_hand+"1",411.27,29.76,174.13))],[s.pzaZombieSlotType.door,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.door).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.door+"1")).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.door+"2")).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.door+"3"))]]),this.slotMap.set(a.slotName,new s.pzaZombieSlot(this.animation.spineAnimation,a.slotName).addState(new s.pzaZombieSlotAtt(1,a.attNameArr[0],a.arr1[0],a.arr1[1],a.arr1[2])).addState(new s.pzaZombieSlotAtt(2,a.attNameArr[1],a.arr2[0],a.arr2[1],a.arr2[2])).addState(new s.pzaZombieSlotAtt(3,a.attNameArr[2],a.arr3[0],a.arr3[1],a.arr3[2])))}},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.isFei&&(t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_CONTROL,-1)),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_ICE,-1))),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_ICE_PEA,-1))},t.prototype.handBookPreview=function(t){this.skinPre=this.skinPreMap.get(t)+"1_1w1",this.animation.setAnimationSkin(this.skinPre),a.prototype.handBookPreview.call(this,t),this.initEquips(),this.equipIntact(),this.equipIntact2(),this.playStayAnimation()},t.prototype.equipDeath=function(t){a.prototype.equipDeath.call(this,t),this.baseData&&this.isFei&&(this.isFei=!1,this.baseData.buffData.hasBuff(r.pzaBuffType.IMM_CONTROL)&&this.baseData.buffData.removeBuff(r.pzaBuffType.IMM_CONTROL),this.baseData.buffData.hasBuff(r.pzaBuffType.IMM_ICE)&&this.baseData.buffData.removeBuff(r.pzaBuffType.IMM_ICE))},i([u],t)}(l.pzaGargantuar));e.pzaGargantuar2=d,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaGargantuar":"pzaGargantuar","./pzaZombieSlot":"pzaZombieSlot"}],pzaGargantuar:[function(a,t,e){"use strict";cc._RF.push(t,"48badpbNY1B5Ll+3N5c+E3c","pzaGargantuar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGargantuar=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBaseData"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaZombieEnum"),d=a("../Data/pzaPlantEnum"),h=a("../Plant/pzaAttackType"),m=a("../pzaGameState"),f=a("./pzaBaseZombie"),z=a("./pzaZombieState"),y=a("./pzaZombieSlot"),g=a("../pzaSpineTool"),b=cc._decorator,v=b.ccclass,P=(b.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName=null,t.weaponIndex=1,t.throwImping=!1,t.hasImp=!0,t.hasThrowImp=!1,t.attacking=!1,t.skinPre="baiyan",t.skinPreMap=new Map([[u.pzaZombieEnum.GARGANTUAR,"baiyan"],[u.pzaZombieEnum.GARGANTUAR2,"baiyan"],[u.pzaZombieEnum.GARGANTUAR3,"baiyan"],[u.pzaZombieEnum.GARGANTUAR4,"baiyan"],[u.pzaZombieEnum.RED_GARGANTUAR,"hongyan"],[u.pzaZombieEnum.RED_GARGANTUAR2,"hongyan"],[u.pzaZombieEnum.RED_GARGANTUAR3,"hongyan"],[u.pzaZombieEnum.RED_GARGANTUAR4,"hongyan"]]),t.deathPlayingOver=!1,t.deathCallBack=null,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[y.pzaZombieSlotType.butter,new y.pzaZombieSlot(this.animation.spineAnimation,y.pzaZombieSlotType.butter).addState(new y.pzaZombieSlotAtt(1,y.pzaZombieSlotType.butter,52.22,4.58,-94.44))],[y.pzaZombieSlotType.gar_hand,new y.pzaZombieSlot(this.animation.spineAnimation,y.pzaZombieSlotType.gar_hand).addState(new y.pzaZombieSlotAtt(1,y.pzaZombieSlotType.gar_hand+"1",411.27,29.76,174.13)).addState(new y.pzaZombieSlotAtt(2,y.pzaZombieSlotType.gar_hand+"1",411.27,29.76,174.13)).addState(new y.pzaZombieSlotAtt(3,y.pzaZombieSlotType.gar_hand+"1",411.27,29.76,174.13))]])},t.prototype.preview=function(t,e,o){this.skinPre=this.skinPreMap.get(t.zombieData.zombieType),a.prototype.preview.call(this,t,e,o)},t.prototype.bindData=function(t){this.skinPre=this.skinPreMap.get(t.zombieData.zombieType),a.prototype.bindData.call(this,t),this.throwImping=!1,this.hasImp=!0,this.attacking=!1,this.hasThrowImp=!1,window.pzazombieManager.wave%10!=0&&m.pzaGameState.redLeft--,t.zombieData.cate=u.pzaZombieCate.Gargantuar,this.bodyWidth=50},t.prototype.randomZombieSkin=function(){this.changeSkin(this.skinPre+"1_1w1"),this.weaponIndex=l.pzaUtil.getRandomNum(1,3),this.updateEquipState(y.pzaZombieSlotType.gar_hand,this.weaponIndex)},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled()&&(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),!this.throwImping))if(-1==this.changeTargetRow){if(this.pushBackTime>0)this.pushBackMove(a);else if(!this.attacking){var t=this.findTarget();null==t||t.isDead?this.updateMove(a):this.attack(a,t)}}else this.changeRowMove(a)}},t.prototype.attackJar=function(a){var t=this,e=this.baseData.buffData.releaseBuff(c.pzaBuffType.FROST);this.zombieState=z.pzaZombieState.EAT_ATK;var o="attack";this.hasImp||(o="attack3"),this.attacking=!0,this.animation.playAnimation(o,!1,function(){t.attacking=!1},function(){a.bang(),p.pzaSoundManager.playAudio("gargantuar_thump")},null!=e?e.buffValue:1)},t.prototype.attack=function(a,t){var e=this,o=this.baseData.buffData.releaseBuff(c.pzaBuffType.FROST);this.zombieState=z.pzaZombieState.EAT_ATK;var n="attack";this.hasImp||(n="attack3"),p.pzaSoundManager.playAudio("lowgroan"),this.attacking=!0,this.animation.playAnimation(n,!1,function(){e.attacking=!1},function(){e.damage(t),p.pzaSoundManager.playAudio("gargantuar_thump")},null!=o?o.buffValue:1)},t.prototype.damage=function(a){var t=this;if(null!=a&&null!=this.baseData&&null!=this.baseData.zombieData)if(a.isBrain){var e=window.pzaplantManager.brainMap.get(a);e&&e.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG)}else if(this.baseData.zombieData.hypnosis)window.pzazombieManager.zombieMap.forEach(function(e,o){null!=o&&o.xIndex==a.xIndex&&o.yIndex==a.yIndex&&e.hurt(1800,t.baseData,h.pzaAttackType.BANG)});else{var o=""+a.xIndex+a.yIndex,n=window.pzaplantManager.plantDataMap.get(o);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);if(n.plantData.plantType==d.pzaPlantEnum.QQFUME_SHROOM)return void(n.hp<=100?i&&i.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG):i&&i.hurt(100,this.baseData,h.pzaAttackType.FLOOR_ATK));if(i&&i.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG),i&&i.baseData&&!i.baseData.isDead)return}var r=window.pzaplantManager.pumpkinDataMap.get(o);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG)}var l=window.pzaplantManager.plantEnvDataMap.get(o);if(null!=l){var s=window.pzaplantManager.getPlantByData(l);s&&s.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG)}var c=window.pzaplantManager.notTargetMap.get(o);if(null!=c){var u=window.pzaplantManager.getPlantByData(c);u&&u.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG)}window.pzazombieManager.hypnoZombieMap.forEach(function(e,o){null!=o&&o.xIndex==a.xIndex&&o.yIndex==a.yIndex&&e.hurt(1800,t.baseData,h.pzaAttackType.BANG)})}},t.prototype.hurt=function(t,e,o){if(void 0===o&&(o=h.pzaAttackType.FLOOR_ATK),this.baseData){this.baseData.hp,this.baseData.maxHp,a.prototype.hurt.call(this,t,e,o);var n=this.baseData.hp/this.baseData.maxHp;!this.hasThrowImp&&n<=.5&&this.throwImp()}},t.prototype.throwImp=function(){var a=this;if(!this.isInButterState&&!(this.baseData.xIndex<=4||this.baseData.zombieData.hypnosis)){var t=this.baseData.buffData.releaseBuff(c.pzaBuffType.FROST);this.throwImping=!0,this.attacking=!1,this.hasThrowImp=!0;var e=this.animation.getAnimationDuration("attack2")/this.animation.spineAnimation.timeScale+.1,o=!1,n=function(){o||!a.baseData||a.isInButterState||a.baseData.buffData.hasBuff(c.pzaBuffType.FROZEN)||(o=!0,a.baseData.hp<=0||(a.hasImp=!1,a.throwImping=!1,a.playMoveAnimation()))};this.scheduleOnce(n.bind(this),e),this.animation.playAnimation("attack2",!1,function(){n()},function(){a.createImp(),p.pzaSoundManager.playAudio("gargantuar_fly")},null!=t?t.buffValue:1)}},t.prototype.createImp=function(){var a=g.pzaSpineTool.findBonePos(this.animation.spineAnimation,"xiaokua2",this.node);if(a){var t=r.pzaGameConfig.getZombieConfig(u.pzaZombieEnum.IMP),e=new s.pzaBaseData(null,u.pzaZombieEnum.IMP);e.hp=e.maxHp=t.hp,e.atk=t.atk,e.zombieData.equipHp=e.zombieData.maxEquipHp=t.equipHp,e.zombieData.direction=-1,e.zombieData.initMSpd=e.zombieData.moveSpd=m.pzaGameState.map.getBlockWidth()/t.speed,e.zombieData.equipType=t.equipType,e.zombieData.toolType=t.toolType,e.xIndex=this.baseData.xIndex-4,e.yIndex=this.baseData.yIndex;var o=this.node.parent.convertToNodeSpaceAR(a);o.x+=-5,o.y+=-5,e.logicPos=o,window.pzazombieManager.zombieDatas[e.yIndex].add(e),window.pzazombieManager.createZombie(e,!1,!1,!1,null,!1,!0)}},t.prototype.playAttakAnimation=function(){this.zombieState=z.pzaZombieState.EAT_ATK,this.hasImp?this.animation.playAnimation("attack",!0):this.animation.playAnimation("attack3",!0)},t.prototype.playMoveAnimation=function(){this.zombieState=z.pzaZombieState.MOVE,"move"!=this.animation.spineAnimation.animation&&"move2"!=this.animation.spineAnimation.animation&&(this.hasImp?this.animation.playAnimation("move",!0):this.animation.playAnimation("move2",!0))},t.prototype.playDeathAnimation=function(a){var t=this;this.zombieState=z.pzaZombieState.DEAD,this.zombieHurtState=u.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.deathCallBack=a;var e=!1,o=function(){e||(e=!0,t.deathCallBack())},n=this.hasImp?"death":"death2";this.scheduleOnce(o.bind(this),this.animation.getAnimationDuration(n)/this.animation.spineAnimation.timeScale+.1),this.animation.playAnimation(n,!1,null,function(a,e){"fall"==e.data.name?g.pzaSpineTool.instance().setSlotAttSize(t.animation.spineAnimation,y.pzaZombieSlotType.gar_hand,0,0):"sy"==e.data.name&&(p.pzaSoundManager.playAudio("gargantuar_thump"),o())}),this.refreshFrostState(!1),this.zombieFallSound()},t.prototype.zombieDying=function(){a.prototype.zombieDying.call(this),this.changeSkin(this.skinPre+"1_3w1")},t.prototype.zombieHurt=function(){a.prototype.zombieHurt.call(this),this.changeSkin(this.skinPre+"1_2w1")},t.prototype.zombieIntact=function(){a.prototype.zombieIntact.call(this),this.changeSkin(this.skinPre+"1_1w1")},t.prototype.zombieScream=function(){p.pzaSoundManager.playAudio("GargantuarEnter")},t.prototype.death=function(t){t&&p.pzaSoundManager.playAudio("gargantudeath"),a.prototype.death.call(this,t)},t.prototype.zombieHurtSound=function(t){if(this.hasEquip){var e="shieldhit"+l.pzaUtil.getRandomNum(1,2);p.pzaSoundManager.playAudio(e)}else a.prototype.zombieHurtSound.call(this,t)},t.prototype.changeMapRow=function(){a.prototype.changeMapRow.call(this),this.attacking=!1},t.prototype.onWaterEnter=function(){this.mask.enabled=!0,this.curWaterWaveEff&&this.curWaterWaveEff.showWaterWave()},t.prototype.onWaterExit=function(){this.mask.enabled=!1,this.curWaterWaveEff&&this.curWaterWaveEff.hideWaterWave()},t.prototype.close=function(){this.curWaterWaveEff&&this.curWaterWaveEff.close(),a.prototype.close.call(this)},i([v],t)}(f.pzaBaseZombie));e.pzaGargantuar=P,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBaseData":"pzaBaseData","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaGarlicChomper:[function(a,t,e){"use strict";cc._RF.push(t,"17cf2Z4741G8ZYVxX1MfBfT","pzaGarlicChomper");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGarlicChomper=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaChomper"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.eating=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.eating=!1,c.pzaGameState.isZombieMode()?this.animation.playAnimation(t.plantData.eatTime>0?"T_idle2":"T_idle1",!0):this.animation.playAnimation(t.plantData.eatTime>0?"idle2":"idle1",!0),c.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead){if(this.baseData.plantData.eatTime>0)return this.baseData.plantData.eatTime-=t,void(this.baseData.plantData.eatTime<=0&&(this.eating=!0,this.animation.playAnimation(c.pzaGameState.isZombieMode()?"T_eat":"eat",!1,function(){e.eating=!1,e.animation.playAnimation(c.pzaGameState.isZombieMode()?"T_idle1":"idle1",!0)})));if(!this.eating){var o=this.findAttackTarget();null!=o&&this.attack(o)}}},t.prototype.findAttackTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1;if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos){var n=window.pzazombieManager.getZombie(o);if(!(o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.DIVE)||o.buffData.hasBuff(l.pzaBuffType.GARLIC))&&n&&-1==n.changeTargetRow&&!n.baseData.zombieData.hypnosis&&(o.zombieData.zombieType!=s.pzaZombieEnum.POLEVAULTING_ZOMBIE&&o.zombieData.zombieType!=s.pzaZombieEnum.POLEVAULTING_ZOMBIE2||o.buffData.hasBuff(l.pzaBuffType.FROZEN)||o.zombieData.toolType==s.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType!=s.pzaZombieEnum.BUNGEE_ZOMBIE||o.xIndex!=a.baseData.xIndex)){var i=p.pzaUtil.getDistance(o.logicPos,a.baseData.logicPos);if(o.logicPos.x<=a.baseData.logicPos.x)i<=.5*c.pzaGameState.map.getBlockWidth()&&(t=o,e=0);else if(!(i>1.8*c.pzaGameState.map.getBlockWidth()))return-1==e?(t=o,void(e=i)):void(e<=i||(t=o,e=i))}}}),null==t){var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t}},t.prototype.attack=function(a){var t=this;this.baseData.plantData.eatTime=40,this.animation.playAnimation(c.pzaGameState.isZombieMode()?"T_attack":"attack",!1,function(){c.pzaGameState.isZombieMode()?t.animation.playAnimation(t.baseData.plantData.eatTime>0?"T_idle2":"T_idle1",!0):t.animation.playAnimation(t.baseData.plantData.eatTime>0?"idle2":"idle1",!0)},function(){if(null!=t.baseData&&!t.baseData.isDead){var e=window.pzazombieManager.getZombie(a);null==e||null==e.baseData||e.baseData.isDead||e.baseData.zombieData.hypnosis?t.baseData.plantData.eatTime=0:(e.baseData.zombieData.zombieType==s.pzaZombieEnum.ZOMBONI2?e.hurt(t.baseData.atk,t.baseData,u.pzaAttackType.EAT):(t.baseData.plantData.eatTime=0,e.hurt(t.baseData.atk,t.baseData,u.pzaAttackType.FLOOR_ATK),a.isDead||a.zombieData.cate==s.pzaZombieCate.IceCar||e.changeMapRow()),null==a.zombieData||a.zombieData.cate!==s.pzaZombieCate.Gargantuar&&a.zombieData.zombieType!=s.pzaZombieEnum.DR_ZOMBOSS?(r.pzaSoundManager.playAudio("ChomperAtk"),a.isDead||(t.baseData.plantData.eatTime=0)):t.baseData.plantData.eatTime=0)}})},i([m],t)}(d.pzaChomper));e.pzaGarlicChomper=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaChomper":"pzaChomper"}],pzaGarlicJalapeno:[function(a,t,e){"use strict";cc._RF.push(t,"b2205dmiOtLNaG0qJ47gfoR","pzaGarlicJalapeno");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGarlicJalapeno=void 0;var r=a("../../Common/pzaWorldEventManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaJalapeno"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.attack=function(){var a=this;window.pzaplantManager.removePlant(this.baseData),this.death(),window.pzaMapManager.shakeMap();for(var t=c.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),e=0;e<12;e++){var o=t.clone();o.x+=100*e,c.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,o,0);var n=.1*e+.5;e>=5&&(n=.05*e+.5),s.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,n,o,null)}window.pzaMapManager.removeRowIceGround(this.baseData.yIndex);for(var i=0;i<=8;i++)window.pzaMapManager.removeLadder(i,this.baseData.yIndex);r.pzaWorldEventManager.triggerEvent(r.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var d=window.pzazombieManager.zombieDatas[this.baseData.yIndex],h=Array.from(d);null!=window.pzazombieManager.drZomBoss&&h.push(window.pzazombieManager.drZomBoss.baseData),h.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(p.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,u.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==l.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(p.pzaBuffType.FROST),t.buffData.removeBuff(p.pzaBuffType.FROZEN)),e&&!e.baseData.isDead&&(e.baseData.zombieData.zombieType==l.pzaZombieEnum.SKELETON_ZOMBIE||e.baseData.zombieData.zombieType==l.pzaZombieEnum.NECROMANCER_ZOMBIE?console.log("imm garlicJalapeno"):e.changeMapRow())}})},i([m],t)}(d.pzaJalapeno));e.pzaGarlicJalapeno=f,cc._RF.pop()},{"../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaJalapeno":"pzaJalapeno"}],pzaGarlic:[function(a,t,e){"use strict";cc._RF.push(t,"794ccTUQuVEDYoMQO0xXY3e","pzaGarlic");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGarlic=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaZombieEnum"),l=a("../pzaGameState"),s=a("./pzaAttackType"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),l.pzaGameState.isZombieMode())this.animation.playAnimation("T_idle",!0);else{var o=function(){e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=r.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};this.blinkTime=r.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("idle",!1,o),l.pzaGameState.onlyShroomCofee=!1}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.hurt=function(t,e,o){if(void 0===o&&(o=null),null!=this.baseData&&!this.baseData.isDead)if(o!=s.pzaAttackType.ROLLING&&o!=s.pzaAttackType.BOOM&&o!=s.pzaAttackType.BANG){if(null!=e&&null!=e.zombieData&&null==o)switch(e.zombieData.zombieType){case p.pzaZombieEnum.FOOTBALL_ZOMBIE:case p.pzaZombieEnum.DANCING_ZOMBIE:case p.pzaZombieEnum.BACKUP_DANCER:t=18;break;case p.pzaZombieEnum.YETI_ZOMBIE:t=24;break;case p.pzaZombieEnum.DIGGER_ZOMBIE:t=28;break;case p.pzaZombieEnum.NEWSPAPER_ZOMBIE:case p.pzaZombieEnum.LADDER_ZOMBIE:t=32;break;case p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM:t=40;break;case p.pzaZombieEnum.JACK_ZOMBIE:t=44;break;case p.pzaZombieEnum.IMP:t=48;break;case p.pzaZombieEnum.POLEVAULTING_ZOMBIE:t=56;break;case p.pzaZombieEnum.SNORKEL_ZOMBIE:t=72;break;default:t=20}this.baseData.hurtPlanet(t),this.refreshHurtState(!1),(this.baseData.isDead||this.baseData.hp<=0)&&(window.pzaplantManager.removePlant(this.baseData),this.death(e))}else a.prototype.hurt.call(this,t,e,o)},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([d],t)}(c.pzaBasePlant));e.pzaGarlic=h,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaGatlingCabbagePult:[function(a,t,e){"use strict";cc._RF.push(t,"c68c8LNIqZHMIPTCODLM7Vh","pzaGatlingCabbagePult");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGatlingCabbagePult=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Bullet/pzaThrowBullet"),d=a("../Data/pzaBuffData"),h=a("../pzaGameState"),m=a("./pzaGatlingPea"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode2=null,t.bulletPrefab2=null,t.ignoreDive=!0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.playNormalAni=function(){var a=this,t=function(){window.pzazombieManager.hasCanAttackZombie(a.baseData,null,!0)?a.animation.playAnimation("attack",!1,t,function(){a.shoot();var t=a.findAttackTarget();a.shoot2(t),l.pzaSoundManager.playAudio("PeashooterAtk")}):a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};t()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(d.pzaBuffType.FLY)&&!o.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.getBulletAtk=function(){return this.baseData.plantData.atkArr[1]},t.prototype.shoot2=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){o.x-=15;var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab2);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode2.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var s=cc.v2(l.x+this.baseData.logicPos.x+14,l.y+this.baseData.logicPos.y+42);i.setPosition(s);var c=i.getComponent(u.pzaThrowBullet);null!=c&&(c.init(!1,this.baseData.yIndex,this.baseData.plantData.atkArr[0],a,n,-1,!1,!1,200),c.updateBulletAngel(90))}}}}}},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.setPeaBallType(),n.init(this.baseData.yIndex,this.getBulletAtk(),1),n.ignoreDive=this.ignoreDive;var i=h.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*h.pzaGameState.map.getBlockWidth())}}}}},i([y({displayName:"\u53d1\u5c04\u70b92",type:cc.Node})],t.prototype,"shootNode2",void 0),i([y({displayName:"\u5b50\u5f39\u9884\u8bbe2",type:cc.Prefab})],t.prototype,"bulletPrefab2",void 0),i([z],t)}(m.pzaGatlingPea);e.pzaGatlingCabbagePult=g,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaGatlingPea":"pzaGatlingPea"}],pzaGatlingPea:[function(a,t,e){"use strict";cc._RF.push(t,"85b04FObQJJvL2iCWdgGt2g","pzaGatlingPea");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGatlingPea=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.ignoreDive=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),u.pzaGameState.onlyShroomCofee=!1},t.prototype.playNormalAni=function(){var a=this,t=function(){window.pzazombieManager.hasCanAttackZombie(a.baseData)?a.animation.playAnimation("attack",!1,t,function(){a.shoot(),l.pzaSoundManager.playAudio("PeashooterAtk")}):a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle2",!1,t))};t()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t)},t.prototype.getBulletAtk=function(){return this.baseData.atk},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.getBulletAtk(),1),n.ignoreDive=this.ignoreDive;var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaGatlingPea=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaGatlingShooterZombie:[function(a,t,e){"use strict";cc._RF.push(t,"65b5fNz3XZEP6oUiVUDqnrp","pzaGatlingShooterZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGatlingShooterZombie=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaZombieBaseBullet"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaZombieEnum"),d=a("../Plant/pzaAttackType"),h=a("../pzaGameState"),m=a("../pzaSpineTool"),f=a("./pzaNormalZombie"),z=a("./pzaZombieSlot"),y=a("./pzaZombieState"),g=cc._decorator,b=g.ccclass,v=g.property,P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="",t.bulletPrefab=null,t.shootNode=null,t.equip1Slot=z.pzaZombieSlotType.hat,t.equip2Slot=z.pzaZombieSlotType.door,t.equipSlotMap=new Map([[u.pzaZombieEnum.GATLING_ZOMBIE_CONE,{slotName:z.pzaZombieSlotType.hat,attNameArr:[z.pzaZombieSlotType.hat+"1",z.pzaZombieSlotType.hat+"2",z.pzaZombieSlotType.hat+"3"],arr1:[80.01,-22.25,-90.94],arr2:[63.2,-21.91,-90.94],arr3:[49.92,-21.73,-90.94]}],[u.pzaZombieEnum.GATLING_ZOMBIE_BUCKET,{slotName:z.pzaZombieSlotType.hat,attNameArr:[z.pzaZombieSlotType.hat_iron+"1",z.pzaZombieSlotType.hat_iron+"2",z.pzaZombieSlotType.hat_iron+"3"],arr1:[121.84,-22.01,-90.94],arr2:[118.15,-23.5,-90.94],arr3:[114.54,-29.36,-90.94]}],[u.pzaZombieEnum.GATLING_ZOMBIE_DOOR,{slotName:z.pzaZombieSlotType.door,attNameArr:[z.pzaZombieSlotType.door+"1",z.pzaZombieSlotType.door+"2",z.pzaZombieSlotType.door+"3"],arr1:[-97.35,-40.81,0],arr2:[-97.35,-40.81,0],arr3:[-97.85,-40.81,0]}]]),t.directThrowHurt=!1,t}return n(t,a),t.prototype.bindData=function(t,e){this.baseData=t,this.initEquips(),a.prototype.bindData.call(this,t,e),this.baseData.zombieData.zombieType==u.pzaZombieEnum.GATLING_ZOMBIE_DOOR?(this.baseData.zombieData.hurtCate=u.pzaZombieHurtCate.PENETRATE_HURT,t.buffData.addBuff(new c.pzaBuffInfo(c.pzaBuffType.IMM_ICE_PEA,-1)),this.directThrowHurt=!0):(this.baseData.zombieData.hurtCate=u.pzaZombieHurtCate.Null,this.directThrowHurt=!1),this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var o=this.animation.findBone("aduck");this.hasUseSrAni?o&&(o.scaleX=.158,o.scaleY=.158):o&&(o.scaleX=0,o.scaleY=0)},t.prototype.initEquips=function(){if(this.baseData&&this.baseData.zombieData){this.slotMap=new Map([]),m.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,z.pzaZombieSlotType.hat,null,0,0),m.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,z.pzaZombieSlotType.door,null,0,0);var a=this.equipSlotMap.get(this.baseData.zombieData.zombieType);a&&(this.slotMap.set(a.slotName,new z.pzaZombieSlot(this.animation.spineAnimation,a.slotName).addState(new z.pzaZombieSlotAtt(1,a.attNameArr[0],a.arr1[0],a.arr1[1],a.arr1[2])).addState(new z.pzaZombieSlotAtt(2,a.attNameArr[1],a.arr2[0],a.arr2[1],a.arr2[2])).addState(new z.pzaZombieSlotAtt(3,a.attNameArr[2],a.arr3[0],a.arr3[1],a.arr3[2]))),this.updateEquipState(a.slotName,0))}},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=y.pzaZombieState.MOVE,this.animation.playAnimation(this.getMoveAniName(),!0,null,function(t,e){"attack"==e.data.name&&a.shoot()},1)},t.prototype.shoot=function(){if(this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(a){l.pzaSoundManager.playAudio("PeashooterAtk");var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);o.y-=15,t.setPosition(o);var n=t.getComponent(s.pzaZombieBaseBullet);n.init(this.baseData.yIndex,20);var i=h.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*h.pzaGameState.map.getBlockWidth())}}},t.prototype.updateMove=function(t){var e=this.baseData.xIndex;a.prototype.updateMove.call(this,t);var o=this.baseData.xIndex;e<0&&o>=0&&this.hasUseSrAni?(this.hasInWater=!0,this.playMoveAnimation(),this.curShadow&&this.curShadow.hideShadow()):o<0&&e>=0&&this.hasUseSrAni&&(null!=this.mask&&(this.mask.enabled=!0),l.pzaSoundManager.playAudio("zombie_leave_water"),this.hasInWater=!1,this.playMoveAnimation())},t.prototype.zombieHurtSound=function(t){this.hasEquip&&t!=d.pzaAttackType.PENETRATE?l.pzaSoundManager.playAudio("screenHurt"):a.prototype.zombieHurtSound.call(this,t)},t.prototype.zombieIntact=function(){this.zombieHurtState=u.pzaHurtStateEnum.INTACT},t.prototype.equipDying=function(){this.equipHurtState=u.pzaHurtStateEnum.DYING,this.updateEquipState(this.baseData.zombieData.zombieType==u.pzaZombieEnum.GATLING_ZOMBIE_DOOR?this.equip2Slot:this.equip1Slot,3)},t.prototype.equipHurt=function(){this.equipHurtState=u.pzaHurtStateEnum.HURT,this.updateEquipState(this.baseData.zombieData.zombieType==u.pzaZombieEnum.GATLING_ZOMBIE_DOOR?this.equip2Slot:this.equip1Slot,2)},t.prototype.equipIntact=function(){this.equipHurtState=u.pzaHurtStateEnum.INTACT,this.updateEquipState(this.baseData.zombieData.zombieType==u.pzaZombieEnum.GATLING_ZOMBIE_DOOR?this.equip2Slot:this.equip1Slot,1)},t.prototype.equipDeath=function(){this.equipHurtState=u.pzaHurtStateEnum.DEAD,this.hasEquip=!1,this.updateEquipState(this.baseData.zombieData.zombieType==u.pzaZombieEnum.GATLING_ZOMBIE_DOOR?this.equip2Slot:this.equip1Slot,0),this.baseData.zombieData.zombieType==u.pzaZombieEnum.GATLING_ZOMBIE_DOOR&&this.baseData.buffData.removeBuff(c.pzaBuffType.IMM_ICE_PEA)},i([v(cc.Prefab)],t.prototype,"bulletPrefab",void 0),i([v({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([b],t)}(f.pzaNormalZombie);e.pzaGatlingShooterZombie=P,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaZombieBaseBullet":"pzaZombieBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaGdyxIcon:[function(a,t,e){"use strict";cc._RF.push(t,"0ec51qLWwRBsKE3t3v0v3k9","pzaGdyxIcon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaChannel"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ball=null,t.txt=null,t.pic=null,t.appId=null,t.adList=null,t.curId=0,t}return n(t,a),t.prototype.onLoad=function(){var a=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){r.pzaChannel.instance().jumpTo(a.appId),a.ball.active=!1})},t.prototype.show=function(a,t){var e=this;this.node.active=!0,this.node.parent=a,this.node.setPosition(t),hzzxsdk.getRecommedAdList(!1,0,0).then(function(a){console.log("\u63a8\u8350\u5217\u8868\u5e7f\u544a\uff1a",a),!a||a.length<=0||(e.adList=a,e.showOneIcon(),e.schedule(e.showOneIcon,3,cc.macro.REPEAT_FOREVER))})},t.prototype.showOneIcon=function(){var a=this,t=this.adList[this.curId];if(t||(this.curId=0,t=this.adList[this.curId])){this.shake(),this.appId=t.appid;var e=t.image;if(e){var o=".png";-1!=e.indexOf(".jpg")&&(o=".jpg"),cc.assetManager.loadRemote(e,{ext:o},function(e,o){if(e)console.log("err==",e);else{var n=new cc.SpriteFrame(o);a.pic.spriteFrame=n,a.txt.string=t.title||""}}),this.curId++,this.curId>=this.adList.length&&(this.curId=0)}}},t.prototype.shake=function(){cc.tween(this.node).repeat(5,cc.tween().to(.05,{angle:10}).to(.05,{angle:0}).to(.05,{angle:-10}).to(.05,{angle:0})).start()},i([s(cc.Node)],t.prototype,"ball",void 0),i([s(cc.Label)],t.prototype,"txt",void 0),i([s(cc.Sprite)],t.prototype,"pic",void 0),i([l],t)}(cc.Component);e.default=c,cc._RF.pop()},{"./pzaChannel":"pzaChannel"}],pzaGdyxItem:[function(a,t,e){"use strict";cc._RF.push(t,"fc0a6pFUMNChYfi/kNAhTFt","pzaGdyxItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaChannel"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gdyx_img=null,t.appId=null,t.page=null,t}return n(t,a),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.on_tiaozhuan,this)},t.prototype.on_tiaozhuan=function(){r.pzaChannel.instance().jumpTo(this.appId)},t.prototype.init=function(a,t,e,o,n){var i=this;this.appId=o,this.page=n;var r=".png";-1!=a.indexOf(".jpg")&&(r=".jpg"),cc.assetManager.loadRemote(a,{ext:r},function(a,t){if(a)console.log("err==",a);else{var e=new cc.SpriteFrame(t);i.gdyx_img.getComponent(cc.Sprite).spriteFrame=e}})},i([s(cc.Node)],t.prototype,"gdyx_img",void 0),i([l],t)}(cc.Component);e.default=c,cc._RF.pop()},{"./pzaChannel":"pzaChannel"}],pzaGetAchieveItem:[function(a,t,e){"use strict";cc._RF.push(t,"0939c3i1qtHLZhK9czUVkIx","pzaGetAchieveItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGetAchieveItem=void 0;var r=a("../../Achieve/pzaAchieveMgr"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaSpriteFrameManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.achieveIcon=null,t.achieveName=null,t.achieveDesc=null,t}return n(t,a),t.prototype.bindData=function(a){l.pzaSpriteFrameManager.loadAchieveIcon(a,this.achieveIcon);var t=r.default.instance().getAchieve(a);null!=t&&(this.achieveName.string=t.name+" \u6210\u5c31\u8fbe\u6210\uff01",this.achieveDesc.string=t.desc)},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([u({displayName:"\u6210\u5c31\u56fe\u6807",type:cc.Sprite})],t.prototype,"achieveIcon",void 0),i([u({displayName:"\u6210\u5c31\u540d\u79f0",type:cc.Label})],t.prototype,"achieveName",void 0),i([u({displayName:"\u6210\u5c31\u63cf\u8ff0",type:cc.Label})],t.prototype,"achieveDesc",void 0),i([c],t)}(cc.Component);e.pzaGetAchieveItem=d,cc._RF.pop()},{"../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaGetAchieveView:[function(a,t,e){"use strict";cc._RF.push(t,"396c6mShGVOU7QCy1jO/9Ig","pzaGetAchieveView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGetAchieveView=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaOperationMgr"),l=a("../../utils/pzaChannel"),s=a("./pzaGetAchieveItem"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.itemPrefab=null,t.content=null,t.shareBtn=null,t.nextBtn=null,t.rewardBubble=null,t.items=null,t.closeCall=null,t}return n(t,a),t.prototype.onDisable=function(){null!=this.items&&(this.items.forEach(function(a){a&&a.close()}),this.items=null)},t.prototype.init=function(a,t){var e=this;this.closeCall=t,this.items=[],a.forEach(function(a){var t=r.pzaGameCommonPool.requestInstant(e.itemPrefab);t.setParent(e.content);var o=t.getComponent(s.pzaGetAchieveItem);o&&o.bindData(a),e.items.push(o)}),this.rewardBubble=null,p.pzaOperationMgr.showShareBubble(this.shareBtn,function(a){e.rewardBubble=a,a||(e.nextBtn.x=0,e.shareBtn.active=!1)})},t.prototype.clickClose=function(){this.close(),this.closeCall&&this.closeCall()},t.prototype.clickShare=function(){var a=this;l.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){a.rewardBubble&&a.rewardBubble.getReward(),a.rewardBubble=null})},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u6210\u5c31item\u9884\u8bbe",type:cc.Prefab})],t.prototype,"itemPrefab",void 0),i([d({displayName:"\u6210\u5c31\u5bb9\u5668",type:cc.Node})],t.prototype,"content",void 0),i([d({displayName:"\u5206\u4eab\u6309\u94ae",type:cc.Node})],t.prototype,"shareBtn",void 0),i([d({displayName:"\u7ee7\u7eed\u6309\u94ae",type:cc.Node})],t.prototype,"nextBtn",void 0),i([u],t)}(cc.Component);e.pzaGetAchieveView=h,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaOperationMgr":"pzaOperationMgr","../../utils/pzaChannel":"pzaChannel","./pzaGetAchieveItem":"pzaGetAchieveItem"}],pzaGiftConfig:[function(a,t,e){"use strict";cc._RF.push(t,"d0b16eCFjVIwKHgKYl+HdWZ","pzaGiftConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGiftConfig=e.pzaPlantGiftDesc=e.pzaPlantGiftType=e.pzaGiftID=e.pzaGiftType=void 0;var o,n,i,r=a("../Battle/Data/pzaPlantEnum"),p=a("./pzaGamePropConfig"),l=a("./pzaLocalData"),s=a("./pzaUtil");(function(a){a[a.Res=0]="Res",a[a.Plant=1]="Plant"})(o=e.pzaGiftType||(e.pzaGiftType={})),function(a){a[a.Begin=0]="Begin",a[a.Dave=1]="Dave",a[a.PlayTicket=2]="PlayTicket",a[a.Garden=3]="Garden",a[a.Festival=10]="Festival",a[a.SJHH=11]="SJHH",a[a.Random=12]="Random"}(n=e.pzaGiftID||(e.pzaGiftID={})),function(a){a[a.GATLING_PEA=0]="GATLING_PEA",a[a.GLOOM_SHROOM=1]="GLOOM_SHROOM",a[a.CATTAIL=2]="CATTAIL",a[a.SPIKEROCK=3]="SPIKEROCK",a[a.COB_CANNON=4]="COB_CANNON",a[a.WINTER_MELON=5]="WINTER_MELON"}(e.pzaPlantGiftType||(e.pzaPlantGiftType={})),function(a){a.GATLING_PEA="\u6781\u901f\u53cc\u622a\u68cd4\u8fde\u53d1\uff0c\u53cc\u622a\u68cd\u4e2d\u7684\u5927\u54e5\u5927\uff01",a.GLOOM_SHROOM="\u8303\u56f4\u6740\u4f24\uff0c\u5bf9\u4ed8\u50f5\u5c38\u7fa4\u7684\u5927\u6740\u5668\uff01",a.CATTAIL="\u8de8\u7ebf\u8ffd\u8e2a\u653b\u51fb\uff0c\u50f5\u5c38\u65e0\u6240\u9041\u5f62\uff01",a.SPIKEROCK="\u6301\u7eed\u6740\u4f24\uff0c\u4e0e\u51cf\u901f\u690d\u7269\u5b8c\u7f8e\u642d\u914d\uff01",a.COB_CANNON="\u53d1\u5c04\u81f4\u547d\u7684\u841d\u535c\u70ae\u5f39\uff0c\u79d2\u6740\u50f5\u5c38\uff01",a.WINTER_MELON="\u8303\u56f4\u6740\u4f24\u52a0\u51cf\u901f\uff0c\u4eba\u6c14\u6700\u9ad8\u7684\u690d\u7269\uff01"}(i=e.pzaPlantGiftDesc||(e.pzaPlantGiftDesc={}));var c=function(){function a(a,t,e,o,n,i,r){this.reward=[{type:0,itemId:0,value:0}],this.ID=a,this.getCount=t,this.name=e,this.reward=o,this.GiftType=i,this.plant=r,this.needVideo=n}return a.initPropConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t)if(t.GiftType==o.Res){var n=[];t.reward.split(",").forEach(function(a){var t=a.split("-"),e={itemId:0,value:0};e.itemId=parseInt(t[0]),e.value=parseInt(t[1]),n.push(e)});var i=new a(t.id,t.getCount,t.name,n,t.needVideo,t.GiftType,t.plant);e.ResGiftConfigMap.set(t.id,i)}else t.GiftType==o.Plant&&(i=new a(t.id,t.getCount,t.name,{},t.needVideo,t.GiftType,t.plant),e.PlantGiftConfigMap.set(t.plant,i))})},a.getPlantGiftDesc=function(a){switch(a){case r.pzaPlantEnum.GATLING_PEA:return i.GATLING_PEA;case r.pzaPlantEnum.GLOOM_SHROOM:return i.GLOOM_SHROOM;case r.pzaPlantEnum.CATTAIL:return i.CATTAIL;case r.pzaPlantEnum.SPIKEROCK:return i.SPIKEROCK;case r.pzaPlantEnum.COB_CANNON:return i.COB_CANNON;case r.pzaPlantEnum.WINTER_MELON:return i.WINTER_MELON}return null},a.getPlantGiftData=function(t){return a.PlantGiftConfigMap.get(t)},a.isAbleGetPlantGift=function(a){var t=l.pzaLocalData.data.curChapter,e=l.pzaLocalData.data.curPart;switch(a){case r.pzaPlantEnum.GATLING_PEA:if(10*t+e>=26)return!0;break;case r.pzaPlantEnum.GLOOM_SHROOM:if(10*t+e>=28)return!0;break;case r.pzaPlantEnum.CATTAIL:if(10*t+e>=31)return!0;break;case r.pzaPlantEnum.SPIKEROCK:if(10*t+e>=49)return!0;break;case r.pzaPlantEnum.COB_CANNON:if(10*t+e>=54)return!0;break;case r.pzaPlantEnum.WINTER_MELON:if(10*t+e>=59)return!0}return!1},a.isUnlockGift=function(a){return a==n.Begin?10*l.pzaLocalData.data.curChapter+l.pzaLocalData.data.curPart>=14:a==n.Dave?l.pzaLocalData.data.hasBeginGift:a==n.PlayTicket||a==n.Garden&&10*l.pzaLocalData.data.curChapter+l.pzaLocalData.data.curPart>=55},a.setGiftCount=function(a){a==n.Begin?(l.pzaLocalData.data.hasBeginGift=!0,l.pzaLocalData.addDirty("hasBeginGift")):a==n.Dave?(l.pzaLocalData.data.getDaveGiftCount++,l.pzaLocalData.addDirty("getDaveGiftCount",l.pzaLocalData.data.getDaveGiftCount.toString()),l.pzaLocalData.data.hasDaveGift=!0,l.pzaLocalData.addDirty("hasDaveGift")):a==n.Garden&&(l.pzaLocalData.data.getGardenGiftCount++,l.pzaLocalData.addDirty("getGardenGiftCount",l.pzaLocalData.data.getGardenGiftCount.toString()),l.pzaLocalData.data.hasGardenGift=!0,l.pzaLocalData.addDirty("hasGardenGift"))},a.getGiftPropData=function(t){var e=a.ResGiftConfigMap.get(t),o=[];return e.reward.forEach(function(a){o.push(new p.pzaRewardPropData(a.itemId,a.value))}),o},a.getGiftData=function(t){var e=a.ResGiftConfigMap.get(t);if(t==n.Random){var o=s.pzaUtil.getRandomValueFromArray([p.pzaGamePropEnum.PROP_CHERRY_BOMB,p.pzaGamePropEnum.PROP_FREE_SUN,p.pzaGamePropEnum.PROP_AUTO_PICK]);e.reward=[],e.reward.push({type:0,itemId:p.pzaGamePropEnum.PROP_COIN,value:500}),e.reward.push({type:0,itemId:o,value:1})}return new a(e.ID,e.getCount,e.name,e.reward,e.needVideo,e.GiftType,e.plant)},a.ResGiftConfigMap=new Map,a.PlantGiftConfigMap=new Map,a}();e.pzaGiftConfig=c,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","./pzaGamePropConfig":"pzaGamePropConfig","./pzaLocalData":"pzaLocalData","./pzaUtil":"pzaUtil"}],pzaGiftMachine:[function(a,t,e){"use strict";cc._RF.push(t,"c27d7qayQtPoa3GM+uOGNIi","pzaGiftMachine");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGiftMachine=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../../utils/pzakc"),s=a("../Data/pzaDropType"),c=a("../Data/pzaPlantEnum"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaGoldMagnet"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.playNormalAni=function(){var a=this,t=function(){if(!d.pzaGameState.gameWin&&a.hasSilver())return a.restTime=6,r.pzaSoundManager.playAudio("MagnetShroom"),void a.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("loop",!1,function(){t(),a.prizeDraw()})},function(){a.absorbCoin()});a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle",!1,t))};this.animation.playAnimation("idle",!1,t)},t.prototype.prizeDraw=function(){var a=l.default.randomInt(1,100);a<70?window.pzaplantManager.plantCreateSun2(this.baseData.logicPos,.75,25):a<85?u.pzaEffectManager.createDropPlantCard(c.pzaPlantEnum.ShiftNut,this.baseData.logicPos,function(){}):u.pzaEffectManager.createDropPlantCard(c.pzaPlantEnum.RandomPlantBox,this.baseData.logicPos,function(){})},t.prototype.hasSilver=function(){var a=!1;return window.pzaMapManager.DropCoinSet.forEach(function(t){t.curDropType==s.pzaDropType.SILVER_COIN&&(a=!0)}),a},t.prototype.absorbCoin=function(){var a=this;if(null!=Array.from(window.pzaMapManager.DropCoinSet)){var t=new Set;window.pzaMapManager.DropCoinSet.forEach(function(a){a.curDropType==s.pzaDropType.SILVER_COIN&&t.add(a)});var e=Array.from(t);null!=e&&(e=e.slice(0,1)).forEach(function(t){t.absorbMove(a.baseData.logicPos)})}},t.prototype.close=function(){a.prototype.close.call(this)},i([f],t)}(h.pzaGoldMagnet));e.pzaGiftMachine=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../utils/pzakc":"pzakc","../Data/pzaDropType":"pzaDropType","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaGoldMagnet":"pzaGoldMagnet"}],pzaGiftRwdItem:[function(a,t,e){"use strict";cc._RF.push(t,"4e9adXCXq9JOoAgA0DpsOZf","pzaGiftRwdItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGiftRwdItem=void 0;var r=a("../Common/pzaGameConfig"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaSpriteFrameManager"),s=a("../Common/pzaUtil"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.desc=null,t.count=null,t.icon=null,t.frameSpine=null,t}return n(t,a),t.prototype.setView=function(a,t,e){switch(void 0===e&&(e=0),this.count.string="",a){case p.pzaItemType.PROP:this.frameSpine.setAnimation(0,"idle",!0),this.frameSpine.timeScale=s.pzaUtil.getRandomFloatNum(.5,.7),this.setPropData(t,e);break;case p.pzaItemType.PLANT:this.frameSpine.setAnimation(0,"idle",!0),this.frameSpine.timeScale=.8,this.setPlantData(t)}},t.prototype.setPlantData=function(a){var t=r.pzaGameConfig.getPlantConfig(a);l.pzaSpriteFrameManager.loadPlantCard(a,this.icon),this.desc.string=t.name},t.prototype.setPropData=function(a,t){void 0===t&&(t=0);var e=p.pzaGamePropConfig.PorpConfigMap.get(a);l.pzaSpriteFrameManager.loadPropIcon(a,this.icon),this.desc.string=e.propName,this.count.string="+"+t},i([d({type:cc.Label})],t.prototype,"desc",void 0),i([d({type:cc.Label})],t.prototype,"count",void 0),i([d({type:cc.Sprite})],t.prototype,"icon",void 0),i([d(sp.Skeleton)],t.prototype,"frameSpine",void 0),i([u],t)}(cc.Component);e.pzaGiftRwdItem=h,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaUtil":"pzaUtil"}],pzaGiftView:[function(a,t,e){"use strict";cc._RF.push(t,"bc5dc2EWZNPwLCCVXzeqoqV","pzaGiftView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGiftView=void 0;var r=a("../Battle/Data/pzaPlantEnum"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGamePropConfig"),s=a("../Common/pzaGiftConfig"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaRewardManager"),d=a("../Common/pzaSoundManager"),h=a("../Common/pzaStatisticsMgr"),m=a("../utils/pzaChannel"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.BeginGiftItem=null,t.DaveGiftItem=null,t.PlayPucketGiftItem=null,t.GardenGiftItem=null,t.PlantGiftPre=null,t.ResContent=null,t.PlantContent=null,t.ResOnShowBtn=null,t.ResOnHideBtn=null,t.PlantOnShowBtn=null,t.PlantOnHideBtn=null,t.scroll=null,t.plantImg=[],t.davePowerNode=null,t.daveFreeSunNode=null,t}return n(t,a),t.prototype.refreshView=function(){if(this.davePowerNode.active=c.pzaLocalData.isShowPowerGift,this.daveFreeSunNode.active=!c.pzaLocalData.isShowPowerGift,this.ResOnShowBtn.active=this.ResContent.active,this.ResOnHideBtn.active=!this.ResContent.active,this.PlantOnShowBtn.active=this.PlantContent.active,this.PlantOnHideBtn.active=!this.PlantContent.active,this.PlantOnShowBtn.opacity="wx"==m.pzaChannel.instance().channel?0:255,this.PlantOnHideBtn.opacity="wx"==m.pzaChannel.instance().channel?0:255,this.PlantOnHideBtn.getComponent(cc.Button).enabled="wx"!=m.pzaChannel.instance().channel,this.ResContent.active){c.pzaLocalData.data.hasBeginGift?(this.DaveGiftItem.active=c.pzaLocalData.data.hasBeginGift,this.BeginGiftItem.active=!1):this.BeginGiftItem.active=s.pzaGiftConfig.isUnlockGift(s.pzaGiftID.Begin);var a=s.pzaGiftConfig.ResGiftConfigMap.get(s.pzaGiftID.Dave),t=(s.pzaGiftConfig.ResGiftConfigMap.get(s.pzaGiftID.PlayTicket),s.pzaGiftConfig.ResGiftConfigMap.get(s.pzaGiftID.Garden));h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"30"},{name:"adname",value:"\u793c\u5305\u5e7f\u544a\uff08\u8d44\u6e90\uff09"}),this.refreshResItem(this.DaveGiftItem,c.pzaLocalData.data.getDaveGiftCount,a.getCount,s.pzaGiftConfig.isUnlockGift(a.ID)),this.refreshResItem(this.GardenGiftItem,c.pzaLocalData.data.getGardenGiftCount,t.getCount,s.pzaGiftConfig.isUnlockGift(t.ID))}if(this.PlantContent.active){if(this.PlantContent.childrenCount<=0)for(var e=0;e<this.plantImg.length;e++){var o=this.plantImg[e],n=p.pzaGameCommonPool.requestInstant(this.PlantGiftPre);n.parent=this.PlantContent,this.refreshPlantItem(n,e,null)}else for(e=0;e<this.PlantContent.children.length;e++)o=this.PlantContent.children[e],this.setBtnVideoNum(o,e);h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"31"},{name:"adname",value:"\u793c\u5305\u5e7f\u544a\uff08\u690d\u7269\uff09"})}},t.prototype.setBtnVideoNum=function(a,t){var e,o;switch(t){case s.pzaPlantGiftType.GATLING_PEA:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GATLING_PEA),o=c.pzaLocalData.data.gatlingAdCount;break;case s.pzaPlantGiftType.GLOOM_SHROOM:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GLOOM_SHROOM),o=c.pzaLocalData.data.gloomShroomAdCount;break;case s.pzaPlantGiftType.CATTAIL:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.CATTAIL),o=c.pzaLocalData.data.cattailAdCount;break;case s.pzaPlantGiftType.SPIKEROCK:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.SPIKEROCK),o=c.pzaLocalData.data.spikerockAdCount;break;case s.pzaPlantGiftType.COB_CANNON:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.COB_CANNON),o=c.pzaLocalData.data.cobCannonAdCount;break;case s.pzaPlantGiftType.WINTER_MELON:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.WINTER_MELON),o=c.pzaLocalData.data.winterMelonAdCount}var n=a.getChildByName("btn_5");n.active=!0;var i=a.getChildByName("buy_text").getComponent(cc.Label);i.string="\u9700\u8981\u89c2\u770b("+o+"/"+e.needVideo+")\u5e7f\u544a",o>=e.needVideo&&(n.active=!1,i.string="\u5df2\u89e3\u9501")},t.prototype.refreshPlantItem=function(a,t){var e,o=a.getChildByName("name").getComponent(cc.Label),n=a.getChildByName("btn_5").getComponent(cc.Button),i=new cc.Component.EventHandler;switch(i.target=this.node,i.component="pzaGiftView",i.handler="clickPlantVideoBtn",t){case s.pzaPlantGiftType.GATLING_PEA:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GATLING_PEA),i.customEventData=r.pzaPlantEnum.GATLING_PEA.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[0];break;case s.pzaPlantGiftType.GLOOM_SHROOM:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GLOOM_SHROOM),i.customEventData=r.pzaPlantEnum.GLOOM_SHROOM.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[1];break;case s.pzaPlantGiftType.CATTAIL:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.CATTAIL),i.customEventData=r.pzaPlantEnum.CATTAIL.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[2];break;case s.pzaPlantGiftType.SPIKEROCK:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.SPIKEROCK),i.customEventData=r.pzaPlantEnum.SPIKEROCK.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[3];break;case s.pzaPlantGiftType.COB_CANNON:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.COB_CANNON),i.customEventData=r.pzaPlantEnum.COB_CANNON.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[4];break;case s.pzaPlantGiftType.WINTER_MELON:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.WINTER_MELON),i.customEventData=r.pzaPlantEnum.WINTER_MELON.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[5]}o.string=e.name,n.clickEvents.push(i),this.setBtnVideoNum(a,t);var p=c.pzaLocalData.data.ownPlants.includes(e.plant);s.pzaGiftConfig.isAbleGetPlantGift(e.plant)&&!p||(a.active=!1)},t.prototype.refreshResItem=function(a,t,e,o){a.active=o;var n=a.getChildByName("buy_text").getComponent(cc.Label),i=a.getChildByName("btn_5").getComponent(cc.Button),r=Math.abs(t-e);n.string="\u53ef\u8d2d\u4e70"+r+"/"+e,i.node.active=t<e,a.getChildByName("buy_over").active=t>=e},t.prototype.clickVideoBtn=function(a,t){var e=this,o=s.pzaGiftConfig.ResGiftConfigMap.get(parseInt(t)),n=[];o.reward.forEach(function(a){n.push(new l.pzaRewardPropData(a.itemId,a.value))}),d.pzaSoundManager.playSFX(),m.pzaChannel.instance().showVideo({sucCall:function(){s.pzaGiftConfig.setGiftCount(t),e.refreshView(),u.pzaRewardManager.recieveRewards(n,function(){e.refreshView()})},failCall:function(){},endCall:function(){},posName:"\u8d44\u6e90\u793c\u5305\u83b7\u53d6",adsid:"30"})},t.prototype.clickPlantVideoBtn=function(a,t){var e=this;m.pzaChannel.instance().showVideo({sucCall:function(){var a,o=s.pzaGiftConfig.getPlantGiftData(parseInt(t));switch(parseInt(t)){case r.pzaPlantEnum.GATLING_PEA:c.pzaLocalData.data.gatlingAdCount++,c.pzaLocalData.addDirty("gatlingAdCount"),a=c.pzaLocalData.data.gatlingAdCount;break;case r.pzaPlantEnum.GLOOM_SHROOM:c.pzaLocalData.data.gloomShroomAdCount++,c.pzaLocalData.addDirty("gloomShroomAdCount"),a=c.pzaLocalData.data.gloomShroomAdCount;break;case r.pzaPlantEnum.CATTAIL:c.pzaLocalData.data.cattailAdCount++,c.pzaLocalData.addDirty("cattailAdCount"),a=c.pzaLocalData.data.cattailAdCount;break;case r.pzaPlantEnum.SPIKEROCK:c.pzaLocalData.data.spikerockAdCount++,c.pzaLocalData.addDirty("spikerockAdCount"),a=c.pzaLocalData.data.spikerockAdCount;break;case r.pzaPlantEnum.COB_CANNON:c.pzaLocalData.data.cobCannonAdCount++,c.pzaLocalData.addDirty("cobCannonAdCount"),a=c.pzaLocalData.data.cobCannonAdCount;break;case r.pzaPlantEnum.WINTER_MELON:c.pzaLocalData.data.winterMelonAdCount++,c.pzaLocalData.addDirty("winterMelonAdCount"),a=c.pzaLocalData.data.winterMelonAdCount}a>=o.needVideo&&(c.pzaLocalData.data.ownPlants.push(o.plant),c.pzaLocalData.addDirty("ownPlants")),e.refreshView()},failCall:function(){},endCall:function(){},posName:"\u690d\u7269\u793c\u5305\u83b7\u53d6",adsid:"31"})},t.prototype.clickCancel=function(){d.pzaSoundManager.playSFX(),this.close()},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},t.prototype.clickShowResBtn=function(){d.pzaSoundManager.playSFX(),this.ResContent.active=!0,this.PlantContent.active=!1,this.scroll.content=this.ResContent,this.refreshView()},t.prototype.clickShowPlantBtn=function(){d.pzaSoundManager.playSFX(),this.ResContent.active=!1,this.PlantContent.active=!0,this.scroll.content=this.PlantContent,this.refreshView()},i([y({displayName:"\u65b0\u624b\u793c\u5305\u754c\u9762",type:cc.Node})],t.prototype,"BeginGiftItem",void 0),i([y({displayName:"\u6234\u592b\u793c\u5305\u754c\u9762",type:cc.Node})],t.prototype,"DaveGiftItem",void 0),i([y({displayName:"\u521b\u610f\u7545\u73a9\u793c\u5305\u754c\u9762",type:cc.Node})],t.prototype,"PlayPucketGiftItem",void 0),i([y({displayName:"\u82b1\u56ed\u8865\u7ed9\u793c\u5305\u754c\u9762",type:cc.Node})],t.prototype,"GardenGiftItem",void 0),i([y({displayName:"\u690d\u7269\u793c\u5305\u9884\u5236\u4f53",type:cc.Prefab})],t.prototype,"PlantGiftPre",void 0),i([y({displayName:"\u8d44\u6e90\u793c\u5305\u754c\u9762",type:cc.Node})],t.prototype,"ResContent",void 0),i([y({displayName:"\u690d\u7269\u793c\u5305\u754c\u9762",type:cc.Node})],t.prototype,"PlantContent",void 0),i([y({displayName:"\u8d44\u6e90\u754c\u9762\u663e\u793a\u4e2d",type:cc.Node})],t.prototype,"ResOnShowBtn",void 0),i([y({displayName:"\u8d44\u6e90\u754c\u9762\u9690\u85cf\u4e2d",type:cc.Node})],t.prototype,"ResOnHideBtn",void 0),i([y({displayName:"\u690d\u7269\u754c\u9762\u663e\u793a\u4e2d",type:cc.Node})],t.prototype,"PlantOnShowBtn",void 0),i([y({displayName:"\u690d\u7269\u754c\u9762\u9690\u85cf\u4e2d",type:cc.Node})],t.prototype,"PlantOnHideBtn",void 0),i([y({displayName:"\u6ed1\u52a8\u7ec4\u4ef6",type:cc.ScrollView})],t.prototype,"scroll",void 0),i([y({type:[cc.SpriteFrame]})],t.prototype,"plantImg",void 0),i([y({displayName:"\u6234\u592b\u8865\u7ed9\u4f53\u529b\u6309\u94ae",type:cc.Node})],t.prototype,"davePowerNode",void 0),i([y({displayName:"\u6234\u592b\u8865\u7ed9\u9633\u5149\u6309\u94ae",type:cc.Node})],t.prototype,"daveFreeSunNode",void 0),i([z],t)}(cc.Component);e.pzaGiftView=g,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaGiftConfig":"pzaGiftConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../utils/pzaChannel":"pzaChannel"}],pzaGloomShroom:[function(a,t,e){"use strict";cc._RF.push(t,"f098cCRikVHVqfMmNScDg1G","pzaGloomShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGloomShroom=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.blinkTime=3,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()),u.pzaGameState.useShroom=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.plantData.sleeping||(this.blinkTime-=t)},t.prototype.wakeUp=function(){a.prototype.wakeUp.call(this),null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.letPlantSleep=function(){!this.sleepAni.node.active&&this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=!1,o=1.7*u.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(t,n){null==t||null==n||n.isDead||null==n.logicPos||n.buffData.hasBuff(s.pzaBuffType.DIVE)||n.buffData.hasBuff(s.pzaBuffType.FLY)||n.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||l.pzaUtil.getDistance(a.baseData.logicPos,n.logicPos)<o&&(e=!0)}),e||a.canJoinDrZomBoss(a.baseData)&&(e=!0),e)return r.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(null!=a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x,a.baseData.logicPos.y+47);c.pzaEffectManager.createGloomShroomEffect(a.baseData.yIndex,t,null),a.hurtZombies()}});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};this.animation.playAnimation("idle1",!1,t)},t.prototype.canJoinDrZomBoss=function(a){if(a.xIndex<5)return null;var t=window.pzazombieManager.drZomBoss;return null==t||null==t.baseData||t.baseData.isDead||t.baseData.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)?null:t.baseData},t.prototype.hurtZombies=function(){var a=this,t=1.7*u.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(e,o){null==e||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(s.pzaBuffType.DIVE)||o.buffData.hasBuff(s.pzaBuffType.FLY)||o.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||l.pzaUtil.getDistance(a.baseData.logicPos,o.logicPos)<t&&e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.PENETRATE)}),this.canJoinDrZomBoss(this.baseData)){var e=this.canJoinDrZomBoss(this.baseData),o=window.pzazombieManager.getZombie(e);o&&o.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.PENETRATE)}},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([z({displayName:"\u7761\u89c9\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"sleepAni",void 0),i([f],t)}(h.pzaBasePlant);e.pzaGloomShroom=y,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaGoldBullet:[function(a,t,e){"use strict";cc._RF.push(t,"28697UgTxhFRIx+zLj2CcRt","pzaGoldBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGoldBullet=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaBuffData"),l=a("./pzaTrackBullet"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletFrameArr=[],t.bulletSpr=null,t.plantBaseData=null,t.trackEnemy=!0,t.yMove=!1,t}return n(t,a),t.prototype.bulletInit=function(a,t){this.bulletSpr.spriteFrame=this.bulletFrameArr[t],this.plantBaseData=a},t.prototype.init=function(t,e,o,n,i,r){void 0===i&&(i=!0),void 0===r&&(r=!1),a.prototype.init.call(this,t,e,o,n),this.trackEnemy=i,this.yMove=r},t.prototype.logicUpdate=function(a){if(this.lifeTime+=a,this.lifeTime>=this.maxLifeTime)this.close();else{if(!this.trackEnemy||null==this.targetData||this.targetData.isDead||null==this.targetData.zombieData||this.targetData.zombieData.hypnosis){if(this.trackEnemy&&(null==this.targetData||this.targetData.isDead||null==this.targetData.zombieData||this.targetData.zombieData.hypnosis)){var t=this.findAttackTarget();null!=t&&(this.targetData=t,this.updateDirection(a))}}else this.updateDirection(a);this.updateMove(a)}},t.prototype.yUpdateMove=function(a){this.node.y-=this.moveSpeed*a*.5},t.prototype.updateMove=function(a){if(this.yMove)return this.yUpdateMove(a),void this.shadowMove();this.logicPos.x+=a*this.moveSpeed*this.moveDirection.x,this.logicPos.y+=a*this.moveSpeed*this.moveDirection.y,this.node.setPosition(this.logicPos),this.shadowMove()},t.prototype.findAttackTarget=function(){var a=this;if(0!=this.trackEnemy){var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,l){if(null!=l&&null!=l.logicPos&&!l.buffData.hasBuff(p.pzaBuffType.DIVE)&&!l.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)){var s=r.pzaUtil.getDistance(a.logicPos,l.logicPos);l.buffData.hasBuff(p.pzaBuffType.FLY)?(-1==n||n>s)&&(n=s,o=l):(-1==e||e>s)&&(e=s,t=l)}}),null!=o?o:t}},t.prototype.close=function(){a.prototype.close.call(this),this.plantBaseData=null,this.bulletSpr.spriteFrame=null},i([u({displayName:"\u5b50\u5f39\u56fe\u7247\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"bulletFrameArr",void 0),i([u({displayName:"\u5b50\u5f39\u7cbe\u7075",type:cc.Sprite})],t.prototype,"bulletSpr",void 0),i([c],t)}(l.pzaTrackBullet);e.pzaGoldBullet=d,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","./pzaTrackBullet":"pzaTrackBullet"}],pzaGoldHoleEffect:[function(a,t,e){"use strict";cc._RF.push(t,"793d73TCaNGDazKre3AVRaZ","pzaGoldHoleEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGoldHoleEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaNodeManager"),l=a("../../Load/pzaBundleObjectPool"),s=a("../../Load/pzaPreLoadManager"),c=a("../../utils/pzakc"),u=a("../Data/pzaDropType"),d=a("../Data/pzaPlantEnum"),h=a("../pzaEffectManager"),m=a("../pzaSunLight"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hole=null,t.holeFrames=[],t.holeTime=0,t.dropTime=0,t.holeStep=1,t.mapXIndex=-1,t.mapYIndex=-1,t.dropMap={},t}return n(t,a),t.prototype.init=function(a,t){this.mapXIndex=a,this.mapYIndex=t,this.holeTime=0,this.holeStep=1,this.showHole(),window.pzaMapManager.GoldHoleSet.add(this),this.dropMap[""+u.pzaDropType.GOLD_COIN]=.15,this.dropMap[""+u.pzaDropType.SILVER_COIN]=.3,this.dropMap[""+u.pzaDropType.DIAMOND]=.05,this.dropMap.sun15=.3,this.dropMap.sun25=.15,this.dropMap.sun50=.05},t.prototype.recover=function(a,t,e,o){this.mapXIndex=a,this.mapYIndex=t,this.holeTime=e,this.holeStep=o,this.showHole(),window.pzaMapManager.GoldHoleSet.add(this)},t.prototype.dropSun=function(a,t){void 0===t&&(t=1);var e=this.node.getPosition();l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.SUN,function(o,n){if(null==o&&null!=n){n.setParent(p.pzaNodeManager.getUpBgNode());var i=n.getComponent(m.pzaSunLight);i&&i.init2(e,t,a),window.pzaplantManager.AllSunLight.add(i)}else console.error(o)})},t.prototype.logicUpdate=function(a){this.holeTime+=a,this.dropTime+=a;var t=this.node.getPosition();if(this.holeTime>=180)return this.close(),window.pzaMapManager.GoldHoleSet.delete(this),void(Math.random()<=.8&&h.pzaEffectManager.createDropPlantCard(d.pzaPlantEnum.SunBomb,t,function(){}));if(this.holeTime>=90&&1==this.holeStep&&(this.holeStep=2,this.showHole()),this.dropTime>3){this.dropTime=0;var e=c.default.randomDraw(this.dropMap)||"sun15";if(e.startsWith("sun")){var o=parseInt(e.substring(3)),n=1;o<25?n=.7:o>25&&(n=2),this.dropSun(o,n)}}},t.prototype.showHole=function(){this.hole.spriteFrame=1==this.holeStep?this.holeFrames[0]:this.holeFrames[1],window.pzaplantManager.holeMap.set(""+this.mapXIndex+this.mapYIndex,1)},t.prototype.clearHole=function(){this.dropCard(),this.close(),window.pzaMapManager.GoldHoleSet.delete(this)},t.prototype.dropCard=function(){var a=this.node.getPosition();window.pzaMapManager.GoldHoleSet.delete(this),Math.random()<=.8&&h.pzaEffectManager.createDropPlantCard(d.pzaPlantEnum.SunBomb,a,function(){})},t.prototype.close=function(){a.prototype.close.call(this),window.pzaplantManager.holeMap.delete(""+this.mapXIndex+this.mapYIndex)},i([y({displayName:"\u6d1e",type:cc.Sprite})],t.prototype,"hole",void 0),i([y({displayName:"\u6d1e\u56fe",type:[cc.SpriteFrame]})],t.prototype,"holeFrames",void 0),i([z],t)}(r.pzaBaseComponent);e.pzaGoldHoleEffect=g,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaNodeManager":"pzaNodeManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzakc":"pzakc","../Data/pzaDropType":"pzaDropType","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaSunLight":"pzaSunLight"}],pzaGoldMagnetShooter:[function(a,t,e){"use strict";cc._RF.push(t,"c62e5p6qYNB15jNtY0AAaC4","pzaGoldMagnetShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGoldMagnetShooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Bullet/pzaGoldBullet"),d=a("../Data/pzaDropType"),h=a("../pzaGameState"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.goldBulletPrefab=null,t.blinkTime=3,t.restTime=0,t.createSunCd=0,t.coinType=0,t.originAng=20,t.bulletCnt=3,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.sleeping=!1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.createSunCd=25,this.restTime=1,this.coinType=0,h.pzaGameState.onlyShroomCofee=!1},t.prototype.playNormalAni=function(){var a=this,t=function(){if(window.pzazombieManager.hasCanAttackZombie(a.baseData))return l.pzaSoundManager.playAudio("PeashooterAtk"),void a.animation.playAnimation("attack",!1,function(){t()},function(){a.shoot()},.7);a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};t()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.restTime>0&&(this.restTime-=t,this.restTime<=0&&(this.hasSilver()?this.absorbCoin():this.restTime=1)),this.createSunCd>0&&(this.createSunCd-=t,this.createSunCd<=0&&(this.createSunCd=25,window.pzaplantManager.plantCreateSun2(this.baseData.logicPos,1,50)))},t.prototype.hasSilver=function(){var a=!1;return window.pzaMapManager.DropCoinSet.forEach(function(t){t.curDropType!=d.pzaDropType.SILVER_COIN&&t.curDropType!=d.pzaDropType.GOLD_COIN&&t.curDropType!=d.pzaDropType.DIAMOND||(a=!0)}),a},t.prototype.shoot=function(){for(var a=this.originAng/(this.bulletCnt-1),t=-this.originAng/2,e=p.pzaNodeManager.getBulletNode(),o=0;o<3;o++){var n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null==n)return;n.setParent(e);var i=this.shootNode.convertToWorldSpaceAR(cc.v2()),l=e.convertToNodeSpaceAR(i);n.setPosition(l);var s=t+o*a,u=cc.misc.degreesToRadians(s),d=cc.v2(Math.cos(u),Math.sin(u)),h=n.getComponent(c.pzaBaseBullet);if(null==h)return;h.init(-1,this.baseData.atk,1,null,d)}},t.prototype.shootGoldBullet=function(){if(this.node&&this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null==a)return;var t=this.shootNode.convertToWorldSpaceAR(cc.v2()),e=a.convertToNodeSpaceAR(t),o=r.pzaGameCommonPool.requestInstant2(this.goldBulletPrefab);if(!o)return;o.setParent(a);var n=o.getComponent(u.pzaGoldBullet);n&&n.bulletInit(this.baseData,this.coinType),n&&n.init(500,null,e,this.baseData.yIndex,!1)}},t.prototype.absorbCoin=function(){var a=this,t=Array.from(window.pzaMapManager.DropCoinSet);null!=t&&(this.restTime=3,(t=t.slice(0,1)).forEach(function(t){t.curDropType!=d.pzaDropType.SILVER_COIN&&t.curDropType!=d.pzaDropType.GOLD_COIN&&t.curDropType!=d.pzaDropType.DIAMOND||(t.curDropType==d.pzaDropType.SILVER_COIN?a.coinType=0:t.curDropType==d.pzaDropType.GOLD_COIN?a.coinType=1:t.curDropType==d.pzaDropType.DIAMOND&&(a.coinType=2),t.absorbMove(a.baseData.logicPos),setTimeout(function(){a.shootGoldBullet()},800))}))},i([y({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([y({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([y({displayName:"\u8d27\u5e01\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"goldBulletPrefab",void 0),i([z],t)}(m.pzaBasePlant);e.pzaGoldMagnetShooter=g,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaGoldBullet":"pzaGoldBullet","../Data/pzaDropType":"pzaDropType","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaGoldMagnet:[function(a,t,e){"use strict";cc._RF.push(t,"c5905QxdaNEapbfnmpbE9QQ","pzaGoldMagnet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGoldMagnet=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.restTime=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.sleeping=!1,this.restTime=0,this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),l.pzaGameState.onlyShroomCofee=!1},t.prototype.playNormalAni=function(){var a=this,t=function(){if(!l.pzaGameState.gameWin&&window.pzaMapManager.DropCoinSet.size>0)return a.restTime=6,r.pzaSoundManager.playAudio("MagnetShroom"),void a.animation.playAnimation("attack",!1,t,function(){a.absorbCoin()});a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};this.animation.playAnimation("idle",!1,t)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.restTime-=t},t.prototype.absorbCoin=function(){var a=this,t=Array.from(window.pzaMapManager.DropCoinSet);null!=t&&(t=t.slice(0,5)).forEach(function(t){t.absorbMove(a.baseData.logicPos)})},i([u],t)}(s.pzaBasePlant));e.pzaGoldMagnet=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaGotRewardView:[function(a,t,e){"use strict";cc._RF.push(t,"cc313x2SFRHPpxTbZTja0EM","pzaGotRewardView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGotRewardView=void 0;var r=a("../Common/pzaGameCommonPool"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.itemParent=null,t}return n(t,a),t.prototype.bindData=function(a,t,e){this.enterBtnCall=t,this.closeBtnCall=e;var o=cc.instantiate(a);o.parent=this.itemParent,o.setPosition(0,0)},t.prototype.clickEnterBtn=function(){this.enterBtnCall&&this.enterBtnCall(),this.close()},t.prototype.clickCloseBtn=function(){this.closeBtnCall&&this.closeBtnCall(),this.close()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s({type:cc.Node})],t.prototype,"itemParent",void 0),i([l],t)}(cc.Component);e.pzaGotRewardView=c,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaGraveBuster:[function(a,t,e){"use strict";cc._RF.push(t,"88b4f8lc7lKtpSRmJt/bXt1","pzaGraveBuster");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGraveBuster=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaDropType"),l=a("../pzaEffectManager"),s=a("../pzaGameState"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.swallTime=0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.swallTime=0,r.pzaSoundManager.playAudio("GraveBuster"),this.animation.playAnimation("idle",!1,function(){r.pzaSoundManager.playAudio("gravebusterchomp"),e.animation.playAnimation("attack",!0)}),this.atkInterval=4.5,s.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||(this.swallTime+=t,this.swallTime>=this.atkInterval?this.swallowEnd():null!=this.baseData.logicPos&&(this.baseData.logicPos.y-=t*(35/this.atkInterval)))},t.prototype.logicLateUpdate=function(){a.prototype.logicLateUpdate.call(this),null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos||this.node.setPosition(this.baseData.logicPos)},t.prototype.swallowEnd=function(){window.pzaplantManager.removePlant(this.baseData),this.death(),window.pzaMapManager.removeTomb(this.baseData.xIndex,this.baseData.yIndex),l.pzaEffectManager.createDirtEffect("idle2",this.baseData.yIndex,this.baseData.logicPos,null),Math.random()<=.2?l.pzaEffectManager.createDropCoin(p.pzaDropType.GOLD_COIN,this.baseData.logicPos):l.pzaEffectManager.createDropCoin(p.pzaDropType.SILVER_COIN,this.baseData.logicPos)},i([d],t)}(c.pzaBasePlant));e.pzaGraveBuster=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaDropType":"pzaDropType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaGroupEnum:[function(a,t,e){"use strict";cc._RF.push(t,"3426cg49eVIiYOL6XQvZ3G4","pzaGroupEnum"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGroupEnum=void 0,function(a){a.PLANT_BULLET="PlantBullet",a.ZOMBIE="Zombie",a.TORCHWOOD="TorchWood",a.PLANT="Plant",a.BOWLING="Bowling",a.WALL="Wall",a.ZOMBIE_BULLET="ZombieBullet",a.BRAIN="Brain",a.ZOMBIEFIRETORCH="ZombieTorch",a.PORTALDOOR="Portal"}(e.pzaGroupEnum||(e.pzaGroupEnum={})),cc._RF.pop()},{}],pzaGroveEffect:[function(a,t,e){"use strict";cc._RF.push(t,"ca9a1YXYU5Lq6K1D3L5mq+/","pzaGroveEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGroveEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),i([l],t)}(r.pzaBaseComponent));e.pzaGroveEffect=s,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent"}],pzaGuanKaItemView:[function(a,t,e){"use strict";cc._RF.push(t,"94d58qmgwFH+bfrpPdKMuF1","pzaGuanKaItemView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameConfig"),l=a("../Common/pzaGameManager"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaSpriteFrameManager"),d=a("../Common/pzaTipManager"),h=a("../Common/pzaUIManager"),m=a("../Common/pzaWorldEventManager"),f=a("../utils/pzakc"),z=a("./pzaCommonMask"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.guankaImg=null,t.guanKaName=null,t.guanKaPlant=null,t.lockNode=null,t.passNode=null,t.guanKaMaskNode=null,t.startGameNode=null,t.loseStar=[],t.winStarArr=[],t.zombieImg=null,t.beltNode=null,t.curChapter=1,t.curPart=1,t.btZombiesArr=[2,1,3,1,-1,4,1,5,1,-2],t.btPlantArr=["zw002","zw003","zw004","zw040","zw005","zw006","zw007","zw008","zw040","zw009"],t.hyZombiesArr=[6,1,7,1,-3,8,1,9,1,-4],t.hyPlantArr=["zw010","zw011","zw012","zw040","zw013","zw014","zw015","zw016","zw040","zw017"],t.ycZombiesArr=[11,1,14,1,-5,15,1,17,1,-6],t.ycPlantArr=["zw018","zw019","zw020","zw040","zw021","zw022","zw023","zw024","zw040","zw025"],t.wyZombiesArr=[18,1,19,1,-7,20,1,21,1,-8],t.wyPlantArr=["zw026","zw027","zw028","zw040","zw029","zw030","zw031","zw032","zw040","zw033"],t.wdZombiesArr=[23,1,24,1,-9,25,1,26,1,-10],t.wdPlantArr=["zw041","zw034","zw035","zw040","zw036","zw037","zw038","zw039","zw040","zw040"],t.startGameCall=null,t.unlockPart=!1,t.passPart=!1,t.costPower=s.pzaLocalData.normalPowerCost,t.gameDelayTime=1.5,t}return n(t,a),t.prototype.bindStartGameCall=function(a){this.startGameCall=a},t.prototype.bindData=function(a,t,e){this.curChapter=a,this.curPart=t,this.unlockPart=this.curChapter<s.pzaLocalData.data.curChapter||this.curChapter==s.pzaLocalData.data.curChapter&&this.curPart<=s.pzaLocalData.data.curPart,this.passPart=this.curChapter<s.pzaLocalData.data.curChapter||this.curChapter==s.pzaLocalData.data.curChapter&&this.curPart<s.pzaLocalData.data.curPart,5==this.curChapter&&10==this.curPart&&(this.passPart=s.pzaLocalData.data.passLastPart),10==this.curChapter&&10==this.curPart&&(this.passPart=s.pzaLocalData.data.passWtLastPart),this.updateStar(),this.updateUI(e),s.pzaLocalData.isShowPowerGift||(this.startGameNode.getChildByName("New Label").y=0,this.startGameNode.getChildByName("rightPower").active=!1,this.costPower=0,this.gameDelayTime=0);var o=this.startGameNode.getChildByName("rightPower").getChildByName("rightPowercost");o&&(o.getComponent(cc.Label).string="X"+s.pzaLocalData.normalPowerCost),this.zombieImg.node.scale=.65},t.prototype.updateStartGameNode=function(a){this.curPart==a?(this.node.scale=1,this.unlockPart?(this.startGameNode.active=!0,this.startGameNode.opacity=255):this.startGameNode.active=!1):(this.node.scale=.65,this.startGameNode.active=!1)},t.prototype.scrollMove=function(a){var t=821.65-189.25*(this.curPart-1),e=Math.abs(a-t);e<=189.25?(this.node.scale=.65+.35*(189.25-e)/189.25,this.unlockPart&&(this.startGameNode.active=!0,this.startGameNode.opacity=(189.25-e)/189.25*255)):(this.node.scale=.65,this.startGameNode.active=!1)},t.prototype.updateUI=function(a){this.guanKaName.string="\u5173\u5361"+this.curPart,this.passPart?(this.lockNode.active=!1,this.guanKaMaskNode.active=!1,this.passNode.active=!0,this.zombieImg.node.color=cc.color(255,255,255,255),this.guanKaPlant.node.color=cc.color(255,255,255,255)):this.unlockPart?(this.lockNode.active=!1,this.guanKaMaskNode.active=!1,this.passNode.active=!1,this.zombieImg.node.color=cc.color(255,255,255,255),this.guanKaPlant.node.color=cc.color(255,255,255,255)):(this.lockNode.active=!0,this.guanKaMaskNode.active=!0,this.passNode.active=!1,s.pzaLocalData.isWeekTwo?(this.zombieImg.node.color=cc.color(255,255,255,255),this.guanKaPlant.node.color=cc.color(255,255,255,255)):(this.zombieImg.node.color=cc.color(0,0,0,255),this.guanKaPlant.node.color=cc.color(0,0,0,255))),this.updateStartGameNode(a),this.updateZombieImg(),this.updatePlantImg(),this.beltNode.active=10==this.curPart&&5!=this.curChapter&&10!=this.curChapter||(5==this.curChapter||10==this.curChapter)&&5==this.curPart},t.prototype.updateStar=function(){var a=p.pzaGameConfig.getPartStar(this.curChapter,this.curPart);if(null!=a&&a>0)if(this.curChapter<s.pzaLocalData.data.curChapter)this.showWinStar();else if(this.curChapter==s.pzaLocalData.data.curChapter)if(this.curPart<=s.pzaLocalData.data.curPart)this.showWinStar();else for(var t=0;t<3;t++)this.loseStar[t].node.active=!1,this.winStarArr[t].node.active=!1;else for(t=0;t<3;t++)this.loseStar[t].node.active=!1,this.winStarArr[t].node.active=!1;else for(t=0;t<3;t++)this.loseStar[t].node.active=!1,this.winStarArr[t].node.active=!1},t.prototype.showWinStar=function(){var a=s.pzaLocalData.getPartStar(this.curChapter,this.curPart);this.loseStar[0].node.active=!0,this.loseStar[1].node.active=!0,this.loseStar[2].node.active=!0;for(var t=0;t<3;t++)this.winStarArr[t].node.active=t<a},t.prototype.updateZombieImg=function(){var a=0,t=this.curChapter>5?this.curChapter-5:this.curChapter;if(1==t?a=this.btZombiesArr[this.curPart-1]:2==t?a=this.hyZombiesArr[this.curPart-1]:3==t?a=this.ycZombiesArr[this.curPart-1]:4==t?a=this.wyZombiesArr[this.curPart-1]:5==t&&(a=this.wdZombiesArr[this.curPart-1]),a>0)this.guankaImg.node.active=!1,this.zombieImg.node.opacity=255,u.pzaSpriteFrameManager.loadZombieCard(a,this.zombieImg),this.changePosByZombieId(a),1==t?(this.guankaImg.node.active=!0,u.pzaSpriteFrameManager.loadGuanKaImg("lv_img0",this.guankaImg)):2==t?(this.guankaImg.node.active=!0,u.pzaSpriteFrameManager.loadGuanKaImg("lv_img2",this.guankaImg)):3==t?(this.guankaImg.node.active=!0,u.pzaSpriteFrameManager.loadGuanKaImg("lv_img4",this.guankaImg)):4==t?(this.guankaImg.node.active=!0,u.pzaSpriteFrameManager.loadGuanKaImg("lv_img6",this.guankaImg)):5==t&&(this.guankaImg.node.active=!0,u.pzaSpriteFrameManager.loadGuanKaImg("lv_img8",this.guankaImg));else{this.guankaImg.node.active=!0,this.zombieImg.node.opacity=0;var e=null;-1==a?e="lv_img1":-2==a?e="lv_img0":-3==a?e="lv_img3":-4==a?e="lv_img2":-5==a?e="lv_img5":-6==a?e="lv_img4":-7==a?e="lv_img7":-8==a?e="lv_img6":-9==a?e="lv_img8":-10==a&&(e="lv_img9"),e&&u.pzaSpriteFrameManager.loadGuanKaImg(e,this.guankaImg)}},t.prototype.updatePlantImg=function(){var a="",t=this.curChapter>5?this.curChapter-5:this.curChapter;1==t?a="wholePlantIcon/"+this.btPlantArr[this.curPart-1]:2==t?a="wholePlantIcon/"+this.hyPlantArr[this.curPart-1]:3==t?a="wholePlantIcon/"+this.ycPlantArr[this.curPart-1]:4==t?a="wholePlantIcon/"+this.wyPlantArr[this.curPart-1]:5==t&&(a="wholePlantIcon/"+this.wdPlantArr[this.curPart-1]),u.pzaSpriteFrameManager.loadPlantImg(a,this.guanKaPlant)},t.prototype.changePosByZombieId=function(a){1==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=60):2==a?(this.zombieImg.node.x=15,this.zombieImg.node.y=65):3==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):4==a?(this.zombieImg.node.x=15,this.zombieImg.node.y=55):5==a?(this.zombieImg.node.x=20,this.zombieImg.node.y=65):6==a?(this.zombieImg.node.x=15,this.zombieImg.node.y=65):7==a?(this.zombieImg.node.x=15,this.zombieImg.node.y=65):8==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):9==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):11==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):14==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):15==a?(this.zombieImg.node.x=40,this.zombieImg.node.y=65):17==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):18==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):19==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):20==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):21==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):23==a?(this.zombieImg.node.x=0,this.zombieImg.node.y=110):24==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=55):25==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=55):26==a&&(this.zombieImg.node.x=25,this.zombieImg.node.y=65)},t.prototype.showLockTween=function(){for(var a=cc.tween(this.lockNode),t=10;t<=13;t++)a.to(.07,{angle:0+t}).to(.07,{angle:0-t});a.to(.07,{angle:0}).start()},t.prototype.clickStartBtn=function(){var a=this;if(this.unlockPart)if(r.pzaGameState.midOut)r.pzaGameState.curChapter==this.curChapter&&r.pzaGameState.curPart==this.curPart&&l.pzaGameManager.getCurrentGame().isMainMode()?(this.startGameCall&&this.startGameCall(),l.pzaGameManager.getCurrentGame().gameRecover(this.curChapter,this.curPart,null)):l.pzaGameManager.midOutStart(l.pzaGameManager.getGameMode(this.curChapter,this.curPart),this.curChapter,this.curPart,this.startGameCall.bind(this),!0);else{if(s.pzaLocalData.data.power<this.costPower)return d.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void h.pzaUIManager.showPowerView();s.pzaLocalData.setPower(-this.costPower),f.default.sendMsg("powerani"),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.POWER_ANI,{cost:this.costPower}),z.pzaCommonMask.showMask(),this.scheduleOnce(function(){z.pzaCommonMask.hideMask(),a.startGameCall&&a.startGameCall(),h.pzaUIManager.removeBoardUI(),l.pzaGameManager.preLoadAndStart(l.pzaGameManager.getGameMode(a.curChapter,a.curPart),a.curChapter,a.curPart),r.pzaGameState.weekTwoInitPlants=[]},this.gameDelayTime)}else this.showLockTween(),c.pzaSoundManager.playAudio("unlockpart")},i([b({displayName:"\u5f53\u524d\u5173\u5361\u56fe\u7247",type:cc.Sprite})],t.prototype,"guankaImg",void 0),i([b({displayName:"\u5f53\u524d\u5173\u5361\u540d\u79f0",type:cc.Label})],t.prototype,"guanKaName",void 0),i([b({displayName:"\u5f53\u524d\u5173\u5361\u690d\u7269",type:cc.Sprite})],t.prototype,"guanKaPlant",void 0),i([b({displayName:"\u9501\u8282\u70b9",type:cc.Node})],t.prototype,"lockNode",void 0),i([b({displayName:"\u901a\u8fc7\u8282\u70b9",type:cc.Node})],t.prototype,"passNode",void 0),i([b({displayName:"\u5173\u5361\u8499\u7248\u8282\u70b9",type:cc.Node})],t.prototype,"guanKaMaskNode",void 0),i([b({displayName:"\u5f00\u59cb\u6e38\u620f\u6309\u94ae",type:cc.Node})],t.prototype,"startGameNode",void 0),i([b({displayName:"\u661f\u661f",type:cc.Sprite})],t.prototype,"loseStar",void 0),i([b({displayName:"\u8d62\u7684\u661f\u661f",type:cc.Sprite})],t.prototype,"winStarArr",void 0),i([b({displayName:"\u50f5\u5c38\u56fe\u7247",type:cc.Sprite})],t.prototype,"zombieImg",void 0),i([b({displayName:"\u4f20\u9001\u5e26",type:cc.Node})],t.prototype,"beltNode",void 0),i([g],t)}(cc.Component);e.default=v,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask"}],pzaGuideDialogView:[function(a,t,e){"use strict";cc._RF.push(t,"b41ebcZIqNOl6hK3wENh5Vn","pzaGuideDialogView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGuideDialogView=void 0;var r=a("../Battle/Data/pzaGuideType"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSoundManager"),c=a("../Common/pzaSpineController"),u=a("../Common/pzaUtil"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bgButton=null,t.dialogNode=null,t.word=null,t.continueNode=null,t.selectBoard=null,t.selectTittle=null,t.selectTxt=null,t.coinLabel=null,t.daveAni=null,t.words=null,t.confirmWords=null,t.cancelWords=null,t.dialogEndCall=null,t.firstClickCall=null,t.lastDialogCall=null,t.confirmCall=null,t.cancelCall=null,t.canContinue=!1,t.daveDeathAni=!1,t}return n(t,a),t.prototype.onEnable=function(){this.bgButton.on(cc.Node.EventType.TOUCH_START,this.clickNext,this),this.coinLabel.string=u.pzaUtil.getCurrencyStr(l.pzaLocalData.data.coin)},t.prototype.onDisable=function(){this.bgButton.off(cc.Node.EventType.TOUCH_START,this.clickNext,this)},t.prototype.showDialog=function(a,t,e,o,n){void 0===e&&(e=null),void 0===n&&(n=!1),this.words=a,this.continueNode.active=!0,this.selectBoard.active=!1,this.dialogNode.active=!1,this.canContinue=!1,this.daveDeathAni=n,this.dialogEndCall=t,this.firstClickCall=e,this.lastDialogCall=o,this.enterAnimation()},t.prototype.showSelectDialog=function(a,t,e,o,n,i,r,p,l){var s=this;void 0===l&&(l=null),this.words=a,this.continueNode.active=!0,this.selectBoard.active=!1,this.dialogNode.active=!1,this.confirmWords=n,this.cancelWords=r,this.dialogEndCall=p,this.lastDialogCall=function(){s.showSelectBoard(t,e,o,i)},this.firstClickCall=l,this.enterAnimation()},t.prototype.showSelectBoard=function(a,t,e,o){this.continueNode.active=!1,this.selectBoard.active=!0,this.selectTittle.string=a,this.selectTxt.string=t,this.confirmCall=e,this.cancelCall=o},t.prototype.showNextWord=function(){var a=this;if(null!=this.words){var t=this.words.shift();null!=t?(this.word.string=t.word,t.daveAni==r.pzaDaveAni.NUT?(this.playShortSound(),this.daveAni.playAnimation("2alk3",!1,function(){a.daveAni.playAnimation("2idle1",!0)})):(this.playShortSound(),this.daveAni.playAnimation("1talk3",!1,function(){a.daveAni.playAnimation("1idle1",!0)})),null!=this.lastDialogCall&&this.words.length<=0&&(this.lastDialogCall(),this.lastDialogCall=null)):this.outAnimation()}else this.outAnimation()},t.prototype.enterAnimation=function(){var a=this;this.daveAni.playAnimation("1enter1",!1,function(){a.dialogNode.active=!0,a.canContinue=!0,a.showNextWord()})},t.prototype.outAnimation=function(){var a=this;if(this.dialogNode.active=!1,this.canContinue=!1,this.daveDeathAni){var t="Bungee_fall";Math.ceil(3*Math.random()),t=t,s.pzaSoundManager.playAudio(t)}this.daveAni.playAnimation(this.daveDeathAni?"death":"leave",!1,function(){a.close(),a.dialogEndCall&&a.dialogEndCall()})},t.prototype.clickNext=function(){this.canContinue&&(this.showNextWord(),this.firstClickCall&&this.firstClickCall(),this.firstClickCall=null)},t.prototype.clickConfirm=function(){this.confirmCall&&this.confirmCall(),this.selectBoard.active=!1,this.words=this.confirmWords,this.showNextWord()},t.prototype.clickCancel=function(){this.cancelCall&&this.cancelCall(),this.selectBoard.active=!1,this.words=this.cancelWords,this.showNextWord()},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},t.prototype.playShortSound=function(){s.pzaSoundManager.playAudio("daveshort")},i([m({displayName:"\u80cc\u666f\u6309\u94ae",type:cc.Node})],t.prototype,"bgButton",void 0),i([m({displayName:"\u5bf9\u8bdd\u6846\u8282\u70b9",type:cc.Node})],t.prototype,"dialogNode",void 0),i([m({displayName:"\u6587\u5b57",type:cc.Label})],t.prototype,"word",void 0),i([m({displayName:"\u7ee7\u7eed",type:cc.Node})],t.prototype,"continueNode",void 0),i([m({displayName:"\u9009\u62e9\u5bf9\u8bdd\u6846\u8282\u70b9",type:cc.Node})],t.prototype,"selectBoard",void 0),i([m({displayName:"\u9009\u62e9\u6807\u9898",type:cc.Label})],t.prototype,"selectTittle",void 0),i([m({displayName:"\u9009\u62e9\u6587\u672c",type:cc.Label})],t.prototype,"selectTxt",void 0),i([m({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],t.prototype,"coinLabel",void 0),i([m({displayName:"\u6234\u592b\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"daveAni",void 0),i([h],t)}(cc.Component);e.pzaGuideDialogView=f,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaUtil":"pzaUtil"}],pzaGuideManager:[function(a,t,e){"use strict";cc._RF.push(t,"769a2uE36pNHoz5+DpNycx5","pzaGuideManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGuideManager=void 0;var r=a("../Battle/Data/pzaGuideType"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Battle/pzaGameState"),s=a("../Load/pzaPreLoadManager"),c=a("../View/Battle/pzaGuideView"),u=a("../View/pzaGuideDialogView"),d=a("./pzaGamePropConfig"),h=a("./pzaLocalData"),m=a("./pzaTipManager"),f=a("./pzaUIManager"),z=a("./pzaWorldEventManager"),y=cc._decorator,g=y.ccclass,b=(y.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.guideType=null,t.guideStep=0,t.autoHideTime=0,t.autoNextGuide=!1,t.guidePlant=null,t.triggerExtraGuide=!1,t.guideEndCall=null,t}return n(t,a),t.prototype.onLoad=function(){window.pzaGuideManager=this},t.prototype.update=function(a){l.pzaGameState.gamePause||this.autoHideTime>0&&(this.autoHideTime-=a,this.autoHideTime<=0&&(this.autoNextGuide?(this.autoNextGuide=!1,this.guideStepNext()):m.pzaTipManager.hideGuideTip()))},t.prototype.guideStart=function(a){if(this.guideType=null,this.guideStep=0,this.guidePlant=null,this.triggerExtraGuide=!1,this.autoHideTime=0,this.autoNextGuide=!1,this.guideEndCall=null,l.pzaGameState.gameMode==l.pzaGameMode.ZOMBIE_ENERMY)return 1==l.pzaGameState.curPart?void(this.guideType=r.pzaGuideType.GUIDE_ZOMBIE_ENERMY_1):void(a&&a());if(l.pzaGameState.gameMode==l.pzaGameMode.VASE)return 1==l.pzaGameState.curPart?void(this.guideType=r.pzaGuideType.GUIDE_VASE):void(a&&a());if(1==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return this.guideType=r.pzaGuideType.GUIDE_PLANT_1_1,void(l.pzaGameState.sunLightCount=150);if(2==l.pzaGameState.curPart)return this.guideType=r.pzaGuideType.GUIDE_NEW_PLANT_1_2,void(this.guidePlant=p.pzaPlantEnum.SUN_FLOWER);if(3==l.pzaGameState.curPart)return h.pzaLocalData.data.curChapter>1||h.pzaLocalData.data.curPart>3?void(a&&a()):void(this.guideType=r.pzaGuideType.GUIDE_PROP_1_3);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_SHOVEL_1_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE)}else if(2==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_NINGHT_2_1);if(2==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_CARD_SLOT_2_2);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE);if(l.pzaGameState.curPart>=3&&h.pzaLocalData.data.coin>=750&&6==h.pzaLocalData.data.plantSlotCount&&!h.pzaLocalData.data.unlockShop)return void(this.guideType=r.pzaGuideType.GUIDE_CARD_SLOT_2_3);if(l.pzaGameState.curPart>=6&&h.pzaLocalData.data.coin>=5e3&&7==h.pzaLocalData.data.plantSlotCount&&!h.pzaLocalData.data.unlockShop)return void(this.guideType=r.pzaGuideType.GUIDE_CARD_SLOT_2_6)}else if(3==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_POOL_3_1);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE);if(!h.pzaLocalData.data.unlockShop){if(h.pzaLocalData.data.coin>=750&&6==h.pzaLocalData.data.plantSlotCount)return void(this.guideType=r.pzaGuideType.GUIDE_CARD_SLOT_2_3);if(h.pzaLocalData.data.coin>=5e3&&7==h.pzaLocalData.data.plantSlotCount)return void(this.guideType=r.pzaGuideType.GUIDE_CARD_SLOT_2_6)}}else if(4==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_4_1);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BANG_JAR_4_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_NINGHT_4_10)}else if(5==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_5_1);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_5_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BOSS_5_10)}else if(6==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_6_1);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_6_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE)}else if(7==l.pzaGameState.curChapter){if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE)}else if(8==l.pzaGameState.curChapter){if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE)}else if(9==l.pzaGameState.curChapter){if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BANG_JAR_4_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_NINGHT_4_10)}else if(10==l.pzaGameState.curChapter){if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_10_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BOSS_5_10)}a&&a()},t.prototype.guideStepPre=function(){this.guideStep--,this.guideShow()},t.prototype.guideStepNext=function(){this.guideStep++,this.guideShow()},t.prototype.guideStepTo=function(a){this.guideStep=a,this.guideShow()},t.prototype.guideShow=function(a,t){if(void 0===a&&(a=null),void 0===t&&(t=null),null!=t&&(this.guideEndCall=t),this.guideType==r.pzaGuideType.GUIDE_PLANT_1_1)switch(this.guideStep){case 0:return this.guidePlant=p.pzaPlantEnum.PEA_SHOOTER,void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u9a91\u58eb\u5361\u724c\uff0c\u628a\u5b83\u6361\u8d77\u6765\u3002");case 1:return this.guidePlant=null,void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u5730\u9762\uff0c\u53ec\u5524\u9a91\u58eb\u6218\u6597\uff01");case 2:return l.pzaGameState.guideSunPause=!1,void m.pzaTipManager.showGuideTip("\u5e72\u7684\u6f02\u4eae\uff01\n\u4f60\u4e5f\u53ef\u4ee5\u62d6\u653e\u9a91\u58eb\u5361\uff01");case 3:return void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u6536\u96c6\u6389\u843d\u7684\u80fd\u91cf\u7f50\u3002");case 4:return void m.pzaTipManager.showGuideTip("\u7ee7\u7eed\u6536\u96c6\u80fd\u91cf\u7f50\uff0c\n\u4f60\u9700\u8981\u5b83\u4eec\u6765\u53ec\u5524\u66f4\u591a\u9a91\u58eb\uff01");case 5:return this.autoHideTime=5,this.autoNextGuide=!0,this.guidePlant=null,void m.pzaTipManager.showGuideTip("\u592a\u597d\u4e86\uff0c\u4f60\u5df2\u7ecf\u6536\u96c6\u5230\u4e86\u8db3\u591f\n\u4e0b\u4e00\u6b21\u53ec\u5524\u7684\u80fd\u91cf\u4e86\uff01");case 6:return this.guidePlant=p.pzaPlantEnum.PEA_SHOOTER,void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u5047\u9762\u9a91\u58eb555\uff0c\u518d\u53ec\u5524\u4e00\u6b21\u3002");case 7:return this.guidePlant=null,l.pzaGameState.guideZombiePause=!1,window.pzazombieManager.nextWaveTime=0,this.autoHideTime=5,void m.pzaTipManager.showGuideTip("\u522b\u8ba9\u602a\u4eba\u9760\u8fd1\u57ce\u5e02\uff01");default:return void this.guideEnd()}if(this.guideType==r.pzaGuideType.GUIDE_NEW_PLANT_1_2)switch(this.guideStep){case 0:return this.autoHideTime=5,this.autoNextGuide=!0,void m.pzaTipManager.showGuideTip("\u80fd\u91cf\u7f50\u662f\u975e\u5e38\u91cd\u8981\u7684\u8d44\u6e90\u3002");case 1:return this.autoHideTime=5,this.autoNextGuide=!0,void m.pzaTipManager.showGuideTip("\u4f0a\u5179\u53ef\u4ee5\u5e2e\u52a9\u4f60\u6536\u96c6\u80fd\u91cf\u7f50\uff0c\u8bf7\u81f3\u5c11\u53ec\u55243\u6b21\u4f0a\u5179\u3002");case 2:return this.autoHideTime=5,void m.pzaTipManager.showGuideTip("\u53ec\u55243\u6b21\u4f0a\u5179\uff0c\u8fd9\u6837\u4f60\u624d\u6709\u66f4\u591a\u7684\n\u673a\u4f1a\u5728\u602a\u4eba\u7684\u653b\u52bf\u4e2d\u6d3b\u4e0b\u6765\u3002");default:return void this.guideEnd()}if(this.guideType==r.pzaGuideType.GUIDE_PROP_1_3)switch(this.guideStep){case 1:return void this.showGuideView([new r.pzaDialog("\u770b\u6765\u602a\u4eba\u4eec\u65e9\u6709\u51c6\u5907\u3002"),new r.pzaDialog("\u70b9\u51fb\u8fd9\u4e2a\u56fe\u6807\uff0c\u4f60\u5c31\u4f1a\u83b7\u5f97500\u80fd\u91cf\uff01",function(){h.pzaLocalData.obtainProp(d.pzaGamePropEnum.PROP_FREE_SUN,1,!1),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GUIDE_REFRESH_PROP,null)}),new r.pzaDialog("\u514d\u8d39\u9001\u4f60\u4e00\u6b21\uff0c\u4ee5\u540e\u76f4\u63a5\u8d2d\u4e70\uff01")],a,cc.v2(74,304),function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.USE_GAME_PROP,d.pzaGamePropEnum.PROP_FREE_SUN),m.pzaTipManager.showGameTip("\u589e\u52a0\u4e86500\u70b9\u80fd\u91cf\u3002")});case 2:return void this.showGuideView([new r.pzaDialog("\u80fd\u91cf\u6e90\u6e90\u4e0d\u65ad\uff0c\u611f\u89c9\u6709\u70b9\u7d2f\u4e86\u3002"),new r.pzaDialog("\u70b9\u51fb\u8fd9\u4e2a\u56fe\u6807\uff0c\u4e3a\u4f60\u81ea\u52a8\u62fe\u53d6\u80fd\u91cf\u3002",function(){h.pzaLocalData.obtainProp(d.pzaGamePropEnum.PROP_AUTO_PICK,1,!1),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GUIDE_REFRESH_PROP,null)})],a,cc.v2(184,304),function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.USE_GAME_PROP,d.pzaGamePropEnum.PROP_AUTO_PICK);for(var a=0;a<5;a++)window.pzaplantManager.autoCreateSun()});case 3:return void this.showGuideView([new r.pzaDialog("\u5371\u9669\uff01\u5feb\u53ec\u5524...\u5feb\u53ec\u5524\u8fd9\u4f4d\u9a91\u58eb\uff01",function(){h.pzaLocalData.obtainProp(d.pzaGamePropEnum.PROP_CHERRY_BOMB,1,!1),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GUIDE_REFRESH_PROP,null)})],a,cc.v2(293,304),function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.USE_GAME_PROP,d.pzaGamePropEnum.PROP_CHERRY_BOMB)});default:return void this.guideEnd()}if(this.guideType==r.pzaGuideType.GUIDE_SHOVEL_1_5)switch(this.guideStep){case 0:return void this.showGuideDialogView([new r.pzaDialog("\u6211\u4eec\u53c8\u89c1\u9762\u4e86\u3002"),new r.pzaDialog("\u76ee\u524d\u4e3a\u6b62\u4f60\u505a\u7684\u4e0d\u9519\uff01"),new r.pzaDialog("\u56e0\u6b64\u6211\u8981\u5956\u52b1\u4f60\uff01"),new r.pzaDialog("\u4f46\u662f\u9996\u5148\uff0c\u4f60\u5f97\u5e2e\u6211\u4e2a\u5fd9\uff01"),new r.pzaDialog("\u628a\u57ce\u5e02\u6e05\u7406\u5e72\u51c0\u3002"),new r.pzaDialog("\u7528\u7a7a\u767d\u5361\u7247\u53ec\u56de\u9a91\u58eb\uff01"),new r.pzaDialog("\u5f00\u59cb\u5427\uff01")],a);case 1:return void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u62ff\u8d77\u7a7a\u767d\u5361\u7247\uff01");case 2:return void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u53ec\u56de\u4e00\u4f4d\u9a91\u58eb\uff01");case 3:return void m.pzaTipManager.showGuideTip("\u4e00\u76f4\u53ec\u56de\u5427\uff0c\u77e5\u9053\u4f60\u7684\u57ce\u5e02\u91cc\u6ca1\u6709\u9a91\u58eb\uff01");case 4:return m.pzaTipManager.hideGuideTip(),void this.showGuideDialogView([new r.pzaDialog("\u597d\u7684\uff0c\u5e72\u5f97\u597d\uff0c\n\u73b0\u5728\u7ed9\u4f60\u4e2a\u60ca\u559c\uff01"),new r.pzaDialog("\u6211\u4eec\u53bb\u73a9\u6218\u8f66\u51b2\u51fb\uff01"),new r.pzaDialog("\u62ff\u597d\u8fd9\u5f20\u5361\u7247\uff01",null,r.pzaDaveAni.NUT),new r.pzaDialog("\u4e3a\u4ec0\u4e48\u8981\u7ed9\u4f60\u5361\u7247\uff1f"),new r.pzaDialog("\u56e0\u4e3a\uff01\u72c2\u6b22\u5f00\u59cb\u4e86\uff01"),new r.pzaDialog("\u6211\u4eec\u53bb\u8d62\u4e2a\u51a0\u519b\u56de\u6765\uff01\uff01\uff01")],this.guideStepNext.bind(this),function(){window.pzaMapManager.showRedLine(3)});default:return window.pzaMapManager.showPauseBtn(),void this.guideEnd()}if(this.guideType!=r.pzaGuideType.GUIDE_NINGHT_2_1)if(this.guideType!=r.pzaGuideType.GUIDE_CARD_SLOT_2_2)if(this.guideType!=r.pzaGuideType.GUIDE_CARD_SLOT_2_3)if(this.guideType!=r.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5)if(this.guideType!=r.pzaGuideType.GUIDE_CARD_SLOT_2_6)if(this.guideType!=r.pzaGuideType.GUIDE_POOL_3_1)if(this.guideType!=r.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5)if(this.guideType!=r.pzaGuideType.GUIDE_4_1){if(this.guideType==r.pzaGuideType.GUIDE_BANG_JAR_4_5)switch(this.guideStep){case 0:return void this.showGuideDialogView([new r.pzaDialog("\u6211\u548c\u6211\u7684\u54e5\u4eec\uff0c\n\u5f17\u83b1\u79d1\u65af\u5361\u65af\u7279-\u54c8\u7ef4\uff0c\n\u4ee5\u524d\u5728\u65e0\u804a\u7684\u65f6\u5019\n\u5c31\u7838\u7f50\u5b50\u3002"),new r.pzaDialog("\u6b63\u5de7\u54c8\u7ef4\u4e0d\u5728\u9547\u4e0a\uff0c\u4f60\u6765\u548c\n\u6211\u4e00\u8d77\u5427\uff0c\u54c8\u7ef4\u4e8c\u53f7\uff01"),new r.pzaDialog("\u73b0\u5728\u5c31\u6309\u7167\u4f60\u7684\u610f\u613f\u53bb\u6253\u7834\n\u5b83\u4eec\u5427\uff0c\u54c8\u7ef4\uff01")],a);case 1:return void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u4e00\u53ea\u7f50\u5b50\uff0c\u770b\u770b\u91cc\u9762\u6709\u4ec0\u4e48\uff01");case 2:return this.autoHideTime=5,void m.pzaTipManager.showGuideTip("\u6467\u6bc1\u5168\u90e8\u50f5\u5c38\u548c\u7f50\u5b50\uff0c\u7ed3\u675f\u8fd9\u4e00\u5173\u5361");case 3:return m.pzaTipManager.hideGuideTip(),void this.showGuideDialogView([new r.pzaDialog("\u54e5\u4eec\u513f\uff0c\u4f60\u628a\u8fd9\u4e9b\u7f50\u5b50\u90fd\u6253\n\u7834\u4e86\uff0c\u5e72\u7684\u6f02\u4eae\uff01"),new r.pzaDialog("\u5c31\u50cf\u6211\u6253\u788e\u6240\u6709\n\u5783\u573e\u6876\u65f6\u90a3\u6837\u6f02\u4eae\uff01"),new r.pzaDialog("\u6765\uff0c\u6211\u7ed9\u4f60\u66f4\u591a\u7684\u7f50\u5b50\uff01"),new r.pzaDialog("\u5c0f\u5fc3\u70b9\uff0c\n\u522b\u7838\u7684\n\u592a\u5feb\u4e86\u3002"),new r.pzaDialog("\u4f60\u4e0d\u60f3\u5192\u51fa\u4e00\u5927\u5806\u50f5\u5c38\uff0c\u8ba9\n\u4f60\u624b\u5fd9\u811a\u4e71\u5427\uff0c\u54c8\u54c8\u3002")],a);case 4:return m.pzaTipManager.hideGuideTip(),void this.showGuideDialogView([new r.pzaDialog("\u597d\u7684\uff01"),new r.pzaDialog("\u8fd9\u5e94\u8be5\u662f\u6700\u540e\u4e00\u6279\u4e86\u3002"),new r.pzaDialog("\u6253\u8d25\u4ed6\u4eec\uff0c\u4e4b\u540e\u4f60\u7684\u5de5\u4f5c\u5c31\n\u5b8c\u6210\u4e86\uff01")],a);default:return void this.guideEnd()}this.guideType!=r.pzaGuideType.GUIDE_NINGHT_4_10?this.guideType!=r.pzaGuideType.GUIDE_5_1?this.guideType!=r.pzaGuideType.GUIDE_5_5?this.guideType!=r.pzaGuideType.GUIDE_BOSS_5_10?this.guideType!=r.pzaGuideType.GUIDE_6_1?(this.guideType==r.pzaGuideType.GUIDE_6_5&&this.showGuideDialogView([new r.pzaDialog("\u6211\u4eec\u53bb\u73a9\u4fdd\u9f84\u7403\uff01"),new r.pzaDialog("\u563f\uff0c\u62ff\u597d\u8fd9\u4e2a\u575a\u679c\uff01",null,r.pzaDaveAni.NUT),new r.pzaDialog("\u4e3a\u4ec0\u4e48\u6211\u8981\u7ed9\u4f60\u575a\u679c\uff1f"),new r.pzaDialog("\u56e0\u4e3a\u6211\u75af\u4e86\uff01\uff01\uff01\uff01\uff01"),new r.pzaDialog("\u73b0\u5728\u51fa\u53d1\uff01\n\u7ed9\u6211\u8d62\u4e2a\u51a0\u519b\u56de\u6765\uff01\uff01\uff01")],a),this.guideType!=r.pzaGuideType.GUIDE_10_5?this.guideType!=r.pzaGuideType.GUIDE_ZOMBIE_ENERMY_1?this.guideType!=r.pzaGuideType.GUIDE_VASE||this.showGuideDialogView([new r.pzaDialog("\u8fd9\u5c31\u662f\u7f50\u5b50\u7ec8\u7ed3\u8005\u3002"),new r.pzaDialog("\u8fd9\u4e9b\u5173\u5361\u771f\u7684\u5f88\u96be\u3002"),new r.pzaDialog("\u73a9\u7684\u5f00\u5fc3\u3002")],a,null,null):this.showGuideDialogView([new r.pzaDialog("\u50f5\u5c38\u4eec\u60f3\u8981\u6211\u5e2e\u4ed6\u4eec\u7ec3\u4e60\u5165\n\u4fb5\u623f\u5b50\u3002"),new r.pzaDialog("\u6211\u544a\u8bc9\u4ed6\u4eec\uff0c\u53ea\u8981\u690d\u7269\u4e0d\u88ab\n\u7834\u574f\u5c31\u6ca1\u95ee\u9898\u3002"),new r.pzaDialog("\u6240\u4ee5\uff0c\u6211\u7528\u786c\u7eb8\u677f\u628a\u4f60\u7684\u8349\n\u576a\u9694\u5f00\u4e86\u3002"),new r.pzaDialog("\u73a9\u7684\u5f00\u5fc3\u3002")],a,null,null):this.showGuideDialogView([new r.pzaDialog("\u6211\u4e0d\u5f97\u4e0d\u8b66\u544a\u4f60\xb7\xb7\xb7"),new r.pzaDialog("\u4f60\u4f1a\u8ba8\u538c\u4e0b\u4e00\u5173\u7684\u3002"),new r.pzaDialog("\u4e3a\u4ec0\u4e48\uff1f\n\u56e0\u4e3a\u63a5\u4e0b\u6765\u662f\u4e00\u4e2a\u63a5\u4e00\u4e2a\u7684\n\u7334\u5b50\u50f5\u5c38\u3002"),new r.pzaDialog("\u6211\u8ba8\u538c\u8fd9\u4e9b\u7cca\u6d82\u7684\u7334\u5b50\u50f5\u5c38\uff01\uff01"),new r.pzaDialog("\u6211\u6068\u4ed6\u4eec\uff01\uff01"),new r.pzaDialog("\u6068\u5b83\u4eec\u7684\n\u90a3\u79cd\u6267\u7740\u52b2\uff01"),new r.pzaDialog("\u8fd8\u6709\u90a3\u79cd\u62a5\u590d\u5fc3\uff01"),new r.pzaDialog("\u554a-\u554a-\u554a-\u90a3\u4e2a\u767d\u75f4\u6765\u5566\uff01")],a,null,null)):this.showGuideDialogView([new r.pzaDialog("\u4f19\u8ba1\uff0c\u90a3\u4e9b\u50f5\u5c38\u8fd8\u5728\u6e90\u6e90\u4e0d\n\u65ad\u7684\u6765\u88ad"),new r.pzaDialog("\u8fd9\u6b21\uff0c\u770b\u6211\u6765\u6311\u4e9b\u690d\u7269\uff01"),new r.pzaDialog("\u6211\u9009\xb7\xb7\xb7\xb7\xb7\xb7\u8fd9\u4e09\u79cd\uff01")],a):this.showGuideDialogView([new r.pzaDialog("\u54e6\u54e6\uff0c\u4ed6\u5728\u8fd9\u91cc\u3002"),new r.pzaDialog("\u4f60\u6700\u597d\u505a\u597d\u51c6\u5907\u3002"),new r.pzaDialog("\u8fd9\u5c06\u4f1a\u662f\u4e00\u573a\n\u5927\u6218\u5f79\uff01"),new r.pzaDialog("\u542c\u597d\uff0c\u90a3\u4e48\uff0c\n\u6211\u77e5\u9053\u4ed6\u7684\u5f31\u70b9\u662f\uff1a"),new r.pzaDialog("\u4f60\u5fc5\u987b\u653b\u51fb\u4ed6\u7684\u80f0\u817a\uff01"),new r.pzaDialog("\u5662\uff0c\u4e0d\uff0c\u90a3\u662f\n\u4e0d\u540c\u7684\u4e00\u53ea......"),new r.pzaDialog("\u4f60\u5fc5\u987b...\u5443...\u8e22\u4ed6\u7684..."),new r.pzaDialog("\u5514......"),new r.pzaDialog("\u4f60\u5fc5\u987b\u6309\u4e0a\u4e0a\u4e0b\u4e0b\u5de6\u53f3......"),new r.pzaDialog("\u5443......"),new r.pzaDialog("\u554a\uff0c\u6211\u60f3\u8d77\u6765\u4e86\uff01\u5b83\u662f...")],a,null,null,!0):this.showGuideDialogView([new r.pzaDialog("\u4f11\u95f2\u82b1\u56ed\u5f88\u4e0d\u9519\u5427\uff0c\u54c8\uff1f"),new r.pzaDialog("\u4efb\u4f55\u65f6\u5019\u4f60\u90fd\u80fd\u4ece\n\u4e3b\u83dc\u5355\u8fdb\u5165\u82b1\u56ed\u3002"),new r.pzaDialog("\u4f46\u591f\u4e86\uff01\u73b0\u5728\u662f\u65f6\u5019\u56de\u53bb\n\u7167\u770b\u597d\u4f60\u7684\u5c4b\u5b50\u4e86\uff01\u3002"),new r.pzaDialog("\u6211\u4e0d\u5f97\u4e0d\u8b66\u544a\u4f60\xb7\xb7\xb7"),new r.pzaDialog("\u4f60\u4f1a\u8ba8\u538c\u4e0b\u4e00\u5173\u7684\u3002"),new r.pzaDialog("\u4e3a\u4ec0\u4e48\uff1f\n\u56e0\u4e3a\u63a5\u4e0b\u6765\u662f\u4e00\u4e2a\u63a5\u4e00\u4e2a\u7684\n\u7334\u5b50\u50f5\u5c38\u3002"),new r.pzaDialog("\u6211\u8ba8\u538c\u8fd9\u4e9b\u7cca\u6d82\u7684\u7334\u5b50\u50f5\u5c38\uff01\uff01"),new r.pzaDialog("\u6211\u6068\u4ed6\u4eec\uff01\uff01"),new r.pzaDialog("\u6068\u5b83\u4eec\u7684\n\u90a3\u79cd\u6267\u7740\u52b2\uff01"),new r.pzaDialog("\u8fd8\u6709\u90a3\u79cd\u62a5\u590d\u5fc3\uff01"),new r.pzaDialog("\u554a-\u554a-\u554a-\u90a3\u4e2a\u767d\u75f4\u6765\u5566\uff01")],a,null,null):this.showGuideDialogView([new r.pzaDialog("\u54c7--\uff01\u4ed6\u4eec\u751a\u81f3\u5728\u4f60\u7684\u5c4b\n\u9876\u4e0a\u627e\u5230\u6761\u8def\uff01 "),new r.pzaDialog("\u771f\u662f\u4e9b\u6709\u6052\u5fc3\u7684\u50f5\u5c38"),new r.pzaDialog("\u8003\u8651\u5230\u4f60\u5c4b\u9876\u7684\u89d2\u5ea6\uff0c\n\u6211\u60f3\u4f60\u4f1a\u9700\u8981\u7528\u5230\n\u6d0b\u8471\u6295\u624b\u7684\u3002"),new r.pzaDialog("\u8bb0\u4f4f\u8fd9\u70b9\uff0c\u4f60\u4f1a\u5e73\u5b89\u7684\uff01")],a,null,null):this.showGuideDialogView([new r.pzaDialog("\u600e\u4e48\u7a81\u7136\u53d8\u5f97\u8fd9\u4e48\u6697\u4e86\uff1f"),new r.pzaDialog("\u8fd9\u53ef\u771f\u4e0d\u662f\u4ec0\u4e48\u597d\u5146\u5934\uff1f"),new r.pzaDialog("\u55ef\uff0c\u597d\u5427\uff0c\n\u5e0c\u671b\u4f60\u80fd\u6d3b\u8fc7\u4eca\u665a\u54df\uff01")],a)}else this.showGuideDialogView([new r.pzaDialog("\u4f60\u77e5\u9053\uff0c\u4ed6\u4eec\u66fe\u53eb\u6211\n\u201c\u8ff7\u96fe\u7537\u201d\u3002"),new r.pzaDialog("\u56e0\u4e3a\u6211\u66fe\u505c\u7559\u5728\u96fe\u4e2d\u7136\u540e\u7a81\n\u7136\u8df3\u51fa\u6765\uff0c\u5413\u5446\u4e86\u6240\u6709\u4eba\uff01"),new r.pzaDialog("\u5662\uff0c\u90a3\u90fd\u662f\u8fc7\u53bb\u7684\u4e8b\u4e86\u3002")],a);else this.showGuideDialogView([new r.pzaDialog("\u50f5\u5c38\u7684\u8fdb\u653b\u8ba1\u5212\u5176\u5b9e\u662f\u4ef6\u6709\n\u8da3\u7684\u4e8b\u60c5\u3002\u6709\u65f6\u4ed6\u4eec\u7684\u6570\u91cf\n\u4f1a\u5f88\u5c11\u3002"),new r.pzaDialog("\u5f88\u5c0f\n\u4f46\u5f88\u5351\u9119\uff01"),new r.pzaDialog("\u9632\u5b88\u597d\u4f60\u7684\u5c0f\u817f\u5427\uff01")],a);else this.showGuideDialogView([new r.pzaDialog("\u770b\u6765\u602a\u4eba\u4eec\u8981\u653e\u5f03\u8fdb\u653b\u57ce\u5e02\n\u8857\u9053\u4e86\u3002"),new r.pzaDialog("\u73b0\u5728\u4ed6\u4eec\u8981\u8fdb\u653b\n\u57ce\u5e02\u7684\u5b9e\u9a8c\u5de5\u5382\u4e86\u3002"),new r.pzaDialog("\u4f46\u6700\u91cd\u8981\u7684\u662f\uff0c\n\u4fee\u5361\u7ec4\u7ec7\u638c\u63e1\u4e86\u5947\u602a\u7684\u5c01\u5370\uff01"),new r.pzaDialog("\u73b0\u5728\u4f60\u7684\u90e8\u5206\u9a91\u58eb\u65e0\u6cd5\u4f7f\u7528\u4e86\uff01"),new r.pzaDialog("\u8fd9\u90fd\u602a\u8fd9\u5947\u602a\u7684\u5c01\u5370\uff01")],a);else this.showGuideSelectDialog([new r.pzaDialog("\u563f\uff01\n\u60f3\u5728\u589e\u52a0\u4e00\u4e2a\u5361\u7247\u69fd\u5417\uff1f"),new r.pzaDialog("\u8fd9\u5c06\u82b1\u8d39\u4f60$5000\uff0c\u4e4b\u540e\u4f60\u6bcf\u5173\n\u90fd\u80fd\u9009\u62e98\u4f4d\u9a91\u58eb\u800c\u4e0d\u662f7\u4f4d\u4e86\uff01"),new r.pzaDialog("\u542c\u8d77\u6765\u600e\u4e48\u6837\uff1f")],"$5000","\u5347\u7ea7\u52308\n\u4e2a\u5361\u7247\u69fd\uff1f",function(){h.pzaLocalData.data.coin-=5e3,h.pzaLocalData.data.plantSlotCount=8,h.pzaLocalData.addDirty("coin","plantSlotCount")},[new r.pzaDialog("\u56de\u89c1\uff01")],null,[new r.pzaDialog("\u771f\u626b\u5174\u554a\uff01")],a);else this.showGuideDialogView([new r.pzaDialog("\u73a9\u8fc7\u201c\u6253\u602a\u4eba\u201d\u6e38\u620f\u5417\uff1f"),new r.pzaDialog("\u8fd9\u5c31\u50cf\u662f\n\u6572\u5730\u9f20\u3002"),new r.pzaDialog("\u4f60\u770b\uff0c\u90a3\u4e9b\u6bdb\u8338\u8338\u7684\n\u5c0f\u8001\u9f20\u4e0d\u662f\u6b64\u523b\u6b63\u5728\u4f60\u7684\u57ce\u5e02\u91cc\u6253\u6d1e\u5417\uff1f"),new r.pzaDialog("\u8036\uff0c\u5c31\u50cf\u90a3\u6837\uff0c\n\u4f46\u5e76\u4e0d\u662f\u9f39\u9f20\uff0c\n\u800c\u662f\u602a\u4eba\u3002"),new r.pzaDialog("\u5e76\u4e14\u4e0d\u662f\u94c1\u9539\uff0c\u662f\u9524\u5b50\u3002"),new r.pzaDialog("\u5f53\u7136\u4e0d\u662f\u6211\uff0c\n\u662f\u4f60\uff01")],a,null,function(){window.pzaMapManager.initMapTomb(l.pzaGameState.curChapter,l.pzaGameState.curPart,null)});else this.showGuideSelectDialog([new r.pzaDialog("\u563f\uff01\n\u60f3\u5728\u589e\u52a0\u4e00\u4e2a\u5361\u7247\u69fd\u5417\uff1f"),new r.pzaDialog("\u8fd9\u5c06\u82b1\u8d39\u4f60$750\uff0c\n\u4e4b\u540e\u4f60\u6bcf\u5173\u90fd\u80fd\u9009\u62e97\u4f4d\u9a91\u58eb\u800c\u4e0d\u662f6\u4f4d\u4e86\uff01"),new r.pzaDialog("\u542c\u8d77\u6765\u600e\u4e48\u6837\uff1f")],"$750","\u5347\u7ea7\u52307\n\u4e2a\u5361\u7247\u69fd\uff1f",function(){h.pzaLocalData.data.coin-=750,h.pzaLocalData.data.plantSlotCount=7,h.pzaLocalData.addDirty("coin","plantSlotCount")},[new r.pzaDialog("\u592a\u597d\u4e86\uff01\u5f53\u4f60\u6512\u5230$5000\uff0c\n\u6211\u5c06\u4f1a\u7ed9\u4f60\u5347\u7ea7\u5230\n8\u4e2a\u5361\u7247\u69fd\uff01"),new r.pzaDialog("\u56de\u89c1\uff01")],null,[new r.pzaDialog("\u771f\u626b\u5174\u554a\uff01")],a);else this.showGuideDialogView([new r.pzaDialog("\u563f\uff0c\u6307\u6325\u5b98\n\u4f60\u76ee\u524d\u5df2\u7ecf\u6536\u96c6\u4e86"+h.pzaLocalData.data.coin),new r.pzaDialog("\u5f53\u4f60\u6536\u96c6\u5230$750\u65f6\uff0c\n\u6211\u4f1a\u5356\u7ed9\u4f60\u4e9b\u5b9e\u7528\u7684\u4e1c\u897f\uff01")],a);else this.showGuideDialogView([new r.pzaDialog("\u665a\u4e0a\u597d\u3002"),new r.pzaDialog("\u90a3\u4e9b\u602a\u4eba\u4e0d\u4f1a\u90a3\u4e48\u5bb9\u6613\u5c31\u653e\u5f03\u4e86\u5427\uff1f"),new r.pzaDialog("\u4f60\u4f1a\u6ce8\u610f\u5230\u591c\u95f4\u548c\u602a\u4eba\u4f5c\u6218\n\u4e0d\u540c\u4e8e\u767d\u5929\u3002"),new r.pzaDialog("\u9996\u5148\uff0c\u4e0d\u80fd\u4ece\u57ce\u5e02\u91cc\u83b7\u53d6\u80fd\u91cf\u4e86\u3002"),new r.pzaDialog("\u4f46\u4f60\u4ecd\u53ef\u4ee5\u901a\u8fc7\n\u4f0a\u5179\u83b7\u5f97\u80fd\u91cf\u3002"),new r.pzaDialog("\u800c\u4e14\u4f60\u5f88\u5e78\u8fd0\uff0c\n\u4f60\u53ef\u4ee5\u4f7f\u7528\u7532\u6597\u738b\u4e86\u3002"),new r.pzaDialog("\u5c3d\u53ef\u80fd\u591a\u7684\u53ec\u5524\u7532\u6597\u738b\u5427\uff0c\n\u4f60\u4f1a\u633a\u8fc7\u53bb\u7684")],a)},t.prototype.guideShowSpeedBtn=function(a){this.showGuideView([new r.pzaDialog("\u70b9\u51fb\u8fd9\u4e2a\u56fe\u6807\uff0c\u4f1a\u8ba9\u4f60\u7684\u6e38\u620f\u901f\u5ea6\u52a0\u5feb\uff01",function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GUIDE_SHOW_SPEED,null)})],a,cc.v2(390,320),function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GUIDE_USE_SPEED,null)})},t.prototype.guideShowNeedMoreSun=function(){this.autoHideTime=5,this.triggerExtraGuide=!0,m.pzaTipManager.showGuideTip("\u4f60\u9700\u8981\u66f4\u591a\u7684\u5411\u65e5\u8475\n\u8fd9\u6837\u4f60\u624d\u80fd\u66f4\u5feb\u5730\u79cd\u690d\u7269\uff01")},t.prototype.guideEnd=function(){this.hideGuide(),this.guideEndCall&&this.guideEndCall()},t.prototype.hideGuide=function(){this.guidePlant=null,m.pzaTipManager.hideGuideTip()},t.prototype.showGuideDialogView=function(a,t,e,o,n){void 0===e&&(e=null),void 0===o&&(o=null),void 0===n&&(n=!1),f.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.GUIDE_DIALOG_VIEW,function(i){(i&&i.getComponent(u.pzaGuideDialogView)).showDialog(a,t,e,o,n)})},t.prototype.showGuideSelectDialog=function(a,t,e,o,n,i,r,p,l){void 0===l&&(l=null),f.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.GUIDE_DIALOG_VIEW,function(s){(s&&s.getComponent(u.pzaGuideDialogView)).showSelectDialog(a,t,e,o,n,i,r,p,l)})},t.prototype.showGuideView=function(a,t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),f.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.GUIDE_VIEW,function(n){(n&&n.getComponent(c.pzaGuideView)).showGuide(a,t,e,o)})},i([g],t)}(cc.Component));e.pzaGuideManager=b,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaGuideView":"pzaGuideView","../View/pzaGuideDialogView":"pzaGuideDialogView","./pzaGamePropConfig":"pzaGamePropConfig","./pzaLocalData":"pzaLocalData","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGuideTip:[function(a,t,e){"use strict";cc._RF.push(t,"8c8adtgMMlIxaYhA5UfNdVR","pzaGuideTip");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGuideTip=void 0;var r=a("../Battle/pzaGameState"),p=a("./pzaBaseComponent"),l=a("./pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.word=null,t.lossCarTip=null,t.lossPlantTip=null,t.closeTime=0,t.pasue=!1,t.closeCall=null,t}return n(t,a),t.prototype.onDisable=function(){a.prototype.onDisable.call(this),this.node.off(cc.Node.EventType.TOUCH_START,this.clcikTip,this)},t.prototype.showGuideTip=function(a,t){void 0===t&&(t=0),this.lossCarTip.active=!1,this.lossPlantTip.active=!1,this.word.node.active=!0,this.word.string=a,this.closeTime=t,this.pasue=!1,this.closeCall=null,this.word.node.stopAllActions(),this.word.node.opacity=255,this.word.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.3,177),cc.fadeTo(.3,255))))},t.prototype.showGameTip=function(a,t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),this.lossCarTip.active=!1,this.lossPlantTip.active=!1,this.word.node.active=!0,this.word.string=a,this.pasue=!1,t){if(this.closeCall){var o=this.closeCall;this.closeCall=function(){o(),t()}}this.closeCall=t}this.word.node.stopAllActions(),this.word.node.opacity=255,this.word.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.3,177),cc.fadeTo(.3,255)))),e?(this.closeTime=0,this.node.on(cc.Node.EventType.TOUCH_START,this.clcikTip,this)):this.closeTime=5},t.prototype.showStarLoseTip=function(a,t){1==r.pzaGameState.curChapter||3==r.pzaGameState.curChapter||5==r.pzaGameState.curChapter||6==r.pzaGameState.curChapter||8==r.pzaGameState.curChapter||10==r.pzaGameState.curChapter?this.lossPlantTip.getComponent(cc.Label).string="\u635f\u59315\u4e2a\u690d\u7269\uff0c-":this.lossPlantTip.getComponent(cc.Label).string="\u635f\u59317\u4e2a\u690d\u7269\uff0c-",this.word.node.active=!1,this.lossCarTip.active=a,this.lossPlantTip.active=t,this.closeTime=5,this.pasue=!1,this.closeCall=null},t.prototype.update=function(a){this.pasue||this.closeTime<=0||(this.closeTime-=a,this.closeTime<=0&&(this.close(),this.closeCall&&(this.closeCall(),this.closeCall=null)))},t.prototype.clcikTip=function(){this.close(),this.closeCall&&(this.closeCall(),this.closeCall=null)},t.prototype.pauseSelf=function(){this.pasue=!0,this.word.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.pasue=!1,this.word.node.resumeAllActions()},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([u({displayName:"\u6587\u5b57",type:cc.Label})],t.prototype,"word",void 0),i([u({displayName:"\u635f\u5931\u5c0f\u63a8\u8f66\u6587\u6848",type:cc.Node})],t.prototype,"lossCarTip",void 0),i([u({displayName:"\u635f\u5931\u690d\u7269\u6587\u6848",type:cc.Node})],t.prototype,"lossPlantTip",void 0),i([c],t)}(p.pzaBaseComponent);e.pzaGuideTip=d,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","./pzaBaseComponent":"pzaBaseComponent","./pzaGameCommonPool":"pzaGameCommonPool"}],pzaGuideType:[function(a,t,e){"use strict";cc._RF.push(t,"8420bdgYmdMUL+6b3c38Mgc","pzaGuideType"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDialog=e.pzaDaveAni=e.pzaGuideType=void 0,function(a){a[a.GUIDE_PLANT_1_1=0]="GUIDE_PLANT_1_1",a[a.GUIDE_NEW_PLANT_1_2=1]="GUIDE_NEW_PLANT_1_2",a[a.GUIDE_SHOVEL_1_5=2]="GUIDE_SHOVEL_1_5",a[a.GUIDE_BELT_MODE=3]="GUIDE_BELT_MODE",a[a.GUIDE_NINGHT_2_1=4]="GUIDE_NINGHT_2_1",a[a.GUIDE_CARD_SLOT_2_2=5]="GUIDE_CARD_SLOT_2_2",a[a.GUIDE_CARD_SLOT_2_3=6]="GUIDE_CARD_SLOT_2_3",a[a.GUIDE_KNOCK_ZOMBIE_2_5=7]="GUIDE_KNOCK_ZOMBIE_2_5",a[a.GUIDE_CARD_SLOT_2_6=8]="GUIDE_CARD_SLOT_2_6",a[a.GUIDE_POOL_3_1=9]="GUIDE_POOL_3_1",a[a.GUIDE_SHOP_3_4=10]="GUIDE_SHOP_3_4",a[a.GUIDE_SMALL_ZOMBIE_3_5=11]="GUIDE_SMALL_ZOMBIE_3_5",a[a.GUIDE_SHOP_4_4=12]="GUIDE_SHOP_4_4",a[a.GUIDE_BANG_JAR_4_5=13]="GUIDE_BANG_JAR_4_5",a[a.GUIDE_NINGHT_4_10=14]="GUIDE_NINGHT_4_10",a[a.GUIDE_SHOP_5_1=15]="GUIDE_SHOP_5_1",a[a.GUIDE_GARDEN_5_4=16]="GUIDE_GARDEN_5_4",a[a.GUIDE_BOSS_5_10=17]="GUIDE_BOSS_5_10",a[a.GUIDE_PROP_1_3=18]="GUIDE_PROP_1_3",a[a.GUIDE_5_5=19]="GUIDE_5_5",a[a.GUIDE_5_1=20]="GUIDE_5_1",a[a.GUIDE_4_1=21]="GUIDE_4_1",a[a.GUIDE_ZOMBIE_ENERMY_1=22]="GUIDE_ZOMBIE_ENERMY_1",a[a.GUIDE_VASE=23]="GUIDE_VASE",a[a.GUIDE_6_1=26]="GUIDE_6_1",a[a.GUIDE_6_5=27]="GUIDE_6_5",a[a.GUIDE_10_5=28]="GUIDE_10_5"}(e.pzaGuideType||(e.pzaGuideType={})),function(a){a[a.NUT=1]="NUT"}(e.pzaDaveAni||(e.pzaDaveAni={}));e.pzaDialog=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.event=null,this.daveAni=null,this.word=a,this.event=t,this.daveAni=e},cc._RF.pop()},{}],pzaGuideView:[function(a,t,e){"use strict";cc._RF.push(t,"bd58dbosIJJZLeFmDxI1kWU","pzaGuideView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGuideView=void 0;var r=a("../../Common/pzaGameCommonPool"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.guideTxt=null,t.guideAniNode=null,t.fingerNode=null,t.circleNode=null,t.words=null,t.guideEndCall=null,t.canClick=!0,t.fingerPos=null,t.fingerEvent=null,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickNext,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickNext,this)},t.prototype.showGuide=function(a,t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),this.canClick=!0,this.guideAniNode.active=!1,this.words=a,this.fingerPos=e,this.fingerEvent=o,this.guideEndCall=t,this.showNext()},t.prototype.clickNext=function(){this.canClick&&this.showNext()},t.prototype.showNext=function(){var a=this.words.shift();if(null==a)return this.close(),void(this.guideEndCall&&this.guideEndCall());this.guideTxt.string=a.word,a.event&&a.event(),this.words.length<=0&&null!=this.fingerPos&&this.showFingerAni()},t.prototype.showFingerAni=function(){var a=this;this.canClick=!1,this.guideAniNode.active=!0,this.guideAniNode.setPosition(this.fingerPos),this.circleNode.active=!1,this.fingerNode.stopAllActions(),this.fingerNode.setPosition(cc.v2(105,-20)),this.fingerNode.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(110,0)),cc.moveTo(.3,cc.v2(90,-45)),cc.callFunc(function(){a.circleNode.active=!0,a.circleNode.stopAllActions(),a.circleNode.runAction(cc.sequence(cc.callFunc(function(){a.circleNode.opacity=255,a.circleNode.scale=.5}),cc.spawn(cc.scaleTo(.3,1.5),cc.sequence(cc.delayTime(.15),cc.fadeOut(.35)))))}),cc.delayTime(.1),cc.moveTo(.3,cc.v2(105,-45)),cc.callFunc(function(){a.circleNode.stopAllActions(),a.circleNode.runAction(cc.sequence(cc.callFunc(function(){a.circleNode.opacity=255,a.circleNode.scale=.5}),cc.spawn(cc.scaleTo(.3,1.5),cc.sequence(cc.delayTime(.15),cc.fadeOut(.35)))))}),cc.delayTime(1))))},t.prototype.clickFinger=function(){this.close(),this.guideEndCall&&this.guideEndCall(),this.fingerEvent&&this.fingerEvent()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s({displayName:"\u5f15\u5bfc\u6587\u6848",type:cc.Label})],t.prototype,"guideTxt",void 0),i([s({displayName:"\u5f15\u5bfc\u52a8\u753b\u8282\u70b9",type:cc.Node})],t.prototype,"guideAniNode",void 0),i([s({displayName:"\u52a8\u753b\u624b\u6307",type:cc.Node})],t.prototype,"fingerNode",void 0),i([s({displayName:"\u52a8\u753b\u5149\u5708",type:cc.Node})],t.prototype,"circleNode",void 0),i([l],t)}(cc.Component);e.pzaGuideView=c,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaHamburgShooter:[function(a,t,e){"use strict";cc._RF.push(t,"088947ecItKYJMw8kSmnz8W","pzaHamburgShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHamburgShooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Load/pzaBundleObjectPool"),c=a("../../Load/pzaPreLoadManager"),u=a("../../utils/pzakc"),d=a("../Bullet/pzaBaseBullet"),h=a("../Bullet/pzaPeaBullet"),m=a("../pzaGameState"),f=a("../pzaSunLight"),z=a("./pzaBasePlant"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefabs=[],t.dropSunTime=25,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.dropSunTime=3;var o=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData))return l.pzaSoundManager.playAudio("PeashooterAtk"),void e.animation.playAnimation("attack",!1,function(){e.animation.playAnimation("idle1",!1,o)},function(){e.shoot()});e.animation.playAnimation("idle1",!1,o)};o(),m.pzaGameState.usePeaPlant=!0},t.prototype.shootOne=function(a,t,e){var o=r.pzaGameCommonPool.requestInstant2(a);if(null!=o){o.setParent(e),o.setPosition(t);var n=o.getComponent(d.pzaBaseBullet),i=1;n instanceof h.pzaPeaBullet&&Math.random()<.5&&(i=0),n.init(this.baseData.yIndex,this.baseData.atk,i);var p=m.pzaGameState.map.getMapSkewColumn();p>0&&this.baseData.xIndex<=p-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*m.pzaGameState.map.getBlockWidth())}},t.prototype.shoot=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=p.pzaNodeManager.getBulletNode();if(null!=t)for(var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=t.convertToNodeSpaceAR(e),n=u.default.randomChoose(this.bulletPrefabs,8),i=function(e){r.scheduleOnce(function(){a.shootOne(n[e],o,t)},.1*e)},r=this,l=0;l<n.length;l++)i(l)}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.dropSunTime-=t,this.dropSunTime<=0&&(this.dropSunTime=25,this.dropSun(25))},t.prototype.dropSun=function(a){var t=this.node.getPosition();s.pzaBundleObjectPool.requestInstantByUrl2(c.pzaResourceUrl.SUN,function(e,o){if(null==e&&null!=o){o.setParent(p.pzaNodeManager.getUpBgNode());var n=o.getComponent(f.pzaSunLight);n&&n.init2(t,1,a),window.pzaplantManager.AllSunLight.add(n)}else console.error(e)})},i([b({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([b(cc.Prefab)],t.prototype,"bulletPrefabs",void 0),i([g],t)}(z.pzaBasePlant);e.pzaHamburgShooter=v,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzakc":"pzakc","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaPeaBullet":"pzaPeaBullet","../pzaGameState":"pzaGameState","../pzaSunLight":"pzaSunLight","./pzaBasePlant":"pzaBasePlant"}],pzaHammerEffect:[function(a,t,e){"use strict";cc._RF.push(t,"dedbdX7ZaBIZbSV49lpNH0w","pzaHammerEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHammerEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaSoundManager"),u=a("../Plant/pzaAttackType"),d=a("../pzaBaseBody"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hammer=null,t.collider=null,t.peng=null,t.poolPrefab=null,t.trigger=!1,t.hitZombie=!1,t}return n(t,a),t.prototype.showEffect=function(){var a=this;this.collider.enabled=!0,p.pzaCollisionManager.getInstance.addBulletOther(this),this.trigger=!1,this.hitZombie=!1,this.peng.active=!1,this.hammer.stopAllActions(),this.hammer.angle=40,this.hammer.opacity=255,this.hammer.runAction(cc.sequence(cc.rotateTo(.1,-60),cc.callFunc(function(){a.trigger=!0}),cc.fadeOut(.1),cc.callFunc(function(){a.hitZombie||(c.pzaSoundManager.playAudio("voidbang"),a.close())})))},t.prototype.onlyShowHammer=function(){var a=this;this.collider.enabled=!1,p.pzaCollisionManager.getInstance.delBulletOther(this),this.trigger=!1,this.hitZombie=!1,this.peng.active=!1,this.hammer.stopAllActions(),this.hammer.angle=40,this.hammer.opacity=255,this.hammer.runAction(cc.sequence(cc.rotateTo(.1,-60),cc.fadeOut(.1),cc.callFunc(function(){a.close()})))},t.prototype.showPeng=function(){var a=this;this.peng.active=!0,this.peng.stopAllActions(),this.peng.scale=.5,this.peng.opacity=122,this.peng.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.fadeIn(.1)),cc.delayTime(.4),cc.fadeOut(.1),cc.callFunc(function(){a.close()})))},t.prototype.pauseSelf=function(){this.hammer.pauseAllActions(),this.peng.pauseAllActions()},t.prototype.resumeSelf=function(){this.hammer.resumeAllActions(),this.peng.resumeAllActions()},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?(this.collider.poSource=this.node,this.collider):null},t.prototype.onCollision=function(a){if(!this.trigger&&a.node.group==s.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(d.pzaBaseBody);if(null==t||null==t.baseData||t.baseData.isDead)return;var e=window.pzazombieManager.getZombie(t.baseData);if(null==e)return;e.hurt(1e3,null,u.pzaAttackType.KNOCK),this.trigger=!0,this.hitZombie=!0,this.showPeng()}},t.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([f({displayName:"\u9524\u5b50",type:cc.Node})],t.prototype,"hammer",void 0),i([f({displayName:"\u78b0\u649e\u7ec4\u4ef6",type:cc.BoxCollider})],t.prototype,"collider",void 0),i([f({displayName:"\u562d",type:cc.Node})],t.prototype,"peng",void 0),i([f(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([m],t)}(r.pzaBaseComponent);e.pzaHammerEffect=z,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../Plant/pzaAttackType":"pzaAttackType","../pzaBaseBody":"pzaBaseBody"}],pzaHandbookCard:[function(a,t,e){"use strict";cc._RF.push(t,"90c044XkCxGMLQGNppnP0Zh","pzaHandbookCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHandbookCard=void 0;var r=a("../Battle/Data/pzaPlantEnum"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGameConfig"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardBoard=null,t.cardBoardFrames=[],t.cardIcon=null,t.priceLabel=null,t.priceNode=null,t.voidSlot=null,t.select=null,t.plantType=null,t.clickCall=null,t.hasPlant=!1,t}return n(t,a),t.prototype.bindData=function(a,t){if(this.select.active=!1,this.plantType=a,this.clickCall=t,this.hasPlant=s.pzaLocalData.data.ownPlants.includes(a),!this.hasPlant)return this.voidSlot.active=!0,void(this.cardBoard.node.active=!1);if(this.voidSlot.active=!1,this.cardBoard.node.active=!0,u.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),a==r.pzaPlantEnum.IMITATER)return this.priceNode.active=!1,void(this.cardBoard.spriteFrame=this.cardBoardFrames[0]);this.priceNode.active=!0;var e=l.pzaGameConfig.getPlantConfig(a);null!=e&&(this.priceLabel.string=""+e.price,this.cardBoard.spriteFrame=this.cardBoardFrames[e.rareLevel])},t.prototype.zjBindData=function(a,t){if(this.select.active=!1,this.plantType=a,this.clickCall=t,this.hasPlant=!0,this.voidSlot.active=!1,this.cardBoard.node.active=!0,u.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),a==r.pzaPlantEnum.IMITATER)return this.priceNode.active=!1,void(this.cardBoard.spriteFrame=this.cardBoardFrames[0]);this.priceNode.active=!0;var e=l.pzaGameConfig.getPlantConfig(a);null!=e&&(this.priceLabel.string=""+e.price,this.cardBoard.spriteFrame=this.cardBoardFrames[e.rareLevel])},t.prototype.clickCard=function(){this.hasPlant&&(c.pzaSoundManager.playSFX(),this.clickCall&&this.clickCall(this.plantType))},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([m({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([m({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([m({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([m({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],t.prototype,"priceLabel",void 0),i([m({displayName:"\u4ef7\u683c\u8282\u70b9",type:cc.Node})],t.prototype,"priceNode",void 0),i([m({displayName:"\u7a7a\u5361\u69fd",type:cc.Node})],t.prototype,"voidSlot",void 0),i([m({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"select",void 0),i([h],t)}(cc.Component);e.pzaHandbookCard=f,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaHandbookView:[function(a,t,e){"use strict";cc._RF.push(t,"3cd4cOQNe5AlKqqOM/396Us","pzaHandbookView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHandbookView=void 0;var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaStatisticsMgr"),c=a("../Common/pzaUIManager"),u=a("../Load/pzaPreLoadManager"),d=a("./pzaPlantHandbookView"),h=a("./pzaZombieHandbookView"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.plantNode=null,t.zombieNode=null,t.jdNode=null,t.lastBgm=null,t.closeCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.showAni(),s.pzaStatisticsMgr.sendEvent("System",{name:"system",value:4}),this.lastBgm=null,"fightbeforebgm"!=l.pzaSoundManager.lastbgmName&&(this.lastBgm=l.pzaSoundManager.lastbgmName,l.pzaSoundManager.playBgm(l.pzaBGMName.PRE_BGM)),r.pzaGameState.isInHandBookView=!0},t.prototype.bindCloseCall=function(a){this.closeCall=a},t.prototype.jdInit=function(){this.jdNode.active=!1,this.clickJdBtn()},t.prototype.clickPlantBook=function(){var a=this;l.pzaSoundManager.playSFX(),c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PLANT_HANDBOOK_VIEW,function(t){var e=t&&t.getComponent(d.pzaPlantHandbookView);e&&e.bindCloseCall(function(){a.close(),a.closeCall&&a.closeCall(),a.closeCall=null})})},t.prototype.clickZombieBook=function(){var a=this;l.pzaSoundManager.playSFX(),c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.ZOMBIE_HANDBOOK_VIEW,function(t){var e=t&&t.getComponent(h.pzaZombieHandbookView);e&&e.bindCloseCall(function(){a.close(),a.closeCall&&a.closeCall(),a.closeCall=null})})},t.prototype.clickClose=function(){l.pzaSoundManager.playSFX(),this.close(),this.closeCall&&this.closeCall(),this.closeCall=null},t.prototype.showAni=function(){this.plantNode.active=!0,this.zombieNode.active=!0},t.prototype.clickJdBtn=function(){this.showAni()},t.prototype.close=function(){this.lastBgm&&l.pzaSoundManager.playBgm(this.lastBgm),p.pzaGameCommonPool.returnInstant(this.node),r.pzaGameState.isInHandBookView=!1},i([z({displayName:"\u7ecf\u5178\u7248\u690d\u7269",type:cc.Node})],t.prototype,"plantNode",void 0),i([z({displayName:"\u7ecf\u5178\u50f5\u5c38",type:cc.Node})],t.prototype,"zombieNode",void 0),i([z({displayName:"\u7ecf\u5178\u6309\u94ae",type:cc.Node})],t.prototype,"jdNode",void 0),i([f],t)}(cc.Component);e.pzaHandbookView=y,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaPlantHandbookView":"pzaPlantHandbookView","./pzaZombieHandbookView":"pzaZombieHandbookView"}],pzaHeighIceNut:[function(a,t,e){"use strict";cc._RF.push(t,"2558d3F2S9I/Yxla66aFzR1","pzaHeighIceNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHeighIceNut=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaNodeManager"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaTipManager"),d=a("../../Common/pzaUtil"),h=a("../Bullet/pzaBaseBullet"),m=a("../Data/pzaBuffData"),f=a("../Data/pzaPlantEnum"),z=a("../Data/pzaZombieEnum"),y=a("../pzaEffectManager"),g=a("../pzaGameState"),b=a("./pzaAttackType"),v=a("./pzaBasePlant"),P=cc._decorator,D=P.ccclass,S=P.property,C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.antiBangTimes=8,t.canAntiBang=!0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=f.pzaPlantCate.Nut,this.antiBangTimes=8,this.blinkTime=d.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData))return c.pzaSoundManager.playAudio("SnowPeaAtk"),void e.animation.playAnimation("attack",!1,o,function(){e.shoot()});e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=d.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye1",!1,o))};o(),g.pzaGameState.winterMelon[t.yIndex]=1;for(var n=g.pzaGameState.map.getMapRow(),i=!0,l=0;l<n;l++)if(1!=g.pzaGameState.winterMelon[l]){i=!1;break}i&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_23)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t)},t.prototype.hurt=function(a,t,e){var o=this;if(null!=this.baseData&&!this.baseData.isDead){if(e==b.pzaAttackType.ROLLING||e==b.pzaAttackType.BOOM||e==b.pzaAttackType.BANG){if(this.antiBangTimes>0){if(!this.canAntiBang)return;if(this.canAntiBang=!1,this.antiBangTimes--,this.scheduleOnce(function(){o.canAntiBang=!0},1),t&&t.zombieData&&t.zombieData.cate===z.pzaZombieCate.IceCar){var n=window.pzazombieManager.getZombie(t);n&&n.hurt(this.baseData.atk,this.baseData,b.pzaAttackType.SPIKE)}return}return this.baseData.isDead=!0,this.baseData.hp=0,window.pzaplantManager.removePlant(this.baseData),e==b.pzaAttackType.BOOM?this.death(t):this.flaserDeath(),g.pzaGameState.partStar>0&&g.pzaGameState.lossPlantCount==g.pzaGameState.lossStarCount&&(u.pzaTipManager.showLossStarTip(!1,!0),g.pzaGameState.partStar--),void g.pzaGameState.lossPlantCount++}if(this.baseData.hurtPlanet(a),this.refreshHurtState(!1),this.animation.showLight(),(this.baseData.isDead||this.baseData.hp<=0)&&(window.pzaplantManager.removePlant(this.baseData),this.death(t),g.pzaGameState.partStar>0&&g.pzaGameState.lossPlantCount==g.pzaGameState.lossStarCount&&(u.pzaTipManager.showLossStarTip(!1,!0),g.pzaGameState.partStar--),g.pzaGameState.lossPlantCount++,c.pzaSoundManager.playAudio("gulp")),e==b.pzaAttackType.THROW_ATK&&this.baseData.hp>0){var i="zombieHurt"+(Math.floor(2*Math.random())+1);c.pzaSoundManager.playAudio(i)}if(Math.random()<.5&&t){var r=window.pzazombieManager.getZombie(t);if(!r)return;r.bePauseControl(),t.buffData.addBuff(new m.pzaBuffInfo(m.pzaBuffType.FROZEN,3,this.baseData.atk)),t.zombieData.zombieType!=z.pzaZombieEnum.DR_ZOMBOSS&&y.pzaEffectManager.createFrozenEffect(t)}}},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=s.pzaNodeManager.getBulletNode(),t=l.pzaGameCommonPool.requestInstant2(this.bulletPrefab);t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(h.pzaBaseBullet);n.init(this.baseData.yIndex,this.baseData.atk);var i=g.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*g.pzaGameState.map.getBlockWidth())}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([S({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([S({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([D],t)}(v.pzaBasePlant);e.pzaHeighIceNut=C,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaHoleNut:[function(a,t,e){"use strict";cc._RF.push(t,"b3a2btp3OVG2YY1EKkRAGje","pzaHoleNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHoleNut=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaPlantEnum"),l=a("../pzaEffectManager"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=8,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,this.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=r.pzaUtil.getRandomFloatNum(8,10),e.animation.playAnimation("idle2",!1,o))};this.animation.playAnimation("idle1",!1,o),o()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.showHole=function(){l.pzaEffectManager.createDoomHoleEffect(this.baseData.logicPos,this.baseData.xIndex,this.baseData.yIndex)},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.showHole()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.showHole()},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+80),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow2",e)},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+80),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow1",e)},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([u],t)}(s.pzaBasePlant));e.pzaHoleNut=d,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","./pzaBasePlant":"pzaBasePlant"}],pzaHoloCards:[function(a,t,e){"use strict";cc._RF.push(t,"9e523jpRPdFZ5uyuIGo5xm8","pzaHoloCards");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHoloCards=void 0;var r=a("../../Common/pzaWorldEventManager"),p=a("../pzaGameState"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.updateVal=25,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.bodyBindData=!0,this.body.node.getComponent(cc.Collider).enabled=!1,this.animation.playAnimation("idle",!0),this.decreaseSunVal()},t.prototype.decreaseSunVal=function(){p.pzaGameState.sunDecreaseValue+=this.updateVal,r.pzaWorldEventManager.triggerEvent(r.pzaWorldEventType.UPDATE_ALL_PLANT_PRICE,null)},t.prototype.increaseSunVal=function(){p.pzaGameState.sunDecreaseValue-=this.updateVal,r.pzaWorldEventManager.triggerEvent(r.pzaWorldEventType.UPDATE_ALL_PLANT_PRICE,null)},t.prototype.close=function(){a.prototype.close.call(this),p.pzaGameState.isInHandBookView||this.increaseSunVal()},i([c],t)}(l.pzaBasePlant));e.pzaHoloCards=u,cc._RF.pop()},{"../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaHomeTip:[function(a,t,e){"use strict";cc._RF.push(t,"77c0b7ai01Ne4ZwCimBv8Xo","pzaHomeTip");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHomeTip=void 0;var r=a("./pzaGameCommonPool"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.word=null,t.closeTime=0,t}return n(t,a),t.prototype.showTip=function(a,t){void 0===t&&(t=0),this.word.node.active=!0,this.word.string=a,this.closeTime=t,this.word.node.stopAllActions(),this.word.node.opacity=255,this.word.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.3,177),cc.fadeTo(.3,255))))},t.prototype.update=function(a){this.closeTime<=0||(this.closeTime-=a,this.closeTime<=0&&this.close())},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s({displayName:"\u6587\u5b57",type:cc.Label})],t.prototype,"word",void 0),i([l],t)}(cc.Component);e.pzaHomeTip=c,cc._RF.pop()},{"./pzaGameCommonPool":"pzaGameCommonPool"}],pzaHomeView:[function(a,t,e){"use strict";cc._RF.push(t,"ca117f9f6FOXbZyu8xg7+mB","pzaHomeView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Achieve/pzaAchieveView"),p=a("../Battle/Data/pzaGuideType"),l=a("../Battle/Data/pzaPlantEnum"),s=a("../Battle/pzaGameState"),c=a("../BattlePass/pzaBattlePassTaskMgr"),u=a("../Common/pzaGamePropConfig"),d=a("../Common/pzaLocalData"),h=a("../Common/pzaRewardManager"),m=a("../Common/pzaSoundManager"),f=a("../Common/pzaStatisticsMgr"),z=a("../Common/pzaTipManager"),y=a("../Common/pzaUIManager"),g=a("../Common/pzaUtil"),b=a("../Garden/pzaGardenMgr"),v=a("../Garden/pzaGardenView"),P=a("../Load/pzaPreLoadManager"),D=a("../utils/pzaChannel"),S=a("../utils/pzaChannelMy"),C=a("../utils/pzakc"),_=a("./Battle/pzaOptionView"),E=a("./pzaCommonMask"),M=a("./pzaGiftView"),w=a("./pzaPreOpenView"),T=a("./pzaSaveView"),B=a("./pzaShareGiftView"),A=a("./pzaShopView"),O=a("./pzaWarningView"),I=cc._decorator,N=I.ccclass,G=I.property,R=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.closeEyeNode=null,t.leafNode=null,t.guanKaDescLab=null,t.gardenBtn=null,t.shopBtn=null,t.achBtn=null,t.signBtn=null,t.monthSignBtn=null,t.shareGiftBtn=null,t.achUI=null,t.sideBarNode=null,t.addToDeskNode=null,t.recordNode=null,t.welfareMask=null,t.welfareArrow=null,t.weekTwoTaskNode=null,t.giftBtn=null,t.btnContent=null,t.power=null,t.endTime=new Date("2024-08-25 00:00:00").getTime(),t.closeEye=!1,t.eyeChangeTime=0,t.showLeafAniFlag=!0,t.isExpand=!1,t}return n(t,a),t.prototype.onLoad=function(){this.scheduleOnce(function(){S.pzaChannelMy.SOPReport(S.reportAct.reportGamePlay)},1)},t.prototype.onEnable=function(){var a=this;m.pzaSoundManager.playBgm(m.pzaBGMName.LOADING),this.refreshHomeView(),C.default.regMsgReciever("unlockMonth",function(t){return t&&(a.monthSignBtn.active=!0,a.signBtn.active=!1),!0}),C.default.regMsgReciever("readGameData",function(){return E.pzaCommonMask.showMask(!0),a.refreshHomeView(),b.default.instance().loadPlantsFromSave(),a.scheduleOnce(function(){E.pzaCommonMask.hideMask(),z.pzaTipManager.showHomeTip("\u6570\u636e\u8bfb\u53d6\u6210\u529f",null,2)},2),!0}),C.default.regMsgReciever("saveGameData",function(){return E.pzaCommonMask.showMask(!0),a.refreshHomeView(),b.default.instance().loadPlantsFromSave(),a.scheduleOnce(function(){E.pzaCommonMask.hideMask(),z.pzaTipManager.showHomeTip("\u6570\u636e\u4fdd\u5b58\u6210\u529f",null,2)},2),!0}),this.welfareMask.width=0,this.welfareArrow.active=!1,d.pzaLocalData.data.hasInGame=!0,d.pzaLocalData.addDirty("hasInGame"),this.isExpand=!1,d.pzaLocalData.data.shareGiftRecIndex.indexOf(3)>=0&&d.pzaLocalData.data.ownPlants.indexOf(l.pzaPlantEnum.BOOM_NUT)<0&&(d.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.BOOM_NUT),d.pzaLocalData.addDirty("ownPlants")),d.pzaLocalData.loadingIsOver=!0,this.removeTrialPlant(),d.pzaLocalData.isShowSaveView&&(d.pzaLocalData.isShowSaveView=!1,y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SAVE_VIEW,function(a){var t=a&&a.getComponent(T.pzaSaveView);t&&t.gameInit(null)})),(d.pzaLocalData.data.curChapter>5||5==d.pzaLocalData.data.curChapter&&d.pzaLocalData.data.curPart>5)&&(d.pzaLocalData.data.gardenToolNum[""+b.pzaGardenToolType.sell]||b.default.instance().addGardenTool(b.pzaGardenToolType.sell,1,!1)),c.default.instance().checkDayTask(1,d.pzaLocalData.data.bpDayLoginCnt)},t.prototype.removeTrialPlant=function(){var a,t=s.pzaGameState.curChapter,e=s.pzaGameState.curPart;2==t&&6==e?a=l.pzaPlantEnum.GATLING_PEA:2==t&&8==e?a=l.pzaPlantEnum.GLOOM_SHROOM:3==t&&1==e?a=l.pzaPlantEnum.CATTAIL:4==t&&9==e?a=l.pzaPlantEnum.SPIKEROCK:5==t&&4==e?a=l.pzaPlantEnum.COB_CANNON:5==t&&9==e&&(a=l.pzaPlantEnum.WINTER_MELON);var o=d.pzaLocalData.data.ownPlants.includes(a);if(a&&!o&&s.pzaGameState.gameMode==s.pzaGameMode.NORMAL)for(var n=0;n<d.pzaLocalData.data.modeUsePlants[s.pzaGameMode.NORMAL].length;n++)if(d.pzaLocalData.data.modeUsePlants[s.pzaGameMode.NORMAL][n]==a){d.pzaLocalData.data.modeUsePlants[s.pzaGameMode.NORMAL].splice(n);break}},t.prototype.refreshHomeView=function(){var a,t="";switch(d.pzaLocalData.data.curChapter>5?d.pzaLocalData.data.curChapter-5:d.pzaLocalData.data.curChapter){case 1:t="\u767d\u5929";break;case 2:t="\u9ed1\u591c";break;case 3:t="\u6cf3\u6c60";break;case 4:t="\u96fe\u591c";break;case 5:t="\u5c4b\u9876"}if(t=t+"\n\u5173\u5361"+d.pzaLocalData.data.curPart,this.guanKaDescLab&&(this.guanKaDescLab.string=t),this.monthSignBtn&&(this.monthSignBtn.active=!1),this.closeEye=!0,this.refreshEye(),this.showLeafAni(),this.gardenBtn&&(this.gardenBtn.active=!0),this.shopBtn&&(this.shopBtn.active=!0),this.achBtn&&(this.achBtn.active=!0),this.signBtn&&(this.signBtn.active=this.shareGiftBtn.active=d.pzaLocalData.data.curChapter>1||1==d.pzaLocalData.data.curChapter&&d.pzaLocalData.data.curPart>=4),this.giftBtn.active=d.pzaLocalData.isShowGift,!d.pzaLocalData.data.openPuzzleTip&&(d.pzaLocalData.data.curChapter>1||d.pzaLocalData.data.curPart>4)&&(d.pzaLocalData.data.openPuzzleTip=!0,d.pzaLocalData.addDirty("openPuzzleTip"),y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(O.pzaWarningView);t&&t.show("\u76ca\u667a\u6a21\u5f0f\u5173\u5361\u5df2\u5f00\u653e","\u786e\u5b9a","\u7acb\u5373\u524d\u5f80",null,function(){y.pzaUIManager.removeAllPopUI(),y.pzaUIManager.aniShowPopUI(P.pzaResourceUrl.PUZZLE_VIEW,null)},"\u89e3\u9501\u65b0\u6a21\u5f0f")})),a="ks"==D.pzaChannel.instance().channel?C.default.getData("sidebar",{today:"",canGet:"0"}):C.default.getData("sidebar",{today:"",canGet:"-1"}),this.sideBarNode&&(this.sideBarNode.active=!1),D.pzaChannel.instance().channel.indexOf("tt")>=0||"ks"==D.pzaChannel.instance().channel||"bl"==D.pzaChannel.instance().channel){var e=window.tt,o=window.ks,n=window.bl;"-1"!=a.canGet?(e&&e.checkScene&&this.sideBarNode&&(this.sideBarNode.active=!0),o&&(this.sideBarNode.active=!0),n&&n.checkScene&&this.sideBarNode&&(this.sideBarNode.active=!0)):this.sideBarNode&&(this.sideBarNode.active=!1)}if(this.addToDeskNode&&(this.addToDeskNode.active=!1),"tt"==D.pzaChannel.instance().channel)this.addToDeskNode&&(this.addToDeskNode.active=!0),C.default.getData("addToDesk",0)&&this.addToDeskNode&&(this.addToDeskNode.active=!1);else if("oppo"==D.pzaChannel.instance().channel||"vivo"==D.pzaChannel.instance().channel||"hw"==D.pzaChannel.instance().channel||"ks1"==D.pzaChannel.instance().getChannel().channel||"bl"==D.pzaChannel.instance().getChannel().channel){var i=this;D.pzaChannel.instance().checkShortcut({sucCall:function(){i.addToDeskNode&&(i.addToDeskNode.active=!0),C.default.getData("addToDesk",0)&&i.addToDeskNode&&(i.addToDeskNode.active=!1)},failCall:function(){i.addToDeskNode&&(i.addToDeskNode.active=!1)}})}d.pzaLocalData.isNoShareAct&&(this.shareGiftBtn.getChildByName("New Label").getComponent(cc.Label).string="\u7838\u7f50\u6709\u793c"),"tt"!=D.pzaChannel.instance().channel&&this.sideBarNode&&this.addToDeskNode&&this.recordNode&&(this.addToDeskNode.active=!1,this.recordNode.active=!1),d.pzaLocalData.data&&d.pzaLocalData.data.canMonthSign&&this.monthSignBtn&&this.signBtn&&(this.monthSignBtn.active=!0,this.signBtn.active=!1),this.monthSignBtn&&this.signBtn&&this.shareGiftBtn&&(this.weekTwoTaskNode.active=!0,d.pzaLocalData.serverTime>this.endTime&&(this.weekTwoTaskNode.active=!1))},t.prototype.unlockMonthSign=function(){this.monthSignBtn.active=!0,this.signBtn.active=!1},t.prototype.onDisable=function(){C.default.delMsgReciever("unlockMonth"),C.default.delMsgReciever("readGameData"),C.default.delMsgReciever("saveGameData")},t.prototype.update=function(a){this.eyeChangeTime-=a,this.eyeChangeTime<=0&&(this.closeEye=!this.closeEye,this.refreshEye()),this.showLeafAniFlag&&this.showLeafAni()},t.prototype.refreshEye=function(){this.closeEyeNode&&(this.closeEyeNode.active=this.closeEye),this.eyeChangeTime=this.closeEye?.3:1},t.prototype.showLeafAni=function(){var a=this;if(this.leafNode){this.showLeafAniFlag=!1,this.leafNode.stopAllActions();var t=cc.winSize.width,e=-t/2+Math.random()*t/2,o=cc.winSize.height/2+100;this.leafNode.x=e,this.leafNode.y=o;var n=g.pzaUtil.getRandomFloatNum(-t/2,t/2),i=-cc.winSize.height/2-100,r=Math.random();this.leafNode.runAction(cc.sequence(cc.spawn(cc.rotateBy(2+8*r,1e3*r),cc.moveTo(10,cc.v2(n,i)).easing(cc.easeCubicActionOut())),cc.callFunc(function(){a.showLeafAniFlag=!0})))}},t.prototype.clickChallengeBtn=function(){m.pzaSoundManager.playAudio("gravebutton"),y.pzaUIManager.aniShowPopUI(P.pzaResourceUrl.PUZZLE_VIEW,null),f.pzaStatisticsMgr.sendEvent("System",{name:"system",value:7})},t.prototype.clickAdventureBtn=function(){var a=this;m.pzaSoundManager.playAudio("gravebutton"),d.pzaLocalData.data.normalClickTips=!1,d.pzaLocalData.addDirty("normalClickTips"),d.pzaLocalData.data.curGuideType!=p.pzaGuideType.GUIDE_SHOP_3_4&&d.pzaLocalData.data.curGuideType!=p.pzaGuideType.GUIDE_SHOP_4_4&&d.pzaLocalData.data.curGuideType!=p.pzaGuideType.GUIDE_SHOP_5_1?d.pzaLocalData.data.curGuideType!=p.pzaGuideType.GUIDE_GARDEN_5_4?d.pzaLocalData.data.newGuide||d.pzaLocalData.hasPass12()?y.pzaUIManager.aniShowPopUI(P.pzaResourceUrl.PART_SELECT_VIEW,null):(y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(O.pzaWarningView);e&&e.show("\u9009\u62e9\u6211\u662f\u8001\u73a9\u5bb6\u5c06\u4f1a\u8df3\u8fc7\u6559\u7a0b\u5173\uff0c\n\u6e38\u620f\u4ece1-3\u5f00\u59cb","\u6211\u662f\u8001\u73a9\u5bb6","\u6211\u662f\u65b0\u624b",function(){var t;d.pzaLocalData.data.newGuide=!0,d.pzaLocalData.data.curPart=3,t="\u767d\u5929\n\u5173\u5361"+d.pzaLocalData.data.curPart,a.guanKaDescLab.string=t,d.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.SUN_FLOWER)||d.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.SUN_FLOWER),d.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.CHERRY_BOMB)||d.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.CHERRY_BOMB),d.pzaLocalData.addDirty("newGuide","curPart","ownPlants"),f.pzaStatisticsMgr.sendEvent("System",{name:"system",value:9}),y.pzaUIManager.aniShowPopUI(P.pzaResourceUrl.PART_SELECT_VIEW,null)},function(){d.pzaLocalData.data.newGuide=!0,d.pzaLocalData.addDirty("newGuide"),y.pzaUIManager.aniShowPopUI(P.pzaResourceUrl.PART_SELECT_VIEW,null)},"\u8df3\u8fc7\u65b0\u624b")}),d.pzaLocalData.data.normalClickTips=!1,d.pzaLocalData.addDirty("normalClickTips")):y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.GARDEN_VIEW,function(a){var t=a&&a.getComponent(v.pzaGardenView);t&&t.init()}):y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHOP_VIEW,null)},t.prototype.clickSurvivalBtn=function(){m.pzaSoundManager.playAudio("gravebutton"),f.pzaStatisticsMgr.sendEvent("System",{name:"system",value:8});var a=function(){y.pzaUIManager.aniShowPopUI(P.pzaResourceUrl.SURVIVAL_VIEW,null)};d.pzaLocalData.data.passLastPart?(d.pzaLocalData.data.preOpenSurvival&&(d.pzaLocalData.data.preOpenSurvival=!1,d.pzaLocalData.addDirty("preOpenSurvival")),a()):y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.PRE_OPEN_VIEW,function(t){var e=t&&t.getComponent(w.pzaPreOpenView);e&&e.show(function(){D.pzaChannel.instance().showVideo({sucCall:function(){d.pzaLocalData.data.preOpenSurvival=!0,d.pzaLocalData.addDirty("preOpenSurvival"),a()},failCall:function(){},endCall:function(){},posName:"\u65e0\u5c3d\u6a21\u5f0f\u63d0\u524d\u89e3\u9501",adsid:"19"})})})},t.prototype.clickHelp=function(){m.pzaSoundManager.playSFX(),y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.GAME_OPTION_VIEW,function(a){var t=a&&a.getComponent(_.pzaOptionView);t&&t.init(!1,null,"\u786e\u5b9a")})},t.prototype.clickShop=function(){d.pzaLocalData.data.unlockShop?(m.pzaSoundManager.playSFX(),y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHOP_VIEW,function(a){var t=a&&a.getComponent(A.pzaShopView);t&&t.bindCloseCall(!0,null)})):y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(O.pzaWarningView);t&&t.show("\u5192\u9669\u6a21\u5f0f\u901a\u51733-4\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")})},t.prototype.clickAchieve=function(){m.pzaSoundManager.playSFX(),r.default.show(this)},t.prototype.clickSign=function(){m.pzaSoundManager.playSFX(),y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.DAY_SIGN_VIEW,null)},t.prototype.clickGift=function(){m.pzaSoundManager.playSFX(),y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.GIFT_VIEW,function(a){a.getComponent(M.pzaGiftView).refreshView()})},t.prototype.clickMonthSign=function(){m.pzaSoundManager.playSFX(),y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.MONTH_SIGN_VIEW,null)},t.prototype.clickShareGift=function(){m.pzaSoundManager.playSFX(),y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHARE_GIFT_VIEW,function(a){var t=a&&a.getComponent(B.pzaShareGiftView);t&&t.init([])})},t.prototype.clickGarden=function(){m.pzaSoundManager.playSFX(),d.pzaLocalData.data.unlockGarden?y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.GARDEN_VIEW,function(a){var t=a&&a.getComponent(v.pzaGardenView);t&&t.init()}):y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(O.pzaWarningView);t&&t.show("\u5192\u9669\u6a21\u5f0f\u901a\u51735-4\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")})},t.prototype.clickWelfareBtn=function(){var a=this;m.pzaSoundManager.playSFX(),this.isExpand=!this.isExpand,this.isExpand?(this.welfareArrow.active=!0,cc.tween(this.welfareMask).to(.2,{width:508}).start()):cc.tween(this.welfareMask).to(.2,{width:0}).call(function(){a.welfareArrow.active=!1}).start()},t.prototype.clickBattlePassBtn=function(){m.pzaSoundManager.playSFX();var a=D.pzaChannel.instance().getChannel().channelUserId;D.pzaChannel.isConfRemote&&(d.pzaLocalData.data.testUserId&&d.pzaLocalData.data.testUserId.length>0?a=d.pzaLocalData.data.testUserId:(a=s.pzaGameState.testUserId+C.default.randomInt(1,100),d.pzaLocalData.data.testUserId=a,d.pzaLocalData.addDirty("testUserId"))),E.pzaCommonMask.showMask(!0);var t="mr_battle_pass_reset"+D.pzaChannel.instance().getChannel().channel;D.pzaChannel.resetBattlePassCircle(t,a,"1,2,3",30,function(a,t){s.pzaGameState.bpResetLeftDay=30-a,s.pzaGameState.bpRewardPlantId=parseInt(t);var e=new Date,o=e.getUTCFullYear()+"-"+e.getUTCMonth()+"-"+e.getUTCDay();0==a&&d.pzaLocalData.data.resetBpDataTime!=o&&(d.pzaLocalData.clearBpData(),d.pzaLocalData.data.resetBpDataTime=o,d.pzaLocalData.data.bpDayTaskStates={},d.pzaLocalData.data.bpWeekTaskStates={},d.pzaLocalData.data.bpNormalRewards={},d.pzaLocalData.data.bpHighRewards={},d.pzaLocalData.data.battlePassLv=0,d.pzaLocalData.data.battlePassExp=0,d.pzaLocalData.addDirty("resetBpDataTime","bpDayTaskStates","bpWeekTaskStates","bpNormalRewards","bpHighRewards","battlePassLv","battlePassExp"),c.default.instance().checkDayTask(1,d.pzaLocalData.data.bpDayLoginCnt)),y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.BATTLEPASS_VIEW,function(){})})},t.prototype.clickWelfareArr=function(){var a=this;this.welfareArrow.active=!0,cc.tween(this.welfareMask).to(.2,{width:0}).call(function(){a.welfareArrow.active=!1,a.isExpand=!1}).start()},t.prototype.clickNewPlayerBtn=function(){m.pzaSoundManager.playSFX(),E.pzaCommonMask.showMask(!0),y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.NEWPLAYERTASK_VIEW,function(){E.pzaCommonMask.hideMask()})},t.prototype.clickLoginReward=function(){console.error("\u70b9\u51fb\u767b\u5f55\u8c6a\u793c\u6309\u94ae"),E.pzaCommonMask.showMask(!0),y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.LOGINREWARD_VIEW,function(){E.pzaCommonMask.hideMask()})},t.prototype.clickSave=function(){m.pzaSoundManager.playSFX();var a=D.pzaChannel.instance().getChannel();D.pzaChannel.loadFromRemote(a.channelUserId,function(a,t){y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SAVE_VIEW,function(a){var e=a&&a.getComponent(T.pzaSaveView);e&&e.init(t)})})},t.prototype.clickSidebar=function(){y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.BYTE_SIDEBAR_VIEW,function(){})},t.prototype.clickAddToDesk=function(){var a=this;m.pzaSoundManager.playSFX(),D.pzaChannel.instance().addShortcut({sucCall:function(){a.addToDeskNode.active=!1;var t=[new u.pzaRewardPropData(u.pzaGamePropEnum.PROP_COIN,100)];h.pzaRewardManager.recieveRewards(t,function(){}),C.default.saveData("addToDesk",1)},failCall:function(){console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25")}})},t.prototype.clickBeltEquip=function(){y.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.BELTEQUIPVIEW,function(){})},i([G({displayName:"\u95ed\u773c\u8282\u70b9",type:cc.Node})],t.prototype,"closeEyeNode",void 0),i([G({displayName:"\u6811\u53f6\u8282\u70b9",type:cc.Node})],t.prototype,"leafNode",void 0),i([G({displayName:"\u5173\u5361\u63cf\u8ff0",type:cc.Label})],t.prototype,"guanKaDescLab",void 0),i([G({displayName:"\u82b1\u56ed\u6309\u94ae",type:cc.Node})],t.prototype,"gardenBtn",void 0),i([G({displayName:"\u5546\u5e97\u6309\u94ae",type:cc.Node})],t.prototype,"shopBtn",void 0),i([G({displayName:"\u6210\u5c31\u6309\u94ae",type:cc.Node})],t.prototype,"achBtn",void 0),i([G({displayName:"\u7b7e\u5230\u6309\u94ae",type:cc.Node})],t.prototype,"signBtn",void 0),i([G({displayName:"\u6708\u7b7e\u5230\u6309\u94ae",type:cc.Node})],t.prototype,"monthSignBtn",void 0),i([G({displayName:"\u5206\u4eab\u6709\u793c\u6309\u94ae",type:cc.Node})],t.prototype,"shareGiftBtn",void 0),i([G({displayName:"\u6210\u5c31UI",type:cc.Node})],t.prototype,"achUI",void 0),i([G({displayName:"\u4fa7\u8fb9\u680f",type:cc.Node})],t.prototype,"sideBarNode",void 0),i([G({displayName:"\u6dfb\u52a0\u684c\u9762",type:cc.Node})],t.prototype,"addToDeskNode",void 0),i([G({displayName:"\u5f55\u5c4f\u6309\u94ae",type:cc.Node})],t.prototype,"recordNode",void 0),i([G({displayName:"\u798f\u5229Mask",type:cc.Node})],t.prototype,"welfareMask",void 0),i([G({displayName:"\u798f\u5229\u7bad\u5934",type:cc.Node})],t.prototype,"welfareArrow",void 0),i([G({displayName:"\u4e8c\u5468\u76ee\u4efb\u52a1\u8282\u70b9",type:cc.Node})],t.prototype,"weekTwoTaskNode",void 0),i([G({displayName:"\u793c\u5305\u6309\u94ae",type:cc.Node})],t.prototype,"giftBtn",void 0),i([G({displayName:"\u798f\u5229\u6309\u94ae\u5185\u5bb9",type:cc.Node})],t.prototype,"btnContent",void 0),i([G({displayName:"\u4f53\u529b\u69fd",type:cc.Node})],t.prototype,"power",void 0),i([N],t)}(cc.Component);e.default=R,cc._RF.pop()},{"../Achieve/pzaAchieveView":"pzaAchieveView","../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../BattlePass/pzaBattlePassTaskMgr":"pzaBattlePassTaskMgr","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Garden/pzaGardenMgr":"pzaGardenMgr","../Garden/pzaGardenView":"pzaGardenView","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzaChannelMy":"pzaChannelMy","../utils/pzakc":"pzakc","./Battle/pzaOptionView":"pzaOptionView","./pzaCommonMask":"pzaCommonMask","./pzaGiftView":"pzaGiftView","./pzaPreOpenView":"pzaPreOpenView","./pzaSaveView":"pzaSaveView","./pzaShareGiftView":"pzaShareGiftView","./pzaShopView":"pzaShopView","./pzaWarningView":"pzaWarningView"}],pzaHotDog:[function(a,t,e){"use strict";cc._RF.push(t,"3421do3vOdHRrq/xEd77B1W","pzaHotDog");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHotDog=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Load/pzaBundleObjectPool"),c=a("../../Load/pzaPreLoadManager"),u=a("../../utils/pzakc"),d=a("../Bullet/pzaBaseBullet"),h=a("../pzaGameState"),m=a("../pzaSunLight"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.shootNode2=null,t.bulletPrefabs=[],t.dropSunTime=25,t.shootPos1=null,t.shootPos2=null,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t);var o=p.pzaNodeManager.getBulletNode(),n=this.shootNode.convertToWorldSpaceAR(cc.v2());this.shootPos1=o.convertToNodeSpaceAR(n);var i=this.shootNode2.convertToWorldSpaceAR(cc.v2());this.shootPos2=o.convertToNodeSpaceAR(i),this.dropSunTime=3;var r=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData)||window.pzazombieManager.hasCanAttackBackZombie(e.baseData))return l.pzaSoundManager.playAudio("PeashooterAtk"),void e.animation.playAnimation("attack",!1,function(){e.animation.playAnimation("idle1",!1,r)},function(){e.shoot()});e.animation.playAnimation("idle1",!1,r)};r(),h.pzaGameState.usePeaPlant=!0},t.prototype.shootOne=function(a,t,e,o){void 0===o&&(o=!1);var n=r.pzaGameCommonPool.requestInstant2(a);if(null!=n){n.setParent(e),n.setPosition(t);var i=n.getComponent(d.pzaBaseBullet);i.init(this.baseData.yIndex,this.baseData.atk,1,null,o?cc.v2(-1,0):cc.v2(1,0));var p=h.pzaGameState.map.getMapSkewColumn();p>0&&this.baseData.xIndex<=p-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*h.pzaGameState.map.getBlockWidth())}},t.prototype.shoot=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=p.pzaNodeManager.getBulletNode();if(null!=t)for(var e=u.default.randomChoose(this.bulletPrefabs,1)[0],o=0;o<8;o++)this.scheduleOnce(function(){a.shootOne(e,a.shootPos1,t),a.shootOne(e,a.shootPos2,t,!0)},.1*o)}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.dropSunTime-=t,this.dropSunTime<=0&&(this.dropSunTime=25,this.dropSun(25),this.dropSun(25,!0))},t.prototype.dropSun=function(a,t){void 0===t&&(t=!1);var e=this.node.getPosition();t&&(e.x+=70),s.pzaBundleObjectPool.requestInstantByUrl2(c.pzaResourceUrl.SUN,function(t,o){if(null==t&&null!=o){o.setParent(p.pzaNodeManager.getUpBgNode());var n=o.getComponent(m.pzaSunLight);n&&n.init2(e,1,a),window.pzaplantManager.AllSunLight.add(n)}else console.error(t)})},i([g({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([g({displayName:"\u53d1\u5c04\u70b92",type:cc.Node})],t.prototype,"shootNode2",void 0),i([g(cc.Prefab)],t.prototype,"bulletPrefabs",void 0),i([y],t)}(f.pzaBasePlant);e.pzaHotDog=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzakc":"pzakc","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","../pzaSunLight":"pzaSunLight","./pzaBasePlant":"pzaBasePlant"}],pzaHtBox:[function(a,t,e){"use strict";cc._RF.push(t,"44316KwvdxB/ppm7+H8BMcc","pzaHtBox");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaGdyxItem"),p=a("./pzakc"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.close=null,t.content=null,t.list=null,t.curr_time=0,t.total_time=.1,t.is_scroll=!1,t.spacing=140,t.itemHeight=130,t.jishu_num=0,t.dir=1,t.start_y=0,t}return n(t,a),t.prototype.onLoad=function(){var a=this;this.close.on(cc.Node.EventType.TOUCH_END,function(){a.hide()}),this.list.on("touch-up",function(){a.node.active&&(a.is_scroll=!0)}),this.content.on(cc.Node.EventType.TOUCH_START,function(){a.is_scroll=!1}),this.content.on(cc.Node.EventType.TOUCH_END,function(){a.is_scroll=!0}),this.content.on(cc.Node.EventType.TOUCH_CANCEL,function(){a.is_scroll=!0})},t.prototype.hide=function(){this.is_scroll=!1,this.node.active=!1,p.default.log("\u4e92\u63a8\u5173\u95ed")},t.prototype.show=function(){var a=this;this.node.active=!0,this.node.setPosition(0,0),p.default.removeNodeChildren(this.content),hzzxsdk.getBannerAdList(!1,0,0).then(function(t){console.log("\u83b7\u53d6banner\u5e7f\u544a\u5217\u8868:",t),t&&(t.forEach(function(t,e){var o=cc.instantiate(pzaResMgr.instance().getPrefab("gdyx_item1"));o.parent=a.content;var n=-a.itemHeight/2-a.spacing*e+2*a.spacing;o.setPosition(o.x,o.y+n),o.getComponent(r.default).init(t.banner,t.title,t.description,t.appid,t.page)}),a.start_y=a.content.children[0].y,a.content.setContentSize(t.length,t.length*a.spacing),a.is_scroll=!0)})},t.prototype.update=function(a){if(this.is_scroll){this.curr_time=0;var t=50*a,e=this.content.childrenCount;if(this.content.y,!(e<=4)){var o;if(this.dir>0)this.content.children[0].y>this.spacing&&(this.jishu_num+=this.dir,this.jishu_num>=e&&(this.dir=-this.dir),this.jishu_num<=0&&(this.dir=-this.dir),(o=this.content.children.shift()).y=-(e-1)*this.spacing*this.dir,this.content.children.push(o));else this.content.childrenCount,this.content.children[0].y<0&&(this.jishu_num+=this.dir,this.jishu_num<=0&&(this.dir=-this.dir),(o=this.content.children.pop()).y=this.start_y,this.content.children.unshift(o));for(var n=0;n<e;++n)this.content.children[n].y+=t*this.dir}}},i([c(cc.Node)],t.prototype,"close",void 0),i([c(cc.Node)],t.prototype,"content",void 0),i([c(cc.Node)],t.prototype,"list",void 0),i([s],t)}(cc.Component);e.default=u,cc._RF.pop()},{"./pzaGdyxItem":"pzaGdyxItem","./pzakc":"pzakc"}],pzaHypnoGarlic:[function(a,t,e){"use strict";cc._RF.push(t,"29765rugHRAtrEDwLfZoE+r","pzaHypnoGarlic");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHypnoGarlic=void 0;var r=a("../pzaGameState"),p=a("./pzaGarlic"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),r.pzaGameState.isZombieMode())this.animation.playAnimation("T_idle",!0);else{var o=function(){e.animation.playAnimation("idle",!1,o)};this.animation.playAnimation("idle",!1,o),r.pzaGameState.onlyShroomCofee=!1}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([s],t)}(p.pzaGarlic));e.pzaHypnoGarlic=c,cc._RF.pop()},{"../pzaGameState":"pzaGameState","./pzaGarlic":"pzaGarlic"}],pzaHypnoShroom:[function(a,t,e){"use strict";cc._RF.push(t,"8c657KDT2VN1IijQ4azCEx/","pzaHypnoShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHypnoShroom=void 0;var r=a("../../Common/pzaSpineController"),p=a("../pzaGameState"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.sleeping?(this.animation.playAnimation("idle",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.animation.playAnimation("idle",!0)),p.pzaGameState.useShroom=!0},t.prototype.wakeUp=function(){var t=this;a.prototype.wakeUp.call(this),null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,function(){t.animation.playAnimation("idle",!0)}))},t.prototype.letPlantSleep=function(){!this.sleepAni.node.active&&this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([u({displayName:"\u7761\u89c9\u52a8\u753b",type:r.pzaSpineController})],t.prototype,"sleepAni",void 0),i([c],t)}(l.pzaBasePlant);e.pzaHypnoShroom=d,cc._RF.pop()},{"../../Common/pzaSpineController":"pzaSpineController","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaIceBlover:[function(a,t,e){"use strict";cc._RF.push(t,"20021G+UiVLcbmuYbE3hobt","pzaIceBlover");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceBlover=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaWorldEventManager"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaZombieEnum"),h=a("../pzaGameState"),m=a("./pzaBlover"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.lifeTime=0,this.trigger=!1,l.pzaSoundManager.playAudio("Blover"),this.baseData.isDead=!0,this.animation.playAnimation("attack1",!1,function(){window.pzaplantManager.removePlant(e.baseData),e.death()})},t.prototype.attack=function(){this.trigger=!0,window.pzaMapManager.blowFog(),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.BLOW_WIND,null),window.pzazombieManager.zombieMap.forEach(function(a){var t=a.baseData;if(!(t.isDead||t.buffData.hasBuff(u.pzaBuffType.DIVE)||t.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||t.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT))){a.baseData.zombieData.zombieType!=d.pzaZombieEnum.NightWear&&t.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,5,.5));var e=1;t.zombieData.zombieType!=d.pzaZombieEnum.ZOMBONI&&t.zombieData.zombieType!=d.pzaZombieEnum.ZOMBONI2&&t.zombieData.zombieType!=d.pzaZombieEnum.CATAPULT_ZOMBIE&&t.zombieData.cate!=d.pzaZombieCate.Gargantuar||(e=.25),a.pushBack(e)}});for(var a=h.pzaGameState.map.getMapRow(),t=h.pzaGameState.map.getMapOriPos(),e=t.x-600,o=t.y,n=0;n<a;n++)for(var i=o+h.pzaGameState.map.yPos[n]+80,r=0;r<10;r++)this.shoot(cc.v2(e+50*r,i),n)},t.prototype.shoot=function(a,t){var e=p.pzaNodeManager.getBulletNode(),o=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);o.setParent(e),o.setPosition(a);var n=o.getComponent(c.pzaBaseBullet);n.maxLifeTime=5,n.init(t,this.baseData.atk)},i([y({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([z],t)}(m.pzaBlover);e.pzaIceBlover=g,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBlover":"pzaBlover"}],pzaIceBowlingNut:[function(a,t,e){"use strict";cc._RF.push(t,"02fa593SIFIZoY7mKY3jumD","pzaIceBowlingNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceBowlingNut=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGroupEnum"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaUtil"),u=a("../../Common/pzaWorldEventManager"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaZombieEnum"),m=a("../Zombie/pzaZombieBody"),f=a("../pzaEffectManager"),z=a("./pzaAttackType"),y=a("./pzaBowlingNut"),g=cc._decorator,b=g.ccclass,v=(g.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.rotateNode.angle=0,this.rotateSpeed=360},t.prototype.onCollision=function(a){if(a.node.group!=l.pzaGroupEnum.WALL){if(a.node.group==l.pzaGroupEnum.ZOMBIE){if(this.colliderInterval>0)return;var t=a.node.getComponent(m.pzaZombieBody);if(null==t||null==t.baseData)return;if(this.baseData.yIndex!=t.baseData.yIndex)return;if(t.baseData.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT))return;0==t.baseData.yIndex?this.yDirection=1:4==t.baseData.yIndex?this.yDirection=-1:0==this.yDirection?this.yDirection=Math.random()>.5?1:-1:this.yDirection=-this.yDirection,s.pzaSoundManager.playAudio("bowlingHitNormal");var e=window.pzazombieManager.getZombie(t.baseData);t.baseData.zombieData.zombieType==h.pzaZombieEnum.SCREEN_DOOR_ZOMBIE&&this.baseData.plantData.isChangeLine?e&&e.hurt(1e4,null,z.pzaAttackType.TALL_BOWLING):e&&e.hurt(1800,null,z.pzaAttackType.BOWLING),t.baseData.isDead?(this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_6,this.killCount)):(e&&e.bePauseControl(),e&&e.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROZEN,3)),e.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROST,10,.5)),f.pzaEffectManager.createFrozenEffect(e.baseData)),this.colliderInterval=.5;var o=10*-(this.baseData.yIndex+this.yDirection)+5+this.yDirection;this.node.zIndex=o}}else this.yDirection=a.tag-2},t.prototype.onCollisionExit=function(){},t.prototype.close=function(){s.pzaSoundManager.playAudio("IceShroomBoom"),this.baseData&&(f.pzaEffectManager.createIceBoomEffect(this.baseData.logicPos),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.ICE_SHROOM_BOOM,this.baseData)),a.prototype.close.call(this)},t.prototype.playFrozenSound=function(){var a="frozen_"+c.pzaUtil.getRandomNum(1,2);s.pzaSoundManager.playAudio(a)},i([b],t)}(y.pzaBowlingNut));e.pzaIceBowlingNut=v,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","./pzaAttackType":"pzaAttackType","./pzaBowlingNut":"pzaBowlingNut"}],pzaIceCat2:[function(a,t,e){"use strict";cc._RF.push(t,"9ec33tBRwpPV48fBTCgPLZR","pzaIceCat2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceCat2=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../Bullet/pzaPeaTrackBullet"),c=a("../Data/pzaBuffData"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.playNormalAni(),u.pzaGameState.usePondPlant=!0},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();null==e?a.animation.playAnimation("idle1",!1,t):a.animation.playAnimation("attack",!1,t,function(){a.attack(e)},1.6)};this.animation.playAnimation("idle1",!1,t)},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(c.pzaBuffType.DIVE)&&!r.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(c.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){var o=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);e.setParent(t),o.setParent(t);var n=this.shootNode.convertToWorldSpaceAR(cc.v2()),i=t.convertToNodeSpaceAR(n);e.getComponent(s.pzaPeaTrackBullet).init(this.baseData.atk,a,cc.v2(i.x,i.y),this.baseData.yIndex),o.getComponent(s.pzaPeaTrackBullet).init(this.baseData.atk,a,cc.v2(i.x+50,i.y-50),this.baseData.yIndex),e.getComponent(s.pzaPeaTrackBullet).setBulletLevel(0),o.getComponent(s.pzaPeaTrackBullet).setBulletLevel(0)}}}},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaIceCat2=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaPeaTrackBullet":"pzaPeaTrackBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaIceCat:[function(a,t,e){"use strict";cc._RF.push(t,"c76b10Uk4xOf7glI5pI0/ht","pzaIceCat");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceCat=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../Bullet/pzaTrackBullet"),c=a("../Data/pzaBuffData"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack2"),u.pzaGameState.usePondPlant=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null==e)a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t));else{var o=a.atkAniTime/a.atkInterval*2;a.animation.playAnimation("attack2",!1,function(){a.animation.playAnimation("attack2",!1,function(){a.animation.playAnimation("idle",!1,t)},function(){a.attack(e)},o)},function(){a.attack(e)},o)}};this.animation.playAnimation("idle",!1,t)},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(c.pzaBuffType.DIVE)&&!r.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(c.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o),i=e.getComponent(s.pzaTrackBullet);i&&i.init(this.baseData.atk,a,n,this.baseData.yIndex)}}}},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaIceCat=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaTrackBullet":"pzaTrackBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaIceFumeShroom:[function(a,t,e){"use strict";cc._RF.push(t,"40f69hEbM1EFZCPcE8Di+Qn","pzaIceFumeShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFumeShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaZombieEnum"),h=a("../pzaEffectManager"),m=a("../pzaGameState"),f=a("./pzaAttackType"),z=a("./pzaBasePlant"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.isIceMelon=!1,t.blinkTime=3,t.attacking=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.plantData.sleeping||(this.blinkTime-=t)},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=window.pzazombieManager.getCanAttackZombies(a.baseData,8);if(e&&e.length>0)return l.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){null==a.baseData||a.baseData.isDead||(a.scheduleOnce(function(){var t=cc.v2(a.baseData.logicPos.x+a.shootNode.x,a.baseData.logicPos.y+a.shootNode.y);a.isIceMelon?h.pzaEffectManager.createIceFumeShroomEffect(a.baseData.yIndex,t,null):h.pzaEffectManager.createIceFumeShroomEffect(a.baseData.yIndex,t,null,"blow3"),a.hurtZombies(e)},.3/cc.gameSpeed),a.attack())});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};this.animation.playAnimation("idle1",!1,t)},t.prototype.attack=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n)if(this.isIceMelon)n.init(this.baseData.yIndex,this.baseData.plantData.atkArr[1],1);else{n.init(this.baseData.yIndex,this.baseData.atk,1);var i=m.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*m.pzaGameState.map.getBlockWidth())}}}}},t.prototype.hurtZombies=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=t.baseData){t.isIceMelon&&a.zombieData.zombieType!=d.pzaZombieEnum.NightWear&&!a.buffData.hasBuff(u.pzaBuffType.IMM_ICE)&&a.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,5,.5));var e=window.pzazombieManager.getZombie(a);e&&e.hurt(t.baseData.atk,t.baseData,f.pzaAttackType.PENETRATE)}})},i([b({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([b({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([b({displayName:"\u662f\u5426\u4e3a\u51b0\u74dc"})],t.prototype,"isIceMelon",void 0),i([g],t)}(z.pzaBasePlant);e.pzaFumeShroom=v,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaIceGroundEffect:[function(a,t,e){"use strict";cc._RF.push(t,"b6d09eU8vpEEqYlH++7vryG","pzaIceGroundEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceGroundEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.iceGround=null,t.iceGround2=null,t.oilGroundSlope=null,t.oilGroundConslope=null,t.poolPrefab=null,t.lifeTime=0,t.iceInitZombiePosX=0,t.iceLength=0,t.yIndex=-1,t.xIndex=-1,t.xOriginX=-1,t.isStartCreate=!1,t.isBreak=!1,t.iceMaxLifeTime=30,t}return n(t,a),t.prototype.init=function(a,t,e,o){void 0===o&&(o=!1),this.baseData=a,this.baseData.groundEffect=this.node,this.lifeTime=0,null!=a&&null!=a.logicPos&&(this.node.setPosition(cc.v2(o?700:t,e)),this.iceGround.width=0,this.iceGround2.x=0,this.iceLength=0,this.iceInitZombiePosX=o?700-p.pzaGameState.map.getBlockWidth():a.logicPos.x,this.yIndex=a.yIndex,this.xIndex=-1,this.isStartCreate=!1,window.pzaMapManager.addIceGround(this),this.iceMaxLifeTime=30)},t.prototype.miniInit=function(a,t,e,o){this.lifeTime=0,this.xIndex=e,this.xOriginX=this.xIndex,this.yIndex=o,this.baseData=null,this.node.setPosition(cc.v2(700,t)),this.iceGround.width=620,window.pzaMapManager.addIceGround(this),this.isStartCreate=!0},t.prototype.logicUpdate=function(a){this.isStartCreate||(null==this.baseData||this.baseData.isDead)&&(this.lifeTime+=a,this.lifeTime>=this.iceMaxLifeTime&&this.close())},t.prototype.logicLateUpdate=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos&&!this.isBreak){var a=this.baseData.logicPos.x,t=1;p.pzaGameState.isRoofMode()&&(t=4);var e=p.pzaGameState.map.getBlockLogicPos(t,this.baseData.yIndex,0,0);a=Math.max(e.x-p.pzaGameState.map.getBlockWidth()/2,a);var o=Math.abs(this.iceInitZombiePosX-a);this.iceLength=o,this.iceGround.width=o,this.iceGround2.x=-o;var n=p.pzaGameState.map.getMapXIndex(cc.v2(this.node.x-o,0));this.xIndex=n}},t.prototype.containBlock=function(a,t){return t==this.yIndex&&-1!=this.xIndex&&this.xIndex<=a},t.prototype.posHasIce=function(a,t){return t==this.yIndex&&-1!=this.xIndex&&a<=this.xOriginX&&a>=this.xIndex},t.prototype.getIceX=function(){return this.isStartCreate?80:this.node.x-this.iceLength},t.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy(),window.pzaMapManager.removeIceGround(this)},i([u({displayName:"\u51b0\u5730\u9762",type:cc.Node})],t.prototype,"iceGround",void 0),i([u({displayName:"\u51b0\u5730\u97622",type:cc.Node})],t.prototype,"iceGround2",void 0),i([u({displayName:"\u6cb9\u9762\u659c\u5761",type:cc.Node})],t.prototype,"oilGroundSlope",void 0),i([u({displayName:"\u6cb9\u9762\u76f4\u5761",type:cc.Node})],t.prototype,"oilGroundConslope",void 0),i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaIceGroundEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../pzaGameState":"pzaGameState"}],pzaIceMelonBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"f4d66oKKH9LY6omZfinZPZI","pzaIceMelonBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceMelonBaseBullet=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Effect/pzaBaseEffect"),u=a("../pzaGameState"),d=a("./pzaRotateBullet"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.noSpecialEff=!1,t}return n(t,a),t.prototype.colliderZombie=function(a){var t=this;if(a&&!a.isDead)if(null!=a.zombieData){if(a.zombieData&&a.zombieData.hypnosis)this.close();else if(!a.buffData.hasBuff(l.pzaBuffType.DIVE)&&!a.buffData.hasBuff(l.pzaBuffType.FLY))if(a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE))this.close();else{var e=window.pzazombieManager.getZombie(a);if(null!=e){if(e.hurt(this.atk),this.close(),this.hitPrefab){var o=cc.v2(this.node.x,this.node.y),n=p.pzaNodeManager.getPlantZombieNode(),i=r.pzaGameCommonPool.requestInstant2(this.hitPrefab);i.setParent(n),i.setPosition(o);var d=i.getComponent(c.pzaBaseEffect);d&&d.showEffect(null,null),0!=this.noSpecialEff||a.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||e.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||e.baseData.zombieData.zombieType!=s.pzaZombieEnum.NightWear&&a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5));for(var h=[],m=a.yIndex-1;m<=a.yIndex+1;m++)m<0||m>=u.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[m].forEach(function(t){null!=t&&t!=a&&t.xIndex==a.xIndex&&(t.buffData.hasBuff(l.pzaBuffType.FLY)||t.buffData.hasBuff(l.pzaBuffType.DIVE)||t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||h.push(t))});h.forEach(function(a){var e=window.pzazombieManager.getZombie(a);null!=e&&(e.hurt(26),0!=t.noSpecialEff||e.baseData.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||e.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||e.baseData.zombieData.zombieType!=s.pzaZombieEnum.NightWear&&e.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5)))})}}else this.close()}}else this.close()},i([f({displayName:"\u6ca1\u6709\u7279\u6b8a\u6548\u679c\u5b50\u5f39"})],t.prototype,"noSpecialEff",void 0),i([m],t)}(d.pzaRotateBullet);e.pzaIceMelonBaseBullet=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../pzaGameState":"pzaGameState","./pzaRotateBullet":"pzaRotateBullet"}],pzaIceMelonBullet:[function(a,t,e){"use strict";cc._RF.push(t,"1ec0apvbm5Ab5fnPlKnZx1N","pzaIceMelonBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceMelonBullet=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Effect/pzaBaseEffect"),u=a("../pzaGameState"),d=a("./pzaTrackBullet"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hitPrefab=null,t}return n(t,a),t.prototype.colliderZombie=function(a){if(a&&!a.isDead)if(null!=a.zombieData){if(a.zombieData&&a.zombieData.hypnosis)this.close();else if(a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE))this.close();else if(!a.buffData.hasBuff(l.pzaBuffType.DIVE)&&!a.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)){var t=window.pzazombieManager.getZombie(a);if(null!=t){if(t.hurt(this.atk),this.close(),this.hitPrefab){var e=cc.v2(this.node.x,this.node.y),o=p.pzaNodeManager.getPlantZombieNode(),n=r.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.setPosition(e);var i=n.getComponent(c.pzaBaseEffect);i&&i.showEffect(null,null),a.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||t.baseData.zombieData.zombieType!=s.pzaZombieEnum.NightWear&&a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5));for(var d=[],h=a.yIndex-1;h<=a.yIndex+1;h++)h<0||h>=u.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[h].forEach(function(t){null!=t&&t!=a&&t.xIndex==a.xIndex&&(t.buffData.hasBuff(l.pzaBuffType.FLY)||t.buffData.hasBuff(l.pzaBuffType.DIVE)||t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||d.push(t))});d.forEach(function(a){var t=window.pzazombieManager.getZombie(a);null!=t&&(t.hurt(26),t.baseData.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||t.baseData.zombieData.zombieType!=s.pzaZombieEnum.NightWear&&t.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5)))})}}else this.close()}}else this.close()},i([f({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"hitPrefab",void 0),i([m],t)}(d.pzaTrackBullet);e.pzaIceMelonBullet=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../pzaGameState":"pzaGameState","./pzaTrackBullet":"pzaTrackBullet"}],pzaIceNut:[function(a,t,e){"use strict";cc._RF.push(t,"0a5dbbKlR5A/pEHvsIzYSCI","pzaIceNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceNut=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaNodeManager"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaUtil"),d=a("../../Common/pzaWorldEventManager"),h=a("../Bullet/pzaBaseBullet"),m=a("../Data/pzaBuffData"),f=a("../Data/pzaPlantEnum"),z=a("../Data/pzaZombieEnum"),y=a("../pzaEffectManager"),g=a("../pzaGameState"),b=a("./pzaBasePlant"),v=cc._decorator,P=v.ccclass,D=v.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.atkTimes=2,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=f.pzaPlantCate.Nut,this.blinkTime=u.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(e.atkTimes>0&&window.pzazombieManager.hasCanAttackZombie(e.baseData))return e.atkTimes--,c.pzaSoundManager.playAudio("SnowPeaAtk"),void e.animation.playAnimation("attack",!1,o,function(){e.shoot()});e.atkTimes=2,e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=u.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle2",!1,o))};o()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t)},t.prototype.hurt=function(t,e,o){a.prototype.hurt.call(this,t,e,o),e&&e.buffData.addBuff(new m.pzaBuffInfo(m.pzaBuffType.FROST,3,.5))},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=s.pzaNodeManager.getBulletNode();if(null!=a){var t=l.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(h.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk);var i=g.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*g.pzaGameState.map.getBlockWidth())}}}}},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.attack()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.attack()},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},t.prototype.attack=function(){var a=this;c.pzaSoundManager.playAudio("IceShroomBoom"),window.pzaplantManager.removePlant(this.baseData),y.pzaEffectManager.createIceBoomEffect(this.baseData.logicPos),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.ICE_SHROOM_BOOM,this.baseData);var t=window.pzazombieManager.findAllZombies();null==t&&(t=[]),null!=window.pzazombieManager.drZomBoss&&t.push(window.pzazombieManager.drZomBoss);var e=0;t.forEach(function(t){t&&null!=t.baseData&&(t.baseData.buffData.hasBuff(m.pzaBuffType.INVINCIBLE)||(t.hurt(a.baseData.atk,a.baseData),t.baseData.buffData.hasBuff(m.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(m.pzaBuffType.IMM_CONTROL)||(t.baseData.buffData.addBuff(new m.pzaBuffInfo(m.pzaBuffType.FROST,15,.5)),t.bePauseControl(),t.baseData.buffData.addBuff(new m.pzaBuffInfo(m.pzaBuffType.FROZEN,4)),null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType!=z.pzaZombieEnum.DR_ZOMBOSS&&y.pzaEffectManager.createFrozenEffect(t.baseData),a.playFrozenSound(),e++)))}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_14,e)},t.prototype.playFrozenSound=function(){var a="frozen_"+u.pzaUtil.getRandomNum(1,2);c.pzaSoundManager.playAudio(a)},i([D({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([D({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([P],t)}(b.pzaBasePlant);e.pzaIceNut=S,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaIceSeaShroom:[function(a,t,e){"use strict";cc._RF.push(t,"2bc30PQ0vlCUYh8mBi0k/ma","pzaIceSeaShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceSeaShroom=void 0;var r=a("./pzaSeaShroom"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.baseData.plantData.canBeShoot=!1},i([l],t)}(r.pzaSeaShroom));e.pzaIceSeaShroom=s,cc._RF.pop()},{"./pzaSeaShroom":"pzaSeaShroom"}],pzaIceShroom:[function(a,t,e){"use strict";cc._RF.push(t,"b65b3EL8DpDPp+QT7IWve1B","pzaIceShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceShroom=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaUtil"),s=a("../../Common/pzaWorldEventManager"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaZombieEnum"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.lifeTime=0,t.hasBomb=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.hasBomb=!1,this.lifeTime=0,t.plantData.sleeping?(this.animation.playAnimation("idle",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.animation.playAnimation("attack",!0,function(){e.attack()})),h.pzaGameState.useShroom=!0},t.prototype.wakeUp=function(){var a=this;null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("attack",!0,function(){a.attack()}))},t.prototype.attack=function(){var a=this;r.pzaSoundManager.playAudio("IceShroomBoom"),this.hasBomb=!0,window.pzaplantManager.removePlant(this.baseData),this.death(),d.pzaEffectManager.createIceBoomEffect(this.baseData.logicPos),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.ICE_SHROOM_BOOM,this.baseData);var t=window.pzazombieManager.findAllZombies();null==t&&(t=[]),null!=window.pzazombieManager.drZomBoss&&t.push(window.pzazombieManager.drZomBoss),t.forEach(function(t){t&&null!=t.baseData&&(t.baseData.buffData.hasBuff(c.pzaBuffType.INVINCIBLE)||t.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)||(t.hurt(a.baseData.atk,a.baseData),t.baseData.buffData.hasBuff(c.pzaBuffType.IMM_ICE)||(t.baseData.buffData.addBuff(new c.pzaBuffInfo(c.pzaBuffType.FROST,15,.5)),t.baseData.buffData.hasBuff(c.pzaBuffType.IMM_CONTROL)||(t.bePauseControl(),t.baseData.buffData.addBuff(new c.pzaBuffInfo(c.pzaBuffType.FROZEN,4)),null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType!=u.pzaZombieEnum.DR_ZOMBOSS&&d.pzaEffectManager.createFrozenEffect(t.baseData),a.playFrozenSound()))))})},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},t.prototype.playFrozenSound=function(){var a="frozen_"+l.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(a)},t.prototype.flaserDeath=function(){var a=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},i([y({displayName:"\u7761\u89c9\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"sleepAni",void 0),i([z],t)}(m.pzaBasePlant);e.pzaIceShroom=g,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaIceSnowShroom:[function(a,t,e){"use strict";cc._RF.push(t,"a373407sqxAU4seyMvk0HFG","pzaIceSnowShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceSnowShroom=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGameConfig"),c=a("../../Common/pzaNodeManager"),u=a("../../Common/pzaSoundManager"),d=a("../../Common/pzaUtil"),h=a("../../Common/pzaWorldEventManager"),m=a("../../utils/pzakc"),f=a("../Bullet/pzaBaseBullet"),z=a("../Data/pzaBuffData"),y=a("../Data/pzaZombieEnum"),g=a("../pzaEffectManager"),b=a("../pzaGameState"),v=a("./pzaBasePlant"),P=cc._decorator,D=P.ccclass,S=P.property,C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.lifeTime=0,t.countDown=0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.baseData.isDead=!0,this.lifeTime=8,this.countDown=0,this.animation.playAnimation("idle1",!1,function(){e.attack(),e.countDown=.3,e.animation.playAnimation("idle2",!0)})},t.prototype.update=function(a){if(!b.pzaGameState.gamePause&&!b.pzaGameState.starModeGameOver&&this.lifeTime>0){if(this.lifeTime-=a,this.lifeTime<=0)return void this.deathAttack();this.countDown>0&&(this.countDown-=a,this.countDown<=0&&(this.countDown=.3,this.attack()))}},t.prototype.setPos=function(){null!=this.baseData&&0!=this.baseData.floatY&&null!=this.baseData.logicPos&&this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.attack=function(){for(var a=0;a<15;a++){var t=b.pzaGameState.map.getMapOriPos().x,e=t+8.5*b.pzaGameState.map.blockWidth,o=d.pzaUtil.getRandomFloatNum(t,e),n=s.pzaGameConfig.autoSunY,i=cc.v2(o,n);i.y+=m.default.randomInt(25,55),this.shoot(cc.v2(i.x,i.y))}},t.prototype.deathAttack=function(){var a=this;u.pzaSoundManager.playAudio("IceShroomBoom"),window.pzaplantManager.removePlant(this.baseData),this.death(),g.pzaEffectManager.createIceBoomEffect(this.baseData.logicPos),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.ICE_SHROOM_BOOM,this.baseData);var t=window.pzazombieManager.findAllZombies();null==t&&(t=[]),null!=window.pzazombieManager.drZomBoss&&t.push(window.pzazombieManager.drZomBoss);var e=0;t.forEach(function(t){t&&null!=t.baseData&&(t.baseData.buffData.hasBuff(z.pzaBuffType.INVINCIBLE)||t.baseData.buffData.hasBuff(z.pzaBuffType.UNABLE_SELECT)||(t.hurt(a.baseData.atk,a.baseData),t.baseData.buffData.hasBuff(z.pzaBuffType.IMM_ICE)||(t.baseData.buffData.addBuff(new z.pzaBuffInfo(z.pzaBuffType.FROST,15,.5)),t.baseData.buffData.hasBuff(z.pzaBuffType.IMM_CONTROL)||(t.bePauseControl(),t.baseData.buffData.addBuff(new z.pzaBuffInfo(z.pzaBuffType.FROZEN,4)),null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType!=y.pzaZombieEnum.DR_ZOMBOSS&&g.pzaEffectManager.createFrozenEffect(t.baseData),a.playFrozenSound(),e++))))}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_14,e)},t.prototype.playFrozenSound=function(){var a="frozen_"+d.pzaUtil.getRandomNum(1,2);u.pzaSoundManager.playAudio(a)},t.prototype.shoot=function(a){var t=c.pzaNodeManager.getBulletNode(),e=l.pzaGameCommonPool.requestInstant2(this.bulletPrefab);e.setParent(t),e.setPosition(a);var o=e.getComponent(f.pzaBaseBullet);o.maxLifeTime=5,o.init(-1,this.baseData.atk,0,null,cc.v2(1,0),!1,!0),o.yMove=!0},i([S({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([D],t)}(v.pzaBasePlant);e.pzaIceSnowShroom=C,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzakc":"pzakc","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaIceSpike:[function(a,t,e){"use strict";cc._RF.push(t,"fd034kXj95K6anyq9qkYYsY","pzaIceSpike");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceSpike=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaSoundManager"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaZombieEnum"),u=a("../pzaEffectManager"),d=a("./pzaAttackType"),h=a("./pzaSpikeweed"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.bornAttack()},t.prototype.bornAttack=function(){var a=this;l.pzaSoundManager.playAudio("IceShroomBoom");var t=window.pzazombieManager.zombieDatas[this.baseData.yIndex],e=!1;t.forEach(function(t){if(!(null==t||t.isDead||t.buffData.hasBuff(s.pzaBuffType.FLY)||t.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT))&&t.xIndex==a.baseData.xIndex){var o=window.pzazombieManager.getZombie(t);o&&(o&&o.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.SPIKE),o.baseData.isDead||t.buffData.hasBuff(s.pzaBuffType.IMM_ICE)||(o.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FROST,10,.5)),o.bePauseControl(),o.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FROZEN,5)),null!=o.baseData.zombieData&&o.baseData.zombieData.zombieType!=c.pzaZombieEnum.DR_ZOMBOSS&&u.pzaEffectManager.createFrozenEffect(o.baseData)),t.zombieData.cate===c.pzaZombieCate.IceCar&&(e=!0))}}),e&&this.flaserDeath()},t.prototype.deadAttack=function(){var a=this;l.pzaSoundManager.playAudio("IceShroomBoom");var t=0;window.pzazombieManager.zombieMap.forEach(function(e,o){e?e.baseData&&!e.baseData.isDead&&(e.baseData.buffData.hasBuff(s.pzaBuffType.IMM_ICE)||e.baseData.buffData.hasBuff(s.pzaBuffType.FLY)||(e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.FLOOR_ATK),e.baseData.isDead||(e.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FROST,20,.5)),e.bePauseControl(),e.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FROZEN,3)),null!=e.baseData.zombieData&&e.baseData.zombieData.zombieType!=c.pzaZombieEnum.DR_ZOMBOSS&&u.pzaEffectManager.createFrozenEffect(e.baseData),t++))):window.pzazombieManager.zombieMap.delete(o)}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_14,t)},t.prototype.attack=function(){var a=this;l.pzaSoundManager.playAudio("Spikeweed"),null==this.baseData||this.baseData.isDead||window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(a.baseData&&null!=t&&!t.isDead&&!t.buffData.hasBuff(s.pzaBuffType.FLY)&&!t.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)&&t.xIndex==a.baseData.xIndex){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.SPIKE),e.baseData.isDead||t.buffData.hasBuff(s.pzaBuffType.IMM_ICE)||e.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FROST,10,.5))}})},t.prototype.hurt=function(a,t,e){if(this.baseData)if(e==d.pzaAttackType.BOOM)window.pzaplantManager.removePlant(this.baseData),this.death(t);else if(e==d.pzaAttackType.BANG)return this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.deadAttack()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.deadAttack()},i([f],t)}(h.pzaSpikeweed));e.pzaIceSpike=z,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaAttackType":"pzaAttackType","./pzaSpikeweed":"pzaSpikeweed"}],pzaIceSquash:[function(a,t,e){"use strict";cc._RF.push(t,"a2573ydx3JBGZzw/BihQuX5","pzaIceSquash");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceSquash=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../../Common/pzaWorldEventManager"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaPlantEnum"),h=a("../Data/pzaZombieEnum"),m=a("../pzaEffectManager"),f=a("./pzaSquashNut"),z=cc._decorator,y=z.ccclass,g=(z.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani_plant_inact=null,t.ani_plant_hurt=null,t.ani_plant_die=null,t.deathAttack=null,t}return n(t,a),t.prototype.afterBind=function(a){var t=this;a.plantData.cate=d.pzaPlantCate.Null;var e=function(){t.jumpTarget=t.findTarget(),t.jumpTarget?t.attack(t.jumpTarget):t.animation.playAnimation("idle1",!1,e)};e()},t.prototype.attack=function(a){var t=this;this.jumpTarget=a,l.pzaSoundManager.playAudio("SquashStart"),this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,this.animation.playAnimation(a.logicPos.x>=this.baseData.logicPos.x?"lookright":"lookleft",!1,function(){t.animation.playAnimation("jumpup1",!1,function(){if(t.animation.playAnimation("jumpup2",!1,function(){t.animation.playAnimation("jumpup3",!1)}),t.baseData){var e=10*-a.yIndex+6;t.node.zIndex=e,t.jumpUpTime=t.jumpUpMaxTime;var o=t.jumpTarget.logicPos.x-t.baseData.logicPos.x;t.speedX=o/t.jumpUpTime}})})},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.iceAttack()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.iceAttack()},t.prototype.iceAttack=function(){var a=this;l.pzaSoundManager.playAudio("IceShroomBoom"),window.pzaplantManager.removePlant(this.baseData),m.pzaEffectManager.createIceBoomEffect(this.baseData.logicPos),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.ICE_SHROOM_BOOM,this.baseData);var t=window.pzazombieManager.findAllZombies();null==t&&(t=[]),null!=window.pzazombieManager.drZomBoss&&t.push(window.pzazombieManager.drZomBoss);var e=0;t.forEach(function(t){if(t&&null!=t.baseData&&!t.baseData.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)&&(t.hurt(a.baseData.plantData.atk2Arr[0]||30,a.baseData),!t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE)&&!t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_CONTROL))){t.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,15,.5)),t.bePauseControl(),t.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROZEN,4)),null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType!=h.pzaZombieEnum.DR_ZOMBOSS&&m.pzaEffectManager.createFrozenEffect(t.baseData);var o="frozen_"+s.pzaUtil.getRandomNum(1,2);l.pzaSoundManager.playAudio(o),e++}}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_14,e)},i([y],t)}(f.pzaSquashNut));e.pzaIceSquash=g,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaSquashNut":"pzaSquashNut"}],pzaIceSunShroom:[function(a,t,e){"use strict";cc._RF.push(t,"32b60jw6VNAirWWWN6ZWu1A","pzaIceSunShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceSunShroom=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpineController"),c=a("../../Common/pzaUtil"),u=a("../../Common/pzaWorldEventManager"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaZombieEnum"),m=a("../pzaEffectManager"),f=a("../pzaGameState"),z=a("./pzaBasePlant"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.lifeTime=0,t.hasBomb=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.hasBomb=!1,this.lifeTime=0,this.sleepAni.node.active=!1,this.animation.playAnimation("idle1",!0),f.pzaGameState.useShroom=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null!=this.baseData&&null!=this.baseData.plantData&&(this.lifeTime+=t,this.lifeTime>=1&&!this.hasBomb&&this.attack())},t.prototype.attack=function(){var a=this;l.pzaSoundManager.playAudio("IceShroomBoom"),this.hasBomb=!0,window.pzaplantManager.removePlant(this.baseData),this.death(),m.pzaEffectManager.createIceBoomEffect(this.baseData.logicPos),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.ICE_SHROOM_BOOM,this.baseData);var t=window.pzazombieManager.findAllZombies();null==t&&(t=[]),null!=window.pzazombieManager.drZomBoss&&t.push(window.pzazombieManager.drZomBoss);var e=0;t.forEach(function(t){t&&null!=t.baseData&&(t.baseData.buffData.hasBuff(d.pzaBuffType.INVINCIBLE)||t.baseData.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)||(t.hurt(a.baseData.atk,a.baseData),t.baseData.buffData.hasBuff(d.pzaBuffType.IMM_ICE)||(t.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROST,15,.5)),t.baseData.buffData.hasBuff(d.pzaBuffType.IMM_CONTROL)||(t.bePauseControl(),t.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROZEN,4)),null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType!=h.pzaZombieEnum.DR_ZOMBOSS&&m.pzaEffectManager.createFrozenEffect(t.baseData),window.pzaplantManager.plantCreateSun2(t.baseData.logicPos,1,15),a.playFrozenSound(),e++))))}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_14,e)},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},t.prototype.playFrozenSound=function(){var a="frozen_"+c.pzaUtil.getRandomNum(1,2);l.pzaSoundManager.playAudio(a)},t.prototype.flaserDeath=function(){var a=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},i([b({displayName:"\u7761\u89c9\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"sleepAni",void 0),i([g],t)}(z.pzaBasePlant);e.pzaIceSunShroom=v,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaIceWood:[function(a,t,e){"use strict";cc._RF.push(t,"e117dRNXm1LMYhCDnOCmZgD","pzaIceWood");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceWood=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaUtil"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=a("./pzaPlantBody"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.icewoodBody=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),l.pzaGameState.isZombieMode())this.animation.playAnimation("T_idle",!0);else{this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(e.blinkTime<=0)return e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),void e.animation.playAnimation("idle_eye",!1,o);e.animation.playAnimation("idle",!1,o)};this.animation.playAnimation("idle",!1,o),l.pzaGameState.onlyShroomCofee=!1}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.logicLateUpdate=function(){this.bodyBindData||(this.icewoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addBulletPlantByRow(this.baseData.yIndex,this.icewoodBody)),a.prototype.logicLateUpdate.call(this)},t.prototype.death=function(t,e){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.icewoodBody),a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.icewoodBody),a.prototype.flaserDeath.call(this)},i([h({displayName:"\u51b0\u706b\u78b0\u649e\u8eab\u4f53",type:c.pzaPlantBody})],t.prototype,"icewoodBody",void 0),i([d],t)}(s.pzaBasePlant);e.pzaIceWood=m,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant","./pzaPlantBody":"pzaPlantBody"}],pzaImitaterSelectView:[function(a,t,e){"use strict";cc._RF.push(t,"a9b36QLlYdJ/qgNLp+39Zdg","pzaImitaterSelectView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaImitaterSelectView=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaLocalData"),c=a("./pzaBagPlantCard"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardPrefab=null,t.cardBag=null,t.selectCardCall=null,t.bagCards=[],t}return n(t,a),t.prototype.init=function(a){this.node.active=!0,this.selectCardCall=a;for(var t=r.pzaPlantEnum.PEA_SHOOTER;t<=r.pzaPlantEnum.MELON_PULT;t++)null!=(e=l.pzaGameCommonPool.requestInstant(this.cardPrefab,!1))&&(e.setParent(this.cardBag),null!=(o=e.getComponent(c.pzaBagPlantCard))&&(o.bindData(t,this.clickBagCardCall.bind(this),!0),this.bagCards.push(o)));for(t=r.pzaPlantEnum.CAIWEN;t<=r.pzaPlantEnum.FireBlover;t++)null!=(e=l.pzaGameCommonPool.requestInstant(this.cardPrefab,!1))&&(e.setParent(this.cardBag),null!=(o=e.getComponent(c.pzaBagPlantCard))&&(o.bindData(t,this.clickBagCardCall.bind(this),!0),this.bagCards.push(o)));var e,o;s.pzaLocalData.data.ownPlants.indexOf(r.pzaPlantEnum.BOOM_NUT)>=0&&(e=l.pzaGameCommonPool.requestInstant(this.cardPrefab,!1))&&(e.setParent(this.cardBag),(o=e.getComponent(c.pzaBagPlantCard))&&(o.bindData(r.pzaPlantEnum.BOOM_NUT,this.clickBagCardCall.bind(this),!0),this.bagCards.push(o)))},t.prototype.clickBagCardCall=function(a){p.pzaGameState.curImitaterPlant=a,this.node.active=!1,this.selectCardCall&&this.selectCardCall()},t.prototype.clickCancel=function(){this.node.active=!1},t.prototype.onDisable=function(){this.bagCards.forEach(function(a){a&&a.close()}),this.bagCards=[]},i([h({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cardPrefab",void 0),i([h({displayName:"\u5361\u7247\u80cc\u5305\u5bb9\u5668",type:cc.Node})],t.prototype,"cardBag",void 0),i([d],t)}(cc.Component);e.pzaImitaterSelectView=m,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaLocalData":"pzaLocalData","./pzaBagPlantCard":"pzaBagPlantCard"}],pzaImitater:[function(a,t,e){"use strict";cc._RF.push(t,"f40e0hGwCtHWrPXVkj929CB","pzaImitater");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaImitater=void 0;var r=a("../../Common/pzaUtil"),p=a("../pzaEffectManager"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.imitatTime=0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=r.pzaUtil.getRandomFloatNum(3,6),this.imitatTime=1.6;var o=function(){e.imitatTime<=0?e.animation.playAnimation("zhuan",!1,e.imitat.bind(e),function(){p.pzaEffectManager.createImitaterEffect(cc.v2(e.baseData.logicPos.x,e.baseData.logicPos.y+e.baseData.floatY))}):e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=r.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};this.animation.playAnimation("idle",!1,o)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,this.imitatTime-=t)},t.prototype.imitat=function(){this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),this.close(),null!=l.pzaGameState.curImitaterPlant&&(window.pzaplantManager.createPlant(l.pzaGameState.curImitaterPlant,this.baseData.xIndex,this.baseData.yIndex,!0,!0),this.baseData.xIndex,this.baseData.yIndex)},i([u],t)}(s.pzaBasePlant));e.pzaImitater=d,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaImp:[function(a,t,e){"use strict";cc._RF.push(t,"60cda1HD21OrqK/2G31WX/4","pzaImp");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaImp=void 0;var r=a("../Data/pzaBuffData"),p=a("../pzaGameState"),l=a("./pzaBaseZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.fallASpeed=0,t.fallXSpeed=0,t.fallYSpeed=0,t.fallTime=1.5,t.flying=!0,t.flyTime=0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,52.22,4.58,-94.44))]])},t.prototype.bindData=function(t,e){var o=this;if(void 0===e&&(e=!1),a.prototype.bindData.call(this,t),p.pzaGameState.isZombieMode())return this.flying=!1,this.fallTime=0,void this.playStayAnimation();if(this.fallTime=1.17,this.flying=!0,t&&t.logicPos&&(t.logicPos.x-=45,t.logicPos.y-=250,p.pzaGameState.map)){var n=.1*p.pzaGameState.map.getYInterval(this.baseData.yIndex)+15,i=p.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.baseData.yIndex,0,n);i.x<-250&&(i.x=-250,console.log("\u5f3a\u5236-250")),console.log("\u4f4d\u7f6e",i.x);var l=Math.abs(i.x-t.logicPos.x);this.fallXSpeed=l/this.fallTime,this.fallYSpeed=0;var s=t.logicPos.y-i.y;this.fallASpeed=2*s/(this.fallTime*this.fallTime),this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.INVINCIBLE,-1)),this.animation.playAnimation("fall",!1,function(){o.baseData.buffData.removeBuff(r.pzaBuffType.UNABLE_SELECT),o.baseData.buffData.removeBuff(r.pzaBuffType.INVINCIBLE),o.flying=!1,o.playMoveAnimation(),o.body.curTarget=null},function(a,t){t&&"1"==t.data.name&&(o.setWaterState(o.baseData.xIndex,o.baseData.yIndex),o.hasInWater&&(o.mask.enabled=!0,o.curWaterWaveEff&&o.curWaterWaveEff.showWaterWave()))}),this.node.setPosition(this.baseData.logicPos),this.flyTime=1.57}},t.prototype.logicUpdate=function(t){if(this.breakDirtTime>0){this.breakDirtTime-=t;var e=-Math.max(0,this.breakDirtTime/.3)*this.breakDirtHeight+this.animationYOffset;return this.animation.node.y=e*this.zombieScale,void(this.breakDirtTime<=0&&null!=this.mask&&(this.mask.enabled=!1,this.curShadow&&this.curShadow.showShadow(),this.breakCall&&this.breakCall()))}if(this.flyTime>0&&(this.flyTime-=t,this.flyTime<=0&&this.flying&&(this.flying=!1,this.baseData.buffData.removeBuff(r.pzaBuffType.UNABLE_SELECT),this.baseData.buffData.removeBuff(r.pzaBuffType.INVINCIBLE),this.playMoveAnimation(),this.body.curTarget=null)),this.fallTime>0)return this.fallTime-=t,void this.fallMove(t);this.flying||a.prototype.logicUpdate.call(this,t)},t.prototype.fallMove=function(a){this.baseData.logicPos.x-=a*this.fallXSpeed,this.baseData.logicPos.y-=a*this.fallYSpeed,this.fallYSpeed+=a*this.fallASpeed,this.baseData.logicPos.x<=-250&&(this.fallXSpeed=0)},t.prototype.logicLateUpdate=function(t){null!=this.baseData&&null!=this.baseData.logicPos&&(this.node.setPosition(this.baseData.logicPos),0==this.flying&&a.prototype.logicLateUpdate.call(this,t))},t.prototype.onWaterEnter=function(){this.flying||(this.mask.enabled=!0,this.curWaterWaveEff&&this.curWaterWaveEff.showWaterWave())},t.prototype.onWaterExit=function(){this.flying||(this.mask.enabled=!1,this.curWaterWaveEff&&this.curWaterWaveEff.hideWaterWave())},i([u],t)}(l.pzaBaseZombie));e.pzaImp=d,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaJackZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"e6194r8qTBPxrbpe5piZ2Ai","pzaJackZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJackZombie2=void 0;var r=a("./pzaJackZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=p.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,73.42,8.53,-85.76))],[p.pzaZombieSlotType.hat,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.hat).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.hat+"1",0,0,0)).addState(new p.pzaZombieSlotAtt(2,p.pzaZombieSlotType.hat+"2",0,0,0)).addState(new p.pzaZombieSlotAtt(3,p.pzaZombieSlotType.hat+"3",0,15,0))]])},i([s],t)}(r.pzaJackZombie));e.pzaJackZombie2=c,cc._RF.pop()},{"./pzaJackZombie":"pzaJackZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaJackZombie:[function(a,t,e){"use strict";cc._RF.push(t,"0acdd8NEJFLu5WbLeyEM4Rs","pzaJackZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJackZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Plant/pzaAttackType"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaBaseZombie"),h=a("./pzaZombieSlot"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.boomLeftTime=0,t.openBoxTime=0,t.hasOpenBox=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[h.pzaZombieSlotType.butter,new h.pzaZombieSlot(this.animation.spineAnimation,h.pzaZombieSlotType.butter).addState(new h.pzaZombieSlotAtt(1,h.pzaZombieSlotType.butter,18.21,19.01,-90.94))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.hasOpenBox=!1,this.boomLeftTime=0,u.pzaGameState.gameMode===u.pzaGameMode.BANG_JAR?this.openBoxTime=0:Math.random()>.05?this.openBoxTime=p.pzaUtil.getRandomFloatNum(13.22,20):this.openBoxTime=p.pzaUtil.getRandomFloatNum(4.4,7.54),window.pzazombieManager.getJackHasToolAmt()<=0&&r.pzaSoundManager.playLoopAudio("jack_enter",!0)},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),this.boomLeftTime>0)return this.boomLeftTime-=t,void(this.boomLeftTime<=0&&this.boom());!this.hasOpenBox&&this.hasTool&&(this.openBoxTime-=t,this.baseData.isBeControlled()||this.openBoxTime<=0&&(this.hasOpenBox=!0,this.boomLeftTime=1.1,r.pzaSoundManager.playAudio("boing"),this.scheduleOnce(function(){r.pzaSoundManager.playAudio("jack_surprise")},.5),this.animation.playAnimation("wow",!1),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.HARD_BODY,-1))))},t.prototype.boom=function(){var a=this;if(null!=this.baseData&&null!=this.baseData.zombieData){this.baseData.zombieDie(),this.death(!1),r.pzaSoundManager.playAudio("explosion");var t=this.baseData.zombieData.zombieType;c.pzaEffectManager.createAshesEffect(t,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,this.animation.spineAnimation.node,"blow2");var e=1.5*u.pzaGameState.map.getBlockWidth();if(!this.baseData.zombieData.hypnosis){if(window.pzaplantManager.pzaJarMap.size>0){for(var o=[""+(this.baseData.xIndex-1)+(this.baseData.yIndex-1),""+this.baseData.xIndex+(this.baseData.yIndex-1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex-1),""+(this.baseData.xIndex-1)+this.baseData.yIndex,""+(this.baseData.xIndex+1)+this.baseData.yIndex,""+(this.baseData.xIndex-1)+(this.baseData.yIndex+1),""+this.baseData.xIndex+(this.baseData.yIndex+1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex+1)],n=!1,i=0;i<o.length;i++){var d=o[i],h=window.pzaplantManager.pzaJarMap.get(d);h&&(window.pzaplantManager.pzaJarMap.delete(d),h.bang(),n=!0)}n&&r.pzaSoundManager.playAudio("vase_breaking")}var m=window.pzaplantManager.findFixRangePlants(this.baseData.logicPos,e);return m&&m.forEach(function(t){t&&t.hurt(1800,a.baseData,s.pzaAttackType.BOOM)}),void window.pzazombieManager.hypnoZombieMap.forEach(function(t,o){null==t||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||p.pzaUtil.getDistance(a.baseData.logicPos,o.logicPos)<=e&&t&&t.hurt(1800,a.baseData,s.pzaAttackType.BOOM)})}var f=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,e);null!=f&&f.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||t&&t.hurt(1800,a.baseData,s.pzaAttackType.BOOM)})}},t.prototype.zombieIntact=function(){a.prototype.zombieIntact.call(this),this.changeSkin("zombie_1")},t.prototype.toolDeath=function(){a.prototype.toolDeath.call(this),window.pzazombieManager.getJackHasToolAmt()<=0&&r.pzaSoundManager.deleteLoopAudioName("jack_enter")},t.prototype.zombieScream=function(){},t.prototype.close=function(){a.prototype.close.call(this),window.pzazombieManager.getZombieMapData()<=0&&r.pzaSoundManager.deleteLoopAudioName("jack_enter")},i([f],t)}(d.pzaBaseZombie));e.pzaJackZombie=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaJalapenoBowlingNut:[function(a,t,e){"use strict";cc._RF.push(t,"be0e4NE1RhEb4Vy1HpchgPy","pzaJalapenoBowlingNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJalapenoBowlingNut=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGroupEnum"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaWorldEventManager"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaZombieEnum"),h=a("../Zombie/pzaZombieBody"),m=a("../pzaEffectManager"),f=a("../pzaGameState"),z=a("./pzaAttackType"),y=a("./pzaBowlingNut"),g=cc._decorator,b=g.ccclass,v=(g.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onCollision=function(a){if(a.node.group!=l.pzaGroupEnum.WALL){if(a.node.group==l.pzaGroupEnum.ZOMBIE){if(this.colliderInterval>0)return;var t=a.node.getComponent(h.pzaZombieBody);if(null==t||null==t.baseData)return;if(this.baseData.yIndex!=t.baseData.yIndex)return;if(t.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT))return;0==t.baseData.yIndex?this.yDirection=1:4==t.baseData.yIndex?this.yDirection=-1:0==this.yDirection?this.yDirection=Math.random()>.5?1:-1:this.yDirection=-this.yDirection,s.pzaSoundManager.playAudio("bowlingHitNormal");var e=window.pzazombieManager.getZombie(t.baseData);t.baseData.zombieData.zombieType==d.pzaZombieEnum.SCREEN_DOOR_ZOMBIE&&this.baseData.plantData.isChangeLine?e&&e.hurt(1e4,null,z.pzaAttackType.TALL_BOWLING):e&&e.hurt(1800,null,z.pzaAttackType.BOWLING),t.baseData.isDead&&(this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_6,this.killCount)),this.colliderInterval=.5;var o=10*-(this.baseData.yIndex+this.yDirection)+5+this.yDirection;this.node.zIndex=o,this.attack(),s.pzaSoundManager.playAudio("JalapenoBoom",.1)}}else this.yDirection=a.tag-2},t.prototype.attack=function(){var a=this;window.pzaplantManager.removePlant(this.baseData),this.close(),window.pzaMapManager.shakeMap();for(var t=f.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),e=0;e<12;e++){var o=t.clone();o.x+=100*e,f.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,o,0);var n=.1*e+.5;e>=5&&(n=.05*e+.5),m.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,n,o,null)}window.pzaMapManager.removeRowIceGround(this.baseData.yIndex);for(var i=0;i<=8;i++)window.pzaMapManager.removeLadder(i,this.baseData.yIndex);c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var r=window.pzazombieManager.zombieDatas[this.baseData.yIndex],p=Array.from(r);null!=window.pzazombieManager.drZomBoss&&p.push(window.pzazombieManager.drZomBoss.baseData),p.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(5e3,a.baseData,z.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==d.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(u.pzaBuffType.FROST),t.buffData.removeBuff(u.pzaBuffType.FROZEN))}})},i([b],t)}(y.pzaBowlingNut));e.pzaJalapenoBowlingNut=v,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBowlingNut":"pzaBowlingNut"}],pzaJalapenoBucketZombie:[function(a,t,e){"use strict";cc._RF.push(t,"91dd5QDo1ZLF7DAQQlcYrhJ","pzaJalapenoBucketZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJalapenoBucketZombie=void 0;var r=a("../../Common/pzaUtil"),p=a("./pzaJalapenoZombie"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.isNut=!1,t.garlicSkinName="",t.boomIdx=0,t.hasBoomAtk=!1,t.equip1Slot=l.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):(this.slotMap=new Map([]),this.slotMap.set(l.pzaZombieSlotType.hat,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.hat).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.hat_iron+"1",112.23,-13.16,-90.94)).addState(new l.pzaZombieSlotAtt(2,l.pzaZombieSlotType.hat_iron+"2",109.94,-11.66,-90.94)).addState(new l.pzaZombieSlotAtt(3,l.pzaZombieSlotType.hat_iron+"3",107.34,-17.94,-90.94))))},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.boomIdx=r.pzaUtil.getRandomValueFromArray([5,6,7]),this.hasBoomAtk=!1,this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var e=this.animation.findBone("aduck");this.hasUseSrAni?e&&(e.scaleX=.158,e.scaleY=.158):e&&(e.scaleX=0,e.scaleY=0)},i([c],t)}(p.pzaJalapenoZombie));e.pzaJalapenoBucketZombie=u,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","./pzaJalapenoZombie":"pzaJalapenoZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaJalapenoConeZombie:[function(a,t,e){"use strict";cc._RF.push(t,"15d2eTUmz9IT4RbIDJAG/tS","pzaJalapenoConeZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJalapenoConeZombie=void 0;var r=a("../../Common/pzaUtil"),p=a("./pzaJalapenoZombie"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.isNut=!0,t.garlicSkinName="",t.boomIdx=0,t.hasBoomAtk=!1,t.equip1Slot=l.pzaZombieSlotType.hat,t.hatType=l.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):(this.slotMap=new Map([]),this.slotMap.set(l.pzaZombieSlotType.hat,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.hat).addState(new l.pzaZombieSlotAtt(1,this.hatType+"1",72.44,-12.04,-90.94)).addState(new l.pzaZombieSlotAtt(2,this.hatType+"2",72.44,-12.04,-90.94)).addState(new l.pzaZombieSlotAtt(3,this.hatType+"3",60.99,-8.35,-90.94))))},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.boomIdx=r.pzaUtil.getRandomValueFromArray([5,6,7]),this.hasBoomAtk=!1,this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var e=this.animation.findBone("aduck");this.hasUseSrAni?e&&(e.scaleX=.158,e.scaleY=.158):e&&(e.scaleX=0,e.scaleY=0)},i([c],t)}(p.pzaJalapenoZombie));e.pzaJalapenoConeZombie=u,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","./pzaJalapenoZombie":"pzaJalapenoZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaJalapenoScreenZombie:[function(a,t,e){"use strict";cc._RF.push(t,"184efjbdC5GyZ37Xad8S//q","pzaJalapenoScreenZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJalapenoScreenZombie=void 0;var r=a("../../Common/pzaUtil"),p=a("./pzaJalapenoZombie"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.isNut=!1,t.garlicSkinName="",t.boomIdx=0,t.hasBoomAtk=!1,t.equip1Slot=l.pzaZombieSlotType.door,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):(this.slotMap=new Map([]),this.slotMap.set(l.pzaZombieSlotType.door,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.door).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.door+"1",-86.15,-43.37)).addState(new l.pzaZombieSlotAtt(2,l.pzaZombieSlotType.door+"2",-86.15,-43.37)).addState(new l.pzaZombieSlotAtt(3,l.pzaZombieSlotType.door+"3",-86.15,-43.37))))},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.boomIdx=r.pzaUtil.getRandomValueFromArray([5,6,7]),this.hasBoomAtk=!1,this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var e=this.animation.findBone("aduck");this.hasUseSrAni?e&&(e.scaleX=.158,e.scaleY=.158):e&&(e.scaleX=0,e.scaleY=0)},i([c],t)}(p.pzaJalapenoZombie));e.pzaJalapenoScreenZombie=u,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","./pzaJalapenoZombie":"pzaJalapenoZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaJalapenoZombie:[function(a,t,e){"use strict";cc._RF.push(t,"0cc46eggGFGJLNBSJlwl8AQ","pzaJalapenoZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJalapenoZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaZombieEnum"),s=a("../Plant/pzaAttackType"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaNormalZombie"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.isNut=!0,t.garlicSkinName="",t.boomIdx=0,t.hasBoomAtk=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.boomIdx=p.pzaUtil.getRandomValueFromArray([5,6,7]),this.hasBoomAtk=!1,this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var e=this.animation.findBone("aduck");this.hasUseSrAni?e&&(e.scaleX=.158,e.scaleY=.158):e&&(e.scaleX=0,e.scaleY=0)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.canBoom()},t.prototype.canBoom=function(){this.baseData&&!this.baseData.isDead&&this.baseData.xIndex>=0&&this.baseData.xIndex<=this.boomIdx&&!this.hasBoomAtk&&(this.hasBoomAtk=!0,this.jalapenoAttack(),this.death(!1))},t.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,this.changeSkin(this.curSkinName)},t.prototype.jalapenoAttack=function(){window.pzaMapManager.shakeMap(),r.pzaSoundManager.playAudio("JalapenoBoom",.1);for(var a=u.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),t=0;t<12;t++){var e=a.clone();e.x+=100*t,u.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,e,0);var o=.1*t+.5;t>=5&&(o=.05*t+.5),c.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,o,e,null)}for(t=0;t<8;t++){var n=""+t+this.baseData.yIndex,i=window.pzaplantManager.plantDataMap.get(n);if(null!=i){var p=window.pzaplantManager.getPlantByData(i);p&&p.hurt(5e4,this.baseData,s.pzaAttackType.BOOM)}var l=window.pzaplantManager.plantEnvDataMap.get(n);if(null!=l){var d=window.pzaplantManager.getPlantByData(l);d&&d.hurt(5e4,this.baseData,s.pzaAttackType.BOOM)}var h=window.pzaplantManager.pumpkinDataMap.get(n);if(null!=h){var m=window.pzaplantManager.getPlantByData(h);m&&m.hurt(5e4,this.baseData,s.pzaAttackType.BOOM)}}},t.prototype.updateMove=function(t){var e=this.baseData.xIndex;a.prototype.updateMove.call(this,t);var o=this.baseData.xIndex;e<0&&o>=0&&this.hasUseSrAni?(this.hasInWater=!0,this.playMoveAnimation(),this.curShadow&&this.curShadow.hideShadow()):o<0&&e>=0&&this.hasUseSrAni&&(null!=this.mask&&(this.mask.enabled=!0),r.pzaSoundManager.playAudio("zombie_leave_water"),this.hasInWater=!1,this.playMoveAnimation())},t.prototype.ashesDeath=function(t,e){a.prototype.ashesDeath.call(this,t,e)},i([m],t)}(d.pzaNormalZombie));e.pzaJalapenoZombie=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaNormalZombie":"pzaNormalZombie"}],pzaJalapeno:[function(a,t,e){"use strict";cc._RF.push(t,"b9da2ckJ49KCJ87/y5Ssjij","pzaJalapeno");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJalapeno=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.isHideEff=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),r.pzaSoundManager.playAudio("JalapenoReady",.1),this.preventBreak(),this.playBoomAni(),u.pzaGameState.onlyShroomCofee=!1},t.prototype.playBoomAni=function(){var a=this;this.animation.playAnimation("blow",!1,function(){if(a.isHideEff)return window.pzaplantManager.removePlant(a.baseData),void a.death();r.pzaSoundManager.playAudio("JalapenoBoom",.1),a.body.node.getComponent(cc.BoxCollider).enabled=!0,a.baseData.isDead=!1,a.attack()})},t.prototype.attack=function(){var a=this;window.pzaplantManager.removePlant(this.baseData),this.death(),window.pzaMapManager.shakeMap();for(var t=u.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),e=0;e<12;e++){var o=t.clone();o.x+=100*e,u.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,o,0);var n=.1*e+.5;e>=5&&(n=.05*e+.5),c.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,n,o,null)}window.pzaMapManager.removeRowIceGround(this.baseData.yIndex);for(var i=0;i<=8;i++)window.pzaMapManager.removeLadder(i,this.baseData.yIndex);p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var r=window.pzazombieManager.zombieDatas[this.baseData.yIndex],h=Array.from(r);null!=window.pzazombieManager.drZomBoss&&h.push(window.pzazombieManager.drZomBoss.baseData),h.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);a.baseData.plantData.adClearPlant?e&&e.hurt(u.pzaGameState.adCherryBoomDmg,a.baseData,d.pzaAttackType.BOOM):e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==s.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(l.pzaBuffType.FROST),t.buffData.removeBuff(l.pzaBuffType.FROZEN))}})},t.prototype.flaserDeath=function(){var a=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},i([f],t)}(h.pzaBasePlant));e.pzaJalapeno=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaJarBody:[function(a,t,e){"use strict";cc._RF.push(t,"cfe8faavQVIrbpwT69qPorB","pzaJarBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJarBody=void 0;var r=a("../Common/pzaCollisionManager"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jar=null,t}return n(t,a),t.prototype.enable=function(a){this.jar=a,r.pzaCollisionManager.getInstance.addJarByRow(this.jar.jarData.yIndex,this),this.node.active=!0},t.prototype.disable=function(){this.jar&&r.pzaCollisionManager.getInstance.delJarByRow(this.jar.jarData.yIndex,this),this.node&&this.node.isValid&&(this.node.active=!1)},t.prototype.onCollisionEnter=function(a,t){this.jar.onCollision(a,t)},t.prototype.getCollider=function(){if(!this.node||!this.node.isValid)return null;var a=this.node.getComponent(cc.Collider);return a.poSource=this.node.parent,a},i([l],t)}(cc.Component));e.pzaJarBody=s,cc._RF.pop()},{"../Common/pzaCollisionManager":"pzaCollisionManager"}],pzaJarData:[function(a,t,e){"use strict";var o;cc._RF.push(t,"ea249E7+LRBV62siD2HgrTy","pzaJarData"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJarData=e.pzaJarType=void 0,function(a){a[a.BRONZE_JAR=1]="BRONZE_JAR",a[a.GREEN_JAR=2]="GREEN_JAR",a[a.ZOMBIE_JAR=3]="ZOMBIE_JAR"}(o=e.pzaJarType||(e.pzaJarType={}));e.pzaJarData=function(a,t){this.xIndex=-1,this.yIndex=-1,this.jarType=o.BRONZE_JAR,this.plantType=null,this.zombieType=null,this.hasColli=!1,this.isLighted=!1,this.isSunLight=!1,this.xIndex=a,this.yIndex=t},cc._RF.pop()},{}],pzaJar:[function(a,t,e){"use strict";cc._RF.push(t,"9907b58JHRK+JGjaWAfcmxM","pzaJar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJar=void 0;var r=a("../Common/pzaBaseComponent"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaSpineController"),s=a("../Common/pzaSpriteFrameManager"),c=a("../Load/pzaBundleObjectPool"),u=a("../Load/pzaPreLoadManager"),d=a("../utils/pzakc"),h=a("./Data/pzaJarData"),m=a("./Effect/pzaDropPlantCard"),f=a("./Zombie/pzaGargantuar"),z=a("./pzaJarBody"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jar=null,t.collider=null,t.content=null,t.jarData=null,t.dropPlantCall=null,t.isHit=!1,t.isBang=!1,t.lightZombieScaleMap=new Map([[1,.4],[26,.4]]),t}return n(t,a),t.prototype.onDisable=function(){this.lightOff(),a.prototype.onDisable.call(this)},t.prototype.init=function(a,t){this.jarData=a,this.dropPlantCall=t,this.jarData.jarType==h.pzaJarType.BRONZE_JAR?(this.jar.setAnimationSkin("skin1"),this.jar.playAnimation("idle1",!0)):this.jarData.jarType==h.pzaJarType.GREEN_JAR?(this.jar.setAnimationSkin("skin2"),this.jar.playAnimation("idle1",!0)):this.jarData.jarType===h.pzaJarType.ZOMBIE_JAR&&(this.jar.setAnimationSkin("skin3"),this.jar.playAnimation("idle1",!0));var e=10*-a.yIndex;this.node.zIndex=e,this.jarData.hasColli&&this.collider.enable(this),this.isHit=!1,this.isBang=!1,this.jarData.isLighted&&this.lighted()},t.prototype.lightOff=function(){this.jar.playAnimation("idle1",!0),d.default.removeNodeChildren(this.content)},t.prototype.lighted=function(){var a=this;if(!this.isBang)if(this.jar.playAnimation("idle2",!0),d.default.removeNodeChildren(this.content),null!=this.jarData.zombieType){var t=new cc.Node,e=t.addComponent(cc.Sprite);s.pzaSpriteFrameManager.loadZombieCard(this.jarData.zombieType,e),t.parent=this.content,t.y=50,t.scale=this.lightZombieScaleMap.get(this.jarData.zombieType)||.6}else null!=this.jarData.plantType?c.pzaBundleObjectPool.requestInstantByUrl(u.pzaResourceUrl.DROP_PLANT_CARD,!1,function(t,e){if(null==t&&null!=e){e.scale=.6;var o=e.getComponent(m.pzaDropPlantCard);e.setParent(a.content),o&&o.show(a.jarData.plantType,cc.v2(0,10),!1)}else console.error(t)}):this.jarData.isSunLight&&c.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/BattleUI/sun",function(t,e){if(null==t&&null!=e){var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=e,o.scale=.8,o.parent=a.content,o.setPosition(0,55)}else console.error(t)})},t.prototype.bang=function(){var a=this;if(!this.isBang){if(this.isBang=!0,this.collider.disable(),window.pzaplantManager.pzaJarMap.delete(""+this.jarData.xIndex+this.jarData.yIndex),p.pzaSoundManager.playAudio("bangjar"),d.default.removeNodeChildren(this.content),null!=this.jarData.zombieType){var t=window.pzazombieManager.createFixBlockZombieData(this.jarData.zombieType,this.jarData.xIndex,this.jarData.yIndex);window.pzazombieManager.createZombie(t,!1)}else null!=this.jarData.plantType?this.dropPlantCall&&this.dropPlantCall(this.jarData.plantType):this.jarData.isSunLight&&window.pzaplantManager.plantCreateSun(this.node.getPosition(),!0,d.default.randomPick([25,50,75],1)[0]);this.jar.playAnimation("blow",!1,function(){if(a.close(),window.pzaplantManager.pzaJarMap.size<=0){var t=0;if(window.pzazombieManager.zombieDatas.forEach(function(a){t+=a.size}),t>0)return}})}},t.prototype.pauseSelf=function(){this.jar.pauseAnimation()},t.prototype.resumeSelf=function(){this.jar.resumeAnimation()},t.prototype.onCollision=function(a){if(!this.isHit){var t=a.node.parent.getComponent(f.pzaGargantuar);t&&(t.baseData.yIndex!==this.jarData.yIndex||a.node.parent.x<this.node.x||(this.isHit=!0,this.collider.disable(),t.attackJar(this)))}},i([b({displayName:"\u7f50\u5b50\u52a8\u753b",type:l.pzaSpineController})],t.prototype,"jar",void 0),i([b(z.pzaJarBody)],t.prototype,"collider",void 0),i([b(cc.Node)],t.prototype,"content",void 0),i([g],t)}(r.pzaBaseComponent);e.pzaJar=v,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzakc":"pzakc","./Data/pzaJarData":"pzaJarData","./Effect/pzaDropPlantCard":"pzaDropPlantCard","./Zombie/pzaGargantuar":"pzaGargantuar","./pzaJarBody":"pzaJarBody"}],pzaKDefine:[function(a,t,e){"use strict";cc._RF.push(t,"3240ehvR6hL063gjjpfAYyj","pzaKDefine"),Object.defineProperty(e,"__esModule",{value:!0}),e.State=e.FavSpine=e.Pet=e.PropFrom=e.TokenType=e.BuffType=e.AudioName=e.PhoneType=e.NextEventType=e.Msg=void 0,function(a){a.showIosAlert="showIosAlert",a.favUpgrade="favUpgrade",a.showPrivacy="showPrivacy",a.closeLoading="closeLoading",a.step1done="step1done",a.step2done="step2done",a.step3done="step3done",a.step4done="step4done",a.mainRoundStart="mainRoundStart",a.propSet="propSet",a.propUpdate="propUpdate",a.plotChoose="plotChoose",a.spPlotChoose="spPlotChoose",a.talkChoose="talkChoose",a.addBuff="addBuff",a.onClick="onClick",a.toTalk="toTalk",a.adGet="adGet",a.addGem="addGem",a.addSoul="addSoul",a.addProp="addProp",a.addTreasure="addTreasure",a.addEffectTxt="addEffectTxt",a.showDiary="showDiary",a.addDrug="addDrug",a.gameOver="gameOver",a.gameOverBackMain="gameOverBackMain",a.miniGameOver="miniGameOver",a.selectTreasure="selectTreasure",a.abortBuy="abortBuy",a.battleEnd="battleEnd",a.sellTr="sellTr",a.sellDrug="sellDrug",a.propItemClick="propItemClick",a.gemAdd="gemAdd",a.djUpgrade="djUpgrade",a.petUpgrade="petUpgrade",a.tokenUse="tokenUse",a.tokenNotUse="tokenNotUse",a.selectTitle="selectTitle",a.getTitle="getTitle",a.allSoundLoaded="allSoundLoaded",a.lateLoaed="lateLoaed",a.phoneAlertDone="phoneAlertDone",a.recorderStart="recorderStart",a.recorderStop="recorderStop",a.recorderFail="recorderFail",a.recorderDone="recorderDone",a.showQA="showQA",a.showDrugBuy="showDrugBuy",a.dateSuc="dateSuc",a.dateFail="dateFail",a.videoSuc="videoSuc",a.shareMaxTimes="shareMaxTimes"}(e.Msg||(e.Msg={})),function(a){a[a.none=0]="none",a[a.checkDating=1]="checkDating",a[a.contacts=2]="contacts",a[a.jump=3]="jump",a[a.choose=4]="choose",a[a.trBuy=5]="trBuy",a[a.drugBuy=6]="drugBuy",a[a.diary=7]="diary",a[a.qa=8]="qa",a[a.petUpgrade=9]="petUpgrade",a[a.dead=10]="dead"}(e.NextEventType||(e.NextEventType={})),function(a){a[a.msg=1]="msg",a[a.social=2]="social",a[a.talk=3]="talk",a[a.dating=4]="dating"}(e.PhoneType||(e.PhoneType={})),function(a){a.bgm="bgm",a.wx="wx",a.main_bgm="main_bgm",a.click="click",a.upgrade="upgrade"}(e.AudioName||(e.AudioName={})),function(a){a.base="base",a.trBase="trBase",a.addWhenSub="addWhenSub",a.addWhenAdd="addWhenAdd",a.special="special"}(e.BuffType||(e.BuffType={})),function(a){a.trRefreshToken="trRefreshToken",a.petRefreshToken="petRefreshToken"}(e.TokenType||(e.TokenType={})),function(a){a.tr="tr",a.pet="pet",a.title="title",a.event="event",a.init="init",a.fav="fav",a.qa="qa",a.xingGe="xingGe",a.drug="drug"}(e.PropFrom||(e.PropFrom={})),function(a){a.tiger="\u767d\u864e",a.rosefinch="\u6731\u96c0"}(e.Pet||(e.Pet={})),function(a){a.J1="role1",a.J2="role2",a.J3="role3"}(e.FavSpine||(e.FavSpine={})),function(a){a.idle="idle",a.init="init",a.normal="normal",a.move="move",a.moving="moving",a.play="play",a.stop="stop",a.pause="pause",a.hurt="hurt",a.hurting="hurting",a.dead="dead",a.deading="deading",a.lock="lock",a.run="run",a.runing="runing"}(e.State||(e.State={})),cc._RF.pop()},{}],pzaKernelPult:[function(a,t,e){"use strict";cc._RF.push(t,"a554b9cVXhM/bC6YEkbOSS+","pzaKernelPult");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaKernelPult=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaThrowBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.cornBulletPrefab=null,t.butterBulletPrefab=null,t.blinkTime=3,t.butterBullet=!1,t.atk1AniTime=1.4,t.atk2AniTime=1.4,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.kernelPultInit()},t.prototype.kernelPultInit=function(){if(this.node.zIndex=10*-this.baseData.yIndex-1,this.butterBullet=!1,d.pzaGameState.isZombieMode())return this.attacking=!1,this.atk1AniTime=this.animation.getAnimationDuration("T_attack1"),this.atk2AniTime=this.animation.getAnimationDuration("T_attack2"),void this.animation.playAnimation("T_idle1",!0);this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atk1AniTime=this.animation.getAnimationDuration("attack1"),this.atk2AniTime=this.animation.getAnimationDuration("attack2"),d.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()){var o=this.findAttackTarget();if(null!=o)return this.attacking=!0,void(this.butterBullet?(l.pzaSoundManager.playAudio("kernelpult"),this.animation.playAnimation("T_attack2",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle1",!0)},function(){e.attack(o)},this.atk2AniTime/this.atkInterval)):(l.pzaSoundManager.playAudio("kernelpult"),this.animation.playAnimation("T_attack1",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle1",!0)},function(){e.attack(o)},this.atk1AniTime/this.atkInterval)))}},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();null==e?a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t)):a.butterBullet?(l.pzaSoundManager.playAudio("kernelpult"),a.animation.playAnimation("attack2",!1,t,function(){a.attack(e)},a.atk2AniTime/a.atkInterval)):(l.pzaSoundManager.playAudio("kernelpult"),a.animation.playAnimation("attack1",!1,t,function(){a.attack(e)},a.atk1AniTime/a.atkInterval))};t()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(u.pzaBuffType.FLY)&&!o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)&&!o.buffData.hasBuff(u.pzaBuffType.DIVE)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){o.x-=15;var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.butterBullet?this.butterBulletPrefab:this.cornBulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var s=this.butterBullet?cc.v2(l.x+this.baseData.logicPos.x+15,l.y+this.baseData.logicPos.y+57):cc.v2(l.x+this.baseData.logicPos.x+8,l.y+this.baseData.logicPos.y+48);i.setPosition(s);var u=i.getComponent(c.pzaThrowBullet);null!=u&&(u.init(!1,this.baseData.yIndex,this.butterBullet?40:this.baseData.atk,a,n),u.updateBulletAngel(this.butterBullet?90:50),this.butterBullet&&(u.hasImmobilize=!0),this.butterBullet=Math.random()<=.25)}}}}}},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u7389\u7c73\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cornBulletPrefab",void 0),i([z({displayName:"\u9ec4\u6cb9\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"butterBulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaKernelPult=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaKnockMiniGame:[function(a,t,e){"use strict";cc._RF.push(t,"98c84tgsCdGFqjTDhs5Kej4","pzaKnockMiniGame");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaKnockMiniGame=void 0;var r=a("../Battle/Data/pzaBuffData"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Battle/Data/pzaZombieEnum"),s=a("../Battle/pzaGameState"),c=a("../Load/pzaBundleObjectPool"),u=a("../View/pzaCommonMask"),d=a("../utils/pzaChannel"),h=a("../utils/pzakc"),m=a("./pzaCollisionManager"),f=a("./pzaGameConfig"),z=a("./pzaGameManager"),y=a("./pzaGameMiniGame"),g=a("./pzaLocalData"),b=a("./pzaSoundManager"),v=a("./pzaStatisticsMgr"),P=a("./pzaUIManager"),D=a("./pzaUtil"),S=a("./pzaWorldEventManager"),C=cc._decorator,_=C.ccclass,E=(C.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.waveZombieDensity=null,t}var e;return n(t,a),e=t,t.prototype.preLoad=function(a,t,o){this.init();var n=z.pzaGameManager.getGame(s.pzaGameMode.KNOCK_ZOMBIE,e).getConf(t);s.pzaGameState.init(a,t,this.gameMode,this.skipPartStar(),n.initSun,n.isnight,n.mapId),this.beforeLoad(a,t),s.pzaGameState.isGameEnd=!1,m.pzaCollisionManager.getInstance.setOn();var i=this.getResArr(a,t);P.pzaUIManager.showLoading(),this.initMapPlantZombie(a,t),b.pzaSoundManager.clearAllLoopAudio(),this.readData(a,t),c.pzaBundleObjectPool.preLoadSubResource(i,function(){P.pzaUIManager.hideLoading(o)},function(a){P.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*a)))}),s.pzaGameState.autoPickLock=!1},t.prototype.gameStart=function(t,e){a.prototype.resetTryPlant.call(this),g.pzaLocalData.gameStartTimeStamp=Date.now();var o=400+e;v.pzaStatisticsMgr.sendLevelEvent(e,2,0,0,s.pzaGameMode.KNOCK_ZOMBIE),h.default.eventReport(o+"\u5173\u5361\u8fdb\u5165"),this.beforeGameStart(t,e),s.pzaGameState.sunLightCount=0,window.pzaMapManager.initMapPos(!1),s.pzaGameState.gameMode=s.pzaGameMode.KNOCK_ZOMBIE,u.pzaCommonMask.hideMask(),window.pzaMapManager.miniGameinitMapTomb(function(){window.pzaMapManager.initCleanCar(),window.pzaMapManager.openBattleUI(),window.pzaMapManager.hideSunUI(),s.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2,b.pzaSoundManager.playBgm(b.pzaBGMName.BOWLING_BGM)})},t.prototype.refreshNextWave=function(a,t){var o=this;if(a.curWaveTime+=t,a.nextWaveTime-=t,!(a.lastWave||a.nextWaveTime>0)){a.wave++,S.pzaWorldEventManager.triggerEvent(S.pzaWorldEventType.UPDATE_PART_PRO,null),1==a.wave&&b.pzaSoundManager.playAudio("awooga"),a.curWaveTime=0,a.preRefreshHp=0,a.hasShowRedTip=!1;var n=z.pzaGameManager.getGame(s.pzaGameMode.KNOCK_ZOMBIE,e),i=n.getConf(s.pzaGameState.curPart);if(!(null==n||null==i||i.maxWave<a.wave)){i.maxWave==a.wave&&(a.lastWave=!0);var p=window.pzaMapManager.TombSet.size;if(this.waveZombieDensity=this.getConf(s.pzaGameState.curPart).waveZombieDensity,0==this.waveZombieDensity[a.wave]){a.nextWaveTime=2;var l=1;return p<5&&(l=5-p),window.pzaMapManager.randomCreateTomb(l),void(i.maxWave==a.wave+1&&a.showBigWaveTip(!0,!0))}if(a.nextWaveTime=1.4,0==p)return a.wave--,void window.pzaMapManager.randomCreateTomb(5);var c=this.getRandomWaveZombie(a.wave,!1,window.pzaMapManager.getIceYCount());if(null!=c){var u=Math.min(.4,.05*a.wave);if(a.lastWave)window.pzaMapManager.TombMap.forEach(function(t){if(null!=t&&null!=t.xIndex&&null!=t.yIndex&&!window.pzaplantManager.hasPlant(t.xIndex,t.yIndex)){var e=o.getRandomTombZombie(),n=a.createFixBlockZombieData(e,t.xIndex,t.yIndex);Math.random()<=u&&n.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.SPEED_UP,-1,3)),a.createZombie(n,!1,!0)}});else{var d=[];window.pzaMapManager.TombMap.forEach(function(a){null!=a&&null!=a.xIndex&&null!=a.yIndex&&(window.pzaplantManager.hasPlant(a.xIndex,a.yIndex)||d.push(a))});for(var h=D.pzaUtil.getRandomArrayValue(d,c.length),m=0;m<c.length;m++){var f=h[m];if(null!=f&&null!=f.xIndex&&null!=f.yIndex){var y=a.createFixBlockZombieData(c[m],f.xIndex,f.yIndex);Math.random()<=u&&y.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.SPEED_UP,-1,3)),a.createZombie(y,!1,!0)}}}}}}},t.prototype.getRandomWaveZombie=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[];if(this.waveZombieDensity=this.getConf(s.pzaGameState.curPart).waveZombieDensity,null==this.waveZombieDensity||a-1<0)return[l.pzaZombieEnum.ZOMBIE];var r=this.waveZombieDensity[a-1];if(null==r||r<=1)return[l.pzaZombieEnum.ZOMBIE];if(t&&a%10==0){i.push(l.pzaZombieEnum.FLAG_ZOMBIE),r-=f.pzaGameConfig.getZombieLevel(l.pzaZombieEnum.FLAG_ZOMBIE);for(var p=Math.min(Math.floor(r/2),8),c=0;c<p;c++)i.push(l.pzaZombieEnum.ZOMBIE),r-=f.pzaGameConfig.getZombieLevel(l.pzaZombieEnum.ZOMBIE)}var u=this.getConf(s.pzaGameState.curPart),d=u.maxWave,h=u.zombieTypes;for(a==d&&a>=10&&h.forEach(function(a){a!=l.pzaZombieEnum.ZOMBIE&&(i.push(a),r-=f.pzaGameConfig.getZombieLevel(a))});r>0;){var m=this.getRandomZombie1(r,a,e,o,n);if(null==m)break;if(m==l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?e--:m==l.pzaZombieEnum.RED_GARGANTUAR&&a%10!=0&&n--,i.push(m),i.length>=50)break;r-=f.pzaGameConfig.getZombieLevel(m)}return i},t.prototype.getRandomZombie1=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[],r=[];if(this.getConf(s.pzaGameState.curPart).zombieTypes.forEach(function(e){if(null!=e){var p=f.pzaGameConfig.getZombieConfig(e);null==p||0==p.refrshWeight||p.refreshLevel>a||p.refrshMinWave>t||o>0&&e==l.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&t%10!=0||(i.push(e),r.push(p.refrshWeight))}}),e>0){var p=f.pzaGameConfig.getZombieConfig(l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM);null!=p&&p.refreshLevel<=a&&(i.push(l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),r.push(p.refrshWeight))}var c=D.pzaUtil.getRandomIndexByWeight(r);return i[c]},t.prototype.lastTombWaterZombie=function(a){var t=this;window.pzaMapManager.TombMap.forEach(function(e){if(null!=e&&null!=e.xIndex&&null!=e.yIndex&&!window.pzaplantManager.hasPlant(e.xIndex,e.yIndex)){var o=t.getRandomTombZombie(),n=a.createFixBlockZombieData(o,e.xIndex,e.yIndex);a.createZombie(n,!1,!0),a.curWaveZombieDatas.add(n)}})},t.prototype.getRandomTombZombie=function(){var a=[l.pzaZombieEnum.ZOMBIE,l.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,l.pzaZombieEnum.CONE_HEAD_ZOMBIE],t=[],e=this.getConf(s.pzaGameState.curPart).zombieTypes;return a.forEach(function(a){if(e.includes(a)){var o=f.pzaGameConfig.getZombieConfig(a);t.push(o.refrshWeight)}}),a[D.pzaUtil.getRandomIndexByWeight(t)]},t.prototype.onZombieDeath=function(a,t,e){if(Math.random()<=.1)for(var o=0;o<3;o++)window.pzaplantManager.plantCreateSun(cc.v2(t.logicPos.x+30*(o-1),t.logicPos.y),!0,!0);e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)&&z.pzaGameManager.passPart(t.logicPos)},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1,t.skipPartBtn.active=!1,t.freePlantNode.active=!0,t.speedBtn.active=!0},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=!1,d.pzaChannel.isConfRemote?a.cherryBombNode.active=!0:a.cherryBombNode.active=!1,a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.isLastWave=function(a){var t=z.pzaGameManager.getGame(s.pzaGameMode.KNOCK_ZOMBIE,e).getConf(s.pzaGameState.curPart);return a.wave==t.maxWave},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=z.pzaGameManager.getGame(s.pzaGameMode.KNOCK_ZOMBIE,e).getConf(s.pzaGameState.curPart);a.maxWave=t.maxWave;for(var o=0;o<a.partFlags.length;o++)a.partFlags[o].active=!1;a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0;var n=this.getConf(s.pzaGameState.curPart);a.partLabel.string=n.name+""},t.prototype.getAdPlantArr=function(){return[p.pzaPlantEnum.GATLING_PEA,p.pzaPlantEnum.GLOOM_SHROOM,p.pzaPlantEnum.WINTER_MELON,p.pzaPlantEnum.GOLD_MAGNET,p.pzaPlantEnum.SPIKEROCK,p.pzaPlantEnum.COB_CANNON]},e=i([_],t)}(y.pzaGameMiniGame));e.pzaKnockMiniGame=E,cc._RF.pop()},{"../Battle/Data/pzaBuffData":"pzaBuffData","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCollisionManager":"pzaCollisionManager","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGameMiniGame":"pzaGameMiniGame","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaLadderZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"0ca92P8p5NC5LHQ55T04dbj","pzaLadderZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLadderZombie2=void 0;var r=a("../Data/pzaZombieEnum"),p=a("./pzaZombieSlot"),l=a("./pzaLadderZombie"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName=null,t.equip1Slot=p.pzaZombieSlotType.ladder,t.equip2Slot=p.pzaZombieSlotType.hat,t.hatSlotMap=new Map([[r.pzaZombieEnum.LADDER_ZOMBIE2,{slotName:p.pzaZombieSlotType.hat,attNameArr:["1hat1","1hat2","1hat3"],arr1:[84.14,13.12,-77.7],arr2:[67.58,9.51,-77.7],arr3:[54.92,6.93,-77.7]}],[r.pzaZombieEnum.LADDER_ZOMBIE3,{slotName:p.pzaZombieSlotType.hat,attNameArr:[p.pzaZombieSlotType.hat_iron+"1",p.pzaZombieSlotType.hat_iron+"2",p.pzaZombieSlotType.hat_iron+"3"],arr1:[107.2,6.54,-77.7],arr2:[105.32,6.02,-77.7],arr3:[102.68,-.91,-77.7]}]]),t.headSlotMap=new Map([[r.pzaZombieEnum.LADDER_ZOMBIE4,{slotName:p.pzaZombieSlotType.head_nut,attNameArr:[p.pzaZombieSlotType.head_nut+"1",p.pzaZombieSlotType.head_nut+"2",p.pzaZombieSlotType.head_nut+"3"],arr1:[0,0,0],arr2:[0,0,0],arr3:[0,0,0]}]]),t}return n(t,a),t.prototype.initEquips=function(){if(this.baseData&&this.baseData.zombieData){var a=this.hatSlotMap.get(this.baseData.zombieData.zombieType);a?this.equip2Slot=p.pzaZombieSlotType.hat:(a=this.headSlotMap.get(this.baseData.zombieData.zombieType),this.equip2Slot=p.pzaZombieSlotType.head_nut),this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[p.pzaZombieSlotType.ladder,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.ladder).addState(new p.pzaZombieSlotAtt(1,"14pr1",-79.61,21.35)).addState(new p.pzaZombieSlotAtt(2,"14pr2",-79.61,21.35)).addState(new p.pzaZombieSlotAtt(3,"14pr3",-79.61,21.35)).addState(new p.pzaZombieSlotAtt(4,"14pr4",-79.61,21.35))]]),this.slotMap.set(a.slotName,new p.pzaZombieSlot(this.animation.spineAnimation,a.slotName).addState(new p.pzaZombieSlotAtt(1,a.attNameArr[0],a.arr1[0],a.arr1[1],a.arr1[2])).addState(new p.pzaZombieSlotAtt(2,a.attNameArr[1],a.arr2[0],a.arr2[1],a.arr2[2])).addState(new p.pzaZombieSlotAtt(3,a.attNameArr[2],a.arr3[0],a.arr3[1],a.arr3[2])))}},t.prototype.bindData=function(t){this.baseData=t,this.initEquips(),a.prototype.bindData.call(this,t),this.baseData.zombieData.hurtCate=r.pzaZombieHurtCate.Null},i([c],t)}(l.pzaLadderZombie));e.pzaLadderZombie2=u,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","./pzaLadderZombie":"pzaLadderZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaLadderZombie:[function(a,t,e){"use strict";cc._RF.push(t,"1da57fq0vhB656A46n7VtJx","pzaLadderZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLadderZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaGameState"),d=a("./pzaBaseZombie"),h=a("./pzaZombieState"),m=a("./pzaZombieSlot"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=m.pzaZombieSlotType.ladder,t.putting=!1,t.directThrowHurt=!0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,56.23,16.3,-84.22))],[m.pzaZombieSlotType.ladder,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.ladder).addState(new m.pzaZombieSlotAtt(1,"14pr1",-79.61,21.35)).addState(new m.pzaZombieSlotAtt(2,"14pr2",-79.61,21.35)).addState(new m.pzaZombieSlotAtt(3,"14pr3",-79.61,21.35)).addState(new m.pzaZombieSlotAtt(4,"14pr4",-79.61,21.35))]])},t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.putting=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE_PEA,-1)),this.baseData.zombieData.hurtCate=c.pzaZombieHurtCate.PENETRATE_HURT,t.zombieData.cate=c.pzaZombieCate.Ladder},t.prototype.attack=function(t,e){if(!this.putting){if(this.hasEquip&&null!=e&&null!=e.plantData){var o=!1;if(e.plantData.cate===s.pzaPlantCate.Nut&&(o=!0),!o){var n=""+e.xIndex+e.yIndex;window.pzaplantManager.pumpkinDataMap.get(n)&&(o=!0)}if(o)return void this.putLadder(e.xIndex,e.yIndex)}a.prototype.attack.call(this,t,e)}},t.prototype.updateMove=function(t){this.putting||a.prototype.updateMove.call(this,t)},t.prototype.putLadder=function(a,t){var e=this;this.hasEquip=!1,this.baseData.zombieData.equipHp=0,this.baseData.zombieData.equipType=c.pzaEquipType.NO_EQUIP,this.putting=!0,this.animation.playAnimation("put",!1,function(){e.equipDeath(!1),window.pzaMapManager.createLadder(a,t,function(){e&&e.body&&(e.putting=!1,e.body.curTarget=null,p.pzaSoundManager.playAudio("ladder_zombie"))})})},t.prototype.equipDeath=function(){if(this&&this.baseData&&!this.baseData.isDead){if(a.prototype.equipDeath.call(this,!1),null!=this.baseData&&null!=this.baseData.zombieData){var t=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/t}this.playMoveAnimation(),this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_ICE_PEA)}},t.prototype.getMoveAniName=function(){return this.hasEquip?"move":"move2"},t.prototype.getAttackAniName=function(){return this.hasEquip?"attack":"attack2"},t.prototype.zombieHurtSound=function(t){this.hasEquip?p.pzaSoundManager.playAudio("ladderHurt"):a.prototype.zombieHurtSound.call(this,t)},t.prototype.changeMapRow=function(){var a=this;this.zombieState=h.pzaZombieState.EAT_ATK,this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.GARLIC,-1));var t=this.hasEquip?"attack1":"attack2";this.animation.playAnimation(t,!1,null,function(){if(a.baseData.buffData.removeBuff(l.pzaBuffType.GARLIC),Math.random()>.5){var t=a.changeToUpRow();a.changeTargetRow=t?a.baseData.yIndex+1:a.baseData.yIndex-1}else t=a.changeToDownRow(),a.changeTargetRow=t?a.baseData.yIndex-1:a.baseData.yIndex+1;var e=10*-a.changeTargetRow+5;a.node.zIndex=e})},i([z],t)}(d.pzaBaseZombie));e.pzaLadderZombie=y,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaLadder:[function(a,t,e){"use strict";cc._RF.push(t,"7842fvV5qpEkYd8Jnh+OIgm","pzaLadder");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLadder=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.atlasSpine=null,t.poolPrefab=null,t.xIndex=-1,t.yIndex=-1,t.logicPos=null,t}return n(t,a),t.prototype.init=function(a,t,e){this.xIndex=a,this.yIndex=t,this.logicPos=e;var o=10*-t+2;this.node.zIndex=o},t.prototype.logicUpdate=function(){var a=""+this.xIndex+this.yIndex;window.pzaplantManager.plantDataMap.has(a)||window.pzaplantManager.pumpkinDataMap.has(a)||window.pzaMapManager.removeLadder(this.xIndex,this.yIndex)},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([c(sp.Skeleton)],t.prototype,"atlasSpine",void 0),i([c(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaLadder=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaLaserBean:[function(a,t,e){"use strict";cc._RF.push(t,"09d086Hq+hJmqQK5tKZqUF3","pzaLaserBean");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLaserBean=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../pzaGameState"),c=a("./pzaAttackType"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.attackCD=0,t.specialAtkCD=0,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.baseData.plantData.atkInterval=2.9,this.playNormalAni()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.attackCD-=t,this.specialAtkCD-=t)},t.prototype.playNormalAni=function(){var a=this,t=function(){a.attackTarget(t)||(a.animation.node.scaleX=1,a.animation.playAnimation("idle",!1,t,null,1.6))};this.attackTarget(t)||this.animation.playAnimation("idle",!1,t,null,1.6)},t.prototype.attackTarget=function(a){var t=this;if(this.attackCD>0)return!1;var e=this.getCanAttackZombies(this.baseData,0,s.pzaGameState.map.getMapColumn()-1);if(e&&e.length>0){var o=p.pzaUtil.getRandomFloatNum(0,1),n=this.baseData.atk,i="attack1",l=1;.05>=o&&this.specialAtkCD<=0&&(n=400,i="attack2",l=1.8,this.specialAtkCD=20),"attack1"==i?r.pzaSoundManager.playAudio("laserNormal"):r.pzaSoundManager.playAudio("laserSpecial");var c=0,u=this;return this.animation.playAnimation(i,!1,a,function(){if(null==u.baseData||u.baseData.isDead)return!0;"attack2"==i&&(0==c?e=t.getCanAttackZombies(t.baseData,0,2):1==c?e=t.getCanAttackZombies(t.baseData,3,5):2==c&&(e=t.getCanAttackZombies(t.baseData,6,8))),c++,u.hurtZombies(e,n),u.attackCD=u.baseData.plantData.atkInterval},l),!0}},t.prototype.hurtZombies=function(a,t){var e=this;void 0===t&&(t=this.baseData.atk),null!=a&&a.forEach(function(a){if(null!=e.baseData){var o=window.pzazombieManager.getZombie(a);o&&o.hurt(t,e.baseData,c.pzaAttackType.FLOOR_ASHES_ATK)}})},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this)},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this)},t.prototype.getCanAttackZombies=function(a,t,e){if(null==a||null==a.logicPos)return null;var o=[];return window.pzazombieManager.zombieDatas[a.yIndex].forEach(function(n){!n||!n.logicPos||n.logicPos.x<a.logicPos.x||n.buffData.hasBuff(l.pzaBuffType.DIVE)||n.buffData.hasBuff(l.pzaBuffType.FLY)||n.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||!(n.xIndex<=-1)&&a.xIndex+t<=n.xIndex&&a.xIndex+e>=n.xIndex&&o.push(n)}),o},i([h],t)}(u.pzaBasePlant));e.pzaLaserBean=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaLayeredAssembler:[function(a,t,e){"use strict";cc._RF.push(t,"2605eL/qGtPLZGTchPI+EoK","pzaLayeredAssembler");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var r=cc.RenderFlow.FLAG_RENDER|cc.RenderFlow.FLAG_POST_RENDER,p=cc.RenderFlow.FLAG_OPACITY|cc.RenderFlow.FLAG_WORLD_TRANSFORM,l=!0,s=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.fillBuffers=function(t,e){var o,n;if(a.prototype.fillBuffers.call(this,t,e),l){var s=[];this._layers=[s];var c=(e.worldMatDirty?cc.RenderFlow.FLAG_WORLD_TRANSFORM:0)|(e.parentOpacityDirty?cc.RenderFlow.FLAG_OPACITY_COLOR:0);t.node.__gtDirtyFlag=c;var u=[];u.push(t.node);for(var d,h=1,m=0;m<u.length;){var f=u[m++];c=f.__gtDirtyFlag;try{for(var z=(o=void 0,i(f.children)),y=z.next();!y.done;y=z.next()){var g=y.value;g._activeInHierarchy&&0!==g._opacity&&((d=g._renderFlag&r)>0&&(g.__gtRenderFlag=d,g._renderFlag&=~d,s.push(g)),g.__gtDirtyFlag=c|g._renderFlag&p,u.push(g))}}catch(b){o={error:b}}finally{try{y&&!y.done&&(n=z.return)&&n.call(z)}finally{if(o)throw o.error}}m==h&&(h=u.length,s=[],this._layers.push(s))}}},t.prototype.postFillBuffers=function(a,t){var e,o,n,r,p=t.worldMatDirty;if(l&&this._layers){var s,c;l=!1;try{for(var u=i(this._layers),d=u.next();!d.done;d=u.next()){var h=d.value;if(0!=h.length)try{for(var m=(n=void 0,i(h)),f=m.next();!f.done;f=m.next()){var z=f.value;s=z.__gtRenderFlag,c=z.__gtDirtyFlag,t.worldMatDirty=c>0?1:0,z._renderFlag|=s,cc.RenderFlow.flows[s]._func(z)}}catch(y){n={error:y}}finally{try{f&&!f.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}}}catch(g){e={error:g}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(e)throw e.error}}this._layers=null,l=!0,t.worldMatDirty=p}},t}(cc.Assembler);e.default=s,cc._RF.pop()},{}],pzaLayeredRootSprite:[function(a,t,e){"use strict";cc._RF.push(t,"20f3aEs40NPYZXiSjoceFHQ","pzaLayeredRootSprite");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaLayeredAssembler"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.node._renderFlag|=cc.RenderFlow.FLAG_POST_RENDER},t.prototype._resetAssembler=function(){this.setVertsDirty(),(this._assembler=new r.default).init(this)},i([l],t)}(cc.Sprite));e.default=s,cc._RF.pop()},{"./pzaLayeredAssembler":"pzaLayeredAssembler"}],pzaLilyFlowerPot:[function(a,t,e){"use strict";cc._RF.push(t,"a86d8aZovlF05y+3BE0IqgZ","pzaLilyFlowerPot");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLilyFlowerPot=void 0;var r=a("../../Common/pzaMapManager"),p=a("../pzaGameState"),l=a("./pzaFlowerPot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.onWater=!1,t.up=!0,t.stayTime=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),p.pzaGameState.usePondPlant=!0,this.baseData.plantData.canBeShoot=!1,this.onWater=window.pzaMapManager.getPlantBlockType(this.baseData.xIndex,this.baseData.yIndex)==r.pzaBlockType.POND,this.onWater?this.animation.node.y=-10:this.animation.node.y=0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.floatMove(t)},t.prototype.floatMove=function(a){this.onWater&&(this.stayTime-=a,this.stayTime>0||(this.baseData.floatY+=this.up?Math.abs(10-this.baseData.floatY)/10*.2:-.2*Math.abs(this.baseData.floatY+2)/10,this.baseData.floatY>5&&(this.up=!1),this.baseData.floatY<=0&&(this.up=!0,this.stayTime=.3)))},t.prototype.logicLateUpdate=function(){if(a.prototype.logicLateUpdate.call(this),this.onWater){var t=""+this.baseData.xIndex+this.baseData.yIndex,e=window.pzaplantManager.plantDataMap.get(t);null!=e&&(e.floatY=this.baseData.floatY+10);var o=window.pzaplantManager.pumpkinDataMap.get(t);null!=o&&(o.floatY=this.baseData.floatY+10)}},i([c],t)}(l.pzaFlowerPot));e.pzaLilyFlowerPot=u,cc._RF.pop()},{"../../Common/pzaMapManager":"pzaMapManager","../pzaGameState":"pzaGameState","./pzaFlowerPot":"pzaFlowerPot"}],pzaLilyPad:[function(a,t,e){"use strict";cc._RF.push(t,"6b830Fm1MRJB7qJldotUMJd","pzaLilyPad");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLilyPad=void 0;var r=a("../pzaGameState"),p=a("./pzaBasePlant"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.up=!0,t.stayTime=0,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.7,cc.v2(0,5)),cc.delayTime(.1),cc.moveTo(.7,cc.v2()),cc.delayTime(.1))))},t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.node.zIndex=-1,this.up=!0,this.stayTime=0,this.animation.playAnimation("idle",!1,function(){e.animation.playAnimation("idle2",!0)}),r.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.floatMove(t)},t.prototype.floatMove=function(a){this.stayTime-=a,this.stayTime>0||(this.baseData.floatY+=this.up?Math.abs(10-this.baseData.floatY)/10*.2:-.2*Math.abs(this.baseData.floatY+2)/10,this.baseData.floatY>5&&(this.up=!1),this.baseData.floatY<=0&&(this.up=!0,this.stayTime=.3))},t.prototype.logicLateUpdate=function(){a.prototype.logicLateUpdate.call(this);var t=""+this.baseData.xIndex+this.baseData.yIndex,e=window.pzaplantManager.plantDataMap.get(t);null!=e&&(e.floatY=this.baseData.floatY+6);var o=window.pzaplantManager.pumpkinDataMap.get(t);null!=o&&(o.floatY=this.baseData.floatY+6)},i([s],t)}(p.pzaBasePlant));e.pzaLilyPad=c,cc._RF.pop()},{"../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaLilyShell:[function(a,t,e){"use strict";cc._RF.push(t,"01df5cnzZFNrJf/EkU+9GG0","pzaLilyShell");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLilyShell=void 0;var r=a("../../Common/pzaMapManager"),p=a("../../Load/pzaPreLoadManager"),l=a("../Data/pzaPlantEnum"),s=a("../pzaEffectManager"),c=a("./pzaPumpkin"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.onWater=!1,t.up=!0,t.stayTime=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.onWater=window.pzaMapManager.getPlantBlockType(this.baseData.xIndex,this.baseData.yIndex)==r.pzaBlockType.POND},t.prototype.createBackEff=function(a){s.pzaEffectManager.createBackPumpkin(a,p.pzaResourceUrl.BACK_LILYSHELL)},t.prototype.death=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),a.prototype.death.call(this,t,e),window.pzaplantManager.createRandomPlant(l.pzaPlantEnum.PEALILY_PAD,this.baseData.xIndex,this.baseData.yIndex)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.floatMove(t)},t.prototype.floatMove=function(a){this.onWater&&(this.stayTime-=a,this.stayTime>0||(this.baseData.floatY+=this.up?Math.abs(3-this.baseData.floatY)/3*.2:-.2*Math.abs(this.baseData.floatY+2)/3,this.baseData.floatY>5&&(this.up=!1),this.baseData.floatY<=0&&(this.up=!0,this.stayTime=.3)))},t.prototype.logicLateUpdate=function(){if(this.onWater){a.prototype.logicLateUpdate.call(this);var t=""+this.baseData.xIndex+this.baseData.yIndex,e=window.pzaplantManager.plantDataMap.get(t);null!=e&&(e.floatY=this.baseData.floatY);var o=window.pzaplantManager.pumpkinDataMap.get(t);null!=o&&(o.floatY=this.baseData.floatY)}},i([d],t)}(c.pzaPumpkin));e.pzaLilyShell=h,cc._RF.pop()},{"../../Common/pzaMapManager":"pzaMapManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","./pzaPumpkin":"pzaPumpkin"}],pzaLocalData:[function(a,t,e){"use strict";cc._RF.push(t,"4d625P7p1FM7rUmddZZbB7E","pzaLocalData"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLocalData=e.pzaLocalBattleData=void 0;var o=a("../Battle/Data/pzaPlantEnum"),n=a("../Battle/pzaGameState"),i=a("../BattlePass/pzaBattlePassTaskMgr"),r=a("../Shop/pzaShopConfig"),p=a("../Task/pzaTaskMgr"),l=a("../utils/pzaChannel"),s=a("./pzaGamePropConfig"),c=a("./pzaUtil"),u=a("./pzaWorldEventManager"),d=function(){function a(){this.survivalBattleData=[],this.endlessBattleData=[],this.zjEndlessBattleData=[],this.zombieEndlessData=null}return a.saveSurvivalBattleData=function(a){null!=a&&(this.data.survivalBattleData[a.chapter-1]=a,this.localSaveData())},a.saveEndlessBattleData=function(a){null!=a&&(this.data.endlessBattleData[a.chapter-1]=a,this.localSaveData())},a.clearSurvivalBattleData=function(a){this.data.survivalBattleData[a-1]=null,this.localSaveData()},a.clearEndlessBattleData=function(a){this.data.endlessBattleData[a-1]=null,this.localSaveData()},a.getJsonStr=function(){return JSON.stringify(this.data)},a.fixReplace=function(a){if(a)for(var t in a)t.startsWith("_")&&(a[t.substring(1)]=a[t],delete a[t])},a.fixOldBattleData=function(t){if(t)if("Array"!==t.constructor.name)a.fixReplace(t),a.fixOldBattleData(t.plantData),a.fixOldBattleData(t.plantEnvData),a.fixOldBattleData(t.pumpkinData),a.fixOldBattleData(t.noTargetData);else for(var e=0;e<t.length;e++){var o=t[e];a.fixOldBattleData(o)}},a.readLocalData=function(){try{var t=cc.sys.localStorage.getItem(this.DATA_SAVE_KEY);if(!t)return void console.log("\u65e0battle\u5b58\u6863");var e=JSON.parse(t);if(null==e)return;e.survivalBattleData&&(this.data.survivalBattleData=e.survivalBattleData,a.fixOldBattleData(this.data.survivalBattleData)),e.endlessBattleData&&(this.data.endlessBattleData=e.endlessBattleData,a.fixOldBattleData(this.data.endlessBattleData)),e.zjEndlessBattleData&&(this.data.zjEndlessBattleData=e.zjEndlessBattleData,a.fixOldBattleData(this.data.zjEndlessBattleData)),e.zombieEndlessData&&(this.data.zombieEndlessData=e.zombieEndlessData,a.fixOldBattleData(this.data.zombieEndlessData))}catch(o){console.error(o)}},a.localSaveData=function(){var a=this.getJsonStr();cc.sys.localStorage.setItem(this.DATA_SAVE_KEY,a)},a.DATA_SAVE_KEY="pza-battle-data",a.data=new a,a}();e.pzaLocalBattleData=d;var h=function(){function a(){this.saveTime=null,this.saveId=c.pzaUtil.uuid(),this.playerNick=null,this.playerAvatar=null,this.soundValue=.8,this.musicValue=.8,this.gameSound=!0,this.lastLoginTime=null,this.curChapter=1,this.curPart=1,this.passLastPart=!1,this.passWtLastPart=!1,this.plantSlotCount=6,this.coin=0,this.adTicket=0,this.videoGetTokenCoinCount=0,this.unlockZombies=[1],this.ownPlants=[o.pzaPlantEnum.PEA_SHOOTER],this.partStar=[],this.curGuideType=null,this.firstPickCoinTip=!1,this.unlockShop=!1,this.unlockBook=!1,this.unlockAch=!1,this.unlockGarden=!1,this.unlockMoregame=!1,this.unlockSpeed=!1,this.gardenPlants=[],this.gardenToolNum={},this.gardenEnv={},this.achieves={},this.tasks={},this.gardenLastTime=0,this.snailSpeedUpTime=0,this.ownGoods=[],this.purchasedPos=[],this.gameProps=[],this.autoPickLeft=0,this.signDays=0,this.hasSign=!1,this.signDasyEnd=[],this.canMonthSign=!1,this.specailAchTime=0,this.maturePlantCount=0,this.hasGardenPlants=[],this.survivalPassChapter=0,this.survivalFlagCount=[],this.zombieTrophy=[],this.vaseTrophy=[],this.zombieFlagCount=0,this.zombieUnlock=1,this.vasePassChapter=0,this.vaseFlagCount=0,this.shareGiftRecIndex=[],this.shareBoomNutPop=!1,this.gatlingAdCount=0,this.gloomShroomAdCount=0,this.cattailAdCount=0,this.spikerockAdCount=0,this.cobCannonAdCount=0,this.winterMelonAdCount=0,this.twinsFlowerAdCnt=0,this.slot8AdCount=0,this.selectPlants=null,this.imitaterPlant=null,this.modeUsePlants=[],this.imitaterUsePlant=[],this.reachPartTime=null,this.usedRedeemCode=[],this.adShareCount=0,this.freeCoinShareCount=0,this.autoPickShareCount=0,this.newGuide=!1,this.preOpenSurvival=!1,this.openPuzzleTip=!1,this.miniUnLockCnt=[],this.miniClickFlag=!0,this.miniFirstPassArr=[],this.monthSignDays=0,this.retroSignDays=0,this.isSignInMonth=!1,this.nowMonth=0,this.weekDayTime=null,this.miniGameNewFlagArr=[[13,1],[14,1],[15,1]],this.superChomperSwFirstIn=!0,this.luckWindmillCardList=null,this.newGameLevel=5,this.saveNewGameLevel=0,this.ttRegisterState=0,this.dataVersion=0,this.saveGameDataCnt=0,this.readGameDataCnt=0,this.canRefreshState=!1,this.plantTrial={},this.hasInGame=!1,this.hasKillYeti=!1,this.weekTwoOpenTip1=!0,this.weekTwoOpenTip2=!0,this.dropPlantArr=[],this.weekTwoStartTip=!0,this.getPowerLeftTime=1800,this.power=20,this.tryPlantCountArrayNormal=[0,0,0,0,0,0,0,0],this.watchADTryPlantCountNormal=0,this.tryPlantCountArrayEndLess=[0,0,0,0,0,0,0,0],this.watchADTryPlantCountEndLess=0,this.hasBeginGift=!1,this.showBeginViewCount=0,this.showBeginViewMax=99,this.getDaveGiftCount=0,this.showDaveViewCount=0,this.showDaveViewMax=99,this.hasDaveGift=!1,this.getGardenGiftCount=0,this.showGardenViewCount=0,this.showGardenViewMax=99,this.hasGardenGift=!1,this.DelayShowCancelBtnTime=0,this.isShowVideoIcon=!1,this.isFreeDaveTre=!1,this.isSignDouble=!1,this.hasRePortReward=!1,this.showBangJar=!1,this.everyDayShareRwdCurrent=0,this.everyDayShareRwdMax=5,this.shareGiftArray=[],this.noADPlayerUid="",this.vaseEndLessLevelIndex=0,this.vaseEndLessSunCount=0,this.localUID=null,this.normalClickTips=!0,this.testUserId=null,this.resetBpDataTime=null,this.battlePassLv=0,this.battlePassExp=0,this.bpHighAdsCnt=0,this.bpDayLoginCnt=1,this.bpDayPlantCnt=0,this.bpDayPassPartCnt=0,this.bpDayWatchAdCnt=0,this.bpDayCostPowerCnt=0,this.bpWeekLoginCnt=1,this.bpWeekCostPowerCnt=0,this.bpWeekUsePropCnt=0,this.bpWeekWatchAdCnt=0,this.bpWeekPassPartCnt=0,this.bpWeekPlantCnt=0,this.bpWeekZombieDeathCnt=0,this.bpWeekGetGoldCnt=0,this.bpWeekSunCnt=0,this.bpWeekEndlessPass=0,this.bpWeekRecordLogin=null,this.bpDayTaskStates={},this.bpWeekTaskStates={},this.bpNormalRewards={},this.bpHighRewards={},this.newPlayerSameDay="",this.newPlayerLoginCnt=0,this.newPlayerUsePropCnt=0,this.newPlayerGetGoldCnt=0,this.newPlayerWatchAdCnt=0,this.newPlayerStep=0,this.passEndlessCnt=0,this.stepStates=Array.from({length:7},function(){return{0:0,1:0,2:0,3:0}}),this.stepRewardStates={0:0,1:0,2:0,3:0,4:0,5:0,6:0},this.newPlayerBtnState=1,this.newPlayerTaskOver=!1,this.activityCoin=0,this.loginRewardStates={1:0,2:0,3:0,4:0,5:0,6:0,7:0},this.loginDays=0,this.watchAdCnt=0,this.watchAdStates={1:0,2:0,3:0,4:0},this.beltEquipData={slotList:[],hasEquipList:{}},this.slotUnlockList=[]}return a.passPart=function(a,t,e){n.pzaGameState.firstPassCurPart=!1,null==this.data.partStar[a-1]&&(n.pzaGameState.firstPassCurPart=!0,this.data.partStar[a-1]=[],this.addDirty("partStar"));var o=this.data.partStar[a-1][t-1];return null==o&&(n.pzaGameState.firstPassCurPart=!0),(null==o||o<e)&&(this.data.partStar[a-1][t-1]=e,this.addDirty("partStar"),p.default.instance().checkStar(this.getAllStar(!0))),a==this.data.curChapter&&t==this.data.curPart&&(p.default.instance().checkWhenPassRank(a,t),a>=5&&t>=10&&(this.data.passLastPart=!0,this.addDirty("passLastPart")),a>=10&&t>=10?(this.data.passWtLastPart=!0,this.addDirty("passWtLastPart"),!0):t>=10?(this.data.curChapter++,this.data.curPart=1,this.data.reachPartTime=Date.now(),this.addDirty("curChapter","curPart","reachPartTime"),!0):(this.data.curPart++,this.data.reachPartTime=Date.now(),this.addDirty("curPart","reachPartTime"),!0))},a.getPassPart=function(a){return a==this.data.curChapter?this.data.curPart-1:a>this.data.curChapter?0:-1},a.getPartStar=function(a,t){var e=this.data.partStar[a-1];if(null==e)return 0;var o=e[t-1];return null==o?0:o},a.getAllStar=function(a){void 0===a&&(a=!1);var t=0;a&&(t=5);for(var e=0,o=t;o<this.data.partStar.length;o++){var n=this.data.partStar[o];if(null!=n)for(var i=0;i<n.length;i++){var r=n[i];null!=r&&(e+=r)}}return e>=231&&(e=231),e},a.hasUnlockZombie=function(a){return null!=a&&this.data.unlockZombies.indexOf(a)>=0},a.unlockZombie=function(a){null!=a&&(this.data.unlockZombies.indexOf(a)>=0||this.data.unlockZombies.push(a))},a.passSurvival=function(a){return!(this.data.survivalPassChapter>=a||(this.data.survivalPassChapter=a,this.addDirty("survivalPassChapter"),0))},a.passMiniGame=function(a){return this.data.miniFirstPassArr[a]},a.getSurvivalFlagCount=function(a){if(null==a||a<0)return 0;var t=this.data.survivalFlagCount[a-1];return null==t?0:t},a.passSurvivalEndless=function(a,t){var e=this.data.survivalFlagCount[a-1];(null==e||e<t)&&(this.data.survivalFlagCount[a-1]=t,this.addDirty("survivalFlagCount"))},a.passZombieMode=function(a){return 1!=this.data.zombieTrophy[a-1]&&(this.data.zombieTrophy[a-1]=1,this.addDirty("zombiePassChapter"),!0)},a.passVaseMode=function(a){return 1!=this.data.vaseTrophy[a-1]&&(this.data.vaseTrophy[a-1]=1,this.addDirty("passVaseMode"),!0)},a.getTrophy=function(){return this.data.survivalPassChapter+this.getZombieTrophy()+this.getVaseTrophy()+this.getMiniGameTrophy()},a.getVaseTrophy=function(){if(null==this.data.vaseTrophy||this.data.vaseTrophy.length<=0)return 0;var a=0;return this.data.vaseTrophy.forEach(function(t){1==t&&a++}),a},a.getMiniGameTrophy=function(){for(var a=0,t=0;t<this.data.miniFirstPassArr.length;t++)1==this.data.miniFirstPassArr[t]&&8!=t&&a++;return a>13&&(a=13),a},a.getZombieTrophy=function(){if(null==this.data.zombieTrophy||this.data.zombieTrophy.length<=0)return 0;var a=0;return this.data.zombieTrophy.forEach(function(t){1==t&&a++}),a},a.getMaxTrophy=function(){return 14+a.vaseAllTrophy+13},a.setPower=function(t){this.data.power+=t,a.addDirty("power"),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.UPDATE_POWER,null),t<0&&(this.data.bpWeekCostPowerCnt-=t,i.default.instance().checkWeekTask(2,this.data.bpWeekCostPowerCnt),this.data.bpDayCostPowerCnt-=t,i.default.instance().checkDayTask(5,this.data.bpDayCostPowerCnt),a.addDirty("bpWeekCostPowerCnt","bpDayCostPowerCnt"))},a.shareGetCoin=function(){},a.getJsonStr=function(){return JSON.stringify(this.data)},a.parseFromData=function(t){if(null==t)return this.data.lastLoginTime=Date.now(),this.data.reachPartTime=Date.now(),cc.audioEngine.setEffectsVolume(this.data.soundValue),void this.addAllDirty();if(null!=t.soundValue&&(this.data.soundValue=t.soundValue),null!=t.musicValue&&(this.data.musicValue=t.musicValue),null!=t.lastLoginTime&&(this.data.lastLoginTime=t.lastLoginTime),null!=t.curChapter&&(this.data.curChapter=t.curChapter),null!=t.curPart&&(this.data.curPart=t.curPart),null!=t.passLastPart&&(this.data.passLastPart=t.passLastPart),null!=t.passWtLastPart&&(this.data.passWtLastPart=t.passWtLastPart),null!=t.plantSlotCount&&(this.data.plantSlotCount=t.plantSlotCount),null!=t.coin&&(this.data.coin=t.coin),null!=t.adTicket&&(this.data.adTicket=t.adTicket),null!=t.videoGetTokenCoinCount&&(this.data.videoGetTokenCoinCount=t.videoGetTokenCoinCount),null!=t.unlockZombies&&(this.data.unlockZombies=t.unlockZombies),null!=t.ownPlants&&(this.data.ownPlants=t.ownPlants),null!=t.partStar&&(this.data.partStar=t.partStar),null!=t.curGuideType&&(this.data.curGuideType=t.curGuideType),null!=t.firstPickCoinTip&&(this.data.firstPickCoinTip=t.firstPickCoinTip),null!=t.unlockShop&&(this.data.unlockShop=t.unlockShop),null!=t.unlockAch&&(this.data.unlockAch=t.unlockAch),null!=t.unlockBook&&(this.data.unlockBook=t.unlockBook),null!=t.unlockMoregame&&(this.data.unlockMoregame=t.unlockMoregame),null!=t.unlockGarden&&(this.data.unlockGarden=t.unlockGarden),null!=t.unlockSpeed&&(this.data.unlockSpeed=t.unlockSpeed),null!=t.ownGoods&&(this.data.ownGoods=t.ownGoods),null!=t.purchasedPos&&(this.data.purchasedPos=t.purchasedPos),null!=t.gameProps&&(this.data.gameProps=t.gameProps),null!=t.autoPickLeft&&(this.data.autoPickLeft=t.autoPickLeft),null!=t.gardenPlants&&(this.data.gardenPlants=t.gardenPlants),null!=t.gardenToolNum&&(this.data.gardenToolNum=t.gardenToolNum),null!=t.gardenEnv&&(this.data.gardenEnv=t.gardenEnv),null!=t.purchasedPos&&(this.data.purchasedPos=t.purchasedPos),null!=t.signDays&&(this.data.signDays=t.signDays),null!=t.hasSign&&(this.data.hasSign=t.hasSign),null!=t.signDasyEnd&&(this.data.signDasyEnd=t.signDasyEnd),null!=t.canMonthSign&&(this.data.canMonthSign=t.canMonthSign),null!=t.specailAchTime&&(this.data.specailAchTime=t.specailAchTime),null!=t.maturePlantCount&&(this.data.maturePlantCount=t.maturePlantCount),null!=t.hasGardenPlants&&(this.data.hasGardenPlants=t.hasGardenPlants),this.data.gardenLastTime=t.gardenLastTime,null!=t.snailSpeedUpTime&&(this.data.snailSpeedUpTime=t.snailSpeedUpTime),this.data.achieves=t.achieves||{},this.data.achieves)for(var e=38;e<50;e++)if(a.data.achieves[""+e]&&1==a.data.achieves[""+e]){a.data.achieves[""+e];break}this.data.tasks=t.tasks||{},null!=t.survivalPassChapter&&(this.data.survivalPassChapter=t.survivalPassChapter),null!=t.survivalFlagCount&&(this.data.survivalFlagCount=t.survivalFlagCount),null!=t.zombieTrophy&&(this.data.zombieTrophy=t.zombieTrophy),null!=t.vaseTrophy&&(this.data.vaseTrophy=t.vaseTrophy),null!=t.zombieUnlock&&(this.data.zombieUnlock=t.zombieUnlock),null!=t.zombieFlagCount&&(this.data.zombieFlagCount=t.zombieFlagCount),null!=t.vasePassChapter&&(this.data.vasePassChapter=t.vasePassChapter),null!=t.vaseFlagCount&&(this.data.vaseFlagCount=t.vaseFlagCount),null!=t.saveId&&(this.data.saveId=t.saveId),null!=t.saveTime&&(this.data.saveTime=t.saveTime),null!=t.shareGiftRecIndex&&(this.data.shareGiftRecIndex=t.shareGiftRecIndex),null!=t.shareBoomNutPop&&(this.data.shareBoomNutPop=t.shareBoomNutPop),null!=t.playerNick&&(this.data.playerNick=t.playerNick),null!=t.playerAvatar&&(this.data.playerAvatar=t.playerAvatar),null!=t.gatlingAdCount&&(this.data.gatlingAdCount=t.gatlingAdCount),null!=t.gloomShroomAdCount&&(this.data.gloomShroomAdCount=t.gloomShroomAdCount),null!=t.cattailAdCount&&(this.data.cattailAdCount=t.cattailAdCount),null!=t.spikerockAdCount&&(this.data.spikerockAdCount=t.spikerockAdCount),null!=t.cobCannonAdCount&&(this.data.cobCannonAdCount=t.cobCannonAdCount),null!=t.winterMelonAdCount&&(this.data.winterMelonAdCount=t.winterMelonAdCount),null!=t.twinsFlowerAdCnt&&(this.data.twinsFlowerAdCnt=t.twinsFlowerAdCnt),null!=t.slot8AdCount&&(this.data.slot8AdCount=t.slot8AdCount),null!=t.modeUsePlants&&(this.data.modeUsePlants=t.modeUsePlants),null!=t.imitaterUsePlant&&(this.data.imitaterUsePlant=t.imitaterUsePlant),null!=t.reachPartTime?this.data.reachPartTime=t.reachPartTime:this.data.reachPartTime=Date.now(),null!=t.usedRedeemCode&&(this.data.usedRedeemCode=t.usedRedeemCode),null!=t.adShareCount&&(this.data.adShareCount=t.adShareCount),null!=t.freeCoinShareCount&&(this.data.freeCoinShareCount=t.freeCoinShareCount),null!=t.autoPickShareCount&&(this.data.autoPickShareCount=t.autoPickShareCount),null!=t.dataVersion&&(this.data.dataVersion=t.dataVersion),null!=t.newGuide&&(this.data.newGuide=t.newGuide),null!=t.preOpenSurvival&&(this.data.preOpenSurvival=t.preOpenSurvival),null!=t.openPuzzleTip&&(this.data.openPuzzleTip=t.openPuzzleTip),null!=t.miniUnLockCnt&&(this.data.miniUnLockCnt=t.miniUnLockCnt),null!=t.miniClickFlag&&(this.data.miniClickFlag=t.miniClickFlag),null!=t.miniFirstPassArr&&(this.data.miniFirstPassArr=t.miniFirstPassArr),null!=t.monthSignDays&&(this.data.monthSignDays=t.monthSignDays),null!=t.retroSignDays&&(this.data.retroSignDays=t.retroSignDays),null!=t.isSignInMonth&&(this.data.isSignInMonth=t.isSignInMonth),null!=t.nowMonth&&(this.data.nowMonth=t.nowMonth),null!=t.ttRegisterState&&(this.data.ttRegisterState=t.ttRegisterState),null!=t.saveGameDataCnt&&(this.data.saveGameDataCnt=t.saveGameDataCnt),null!=t.readGameDataCnt&&(this.data.readGameDataCnt=t.readGameDataCnt),null!=t.canRefreshState&&(this.data.canRefreshState=t.canRefreshState),null!=t.plantTrial&&(this.data.plantTrial=t.plantTrial),null!=t.hasInGame&&(this.data.hasInGame=t.hasInGame),null!=t.hasKillYeti&&(this.data.hasKillYeti=t.hasKillYeti),null!=t.weekTwoOpenTip1&&(this.data.weekTwoOpenTip1=t.weekTwoOpenTip1),null!=t.weekTwoOpenTip2&&(this.data.weekTwoOpenTip2=t.weekTwoOpenTip2),null!=t.dropPlantArr&&(this.data.dropPlantArr=t.dropPlantArr),null!=t.weekTwoStartTip&&(this.data.weekTwoStartTip=t.weekTwoStartTip),null!=t.getPowerLeftTime&&(this.data.getPowerLeftTime=t.getPowerLeftTime),null!=t.power&&(this.data.power=t.power),null!=t.noADPlayerUid&&(this.data.noADPlayerUid=t.noADPlayerUid),null!=t.saveNewGameLevel&&(this.data.saveNewGameLevel=t.saveNewGameLevel),null!=t.weekDayTime&&(this.data.weekDayTime=t.weekDayTime),null!=t.miniGameNewFlagArr&&t.miniGameNewFlagArr.length==this.data.miniGameNewFlagArr.length&&(this.data.miniGameNewFlagArr=t.miniGameNewFlagArr),null!=t.superChomperSwFirstIn&&(this.data.superChomperSwFirstIn=t.superChomperSwFirstIn),null!=t.luckWindmillCardList&&(this.data.luckWindmillCardList=t.luckWindmillCardList),null!=t.hasBeginGift&&(this.data.hasBeginGift=t.hasBeginGift),null!=t.showBeginViewCount&&(this.data.showBeginViewCount=t.showBeginViewCount),null!=t.getDaveGiftCount&&(this.data.getDaveGiftCount=t.getDaveGiftCount),null!=t.showDaveViewCount&&(this.data.showDaveViewCount=t.showDaveViewCount),null!=t.hasDaveGift&&(this.data.hasDaveGift=t.hasDaveGift),null!=t.getGardenGiftCount&&(this.data.getGardenGiftCount=t.getGardenGiftCount),null!=t.showGardenViewCount&&(this.data.showGardenViewCount=t.showGardenViewCount),null!=t.hasGardenGift&&(this.data.hasGardenGift=t.hasGardenGift),null!=t.shareGiftArray&&(this.data.shareGiftArray=t.shareGiftArray),null!=t.isFreeDaveTre&&(this.data.isFreeDaveTre=t.isFreeDaveTre),null!=t.hasRePortReward&&(this.data.hasRePortReward=t.hasRePortReward),null!=t.showBangJar&&(this.data.showBangJar=t.showBangJar),null!=t.everyDayShareRwdCurrent&&(this.data.everyDayShareRwdCurrent=t.everyDayShareRwdCurrent),null!=t.tryPlantCountArrayNormal&&(this.data.tryPlantCountArrayNormal=t.tryPlantCountArrayNormal),null!=t.watchADTryPlantCountNormal&&(this.data.watchADTryPlantCountNormal=t.watchADTryPlantCountNormal),null!=t.tryPlantCountArrayEndLess&&(this.data.tryPlantCountArrayEndLess=t.tryPlantCountArrayEndLess),null!=t.watchADTryPlantCountEndLess&&(this.data.watchADTryPlantCountEndLess=t.watchADTryPlantCountEndLess),null!=t.vaseEndLessLevelIndex&&(this.data.vaseEndLessLevelIndex=t.vaseEndLessLevelIndex),null!=t.vaseEndLessSunCount&&(this.data.vaseEndLessSunCount=t.vaseEndLessSunCount),null!=t.normalClickTips&&(this.data.normalClickTips=t.normalClickTips),null!=t.beltEquipData&&(this.data.beltEquipData=t.beltEquipData),null!=t.localUID&&(this.data.localUID=t.localUID),null!=t.testUserId&&(this.data.testUserId=t.testUserId),null!=t.resetBpDataTime&&(this.data.resetBpDataTime=t.resetBpDataTime),null!=t.battlePassLv&&(this.data.battlePassLv=t.battlePassLv),null!=t.battlePassExp&&(this.data.battlePassExp=t.battlePassExp),null!=t.bpHighAdsCnt&&(this.data.bpHighAdsCnt=t.bpHighAdsCnt),null!=t.bpDayLoginCnt&&(this.data.bpDayLoginCnt=t.bpDayLoginCnt),null!=t.bpDayPlantCnt&&(this.data.bpDayPlantCnt=t.bpDayPlantCnt),null!=t.bpDayPassPartCnt&&(this.data.bpDayPassPartCnt=t.bpDayPassPartCnt),null!=t.bpDayWatchAdCnt&&(this.data.bpDayWatchAdCnt=t.bpDayWatchAdCnt),null!=t.bpDayCostPowerCnt&&(this.data.bpDayCostPowerCnt=t.bpDayCostPowerCnt),null!=t.bpWeekLoginCnt&&(this.data.bpWeekLoginCnt=t.bpWeekLoginCnt),null!=t.bpWeekCostPowerCnt&&(this.data.bpWeekCostPowerCnt=t.bpWeekCostPowerCnt),null!=t.bpWeekUsePropCnt&&(this.data.bpWeekUsePropCnt=t.bpWeekUsePropCnt),null!=t.bpWeekWatchAdCnt&&(this.data.bpWeekWatchAdCnt=t.bpWeekWatchAdCnt),null!=t.bpWeekPassPartCnt&&(this.data.bpWeekPassPartCnt=t.bpWeekPassPartCnt),null!=t.bpWeekPlantCnt&&(this.data.bpWeekPlantCnt=t.bpWeekPlantCnt),null!=t.bpWeekZombieDeathCnt&&(this.data.bpWeekZombieDeathCnt=t.bpWeekZombieDeathCnt),null!=t.bpWeekGetGoldCnt&&(this.data.bpWeekGetGoldCnt=t.bpWeekGetGoldCnt),null!=t.bpWeekSunCnt&&(this.data.bpWeekSunCnt=t.bpWeekSunCnt),null!=t.bpWeekEndlessPass&&(this.data.bpWeekEndlessPass=t.bpWeekEndlessPass),null!=t.bpWeekRecordLogin&&(this.data.bpWeekRecordLogin=t.bpWeekRecordLogin),null!=t.newPlayerSameDay&&(this.data.newPlayerSameDay=t.newPlayerSameDay),null!=t.newPlayerLoginCnt&&(this.data.newPlayerLoginCnt=t.newPlayerLoginCnt),null!=t.newPlayerUsePropCnt&&(this.data.newPlayerUsePropCnt=t.newPlayerUsePropCnt),null!=t.newPlayerGetGoldCnt&&(this.data.newPlayerGetGoldCnt=t.newPlayerGetGoldCnt),null!=t.newPlayerWatchAdCnt&&(this.data.newPlayerWatchAdCnt=t.newPlayerWatchAdCnt),null!=t.newPlayerStep&&(this.data.newPlayerStep=t.newPlayerStep),null!=t.passEndlessCnt&&(this.data.passEndlessCnt=t.passEndlessCnt),null!=t.newPlayerTaskOver&&(this.data.newPlayerTaskOver=t.newPlayerTaskOver),null!=t.activityCoin&&(this.data.activityCoin=t.activityCoin),null!=t.newPlayerBtnState&&(this.data.newPlayerBtnState=t.newPlayerBtnState),null!=t.loginDays&&(this.data.loginDays=t.loginDays),null!=t.watchAdCnt&&(this.data.watchAdCnt=t.watchAdCnt),t.stepStates&&0!==Object.keys(t.stepStates).length?this.data.stepStates=t.stepStates:this.data.stepStates=Array.from({length:7},function(){return{0:0,1:0,2:0,3:0}}),this.data.stepRewardStates=t.stepRewardStates||{0:0,1:0,2:0,3:0,4:0,5:0,6:0},this.data.loginRewardStates=t.loginRewardStates||{1:0,2:0,3:0,4:0,5:0,6:0,7:0},this.data.watchAdStates=t.watchAdStates||{1:0,2:0,3:0,4:0},this.data.bpDayTaskStates=t.bpDayTaskStates||{},this.data.bpWeekTaskStates=t.bpWeekTaskStates||{},this.data.bpNormalRewards=t.bpNormalRewards||{},this.data.bpHighRewards=t.bpHighRewards||{},cc.audioEngine.setEffectsVolume(this.data.soundValue),this.resetData(),d.readLocalData(),t.survivalBattleData&&t.length>0&&(d.data.survivalBattleData=t.survivalBattleData,d.localSaveData()),t.endlessBattleData&&t.endlessBattleData.length>0&&(d.data.endlessBattleData=t.endlessBattleData,d.localSaveData()),t.selectPlants&&(this.data.modeUsePlants[0]=t.selectPlants,this.addDirty("modeUsePlants"),t.imitaterPlant&&(this.data.imitaterUsePlant[0]=t.imitaterPlant,this.addDirty("imitaterUsePlant"))),"my"!=l.pzaChannel.instance().channel&&l.pzaChannel.getRemoteTime(function(){if(a.data.saveTime){var t=Math.floor((a.serverTime-a.data.saveTime)/1e3);if(t<0)return;if(a.data.power>=a.maxPower)return;var e=Math.floor(t/1800);if(a.data.power=a.data.power+e>=a.maxPower?a.maxPower:a.data.power+e,a.data.power<a.maxPower){var o=t-1800*e;a.data.getPowerLeftTime=e>0?1800-o:a.data.getPowerLeftTime-o,a.data.getPowerLeftTime<0&&(a.data.getPowerLeftTime=10)}}})},a.resetData=function(){var t=Date.now();c.pzaUtil.isSameDay(t,this.data.lastLoginTime)||(this.data.lastLoginTime=t,this.data.purchasedPos=[],this.data.hasSign=!1,this.data.unlockSpeed=!1,this.data.adShareCount=0,this.data.freeCoinShareCount=0,this.data.autoPickShareCount=0,this.data.miniClickFlag=!0,this.data.saveGameDataCnt=0,this.data.readGameDataCnt=0,this.data.hasInGame=!1,this.data.getPowerLeftTime=1800,this.data.power=a.maxPower,this.data.getDaveGiftCount=0,this.data.showBeginViewCount=0,this.data.showDaveViewCount=0,this.data.getGardenGiftCount=0,this.data.showGardenViewCount=0,"my"==l.pzaChannel.instance().channel&&(this.data.isFreeDaveTre=!0),this.data.everyDayShareRwdCurrent=0,this.data.everyDayShareRwdCurrent=0,this.data.bpDayLoginCnt=1,this.data.bpDayPlantCnt=0,this.data.bpDayPassPartCnt=0,this.data.bpDayWatchAdCnt=0,this.data.bpDayCostPowerCnt=0,this.data.bpDayTaskStates={},this.addDirty("getPowerLeftTime","getPowerLeftTime","power","lastLoginTime","purchasedPos","hasSign","unlockSpeed","adShareCount","freeCoinShareCount","autoPickShareCount","saveGameDataCnt","readGameDataCnt","hasInGame","getDaveGiftCount","showBeginViewCount","showDaveViewCount","getGardenGiftCount","showGardenViewCount","everyDayShareRwdCurrent","showSkinView","bpDayLoginCnt","bpDayPlantCnt","bpDayPassPartCnt","bpDayWatchAdCnt","bpDayCostPowerCnt","bpDayTaskStates"))},a.testData=function(){this.testMode=!0},a.unlockChapter=function(){this.data.shareGiftRecIndex=[],this.data.survivalPassChapter=5,this.data.curChapter=10,this.data.curPart=10,this.data.passLastPart=!0,this.data.playerNick=null,this.data.playerAvatar=null,this.data.survivalFlagCount=[1,1,1,1,1],this.data.plantSlotCount=7,this.data.gardenPlants=[],this.data.gardenToolNum={},this.data.partStar=[],this.data.coin=1e4,this.data.curGuideType=null,this.data.plantSlotCount=9,this.data.partStar=[],this.data.unlockBook=!0,this.data.unlockShop=!0,this.data.unlockGarden=!0,this.data.achieves={},this.data.gardenToolNum={7:1},this.data.gardenPlants=[{id:"901717572602918",plantId:39,towards:-1,level:3,pos:23,env:0,opTime:1717681206427,opType:5,opLeft:0,lightGoneTime:1717717062992,cdCount:0},{id:"2501721548927174",plantId:6,towards:-1,level:3,pos:28,env:0,opTime:1721712088576,opType:5,opLeft:0,lightGoneTime:1721748059576,cdCount:0},{id:"2401721548935049",plantId:8,towards:1,level:3,pos:24,env:0,opTime:1721648056347,opType:5,opLeft:0,lightGoneTime:1721684002336,cdCount:0},{id:"1601721548939330",plantId:38,towards:-1,level:3,pos:18,env:0,opTime:1721712104838,opType:5,opLeft:0,lightGoneTime:1721748075838,cdCount:0},{id:"301721921187468",plantId:15,towards:1,level:3,pos:5,env:1,opTime:1722159217075,opType:5,opLeft:0,lightGoneTime:1722195193075,cdCount:0},{id:"901721921236487",plantId:11,towards:1,level:3,pos:0,env:1,opTime:1722307376124,opType:5,opLeft:0,lightGoneTime:1722343299706,cdCount:0},{id:"1501722133928697",plantId:19,towards:1,level:3,pos:25,env:0,opTime:1722256533261,opType:5,opLeft:0,lightGoneTime:1722292161323,cdCount:0},{id:"201722357230790",plantId:20,towards:-1,level:3,pos:0,env:2,opTime:1722835915015,opType:5,opLeft:0,lightGoneTime:1722858978870,cdCount:0},{id:"2301722662532451",plantId:3,towards:1,level:3,pos:16,env:0,opTime:1722835882758,opType:5,opLeft:0,lightGoneTime:1722858716313,cdCount:0},{id:"801722662532451",plantId:2,towards:1,level:3,pos:22,env:0,opTime:1722835871759,opType:5,opLeft:0,lightGoneTime:1722858713449,cdCount:0},{id:"2101722754316523",plantId:4,towards:1,level:3,pos:30,env:0,opTime:1722835835760,opType:5,opLeft:0,lightGoneTime:1722858819103,cdCount:0},{id:"1401722765926568",plantId:7,towards:1,level:3,pos:0,env:0,opTime:1722835530811,opType:5,opLeft:0,lightGoneTime:1722870842147,cdCount:0},{id:"3101722765926568",plantId:16,towards:1,level:3,pos:4,env:1,opTime:1722945030047,opType:5,opLeft:0,lightGoneTime:1722978897473,cdCount:0},{id:"1001722822698256",plantId:10,towards:1,level:3,pos:17,env:0,opTime:1722941097576,opType:0,opLeft:4,lightGoneTime:0,cdCount:0},{id:"001722822698256",plantId:13,towards:-1,level:1,pos:3,env:0,opTime:1722826489965,opType:0,opLeft:4,lightGoneTime:0,cdCount:0},{id:"601722823073610",plantId:5,towards:-1,level:3,pos:1,env:0,opTime:1722946088376,opType:5,opLeft:0,lightGoneTime:1722952121566,cdCount:0},{id:"601722834821665",plantId:33,towards:1,level:3,pos:19,env:0,opTime:1722945213377,opType:5,opLeft:0,lightGoneTime:1722973289989,cdCount:0},{id:"501722834821669",plantId:9,towards:1,level:3,pos:1,env:1,opTime:1722945211049,opType:5,opLeft:0,lightGoneTime:1722973491022,cdCount:0},{id:"1401722917796467",plantId:12,towards:-1,level:3,pos:3,env:1,opTime:1722945018050,opType:5,opLeft:0,lightGoneTime:1722978932627,cdCount:0},{id:"3101722919143053",plantId:24,towards:1,level:3,pos:31,env:0,opTime:1723025794682,opType:5,opLeft:0,lightGoneTime:1723037811081,cdCount:0},{id:"2001722919143053",plantId:22,towards:-1,level:3,pos:4,env:0,opTime:1722945037377,opType:5,opLeft:0,lightGoneTime:1722978969171,cdCount:0},{id:"3001722923907888",plantId:18,towards:-1,level:3,pos:9,env:0,opTime:1722945019378,opType:5,opLeft:0,lightGoneTime:1722978858143,cdCount:0},{id:"2901722923907888",plantId:21,towards:-1,level:3,pos:10,env:0,opTime:1723025908684,opType:5,opLeft:0,lightGoneTime:1723037877519,cdCount:0},{id:"1201722923907888",plantId:1,towards:-1,level:3,pos:27,env:0,opTime:1723025887684,opType:5,opLeft:0,lightGoneTime:1723037823221,cdCount:0},{id:"701722923907888",plantId:30,towards:-1,level:3,pos:11,env:0,opTime:1723026045685,opType:5,opLeft:0,lightGoneTime:1723037875349,cdCount:0},{id:"1401722923907888",plantId:23,towards:1,level:3,pos:8,env:0,opTime:1723025771686,opType:5,opLeft:0,lightGoneTime:1723037805929,cdCount:0},{id:"1501722937525230",plantId:14,towards:1,level:3,pos:6,env:1,opTime:1723025343042,opType:5,opLeft:0,lightGoneTime:1723056184016,cdCount:0},{id:"501723001776535",plantId:32,towards:1,level:3,pos:7,env:1,opTime:1723117322496,opType:5,opLeft:0,lightGoneTime:1723153146114,cdCount:0},{id:"1901723002005682",plantId:37,towards:1,level:3,pos:2,env:0,opTime:1723117341111,opType:5,opLeft:0,lightGoneTime:1723153061669,cdCount:0},{id:"1501723024850664",plantId:25,towards:1,level:3,pos:2,env:2,opTime:1723213125133,opType:5,opLeft:0,lightGoneTime:1723249056843,cdCount:0},{id:"3001723024850664",plantId:25,towards:-1,level:3,pos:5,env:2,opTime:1723288254758,opType:5,opLeft:0,lightGoneTime:1723296350652,cdCount:0},{id:"3101723024850664",plantId:31,towards:-1,level:3,pos:14,env:0,opTime:1723117339306,opType:5,opLeft:0,lightGoneTime:1723153232749,cdCount:0},{id:"2201723024850664",plantId:29,towards:1,level:3,pos:26,env:0,opTime:1723117323302,opType:5,opLeft:0,lightGoneTime:1723153239800,cdCount:0},{id:"2901723024850664",plantId:26,towards:-1,level:3,pos:2,env:1,opTime:1723213123726,opType:5,opLeft:0,lightGoneTime:1723249098726,cdCount:0},{id:"2201723104117549",plantId:36,towards:1,level:3,pos:20,env:0,opTime:1723213126413,opType:5,opLeft:0,lightGoneTime:1723249066553,cdCount:0},{id:"1401723263925211",plantId:28,towards:-1,level:3,pos:12,env:0,opTime:1723452817852,opType:5,opLeft:0,lightGoneTime:1723469610958,cdCount:0},{id:"1201723287107199",plantId:40,towards:-1,level:3,pos:13,env:0,opTime:1723453040852,opType:5,opLeft:0,lightGoneTime:1723469635270,cdCount:0},{id:"1401723287107199",plantId:35,towards:1,level:3,pos:21,env:0,opTime:1723453010853,opType:5,opLeft:0,lightGoneTime:1723469597573,cdCount:0},{id:"601723395187343",plantId:17,towards:1,level:3,pos:6,env:2,opTime:1724218354604,opType:5,opLeft:0,lightGoneTime:1724254331604,cdCount:0},{id:"601724580396096",plantId:27,towards:1,level:3,pos:29,env:0,opTime:1724758918120,opType:5,opLeft:0,lightGoneTime:1724794888120,cdCount:0}],this.data.gardenEnv={1:1,2:1};for(var a=[],t=o.pzaPlantEnum.PEA_SHOOTER;t<=o.pzaPlantEnum.IMITATER;t++)a.push(t);a.push(o.pzaPlantEnum.SUPER_CHOMPER),a.push(o.pzaPlantEnum.BOOM_NUT),a.push(o.pzaPlantEnum.CAIWEN),a.push(o.pzaPlantEnum.LaserBean),a.push(o.pzaPlantEnum.FireBlover),this.data.ownPlants=a,this.data.battlePassLv=60,this.addAllDirty()},a.clearBpData=function(){var t=new Date,e=t.getUTCFullYear()+"-"+t.getUTCMonth()+"-"+t.getUTCDay();a.data.bpWeekCostPowerCnt=0,a.data.bpWeekUsePropCnt=0,a.data.bpWeekPlantCnt=0,a.data.bpWeekZombieDeathCnt=0,a.data.bpWeekGetGoldCnt=0,a.data.bpWeekSunCnt=0,a.data.bpWeekEndlessPass=0,a.data.bpWeekTaskStates={},a.data.bpWeekRecordLogin!=e&&(a.data.bpWeekRecordLogin=e,a.data.bpWeekLoginCnt=1),a.addDirty("bpWeekCostPowerCnt","bpWeekUsePropCnt","bpWeekPlantCnt","bpWeekZombieDeathCnt","bpWeekGetGoldCnt","bpWeekSunCnt","bpWeekEndlessPass","bpWeekTaskStates","bpWeekRecordLogin","bpWeekLoginCnt")},a.bpCreatePlant=function(){a.data.bpDayPlantCnt++,a.data.bpWeekPlantCnt++,i.default.instance().checkDayTask(3,a.data.bpDayPlantCnt),i.default.instance().checkWeekTask(6,a.data.bpWeekPlantCnt),a.addDirty("bpDayPlantCnt","bpWeekPlantCnt")},a.bpPassPart=function(){a.data.bpDayPassPartCnt++,a.data.bpWeekPassPartCnt++,i.default.instance().checkDayTask(2,a.data.bpDayPassPartCnt),i.default.instance().checkWeekTask(5,a.data.bpWeekPassPartCnt),a.addDirty("bpDayPassPartCnt","bpWeekPassPartCnt")},a.bpWatchAd=function(){a.data.bpDayWatchAdCnt++,a.data.bpWeekWatchAdCnt++,i.default.instance().checkDayTask(4,a.data.bpDayWatchAdCnt),i.default.instance().checkWeekTask(4,a.data.bpWeekWatchAdCnt),a.data.newPlayerWatchAdCnt++,a.data.watchAdCnt++,a.addDirty("bpDayWatchAdCnt","bpWeekWatchAdCnt","newPlayerWatchAdCnt","watchAdCnt")},a.bpUseProp=function(){a.data.bpWeekUsePropCnt++,i.default.instance().checkWeekTask(3,a.data.bpWeekUsePropCnt),a.data.newPlayerUsePropCnt++,a.addDirty("bpWeekUsePropCnt","newPlayerUsePropCnt")},a.bpZombieDie=function(){a.data.bpWeekZombieDeathCnt++,i.default.instance().checkWeekTask(7,a.data.bpWeekZombieDeathCnt),a.addDirty("bpWeekZombieDeathCnt")},a.bpGetGold=function(t){a.data.bpWeekGetGoldCnt+=t,a.data.newPlayerGetGoldCnt+=t,i.default.instance().checkWeekTask(8,a.data.bpWeekGetGoldCnt),a.addDirty("bpWeekGetGoldCnt","newPlayerGetGoldCnt")},a.bpGetSun=function(t){a.data.bpWeekSunCnt+=t,a.addDirty("bpWeekSunCnt"),i.default.instance().checkWeekTask(9,a.data.bpWeekSunCnt)},a.bpEndlessPassPart=function(t){a.data.bpWeekEndlessPass++,a.addDirty("bpWeekEndlessPass"),i.default.instance().checkWeekTask(10,a.data.bpWeekEndlessPass),t>a.data.passEndlessCnt&&(a.data.passEndlessCnt=n.pzaGameState.curPart,a.addDirty("passEndlessCnt"))},a.obtainGoods=function(a,t){if(null!=a&&null!=t){var e=this.data.ownGoods[a];this.data.ownGoods[a]=null==e?t:t+e,this.addDirty("ownGoods")}},a.consumeGoods=function(a,t){if(null==a||null==t)return!1;var e=this.data.ownGoods[a];return!(null==e||e<t||(this.data.ownGoods[a]=Math.max(0,e-t),this.addDirty("ownGoods"),0))},a.getGoodsCount=function(a){if(null==a)return 0;var t=this.data.ownGoods[a];return null==t?0:t},a.obtainProp=function(t,e,o){if(void 0===o&&(o=!0),null!=t&&null!=e){var n=this.data.gameProps[t];if(t===s.pzaGamePropEnum.PROP_COIN)return this.data.coin+=e||0,void(o&&this.addDirty("coin"));if(t==s.pzaGamePropEnum.PROP_POWER){var i=a.data.power+(e||0);return a.data.power=i,a.addDirty("power"),void u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.UPDATE_POWER,null)}if(t==s.pzaGamePropEnum.PROP_AD_TICKET)return this.data.adTicket+=e||0,this.addDirty("adTicket"),void u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.UPDATE_ADTICKET,null);t!=s.pzaGamePropEnum.RANDOM_GIFT&&(this.data.gameProps[t]=null==n?e:e+n,o&&this.addDirty("gameProps"))}},a.consumeProp=function(a,t){if(void 0===t&&(t=1),null!=a&&null!=t){var e=this.data.gameProps[a];null!=e&&(this.data.gameProps[a]=Math.max(0,e-t),this.addDirty("gameProps"))}},a.getPropCount=function(a){if(null==a)return 0;var t=this.data.gameProps[a];return null==t?0:t},a.hasNutHealing=function(){var a=this.data.ownGoods[r.pzaShopItemType.NUT_HEALING];return null!=a&&a>0},a.getAdvancedPlant=function(){var a=0;return this.data.ownPlants.forEach(function(t){(t>=o.pzaPlantEnum.GATLING_PEA&&t<=o.pzaPlantEnum.COB_CANNON||t==o.pzaPlantEnum.SUPER_CHOMPER)&&a++}),a},a.hasPass12=function(){return this.data.curChapter>1||1==this.data.curChapter&&this.data.curPart>1},a.addAllDirty=function(){a.hasDirty=!0},a.addDirty=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.hasDirty=!0},a.readLocalData=function(){return cc.sys.localStorage.getItem(this.DATA_SAVE_KEY)},a.localSaveData=function(){a.hasDirty=!1,this.data.saveTime=Date.now();var t=this.getJsonStr();cc.sys.localStorage.setItem(this.DATA_SAVE_KEY,t)},a.setLanfeiToken=function(a){cc.sys.localStorage.setItem("lanfeiToken",a)},a.getLanfeiToken=function(){return cc.sys.localStorage.getItem("lanfeiToken")},a.data_verison=1,a.DATA_SAVE_KEY="pza-data-2",a.hasDirty=!1,a.data=new a,a.testMode=!1,a.gardenGuiding=!1,a.isNewUser=0,a.maxAdShareCount=0,a.maxShareRwdCount=0,a.isShowSaveView=!1,a.vaseAllTrophy=0,a.serverTime=0,a.loadingIsOver=!1,a.isPopReviveView=!1,a.hasUseProp=!1,a.gameStartTimeStamp=0,a.isWeekTwo=!1,a.maxPower=20,a.normalPowerCost=2,a.endLessPowerCost=5,a.addPowerValue=5,a.isShowPowerGift=!1,a.isShowGift=!1,a.isNoShareAct=!1,a.isNoShareVideoSwap=!1,a.isShowRecruit=!1,a.isTrailPlant=!1,a}();e.pzaLocalData=h,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../BattlePass/pzaBattlePassTaskMgr":"pzaBattlePassTaskMgr","../Shop/pzaShopConfig":"pzaShopConfig","../Task/pzaTaskMgr":"pzaTaskMgr","../utils/pzaChannel":"pzaChannel","./pzaGamePropConfig":"pzaGamePropConfig","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaLoginActivityConf:[function(a,t,e){"use strict";cc._RF.push(t,"d313copVCJHqbe+AwL0dCua","pzaLoginActivityConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLoginActivityConf=void 0;e.pzaLoginActivityConf=function(a){this.id=0,this.rewards="",this.id=a.id,this.rewards=a.rewards||""},cc._RF.pop()},{}],pzaLoginActivityItem:[function(a,t,e){"use strict";cc._RF.push(t,"36809uAjbNIyrjhkrK3cKLx","pzaLoginActivityItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGamePropConfig"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaRewardManager"),s=a("../Common/pzaUtil"),c=a("./pzaLoginRewardMgr"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lab_day=null,t.node_get=null,t.lab_getBtn=null,t.nodes_item=[],t.nodes_propAni=[],t.nodes_propImg=[],t.labs_amount=[],t.sprs_propImg=[],t.node_redTip=null,t.id=0,t.btnState=0,t}return n(t,a),t.prototype.onEnable=function(){this.node_get.on(cc.Node.EventType.TOUCH_END,this.clickGetReward,this),this.node_redTip.active=!1},t.prototype.onDisable=function(){this.node_get.off(cc.Node.EventType.TOUCH_END,this.clickGetReward,this)},t.prototype.bindData=function(a){this.id=a;var t=c.default.instance().loginActivityMap.get(this.id);this.lab_day.string="\u767b\u5f55\u7b2c"+this.id+"\u5929";for(var e=t.rewards.split(","),o=0;o<e.length;o++){var n=e[o].split("_");this.setReward(o,parseInt(n[0]),parseInt(n[1]))}this.refreshBtnState()},t.prototype.setReward=function(a,t,e){switch(this.labs_amount[a].string="X"+e,t){case r.pzaGamePropEnum.ACTIVITY_COIN:this.nodes_propImg[a].getComponent(cc.Sprite).spriteFrame=this.sprs_propImg[0];break;case r.pzaGamePropEnum.RANDOM_GIFT:this.nodes_propImg[a].getComponent(cc.Sprite).spriteFrame=this.sprs_propImg[1];break;case r.pzaGamePropEnum.PROP_POWER:this.nodes_propImg[a].getComponent(cc.Sprite).spriteFrame=this.sprs_propImg[2]}},t.prototype.refreshBtnState=function(){if(2==p.pzaLocalData.data.loginRewardStates[this.id+""])return this.btnState=2,this.lab_getBtn.string="\u5df2\u9886\u53d6",s.pzaUtil.switchGraySprite(this.node_get.getComponent(cc.Sprite),!0),void(this.node_redTip.active=!1);this.id>p.pzaLocalData.data.loginDays?(this.btnState=0,this.lab_getBtn.string="\u672a\u8fbe\u6210",s.pzaUtil.switchGraySprite(this.node_get.getComponent(cc.Sprite),!0),this.node_redTip.active=!1):(this.btnState=1,this.lab_getBtn.string="\u9886\u53d6",s.pzaUtil.switchGraySprite(this.node_get.getComponent(cc.Sprite),!1),this.node_redTip.active=!0,cc.tween(this.node_redTip).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start())},t.prototype.getRewards=function(){for(var a=c.default.instance().loginActivityMap.get(this.id).rewards.split(","),t=[],e=0;e<a.length;e++){var o=a[e].split("_"),n=new r.pzaRewardPropData(parseInt(o[0]),parseInt(o[1]));t.push(n)}l.pzaRewardManager.recieveRewards(t)},t.prototype.clickGetReward=function(){if(1==this.btnState)return p.pzaLocalData.data.loginRewardStates[this.id+""]=2,p.pzaLocalData.addDirty("loginRewardStates"),this.refreshBtnState(),void this.getRewards()},i([h({displayName:"\u5929\u6570Lab",type:cc.Label})],t.prototype,"lab_day",void 0),i([h({displayName:"\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"node_get",void 0),i([h({displayName:"\u6309\u94ae\u6587\u5b57",type:cc.Label})],t.prototype,"lab_getBtn",void 0),i([h({displayName:"item\u8282\u70b9\u7ec4",type:[cc.Node]})],t.prototype,"nodes_item",void 0),i([h({displayName:"item\u9053\u5177\u52a8\u753b\u7ec4",type:[cc.Node]})],t.prototype,"nodes_propAni",void 0),i([h({displayName:"item\u9053\u5177\u56fe\u7247\u7ec4",type:[cc.Node]})],t.prototype,"nodes_propImg",void 0),i([h({displayName:"\u9053\u5177\u6570\u91cf\u7ec4",type:[cc.Label]})],t.prototype,"labs_amount",void 0),i([h({displayName:"\u9053\u5177\u56fe\u7247\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"sprs_propImg",void 0),i([h({displayName:"\u7ea2\u70b9\u63d0\u793a",type:cc.Node})],t.prototype,"node_redTip",void 0),i([d],t)}(cc.Component);e.default=m,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaUtil":"pzaUtil","./pzaLoginRewardMgr":"pzaLoginRewardMgr"}],pzaLoginActivityView:[function(a,t,e){"use strict";cc._RF.push(t,"655efqaAPxMA7XgcjvAqihA","pzaLoginActivityView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaLoginActivityItem"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.node_content=null,t.pre_item=null,t}return n(t,a),t.prototype.onEnable=function(){this.node_content.height=760;for(var a=1;a<=7;a++){var t=cc.instantiate(this.pre_item);t.parent=this.node_content,t.getComponent(r.default).bindData(a)}},t.prototype.onDisable=function(){},i([s({displayName:"item\u5bb9\u5668",type:cc.Node})],t.prototype,"node_content",void 0),i([s({displayName:"item\u5956\u52b1\u9884\u8bbe",type:cc.Prefab})],t.prototype,"pre_item",void 0),i([l],t)}(cc.Component);e.default=c,cc._RF.pop()},{"./pzaLoginActivityItem":"pzaLoginActivityItem"}],pzaLoginRewardMgr:[function(a,t,e){"use strict";cc._RF.push(t,"ccb95mitIpGbLmU7rcODBYb","pzaLoginRewardMgr");var o=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var n=a("../utils/pzakc"),i=a("./pzaLoginActivityConf"),r=cc._decorator,p=r.ccclass,l=(r.property,function(){function a(){this.loginActivityMap=new Map}var t;return t=a,a.instance=function(){return t._me||(t._me=new t),t._me},a.prototype.initLoginActivityRewards=function(a){for(var t=0;t<a.length;t++){var e=new i.pzaLoginActivityConf(a[t]);this.loginActivityMap.set(e.id,e)}n.default.log("\u767b\u5f55\u6d3b\u52a8\u5956\u52b1map: ",this.loginActivityMap)},a._me=null,t=o([p],a)}());e.default=l,cc._RF.pop()},{"../utils/pzakc":"pzakc","./pzaLoginActivityConf":"pzaLoginActivityConf"}],pzaLoginRewardView:[function(a,t,e){"use strict";cc._RF.push(t,"d15efUilt5Kcoqjm4NFMszO","pzaLoginRewardView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaLocalData"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.btn_loginReward=null,t.btn_mRider=null,t.btn_adReward=null,t.node_content=null,t.pre_loginReward=null,t.red_loginActivity=null,t.redCheckTime=0,t}return n(t,a),t.prototype.onEnable=function(){this.btn_loginReward.on(cc.Node.EventType.TOUCH_END,this.clickLoginBtn,this),this.btn_mRider.on(cc.Node.EventType.TOUCH_END,this.clickMaskRider,this),this.btn_adReward.on(cc.Node.EventType.TOUCH_END,this.clickAdReward,this),this.clickLoginBtn(),this.red_loginActivity.active=!1,this.redCheckTime=1,cc.tween(this.red_loginActivity).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start()},t.prototype.onDisable=function(){this.btn_loginReward.off(cc.Node.EventType.TOUCH_END,this.clickLoginBtn,this),this.btn_mRider.off(cc.Node.EventType.TOUCH_END,this.clickMaskRider,this),this.btn_adReward.off(cc.Node.EventType.TOUCH_END,this.clickAdReward,this)},t.prototype.clickLoginBtn=function(){this.node_content.removeAllChildren(),cc.instantiate(this.pre_loginReward).parent=this.node_content},t.prototype.clickMaskRider=function(){this.node_content.removeAllChildren()},t.prototype.clickAdReward=function(){this.node_content.removeAllChildren()},t.prototype.update=function(a){this.redCheckTime-=a,this.redCheckTime<=0&&this.checkLoginActivity()},t.prototype.checkLoginActivity=function(){for(var a=!1,t=1;t<=7;t++)if(2!=p.pzaLocalData.data.loginRewardStates[t+""]&&t<=p.pzaLocalData.data.loginDays){a=!0;break}this.red_loginActivity.active=!!a},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u767b\u5f55\u8c6a\u793c\u6309\u94ae",type:cc.Node})],t.prototype,"btn_loginReward",void 0),i([c({displayName:"\u5047\u9762\u6309\u94ae",type:cc.Node})],t.prototype,"btn_mRider",void 0),i([c({displayName:"\u5e7f\u544a\u6709\u793c\u6309\u94ae",type:cc.Node})],t.prototype,"btn_adReward",void 0),i([c({displayName:"\u5b50\u9884\u8bbe\u7236\u5bb9\u5668",type:cc.Node})],t.prototype,"node_content",void 0),i([c({displayName:"\u767b\u5f55\u8c6a\u793c\u9884\u8bbe\u4f53",type:cc.Prefab})],t.prototype,"pre_loginReward",void 0),i([c({displayName:"\u767b\u5f55\u6d3b\u52a8\u7ea2\u70b9",type:cc.Node})],t.prototype,"red_loginActivity",void 0),i([s],t)}(cc.Component);e.default=u,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData"}],pzaLoginRiderView:[function(a,t,e){"use strict";cc._RF.push(t,"90819drg91I3K8xWMnGnqZs","pzaLoginRiderView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaLocalData"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.node_proParent=null,t.node_pro=null,t.partPro={5:145,10:290,20:435,30:580},t}return n(t,a),t.prototype.onEnable=function(){this.refreshWatchAdPro()},t.prototype.onDisable=function(){},t.prototype.refreshWatchAdPro=function(){if(r.pzaLocalData.data.watchAdCnt>=30){this.node_pro.width=this.node_proParent.width;for(var a=1;a<=4;a++)2!=r.pzaLocalData.data.watchAdStates[a+""]&&(r.pzaLocalData.data.watchAdStates[a+""]=1)}},i([s({displayName:"\u8fdb\u5ea6\u6761\u7236\u8282\u70b9",type:cc.Node})],t.prototype,"node_proParent",void 0),i([s({displayName:"\u8fdb\u5ea6\u6761\u8282\u70b9",type:cc.Node})],t.prototype,"node_pro",void 0),i([l],t)}(cc.Component);e.default=c,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData"}],pzaLoginView:[function(a,t,e){"use strict";cc._RF.push(t,"a869cKVNxBEKqiDj0spxsx2","pzaLoginView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLoginView=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaLocalData"),l=a("../../utils/pzaChannel"),s=a("../../utils/pzakc"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.uidNode=null,t.uidEdit=null,t.tips=null,t.nextLogic=null,t.setClickBtnCD=5e3,t.ableClickSetBtn=!0,t}return n(t,a),t.prototype.onEnable=function(){if(this.uidNode.active=!1,l.pzaChannel.instance().getChannel().channelUserId){this.uidNode.active=!0;var a=l.pzaChannel.instance().getChannel().channelUserId;a.length>8&&(a=this.getFirstFiveChars(a)+"..."),this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=a}else this.uidNode.active=!1;this.uidEdit.node.active=!1,this.uidEdit.node.parent.active=!1,"noAD"!=l.pzaChannel.instance().channel||l.pzaChannel.isConfRemote||(this.uidNode.active=!0,this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=p.pzaLocalData.data.noADPlayerUid,this.uidEdit.node.active=!0,this.uidEdit.node.parent.active=!0,this.uidEdit.string=p.pzaLocalData.data.noADPlayerUid)},t.prototype.getFirstFiveChars=function(a){return a.substring(0,5)},t.prototype.clickCopy=function(){l.pzaChannel.instance().copyToClip(l.pzaChannel.instance().getChannel().channelUserId,function(a){s.default.log("content: ",a)})},t.prototype.clickSetUidBtn=function(){var a=this;this.ableClickSetBtn&&(this.ableClickSetBtn=!1,setTimeout(function(){a.ableClickSetBtn=!0},this.setClickBtnCD),p.pzaLocalData.data.noADPlayerUid=this.uidEdit.string,p.pzaLocalData.addDirty("noADPlayerUid"),this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=p.pzaLocalData.data.noADPlayerUid,console.log("pzaLocalData.data.noADPlayerUid ",p.pzaLocalData.data.noADPlayerUid),s.default.jpost("https://ga.gamejym.com/fcm/gameApi/noAdLogin",{uid:p.pzaLocalData.data.noADPlayerUid},function(t,e){if(console.log("login resp: ",e),!t&&e){var o=l.pzaChannel.instance().channelMap.get("noAD");e.data&&e.data.isWhite?(o.isWhite=e.data.isWhite,a.nextLogic&&a.nextLogic()):(a.tips.active=!0,setTimeout(function(){a.tips.active=!1},2e3))}else s.default.err(t)}))},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u767d\u540d\u5355\u8282\u70b9",type:cc.Node})],t.prototype,"uidNode",void 0),i([d({displayName:"uid\u7f16\u8f91\u6846",type:cc.EditBox})],t.prototype,"uidEdit",void 0),i([d(cc.Node)],t.prototype,"tips",void 0),i([u],t)}(cc.Component);e.pzaLoginView=h,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaLocalData":"pzaLocalData","../../utils/pzaChannel":"pzaChannel","../../utils/pzakc":"pzakc"}],pzaLongFireEffect:[function(a,t,e){"use strict";cc._RF.push(t,"0913cOa1LhIV7qLv5ibgfJO","pzaLongFireEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLongFireEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaGameCommonPool"),s=a("../pzaGameState"),c=a("../Plant/pzaAttackType"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine=null,t.poolPrefab=null,t.delayTimeCur=0,t.delayTimeMax=0,t.atkCountCur=0,t.atkCountMax=0,t.pos=null,t.yIndex=-1,t.useAble=!1,t}return n(t,a),t.prototype.showEffect=function(a,t,e,o){this.delayTimeCur=0,this.delayTimeMax=e,this.atkCountCur=0,this.atkCountMax=t,this.pos=a,this.yIndex=o,this.useAble=!0},t.prototype.logicUpdate=function(a){var t=this;this.useAble&&(this.delayTimeCur-=a,this.delayTimeCur<=0&&(this.delayTimeCur=this.delayTimeMax,this.spine.playAnimation("fire2",!1,function(){t.atkCountCur>=t.atkCountMax?t.close():t.atkCountCur++}),this.findTarget()))},t.prototype.findTarget=function(){var a=this;window.pzazombieManager.findFixRangeZombies(this.pos,.5*s.pzaGameState.map.getBlockWidth()).forEach(function(t){t&&t.hurt(40,a.baseData,c.pzaAttackType.BOOM)})},t.prototype.pauseSelf=function(){this.spine.pauseAnimation()},t.prototype.resumeSelf=function(){this.spine.resumeAnimation()},t.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([h({displayName:"spine\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"spine",void 0),i([h(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([d],t)}(r.pzaBaseComponent);e.pzaLongFireEffect=m,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState"}],pzaLuckWindmill:[function(a,t,e){"use strict";cc._RF.push(t,"fbfefRGqdpMMqODFsndorFZ","pzaLuckWindmill");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLuckWindmill=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lifeTime=0,t.trigger=!1,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.lifeTime=0,this.trigger=!1,r.pzaSoundManager.playAudio("Blover"),this.animation.playAnimation("idle",!1,function(){window.pzaplantManager.removePlant(e.baseData),e.death()}),l.pzaGameState.onlyShroomCofee=!1,l.pzaGameState.usePlanternBlover=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.trigger||(this.lifeTime+=t,this.lifeTime>=.5&&this.attack())},t.prototype.hurt=function(t,e,o){this.trigger||this.attack(),a.prototype.hurt.call(this,t,e,o)},t.prototype.attack=function(){this.trigger=!0,p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.RANDOM_PLANTCARD,null)},i([u],t)}(s.pzaBasePlant));e.pzaLuckWindmill=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaLuckyCattail:[function(a,t,e){"use strict";cc._RF.push(t,"5668f3103pOCrdLSoA0k5zK","pzaLuckyCattail");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLuckyCattail=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGameConfig"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaGoldBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.shootNode=null,t.atkTime=0,t.nineBulletCd=0,t.originCd=35,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.nineBulletCd=this.originCd,this.atkTime=0,this.aniCom()},t.prototype.aniCom=function(){var a=this;if(this.atkTime>0)this.animation.playAnimation("idle",!1,this.aniCom.bind(this));else{var t=this.findAttackTarget();if(t)return this.atkTime=this.atkInterval,void this.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("idle",!1,a.aniCom.bind(a))},function(){a.attack(t)});this.animation.playAnimation("idle",!1,this.aniCom.bind(this))}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.atkTime-=t,this.nineBulletCd>0&&(this.nineBulletCd-=t,this.nineBulletCd<=0&&(this.nineBulletCd=this.originCd,this.createNineBullet()))},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=l.pzaNodeManager.getBulletNode();if(null!=t&&this.baseData){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o),i=e.getComponent(c.pzaGoldBullet);i&&i.bulletInit(this.baseData,1),i&&i.init(this.baseData.atk,a,n,this.baseData.yIndex)}}}},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(u.pzaBuffType.DIVE)&&!r.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var p=s.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(u.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.createNineBullet=function(){for(var a=0;a<9;a++){var t=d.pzaGameState.map.getBlockLogicPos(a,5,d.pzaGameState.map.getXInterval(a)/2,50);t.y=p.pzaGameConfig.autoSunY;var e=l.pzaNodeManager.getBulletNode();if(null==e)return;if(!this.baseData)return;var o=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(!o)return;o.setParent(e);var n=o.getComponent(c.pzaGoldBullet);n&&n.bulletInit(this.baseData,1),n&&n.init(this.baseData.atk,null,t,0,!1,!0)}},i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([z({displayName:"\u653b\u51fb\u4f4d\u7f6e",type:cc.Node})],t.prototype,"shootNode",void 0),i([f],t)}(h.pzaBasePlant);e.pzaLuckyCattail=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaGoldBullet":"pzaGoldBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMachineGargantuar:[function(a,t,e){"use strict";cc._RF.push(t,"34486Ul/U9GRJcBZQQASocE","pzaMachineGargantuar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGargantuar=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Plant/pzaAttackType"),u=a("./pzaBaseZombie"),d=a("./pzaZombieState"),h=a("./pzaZombieSlot"),m=a("../pzaSpineTool"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=h.pzaZombieSlotType.MachineHead,t.garlicSkinName=null,t.isMoving=!0,t.weaponIndex=1,t.deathPlayingOver=!1,t.deathCallBack=null,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[h.pzaZombieSlotType.butter,new h.pzaZombieSlot(this.animation.spineAnimation,h.pzaZombieSlotType.butter).addState(new h.pzaZombieSlotAtt(1,h.pzaZombieSlotType.butter,-34.23,90.46))],[h.pzaZombieSlotType.MachineHead,new h.pzaZombieSlot(this.animation.spineAnimation,h.pzaZombieSlotType.MachineHead).addState(new h.pzaZombieSlotAtt(1,h.pzaZombieSlotType.MachineHead+"1",658,4,0)).addState(new h.pzaZombieSlotAtt(2,h.pzaZombieSlotType.MachineHead+"2",260,6,0))]])},t.prototype.getZombieHeadWps=function(){return this&&this.baseData&&this.baseData.zombieData?this.node&&this.node.parent?this.node.convertToWorldSpaceAR(cc.v2(-20,150)):cc.v2(0,0):this.node&&this.node.parent?this.node.convertToWorldSpaceAR(cc.v2()):cc.v2(0,0)},t.prototype.updateEquipState=function(a,t){if(a){this.slotMap||this.initEquips();var e=this.slotMap.get(a);e?e.updateState(t):console.log("updateEquipState\u672a\u5b9a\u4f4d\u5230slot",this.baseData.zombieData.zombieType,a)}},t.prototype.preview=function(t,e,o){this.idleAniName[0]="idle",a.prototype.preview.call(this,t,e,o)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.zombieData.cate=s.pzaZombieCate.Gargantuar,this.isMoving=!1,this.playMoveAnimation(),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1)),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE,-1))},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow?this.pushBackTime>0?this.pushBackMove(a):(this.updateMove(a),this.rollingPlant()):this.changeRowMove(a))}},t.prototype.rollingPlant=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a,t=this.findTarget();a=t?""+t.xIndex+t.yIndex:""+this.baseData.xIndex+this.baseData.yIndex;var e=window.pzaplantManager.plantDataMap.get(a);if(null!=e){var o=window.pzaplantManager.getPlantByData(e);o&&o.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.ROLLING)}var n=window.pzaplantManager.plantEnvDataMap.get(a);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.ROLLING)}var r=window.pzaplantManager.pumpkinDataMap.get(a);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.ROLLING)}var l=window.pzaplantManager.notTargetMap.get(a);if(null!=l){var s=window.pzaplantManager.getPlantByData(l);s&&s.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.ROLLING)}}},t.prototype.hurt=function(t,e,o){void 0===o&&(o=c.pzaAttackType.FLOOR_ATK),this.baseData&&a.prototype.hurt.call(this,t,e,o)},t.prototype.zombieHurtSound=function(){var a="shieldhit"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(a)},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=d.pzaZombieState.MOVE,this.isMoving=!0,this.animation.playAnimation("move",!0,function(){a.isMoving=!1},function(){},.7)},t.prototype.playDeathAnimation=function(a){var t=this;this.zombieState=d.pzaZombieState.DEAD,this.zombieHurtState=s.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.deathCallBack=a;var e=!1;this.scheduleOnce(function(){r.pzaSoundManager.playAudio("gargantuar_thump")},.95/p.pzaUtil.getGameSpeed()),this.animation.playAnimation("death",!1,function(){t.scheduleOnce(function(){r.pzaSoundManager.playAudio("cherrybomb")},.15/p.pzaUtil.getGameSpeed()),t.animation.playAnimation("death2",!1,function(){e||(e=!0,t.deathCallBack())})}),this.refreshFrostState(!1),this.zombieFallSound()},t.prototype.equipDeath=function(){this.equipHurtState=s.pzaHurtStateEnum.DEAD,this.hasEquip=!1,m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1head1",0,0),m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1mouth1",0,0)},t.prototype.zombieDying=function(){a.prototype.zombieDying.call(this),this.changeSkin("skin3"),this.hasEquip||(m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1head1",0,0),m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1mouth1",0,0))},t.prototype.zombieHurt=function(){a.prototype.zombieHurt.call(this),this.changeSkin("skin2"),this.hasEquip||(m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1head1",0,0),m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1mouth1",0,0))},t.prototype.zombieIntact=function(){a.prototype.zombieIntact.call(this),this.changeSkin("skin1"),this.hasEquip||(m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1head1",0,0),m.pzaSpineTool.instance().setSlotAttSize(this.animation.spineAnimation,"1mouth1",0,0))},t.prototype.zombieScream=function(){},t.prototype.death=function(){var t=this;this.playDeathAnimation(function(){a.prototype.death.call(t,!1)})},t.prototype.ashesDeath=function(a,t){this.baseData.zombieDie(),this.death(!1,t)},t.prototype.changeMapRow=function(){a.prototype.changeMapRow.call(this)},i([z],t)}(u.pzaBaseZombie));e.pzaGargantuar=y,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaSpineTool":"pzaSpineTool","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaMagnetNut:[function(a,t,e){"use strict";cc._RF.push(t,"3acf177CfFOi6g4kt+5DmJ/","pzaMagnetNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMagnetNut=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.drawTime=0,t.restTime=0,t.resting=!1,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=s.pzaPlantCate.Nut,this.restTime=0,this.resting=!1,this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),d.pzaGameState.useShroom=!0},t.prototype.playNormalAni=function(){var a=this,t=function(){if(a.drawTime>0)a.animation.playAnimation("attack",!1,t);else{if(a.restTime<=0){if(a.resting)return a.resting=!1,void a.animation.playAnimation("back",!1,t);var e=a.findTarget(),o=a.findLaddyTarget();if(null!=e)return a.restTime=15,a.resting=!0,a.absorbIronEquip(e),r.pzaSoundManager.playAudio("MagnetShroom"),void a.animation.playAnimation("go",!1,function(){a.drawTime=9,a.animation.playAnimation("attack",!1,t)});null!=o&&(a.restTime=15,a.resting=!0,a.absorbLabby(o),r.pzaSoundManager.playAudio("MagnetShroom"),a.attacking=!0,a.animation.playAnimation("go",!1,function(){a.drawTime=9,a.animation.playAnimation("attack",!1,function(){a.attacking=!1,a.animation.playAnimation("idle1",!0)})}))}a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))}};this.animation.playAnimation("idle1",!1,t)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.drawTime-=t,this.restTime-=t},t.prototype.findTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1,o=3*d.pzaGameState.map.getBlockWidth();return window.pzazombieManager.zombieMap.forEach(function(n,i){if(null!=i&&null!=i.zombieData&&!((i.zombieData.equipType!=c.pzaEquipType.IRON_EQUIP||i.zombieData.equipHp<=0)&&(i.zombieData.equipType2!=c.pzaEquipType.IRON_EQUIP||i.zombieData.equipHp2<=0)&&i.zombieData.toolType!=c.pzaEquipType.IRON_EQUIP||i.buffData.hasBuff(l.pzaBuffType.IMM_CONTROL)&&i.zombieData.zombieType!=c.pzaZombieEnum.POGO_ZOMBIE2&&i.zombieData.zombieType!=c.pzaZombieEnum.POGO_ZOMBIE3)){var r=i.logicPos.sub(a.baseData.logicPos).len();r<=o&&(-1==e||r<e)&&(t=i,e=r)}}),t}},t.prototype.findLaddyTarget=function(){var a=this,t=null,e=3*d.pzaGameState.map.getBlockWidth(),o=-1;return null==t&&window.pzaMapManager.LadderMap.forEach(function(n){var i=n.logicPos.sub(a.baseData.logicPos).len();i<=e&&(-1==o||i<o)&&(t=n,o=i)}),t},t.prototype.absorbIronEquip=function(a){if(null!=this.baseData&&!this.baseData.isDead&&null!=a&&null!=a.zombieData&&!a.isDead)if(a.zombieData.zombieType!=c.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3&&a.zombieData.zombieType!=c.pzaZombieEnum.GARGANTUAR2&&a.zombieData.zombieType!=c.pzaZombieEnum.GARGANTUAR3&&a.zombieData.zombieType!=c.pzaZombieEnum.GARGANTUAR4&&a.zombieData.zombieType!=c.pzaZombieEnum.RED_GARGANTUAR2&&a.zombieData.zombieType!=c.pzaZombieEnum.RED_GARGANTUAR3&&a.zombieData.zombieType!=c.pzaZombieEnum.RED_GARGANTUAR4&&a.zombieData.zombieType!=c.pzaZombieEnum.POGO_ZOMBIE2&&a.zombieData.zombieType!=c.pzaZombieEnum.POGO_ZOMBIE3&&a.zombieData.zombieType!=c.pzaZombieEnum.LADDER_ZOMBIE2&&a.zombieData.zombieType!=c.pzaZombieEnum.LADDER_ZOMBIE3&&a.zombieData.zombieType!=c.pzaZombieEnum.LADDER_ZOMBIE4&&a.zombieData.zombieType!=c.pzaZombieEnum.PeaZombie3&&a.zombieData.zombieType!=c.pzaZombieEnum.PeaZombie4&&a.zombieData.zombieType!=c.pzaZombieEnum.FOOTBALL_ZOMBIE&&a.zombieData.zombieType!=c.pzaZombieEnum.FOOTBALL_ZOMBIE2){var t,e=c.pzaHurtStateEnum.INTACT;a.zombieData.zombieType==c.pzaZombieEnum.POGO_ZOMBIE?e=(t=a.hp/a.maxHp)<=1/3?c.pzaHurtStateEnum.DYING:t<=2/3?c.pzaHurtStateEnum.HURT:c.pzaHurtStateEnum.INTACT:0!=a.zombieData.maxEquipHp&&(e=(t=a.zombieData.equipHp/a.zombieData.maxEquipHp)<=1/3?c.pzaHurtStateEnum.DYING:t<=2/3?c.pzaHurtStateEnum.HURT:c.pzaHurtStateEnum.INTACT),a.destroyIronEquip(),u.pzaEffectManager.createAbsorbIronEquip(this.baseData,a,e)}else this.absorbIronEquipInZj(a)},t.prototype.absorbIronEquipInZj=function(a){var t=c.pzaHurtStateEnum.INTACT,e=0;if(a.zombieData.toolType==c.pzaEquipType.IRON_EQUIP)e=0;else if(a.zombieData.equipHp>0&&0!=a.zombieData.maxEquipHp)e=1,t=(o=a.zombieData.equipHp/a.zombieData.maxEquipHp)<=1/3?c.pzaHurtStateEnum.DYING:o<=2/3?c.pzaHurtStateEnum.HURT:c.pzaHurtStateEnum.INTACT;else{var o;e=2,t=(o=a.zombieData.equipHp2/a.zombieData.maxEquipHp2)<=1/3?c.pzaHurtStateEnum.DYING:o<=2/3?c.pzaHurtStateEnum.HURT:c.pzaHurtStateEnum.INTACT}a.destroyIronEquipInZj(e),u.pzaEffectManager.createAbsorbIronEquip(this.baseData,a,t,e)},t.prototype.absorbLabby=function(a){null==this.baseData||this.baseData.isDead||u.pzaEffectManager.createLaddyEff(this.baseData,a)},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([f],t)}(h.pzaBasePlant));e.pzaMagnetNut=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMagnetShroom:[function(a,t,e){"use strict";cc._RF.push(t,"ee7788Nq0hJyLUTPjE/LN6f","pzaMagnetShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMagnetShroom=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.blinkTime=3,t.restTime=0,t.drawTime=0,t.resting=!1,t.attacking=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.restTime=0,this.resting=!1,u.pzaGameState.isZombieMode())return this.attacking=!1,this.sleepAni.node.active=!1,void this.animation.playAnimation("T_idle",!0);t.plantData.sleeping?(this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):this.sleepAni.node.active=!1,this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),u.pzaGameState.useShroom=!0},t.prototype.playNormalAni=function(){var a=this,t=function(){if(a.drawTime>0)a.animation.playAnimation("attack",!1,t);else{if(a.restTime<=0&&!a.baseData.plantData.sleeping){if(a.resting)return a.resting=!1,void a.animation.playAnimation("back",!1,t);var e=a.findTarget(),o=a.findLaddyTarget();if(null!=e)return a.restTime=15,a.resting=!0,a.absorbIronEquip(e),r.pzaSoundManager.playAudio("MagnetShroom"),void a.animation.playAnimation("go",!1,function(){a.drawTime=9,a.animation.playAnimation("attack",!1,t)});null!=o&&(a.restTime=15,a.resting=!0,a.absorbLabby(o),r.pzaSoundManager.playAudio("MagnetShroom"),a.attacking=!0,a.animation.playAnimation("T_go",!1,function(){a.drawTime=9,a.animation.playAnimation("T_attack",!1,function(){a.attacking=!1,a.animation.playAnimation("T_idle4",!0)})}))}if(a.blinkTime>0)return a.restTime>0?void a.animation.playAnimation("idle4",!1,t):void a.animation.playAnimation(a.baseData.plantData.sleeping?"idle3":"idle1",!1,t);a.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),a.restTime>0?a.animation.playAnimation("idle4_eye",!1,t):a.animation.playAnimation(a.baseData.plantData.sleeping?"idle3_eye":"idle1_eye",!1,t)}};this.animation.playAnimation(this.baseData.plantData.sleeping?"idle3":"idle1",!1,t)},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.restTime-=t,this.drawTime-=t,!this.attacking&&u.pzaGameState.isZombieMode()&&this.restTime<=0){if(this.resting)return this.resting=!1,this.attacking=!0,void this.animation.playAnimation("T_back",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)});var o=this.findTarget(),n=this.findLaddyTarget();if(null!=o)return this.restTime=15,this.resting=!0,this.absorbIronEquip(o),r.pzaSoundManager.playAudio("MagnetShroom"),this.attacking=!0,void this.animation.playAnimation("T_go",!1,function(){e.drawTime=1.5,e.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle4",!0)})});null!=n&&(this.restTime=15,this.resting=!0,this.absorbLabby(n),r.pzaSoundManager.playAudio("MagnetShroom"),this.attacking=!0,this.animation.playAnimation("T_go",!1,function(){e.drawTime=1.5,e.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle4",!0)})}))}},t.prototype.wakeUp=function(){a.prototype.wakeUp.call(this),null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.letPlantSleep=function(){!this.sleepAni.node.active&&this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},t.prototype.findTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1,o=3*u.pzaGameState.map.getBlockWidth();return window.pzazombieManager.zombieMap.forEach(function(n,i){if(null!=i&&null!=i.zombieData&&(!(i.zombieData.equipType!=s.pzaEquipType.IRON_EQUIP||i.zombieData.equipHp<=0)||i.zombieData.toolType==s.pzaEquipType.IRON_EQUIP)){var r=i.logicPos.sub(a.baseData.logicPos).len();r<=o&&(-1==e||r<e)&&(t=i,e=r)}}),t}},t.prototype.findLaddyTarget=function(){var a=this,t=null,e=3*u.pzaGameState.map.getBlockWidth(),o=-1;return null==t&&window.pzaMapManager.LadderMap.forEach(function(n){var i=n.logicPos.sub(a.baseData.logicPos).len();i<=e&&(-1==o||i<o)&&(t=n,o=i)}),t},t.prototype.absorbIronEquip=function(a){if(null!=this.baseData&&!this.baseData.isDead&&null!=a&&null!=a.zombieData&&!a.isDead){var t,e=s.pzaHurtStateEnum.INTACT;a.zombieData.zombieType==s.pzaZombieEnum.POGO_ZOMBIE?e=(t=a.hp/a.maxHp)<=1/3?s.pzaHurtStateEnum.DYING:t<=2/3?s.pzaHurtStateEnum.HURT:s.pzaHurtStateEnum.INTACT:0!=a.zombieData.maxEquipHp&&(e=(t=a.zombieData.equipHp/a.zombieData.maxEquipHp)<=1/3?s.pzaHurtStateEnum.DYING:t<=2/3?s.pzaHurtStateEnum.HURT:s.pzaHurtStateEnum.INTACT),a.destroyIronEquip(),c.pzaEffectManager.createAbsorbIronEquip(this.baseData,a,e)}},t.prototype.absorbLabby=function(a){null==this.baseData||this.baseData.isDead||c.pzaEffectManager.createLaddyEff(this.baseData,a)},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([f({displayName:"\u7761\u89c9\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"sleepAni",void 0),i([m],t)}(d.pzaBasePlant);e.pzaMagnetShroom=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMallet:[function(a,t,e){"use strict";cc._RF.push(t,"c81aeVSGwlHBpMzUvQmB/FS","pzaMallet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMallet=void 0;var r=a("./pzaBasePlant"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.bodyBindData=!0,this.body.node.getComponent(cc.Collider).enabled=!1,this.showMalletAni()},t.prototype.showMalletAni=function(){var a=this,t=function(){window.pzaplantManager.removePlant(a.baseData),a.death()};this.animation.playAnimation("idle",!1,function(){var e=!1;window.pzaMapManager.DoomHoleSet.forEach(function(t){null!=t&&t.mapXIndex==a.baseData.xIndex&&t.mapYIndex==a.baseData.yIndex&&(e=!0,t.clearHole())}),e?t():(window.pzaMapManager.GoldHoleSet.forEach(function(t){null!=t&&t.mapXIndex==a.baseData.xIndex&&t.mapYIndex==a.baseData.yIndex&&(e=!0,t.clearHole())}),e?t():(window.pzaMapManager.ZombieHoleSet.forEach(function(t){null!=t&&t.mapXIndex==a.baseData.xIndex&&t.mapYIndex==a.baseData.yIndex&&(e=!0,t.clearHole())}),t()))})},i([l],t)}(r.pzaBasePlant));e.pzaMallet=s,cc._RF.pop()},{"./pzaBasePlant":"pzaBasePlant"}],pzaMapManager:[function(a,t,e){"use strict";cc._RF.push(t,"2ae8cyvWMVGZ5KducPAy6fC","pzaMapManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMapManager=e.pzaBlockType=void 0;var r,p=a("../Battle/Data/pzaBaseData"),l=a("../Battle/Data/pzaZombieEnum"),s=a("../Battle/Effect/pzaLadder"),c=a("../Battle/Effect/pzaPitchFork"),u=a("../Battle/Effect/pzaPortalDoor"),d=a("../Battle/Effect/pzaRoofPreEffect"),h=a("../Battle/Effect/pzaSpeedBlinkEffect"),m=a("../Battle/Zombie/pzaBaseZombie"),f=a("../Battle/pzaCleanCar"),z=a("../Battle/pzaEffectManager"),y=a("../Battle/pzaGameState"),g=a("../Battle/pzaTomb"),b=a("../Load/pzaBundleObjectPool"),v=a("../Load/pzaPreLoadManager"),P=a("../Shop/pzaShopConfig"),D=a("../View/Battle/pzaBattleDownView"),S=a("../View/Battle/pzaBattleUpView"),C=a("./pzaGameConfig"),_=a("./pzaGameManager"),E=a("./pzaGamePartConfig"),M=a("./pzaKnockMiniGame"),w=a("./pzaLocalData"),T=a("./pzaNodeManager"),B=a("./pzaSoundManager"),A=a("./pzaSpriteFrameManager"),O=a("./pzaTipManager"),I=a("./pzaUtil"),N=cc._decorator,G=N.ccclass,R=N.property;(function(a){a[a.BLANK=0]="BLANK",a[a.GRASS=1]="GRASS",a[a.POND=2]="POND",a[a.ROOF=3]="ROOF",a[a.ICE=4]="ICE",a[a.DOOM_HOLE=5]="DOOM_HOLE",a[a.GOLD_HOLE=6]="GOLD_HOLE"})(r=e.pzaBlockType||(e.pzaBlockType={}));var L=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.mapSprite=null,t.preMapSprite=null,t.inDoorSprite=null,t.tussock=null,t.previewZombieNode=null,t.previewShadowNode=null,t.plantTouchNode=null,t.battleUpView=null,t.battleDownView=null,t.redLine=null,t.blinkAni=null,t.mapOriPos=null,t.BlockTypeMap=new Map,t.TombSet=new Set,t.TombMap=new Map,t.PreviewZombies=new Set,t.IceGroundSet=new Set,t.DoomHoleSet=new Set,t.GoldHoleSet=new Set,t.ZombieHoleSet=new Set,t.PortalMap=new Map,t.LadderMap=new Map,t.DropCoinSet=new Set,t.CleanCar=new Set,t.fog=null,t.roofPreBg=null,t.mapId=1,t.lockAction=!1,t.waysWeight=[100,100,100,100,100],t.noWaterWayInMap=new Map([[3,[0,1,4,5]],[4,[0,1,4,5]],[8,[0,1,4,5]],[9,[0,1,4,5]],[10,[1,2,3]],[11,[1,2,3]],[13,[2,3]],[18,[2,3,4]]]),t.waterWayInMap=new Map([[3,[2,3]],[4,[2,3]],[8,[2,3]],[9,[2,3]],[11,[0,4]],[13,[0,1,4,5]],[15,[0,1,2,3,4]],[18,[0,1]],[19,[0,1,2,3,4,5]],[20,[0,1,2,3,4,5]]]),t.DoorByMapId=new Map([[0,1],[1,1],[2,2],[3,3],[4,4],[7,7],[10,2],[14,1],[13,3],[17,17],[20,3]]),t.preImgByMapId=new Map([[0,1],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[10,2],[11,11],[12,12],[13,3],[14,1],[15,1],[17,17],[19,19],[20,3]]),t}return n(t,a),t.prototype.onLoad=function(){window.pzaMapManager=this,this.mapOriPos=cc.v2(this.mapSprite.node.position.x,this.mapSprite.node.position.y)},t.prototype.init=function(a,t,e){this.battleDownView.node.active=!1,this.battleUpView.node.active=!1,this.redLine.active=!1,this.inDoorSprite.node.active=!1,this.preMapSprite.node.active=!1,this.blinkAni.node.active=!1,this.mapId=e,A.pzaSpriteFrameManager.loadMap(this.mapSprite,this.mapId);var o=y.pzaGameState.map.getMapOriPos();null!=o&&this.plantTouchNode.setPosition(o.clone()),this.BlockTypeMap.clear(),this.TombSet.clear(),this.TombMap.clear(),this.PreviewZombies.clear(),this.IceGroundSet.clear(),this.DoomHoleSet.clear(),this.GoldHoleSet.clear(),this.ZombieHoleSet.clear(),this.LadderMap.clear(),this.DropCoinSet.clear(),this.PortalMap.clear(),this.fog=null,this.roofPreBg=null,this.initMapPos(!0);var n=y.pzaGameState.map.getMapRow(),i=y.pzaGameState.map.getMapColumn();if(y.pzaGameState.gameMode==y.pzaGameMode.NORMAL){if(1==a&&1==t){for(var p=0;p<i;p++)for(var l=0;l<n;l++){var s=""+p+l,c=2==l?r.GRASS:r.BLANK;this.BlockTypeMap.set(s,c)}return}if(1==a&&2==t){for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,c=1==l||2==l||3==l?r.GRASS:r.BLANK,this.BlockTypeMap.set(s,c);return}}if(1==e||2==e)for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,this.BlockTypeMap.set(s,r.GRASS);else if(3==e||4==e){for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,2==l||3==l?this.BlockTypeMap.set(s,r.POND):this.BlockTypeMap.set(s,r.GRASS);z.pzaEffectManager.createWaterLightEffect()}else if(5==e||6==e){for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,this.BlockTypeMap.set(s,r.ROOF);this.createRoofPreEffect()}else if(7==e)for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,0==p?this.BlockTypeMap.set(s,r.ROOF):1==p&&l>0?this.BlockTypeMap.set(s,r.ROOF):2==p&&l>1?this.BlockTypeMap.set(s,r.ROOF):(3==p||4==p)&&l>2?this.BlockTypeMap.set(s,r.ROOF):this.BlockTypeMap.set(s,r.GRASS);else if(8==e||9==e){for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,2==l||3==l?this.BlockTypeMap.set(s,r.POND):this.BlockTypeMap.set(s,r.ROOF);z.pzaEffectManager.createWaterLightEffect()}else if(10==e||14==e)for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,this.BlockTypeMap.set(s,r.BLANK);else if(11==e){var u={"00":1,"04":1,10:1,14:1,20:1,24:1,60:1,64:1,70:1,74:1,80:1,84:1};for(p=0;p<i;p++)for(l=0;l<n;l++)u[s=""+p+l]?this.BlockTypeMap.set(s,r.POND):this.BlockTypeMap.set(s,r.GRASS)}else if(12==e){for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,this.BlockTypeMap.set(s,r.ROOF);this.createRoofPreEffect()}else if(13==e){for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,2==l||3==l?this.BlockTypeMap.set(s,r.GRASS):this.BlockTypeMap.set(s,r.POND);z.pzaEffectManager.createWaterLightEffect(cc.v2(0,220)),z.pzaEffectManager.createWaterLightEffect(cc.v2(0,-220))}else if(15==e){for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,0==p||1==p||2==p?this.BlockTypeMap.set(s,r.ROOF):3==p||4==p||5==p?this.BlockTypeMap.set(s,r.POND):this.BlockTypeMap.set(s,r.GRASS);z.pzaEffectManager.createWaterLightEffect(cc.v2(0,0),e)}else if(16==e){var d={"04":1,14:1,24:1,30:1,40:1};for(p=0;p<i;p++)for(l=0;l<n;l++)d[s=""+p+l]?this.BlockTypeMap.set(s,r.BLANK):this.BlockTypeMap.set(s,r.GRASS)}else if(17==e)for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,p<=2?this.BlockTypeMap.set(s,r.GRASS):this.BlockTypeMap.set(s,r.BLANK);else if(18==e){for(d={"04":1,14:1,24:1},p=0;p<i;p++)for(l=0;l<n;l++)d[s=""+p+l]?this.BlockTypeMap.set(s,r.BLANK):l<=1?this.BlockTypeMap.set(s,r.POND):this.BlockTypeMap.set(s,r.GRASS);z.pzaEffectManager.createWaterLightEffect(cc.v2(0,-220))}else if(19==e){for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,p<=2?this.BlockTypeMap.set(s,r.ROOF):this.BlockTypeMap.set(s,r.POND);z.pzaEffectManager.createWaterLightEffect(cc.v2(0,0),e)}else if(20==e){for(p=0;p<i;p++)for(l=0;l<n;l++)s=""+p+l,this.BlockTypeMap.set(s,r.POND);z.pzaEffectManager.createWaterLightEffect(cc.v2(0,0),e)}},t.prototype.getRandomWayIndex=function(a,t,e){if(null==t||null==e||e.length<=0)return 0;var o=e[a%e.length];if(t==l.pzaZombieEnum.GARGANTUAR&&o==e.length-1)return I.pzaUtil.getRandomValueFromArray([0,1]);if(C.pzaGameConfig.isAllWayZombie(t))return o;var n=C.pzaGameConfig.isWaterZombie(t),i=this.isInWaterWay(o);return i&&n||!i&&!n?o:n?this.getRandomWaterWay()||o:this.getRandomNoWaterWay()},t.prototype.getRandomNoWaterWay=function(){var a=this.noWaterWayInMap.get(y.pzaGameState.mapId);return a?I.pzaUtil.getRandomValueFromArray(a):I.pzaUtil.getRandomValueFromArray([0,1,2,3,4])},t.prototype.getRandomWaterWay=function(){var a=this.waterWayInMap.get(y.pzaGameState.mapId);return a?I.pzaUtil.getRandomValueFromArray(a):null},t.prototype.isInWaterWay=function(a){var t=this.waterWayInMap.get(y.pzaGameState.mapId);return!!(t&&t.indexOf(a)>=0)},t.prototype.getRowBlockType=function(a){var t="0"+a;return this.BlockTypeMap.get(t)},t.prototype.getBlockType=function(a,t){var e=a+""+t;return this.BlockTypeMap.get(e)},t.prototype.getPlantBlockType=function(a,t){var e=!1;if(this.DoomHoleSet.forEach(function(o){null!=o&&o.mapXIndex==a&&o.mapYIndex==t&&(e=!0)}),e)return r.DOOM_HOLE;if(this.GoldHoleSet.forEach(function(o){null!=o&&o.mapXIndex==a&&o.mapYIndex==t&&(e=!0)}),this.ZombieHoleSet.forEach(function(o){null!=o&&o.mapXIndex==a&&o.mapYIndex==t&&(e=!0)}),e)return r.GOLD_HOLE;var o=!1;if(this.IceGroundSet.forEach(function(e){e.containBlock(a,t)&&(o=!0)}),o)return r.ICE;var n=""+a+t;return this.BlockTypeMap.get(n)},t.prototype.hasTomb=function(a,t){var e=""+a+t;return this.TombSet.has(e)},t.prototype.initMapTomb=function(a,t,e){var o,n=this;if(null==(o=E.pzaGamePartConfig.getPartConfig(a,t))||o.tombCount<=0)e&&e();else{for(var i=o.tombCount,r=y.pzaGameState.map.getMapRow(),p=y.pzaGameState.map.getMapColumn(),l=[],s=o.tombMinRow-1;s<p;s++)for(var c=0;c<r;c++){var u=""+s+c;this.BlockTypeMap.get(u),l.push(u)}var d=I.pzaUtil.getRandomArrayValue(l,i);null!=d&&d.forEach(function(a){n.TombSet.add(a)});var h=function(){--i<=0&&e&&e()},m=!1;for(s=0;s<p;s++)for(c=0;c<r;c++)u=""+s+c,this.TombSet.has(u)&&(this.createTomb(s,c,h),m=!0);m&&B.pzaSoundManager.playAudio("tombCreate")}},t.prototype.randomCreateTomb=function(a,t){var e,o=this;if(void 0===t&&(t=0),null!=(e=E.pzaGamePartConfig.getPartConfig(y.pzaGameState.curChapter,y.pzaGameState.curPart))){var n=y.pzaGameState.map.getMapRow(),i=y.pzaGameState.map.getMapColumn(),r=e.tombMinRow;t>0&&(r=t);for(var p=[],l=[],s=r-1;s<i;s++)for(var c=0;c<n;c++){var u=""+s+c;this.TombSet.has(u)||(p.push(u),window.pzaplantManager.hasPlant(s,c)||l.push(u))}var d=null;(d=I.pzaUtil.getRandomArrayValue(l,a)).length<a&&(d=I.pzaUtil.getRandomArrayValue(p,a)),d.forEach(function(a){o.TombSet.add(a)});var h=!1;for(s=0;s<i;s++)for(c=0;c<n;c++)u=""+s+c,-1!=d.indexOf(u)&&(this.createTomb(s,c,null),window.pzaplantManager.hasPlant(s,c)&&(window.pzaplantManager.removeNormalPlant(s,c),window.pzaplantManager.removePumpkin(s,c),window.pzaplantManager.removeEnvPlant(s,c)),h=!0);h&&B.pzaSoundManager.playAudio("tombCreate")}},t.prototype.createTomb=function(a,t,e,o){var n=this;void 0===o&&(o=!1);var i=T.pzaNodeManager.getDownEffectNode();if(null!=i){var r=cc.v2(y.pzaGameState.map.getXPos(a)+y.pzaGameState.map.getMapOriPos().x+y.pzaGameState.map.getXInterval(a)/2,y.pzaGameState.map.getYPos(t)+.2*y.pzaGameState.map.getYInterval(t)+y.pzaGameState.map.getMapOriPos().y);b.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.TOMB,!1,function(p,l){if(null==p&&null!=l){l.setParent(i),l.setPosition(r);var s=l.getComponent(g.pzaTomb);s&&s.init(a,t,e,o);var c=""+a+t;n.TombMap.set(c,s)}else console.error(p)})}},t.prototype.removeTomb=function(a,t){var e=""+a+t,o=this.TombMap.get(e);o&&o.close(),this.TombMap.delete(e),this.TombSet.delete(e)},t.prototype.initCleanCar=function(){var a=this,t=y.pzaGameState.map.getMapRow(),e=T.pzaNodeManager.getPlantZombieNode();if(null!=e)for(var o=function(t){var o=window.pzaMapManager.getRowBlockType(t),n=1;if(o==r.BLANK)return"continue";if(o==r.ROOF){if(n=3,w.pzaLocalData.getGoodsCount(P.pzaShopItemType.ROOF_CART)<=0)return"continue"}else o==r.POND&&w.pzaLocalData.getGoodsCount(P.pzaShopItemType.POOL_CLEAN_CAR)>0&&(n=2);b.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.CLEANER_CAR,!1,function(o,i){if(null==o&&null!=i){i.setParent(e);var r=i.getComponent(f.pzaCleanCar);r&&r.init(n,t),a.CleanCar.add(r)}else console.error(o)})},n=0;n<t;n++)o(n)},t.prototype.recoverMap=function(a){this.recoverCleanCar(a),this.recoverTomb(a),this.recoverLadder(a),this.recoverDoomHole(a),this.recoverGoldHole(a),this.recoverZombieHole(a)},t.prototype.recoverCleanCar=function(a){var t=this;if(null!=a&&null!=a.cleanCarState){var e=T.pzaNodeManager.getPlantZombieNode();if(null!=e)for(var o=function(o){var n=a.cleanCarState[o];if(null==n||0==n)return"continue";b.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.CLEANER_CAR,!1,function(a,i){if(null==a&&null!=i){i.setParent(e);var r=i.getComponent(f.pzaCleanCar);r&&r.recover(n,o),t.CleanCar.add(r)}else console.error(a)})},n=0;n<6;n++)o(n)}},t.prototype.recoverTomb=function(a){var t=this;null!=a&&null!=a.TombMap&&a.TombMap.forEach(function(a){var e=a.xIndex,o=a.yIndex,n=""+e+o;t.TombSet.add(n),t.createTomb(e,o,null,!0)})},t.prototype.recoverLadder=function(a){var t=this;null!=a&&null!=a.LadderMap&&a.LadderMap.forEach(function(a){var e=a.xIndex,o=a.yIndex;t.createLadder(e,o,null)})},t.prototype.recoverDoomHole=function(a){null!=a&&null!=a.DoomHoleMap&&a.DoomHoleMap.forEach(function(a){var t=a.xIndex,e=a.yIndex,o=y.pzaGameState.map.getXInterval(t)/2,n=y.pzaGameState.map.getYInterval(e)/3;y.pzaGameState.isRoofMode()&&(n=y.pzaGameState.map.getYInterval(e)/6);var i=y.pzaGameState.map.getBlockLogicPos(t,e,o,n);z.pzaEffectManager.createDoomHoleEffect(i,t,e,!0,a.time,a.step)})},t.prototype.recoverGoldHole=function(a){null!=a&&null!=a.GoldHoleMap&&a.GoldHoleMap.forEach(function(a){var t=a.xIndex,e=a.yIndex,o=y.pzaGameState.map.getXInterval(t)/2,n=y.pzaGameState.map.getYInterval(e)/3,i=y.pzaGameState.map.getBlockLogicPos(t,e,o,n);z.pzaEffectManager.createGoldHoleEffect(i,t,e,!0,a.time,a.step)})},t.prototype.recoverZombieHole=function(a){null!=a&&null!=a.ZombieHoleMap&&a.ZombieHoleMap.forEach(function(a){var t=a.xIndex,e=a.yIndex,o=y.pzaGameState.map.getXInterval(t)/2,n=y.pzaGameState.map.getYInterval(e)/3,i=y.pzaGameState.map.getBlockLogicPos(t,e,o,n);z.pzaEffectManager.createZombieHoleEffect(i,t,e,!0,a.time,a.step)})},t.prototype.hasCleanCar=function(a){var t=!1;return this.CleanCar.forEach(function(e){null!=e&&e.yIndex==a&&(t=!0)}),t},t.prototype.getCleanCarState=function(){var a=[];return this.CleanCar.forEach(function(t){null==t||t.hasTrigger||(a[t.yIndex]=t.carType)}),a},t.prototype.createRoofPreEffect=function(){var a=this,t=T.pzaNodeManager.getUpBgNode();null!=t&&b.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.ROOF_PRE_EFFECT,!1,function(e,o){null==e&&null!=o?(o.setParent(t),a.roofPreBg=o.getComponent(d.pzaRoofPreEffect)):console.error(e)})},t.prototype.addIceGround=function(a){this.IceGroundSet.add(a)},t.prototype.removeIceGround=function(a){this.IceGroundSet.delete(a)},t.prototype.removeRowIceGround=function(a){this.IceGroundSet.forEach(function(t){null!=t&&t.yIndex==a&&t.close()})},t.prototype.removeColRowIceGround=function(a,t){this.IceGroundSet.forEach(function(e){null==e||e.xIndex!=a&&e.yIndex!=t||e.close()})},t.prototype.removeAllIceGround=function(){this.IceGroundSet.forEach(function(a){a&&a.close()})},t.prototype.getIceGround=function(a){var t=[];return this.IceGroundSet.forEach(function(e){null!=e&&e.yIndex==a&&t.push(e)}),t},t.prototype.getIceYCount=function(){var a=new Set;return window.pzaMapManager.IceGroundSet.forEach(function(t){null==t||t.xIndex<0||t.yIndex<0||a.has(t.yIndex)||a.add(t.yIndex)}),a.size},t.prototype.addDoomHole=function(a){this.DoomHoleSet.add(a)},t.prototype.removeDoomHole=function(a){this.DoomHoleSet.delete(a)},t.prototype.fogEnter=function(a){var t;null==(t=E.pzaGamePartConfig.getPartConfig(y.pzaGameState.curChapter,y.pzaGameState.curPart))||t.minFogColumn<=0?a&&a():z.pzaEffectManager.createFogEffect(t.minFogColumn,a)},t.prototype.blowFog=function(a){void 0===a&&(a=0),null!=this.fog&&this.fog.blowFog(a)},t.prototype.planternScatterFog=function(a){null!=this.fog&&this.fog.addPlantern(a)},t.prototype.planternRemove=function(a){null!=this.fog&&this.fog.removePlantern(a)},t.prototype.removeFog=function(){null!=this.fog&&(this.fog.close(),this.fog=null)},t.prototype.createPreviewZombie=function(a,t){var e=this,o=10==t?I.pzaUtil.getRandomNum(16,17):I.pzaUtil.getRandomNum(9,10),n=1;1==a&&1==t&&(o=5),y.pzaGameState.isSmallGame()&&(o=I.pzaUtil.getRandomNum(13,14),n=C.pzaGameConfig.miniZombieScale);var i=null;if(null!=(i=E.pzaGamePartConfig.getPartConfig(a,t))){var r=i.getPreviewZombies(o);if(null!=r){var s=[];5==a?(s.push(cc.v2(1450+I.pzaUtil.getRandomFloatNum(-25,25),75)),s.push(cc.v2(1550+I.pzaUtil.getRandomFloatNum(-25,25),75)),s.push(cc.v2(1450+I.pzaUtil.getRandomFloatNum(-25,25),125)),s.push(cc.v2(1550+I.pzaUtil.getRandomFloatNum(-25,25),125)),s.push(cc.v2(1450+I.pzaUtil.getRandomFloatNum(-25,25),175)),s.push(cc.v2(1550+I.pzaUtil.getRandomFloatNum(-25,25),175)),s.push(cc.v2(1450+I.pzaUtil.getRandomFloatNum(-25,25),225)),s.push(cc.v2(1550+I.pzaUtil.getRandomFloatNum(-25,25),225)),s.push(cc.v2(1450+I.pzaUtil.getRandomFloatNum(-25,25),275)),s.push(cc.v2(1550+I.pzaUtil.getRandomFloatNum(-25,25),275)),s.push(cc.v2(1450+I.pzaUtil.getRandomFloatNum(-25,25),325)),s.push(cc.v2(1550+I.pzaUtil.getRandomFloatNum(-25,25),325)),s.push(cc.v2(1450+I.pzaUtil.getRandomFloatNum(-25,25),375)),s.push(cc.v2(1550+I.pzaUtil.getRandomFloatNum(-25,25),375)),s.push(cc.v2(1650+I.pzaUtil.getRandomFloatNum(-25,25),75)),s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),75)),s.push(cc.v2(1650+I.pzaUtil.getRandomFloatNum(-25,25),125)),s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),125)),s.push(cc.v2(1650+I.pzaUtil.getRandomFloatNum(-25,25),175)),s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),175)),s.push(cc.v2(1650+I.pzaUtil.getRandomFloatNum(-25,25),225)),s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),225)),s.push(cc.v2(1650+I.pzaUtil.getRandomFloatNum(-25,25),275)),s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),275)),s.push(cc.v2(1650+I.pzaUtil.getRandomFloatNum(-25,25),325)),s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),325)),s.push(cc.v2(1650+I.pzaUtil.getRandomFloatNum(-25,25),375)),s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),375)),s.push(cc.v2(1650+I.pzaUtil.getRandomFloatNum(-25,25),410)),s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),410))):(s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),40)),s.push(cc.v2(1925+I.pzaUtil.getRandomFloatNum(-25,25),40)),s.push(cc.v2(2025+I.pzaUtil.getRandomFloatNum(-25,25),40)),s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),90)),s.push(cc.v2(1925+I.pzaUtil.getRandomFloatNum(-25,25),90)),s.push(cc.v2(2025+I.pzaUtil.getRandomFloatNum(-25,25),90)),s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),140)),s.push(cc.v2(1925+I.pzaUtil.getRandomFloatNum(-25,25),140)),s.push(cc.v2(2025+I.pzaUtil.getRandomFloatNum(-25,25),140)),s.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),190)),s.push(cc.v2(1925+I.pzaUtil.getRandomFloatNum(-25,25),190)),s.push(cc.v2(2025+I.pzaUtil.getRandomFloatNum(-25,25),190)),s.push(cc.v2(1680+I.pzaUtil.getRandomFloatNum(-20,20),240)),s.push(cc.v2(1780+I.pzaUtil.getRandomFloatNum(-20,20),240)),s.push(cc.v2(1880+I.pzaUtil.getRandomFloatNum(-20,20),240)),s.push(cc.v2(1680+I.pzaUtil.getRandomFloatNum(-20,20),290)),s.push(cc.v2(1780+I.pzaUtil.getRandomFloatNum(-20,20),290)),s.push(cc.v2(1880+I.pzaUtil.getRandomFloatNum(-20,20),290)),s.push(cc.v2(1680+I.pzaUtil.getRandomFloatNum(-20,20),340)),s.push(cc.v2(1780+I.pzaUtil.getRandomFloatNum(-20,20),340)),s.push(cc.v2(1880+I.pzaUtil.getRandomFloatNum(-20,20),340)),s.push(cc.v2(1670+I.pzaUtil.getRandomFloatNum(-30,30),390)),s.push(cc.v2(1770+I.pzaUtil.getRandomFloatNum(-30,30),390)),s.push(cc.v2(1670+I.pzaUtil.getRandomFloatNum(-30,30),440)),s.push(cc.v2(1770+I.pzaUtil.getRandomFloatNum(-30,30),440)),s.push(cc.v2(1670+I.pzaUtil.getRandomFloatNum(-30,30),490)),s.push(cc.v2(1770+I.pzaUtil.getRandomFloatNum(-30,30),490)),s.push(cc.v2(1660+I.pzaUtil.getRandomFloatNum(-20,20),540)),s.push(cc.v2(1700+I.pzaUtil.getRandomFloatNum(-20,20),540))),s.sort(function(){return Math.random()-.5});for(var c=function(a,t){var o=v.pzaPreLoadManager.getZombieUrl(a);b.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(o,i){if(null==o&&null!=i){i.setParent(e.previewZombieNode),i.setPosition(t),i.zIndex=-t.y;var r=i.getComponent(m.pzaBaseZombie),l=new p.pzaBaseData(null,a);l.hp=1,l.logicPos=t,r&&r.preview(l,e.previewShadowNode,n),e.PreviewZombies.add(r)}else console.error(o)})},u=0;u<r.length;u++){var d=r[u],h=s[u];d==l.pzaZombieEnum.BUNGEE_ZOMBIE&&(h=5==a?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),c(d,h)}if((5==a||10==a)&&5==t){var f=[cc.v2(1400,550+100*Math.random()),cc.v2(1500,550+100*Math.random()),cc.v2(1600,550+100*Math.random())];for(u=0;u<3;u++)h=f[u],c(l.pzaZombieEnum.BUNGEE_ZOMBIE,h)}}}},t.prototype.createLadder=function(a,t,e){var o=this,n=T.pzaNodeManager.getPlantZombieNode();if(null!=n){var i=""+a+t;if(this.LadderMap.get(i))e&&e();else{var r=y.pzaGameState.map.getXInterval(a),p=y.pzaGameState.map.getYInterval(t)/3;y.pzaGameState.isRoofMode()&&(p=y.pzaGameState.map.getYInterval(t)/6);var l=y.pzaGameState.map.getBlockLogicPos(a,t,r,p);b.pzaBundleObjectPool.requestInstantByUrl2(v.pzaResourceUrl.LADDER,function(i,r){if(null==i&&null!=r){r.setParent(n),r.setPosition(l);var p=r.getComponent(s.pzaLadder);p&&p.init(a,t,l);var c=""+a+t;o.LadderMap.set(c,p),e&&e()}else console.error(i)})}}},t.prototype.createPitchFork=function(){if(!y.pzaGameState.isRoofMode()&&w.pzaLocalData.consumeGoods(P.pzaShopItemType.PITCHFORK,1)){var a=7,t=[0,1,2,3,4];4==y.pzaGameState.curChapter&&5==y.pzaGameState.curPart?a=5:3!=y.pzaGameState.curChapter&&4!=y.pzaGameState.curChapter||(t=[0,1,4,5]);var e=I.pzaUtil.getRandomValueFromArray(t),o=T.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=y.pzaGameState.map.getXInterval(a),i=y.pzaGameState.map.getBlockLogicPos(a,e,n,0);b.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.PITCHFORK,!1,function(a,t){if(null==a&&null!=t){t.setParent(o),t.setPosition(i),t.zIndex=10*-e;var n=t.getComponent(c.pzaPitchFork);n&&n.init(e)}else console.error(a)})}}},t.prototype.hasLadder=function(a,t){var e=""+a+t;return this.LadderMap.has(e)},t.prototype.removeLadder=function(a,t){var e=""+a+t,o=this.LadderMap.get(e);null!=o&&(o.close(),this.LadderMap.delete(e))},t.prototype.clearLadder=function(){this.LadderMap.forEach(function(a){a&&a.close()}),this.LadderMap.clear()},t.prototype.closePreviewZombie=function(){this.PreviewZombies.forEach(function(a){a&&a.previewClose()}),this.PreviewZombies.clear()},t.prototype.previewMap=function(a,t){var e=this;_.pzaGameManager.getCurrentGame().createPreviewZombie(this,y.pzaGameState.curChapter,y.pzaGameState.curPart),this.node.stopAllActions(),this.lockAction=!0;var o=this.mapSprite.node.width*(1-this.mapSprite.node.anchorX)-(1280+(cc.winSize.width-1280)/2);y.pzaGameState.isRoofMode()&&(o-=250);var n=function(){e.node.runAction(cc.sequence(cc.delayTime(t?.1:1.5),cc.callFunc(function(){e.roofPreBg&&e.roofPreBg.hideTree()}),cc.moveTo(1.5,cc.v2(-o,0)).easing(cc.easeSineIn()),cc.callFunc(function(){e.lockAction=!1,a&&a()})))};if(!t)return n();O.pzaTipManager.showPreviewTip(y.pzaGameState.curChapter,y.pzaGameState.curPart,y.pzaGameState.gameMode,n)},t.prototype.cancelPreviewMap=function(a,t){var e=this;this.createPitchFork(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(a),cc.callFunc(function(){e.roofPreBg&&e.roofPreBg.showTree()}),cc.moveTo(1.5,cc.v2()),cc.delayTime(.3),cc.callFunc(function(){e.closePreviewZombie(),t&&t()})))},t.prototype.lookLawn=function(a){this.node.stopAllActions(),this.roofPreBg&&this.roofPreBg.showTree(),this.node.runAction(cc.sequence(cc.moveTo(1.5,cc.v2()),cc.delayTime(.3),cc.callFunc(function(){a&&a()})))},t.prototype.cancelLookLawn=function(a){this.node.stopAllActions();var t=this.mapSprite.node.width*(1-this.mapSprite.node.anchorX)-(1280+(cc.winSize.width-1280)/2);y.pzaGameState.isRoofMode()&&(t-=250),this.roofPreBg&&this.roofPreBg.hideTree(),this.node.runAction(cc.sequence(cc.moveTo(1.5,cc.v2(-t,0)).easing(cc.easeSineIn()),cc.callFunc(function(){a&&a()})))},t.prototype.trampleShakeMap=function(){this.lockAction||(this.node.stopAllActions(),this.node.runAction(cc.repeat(cc.sequence(cc.moveTo(.05,cc.v2(-2,-5)),cc.moveTo(.05,cc.v2())),3)))},t.prototype.shakeMap=function(){this.lockAction||(this.node.stopAllActions(),this.node.runAction(cc.repeat(cc.sequence(cc.moveTo(.05,cc.v2(-2,5)),cc.moveTo(.05,cc.v2())),3)))},t.prototype.failShowInfactMap=function(a){void 0===a&&(a=null),this.node.stopAllActions();var t=this.mapSprite.node.width*this.mapSprite.node.anchorX-(cc.winSize.width-1280)/2;t=Math.max(0,t),this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){a&&a()}),cc.moveTo(1.5,cc.v2(t,0)),cc.callFunc(function(){y.pzaGameState.finishShowWinShowMap=!0})))},t.prototype.initMapPos=function(a){if(this.node.stopAllActions(),a){var t=this.mapSprite.node.width*this.mapSprite.node.anchorX-(cc.winSize.width-1280)/2;t=Math.max(0,t),this.node.setPosition(cc.v2(t,0))}else this.node.setPosition(cc.v2())},t.prototype.openBattleUI=function(){this.battleUpView.node.active=!0,this.battleDownView.node.active=!0},t.prototype.closeBattleUI=function(){this.battleUpView.node.active=!1,this.battleDownView.node.active=!1},t.prototype.showSunUI=function(){this.battleDownView.showSunUI(),y.pzaGameState.showSunUI=!0},t.prototype.hideSunUI=function(){this.battleDownView.hideSunUI(),y.pzaGameState.showSunUI=!1},t.prototype.showCoinUI=function(){this.battleUpView.showCoinNode()},t.prototype.blink=function(a){0==a?this.blinkAni.blinkGreen():1==a?this.blinkAni.blinkRed():2==a&&this.blinkAni.blinkWhite()},t.prototype.transitionAni=function(a){this.blinkAni.playTransition(a)},t.prototype.showRedLine=function(a){this.redLine.active=!0,this.redLine.x=-440+y.pzaGameState.map.getXPos(a)},t.prototype.showPauseBtn=function(){this.battleDownView.showPauseBtn()},t.prototype.openDoor=function(){this.preMapSprite.node.active=!0,this.inDoorSprite.node.active=!0;var a=this.DoorByMapId.get(this.mapId),t=this.preImgByMapId.get(this.mapId);a&&A.pzaSpriteFrameManager.loadInDoor(a,this.inDoorSprite),t&&A.pzaSpriteFrameManager.loadPreMap(t,this.preMapSprite),1==t?(this.preMapSprite.node.setPosition(cc.v2(-730,-24)),this.inDoorSprite.node.setPosition(cc.v2(-597,-23))):2==t||10==t?(this.preMapSprite.node.setPosition(cc.v2(-730,-24)),this.inDoorSprite.node.setPosition(cc.v2(-594,-42))):3==t||20==t?(this.preMapSprite.node.setPosition(cc.v2(-760,-25.3)),this.inDoorSprite.node.setPosition(cc.v2(-683,-24))):4==t?(this.preMapSprite.node.setPosition(cc.v2(-760,-25.3)),this.inDoorSprite.node.setPosition(cc.v2(-683,-24))):5==t||6==t?(this.preMapSprite.node.setPosition(cc.v2(-560,13)),this.inDoorSprite.node.active=!1):7==t||17==t?(this.preMapSprite.node.setPosition(cc.v2(-729.87,39.92)),this.inDoorSprite.node.setPosition(cc.v2(-627.98,41.33))):12==t?(this.preMapSprite.node.setPosition(cc.v2(-667.31,10)),this.inDoorSprite.node.active=!1):11==t||19==t?(this.preMapSprite.node.setPosition(cc.v2(-741.68,-31.72)),this.inDoorSprite.node.active=!1):(this.preMapSprite.node.active=!1,this.inDoorSprite.node.active=!1)},t.prototype.createPortalDoor=function(a,t,e,o,n){var i=this,r=T.pzaNodeManager.getPlantZombieNode();null!=r&&b.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.PORTAL_DOOR,!1,function(p,l){null==p&&null!=l?b.pzaBundleObjectPool.requestInstantByUrl(v.pzaResourceUrl.PORTAL_DOOR,!1,function(p,s){if(null!=p||null==s)return l.destroy(),void console.error(p);l.setParent(r);var c=l.getComponent(u.pzaPortalDoor);s.setParent(r);var d=s.getComponent(u.pzaPortalDoor);c&&c.init(d,a,t,e),d&&d.init(c,a,o,n),i.PortalMap.set(""+t+e,c),i.PortalMap.set(""+o+n,d)}):console.error(p)})},t.prototype.miniGameinitMapTomb=function(a){var t=this,e=_.pzaGameManager.getGame(y.pzaGameMode.KNOCK_ZOMBIE,M.pzaKnockMiniGame).getConf(y.pzaGameState.curPart);if(!(null==e||e.tombstone<=0)){for(var o=e.tombstone,n=y.pzaGameState.map.getMapRow(),i=y.pzaGameState.map.getMapColumn(),p=[],l=e.tombstonemini-1;l<i;l++)for(var s=0;s<n;s++){var c=""+l+s,u=this.BlockTypeMap.get(c);u!=r.GRASS&&u!=r.ROOF||p.push(c)}var d=I.pzaUtil.getRandomArrayValue(p,o);null!=d&&d.forEach(function(a){t.TombSet.add(a)});var h=function(){--o<=0&&a&&a()},m=!1;for(l=0;l<i;l++)for(s=0;s<n;s++)c=""+l+s,this.TombSet.has(c)&&(this.createTomb(l,s,h),m=!0);m&&B.pzaSoundManager.playAudio("tombCreate")}},i([R({displayName:"\u5730\u56fe",type:cc.Sprite})],t.prototype,"mapSprite",void 0),i([R({displayName:"\u5730\u56fe\u524d\u666f",type:cc.Sprite})],t.prototype,"preMapSprite",void 0),i([R({displayName:"\u5f00\u95e8",type:cc.Sprite})],t.prototype,"inDoorSprite",void 0),i([R({displayName:"\u8349\u4e1b",type:cc.Node})],t.prototype,"tussock",void 0),i([R({displayName:"\u5730\u56fe\u9884\u89c8\u50f5\u5c38\u8282\u70b9",type:cc.Node})],t.prototype,"previewZombieNode",void 0),i([R({displayName:"\u5730\u56fe\u9884\u89c8\u5f71\u5b50\u8282\u70b9",type:cc.Node})],t.prototype,"previewShadowNode",void 0),i([R({displayName:"\u5730\u56fe\u79cd\u690d\u8282\u70b9",type:cc.Node})],t.prototype,"plantTouchNode",void 0),i([R({displayName:"\u5730\u56fe\u4e0a\u5c42UI",type:S.pzaBattleUpView})],t.prototype,"battleUpView",void 0),i([R({displayName:"\u5730\u56fe\u4e0b\u5c42UI",type:D.pzaBattleDownView})],t.prototype,"battleDownView",void 0),i([R({displayName:"\u7ea2\u7ebf",type:cc.Node})],t.prototype,"redLine",void 0),i([R({displayName:"\u95ea\u5c4f\u52a8\u753b",type:h.pzaSpeedBlinkEffect})],t.prototype,"blinkAni",void 0),i([G],t)}(cc.Component);e.pzaMapManager=L,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Effect/pzaLadder":"pzaLadder","../Battle/Effect/pzaPitchFork":"pzaPitchFork","../Battle/Effect/pzaPortalDoor":"pzaPortalDoor","../Battle/Effect/pzaRoofPreEffect":"pzaRoofPreEffect","../Battle/Effect/pzaSpeedBlinkEffect":"pzaSpeedBlinkEffect","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaCleanCar":"pzaCleanCar","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Battle/pzaTomb":"pzaTomb","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../View/Battle/pzaBattleDownView":"pzaBattleDownView","../View/Battle/pzaBattleUpView":"pzaBattleUpView","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaKnockMiniGame":"pzaKnockMiniGame","./pzaLocalData":"pzaLocalData","./pzaNodeManager":"pzaNodeManager","./pzaSoundManager":"pzaSoundManager","./pzaSpriteFrameManager":"pzaSpriteFrameManager","./pzaTipManager":"pzaTipManager","./pzaUtil":"pzaUtil"}],pzaMarigoldMammon:[function(a,t,e){"use strict";cc._RF.push(t,"6fa34XdKq1MRr2QURr0cQ7x","pzaMarigoldMammon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMarigoldMammon=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../Bullet/pzaGoldBullet"),c=a("../Data/pzaBuffData"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.shootNode=null,t.blinkTime=3,t.attackTime=5,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle1_eye",!1,o))};this.animation.playAnimation("idle1",!1,o),this.attackTime=5},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData&&this.attackTime>0&&(this.attackTime-=t,this.attackTime<=0)){var e=this.findAttackTarget();if(null!=e)return this.attack(e),void(this.attackTime=5);this.attackTime=.5}},t.prototype.attack=function(a){var t=this;if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var e=p.pzaNodeManager.getBulletNode();if(null!=e){var o=l.pzaUtil.getRandomIndexByWeight([60,30,10]),n=0,i=0;0==o?(n=10,i=100):1==o?(n=4,i=500):2==o&&(n=3,i=1e3);for(var c=0;c<n;c++)this.scheduleOnce(function(){if(t.baseData){var n=r.pzaGameCommonPool.requestInstant2(t.bulletPrefab);if(n){n.setParent(e);var p=t.shootNode.convertToWorldSpaceAR(cc.v2()),l=e.convertToNodeSpaceAR(p),c=n.getComponent(s.pzaGoldBullet);c&&c.bulletInit(t.baseData,o),c&&c.init(i,a,l,t.baseData.yIndex)}}},.1*c)}}},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(c.pzaBuffType.DIVE)&&!r.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(c.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m({displayName:"\u653b\u51fb\u4f4d\u7f6e",type:cc.Node})],t.prototype,"shootNode",void 0),i([h],t)}(u.pzaBasePlant);e.pzaMarigoldMammon=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaGoldBullet":"pzaGoldBullet","../Data/pzaBuffData":"pzaBuffData","./pzaBasePlant":"pzaBasePlant"}],pzaMarigold:[function(a,t,e){"use strict";cc._RF.push(t,"9267fAJVONNm59HBZWdHpJe","pzaMarigold");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMarigold=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaDropType"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};this.animation.playAnimation("idle",!1,o),this.baseData.plantData.atkInterval=24,c.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),!(null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,c.pzaGameState.maxMarigold<=0||window.pzazombieManager.lastWave||(this.baseData.plantData.atkInterval-=t,this.baseData.plantData.atkInterval>0)))){r.pzaSoundManager.playAudio("Marigold"),this.baseData.plantData.atkInterval=24;var e=null;Math.random()>.9?(e=l.pzaDropType.GOLD_COIN,c.pzaGameState.maxMarigold-=50):(e=l.pzaDropType.SILVER_COIN,c.pzaGameState.maxMarigold-=10),s.pzaEffectManager.createDropCoin(e,this.baseData.logicPos)}},i([h],t)}(u.pzaBasePlant));e.pzaMarigold=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaDropType":"pzaDropType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMelonBullet:[function(a,t,e){"use strict";cc._RF.push(t,"b5ebbvpGcdCgqK2pACZPlcL","pzaMelonBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMelonBullet=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaZombieEnum"),l=a("../Plant/pzaAttackType"),s=a("../pzaGameState"),c=a("./pzaRotateBullet"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.colliderZombie=function(a){if(a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==p.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&!(a.zombieData&&a.zombieData.hypnosis||a.buffData.hasBuff(r.pzaBuffType.FLY)||a.buffData.hasBuff(r.pzaBuffType.INVINCIBLE)||a.buffData.hasBuff(r.pzaBuffType.DIVE))){var t=window.pzazombieManager.getZombie(a);if(null!=t){t.hurt(this.atk,null,l.pzaAttackType.THROW_ATK);for(var e=[],o=a.yIndex-1;o<=a.yIndex+1;o++)o<0||o>=s.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[o].forEach(function(t){null!=t&&t!=a&&t.xIndex==a.xIndex&&(t.buffData.hasBuff(r.pzaBuffType.FLY)||t.buffData.hasBuff(r.pzaBuffType.DIVE)||t.buffData.hasBuff(r.pzaBuffType.INVINCIBLE)||e.push(t))});e.forEach(function(a){var t=window.pzazombieManager.getZombie(a);null!=t&&t.hurt(26)}),this.close(),this.playHitEffect(a)}}},i([d],t)}(c.pzaRotateBullet));e.pzaMelonBullet=h,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","./pzaRotateBullet":"pzaRotateBullet"}],pzaMelonNut:[function(a,t,e){"use strict";cc._RF.push(t,"fefa2MFDzJDa5Qtr5EbQ0ws","pzaMelonNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMelonNut=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaThrowBullet"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaPlantEnum"),h=a("../pzaGameState"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t.atkTimes=2,t.aniCom=function(){if(t.atkTimes>0)t.animation.playAnimation("idle1",!1,t.aniCom.bind(t));else{var a=t.findAttackTarget();if(a)return t.atkTimes=t.atkInterval,l.pzaSoundManager.playAudio("melonimpact"),void t.animation.playAnimation("attack",!1,t.aniCom,function(){t.attack(a)});t.animation.playAnimation("idle1",!1,t.aniCom)}},t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=d.pzaPlantCate.Nut,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.atkTimes=0,this.aniCom(),h.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.atkTimes-=t,!this.attacking&&h.pzaGameState.isZombieMode()&&this.aniCom()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(u.pzaBuffType.FLY)&&!o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var s=cc.v2(l.x+this.baseData.logicPos.x+16,l.y+this.baseData.logicPos.y+57);i.setPosition(s);var u=i.getComponent(c.pzaThrowBullet);null!=u&&(u.init(!1,this.baseData.yIndex,this.baseData.atk,a,n),u.updateBulletAngel(90),u.hasSpatter=!0)}}}}}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},t.prototype.hurt=function(t,e,o){a.prototype.hurt.call(this,t,e,o)},i([y({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([y({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([z],t)}(m.pzaBasePlant);e.pzaMelonNut=g,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMelonPult:[function(a,t,e){"use strict";cc._RF.push(t,"64a61e7cCtKGIFerGr5ltkK","pzaMelonPult");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMelonPult=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaThrowBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.melonDataInit()},t.prototype.melonDataInit=function(){this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack"),d.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null!=e)return l.pzaSoundManager.playAudio("melonimpact"),void a.animation.playAnimation("attack",!1,t,function(){a.attack(e)},a.atkAniTime/a.atkInterval);a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};t()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(u.pzaBuffType.FLY)&&!o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)&&!o.buffData.hasBuff(u.pzaBuffType.DIVE)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var s=cc.v2(l.x+this.baseData.logicPos.x+16,l.y+this.baseData.logicPos.y+57);i.setPosition(s);var u=i.getComponent(c.pzaThrowBullet);null!=u&&(u.init(!1,this.baseData.yIndex,this.baseData.atk,a,n),u.updateBulletAngel(90),u.hasSpatter=!0)}}}}}},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaMelonPult=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMenuView:[function(a,t,e){"use strict";cc._RF.push(t,"2ba1170aStGH6sXVabAjldb","pzaMenuView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMenuView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameManager"),s=a("../../Common/pzaLocalData"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaTipManager"),d=a("../../Common/pzaUIManager"),h=a("../../Common/pzaUtil"),m=a("../../Common/pzaWorldEventManager"),f=a("../../Load/pzaPreLoadManager"),z=a("../../utils/pzaChannel"),y=a("../pzaHandbookView"),g=a("../pzaWarningView"),b=a("./pzaAssessView"),v=a("./pzaOptionView"),P=cc._decorator,D=P.ccclass,S=P.property,C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.assessNode=null,t.menuNode=null,t.optionNode=null,t.handBookNode=null,t.backNode=null,t.restartNode=null,t.backGameCall=null,t.needSaveGame=!1,t.curTouchBtn=null,t}return n(t,a),t.prototype.onEnable=function(){if(c.pzaSoundManager.playAudio("pause"),r.pzaGameState.isMenuShow=!0,this.curTouchBtn=null,this.assessNode.on(cc.Node.EventType.TOUCH_START,this.clickAssessStart,this),this.assessNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickAssess,this),this.assessNode.on(cc.Node.EventType.TOUCH_END,this.clickAssess,this),this.menuNode.on(cc.Node.EventType.TOUCH_START,this.clickMainMenuStart,this),this.menuNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickMainMenu,this),this.menuNode.on(cc.Node.EventType.TOUCH_END,this.clickMainMenu,this),this.optionNode.on(cc.Node.EventType.TOUCH_START,this.clickOptionStart,this),this.optionNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickOption,this),this.optionNode.on(cc.Node.EventType.TOUCH_END,this.clickOption,this),this.handBookNode.on(cc.Node.EventType.TOUCH_START,this.clickHandbookStart,this),this.handBookNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickHandbook,this),this.handBookNode.on(cc.Node.EventType.TOUCH_END,this.clickHandbook,this),this.backNode.on(cc.Node.EventType.TOUCH_START,this.clickBackGameStart,this),this.backNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickBackGame,this),this.backNode.on(cc.Node.EventType.TOUCH_END,this.clickBackGame,this),this.restartNode.on(cc.Node.EventType.TOUCH_START,this.clickRestartStart,this),this.restartNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickRestart,this),this.restartNode.on(cc.Node.EventType.TOUCH_END,this.clickRestart,this),z.pzaChannel.instance().showInter(),"wx"==z.pzaChannel.instance().channel||"tt"==z.pzaChannel.instance().channel){var a=this.node.getChildByName("board");a&&(a.y=80)}},t.prototype.onDisable=function(){r.pzaGameState.isMenuShow=!1,this.curTouchBtn=null,z.pzaChannel.instance().closeBanner(),this.assessNode.off(cc.Node.EventType.TOUCH_START,this.clickAssessStart,this),this.assessNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickAssess,this),this.assessNode.off(cc.Node.EventType.TOUCH_END,this.clickAssess,this),this.menuNode.off(cc.Node.EventType.TOUCH_START,this.clickMainMenuStart,this),this.menuNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickMainMenu,this),this.menuNode.off(cc.Node.EventType.TOUCH_END,this.clickMainMenu,this),this.optionNode.off(cc.Node.EventType.TOUCH_START,this.clickOptionStart,this),this.optionNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickOption,this),this.optionNode.off(cc.Node.EventType.TOUCH_END,this.clickOption,this),this.handBookNode.off(cc.Node.EventType.TOUCH_START,this.clickHandbookStart,this),this.handBookNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickHandbook,this),this.handBookNode.off(cc.Node.EventType.TOUCH_END,this.clickHandbook,this),this.backNode.off(cc.Node.EventType.TOUCH_START,this.clickBackGameStart,this),this.backNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickBackGame,this),this.backNode.off(cc.Node.EventType.TOUCH_END,this.clickBackGame,this),this.restartNode.off(cc.Node.EventType.TOUCH_START,this.clickRestartStart,this),this.restartNode.off(cc.Node.EventType.TOUCH_CANCEL,this.clickRestart,this),this.restartNode.off(cc.Node.EventType.TOUCH_END,this.clickRestart,this)},t.prototype.init=function(a,t){this.backGameCall=function(){c.pzaSoundManager.resumeMusic(),a&&a()},this.needSaveGame=t},t.prototype.clickAssessStart=function(){this.curTouchBtn||(this.curTouchBtn=this.assessNode.uuid)},t.prototype.clickAssess=function(){var a=this;this.curTouchBtn===this.assessNode.uuid&&(this.curTouchBtn=null,d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.GAME_ASSESS_VIEW,function(t){var e=t&&t.getComponent(b.pzaAssessView);e&&e.bindBackGameCall(a.backGameCall),a.close()}))},t.prototype.clickMainMenuStart=function(){this.curTouchBtn||(this.curTouchBtn=this.menuNode.uuid)},t.prototype.clickMainMenu=function(){var a=this;this.curTouchBtn===this.menuNode.uuid&&(this.curTouchBtn=null,s.pzaLocalData.data.autoPickLeft=r.pzaGameState.autoPickLeft,s.pzaLocalData.addDirty("autoPickLeft"),this.needSaveGame?d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(g.pzaWarningView);e&&e.show("\u4f60\u60f3\u8981\u56de\u5230\u4e3b\u83dc\u5355\u5417\uff1f\n\n\u4f60\u7684\u6e38\u620f\u5df2\u50a8\u5b58\u3002","\u79bb\u5f00","\u53d6\u6d88",function(){window.pzaGuideManager.guidePlant=null,window.pzaGuideManager.guideType=null,r.pzaGameState.midOut=!0,h.pzaUtil.changeGameSpeed(1),d.pzaUIManager.baseShowBoardUI(f.pzaResourceUrl.HOME_SELECT_VIEW,null),a.close(),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.BACK_HOMEVIEW,null)},null,"\u79bb\u5f00\u6e38\u620f\uff1f")}):(l.pzaGameManager.removeBattleUI(),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_OVER,null),h.pzaUtil.changeGameSpeed(1),d.pzaUIManager.baseShowBoardUI(f.pzaResourceUrl.HOME_SELECT_VIEW,null),this.close(),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.BACK_HOMEVIEW,null)))},t.prototype.clickOptionStart=function(){this.curTouchBtn||(this.curTouchBtn=this.optionNode.uuid)},t.prototype.clickOption=function(){var a=this;this.curTouchBtn===this.optionNode.uuid&&(this.curTouchBtn=null,d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.GAME_OPTION_VIEW,function(t){var e=t&&t.getComponent(v.pzaOptionView);e&&e.init(!0,a.backGameCall),a.close()}))},t.prototype.clickHandbookStart=function(){this.curTouchBtn||(this.curTouchBtn=this.handBookNode.uuid)},t.prototype.clickHandbook=function(){this.curTouchBtn===this.handBookNode.uuid&&(this.curTouchBtn=null,s.pzaLocalData.data.unlockBook?d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(y.pzaHandbookView);t&&t.jdInit()}):d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(g.pzaWarningView);t&&t.show("\u5728\u5192\u9669\u6a21\u5f0f\u4e2d\u5b8c\u6210\u66f4\u591a\u5173\u5361\n\u89e3\u9501\u5927\u56fe\u9274\u3002","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")}))},t.prototype.clickBackGameStart=function(){this.curTouchBtn||(this.curTouchBtn=this.backNode.uuid)},t.prototype.clickBackGame=function(){this.curTouchBtn===this.backNode.uuid&&(this.curTouchBtn=null,this.backGameCall&&this.backGameCall(),this.close())},t.prototype.clickRestartStart=function(){this.curTouchBtn||(this.curTouchBtn=this.restartNode.uuid)},t.prototype.clickRestart=function(){var a=this;if(this.curTouchBtn===this.restartNode.uuid){this.curTouchBtn=null;var t=s.pzaLocalData.endLessPowerCost;(l.pzaGameManager.getCurrentGame().isMainMode()||r.pzaGameState.judgeIsMini(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsVase(r.pzaGameState.gameMode)||r.pzaGameState.judgeIsZombie(r.pzaGameState.gameMode))&&(t=s.pzaLocalData.normalPowerCost),s.pzaLocalData.isShowPowerGift||(t=0),d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.WARNING_VIEW,function(e){var o=e&&e.getComponent(g.pzaWarningView);o&&o.show("\u4f60\u60f3\u8981\u518d\u6b21\u4ece\u5934\u8fdb\u884c\u8fd9\u4e00\u5173\u5361\u5417\uff1f","\u91cd\u65b0\u5f00\u59cb","\u53d6\u6d88",function(){if(s.pzaLocalData.data.power<t)return u.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void d.pzaUIManager.showPowerView();s.pzaLocalData.setPower(-t),window.pzaplantManager.clearAllPlant(),s.pzaLocalData.data.autoPickLeft=r.pzaGameState.autoPickLeft,s.pzaLocalData.addDirty("autoPickLeft"),l.pzaGameManager.removeBattleUI(),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_OVER,null),h.pzaUtil.changeGameSpeed(1),l.pzaGameManager.getCurrentGame().gameRestart(),a.close()},null,"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1,!1,0,!0,t,!1,1)})}},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node),this.curTouchBtn=null},i([S({displayName:"\u8bc4\u4ef7\u8282\u70b9",type:cc.Node})],t.prototype,"assessNode",void 0),i([S({displayName:"\u4e3b\u83dc\u5355\u8282\u70b9",type:cc.Node})],t.prototype,"menuNode",void 0),i([S({displayName:"\u9009\u9879\u8282\u70b9",type:cc.Node})],t.prototype,"optionNode",void 0),i([S({displayName:"\u56fe\u9274\u8282\u70b9",type:cc.Node})],t.prototype,"handBookNode",void 0),i([S({displayName:"\u8fd4\u56de\u8282\u70b9",type:cc.Node})],t.prototype,"backNode",void 0),i([S({displayName:"\u91cd\u65b0\u5f00\u59cb\u8282\u70b9",type:cc.Node})],t.prototype,"restartNode",void 0),i([D],t)}(cc.Component);e.pzaMenuView=C,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaHandbookView":"pzaHandbookView","../pzaWarningView":"pzaWarningView","./pzaAssessView":"pzaAssessView","./pzaOptionView":"pzaOptionView"}],pzaMineBuster:[function(a,t,e){"use strict";cc._RF.push(t,"6b30dTUCatDyqnQfu2cRRcJ","pzaMineBuster");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMineBuster=void 0;var r=a("../Data/pzaDropType"),p=a("../Data/pzaPlantEnum"),l=a("../pzaEffectManager"),s=a("./pzaGraveBuster"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.swallowEnd=function(){window.pzaplantManager.removePlant(this.baseData),this.death(),window.pzaMapManager.removeTomb(this.baseData.xIndex,this.baseData.yIndex),l.pzaEffectManager.createDirtEffect("idle2",this.baseData.yIndex,this.baseData.logicPos,null),Math.random()<=.2?l.pzaEffectManager.createDropCoin(r.pzaDropType.GOLD_COIN,this.baseData.logicPos):l.pzaEffectManager.createDropCoin(r.pzaDropType.SILVER_COIN,this.baseData.logicPos),window.pzaplantManager.createRandomPlant(p.pzaPlantEnum.SunMine,this.baseData.xIndex,this.baseData.yIndex,!0)},i([u],t)}(s.pzaGraveBuster));e.pzaMineBuster=d,cc._RF.pop()},{"../Data/pzaDropType":"pzaDropType","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","./pzaGraveBuster":"pzaGraveBuster"}],pzaMiniGameConf:[function(a,t,e){"use strict";cc._RF.push(t,"5af1652cu9KdaPvDGA0qgi7","pzaMiniGameConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMiniGameConf=void 0;e.pzaMiniGameConf=function(a,t,e,o,n,i,r,p,l,s,c,u,d,h,m,f,z,y,g,b,v,P){void 0===i&&(i=1),void 0===r&&(r=0),this.id=0,this.name="",this.maxWave=0,this.waveZombieDensity=[],this.zombieTypes=[],this.magnification=1,this.flowerPotColumn=0,this.initialCards=[],this.plantCardsId=[],this.plantCardsWeight=[],this.lastBungeeMinColumn=0,this.lastBungeeZombie=0,this.initSun=0,this.bossHp=0,this.tombstone=0,this.tombstonemini=0,this.lastWaterWaveMinColumn=0,this.lastWaterWaveZombie=0,this.minWaterWave=0,this.fog=0,this.mapId=0,this.isnight=0,this.id=a,this.name=t,this.maxWave=e,this.waveZombieDensity=o,this.zombieTypes=n,this.magnification=i,this.flowerPotColumn=r,this.initialCards=p,this.plantCardsId=l,this.plantCardsWeight=s,this.lastBungeeMinColumn=c,this.lastBungeeZombie=u,this.initSun=d,this.bossHp=h,this.tombstone=m,this.tombstonemini=f,this.lastWaterWaveMinColumn=z,this.lastWaterWaveZombie=y,this.minWaterWave=g,this.fog=b,this.mapId=v,this.isnight=P},cc._RF.pop()},{}],pzaMiniGameItem:[function(a,t,e){"use strict";cc._RF.push(t,"d5afcbz1DpFm4ycnNaxYrDg","pzaMiniGameItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMiniGameItem=void 0;var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameConfig"),l=a("../Common/pzaGameManager"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaStatisticsMgr"),u=a("../Common/pzaTipManager"),d=a("../Common/pzaUIManager"),h=a("../Common/pzaWorldEventManager"),m=a("../Load/pzaPreLoadManager"),f=a("../utils/pzaChannel"),z=a("../utils/pzakc"),y=a("./pzaCommonMask"),g=a("./pzaWarningView"),b=cc._decorator,v=b.ccclass,P=b.property,D=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.trophyNode=null,t.lockNode=null,t.bg=null,t.starNode=null,t.starCount=null,t.starPro=null,t.blackCurtain=null,t.tokenCoinNode=null,t.trophySpriArr=[],t.imgBgSprArr=[],t.gameImg=null,t.gameName=null,t.newFlagNode=null,t.rewardUsedTip=null,t.startGameNode=null,t.gameMode=null,t.curPart=0,t.unlock=!1,t.startGameCall=null,t.refreshCall=null,t.costPower=s.pzaLocalData.normalPowerCost,t.gameDelayTime=1.5,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.on(cc.Node.EventType.TOUCH_END,this.clickItem,this),this.startGameNode.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startGameNode.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startGameNode.on(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.off(cc.Node.EventType.TOUCH_END,this.clickItem,this),this.startGameNode.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startGameNode.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startGameNode.off(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.bindData=function(a,t,e,o){this.startGameNode&&(this.startGameNode.getChildByName("rightPower").getChildByName("rightPowercost").getComponent(cc.Label).string="X"+s.pzaLocalData.normalPowerCost),this.newFlagNode.active=!1,this.rewardUsedTip.active=!1,7==t.id?a=r.pzaGameMode.KNOCK_ZOMBIE:8==t.id&&(a=r.pzaGameMode.SMALL_ZOMBIE),this.trophyNode.setPosition(cc.v2(-67,72)),this.gameMode=a,this.curPart=t.id,this.startGameCall=e,this.refreshCall=o,this.gameName.string=t.name+"",this.refreshItem();for(var n=0;n<s.pzaLocalData.data.miniGameNewFlagArr.length;n++)s.pzaLocalData.data.miniGameNewFlagArr[n][0]==this.curPart&&1==s.pzaLocalData.data.miniGameNewFlagArr[n][1]&&(this.newFlagNode.active=!0,this.newFlagNode.angle=0,cc.Tween.stopAllByTarget(this.newFlagNode),z.default.ani_JitterNode(this.newFlagNode,.4,15,3,!0));s.pzaLocalData.isShowPowerGift||(this.costPower=0,this.gameDelayTime=0,this.startGameNode.active=!1)},t.prototype.refreshItem=function(){null==s.pzaLocalData.data.miniUnLockCnt[this.curPart-1]&&(s.pzaLocalData.data.miniUnLockCnt[this.curPart-1]=0),null==s.pzaLocalData.data.miniFirstPassArr[this.curPart-1]&&(s.pzaLocalData.data.miniFirstPassArr[this.curPart-1]=0),this.starCount.string=s.pzaLocalData.getAllStar()+"/"+p.pzaGameConfig.getAllPartStar(!1,!0),this.starPro.width=s.pzaLocalData.getAllStar()/p.pzaGameConfig.getAllPartStar(!1,!0)*150>=150?150:s.pzaLocalData.getAllStar()/p.pzaGameConfig.getAllPartStar(!1,!0)*150,this.unlock=s.pzaLocalData.getAllStar()>=p.pzaGameConfig.getAllPartStar(!1,!0),this.unlock||(this.unlock=s.pzaLocalData.data.miniUnLockCnt[this.curPart-1]>0),9==this.curPart&&(this.unlock=!0),this.starNode.active=!this.unlock,this.lockNode.active=!this.unlock,this.startGameNode.active=this.unlock,this.blackCurtain.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.bg.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.trophyNode.active=!1,s.pzaLocalData.data.miniFirstPassArr[this.curPart-1]&&(this.trophyNode.active=!0),this.curPart<=2?this.gameImg.spriteFrame=this.imgBgSprArr[0]:this.curPart<=4?this.gameImg.spriteFrame=this.imgBgSprArr[1]:this.curPart<=6?this.gameImg.spriteFrame=this.imgBgSprArr[2]:7==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[3]:8==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[4]:10==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[6]:11==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[7]:12==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[8]:13==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[9]:14==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[10]:15==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[11]:16==this.curPart&&(this.gameImg.spriteFrame=this.imgBgSprArr[11]),9==this.curPart?(this.trophyNode.active=!0,this.trophyNode.getComponent(cc.Sprite).spriteFrame=this.trophySpriArr[1],this.gameImg.spriteFrame=this.imgBgSprArr[5],this.tokenCoinNode.active=!0,this.starNode.active=!1,this.trophyNode.setPosition(cc.v2(-67,72))):(this.trophyNode.getComponent(cc.Sprite).spriteFrame=this.trophySpriArr[0],this.tokenCoinNode.active=!1,this.starNode.active=!0),s.pzaLocalData.isShowPowerGift||(this.costPower=0,this.gameDelayTime=0,this.startGameNode.active=!1)},t.prototype.touchItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#939393"):cc.Color.fromHEX(cc.color(),"#606060")},t.prototype.cancelItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393")},t.prototype.clickItem=function(){var a=this;if(!r.pzaGameState.miniGameIsClickBack){s.pzaLocalData.isWeekTwo=!1;for(var t=0;t<s.pzaLocalData.data.miniGameNewFlagArr.length;t++)s.pzaLocalData.data.miniGameNewFlagArr[t][0]==this.curPart&&1==s.pzaLocalData.data.miniGameNewFlagArr[t][1]&&(this.newFlagNode.active=!1,cc.Tween.stopAllByTarget(this.newFlagNode),s.pzaLocalData.data.miniGameNewFlagArr[t][1]=2,s.pzaLocalData.addDirty("miniGameNewFlagArr"));this.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"),this.unlock?this.startGame():d.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.WARNING_VIEW,function(t){s.pzaLocalData.isNoShareVideoSwap&&(s.pzaLocalData.data.miniClickFlag=!1);var e=t&&t.getComponent(g.pzaWarningView);e&&e.show("\u4f60\u9700\u8981\u5728\u5192\u9669\u6a21\u5f0f\u6536\u96c6\u661f\u7ea7\u8fbe\u5230"+p.pzaGameConfig.getAllPartStar(!1,!0)+"\n\u89e3\u9501\u672c\u5173\u5361\u3002","\u63d0\u524d\u89e3\u9501","\u8fd4\u56de",function(){var t=function(){s.pzaLocalData.data.miniUnLockCnt[a.curPart-1]++,s.pzaLocalData.data.miniClickFlag=!1,s.pzaLocalData.addDirty("miniUnLockCnt","miniClickFlag"),a.refreshCall&&a.refreshCall()};s.pzaLocalData.data.miniClickFlag?"ks"==f.pzaChannel.instance().channel||"my"==f.pzaChannel.instance().channel||"tt"==f.pzaChannel.instance().channel?(c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"24"},{name:"adname",value:"\u8ff7\u4f60\u6e38\u620f\u63d0\u524d\u89e3\u9501"}),f.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){a.node.color=cc.Color.fromHEX(cc.color(),"#939393")},endCall:function(){},posName:"\u8ff7\u4f60\u6e38\u620f\u63d0\u524d\u89e3\u9501",adsid:"24"})):f.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"24"},function(){t()}):(c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"24"},{name:"adname",value:"\u8ff7\u4f60\u6e38\u620f\u63d0\u524d\u89e3\u9501"}),f.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u8ff7\u4f60\u6e38\u620f\u63d0\u524d\u89e3\u9501",adsid:"24"}))},function(){a.node.color=cc.Color.fromHEX(cc.color(),"#939393")},"\u672a\u89e3\u9501\uff01",!s.pzaLocalData.data.miniClickFlag,s.pzaLocalData.data.miniClickFlag)})}},t.prototype.startGame=function(){var a=this,t=this.getGameScene();if(r.pzaGameState.midOut)r.pzaGameState.gameMode===this.gameMode&&r.pzaGameState.curPart===this.curPart?(this.startGameCall&&this.startGameCall(),console.log("recover"),l.pzaGameManager.getCurrentGame().gameRecover(t,this.curPart,null)):(console.log("midOutStart"),l.pzaGameManager.midOutStart(this.gameMode,t,this.curPart,this.startGameCall.bind(this)));else{if(s.pzaLocalData.data.power<this.costPower)return u.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void d.pzaUIManager.showPowerView();s.pzaLocalData.setPower(-this.costPower),z.default.sendMsg("powerani"),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.POWER_ANI,{cost:this.costPower}),y.pzaCommonMask.showMask(),this.scheduleOnce(function(){y.pzaCommonMask.hideMask(),a.startGameCall&&a.startGameCall(),d.pzaUIManager.removeBoardUI(),l.pzaGameManager.preLoadAndStart(a.gameMode,t,a.curPart)},this.gameDelayTime)}},t.prototype.getGameScene=function(){var a=0;return 1==this.curPart?a=5:2==this.curPart?a=2:3==this.curPart?a=5:4==this.curPart?a=5:5==this.curPart?a=1:6==this.curPart?a=1:7==this.curPart?a=2:8==this.curPart?a=3:9==this.curPart?a=5:10==this.curPart?a=3:11==this.curPart?a=3:12==this.curPart?a=5:13==this.curPart?a=4:14==this.curPart?a=1:15==this.curPart?a=1:16==this.curPart&&(a=3),a},i([P({displayName:"\u5956\u676f",type:cc.Node})],t.prototype,"trophyNode",void 0),i([P({displayName:"\u9501",type:cc.Node})],t.prototype,"lockNode",void 0),i([P({displayName:"\u573a\u666f",type:cc.Node})],t.prototype,"bg",void 0),i([P({displayName:"\u661f\u7ea7\u8282\u70b9",type:cc.Node})],t.prototype,"starNode",void 0),i([P({displayName:"\u661f\u661f\u6570\u91cf",type:cc.Label})],t.prototype,"starCount",void 0),i([P({displayName:"\u661f\u661f\u8fdb\u5ea6\u6761",type:cc.Node})],t.prototype,"starPro",void 0),i([P({displayName:"\u9ed1\u5e55",type:cc.Node})],t.prototype,"blackCurtain",void 0),i([P({displayName:"\u4ee3\u5e01\u8282\u70b9",type:cc.Node})],t.prototype,"tokenCoinNode",void 0),i([P({displayName:"\u9650\u65f6\u6389\u843d\u548c\u5956\u676f\u7cbe\u7075",type:[cc.SpriteFrame]})],t.prototype,"trophySpriArr",void 0),i([P({displayName:"\u6e38\u620f\u80cc\u666f\u56fe\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"imgBgSprArr",void 0),i([P({displayName:"\u6e38\u620f\u80cc\u666f\u56fe",type:cc.Sprite})],t.prototype,"gameImg",void 0),i([P({displayName:"\u6e38\u620f\u540d\u5b57",type:cc.Label})],t.prototype,"gameName",void 0),i([P({displayName:"\u65b0\u6e38\u620f\u6807\u8bc6",type:cc.Node})],t.prototype,"newFlagNode",void 0),i([P({displayName:"\u5956\u52b1\u7528\u5c3d\u63d0\u793a",type:cc.Node})],t.prototype,"rewardUsedTip",void 0),i([P({displayName:"\u5f00\u59cb\u6e38\u620f\u8282\u70b9",type:cc.Node})],t.prototype,"startGameNode",void 0),i([v],t)}(cc.Component);e.pzaMiniGameItem=D,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaLocalData":"pzaLocalData","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask","./pzaWarningView":"pzaWarningView"}],pzaMiniGameView:[function(a,t,e){"use strict";cc._RF.push(t,"597c4RGxHpOPqXq7zBKdhw8","pzaMiniGameView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMiniGameView=void 0;var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGameManager"),s=a("../Common/pzaGameMiniGame"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaSoundManager"),d=a("../Common/pzaTipManager"),h=a("../Common/pzaUIManager"),m=a("../Common/pzaUtil"),f=a("../Common/pzaWorldEventManager"),z=a("../Load/pzaPreLoadManager"),y=a("../utils/pzaChannel"),g=a("./pzaCommonMask"),b=a("./pzaMiniGameItem"),v=a("./pzaPowerView"),P=a("./pzaRankView"),D=cc._decorator,S=D.ccclass,C=D.property,_=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.coinCount=null,t.trophyCount=null,t.scrollView=null,t.partPre=null,t.itemContent=null,t.rankWidget=null,t.items=[],t}return n(t,a),t.prototype.onEnable=function(){var a=this;this.node.x=0,this.coinCount.string=m.pzaUtil.getCurrencyStr(c.pzaLocalData.data.coin),this.trophyCount.string=c.pzaLocalData.getMiniGameTrophy()+"/13";for(var t=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).confMap.size,e=0;e<t;e++)if(0!=e){var o=p.pzaGameCommonPool.requestInstant(this.partPre);o.setParent(this.itemContent);var n=o.getComponent(b.pzaMiniGameItem),i=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).getConfById(e);n&&n.bindData(r.pzaGameMode.MINIGAME,i,function(){a.close()},this.refreshItem.bind(this)),this.items.push(n)}this.scrollView.node.stopAllActions(),this.scrollView.node.y=580,this.scrollView.node.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(.2,cc.v2(0,180)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){u.pzaSoundManager.playAudio("chapterdown")}))),this.scrollView.scrollToLeft(0),this.rankWidget.updateAlignment(),this.createWxUserInfoButton(!1,null),r.pzaGameState.miniGameIsClickBack=!1},t.prototype.refreshItem=function(){for(var a=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).confMap.size,t=0;t<a;t++){var e=this.items[t];e&&e.refreshItem()}},t.prototype.clickBack=function(){var a=this;y.pzaChannel.instance().closeBanner(),u.pzaSoundManager.playSFX(),r.pzaGameState.miniGameIsClickBack=!0,this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.3,cc.v2(0,580)).easing(cc.easeCubicActionOut())),h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.CHALLENGE_VIEW,function(){g.pzaCommonMask.showMask(),a.node.parent.stopAllActions(),a.node.parent.x=-1680,a.node.x=1680,a.node.parent.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){g.pzaCommonMask.hideMask(),a.close()})))})},t.prototype.clickRankBtn=function(){"hw"!=y.pzaChannel.instance().channel&&"oppo"!=y.pzaChannel.instance().channel&&"vivo"!=y.pzaChannel.instance().channel?this.createWxUserInfoButton(!0,function(){h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.RANK_VIEW,function(a){var t=a&&a.getComponent(P.pzaRankView);t&&t.init(0)})}):d.pzaTipManager.showHomeTip("\u6682\u672a\u5f00\u653e",this.node,2)},t.prototype.createWxUserInfoButton=function(a,t){var e=this,o=y.pzaChannel.instance().getChannel();"wx"!==o.channel||null!=c.pzaLocalData.data.playerNick&&null!=c.pzaLocalData.data.playerAvatar?t&&t():o.wxCheckPrivacySetting(function(n){var i=function(){var a=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width+e.rankWidget.node.x-60)/n.width*a.width,top:(.5*n.height-e.rankWidget.node.y-60)/n.height*a.height,width:120/n.width*a.width,height:120/n.height*a.height};o.getUserInfo(function(){null!=c.pzaLocalData.data.playerNick&&null!=c.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),t&&t())},i,!1)};if(n)return a?void o.wxPrivacyAuthorize(i,null):void(t&&t());i()},null)},t.prototype.clickPower=function(){h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.POWER_VIEW,function(a){var t=a&&a.getComponent(v.pzaPowerView);t&&t.bindData("\u8865\u5145\u4f53\u529b",function(){var a;a=c.pzaLocalData.data.power+c.pzaLocalData.addPowerValue,c.pzaLocalData.data.power=a,c.pzaLocalData.addDirty("power"),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.UPDATE_POWER,null)},null)})},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node);var a=y.pzaChannel.instance().getChannel();"wx"==a.channel&&a.destroyAuthorizationButton()},i([C({displayName:"\u91d1\u5e01",type:cc.Label})],t.prototype,"coinCount",void 0),i([C({displayName:"\u5956\u676f\u6570\u91cf",type:cc.Label})],t.prototype,"trophyCount",void 0),i([C({displayName:"scrollView",type:cc.ScrollView})],t.prototype,"scrollView",void 0),i([C({displayName:"\u7ae0\u8282\u9884\u8bbe",type:cc.Prefab})],t.prototype,"partPre",void 0),i([C({displayName:"\u7ae0\u8282\u5217\u8868\u7236\u8282\u70b9",type:cc.Node})],t.prototype,"itemContent",void 0),i([C({displayName:"\u6392\u884c\u699c\u6309\u94aewidget",type:cc.Widget})],t.prototype,"rankWidget",void 0),i([S],t)}(cc.Component);e.pzaMiniGameView=_,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameMiniGame":"pzaGameMiniGame","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaMiniGameItem":"pzaMiniGameItem","./pzaPowerView":"pzaPowerView","./pzaRankView":"pzaRankView"}],pzaMiniVaseConf:[function(a,t,e){"use strict";cc._RF.push(t,"1575aeEzhlHRYkKpWfMkcZ0","pzaMiniVaseConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMiniVaseConf=void 0;e.pzaMiniVaseConf=function(a){this.id=0,this.name="",this.plant="",this.zombie="",this.min=0,this.max=0,this.green=0,this.unlockChapter=0,this.unlockPart=0,this.endless=0,this.id=a.id,this.name=a.name||"",this.plant=a.plant||"",this.zombie=a.zombie||"",this.min=a.min||0,this.max=a.max||0,this.green=a.green||0;var t=a.unlock.trim().split("-");this.unlockChapter=parseInt(t[0]),this.unlockPart=parseInt(t[1]),this.endless=a.endless||0},cc._RF.pop()},{}],pzaMissile:[function(a,t,e){"use strict";cc._RF.push(t,"882fcmpMIZMmIdlEDKuC1tu","pzaMissile");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMissile=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaWorldEventManager"),c=a("../../Load/pzaPreLoadManager"),u=a("../Data/pzaBaseData"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaPlantEnum"),m=a("../Effect/pzaBungeeTarget"),f=a("../pzaEffectManager"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.targetPrefab=null,t.earth=null,t.redPoint=null,t.targetPos=null,t.logicPos=null,t.moveSpeed=1200,t.atk=0,t.up=!0,t.isRotate=!1,t.xIndex=null,t.yIndex=null,t.inGround=!1,t.boomTime=3,t.bungeeTarget=null,t.scaleState=0,t.delayDownTime=3,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.ICE_SHROOM_BOOM,this.death,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.MISSILE_DEATH,this.death,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.ICE_SHROOM_BOOM,this.death,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.MISSILE_DEATH,this.death,this)},t.prototype.init=function(a,t,e,o,n){this.baseData=new u.pzaBaseData(null,null,!1),this.atk=a,this.logicPos=t,this.targetPos=e,this.node.scaleY=1,this.up=!0,this.isRotate=!1,this.xIndex=o,this.yIndex=n,this.delayDownTime=3,this.createTarget()},t.prototype.createTarget=function(){this.baseData.xIndex=this.xIndex,this.baseData.yIndex=this.yIndex,this.baseData.logicPos=this.targetPos;var a=p.pzaGameCommonPool.requestInstant(this.targetPrefab);a.setParent(this.node.parent),this.bungeeTarget=a&&a.getComponent(m.pzaBungeeTarget),this.bungeeTarget&&this.bungeeTarget.bindData(this.baseData,!1)},t.prototype.logicUpdate=function(a){if(this.isRotate)return this.logicPos.y+=a*this.moveSpeed*1,this.node.angle+=1e3*a,this.node.setPosition(this.logicPos),void(this.logicPos.y>=600&&this.close());if(this.inGround){if(this.redPointAni(a),this.boomTime-=a,this.boomTime<=0){this.boomTime=999,l.pzaSoundManager.playAudio("cherrybomb",1),f.pzaEffectManager.createFrameEffect(c.pzaResourceUrl.CHERRY_BOOM_EFFECT,cc.v2(this.logicPos.x,this.logicPos.y),null,1.5),this.close();for(var t=this.xIndex-1;t<=this.xIndex+1;t++)for(var e=this.yIndex+1;e>=this.yIndex-1;e--)window.pzaplantManager.absorbPlant(t,e,this.atk,this.baseData)}}else this.delayDownTime-=a,this.delayDownTime>0||(this.logicPos.y+=a*this.moveSpeed*(this.up?1:-1),this.node.setPosition(this.logicPos),this.up?this.logicPos.y>=560&&(this.logicPos.x=this.targetPos.x,this.up=!1,this.node.scaleY=-1):this.logicPos.y<=this.targetPos.y&&this.inGroundState())},t.prototype.redPointAni=function(a){1==this.scaleState&&this.redPoint.scale>=1.2&&(this.scaleState=0),0==this.scaleState&&this.redPoint.scale<=.5&&(this.scaleState=1),0==this.scaleState?this.redPoint.scale-=3*a:this.redPoint.scale+=3*a,this.redPoint.scale>=1.2&&(this.redPoint.scale=1.2),this.redPoint.scale<=.5&&(this.redPoint.scale=.5)},t.prototype.inGroundState=function(){this.bungeeTarget&&this.bungeeTarget.close(),this.bungeeTarget=null,this.inGround=!0,this.redPoint.active=!0,this.earth.active=!0;for(var a=this.xIndex-1;a<=this.xIndex+1;a++)for(var t=this.yIndex+1;t>=this.yIndex-1;t--){var e=""+a+t,o=window.pzaplantManager.plantDataMap.get(e);if(null!=o&&!o.isDead&&!o.buffData.hasBuff(d.pzaBuffType.INVINCIBLE)&&o.plantData.plantType==h.pzaPlantEnum.UMBRELLA_LEAF){var n=window.pzaplantManager.getPlantByData(o);return n&&n.ricochetBullet(o),void(this.isRotate=!0)}}window.pzaplantManager.absorbPlant(this.xIndex,this.yIndex,this.atk,this.baseData)},t.prototype.close=function(){a.prototype.close.call(this),this.bungeeTarget&&this.bungeeTarget.close(),this.bungeeTarget=null},t.prototype.death=function(){f.pzaEffectManager.createIceBoomEffect(this.logicPos),this.close()},i([g({displayName:"\u9776\u5b50\u9884\u8bbe",type:cc.Prefab})],t.prototype,"targetPrefab",void 0),i([g({type:cc.Node})],t.prototype,"earth",void 0),i([g({type:cc.Node})],t.prototype,"redPoint",void 0),i([y],t)}(r.pzaBaseComponent);e.pzaMissile=b,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBaseData":"pzaBaseData","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Effect/pzaBungeeTarget":"pzaBungeeTarget","../pzaEffectManager":"pzaEffectManager"}],pzaMonthSignConf:[function(a,t,e){"use strict";cc._RF.push(t,"dc1c0j6pk5BXLVxMRzCb1Ny","pzaMonthSignConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMonthSignConf=void 0;var o=a("../Common/pzaGamePropConfig");e.pzaMonthSignConf=function(a){this.day=0,this.name="",this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.recFun=0,this.iconIndex=0,this.day=a.iD,this.name=a.name||"",this.rewardType=a.rewardType,this.rewardCount=parseInt(a.rewardValue),this.recFun=a.aDClaim,this.iconIndex=a.icon?parseInt(a.icon):0},cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig"}],pzaMonthSignItem:[function(a,t,e){"use strict";cc._RF.push(t,"77020VSUuFDqYJdUgLxx3Zt","pzaMonthSignItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameConfig"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSpineController"),c=a("../Common/pzaSpriteFrameManager"),u=a("../utils/pzakc"),d=a("./pzaMonthSignMgr"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hasGetNode=null,t.coinIcon=null,t.coinFrames=[],t.plantFrames=[],t.propAni=null,t.plantCardNode=null,t.plantCardBgSprArr=[],t.desc=null,t.propCount=null,t.canGetLight=null,t.daysLab=null,t}return n(t,a),t.prototype.refresh=function(a){if(this.hasGetNode.active=!1,this.canGetLight.active=!1,this.coinIcon.node.active=!1,this.propAni.node.active=!1,this.propCount.node.active=!1,this.plantCardNode.active=!1,this.daysLab.string="\u7b2c"+a+"\u5929",a<=l.pzaLocalData.data.monthSignDays)return this.hasGetNode.active=!0,void(this.desc.string="\u5df2\u9886\u53d6");l.pzaLocalData.data.isSignInMonth?u.default.getCurrentDay()-l.pzaLocalData.data.monthSignDays>0&&l.pzaLocalData.data.monthSignDays+1==a&&(this.canGetLight.active=!0):a==l.pzaLocalData.data.monthSignDays+1&&(this.canGetLight.active=!0);var t=d.default.instance().getConf(a);switch(this.desc.node.active=!0,t.rewardType){case p.pzaGamePropEnum.PROP_COIN:this.coinIcon.node.active=!0,this.desc.string=t.rewardCount+"",this.coinIcon.spriteFrame=this.coinFrames[t.iconIndex-1];break;case p.pzaGamePropEnum.PROP_CHERRY_BOMB:this.showProAni(t),this.propAni.playAnimation("3ui_1",!0);break;case p.pzaGamePropEnum.PROP_FREE_SUN:this.showProAni(t),this.propAni.playAnimation("1ui_1",!0);break;case p.pzaGamePropEnum.PROP_AUTO_PICK:this.showProAni(t),this.propAni.playAnimation("2ui_1",!0);break;case p.pzaGamePropEnum.PROP_PLANTE:this.plantCardNode.active=!0,this.showPlant(t,p.pzaGamePropEnum.PROP_PLANTE);break;case p.pzaGamePropEnum.PROP_FERTILIZER:this.showPlant(t,p.pzaGamePropEnum.PROP_FERTILIZER)}},t.prototype.showProAni=function(a){this.propAni.node.active=!0,this.propCount.node.active=!0,this.desc.string=a.name,this.propCount.string="X"+a.rewardCount},t.prototype.showPlant=function(a,t){if(this.coinIcon.node.active=!0,this.propCount.node.active=!0,this.desc.string=a.name,a.rewardType==p.pzaGamePropEnum.PROP_PLANTE){this.propCount.string="";var e=r.pzaGameConfig.getPlantConfig(a.rewardCount);e&&(this.plantCardNode.getComponent(cc.Sprite).spriteFrame=this.plantCardBgSprArr[e.rareLevel-1]),c.pzaSpriteFrameManager.loadPlantCard(a.rewardCount,this.coinIcon)}else this.propCount.string="X"+a.rewardCount,this.coinIcon.spriteFrame=this.plantFrames[t-5]},i([f({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],t.prototype,"hasGetNode",void 0),i([f({displayName:"\u91d1\u5e01\u56fe\u6807",type:cc.Sprite})],t.prototype,"coinIcon",void 0),i([f({displayName:"\u91d1\u5e01\u56fe",type:[cc.SpriteFrame]})],t.prototype,"coinFrames",void 0),i([f({displayName:"\u690d\u7269\u80a5\u6599\u6740\u866b\u56fe",type:[cc.SpriteFrame]})],t.prototype,"plantFrames",void 0),i([f({displayName:"\u9053\u5177\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"propAni",void 0),i([f({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"plantCardNode",void 0),i([f({displayName:"\u690d\u7269\u5361\u7247\u7b49\u7ea7\u80cc\u666f\u56fe",type:[cc.SpriteFrame]})],t.prototype,"plantCardBgSprArr",void 0),i([f({displayName:"\u63cf\u8ff0",type:cc.Label})],t.prototype,"desc",void 0),i([f({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],t.prototype,"propCount",void 0),i([f({displayName:"\u53ef\u4ee5\u9886\u53d6\u6807\u8bc6\u6846",type:cc.Node})],t.prototype,"canGetLight",void 0),i([f({displayName:"\u5f53\u524d\u5929\u6570",type:cc.Label})],t.prototype,"daysLab",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../utils/pzakc":"pzakc","./pzaMonthSignMgr":"pzaMonthSignMgr"}],pzaMonthSignMgr:[function(a,t,e){"use strict";cc._RF.push(t,"c2d87H04CxNiJ5zi/DIh4PN","pzaMonthSignMgr");var o=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var n=a("./pzaMonthSignConf"),i=cc._decorator,r=i.ccclass,p=(i.property,function(){function a(){this.monthSignMap=new Map,this.monthSignNewMap=new Map,this.useNewData=!1}var t;return t=a,a.instance=function(){return t._me||(t._me=new t),t._me},a.prototype.init=function(a){for(var t=0;t<a.length;t++){var e=new n.pzaMonthSignConf(a[t]);this.monthSignMap.set(e.day,e)}},a.prototype.resetInit=function(a){for(var t=0;t<a.length;t++){var e=new n.pzaMonthSignConf(a[t]);this.monthSignNewMap.set(e.day,e)}},a.prototype.getConf=function(a){return this.useNewData?this.monthSignNewMap.get(a):this.monthSignMap.get(a)},a._me=null,t=o([r],a)}());e.default=p,cc._RF.pop()},{"./pzaMonthSignConf":"pzaMonthSignConf"}],pzaMonthSignView:[function(a,t,e){"use strict";cc._RF.push(t,"0aec2nHXplDK5gwBP65hwLM","pzaMonthSignView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaRewardManager"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaStatisticsMgr"),d=a("../Common/pzaTipManager"),h=a("../utils/pzaChannel"),m=a("../utils/pzakc"),f=a("./pzaMonthSignItem"),z=a("./pzaMonthSignMgr"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.content=null,t.item1Pre=null,t.item2Pre=null,t.video=null,t.desc=null,t.tip=null,t.getNode=null,t.getAllNode=null,t.canClick=!1,t.list=[],t}return n(t,a),t.prototype.onEnable=function(){this.list=[],this.canClick=!1,this.tip.node.active=!1,this.getAllNode.active=!1,this.content.removeAllChildren(),this.init(),this.refreshUi()},t.prototype.init=function(){for(var a=m.default.getMonthDays(),t=1;t<=a;t++)this.createMonthItem(t);this.content.height=a<=28?514:645},t.prototype.refreshUi=function(){if(this.tip.node.active=!1,this.video.active=!1,l.pzaLocalData.data.isSignInMonth)if(m.default.getCurrentDay()-l.pzaLocalData.data.monthSignDays>0){this.canClick=!0,this.desc.string="\u8865\u7b7e",this.tip.node.active=!0,this.video.active=!0;var a=m.default.getCurrentDay()-l.pzaLocalData.data.monthSignDays,t=l.pzaLocalData.data.retroSignDays;this.tip.string="\u672c\u6708\u53ef\u8865\u7b7e<color=#ffe659>"+a+"</c>\u5929\u5df2\u8865\u7b7e<color=#ffe659>"+t+"</c>\u5929"}else this.canClick=!1,this.desc.string="\u5df2\u9886\u53d6";else this.canClick=!0,this.desc.string="\u7b7e\u5230";"noAD"!=h.pzaChannel.instance().channel||h.pzaChannel.isConfRemote||(l.pzaLocalData.data.monthSignDays!=z.default.instance().monthSignNewMap.size?this.getAllNode.active=!0:(this.getAllNode.active=!1,this.tip.node.active=!1),this.getNode.active=!1)},t.prototype.createMonthItem=function(a){var t;t=a%7==0?this.item2Pre:this.item1Pre;var e=r.pzaGameCommonPool.requestInstant(t,!1);if(null!=e){e.setParent(this.content);var o=e.getComponent(f.default);null!=o&&(o.refresh(a),this.list.push(o))}},t.prototype.start=function(){},t.prototype.close=function(){c.pzaSoundManager.playSFX(),r.pzaGameCommonPool.returnInstant(this.node)},t.prototype.clickRec=function(){var a=this;if(this.canClick){c.pzaSoundManager.playSFX();var t=function(){var t=z.default.instance().getConf(l.pzaLocalData.data.monthSignDays+1);if(null!=t){l.pzaLocalData.data.monthSignDays++,l.pzaLocalData.data.isSignInMonth=!0,l.pzaLocalData.addDirty("monthSignDays","isSignInMonth");var e=new p.pzaRewardPropData(t.rewardType,t.rewardCount);s.pzaRewardManager.recieveRewards([e],function(){}),a.close()}};this.video.active?(u.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"26"},{name:"adname",value:"\u8ff7\u4f60\u6e38\u620f\u63d0\u524d\u89e3\u9501"}),h.pzaChannel.instance().showVideo({sucCall:function(){l.pzaLocalData.data.retroSignDays++,l.pzaLocalData.addDirty("retroSignDays"),t()},failCall:function(){},endCall:function(){},posName:"\u5468\u7b7e\u5230\u8865\u7b7e",adsid:"26"})):t()}else console.log("can not click")},t.prototype.monthSighGetAll=function(){if("noAD"==h.pzaChannel.instance().channel&&!h.pzaChannel.isConfRemote){for(var a=0;a<z.default.instance().monthSignNewMap.size;a++){var t=z.default.instance().getConf(a+1);if(null==t)return;var e=[new p.pzaRewardPropData(t.rewardType,t.rewardCount)];s.pzaRewardManager.recieveRewardData(e)}l.pzaLocalData.data.monthSignDays=z.default.instance().monthSignNewMap.size,l.pzaLocalData.data.isSignInMonth=!0,l.pzaLocalData.addDirty("monthSignDays","isSignInMonth"),d.pzaTipManager.showHomeTip("\u6708\u7b7e\u5230\u9886\u53d6\u6210\u529f!",null,2),this.close()}},t.show=function(){},i([b({displayName:"\u5bb9\u5668",type:cc.Node})],t.prototype,"content",void 0),i([b({displayName:"\u5b50\u9884\u8bbe1",type:cc.Prefab})],t.prototype,"item1Pre",void 0),i([b({displayName:"\u5b50\u9884\u8bbe2",type:cc.Prefab})],t.prototype,"item2Pre",void 0),i([b({displayName:"\u89c6\u9891\u6807\u8bc6",type:cc.Node})],t.prototype,"video",void 0),i([b({displayName:"\u63cf\u8ff0",type:cc.Label})],t.prototype,"desc",void 0),i([b({displayName:"\u8865\u7b7e\u63d0\u793a",type:cc.RichText})],t.prototype,"tip",void 0),i([b({displayName:"\u6b63\u5e38\u7b7e\u5230\u8282\u70b9",type:cc.Node})],t.prototype,"getNode",void 0),i([b({displayName:"\u4e00\u952e\u7b7e\u5230",type:cc.Node})],t.prototype,"getAllNode",void 0),i([g],t)}(cc.Component);e.default=v,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaMonthSignItem":"pzaMonthSignItem","./pzaMonthSignMgr":"pzaMonthSignMgr"}],pzaNativeInterAd:[function(a,t,e){"use strict";cc._RF.push(t,"0f2baGLC15CGZPjOXrqHPIN","pzaNativeInterAd");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNativeInterAd=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaUtil"),l=a("../Common/pzaWorldEventManager"),s=a("./pzaChannel"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.title=null,t.source=null,t.clickBtnTxt=null,t.picUri=null,t.bg=null,t.adid=null,t}return n(t,a),t.prototype.init=function(a,t,e,o,n){"hw"==s.pzaChannel.instance().channel&&(this.node.scale=.7,this.node.y=100),this.title.string=e,this.source.string=o,this.clickBtnTxt.string=n,this.adid=a,this.bg.on(cc.Node.EventType.TOUCH_END,this.clickAd,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.REPORT_AD_SHOW,this.reportAdShow,this),this.reportAdShow(),this.loadPics(t)},t.prototype.onDisable=function(){this.bg.off(cc.Node.EventType.TOUCH_END,this.clickAd,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.REPORT_AD_SHOW,this.reportAdShow,this)},t.prototype.reportAdShow=function(){this.adid&&s.pzaChannel.instance().reportAdShow(this.adid,this.node)},t.prototype.clickAd=function(){this.adid&&s.pzaChannel.instance().reportAdClick(this.adid),this.close()},t.prototype.loadPics=function(a){var t=a;-1!=t.indexOf(".png")||-1!=t.indexOf(".jpg")||t.indexOf(".jpeg");var e=this,o=new Image;o.src=t,o.crossOrigin="anonymous",o.onload=function(){var a=new cc.Texture2D;a.initWithElement(o),e.picUri.spriteFrame=new cc.SpriteFrame(a)}},t.prototype.close=function(){var a=p.pzaUtil.getRandomFloatNum(0,1),t=.1*s.pzaChannel.instance().getCtrl("p18");console.log("\u5173\u95ed\u540e\u6982\u7387: ",a,t),t>=a&&setTimeout(function(){s.pzaChannel.instance().showInter()},3e3),r.pzaGameCommonPool.returnInstant(this.node)},i([d(cc.Label)],t.prototype,"title",void 0),i([d(cc.Label)],t.prototype,"source",void 0),i([d(cc.Label)],t.prototype,"clickBtnTxt",void 0),i([d(cc.Sprite)],t.prototype,"picUri",void 0),i([d(cc.Node)],t.prototype,"bg",void 0),i([u],t)}(cc.Component);e.pzaNativeInterAd=h,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaChannel":"pzaChannel"}],pzaNecromancerZombie:[function(a,t,e){"use strict";cc._RF.push(t,"150b54GVwRO47N5HgDYTzcK","pzaNecromancerZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNecromancerZombie=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaZombieEnum"),l=a("./pzaBaseZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.summonCd=0,t.garlicSkinName=null,t.isSummoning=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,61.81,13.02,-93.13))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_CONTROL,-1)),this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_ICE,-1)),this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_HYPNOSIS,-1)),this.summonCd=15,this.isSummoning=!1},t.prototype.logicUpdate=function(t){null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.isDead||this.isSummoning||(this.summonCd>0&&(this.summonCd-=t,this.summonCd<=0&&this.summonSkeleton()),a.prototype.logicUpdate.call(this,t)))},t.prototype.summonSkeleton=function(){var a=this;this.isSummoning=!0;var t=function(){var t,e=0;e=a.baseData.xIndex-1,t=a.baseData.yIndex,e=e<=0?0:e;for(var o=p.pzaZombieEnum.SKELETON_ZOMBIE,n=0;n<2;n++){var i=window.pzazombieManager.createFixBlockZombieData(o,e,t);i.logicPos.x+=10*n,window.pzazombieManager.createZombie(i,!1,!0),window.pzazombieManager.curWaveZombieDatas.add(i)}a.isSummoning=!1};this.animation.playAnimation("attack2",!1,function(){},function(){t(),a.playMoveAnimation()})},i([u],t)}(l.pzaBaseZombie));e.pzaNecromancerZombie=d,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaNewPlantView:[function(a,t,e){"use strict";cc._RF.push(t,"f9afcKJigNB0qIcbc5rtBY4","pzaNewPlantView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNewPlantView=void 0;var r=a("../../Battle/Data/pzaDropType"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaLocalData"),u=a("../../Common/pzaOperationMgr"),d=a("../../Common/pzaSoundManager"),h=a("../../Common/pzaSpriteFrameManager"),m=a("../../Common/pzaUIManager"),f=a("../../Common/pzaWorldEventManager"),z=a("../../Load/pzaPreLoadManager"),y=a("../../utils/pzaChannel"),g=a("../pzaHandbookView"),b=cc._decorator,v=b.ccclass,P=b.property,D=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tittle=null,t.plantName=null,t.plantDesc=null,t.cardBoard=null,t.cardBoardFrames=[],t.cardIcon=null,t.priceLabel=null,t.shovel=null,t.handbookNode=null,t.baconic=null,t.taco=null,t.sprinkler=null,t.trophy=null,t.btnTxt=null,t.shareBtn=null,t.rewardBubble=null,t.dropType=null,t}return n(t,a),t.prototype.showView=function(a,t){var e=this;if(d.pzaSoundManager.playBgm(d.pzaBGMName.NEWPLANT_BGM),this.rewardBubble=null,u.pzaOperationMgr.showShareBubble(this.shareBtn,function(a){a?e.rewardBubble=a:e.node.getChildByName("btn_next_part").x=0}),this.dropType=a,this.shovel.active=a==r.pzaDropType.SHOVEL,this.handbookNode.active=a==r.pzaDropType.HAND_BOOK,this.baconic.active=a==r.pzaDropType.BACONIC,this.taco.active=a==r.pzaDropType.TACO,this.sprinkler.active=a==r.pzaDropType.SPRINKLER,this.trophy.active=a>=r.pzaDropType.SURVIVAL_TROPHY,a==r.pzaDropType.SHOVEL)return this.cardBoard.node.active=!1,this.plantName.string="\u6c99\u94f2",this.plantDesc.string="\u8ba9\u4f60\u6316\u51fa\u4e00\u682a\u690d\u7269\u4ee5\u4fbf\u7ed9\u5176\u4ed6\u690d\u7269\u817e\u51fa\u7a7a\u95f4",this.tittle.string="\u4f60\u5f97\u5230\u4e00\u628a\u6c99\u94f2\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.HAND_BOOK)return this.cardBoard.node.active=!1,this.plantName.string="\u5927\u56fe\u9274",this.plantDesc.string="\u8bb0\u8f7d\u4f60\u9047\u5230\u7684\u690d\u7269\u548c\u50f5\u5c38",this.tittle.string="\u4f60\u53d1\u73b0\u4e86\u5927\u56fe\u9274\uff01",void(this.btnTxt.string="\u67e5\u770b\u56fe\u9274");if(a==r.pzaDropType.BACONIC)return this.cardBoard.node.active=!1,this.plantName.string="\u57f9\u6839",this.plantDesc.string="\u53ef\u57f9\u6839\u53c8\u80fd\u62ff\u6765\u505a\u4ec0\u4e48\u5462?",this.tittle.string="\u4f60\u53d1\u73b0\u4e86\u4e00\u4e2a\u57f9\u6839\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.TACO)return this.cardBoard.node.active=!1,this.plantName.string="\u7389\u7c73\u5377",this.plantDesc.string="\u8fd9\u4e2a\u7389\u7c73\u5377\u5230\u5e95\u80fd\u505a\u4ec0\u4e48?",this.tittle.string="\u4f60\u53d1\u73b0\u4e86\u4e00\u4e2a\u7389\u7c73\u5377\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.SPRINKLER)return this.cardBoard.node.active=!1,this.plantName.string="\u6d12\u6c34\u58f6",this.plantDesc.string="\u73b0\u5728\u4f60\u53ef\u4ee5\u73a9\u82b1\u56ed\u6a21\u5f0f\u4e86\uff01",this.tittle.string="\u4f60\u53d1\u73b0\u4e86\u4e00\u4e2a\u6d12\u6c34\u58f6\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.SURVIVAL_TROPHY)return this.cardBoard.node.active=!1,this.plantName.string="\u5956\u676f",c.pzaLocalData.data.survivalPassChapter>=5?this.plantDesc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\n\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.plantDesc.string="\u4f60\u89e3\u9501\u4e86\u65b0\u7684\u751f\u5b58\u6a21\u5f0f",this.tittle.string="\u4f60\u5f97\u5230\u4e86\u4e00\u5ea7\u5956\u676f\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.ZOMBIE_TROPHY)return this.cardBoard.node.active=!1,this.plantName.string="\u5956\u676f",c.pzaLocalData.getZombieTrophy()>=9?this.plantDesc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\n\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.plantDesc.string="\u7ee7\u7eed\u6536\u96c6\u5956\u676f\u5427\uff01",this.tittle.string="\u4f60\u5f97\u5230\u4e86\u4e00\u5ea7\u5956\u676f\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.VASE_TROPHY)return this.cardBoard.node.active=!1,this.plantName.string="\u5956\u676f",c.pzaLocalData.getVaseTrophy()>=c.pzaLocalData.vaseAllTrophy?this.plantDesc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\n\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.plantDesc.string="\u7ee7\u7eed\u6536\u96c6\u5956\u676f\u5427\uff01",this.tittle.string="\u4f60\u5f97\u5230\u4e86\u4e00\u5ea7\u5956\u676f\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.MINIGAME_TROPHY)return this.cardBoard.node.active=!1,this.plantName.string="\u5956\u676f",c.pzaLocalData.getMiniGameTrophy()>=14?this.plantDesc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\n\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.plantDesc.string="\u7ee7\u7eed\u6536\u96c6\u5956\u676f\u5427\uff01",this.tittle.string="\u4f60\u5f97\u5230\u4e86\u4e00\u5ea7\u5956\u676f\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.DROP_KEY)return this.cardBoard.node.active=!1,this.plantName.string="\u5468\u5e74\u793c\u5305",this.plantDesc.string="\u53ef\u524d\u5f80\u4e3b\u987511\u5468\u5e74\u5e86\u5178\u9886\u53d6\u5956\u52b1",this.tittle.string="\u4f60\u5f97\u5230\u4e86\u4e00\u4efd\u5468\u5e74\u793c\u5305!",void(this.btnTxt.string="\u7ee7\u7eed");this.cardBoard.node.active=!0,this.tittle.string="\u4f60\u5f97\u5230\u4e00\u682a\u65b0\u690d\u7269\uff01",this.btnTxt.string="\u7ee7\u7eed";var o=l.pzaGameConfig.getPlantConfig(t);null!=o&&(this.plantName.string=o.name,this.cardBoard.spriteFrame=this.cardBoardFrames[o.rareLevel],this.priceLabel.string=""+o.price);var n=l.pzaGameConfig.PlantDescMap.get(t);null!=n&&(this.plantDesc.string=n),h.pzaSpriteFrameManager.loadPlantCard(t,this.cardIcon)},t.prototype.clickNext=function(){this.close(),this.dropType==r.pzaDropType.HAND_BOOK?(s.pzaGameManager.removeBattleUI(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),m.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(g.pzaHandbookView);t&&t.jdInit(),t&&t.bindCloseCall(function(){s.pzaGameManager.getCurrentGame().partWin()})})):s.pzaGameManager.getCurrentGame().partWin()},t.prototype.clickShare=function(){var a=this;y.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){console.log("newPlantView share sucess"),a.rewardBubble&&a.rewardBubble.getReward(),a.rewardBubble=null})},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([P({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"tittle",void 0),i([P({displayName:"\u690d\u7269\u540d\u79f0",type:cc.Label})],t.prototype,"plantName",void 0),i([P({displayName:"\u690d\u7269\u4ecb\u7ecd",type:cc.Label})],t.prototype,"plantDesc",void 0),i([P({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([P({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([P({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([P({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],t.prototype,"priceLabel",void 0),i([P({displayName:"\u94f2\u5b50",type:cc.Node})],t.prototype,"shovel",void 0),i([P({displayName:"\u56fe\u9274",type:cc.Node})],t.prototype,"handbookNode",void 0),i([P({displayName:"\u57f9\u6839",type:cc.Node})],t.prototype,"baconic",void 0),i([P({displayName:"\u7389\u7c73\u5377",type:cc.Node})],t.prototype,"taco",void 0),i([P({displayName:"\u6c34\u58f6",type:cc.Node})],t.prototype,"sprinkler",void 0),i([P({displayName:"\u5956\u676f",type:cc.Node})],t.prototype,"trophy",void 0),i([P({displayName:"\u6309\u94ae\u6587\u6848",type:cc.Label})],t.prototype,"btnTxt",void 0),i([P({displayName:"\u5206\u4eab\u6309\u94ae",type:cc.Node})],t.prototype,"shareBtn",void 0),i([v],t)}(cc.Component);e.pzaNewPlantView=D,cc._RF.pop()},{"../../Battle/Data/pzaDropType":"pzaDropType","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaOperationMgr":"pzaOperationMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaHandbookView":"pzaHandbookView"}],pzaNewPlayTaskConf:[function(a,t,e){"use strict";cc._RF.push(t,"3e1e04fY9dOTZAcoxbRXdnF","pzaNewPlayTaskConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNewPlayTaskConf=void 0;var o=a("../Common/pzaGamePropConfig");e.pzaNewPlayTaskConf=function(a){this.id=0,this.taskname="",this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.tasktype="",this.condStr="",this.taskname=a.taskname||"";var t=a.reward.split("_");this.rewardType=parseInt(t[0]),this.rewardCount=parseInt(t[1]),this.tasktype=a.tasktype,this.condStr=a.condStr},cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig"}],pzaNewPlayTaskMgr:[function(a,t,e){"use strict";cc._RF.push(t,"d2f8eeOT6FGoquY2i/4ExiH","pzaNewPlayTaskMgr");var o=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var n=a("../Common/pzaLocalData"),i=a("./pzaNewPlayerStepConf"),r=a("./pzaNewPlayTaskConf"),p=cc._decorator,l=p.ccclass,s=(p.property,function(){function a(){this.newPlayerTaskMap=new Map,this.allNewPlayerTaskArr=[],this.stepRewardMap=new Map}var t;return t=a,a.instance=function(){return t._me||(t._me=new t),t._me},a.prototype.initNewPlayerTask=function(a){for(var t=0;t<a.length;t++){var e=a[t].iD.split("_"),o=new r.pzaNewPlayTaskConf(a[t]);o.id=parseInt(e[1]),this.allNewPlayerTaskArr[e[0]]||(this.allNewPlayerTaskArr[e[0]]=[]),this.allNewPlayerTaskArr[e[0]].push(o)}for(t=0;t<this.allNewPlayerTaskArr.length;t++){var n=this.allNewPlayerTaskArr[t];n&&this.newPlayerTaskMap.set(t,n)}},a.prototype.initStepRewardTask=function(a){for(var t=0;t<a.length;t++){var e=new i.pzaNewPlayerStepConf(a[t]);this.stepRewardMap.set(e.id,e)}},a.prototype.checkNewPlayerStepTask=function(a,t){if(n.pzaLocalData.data.stepStates){var e=n.pzaLocalData.data.stepStates[a-1];if(2==e[t+""])return;var o=this.newPlayerTaskMap.get(a)[t],i=o.tasktype;if("normal"==i){var r=[function(){return n.pzaLocalData.data.curChapter>1},function(){return n.pzaLocalData.data.curChapter>2},function(){return n.pzaLocalData.data.curChapter>3},function(){return n.pzaLocalData.data.curChapter>4},function(){return n.pzaLocalData.data.passLastPart}];a>=1&&a<=r.length&&r[a-1]()&&(e[t+""]=1)}else"endless"==i?n.pzaLocalData.data.passEndlessCnt>=10&&(e[t+""]=1):"login"==i?e[t+""]=1:"gold"==i?n.pzaLocalData.data.newPlayerGetGoldCnt>=parseInt(o.condStr)&&(e[t+""]=1):"prop"==i?n.pzaLocalData.data.newPlayerUsePropCnt>=parseInt(o.condStr)&&(e[t+""]=1):"ad"==i&&n.pzaLocalData.data.newPlayerWatchAdCnt>=parseInt(o.condStr)&&(e[t+""]=1);n.pzaLocalData.addDirty("stepStates")}},a._me=null,t=o([l],a)}());e.default=s,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","./pzaNewPlayTaskConf":"pzaNewPlayTaskConf","./pzaNewPlayerStepConf":"pzaNewPlayerStepConf"}],pzaNewPlayerStepConf:[function(a,t,e){"use strict";cc._RF.push(t,"6e06eDIY7NI3qVIP6K981i/","pzaNewPlayerStepConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNewPlayerStepConf=void 0;var o=a("../Common/pzaGamePropConfig");e.pzaNewPlayerStepConf=function(a){this.id=0,this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.id=a.id;var t=a.reward.split("_");this.rewardType=parseInt(t[0]),this.rewardCount=parseInt(t[1])},cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig"}],pzaNewPlayerTaskItem:[function(a,t,e){"use strict";cc._RF.push(t,"8dcf1r70nNEG5jMRMsMYnpk","pzaNewPlayerTaskItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGamePropConfig"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaSpineController"),c=a("../Common/pzaUIManager"),u=a("../Common/pzaUtil"),d=a("../Load/pzaPreLoadManager"),h=a("../Shop/pzaShopConfig"),m=a("../utils/pzaChannel"),f=a("../View/pzaBuyConfirmView"),z=a("./pzaNewPlayTaskMgr"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lab_taskName=null,t.lab_taskPro=null,t.ani_prop=null,t.img_reward=null,t.lab_rewardCnt=null,t.node_task=null,t.lab_btn=null,t.sprites_arr=[],t.sprites_btns=[],t.idx=0,t.newPlayerTaskCfg=null,t.btnState=0,t.step=0,t.rewardType=0,t.rewardCount=0,t.newPlayerTaskView=null,t}return n(t,a),t.prototype.onEnable=function(){this.node_task.on(cc.Node.EventType.TOUCH_END,this.clickBtn,this)},t.prototype.bindData=function(a,t,e,o,n){z.default.instance().checkNewPlayerStepTask(t,e),this.call=n,this.newPlayerTaskView=a,this.ani_prop.node.active=!1,this.img_reward.node.active=!1,this.step=t,this.btnState=0,this.idx=e,this.newPlayerTaskCfg=o,this.lab_taskName.string=this.newPlayerTaskCfg.taskname,this.lab_rewardCnt.string="X"+this.newPlayerTaskCfg.rewardCount,this.refreshBtnState(),"normal"==this.newPlayerTaskCfg.tasktype?this.lab_taskPro.node.active=!1:(this.lab_taskPro.node.active=!0,this.refreshTaskPro()),this.refreshItem(),this.rewardType=this.newPlayerTaskCfg.rewardType,this.rewardCount=this.newPlayerTaskCfg.rewardCount},t.prototype.refreshItem=function(){switch(this.newPlayerTaskCfg.rewardType){case r.pzaGamePropEnum.PROP_COIN:this.img_reward.node.active=!0,this.img_reward.spriteFrame=this.sprites_arr[0];break;case r.pzaGamePropEnum.PROP_POWER:this.img_reward.node.active=!0,this.img_reward.spriteFrame=this.sprites_arr[1];break;case r.pzaGamePropEnum.RANDOM_GIFT:this.img_reward.node.active=!0,this.img_reward.spriteFrame=this.sprites_arr[2];break;case r.pzaGamePropEnum.PROP_CHERRY_BOMB:this.ani_prop.node.active=!0,this.ani_prop.playAnimation("3ui_1",!0);break;case r.pzaGamePropEnum.PROP_FREE_SUN:this.ani_prop.node.active=!0,this.ani_prop.playAnimation("1ui_1",!0);break;case r.pzaGamePropEnum.PROP_AUTO_PICK:this.ani_prop.node.active=!0,this.ani_prop.playAnimation("2ui_1",!0)}},t.prototype.refreshBtnState=function(){var a=p.pzaLocalData.data.stepStates[this.step-1];a[this.idx+""]?1==a[this.idx+""]?(this.btnState=1,this.lab_btn.string="\u9886\u53d6",u.pzaUtil.switchGraySprite(this.node_task.getComponent(cc.Sprite),!1),this.node_task.getComponent(cc.Sprite).spriteFrame=this.sprites_btns[1]):2==a[this.idx+""]&&(this.btnState=2,this.lab_btn.string="\u5df2\u9886\u53d6",u.pzaUtil.switchGraySprite(this.node_task.getComponent(cc.Sprite),!0),this.node_task.getComponent(cc.Sprite).spriteFrame=this.sprites_btns[2]):(this.btnState=0,this.lab_btn.string="\u524d\u5f80",u.pzaUtil.switchGraySprite(this.node_task.getComponent(cc.Sprite),!1),this.node_task.getComponent(cc.Sprite).spriteFrame=this.sprites_btns[0])},t.prototype.refreshTaskPro=function(){"login"==this.newPlayerTaskCfg.tasktype?this.lab_taskPro.string=p.pzaLocalData.data.newPlayerLoginCnt+"/"+this.newPlayerTaskCfg.condStr:"gold"==this.newPlayerTaskCfg.tasktype?this.lab_taskPro.string=p.pzaLocalData.data.newPlayerGetGoldCnt+"/"+this.newPlayerTaskCfg.condStr:"prop"==this.newPlayerTaskCfg.tasktype?this.lab_taskPro.string=p.pzaLocalData.data.newPlayerUsePropCnt+"/"+this.newPlayerTaskCfg.condStr:"ad"==this.newPlayerTaskCfg.tasktype?this.lab_taskPro.string=p.pzaLocalData.data.newPlayerWatchAdCnt+"/"+this.newPlayerTaskCfg.condStr:"endless"==this.newPlayerTaskCfg.tasktype&&(this.lab_taskPro.string=p.pzaLocalData.data.passEndlessCnt+"/"+this.newPlayerTaskCfg.condStr)},t.prototype.clickBtn=function(){var a=this;if(1==this.btnState){l.pzaSoundManager.playSFX();var t=this.newPlayerTaskCfg.rewardType,e=this.newPlayerTaskCfg.rewardCount;p.pzaLocalData.data.stepStates[this.step-1][this.idx+""]=2,p.pzaLocalData.addDirty("stepStates"),this.refreshBtnState(),this.call&&this.call(t,e)}else 0==this.btnState&&("ad"==this.newPlayerTaskCfg.tasktype?m.pzaChannel.instance().showVideo({sucCall:function(){z.default.instance().checkNewPlayerStepTask(a.step,a.idx),a.refreshBtnState(),a.refreshTaskPro()},failCall:function(){},endCall:function(){},posName:"\u70b9\u51fb\u524d\u5f80\u76f4\u63a5\u770b\u5e7f\u544a",adsid:"50"}):"gold"==this.newPlayerTaskCfg.tasktype?c.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.BUY_CONFIRM_VIEW,function(t){var e=t&&t.getComponent(f.pzaBuyConfirmView);e&&e.bindData(h.pzaShopItemType.DAVE_COIN,null,null),e&&e.setCloseCall(function(){z.default.instance().checkNewPlayerStepTask(a.step,a.idx),a.refreshBtnState(),a.refreshTaskPro()})}):"normal"==this.newPlayerTaskCfg.tasktype?this.newPlayerTaskView.judgeToNormal():"endless"==this.newPlayerTaskCfg.tasktype?this.newPlayerTaskView.judgeToEndless():"prop"==this.newPlayerTaskCfg.tasktype&&(p.pzaLocalData.data.passLastPart?this.newPlayerTaskView.judgeToEndless():this.newPlayerTaskView.judgeToNormal()))},t.prototype.clickAllReward=function(){p.pzaLocalData.data.stepStates[this.step-1][this.idx+""]=2,p.pzaLocalData.addDirty("stepStates"),this.refreshBtnState()},t.prototype.onDisable=function(){this.node_task.off(cc.Node.EventType.TOUCH_END,this.clickBtn,this)},i([b({displayName:"\u65b0\u624b\u4efb\u52a1\u540d\u79f0",type:cc.Label})],t.prototype,"lab_taskName",void 0),i([b({displayName:"\u4efb\u52a1\u8fdb\u5ea6Lab",type:cc.Label})],t.prototype,"lab_taskPro",void 0),i([b({displayName:"\u9053\u5177\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"ani_prop",void 0),i([b({displayName:"\u5956\u52b1\u56fe\u7247",type:cc.Sprite})],t.prototype,"img_reward",void 0),i([b({displayName:"\u5956\u52b1\u6570\u91cf",type:cc.Label})],t.prototype,"lab_rewardCnt",void 0),i([b({displayName:"\u4efb\u52a1\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"node_task",void 0),i([b({displayName:"\u6309\u94ae\u540d\u79f0",type:cc.Label})],t.prototype,"lab_btn",void 0),i([b({displayName:"\u56fe\u7247\u7cbe\u7075",type:[cc.SpriteFrame]})],t.prototype,"sprites_arr",void 0),i([b({displayName:"\u6309\u94ae\u56fe\u7247\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"sprites_btns",void 0),i([g],t)}(cc.Component);e.default=v,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../View/pzaBuyConfirmView":"pzaBuyConfirmView","../utils/pzaChannel":"pzaChannel","./pzaNewPlayTaskMgr":"pzaNewPlayTaskMgr"}],pzaNewPlayerTaskView:[function(a,t,e){"use strict";cc._RF.push(t,"a9f85VRyClNnYosLU/TaBrV","pzaNewPlayerTaskView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaRewardManager"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaUIManager"),d=a("../Common/pzaWorldEventManager"),h=a("../Load/pzaPreLoadManager"),m=a("../utils/pzakc"),f=a("./pzaNewPlayerTaskItem"),z=a("./pzaNewPlayTaskMgr"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.btn_stepArr=[],t.node_lockArr=[],t.node_stepSelect=null,t.node_getAll=null,t.content_task=null,t.lab_step=null,t.lab_stepRewardName=null,t.img_stepPlantReward=null,t.img_stepReward=null,t.node_stepBtn=null,t.spris_stepBtns=[],t.lab_stepBtn=null,t.lab_stepRewardCnt=null,t.sprs_stepReward=[],t.node_trial=null,t.nodes_stars=[],t.node_pro=null,t.pre_item=null,t.node_close=null,t.spris_stars=[],t.img_light=null,t.nodes_redTip=[],t.node_redGetAll=null,t.allItems=[],t.step=0,t.rightBtnState=0,t.allRewards=[],t.checkTimes=3,t}return n(t,a),t.prototype.onEnable=function(){var a=this;this.nodes_redTip.forEach(function(a){a.active=!1}),this.checkTimes=1,this.node_stepBtn.active=!1,this.node_close.on(cc.Node.EventType.TOUCH_END,this.close,this),this.node_getAll.on(cc.Node.EventType.TOUCH_END,this.clickGetAll,this);for(var t=function(t){t<l.pzaLocalData.data.newPlayerStep&&e.btn_stepArr[t].on(cc.Node.EventType.TOUCH_END,function(){c.pzaSoundManager.playSFX(),a.clickStep(t+1)},e)},e=this,o=0;o<this.btn_stepArr.length;o++)t(o);for(this.refreshStepBtns(),this.clickStep(1),this.refreshTaskPro(),cc.Tween.stopAllByTarget(this.node_redGetAll),m.default.ani_JitterNode(this.node_redGetAll,.4,15,3,!0),o=0;o<this.nodes_redTip.length;o++)cc.tween(this.nodes_redTip[o]).to(1,{opacity:255},{easing:"sineInOut"}).to(1,{opacity:110},{easing:"sineInOut"}).union().repeatForever().start()},t.prototype.refreshStepBtns=function(){for(var a=0;a<this.node_lockArr.length;a++)a<l.pzaLocalData.data.newPlayerStep?this.node_lockArr[a].active=!1:this.node_lockArr[a].active=!0},t.prototype.onDisable=function(){var a=this;this.node_getAll.off(cc.Node.EventType.TOUCH_END,this.clickGetAll,this);for(var t=function(t){t<l.pzaLocalData.data.newPlayerStep&&e.btn_stepArr[t].off(cc.Node.EventType.TOUCH_END,function(){a.clickStep(t+1)},e)},e=this,o=0;o<this.btn_stepArr.length;o++)t(o);this.node_close.off(cc.Node.EventType.TOUCH_END,this.close,this)},t.prototype.clickStep=function(a){var t=this;this.step=a;var e=z.default.instance().newPlayerTaskMap.get(a);this.content_task.removeAllChildren(),this.allItems=[];for(var o=0;o<e.length;o++){var n=cc.instantiate(this.pre_item);n.parent=this.content_task,n.getComponent(f.default).bindData(this,this.step,o,e[o],function(a,e){t.getItemRewardCall(a,e)}),this.allItems.push(n.getComponent(f.default))}this.node_stepSelect.y=this.btn_stepArr[a-1].y,this.refreshRightMsg(),this.refreshRightBtn(),this.refreshGetAllBtn()},t.prototype.getItemRewardCall=function(a,t){if(this.allRewards=[],a==p.pzaGamePropEnum.RANDOM_GIFT)s.pzaRewardManager.checkRandomGift(t,this.allRewards);else{var e=new p.pzaRewardPropData(a,t);this.allRewards.push(e)}var o=l.pzaLocalData.data.stepStates[this.step-1],n=0;this.allItems.forEach(function(a){2==o[""+a.idx]&&(n+=1)}),4==n&&this.getRightStepRewards(),this.getFinalReward(),s.pzaRewardManager.recieveRewards(this.allRewards,function(){}),this.refreshStepRewardStates(),this.refreshGetAllBtn(),this.refreshTaskPro()},t.prototype.getRightStepRewards=function(){l.pzaLocalData.data.stepRewardStates[this.step-1+""]=2,l.pzaLocalData.addDirty("stepRewardStates"),this.refreshRightBtn();var a=z.default.instance().stepRewardMap.get(this.step);if(a.rewardType==p.pzaGamePropEnum.RANDOM_GIFT)s.pzaRewardManager.checkRandomGift(a.rewardCount,this.allRewards);else{var t=new p.pzaRewardPropData(a.rewardType,a.rewardCount);1==this.step&&(t.limitGet=1),this.allRewards.push(t)}},t.prototype.refreshStepRewardStates=function(){this.refreshRightBtn()},t.prototype.refreshRightBtn=function(){var a=l.pzaLocalData.data.stepStates[this.step-1],t=0;this.allItems.forEach(function(e){2==a[""+e.idx]&&(t+=1)}),this.lab_stepBtn.string=4==t?"\u5df2\u9886\u53d6":""},t.prototype.refreshRightMsg=function(){this.node_trial.active=!1,this.lab_stepRewardCnt.node.active=!1,this.lab_step.string=""+this.step;var a=z.default.instance().stepRewardMap.get(this.step);switch(1==this.step?(this.img_stepPlantReward.node.active=!0,this.img_stepReward.node.active=!1,this.lab_stepRewardName.fontSize=22,this.lab_stepRewardName.node.y=104,this.img_light.active=!1,this.lab_stepRewardCnt.node.y=-71,this.lab_stepRewardCnt.fontSize=30,this.lab_stepRewardCnt.node.color=new cc.Color(255,255,255)):(this.img_stepPlantReward.node.active=!1,this.img_stepReward.node.active=!0,this.lab_stepRewardName.fontSize=30,this.lab_stepRewardName.node.y=95,this.img_light.active=!0,this.img_light.stopAllActions(),this.img_light.runAction(cc.repeatForever(cc.rotateBy(3,180))),this.lab_stepRewardCnt.node.y=-81,this.lab_stepRewardCnt.fontSize=30,this.lab_stepRewardCnt.node.color=new cc.Color(254,244,82)),a.rewardType){case p.pzaGamePropEnum.PROP_COIN:this.lab_stepRewardName.string="\u91d1\u5e01",this.lab_stepRewardCnt.node.active=!0,this.lab_stepRewardCnt.string="X"+a.rewardCount,this.img_stepPlantReward.spriteFrame=this.sprs_stepReward[0],this.img_stepReward.spriteFrame=this.sprs_stepReward[0];break;case p.pzaGamePropEnum.PROP_POWER:this.lab_stepRewardName.string="\u4f53\u529b",this.lab_stepRewardCnt.node.active=!0,this.lab_stepRewardCnt.string="X"+a.rewardCount,this.img_stepPlantReward.spriteFrame=this.sprs_stepReward[1],this.img_stepReward.spriteFrame=this.sprs_stepReward[1];break;case p.pzaGamePropEnum.RANDOM_GIFT:this.lab_stepRewardName.string="\u968f\u673a\u9053\u5177\u793c\u5305",this.lab_stepRewardCnt.node.active=!0,this.lab_stepRewardCnt.string="X"+a.rewardCount,this.img_stepPlantReward.spriteFrame=this.sprs_stepReward[2],this.img_stepReward.spriteFrame=this.sprs_stepReward[2];break;case p.pzaGamePropEnum.PROP_PLANTE:this.node_trial.active=!0,this.lab_stepRewardName.string="\u771f\u7131\u4f50\u7af9",this.img_stepPlantReward.spriteFrame=this.sprs_stepReward[3],this.img_stepReward.spriteFrame=this.sprs_stepReward[3]}},t.prototype.refreshGetAllBtn=function(){this.node_getAll.active=!0;var a=l.pzaLocalData.data.stepStates[this.step-1],t=0,e=0;this.allItems.forEach(function(o){2==a[""+o.idx]&&(t+=1),1==a[""+o.idx]&&(e+=1)}),t>=4&&(this.node_getAll.active=!1),0==e&&(this.node_getAll.active=!1)},t.prototype.clickGetAll=function(){var a=this;this.allRewards=[];var t=l.pzaLocalData.data.stepStates[this.step-1];this.allItems.forEach(function(e){if(1==t[""+e.idx]){if(e.rewardType==p.pzaGamePropEnum.RANDOM_GIFT)s.pzaRewardManager.checkRandomGift(e.rewardCount,a.allRewards);else{var o=new p.pzaRewardPropData(e.rewardType,e.rewardCount);a.allRewards.push(o)}e.clickAllReward()}});var e=0;this.allItems.forEach(function(a){2==t[""+a.idx]&&(e+=1)}),4==e&&this.getRightStepRewards(),this.getFinalReward(),this.refreshStepRewardStates(),this.getRewards(),this.refreshGetAllBtn(),this.refreshTaskPro()},t.prototype.getFinalReward=function(){for(var a=0,t=0;t<7;t++)2==l.pzaLocalData.data.stepRewardStates[t+""]&&a++;if(a>=7){var e=new p.pzaRewardPropData(p.pzaGamePropEnum.PROP_PLANTE,242);this.allRewards.push(e),l.pzaLocalData.data.newPlayerTaskOver=!0,l.pzaLocalData.addDirty("newPlayerTaskOver"),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.NEWPLAYER_TASK_OVER,null)}},t.prototype.refreshTaskPro=function(){for(var a=0,t=0;t<7;t++)l.pzaLocalData.data.stepRewardStates[t+""]>=1&&(a+=1);for(a>0&&(this.node_pro.width=90*(a-1)),t=0;t<7;t++)this.nodes_stars[t].getComponent(cc.Sprite).spriteFrame=t<a?this.spris_stars[1]:this.spris_stars[0]},t.prototype.judgeToNormal=function(){u.pzaUIManager.aniShowPopUI(h.pzaResourceUrl.PART_SELECT_VIEW,null),this.close()},t.prototype.judgeToEndless=function(){},t.prototype.getRewards=function(){this.allRewards.length>0&&s.pzaRewardManager.recieveRewards(this.allRewards)},t.prototype.update=function(a){this.checkTimes>0&&(this.checkTimes-=a,this.checkTimes<=0&&(this.checkTimes=2,this.checkRedShow()))},t.prototype.checkRedShow=function(){for(var a=0;a<l.pzaLocalData.data.newPlayerStep;a++){for(var t=l.pzaLocalData.data.stepStates[a],e=0,o=0;o<4;o++)1==t[""+o]&&e++;this.nodes_redTip[a].active=e>0}},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([b({displayName:"\u9636\u6bb5\u6309\u94ae",type:[cc.Node]})],t.prototype,"btn_stepArr",void 0),i([b({displayName:"\u9636\u6bb5\u9501\u56fe\u7247\u7ec4",type:[cc.Node]})],t.prototype,"node_lockArr",void 0),i([b({displayName:"\u9636\u6bb5\u9009\u4e2d\u56fe",type:cc.Node})],t.prototype,"node_stepSelect",void 0),i([b({displayName:"\u5168\u90e8\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"node_getAll",void 0),i([b({displayName:"\u65b0\u4eba\u4efb\u52a1\u5bb9\u5668",type:cc.Node})],t.prototype,"content_task",void 0),i([b({displayName:"\u9636\u6bb5lab",type:cc.Label})],t.prototype,"lab_step",void 0),i([b({displayName:"\u9636\u6bb5\u5956\u52b1\u540d\u79f0",type:cc.Label})],t.prototype,"lab_stepRewardName",void 0),i([b({displayName:"\u9636\u6bb5\u5956\u52b1\u690d\u7269\u56fe\u7247",type:cc.Sprite})],t.prototype,"img_stepPlantReward",void 0),i([b({displayName:"\u9636\u6bb5\u5956\u52b1\u9053\u5177\u56fe\u7247",type:cc.Sprite})],t.prototype,"img_stepReward",void 0),i([b({displayName:"\u9636\u6bb5\u5956\u52b1\u6309\u94ae",type:cc.Node})],t.prototype,"node_stepBtn",void 0),i([b({displayName:"\u9636\u6bb5\u5956\u52b1\u6309\u94ae\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"spris_stepBtns",void 0),i([b({displayName:"\u9636\u6bb5\u6309\u94ae\u6587\u5b57",type:cc.Label})],t.prototype,"lab_stepBtn",void 0),i([b({displayName:"\u9636\u6bb5\u5956\u52b1\u6570\u91cf",type:cc.Label})],t.prototype,"lab_stepRewardCnt",void 0),i([b({displayName:"\u5956\u52b1\u56fe\u7247\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"sprs_stepReward",void 0),i([b({displayName:"\u8bd5\u7528\u4e00\u5929\u8282\u70b9",type:cc.Node})],t.prototype,"node_trial",void 0),i([b({displayName:"\u9636\u6bb5\u661f\u661f\u7ec4",type:[cc.Node]})],t.prototype,"nodes_stars",void 0),i([b({displayName:"\u4efb\u52a1\u5b8c\u6210\u8fdb\u5ea6\u6761",type:cc.Node})],t.prototype,"node_pro",void 0),i([b({displayName:"item\u9884\u8bbe",type:cc.Prefab})],t.prototype,"pre_item",void 0),i([b({displayName:"\u5173\u95ed\u6309\u94ae",type:cc.Node})],t.prototype,"node_close",void 0),i([b({displayName:"\u661f\u661f\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"spris_stars",void 0),i([b({displayName:"\u5149\u52a8\u753b",type:cc.Node})],t.prototype,"img_light",void 0),i([b({displayName:"\u7ea2\u70b9\u63d0\u793a\u7ec4",type:[cc.Node]})],t.prototype,"nodes_redTip",void 0),i([b({displayName:"\u5168\u90e8\u9886\u53d6\u7ea2\u70b9",type:cc.Node})],t.prototype,"node_redGetAll",void 0),i([g],t)}(cc.Component);e.default=v,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzakc":"pzakc","./pzaNewPlayTaskMgr":"pzaNewPlayTaskMgr","./pzaNewPlayerTaskItem":"pzaNewPlayerTaskItem"}],pzaNewZombieView:[function(a,t,e){"use strict";cc._RF.push(t,"065d6jtpVlEi5hTXXQxVRdB","pzaNewZombieView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNewZombieView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaWorldEventManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.zombieName=null,t.zombieDesc=null,t.maskNode=null,t}return n(t,a),t.prototype.showNewZombie=function(a,t){var e=l.pzaGameConfig.getZombieConfig(a);if(null!=t&&null!=e){this.zombieName.string=e.name;var o=l.pzaGameConfig.ZombieDescMap.get(a);null!=o&&(this.zombieDesc.string=o),this.node.getComponent(cc.Widget).updateAlignment();var n=this.node.convertToNodeSpaceAR(t);this.maskNode.setPosition(cc.v2(n.x,n.y+100))}else this.close()},t.prototype.clickConfirm=function(){this.close()},t.prototype.close=function(){r.pzaGameState.gamePause=!1,s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.GAME_RESUME,null),p.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u50f5\u5c38\u540d\u79f0",type:cc.Label})],t.prototype,"zombieName",void 0),i([d({displayName:"\u50f5\u5c38\u4ecb\u7ecd",type:cc.Label})],t.prototype,"zombieDesc",void 0),i([d({displayName:"\u900f\u660e\u906e\u7f69",type:cc.Node})],t.prototype,"maskNode",void 0),i([u],t)}(cc.Component);e.pzaNewZombieView=h,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaNewspaperZombie:[function(a,t,e){"use strict";cc._RF.push(t,"d1e17eiULxA2714SgSPTN3g","pzaNewspaperZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNewspaperZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaGameState"),u=a("./pzaBaseZombie"),d=a("./pzaZombieState"),h=a("./pzaZombieSlot"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=h.pzaZombieSlotType.newspaper,t.directThrowHurt=!0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[h.pzaZombieSlotType.butter,new h.pzaZombieSlot(this.animation.spineAnimation,h.pzaZombieSlotType.butter).addState(new h.pzaZombieSlotAtt(1,h.pzaZombieSlotType.butter,-2.19,49.04))],[h.pzaZombieSlotType.newspaper,new h.pzaZombieSlot(this.animation.spineAnimation,h.pzaZombieSlotType.newspaper).addState(new h.pzaZombieSlotAtt(1,this.equip1Slot+"1",4.77,21.76)).addState(new h.pzaZombieSlotAtt(2,this.equip1Slot+"1",4.77,21.76)).addState(new h.pzaZombieSlotAtt(3,this.equip1Slot+"3",4.77,25.19))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE_PEA,-1)),this.baseData.zombieData.hurtCate=s.pzaZombieHurtCate.PENETRATE_HURT},t.prototype.equipDeath=function(){var a=this;this.equipHurtState=s.pzaHurtStateEnum.DEAD,this.hasEquip=!1,null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.zombieData.moveSpd=0),this.isPlayEquipDeath=!0,this.animation.playAnimation("drop",!1,function(){if(a.updateEquipState(a.equip1Slot,0),a.changeSkin("zombie_2"),null!=a.baseData&&null!=a.baseData.zombieData){var t=r.pzaGameConfig.getZombieSpecialSpeed(a.baseData.zombieData.zombieType);a.baseData.zombieData.moveSpd=c.pzaGameState.map.getBlockWidth()/t}a.playMoveAnimation(),p.pzaSoundManager.playAudio("newspaper_angel"),a.isPlayEquipDeath=!1}),p.pzaSoundManager.playAudio("newspaper_fall"),this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_ICE_PEA)},t.prototype.playMoveAnimation=function(){this.zombieState=d.pzaZombieState.MOVE;var a=this.hasEquip?"move":"move2";this.animation.playAnimation(a,!0,null,null,1)},i([f],t)}(u.pzaBaseZombie));e.pzaNewspaperZombie=z,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaNightWear:[function(a,t,e){"use strict";cc._RF.push(t,"4ed09qT8P1LQqNgFaiLUBYL","pzaNightWear");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNightWear=void 0;var r=a("../Data/pzaBuffData"),p=a("./pzaBaseZombie"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=l.pzaZombieSlotType.hat_night,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[l.pzaZombieSlotType.butter,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.butter).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[l.pzaZombieSlotType.hat_night,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.hat_night).addState(new l.pzaZombieSlotAtt(1,"15hat1",64.08,38.69,-79.56)).addState(new l.pzaZombieSlotAtt(2,"15hat2",64.08,38.69,-79.56)).addState(new l.pzaZombieSlotAtt(3,"15hat3",61.62,38.24,-79.56))],[l.pzaZombieSlotType.hat_night_1,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.hat_night_1).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.hat_night_1,136.58,-17,30.51))],[l.pzaZombieSlotType.hat_night_2,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.hat_night_2).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.hat_night_2,77.91,13.14,54.11))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_ICE,-1))},t.prototype.equipDeath=function(t){a.prototype.equipDeath.call(this,t),this.updateEquipState(l.pzaZombieSlotType.hat_night_1,0)},t.prototype.equipIntact=function(){a.prototype.equipIntact.call(this),this.updateEquipState(l.pzaZombieSlotType.hat_night_1,1)},i([c],t)}(p.pzaBaseZombie));e.pzaNightWear=u,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaNodeManager:[function(a,t,e){"use strict";cc._RF.push(t,"df721QfqtJH6ISch33dy7N5","pzaNodeManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNodeManager=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bgNode=null,t.grassNode=null,t.battleUINode=null,t.downEffectNode=null,t.plantZombieNode=null,t.bulletNode=null,t.upEffectNode=null,t.upBgNode=null,t.cards=null,t}var e;return n(t,a),e=t,t.prototype.onLoad=function(){e.instance=this},t.getCardsNode=function(){return null==this.instance?null:this.instance.cards},t.getGrassNode=function(){return null==this.instance?null:this.instance.grassNode},t.getPlantZombieNode=function(){return null==this.instance?null:this.instance.plantZombieNode},t.getBulletNode=function(){return null==this.instance?null:this.instance.bulletNode},t.getDownEffectNode=function(){return null==this.instance?null:this.instance.downEffectNode},t.getUpEffectNode=function(){return null==this.instance?null:this.instance.upEffectNode},t.getUpBgNode=function(){return null==this.instance?null:this.instance.upBgNode},t.getBattleUINode=function(){return null==this.instance?null:this.instance.battleUINode},t.instance=null,i([l({displayName:"\u80cc\u666f\u8282\u70b9",type:cc.Node})],t.prototype,"bgNode",void 0),i([l({displayName:"\u8349\u5730\u8282\u70b9",type:cc.Node})],t.prototype,"grassNode",void 0),i([l({displayName:"\u6218\u6597UI\u8282\u70b9",type:cc.Node})],t.prototype,"battleUINode",void 0),i([l({displayName:"\u4e0b\u5c42\u7279\u6548\u8282\u70b9",type:cc.Node})],t.prototype,"downEffectNode",void 0),i([l({displayName:"\u690d\u7269\u50f5\u5c38\u8282\u70b9",type:cc.Node})],t.prototype,"plantZombieNode",void 0),i([l({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"bulletNode",void 0),i([l({displayName:"\u4e0a\u5c42\u7279\u6548\u8282\u70b9",type:cc.Node})],t.prototype,"upEffectNode",void 0),i([l({displayName:"\u4e0a\u5c42\u80cc\u666f\u8282\u70b9",type:cc.Node})],t.prototype,"upBgNode",void 0),i([l({displayName:"\u6389\u51fa\u7684\u5361",type:cc.Node})],t.prototype,"cards",void 0),e=i([p],t)}(cc.Component);e.pzaNodeManager=s,cc._RF.pop()},{}],pzaNormalZombie:[function(a,t,e){"use strict";cc._RF.push(t,"939b5ISX1BN+oTtVwQEGr8m","pzaNormalZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNormalZombie=void 0;var r=a("../Data/pzaZombieEnum"),p=a("./pzaBaseZombie"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="zombie_head_1",t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[l.pzaZombieSlotType.butter,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.butter).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.butter,67.87,-1.82,-90.94))]])},t.prototype.zombieHurt=function(){this.zombieHurtState=r.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),"zombie_2"==this.curSkinName&&(this.curSkinName="zombie_2_2"),this.changeSkin(this.curSkinName)},i([c],t)}(p.pzaBaseZombie));e.pzaNormalZombie=u,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaNoticeView:[function(a,t,e){"use strict";cc._RF.push(t,"73925H8mKpJOLREsB5JZGz0","pzaNoticeView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNoticeView=void 0;var r=a("../Common/pzaGameCommonPool"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.content=null,t.closeCallBack=null,t}return n(t,a),t.prototype.onEnable=function(){this.content.horizontalAlign=cc.Label.HorizontalAlign.LEFT,this.content.node.width+=50,this.content.node.x+=25,this.content.string="    \u8877\u5fc3\u611f\u8c22\u60a8\u4e00\u76f4\u4ee5\u6765\u5bf9\u6211\u4eec\u6e38\u620f\u7684\u652f\u6301\u4e0e\u539a\u7231\u3002\u5e94\u7248\u6743\u65b9\u8981\u6c42\uff0c\u6211\u4eec\u8fd1\u671f\u5bf9\u6e38\u620f\u4e2d\u7684IP\u5143\u7d20\u8fdb\u884c\u4e86\u4e00\u7cfb\u5217\u7ec6\u81f4\u7684\u6574\u6539\u4e0e\u4f18\u5316\u3002\n\n    \u6b64\u6b21\u6574\u6539\uff0c\u6211\u4eec\u7740\u91cd\u5bf9\u6e38\u620f\u4e2d\u7684\u89d2\u8272\u8bbe\u8ba1\u3001\u573a\u666f\u5e03\u5c40\u7b49\u5185\u5bb9\u8fdb\u884c\u4e86\u8c03\u6574\u4e0e\u5347\u7ea7\uff0c\u529b\u6c42\u5728\u4fdd\u7559\u539f\u6709\u4e16\u754c\u89c2\u4e0e\u6545\u4e8b\u8109\u7edc\u7684\u57fa\u7840\u4e0a\uff0c\u4e3a\u5927\u5bb6\u5e26\u6765\u66f4\u52a0\u65b0\u9896\u3001\u4e30\u5bcc\u7684\u89c6\u89c9\u4eab\u53d7\u548c\u6e38\u620f\u4f53\u9a8c\u3002\n\n    \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5c3d\u7ba1\u6211\u4eec\u5bf9IP\u5143\u7d20\u8fdb\u884c\u4e86\u6574\u6539\uff0c\u4f46\u6e38\u620f\u7684\u6570\u503c\u4f53\u7cfb\u3001\u73a9\u6cd5\u673a\u5236\u4ee5\u53ca\u6838\u5fc3\u4f53\u9a8c\u5747\u4fdd\u6301\u4e0e\u539f\u7248\u4e00\u81f4\u3002\u6211\u4eec\u6df1\u77e5\uff0c\u8fd9\u4e9b\u5143\u7d20\u662f\u6784\u6210\u6e38\u620f\u7cbe\u9ad3\u7684\u91cd\u8981\u90e8\u5206\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u6574\u6539\u8fc7\u7a0b\u4e2d\u59cb\u7ec8\u79c9\u6301\u7740\u5c0a\u91cd\u4e0e\u4fdd\u7559\u7684\u539f\u5219\u3002\n\n    \u6211\u4eec\u8bda\u631a\u5730\u9080\u8bf7\u60a8\u518d\u6b21\u8e0f\u5165\u8fd9\u4e2a\u719f\u6089\u800c\u53c8\u5168\u65b0\u7684\u6e38\u620f\u4e16\u754c\uff0c\u7ee7\u7eed\u60a8\u7684\u5192\u9669\u4e4b\u65c5\u3002\u6211\u4eec\u76f8\u4fe1\uff0c\u7ecf\u8fc7\u6574\u6539\u540e\u7684\u6e38\u620f\u5c06\u4e3a\u60a8\u5e26\u6765\u66f4\u52a0\u6c89\u6d78\u5f0f\u7684\u6e38\u620f\u4f53\u9a8c\uff0c\u8ba9\u60a8\u5728\u6e38\u620f\u4e2d\u6536\u83b7\u66f4\u591a\u7684\u60ca\u559c\u4e0e\u4e50\u8da3\u3002\n"},t.prototype.setCloseCallback=function(a){this.closeCallBack=a},t.prototype.close=function(){this.closeCallBack&&this.closeCallBack(),r.pzaGameCommonPool.returnInstant(this.node)},i([s({type:cc.Label})],t.prototype,"content",void 0),i([l],t)}(cc.Component);e.pzaNoticeView=c,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaNutMoneyJar:[function(a,t,e){"use strict";cc._RF.push(t,"17e389/3UxLQJ+M25Z0JiWC","pzaNutMoneyJar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNutMoneyJar=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../utils/pzakc"),s=a("../Bullet/pzaGoldBullet"),c=a("../Data/pzaDropType"),u=a("./pzaGoldMagnet"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.silverCoinCnt=0,t.goldCoinCnt=0,t.diamondCnt=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.silverCoinCnt=0,this.goldCoinCnt=0,this.diamondCnt=0},t.prototype.absorbCoin=function(){var a=this,t=Array.from(window.pzaMapManager.DropCoinSet);null!=t&&(t=t.slice(0,5)).forEach(function(t){t.curDropType==c.pzaDropType.SILVER_COIN?a.silverCoinCnt++:t.curDropType==c.pzaDropType.GOLD_COIN?a.goldCoinCnt++:t.curDropType==c.pzaDropType.DIAMOND&&a.diamondCnt++,t.absorbMove(a.baseData.logicPos)})},t.prototype.deathAtk=function(){if(this.silverCoinCnt>0||this.goldCoinCnt>0||this.diamondCnt>0){var a=p.pzaNodeManager.getBulletNode();if(null==a)return;for(var t=0;t<this.silverCoinCnt;t++){var e=this.node.convertToWorldSpaceAR(cc.v2().add(cc.v2(l.default.randomInt(-50,50),l.default.randomInt(0,50)))),o=a.convertToNodeSpaceAR(e);if(!(n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab)))return;n.setParent(a),o.x+=l.default.randomInt(0,50),o.y+=l.default.randomInt(0,50),(i=n.getComponent(s.pzaGoldBullet))&&i.bulletInit(this.baseData,0),i&&i.init(500,null,o,this.baseData.yIndex,!1)}for(t=0;t<this.goldCoinCnt;t++){if(e=this.node.convertToWorldSpaceAR(cc.v2().add(cc.v2(l.default.randomInt(-50,50),l.default.randomInt(0,50)))),o=a.convertToNodeSpaceAR(e),!(n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab)))return;n.setParent(a),(i=n.getComponent(s.pzaGoldBullet))&&i.bulletInit(this.baseData,1),i&&i.init(500,null,o,this.baseData.yIndex,!1)}for(t=0;t<this.diamondCnt;t++){var n,i;if(e=this.node.convertToWorldSpaceAR(cc.v2().add(cc.v2(l.default.randomInt(-50,50),l.default.randomInt(0,50)))),o=a.convertToNodeSpaceAR(e),!(n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab)))return;o.x+=l.default.randomInt(0,50),o.y+=l.default.randomInt(0,50),n.setParent(a),(i=n.getComponent(s.pzaGoldBullet))&&i.bulletInit(this.baseData,2),i&&i.init(500,null,o,this.baseData.yIndex,!1)}}},t.prototype.close=function(){this.deathAtk(),a.prototype.close.call(this)},i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([h],t)}(u.pzaGoldMagnet);e.pzaNutMoneyJar=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../utils/pzakc":"pzakc","../Bullet/pzaGoldBullet":"pzaGoldBullet","../Data/pzaDropType":"pzaDropType","./pzaGoldMagnet":"pzaGoldMagnet"}],pzaNutZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"2c443FFAWZF6IwgRHSp3J1H","pzaNutZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNutZombie2=void 0;var r=a("../Data/pzaZombieEnum"),p=a("../Plant/pzaAttackType"),l=a("../pzaEffectManager"),s=a("../pzaGameState"),c=a("./pzaNutZombie"),u=a("./pzaZombieSlot"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=u.pzaZombieSlotType.head_nut,t.hatType=u.pzaZombieSlotType.head_nut_hole,t.isNut=!0,t.garlicSkinName="",t}return n(t,a),t.prototype.bindData=function(t,e){a.prototype.bindData.call(this,t,e)},t.prototype.zombieHurt=function(){this.zombieHurtState=r.pzaHurtStateEnum.HURT},t.prototype.showHole=function(){this.baseData&&-1!=this.baseData.xIndex&&-1!=this.baseData.yIndex&&l.pzaEffectManager.createDoomHoleEffect(this.baseData.logicPos,this.baseData.xIndex,this.baseData.yIndex)},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.showHole()},t.prototype.ashesDeath=function(t,e){a.prototype.ashesDeath;var o;if(o=this.hasInWater?"blow2_duck2":this.hasUseSrAni?"blow2_duck":"blow2",this.baseData.zombieDie(),t!=s.pzaGameState.adCherryBoomDmg||e!=p.pzaAttackType.BOOM||this.baseData.zombieData.zombieType!=r.pzaZombieEnum.YELLOW_DUCK_ZOMBIE&&this.baseData.zombieData.zombieType!=r.pzaZombieEnum.SKELETON_ZOMBIE&&this.baseData.zombieData.zombieType!=r.pzaZombieEnum.BedCar&&this.baseData.zombieData.zombieType!=r.pzaZombieEnum.ZOMBONI3?this.death(!1):this.death(!1,p.pzaAttackType.DEATH),!(this.baseData.xIndex>=0&&window.pzaMapManager.isInWaterWay(this.baseData.yIndex))){var n=this.baseData.zombieData.zombieType;l.pzaEffectManager.createAshesEffect(n,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,this.animation.spineAnimation.node,o)}},i([h],t)}(c.pzaNutZombie));e.pzaNutZombie2=m,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaNutZombie":"pzaNutZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaNutZombie:[function(a,t,e){"use strict";cc._RF.push(t,"139ffPnPSJJXaRS/prJ5GYG","pzaNutZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNutZombie=void 0;var r=a("../Data/pzaZombieEnum"),p=a("./pzaConeHeadZombie"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=l.pzaZombieSlotType.head_nut,t.equip2Slot=l.pzaZombieSlotType.hat,t.hatType=l.pzaZombieSlotType.head_nut,t.isNut=!0,t.garlicSkinName="",t.eq2Pos1=[0,0,0],t.eq2Pos2=[0,0,0],t.eq2Pos3=[0,0,0],t.eq2Name=null,t}return n(t,a),t.prototype.initEquips=function(){if(this.baseData&&this.baseData.zombieData){switch(this.slotMap=new Map([]),this.slotMap.set(l.pzaZombieSlotType.head_nut,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.head_nut).addState(new l.pzaZombieSlotAtt(1,this.hatType+"1",198,2.55,-90)).addState(new l.pzaZombieSlotAtt(2,this.hatType+"2",197.5,2.55,-90)).addState(new l.pzaZombieSlotAtt(3,this.hatType+"3",197.5,2.55,-90))),this.baseData.zombieData.zombieType){case r.pzaZombieEnum.Nut_Zombie1_Bucket:case r.pzaZombieEnum.Nut_Zombie2_Bucket:this.eq2Name=l.pzaZombieSlotType.hat_iron,this.eq2Pos1=[137.3,-22.36,-90.94],this.eq2Pos2=[135.3,-22.32,-90.94],this.eq2Pos3=[131.2,-28.26,-90.94];break;case r.pzaZombieEnum.Nut_Zombie1_Conehead:case r.pzaZombieEnum.Nut_Zombie2_Conehead:this.eq2Name=l.pzaZombieSlotType.hat,this.eq2Pos1=[97.8,-21.71,-90.94],this.eq2Pos2=[80.81,-21.42,-90.94],this.eq2Pos3=[67.81,-21.21,-90.94];break;default:return}this.slotMap.set(this.equip2Slot,new l.pzaZombieSlot(this.animation.spineAnimation,this.equip2Slot).addState(new l.pzaZombieSlotAtt(1,this.eq2Name+"1",this.eq2Pos1[0],this.eq2Pos1[1],this.eq2Pos1[2])).addState(new l.pzaZombieSlotAtt(2,this.eq2Name+"2",this.eq2Pos2[0],this.eq2Pos2[1],this.eq2Pos2[2])).addState(new l.pzaZombieSlotAtt(3,this.eq2Name+"3",this.eq2Pos3[0],this.eq2Pos3[1],this.eq2Pos3[2]))),this.updateEquipState(l.pzaZombieSlotType.hat,1)}},t.prototype.bindData=function(t,e){a.prototype.bindData.call(this,t,e)},t.prototype.updateMove=function(t){a.prototype.updateMove.call(this,t)},t.prototype.ashesDeath=function(t,e){a.prototype.ashesDeath.call(this,t,e,this.hasInWater?"blow_2pant_duck":"blow_2pant")},i([c],t)}(p.pzaConeHeadZombie));e.pzaNutZombie=u,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","./pzaConeHeadZombie":"pzaConeHeadZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaOperationMgr:[function(a,t,e){"use strict";cc._RF.push(t,"5b08f87WtFCFphu37lPDXdu","pzaOperationMgr");var o=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var o,n,i=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaOperationMgr=void 0;var i=a("../Battle/pzaGameState"),r=a("../Load/pzaBundleObjectPool"),p=a("../Load/pzaPreLoadManager"),l=a("../utils/pzaChannel"),s=a("../View/pzaBubbleItem"),c=a("../View/pzaVideoGiftView"),u=a("./pzaGameConfig"),d=a("./pzaGiftConfig"),h=a("./pzaLocalData"),m=a("./pzaUIManager"),f=a("./pzaWorldEventManager"),z=function(){function a(){}return a.showNewPlayerView=function(){h.pzaLocalData.data.newPlayerBtnState=2,h.pzaLocalData.addDirty("newPlayerBtnState")},a.showResGift=function(a){h.pzaLocalData.isShowGift?h.pzaLocalData.data.hasBeginGift?h.pzaLocalData.data.getDaveGiftCount<d.pzaGiftConfig.getGiftData(d.pzaGiftID.Dave).getCount&&h.pzaLocalData.data.showDaveViewCount<h.pzaLocalData.data.showDaveViewMax?(h.pzaLocalData.data.showDaveViewCount++,h.pzaLocalData.addDirty("showDaveViewCount"),m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(t){var e=t&&t.getComponent(c.pzaVideoGiftView);e&&e.bindData(d.pzaGiftID.Dave,function(){a&&a()},function(){a&&a()})})):m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(t){var e=t&&t.getComponent(c.pzaVideoGiftView);e&&e.bindData(d.pzaGiftID.Random,function(){a&&a()},function(){a&&a()})}):h.pzaLocalData.data.showBeginViewCount<h.pzaLocalData.data.showBeginViewMax?(h.pzaLocalData.data.showBeginViewCount++,h.pzaLocalData.addDirty("showBeginViewCount"),m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(t){var e=t&&t.getComponent(c.pzaVideoGiftView);e&&e.bindData(d.pzaGiftID.Begin,function(){a&&a()},function(){a&&a()})})):a&&a():a&&a()},a.showNormalGameGift=function(){h.pzaLocalData.isShowGift&&(10*h.pzaLocalData.data.curChapter+h.pzaLocalData.data.curPart<=14||(h.pzaLocalData.data.hasBeginGift?(console.log("pzaLocalData.data.getDaveGiftCount ",h.pzaLocalData.data.getDaveGiftCount),h.pzaLocalData.data.getDaveGiftCount<d.pzaGiftConfig.getGiftData(d.pzaGiftID.Dave).getCount&&h.pzaLocalData.data.showDaveViewCount<h.pzaLocalData.data.showDaveViewMax?(h.pzaLocalData.data.showDaveViewCount++,h.pzaLocalData.addDirty("showDaveViewCount"),m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(c.pzaVideoGiftView);t&&t.bindData(d.pzaGiftID.Dave,null,null)})):m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(c.pzaVideoGiftView);t&&t.bindData(d.pzaGiftID.Random,null,null)})):h.pzaLocalData.data.showBeginViewCount<h.pzaLocalData.data.showBeginViewMax&&(h.pzaLocalData.data.showBeginViewCount++,h.pzaLocalData.addDirty("showBeginViewCount"),m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(c.pzaVideoGiftView);t&&t.bindData(d.pzaGiftID.Begin,null,null)}))))},a.showMiniGameGift=function(){h.pzaLocalData.isShowGift&&5==i.pzaGameState.curChapter&&9==i.pzaGameState.curPart&&this.showResGift(null)},a.showFailGameGift=function(a,t,e){h.pzaLocalData.isShowGift?h.pzaLocalData.data.hasBeginGift?h.pzaLocalData.data.getDaveGiftCount<d.pzaGiftConfig.getGiftData(d.pzaGiftID.Dave).getCount&&h.pzaLocalData.data.showDaveViewCount<h.pzaLocalData.data.showDaveViewMax?(h.pzaLocalData.data.showDaveViewCount++,h.pzaLocalData.addDirty("showDaveViewCount"),m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(c.pzaVideoGiftView);t&&t.bindData(d.pzaGiftID.Dave,function(){e()},function(){e()})})):m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(c.pzaVideoGiftView);t&&t.bindData(d.pzaGiftID.Random,function(){e&&e()},function(){e&&e()})}):h.pzaLocalData.data.showBeginViewCount<h.pzaLocalData.data.showBeginViewMax?(h.pzaLocalData.data.showBeginViewCount++,h.pzaLocalData.addDirty("showBeginViewCount"),m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(c.pzaVideoGiftView);t&&t.bindData(d.pzaGiftID.Begin,function(){e()},function(){e()})})):e():e&&e()},a.showCreativeVaseModeGift=function(a){h.pzaLocalData.isShowGift?this.showResGift(a):a&&a()},a.showZombieModeGift=function(a){h.pzaLocalData.isShowGift?this.showResGift(a):a&&a()},a.showTrophyGift=function(){l.pzaChannel.instance().showInter(!0),h.pzaLocalData.isShowGift&&(h.pzaLocalData.data.hasBeginGift?h.pzaLocalData.data.getDaveGiftCount<d.pzaGiftConfig.getGiftData(d.pzaGiftID.Dave).getCount&&h.pzaLocalData.data.showDaveViewCount<h.pzaLocalData.data.showDaveViewMax?(h.pzaLocalData.data.showDaveViewCount++,h.pzaLocalData.addDirty("showDaveViewCount"),m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(c.pzaVideoGiftView);t&&t.bindData(d.pzaGiftID.Dave,null,null)})):m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(c.pzaVideoGiftView);t&&t.bindData(d.pzaGiftID.Random,null,null)}):i.pzaGameState.gameMode!=i.pzaGameMode.NORMAL&&h.pzaLocalData.data.showBeginViewCount<h.pzaLocalData.data.showBeginViewMax&&(h.pzaLocalData.data.showBeginViewCount++,h.pzaLocalData.addDirty("showBeginViewCount"),m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(c.pzaVideoGiftView);t&&t.bindData(d.pzaGiftID.Begin,null,null)})))},a.showGardenGift=function(a){h.pzaLocalData.isShowGift&&a<=0&&0==h.pzaLocalData.gardenGuiding&&!h.pzaLocalData.data.hasGardenGift&&h.pzaLocalData.data.showGardenViewCount<h.pzaLocalData.data.showGardenViewMax&&(h.pzaLocalData.data.showGardenViewCount++,h.pzaLocalData.addDirty("showGardenViewCount"),m.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.VIDEO_GIFT_VIEW,function(a){var t=a&&a.getComponent(c.pzaVideoGiftView);t&&t.bindData(d.pzaGiftID.Garden,null,null)}))},a.showShareBubble=function(a,t){if("oppo"==l.pzaChannel.instance().channel||"my"==l.pzaChannel.instance().channel)return a.active=!1,void(t&&t(null));h.pzaLocalData.data.everyDayShareRwdCurrent<l.pzaChannel.instance().getCtrl("p9")&&r.pzaBundleObjectPool.requestInstantByUrl(p.pzaResourceUrl.BUBBLE_ITEM,!1,function(e,o){null==e&&null!=o?a&&(o.setParent(a),o.getComponent(s.pzaBubbleItem).showReward(),t&&t(o.getComponent(s.pzaBubbleItem))):console.error(e)})},a.showChangeTipsBubble=function(t,e,o,n){void 0===o&&(o=5),"qq"!=l.pzaChannel.instance().channel&&(a.BubbleNode||!t.active||t.opacity<=20||i.pzaGameState.gameWin||(this.isShowedChangeSpeedTips=!0,a.showTips(t,0,0,e,s.pzaBubbleType.speed,o,n)))},a.showSunTipsBubble=function(t,e,o,n){void 0===o&&(o=5),"qq"!=l.pzaChannel.instance().channel&&(a.BubbleNode||!a.sunTipIntervalTimeOver||!t.active||t.opacity<=20||(a.sunTipTimer&&clearTimeout(a.sunTipTimer),a.sunTipIntervalTimeOver=!1,a.sunTipTimer=setTimeout(function(){a.sunTipIntervalTimeOver=!0},a.sunTipIntervalTimeMax),a.showTips(t,0,0,e,s.pzaBubbleType.sun,o,n)))},a.isShowChangeSpeedTips=function(){var a,t;if(!this.isShowedChangeSpeedTips&&1==cc.gameSpeed){var e=window.pzaplantManager.plantMap;if(!(e.size<3)){var i=0;try{for(var r=o(e),p=r.next();!p.done;p=r.next()){var l=n(p.value,2),s=(l[0],l[1]);if(s&&s.baseData&&s.baseData.plantData){var c=s.baseData.plantData.plantType;if(!u.pzaPlantConfigData.isEnvPlant(c)&&!u.pzaPlantConfigData.isPotPlant(c)&&!u.pzaPlantConfigData.isPumPkin(c)&&++i>=3){f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.SHOW_BUBBLE_TIPS,null);break}}}}catch(d){a={error:d}}finally{try{p&&!p.done&&(t=r.return)&&t.call(r)}finally{if(a)throw a.error}}}}},a.startTipsDetect=function(){"qq"!=l.pzaChannel.instance().channel&&(this.TipsDetectTimer||(this.TipsDetectTimer=setInterval(function(){if(!a.BubbleNode&&a.cherryTipIntervalTimeOver){var t=window.pzazombieManager.zombieMap;t&&t.size>0&&t.forEach(function(t){t&&t.baseData&&-1!=t.baseData.xIndex&&t.baseData.xIndex<=1&&(a.cherryTipTimer&&clearTimeout(a.cherryTipTimer),a.cherryTipIntervalTimeOver=!1,a.cherryTipTimer=setTimeout(function(){a.cherryTipIntervalTimeOver=!0},a.sunTipIntervalTimeMax),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.SHOW_BUBBLE_ARROW,5))})}},500)))},a.stopTipsDetect=function(){this.TipsDetectTimer&&clearInterval(this.TipsDetectTimer),this.TipsDetectTimer=null,a.cherryTipIntervalTimeOver=!0,a.cherryTipTimer&&clearTimeout(a.cherryTipTimer),a.sunTipIntervalTimeOver=!0,a.sunTipTimer&&clearTimeout(a.sunTipTimer)},a.showTips=function(t,e,o,n,i,l,c){void 0===e&&(e=0),void 0===o&&(o=0),void 0===l&&(l=5),a.BubbleNode||!t||!t.active||t.opacity<=20||r.pzaBundleObjectPool.requestInstantByUrl(p.pzaResourceUrl.BUBBLE_ITEM,!1,function(r,p){if(null==r&&null!=p){if(t){p.setParent(t),p.x+=e,p.y+=o,p.getComponent(s.pzaBubbleItem).type=i,p.getComponent(s.pzaBubbleItem).showTips(),p.getComponent(s.pzaBubbleItem).setTipText(n),p.getComponent(s.pzaBubbleItem).setCloseTime({type:i,setTime:l}),a.BubbleNode=p,c&&c(p.getComponent(s.pzaBubbleItem));var u=t.convertToWorldSpaceAR(p.getPosition());p.setParent(t.parent.parent);var d=t.parent.parent.convertToNodeSpaceAR(u);p.zIndex=999,p.setPosition(d)}}else console.error(r)})},a.isShowedChangeSpeedTips=!1,a.TipsDetectTimer=null,a.BubbleNode=null,a.sunTipIntervalTimeOver=!0,a.sunTipIntervalTimeMax=3e4,a.sunTipTimer=null,a.cherryTipIntervalTimeOver=!0,a.cherryTipIntervalTimeMax=3e4,a.cherryTipTimer=null,a}();e.pzaOperationMgr=z,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaBubbleItem":"pzaBubbleItem","../View/pzaVideoGiftView":"pzaVideoGiftView","../utils/pzaChannel":"pzaChannel","./pzaGameConfig":"pzaGameConfig","./pzaGiftConfig":"pzaGiftConfig","./pzaLocalData":"pzaLocalData","./pzaUIManager":"pzaUIManager","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaOptionView:[function(a,t,e){"use strict";cc._RF.push(t,"d0d58cuEPJPcoHhY3EJvkOz","pzaOptionView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaOptionView=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaGamePropConfig"),u=a("../../Common/pzaLocalData"),d=a("../../Common/pzaRewardManager"),h=a("../../Common/pzaSoundManager"),m=a("../../Common/pzaTipManager"),f=a("../../Common/pzaUIManager"),z=a("../../Common/pzaUtil"),y=a("../../Common/pzaWorldEventManager"),g=a("../../Load/pzaPreLoadManager"),b=a("../../utils/pzaChannel"),v=a("../../utils/pzakc"),P=a("../pzaCommonMask"),D=a("../pzaWarningView"),S=cc._decorator,C=S.ccclass,_=S.property,E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.soundTxt=null,t.soundTag=null,t.soundBtn=null,t.musicTxt=null,t.musicTag=null,t.musicBtn=null,t.backTxt=null,t.backBtn=null,t.reBtn=null,t.redeemEdixBox=null,t.uidNode=null,t.privacyNode=null,t.uidEdit=null,t.setUID=null,t.backGameCall=null,t.setClickBtnCD=5e3,t.ableClickSetBtn=!0,t}return n(t,a),t.prototype.onEnable=function(){if(this.uidNode.active=!1,this.soundBtn.on(cc.Node.EventType.TOUCH_START,this.soundTouch,this),this.soundBtn.on(cc.Node.EventType.TOUCH_MOVE,this.soundTouch,this),this.soundBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.soundTouch,this),this.soundBtn.on(cc.Node.EventType.TOUCH_END,this.soundTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_START,this.musicTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_MOVE,this.musicTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.musicTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_END,this.musicTouch,this),this.redeemEdixBox.string="",b.pzaChannel.instance().getChannel().channelUserId){this.uidNode.active=!0;var a=b.pzaChannel.instance().getChannel().channelUserId;a.length>8&&(a=this.getFirstFiveChars(a)+"..."),this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=a}else this.uidNode.active=!1;this.uidEdit.node.active=!1,this.uidEdit.node.parent.active=!1,this.setUID.active=!1,"noAD"!=b.pzaChannel.instance().channel||b.pzaChannel.isConfRemote||(this.uidNode.active=!0,this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=u.pzaLocalData.data.noADPlayerUid,this.uidEdit.node.active=!0,this.uidEdit.node.parent.active=!0,this.setUID.active=!0,this.uidEdit.string=u.pzaLocalData.data.noADPlayerUid),console.log("now channel: ",b.pzaChannel.instance().channel),"ks"!=b.pzaChannel.instance().channel&&"qq"!=b.pzaChannel.instance().channel||(this.uidNode.active=!1),this.privacyNode.active="qq"==b.pzaChannel.instance().channel||"oppo"==b.pzaChannel.instance().channel||"vivo"==b.pzaChannel.instance().channel||"hw"==b.pzaChannel.instance().channel||"mi"==b.pzaChannel.instance().channel||b.pzaChannel.isConfRemote,b.pzaChannel.instance().showInter(),b.pzaChannel.instance().closeBanner()},t.prototype.getFirstFiveChars=function(a){return a.substring(0,5)},t.prototype.onDisable=function(){this.soundBtn.off(cc.Node.EventType.TOUCH_START,this.soundTouch,this),this.soundBtn.off(cc.Node.EventType.TOUCH_MOVE,this.soundTouch,this),this.soundBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.soundTouch,this),this.soundBtn.off(cc.Node.EventType.TOUCH_END,this.soundTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_START,this.musicTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_MOVE,this.musicTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.musicTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_END,this.musicTouch,this)},t.prototype.init=function(a,t,e){void 0===e&&(e="\u8fd4\u56de\u6e38\u620f"),this.backGameCall=t,this.backTxt.string=e,a?(this.reBtn.active=!0,this.backBtn.x=-204):(this.reBtn.active=!1,this.backBtn.x=0),this.soundTag.x=360*u.pzaLocalData.data.soundValue-180,this.musicTag.x=360*u.pzaLocalData.data.musicValue-180,u.pzaLocalData.data.soundValue<=0?this.soundTxt.string="\u97f3\u6548\uff08\u5173\uff09":this.soundTxt.string="\u97f3\u91cf\uff1a\u97f3\u6548",u.pzaLocalData.data.musicValue<=0?this.musicTxt.string="\u97f3\u4e50\uff08\u5173\uff09":this.musicTxt.string="\u97f3\u91cf\uff1a\u97f3\u4e50"},t.prototype.soundTouch=function(a){var t=a&&a.getLocation();if(null!=t){var e=this.soundBtn.convertToNodeSpaceAR(t),o=cc.misc.clampf(e.x+180,0,360);this.setSound(o/360)}},t.prototype.musicTouch=function(a){var t=a&&a.getLocation();if(null!=t){var e=this.musicBtn.convertToNodeSpaceAR(t),o=cc.misc.clampf(e.x+180,0,360);this.setMusic(o/360)}},t.prototype.setSound=function(a){this.soundTag.x=360*a-180,u.pzaLocalData.data.soundValue=a,u.pzaLocalData.addDirty("soundValue"),cc.audioEngine.setEffectsVolume(a),this.soundTxt.string=a<=0?"\u97f3\u6548\uff08\u5173\uff09":"\u97f3\u91cf\uff1a\u97f3\u6548"},t.prototype.setMusic=function(a){this.musicTag.x=360*a-180,u.pzaLocalData.data.musicValue=a,u.pzaLocalData.addDirty("musicValue"),h.pzaSoundManager.setMusicVolume(a),this.musicTxt.string=a<=0?"\u97f3\u4e50\uff08\u5173\uff09":"\u97f3\u91cf\uff1a\u97f3\u4e50"},t.prototype.clickBackGame=function(){h.pzaSoundManager.playSFX(),this.backGameCall&&this.backGameCall(),this.close()},t.prototype.clickRestart=function(){var a=this;console.log("pzaGameState.gameMode ",p.pzaGameState.gameMode);var t=u.pzaLocalData.endLessPowerCost;(s.pzaGameManager.getCurrentGame().isMainMode()||p.pzaGameState.judgeIsMini(p.pzaGameState.gameMode)||p.pzaGameState.judgeIsVase(p.pzaGameState.gameMode)||p.pzaGameState.judgeIsZombie(p.pzaGameState.gameMode))&&(t=u.pzaLocalData.normalPowerCost),u.pzaLocalData.isShowPowerGift||(t=0),f.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.WARNING_VIEW,function(e){var o=e&&e.getComponent(D.pzaWarningView);o&&o.show("\u4f60\u60f3\u8981\u518d\u6b21\u4ece\u5934\u8fdb\u884c\u8fd9\u4e00\u5173\u5361\u5417\uff1f","\u91cd\u65b0\u5f00\u59cb","\u53d6\u6d88",function(){if(u.pzaLocalData.data.power<t)return m.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void f.pzaUIManager.showPowerView();u.pzaLocalData.setPower(-t),u.pzaLocalData.data.autoPickLeft=p.pzaGameState.autoPickLeft,u.pzaLocalData.addDirty("autoPickLeft"),s.pzaGameManager.removeBattleUI(),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_OVER,null),z.pzaUtil.changeGameSpeed(1),s.pzaGameManager.getCurrentGame().gameRestart(),a.close()},null,"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1,!1,0,!0,t,!1,1)})},t.prototype.clickCopy=function(){b.pzaChannel.instance().copyToClip(b.pzaChannel.instance().getChannel().channelUserId,function(a){v.default.log("content: ",a)})},t.prototype.clickComfirmRedeemCode=function(){var a=this.redeemEdixBox.string;null==a||a.length<=0?m.pzaTipManager.showHomeTip("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5151\u6362\u7801~",null,3):u.pzaLocalData.data.usedRedeemCode.includes(a.toUpperCase())?m.pzaTipManager.showHomeTip("\u5151\u6362\u7801\u5df2\u4f7f\u7528~",null,3):(P.pzaCommonMask.showMask(),b.pzaChannel.redeem("\u690d\u7269\u5927\u6218\u50f5\u5c38\u539f\u7248",b.pzaChannel.instance().getChannel().channelUserId,a,function(t){if(P.pzaCommonMask.hideMask(),null!=t){var e=[];t.forEach(function(a){var t=new c.pzaRewardPropData(parseInt(a.key),parseInt(a.val));parseInt(a.val)==r.pzaPlantEnum.SUPER_CHOMPER&&(t.limitGet=1),e.push(t)}),d.pzaRewardManager.recieveRewards(e),u.pzaLocalData.data.usedRedeemCode.push(a.toUpperCase()),u.pzaLocalData.addDirty("usedRedeemCode")}else m.pzaTipManager.showHomeTip("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5151\u6362\u7801~",null,3)}))},t.prototype.clickShowPrivacy=function(){b.pzaChannel.instance().getChannel().showPrivacy(this.node,null,!0)},t.prototype.clickSetUidBtn=function(){var a=this;this.ableClickSetBtn&&(this.ableClickSetBtn=!1,setTimeout(function(){a.ableClickSetBtn=!0},this.setClickBtnCD),u.pzaLocalData.data.noADPlayerUid=this.uidEdit.string,u.pzaLocalData.addDirty("noADPlayerUid"),this.uidNode.getChildByName("content").getChildByName("uidStr").getComponent(cc.Label).string=u.pzaLocalData.data.noADPlayerUid,console.log("pzaLocalData.data.noADPlayerUid ",u.pzaLocalData.data.noADPlayerUid),v.default.jpost("https://ga.gamejym.com/fcm/gameApi/noAdLogin",{uid:u.pzaLocalData.data.noADPlayerUid},function(a,t){if(console.log("login resp: ",t),!a&&t){var e=b.pzaChannel.instance().channelMap.get("noAD");t.data&&t.data.isWhite?(e.isWhite=t.data.isWhite,m.pzaTipManager.showHomeTip("\u8bbe\u7f6e\u6210\u529f\uff0c\u5df2\u8fdb\u5165\u767d\u540d\u5355\uff01",null,2)):(e.isWhite=!1,m.pzaTipManager.showHomeTip("\u8bbe\u7f6e\u6210\u529f\uff0c\u672a\u8fdb\u5165\u767d\u540d\u5355\uff01",null,2))}else v.default.err(a)}))},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([_({displayName:"\u97f3\u6548\u6587\u672c",type:cc.Label})],t.prototype,"soundTxt",void 0),i([_({displayName:"\u97f3\u6548\u6807\u8bb0",type:cc.Node})],t.prototype,"soundTag",void 0),i([_({displayName:"\u97f3\u6548\u6309\u94ae",type:cc.Node})],t.prototype,"soundBtn",void 0),i([_({displayName:"\u97f3\u4e50\u6587\u672c",type:cc.Label})],t.prototype,"musicTxt",void 0),i([_({displayName:"\u97f3\u4e50\u6807\u8bb0",type:cc.Node})],t.prototype,"musicTag",void 0),i([_({displayName:"\u97f3\u4e50\u6309\u94ae",type:cc.Node})],t.prototype,"musicBtn",void 0),i([_({displayName:"\u8fd4\u56de\u6309\u94ae\u6587\u672c",type:cc.Label})],t.prototype,"backTxt",void 0),i([_({displayName:"\u8fd4\u56de\u6309\u94ae",type:cc.Node})],t.prototype,"backBtn",void 0),i([_({displayName:"\u91cd\u65b0\u5f00\u59cb\u6309\u94ae",type:cc.Node})],t.prototype,"reBtn",void 0),i([_({displayName:"\u5151\u6362\u7801\u8f93\u5165\u6846",type:cc.EditBox})],t.prototype,"redeemEdixBox",void 0),i([_({displayName:"\u767d\u540d\u5355\u8282\u70b9",type:cc.Node})],t.prototype,"uidNode",void 0),i([_({displayName:"\u9690\u79c1\u653f\u7b56\u6309\u94ae",type:cc.Node})],t.prototype,"privacyNode",void 0),i([_({displayName:"uid\u7f16\u8f91\u6846",type:cc.EditBox})],t.prototype,"uidEdit",void 0),i([_({displayName:"\u8bbe\u7f6euid",type:cc.Node})],t.prototype,"setUID",void 0),i([C],t)}(cc.Component);e.pzaOptionView=E,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaRewardManager":"pzaRewardManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzakc":"pzakc","../pzaCommonMask":"pzaCommonMask","../pzaWarningView":"pzaWarningView"}],pzaParseCond:[function(a,t,e){"use strict";cc._RF.push(t,"9bcafcyHHxJ6IInsPwGIrzq","pzaParseCond"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaParseCond=void 0;var o=a("./pzakc"),n=function(){function a(){}return a.condMap={">":function(a,t){return a>t},"<":function(a,t){return a<t},">=":function(a,t){return a>=t},"<=":function(a,t){return a<=t},"==":function(a,t){return a==t},"=":function(a,t){return a==t},"!=":function(a,t){return a!=t},"!":function(a,t){return!t}},a.orAndMap={"&":function(a,t){return a&&t},"&&":function(a,t){return a&&t},"|":function(a,t){return a||t},"||":function(a,t){return a||t}},a.parseVar=function(a,t){if("number"==typeof a||!isNaN(Number(a)))return Number(a);var e=t[a];if(void 0===e||"number"!=typeof e)throw"parseVar\u5931\u8d25,\u672a\u77e5\u53d8\u91cf:"+a;return Number(e)},a.scanBracketEnd=function(a){for(var t=0,e=-1,o=a.length,n=0;n<o;n++){var i=a[n];if("("===i)t++;else if(")"===i&&0==--t){e=n;break}}if(e<0)throw"[ERR]scanBracketEnd\u5931\u8d25:"+a;return{outStr:a.substring(1,e),endPos:e}},a.scanOrAndNext=function(t){for(var e=-1,o=t.length,n=0;n<o;n++){var i=t[n];if("|"===i&&"|"===t[n+1]||"&"===i&&"&"===t[n+1]){e=n;break}"("===i&&(n=a.scanBracketEnd(t.substring(n)).endPos+1)}return e<0?{outStr:t,endPos:o-1}:{outStr:t.substring(0,e),endPos:e}},a.parseCond=function(t,e){for(var n="",i=null,r="",p=-1,l=null,s=0,c=t.length;s<c;s++){var u=t[s],d=a.condMap[u];if(d)s+1!==c&&a.condMap[u+t[s+1]]&&(u+=t[s+1],d=a.condMap[u],s++),p=1,i=d;else{var h=a.orAndMap[u];if(h){if(s+1!==c&&a.orAndMap[u+t[s+1]]&&(u+=t[s+1],h=a.orAndMap[u],s++),s+1>=c||p<0&&null===l)throw"[ERR]parseCond\u5931\u8d25,\u65e0\u6548orAnd\u4f4d\u7f6e:"+s+"|"+t;var m=a.scanOrAndNext(t.substring(s+1));p>0&&(l=i(a.parseVar(n,e),a.parseVar(r,e)),n="",r="",i=null),l=h(l,a.parseCond(m.outStr,e)),s=s+m.endPos+1,p=-1}else if("("!==u)p<0?n+=u:p>0&&(r+=u);else{var f=a.scanBracketEnd(t.substring(s));if(f.endPos+2===c)return p>0&&i?i(n,a.parseCond(f.outStr,e)):a.parseCond(f.outStr,e);l=a.parseCond(f.outStr,e),p>0&&i&&(l=i(n,a.parseCond(f.outStr,e))),p=-1,s=s+f.endPos+1}}}return p<0||!i?null!==l?l:(o.default.err("[ERR]parseCond\u5931\u8d25:"+t,e),null):i(a.parseVar(n,e),a.parseVar(r,e))},a.condParse=function(t,e){return!t||(t=t.replace(/\s/g,""),a.parseCond(t,e))},a.test=function(){o.default.log("[realRe]=====",!1),o.default.log("[parseCond]=====",a.condParse("a1 > b1 || !((b1 < a1 || c1 > f1) || b1 > a1 )",{a1:12,b1:23,c1:2,d1:3,e1:5,f1:15,g1:20}))},a}();e.pzaParseCond=n,cc._RF.pop()},{"./pzakc":"pzakc"}],pzaPartSelectView:[function(a,t,e){"use strict";cc._RF.push(t,"bba8c5B9RRFXqNBbFGtKCA0","pzaPartSelectView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGameConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSoundManager"),c=a("../Common/pzaStatisticsMgr"),u=a("../Common/pzaUIManager"),d=a("../Common/pzaUtil"),h=a("../Common/pzaWorldEventManager"),m=a("../Load/pzaPreLoadManager"),f=a("../utils/pzaChannel"),z=a("../utils/pzakc"),y=a("./pzaGuanKaItemView"),g=a("./pzaHandbookView"),b=a("./pzaPowerView"),v=a("./pzaTasksView"),P=a("./pzaWarningView"),D=cc._decorator,S=D.ccclass,C=D.property,_=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.chapterBtnNode=[],t.chapterSpriteNode=[],t.chapterFrames=[],t.taskBtn=null,t.btBtn=null,t.ywBtn=null,t.ycBtn=null,t.wyBtn=null,t.wdBtn=null,t.starCount=null,t.partItem=[],t.scrollView=null,t.scrollViewContent=null,t.bookBtn=null,t.lv_Bg1=null,t.lv_Bg2=null,t.part_Bg1=null,t.part_Bg2=null,t.part1_select=null,t.part2_select=null,t.partSprite=null,t.lv_ImgFh=null,t.star_bg=null,t.record_btn=null,t.weekTwoTipNode=null,t.coinCount=null,t.powerNode=null,t.scrollBeiginOffset=null,t.isTouchUp=!1,t.curChapter=1,t.curPart=1,t.isChangeOver=!0,t}return n(t,a),t.prototype.onEnable=function(){this.part_Bg2.active=!0,this.coinCount.string=d.pzaUtil.getCurrencyStr(l.pzaLocalData.data.coin),this.partInit(),this.bookBtn.active=l.pzaLocalData.data.unlockBook,this.starCount.string=l.pzaLocalData.getAllStar()+"/"+p.pzaGameConfig.getAllPartStar(),this.curChapter=l.pzaLocalData.data.curChapter,this.curPart=l.pzaLocalData.data.curPart,this.chapterBtnNode[0].on(cc.Node.EventType.TOUCH_START,this.touchChapter1,this),this.chapterBtnNode[0].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter1,this),this.chapterBtnNode[0].on(cc.Node.EventType.TOUCH_END,this.clickChapter1,this),this.chapterBtnNode[1].on(cc.Node.EventType.TOUCH_START,this.touchChapter2,this),this.chapterBtnNode[1].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter2,this),this.chapterBtnNode[1].on(cc.Node.EventType.TOUCH_END,this.clickChapter2,this),this.chapterBtnNode[2].on(cc.Node.EventType.TOUCH_START,this.touchChapter3,this),this.chapterBtnNode[2].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter3,this),this.chapterBtnNode[2].on(cc.Node.EventType.TOUCH_END,this.clickChapter3,this),this.chapterBtnNode[3].on(cc.Node.EventType.TOUCH_START,this.touchChapter4,this),this.chapterBtnNode[3].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter4,this),this.chapterBtnNode[3].on(cc.Node.EventType.TOUCH_END,this.clickChapter4,this),this.chapterBtnNode[4].on(cc.Node.EventType.TOUCH_START,this.touchChapter5,this),this.chapterBtnNode[4].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter5,this),this.chapterBtnNode[4].on(cc.Node.EventType.TOUCH_END,this.clickChapter5,this),this.part_Bg1.on(cc.Node.EventType.TOUCH_START,this.touchWeek1,this),this.part_Bg1.on(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek1,this),this.part_Bg1.on(cc.Node.EventType.TOUCH_END,this.clickWeek1,this),this.part_Bg2.on(cc.Node.EventType.TOUCH_START,this.touchWeek2,this),this.part_Bg2.on(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek2,this),this.part_Bg2.on(cc.Node.EventType.TOUCH_END,this.clickWeek2,this),this.weekTwoTipNode.active=!1,l.pzaLocalData.data.passLastPart&&l.pzaLocalData.data.weekTwoOpenTip2&&(this.weekTwoTipNode.active=!0,this.weekTwoTipNode.angle=0,cc.Tween.stopAllByTarget(this.weekTwoTipNode),z.default.ani_JitterNode(this.weekTwoTipNode,.4,15,3,!0)),l.pzaLocalData.data.passLastPart&&l.pzaLocalData.data.weekTwoOpenTip2?(this.chapterCommon(null,5,10),this.initChapterNode(5)):(this.chapterCommon(null,this.curChapter,this.curPart),this.initChapterNode(this.curChapter>5?this.curChapter-5:this.curChapter))},t.prototype.onDisable=function(){this.chapterBtnNode[0].off(cc.Node.EventType.TOUCH_START,this.touchChapter1,this),this.chapterBtnNode[0].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter1,this),this.chapterBtnNode[0].off(cc.Node.EventType.TOUCH_END,this.clickChapter1,this),this.chapterBtnNode[1].off(cc.Node.EventType.TOUCH_START,this.touchChapter2,this),this.chapterBtnNode[1].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter2,this),this.chapterBtnNode[1].off(cc.Node.EventType.TOUCH_END,this.clickChapter2,this),this.chapterBtnNode[2].off(cc.Node.EventType.TOUCH_START,this.touchChapter3,this),this.chapterBtnNode[2].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter3,this),this.chapterBtnNode[2].off(cc.Node.EventType.TOUCH_END,this.clickChapter3,this),this.chapterBtnNode[3].off(cc.Node.EventType.TOUCH_START,this.touchChapter4,this),this.chapterBtnNode[3].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter4,this),this.chapterBtnNode[3].off(cc.Node.EventType.TOUCH_END,this.clickChapter4,this),this.chapterBtnNode[4].off(cc.Node.EventType.TOUCH_START,this.touchChapter5,this),this.chapterBtnNode[4].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter5,this),this.chapterBtnNode[4].off(cc.Node.EventType.TOUCH_END,this.clickChapter5,this),this.part_Bg1.off(cc.Node.EventType.TOUCH_START,this.touchWeek1,this),this.part_Bg1.off(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek1,this),this.part_Bg1.off(cc.Node.EventType.TOUCH_END,this.clickWeek1,this),this.part_Bg2.off(cc.Node.EventType.TOUCH_START,this.touchWeek2,this),this.part_Bg2.off(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek2,this),this.part_Bg2.off(cc.Node.EventType.TOUCH_END,this.clickWeek2,this),f.pzaChannel.instance().closeBanner()},t.prototype.partInit=function(){l.pzaLocalData.data.weekTwoOpenTip2?(this.lv_Bg1.x=0,this.lv_Bg2.x=1680,this.lv_Bg2.active=!1,this.part_Bg2.active=!0,this.part_Bg1.active=!1):(l.pzaLocalData.isWeekTwo=!0,this.lv_Bg1.x=-1680,this.lv_Bg2.x=0,this.lv_Bg1.active=!1,this.part_Bg2.active=!1,this.part_Bg1.active=!0)},t.prototype.scrollEvent=function(a,t){if(9!=t){var e=this.scrollView.getContentPosition();for(i=0;i<this.partItem.length;i++)(l=this.partItem[i])&&l.scrollMove(e.x)}else{for(var o=this.scrollView.getContentPosition(),n=-1,i=0;i<this.partItem.length;i++){var r=821.65-189.25*i,p=Math.abs(o.x-r);(-1==n||p<n)&&(n=p,this.curPart=i+1)}for(i=0;i<this.partItem.length;i++){var l;(l=this.partItem[i])&&l.updateStartGameNode(this.curPart)}this.scrollView.setContentPosition(cc.v2(821.65-189.25*(this.curPart-1),200))}},t.prototype.touchMove=function(){var a=this.scrollView.getScrollOffset();if(null!=a&&null!=this.scrollBeiginOffset){var t=a.x-this.scrollBeiginOffset.x;if(this.scrollBeiginOffset=null,!(Math.abs(t)<10)){var e=this.curPart;this.curPart=t>0?this.curPart-1:this.curPart+1,this.curPart<1&&(this.curPart=1),this.curPart>=10&&(this.curPart=10),this.scrollView.setContentPosition(cc.v2(821.65-189.25*(this.curPart-1),200));var o=this.partItem[e-1];o&&o.updateUI(this.curPart);var n=this.partItem[this.curPart-1];n&&n.updateUI(this.curPart)}}},t.prototype.selectChapter=function(a){var t=this;this.curChapter!=a?(s.pzaSoundManager.playAudio("gravebutton"),this.curChapter=a,this.curPart=1,this.initChapterNode(a>5?a-5:a),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,660)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){for(var a=0;a<t.partItem.length;a++){var e=t.partItem[a];e&&e.bindData(t.curChapter,a+1,t.curPart)}t.scrollView.setContentPosition(cc.v2(821.65-189.25*(t.curPart-1),200))}),cc.delayTime(.1),cc.callFunc(function(){s.pzaSoundManager.playAudio("chapterdown")}),cc.moveTo(.2,cc.v2(0,145)).easing(cc.easeCubicActionOut())))):this.initChapterNode(a>5?a-5:a)},t.prototype.clickHandBookBtn=function(){s.pzaSoundManager.playSFX(),u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(g.pzaHandbookView);t&&t.jdInit()})},t.prototype.initChapterNode=function(a){this.chapterSpriteNode[0].node.active=1==a,this.chapterSpriteNode[1].node.active=2==a,this.chapterSpriteNode[2].node.active=3==a,this.chapterSpriteNode[3].node.active=4==a,this.chapterSpriteNode[4].node.active=5==a,this.chapterSpriteNode[0].spriteFrame=this.chapterFrames[0],this.chapterSpriteNode[1].spriteFrame=this.chapterFrames[2],this.chapterSpriteNode[2].spriteFrame=this.chapterFrames[4],this.chapterSpriteNode[3].spriteFrame=this.chapterFrames[6],this.chapterSpriteNode[4].spriteFrame=this.chapterFrames[8]},t.prototype.touchChapter1=function(){this.isChangeOver&&(this.chapterSpriteNode[0].node.active=!0)},t.prototype.clickChapter1=function(){if(this.isChangeOver){var a=l.pzaLocalData.isWeekTwo?6:1;this.selectChapter(a)}},t.prototype.touchChapter2=function(){this.isChangeOver&&(this.chapterSpriteNode[1].node.active=!0)},t.prototype.clickChapter2=function(){if(this.isChangeOver){var a=l.pzaLocalData.isWeekTwo?7:2;this.selectChapter(a)}},t.prototype.touchChapter3=function(){this.isChangeOver&&(this.chapterSpriteNode[2].node.active=!0)},t.prototype.clickChapter3=function(){if(this.isChangeOver){var a=l.pzaLocalData.isWeekTwo?8:3;if(l.pzaLocalData.data.curChapter<a-1)return this.chapterSpriteNode[2].node.active=!1,void u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(P.pzaWarningView);t&&t.show("\u89e3\u9501\u9ed1\u591c\u540e\u5373\u53ef\u67e5\u770b\u6c34\u6c60\u5173\u5361","\u786e\u5b9a",null,null,null,"\u6c34\u6c60")});this.selectChapter(a)}},t.prototype.touchChapter4=function(){this.isChangeOver&&(this.chapterSpriteNode[3].node.active=!0)},t.prototype.clickChapter4=function(){if(this.isChangeOver){var a=l.pzaLocalData.isWeekTwo?9:4;if(l.pzaLocalData.data.curChapter<a-1)return this.chapterSpriteNode[3].node.active=!1,void u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(P.pzaWarningView);t&&t.show("\u89e3\u9501\u6c34\u6c60\u540e\u5373\u53ef\u67e5\u770b\u6d53\u96fe\u5173\u5361","\u786e\u5b9a",null,null,null,"\u6d53\u96fe")});this.selectChapter(a)}},t.prototype.touchChapter5=function(){this.isChangeOver&&(this.chapterSpriteNode[4].node.active=!0)},t.prototype.clickChapter5=function(){if(this.isChangeOver){var a=l.pzaLocalData.isWeekTwo?10:5;if(l.pzaLocalData.data.curChapter<a-1)return this.chapterSpriteNode[4].node.active=!1,void u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(P.pzaWarningView);t&&t.show("\u89e3\u9501\u6d53\u96fe\u540e\u5373\u53ef\u67e5\u770b\u5c4b\u9876\u5173\u5361","\u786e\u5b9a",null,null,null,"\u5c4b\u9876")});this.selectChapter(a)}},t.prototype.touchWeek1=function(){this.part1_select.active=!0},t.prototype.clickWeek1=function(){var a=this;this.isChangeOver=!1,l.pzaLocalData.isWeekTwo=!1,this.imgDiss(),this.bgMove(0,1680,function(){a.lv_Bg1.active=!0,a.lv_Bg2.active=!1,a.imgShow(),a.initChapterNode(5),a.chapterCommon(function(){a.part_Bg2.active=!0,a.isChangeOver=!0},5,10,!0)})},t.prototype.touchWeek2=function(){l.pzaLocalData.data.passLastPart?this.part2_select.active=!0:u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(P.pzaWarningView);t&&t.show("\u5192\u9669\u6a21\u5f0f\u901a\u51735-10\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")})},t.prototype.clickWeek2=function(){var a=this;l.pzaLocalData.data.passLastPart&&(this.isChangeOver=!1,this.weekTwoTipNode.active&&(this.weekTwoTipNode.active=!1,l.pzaLocalData.data.weekTwoOpenTip2=!1,l.pzaLocalData.addDirty("weekTwoOpenTip2")),l.pzaLocalData.isWeekTwo=!0,this.imgDiss(),this.bgMove(-1680,0,function(){a.lv_Bg1.active=!1,a.lv_Bg2.active=!0,a.curChapter=l.pzaLocalData.data.curChapter,a.curPart=l.pzaLocalData.data.curPart,a.imgShow(),a.initChapterNode(a.curChapter%5),a.chapterCommon(function(){a.part_Bg1.active=!0,a.isChangeOver=!0},a.curChapter,a.curPart,!0)}),c.pzaStatisticsMgr.sendEvent("System",{name:"system",value:21}))},t.prototype.chapterCommon=function(a,t,e,o){void 0===a&&(a=null),void 0===o&&(o=!1),this.scrollView.setContentPosition(cc.v2(821.65-189.25*(e-1),200)),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.sequence(cc.delayTime(o?0:.5),cc.moveTo(o?.1:.2,cc.v2(0,145)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){s.pzaSoundManager.playAudio("chapterdown"),a&&a()}))),l.pzaLocalData.isWeekTwo||(t=t>5?t-5:t),this.refreshItem(t,e)},t.prototype.refreshItem=function(a,t){for(var e=this,o=0;o<this.partItem.length;o++){var n=this.partItem[o];n&&(n.bindData(a,o+1,t),n.bindStartGameCall(function(){f.pzaChannel.instance().closeBanner(),e.close()}))}},t.prototype.bgMove=function(a,t,e){var o=this;this.lv_Bg1.stopAllActions(),this.lv_Bg1.runAction(cc.sequence(cc.moveTo(.8,cc.v2(a,this.lv_Bg1.y)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){o.lv_Bg1.x=a}))),this.lv_Bg2.stopAllActions(),this.lv_Bg2.runAction(cc.sequence(cc.moveTo(.8,cc.v2(t,this.lv_Bg2.y)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){o.lv_Bg2.x=t,e()})))},t.prototype.imgDiss=function(){this.part_Bg1.active=!1,this.part_Bg2.active=!1,this.part1_select.active=!1,this.part2_select.active=!1,this.partSprite.active=!1,this.lv_ImgFh.active=!1,this.taskBtn.active=!1,this.star_bg.active=!1,this.powerNode.active=!1,this.record_btn.active=!1,this.scrollView.node.y=660,this.lv_Bg1.active=!0,this.lv_Bg2.active=!0},t.prototype.imgShow=function(){this.partSprite.active=!0,this.lv_ImgFh.active=!0,this.taskBtn.active=!0,this.star_bg.active=!0,this.powerNode.active=!0,this.record_btn.active=!0},t.prototype.clickback=function(){var a=this;f.pzaChannel.instance().closeBanner(),s.pzaSoundManager.playSFX(),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.2,cc.v2(0,660))),u.pzaUIManager.aniHidePopUI(function(){a.close(),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.UPDATE_RECORD_STATE,null),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.BACK_HOMEVIEW,null)})},t.prototype.clickTasks=function(){l.pzaLocalData.data.passLastPart?(s.pzaSoundManager.playSFX(),v.default.show(!1)):u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(P.pzaWarningView);t&&t.show("\u5192\u9669\u6a21\u5f0f\u901a\u51735-10\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")})},t.prototype.clickPower=function(){u.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.POWER_VIEW,function(a){var t=a&&a.getComponent(b.pzaPowerView);t&&t.bindData("\u8865\u5145\u4f53\u529b",function(){var a;a=l.pzaLocalData.data.power+l.pzaLocalData.addPowerValue,l.pzaLocalData.data.power=a,l.pzaLocalData.addDirty("power"),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.UPDATE_POWER,null)},null)})},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([C({displayName:"\u7ae0\u8282\u6309\u94ae\u8282\u70b9",type:[cc.Node]})],t.prototype,"chapterBtnNode",void 0),i([C({displayName:"\u7ae0\u8282\u6309\u94ae\u56fe\u8282\u70b9",type:[cc.Sprite]})],t.prototype,"chapterSpriteNode",void 0),i([C({displayName:"\u7ae0\u8282\u6309\u94ae\u56fe",type:[cc.SpriteFrame]})],t.prototype,"chapterFrames",void 0),i([C({displayName:"\u51b2\u5173\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"taskBtn",void 0),i([C({displayName:"\u767d\u5929\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"btBtn",void 0),i([C({displayName:"\u591c\u665a\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"ywBtn",void 0),i([C({displayName:"\u6cf3\u6c60\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"ycBtn",void 0),i([C({displayName:"\u96fe\u591c\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"wyBtn",void 0),i([C({displayName:"\u5c4b\u9876\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"wdBtn",void 0),i([C({displayName:"\u661f\u661f\u6570\u91cf",type:cc.Label})],t.prototype,"starCount",void 0),i([C({displayName:"\u5173\u5361Item",type:[y.default]})],t.prototype,"partItem",void 0),i([C({displayName:"\u6eda\u52a8\u5bb9\u5668",type:cc.ScrollView})],t.prototype,"scrollView",void 0),i([C({displayName:"\u6eda\u52a8content",type:cc.Node})],t.prototype,"scrollViewContent",void 0),i([C({displayName:"\u56fe\u9274\u6309\u94ae",type:cc.Node})],t.prototype,"bookBtn",void 0),i([C(cc.Node)],t.prototype,"lv_Bg1",void 0),i([C(cc.Node)],t.prototype,"lv_Bg2",void 0),i([C(cc.Node)],t.prototype,"part_Bg1",void 0),i([C(cc.Node)],t.prototype,"part_Bg2",void 0),i([C(cc.Node)],t.prototype,"part1_select",void 0),i([C(cc.Node)],t.prototype,"part2_select",void 0),i([C(cc.Node)],t.prototype,"partSprite",void 0),i([C(cc.Node)],t.prototype,"lv_ImgFh",void 0),i([C(cc.Node)],t.prototype,"star_bg",void 0),i([C(cc.Node)],t.prototype,"record_btn",void 0),i([C(cc.Node)],t.prototype,"weekTwoTipNode",void 0),i([C({displayName:"\u91d1\u5e01",type:cc.Label})],t.prototype,"coinCount",void 0),i([C({displayName:"\u4f53\u529b\u8282\u70b9",type:cc.Node})],t.prototype,"powerNode",void 0),i([S],t)}(cc.Component);e.default=_,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGuanKaItemView":"pzaGuanKaItemView","./pzaHandbookView":"pzaHandbookView","./pzaPowerView":"pzaPowerView","./pzaTasksView":"pzaTasksView","./pzaWarningView":"pzaWarningView"}],pzaPeaBomb:[function(a,t,e){"use strict";cc._RF.push(t,"8504bclutNFxqcYreiDlMwX","pzaPeaBomb");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaBomb=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../utils/pzakc"),c=a("../Bullet/pzaPeaBullet"),u=a("../pzaGameState"),d=a("./pzaCherryBomb"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),u.pzaGameState.usePeaPlant=!0},t.prototype.playNormalAni=function(){var a=this;this.animation.playAnimation("attack",!1,function(){l.pzaSoundManager.playAudio("cherrybomb",1),a.attack()})},t.prototype.getBulletAtk=function(){return 1800},t.prototype.attack=function(t){a.prototype.attack.call(this,t);for(var e=cc.v2(1,0),o=2*Math.PI/36,n=p.pzaNodeManager.getBulletNode(),i=this.bulletPrefab,l=this.baseData.atk,u=this.node.getPosition(),d=0;d<10;d++)setTimeout(function(){for(var a=0;a<36;a++){var t=r.pzaGameCommonPool.requestInstant2(i);t.setParent(n),t.setPosition(u);var p=t.getComponent(c.pzaPeaBullet);p.init(-1,l,1,null,e.rotate(o*a)),p.setSpeed(s.default.randomInt(350,400))}},30*d)},i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaCherryBomb);e.pzaPeaBomb=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../utils/pzakc":"pzakc","../Bullet/pzaPeaBullet":"pzaPeaBullet","../pzaGameState":"pzaGameState","./pzaCherryBomb":"pzaCherryBomb"}],pzaPeaBullet:[function(a,t,e){"use strict";cc._RF.push(t,"ff576r5pupJj4CweHFNsimX","pzaPeaBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaBullet=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGroupEnum"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaSoundManager"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaZombieEnum"),d=a("../Effect/pzaBaseEffect"),h=a("../Plant/pzaPlantBody"),m=a("../Plant/pzaSquashTorch"),f=a("../Zombie/pzaZombieBody"),z=a("../pzaEffectManager"),y=a("../pzaGameState"),g=a("./pzaBaseBullet"),b=cc._decorator,v=b.ccclass,P=b.property,D=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ballBulletNode=null,t.frostBulletNode=null,t.frostEffect=null,t.normalBulletNode=null,t.fireBulletNode=null,t.fireBall=null,t.firePeaNode=null,t.firePeaBall=null,t.snowHitPrefab=null,t.iceFireBall=null,t.iceFirePeaNode=null,t.iceFirePeaBall=null,t.bulletLevel=0,t.colliderWoods=new Set,t.colliderIceWoods=new Set,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.iceFireBall&&(this.iceFireBall.active=!1),this.iceFirePeaNode&&(this.iceFirePeaNode.active=!1),this.firePeaNode&&(this.firePeaNode.active=!1),this.fireBulletNode&&(this.fireBulletNode.active=!1)},t.prototype.init=function(t,e,o,n,i){void 0===o&&(o=0),void 0===n&&(n=null),void 0===i&&(i=cc.v2(1,0)),a.prototype.init.call(this,t,e,o,n,i),this.bulletLevel=o,this.colliderWoods.clear(),this.colliderIceWoods.clear(),this.refreshBulletState(),i.x<0?this.node.scaleX=-1:this.node.scaleX=1},t.prototype.updateMove=function(t){a.prototype.updateMove.call(this,t)},t.prototype.setSpeed=function(a){this.speed=a},t.prototype.onCollision=function(a){if(null!=a){if(a.node.group==p.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(f.pzaZombieBody);this.colliderZombie(t&&t.baseData)}a.node.group!=p.pzaGroupEnum.TORCHWOOD||this.colliderWoods.has(a)||this.colliderTorchWood(a)}},t.prototype.colliderIceWood=function(a){var t=a&&a.node.getComponent(h.pzaPlantBody);null==t||null==t.baseData||t.baseData.isDead||this.bulletLevel>=3||(this.bulletLevel=3,this.colliderIceWoods.add(a),this.refreshBulletState(),this.bulletLevel>=3&&s.pzaSoundManager.playAudio("Torchwood",.5))},t.prototype.colliderTorchWood=function(a){var t=a&&a.node.getComponent(h.pzaPlantBody);if(!(null==t||null==t.baseData||t.baseData.isDead||this.bulletLevel>=2)){if(t.isSquashTorch){var e=t.node.parent&&t.node.parent.getComponent(m.pzaSquashTorch);e&&window.pzaplantManager.fireSquashMap.get(e.uuid)?t.fireBulletCnt=0:t.fireBulletCnt++,t.fireBulletCnt>=t.fireBulletAllCnt&&(t.fireBulletCnt=0,e.createSquashCherry())}0===this.bulletLevel?this.bulletLevel=1:1===this.bulletLevel&&(this.bulletLevel=2),this.colliderWoods.add(a),this.refreshBulletState(),this.bulletLevel>=2&&s.pzaSoundManager.playAudio("Torchwood",.5)}},t.prototype.update=function(){!this.fireBulletNode||this.fireBulletNode.active},t.prototype.refreshBulletState=function(){this.frostBulletNode.active=0==this.bulletLevel,this.frostEffect.active=0==this.bulletLevel,1==this.bulletLevel?(this.normalBulletNode&&(this.normalBulletNode.active=!this.isPeaBallType),this.ballBulletNode&&(this.ballBulletNode.active=this.isPeaBallType)):(this.normalBulletNode&&(this.normalBulletNode.active=!1),this.ballBulletNode&&(this.ballBulletNode.active=!1)),2==this.bulletLevel?0==this.isPeaBallType?this.fireBulletNode&&(this.fireBulletNode.active=!0):this.firePeaNode&&(this.firePeaNode.active=!0):(this.fireBulletNode&&(this.fireBulletNode.active=!1),this.firePeaNode&&(this.firePeaNode.active=!1)),3==this.bulletLevel?0==this.isPeaBallType?this.iceFireBall&&(this.iceFireBall.active=3==this.bulletLevel):this.iceFirePeaNode&&(this.iceFirePeaNode.active=3==this.bulletLevel):(this.iceFireBall&&(this.iceFireBall.active=!1),this.iceFirePeaNode&&(this.iceFirePeaNode.active=!1))},t.prototype.colliderZombie=function(a){a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==u.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&(a.zombieData&&a.zombieData.hypnosis||!this.ignoreDive&&a.buffData.hasBuff(c.pzaBuffType.DIVE)||a.buffData.hasBuff(c.pzaBuffType.FLY)||a.buffData.hasBuff(c.pzaBuffType.INVINCIBLE)||(0==this.bulletLevel?this.frostColliderZombie(a):1==this.bulletLevel?this.normalColliderZombie(a):3==this.bulletLevel?this.iceFireColliderZombie(a):this.fireColliderZombie(a)))},t.prototype.normalColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(t.hurt(this.atk),2===this.node.scale&&t.pushBack(.2),this.close(),this.playHitEffect(a))},t.prototype.fireColliderZombie=function(a){var t=this,e=window.pzazombieManager.getZombie(a);if(2===this.node.scale?(e.pushBack(.2),e&&e.hurt(2*this.atk)):e&&e.hurt(40),a.buffData.removeBuff(c.pzaBuffType.FROST),a.buffData.removeBuff(c.pzaBuffType.FROZEN),this.close(),this.playHitEffect(a),s.pzaSoundManager.playAudio("firepeaHit",.5),!e.baseData.buffData.hasBuff(c.pzaBuffType.IMM_SPATTER)){var o=window.pzazombieManager.findFixRangeZombies(a.logicPos,.5*y.pzaGameState.map.getBlockWidth());o&&o.forEach(function(e){null!=e&&e.baseData!=a&&(a.buffData.hasBuff(c.pzaBuffType.FLY)||!t.ignoreDive&&a.buffData.hasBuff(c.pzaBuffType.DIVE)||a.buffData.hasBuff(c.pzaBuffType.INVINCIBLE)||e.hurt(13))})}},t.prototype.iceFireColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(2===this.node.scale?(t.pushBack(.2),t&&t.hurt(2*this.atk)):t&&t.hurt(40),this.close(),this.playHitEffect(a),t.baseData.buffData.hasBuff(c.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(c.pzaBuffType.HARD_BODY)||t.baseData.buffData.hasBuff(c.pzaBuffType.IMM_ICE_PEA)||(a.buffData.hasBuff(c.pzaBuffType.FROST)||this.playFrozenSound(),t.baseData.zombieData.zombieType!=u.pzaZombieEnum.NightWear&&a.buffData.addBuff(new c.pzaBuffInfo(c.pzaBuffType.FROST,10,.5))))},t.prototype.playHitEffect=function(a){var t=5,e=cc.v2(this.node.x,this.node.y);null!=a&&(t=10*-a.yIndex+5,e=cc.v2(a.logicPos.x,a.logicPos.y+70)),2==this.bulletLevel?z.pzaEffectManager.createBoomFireEffect(this.bulletYIndex,0,e,null):3==this.bulletLevel&&z.pzaEffectManager.createBoomFireEffect(this.bulletYIndex,0,e,null,!0);var o=l.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=r.pzaGameCommonPool.requestInstant2(0==this.bulletLevel?this.snowHitPrefab:this.hitPrefab);n.setParent(o),n.zIndex=t,n.setPosition(e);var i=n.getComponent(d.pzaBaseEffect);i&&i.showEffect(null,null)}},i([P({displayName:"\u666e\u901a\u5b50\u5f39\u7403\u8282\u70b9",type:cc.Node})],t.prototype,"ballBulletNode",void 0),i([P({displayName:"\u51b0\u971c\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"frostBulletNode",void 0),i([P({displayName:"\u51b0\u971c\u5b50\u5f39\u7279\u6548",type:cc.Node})],t.prototype,"frostEffect",void 0),i([P({displayName:"\u666e\u901a\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"normalBulletNode",void 0),i([P({displayName:"\u706b\u7130\u91d1\u7b8d\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"fireBulletNode",void 0),i([P({displayName:"\u706b\u7130\u91d1\u7b8d\u5b50\u5f39\u7403",type:cc.Node})],t.prototype,"fireBall",void 0),i([P({displayName:"\u706b\u7130\u8c4c\u8c46\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"firePeaNode",void 0),i([P({displayName:"\u706b\u7130\u8c4c\u8c46\u5b50\u5f39\u7403",type:cc.Node})],t.prototype,"firePeaBall",void 0),i([P({displayName:"\u51b0\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"snowHitPrefab",void 0),i([P({displayName:"\u51b0\u706b\u5b50\u5f39\u91d1\u7b8d",type:cc.Node})],t.prototype,"iceFireBall",void 0),i([P({displayName:"\u51b0\u706b\u8c4c\u8c46\u5b50\u5f39",type:cc.Node})],t.prototype,"iceFirePeaNode",void 0),i([P({displayName:"\u51b0\u706b\u8c4c\u8c46\u5b50\u5f39\u7403",type:cc.Node})],t.prototype,"iceFirePeaBall",void 0),i([v],t)}(g.pzaBaseBullet);e.pzaPeaBullet=D,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../Plant/pzaPlantBody":"pzaPlantBody","../Plant/pzaSquashTorch":"pzaSquashTorch","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseBullet":"pzaBaseBullet"}],pzaPeaCannon:[function(a,t,e){"use strict";cc._RF.push(t,"19abbyWF0lJs6PA0a5sYsZ5","pzaPeaCannon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaCannon=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData)||e.findAttackTarget())return l.pzaSoundManager.playAudio("PeashooterAtk"),void e.animation.playAnimation("attack",!1,function(){e.animation.playAnimation("idle1",!1,o)},function(){e.shoot()});e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle1_eye",!1,o))};o(),d.pzaGameState.usePeaPlant=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1),t.scale=2;var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},t.prototype.findAttackTarget=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaPeaCannon=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPeaCattail:[function(a,t,e){"use strict";cc._RF.push(t,"09d02065GlIzIUsG8u4vwLR","pzaPeaCattail");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaCattail=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../../Common/pzaWorldEventManager"),u=a("../Bullet/pzaPeaTrackBullet"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaPlantEnum"),m=a("../pzaGameState"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.shootNode2=null,t.bulletPrefab=null,t.blinkTime=3,t.atkAniTime=1.4,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.BACK_HOME,this.close,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.GAME_OVER,this.close,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.BACK_HOME,this.realClose,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.GAME_OVER,this.realClose,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.BACK_HOME,this.realClose,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.GAME_OVER,this.realClose,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack1"),m.pzaGameState.onlyShroomCofee=!1,m.pzaGameState.usePondPlant=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();null==e?a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t)):a.animation.playAnimation("attack1",!1,function(){t()},function(){a.attack(e),a.attack2(e),l.pzaSoundManager.playAudio("PeashooterAtk")})};this.animation.playAnimation("idle1",!1,t)},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(d.pzaBuffType.DIVE)&&!r.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)){var p=s.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(d.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.attack=function(a){this.commonAtk(a,1)},t.prototype.attack2=function(a){this.commonAtk(a,2)},t.prototype.commonAtk=function(a,t){if(!(this.baseData.isDead||window.pzazombieManager.zombieMap.size<=0)){var e,o=p.pzaNodeManager.getBulletNode();e=1==t?this.shootNode.convertToWorldSpaceAR(cc.v2()):this.shootNode2.convertToWorldSpaceAR(cc.v2());var n=o.convertToNodeSpaceAR(e),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);i.setParent(o);var l=cc.v2(n.x,n.y),s=i.getComponent(u.pzaPeaTrackBullet);s.moveSpeed=400,s.setBulletLevel(1),s.init(this.baseData.atk,a,l,this.baseData.yIndex)}},t.prototype.close=function(){if(a.prototype.close.call(this),!this.inUI){var t=""+this.baseData.xIndex+this.baseData.yIndex;null!=window.pzaplantManager.pumpkinDataMap.get(t)&&window.pzaplantManager.createPlant(h.pzaPlantEnum.LILY_PAD,this.baseData.xIndex,this.baseData.yIndex)}},t.prototype.realClose=function(){a.prototype.close.call(this)},i([g({displayName:"\u53d1\u5c04\u70b91",type:cc.Node})],t.prototype,"shootNode",void 0),i([g({displayName:"\u53d1\u5c04\u70b92",type:cc.Node})],t.prototype,"shootNode2",void 0),i([g({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([y],t)}(f.pzaBasePlant);e.pzaPeaCattail=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaPeaTrackBullet":"pzaPeaTrackBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPeaFireBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"df00122vN9KZoblfqmpGDzr","pzaPeaFireBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaFireBaseBullet=void 0;var r=a("../../Common/pzaGroupEnum"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaZombieEnum"),u=a("../Plant/pzaPlantBody"),d=a("../pzaEffectManager"),h=a("../Zombie/pzaZombieBody"),m=a("./pzaBaseBullet"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.fireBall=null,t.iceFireBall=null,t.isIceFireBall=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.isIceFireBall=!1,this.fireBall.active=!0,this.iceFireBall.active=!1},t.prototype.update=function(){this.isIceFireBall?this.iceFireBall.angle-=10:this.fireBall.angle-=10},t.prototype.onCollision=function(a){if(null!=a&&!this.hasColl)if(a.node.group!=r.pzaGroupEnum.ZOMBIE)a.node.group==r.pzaGroupEnum.ICEWOOD&&this.colliderIceWood(a);else{var t=a.node.getComponent(h.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderIceWood=function(a){var t=a&&a.node.getComponent(u.pzaPlantBody);null==t||null==t.baseData||t.baseData.isDead||this.isIceFireBall||(this.isIceFireBall=!0,this.fireBall.active=!1,this.iceFireBall.active=!0,p.pzaSoundManager.playAudio("Torchwood",.5))},t.prototype.colliderZombie=function(a){if(a&&!a.isDead)if(null!=a.zombieData){if(a.zombieData&&a.zombieData.hypnosis)this.close();else if(a.buffData.hasBuff(s.pzaBuffType.INVINCIBLE))this.close();else if(!a.buffData.hasBuff(s.pzaBuffType.DIVE)){var t=window.pzazombieManager.getZombie(a);null!=t?(this.isIceFireBall?this.iceFireColliderZombie(a):this.fireColliderZombie(a),t.hurt(this.atk),this.close()):this.close()}}else this.close()},t.prototype.fireColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&t.hurt(40),a.buffData.removeBuff(s.pzaBuffType.FROST),a.buffData.removeBuff(s.pzaBuffType.FROZEN),this.close(),this.playHitEffect(a),p.pzaSoundManager.playAudio("firepeaHit",.5),t.baseData.buffData.hasBuff(s.pzaBuffType.IMM_SPATTER)},t.prototype.iceFireColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(t&&t.hurt(40),this.close(),this.playHitEffect(a),t.baseData.buffData.hasBuff(s.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(s.pzaBuffType.HARD_BODY)||t.baseData.buffData.hasBuff(s.pzaBuffType.IMM_ICE_PEA)||(a.buffData.hasBuff(s.pzaBuffType.FROST)||this.playFrozenSound(),t.baseData.zombieData.zombieType!=c.pzaZombieEnum.NightWear&&a.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FROST,10,.5))))},t.prototype.playHitEffect=function(a){var t=cc.v2(this.node.x,this.node.y);null!=a&&(a.yIndex,t=cc.v2(a.logicPos.x,a.logicPos.y+70)),0==this.isIceFireBall?d.pzaEffectManager.createBoomFireEffect(5,0,t,null):this.isIceFireBall&&d.pzaEffectManager.createBoomFireEffect(5,0,t,null,!0)},t.prototype.playFrozenSound=function(){var a="frozen_"+l.pzaUtil.getRandomNum(1,2);p.pzaSoundManager.playAudio(a)},i([y({displayName:"\u91d1\u7b8d\u8282\u70b9",type:cc.Node})],t.prototype,"fireBall",void 0),i([y({displayName:"\u51b0\u706b\u91d1\u7b8d\u8282\u70b9",type:cc.Node})],t.prototype,"iceFireBall",void 0),i([z],t)}(m.pzaBaseBullet);e.pzaPeaFireBaseBullet=g,cc._RF.pop()},{"../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaPlantBody":"pzaPlantBody","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","./pzaBaseBullet":"pzaBaseBullet"}],pzaPeaFireTrackBullet:[function(a,t,e){"use strict";cc._RF.push(t,"1fb6e3Jc+BJ05p0Khnl9gKX","pzaPeaFireTrackBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaFireTrackBullet=void 0;var r=a("../../Common/pzaGroupEnum"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaZombieEnum"),u=a("../Plant/pzaPlantBody"),d=a("../pzaEffectManager"),h=a("../Zombie/pzaZombieBody"),m=a("./pzaTrackBullet"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.fireBall=null,t.iceFireBall=null,t.isIceFireBall=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.isIceFireBall=!1,this.fireBall.active=!0,this.iceFireBall.active=!1},t.prototype.update=function(){this.isIceFireBall?this.iceFireBall.angle-=10:this.fireBall.angle-=10},t.prototype.onCollision=function(a){if(null!=a&&!this.hasColl)if(a.node.group!=r.pzaGroupEnum.ZOMBIE)a.node.group==r.pzaGroupEnum.ICEWOOD&&this.colliderIceWood(a);else{var t=a.node.getComponent(h.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderIceWood=function(a){var t=a&&a.node.getComponent(u.pzaPlantBody);null==t||null==t.baseData||t.baseData.isDead||this.isIceFireBall||(this.isIceFireBall=!0,this.fireBall.active=!1,this.iceFireBall.active=!0,p.pzaSoundManager.playAudio("Torchwood",.5))},t.prototype.colliderZombie=function(a){if(a&&!a.isDead)if(null!=a.zombieData){if(a.zombieData&&a.zombieData.hypnosis)this.close();else if(a.buffData.hasBuff(s.pzaBuffType.INVINCIBLE))this.close();else if(!a.buffData.hasBuff(s.pzaBuffType.DIVE)){var t=window.pzazombieManager.getZombie(a);null!=t?(this.isIceFireBall?this.iceFireColliderZombie(a):this.fireColliderZombie(a),t.hurt(this.atk),this.close()):this.close()}}else this.close()},t.prototype.fireColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&t.hurt(40),a.buffData.removeBuff(s.pzaBuffType.FROST),a.buffData.removeBuff(s.pzaBuffType.FROZEN),this.close(),this.playHitEffect(a),p.pzaSoundManager.playAudio("firepeaHit",.5),t.baseData.buffData.hasBuff(s.pzaBuffType.IMM_SPATTER)},t.prototype.iceFireColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(t&&t.hurt(40),this.close(),this.playHitEffect(a),t.baseData.buffData.hasBuff(s.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(s.pzaBuffType.HARD_BODY)||t.baseData.buffData.hasBuff(s.pzaBuffType.IMM_ICE_PEA)||(a.buffData.hasBuff(s.pzaBuffType.FROST)||this.playFrozenSound(),t.baseData.zombieData.zombieType!=c.pzaZombieEnum.NightWear&&a.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FROST,10,.5))))},t.prototype.playHitEffect=function(a){var t=cc.v2(this.node.x,this.node.y);null!=a&&(a.yIndex,t=cc.v2(a.logicPos.x,a.logicPos.y+70)),0==this.isIceFireBall?d.pzaEffectManager.createBoomFireEffect(5,0,t,null):this.isIceFireBall&&d.pzaEffectManager.createBoomFireEffect(5,0,t,null,!0)},t.prototype.playFrozenSound=function(){var a="frozen_"+l.pzaUtil.getRandomNum(1,2);p.pzaSoundManager.playAudio(a)},i([y({displayName:"\u706b\u7403\u8282\u70b9",type:cc.Node})],t.prototype,"fireBall",void 0),i([y({displayName:"\u51b0\u706b\u7403\u8282\u70b9",type:cc.Node})],t.prototype,"iceFireBall",void 0),i([z],t)}(m.pzaTrackBullet);e.pzaPeaFireTrackBullet=g,cc._RF.pop()},{"../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaPlantBody":"pzaPlantBody","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","./pzaTrackBullet":"pzaTrackBullet"}],pzaPeaLilyPad:[function(a,t,e){"use strict";cc._RF.push(t,"45f89zq3WZN2rYUOn2TTvWy","pzaPeaLilyPad");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaLilyPad=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaLilyPad"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.atkTime=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.atkTime=0,this.aniCom(),d.pzaGameState.usePondPlant=!0,this.baseData.plantData.canBeShoot=!1},t.prototype.aniCom=function(){var a=this;if(!(this.atkTime>0))return window.pzazombieManager.hasCanAttackZombie(this.baseData)||this.findAttackTarget()?(this.atkTime=this.atkInterval,void this.animation.playAnimation("attack",!1,function(){a.aniCom()},function(){l.pzaSoundManager.playAudio("PeashooterAtk"),a.shoot()})):void(this.blinkTime>0?this.animation.playAnimation("idle",!1,this.aniCom.bind(this)):(this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("idle_eye",!1,this.aniCom.bind(this))));this.animation.playAnimation("idle",!1,this.aniCom.bind(this))},t.prototype.showBlinkAni=function(){},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.atkTime-=t},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1);var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},t.prototype.findAttackTarget=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaLilyPad);e.pzaPeaLilyPad=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaLilyPad":"pzaLilyPad"}],pzaPeaPool:[function(a,t,e){"use strict";cc._RF.push(t,"6d1faS6C75FDLZYGWKTy2LL","pzaPeaPool");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaPool=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Bullet/pzaPeaBullet"),s=a("../pzaGameState"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.atkCd=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.animation.playAnimation("idle",!0),this.atkCd=3,s.pzaGameState.usePeaPlant=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.atkCd>0&&(this.atkCd-=t,this.atkCd<=0&&this.attack())},t.prototype.close=function(){a.prototype.close.call(this)},t.prototype.attack=function(){if(!this.baseData.isDead){var a=cc.v2(1,0),t=2*Math.PI/36,e=p.pzaNodeManager.getBulletNode(),o=this.node.getPosition();o.y=o.y+50;for(var n=0;n<36;n++){var i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);i.setParent(e),i.setPosition(o);var s=i.getComponent(l.pzaPeaBullet);s.init(-1,this.baseData.atk,1,null,a.rotate(t*n)),s.setSpeed(400)}this.atkCd=3}},i([h({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([d],t)}(c.pzaBasePlant);e.pzaPeaPool=m,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Bullet/pzaPeaBullet":"pzaPeaBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPeaSun:[function(a,t,e){"use strict";cc._RF.push(t,"8c341JjVA9Kt5s70lUKcxR5","pzaPeaSun");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaSun=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaBaseBullet"),c=a("../pzaGameState"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.sunTime=25,t.aniCom=function(){if(window.pzazombieManager.hasCanAttackZombie(t.baseData))return l.pzaSoundManager.playAudio("PeashooterAtk"),void t.animation.playAnimation("attack",!1,t.aniCom.bind(t),function(){t.shoot()});t.animation.playAnimation("idle1",!1,t.aniCom.bind(t))},t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.sunTime=3,this.aniCom(),c.pzaGameState.usePeaPlant=!0},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData&&(this.sunTime-=t,this.sunTime<=0)){if(this.sunTime=25,c.pzaGameState.noCreateSun())return;this.animation.playAnimation("Sunlight",!1,this.aniCom.bind(this),function(){window.pzaplantManager.plantCreateSun2(e.node.getPosition(),1,25)})}},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(s.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1);var i=c.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*c.pzaGameState.map.getBlockWidth())}}}}},i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([h],t)}(u.pzaBasePlant);e.pzaPeaSun=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPeaTangleKelp:[function(a,t,e){"use strict";cc._RF.push(t,"a542alYHmxIo5mVL6GKzMto","pzaPeaTangleKelp");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaTangleKelp=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaTangleKelp"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t}return n(t,a),t.prototype.playBlinkAni=function(){var a=this,t=function(){window.pzazombieManager.hasCanAttackZombie(a.baseData)||a.findAtkTarget()?a.animation.playAnimation("attack3",!1,t,function(){l.pzaSoundManager.playAudio("PeashooterAtk"),a.shoot()}):a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};this.animation.playAnimation("idle1",!1,t)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),d.pzaGameState.usePeaPlant=!0},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1);var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},t.prototype.findAtkTarget=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaTangleKelp);e.pzaPeaTangleKelp=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaTangleKelp":"pzaTangleKelp"}],pzaPeaTrackBullet:[function(a,t,e){"use strict";cc._RF.push(t,"84fc5q04nNCj7/0zllpnnRq","pzaPeaTrackBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaTrackBullet=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGroupEnum"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaUtil"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaZombieEnum"),h=a("../Effect/pzaBaseEffect"),m=a("../Plant/pzaPlantBody"),f=a("../Plant/pzaSquashTorch"),z=a("../Zombie/pzaZombieBody"),y=a("../pzaEffectManager"),g=a("../pzaGameState"),b=a("./pzaTrackBullet"),v=cc._decorator,P=v.ccclass,D=v.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.frostBulletNode=null,t.frostEffect=null,t.normalBulletNode=null,t.fireBulletNode=null,t.snowHitPrefab=null,t.hitPrefab=null,t.fireBall=null,t.iceFireBall=null,t.bulletLevel=0,t.frozeTime=10,t.colliderWoods=new Set,t.colliderIceWoods=new Set,t}return n(t,a),t.prototype.init=function(t,e,o,n){a.prototype.init.call(this,t,e,o,n),this.colliderWoods.clear(),this.colliderIceWoods.clear(),this.refreshBulletState()},t.prototype.setBulletLevel=function(a){this.bulletLevel=a,this.refreshBulletState()},t.prototype.onCollision=function(a){if(null!=a&&!this.hasColl){if(a.node.group==p.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(z.pzaZombieBody);this.colliderZombie(t&&t.baseData)}a.node.group!=p.pzaGroupEnum.TORCHWOOD||this.colliderWoods.has(a)||this.colliderTorchWood(a),this.iceFireBall&&a.node.group==p.pzaGroupEnum.ICEWOOD&&!this.colliderIceWoods.has(a)&&this.colliderIceWood(a)}},t.prototype.colliderIceWood=function(a){var t=a&&a.node.getComponent(m.pzaPlantBody);null==t||null==t.baseData||t.baseData.isDead||this.bulletLevel>=3||(this.bulletLevel=3,this.colliderIceWoods.add(a),this.refreshBulletState(),this.bulletLevel>=3&&s.pzaSoundManager.playAudio("Torchwood",.5))},t.prototype.colliderTorchWood=function(a){var t=a&&a.node.getComponent(m.pzaPlantBody);if(!(null==t||null==t.baseData||t.baseData.isDead||this.bulletLevel>=2)){if(this.bulletLevel++,this.colliderWoods.add(a),this.refreshBulletState(),t.isSquashTorch){t.fireBulletCnt++;var e=t.node.parent&&t.node.parent.getComponent(f.pzaSquashTorch);e&&window.pzaplantManager.fireSquashMap.get(e.uuid)?t.fireBulletCnt=0:t.fireBulletCnt++,t.fireBulletCnt>=t.fireBulletAllCnt&&(t.fireBulletCnt=0,e.createSquashCherry())}this.bulletLevel>=2&&s.pzaSoundManager.playAudio("Torchwood",.5)}},t.prototype.refreshBulletState=function(){this.frostBulletNode.active=0==this.bulletLevel,this.frostEffect.active=0==this.bulletLevel,this.normalBulletNode.active=1==this.bulletLevel,this.fireBulletNode.active=2==this.bulletLevel,this.iceFireBall.active=3==this.bulletLevel},t.prototype.colliderZombie=function(a){a&&!a.isDead&&(a.zombieData&&a.zombieData.hypnosis||a.buffData.hasBuff(u.pzaBuffType.DIVE)||a.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||(0==this.bulletLevel?this.frostColliderZombie(a):1==this.bulletLevel?this.normalColliderZombie(a):3==this.bulletLevel?this.iceFireColliderZombie(a):this.fireColliderZombie(a)))},t.prototype.normalColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(t.hurt(this.atk),2===this.node.scale&&t.pushBack(.2),this.close(),this.playHitEffect(a))},t.prototype.frostColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(t.hurt(this.atk),this.close(),this.playHitEffect(a),t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(u.pzaBuffType.HARD_BODY)||t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE_PEA)||(a.buffData.hasBuff(u.pzaBuffType.FROST)||this.playFrozenSound(),t.baseData.zombieData.zombieType!=d.pzaZombieEnum.NightWear&&a.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,this.frozeTime,.5))))},t.prototype.fireColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);if(t&&t.hurt(40),a.buffData.removeBuff(u.pzaBuffType.FROST),a.buffData.removeBuff(u.pzaBuffType.FROZEN),this.close(),this.playHitEffect(a),s.pzaSoundManager.playAudio("firepeaHit",.5),!t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_SPATTER)){var e=window.pzazombieManager.findFixRangeZombies(a.logicPos,.5*g.pzaGameState.map.getBlockWidth());e&&e.forEach(function(t){null!=t&&t.baseData!=a&&(a.buffData.hasBuff(u.pzaBuffType.FLY)||a.buffData.hasBuff(u.pzaBuffType.DIVE)||a.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||t.hurt(13))})}},t.prototype.iceFireColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(2===this.node.scale?(t.pushBack(.2),t&&t.hurt(2*this.atk)):t&&t.hurt(40),this.close(),this.playHitEffect(a),t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(u.pzaBuffType.HARD_BODY)||t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE_PEA)||(a.buffData.hasBuff(u.pzaBuffType.FROST)||this.playFrozenSound(),t.baseData.zombieData.zombieType!=d.pzaZombieEnum.NightWear&&a.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,10,.5))))},t.prototype.playHitEffect=function(a){var t=5,e=cc.v2(this.node.x,this.node.y);null!=a&&(t=10*-a.yIndex+5,e=cc.v2(a.logicPos.x,a.logicPos.y+70)),2==this.bulletLevel?y.pzaEffectManager.createBoomFireEffect(this.yIndex,0,e,null):3==this.bulletLevel&&y.pzaEffectManager.createBoomFireEffect(this.yIndex,0,e,null,!0);var o=l.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=r.pzaGameCommonPool.requestInstant2(0==this.bulletLevel?this.snowHitPrefab:this.hitPrefab);n.setParent(o),n.zIndex=t,n.setPosition(e);var i=n.getComponent(h.pzaBaseEffect);i&&i.showEffect(null,null)}},t.prototype.playFrozenSound=function(){var a="frozen_"+c.pzaUtil.getRandomNum(1,2);s.pzaSoundManager.playAudio(a)},t.prototype.update=function(){this.fireBulletNode.active&&(this.fireBall.angle-=10)},i([D({displayName:"\u51b0\u971c\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"frostBulletNode",void 0),i([D({displayName:"\u51b0\u971c\u5b50\u5f39\u7279\u6548",type:cc.Node})],t.prototype,"frostEffect",void 0),i([D({displayName:"\u666e\u901a\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"normalBulletNode",void 0),i([D({displayName:"\u706b\u7130\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"fireBulletNode",void 0),i([D({displayName:"\u51b0\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"snowHitPrefab",void 0),i([D({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"hitPrefab",void 0),i([D(cc.Node)],t.prototype,"fireBall",void 0),i([D({displayName:"\u51b0\u706b\u5b50\u5f39",type:cc.Node})],t.prototype,"iceFireBall",void 0),i([P],t)}(b.pzaTrackBullet);e.pzaPeaTrackBullet=S,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../Plant/pzaPlantBody":"pzaPlantBody","../Plant/pzaSquashTorch":"pzaSquashTorch","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaTrackBullet":"pzaTrackBullet"}],pzaPeaZombie:[function(a,t,e){"use strict";cc._RF.push(t,"f2ddfXdJO5NHYe/+l4mt4b8","pzaPeaZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaZombie=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGroupEnum"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaSoundManager"),c=a("../Bullet/pzaBaseBullet"),u=a("../Bullet/pzaZombieBaseBullet"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaPlantEnum"),m=a("../Data/pzaZombieEnum"),f=a("../pzaGameState"),z=a("../pzaSpineTool"),y=a("./pzaNormalZombie"),g=a("./pzaZombieSlot"),b=a("./pzaZombieState"),v=cc._decorator,P=v.ccclass,D=v.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.plantBltPre=null,t.equip1Slot=null,t.hatSlotMap=new Map([[m.pzaZombieEnum.PeaZombie2,{slotName:g.pzaZombieSlotType.hat,attNameArr:[g.pzaZombieSlotType.hat+"1",g.pzaZombieSlotType.hat+"2",g.pzaZombieSlotType.hat+"3"],arr1:[75.75,-22.02,-90.94],arr2:[59.33,-22.25,-90.94],arr3:[64.31,-18.33,-90.94],isFei:!1}],[m.pzaZombieEnum.PeaZombie3,{slotName:g.pzaZombieSlotType.hat,attNameArr:[g.pzaZombieSlotType.hat_iron+"1",g.pzaZombieSlotType.hat_iron+"2",g.pzaZombieSlotType.hat_iron+"3"],arr1:[115.78,-23.89,-90.94],arr2:[112.08,-24.41,-90.94],arr3:[109.21,-30.99,-90.94],isFei:!0}],[m.pzaZombieEnum.PeaZombie4,{slotName:g.pzaZombieSlotType.door,attNameArr:[g.pzaZombieSlotType.door+"1",g.pzaZombieSlotType.door+"2",g.pzaZombieSlotType.door+"3"],arr1:[-92.87,-41.37,0],arr2:[-92.87,-41.37,0],arr3:[-93.37,-41.37,0],isFei:!1}]]),t.garlicSkinName=null,t}return n(t,a),t.prototype.bindData=function(t,e){a.prototype.bindData.call(this,t,e),this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var o=this.animation.findBone("aduck");this.hasUseSrAni?o&&(o.scaleX=.158,o.scaleY=.158):o&&(o.scaleX=0,o.scaleY=0),this.baseData.zombieData.zombieType==m.pzaZombieEnum.PeaZombie4&&z.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,g.pzaZombieSlotType.hat,null,0,0)},t.prototype.initEquips=function(){if(this.slotMap)this.slotMap.forEach(function(a){a.updateState(0,!0)});else{if(!this.baseData||!this.baseData.zombieData)return;this.slotMap=new Map([[g.pzaZombieSlotType.butter,new g.pzaZombieSlot(this.animation.spineAnimation,g.pzaZombieSlotType.butter).addState(new g.pzaZombieSlotAtt(1,g.pzaZombieSlotType.butter,61.81,13.02,-93.13))]]);var a=this.hatSlotMap.get(this.baseData.zombieData.zombieType);a&&(this.equip1Slot=a.slotName,this.slotMap.set(a.slotName,new g.pzaZombieSlot(this.animation.spineAnimation,a.slotName).addState(new g.pzaZombieSlotAtt(1,a.attNameArr[0],a.arr1[0],a.arr1[1],a.arr1[2])).addState(new g.pzaZombieSlotAtt(2,a.attNameArr[1],a.arr2[0],a.arr2[1],a.arr2[2])).addState(new g.pzaZombieSlotAtt(3,a.attNameArr[2],a.arr3[0],a.arr3[1],a.arr3[2]))))}},t.prototype.uiShow=function(){this.inUI=!0,this.setZombieScale(1),this.node.scaleX=1,this.refreshFrostState(!0),this.baseData.zombieData.zombieType==m.pzaZombieEnum.PeaZombie4?this.animation.playAnimation(this.uiIdleName,!0,null,null,.5):this.animation.playAnimation("idle",!0,null,null,.5),this.refreshHurtState(!0),this.randomZombieSkin()},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=b.pzaZombieState.MOVE,this.animation.playAnimation(this.getMoveAniName(),!0,null,function(t,e){e&&"attack"==e.data.name&&a.shoot()},1)},t.prototype.playAttakAnimation=function(){var a=this;this.zombieState=b.pzaZombieState.EAT_ATK,this.animation.playAnimation(this.getAttackAniName(),!0,null,function(){var t=a.findTarget();if(null!=t){if(!t.isDead&&null!=t.plantData&&t.plantData.plantType==h.pzaPlantEnum.HYPNO_SHROOM&&!t.plantData.sleeping){s.pzaSoundManager.playAudio("floop"),s.pzaSoundManager.playAudio("mindcontrolled"),t.isDead=!0,window.pzazombieManager.zombieHypnosis(a.baseData);var e=window.pzaplantManager.getPlantByData(t);e&&e.close(),window.pzaplantManager.removePlant(t)}t.isDead||null==t.plantData||t.plantData.plantType!=h.pzaPlantEnum.HYPNO_GARLIC||(s.pzaSoundManager.playAudio("floop"),s.pzaSoundManager.playAudio("mindcontrolled"),a.baseData.zombieData.hypnosis=!0,a.baseData.zombieData.direction=1,a.body.node.group=p.pzaGroupEnum.PLANT,a.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.INVINCIBLE,-1)),a.changeMapRow(),s.pzaSoundManager.playAudio("Garlic"),a.damage(t))}})},t.prototype.shoot=function(){if(this.baseData&&!this.baseData.isDead){var a=l.pzaNodeManager.getBulletNode();if(a){s.pzaSoundManager.playAudio("PeashooterAtk");var t=null;(t=this.baseData.zombieData.canAtkZombie?r.pzaGameCommonPool.requestInstant2(this.plantBltPre):r.pzaGameCommonPool.requestInstant2(this.bulletPrefab)).setParent(a);var e=z.pzaSpineTool.findBonePos(this.animation.spineAnimation,"1head1",this.node),o=a.convertToNodeSpaceAR(e);o.y-=15,t.setPosition(o);var n=null;this.baseData.zombieData.canAtkZombie?(n=t.getComponent(c.pzaBaseBullet)).init(this.baseData.yIndex,20,1):(n=t.getComponent(u.pzaZombieBaseBullet)).init(this.baseData.yIndex,20);var i=f.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*f.pzaGameState.map.getBlockWidth())}}},t.prototype.updateMove=function(t){a.prototype.updateMove.call(this,t)},i([D(cc.Prefab)],t.prototype,"bulletPrefab",void 0),i([D(cc.Prefab)],t.prototype,"plantBltPre",void 0),i([P],t)}(y.pzaNormalZombie);e.pzaPeaZombie=S,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaZombieBaseBullet":"pzaZombieBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaPeashooter:[function(a,t,e){"use strict";cc._RF.push(t,"136e0qMLeFJNLvOV19FzBd4","pzaPeashooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeashooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaBaseBullet"),c=a("../Data/pzaBuffData"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.attacking=!1,t}return n(t,a),t.prototype.playIdleAni=function(){var a=this,t=function(){window.pzazombieManager.hasCanAttackZombie(a.baseData)||a.findAttackTarget()?a.animation.playAnimation("attack",!1,t,function(){l.pzaSoundManager.playAudio("PeashooterAtk"),a.shoot()}):a.animation.playAnimation("idle",!1,t)};t()},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),u.pzaGameState.isZombieMode())return this.attacking=!1,void this.animation.playAnimation("T_idle",!0);this.playIdleAni(),u.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),!this.attacking&&u.pzaGameState.isZombieMode()&&window.pzazombieManager.hasCanAttackZombie(this.baseData))return l.pzaSoundManager.playAudio("PeashooterAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot()})},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(s.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1);var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},t.prototype.findAttackTarget=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)?null:a.baseData},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaPeashooter=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPenetrateBullet:[function(a,t,e){"use strict";cc._RF.push(t,"772663ucSZBjbqxXMsRx8nq","pzaPenetrateBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPenetrateBullet=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaZombieEnum"),l=a("../Plant/pzaAttackType"),s=a("./pzaBaseBullet"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(){},t.prototype.colliderZombie=function(a){if(a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==p.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&!a.buffData.hasBuff(r.pzaBuffType.DIVE)&&!a.buffData.hasBuff(r.pzaBuffType.UNABLE_SELECT)&&(this.isInAir||!a.buffData.hasBuff(r.pzaBuffType.FLY))&&(!this.isInAir||a.buffData.hasBuff(r.pzaBuffType.FLY))&&!(a.buffData.hasBuff(r.pzaBuffType.INVINCIBLE)||a.zombieData&&a.zombieData.hypnosis)){var t=window.pzazombieManager.getZombie(a);null!=t&&(t.hurt(this.atk,null,l.pzaAttackType.PENETRATE),this.penetrate||this.close(),this.penetrate&&this.penetrateCnt>0&&(this.penetrateCnt--,window.pzazombieManager.getZombie(a).pushBack(.15),this.penetrateCnt<=0&&(this.penetrate=!1,this.close())),this.playHitEffect(a))}},i([u],t)}(s.pzaBaseBullet));e.pzaPenetrateBullet=d,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","./pzaBaseBullet":"pzaBaseBullet"}],pzaPitchFork:[function(a,t,e){"use strict";cc._RF.push(t,"1221fKj2XpJZoVlAQRLW44u","pzaPitchFork");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPitchFork=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGroupEnum"),s=a("../../Common/pzaSpineController"),c=a("../Data/pzaBuffData"),u=a("../Plant/pzaAttackType"),d=a("../Zombie/pzaZombieBody"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani=null,t.yIndex=-1,t.hasTrigger=!1,t.collider=null,t}return n(t,a),t.prototype.init=function(a){this.yIndex=a,this.hasTrigger=!1,this.ani.playAnimation("idle",!1),this.ani.pauseAnimation(),p.pzaCollisionManager.getInstance.addBulletByRow(this.yIndex,this)},t.prototype.close=function(){p.pzaCollisionManager.getInstance.delBulletByRow(this.yIndex,this),a.prototype.close.call(this)},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.onCollision=function(a){if(null!=a&&a.node.group==l.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(d.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderZombie=function(a){var t=this;if(!this.hasTrigger&&a&&!a.isDead&&(-1==this.yIndex||this.yIndex==a.yIndex)&&!(a.buffData.hasBuff(c.pzaBuffType.DIVE)||a.buffData.hasBuff(c.pzaBuffType.FLY)||a.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)||a.buffData.hasBuff(c.pzaBuffType.INVINCIBLE)||a.zombieData&&a.zombieData.hypnosis)){var e=window.pzazombieManager.getZombie(a);e&&e.hurt(5e4,u.pzaAttackType.NORMAL_BOOM),this.hasTrigger=!0,p.pzaCollisionManager.getInstance.delBulletByRow(this.yIndex,this),this.ani.playAnimation("idle",!1,function(){t.close()},function(){console.log("event")})}},t.prototype.pauseSelf=function(){this.hasTrigger&&this.ani.pauseAnimation()},t.prototype.resumeSelf=function(){this.hasTrigger&&this.ani.resumeAnimation()},i([f({displayName:"\u53c9\u5b50\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"ani",void 0),i([m],t)}(r.pzaBaseComponent);e.pzaPitchFork=z,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../Zombie/pzaZombieBody":"pzaZombieBody"}],pzaPlantBeltView:[function(a,t,e){"use strict";cc._RF.push(t,"d48aaIGJ4JNFaarGyGIrRf1","pzaPlantBeltView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantBeltView=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaBeltConfig"),s=a("../../Common/pzaGameCommonPool"),c=a("../../Common/pzaUtil"),u=a("../../Common/pzaWorldEventManager"),d=a("./pzaBeltCard"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.boardNode=null,t.belt1=null,t.belt2=null,t.cardContent=null,t.beltCardPre=null,t.beltSpeed=85,t.beltOriPos=null,t.beltCardList=[],t.createInterval=4,t.beltPause=!1,t.lastBeltPlant=null,t.totalCount=0,t}return n(t,a),t.prototype.onEnable=function(){u.pzaWorldEventManager.addListener(u.pzaWorldEventType.PLANT_PLANT,this.plantCall,this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},t.prototype.onDisable=function(){this.clearBeltCard(),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.PLANT_PLANT,this.plantCall,this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},t.prototype.onLoad=function(){this.beltOriPos=cc.v2(this.belt1.x,this.belt1.y)},t.prototype.showView=function(a){this.belt1.setPosition(this.beltOriPos.clone()),this.belt2.setPosition(cc.v2(this.beltOriPos.x,this.beltOriPos.y-this.belt1.height)),this.totalCount=0,this.beltPause=!1,this.lastBeltPlant=null,this.boardNode.stopAllActions(),this.boardNode.setPosition(cc.v2(-200,0)),this.boardNode.runAction(cc.sequence(cc.moveTo(.2,cc.v2()),cc.callFunc(function(){a&&a()})));var t=l.pzaBeltConfig.getInitCard(this.totalCount,p.pzaGameState.curChapter,p.pzaGameState.curPart);this.createInterval=null!=t?l.pzaBeltConfig.InitCardInterval:l.pzaBeltConfig.getFirstCardInterval(p.pzaGameState.curChapter,p.pzaGameState.curPart)},t.prototype.update=function(a){if(!p.pzaGameState.gamePause&&!this.beltPause){var t=a*this.beltSpeed;this.belt1.y+=t,this.belt2.y+=t,this.belt1.y>=this.beltOriPos.y+720&&(this.belt1.y-=2*this.belt1.height),this.belt2.y>=this.beltOriPos.y+720&&(this.belt2.y-=2*this.belt1.height);for(var e=0;e<this.beltCardList.length;e++){var o=this.beltCardList[e],n=360-80*e;o.node.y>=n?8==e&&(this.beltPause=!0):o.node.y=Math.min(o.node.y+t,n)}this.createInterval-=a,this.createInterval<=0&&this.createCard()}},t.prototype.createCard=function(){if(!(this.beltCardList.length>=9)){var a=s.pzaGameCommonPool.requestInstant(this.beltCardPre);a.setParent(this.cardContent),a.setPosition(cc.v2(0,-360));var t=a.getComponent(d.pzaBeltCard);if(null!=t){var e=l.pzaBeltConfig.getInitCard(this.totalCount,p.pzaGameState.curChapter,p.pzaGameState.curPart);null==e&&(e=this.getRandomBeltPlant()),null!=e&&(t.bindData(e,this.clickCardCall.bind(this)),this.beltCardList.push(t)),this.totalCount++;var o=l.pzaBeltConfig.getInitCard(this.totalCount,p.pzaGameState.curChapter,p.pzaGameState.curPart);this.createInterval=null!=o?l.pzaBeltConfig.InitCardInterval:l.pzaBeltConfig.getNextCardInterval(p.pzaGameState.curChapter,p.pzaGameState.curPart,this.beltCardList.length)}}},t.prototype.getRandomBeltPlant=function(){var a=l.pzaBeltConfig.getBeltPlants(p.pzaGameState.curChapter,p.pzaGameState.curPart),t=l.pzaBeltConfig.getBeltPlantsWeight(p.pzaGameState.curChapter,p.pzaGameState.curPart);if(null==a||null==t)return null;for(var e=[],o=0;o<a.length;o++){var n=a[o],i=t[o],s=this.getBeltCardCount(n),u=i;if(n==r.pzaPlantEnum.GRAVE_BUSTER){var d=window.pzaplantManager.getPlantCount(n),h=window.pzaMapManager.TombMap.size;u=l.pzaBeltConfig.firstGraveBusterWeight(i,s+d,h)}else if(n==r.pzaPlantEnum.LILY_PAD)d=window.pzaplantManager.getPlantCount(n),u=l.pzaBeltConfig.firstLilypadWeight(i,s+d);else if(n==r.pzaPlantEnum.FLOWER_POT)d=window.pzaplantManager.getPlantCount(n),u=l.pzaBeltConfig.firstPotWeight(i,s+d);else if(n==r.pzaPlantEnum.MELON_PULT||n==r.pzaPlantEnum.CABBAGE_PULT){var m=window.pzaplantManager.getVoidPotCount();u=l.pzaBeltConfig.firstCabbageMelonWeight(i,m)}else n==r.pzaPlantEnum.KERNEL_PULT&&(m=window.pzaplantManager.getVoidPotCount(),u=l.pzaBeltConfig.firstKernelWeight(i,m));var f=l.pzaBeltConfig.sencondWeight(u,a.length,s,this.lastBeltPlant==n);n==r.pzaPlantEnum.FLOWER_POT&&p.pzaGameState.bangCaring&&(f=500),e.push(f)}return a[c.pzaUtil.getRandomIndexByWeight(e)]},t.prototype.getBeltCardCount=function(a){var t=0;return null==this.beltCardList?t:(this.beltCardList.forEach(function(e){null!=e&&e.plantType==a&&t++}),t)},t.prototype.selectCard=function(){p.pzaGameState.selectCard!=p.pzaSelectCardType.BELT_CARD&&this.clickCardCall()},t.prototype.clickCardCall=function(){null!=this.beltCardList&&this.beltCardList.forEach(function(a){a&&a.diselect()})},t.prototype.plantCall=function(){if(null!=this.beltCardList){this.beltCardList.length>=9&&(this.beltPause=!1);for(var a=0,t=0;t<this.beltCardList.length;t++){var e=this.beltCardList[t];null!=e&&e.hasSelect&&(e.close(),a=t)}this.beltCardList.splice(a,1)}},t.prototype.clearBeltCard=function(){null!=this.beltCardList&&(this.beltCardList.forEach(function(a){a&&a.close()}),this.beltCardList=[])},i([f({displayName:"\u9762\u677f\u8282\u70b9",type:cc.Node})],t.prototype,"boardNode",void 0),i([f({displayName:"\u4f20\u9001\u5e261",type:cc.Node})],t.prototype,"belt1",void 0),i([f({displayName:"\u4f20\u9001\u5e262",type:cc.Node})],t.prototype,"belt2",void 0),i([f({displayName:"\u5361\u7247\u5bb9\u5668",type:cc.Node})],t.prototype,"cardContent",void 0),i([f({displayName:"\u4f20\u9001\u5e26\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],t.prototype,"beltCardPre",void 0),i([m],t)}(cc.Component);e.pzaPlantBeltView=z,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaBeltConfig":"pzaBeltConfig","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaBeltCard":"pzaBeltCard"}],pzaPlantBody:[function(a,t,e){"use strict";cc._RF.push(t,"96c396uvMtPhLUJFoRD9JmK","pzaPlantBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantBody=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaGameConfig"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaBaseBody"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.isSquashTorch=!1,t.fireBulletCnt=0,t.fireBulletAllCnt=60,t.ignoreTarget=new Set,t.yIndex=-1,t.collider=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.ignoreTarget.clear()},t.prototype.onDisable=function(){this.yIndex>-1&&r.pzaCollisionManager.getInstance.delPlantByRow(this.yIndex,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t&&t.yIndex>-1?(this.yIndex=t.yIndex,r.pzaCollisionManager.getInstance.addPlantByRow(this.yIndex,this)):this.yIndex=-1},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t,!1)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t,!0)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node.parent,this.collider):null},t.prototype.onCollisionExit=function(a){if(null!=a&&null!=this.curTarget){var t=a.node.getComponent(u.pzaBaseBody);null!=t&&t.baseData==this.curTarget&&(this.curTarget=null)}},t.prototype.onCollision=function(a){if(null!=a&&null==this.curTarget){var t=a.node.getComponent(u.pzaBaseBody);if(null!=t&&null!=t.baseData&&!t.baseData.isDead&&!this.ignoreTarget.has(t.baseData)&&!t.baseData.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)&&this.baseData.yIndex==t.baseData.yIndex)if(t.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT))null!=this.baseData.plantData&&this.baseData.plantData.plantType==s.pzaPlantEnum.POTATO_MINE&&null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType==c.pzaZombieEnum.DIGGER_ZOMBIE&&(this.curTarget=t.baseData);else if(null==this.baseData.plantData||this.baseData.plantData.plantType!=s.pzaPlantEnum.HYPNO_SHROOM&&this.baseData.plantData.plantType!=s.pzaPlantEnum.REDHYPNO_SHROOM||!t.baseData.buffData.hasBuff(l.pzaBuffType.IMM_HYPNOSIS))if(this.baseData.plantData.cate!=s.pzaPlantCate.Mine||t.baseData.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE||t.baseData.zombieData.toolType==c.pzaEquipType.NO_EQUIP)if(null==this.baseData.plantData||this.baseData.plantData.plantType!=s.pzaPlantEnum.POTATO_MINE&&!p.pzaPlantConfigData.isTangleKelp(this.baseData.plantData.plantType)){if(t.baseData.zombieData.direction>0){if(this.baseData.logicPos.x<t.baseData.logicPos.x)return}else if(this.baseData.logicPos.x>t.baseData.logicPos.x)return;this.curTarget=t.baseData}else this.curTarget=t.baseData;else this.ignoreTarget.add(t.baseData)}},i([m({displayName:"\u662f\u5426\u4e3a\u51ac\u74dc\u706b\u70ac"})],t.prototype,"isSquashTorch",void 0),i([h],t)}(u.pzaBaseBody);e.pzaPlantBody=f,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameConfig":"pzaGameConfig","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaBaseBody":"pzaBaseBody"}],pzaPlantCard:[function(a,t,e){"use strict";cc._RF.push(t,"7c370pfHupJy6vC3j5aNppR","pzaPlantCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantCard=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaSpriteFrameManager"),u=a("../../Common/pzaUtil"),d=a("../../Common/pzaWorldEventManager"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardBoard=null,t.swIcon=null,t.cardBoardFrames=[],t.cardIcon=null,t.priceLabel=null,t.cdStaticMask=null,t.cdMask=null,t.selectTag=null,t.guideMask=null,t.lockNode=null,t.curPlantType=null,t.imitaterPlant=!1,t.plantConfigData=null,t.clickCall=null,t.clickCallZj=null,t.showGuideArrow=null,t.putPlantToBagCall=null,t.bagSelect=!1,t.curPlantPrice=0,t.plantIdx=0,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.node._touchListener.setSwallowTouches(!1),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.UPDATE_PLANT_PRICE,this.updatePlantPrice,this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.RESET_CARD_STATE,this.resetCardState,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.UPDATE_PLANT_PRICE,this.updatePlantPrice,this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.RESET_CARD_STATE,this.resetCardState,this)},t.prototype.resetCardState=function(){this.selectTag.active=!1},t.prototype.bagSelectPlant=function(a,t,e,o){void 0===e&&(e=!1),void 0===o&&(o=!1),this.bagSelect=!0,this.curPlantType=a,this.imitaterPlant=e,this.putPlantToBagCall=t,null!=this.curPlantType?(this.node.active=!0,this.cdStaticMask.active=!1,this.cdMask.node.active=!1,this.selectTag.active=!1,this.guideMask.active=!1,e&&(a=p.pzaGameState.curImitaterPlant),this.plantConfigData=l.pzaGameConfig.getPlantConfig(a),this.plantConfigData?(c.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),this.cardBoard.spriteFrame=e?this.cardBoardFrames[0]:this.cardBoardFrames[this.plantConfigData.rareLevel],this.priceLabel.node.active=!0,this.curPlantPrice=p.pzaGameState.getPlantPrice(a,!0),p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS&&l.pzaGameConfig.isAdvancePlant(a)?this.priceLabel.string=this.curPlantPrice+"+":this.priceLabel.string=""+this.curPlantPrice,u.pzaUtil.switchGraySprite(this.cardIcon,e),this.swIcon.active=!1,o&&this.lockNode&&(this.lockNode.active=!0)):console.error("\u65e0\u6b64\u690d\u7269\u914d\u7f6e",a)):this.node.active=!1},t.prototype.bindData=function(a,t,e,o){void 0===o&&(o=0),this.bagSelect=!1,this.curPlantType=a,this.clickCall=t,this.showGuideArrow=e,null!=a?(a==r.pzaPlantEnum.IMITATER&&(a=p.pzaGameState.curImitaterPlant,this.imitaterPlant=!0),this.node.active=!0,this.cdStaticMask.active=!1,this.cdMask.node.active=!1,this.selectTag.active=!1,this.guideMask.active=!1,this.plantConfigData=l.pzaGameConfig.getPlantConfig(a),c.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),this.imitaterPlant?this.cardBoard.spriteFrame=this.cardBoardFrames[0]:this.cardBoard.spriteFrame=this.cardBoardFrames[this.plantConfigData.rareLevel],this.priceLabel.node.active=!0,this.curPlantPrice=p.pzaGameState.getPlantPrice(a),p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS&&l.pzaGameConfig.isAdvancePlant(a),this.priceLabel.string=""+this.curPlantPrice,u.pzaUtil.switchGraySprite(this.cardIcon,!1),u.pzaUtil.switchGraySprite(this.cardIcon,this.imitaterPlant),this.plantIdx=o+1,this.swIcon.active=!1):this.node.active=!1},t.prototype.bindDataZj=function(a,t,e,o){void 0===o&&(o=0),this.bagSelect=!1,this.curPlantType=a,this.clickCallZj=t,this.showGuideArrow=e,null!=a&&(a==r.pzaPlantEnum.IMITATER&&(a=p.pzaGameState.curImitaterPlant,this.imitaterPlant=!0),this.node.active=!0,this.cdStaticMask.active=!1,this.cdMask.node.active=!1,this.selectTag.active=!1,this.guideMask.active=!1,this.plantConfigData=l.pzaGameConfig.getPlantConfig(a),c.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),this.imitaterPlant?this.cardBoard.spriteFrame=this.cardBoardFrames[2]:this.cardBoard.spriteFrame=this.cardBoardFrames[this.plantConfigData.rareLevel],this.priceLabel.node.active=!0,this.curPlantPrice=p.pzaGameState.getPlantPrice(a),p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS&&l.pzaGameConfig.isAdvancePlant(a),this.priceLabel.string=""+this.curPlantPrice,u.pzaUtil.switchGraySprite(this.cardIcon,!1),u.pzaUtil.switchGraySprite(this.cardIcon,this.imitaterPlant),this.plantIdx=o+1,this.swIcon.active=!1)},t.prototype.clickCard=function(){if(!(this.lockNode&&this.lockNode.active||null==this.curPlantType)){if(this.bagSelect)return this.putPlantToBagCall&&this.putPlantToBagCall(this),void s.pzaSoundManager.playSFX();var a=p.pzaGameState.selectPlant;this.clickCall&&this.clickCall(this.curPlantType),a==this.curPlantType&&(p.pzaGameState.selectCard=null,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null,p.pzaGameState.selectIdx=0,window.pzaMapManager.battleUpView.gameStartBtnAni())}},t.prototype.update=function(){if(null!=this.curPlantType&&!p.pzaGameState.gamePause){this.lockNode&&this.lockNode.active&&(this.lockNode.active=!1);var a=window.pzaplantManager.getPlantCD(this.curPlantType,this.plantIdx);if(a>0){this.selectTag.active=!1,this.cdStaticMask.active=!0,this.cdMask.node.active=!0;var t=this.plantConfigData.createCD;this.cdMask.fillRange=-a/t}else this.cdMask.node.active=!1,p.pzaGameState.sunLightCount>=this.curPlantPrice?(this.cdStaticMask.active=!1,this.refreshGuide()):this.cdStaticMask.active=!0}},t.prototype.select=function(){if(null!=this.curPlantType){if(window.pzaplantManager.getPlantCD(this.curPlantType,this.plantIdx)>0)return p.pzaGameState.selectCard=null,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null,d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.SELECT_CARD,null),void s.pzaSoundManager.playAudio("sunlack");if(this.curPlantPrice>p.pzaGameState.sunLightCount)return d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.LACK_SUN,null),s.pzaSoundManager.playAudio("sunlack"),p.pzaGameState.selectCard=null,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null,void d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.SELECT_CARD,null);p.pzaGameState.selectCard=p.pzaSelectCardType.SLOT_CARD,p.pzaGameState.selectPlant=this.curPlantType,p.pzaGameState.selectIdx=this.plantIdx,p.pzaGameState.cobCannon=null,this.selectTag.active=!0,this.refreshGuide(),s.pzaSoundManager.playAudio("selectPlant"),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.SELECT_CARD,null)}},t.prototype.diselect=function(){this.selectTag.active=!1},t.prototype.refreshGuide=function(){if(!this.imitaterPlant){var a=this.curPlantType==window.pzaGuideManager.guidePlant&&null==p.pzaGameState.selectPlant;a?this.guideMask.active||(this.guideMask.active=!0,this.guideMask.stopAllActions(),this.guideMask.opacity=0,this.guideMask.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(1,200),cc.fadeOut(.5)))),this.showGuideArrow&&this.showGuideArrow(cc.v2(this.node.x+63,this.node.y-100))):a||this.guideMask.active&&(this.guideMask.active=!1,this.showGuideArrow&&this.showGuideArrow(null))}},t.prototype.updatePrice=function(){this.curPlantPrice=p.pzaGameState.getPlantPrice(this.curPlantType),this.priceLabel.string=""+this.curPlantPrice},t.prototype.updatePlantPrice=function(a){p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS&&a==this.curPlantType&&l.pzaGameConfig.isAdvancePlant(a)&&(this.curPlantPrice=p.pzaGameState.getPlantPrice(a),this.priceLabel.string=""+this.curPlantPrice)},t.prototype.moveTo=function(a,t,e){null!=a&&this.node.runAction(cc.sequence(cc.moveTo(t,a),cc.callFunc(function(){e&&e()})))},i([f({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([f({displayName:"\u8bd5\u73a9\u89d2\u6807",type:cc.Node})],t.prototype,"swIcon",void 0),i([f({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([f({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([f({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],t.prototype,"priceLabel",void 0),i([f({displayName:"cd\u906e\u7f69\u9759\u6001",type:cc.Node})],t.prototype,"cdStaticMask",void 0),i([f({displayName:"cd\u906e\u7f69\u52a8\u6001",type:cc.Sprite})],t.prototype,"cdMask",void 0),i([f({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"selectTag",void 0),i([f({displayName:"\u5f15\u5bfc\u906e\u7f69",type:cc.Node})],t.prototype,"guideMask",void 0),i([f({displayName:"\u9501\u6807\u5fd7",type:cc.Node})],t.prototype,"lockNode",void 0),i([m],t)}(cc.Component);e.pzaPlantCard=z,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaPlantEnum:[function(a,t,e){"use strict";cc._RF.push(t,"a65bb2FjL9ESa64+zIqKD9N","pzaPlantEnum"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantEnvEnum=e.pzaPlantCate=e.pzaPlantEnum=void 0,function(a){a[a.PEA_SHOOTER=1]="PEA_SHOOTER",a[a.SUN_FLOWER=2]="SUN_FLOWER",a[a.CHERRY_BOMB=3]="CHERRY_BOMB",a[a.WALL_NUT=4]="WALL_NUT",a[a.POTATO_MINE=5]="POTATO_MINE",a[a.SNOW_PEA=6]="SNOW_PEA",a[a.CHOMPER=7]="CHOMPER",a[a.REPEATER=8]="REPEATER",a[a.PUFF_SHROOM=9]="PUFF_SHROOM",a[a.SUN_SHROOM=10]="SUN_SHROOM",a[a.FUME_SHROOM=11]="FUME_SHROOM",a[a.GRAVE_BUSTER=12]="GRAVE_BUSTER",a[a.HYPNO_SHROOM=13]="HYPNO_SHROOM",a[a.SCAREDY_SHROOM=14]="SCAREDY_SHROOM",a[a.ICE_SHROOM=15]="ICE_SHROOM",a[a.DOOM_SHROOM=16]="DOOM_SHROOM",a[a.LILY_PAD=17]="LILY_PAD",a[a.SQUASH=18]="SQUASH",a[a.THREE_PEATER=19]="THREE_PEATER",a[a.TANGLE_KELP=20]="TANGLE_KELP",a[a.JALAPENO=21]="JALAPENO",a[a.SPIKEWEED=22]="SPIKEWEED",a[a.TORCHWOOD=23]="TORCHWOOD",a[a.TALL_NUT=24]="TALL_NUT",a[a.SEA_SHROOM=25]="SEA_SHROOM",a[a.PLANTERN=26]="PLANTERN",a[a.CACTUS=27]="CACTUS",a[a.BLOVER=28]="BLOVER",a[a.SPLIT_PEA=29]="SPLIT_PEA",a[a.STAR_FRUIT=30]="STAR_FRUIT",a[a.PUMPKIN=31]="PUMPKIN",a[a.MAGNET_SHROOM=32]="MAGNET_SHROOM",a[a.CABBAGE_PULT=33]="CABBAGE_PULT",a[a.FLOWER_POT=34]="FLOWER_POT",a[a.KERNEL_PULT=35]="KERNEL_PULT",a[a.COFFEE_BEAN=36]="COFFEE_BEAN",a[a.GARLIC=37]="GARLIC",a[a.UMBRELLA_LEAF=38]="UMBRELLA_LEAF",a[a.MARIGOLD=39]="MARIGOLD",a[a.MELON_PULT=40]="MELON_PULT",a[a.GATLING_PEA=41]="GATLING_PEA",a[a.TWIN_SUNFLOWER=42]="TWIN_SUNFLOWER",a[a.GLOOM_SHROOM=43]="GLOOM_SHROOM",a[a.CATTAIL=44]="CATTAIL",a[a.WINTER_MELON=45]="WINTER_MELON",a[a.GOLD_MAGNET=46]="GOLD_MAGNET",a[a.SPIKEROCK=47]="SPIKEROCK",a[a.COB_CANNON=48]="COB_CANNON",a[a.IMITATER=49]="IMITATER",a[a.SUPER_CHOMPER=51]="SUPER_CHOMPER",a[a.BOOM_NUT=52]="BOOM_NUT",a[a.CAIWEN=53]="CAIWEN",a[a.LaserBean=54]="LaserBean",a[a.FireBlover=55]="FireBlover",a[a.WALL_NUT_BOWLING=1e3]="WALL_NUT_BOWLING",a[a.BOOM_NUT_BOWLING=1001]="BOOM_NUT_BOWLING",a[a.TALL_NUT_BOWLING=1002]="TALL_NUT_BOWLING",a[a.TORCH_NUT_BOWLING=1003]="TORCH_NUT_BOWLING",a[a.ICE_NUT_BOWLING=1004]="ICE_NUT_BOWLING",a[a.JALAPENO_NUT_BOWLING=1005]="JALAPENO_NUT_BOWLING",a[a.PeaSun=101]="PeaSun",a[a.SunMine=105]="SunMine",a[a.SunBomb=103]="SunBomb",a[a.ICE_NUT=175]="ICE_NUT",a[a.ReCactus=108]="ReCactus",a[a.PUFF_SHROOM_PULT=198]="PUFF_SHROOM_PULT",a[a.SunFlowerPlus=110]="SunFlowerPlus",a[a.MELONFUME_SHROOM=199]="MELONFUME_SHROOM",a[a.MINE_BUSTER=112]="MINE_BUSTER",a[a.SNOWICE_SHROOM=115]="SNOWICE_SHROOM",a[a.PEALILY_PAD=117]="PEALILY_PAD",a[a.PEATANGLE_KELP=200]="PEATANGLE_KELP",a[a.IceSquash=118]="IceSquash",a[a.CherryJalapeno=121]="CherryJalapeno",a[a.ButterSpike=122]="ButterSpike",a[a.ICESEA_SHROOM=195]="ICESEA_SHROOM",a[a.SIX_PLANTERN=126]="SIX_PLANTERN",a[a.PEA_CATTAIL=151]="PEA_CATTAIL",a[a.MagnetNut=132]="MagnetNut",a[a.THREE_KERNEL_PULT=135]="THREE_KERNEL_PULT",a[a.SunPot=134]="SunPot",a[a.COFFEE_Umbrella=138]="COFFEE_Umbrella",a[a.CORN_MORTAR=201]="CORN_MORTAR",a[a.PUMPKIN_CANNON=202]="PUMPKIN_CANNON",a[a.SunShroomShooter=145]="SunShroomShooter",a[a.ZombieNut=163]="ZombieNut",a[a.SquashNut=174]="SquashNut",a[a.ZOMBIE_SUNFLOWER=203]="ZOMBIE_SUNFLOWER",a[a.ICESUN_SHROOM=180]="ICESUN_SHROOM",a[a.MelonNut=140]="MelonNut",a[a.ZOMBIE_PEASHOOT=154]="ZOMBIE_PEASHOOT",a[a.FireMine=149]="FireMine",a[a.TALL_NUT_LEAF=204]="TALL_NUT_LEAF",a[a.SpikeChomper=191]="SpikeChomper",a[a.PumpkinPurpleFire=153]="PumpkinPurpleFire",a[a.GATLING_CABBAGE_PULT=133]="GATLING_CABBAGE_PULT",a[a.CatcusFlower=139]="CatcusFlower",a[a.STAR_MINE=170]="STAR_MINE",a[a.PEA_BOMB=205]="PEA_BOMB",a[a.CATLITTERPOT=166]="CATLITTERPOT",a[a.SEA_PEA=206]="SEA_PEA",a[a.LILY_SHELL=196]="LILY_SHELL",a[a.ICEWOOD=123]="ICEWOOD",a[a.FireNut=150]="FireNut",a[a.LILY_FLOWERPOT=207]="LILY_FLOWERPOT",a[a.SEAFUME_SHROOM=208]="SEAFUME_SHROOM",a[a.REDHYPNO_SHROOM=113]="REDHYPNO_SHROOM",a[a.TANGLE_DOOM=120]="TANGLE_DOOM",a[a.QQFUME_SHROOM=168]="QQFUME_SHROOM",a[a.CatSun=197]="CatSun",a[a.TreasureBuster=177]="TreasureBuster",a[a.HoleNut=167]="HoleNut",a[a.VipNut=162]="VipNut",a[a.HeighIceNut=124]="HeighIceNut",a[a.PumpkinPurple=131]="PumpkinPurple",a[a.TorchNut=104]="TorchNut",a[a.IceCat=152]="IceCat",a[a.HamburgShooter=141]="HamburgShooter",a[a.HotDog=156]="HotDog",a[a.ShiftNut=173]="ShiftNut",a[a.DoomCannon=148]="DoomCannon",a[a.SunBean=102]="SunBean",a[a.SquashKing=158]="SquashKing",a[a.ButterJoker=159]="ButterJoker",a[a.GarlicJalapeno=161]="GarlicJalapeno",a[a.IceBlover=155]="IceBlover",a[a.PeaCannon=127]="PeaCannon",a[a.ButterGloomShroom=143]="ButterGloomShroom",a[a.RandomPlantBox=136]="RandomPlantBox",a[a.ZFRandomPlantBox=215]="ZFRandomPlantBox",a[a.PeaPool=119]="PeaPool",a[a.SpikeRockNut=147]="SpikeRockNut",a[a.SunQueen=160]="SunQueen",a[a.WildPea=183]="WildPea",a[a.CupidShooter=164]="CupidShooter",a[a.ICEFUME_SHROOM=111]="ICEFUME_SHROOM",a[a.IceSpike=169]="IceSpike",a[a.MarigoldMammon=165]="MarigoldMammon",a[a.IceCat2=106]="IceCat2",a[a.HoloCards=178]="HoloCards",a[a.Mallet=182]="Mallet",a[a.XXLCandy=194]="XXLCandy",a[a.GARLIC_CHOMPER=107]="GARLIC_CHOMPER",a[a.HYPNO_GARLIC=137]="HYPNO_GARLIC",a[a.FLOWERPOT_SHROOM=109]="FLOWERPOT_SHROOM",a[a.CatcusBlover=128]="CatcusBlover",a[a.NUT_MONEY_JAR=209]="NUT_MONEY_JAR",a[a.GIFT_MACHINE=210]="GIFT_MACHINE",a[a.GOLD_MAGNET_SHOOTER=211]="GOLD_MAGNET_SHOOTER",a[a.LUCKY_CATTAIL=212]="LUCKY_CATTAIL",a[a.DIAMOND_SEEDS=213]="DIAMOND_SEEDS",a[a.DIAMOND_SNAIL=214]="DIAMOND_SNAIL",a[a.LUCK_WINDMILL=186]="LUCK_WINDMILL",a[a.SUPER_PITAYA=216]="SUPER_PITAYA",a[a.SQUASH_TORCH=217]="SQUASH_TORCH",a[a.SNOWDRAGON_SHOOTER=218]="SNOWDRAGON_SHOOTER",a[a.FireGloomShroom=242]="FireGloomShroom",a[a.SQUASH_JALAPENO=243]="SQUASH_JALAPENO",a[a.ZOMBIE_CARD=1234]="ZOMBIE_CARD"}(e.pzaPlantEnum||(e.pzaPlantEnum={})),function(a){a[a.Null=0]="Null",a[a.Nut=1]="Nut",a[a.Spike=2]="Spike",a[a.Gargantuar=3]="Gargantuar",a[a.Mine=4]="Mine"}(e.pzaPlantCate||(e.pzaPlantCate={})),function(a){a[a.NORMAL=0]="NORMAL",a[a.SOIL=1]="SOIL",a[a.TOMB=2]="TOMB",a[a.POND=3]="POND",a[a.GRASS=4]="GRASS",a[a.ROOFBLANK=5]="ROOFBLANK",a[a.SHROOM=6]="SHROOM",a[a.BOTH=9]="BOTH",a[a.HOLE=11]="HOLE",a[a.ENV13=13]="ENV13",a[a.ENV14=14]="ENV14",a[a.WithRoof=15]="WithRoof",a[a.ENV20=20]="ENV20"}(e.pzaPlantEnvEnum||(e.pzaPlantEnvEnum={})),cc._RF.pop()},{}],pzaPlantHandbookView:[function(a,t,e){"use strict";cc._RF.push(t,"e34a1VvNv1H9J5Da8DtogW6","pzaPlantHandbookView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantHandbookView=void 0;var r=a("../Battle/Data/pzaPlantEnum"),p=a("../Battle/Plant/pzaBasePlant"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaGameConfig"),c=a("../Common/pzaSoundManager"),u=a("../Load/pzaBundleObjectPool"),d=a("../Load/pzaPreLoadManager"),h=a("./pzaHandbookCard"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardPrefab=null,t.cardContent=null,t.plantName=null,t.plantDesc=null,t.plantProp=null,t.special=null,t.bg1=null,t.bg2=null,t.plantCD=null,t.sunPrice=null,t.txtScroll=null,t.zjTxtScroll=null,t.plantAniBg=null,t.plantAniBgFrame=[],t.plantAniNode=null,t.shadow=null,t.cardScroll=null,t.zjProp=null,t.zjPower=null,t.zjArea=null,t.zjSpecial=null,t.zjDeathWord=null,t.zjDesc=null,t.zjCdSpeed=null,t.zjCost=null,t.title=null,t.handbookCardArr=[],t.curPlant=null,t.plantCardList=null,t.plantAni=null,t.closeCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.plantCardList=[];for(var a=r.pzaPlantEnum.PEA_SHOOTER;a<=r.pzaPlantEnum.IMITATER;a++)(t=l.pzaGameCommonPool.requestInstant(this.cardPrefab)).setParent(this.cardContent),null!=(e=t.getComponent(h.pzaHandbookCard))&&(e.bindData(a,this.showPlant.bind(this)),this.plantCardList.push(e));for(a=r.pzaPlantEnum.SUPER_CHOMPER;a<=r.pzaPlantEnum.FireBlover;a++){var t,e;(t=l.pzaGameCommonPool.requestInstant(this.cardPrefab)).setParent(this.cardContent),(e=t.getComponent(h.pzaHandbookCard)).bindData(a,this.showPlant.bind(this)),this.plantCardList.push(e)}this.txtScroll.node.active=!0,this.zjTxtScroll.node.active=!1,this.curPlant=null,this.showPlant(r.pzaPlantEnum.PEA_SHOOTER),this.cardScroll.scrollToTop(),this.title.string="\u7ecf\u5178\u7248-\u690d\u7269"},t.prototype.onDisable=function(){null!=this.plantCardList&&this.plantCardList.forEach(function(a){a&&a.close()}),this.plantCardList=null,null!=this.plantAni&&(this.plantAni.close(),this.plantAni=null)},t.prototype.bindCloseCall=function(a){this.closeCall=a},t.prototype.showPlant=function(a){var t=this;if(this.curPlant!=a){this.curPlant=a;var e=s.pzaGameConfig.getPlantConfig(a),o=s.pzaGameConfig.PlantBookMap.get(a);if(null!=e&&null!=o){this.plantName.string=e.name,this.plantDesc.node.active=null!=o.desc,null!=o.desc&&(this.plantDesc.string=o.desc),this.plantProp.node.active=null!=o.prop,null!=o.prop&&(this.plantProp.string=o.prop),this.special.node.active=null!=o.special,null!=o.special&&(this.special.string=o.special),this.bg1.node.active=null!=o.bg1,null!=o.bg1&&(this.bg1.string=o.bg1),this.bg2.node.active=null!=o.bg2,null!=o.bg2&&(this.bg2.string=o.bg2),this.plantCD.node.active=null!=o.cd,null!=o.cd&&(this.plantCD.string=o.cd),a==r.pzaPlantEnum.IMITATER?this.sunPrice.string="":this.sunPrice.string="<color=#aa582b>\u6d88\u8017\u80fd\u91cf\uff1a</c><color=#e6300d>"+e.price+"</color>",this.txtScroll.scrollToTop(),a==r.pzaPlantEnum.LILY_PAD||a==r.pzaPlantEnum.TANGLE_KELP||a==r.pzaPlantEnum.CATTAIL?this.plantAniBg.spriteFrame=this.plantAniBgFrame[2]:a==r.pzaPlantEnum.SEA_SHROOM?this.plantAniBg.spriteFrame=this.plantAniBgFrame[3]:a==r.pzaPlantEnum.FLOWER_POT?this.plantAniBg.spriteFrame=this.plantAniBgFrame[4]:e.isNight||a==r.pzaPlantEnum.GRAVE_BUSTER||a==r.pzaPlantEnum.PLANTERN?this.plantAniBg.spriteFrame=this.plantAniBgFrame[1]:this.plantAniBg.spriteFrame=this.plantAniBgFrame[0],this.shadow.active=!1,null!=this.plantAni&&(this.plantAni.close(),this.plantAni=null);var n=d.pzaPreLoadManager.getPlantUrl(a);u.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(e,o){null==e&&null!=o?(o.setParent(t.plantAniNode),o.zIndex=0,a==r.pzaPlantEnum.COB_CANNON?o.setPosition(cc.v2(-60,0)):o.setPosition(cc.v2()),null!=t.plantAni&&t.plantAni.close(),t.plantAni=o.getComponent(p.pzaBasePlant),null!=t.plantAni&&(t.plantAni.uiShow(),t.plantAni.needShadow&&(t.shadow.active=!0,t.shadow.setPosition(cc.v2(t.plantAni.shadowOffset.x,t.plantAni.shadowOffset.y)),t.shadow.setScale(t.plantAni.shadowScale)))):console.error(e)})}}},t.prototype.clickBack=function(){c.pzaSoundManager.playSFX(),this.close()},t.prototype.clickClose=function(){c.pzaSoundManager.playSFX(),this.close(),this.closeCall&&this.closeCall()},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([z({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cardPrefab",void 0),i([z({displayName:"\u5361\u7247\u5bb9\u5668",type:cc.Node})],t.prototype,"cardContent",void 0),i([z({displayName:"\u690d\u7269\u540d\u79f0",type:cc.Label})],t.prototype,"plantName",void 0),i([z({displayName:"\u690d\u7269\u4ecb\u7ecd",type:cc.Label})],t.prototype,"plantDesc",void 0),i([z({displayName:"\u690d\u7269\u5c5e\u6027",type:cc.RichText})],t.prototype,"plantProp",void 0),i([z({displayName:"\u7279\u6b8a",type:cc.RichText})],t.prototype,"special",void 0),i([z({displayName:"\u80cc\u666f\u63cf\u8ff01",type:cc.Label})],t.prototype,"bg1",void 0),i([z({displayName:"\u80cc\u666f\u63cf\u8ff02",type:cc.Label})],t.prototype,"bg2",void 0),i([z({displayName:"\u6062\u590d\u65f6\u95f4",type:cc.RichText})],t.prototype,"plantCD",void 0),i([z({displayName:"\u6d88\u8017\u9633\u5149",type:cc.RichText})],t.prototype,"sunPrice",void 0),i([z({displayName:"\u6587\u672cScroll",type:cc.ScrollView})],t.prototype,"txtScroll",void 0),i([z({displayName:"\u6742\u4ea4\u6587\u672cscroll",type:cc.ScrollView})],t.prototype,"zjTxtScroll",void 0),i([z({displayName:"\u690d\u7269\u52a8\u753b\u80cc\u666f\u56fe",type:cc.Sprite})],t.prototype,"plantAniBg",void 0),i([z({displayName:"\u690d\u7269\u52a8\u753b\u80cc\u666f\u56fe\u96c6",type:[cc.SpriteFrame]})],t.prototype,"plantAniBgFrame",void 0),i([z({displayName:"\u690d\u7269\u52a8\u753b\u8282\u70b9",type:cc.Node})],t.prototype,"plantAniNode",void 0),i([z({displayName:"\u690d\u7269\u5f71\u5b50",type:cc.Node})],t.prototype,"shadow",void 0),i([z({displayName:"\u5361\u7247Scroll",type:cc.ScrollView})],t.prototype,"cardScroll",void 0),i([z({displayName:"\u6742\u4ea4\u690d\u7269\u5c5e\u6027",type:cc.Label})],t.prototype,"zjProp",void 0),i([z({displayName:"\u6742\u4ea4\u690d\u7269\u5a01\u529b",type:cc.RichText})],t.prototype,"zjPower",void 0),i([z({displayName:"\u6742\u4ea4\u690d\u7269\u8303\u56f4",type:cc.RichText})],t.prototype,"zjArea",void 0),i([z({displayName:"\u6742\u4ea4\u690d\u7269\u7279\u70b9",type:cc.RichText})],t.prototype,"zjSpecial",void 0),i([z({displayName:"\u6742\u4ea4\u690d\u7269\u4ea1\u8bed",type:cc.RichText})],t.prototype,"zjDeathWord",void 0),i([z({displayName:"\u6742\u4ea4\u690d\u7269\u4ecb\u7ecd",type:cc.Label})],t.prototype,"zjDesc",void 0),i([z({displayName:"\u6742\u4ea4\u690d\u7269\u51b7\u5374\u901f\u5ea6",type:cc.RichText})],t.prototype,"zjCdSpeed",void 0),i([z({displayName:"\u6742\u4ea4\u690d\u7269\u6d88\u8017",type:cc.RichText})],t.prototype,"zjCost",void 0),i([z({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"title",void 0),i([f],t)}(cc.Component);e.pzaPlantHandbookView=y,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Plant/pzaBasePlant":"pzaBasePlant","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaHandbookCard":"pzaHandbookCard"}],pzaPlantManager:[function(a,t,e){"use strict";cc._RF.push(t,"43616PuMRlF4ooGSkXeY6Ka","pzaPlantManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantManager=void 0;var r=a("../Achieve/pzaAchieve"),p=a("../Achieve/pzaAchieveMgr"),l=a("../Common/pzaBaseComponent"),s=a("../Common/pzaGameConfig"),c=a("../Common/pzaGameManager"),u=a("../Common/pzaGamePartConfig"),d=a("../Common/pzaGameSurEndless"),h=a("../Common/pzaGameSurvival"),m=a("../Common/pzaLocalData"),f=a("../Common/pzaMapManager"),z=a("../Common/pzaNodeManager"),y=a("../Common/pzaSoundManager"),g=a("../Common/pzaTipManager"),b=a("../Common/pzaUtil"),v=a("../Common/pzaWorldEventManager"),P=a("../Common/pzaZJPlantConf"),D=a("../Load/pzaBundleObjectPool"),S=a("../Load/pzaPreLoadManager"),C=a("../View/pzaBubbleItem"),_=a("./Data/pzaBaseData"),E=a("./Data/pzaGuideType"),M=a("./Data/pzaPlantEnum"),w=a("./Plant/pzaAttackType"),T=a("./Plant/pzaFlowerPotShadow"),B=a("./Plant/pzaJalapeno"),A=a("./Plant/pzaStarFruitShadow"),O=a("./Plant/pzaSunMine"),I=a("./pzaBrain"),N=a("./pzaEffectManager"),G=a("./pzaGameState"),R=a("./pzaJar"),L=a("./pzaSunLight"),k=cc._decorator,Z=k.ccclass,U=(k.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.plantDataMap=new Map,t.plantEnvDataMap=new Map,t.pumpkinDataMap=new Map,t.holeMap=new Map,t.notTargetMap=new Map,t.plantMap=new Map,t.fireSquashMap=new Map,t.plantCdMap=new Map,t.AllSunLight=new Set,t.pzaJarMap=new Map,t.dropPlantCards=new Set,t.dropZombieCards=new Set,t.brainMap=new Map,t.curSelectPlants=null,t.starFruitMap=new Map,t.flowerPotShadowMap=new Map,t.sunAutoCount=0,t.sunAutoCD=0,t.twoBlockPlantMap=new Set([M.pzaPlantEnum.COB_CANNON,M.pzaPlantEnum.HotDog,M.pzaPlantEnum.DoomCannon,M.pzaPlantEnum.PeaCannon]),t.flowerPotPart=[8,12],t.idxArr=[2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3,13e3,14e3,15e3,16e3,17e3,18e3,19e3,2e4,21e3],t}return n(t,a),t.prototype.onLoad=function(){window.pzaplantManager=this},t.prototype.init=function(){this.plantDataMap.clear(),this.plantEnvDataMap.clear(),this.pumpkinDataMap.clear(),this.holeMap.clear(),this.notTargetMap.clear(),this.plantMap.clear(),this.fireSquashMap.clear(),this.AllSunLight.clear(),this.pzaJarMap.clear(),this.dropPlantCards.clear(),this.dropZombieCards.clear(),this.brainMap.clear(),this.sunAutoCount=0,this.randomAutoSunCD(),this.starFruitMap.clear(),this.flowerPotShadowMap.clear()},t.prototype.logicUpdate=function(a){var t=this,e=[];this.plantCdMap.forEach(function(o,n){o-=a*(1+G.pzaGameState.cdReduceValue),t.plantCdMap.set(n,o),o<=0&&e.push(n)}),e.forEach(function(a){t.plantCdMap.delete(a)}),G.pzaGameState.guideSunPause||(this.sunAutoCD-=a,this.sunAutoCD<=0&&this.autoCreateSun())},t.prototype.randomAutoSunCD=function(){if(1!=G.pzaGameState.curChapter||1!=G.pzaGameState.curPart&&2!=G.pzaGameState.curPart)if(this.sunAutoCount<=0)this.sunAutoCD=b.pzaUtil.getRandomFloatNum(6.25,9);else{var a=b.pzaUtil.getRandomFloatNum(4.25,7)+.1*this.sunAutoCount;this.sunAutoCD=Math.min(a,9.5)}else this.sunAutoCD=6.25},t.prototype.autoCreateSun=function(){var a=this;if(!G.pzaGameState.gameWin&&!G.pzaGameState.isNightScene){var t=c.pzaGameManager.getCurrentGame();if(t&&t.isAutoCreateSun()&&!(G.pzaGameState.gameMode==G.pzaGameMode.SURVIVAL&&c.pzaGameManager.getGame(G.pzaGameMode.SURVIVAL,h.pzaGameSurvival).getSurvivalSunState()||G.pzaGameState.gameMode==G.pzaGameMode.SUR_ENDLESS&&c.pzaGameManager.getGame(G.pzaGameMode.SUR_ENDLESS,d.pzaGameSurEndless).getSurvivalSunState())){var e=z.pzaNodeManager.getUpBgNode();if(null!=e){this.randomAutoSunCD(),this.sunAutoCount++;var o=s.pzaGameConfig.getRandomSunPos();t.autoSunCreate?t.autoSunCreate(o):(D.pzaBundleObjectPool.requestInstantByUrl2(S.pzaResourceUrl.SUN,function(t,n){if(null==t&&null!=n){n.setParent(e);var i=n.getComponent(L.pzaSunLight);i&&i.init(o,!0,!0),a.AllSunLight.add(i)}else console.error(t)}),window.pzaGuideManager.guideType==E.pzaGuideType.GUIDE_PLANT_1_1&&2==window.pzaGuideManager.guideStep&&window.pzaGuideManager.guideStepNext())}}}},t.prototype.plantCreateSun2=function(a,t,e){var o=this;void 0===e&&(e=0);var n=z.pzaNodeManager.getUpBgNode();null!=n&&null!=a&&D.pzaBundleObjectPool.requestInstantByUrl2(S.pzaResourceUrl.SUN,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(L.pzaSunLight);p&&p.init2(a,t,e,!1),e&&p&&(p.sunValue=e),o.AllSunLight.add(p)}else console.error(i)})},t.prototype.plantCreateSun=function(a,t,e,o){var n=this;void 0===e&&(e=!1),void 0===o&&(o=0);var i=z.pzaNodeManager.getUpBgNode();null!=i&&null!=a&&D.pzaBundleObjectPool.requestInstantByUrl2(S.pzaResourceUrl.SUN,function(r,p){if(null==r&&null!=p){p.setParent(i);var l=p.getComponent(L.pzaSunLight);l&&l.init(a,!1,t,e),o&&l&&(l.sunValue=o),n.AllSunLight.add(l)}else console.error(r)})},t.prototype.adCreateSun=function(){var a=z.pzaNodeManager.getBattleUINode();if(null!=a){G.pzaGameState.sunLightCount+=500,G.pzaGameState.pickCoinCount+=500,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_10,G.pzaGameState.pickCoinCount),m.pzaLocalData.bpGetSun(500);for(var t=[cc.v2(-120,265),cc.v2(-40,336),cc.v2(70,350),cc.v2(180,336),cc.v2(260,265)],e=function(e){D.pzaBundleObjectPool.requestInstantByUrl2(S.pzaResourceUrl.SUN,function(o,n){if(null==o&&null!=n){n.setParent(a);var i=n.getComponent(L.pzaSunLight);i&&i.initAdSun(cc.v2(70,150),t[e])}else console.error(o)})},o=0;o<5;o++)e(o)}},t.prototype.initFlowerPot=function(){var a;if(!(null==(a=G.pzaGameState.isSurvival()?G.pzaGameState.survivalConfig:u.pzaGamePartConfig.getPartConfig(G.pzaGameState.curChapter,G.pzaGameState.curPart))||a.flowerPotColumn<=0))for(var t=G.pzaGameState.map.getMapRow(),e=0;e<a.flowerPotColumn;e++)for(var o=0;o<t;o++)this.createPlant(M.pzaPlantEnum.FLOWER_POT,e,o,!0)},t.prototype.initPlant=function(a,t){for(var e=G.pzaGameState.map.getMapRow(),o=0;o<e;o++)this.createPlant(a,t,o,!0)},t.prototype.initSimulatePlant=function(a){var t=this;if(null!=a){var e=function(a){if(null!=a){var e=a.plantData.plantType,o=z.pzaNodeManager.getPlantZombieNode();if(s.pzaPlantConfigData.isLilyPad(e,!0)&&(o=z.pzaNodeManager.getDownEffectNode()),null!=o){var n=S.pzaPreLoadManager.getPlantUrl(e);D.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(e,n){if(null==e&&null!=n){n.setParent(o),n.setPosition(a.logicPos);var i=n.getComponent(l.pzaBaseComponent);i&&i.bindData(a),t.plantMap.set(a,i),i.pauseSelf()}else console.error(e)})}}};a.forEach(function(a){if(null!=a&&null!=a.type){var o=t.createPlantData(a.type);o.xIndex=a.x,o.yIndex=a.y;var n=G.pzaGameState.map.getXInterval(o.xIndex)/2,i=G.pzaGameState.map.getYInterval(o.yIndex)/3;G.pzaGameState.isRoofMode()&&(i=G.pzaGameState.map.getYInterval(o.yIndex)/6);var r=G.pzaGameState.map.getBlockLogicPos(o.xIndex,o.yIndex,n,i);o.logicPos=r;var p=""+o.xIndex+o.yIndex;t.plantDataMap.set(p,o),e(o)}})}},t.prototype.initBrain=function(){var a=this,t=G.pzaGameState.map.getMapRow(),e=z.pzaNodeManager.getPlantZombieNode();if(null!=e)for(var o=function(t){D.pzaBundleObjectPool.requestInstantByUrl(S.pzaResourceUrl.BRAIN,!1,function(o,n){if(null==o&&null!=n){n.setParent(e);var i=new _.pzaBaseData(null,null,!0);i.maxHp=i.hp=500,i.yIndex=t;var r=n.getComponent(I.pzaBrain);r&&r.bindData(i),a.brainMap.set(i,r)}else console.error(o)})},n=0;n<t;n++)o(n)},t.prototype.blinkBrain=function(a){this.brainMap.forEach(function(t){t&&t.blink(a)})},t.prototype.hasBrain=function(a){var t=!1;return this.brainMap.forEach(function(e,o){null!=o&&o.yIndex==a&&(t=!0)}),t},t.prototype.createPlant=function(a,t,e,o,n,i){var r=this;if(void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===i&&(i=!0),s.pzaPlantConfigData.isBowling(a))this.createBowlingNut(a,t,e);else{a!=M.pzaPlantEnum.WALL_NUT&&a!=M.pzaPlantEnum.TALL_NUT||!m.pzaLocalData.hasNutHealing()||this.removeNormalPlant(t,e),a==M.pzaPlantEnum.PUMPKIN&&m.pzaLocalData.hasNutHealing()&&this.removePumpkin(t,e);var p=null;if(a==M.pzaPlantEnum.GATLING_PEA||a==M.pzaPlantEnum.TWIN_SUNFLOWER||a==M.pzaPlantEnum.GLOOM_SHROOM||a==M.pzaPlantEnum.WINTER_MELON||a==M.pzaPlantEnum.GOLD_MAGNET||a==M.pzaPlantEnum.SPIKEROCK||a==M.pzaPlantEnum.SUPER_CHOMPER){var c=""+t+e;p=this.plantDataMap.get(c),this.removeNormalPlant(t,e)}if(a==M.pzaPlantEnum.CATTAIL&&this.removeEnvPlant(t,e),s.pzaPlantConfigData.isPotRecoverPlant(a)){var u=""+t+e,d=window.pzaplantManager.plantEnvDataMap.get(u);if(d){if(d.plantData.plantType==a)return;s.pzaPlantConfigData.isPotRecoverPlant(d.plantData.plantType)&&d.plantData.plantType!=a&&this.removeEnvPlant(t,e)}}if(a==M.pzaPlantEnum.COB_CANNON){this.removeNormalPlant(t,e);var h=""+(t+1)+e,f=this.pumpkinDataMap.get(h),y=this.plantDataMap.get(h);t<8&&null==f&&null!=y&&null!=y.plantData&&y.plantData.plantType==M.pzaPlantEnum.KERNEL_PULT?this.removeNormalPlant(t+1,e):(this.removeNormalPlant(t-1,e),t-=1)}else this.twoBlockPlantMap.has(a)&&(t=this.twoBlockPlantIndexCheck(t,e));var g=s.pzaGameConfig.getPlantConfig(a);if(null!=g&&null!=a){var b=this.createPlantData(a);b.xIndex=t,b.yIndex=e,null!=p&&(b.plantData.sleeping=p.plantData.sleeping);var P=z.pzaNodeManager.getPlantZombieNode();if(s.pzaPlantConfigData.isLilyPad(a,!0)&&(P=z.pzaNodeManager.getDownEffectNode()),null!=P){var C=G.pzaGameState.map.getXInterval(t)/2,_=G.pzaGameState.map.getYInterval(e)/3;G.pzaGameState.isRoofMode()&&(_=G.pzaGameState.map.getYInterval(e)/6);var w=G.pzaGameState.map.getBlockLogicPos(t,e,C,_);b.logicPos=w;var T=""+t+e;if(a==M.pzaPlantEnum.IMITATER){var B=G.pzaGameState.curImitaterPlant;B!=M.pzaPlantEnum.WALL_NUT&&B!=M.pzaPlantEnum.TALL_NUT||!m.pzaLocalData.hasNutHealing()||this.removeNormalPlant(t,e),B==M.pzaPlantEnum.PUMPKIN&&m.pzaLocalData.hasNutHealing()&&this.removePumpkin(t,e),s.pzaPlantConfigData.isEnvPlant(B)?this.plantEnvDataMap.set(T,b):s.pzaPlantConfigData.isPumPkin(B)?this.pumpkinDataMap.set(T,b):B==M.pzaPlantEnum.COFFEE_BEAN||this.notTargetMap.has(T)||this.plantDataMap.set(T,b)}else if(s.pzaPlantConfigData.isEnvPlant(a))this.plantEnvDataMap.set(T,b);else if(s.pzaPlantConfigData.isPumPkin(a))this.pumpkinDataMap.set(T,b);else if(a==M.pzaPlantEnum.COFFEE_BEAN);else if(this.plantDataMap.set(T,b),this.twoBlockPlantMap.has(a)){b.secondXIndex=t+1,b.secondYIndex=e;var A=""+(t+1)+e;this.plantDataMap.set(A,b)}var O=S.pzaPreLoadManager.getPlantUrl(a);if(D.pzaBundleObjectPool.requestInstantByUrl(O,!1,function(t,e){if(null==t&&null!=e){if(console.log("**\u5f53\u524d\u690d\u7269\u79cd\u690d\u5e8f\u53f7**: ",a),e.setParent(P),s.pzaPlantConfigData.isBuster(a)){var n=window.pzaMapManager.TombMap.get(T);null!=n&&n.smallTomb?w.y+=50:w.y+=70}e.setPosition(w);var i=e.getComponent(l.pzaBaseComponent);i&&i.bindData(b),r.plantMap.set(b,i),o&&a==M.pzaPlantEnum.FLOWER_POT&&i&&i.pauseSelf()}else console.error(t)}),!o){if(G.pzaGameState.isWatchStarMode()&&this.starFruitMap.get(T)&&a==M.pzaPlantEnum.STAR_FRUIT)N.pzaEffectManager.createStarFruitEffect(b.logicPos);else{var I=window.pzaMapManager.getPlantBlockType(b.xIndex,b.yIndex);N.pzaEffectManager.createPlantEffect(b.logicPos,I,null)}if(G.pzaGameState.selectCard==G.pzaSelectCardType.DROP_CARD){var R=null;return this.dropPlantCards.forEach(function(a){a&&a.plant()&&(R=a)}),void this.dropPlantCards.delete(R)}if(a==M.pzaPlantEnum.IMITATER&&(g=s.pzaGameConfig.getPlantConfig(G.pzaGameState.curImitaterPlant)),null!=g&&g.createCD>0&&this.plantCdMap.set(a+this.idxArr[G.pzaGameState.selectIdx],g.createCD),i&&(G.pzaGameState.sunLightCount-=G.pzaGameState.getPlantPrice(a)),G.pzaGameState.addPlant(a),v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.UPDATE_PLANT_PRICE,a),window.pzaGuideManager.guideType==E.pzaGuideType.GUIDE_PLANT_1_1&&(1==window.pzaGuideManager.guideStep?window.pzaGuideManager.guideStepNext():window.pzaGuideManager.guideStep<7&&window.pzaGuideManager.guideStepTo(7)),window.pzaGuideManager.guideType==E.pzaGuideType.GUIDE_NEW_PLANT_1_2){G.pzaGameState.guideZombiePause=!1;var L=this.getPlantCount(M.pzaPlantEnum.SUN_FLOWER);!window.pzaGuideManager.triggerExtraGuide&&L>=2&&window.pzaGuideManager.guideShowNeedMoreSun(),L>=3&&(window.pzaGuideManager.guidePlant=null,window.pzazombieManager.wave<=0&&(window.pzazombieManager.nextWaveTime=0))}}}}}},t.prototype.conTryPlantCount=function(){G.pzaGameState.isEndLess()?m.pzaLocalData.data.tryPlantCountArrayEndLess[G.pzaGameState.curTryPlantIndex]--:(m.pzaLocalData.data.tryPlantCountArrayNormal[G.pzaGameState.curTryPlantIndex]--,m.pzaLocalData.addDirty("tryPlantCountArrayNormal")),G.pzaGameState.curTryPlantIndex=null},t.prototype.createAdPlant=function(a,t,e){var o=this;if(this.conTryPlantCount(),s.pzaPlantConfigData.isBowling(a))this.createBowlingNut(a,t,e,!0);else{a==M.pzaPlantEnum.CATTAIL&&(G.pzaGameState.usePondPlant=!0);var n=null;if(a==M.pzaPlantEnum.GATLING_PEA||a==M.pzaPlantEnum.TWIN_SUNFLOWER||a==M.pzaPlantEnum.GLOOM_SHROOM||a==M.pzaPlantEnum.WINTER_MELON||a==M.pzaPlantEnum.GOLD_MAGNET||a==M.pzaPlantEnum.SPIKEROCK){var i=""+t+e;n=this.plantDataMap.get(i),this.removeNormalPlant(t,e)}if(a==M.pzaPlantEnum.CATTAIL&&this.removeEnvPlant(t,e),a==M.pzaPlantEnum.COB_CANNON){var r=""+t+e;if(this.plantDataMap.get(r)){this.removeNormalPlant(t,e);var p=""+(t+1)+e,c=this.pumpkinDataMap.get(p),u=this.plantDataMap.get(p);t<8&&null==c&&null!=u&&null!=u.plantData&&u.plantData.plantType==M.pzaPlantEnum.KERNEL_PULT?this.removeNormalPlant(t+1,e):(this.removeNormalPlant(t-1,e),t-=1)}else t=this.twoBlockPlantIndexCheck(t,e,!0)}else this.twoBlockPlantMap.has(a)&&(t=this.twoBlockPlantIndexCheck(t,e,!0));if(null!=s.pzaGameConfig.getPlantConfig(a)&&null!=a){var d=this.createPlantData(a);d.xIndex=t,d.yIndex=e,null!=n&&(d.plantData.sleeping=n.plantData.sleeping);var h=z.pzaNodeManager.getPlantZombieNode();if(null!=h){var m=G.pzaGameState.map.getXInterval(t)/2,y=G.pzaGameState.map.getYInterval(e)/3;G.pzaGameState.isRoofMode()&&(y=G.pzaGameState.map.getYInterval(e)/6);var b=G.pzaGameState.map.getBlockLogicPos(t,e,m,y);d.logicPos=b,console.log("plantPos : ",b);var P=""+d.xIndex+d.yIndex;if(a==M.pzaPlantEnum.FLOWERPOT_SHROOM){var C=window.pzaplantManager.plantDataMap.get(P),_=window.pzaplantManager.plantEnvDataMap.get(P);if(C||_)return void g.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u628a\u690d\u7269\u79cd\u5728\u82b1\u76c6\u4e0a");this.plantEnvDataMap.set(P,d)}else this.plantDataMap.set(P,d);if(this.twoBlockPlantMap.has(a)){d.secondXIndex=t+1,d.secondYIndex=e;var E=""+(t+1)+e;this.plantDataMap.set(E,d)}var w=window.pzaMapManager.getPlantBlockType(t,e);if(a!=M.pzaPlantEnum.CATTAIL&&a!=M.pzaPlantEnum.FLOWERPOT_SHROOM)if(w==f.pzaBlockType.ROOF||w==f.pzaBlockType.BLANK)null==(_=this.plantEnvDataMap.get(P))&&this.createPlant(M.pzaPlantEnum.FLOWER_POT,t,e,!0),-1!=d.secondXIndex&&-1!=d.secondYIndex&&null==this.plantEnvDataMap.get(""+d.secondXIndex+d.secondYIndex)&&(T=this.getEnvPlantByBlock(d.secondXIndex,d.secondYIndex))&&this.createPlant(T,d.secondXIndex,d.secondYIndex,!0);else if(w==f.pzaBlockType.POND){var T;null==(_=this.plantEnvDataMap.get(P))&&this.createPlant(M.pzaPlantEnum.LILY_PAD,t,e,!0),-1!=d.secondXIndex&&-1!=d.secondYIndex&&null==this.plantEnvDataMap.get(""+d.secondXIndex+d.secondYIndex)&&(T=this.getEnvPlantByBlock(d.secondXIndex,d.secondYIndex))&&this.createPlant(T,d.secondXIndex,d.secondYIndex,!0)}var B=S.pzaPreLoadManager.getPlantUrl(a);a==M.pzaPlantEnum.ICE_SHROOM&&d&&d.plantData&&(d.plantData.sleeping=!1),D.pzaBundleObjectPool.requestInstantByUrl(B,!1,function(a,t){if(null==a&&null!=t){t.setParent(h),t.setPosition(b);var e=t.getComponent(l.pzaBaseComponent);e&&e.bindData(d),o.plantMap.set(d,e)}else console.error(a)}),N.pzaEffectManager.createPlantEffect(d.logicPos,w,null),v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.PLANT_AD_PLANT,null)}}}},t.prototype.createRandomPlant=function(a,t,e,o,n,i){var r=this;void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===i&&(i=null),a==M.pzaPlantEnum.PUMPKIN&&m.pzaLocalData.hasNutHealing()&&this.removePumpkin(t,e),this.twoBlockPlantMap.has(a)&&this.twoBlockPlantIndexCheck(t,e)&&(t=this.twoBlockPlantIndexCheck(t,e));var p=s.pzaGameConfig.getPlantConfig(a);if(null!=p&&null!=a){var c=this.createPlantData(a);c.xIndex=t,c.yIndex=e;var u=z.pzaNodeManager.getPlantZombieNode();if(s.pzaPlantConfigData.isLilyPad(a,!0)&&(u=z.pzaNodeManager.getDownEffectNode()),null!=u){var d=G.pzaGameState.map.getXInterval(t)/2,h=G.pzaGameState.map.getYInterval(e)/3;G.pzaGameState.isRoofMode()&&(h=G.pzaGameState.map.getYInterval(e)/6);var f=G.pzaGameState.map.getBlockLogicPos(t,e,d,h);c.logicPos=f;var y=""+t+e;if(s.pzaPlantConfigData.isEnvPlant(a))this.plantEnvDataMap.set(y,c);else if(s.pzaPlantConfigData.isPumPkin(a))this.pumpkinDataMap.set(y,c);else if(a==M.pzaPlantEnum.COFFEE_BEAN);else if(this.plantDataMap.has(y)||this.plantDataMap.set(y,c),this.twoBlockPlantMap.has(a)){c.secondXIndex=t+1,c.secondYIndex=e;var g=""+(t+1)+e;this.plantDataMap.has(g)||this.pumpkinDataMap.has(g)||this.plantDataMap.set(g,c)}var b=S.pzaPreLoadManager.getPlantUrl(a);D.pzaBundleObjectPool.requestInstantByUrl(b,!1,function(t,e){if(null!=t||null==e)return console.error(t),void console.log("\u690d\u7269\u9519\u8bef\u7c7b\u578b: ",a);e.setParent(u),e.setPosition(f),o&&(e.getComponent(O.pzaSunMine).isBusterMine=!0);var p=e.getComponent(l.pzaBaseComponent);p&&p.bindData(c),n&&r.fireSquashMap.set(i,e.uuid),r.plantMap.set(c,p),o&&(e.getComponent(O.pzaSunMine).lifeTime=15)});var P=window.pzaMapManager.getPlantBlockType(c.xIndex,c.yIndex);N.pzaEffectManager.createPlantEffect(c.logicPos,P,null),null!=p&&p.createCD>0&&this.plantCdMap.set(a+this.idxArr[G.pzaGameState.selectIdx],p.createCD),v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.UPDATE_PLANT_PRICE,a)}}},t.prototype.createBowlingNut=function(a,t,e,o){var n=this;void 0===o&&(o=!1);var i=new _.pzaBaseData(a,null);i.xIndex=t,i.yIndex=e;var r=z.pzaNodeManager.getPlantZombieNode();if(null!=r){var p=G.pzaGameState.map.getXInterval(t)/2,s=G.pzaGameState.map.getBlockLogicPos(t,e,p,0);i.logicPos=s;var c=S.pzaPreLoadManager.getPlantUrl(a);D.pzaBundleObjectPool.requestInstantByUrl(c,!1,function(a,t){if(null==a&&null!=t){t.setParent(r),t.setPosition(s);var e=t.getComponent(l.pzaBaseComponent);e&&e.bindData(i),n.plantMap.set(i,e)}else console.error(a)}),o?v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.PLANT_AD_PLANT,null):v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.PLANT_PLANT,null)}},t.prototype.createAdJalapeno=function(){v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:C.pzaBubbleType.cherry,setTime:1});for(var a=G.pzaGameState.map.getMapRow(),t=G.pzaGameState.map.getMapColumn(),e=0;e<a;e++)for(var o=function(a){var t=0!==a,o=n.createPlantData(M.pzaPlantEnum.JALAPENO);o.plantData.adClearPlant=!0,o.xIndex=a,o.yIndex=e;var i=G.pzaGameState.map.getXInterval(a)/2,r=G.pzaGameState.map.getYInterval(e)/3;G.pzaGameState.isRoofMode()&&(r=G.pzaGameState.map.getYInterval(e)/6);var p=G.pzaGameState.map.getBlockLogicPos(a,e,i,r);o.logicPos=p;var l=z.pzaNodeManager.getPlantZombieNode(),s=S.pzaPreLoadManager.getPlantUrl(M.pzaPlantEnum.JALAPENO);D.pzaBundleObjectPool.requestInstantByUrl(s,!1,function(a,e){if(null==a&&null!=e){e.setParent(l),e.setPosition(p);var n=e.getComponent(B.pzaJalapeno);n.isHideEff=t,n.bindData(o)}else console.error(a)});var c=window.pzaMapManager.getPlantBlockType(a,e);N.pzaEffectManager.createPlantEffect(o.logicPos,c,null)},n=this,i=0;i<t;i++)o(i)},t.prototype.createAdCherry=function(){v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.SETTIME_BUBBLE_CLOSE,{type:C.pzaBubbleType.cherry,setTime:1});for(var a=G.pzaGameState.map.getMapRow(),t=G.pzaGameState.map.getMapColumn(),e=0;e<t;e++)for(var o=function(a){var t=n.createPlantData(M.pzaPlantEnum.CHERRY_BOMB);t.plantData.adClearPlant=!0,t.xIndex=e,t.yIndex=a;var o=G.pzaGameState.map.getXInterval(e)/2,i=G.pzaGameState.map.getYInterval(a)/3;G.pzaGameState.isRoofMode()&&(i=G.pzaGameState.map.getYInterval(a)/6);var r=G.pzaGameState.map.getBlockLogicPos(e,a,o,i);t.logicPos=r;var p=z.pzaNodeManager.getPlantZombieNode();if(null==p)return{value:void 0};var s=S.pzaPreLoadManager.getPlantUrl(M.pzaPlantEnum.CHERRY_BOMB);D.pzaBundleObjectPool.requestInstantByUrl(s,!1,function(a,e){if(null==a&&null!=e){e.setParent(p),e.setPosition(r);var o=e.getComponent(l.pzaBaseComponent);o&&o.bindData(t)}else console.error(a)});var c=window.pzaMapManager.getPlantBlockType(e,a);N.pzaEffectManager.createPlantEffect(t.logicPos,c,null)},n=this,i=0;i<a;i++){var r=o(i);if("object"==typeof r)return r.value}},t.prototype.recoverSurvivalPlant=function(a){var t=this;if(null!=a){var e=function(a){if(null!=a){var e=a.plantData.plantType,o=z.pzaNodeManager.getPlantZombieNode();if(s.pzaPlantConfigData.isLilyPad(e,!0)&&(o=z.pzaNodeManager.getDownEffectNode()),null!=o){var n=S.pzaPreLoadManager.getPlantUrl(e);D.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(e,n){if(null==e&&null!=n){n.setParent(o),n.setPosition(a.logicPos);var i=n.getComponent(l.pzaBaseComponent);i&&i.bindData(a),t.plantMap.set(a,i),i.pauseSelf()}else console.error(e)})}}};null!=a.plantEnvData&&a.plantEnvData.forEach(function(a){var o=_.pzaBaseData.clonePlantData(a),n=""+o.xIndex+o.yIndex;t.plantEnvDataMap.set(n,o),e(o)}),null!=a.plantData&&a.plantData.forEach(function(a){var o=_.pzaBaseData.clonePlantData(a),n=""+o.xIndex+o.yIndex;if(t.twoBlockPlantMap.has(o.plantData.plantType)){if(t.plantDataMap.has(n))return;var i=""+o.secondXIndex+o.secondYIndex;t.plantDataMap.set(i,o),t.plantDataMap.set(n,o)}else t.plantDataMap.set(n,o);e(o)}),null!=a.pumpkinData&&a.pumpkinData.forEach(function(a){var o=_.pzaBaseData.clonePlantData(a),n=""+o.xIndex+o.yIndex;t.pumpkinDataMap.set(n,o),e(o)}),null!=a.noTargetData&&a.noTargetData.forEach(function(a){var o=_.pzaBaseData.clonePlantData(a),n=""+o.xIndex+o.yIndex;t.notTargetMap.set(n,o),e(o)})}},t.prototype.createJar=function(a){var t=this;if(null!=a){var e=z.pzaNodeManager.getPlantZombieNode();if(null!=e){var o=G.pzaGameState.map.getMapOriPos(),n=cc.v2(o.x+115*a.xIndex+57.5,o.y+120*a.yIndex);D.pzaBundleObjectPool.requestInstantByUrl(S.pzaResourceUrl.JAR,!1,function(o,i){if(null==o&&null!=i){i.setParent(e),i.setPosition(n);var r=i.getComponent(R.pzaJar);r&&r.init(a,function(a){N.pzaEffectManager.createDropPlantCard(a,n,function(){t.pzaJarMap.size<=0&&window.pzazombieManager.zombieMap.size<=0&&(window.pzazombieManager.specialNextWaveTime=3)})});var p=""+a.xIndex+a.yIndex;t.pzaJarMap.set(p,r)}else console.error(o)})}}},t.prototype.bangJar=function(a,t){var e=""+a+t,o=this.pzaJarMap.get(e);return null!=o&&(o.bang(),window.pzaGuideManager.guideType==E.pzaGuideType.GUIDE_BANG_JAR_4_5&&1==window.pzaGuideManager.guideStep&&window.pzaGuideManager.guideStepNext(),!0)},t.prototype.shovelPlant=function(a,t){y.pzaSoundManager.playAudio("shovelPlant"),this.removeNormalPlant(a,t,!0)||this.removePumpkin(a,t)||this.removeNoTargetPlant(a,t)||this.removeEnvPlant(a,t)},t.prototype.removePlant=function(a){if(null!=a){var t=""+a.xIndex+a.yIndex;if(this.plantDataMap.get(t)==a&&(this.plantDataMap.delete(t),null!=a.plantData&&this.twoBlockPlantMap.has(a.plantData.plantType))){var e=""+a.secondXIndex+a.secondYIndex,o=this.plantDataMap.get(e);o&&o.plantData.plantType==a.plantData.plantType&&this.plantDataMap.delete(e)}this.pumpkinDataMap.get(t)==a&&this.pumpkinDataMap.delete(t),this.plantEnvDataMap.get(t)==a&&this.plantEnvDataMap.delete(t),this.plantMap.delete(a)}},t.prototype.removeNormalPlant=function(a,t,e){void 0===e&&(e=!1);var o=""+a+t,n=this.plantDataMap.get(o);if(null==n)return!1;if(n.isDead=!0,this.plantDataMap.delete(o),null!=n.plantData){if(this.twoBlockPlantMap.has(n.plantData.plantType)){var i=""+n.xIndex+n.yIndex,r=""+n.secondXIndex+n.secondYIndex;this.plantDataMap.delete(i),this.plantDataMap.delete(r)}n.plantData.plantType==M.pzaPlantEnum.HoleNut&&N.pzaEffectManager.createDoomHoleEffect(n.logicPos,n.xIndex,n.yIndex)}var p=this.plantMap.get(n);return this.plantMap.delete(n),p&&p.close(),!0},t.prototype.removePumpkin=function(a,t){var e=""+a+t,o=this.pumpkinDataMap.get(e);if(null==o)return!1;o.isDead=!0,this.pumpkinDataMap.delete(e);var n=this.plantMap.get(o);return this.plantMap.delete(o),n&&n.close(),!0},t.prototype.removeEnvPlant=function(a,t){var e=""+a+t,o=this.plantEnvDataMap.get(e);if(null==o)return!1;o.isDead=!0,this.plantEnvDataMap.delete(e);var n=this.plantMap.get(o);return this.plantMap.delete(o),n&&n.close(),!0},t.prototype.removeNoTargetPlant=function(a,t){var e=""+a+t,o=this.notTargetMap.get(e);if(null==o)return!1;o.isDead=!0,this.notTargetMap.delete(e);var n=this.plantMap.get(o);return this.plantMap.delete(o),n&&n.close(),!0},t.prototype.bangPlant=function(a,t,e,o){var n=""+a+t,i=window.pzaplantManager.pumpkinDataMap.get(n);if(null!=i){var r=window.pzaplantManager.getPlantByData(i);r&&r.hurt(e,o,w.pzaAttackType.BANG)}var p=window.pzaplantManager.plantDataMap.get(n);if(null!=p){var l=window.pzaplantManager.getPlantByData(p);l&&l.hurt(e,o,w.pzaAttackType.BANG)}var s=window.pzaplantManager.plantEnvDataMap.get(n);if(null!=s){var c=window.pzaplantManager.getPlantByData(s);c&&c.hurt(e,o,w.pzaAttackType.BANG)}},t.prototype.absorbPlant=function(a,t,e,o){var n=""+a+t,i=window.pzaplantManager.pumpkinDataMap.get(n);if(null!=i){var r=window.pzaplantManager.getPlantByData(i);r&&r.hurt(e,o,w.pzaAttackType.DEATH)}var p=window.pzaplantManager.plantDataMap.get(n);if(null!=p){var l=window.pzaplantManager.getPlantByData(p);l&&l.hurt(e,o,w.pzaAttackType.DEATH)}var s=window.pzaplantManager.plantEnvDataMap.get(n);if(null!=s){var c=window.pzaplantManager.getPlantByData(s);c&&c.hurt(e,o,w.pzaAttackType.DEATH)}},t.prototype.hasPlant=function(a,t){var e=""+a+t;return!!(this.plantDataMap.has(e)||this.pumpkinDataMap.has(e)||this.notTargetMap.has(e)||this.plantEnvDataMap.has(e))},t.prototype.canPlant=function(a,t,e){var o=G.pzaGameState.selectPlant;if(o==M.pzaPlantEnum.IMITATER&&(o=G.pzaGameState.curImitaterPlant),s.pzaPlantConfigData.isBowling(o))return a<=2;var n=window.pzaMapManager.getPlantBlockType(a,t),i=s.pzaGameConfig.getPlantConfig(o),r=i&&i.env,p=""+a+t;if(this.pzaJarMap.has(p))return!1;var l=window.pzaMapManager.hasTomb(a,t);if(s.pzaPlantConfigData.isBuster(o)){if(!l)return e&&g.pzaTipManager.showSpecialPlantTip(o,i.name),!1}else if(l)return e&&!G.pzaGameState.tombTip&&(G.pzaGameState.tombTip=!0,g.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u628a\u690d\u7269\u79cd\u5728\u5893\u7891\u4e0a")),!1;var c=this.plantDataMap.get(p);if((o==M.pzaPlantEnum.WALL_NUT||o==M.pzaPlantEnum.TALL_NUT)&&null!=c&&null!=c.plantData&&c.plantData.plantType==o&&m.pzaLocalData.hasNutHealing())return!0;if(s.pzaPlantConfigData.isPumPkin(o)&&m.pzaLocalData.hasNutHealing()&&null!=this.pumpkinDataMap.get(p))return!0;if(o==M.pzaPlantEnum.COFFEE_BEAN)return!(null==c||null==c.plantData||!c.plantData.sleeping||!s.pzaGameConfig.getPlantConfig(c.plantData.plantType).isNight)||(e&&g.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==M.pzaPlantEnum.GATLING_PEA)return null!=c&&null!=c.plantData&&c.plantData.plantType==M.pzaPlantEnum.REPEATER||(e&&g.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==M.pzaPlantEnum.TWIN_SUNFLOWER)return null!=c&&null!=c.plantData&&c.plantData.plantType==M.pzaPlantEnum.SUN_FLOWER||(e&&g.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==M.pzaPlantEnum.GLOOM_SHROOM)return null!=c&&null!=c.plantData&&c.plantData.plantType==M.pzaPlantEnum.FUME_SHROOM||(e&&g.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==M.pzaPlantEnum.WINTER_MELON)return null!=c&&null!=c.plantData&&c.plantData.plantType==M.pzaPlantEnum.MELON_PULT||(e&&g.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==M.pzaPlantEnum.GOLD_MAGNET)return null!=c&&null!=c.plantData&&c.plantData.plantType==M.pzaPlantEnum.MAGNET_SHROOM||(e&&g.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==M.pzaPlantEnum.SPIKEROCK)return null!=c&&null!=c.plantData&&c.plantData.plantType==M.pzaPlantEnum.SPIKEWEED||(e&&g.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==M.pzaPlantEnum.CATTAIL){var u=this.plantEnvDataMap.get(p);return!(null!=c||null==u||null==u.plantData||!s.pzaPlantConfigData.isLilyPad(u.plantData.plantType))||(e&&g.pzaTipManager.showSpecialPlantTip(o,i.name),!1)}if(o==M.pzaPlantEnum.COB_CANNON){var d=""+(a+1)+t;if(null!=this.pumpkinDataMap.get(p)||null==c||null==c.plantData||c.plantData.plantType!=M.pzaPlantEnum.KERNEL_PULT||this.holeMap.has(d))return e&&g.pzaTipManager.showSpecialPlantTip(o,i.name),!1;var h=this.plantDataMap.get(d);if(!(b=this.pumpkinDataMap.get(d))&&h&&h.plantData&&h.plantData.plantType==M.pzaPlantEnum.KERNEL_PULT)return!0;var z=""+(a-1)+t,y=this.plantDataMap.get(z);return!((D=this.pumpkinDataMap.get(z))||!y||!y.plantData||y.plantData.plantType!=M.pzaPlantEnum.KERNEL_PULT)||(e&&g.pzaTipManager.showSpecialPlantTip(o,i.name),!1)}if(this.twoBlockPlantMap.has(o)){if(this.pumpkinDataMap.get(p)||c)return!1;d=""+(a+1)+t,h=this.plantDataMap.get(d);var b=this.pumpkinDataMap.get(d),v=window.pzaMapManager.getPlantBlockType(a+1,t),P=window.pzaplantManager.plantEnvDataMap.get(d);if(b||h||this.holeMap.has(d)||a>=8||v!=f.pzaBlockType.GRASS&&!P){z=""+(a-1)+t,y=this.plantDataMap.get(z);var D=this.pumpkinDataMap.get(z),S=window.pzaMapManager.getPlantBlockType(a-1,t),C=window.pzaplantManager.plantEnvDataMap.get(z);if(0===a||D||y||this.holeMap.has(z)||S!=f.pzaBlockType.GRASS&&!C)return!1}}if(s.pzaPlantConfigData.isPotRecoverPlant(o)){var _=""+a+t;if(u=window.pzaplantManager.plantEnvDataMap.get(_)){if(u.plantData.plantType==o)return!1;if(s.pzaPlantConfigData.isPotRecoverPlant(u.plantData.plantType)&&u.plantData.plantType!=o)return!0}}switch(n){case f.pzaBlockType.ICE:return G.pzaGameState.cantPlantTip=!0,g.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u79cd\u5728\u8fd9\u91cc"),!1;case f.pzaBlockType.DOOM_HOLE:case f.pzaBlockType.GOLD_HOLE:if(r!=M.pzaPlantEnvEnum.HOLE)return e&&g.pzaTipManager.showEnvPlantTip(n),!1;break;case f.pzaBlockType.BLANK:if(r==M.pzaPlantEnvEnum.ENV14)break;if(r==M.pzaPlantEnvEnum.ENV20||r==M.pzaPlantEnvEnum.ROOFBLANK){if(this.plantEnvDataMap.has(p))return!1;break}if(s.pzaPlantConfigData.isOnWaterPlant(o)&&o!=M.pzaPlantEnum.LILY_FLOWERPOT)return;if(this.plantEnvDataMap.has(p))break;if(window.pzaMapManager.hasTomb(a,t)&&o==M.pzaPlantEnum.MINE_BUSTER)break;return!1;case f.pzaBlockType.GRASS:if(r!=M.pzaPlantEnvEnum.NORMAL&&r!=M.pzaPlantEnvEnum.SOIL&&r!=M.pzaPlantEnvEnum.TOMB&&r!=M.pzaPlantEnvEnum.GRASS&&r!=M.pzaPlantEnvEnum.ROOFBLANK&&r!=M.pzaPlantEnvEnum.BOTH&&r!=M.pzaPlantEnvEnum.ENV14&&r!=M.pzaPlantEnvEnum.WithRoof&&r!=M.pzaPlantEnvEnum.ENV20)return e&&r==M.pzaPlantEnvEnum.POND&&g.pzaTipManager.showPondPlantTip(o,i.name),e&&r==M.pzaPlantEnvEnum.HOLE&&g.pzaTipManager.showGameTip("\u53ea\u80fd\u5728\u5751\u6d1e\u91cc\u79cd\u690d"),!1;if(o==M.pzaPlantEnum.FLOWER_POT&&this.plantEnvDataMap.has(p))return!1;break;case f.pzaBlockType.POND:if(r==M.pzaPlantEnvEnum.ENV14)break;if(r==M.pzaPlantEnvEnum.POND||r==M.pzaPlantEnvEnum.ENV20||r==M.pzaPlantEnvEnum.ENV13){if(this.plantEnvDataMap.has(p))return!1}else{if(r==M.pzaPlantEnvEnum.BOTH)break;if(o==M.pzaPlantEnum.CATLITTERPOT&&this.plantEnvDataMap.get(p).plantData.plantType==M.pzaPlantEnum.LILY_SHELL)break;if(e&&o==M.pzaPlantEnum.SPIKEWEED&&g.pzaTipManager.showSpecialPlantTip(o,i.name),r!=M.pzaPlantEnvEnum.NORMAL)return e&&o==M.pzaPlantEnum.POTATO_MINE?g.pzaTipManager.showSpecialPlantTip(o,i.name):e&&!G.pzaGameState.cantPlantTip&&(G.pzaGameState.cantPlantTip=!0,g.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u79cd\u5728\u8fd9\u91cc")),!1;if(!(s.pzaPlantConfigData.isPumPkin(o)&&null!=c&&c.plantData.plantType==M.pzaPlantEnum.CATTAIL||this.plantEnvDataMap.has(p)))return!1}break;case f.pzaBlockType.ROOF:if(r==M.pzaPlantEnvEnum.ENV14)break;if(r==M.pzaPlantEnvEnum.ROOFBLANK||r==M.pzaPlantEnvEnum.ENV20){if(this.plantEnvDataMap.has(p))return!1}else{if(e&&o==M.pzaPlantEnum.SPIKEWEED&&g.pzaTipManager.showSpecialPlantTip(o,i.name),r!=M.pzaPlantEnvEnum.NORMAL&&r!=M.pzaPlantEnvEnum.SOIL&&r!=M.pzaPlantEnvEnum.BOTH)return e&&r==M.pzaPlantEnvEnum.POND?g.pzaTipManager.showPondPlantTip(o,i.name):e&&!G.pzaGameState.cantPlantTip&&(G.pzaGameState.cantPlantTip=!0,g.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u79cd\u5728\u8fd9\u91cc")),!1;if(!this.plantEnvDataMap.has(p))return e&&g.pzaTipManager.showEnvPlantTip(n),!1}break;default:return!1}return s.pzaPlantConfigData.isPumPkin(o)?!(null!=c&&this.twoBlockPlantMap.has(c.plantData.plantType)||this.pumpkinDataMap.has(p)):!this.plantDataMap.has(p)},t.prototype.adCanPlant=function(a,t,e){var o=function(a){e&&!G.pzaGameState.cantPlantTip&&(G.pzaGameState.cantPlantTip=!0,g.pzaTipManager.showGameTip(a||"\u4f60\u4e0d\u80fd\u79cd\u5728\u8fd9\u91cc"))};if(this.pzaJarMap.has(""+a+t))return o(),!1;if(window.pzaMapManager.hasTomb(a,t))return o("\u4f60\u4e0d\u80fd\u628a\u690d\u7269\u79cd\u5728\u5893\u7891"),!1;var n=G.pzaGameState.selectPlant;if(s.pzaPlantConfigData.isBowling(n))return a<=2;var i=window.pzaMapManager.getPlantBlockType(a,t);if(i==f.pzaBlockType.DOOM_HOLE||i==f.pzaBlockType.GOLD_HOLE||i==f.pzaBlockType.ICE)return o(),!1;if(n==M.pzaPlantEnum.CATTAIL&&i!=f.pzaBlockType.POND)return o(),!1;if(n==M.pzaPlantEnum.SPIKEROCK&&i==f.pzaBlockType.POND)return o(),!1;if(n==M.pzaPlantEnum.SPIKEROCK&&i==f.pzaBlockType.ROOF)return o(),!1;if(n==M.pzaPlantEnum.FLOWERPOT_SHROOM){var r=""+a+t,p=window.pzaplantManager.plantDataMap.get(r),l=window.pzaplantManager.plantEnvDataMap.get(r);if(p||l)return o(),!1}var c=""+a+t,u=this.plantDataMap.get(c);if(this.twoBlockPlantMap.has(n)){if(this.pumpkinDataMap.get(c)||u)return!1;var d=""+(a+1)+t,h=this.plantDataMap.get(d);if(this.pumpkinDataMap.get(d)||h||this.holeMap.has(d)||a>=8){var m=""+(a-1)+t,z=this.plantDataMap.get(m),y=this.pumpkinDataMap.get(m);if(0===a||y||z||this.holeMap.has(m))return!1}}else if(null!=u)return!1;return!0},t.prototype.getCanAttackPlant=function(a,t){var e=""+a+t,o=this.plantEnvDataMap.get(e);if(null!=o&&o.plantData.plantType==M.pzaPlantEnum.LILY_SHELL)return this.plantMap.get(o);var n=this.pumpkinDataMap.get(e);return null==n&&(n=this.plantDataMap.get(e)),null==n&&(n=this.plantEnvDataMap.get(e)),this.plantMap.get(n)},t.prototype.getPlantByData=function(a){return this.plantMap.get(a)},t.prototype.getCanAttackPlantData=function(a,t,e){void 0===e&&(e=!1);var o=""+a+t;return e&&this.plantDataMap.has(o)?this.plantDataMap.get(o):this.pumpkinDataMap.has(o)?this.pumpkinDataMap.get(o):!e&&this.plantDataMap.has(o)?this.plantDataMap.get(o):this.plantEnvDataMap.get(o)},t.prototype.getRandomBlock=function(a,t){var e=this,o=new Set;if(a){var n=new Set;this.plantMap.forEach(function(a,i){if(null!=i){var r=i.xIndex+"-"+i.yIndex;if(!n.has(r)){if(e.twoBlockPlantMap.has(i.plantData.plantType)){var p=i.secondXIndex+"-"+i.secondYIndex;return n.add(r),n.add(p),o.delete(r),void o.delete(p)}o.has(r)||null!=t&&t.includes(r)||o.add(r)}}})}var i=Array.from(o);if(i.length<=0)for(var r=G.pzaGameState.map.getMapRow(),p=G.pzaGameState.map.getMapColumn(),l=0;l<p;l++)for(var s=0;s<r;s++){var c=l+"-"+s;null!=t&&t.includes(c)||i.push(c)}return b.pzaUtil.getRandomValueFromArray(i)},t.prototype.findFixRangePlants=function(a,t){if(null==a)return null;var e=[];return this.plantMap.forEach(function(o,n){null==o||null==n||n.isDead||null==n.logicPos||b.pzaUtil.getDistance(a,n.logicPos)<=t&&e.push(o)}),e},t.prototype.createPlantData=function(a){var t=new _.pzaBaseData(a,null);if(null==t.plantData)return t;t.plantData.sleeping=G.pzaGameState.gameTimeType==G.pzaGameTimeType.DAY;var e=s.pzaGameConfig.getPlantConfig(a);return null==e?t:(t.hp=t.maxHp=e.hp,t.atk=e.atk,e instanceof P.pzaZJPlantConf&&(t.plantData.atk2Arr=e.atk2Arr,t.plantData.atkArr=e.atkArr,t.plantData.atkInterval2=e.atkCD2,t.plantData.atkInterval=e.atkCD),0==s.pzaPlantConfigData.isBoomPlant(a)&&(G.pzaGameState.onlyBoomPlant=!1),t)},t.prototype.getPlantCD=function(a,t){return G.pzaGameState.createPlantNoCD?0:this.plantCdMap.has(a+this.idxArr[t])?this.plantCdMap.get(a+this.idxArr[t]):0},t.prototype.clearAllCD=function(){var a=this;this.plantCdMap.forEach(function(t,e){a.plantCdMap.set(e,0)})},t.prototype.initPlantCD=function(a){var t=this;if(this.plantCdMap.clear(),null!=a){this.curSelectPlants=Array.from(a);var e=0;a.forEach(function(a){if(e++,a!=M.pzaPlantEnum.IMITATER||null==G.pzaGameState.curImitaterPlant){var o=s.pzaGameConfig.getPlantConfig(a);o&&o.initCD>0&&t.plantCdMap.set(a+t.idxArr[e],o.initCD)}else{var n=s.pzaGameConfig.getPlantConfig(G.pzaGameState.curImitaterPlant);n&&n.initCD>0&&t.plantCdMap.set(a+t.idxArr[e],n.initCD)}})}},t.prototype.getPlantCount=function(a){var t=0;return this.plantMap.forEach(function(e,o){null!=o&&null!=o.plantData&&o.plantData.plantType==a&&t++}),t},t.prototype.getAllPlant=function(a){var t=[];return this.plantMap.forEach(function(e,o){null!=o&&null!=o.plantData&&o.plantData.plantType==a&&t.push(o)}),t},t.prototype.getVoidPotCount=function(){var a=this,t=0;return this.plantMap.forEach(function(e,o){if(null!=o&&null!=o.plantData&&o.plantData.plantType==M.pzaPlantEnum.FLOWER_POT){var n=""+o.xIndex+o.yIndex,i=a.plantDataMap.get(n),r=a.pumpkinDataMap.get(n);null==i&&null==r&&t++}}),t},t.prototype.getAllPlantCount=function(){return this.plantMap.size},t.prototype.clearAllPlant=function(){this.plantDataMap.clear(),this.plantEnvDataMap.clear(),this.pumpkinDataMap.clear(),this.plantMap.forEach(function(a,t){t&&(t.isDead=!0),a&&a.close()}),this.plantMap.clear(),this.dropPlantCards.forEach(function(a){a&&a.close()}),this.dropPlantCards.clear(),this.dropZombieCards.forEach(function(a){a&&a.close()}),this.dropZombieCards.clear(),this.pzaJarMap.forEach(function(a){a&&a.close()}),this.pzaJarMap.clear(),this.fireSquashMap.clear()},t.prototype.createStarFruitShadow=function(a,t){var e=this,o=G.pzaGameState.map.getXInterval(a)/2,n=G.pzaGameState.map.getYInterval(t)/3,i=G.pzaGameState.map.getBlockLogicPos(a,t,o,n),r=z.pzaNodeManager.getPlantZombieNode(),p=""+a+t;D.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Plant/StarFruitShadow",!1,function(a,t){if(null==a&&null!=t){t.setParent(r),t.setPosition(i);var o=t.getComponent(A.pzaStarFruitShadow);e.starFruitMap.set(p,o)}else console.error(a)})},t.prototype.createFlowerPotShadow=function(a,t){var e=this,o=G.pzaGameState.map.getXInterval(a)/2,n=G.pzaGameState.map.getYInterval(t)/3,i=G.pzaGameState.map.getBlockLogicPos(a,t,o,n),r=z.pzaNodeManager.getPlantZombieNode(),p=""+a+t;D.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Plant/FlowerPotShadow",!1,function(t,o){if(null==t&&null!=o){o.setParent(r),o.setPosition(i),o.zIndex=200;var n=o.getComponent(T.pzaFlowerPotShadow);e.flowerPotShadowMap.set(p,n),3!=a&&n.hideNode()}else console.error(t)})},t.prototype.getEnvPlantByBlock=function(a,t){var e=window.pzaMapManager.getPlantBlockType(a,t);return e==f.pzaBlockType.POND?M.pzaPlantEnum.LILY_PAD:e==f.pzaBlockType.ROOF||e==f.pzaBlockType.BLANK?M.pzaPlantEnum.FLOWER_POT:null},t.prototype.twoBlockPlantIndexCheck=function(a,t,e){if(void 0===e&&(e=!1),a>0){var o=""+(a+1)+t,n=this.pumpkinDataMap.get(o),i=this.plantDataMap.get(o),r=window.pzaMapManager.getPlantBlockType(a+1,t),p=window.pzaplantManager.plantEnvDataMap.get(o);if(n||i||this.holeMap.has(o)||a>=8||!e&&r!=f.pzaBlockType.GRASS&&!p)return a-1}return a},i([Z],t)}(cc.Component));e.pzaPlantManager=U,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaGameSurEndless":"pzaGameSurEndless","../Common/pzaGameSurvival":"pzaGameSurvival","../Common/pzaLocalData":"pzaLocalData","../Common/pzaMapManager":"pzaMapManager","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Common/pzaZJPlantConf":"pzaZJPlantConf","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaBubbleItem":"pzaBubbleItem","./Data/pzaBaseData":"pzaBaseData","./Data/pzaGuideType":"pzaGuideType","./Data/pzaPlantEnum":"pzaPlantEnum","./Plant/pzaAttackType":"pzaAttackType","./Plant/pzaFlowerPotShadow":"pzaFlowerPotShadow","./Plant/pzaJalapeno":"pzaJalapeno","./Plant/pzaStarFruitShadow":"pzaStarFruitShadow","./Plant/pzaSunMine":"pzaSunMine","./pzaBrain":"pzaBrain","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState","./pzaJar":"pzaJar","./pzaSunLight":"pzaSunLight"}],pzaPlantSelectCardList:[function(a,t,e){"use strict";cc._RF.push(t,"1fd6bOvfHhGU7STqwU/NFaY","pzaPlantSelectCardList");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantSelectCardList=void 0;var r=a("../../Battle/pzaGameState"),p=a("./pzaPlantCard"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardList=[],t.oriPosArr=[],t.selectPlants=[],t}return n(t,a),t.prototype.onLoad=function(){for(var a=0;a<this.cardList.length;a++){var t=this.cardList[a];null!=t&&this.oriPosArr.push(cc.v2(t.node.position.x,t.node.position.y))}},t.prototype.init=function(){this.selectPlants=[],this.cardList.forEach(function(a){a&&a.bagSelectPlant(null,null)})},t.prototype.refreshAllSunVal=function(){for(var a=0;a<this.cardList.length;a++)this.cardList[a].updatePrice()},t.prototype.refreshOriPos=function(){this.oriPosArr=[];for(var a=0;a<9;a++){var t=this.cardList[a];null!=t&&this.oriPosArr.push(cc.v2(t.node.position.x,t.node.position.y))}},t.prototype.getNextVoidPos=function(){var a=this.oriPosArr[this.selectPlants.length];return null==a?null:this.node.convertToWorldSpaceAR(a)},t.prototype.getNextVoidCard=function(){for(var a=0;a<9;a++){var t=this.cardList[a];if(null!=t&&null==t.curPlantType)return t}return null},t.prototype.selectPlant=function(a,t,e,o){void 0===o&&(o=!1);var n=this.getNextVoidCard();if(null!=n){var i=this.oriPosArr[this.selectPlants.length-1];n.node.setPosition(i.clone()),n.bagSelectPlant(a,t,e,o)}},t.prototype.removeSelect=function(a){var t=this.selectPlants.indexOf(a);if(!(t<0)){for(var e=t+1;e<this.selectPlants.length;e++){var o=this.getCardByPlantType(this.selectPlants[e]);if(null!=o){var n=this.oriPosArr[e-1];o.moveTo(n,.1,null)}}this.selectPlants.splice(t,1)}},t.prototype.getCardByPlantType=function(a){for(var t=0;t<this.cardList.length;t++){var e=this.cardList[t];if(null!=e&&e.curPlantType==a)return e}return null},t.prototype.hasPlant=function(a){return null!=a&&null!=this.selectPlants&&(r.pzaGameState.curImitaterPlant==a||this.selectPlants.indexOf(a)>=0)},t.prototype.showNext=function(){for(var a=0;a<8;a++)this.cardList[a].node.active=!1;for(a=8;a<this.cardList.length;a++)this.cardList[a].node.active=!1},t.prototype.showPrev=function(){for(var a=0;a<8;a++)this.cardList[a].node.active=!0;for(a=8;a<this.cardList.length;a++)this.cardList[a].node.active=!1},i([c({displayName:"\u5361\u7247\u5217\u8868",type:[p.pzaPlantCard]})],t.prototype,"cardList",void 0),i([s],t)}(cc.Component);e.pzaPlantSelectCardList=u,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","./pzaPlantCard":"pzaPlantCard"}],pzaPlantSelectView:[function(a,t,e){"use strict";cc._RF.push(t,"2968fkttspIT5a1kZ/KNhdN","pzaPlantSelectView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantSelectView=void 0;var r=a("../../Battle/Data/pzaGuideType"),p=a("../../Battle/Data/pzaPlantEnum"),l=a("../../Battle/Data/pzaZombieEnum"),s=a("../../Battle/pzaGameState"),c=a("../../Common/pzaGameCommonPool"),u=a("../../Common/pzaGameConfig"),d=a("../../Common/pzaGamePartConfig"),h=a("../../Common/pzaGiftConfig"),m=a("../../Common/pzaLocalData"),f=a("../../Common/pzaSoundManager"),z=a("../../Common/pzaStatisticsMgr"),y=a("../../Common/pzaTipManager"),g=a("../../Common/pzaUIManager"),b=a("../../Common/pzaUtil"),v=a("../../Common/pzaWorldEventManager"),P=a("../../Load/pzaPreLoadManager"),D=a("../../utils/pzaChannel"),S=a("../pzaCommonMask"),C=a("../pzaHandbookView"),_=a("../pzaShopView"),E=a("../pzaWarningView"),M=a("./pzaBagPlantCard"),w=a("./pzaImitaterSelectView"),T=a("./pzaMenuView"),B=a("./pzaPlantSelectCardList"),A=cc._decorator,O=A.ccclass,I=A.property,N=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardPrefab=null,t.cardBag=null,t.startBtn=null,t.bagNode=null,t.cardSelectList=null,t.cardSlotNode=null,t.cardSlotList=[],t.guideArrowNode=null,t.shopBtn=null,t.lookLawnBtn=null,t.bookBtn=null,t.imitaterNode=null,t.imitaterMask=null,t.imitaterSelectView=null,t.daveRewardNode=null,t.adSlot=null,t.slotAdCount=null,t.adSlotFrames=[],t.nextPage=null,t.nextArrow=null,t.trialPlant=null,t.trialPlantName=null,t.trialPlantDesc=null,t.trialPlantSp=null,t.trialPlantSpData=[],t.DaveDialog=null,t.clearCardBtn=null,t.trialPlantSprite=null,t.arrowIsDown=!0,t.bagCards=[],t.startGameCall=null,t}return n(t,a),t.prototype.onEnable=function(){D.pzaChannel.instance().closeBanner(),this.shopBtn.active=m.pzaLocalData.data.unlockShop,this.bookBtn.active=m.pzaLocalData.data.unlockBook,this.imitaterNode.active=m.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.IMITATER),this.imitaterSelectView.node.active=!1,this.imitaterMask.active=!1,this.daveRewardNode.active=!1,this.lookLawnBtn.active=!1,this.nextPage.active=!1,this.arrowIsDown=!0,v.pzaWorldEventManager.addListener(v.pzaWorldEventType.SELECT_CARD,this.selectCard,this),v.pzaWorldEventManager.addListener(v.pzaWorldEventType.UPDATE_ALL_PLANT_PRICE,this.updateCardsSunVal,this);var a=this.cardSelectList.selectPlants.length<m.pzaLocalData.data.plantSlotCount&&this.ableChoseCardCount()>0;b.pzaUtil.switchGraySprite(this.startBtn,a)},t.prototype.onDisable=function(){this.clearBag(),v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.SELECT_CARD,this.selectCard,this),v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.UPDATE_ALL_PLANT_PRICE,this.updateCardsSunVal,this)},t.prototype.init=function(a,t){if(void 0===a&&(a=null),void 0===t&&(t=null),this.guideArrowNode.active=!1,this.nextPage.active=!1,s.pzaGameState.cardIsMove=!1,null!=a)return this.adSlot.node.active=!1,this.cardSelectList.init(),this.cardSelectList.selectPlants=Array.from(a),this.bagNode.active=!1,this.cardSlotNode.active=!1,void(t&&t());if(s.pzaGameState.isSelectPlant=!0,m.pzaLocalData.isWeekTwo){this.startGameCall=t,this.initGameSetup(),this.weekTwoInit();var e=this.cardSelectList.selectPlants.length<m.pzaLocalData.data.plantSlotCount&&this.ableChoseCardCount()>0;b.pzaUtil.switchGraySprite(this.startBtn,e)}else{if(s.pzaGameState.isSurvival()){var o=m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode];if(o&&o.length>0)for(var n=0;n<o.length;n++)m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode].splice(n)}this.startGameCall=t,this.initGameSetup(),this.initLastSelectPlants();var i=this.cardSelectList.selectPlants.length<m.pzaLocalData.data.plantSlotCount&&this.ableChoseCardCount()>0;b.pzaUtil.switchGraySprite(this.startBtn,i)}},t.prototype.initGameSetup=function(){var a=this;this.initBag(),this.cardSelectList.init(),this.refreshAdSlot(),this.bagNode.active=!0,this.daveRewardNode.active=!0,this.cardSlotNode.active=!0;for(var t=0;t<this.cardSlotList.length;t++){var e=this.cardSlotList[t];null!=e&&(e.active=t<m.pzaLocalData.data.plantSlotCount)}var o,n=s.pzaGameState.curChapter,i=s.pzaGameState.curPart;2==n&&6==i?(o=p.pzaPlantEnum.GATLING_PEA,this.trialPlantSp.spriteFrame=this.trialPlantSpData[0]):2==n&&8==i?(o=p.pzaPlantEnum.GLOOM_SHROOM,this.trialPlantSp.spriteFrame=this.trialPlantSpData[1]):3==n&&1==i?(o=p.pzaPlantEnum.CATTAIL,this.trialPlantSp.spriteFrame=this.trialPlantSpData[2]):4==n&&9==i?(o=p.pzaPlantEnum.SPIKEROCK,this.trialPlantSp.spriteFrame=this.trialPlantSpData[3]):5==n&&4==i?(o=p.pzaPlantEnum.COB_CANNON,this.trialPlantSp.spriteFrame=this.trialPlantSpData[4]):5==n&&9==i&&(o=p.pzaPlantEnum.WINTER_MELON,this.trialPlantSp.spriteFrame=this.trialPlantSpData[5]);var r=m.pzaLocalData.data.ownPlants.includes(o);if(o&&!r&&s.pzaGameState.gameMode==s.pzaGameMode.NORMAL&&"wx"!=D.pzaChannel.instance().channel){this.trialPlantName.string=h.pzaGiftConfig.getPlantGiftData(o).name,this.trialPlantDesc.string=h.pzaGiftConfig.getPlantGiftDesc(o),this.daveRewardNode.active=!1,this.trialPlant.active=!0,this.cardSelectList.cardList.forEach(function(t){null!=t&&null!=t.curPlantType&&a.putPlantToBagCall(t,!1)}),this.cardSelectList.selectPlants=[],m.pzaLocalData.data.modeUsePlants[s.pzaGameMode.NORMAL]=[];var l=this.createBagCard(o,!0);l.clickCard(),l.node.zIndex=-999,this.DaveDialog.active=!0,setTimeout(function(){a&&a.DaveDialog&&(a.DaveDialog.active=!1)},3e3)}else this.daveRewardNode.active=!0,this.trialPlant.active=!1,this.DaveDialog.active=!1;this.fixDaveTreView()},t.prototype.fixDaveTreView=function(){var a=this.clearCardBtn.parent.convertToNodeSpaceAR(this.clearCardBtn.position),t=this.daveRewardNode.parent.convertToNodeSpaceAR(this.daveRewardNode.position),e=Math.abs(a.y-t.y)-this.daveRewardNode.height,o=(this.daveRewardNode.height+e/3)/this.daveRewardNode.height;this.daveRewardNode.scale=o;var n=cc.winSize.width;Math.abs(t.x)+this.daveRewardNode.width*o>n&&(o=1-this.daveRewardNode.width/(n-Math.abs(t.x)),this.daveRewardNode.scale=1+o)},t.prototype.updateCardsSunVal=function(){this.cardSelectList.refreshAllSunVal()},t.prototype.survivalInit=function(a,t){if(this.guideArrowNode.active=!1,this.nextPage.active=!1,s.pzaGameState.cardIsMove=!1,null!=a)return this.adSlot.node.active=!1,this.cardSelectList.init(),this.cardSelectList.selectPlants=Array.from(a),this.bagNode.active=!1,this.cardSlotNode.active=!1,window.pzaplantManager.initPlantCD(this.cardSelectList.selectPlants),this.initPlant(),void(t&&t());this.startGameCall=t,this.initBag(),this.cardSelectList.init(),this.refreshAdSlot(),this.bagNode.active=!0,this.daveRewardNode.active=!0,this.cardSlotNode.active=!0,this.lookLawnBtn.active=!0;for(var e=0;e<this.cardSlotList.length;e++){var o=this.cardSlotList[e];null!=o&&(o.active=e<m.pzaLocalData.data.plantSlotCount)}this.initLastSelectPlants(),s.pzaGameState.hasPlantSelect=!0;var n=this.cardSelectList.selectPlants.length<m.pzaLocalData.data.plantSlotCount&&this.ableChoseCardCount()>0;b.pzaUtil.switchGraySprite(this.startBtn,n)},t.prototype.miniGameInit=function(a,t){if(this.guideArrowNode.active=!1,s.pzaGameState.cardIsMove=!1,null!=a)return this.adSlot.node.active=!1,this.cardSelectList.init(),this.cardSelectList.selectPlants=Array.from(a),this.bagNode.active=!1,this.cardSlotNode.active=!1,window.pzaplantManager.initPlantCD(this.cardSelectList.selectPlants),this.initPlant(),void(t&&t());this.startGameCall=t,this.initBag(),this.cardSelectList.init(),this.refreshAdSlot(),this.bagNode.active=!0,this.daveRewardNode.active=!0,this.cardSlotNode.active=!0,this.lookLawnBtn.active=!1;for(var e=0;e<this.cardSlotList.length;e++){var o=this.cardSlotList[e];null!=o&&(o.active=e<m.pzaLocalData.data.plantSlotCount)}14!=s.pzaGameState.curPart?this.initLastSelectPlants():this.initStarFruit()},t.prototype.weekTwoInit=function(){var a=this,t=function(t){var e=u.pzaGameConfig.canChoosePlants(s.pzaGameState.curChapter);e=e.filter(function(a){return!t.includes(a)}),s.pzaGameState.weekTwoInitPlants.length<=0&&(s.pzaGameState.weekTwoInitPlants=b.pzaUtil.getRandomArrayValue(e,3)),s.pzaGameState.weekTwoInitPlants.forEach(function(t){a.cardSelectList.selectPlants.push(t),a.cardSelectList.selectPlant(t,a.putPlantToBagCall.bind(a),t==p.pzaPlantEnum.IMITATER,!0)}),a.bagCards.forEach(function(a){null==a||a.lock||s.pzaGameState.weekTwoInitPlants.indexOf(a.curPlantType)>=0&&a.selectFull(!0)})},e=m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode];if(null==e||e.length<=0)t([]);else{e.indexOf(p.pzaPlantEnum.SUPER_CHOMPER)>=0&&m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.SUPER_CHOMPER)<0&&(e=e.filter(function(a){return a!==p.pzaPlantEnum.SUPER_CHOMPER})),s.pzaGameState.curImitaterPlant=m.pzaLocalData.data.imitaterUsePlant[s.pzaGameState.gameMode];for(var o=[],n=3;n<e.length;n++)o.push(e[n]);t(o),this.createLastCards(o)}},t.prototype.initStarFruit=function(){this.cardSelectList.selectPlants.push(p.pzaPlantEnum.STAR_FRUIT),this.cardSelectList.selectPlant(p.pzaPlantEnum.STAR_FRUIT,this.putPlantToBagCall.bind(this),!1,!0),this.bagCards.forEach(function(a){null==a||a.lock||a.curPlantType==p.pzaPlantEnum.STAR_FRUIT&&a.selectFull(!0)})},t.prototype.initLastSelectPlants=function(){var a=m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode];null==a||a.length<=0||(s.pzaGameState.isMiniMode()&&(a=[]),s.pzaGameState.curImitaterPlant=m.pzaLocalData.data.imitaterUsePlant[s.pzaGameState.gameMode],((s.pzaGameState.gameMode==s.pzaGameMode.NORMAL||s.pzaGameState.gameMode==s.pzaGameMode.SURVIVAL||s.pzaGameState.gameMode==s.pzaGameMode.SUR_ENDLESS||s.pzaGameState.gameMode==s.pzaGameMode.MINIGAME)&&s.pzaGameState.curChapter>=5||s.pzaGameState.gameMode==s.pzaGameMode.NORMAL_WEEKTWO&&s.pzaGameState.curChapter>=10)&&(this.disablePlant(a,p.pzaPlantEnum.LaserBean),this.disablePlant(a,p.pzaPlantEnum.FireBlover)),this.createLastCards(a))},t.prototype.disablePlant=function(a,t){-1!=a.indexOf(t)&&a.splice(a.indexOf(t)),s.pzaGameState.curImitaterPlant==t&&(s.pzaGameState.curImitaterPlant=null)},t.prototype.createLastCards=function(a){var t=this,e=!1;a.forEach(function(a){t.cardSelectList.selectPlants.push(a),t.cardSelectList.selectPlant(a,t.putPlantToBagCall.bind(t),a==p.pzaPlantEnum.IMITATER),a==p.pzaPlantEnum.COFFEE_BEAN?e=!0:a==p.pzaPlantEnum.IMITATER&&(t.imitaterMask.active=!0)});var o=this.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount;this.bagCards.forEach(function(t){null==t||t.lock||(null!=t.curPlantType&&a.indexOf(t.curPlantType)>=0&&t.initSelect(),e&&t.refreshRecommend(!0),o&&t.selectFull(!0))}),o=this.cardSelectList.selectPlants.length<m.pzaLocalData.data.plantSlotCount&&this.ableChoseCardCount()>0,b.pzaUtil.switchGraySprite(this.startBtn,o)},t.prototype.initZjBag=function(){for(var a=[175,177,103,140,167,132,163,162,124,131,104,150,152,141,156,173],t=0;t<a.length;t++)this.createBagCard(a[t])},t.prototype.initBag=function(){for(var a=p.pzaPlantEnum.GATLING_PEA;a<=p.pzaPlantEnum.COB_CANNON;a++)m.pzaLocalData.data.ownPlants.indexOf(a)<0||this.createBagCard(a);for(m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.SUPER_CHOMPER)>=0&&this.createBagCard(p.pzaPlantEnum.SUPER_CHOMPER),a=p.pzaPlantEnum.PEA_SHOOTER;a<=p.pzaPlantEnum.MELON_PULT;a++)(s.pzaGameState.isMiniMode()||s.pzaGameState.isSurvival()||m.pzaLocalData.data.ownPlants.indexOf(a)>=0)&&this.createBagCard(a);if(m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.CAIWEN)>=0&&this.createBagCard(p.pzaPlantEnum.CAIWEN),m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.LaserBean)>=0&&this.createBagCard(p.pzaPlantEnum.LaserBean),m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.FireBlover)>=0&&this.createBagCard(p.pzaPlantEnum.FireBlover),m.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.BOOM_NUT)>=0&&this.createBagCard(p.pzaPlantEnum.BOOM_NUT),!s.pzaGameState.isMiniMode())for(a=p.pzaPlantEnum.GATLING_PEA;a<=p.pzaPlantEnum.COB_CANNON;a++)m.pzaLocalData.data.ownPlants.indexOf(a)>=0||(m.pzaLocalData.isTrailPlant&&s.pzaGameState.isSurvival()?this.createBagCard(a,null,!0):this.createBagCard(a))},t.prototype.createBagCard=function(a,t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var o=c.pzaGameCommonPool.requestInstant(this.cardPrefab,!1);if(null!=o){o.setParent(this.cardBag);var n=o.getComponent(M.pzaBagPlantCard);if(null!=n)return n.bindData(a,this.clickBagCardCall.bind(this),null,t,e),this.bagCards.push(n),n}},t.prototype.selectCard=function(){s.pzaGameState.selectCard!=s.pzaSelectCardType.SLOT_CARD&&this.clickListCardCall(null)},t.prototype.clickListCardCall=function(a){var t=s.pzaGameState.selectPlant;if(this.cardSelectList.cardList.forEach(function(e){null!=e&&(null!=a&&e.curPlantType!=t||e.diselect())}),null!=a&&a!=t&&this.cardSelectList.cardList.forEach(function(t){null!=t&&t.curPlantType==a&&t.select()}),null!=a&&window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_PLANT_1_1){if(0==window.pzaGuideManager.guideStep&&null!=s.pzaGameState.selectPlant)return void window.pzaGuideManager.guideStepNext();if(6==window.pzaGuideManager.guideStep&&null!=s.pzaGameState.selectPlant)return void window.pzaGuideManager.hideGuide();if((1==window.pzaGuideManager.guideStep||6==window.pzaGuideManager.guideStep)&&null==s.pzaGameState.selectPlant)return void window.pzaGuideManager.guideStepPre()}},t.prototype.clickBagCardCall=function(a,t,e){var o=this;void 0===e&&(e=!1);var n=this.cardSelectList.getNextVoidPos();if(null!=t&&null!=n){var i=this.node.convertToNodeSpaceAR(n),r=this.node.convertToNodeSpaceAR(t);e?this.cardSelectList.selectPlants.push(p.pzaPlantEnum.IMITATER):this.cardSelectList.selectPlants.push(a);var l=c.pzaGameCommonPool.requestInstant(this.cardPrefab,!1);if(null!=l){l.setParent(this.node),l.setPosition(r);var u=l.getComponent(M.pzaBagPlantCard);u.bindData(a,null,e),S.pzaCommonMask.showMask(),u.moveTo(i,.2,function(){e?o.cardSelectList.selectPlant(p.pzaPlantEnum.IMITATER,o.putPlantToBagCall.bind(o),!0):o.cardSelectList.selectPlant(a,o.putPlantToBagCall.bind(o),!1),s.pzaGameState.cardIsMove=!1,S.pzaCommonMask.hideMask()}),a==p.pzaPlantEnum.COFFEE_BEAN&&this.bagCards.forEach(function(a){null==a||a.lock||a.refreshRecommend(!0)}),this.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount&&this.bagCards.forEach(function(a){null==a||a.lock||a.selectFull(!0)});var d=this.cardSelectList.selectPlants.length<m.pzaLocalData.data.plantSlotCount&&this.ableChoseCardCount()>0;b.pzaUtil.switchGraySprite(this.startBtn,d)}else s.pzaGameState.cardIsMove=!1}else s.pzaGameState.cardIsMove=!1},t.prototype.putPlantToBagCall=function(a,t){var e=this;if(void 0===t&&(t=!0),null!=a){var o=a.imitaterPlant,n=null,i=null,r=null;if(o?(r=s.pzaGameState.curImitaterPlant,n=this.imitaterNode.convertToWorldSpaceAR(cc.v2())):(r=a.curPlantType,null!=(i=this.getBagCard(r))&&(n=i.node.convertToWorldSpaceAR(cc.v2()))),n){a.bagSelectPlant(null,null);var l=this.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount,u=this.node.convertToNodeSpaceAR(a.node.convertToWorldSpaceAR(cc.v2())),d=this.node.convertToNodeSpaceAR(n),h=c.pzaGameCommonPool.requestInstant(this.cardPrefab,!1);if(null!=h){h.setParent(this.node),h.setPosition(u);var f=h.getComponent(M.pzaBagPlantCard);f.bindData(r,null,o),S.pzaCommonMask.showMask(),f.moveTo(d,.2,function(){S.pzaCommonMask.hideMask(),o?(e.imitaterMask.active=!1,s.pzaGameState.curImitaterPlant=null):i&&i.disSelect();var a=e.cardSelectList.selectPlants.length<m.pzaLocalData.data.plantSlotCount&&e.ableChoseCardCount()>0;b.pzaUtil.switchGraySprite(e.startBtn,a)}),r==p.pzaPlantEnum.COFFEE_BEAN&&this.bagCards.forEach(function(a){null==a||a.lock||a.refreshRecommend(!1)}),l&&this.bagCards.forEach(function(a){null==a||a.lock||m.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(a.curPlantType)>=0||a.selectFull(!1)}),t&&(o?this.cardSelectList.removeSelect(p.pzaPlantEnum.IMITATER):this.cardSelectList.removeSelect(r))}}}},t.prototype.getBagCard=function(a){var t=null;return this.bagCards.forEach(function(e){null==e||e.lock||e.curPlantType==a&&(t=e)}),t},t.prototype.ableChoseCardCount=function(){for(var a=0,t=0;t<this.bagCards.length;t++){var e=this.bagCards[t];null==e||e.lock||e.isSelected||a++}return a},t.prototype.clickImitater=function(){for(var a=this,t=0;t<this.cardSelectList.cardList.length;t++)if(this.cardSelectList.cardList[t].imitaterPlant)return;this.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount||this.imitaterSelectView.init(function(){if(null!=s.pzaGameState.curImitaterPlant){a.imitaterMask.active=!0;var t=a.imitaterNode.convertToWorldSpaceAR(cc.v2());a.clickBagCardCall(s.pzaGameState.curImitaterPlant,t,!0)}})},t.prototype.clickHandBook=function(){f.pzaSoundManager.playSFX(),g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(C.pzaHandbookView);t&&t.jdInit()})},t.prototype.clickShop=function(){var a=this;f.pzaSoundManager.playSFX();var t=this.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount;g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.SHOP_VIEW,function(e){var o=e&&e.getComponent(_.pzaShopView);o&&o.bindCloseCall(!1,function(){a.refreshAdSlot();for(var e=0;e<a.cardSlotList.length;e++){var o=a.cardSlotList[e];null!=o&&(o.active=e<m.pzaLocalData.data.plantSlotCount)}var n=a.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount;t&&!n&&a.bagCards.forEach(function(a){null==a||a.lock||m.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(a.curPlantType)>=0||a.selectFull(!1)}),n=a.cardSelectList.selectPlants.length<m.pzaLocalData.data.plantSlotCount&&a.ableChoseCardCount()>0,b.pzaUtil.switchGraySprite(a.startBtn,n)},function(t){if(t==p.pzaPlantEnum.IMITATER)a.imitaterNode.active=!0;else for(var e=0;e<a.bagCards.length;e++){var o=a.bagCards[e];if(null!=o&&null==o.curPlantType){var n=a.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount;o.bindData(t,a.clickBagCardCall.bind(a)),n&&o.selectFull(!0);break}}})})},t.prototype.clickMenu=function(){v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GAME_PAUSE,null),f.pzaSoundManager.pausePlayMusic();var a=!1;s.pzaGameState.isSurvival()&&1!=s.pzaGameState.curPart&&(a=!0),g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.GAME_MENU_VIEW,function(t){var e=t&&t.getComponent(T.pzaMenuView);e&&e.init(function(){v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GAME_RESUME,null)},a)})},t.prototype.clickLookLawn=function(){var a=this;this.bagNode.active=!1,window.pzaMapManager.lookLawn(function(){y.pzaTipManager.showGameTip("\u70b9\u51fb\u7ee7\u7eed\u6e38\u620f",function(){window.pzaMapManager.cancelLookLawn(function(){a.bagNode.active=!0})},!0)})},t.prototype.clickStart=function(){var a=this;f.pzaSoundManager.playSFX(),this.cardSelectList.selectPlants.length<m.pzaLocalData.data.plantSlotCount&&this.ableChoseCardCount()>0?y.pzaTipManager.showHomeTip("\u8bf7\u70b9\u51fb\u690d\u7269\u5361\u7247\uff0c\u5c06\u5176\u6dfb\u52a0\u5230\u5de6\u4fa7\u7684\u690d\u7269\u5361\u69fd\u4e2d",null,2):this.checkPuffShroom(function(){a.checkBallZombie(function(){a.checkPongPlant(function(){a.checkFlowerPot(function(){a.checkSunPlant(function(){a.checkAdvancePlant(p.pzaPlantEnum.GATLING_PEA,p.pzaPlantEnum.REPEATER,function(){a.checkAdvancePlant(p.pzaPlantEnum.TWIN_SUNFLOWER,p.pzaPlantEnum.SUN_FLOWER,function(){a.checkAdvancePlant(p.pzaPlantEnum.GLOOM_SHROOM,p.pzaPlantEnum.FUME_SHROOM,function(){a.checkAdvancePlant(p.pzaPlantEnum.CATTAIL,p.pzaPlantEnum.LILY_PAD,function(){a.checkAdvancePlant(p.pzaPlantEnum.WINTER_MELON,p.pzaPlantEnum.MELON_PULT,function(){a.checkAdvancePlant(p.pzaPlantEnum.GOLD_MAGNET,p.pzaPlantEnum.MAGNET_SHROOM,function(){a.checkAdvancePlant(p.pzaPlantEnum.SPIKEROCK,p.pzaPlantEnum.SPIKEWEED,function(){a.checkAdvancePlant(p.pzaPlantEnum.COB_CANNON,p.pzaPlantEnum.KERNEL_PULT,function(){a.checkAdvancePlant(p.pzaPlantEnum.SUPER_CHOMPER,p.pzaPlantEnum.CHOMPER,function(){if(a.clearBag(),a.bagNode.active=!1,a.adSlot.node.active=!1,s.pzaGameState.isSurvival()&&m.pzaLocalData.data.preOpenSurvival||(m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode]=a.cardSelectList.selectPlants,m.pzaLocalData.data.imitaterUsePlant[s.pzaGameState.gameMode]=s.pzaGameState.curImitaterPlant,m.pzaLocalData.addDirty("modeUsePlants","imitaterUsePlant")),s.pzaGameState.isSurvival()){m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode]=a.cardSelectList.selectPlants;for(var t=0;t<m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode].length;t++){var e=m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode][t];e>40&&!m.pzaLocalData.data.ownPlants.includes(e)&&(m.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode].splice(t,1),t--)}m.pzaLocalData.addDirty("modeUsePlants")}window.pzaplantManager.initPlantCD(a.cardSelectList.selectPlants),a.cardSelectList.selectPlants=[],a.cardSelectList.cardList.forEach(function(t){t.curPlantType&&a.cardSelectList.selectPlants.push(t.curPlantType)}),a.startGameCall&&a.startGameCall(),s.pzaGameState.isSurvival()&&(s.pzaGameState.hasPlantSelect=!1)})})})})})})})})})})})})})})},t.prototype.initPlant=function(){if(this.cardSelectList){for(var a=0;a<this.cardSelectList.selectPlants.length;a++){var t=this.cardSelectList.cardList[a],e=this.cardSelectList.selectPlants[a];null!=t&&null!=e&&t.bindData(e,this.clickListCardCall.bind(this),this.showGuideArrow.bind(this),a)}this.node.getComponent(cc.Widget).updateAlignment(),this.cardSlotNode.active=!1}},t.prototype.showGuideArrow=function(a){null!=a?(this.guideArrowNode.active=!0,this.guideArrowNode.stopAllActions(),this.guideArrowNode.setPosition(a),this.guideArrowNode.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(a.x,a.y+20)),cc.moveTo(.2,cc.v2(a.x,a.y)))))):this.guideArrowNode.active=!1},t.prototype.clearBag=function(){this.bagCards.forEach(function(a){a&&a.close()}),this.bagCards=[]},t.prototype.checkSunPlant=function(a){this.cardSelectList.hasPlant(p.pzaPlantEnum.SUN_FLOWER)?a&&a():this.cardSelectList.hasPlant(p.pzaPlantEnum.SUN_SHROOM)?a&&a():this.cardSelectList.hasPlant(p.pzaPlantEnum.TWIN_SUNFLOWER)?a&&a():g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(E.pzaWarningView);e&&e.show("\u4f60\u6ca1\u6709\u9009\u80fd\u4ea7\u751f\u80fd\u91cf\u7684\u690d\u7269\uff0c\n\u786e\u5b9a\u8981\u7ee7\u7eed\u5417\uff1f","\u662f","\u91cd\u9009",a,null)})},t.prototype.checkPuffShroom=function(a){s.pzaGameState.isSurvival()||2!=s.pzaGameState.curChapter||1!=s.pzaGameState.curPart?a&&a():this.cardSelectList.hasPlant(p.pzaPlantEnum.PUFF_SHROOM)?a&&a():g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(E.pzaWarningView);e&&e.show("\u8fd9\u5173\u5982\u679c\u4e0d\u643a\u5e26\u5c0f\u5c71\u7af9\u5c06\u4f1a\u5f88\u96be\u3002\n\u4f60\u786e\u5b9a\u4e0d\u4f7f\u7528\u5c0f\u5c71\u7af9\u5417\uff1f","\u662f","\u91cd\u9009",a,null)})},t.prototype.checkPongPlant=function(a){3==s.pzaGameState.curChapter||4==s.pzaGameState.curChapter?this.cardSelectList.hasPlant(p.pzaPlantEnum.LILY_PAD)||this.cardSelectList.hasPlant(p.pzaPlantEnum.TANGLE_KELP)||this.cardSelectList.hasPlant(p.pzaPlantEnum.SEA_SHROOM)?a&&a():g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(E.pzaWarningView);s.pzaGameState.isSurvival()||3!=s.pzaGameState.curChapter||1!=s.pzaGameState.curPart?e&&e.show("\u8fd9\u5173\u5982\u679c\u4e0d\u4f7f\u7528\u6c34\u751f\u690d\u7269\u5c06\u4f1a\u5f88\u96be\u3002\n\u4f60\u786e\u5b9a\u4e0d\u4f7f\u7528\u4efb\u4f55\u6c34\u751f\u690d\u7269\u5417\uff1f","\u662f","\u91cd\u9009",a,null):e&&e.show("\u8fd9\u5173\u5982\u679c\u4e0d\u4f7f\u7528\u8377\u53f6\u5c06\u4f1a\u5f88\u96be\u3002\n\u4f60\u786e\u5b9a\u4e0d\u4f7f\u7528\u8377\u53f6\u5417\uff1f","\u662f","\u91cd\u9009",a,null)}):a&&a()},t.prototype.checkBallZombie=function(a){var t=null;null==(t=s.pzaGameState.isSurvival()?s.pzaGameState.survivalConfig:d.pzaGamePartConfig.getPartConfig(s.pzaGameState.curChapter,s.pzaGameState.curPart))||t.zombieTypes.indexOf(l.pzaZombieEnum.BALLOON_ZOMBIE)<0?a&&a():this.cardSelectList.hasPlant(p.pzaPlantEnum.BLOVER)||this.cardSelectList.hasPlant(p.pzaPlantEnum.CACTUS)||this.cardSelectList.hasPlant(p.pzaPlantEnum.CATTAIL)?a&&a():g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(E.pzaWarningView);e&&e.show("\u4f60\u6ca1\u6709\u9009\u80fd\u5bf9\u4ed8\u98de\u884c\u50f5\u5c38\u7684\u690d\u7269\uff0c\n\u4f60\u786e\u5b9a\u8981\u7ee7\u7eed\u5417\uff1f","\u662f","\u91cd\u9009",a,null)})},t.prototype.checkFlowerPot=function(a){5!=s.pzaGameState.curChapter||1==s.pzaGameState.curPart&&!s.pzaGameState.isSurvival()?a&&a():this.cardSelectList.hasPlant(p.pzaPlantEnum.FLOWER_POT)?a&&a():g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(E.pzaWarningView);e&&e.show("\u8fd9\u5173\u5982\u679c\u4e0d\u4f7f\u7528\u82b1\u76c6\u5c06\u4f1a\u975e\u5e38\u7684\u96be\u3002\n\u4f60\u786e\u5b9a\u8981\u7ee7\u7eed\u5417\uff1f","\u662f","\u91cd\u9009",a,null)})},t.prototype.checkAdvancePlant=function(a,t,e){if(this.cardSelectList.hasPlant(a))if(this.cardSelectList.hasPlant(t))e&&e();else{var o=u.pzaGameConfig.getPlantConfig(a),n=u.pzaGameConfig.getPlantConfig(t);null!=o&&null!=n?g.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(E.pzaWarningView);t&&t.show("\u4f60\u786e\u5b9a\u771f\u7684\u60f3\u8981\u5728\u6ca1\u6709"+n.name+"\u7684\u60c5\u51b5\u4e0b\n\u4f7f\u7528"+o.name+"\uff1f","\u662f","\u91cd\u9009",e,null)}):e&&e()}else e&&e()},t.prototype.refreshAdSlot=function(){this.adSlot.node.active=!1,7==m.pzaLocalData.data.plantSlotCount&&(this.adSlot.node.active=!0,this.adSlot.node.y=-584,this.adSlot.spriteFrame=this.adSlotFrames[1],this.adSlot.node.getChildByName("adTickIcon").y=10.917,this.slotAdCount.node.active=!0,this.slotAdCount.string="("+m.pzaLocalData.data.slot8AdCount+"/2)",z.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"11"},{name:"adname",value:"\u89e3\u9501\u5361\u69fd8"})),6==m.pzaLocalData.data.plantSlotCount&&(this.adSlot.node.active=!0,this.adSlot.node.y=-506,this.adSlot.spriteFrame=this.adSlotFrames[0],this.adSlot.node.getChildByName("adTickIcon").y=-2,this.slotAdCount.node.active=!1,z.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"10"},{name:"adname",value:"\u89e3\u9501\u5361\u69fd7"}))},t.prototype.clickAdSlot=function(){var a=this,t="10";7==m.pzaLocalData.data.plantSlotCount&&(t="11"),D.pzaChannel.instance().showVideo({sucCall:function(){if(7==m.pzaLocalData.data.plantSlotCount&&(m.pzaLocalData.data.slot8AdCount++,m.pzaLocalData.addDirty("slot8AdCount"),m.pzaLocalData.data.slot8AdCount<2))a.slotAdCount.string="("+m.pzaLocalData.data.slot8AdCount+"/2)";else{var t=a.cardSelectList.selectPlants.length>=m.pzaLocalData.data.plantSlotCount;m.pzaLocalData.data.plantSlotCount++,m.pzaLocalData.addDirty("plantSlotCount"),a.adSlot.node.active=!1;for(var e=0;e<a.cardSlotList.length;e++){var o=a.cardSlotList[e];null!=o&&(o.active=e<m.pzaLocalData.data.plantSlotCount)}t&&a.bagCards.forEach(function(a){null==a||a.lock||m.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(a.curPlantType)>=0||a.selectFull(!1)});var n=a.cardSelectList.selectPlants.length<m.pzaLocalData.data.plantSlotCount&&a.ableChoseCardCount()>0;b.pzaUtil.switchGraySprite(a.startBtn,n),a.refreshAdSlot()}},failCall:function(){},endCall:function(){},posName:"\u6269\u5145\u5361\u69fd",adsid:t})},t.prototype.clickClear=function(){var a=this;if(f.pzaSoundManager.playSFX(),this.cardSelectList.cardList.forEach(function(t){if(null!=t&&null!=t.curPlantType){if(t.curPlantType==p.pzaPlantEnum.STAR_FRUIT&&s.pzaGameState.isMiniMode()&&14==s.pzaGameState.curPart)return;if(m.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(t.curPlantType)>=0)return;a.putPlantToBagCall(t,!1)}}),this.cardSelectList.selectPlants=[],s.pzaGameState.isMiniMode()&&14==s.pzaGameState.curPart&&this.cardSelectList.selectPlants.push(p.pzaPlantEnum.STAR_FRUIT),m.pzaLocalData.isWeekTwo)return s.pzaGameState.weekTwoInitPlants.forEach(function(t){a.cardSelectList.selectPlants.push(t)}),void this.bagCards.forEach(function(a){null==a||a.lock||s.pzaGameState.weekTwoInitPlants.indexOf(a.curPlantType)>=0&&a.selectFull(!0)})},t.prototype.clickNextPage=function(){this.arrowIsDown=!this.arrowIsDown,this.arrowIsDown?(this.cardSelectList.showPrev(),this.nextArrow.angle=0):(this.nextArrow.angle=180,this.cardSelectList.showNext())},i([I({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cardPrefab",void 0),i([I({displayName:"\u5361\u7247\u80cc\u5305\u5bb9\u5668",type:cc.Node})],t.prototype,"cardBag",void 0),i([I({displayName:"\u5f00\u59cb\u6309\u94ae",type:cc.Sprite})],t.prototype,"startBtn",void 0),i([I({displayName:"\u80cc\u5305\u8282\u70b9",type:cc.Node})],t.prototype,"bagNode",void 0),i([I({displayName:"\u5361\u7247\u9009\u62e9\u5217\u8868",type:B.pzaPlantSelectCardList})],t.prototype,"cardSelectList",void 0),i([I({displayName:"\u5361\u7247\u69fd\u8282\u70b9",type:cc.Node})],t.prototype,"cardSlotNode",void 0),i([I({displayName:"\u5361\u7247\u69fd",type:[cc.Node]})],t.prototype,"cardSlotList",void 0),i([I({displayName:"\u5361\u7247\u5f15\u5bfc\u7bad\u5934",type:cc.Node})],t.prototype,"guideArrowNode",void 0),i([I({displayName:"\u5546\u5e97\u6309\u94ae",type:cc.Node})],t.prototype,"shopBtn",void 0),i([I({displayName:"\u770b\u8349\u576a\u6309\u94ae",type:cc.Node})],t.prototype,"lookLawnBtn",void 0),i([I({displayName:"\u56fe\u9274\u6309\u94ae",type:cc.Node})],t.prototype,"bookBtn",void 0),i([I({displayName:"\u53d8\u8eab\u8304\u5b50",type:cc.Node})],t.prototype,"imitaterNode",void 0),i([I({displayName:"\u8304\u5b50\u906e\u7f69",type:cc.Node})],t.prototype,"imitaterMask",void 0),i([I({displayName:"\u8304\u5b50\u9009\u62e9\u754c\u9762",type:w.pzaImitaterSelectView})],t.prototype,"imitaterSelectView",void 0),i([I({displayName:"\u6234\u592b\u5b9d\u85cf\u754c\u9762",type:cc.Node})],t.prototype,"daveRewardNode",void 0),i([I({displayName:"\u5e7f\u544a\u5361\u69fd",type:cc.Sprite})],t.prototype,"adSlot",void 0),i([I({displayName:"\u5361\u69fd\u5e7f\u544a\u6b21\u6570",type:cc.Label})],t.prototype,"slotAdCount",void 0),i([I({displayName:"\u5e7f\u544a\u5361\u69fd\u56fe",type:[cc.SpriteFrame]})],t.prototype,"adSlotFrames",void 0),i([I({displayName:"\u4e0b\u4e00\u9875\u6309\u94ae",type:cc.Node})],t.prototype,"nextPage",void 0),i([I({displayName:"\u4e0b\u4e00\u9875\u7bad\u5934",type:cc.Node})],t.prototype,"nextArrow",void 0),i([I({displayName:"\u8bd5\u7528\u690d\u7269\u754c\u9762",type:cc.Node})],t.prototype,"trialPlant",void 0),i([I({displayName:"\u8bd5\u7528\u690d\u7269\u540d\u79f0",type:cc.Label})],t.prototype,"trialPlantName",void 0),i([I({displayName:"\u8bd5\u7528\u690d\u7269\u4ecb\u7ecd",type:cc.Label})],t.prototype,"trialPlantDesc",void 0),i([I({type:cc.Sprite})],t.prototype,"trialPlantSp",void 0),i([I({type:[cc.SpriteFrame]})],t.prototype,"trialPlantSpData",void 0),i([I({displayName:"\u6234\u592b\u5bf9\u8bdd",type:cc.Node})],t.prototype,"DaveDialog",void 0),i([I(cc.Node)],t.prototype,"clearCardBtn",void 0),i([I(cc.Sprite)],t.prototype,"trialPlantSprite",void 0),i([O],t)}(cc.Component);e.pzaPlantSelectView=N,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGamePartConfig":"pzaGamePartConfig","../../Common/pzaGiftConfig":"pzaGiftConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaCommonMask":"pzaCommonMask","../pzaHandbookView":"pzaHandbookView","../pzaShopView":"pzaShopView","../pzaWarningView":"pzaWarningView","./pzaBagPlantCard":"pzaBagPlantCard","./pzaImitaterSelectView":"pzaImitaterSelectView","./pzaMenuView":"pzaMenuView","./pzaPlantSelectCardList":"pzaPlantSelectCardList"}],pzaPlantSkinCard:[function(a,t,e){"use strict";cc._RF.push(t,"8d707/V2b1IBKhbgH6Drmln","pzaPlantSkinCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantSkinCard=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGameConfig"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaSpriteFrameManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardBoard=null,t.cardBoardFrames=[],t.cardIcon=null,t.voidSlot=null,t.select=null,t.lockNode=null,t.lockImg=null,t.plantType=null,t.clickCall=null,t.hasUnClock=!1,t}return n(t,a),t.prototype.bindData=function(a,t,e){this.select.active=!1,this.lockImg.active=!1,this.lockNode.active=!1,this.plantType=a,this.clickCall=e,this.hasUnClock=t,this.voidSlot.active=!1,this.cardBoard.node.active=!0,this.refreshCardImg();var o=p.pzaGameConfig.getPlantConfig(a);if(null!=o)return this.cardBoard.spriteFrame=this.cardBoardFrames[o.rareLevel],this.hasUnClock?void 0:(this.voidSlot.active=!0,this.lockNode.active=!0,void(this.lockImg.active=!0))},t.prototype.refreshCardImg=function(){s.pzaSpriteFrameManager.loadPlantCard(this.plantType,this.cardIcon)},t.prototype.clickCard=function(){this.hasUnClock&&(l.pzaSoundManager.playSFX(),this.clickCall&&this.clickCall(this.plantType),this.select.active=!0)},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([d({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([d({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([d({displayName:"\u7a7a\u5361\u69fd",type:cc.Node})],t.prototype,"voidSlot",void 0),i([d({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"select",void 0),i([d({displayName:"\u672a\u89e3\u9501\u8282\u70b9",type:cc.Node})],t.prototype,"lockNode",void 0),i([d({displayName:"\u672a\u89e3\u9501\u6807\u5fd7",type:cc.Node})],t.prototype,"lockImg",void 0),i([u],t)}(cc.Component);e.pzaPlantSkinCard=h,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaPlantSkinView:[function(a,t,e){"use strict";cc._RF.push(t,"c244fSnMdZN2rVTQ+zkegTY","pzaPlantSkinView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r,p=a("../Battle/Data/pzaPlantEnum"),l=a("../Battle/Plant/pzaBasePlant"),s=a("../Common/pzaGameCommonPool"),c=a("../Common/pzaGameConfig"),u=a("../Common/pzaLocalData"),d=a("../Common/pzaSoundManager"),h=a("../Common/pzaSpriteFrameManager"),m=a("../Common/pzaTipManager"),f=a("../Common/pzaUIManager"),z=a("../Load/pzaBundleObjectPool"),y=a("../Load/pzaPreLoadManager"),g=a("../utils/pzaChannel"),b=a("./pzaPlantSkinCard"),v=a("./pzaWarningView"),P=cc._decorator,D=P.ccclass,S=P.property;(function(a){a[a.SOURCE=0]="SOURCE",a[a.UNLOCK=1]="UNLOCK",a[a.WEAR=2]="WEAR",a[a.HASWEAR=3]="HASWEAR"})(r||(r={}));var C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.plantCardPre=null,t.cardContent=null,t.selectPlantName=null,t.plantAniNode=null,t.lockNode=null,t.selectNode=null,t.btnLab=null,t.btnImg=null,t.btnImgArr=[],t.plantImg=null,t.plantName=null,t.skinPlantImg=null,t.skinPlantName=null,t.plantWearNode=null,t.plantSkinWearNode=null,t.VideoBtnNode=null,t.videoNumLabel=null,t.btnState=r.SOURCE,t.plantSkinList=[],t.selectPlantType=null,t.isClickSkin=!1,t.plantAni=null,t.skinSourceMap=new Map([[p.pzaPlantEnum.PEA_SHOOTER,"\u51fb\u8d25\u897f\u6e38\u5173\u5361\u8718\u86db\u7cbe\u83b7\u5f97"],[p.pzaPlantEnum.SUN_FLOWER,"\u51fb\u8d25\u897f\u6e38\u5173\u5361\u767d\u9aa8\u7cbe\u83b7\u5f97"],[p.pzaPlantEnum.WALL_NUT,"\u51fb\u8d25\u897f\u6e38\u5173\u5361\u9ec4\u7709\u602a\u83b7\u5f97"],[p.pzaPlantEnum.SNOW_PEA,"\u51fb\u8d25\u897f\u6e38\u5173\u5361\u7ea2\u5b69\u513f\u83b7\u5f97"],[p.pzaPlantEnum.SQUASH,"\u51fb\u8d25\u897f\u6e38\u5173\u5361\u725b\u9b54\u738b\u83b7\u5f97"],[p.pzaPlantEnum.TALL_NUT,"\u5728\u56db\u5b63\u5408\u5408\u7b49\u7ea7\u8fbe\u523010\u7ea7\u540e,\u798f\u5229\u4efb\u52a1\u754c\u9762\u9886\u53d6\u83b7\u5f97"],[p.pzaPlantEnum.CATTAIL,"\u5728\u690d\u7269\u5927\u4f5c\u6218\u901a\u8fc715\u5173\u540e,\u798f\u5229\u4efb\u52a1\u754c\u9762\u9886\u53d6\u83b7\u5f97"],[p.pzaPlantEnum.BLOVER,"\u5728\u5929\u5929\u94fa\u94c1\u8def\u8fbe\u6210120\u661f\u540e,\u798f\u5229\u4efb\u52a1\u754c\u9762\u9886\u53d6\u83b7\u5f97"]]),t.plantSkinMap=new Map([[p.pzaPlantEnum.PEA_SHOOTER,"\u609f\u7a7a\u8c4c\u8c46"],[p.pzaPlantEnum.SUN_FLOWER,"\u5510\u50e7\u5411\u65e5\u8475"],[p.pzaPlantEnum.WALL_NUT,"\u6c99\u50e7\u575a\u679c"],[p.pzaPlantEnum.SNOW_PEA,"\u5c0f\u767d\u9f99\u5c04\u624b"],[p.pzaPlantEnum.SQUASH,"\u7a9d\u74dc\u516b\u6212"],[p.pzaPlantEnum.TALL_NUT,"\u5929\u738b\u9ad8\u575a\u679c"],[p.pzaPlantEnum.CATTAIL,"\u89c2\u97f3\u732b\u5c3e\u8349"],[p.pzaPlantEnum.BLOVER,"\u98ce\u5a46\u4e09\u53f6\u8349"]]),t}return n(t,a),t.prototype.onEnable=function(){this.plantWearNode.active=!1,this.plantSkinWearNode.active=!1,this.isClickSkin=!1,this.cardContent.width=2930;for(var a=[],t=[p.pzaPlantEnum.PEA_SHOOTER,p.pzaPlantEnum.SUN_FLOWER,p.pzaPlantEnum.WALL_NUT,p.pzaPlantEnum.SNOW_PEA,p.pzaPlantEnum.SQUASH,p.pzaPlantEnum.TALL_NUT,p.pzaPlantEnum.CATTAIL,p.pzaPlantEnum.BLOVER],e=0;e<t.length;e++){var o=u.pzaLocalData.data.plantSkinStates[""+t[e]]||0;o||(u.pzaLocalData.data.plantSkinStates[""+t[e]]=0);var n=new c.pzaPlantSkinUnLockConf(t[e],o);a.push(n)}for(a.sort(function(a,t){var e={2:0,1:1,0:2};return e[a.state]-e[t.state]}),e=0;e<a.length;e++){var i=a[e].plantType;(r=s.pzaGameCommonPool.requestInstant(this.plantCardPre)).setParent(this.cardContent),null!=(l=r.getComponent(b.pzaPlantSkinCard))&&(l.bindData(i,!0,this.showPlant.bind(this)),this.plantSkinList.push(l))}for(i=p.pzaPlantEnum.PEA_SHOOTER;i<=p.pzaPlantEnum.MELON_PULT;i++){var r,l;t.indexOf(i)>=0||((r=s.pzaGameCommonPool.requestInstant(this.plantCardPre)).setParent(this.cardContent),null!=(l=r.getComponent(b.pzaPlantSkinCard))&&(l.bindData(i,!1,this.showPlant.bind(this)),this.plantSkinList.push(l)))}this.plantSkinList[0].clickCard()},t.prototype.showPlant=function(a){this.plantSkinList.forEach(function(t){t.plantType!=a&&(t.select.active=!1)}),this.selectPlantType=a;var t=c.pzaGameConfig.getPlantConfig(a);this.selectPlantName.string=t.name,this.plantName.string=t.name,this.skinPlantName.string=this.plantSkinMap.get(a);var e=a>=10?"zw0"+a:"zw00"+a,o=a>=10?"xyzw0"+a:"xyzw00"+a;h.pzaSpriteFrameManager.loadPlantWholeCard(e,this.plantImg),h.pzaSpriteFrameManager.loadPlantWholeCard(o,this.skinPlantImg);var n=u.pzaLocalData.data.plantSkinStates[""+a]||0;this.btnState=0==n?r.SOURCE:2==n?r.UNLOCK:r.HASWEAR,this.btnState==r.UNLOCK&&(this.selectNode.setPosition(cc.v2(257,32)),this.isClickSkin=!0),this.btnState==r.HASWEAR&&(u.pzaLocalData.data.choosePlantSkins[""+this.selectPlantType]?(this.selectNode.setPosition(cc.v2(257,32)),this.isClickSkin=!0):(this.selectNode.setPosition(cc.v2(25,32)),this.isClickSkin=!1)),this.btnState==r.SOURCE&&(u.pzaLocalData.data.choosePlantSkins[""+this.selectPlantType]?(this.selectNode.setPosition(cc.v2(257,32)),this.isClickSkin=!0):(this.selectNode.setPosition(cc.v2(25,32)),this.btnState=r.HASWEAR,this.isClickSkin=!1)),this.refreshTopState(),this.refreshSpine(),this.refreshWearState()},t.prototype.refreshSpine=function(){var a=this,t=y.pzaPreLoadManager.getPlantUrl(this.selectPlantType);if(z.pzaBundleObjectPool.requestInstantByUrl(t,!1,function(t,e){null==t&&null!=e?(e.setParent(a.plantAniNode),e.zIndex=0,e.setPosition(cc.v2()),null!=a.plantAni&&a.plantAni.close(),a.plantAni=e.getComponent(l.pzaBasePlant),null!=a.plantAni&&(a.plantAni.uiShow(),a.selectPlantType==p.pzaPlantEnum.WALL_NUT?a.isClickSkin?a.plantAni.uiShowSkin("body5_1"):a.plantAni.uiShowSkin("body_1"):a.selectPlantType==p.pzaPlantEnum.TALL_NUT?a.isClickSkin?a.plantAni.uiShowSkin("skin2_1"):a.plantAni.uiShowSkin("skin_1"):a.isClickSkin?a.plantAni.uiShowSkin("skin2"):a.plantAni.uiShowSkin("skin1"))):console.error(t)}),this.isClickSkin)this.selectPlantName.string=this.plantSkinMap.get(this.selectPlantType);else{var e=c.pzaGameConfig.getPlantConfig(this.selectPlantType);this.selectPlantName.string=e.name}},t.prototype.refreshTopState=function(){switch(this.btnLab.node.parent.active=!0,this.VideoBtnNode.active=!1,this.videoNumLabel.node.active=!1,this.btnState){case r.SOURCE:if(this.lockNode.active=!0,this.btnLab.string="\u6765\u6e90",this.btnImg.spriteFrame=this.btnImgArr[0],"wx"!=g.pzaChannel.instance().channel&&(this.selectPlantType==p.pzaPlantEnum.TALL_NUT||this.selectPlantType==p.pzaPlantEnum.CATTAIL||this.selectPlantType==p.pzaPlantEnum.BLOVER)){var a=u.pzaLocalData.data.plantSkinVideoNum[""+this.selectPlantType];a||(a=0,u.pzaLocalData.data.plantSkinVideoNum[""+this.selectPlantType]=0),this.VideoBtnNode.active=!0,this.videoNumLabel.node.active=!0,this.btnLab.node.parent.active=!1,this.videoNumLabel.string="("+a+"/"+u.pzaLocalData.data.plantSkinVideoMax+")"}break;case r.UNLOCK:this.lockNode.active=!0,this.btnLab.string="\u89e3\u9501",this.btnImg.spriteFrame=this.btnImgArr[0];break;case r.WEAR:this.lockNode.active=!1,this.btnLab.string="\u7a7f\u6234",this.btnImg.spriteFrame=this.btnImgArr[1];break;case r.HASWEAR:this.btnLab.string="\u5df2\u7a7f\u6234",this.btnImg.spriteFrame=this.btnImgArr[2];var t=u.pzaLocalData.data.choosePlantSkins[""+this.selectPlantType]||0;this.lockNode.active=!t,1==(u.pzaLocalData.data.plantSkinStates[""+this.selectPlantType]||0)&&(this.lockNode.active=!1)}},t.prototype.refreshWearState=function(){u.pzaLocalData.data.choosePlantSkins[""+this.selectPlantType]?(this.plantWearNode.active=!1,this.plantSkinWearNode.active=!0):(this.plantWearNode.active=!0,this.plantSkinWearNode.active=!1)},t.prototype.clickNormalPlant=function(){this.selectNode.setPosition(cc.v2(25,32)),this.isClickSkin=!1;var a=u.pzaLocalData.data.plantSkinStates[""+this.selectPlantType]||0;if(1==a){var t=u.pzaLocalData.data.choosePlantSkins[""+this.selectPlantType]||0;this.btnState=t?r.WEAR:r.HASWEAR,this.refreshTopState()}else 0==a&&(this.btnState=r.HASWEAR,this.refreshTopState());this.refreshSpine()},t.prototype.clickSkinPlant=function(){this.selectNode.setPosition(cc.v2(257,32)),this.isClickSkin=!0;var a=u.pzaLocalData.data.plantSkinStates[""+this.selectPlantType]||0;if(1==a){var t=u.pzaLocalData.data.choosePlantSkins[""+this.selectPlantType]||0;this.btnState=t?r.HASWEAR:r.WEAR,this.refreshTopState()}else 0==a&&(this.btnState=r.SOURCE,this.refreshTopState());this.refreshSpine()},t.prototype.clickBtn=function(){var a=this;switch(this.btnState){case r.SOURCE:f.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(v.pzaWarningView),o=a.skinSourceMap.get(a.selectPlantType);e&&e.show(o,"\u786e\u5b9a",null,null,null,"\u63d0\u793a")});break;case r.UNLOCK:this.lockNode.active=!1,u.pzaLocalData.data.plantSkinStates[""+this.selectPlantType]=1,this.btnState=r.WEAR,this.refreshTopState(),this.selectNode.setPosition(cc.v2(257,32)),this.isClickSkin=!0,u.pzaLocalData.addDirty("plantSkinStates");break;case r.WEAR:this.isClickSkin?u.pzaLocalData.data.choosePlantSkins[""+this.selectPlantType]=1:u.pzaLocalData.data.choosePlantSkins[""+this.selectPlantType]=0,u.pzaLocalData.addDirty("choosePlantSkins"),this.btnState=r.HASWEAR,this.refreshTopState(),this.plantSkinList.forEach(function(t){t.plantType==a.selectPlantType&&t.refreshCardImg()}),this.refreshWearState();break;case r.HASWEAR:}},t.prototype.onDisable=function(){null!=this.plantSkinList&&this.plantSkinList.forEach(function(a){a&&a.close()}),this.plantSkinList=null,null!=this.plantAni&&(this.plantAni.close(),this.plantAni=null)},t.prototype.close=function(){d.pzaSoundManager.playSFX(),s.pzaGameCommonPool.returnInstant(this.node)},t.prototype.clickVideoBtn=function(){var a=this;g.pzaChannel.instance().showVideo({sucCall:function(){u.pzaLocalData.data.plantSkinVideoNum[""+a.selectPlantType]++,u.pzaLocalData.data.plantSkinVideoNum[""+a.selectPlantType]>=u.pzaLocalData.data.plantSkinVideoMax&&(a.btnState=r.UNLOCK,u.pzaLocalData.data.plantSkinStates[""+a.selectPlantType]=2,m.pzaTipManager.showHomeTip("\u89e3\u9501\u6210\u529f",null,2)),u.pzaLocalData.addDirty("plantSkinStates","plantSkinVideoNum"),a.refreshTopState()},failCall:function(){},endCall:function(){},posName:"\u89e3\u9501\u76ae\u80a4",adsid:"38"})},i([S({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],t.prototype,"plantCardPre",void 0),i([S({displayName:"\u5361\u7247\u9884\u8bbe\u7236\u8282\u70b9",type:cc.Node})],t.prototype,"cardContent",void 0),i([S({displayName:"\u690d\u7269\u540d\u79f0",type:cc.Label})],t.prototype,"selectPlantName",void 0),i([S({displayName:"\u690d\u7269\u52a8\u753b\u8282\u70b9",type:cc.Node})],t.prototype,"plantAniNode",void 0),i([S({displayName:"\u9501\u8282\u70b9",type:cc.Node})],t.prototype,"lockNode",void 0),i([S({displayName:"\u9009\u4e2d\u8282\u70b9",type:cc.Node})],t.prototype,"selectNode",void 0),i([S({displayName:"\u6309\u94ae\u6587\u5b57",type:cc.Label})],t.prototype,"btnLab",void 0),i([S({displayName:"\u6309\u94ae\u56fe\u7247",type:cc.Sprite})],t.prototype,"btnImg",void 0),i([S({displayName:"\u56fe\u7247\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"btnImgArr",void 0),i([S({displayName:"\u666e\u901a\u690d\u7269\u56fe\u7247",type:cc.Sprite})],t.prototype,"plantImg",void 0),i([S({displayName:"\u666e\u901a\u690d\u7269\u540d\u79f0",type:cc.Label})],t.prototype,"plantName",void 0),i([S({displayName:"\u76ae\u80a4\u690d\u7269\u56fe\u7247",type:cc.Sprite})],t.prototype,"skinPlantImg",void 0),i([S({displayName:"\u76ae\u80a4\u690d\u7269\u540d\u79f0",type:cc.Label})],t.prototype,"skinPlantName",void 0),i([S({displayName:"\u6b63\u5e38\u7a7f\u6234\u6807\u8bc6",type:cc.Node})],t.prototype,"plantWearNode",void 0),i([S({displayName:"\u76ae\u80a4\u7a7f\u6234\u6807\u8bc6",type:cc.Node})],t.prototype,"plantSkinWearNode",void 0),i([S({displayName:"\u89c6\u9891\u5e7f\u544a\u6309\u94ae",type:cc.Node})],t.prototype,"VideoBtnNode",void 0),i([S({displayName:"\u89c6\u9891\u5e7f\u544a\u6b21\u6570\u6587\u5b57",type:cc.Label})],t.prototype,"videoNumLabel",void 0),i([D],t)}(cc.Component);e.default=C,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Plant/pzaBasePlant":"pzaBasePlant","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaPlantSkinCard":"pzaPlantSkinCard","./pzaWarningView":"pzaWarningView"}],pzaPlantTouch:[function(a,t,e){"use strict";cc._RF.push(t,"86a4cwtXIlMSrXJ0lrmrlsK","pzaPlantTouch");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantTouch=void 0;var r=a("../Common/pzaGameConfig"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaNodeManager"),s=a("../Common/pzaOperationMgr"),c=a("../Common/pzaWorldEventManager"),u=a("../Load/pzaBundleObjectPool"),d=a("../Load/pzaPreLoadManager"),h=a("./Data/pzaGuideType"),m=a("./Effect/pzaShovelEffect"),f=a("./pzaEffectManager"),z=a("./pzaGameState"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.plantTouchNode=null,t.touchShowGraph=null,t.crossHair=null,t.curSelectXIndex=-1,t.curSelectYIndex=-1,t.shovelEffect=null,t.selectCobTime=0,t}return n(t,a),t.prototype.onEnable=function(){this.plantTouchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.plantTouchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.plantTouchNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.plantTouchNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.plantTouchNode._touchListener.setSwallowTouches(!1),this.touchShowGraph.clear(),this.crossHair.active=!1,this.selectCobTime=0},t.prototype.onDisable=function(){this.plantTouchNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.plantTouchNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.plantTouchNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.plantTouchNode.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.isCrossHairOff=function(){return null==z.pzaGameState.selectCard&&null==z.pzaGameState.cobCannon&&!(z.pzaGameState.gameMode==z.pzaGameMode.BANG_JAR||z.pzaGameState.gameMode==z.pzaGameMode.VASE||z.pzaGameState.gameMode==z.pzaGameMode.VASE_ENDLESS)},t.prototype.onTouchStart=function(a){if(!z.pzaGameState.gamePause||!z.pzaGameState.isSurvival()){if(this.isCrossHairOff()){if(this.crossHair.active=!1,z.pzaGameState.gameMode==z.pzaGameMode.KNOCK_ZOMBIE||z.pzaGameState.gameMode==z.pzaGameMode.KNOCK_ZOMBIE_MINIGAME){if(z.pzaGameState.gamePause)return;return void this.showHammer(a,!1)}if(this.checkCobCannon(a),null==z.pzaGameState.cobCannon)return}var t=a&&a.getLocation();if(!(null==t||t.y>=620)){var e=this.node.convertToNodeSpaceAR(t);this.showTouchBlock(e)}}},t.prototype.onTouchMove=function(a){if(!z.pzaGameState.isGameEnd&&!z.pzaGameState.isMenuShow)if(this.isCrossHairOff())this.crossHair.active=!1;else{var t=a&&a.getLocation();if(!(null==t||t.y>=620)){var e=this.node.convertToNodeSpaceAR(t);this.showTouchBlock(e)}}},t.prototype.onTouchEnd=function(a){if(!z.pzaGameState.isGameEnd&&!z.pzaGameState.isMenuShow){var t=a&&a.getLocation();if(null==t||t.y>=620)this.reset();else if(null==z.pzaGameState.selectPlant){if(null!=z.pzaGameState.selectZombie)return this.curSelectXIndex>=0&&this.curSelectYIndex>=0&&(window.pzazombieManager.playerPutZombie(this.curSelectXIndex,this.curSelectYIndex,z.pzaGameState.selectZombie),z.pzaGameState.selectCard=null,z.pzaGameState.selectZombie=null,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null)),void this.reset();if(z.pzaGameState.gameMode===z.pzaGameMode.BANG_JAR&&window.pzaplantManager.bangJar(this.curSelectXIndex,this.curSelectYIndex)&&this.showHammer(a,!0),z.pzaGameState.selectCard==z.pzaSelectCardType.SHOVE_CARD)return this.curSelectXIndex>=0&&this.curSelectYIndex>=0&&window.pzaplantManager.hasPlant(this.curSelectXIndex,this.curSelectYIndex)?(window.pzaplantManager.shovelPlant(this.curSelectXIndex,this.curSelectYIndex),window.pzaGuideManager.guideType==h.pzaGuideType.GUIDE_SHOVEL_1_5&&(2==window.pzaGuideManager.guideStep||3==window.pzaGuideManager.guideStep&&window.pzaplantManager.getAllPlantCount()<=0)&&window.pzaGuideManager.guideStepNext()):window.pzaGuideManager.guideType==h.pzaGuideType.GUIDE_SHOVEL_1_5&&2==window.pzaGuideManager.guideStep&&window.pzaGuideManager.guideStepPre(),z.pzaGameState.selectCard=null,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null),void this.reset();if(null!=z.pzaGameState.cobCannon&&Date.now()-this.selectCobTime>100){if(this.curSelectXIndex>=0&&this.curSelectYIndex>=0){var e=this.plantTouchNode.convertToNodeSpaceAR(t);c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.LAUNCH_COB_CANNON,{data:z.pzaGameState.cobCannon,pos:e,xIndex:this.curSelectXIndex,yIndex:this.curSelectYIndex})}z.pzaGameState.cobCannon=null}this.reset()}else{if(this.curSelectXIndex>=0&&this.curSelectYIndex>=0)if(z.pzaGameState.selectCard==z.pzaSelectCardType.AD_CARD){if(window.pzaplantManager.canPlant(this.curSelectXIndex,this.curSelectYIndex,!1)||window.pzaplantManager.adCanPlant(this.curSelectXIndex,this.curSelectYIndex,!0)){if(z.pzaGameState.isPsdhMode())for(var o=z.pzaGameState.map.getMapRow(),n=0;n<o;n++)(window.pzaplantManager.canPlant(this.curSelectXIndex,n,!1)||window.pzaplantManager.adCanPlant(this.curSelectXIndex,n,!1))&&window.pzaplantManager.createAdPlant(z.pzaGameState.selectPlant,this.curSelectXIndex,n);else window.pzaplantManager.createAdPlant(z.pzaGameState.selectPlant,this.curSelectXIndex,this.curSelectYIndex);z.pzaGameState.isMiniMode()&&5!=z.pzaGameState.curPart&&6!=z.pzaGameState.curPart&&c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.PLANT_PLANT,null),s.pzaOperationMgr.isShowChangeSpeedTips(),z.pzaGameState.selectCard=null,z.pzaGameState.selectPlant=null,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null),p.pzaLocalData.bpCreatePlant()}}else if(window.pzaplantManager.canPlant(this.curSelectXIndex,this.curSelectYIndex,!0)){if(z.pzaGameState.isPsdhMode()){o=z.pzaGameState.map.getMapRow();var i=!0;for(n=0;n<=o;n++)window.pzaplantManager.canPlant(this.curSelectXIndex,n,!1)&&(window.pzaplantManager.createPlant(z.pzaGameState.selectPlant,this.curSelectXIndex,n,!1,!1,i),i=!1)}else window.pzaplantManager.createPlant(z.pzaGameState.selectPlant,this.curSelectXIndex,this.curSelectYIndex);z.pzaGameState.isMiniMode()&&5!=z.pzaGameState.curPart&&6!=z.pzaGameState.curPart&&c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.PLANT_PLANT,null),s.pzaOperationMgr.isShowChangeSpeedTips(),z.pzaGameState.selectCard=null,z.pzaGameState.selectPlant=null,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null)}this.reset()}}},t.prototype.onTouchCancel=function(a){if(null!=z.pzaGameState.cobCannon&&Date.now()-this.selectCobTime>100){if(this.curSelectXIndex>=0&&this.curSelectYIndex>=0){var t=a&&a.getLocation();if(null==t||t.y>=620)return void this.reset();var e=this.plantTouchNode.convertToNodeSpaceAR(t);c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.LAUNCH_COB_CANNON,{data:z.pzaGameState.cobCannon,pos:e,xIndex:this.curSelectXIndex,yIndex:this.curSelectYIndex})}z.pzaGameState.cobCannon=null}this.reset()},t.prototype.reset=function(){this.curSelectXIndex=-1,this.curSelectYIndex=-1,this.touchShowGraph.clear(),this.crossHair.active=!1,this.selectCobTime=0,null!=this.shovelEffect&&(this.shovelEffect.close(),this.shovelEffect=null)},t.prototype.showTouchBlock=function(a){if(null!=a){var t=z.pzaGameState.map.getMapXIndex(null,a);if(t<0)return this.reset();var e=z.pzaGameState.map.getMapYIndex(null,a);if(e<0)return this.reset();if(t!=this.curSelectXIndex||e!=this.curSelectYIndex){if(this.touchShowGraph.clear(),null!=z.pzaGameState.selectPlant){if(z.pzaGameState.selectCard==z.pzaSelectCardType.AD_CARD){if(!window.pzaplantManager.canPlant(t,e,!1)&&!window.pzaplantManager.adCanPlant(t,e,!1))return this.curSelectXIndex=t,void(this.curSelectYIndex=e)}else if(!window.pzaplantManager.canPlant(t,e,!1))return this.curSelectXIndex=t,void(this.curSelectYIndex=e)}else{if(null!=z.pzaGameState.selectZombie)return this.curSelectXIndex=t,void(this.curSelectYIndex=e);z.pzaGameState.selectCard==z.pzaSelectCardType.SHOVE_CARD&&(null==this.shovelEffect?this.createShovelEffect(t,e):this.shovelEffect.changeShovelPos(t,e))}if(this.curSelectXIndex=t,this.curSelectYIndex=e,null!=z.pzaGameState.selectCard||null!=z.pzaGameState.cobCannon){var o=z.pzaGameState.map.getMapRow(),n=z.pzaGameState.map.getMapColumn(),i=z.pzaGameState.map.getMapSkewRadion(),r=z.pzaGameState.map.getMapSkewColumn(),p=z.pzaGameState.map.getBlockAllPos(t,0,0);this.touchShowGraph.moveTo(p.x,p.y);var l=z.pzaGameState.map.getBlockAllPos(t,0,1);this.touchShowGraph.lineTo(l.x,l.y);var s=z.pzaGameState.map.getBlockAllPos(t,e,1);if(this.touchShowGraph.lineTo(s.x,s.y),i>0&&r>0&&t<r-1){var c=z.pzaGameState.map.getBlockAllPos(r-1,e,1);this.touchShowGraph.lineTo(c.x,c.y)}var u=z.pzaGameState.map.getBlockAllPos(n-1,e,1);this.touchShowGraph.lineTo(u.x,u.y);var d=z.pzaGameState.map.getBlockAllPos(n-1,e,2);this.touchShowGraph.lineTo(d.x,d.y),i>0&&r>0&&t<r-1&&(c=z.pzaGameState.map.getBlockAllPos(r-1,e,2),this.touchShowGraph.lineTo(c.x,c.y));var h=z.pzaGameState.map.getBlockAllPos(t,e,2);this.touchShowGraph.lineTo(h.x,h.y);var m=z.pzaGameState.map.getBlockAllPos(t,o-1,2);this.touchShowGraph.lineTo(m.x,m.y);var f=z.pzaGameState.map.getBlockAllPos(t,o-1,3);this.touchShowGraph.lineTo(f.x,f.y);var y=z.pzaGameState.map.getBlockAllPos(t,e,3);this.touchShowGraph.lineTo(y.x,y.y),i>0&&r>0&&t>r-1&&(c=z.pzaGameState.map.getBlockAllPos(r,e,3),this.touchShowGraph.lineTo(c.x,c.y));var g=z.pzaGameState.map.getBlockAllPos(0,e,3);this.touchShowGraph.lineTo(g.x,g.y);var b=z.pzaGameState.map.getBlockAllPos(0,e,0);this.touchShowGraph.lineTo(b.x,b.y),i>0&&r>0&&t>r-1&&(c=z.pzaGameState.map.getBlockAllPos(r,e,0),this.touchShowGraph.lineTo(c.x,c.y));var v=z.pzaGameState.map.getBlockAllPos(t,e,0);this.touchShowGraph.lineTo(v.x,v.y),this.touchShowGraph.lineTo(p.x,p.y),this.touchShowGraph.fill(),null!=z.pzaGameState.cobCannon&&this.showCrossHair(a)}}else null!=z.pzaGameState.cobCannon&&this.showCrossHair(a)}},t.prototype.checkCobCannon=function(a){var t=a&&a.getLocation();if(!(null==t||t.y>=620)&&z.pzaGameState.map){var e=this.node.convertToNodeSpaceAR(t),o=z.pzaGameState.map.getMapXIndex(null,e);if(!(o<0)){var n=z.pzaGameState.map.getMapYIndex(null,e);if(!(n<0)){var i=""+o+n,p=window.pzaplantManager.plantDataMap.get(i);null!=p&&null!=p.plantData&&r.pzaPlantConfigData.isCannonPlant(p.plantData.plantType)&&p.plantData.cobLoadFinish&&(z.pzaGameState.cobCannon=p,this.selectCobTime=Date.now())}}}},t.prototype.createShovelEffect=function(a,t){var e=this;if(-1!=a&&-1!=t){var o=l.pzaNodeManager.getBattleUINode();null!=o&&u.pzaBundleObjectPool.requestInstantByUrl(d.pzaResourceUrl.SHOVEL_EFFECT,!1,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(m.pzaShovelEffect);r&&r.init(a,t),e.shovelEffect=r}else console.error(n)})}},t.prototype.showHammer=function(a,t){var e=a&&a.getLocation();if(!(null==e||e.y>=620)){var o=this.plantTouchNode.convertToNodeSpaceAR(e);f.pzaEffectManager.createHammerEffect(o,t)}},t.prototype.showCrossHair=function(a){this.crossHair.active=!0,this.crossHair.setPosition(a)},i([b({displayName:"\u79cd\u690d\u89e6\u6478\u533a\u57df",type:cc.Node})],t.prototype,"plantTouchNode",void 0),i([b({displayName:"\u89e6\u6478\u663e\u793a\u7ed8\u5236",type:cc.Graphics})],t.prototype,"touchShowGraph",void 0),i([b({displayName:"\u51c6\u5fc3",type:cc.Node})],t.prototype,"crossHair",void 0),i([g],t)}(cc.Component);e.pzaPlantTouch=v,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./Data/pzaGuideType":"pzaGuideType","./Effect/pzaShovelEffect":"pzaShovelEffect","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState"}],pzaPlanternEffect:[function(a,t,e){"use strict";cc._RF.push(t,"753510nhkhGFaxmGbSPNYE+","pzaPlanternEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlanternEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=a("../Data/pzaPlantEnum"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.plantType==l.pzaPlantEnum.PLANTERN?this.ani.playAnimation("idle",!0):this.ani.playAnimation("idle2",!0)},t.prototype.logicUpdate=function(){(null==this.baseData||this.baseData.isDead)&&this.close()},t.prototype.pauseSelf=function(){this.ani.pauseAnimation()},t.prototype.resumeSelf=function(){this.ani.resumeAnimation()},i([u({displayName:"\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"ani",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaPlanternEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaPlantEnum":"pzaPlantEnum"}],pzaPlantern:[function(a,t,e){"use strict";cc._RF.push(t,"bb6aaesl+ZIn5FoUcBvWlno","pzaPlantern");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantern=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaPlantEnum"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.getAroundPos=function(){return this.baseData?[""+(this.baseData.xIndex-1)+(this.baseData.yIndex-1),""+this.baseData.xIndex+(this.baseData.yIndex-1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex-1),""+(this.baseData.xIndex-1)+this.baseData.yIndex,""+(this.baseData.xIndex+1)+this.baseData.yIndex,""+(this.baseData.xIndex-1)+(this.baseData.yIndex+1),""+this.baseData.xIndex+(this.baseData.yIndex+1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex+1)]:[]},t.prototype.checkPlanternAround=function(a,t){for(var e=[""+(a-1)+(t-1),""+a+(t-1),""+(a+1)+(t-1),""+(a-1)+t,""+(a+1)+t,""+(a-1)+(t+1),""+a+(t+1),""+(a+1)+(t+1)],o=0;o<e.length;o++){var n=e[o],i=window.pzaplantManager.plantDataMap.get(n);if(i&&i.plantData&&i.plantData.plantType===l.pzaPlantEnum.PLANTERN)return!1}return!0},t.prototype.onDisable=function(){a.prototype.onDisable.call(this)},t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),window.pzaMapManager.planternScatterFog(t),this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};this.animation.playAnimation("idle",!1,o),s.pzaEffectManager.createPlanternEffect(this.baseData,this.baseData.logicPos),r.pzaSoundManager.playAudio("plantern_enter"),c.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.close=function(){a.prototype.close.call(this),window.pzaMapManager.planternRemove(this.baseData)},i([h],t)}(u.pzaBasePlant));e.pzaPlantern=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPogoZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"f38d8KjN7NEmIZuyzFb+qN3","pzaPogoZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPogoZombie2=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaZombieEnum"),l=a("./pzaPogoZombie"),s=a("./pzaZombieSlot"),c=a("./pzaZombieState"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=s.pzaZombieSlotType.hat_iron,t.hatSlotMap=new Map([[p.pzaZombieEnum.POGO_ZOMBIE3,{slotName:s.pzaZombieSlotType.hat_iron,attNameArr:[s.pzaZombieSlotType.hat_iron+"1",s.pzaZombieSlotType.hat_iron+"2",s.pzaZombieSlotType.hat_iron+"3"],arr1:[73.21,-15.19,-99.18],arr2:[71.34,-14.89,-99.18],arr3:[66.38,-19.93,-99.18]}]]),t.headSlotMap=new Map([[p.pzaZombieEnum.POGO_ZOMBIE2,{slotName:s.pzaZombieSlotType.head_nut,attNameArr:[s.pzaZombieSlotType.head_nut+"1",s.pzaZombieSlotType.head_nut+"2",s.pzaZombieSlotType.head_nut+"3"],arr1:[0,0,0],arr2:[0,0,0],arr3:[0,0,0]}]]),t}return n(t,a),t.prototype.initEquips=function(){if(this.baseData&&this.baseData.zombieData){var a=this.hatSlotMap.get(this.baseData.zombieData.zombieType);a?this.equip1Slot=s.pzaZombieSlotType.hat_iron:(a=this.headSlotMap.get(this.baseData.zombieData.zombieType),this.equip1Slot=s.pzaZombieSlotType.head_nut),this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,this.butterSlot).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[s.pzaZombieSlotType.pogo,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.pogo).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.pogo+"1",26.46,21.59,82.09)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.pogo+"2",26.46,21.59,82.09)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.pogo+"3",26.46,21.59,82.09))],[s.pzaZombieSlotType.pogo2,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.pogo2).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.pogo2+"1",11.37,105.54,0)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.pogo2+"2",11.37,105.54,0)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.pogo2+"3",11.37,105.54,0))],[s.pzaZombieSlotType.pogo3,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.pogo3).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.pogo3+"1",159.18,-6.24,-97.34))]]),this.slotMap.set(a.slotName,new s.pzaZombieSlot(this.animation.spineAnimation,a.slotName).addState(new s.pzaZombieSlotAtt(1,a.attNameArr[0],a.arr1[0],a.arr1[1],a.arr1[2])).addState(new s.pzaZombieSlotAtt(2,a.attNameArr[1],a.arr2[0],a.arr2[1],a.arr2[2])).addState(new s.pzaZombieSlotAtt(3,a.attNameArr[2],a.arr3[0],a.arr3[1],a.arr3[2])))}},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.randomZombieSkin=function(){this.equip2Slot===s.pzaZombieSlotType.head_nut?(this.curSkinName="6zombie_head1",this.changeSkin(this.curSkinName)):a.prototype.randomZombieSkin.call(this)},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=c.pzaZombieState.MOVE,this.hasTool?(r.pzaSoundManager.playAudio("pogo_zombie"),this.animation.playAnimation("jump2",!1,function(){a.jump()})):(this.updateAllSlot(0),this.animation.playAnimation("move",!0,null,null,1))},t.prototype.death=function(t,e){this.updateEquipState(s.pzaZombieSlotType.pogo,0),this.updateEquipState(s.pzaZombieSlotType.pogo2,0),this.updateEquipState(s.pzaZombieSlotType.pogo3,0),a.prototype.death.call(this,t,e)},i([d],t)}(l.pzaPogoZombie));e.pzaPogoZombie2=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaPogoZombie":"pzaPogoZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaPogoZombie:[function(a,t,e){"use strict";cc._RF.push(t,"27db4B0lNVCSYrTzm7645M2","pzaPogoZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPogoZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaGameState"),d=a("./pzaBaseZombie"),h=a("./pzaZombieState"),m=a("./pzaZombieSlot"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jump1Ani="jump",t.jump2Ani="jump2",t.jumping=!1,t.originSpeed=0,t}return n(t,a),t.prototype.updateAllSlot=function(a){this.updateEquipState(m.pzaZombieSlotType.pogo,a),this.updateEquipState(m.pzaZombieSlotType.pogo2,a),a<=1&&this.updateEquipState(m.pzaZombieSlotType.pogo3,a)},t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,this.butterSlot).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,54.37,4.76,-99.18))],[m.pzaZombieSlotType.pogo,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.pogo).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.pogo+"1",23.03,9.94,84.91)).addState(new m.pzaZombieSlotAtt(2,m.pzaZombieSlotType.pogo+"2",23.03,9.94,84.91)).addState(new m.pzaZombieSlotAtt(3,m.pzaZombieSlotType.pogo+"3",23.03,9.94,84.91))],[m.pzaZombieSlotType.pogo2,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.pogo2).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.pogo2+"1",101.63,-43.24,84.91))],[m.pzaZombieSlotType.pogo3,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.pogo3).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.pogo3+"1",123.67,-7.26,-98.03))]])},t.prototype.bindData=function(t){this.jumping=!1,a.prototype.bindData.call(this,t),this.originSpeed=this.baseData.zombieData.moveSpd,t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1))},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(a);else{if(this.hasTool)return 0==this.jumping&&(this.body&&this.body.curTarget?this.baseData.zombieData.moveSpd=this.originSpeed/3:this.baseData.zombieData.moveSpd=this.originSpeed),void this.updateMove(a);var t=this.findTarget();null==t||t.isDead?this.updateMove(a):this.attack(a,t)}else this.changeRowMove(a)}},t.prototype.findJumpTarget=function(){if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;var a=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(this.body.curTarget.zombieData)return null;if(this.body.curTarget.plantData){if(this.body.curTarget.plantData.cate===s.pzaPlantCate.Spike){var t=window.pzaplantManager.pumpkinDataMap.get(a);return null==t||t.isDead?null:t}if(r.pzaPlantConfigData.isTallPlant(this.body.curTarget.plantData.plantType))return this.body.curTarget}var e=window.pzaplantManager.plantDataMap.get(a);return null==e||e.isDead||e.plantData.plantType!=s.pzaPlantEnum.TALL_NUT&&e.plantData.plantType!=s.pzaPlantEnum.SpikeRockNut?this.body.curTarget:e},t.prototype.jump=function(){var a=this,t=this.findJumpTarget();if(null!=t){var e=!r.pzaPlantConfigData.isTallPlant(t.plantData.plantType);this.jumping=!0;var o=this.baseData.zombieData.moveSpd;this.baseData.zombieData.moveSpd=0,p.pzaSoundManager.playAudio("pogo_zombie"),this.animation.playAnimation(this.jump2Ani,!1,function(){p.pzaSoundManager.playAudio("pogo_zombie");var t=a.animation.getAnimationDuration(a.jump1Ani);a.baseData.zombieData.moveSpd=100/t,a.animation.playAnimation(a.jump1Ani,!1,function(){a.baseData.zombieData.moveSpd=o,a.body.curTarget=null,a.jumping=!1,a.playMoveAnimation()},function(){e||(a.baseData.zombieData.moveSpd=o,a.jumping=!1,a.toolDeath(),p.pzaSoundManager.playAudio("bonk"))})})}else this.playMoveAnimation()},t.prototype.jumpGridHasPlant=function(a,t){if(a<0)return!1;var e=!1,o=""+a+t;return null!=window.pzaplantManager.pumpkinDataMap.get(o)&&(e=!0),null!=window.pzaplantManager.plantDataMap.get(o)&&(e=!0),null!=window.pzaplantManager.plantEnvDataMap.get(o)&&(e=!0),e},t.prototype.onChangeIndex=function(){},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=h.pzaZombieState.MOVE,this.hasTool?(p.pzaSoundManager.playAudio("pogo_zombie"),this.animation.playAnimation(this.jump2Ani,!1,function(){a.jump()})):(this.updateAllSlot(0),this.animation.playAnimation("move",!0,null,null,1))},t.prototype.toolDeath=function(){a.prototype.toolDeath.call(this);var t=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/t,this.playMoveAnimation(),this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_CONTROL),this.updateEquipState(m.pzaZombieSlotType.pogo,0),this.updateEquipState(m.pzaZombieSlotType.pogo2,0),this.updateEquipState(m.pzaZombieSlotType.pogo3,0),this.slotMap.delete(m.pzaZombieSlotType.butter),this.butterSlot=m.pzaZombieSlotType.butter2,this.slotMap.set(m.pzaZombieSlotType.butter2,new m.pzaZombieSlot(this.animation.spineAnimation,this.butterSlot).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,-28.23,87.93)))},t.prototype.zombieDying=function(){this.zombieHurtState=c.pzaHurtStateEnum.DYING,this.updateAllSlot(3)},t.prototype.zombieHurt=function(){this.zombieHurtState=c.pzaHurtStateEnum.HURT,this.updateAllSlot(2)},t.prototype.zombieIntact=function(){this.zombieHurtState=c.pzaHurtStateEnum.INTACT,this.updateAllSlot(1)},i([y],t.prototype,"jump1Ani",void 0),i([y],t.prototype,"jump2Ani",void 0),i([z],t)}(d.pzaBaseZombie);e.pzaPogoZombie=g,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaPolevaultingZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"25e52hJW1pAmY9p9WhYyfYB","pzaPolevaultingZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPolevaultingZombie2=void 0;var r=a("./pzaPolevaultingZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=p.pzaZombieSlotType.head_nut,t.garlicSkinName="1zombie",t}return n(t,a),t.prototype.bindData=function(t){var e=this.animation.findBone("5body");e.scaleX=1,e.scaleY=1,a.prototype.bindData.call(this,t),this.defBowlingDamge=800},t.prototype.death=function(t,e){var o=this.animation.findBone("5body");o.scaleX=0,o.scaleY=0,a.prototype.death.call(this,t,e)},i([s],t)}(r.pzaPolevaultingZombie));e.pzaPolevaultingZombie2=c,cc._RF.pop()},{"./pzaPolevaultingZombie":"pzaPolevaultingZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaPolevaultingZombie3:[function(a,t,e){"use strict";cc._RF.push(t,"7038fhBXORIwZhXlWUZOT/E","pzaPolevaultingZombie3");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPolevaultingZombie3=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaBaseBullet"),c=a("../Bullet/pzaZombieBaseBullet"),u=a("../pzaGameState"),d=a("../pzaSpineTool"),h=a("./pzaPolevaultingZombie"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.plantBltPre=null,t.garlicSkinName=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.initEquips=function(){},t.prototype.shoot=function(){if(this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(a){l.pzaSoundManager.playAudio("PeashooterAtk");var t=null;(t=this.baseData.zombieData.canAtkZombie?r.pzaGameCommonPool.requestInstant2(this.plantBltPre):r.pzaGameCommonPool.requestInstant2(this.bulletPrefab)).setParent(a);var e=d.pzaSpineTool.findBonePos(this.animation.spineAnimation,"1head1",this.node),o=a.convertToNodeSpaceAR(e);o.y-=15,t.setPosition(o);var n=null;this.baseData.zombieData.canAtkZombie?(n=t.getComponent(s.pzaBaseBullet)).init(this.baseData.yIndex,20,1):(n=t.getComponent(c.pzaZombieBaseBullet)).init(this.baseData.yIndex,20);var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}},i([z(cc.Prefab)],t.prototype,"bulletPrefab",void 0),i([z(cc.Prefab)],t.prototype,"plantBltPre",void 0),i([f],t)}(h.pzaPolevaultingZombie);e.pzaPolevaultingZombie3=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaZombieBaseBullet":"pzaZombieBaseBullet","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaPolevaultingZombie":"pzaPolevaultingZombie"}],pzaPolevaultingZombie:[function(a,t,e){"use strict";cc._RF.push(t,"26b45tyyhtNxoQDjmmxZDGZ","pzaPolevaultingZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPolevaultingZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaGameState"),d=a("./pzaBaseZombie"),h=a("./pzaZombieState"),m=a("./pzaZombieSlot"),f=a("../../Common/pzaMapManager"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jumpBf_Ani="jump1",t.jumpBf_SrAni="jump1_duck",t.jumpBf_SwAni="jump1_duck2",t.jumping_Ani="jump2",t.jumping_SrAni="jump2_duck",t.jumping_SwAni="jump2_duck2",t.jumpdone_Ani="jump4",t.jumpdone_SrAni="jump4_duck",t.jumpdone_SwAni="jump4_duck2",t.garlicSkinName="zombie_2",t.hasJump=!1,t.jumping=!1,t.jumpOver=!1,t.jumpMsp=0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,73.41,7.38,-92.77))],[m.pzaZombieSlotType.head_nut,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.head_nut).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.head_nut+"1",194.65,15.01,-88.24)).addState(new m.pzaZombieSlotAtt(2,m.pzaZombieSlotType.head_nut+"2",194.65,15.01,-88.24)).addState(new m.pzaZombieSlotAtt(3,m.pzaZombieSlotType.head_nut+"3",194.65,15.01,-88.24))]])},t.prototype.bindData=function(t){this.hasJump=!1,this.jumping=!1,this.jumpMsp=0,a.prototype.bindData.call(this,t),this.body.changeBody(cc.v2(-10,75),110)},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead)if(this.jumpMsp>0)this.jumpMove(a);else if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(a);else if(this.jumping){var t=.1*u.pzaGameState.map.getYInterval(this.baseData.yIndex)+15;u.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,this.baseData.logicPos,t)}else if(this.hasJump){var e=this.findTarget();null==e||e.isDead?this.updateMove(a):this.attack(a,e)}else{var o=this.findJumpTarget();null!=o?this.jump(o):this.updateMove(a)}else this.changeRowMove(a)},t.prototype.calculateDistance=function(a,t,e,o){var n=e-a,i=o-t;return Math.sqrt(n*n+i*i)},t.prototype.findJumpTarget=function(){var a=this,t=null;if(1==u.pzaGameState.curChapter&&6==u.pzaGameState.curPart)return window.pzaplantManager.plantMap.forEach(function(e,o){(o.xIndex==a.baseData.xIndex-1||o.xIndex==a.baseData.xIndex-2)&&o.yIndex==a.baseData.yIndex&&a.calculateDistance(o.logicPos.x,o.logicPos.y,a.baseData.logicPos.x,a.baseData.logicPos.y)<=210&&(t=o)}),t;if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;if(this.body.curTarget.isBrain)return null;if(null==this.body.curTarget.zombieData){var e=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(this.body.curTarget.plantData.cate===s.pzaPlantCate.Spike){var o=window.pzaplantManager.pumpkinDataMap.get(e);return null==o||o.isDead?null:o}if(this.body.curTarget.plantData.plantType==s.pzaPlantEnum.TALL_NUT||this.body.curTarget.plantData.plantType==s.pzaPlantEnum.SpikeRockNut)return this.body.curTarget;var n=window.pzaplantManager.plantDataMap.get(e);if(r.pzaPlantConfigData.isTallPlant(n.plantData.plantType))return n;if(this.body.curTarget.plantData.plantType==s.pzaPlantEnum.COB_CANNON)return this.body.curTarget;var i=window.pzaplantManager.plantDataMap.get(e);return null==i||i.isDead||i.plantData.plantType!=s.pzaPlantEnum.TALL_NUT&&i.plantData.plantType!=s.pzaPlantEnum.COB_CANNON&&i.plantData.plantType!=s.pzaPlantEnum.SpikeRockNut?this.body.curTarget:i}},t.prototype.jumpMove=function(a){this.baseData.logicPos.x-=a*this.jumpMsp},t.prototype.jumpDone=function(){this.jumping=!1,this.baseData.zombieData.toolType=c.pzaEquipType.NO_EQUIP,this.toolDeath();var a=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/a;var t=u.pzaGameState.map.getMapXIndex(this.baseData.logicPos);this.baseData.xIndex=t,this.hasJump=!0,this.jumpOver?(this.playMoveAnimation(),this.body.curTarget=null):this.animation.playAnimation(this.getAttackAniName(),!0),this.body.changeBody(cc.v2(20,75),60),this.body.node.getComponent(cc.BoxCollider).enabled=!0,this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_CONTROL),this.jumpMsp=0,this.setWaterState(this.baseData.xIndex,this.baseData.yIndex)},t.prototype.jump=function(a){var t=this;if(null!=a){var e=a.xIndex;1==u.pzaGameState.curChapter&&6==u.pzaGameState.curPart&&(e=a.xIndex+1),this.jumping=!0;var o=this.animation.getAnimationDuration(this.getJumpBeforeAni());this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1)),a.plantData.plantType!=s.pzaPlantEnum.TALL_NUT_BOWLING&&(this.body.node.getComponent(cc.BoxCollider).enabled=!1),this.jumpOver=!r.pzaPlantConfigData.isTallPlant(a.plantData.plantType),this.setWaterState(this.baseData.xIndex,this.baseData.yIndex);var n=this.jumpOver?this.getJumpingAni():this.getJumpdoneAni();o+=this.animation.getAnimationDuration(n)+.1,this.scheduleOnce(function(){!t.jumping||t.baseData.buffData.hasBuff(l.pzaBuffType.FROZEN)||u.pzaGameState.gamePause||(t.body.node.getComponent(cc.BoxCollider).enabled=!0,t.baseData.isDead||t.jumpDone())},o),console.log("play jump1"),this.animation.playAnimation(this.getJumpBeforeAni(),!1,function(){if(t.body.curTarget=a,t.baseData.logicPos.clone(),t.jumpOver){var o=u.pzaGameState.map.getXPos(e)+u.pzaGameState.map.getMapOriPos().x;t.jumpMsp=(t.baseData.logicPos.x-o)/.4,console.log("this.jumpMsp ",t.jumpMsp)}t.setWaterState(t.baseData.xIndex,t.baseData.yIndex),t.animation.playAnimation(t.jumpOver?t.getJumpingAni():t.getJumpdoneAni(),!1,function(){t.jumpDone(),t.jumpOver||p.pzaSoundManager.playAudio("bonk")},function(){t.jumpMsp=0})},function(){p.pzaSoundManager.playAudio("poleland"),t.scheduleOnce(function(){p.pzaSoundManager.playAudio("polevault")},.1)},1)}},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.unscheduleAllCallbacks()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.unscheduleAllCallbacks()},t.prototype.onWaterEnter=function(){this.jumping||a.prototype.onWaterEnter.call(this)},t.prototype.onWaterExit=function(){this.jumping||a.prototype.onWaterExit.call(this)},t.prototype.getMoveAniName=function(){return this.hasJump?a.prototype.getMoveAniName.call(this):this.hasInWater?this.baseData.zombieData.zombieType==c.pzaZombieEnum.POLEVAULTING_ZOMBIE?this.hasJump?"move_duck2":"move2_duck2":"move_duck2":this.hasUseSrAni?"run_duck":"run"},t.prototype.getMoveAniNameArray=function(){var t=[];return this.hasJump?a.prototype.getMoveAniNameArray.call(this):(this.hasInWater?this.baseData.zombieData.zombieType==c.pzaZombieEnum.POLEVAULTING_ZOMBIE?t.push(this.hasJump?"move_duck2":"move2_duck2"):t.push("move_duck2"):this.hasUseSrAni?t.push("run_duck"):t.push("run"),t)},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=h.pzaZombieState.MOVE;for(var t=this.getMoveAniNameArray(),e=0;e<t.length;e++)if(t[e]==this.animation.spineAnimation.animation)return;this.animation.playAnimation(this.getMoveAniName(),!0,null,function(t,e){e&&"attack"==e.data.name&&a.shoot()},1)},t.prototype.shoot=function(){},t.prototype.zombieGoHome=function(){if(u.pzaGameState.isZombieMode()&&window.pzaplantManager.hasBrain(this.baseData.yIndex)){if(this.hasJump)return;this.hasJump=!0;var t=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);return this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/t,void this.animation.playAnimation(this.moveAniName[0],!0,null,null,1)}a.prototype.zombieGoHome.call(this)},t.prototype.zombieWinMove=function(t){if(a.prototype.zombieWinMove.call(this,t),!this.hasJump){this.hasJump=!0;var e=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/e,this.animation.playAnimation(this.moveAniName[0],!0)}},t.prototype.ashesDeath=function(){this.jumping?this.death(!1):a.prototype.ashesDeath.call(this)},t.prototype.zombieHurt=function(){this.zombieHurtState=c.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie_1_1"),"zombie_2"==this.curSkinName&&(this.curSkinName="zombie_2_1"),this.changeSkin(this.curSkinName)},t.prototype.getJumpBeforeAni=function(){return this.hasInWater?this.jumpBf_SwAni:this.hasUseSrAni?this.jumpBf_SrAni:this.jumpBf_Ani},t.prototype.getJumpingAni=function(){var a=this.hypnosisState?1:-1,t=""+(u.pzaGameState.map.getMapXIndex(this.baseData.logicPos)+a)+u.pzaGameState.map.getMapYIndex(this.baseData.logicPos);return window.pzaMapManager.BlockTypeMap.get(t)==f.pzaBlockType.POND?this.jumping_SwAni:this.hasUseSrAni?this.jumping_SrAni:this.jumping_Ani},t.prototype.getJumpdoneAni=function(){return this.hasInWater?this.jumpdone_SwAni:this.hasUseSrAni?this.jumpdone_SrAni:this.jumpdone_Ani},i([g({displayName:"\u5730\u9762\u8df3\u8dc3\u524d"})],t.prototype,"jumpBf_Ani",void 0),i([g({displayName:"\u5730\u9762\u6cf3\u5708\u8df3\u8dc3\u524d"})],t.prototype,"jumpBf_SrAni",void 0),i([g({displayName:"\u6c34\u9762\u8df3\u8dc3\u524d"})],t.prototype,"jumpBf_SwAni",void 0),i([g({displayName:"\u5730\u9762\u8df3\u8dc3\u4e2d"})],t.prototype,"jumping_Ani",void 0),i([g({displayName:"\u5730\u9762\u6cf3\u5708\u8df3\u8dc3\u4e2d"})],t.prototype,"jumping_SrAni",void 0),i([g({displayName:"\u6c34\u9762\u8df3\u8dc3\u4e2d"})],t.prototype,"jumping_SwAni",void 0),i([g({displayName:"\u5730\u9762\u8df3\u8dc3\u540e"})],t.prototype,"jumpdone_Ani",void 0),i([g({displayName:"\u5730\u9762\u6cf3\u5708\u8df3\u8dc3\u540e"})],t.prototype,"jumpdone_SrAni",void 0),i([g({displayName:"\u6c34\u9762\u8df3\u8dc3\u540e"})],t.prototype,"jumpdone_SwAni",void 0),i([y],t)}(d.pzaBaseZombie);e.pzaPolevaultingZombie=b,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaMapManager":"pzaMapManager","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaPortalDoorBody:[function(a,t,e){"use strict";cc._RF.push(t,"818f6ilajRJiprj06kx90Bg","pzaPortalDoorBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPortalDoorBody=void 0;var r,p=a("../Common/pzaCollisionManager");(function(a){a[a.light=0]="light",a[a.dark=1]="dark"})(r||(r={}));var l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.portal=null,t}return n(t,a),t.prototype.enable=function(a){this.portal=a,p.pzaCollisionManager.getInstance.addPortalByRow(this.portal.yIndex,this),this.node.active=!0},t.prototype.disable=function(){this.portal&&p.pzaCollisionManager.getInstance.delPortalByRow(this.portal.yIndex,this),this.node&&this.node.isValid&&(this.node.active=!1)},t.prototype.onCollisionStay=function(a,t){this.portal.onCollision(a,t)},t.prototype.onCollisionEnter=function(a,t){this.portal.onCollision(a,t)},t.prototype.getCollider=function(){if(!this.node||!this.node.isValid)return null;var a=this.node.getComponent(cc.Collider);return a.poSource=this.node.parent,a},i([s],t)}(cc.Component));e.pzaPortalDoorBody=c,cc._RF.pop()},{"../Common/pzaCollisionManager":"pzaCollisionManager"}],pzaPortalDoor:[function(a,t,e){"use strict";cc._RF.push(t,"c5e344d8CVPerRKInjFoQLM","pzaPortalDoor");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPortalDoor=void 0;var r,p=a("../../Common/pzaBaseComponent"),l=a("../../Common/pzaCollisionManager"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaSpineController"),u=a("../../Common/pzaWorldEventManager"),d=a("../Bullet/pzaBaseBullet"),h=a("../Bullet/pzaThrowBullet"),m=a("../Data/pzaZombieEnum"),f=a("../pzaBaseBody"),z=a("../pzaGameState"),y=a("../pzaPortalDoorBody"),g=a("../Zombie/pzaZomboni"),b=a("./pzaIceGroundEffect");(function(a){a[a.light=0]="light",a[a.dark=1]="dark"})(r||(r={}));var v=cc._decorator,P=v.ccclass,D=v.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.body=null,t.animation=null,t.targetPortalDoor=null,t.yIndex=-1,t.xIndex=-1,t}return n(t,a),t.prototype.onEnable=function(){window.pzabaseCmpManager.addBaseCmp(this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.BACK_HOME,this.close,this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.GAME_OVER,this.close,this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this)},t.prototype.onDisable=function(){window.pzabaseCmpManager.deleteBaseCmp(this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.BACK_HOME,this.close,this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.GAME_OVER,this.close,this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),this.body.disable()},t.prototype.init=function(a,t,e,o){var n=this;this.targetPortalDoor=a,this.xIndex=o,this.yIndex=e;var i=z.pzaGameState.map.getBlockLogicPos(o,e,0,0);i.x+=120,i.y+=20,this.node.setPosition(i),z.pzaGameState.map.fixMapYOffset(o,i,0),t==r.light?this.animation.playAnimation("open1",!1,function(){n.animation.playAnimation("light1",!0,function(){})}):t==r.dark&&this.animation.playAnimation("open2",!1,function(){n.animation.playAnimation("light2",!0,function(){})}),this.body.enable(this);var p=10*-(this.yIndex+1)+12;this.node.zIndex=p},t.prototype.pauseSelf=function(){},t.prototype.resumeSelf=function(){},t.prototype.onCollision=function(a,t){if(null!=a)if(a.node.group==s.pzaGroupEnum.ZOMBIE||a.node.group==s.pzaGroupEnum.PLANT){var e=a.getComponent(f.pzaBaseBody);this.onZombieCollision(e,a.node.parent)}else a.node.group!=s.pzaGroupEnum.PLANT_BULLET&&a.node.group!=s.pzaGroupEnum.ZOMBIE_BULLET||this.onBulletCollision(a,t)},t.prototype.onZombieCollision=function(a){if(null!=a&&null!=a.baseData&&!a.baseData.isDead&&a.baseData.zombieData){if(a.baseData.zombieData.direction<0&&this.node.x<a.baseData.logicPos.x&&(this.blinkTargetDoor(a,40),a.baseData.zombieData.cate==m.pzaZombieCate.IceCar)){var t=a.node.parent.getComponent(g.pzaZomboni);if(t&&t.baseData&&t.baseData.groundEffect){var e=t.baseData.groundEffect.getComponent(b.pzaIceGroundEffect);e&&(e.isBreak=!0),setTimeout(function(){t.createSpecialGround()},100)}}a.baseData.zombieData.direction>0&&this.node.x>a.baseData.logicPos.x&&this.blinkTargetDoor(a,80)}},t.prototype.onBulletCollision=function(a){var t=a.node.getComponent(d.pzaBaseBullet);if(t&&!t.isInAir&&!a.node.getComponent(h.pzaThrowBullet)){if(t.direction.x<0&&this.node.x<t.node.x){l.pzaCollisionManager.getInstance.delBulletByRow(t.bulletYIndex,t),l.pzaCollisionManager.getInstance.addBulletByRow(this.targetPortalDoor.yIndex,t),t.bulletYIndex=this.targetPortalDoor.yIndex;var e=z.pzaGameState.map.getXInterval(this.targetPortalDoor.xIndex)/2,o=.1*z.pzaGameState.map.getYInterval(this.targetPortalDoor.yIndex);(n=z.pzaGameState.map.getBlockLogicPos(this.targetPortalDoor.xIndex,this.targetPortalDoor.yIndex,e,o)).x+=40,n.y+=80,a.node.x=n.x,a.node.y=n.y}var n;if(t.direction.x>0&&this.node.x>t.node.x)l.pzaCollisionManager.getInstance.delBulletByRow(t.bulletYIndex,t),l.pzaCollisionManager.getInstance.addBulletByRow(this.targetPortalDoor.yIndex,t),t.bulletYIndex=this.targetPortalDoor.yIndex,e=z.pzaGameState.map.getXInterval(this.targetPortalDoor.xIndex)/2,o=.1*z.pzaGameState.map.getYInterval(this.targetPortalDoor.yIndex),(n=z.pzaGameState.map.getBlockLogicPos(this.targetPortalDoor.xIndex,this.targetPortalDoor.yIndex,e,o)).x+=80,n.y+=80,a.node.x=n.x,a.node.y=n.y}},t.prototype.blinkTargetDoor=function(a,t){window.pzazombieManager.zombieChangeMapRow(a,a.baseData,this.targetPortalDoor.yIndex),a.baseData.xIndex=this.targetPortalDoor.xIndex,a.baseData.yIndex=this.targetPortalDoor.yIndex;var e=z.pzaGameState.map.getXInterval(a.baseData.xIndex)/2,o=.1*z.pzaGameState.map.getYInterval(a.baseData.yIndex),n=z.pzaGameState.map.getBlockLogicPos(a.baseData.xIndex,a.baseData.yIndex,e,o);n.x+=t,a.baseData.logicPos=n;var i=window.pzazombieManager.getZombie(a.baseData),r=10*-a.baseData.yIndex+5;i.node.zIndex=r},t.prototype.close=function(){a.prototype.close.call(this)},i([D({type:y.pzaPortalDoorBody})],t.prototype,"body",void 0),i([D({type:c.pzaSpineController})],t.prototype,"animation",void 0),i([P],t)}(p.pzaBaseComponent);e.pzaPortalDoor=S,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZomboni":"pzaZomboni","../pzaBaseBody":"pzaBaseBody","../pzaGameState":"pzaGameState","../pzaPortalDoorBody":"pzaPortalDoorBody","./pzaIceGroundEffect":"pzaIceGroundEffect"}],pzaPotatoMine:[function(a,t,e){"use strict";cc._RF.push(t,"b1bfb8jog9M2q3U9xqelKMY","pzaPotatoMine");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPotatoMine=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lifeTime=0,t.hasBomb=!1,t.blinkTime=3,t.isBusterMine=!1,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),u.pzaGameState.isZombieMode())return this.lifeTime=0,this.hasBomb=!1,t.plantData.hasBreakGround=!0,void this.animation.playAnimation("T_idle",!0);t.plantData.hasBreakGround?this.animation.playAnimation(this.isBusterMine?"2idle3":"idle3",!0):this.animation.playAnimation(this.isBusterMine?"2idle1":"idle1",!0),this.lifeTime=0,this.hasBomb=!1,this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),t.plantData.cate=s.pzaPlantCate.Mine,u.pzaGameState.onlyShroomCofee=!1,t.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.hasBomb){if(this.baseData.plantData.hasBreakGround){var o=this.findAttackTarget();if(null==o&&(o=this.findDrZomBoss()),null!=o&&o.isDead&&(o=null,this.body.curTarget=null),null!=o)return void this.attack(o);this.blinkTime-=t,this.blinkTime<=0&&!u.pzaGameState.isZombieMode()&&(this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),this.isBusterMine?this.animation.playAnimation("2idle3",!0):this.animation.playAnimation("idle4",!1,function(){e.animation.playAnimation("idle3",!0)}))}this.baseData.isDead||(this.lifeTime+=t,this.lifeTime>=15&&!this.baseData.plantData.hasBreakGround&&this.breakGround())}},t.prototype.findAttackTarget=function(){return this.body.curTarget},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return this.baseData.xIndex>=7&&null!=a&&null!=a.baseData&&!a.baseData.isDead&&!a.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)?a.baseData:null},t.prototype.breakGround=function(){var a=this;this.baseData.plantData.hasBreakGround=!0,r.pzaSoundManager.playAudio("PotatoMineGrow"),this.animation.playAnimation(this.isBusterMine?"2idle2":"idle2",!1,function(){a.animation.playAnimation(a.isBusterMine?"2idle3":"idle3",!0)})},t.prototype.attack=function(a){var t=this;this.hasBomb=!0,this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),r.pzaSoundManager.playAudio("PotatoMineBoom"),this.animation.playAnimation(u.pzaGameState.isZombieMode()?"T_blow":"blow",!1,function(){t.death()});var e=new Set;e.add(a);var o=.6*u.pzaGameState.map.getBlockWidth();window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(a){if(t.baseData&&null!=a&&(a.xIndex==t.baseData.xIndex||a.xIndex-1==t.baseData.xIndex)){if(p.pzaUtil.getDistance(t.baseData.logicPos,a.logicPos)>o)return;e.add(a)}}),e.forEach(function(a){if(t.baseData&&null!=a&&!a.isDead&&!a.buffData.hasBuff(l.pzaBuffType.FLY)&&(a.zombieData.zombieType==c.pzaZombieEnum.DIGGER_ZOMBIE||!a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)&&!a.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT))){var e=window.pzazombieManager.getZombie(a);e&&e.hurt(t.baseData.atk,t.baseData,d.pzaAttackType.NORMAL_BOOM),e.baseData.isDead}})},t.prototype.flaserDeath=function(){this.baseData.plantData.hasBreakGround||this.hasBomb||a.prototype.flaserDeath.call(this)},t.prototype.close=function(){a.prototype.close.call(this),this.isBusterMine=!1},i([f],t)}(h.pzaBasePlant));e.pzaPotatoMine=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaPowerTime:[function(a,t,e){"use strict";cc._RF.push(t,"7e2dd8NenFK9otWvmc/4K8U","pzaPowerTime");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPowerTime=void 0;var r=a("../Common/pzaLocalData"),p=a("../Common/pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.recoverPower=1,t.saveTime=10,t}return n(t,a),t.prototype.update=function(a){r.pzaLocalData.data.getPowerLeftTime>=0&&r.pzaLocalData.data.power<20&&r.pzaLocalData.isShowPowerGift&&(r.pzaLocalData.data.getPowerLeftTime-=a,r.pzaLocalData.data.getPowerLeftTime<=0&&(r.pzaLocalData.data.getPowerLeftTime=1800,r.pzaLocalData.data.power<20&&(r.pzaLocalData.data.power=r.pzaLocalData.data.power+this.recoverPower>=r.pzaLocalData.maxPower?r.pzaLocalData.maxPower:r.pzaLocalData.data.power+this.recoverPower),r.pzaLocalData.addDirty("getPowerLeftTime","power"),p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.UPDATE_POWER,null))),r.pzaLocalData.data.snailSpeedUpTime>=0&&(r.pzaLocalData.data.snailSpeedUpTime-=a),this.saveTime-=a,this.saveTime<=0&&(this.saveTime=10,r.pzaLocalData.addDirty("getPowerLeftTime","power","snailSpeedUpTime"))},i([s],t)}(cc.Component));e.pzaPowerTime=c,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaPowerView:[function(a,t,e){"use strict";cc._RF.push(t,"dd17fwjDeBNMZ08JZXbVX8d","pzaPowerView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPowerView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaStatisticsMgr"),c=a("../utils/pzaChannel"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tittle=null,t.confirmBtn=null,t.cancelBtn=null,t.closeBtn=null,t.poolPrefab=null,t.adIcon=null,t.comfirmTxt=null,t.toggle=null,t.confirmCall=null,t.cancelCall=null,t}return n(t,a),t.prototype.bindData=function(a,t,e){var o=this;if(this.tittle.string=a,this.confirmCall=t,this.cancelCall=e,this.cancelBtn.active=!1,c.pzaChannel.instance().channel.indexOf("my")>=0){this.closeBtn.active=!1;var n=c.pzaChannel.instance().getCtrl("p6");this.scheduleOnce(function(){o.cancelBtn.active=!0},n)}if(this.node.getChildByName("board")&&this.node.getChildByName("board").getChildByName("powerIcon")&&this.node.getChildByName("board").getChildByName("powerIcon").getChildByName("title")){var i=this.node.getChildByName("board").getChildByName("powerIcon").getChildByName("title").getComponent(cc.Label);i&&(i.string="X"+p.pzaLocalData.addPowerValue)}if(s.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"36"},{name:"adname",value:"\u83b7\u53d6\u4f53\u529b"}),this.toggle.active=!1,this.node.getChildByName("board")&&this.node.getChildByName("board").getChildByName("powerIcon")&&this.node.getChildByName("board").getChildByName("powerIcon").getChildByName("title")){var r=this.node.getChildByName("board").getChildByName("powerIcon").getChildByName("title").getComponent(cc.Label);r&&(r.string="X"+p.pzaLocalData.addPowerValue)}},t.prototype.showCloseBtn=function(){this.toggle.active=!1,this.closeBtn.active=!0},t.prototype.clickConfirm=function(){var a=this;l.pzaSoundManager.playSFX(),c.pzaChannel.instance().showVideo({sucCall:function(){a.confirmCall&&a.confirmCall(),a.close()},failCall:function(){},endCall:function(){},posName:"\u4f53\u529b\u83b7\u53d6",adsid:"36"})},t.prototype.clickCancel=function(){l.pzaSoundManager.playSFX(),this.cancelCall&&this.cancelCall(),this.close()},t.prototype.close=function(){this.poolPrefab?r.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):r.pzaGameCommonPool.returnInstant(this.node)},i([h({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"tittle",void 0),i([h({displayName:"\u786e\u5b9a\u6309\u94ae",type:cc.Node})],t.prototype,"confirmBtn",void 0),i([h({displayName:"\u53d6\u6d88\u6309\u94ae",type:cc.Node})],t.prototype,"cancelBtn",void 0),i([h({displayName:"\u5173\u95ed\u6309\u94ae",type:cc.Node})],t.prototype,"closeBtn",void 0),i([h(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([h(cc.Node)],t.prototype,"adIcon",void 0),i([h(cc.Label)],t.prototype,"comfirmTxt",void 0),i([h(cc.Node)],t.prototype,"toggle",void 0),i([d],t)}(cc.Component);e.pzaPowerView=m,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../utils/pzaChannel":"pzaChannel"}],pzaPower:[function(a,t,e){"use strict";cc._RF.push(t,"ecd83JmX5VOKoHPwQkk0m/P","pzaPower");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPower=void 0;var r=a("../Common/pzaLocalData"),p=a("../Common/pzaUIManager"),l=a("../Common/pzaWorldEventManager"),s=a("../Load/pzaPreLoadManager"),c=a("../utils/pzakc"),u=a("./pzaPowerView"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.powerLab=null,t.powerAni=null,t.getPowerLeftLab=null,t.showCountDown=!0,t}return n(t,a),t.prototype.onEnable=function(){var a=this;r.pzaLocalData.isShowPowerGift?(l.pzaWorldEventManager.addListener(l.pzaWorldEventType.UPDATE_POWER,this.updatePower,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.POWER_ANI,this.showPowerAni,this),this.powerAni.active=!1,this.powerAni.opacity=255,this.powerLab.string=r.pzaLocalData.data.power+"/"+r.pzaLocalData.maxPower,this.schedule(function(){a.getPowerLeftLab.string=c.default.formatCountdown(r.pzaLocalData.data.getPowerLeftTime)},1,cc.macro.REPEAT_FOREVER),this.showCountDown||(this.getPowerLeftLab.node.active=!1,this.getPowerLeftLab.node.parent.active=!1),r.pzaLocalData.data.power>=20&&(this.getPowerLeftLab.node.active=!1,this.getPowerLeftLab.node.parent.active=!1)):this.node.active=!1},t.prototype.showPowerAni=function(a){this.powerAni.active=!0,this.powerAni.opacity=255,this.powerAni.stopAllActions(),this.powerAni.getChildByName("title").getComponent(cc.Label).string="-"+a.cost,this.powerAni.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,60)),cc.fadeOut(.3)))},t.prototype.updatePower=function(){this.powerLab.string=r.pzaLocalData.data.power+"/"+r.pzaLocalData.maxPower,this.showCountDown&&(r.pzaLocalData.data.power>=20?(this.getPowerLeftLab.node.active=!1,this.getPowerLeftLab.node.parent.active=!1):(this.getPowerLeftLab.node.active=!0,this.getPowerLeftLab.node.parent.active=!0))},t.prototype.clickPower=function(){p.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.POWER_VIEW,function(a){var t=a&&a.getComponent(u.pzaPowerView);t&&t.bindData("\u8865\u5145\u4f53\u529b",function(){var a;a=r.pzaLocalData.data.power+r.pzaLocalData.addPowerValue,r.pzaLocalData.data.power=a,r.pzaLocalData.addDirty("power"),l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.UPDATE_POWER,null)},null)})},t.prototype.onDisable=function(){l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.UPDATE_POWER,this.updatePower,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.POWER_ANI,this.showPowerAni,this)},i([m({displayName:"\u5f53\u524d\u4f53\u529b",type:cc.Label})],t.prototype,"powerLab",void 0),i([m({displayName:"\u4f53\u529b\u52a8\u753b",type:cc.Node})],t.prototype,"powerAni",void 0),i([m({displayName:"\u4f53\u529b\u83b7\u53d6\u5012\u8ba1\u65f6",type:cc.Label})],t.prototype,"getPowerLeftLab",void 0),i([m({displayName:"\u662f\u5426\u663e\u793a\u5012\u8ba1\u65f6"})],t.prototype,"showCountDown",void 0),i([h],t)}(cc.Component);e.pzaPower=f,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzakc":"pzakc","./pzaPowerView":"pzaPowerView"}],pzaPreLoadManager:[function(a,t,e){"use strict";cc._RF.push(t,"d9bd6gq3PZCwoEpcfU9s174","pzaPreLoadManager"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPreLoadManager=e.pzaResourceUrl=e.pzaResourceDetail=e.pzaResourceType=void 0;var o,n=a("../Battle/Data/pzaPlantEnum"),i=a("../Battle/Data/pzaZombieEnum");(function(a){a[a.Prefab=0]="Prefab",a[a.PrefabDir=1]="PrefabDir",a[a.SpriteFrameDir=2]="SpriteFrameDir",a[a.Scene=3]="Scene"})(o=e.pzaResourceType||(e.pzaResourceType={}));var r,p=function(a,t){void 0===t&&(t=o.Prefab),this.url=null,this.resourceType=null,this.url=a,this.resourceType=t};e.pzaResourceDetail=p,function(a){a.MAIN_SCENE="main",a.ZOMBIE_ICON="resources/Texture/ZombieIcon/",a.PLANT_ICON="resources/Texture/PlantIcon/",a.PART_REWARD="resources/Texture/GuanKa/",a.SHOP_ITEM_ICON="resources/Texture/ShopItemIcon",a.PLANT_SELECT_VIEW="resources/Prefab/View/PlantSelectView",a.PLANT_BELT_VIEW="resources/Prefab/View/PlantBeltView",a.GAME_FAIL_VIEW="resources/Prefab/View/GameFailView",a.GAME_WIN_VIEW="resources/Prefab/View/GameWinView",a.GET_ACHIEVE_VIEW="resources/Prefab/View/GetAchieveView",a.GUIDE_DIALOG_VIEW="resources/Prefab/View/GuideDialogView",a.GUIDE_VIEW="resources/Prefab/View/GuideView",a.NEW_ZOMBIE_VIEW="resources/Prefab/View/NewZombieView",a.NEW_PLANT_VIEW="resources/Prefab/View/NewPlantView",a.GAME_MENU_VIEW="resources/Prefab/View/MenuView",a.GAME_ASSESS_VIEW="resources/Prefab/View/AssessView",a.GAME_OPTION_VIEW="resources/Prefab/View/OptionView",a.GAME_REVIVE_VIEW="resources/Prefab/View/ReviveView",a.TRY_SELECT_VIEW="resources/Prefab/View/TrySelectView",a.CG_PAPER_VIEW="resources/Prefab/View/CGPaperView",a.HANDBOOK_VIEW="resources/Prefab/View/HandbookView",a.PLANT_HANDBOOK_VIEW="resources/Prefab/View/PlantHandbookView",a.ZOMBIE_HANDBOOK_VIEW="resources/Prefab/View/ZombieHandbookView",a.SHOP_VIEW="resources/Prefab/View/ShopView",a.BUY_CONFIRM_VIEW="resources/Prefab/View/BuyConfirmView",a.PART_SELECT_VIEW="resources/Prefab/View/PartSelectView",a.HOME_SELECT_VIEW="resources/Prefab/View/HomeView",a.SURVIVAL_VIEW="resources/Prefab/View/SurvivalView",a.PUZZLE_VIEW="resources/Prefab/View/PuzzleView",a.WARNING_VIEW="resources/Prefab/View/WarningView",a.GARDEN_VIEW="resources/Prefab/View/GardenView",a.DAY_SIGN_VIEW="resources/Prefab/View/SignView",a.MONTH_SIGN_VIEW="resources/Prefab/MonthSign/MonthSignView",a.COMMON_REWARD_VIEW="resources/Prefab/View/CommonRewardView",a.SAVE_VIEW="resources/Prefab/View/SaveView",a.SHARE_GIFT_VIEW="resources/Prefab/View/ShareGiftView",a.DAVE_TREASURE_VIEW="resources/Prefab/View/DaveTreasureView",a.RANK_VIEW="resources/Prefab/View/RankView",a.ZOMBIE_SELECT_VIEW="resources/Prefab/View/ZombieSelectView",a.PRE_OPEN_VIEW="resources/Prefab/View/PreOpenView",a.BYTE_SIDEBAR_VIEW="resources/Prefab/View/sideBarView",a.BYTE_RECORD_VIEW="resources/Prefab/View/RecordView",a.POWER_VIEW="resources/Prefab/View/PowerView",a.BATTLEPASS_VIEW="resources/Prefab/ActivityPre/BattlePassView",a.BATTLEPASSTASK_VIEW="resources/Prefab/ActivityPre/BattlePassTaskView",a.NEWPLAYERTASK_VIEW="resources/Prefab/ActivityPre/NewPlayerTaskView",a.LOGINREWARD_VIEW="resources/Prefab/ActivityPre/LoginRewardView",a.GIFT_VIEW="resources/Prefab/View/GiftView",a.VIDEO_GIFT_VIEW="resources/Prefab/View/VideoGiftView",a.VIDEO_PLANT_GIFT_VIEW="resources/Prefab/View/VideoPlantGiftView",a.BUBBLE_ITEM="resources/Prefab/View/BubbleItem",a.PLANT_SKIN_VIEW="resources/Prefab/View/PlantSkinView",a.PRIVACY_Win="resources/Prefab/View/PrivacyWin",a.NATIVE_INTER_AD="resources/Prefab/View/NativeInterAd",a.WELFARE_TASK_VIEW="resources/Prefab/View/WelfareTaskView",a.GOTREWARDVIEW="resources/Prefab/View/GotRewardView",a.BELTEQUIPVIEW="resources/Prefab/View/beltEquipView/beltEquipView",a.PEA_SHOOTER="resources/Prefab/Plant/Peashooter",a.SUN_FLOWER="resources/Prefab/Plant/Sunflower",a.CHERRY_BOMB="resources/Prefab/Plant/CherryBomb",a.WALL_NUT="resources/Prefab/Plant/WallNut",a.POTATO_MINE="resources/Prefab/Plant/PotatoMine",a.SNOW_PEA="resources/Prefab/Plant/SnowPea",a.CHOMPER="resources/Prefab/Plant/Chomper",a.REPEATER="resources/Prefab/Plant/Repeater",a.SUN_SHROOM="resources/Prefab/Plant/SunShroom",a.PUFF_SHROOM="resources/Prefab/Plant/PuffShroom",a.FUME_SHROOM="resources/Prefab/Plant/FumeShroom",a.GRAVE_BUSTER="resources/Prefab/Plant/GraveBuster",a.HYPNO_SHROOM="resources/Prefab/Plant/HypnoShroom",a.SCAREDY_SHROOM="resources/Prefab/Plant/ScaredyShroom",a.ICE_SHROOM="resources/Prefab/Plant/IceShroom",a.DOOM_SHROOM="resources/Prefab/Plant/DoomShroom",a.LILY_PAD="resources/Prefab/Plant/LilyPad",a.SQUASH="resources/Prefab/Plant/Squash",a.THREE_PEATER="resources/Prefab/Plant/ThreePeater",a.TANGLE_KELP="resources/Prefab/Plant/TangleKelp",a.JALAPENO="resources/Prefab/Plant/Jalapeno",a.SPIKEWEED="resources/Prefab/Plant/Spikeweed",a.TORCHWOOD="resources/Prefab/Plant/Torchwood",a.TALL_NUT="resources/Prefab/Plant/TallNut",a.SEA_SHROOM="resources/Prefab/Plant/SeaShroom",a.PLANTERN="resources/Prefab/Plant/Plantern",a.CACTUS="resources/Prefab/Plant/Cactus",a.BLOVER="resources/Prefab/Plant/Blover",a.SPLIT_PEA="resources/Prefab/Plant/SplitPea",a.STAR_FRUIT="resources/Prefab/Plant/StarFruit",a.PUMPKIN="resources/Prefab/Plant/Pumpkin",a.MAGNET_SHROOM="resources/Prefab/Plant/MagnetShroom",a.CABBAGE_PULT="resources/Prefab/Plant/CabbagePult",a.FLOWER_POT="resources/Prefab/Plant/FlowerPot",a.KERNEL_PULT="resources/Prefab/Plant/KernelPult",a.COFFEE_BEAN="resources/Prefab/Plant/CoffeeBean",a.GARLIC="resources/Prefab/Plant/Garlic",a.UMBRELLA_LEAF="resources/Prefab/Plant/UmbrellaLeaf",a.MARIGOLD="resources/Prefab/Plant/Marigold",a.MELON_PULT="resources/Prefab/Plant/MelonPult",a.GATLING_PEA="resources/Prefab/Plant/GatlingPea",a.TWIN_SUNFLOWER="resources/Prefab/Plant/TwinSunflower",a.GLOOM_SHROOM="resources/Prefab/Plant/GloomShroom",a.CATTAIL="resources/Prefab/Plant/Cattail",a.WINTER_MELON="resources/Prefab/Plant/WinterMelon",a.GOLD_MAGNET="resources/Prefab/Plant/GoldMagnet",a.SPIKEROCK="resources/Prefab/Plant/Spikerock",a.COB_CANNON="resources/Prefab/Plant/CobCannon",a.IMITATER="resources/Prefab/Plant/Imitater",a.SUPER_CHOMPER="resources/Prefab/Plant/SuperChomper",a.BOOM_NUT="resources/Prefab/Plant/BoomNut",a.CAIWEN="resources/Prefab/Plant/CaiWen",a.LASERBEAN="resources/Prefab/Plant/LaserBean",a.FireBlover="resources/Prefab/Plant/FireBlover",a.LuckWindmill="resources/Prefab/Plant/LuckWindmill",a.THREE_KERNEL_PULT="resources/Prefab/ZJPlant/ThreeKernelPult",a.SNOWICE_SHROOM="resources/Prefab/ZJPlant/IceSnowShroom",a.STAR_FRUIT_SHADOW="resources/Prefab/Plant/StarFruitShadow",a.WALL_NUT_BOWLING="resources/Prefab/Plant/WallNutBowling",a.BOOM_NUT_BOWLING="resources/Prefab/Plant/BoomNutBowling",a.TALL_NUT_BOWLING="resources/Prefab/Plant/TallNutBowling",a.TORCH_NUT_BOWLING="resources/Prefab/Plant/TorchNutBowling",a.ICE_NUT_BOWLING="resources/Prefab/Plant/IceNutBowling",a.JALAPENO_NUT_BOWLING="resources/Prefab/Plant/JalapenoNutBowling",a.ZOMBIE="resources/Prefab/Zombie/NormalZombie",a.FLAG_ZOMBIE="resources/Prefab/Zombie/FlagZombie",a.CONE_HEAD_ZOMBIE="resources/Prefab/Zombie/ConeHeadZombie",a.POLEVAULTING_ZOMBIE="resources/Prefab/Zombie/PolevaultingZombie",a.BUCKET_HEAD_ZOMBIE="resources/Prefab/Zombie/BucketHeadZombie",a.NEWSPAPER_ZOMBIE="resources/Prefab/Zombie/NewspaperZombie",a.SCREEN_DOOR_ZOMBIE="resources/Prefab/Zombie/ScreenDoorZombie",a.SCREEN_DOOR_ZOMBIE2="resources/Prefab/Zombie/ScreenDoorZombie2",a.SCREEN_DOOR_ZOMBIE3="resources/Prefab/Zombie/ScreenDoorZombie3",a.FOOTBALL_ZOMBIE="resources/Prefab/Zombie/FootballZombie",a.FOOTBALL_ZOMBIE2="resources/Prefab/Zombie/FootballZombie2",a.DANCING_ZOMBIE="resources/Prefab/Zombie/DancingZombie",a.DANCING_ZOMBIE2="resources/Prefab/Zombie/DancingZombie2",a.DANCING_ZOMBIE3="resources/Prefab/Zombie/DancingZombie3",a.DANCING_FIRE_ZOMBIE="resources/Prefab/Zombie/DancingFireZombie",a.BACKUP_DANCER="resources/Prefab/Zombie/BackupDancerZombie",a.BACKUP_DANCER2="resources/Prefab/Zombie/BackupDancerZombie2",a.BACKUP_FIRE_DANCER="resources/Prefab/Zombie/BackupDancerFireZombie",a.YELLOW_DUCK_ZOMBIE="resources/Prefab/Zombie/YellowDuckZombie",a.DUCK_SWIMMING_CIRCLE="resources/Prefab/Zombie/DuckSwimmingCircle",a.DUCKY_TUBE_ZOMBIE="resources/Prefab/Zombie/DuckyTubeZombie",a.DUCKY_TUBE_CONE_ZOMBIE="resources/Prefab/Zombie/DuckyTubeConeZombie",a.DUCKY_TUBE_BUCKET_ZOMBIE="resources/Prefab/Zombie/DuckyTubeBucketZombie",a.SNORKEL_ZOMBIE="resources/Prefab/Zombie/SnorkelZombie",a.ZOMBONI="resources/Prefab/Zombie/Zomboni",a.ZOMBONI2="resources/Prefab/Zombie/Zomboni2",a.ZOMBONI3="resources/Prefab/Zombie/Zomboni3",a.DIGGERFOOTBALL_ZOMBIE2="resources/Prefab/Zombie/DiggerFootBallZombie",a.POGO_ZOMBIE2="resources/Prefab/Zombie/PogoZombie2",a.POGO_ZOMBIE3="resources/Prefab/Zombie/PogoZombie3",a.LADDER_ZOMBIE2="resources/Prefab/Zombie/LadderZombie2",a.ZOMBIE_BOBSLED_TEAM="resources/Prefab/Zombie/ZombieBobsledTeam",a.DOLPHIN_RIDER_ZOMBIE="resources/Prefab/Zombie/DolphinRiderZombie",a.JACK_ZOMBIE="resources/Prefab/Zombie/JackZombie",a.JACK_ZOMBIE2="resources/Prefab/Zombie/JackZombie2",a.BALLOON_ZOMBIE2="resources/Prefab/Zombie/BalloonZombie2",a.CATAPULT_ZOMBIE2="resources/Prefab/Zombie/CatapultZombie2",a.BALLOON_ZOMBIE="resources/Prefab/Zombie/BalloonZombie",a.DIGGER_ZOMBIE="resources/Prefab/Zombie/DiggerZombie",a.POGO_ZOMBIE="resources/Prefab/Zombie/PogoZombie",a.YETI_ZOMBIE="resources/Prefab/Zombie/YetiZombie",a.BUNGEE_ZOMBIE="resources/Prefab/Zombie/BungeeZombie",a.LADDER_ZOMBIE="resources/Prefab/Zombie/LadderZombie",a.CATAPULT_ZOMBIE="resources/Prefab/Zombie/CatapultZombie",a.GARGANTUAR="resources/Prefab/Zombie/Gargantuar",a.GARGANTUAR2="resources/Prefab/Zombie/Gargantuar2",a.RED_GARGANTUAR="resources/Prefab/Zombie/Gargantuar",a.IMP="resources/Prefab/Zombie/Imp",a.DR_ZOMBOSS="resources/Prefab/Zombie/DrZomBoss",a.ZOMBIE_BOBSLED="resources/Prefab/Zombie/ZombieBobsled",a.Mac_GARGANTUAR="resources/Prefab/Zombie/MachineGargantuar",a.SQUASH_ZOMBIE="resources/Prefab/Zombie/SquashZombie",a.JALAPENO_ZOMBIE="resources/Prefab/Zombie/JalapenoZombie",a.GATLINGSHOOT_ZOMBIE="resources/Prefab/Zombie/GatlingShooterZombie",a.TALLNUT_ZOMBIE="resources/Prefab/Zombie/TallNutZombie",a.SUN="resources/Prefab/Sun",a.CLEANER_CAR="resources/Prefab/CleanerCar",a.BRAIN="resources/Prefab/Brain",a.PITCHFORK="resources/Prefab/PitchFork",a.WORD_EFFECT="resources/Prefab/Effect/WordEffect",a.SHADOW="resources/Prefab/Effect/Shadow",a.WATERWAVEEFFECT="resources/Prefab/Effect/WaterWaveEffect",a.YELLOW_BROW_SHADOW="resources/Prefab/Effect/YellowBrowShadow",a.SHOVEL_EFFECT="resources/Prefab/Effect/ShovelEffect",a.PLANT_EFFECT="resources/Prefab/Effect/PlantEffect",a.DROP_COIN="resources/Prefab/Effect/DropCoin",a.DROP_CARD="resources/Prefab/Effect/DropCard",a.DROP_PLANT_CARD="resources/Prefab/Effect/DropPlantCard",a.ZOMBIE_CLOTHER_FALL_EFFECT="resources/Prefab/Effect/ZombieClotherFallEffect",a.SHOW_GRASS_EFFECT="resources/Prefab/Effect/ShowGrassEffect",a.GROVE_EFFECT="resources/Prefab/Effect/GroveEffect",a.ROOF_PRE_EFFECT="resources/Prefab/Effect/RoofPreEffect",a.SMOKE_EFFECT="resources/Prefab/Effect/SmokeEffect",a.FOG_EFFECT="resources/Prefab/Effect/FogEffect",a.RAIN_NIGHT_EFFECT="resources/Prefab/Effect/RainNightEffect",a.RAIN_EFFECT="resources/Prefab/Effect/RainEffect",a.WATER_LIGHT_EFFECT="resources/Prefab/Effect/WaterLightEffect",a.WATER_FLOWER_EFFECT="resources/Prefab/Effect/WaterFlowerEffect",a.PLANT_WATER_EFFECT="resources/Prefab/Effect/PlantWaterEffect",a.TOMB="resources/Prefab/Effect/Tomb",a.DIRT_EFFECT="resources/Prefab/Effect/DirtEffect",a.JAR="resources/Prefab/Jar",a.HAMMER_EFFECT="resources/Prefab/Effect/HammerEffect",a.ICE_GROUND="resources/Prefab/Effect/IceGround",a.OIL_GROUND="resources/Prefab/Effect/OilGround",a.ABSORB_IRON_EQUIP="resources/Prefab/Effect/AbsorbIronEquip",a.NUT_BOOM_EFFECT="resources/Prefab/Effect/NutBoomEffect",a.CHERRY_BOOM_EFFECT="resources/Prefab/Effect/CherryBoomEffect",a.JACK_BOOM_EFFECT="resources/Prefab/Effect/JackBoomEffect",a.BOOM_FIRE_EFFECT="resources/Prefab/Effect/BoomFireEffect",a.BOOM_BALL_EFFECT="resources/Prefab/Effect/FireBallEffect",a.TANGLEKELP_EFFECT="resources/Prefab/Effect/TangleKelpEffect",a.BACK_PUMPKIN="resources/Prefab/Effect/BackPumpkin",a.BACK_PUMPKINFIRE="resources/Prefab/Effect/BackPumpkinFire",a.BACK_PUMPKINPURPLE="resources/Prefab/Effect/BackPumpkinPurple",a.DOOM_HOLE_EFFECT="resources/Prefab/Effect/DoomHoleEffect",a.GOLD_HOLE_EFFECT="resources/Prefab/Effect/GoldHoleEffect",a.ZOMBIE_HOLE_EFFECT="resources/Prefab/Effect/ZombieHoleEffect",a.DOOM_BOOM_EFFECT="resources/Prefab/Effect/DoomBoomEffect",a.ICE_BOOM_EFFECT="resources/Prefab/Effect/IceBoomEffect",a.ICE_BOOMREADY_EFFECT="resources/Prefab/Effect/IceBoomReadyEffect",a.FROZEN_EFFECT="resources/Prefab/Effect/FrozenEffect",a.FUME_SHROOM_EFFECT="resources/Prefab/Effect/FumeShroomEffect",a.ICE_FUME_SHROOM_EFFECT="resources/Prefab/Effect/IceFumeShroomEffect",a.GLOOM_SHROOM_EFFECT="resources/Prefab/Effect/GloomShroomEffect",a.LADDER="resources/Prefab/Effect/Ladder",a.NUT_HURT_EFFECT="resources/Prefab/Effect/NutHurtEffect",a.BUTTER_EFFECT="resources/Prefab/Effect/ButterEffect",a.PLANTERN_EFFECT="resources/Prefab/Effect/PlanternEffect",a.SQUASH_EFFECT="resources/Prefab/Effect/SquashEffect",a.HYPNO_EFFECT="resources/Prefab/Effect/HypnoEffect",a.COB_BOOM_EFFECT="resources/Prefab/Effect/CobBoomEffect",a.COB_BOOM_HOLE="resources/Prefab/Effect/CobHoleEffect",a.IMITATER_EFFECT="resources/Prefab/Effect/ImitaterEffect",a.DR_ZOM_BALL="resources/Prefab/Effect/DrZomBall",a.BUNGEE_ZOMBIE_EFFECT="resources/Prefab/Effect/BungeeZombieEffect",a.RICOCHET_BULLET_EFFECT="resources/Prefab/Effect/RicochetBulletEffect",a.POLEVAULTING_EFFECT="resources/Prefab/Effect/PolevaultingEffect",a.SUMMON_POCKET_EFFECT="resources/Prefab/Effect/SummonPocketEffect",a.POCKET_EFFECT="resources/Prefab/Effect/YellowBrowPocketEffect",a.FIRE_EFFECT="resources/Prefab/Effect/FireEffect",a.PORTAL_DOOR="resources/Prefab/Effect/PortalDoor",a.LONGFIRE_EFFECT="resources/Prefab/Effect/LongFireEffect",a.NORMAL_ASHES_EFFECT="resources/Prefab/Effect/NormalAshesEffect",a.IceNut="resources/Prefab/ZJPlant/IceNut",a.TreasureBuster="resources/Prefab/ZJPlant/TreasureBuster",a.SunBomb="resources/Prefab/ZJPlant/SunBomb",a.MelonNut="resources/Prefab/ZJPlant/MelonNut",a.HoleNut="resources/Prefab/ZJPlant/HoleNut",a.MagnetNut="resources/Prefab/ZJPlant/MagnetNut",a.ZombieNut="resources/Prefab/ZJPlant/ZombieNut",a.VipNut="resources/Prefab/ZJPlant/VipNut",a.HeighIceNut="resources/Prefab/ZJPlant/HeighIceNut",a.PumpkinPurple="resources/Prefab/ZJPlant/PumpkinPurple",a.TorchNut="resources/Prefab/ZJPlant/TorchNut",a.FireNut="resources/Prefab/ZJPlant/FireNut",a.IceCat="resources/Prefab/ZJPlant/IceCat",a.HamburgShooter="resources/Prefab/ZJPlant/HamburgShooter",a.HotDog="resources/Prefab/ZJPlant/HotDog",a.ShiftNut="resources/Prefab/ZJPlant/ShiftNut",a.DoomCannon="resources/Prefab/ZJPlant/DoomCannon",a.SunFlowerPlus="resources/Prefab/ZJPlant/SunFlowerPlus",a.SunBean="resources/Prefab/ZJPlant/SunBean",a.SunMine="resources/Prefab/ZJPlant/SunMine",a.FireMine="resources/Prefab/ZJPlant/FireMine",a.SquashNut="resources/Prefab/ZJPlant/SquashNut",a.IceSquash="resources/Prefab/ZJPlant/IceSquash",a.SquashKing="resources/Prefab/ZJPlant/SquashKing",a.ButterJoker="resources/Prefab/ZJPlant/ButterJoker",a.GarlicJalapeno="resources/Prefab/ZJPlant/GarlicJalapeno",a.CherryJalapeno="resources/Prefab/ZJPlant/CherryJalapeno",a.IceBlover="resources/Prefab/ZJPlant/IceBlover",a.PeaCannon="resources/Prefab/ZJPlant/PeaCannon",a.ButterGloomShroom="resources/Prefab/ZJPlant/ButterGloomShroom",a.RandomPlantBox="resources/Prefab/ZJPlant/RandomPlantBox",a.PeaPool="resources/Prefab/ZJPlant/PeaPool",a.SpikeRockNut="resources/Prefab/ZJPlant/SpikeRockNut",a.SunQueen="resources/Prefab/ZJPlant/SunQueen",a.WildPea="resources/Prefab/ZJPlant/WildPea",a.CupidShooter="resources/Prefab/ZJPlant/CupidShooter",a.PeaSun="resources/Prefab/ZJPlant/PeaSun",a.SunPot="resources/Prefab/ZJPlant/SunPot",a.QQFUME_SHROOM="resources/Prefab/ZJPlant/QqFumeShroom",a.ICEFUME_SHROOM="resources/Prefab/ZJPlant/IceFumeShroom",a.IceSpike="resources/Prefab/ZJPlant/IceSpike",a.CATLITTERPOT="resources/Prefab/ZJPlant/CatLitterPot",a.SpikeChomper="resources/Prefab/ZJPlant/SpikeChomper",a.PumpkinPurpleFire="resources/Prefab/ZJPlant/PumpkinFire",a.MarigoldMammon="resources/Prefab/ZJPlant/MarigoldMammon",a.CatSun="resources/Prefab/ZJPlant/CatSun",a.SunShroomShooter="resources/Prefab/ZJPlant/SunShroomShooter",a.IceCat2="resources/Prefab/ZJPlant/IceCat2",a.HoloCards="resources/Prefab/ZJPlant/HoloCards",a.DragonKingSnowShooter="resources/Prefab/Plant/DragonKingSnowPea",a.Mallet="resources/Prefab/ZJPlant/Mallet",a.XXLCandy="resources/Prefab/ZJPlant/XxlCandy",a.ReCactus="resources/Prefab/ZJPlant/ReCactus",a.GarlicChomper="resources/Prefab/ZJPlant/GarlicChomper",a.HypnoGarlic="resources/Prefab/ZJPlant/HypnoGarlic",a.FlowerPotShroom="resources/Prefab/ZJPlant/FlowerPotShroom",a.ZFRandomPlantBox="resources/Prefab/ZJPlant/ZFRandomPlantBox",a.CONE_HEAD_ZOMBIE2="resources/Prefab/Zombie/ConeHeadZombie2",a.POLEVAULTING_ZOMBIE2="resources/Prefab/Zombie/PolevaultingZombie2",a.BedCar="resources/Prefab/Zombie/BedCar",a.NightWear="resources/Prefab/Zombie/NightWear",a.PeaZombie="resources/Prefab/Zombie/PeaZombie",a.SKELETON_ZOMBIE="resources/Prefab/Zombie/SkeletonZombie",a.NECROMANCER_ZOMBIE="resources/Prefab/Zombie/NecromancerZombie",a.Nut_Zombie="resources/Prefab/Zombie/NutZombie",a.HoleNut_Zombie="resources/Prefab/Zombie/HoleNutZombie",a.SURF_BANANA_ZOMBIE="resources/Prefab/Zombie/SurfBananaZombie"}(r=e.pzaResourceUrl||(e.pzaResourceUrl={}));var l=function(){function a(){}return a.getSubResources=function(a){return this.SubResourceMap.get(a)},a.getPartSubResources=function(a,t){var e=a+"-"+t,o=this.PartSubResourceMap.get(e);return null!=o?o:(o=[new p(r.SUN),new p(r.CLEANER_CAR),new p(r.WORD_EFFECT),new p(r.SHADOW),new p(r.SHOVEL_EFFECT),new p(r.PLANT_EFFECT),new p(r.DROP_COIN),new p(r.DROP_CARD),new p(r.DROP_PLANT_CARD),new p(r.NORMAL_ASHES_EFFECT),new p(r.SMOKE_EFFECT)],1==a&&t<=4&&o.push(new p(r.SHOW_GRASS_EFFECT)),2==a&&(o.push(new p(r.TOMB)),o.push(new p(r.DIRT_EFFECT)),5==t&&o.push(new p(r.HAMMER_EFFECT))),a<=4?o.push(new p(r.GROVE_EFFECT)):o.push(new p(r.ROOF_PRE_EFFECT)),4==a&&(o.push(new p(r.FOG_EFFECT)),5==t&&(o.push(new p(r.JAR)),o.push(new p(r.HAMMER_EFFECT))),10==t&&(o.push(new p(r.RAIN_NIGHT_EFFECT)),o.push(new p(r.RAIN_EFFECT)))),3==a||4==a?(o.push(new p(r.WATER_FLOWER_EFFECT)),o.push(new p(r.WATER_LIGHT_EFFECT)),o.push(new p(r.PLANT_WATER_EFFECT))):5==a&&(o.push(new p(r.BUNGEE_ZOMBIE)),o.push(new p(r.BUNGEE_ZOMBIE_EFFECT))),this.PartSubResourceMap.set(e,o),o)},a.getPlantUrl=function(t){return a.plantPrefabMap.get(t)},a.getZombieUrl=function(t){return a.zombiePrefabMap.get(t)},a.MainResourceMap=new Map([[r.MAIN_SCENE,new p(r.MAIN_SCENE,o.Scene)],[r.HOME_SELECT_VIEW,new p(r.HOME_SELECT_VIEW,o.Prefab)]]),a.SubResourceMap=new Map([[r.ZOMBIE_HANDBOOK_VIEW,[new p(r.ZOMBIE_ICON,o.SpriteFrameDir)]],[r.PLANT_HANDBOOK_VIEW,[new p(r.PLANT_ICON,o.SpriteFrameDir)]],[r.PLANT_SELECT_VIEW,[new p(r.PLANT_ICON,o.SpriteFrameDir)]],[r.PLANT_BELT_VIEW,[new p(r.PLANT_ICON,o.SpriteFrameDir)]],[r.PART_SELECT_VIEW,[new p(r.PART_REWARD,o.SpriteFrameDir)]],[r.SHOP_VIEW,[new p(r.SHOP_ITEM_ICON,o.SpriteFrameDir)]],[r.MAGNET_SHROOM,[new p(r.ABSORB_IRON_EQUIP)]],[r.BOOM_NUT_BOWLING,[new p(r.NUT_BOOM_EFFECT)]],[r.CHERRY_BOMB,[new p(r.CHERRY_BOOM_EFFECT)]],[r.JALAPENO,[new p(r.BOOM_FIRE_EFFECT)]],[r.TORCHWOOD,[new p(r.BOOM_FIRE_EFFECT)]],[r.TANGLE_KELP,[new p(r.TANGLEKELP_EFFECT)]],[r.PUMPKIN,[new p(r.BACK_PUMPKIN)]],[r.PumpkinPurpleFire,[new p(r.BACK_PUMPKINFIRE)]],[r.DOOM_SHROOM,[new p(r.DOOM_BOOM_EFFECT),new p(r.DOOM_HOLE_EFFECT)]],[r.ICE_SHROOM,[new p(r.ICE_BOOM_EFFECT),new p(r.FROZEN_EFFECT)]],[r.FUME_SHROOM,[new p(r.FUME_SHROOM_EFFECT)]],[r.ICEFUME_SHROOM,[new p(r.ICE_FUME_SHROOM_EFFECT)]],[r.WALL_NUT,[new p(r.NUT_HURT_EFFECT)]],[r.TALL_NUT,[new p(r.NUT_HURT_EFFECT)]],[r.KERNEL_PULT,[new p(r.BUTTER_EFFECT)]],[r.PLANTERN,[new p(r.PLANTERN_EFFECT)]],[r.SQUASH,[new p(r.SQUASH_EFFECT)]],[r.HYPNO_SHROOM,[new p(r.HYPNO_EFFECT)]],[r.GLOOM_SHROOM,[new p(r.GLOOM_SHROOM_EFFECT)]],[r.COB_CANNON,[new p(r.COB_BOOM_EFFECT),new p(r.COB_BOOM_HOLE)]],[r.IMITATER,[new p(r.IMITATER_EFFECT)]],[r.ZOMBONI,[new p(r.ICE_GROUND),new p(r.ZOMBIE_BOBSLED_TEAM),new p(r.ZOMBIE_BOBSLED)]],[r.ZOMBONI2,[new p(r.ICE_GROUND),new p(r.ZOMBIE_BOBSLED_TEAM),new p(r.ZOMBIE_BOBSLED)]],[r.JACK_ZOMBIE,[new p(r.JACK_BOOM_EFFECT)]],[r.JACK_ZOMBIE2,[new p(r.JACK_BOOM_EFFECT)]],[r.LADDER_ZOMBIE,[new p(r.LADDER)]],[r.DR_ZOMBOSS,[new p(r.DR_ZOM_BALL)]],[r.BedCar,[new p(r.NightWear)]]]),a.PartSubResourceMap=new Map,a.plantPrefabMap=new Map([[n.pzaPlantEnum.PEA_SHOOTER,r.PEA_SHOOTER],[n.pzaPlantEnum.SUN_FLOWER,r.SUN_FLOWER],[n.pzaPlantEnum.CHERRY_BOMB,r.CHERRY_BOMB],[n.pzaPlantEnum.WALL_NUT,r.WALL_NUT],[n.pzaPlantEnum.POTATO_MINE,r.POTATO_MINE],[n.pzaPlantEnum.SNOW_PEA,r.SNOW_PEA],[n.pzaPlantEnum.CHOMPER,r.CHOMPER],[n.pzaPlantEnum.REPEATER,r.REPEATER],[n.pzaPlantEnum.SUN_SHROOM,r.SUN_SHROOM],[n.pzaPlantEnum.PUFF_SHROOM,r.PUFF_SHROOM],[n.pzaPlantEnum.FUME_SHROOM,r.FUME_SHROOM],[n.pzaPlantEnum.GRAVE_BUSTER,r.GRAVE_BUSTER],[n.pzaPlantEnum.HYPNO_SHROOM,r.HYPNO_SHROOM],[n.pzaPlantEnum.SCAREDY_SHROOM,r.SCAREDY_SHROOM],[n.pzaPlantEnum.ICE_SHROOM,r.ICE_SHROOM],[n.pzaPlantEnum.DOOM_SHROOM,r.DOOM_SHROOM],[n.pzaPlantEnum.LILY_PAD,r.LILY_PAD],[n.pzaPlantEnum.SQUASH,r.SQUASH],[n.pzaPlantEnum.THREE_PEATER,r.THREE_PEATER],[n.pzaPlantEnum.TANGLE_KELP,r.TANGLE_KELP],[n.pzaPlantEnum.JALAPENO,r.JALAPENO],[n.pzaPlantEnum.SPIKEWEED,r.SPIKEWEED],[n.pzaPlantEnum.TORCHWOOD,r.TORCHWOOD],[n.pzaPlantEnum.TALL_NUT,r.TALL_NUT],[n.pzaPlantEnum.SEA_SHROOM,r.SEA_SHROOM],[n.pzaPlantEnum.PLANTERN,r.PLANTERN],[n.pzaPlantEnum.CACTUS,r.CACTUS],[n.pzaPlantEnum.BLOVER,r.BLOVER],[n.pzaPlantEnum.SPLIT_PEA,r.SPLIT_PEA],[n.pzaPlantEnum.STAR_FRUIT,r.STAR_FRUIT],[n.pzaPlantEnum.PUMPKIN,r.PUMPKIN],[n.pzaPlantEnum.MAGNET_SHROOM,r.MAGNET_SHROOM],[n.pzaPlantEnum.CABBAGE_PULT,r.CABBAGE_PULT],[n.pzaPlantEnum.FLOWER_POT,r.FLOWER_POT],[n.pzaPlantEnum.KERNEL_PULT,r.KERNEL_PULT],[n.pzaPlantEnum.COFFEE_BEAN,r.COFFEE_BEAN],[n.pzaPlantEnum.GARLIC,r.GARLIC],[n.pzaPlantEnum.UMBRELLA_LEAF,r.UMBRELLA_LEAF],[n.pzaPlantEnum.MARIGOLD,r.MARIGOLD],[n.pzaPlantEnum.MELON_PULT,r.MELON_PULT],[n.pzaPlantEnum.GATLING_PEA,r.GATLING_PEA],[n.pzaPlantEnum.TWIN_SUNFLOWER,r.TWIN_SUNFLOWER],[n.pzaPlantEnum.GLOOM_SHROOM,r.GLOOM_SHROOM],[n.pzaPlantEnum.CATTAIL,r.CATTAIL],[n.pzaPlantEnum.WINTER_MELON,r.WINTER_MELON],[n.pzaPlantEnum.GOLD_MAGNET,r.GOLD_MAGNET],[n.pzaPlantEnum.SPIKEROCK,r.SPIKEROCK],[n.pzaPlantEnum.COB_CANNON,r.COB_CANNON],[n.pzaPlantEnum.IMITATER,r.IMITATER],[n.pzaPlantEnum.WALL_NUT_BOWLING,r.WALL_NUT_BOWLING],[n.pzaPlantEnum.BOOM_NUT_BOWLING,r.BOOM_NUT_BOWLING],[n.pzaPlantEnum.TALL_NUT_BOWLING,r.TALL_NUT_BOWLING],[n.pzaPlantEnum.SUPER_CHOMPER,r.SUPER_CHOMPER],[n.pzaPlantEnum.BOOM_NUT,r.BOOM_NUT],[n.pzaPlantEnum.ICE_NUT,r.IceNut],[n.pzaPlantEnum.TreasureBuster,r.TreasureBuster],[n.pzaPlantEnum.SunBomb,r.SunBomb],[n.pzaPlantEnum.MelonNut,r.MelonNut],[n.pzaPlantEnum.HoleNut,r.HoleNut],[n.pzaPlantEnum.MagnetNut,r.MagnetNut],[n.pzaPlantEnum.ZombieNut,r.ZombieNut],[n.pzaPlantEnum.VipNut,r.VipNut],[n.pzaPlantEnum.HeighIceNut,r.HeighIceNut],[n.pzaPlantEnum.PumpkinPurple,r.PumpkinPurple],[n.pzaPlantEnum.TorchNut,r.TorchNut],[n.pzaPlantEnum.FireNut,r.FireNut],[n.pzaPlantEnum.IceCat,r.IceCat],[n.pzaPlantEnum.HamburgShooter,r.HamburgShooter],[n.pzaPlantEnum.HotDog,r.HotDog],[n.pzaPlantEnum.ShiftNut,r.ShiftNut],[n.pzaPlantEnum.DoomCannon,r.DoomCannon],[n.pzaPlantEnum.SunFlowerPlus,r.SunFlowerPlus],[n.pzaPlantEnum.SunBean,r.SunBean],[n.pzaPlantEnum.SunMine,r.SunMine],[n.pzaPlantEnum.FireMine,r.FireMine],[n.pzaPlantEnum.SquashNut,r.SquashNut],[n.pzaPlantEnum.IceSquash,r.IceSquash],[n.pzaPlantEnum.SquashKing,r.SquashKing],[n.pzaPlantEnum.ButterJoker,r.ButterJoker],[n.pzaPlantEnum.GarlicJalapeno,r.GarlicJalapeno],[n.pzaPlantEnum.CherryJalapeno,r.CherryJalapeno],[n.pzaPlantEnum.IceBlover,r.IceBlover],[n.pzaPlantEnum.PeaCannon,r.PeaCannon],[n.pzaPlantEnum.ButterGloomShroom,r.ButterGloomShroom],[n.pzaPlantEnum.RandomPlantBox,r.RandomPlantBox],[n.pzaPlantEnum.PeaPool,r.PeaPool],[n.pzaPlantEnum.SpikeRockNut,r.SpikeRockNut],[n.pzaPlantEnum.SunQueen,r.SunQueen],[n.pzaPlantEnum.WildPea,r.WildPea],[n.pzaPlantEnum.CupidShooter,r.CupidShooter],[n.pzaPlantEnum.PeaSun,r.PeaSun],[n.pzaPlantEnum.SunPot,r.SunPot],[n.pzaPlantEnum.QQFUME_SHROOM,r.QQFUME_SHROOM],[n.pzaPlantEnum.ICEFUME_SHROOM,r.ICEFUME_SHROOM],[n.pzaPlantEnum.IceSpike,r.IceSpike],[n.pzaPlantEnum.CATLITTERPOT,r.CATLITTERPOT],[n.pzaPlantEnum.SpikeChomper,r.SpikeChomper],[n.pzaPlantEnum.PumpkinPurpleFire,r.PumpkinPurpleFire],[n.pzaPlantEnum.MarigoldMammon,r.MarigoldMammon],[n.pzaPlantEnum.CatSun,r.CatSun],[n.pzaPlantEnum.SunShroomShooter,r.SunShroomShooter],[n.pzaPlantEnum.IceCat2,r.IceCat2],[n.pzaPlantEnum.HoloCards,r.HoloCards],[n.pzaPlantEnum.Mallet,r.Mallet],[n.pzaPlantEnum.XXLCandy,r.XXLCandy],[n.pzaPlantEnum.CAIWEN,r.CAIWEN],[n.pzaPlantEnum.ReCactus,r.ReCactus],[n.pzaPlantEnum.GARLIC_CHOMPER,r.GarlicChomper],[n.pzaPlantEnum.HYPNO_GARLIC,r.HypnoGarlic],[n.pzaPlantEnum.FLOWERPOT_SHROOM,r.FlowerPotShroom],[n.pzaPlantEnum.LaserBean,r.LASERBEAN],[n.pzaPlantEnum.FireBlover,r.FireBlover],[n.pzaPlantEnum.TORCH_NUT_BOWLING,r.TORCH_NUT_BOWLING],[n.pzaPlantEnum.ICE_NUT_BOWLING,r.ICE_NUT_BOWLING],[n.pzaPlantEnum.JALAPENO_NUT_BOWLING,r.JALAPENO_NUT_BOWLING],[n.pzaPlantEnum.ZFRandomPlantBox,r.ZFRandomPlantBox],[n.pzaPlantEnum.LUCK_WINDMILL,r.LuckWindmill],[n.pzaPlantEnum.THREE_KERNEL_PULT,r.THREE_KERNEL_PULT],[n.pzaPlantEnum.SNOWICE_SHROOM,r.SNOWICE_SHROOM]]),a.zombiePrefabMap=new Map([[i.pzaZombieEnum.ZOMBIE,r.ZOMBIE],[i.pzaZombieEnum.FLAG_ZOMBIE,r.FLAG_ZOMBIE],[i.pzaZombieEnum.CONE_HEAD_ZOMBIE,r.CONE_HEAD_ZOMBIE],[i.pzaZombieEnum.POLEVAULTING_ZOMBIE,r.POLEVAULTING_ZOMBIE],[i.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,r.BUCKET_HEAD_ZOMBIE],[i.pzaZombieEnum.NEWSPAPER_ZOMBIE,r.NEWSPAPER_ZOMBIE],[i.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,r.SCREEN_DOOR_ZOMBIE],[i.pzaZombieEnum.FOOTBALL_ZOMBIE,r.FOOTBALL_ZOMBIE],[i.pzaZombieEnum.DANCING_ZOMBIE,r.DANCING_ZOMBIE],[i.pzaZombieEnum.BACKUP_DANCER,r.BACKUP_DANCER],[i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,r.DUCKY_TUBE_ZOMBIE],[i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE,r.DUCKY_TUBE_CONE_ZOMBIE],[i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE,r.DUCKY_TUBE_BUCKET_ZOMBIE],[i.pzaZombieEnum.SNORKEL_ZOMBIE,r.SNORKEL_ZOMBIE],[i.pzaZombieEnum.ZOMBONI,r.ZOMBONI],[i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM,r.ZOMBIE_BOBSLED_TEAM],[i.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,r.DOLPHIN_RIDER_ZOMBIE],[i.pzaZombieEnum.JACK_ZOMBIE,r.JACK_ZOMBIE],[i.pzaZombieEnum.BALLOON_ZOMBIE,r.BALLOON_ZOMBIE],[i.pzaZombieEnum.DIGGER_ZOMBIE,r.DIGGER_ZOMBIE],[i.pzaZombieEnum.POGO_ZOMBIE,r.POGO_ZOMBIE],[i.pzaZombieEnum.YETI_ZOMBIE,r.YETI_ZOMBIE],[i.pzaZombieEnum.BUNGEE_ZOMBIE,r.BUNGEE_ZOMBIE],[i.pzaZombieEnum.LADDER_ZOMBIE,r.LADDER_ZOMBIE],[i.pzaZombieEnum.CATAPULT_ZOMBIE,r.CATAPULT_ZOMBIE],[i.pzaZombieEnum.GARGANTUAR,r.GARGANTUAR],[i.pzaZombieEnum.RED_GARGANTUAR,r.RED_GARGANTUAR],[i.pzaZombieEnum.IMP,r.IMP],[i.pzaZombieEnum.IMP_MINI,r.IMP],[i.pzaZombieEnum.DR_ZOMBOSS,r.DR_ZOMBOSS],[i.pzaZombieEnum.ZOMBIE_BOBSLED,r.ZOMBIE_BOBSLED],[i.pzaZombieEnum.CONE_HEAD_ZOMBIE2,r.CONE_HEAD_ZOMBIE2],[i.pzaZombieEnum.POLEVAULTING_ZOMBIE2,r.POLEVAULTING_ZOMBIE2],[i.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2,r.SCREEN_DOOR_ZOMBIE2],[i.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3,r.SCREEN_DOOR_ZOMBIE2],[i.pzaZombieEnum.FOOTBALL_ZOMBIE2,r.FOOTBALL_ZOMBIE2],[i.pzaZombieEnum.DANCING_ZOMBIE2,r.DANCING_ZOMBIE2],[i.pzaZombieEnum.DANCING_ZOMBIE3,r.DANCING_ZOMBIE3],[i.pzaZombieEnum.BACKUP_DANCER2,r.BACKUP_DANCER2],[i.pzaZombieEnum.JACK_ZOMBIE2,r.JACK_ZOMBIE2],[i.pzaZombieEnum.BALLOON_ZOMBIE2,r.BALLOON_ZOMBIE2],[i.pzaZombieEnum.CATAPULT_ZOMBIE2,r.CATAPULT_ZOMBIE2],[i.pzaZombieEnum.GARGANTUAR2,r.GARGANTUAR2],[i.pzaZombieEnum.GARGANTUAR3,r.GARGANTUAR2],[i.pzaZombieEnum.GARGANTUAR4,r.GARGANTUAR2],[i.pzaZombieEnum.RED_GARGANTUAR2,r.GARGANTUAR2],[i.pzaZombieEnum.RED_GARGANTUAR3,r.GARGANTUAR2],[i.pzaZombieEnum.RED_GARGANTUAR4,r.GARGANTUAR2],[i.pzaZombieEnum.ZOMBONI2,r.ZOMBONI2],[i.pzaZombieEnum.ZOMBONI3,r.ZOMBONI3],[i.pzaZombieEnum.DIGGERFOOTBALL_ZOMBIE2,r.DIGGERFOOTBALL_ZOMBIE2],[i.pzaZombieEnum.POGO_ZOMBIE2,r.POGO_ZOMBIE2],[i.pzaZombieEnum.POGO_ZOMBIE3,r.POGO_ZOMBIE3],[i.pzaZombieEnum.LADDER_ZOMBIE2,r.LADDER_ZOMBIE2],[i.pzaZombieEnum.LADDER_ZOMBIE3,r.LADDER_ZOMBIE2],[i.pzaZombieEnum.LADDER_ZOMBIE4,r.LADDER_ZOMBIE2],[i.pzaZombieEnum.BedCar,r.BedCar],[i.pzaZombieEnum.NightWear,r.NightWear],[i.pzaZombieEnum.PeaZombie,r.PeaZombie],[i.pzaZombieEnum.NormalPeaZombie,r.PeaZombie],[i.pzaZombieEnum.PeaZombie2,r.PeaZombie],[i.pzaZombieEnum.PeaZombie3,r.PeaZombie],[i.pzaZombieEnum.PeaZombie4,r.PeaZombie],[i.pzaZombieEnum.SKELETON_ZOMBIE,r.SKELETON_ZOMBIE],[i.pzaZombieEnum.NECROMANCER_ZOMBIE,r.NECROMANCER_ZOMBIE],[i.pzaZombieEnum.DANCING_FIRE_ZOMBIE,r.DANCING_FIRE_ZOMBIE],[i.pzaZombieEnum.BACKUP_FIRE_DANCER,r.BACKUP_FIRE_DANCER],[i.pzaZombieEnum.YELLOW_DUCK_ZOMBIE,r.YELLOW_DUCK_ZOMBIE],[i.pzaZombieEnum.DUCK_SWIMMING_CIRCLE,r.DUCK_SWIMMING_CIRCLE],[i.pzaZombieEnum.Nut_Zombie,r.Nut_Zombie],[i.pzaZombieEnum.Nut_Zombie1,r.Nut_Zombie],[i.pzaZombieEnum.Mac_GARGANTUAR,r.Mac_GARGANTUAR],[i.pzaZombieEnum.SQUASH_ZOMBIE,r.SQUASH_ZOMBIE],[i.pzaZombieEnum.JALAPENO_ZOMBIE,r.JALAPENO_ZOMBIE],[i.pzaZombieEnum.GATLINGSHOOT_ZOMBIE,r.GATLINGSHOOT_ZOMBIE],[i.pzaZombieEnum.TALLNUT_ZOMBIE,r.TALLNUT_ZOMBIE],[i.pzaZombieEnum.SURF_BANANA_ZOMBIE,r.SURF_BANANA_ZOMBIE]]),a}();e.pzaPreLoadManager=l,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum"}],pzaPreOpenView:[function(a,t,e){"use strict";cc._RF.push(t,"6b42db5VpFESKI76+GXAAZl","pzaPreOpenView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPreOpenView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaStatisticsMgr"),s=a("../utils/pzaChannel"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.confirmTxt=null,t.adIcon=null,t.confirmBtn=null,t.confirmCall=null,t.cutDown=3,t}return n(t,a),t.prototype.show=function(a){this.confirmCall=a,this.cutDown=3,this.confirmBtn.interactable=!1,this.refreshBtnTxt(),s.pzaChannel.instance().closeBanner()},t.prototype.update=function(a){this.cutDown<=0||(this.cutDown-=a,this.refreshBtnTxt())},t.prototype.refreshBtnTxt=function(){if(this.cutDown<=0)return this.confirmBtn.interactable=!0,this.adIcon.active=!0,this.confirmTxt.string="\u63d0\u524d\u4f53\u9a8c",void l.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"19"},{name:"adname",value:"\u65e0\u5c3d\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"});this.adIcon.active=!1,this.confirmTxt.string=""+Math.ceil(this.cutDown)},t.prototype.clickConfirm=function(){p.pzaSoundManager.playSFX(),this.close(),this.confirmCall&&this.confirmCall()},t.prototype.clickCancel=function(){s.pzaChannel.instance().showBanner(),p.pzaSoundManager.playSFX(),this.close()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u786e\u5b9a\u6309\u94ae\u6587\u6848",type:cc.Label})],t.prototype,"confirmTxt",void 0),i([d({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Node})],t.prototype,"adIcon",void 0),i([d({displayName:"\u786e\u5b9a\u6309\u94ae",type:cc.Button})],t.prototype,"confirmBtn",void 0),i([u],t)}(cc.Component);e.pzaPreOpenView=h,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../utils/pzaChannel":"pzaChannel"}],pzaPreviewTip:[function(a,t,e){"use strict";cc._RF.push(t,"f8bc1KUK1dFB62k9KmZdlgF","pzaPreviewTip");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPreviewTip=void 0;var r=a("./pzaGameCommonPool"),p=a("./pzaGameManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.word=null,t.flagWord=null,t.chapterPreviewTips=["\u8fd9\u91cc\u662f\u4f60\u7684\u623f\u5b50","\u8fd9\u91cc\u662f\u4f60\u7684\u623f\u5b50","\u50f5\u5c38\u4eec\u5728\u540e\u9662","\u50f5\u5c38\u4eec\u5728\u540e\u9662","\u4fdd\u62a4\u597d\u4f60\u7684\u5c4b\u9876","\u8fd9\u91cc\u662f\u4f60\u7684\u623f\u5b50","\u8fd9\u91cc\u662f\u4f60\u7684\u623f\u5b50","\u50f5\u5c38\u4eec\u5728\u540e\u9662","\u50f5\u5c38\u4eec\u5728\u540e\u9662","\u4fdd\u62a4\u597d\u4f60\u7684\u5c4b\u9876"],t.survivalPreviewTips=["\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876","\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876"],t}return n(t,a),t.prototype.showTip=function(a,t,e,o){var n=this;p.pzaGameManager.getCurrentGame().showPreviewTip(this,a,t),this.word.node.stopAllActions(),this.word.node.opacity=255,null!=o&&this.word.node.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(o),cc.delayTime(.5),cc.fadeOut(.4),cc.callFunc(function(){n.close()})))},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u6587\u5b57",type:cc.Label})],t.prototype,"word",void 0),i([c({displayName:"\u65d7\u5e1c\u6587\u5b57",type:cc.Label})],t.prototype,"flagWord",void 0),i([s],t)}(cc.Component);e.pzaPreviewTip=u,cc._RF.pop()},{"./pzaGameCommonPool":"pzaGameCommonPool","./pzaGameManager":"pzaGameManager"}],pzaPrivacyWin:[function(a,t,e){"use strict";cc._RF.push(t,"a87761x8ORPppXOssBXcfCw","pzaPrivacyWin");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaChannel"),p=a("./pzaKDefine"),l=a("./pzakc"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.txt_main=null,t.bt_agree=null,t.bt_reject=null,t.win2=null,t.txt=null,t.bt_next=null,t.bt_pre=null,t.close=null,t.bt_type1=null,t.bt_type2=null,t.contentTxt=null,t.closeView=!1,t.pType=0,t.closeCallBack=null,t}return n(t,a),t.prototype.onLoad=function(){var a=this;this.close.on(cc.Node.EventType.TOUCH_END,function(){a.closeDetail()}),this.bt_pre.on(cc.Node.EventType.TOUCH_END,function(){a.txt.string=r.pzaChannel.instance().privacyPrePage(a.pType)}),this.bt_next.on(cc.Node.EventType.TOUCH_END,function(){a.txt.string=r.pzaChannel.instance().privacyNextPage(a.pType)}),this.bt_type1.on(cc.Node.EventType.TOUCH_END,function(){a.pType=0,a.txt.string=r.pzaChannel.instance().privacyPage1(a.pType)}),this.bt_type2.on(cc.Node.EventType.TOUCH_END,function(){a.pType=1,a.txt.string=r.pzaChannel.instance().privacyPage1(a.pType)}),this.txt.string=r.pzaChannel.instance().privacyPage1(this.pType),this.bt_agree.on(cc.Node.EventType.TOUCH_END,function(){a.agree()}),this.bt_reject.on(cc.Node.EventType.TOUCH_END,function(){a.node.active=!1,r.pzaChannel.instance().privacyReject(),r.pzaChannel.instance().exit()}),this.txt_main.on(cc.Node.EventType.TOUCH_END,function(){a.showContent(),a.closeView=!1}),this.win2.active=!1;var t=this.contentTxt.string;t=t.replace("\u300a\u300b","\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b"),this.contentTxt.string=t},t.prototype.showContent=function(){this.win2.active=!0,this.closeView=!0,this.txt.string=r.pzaChannel.instance().privacyPrePage(this.pType),"qq"==r.pzaChannel.instance().channel&&(this.bt_type1.active=!0,this.bt_type1.x=-130,this.bt_type2.active=!0,this.bt_type2.x=130)},t.prototype.closeDetail=function(){this.win2.active=!1,this.closeView&&(this.node.active=!1)},t.prototype.agree=function(){r.pzaChannel.instance().privacyAgree(),this.node.active=!1,l.default.sendMsg(p.Msg.closeLoading),this.closeCallBack&&this.closeCallBack()},t.prototype.setCallBack=function(a){this.closeCallBack=a},i([u(cc.Node)],t.prototype,"txt_main",void 0),i([u(cc.Node)],t.prototype,"bt_agree",void 0),i([u(cc.Node)],t.prototype,"bt_reject",void 0),i([u(cc.Node)],t.prototype,"win2",void 0),i([u(cc.RichText)],t.prototype,"txt",void 0),i([u(cc.Node)],t.prototype,"bt_next",void 0),i([u(cc.Node)],t.prototype,"bt_pre",void 0),i([u(cc.Node)],t.prototype,"close",void 0),i([u(cc.Node)],t.prototype,"bt_type1",void 0),i([u(cc.Node)],t.prototype,"bt_type2",void 0),i([u(cc.RichText)],t.prototype,"contentTxt",void 0),i([c],t)}(cc.Component);e.default=d,cc._RF.pop()},{"./pzaChannel":"pzaChannel","./pzaKDefine":"pzaKDefine","./pzakc":"pzakc"}],pzaPuffShroomPult:[function(a,t,e){"use strict";cc._RF.push(t,"c59dfBx2jxLaYJ/g2gaDy3Q","pzaPuffShroomPult");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPuffShroomPult=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpineController"),c=a("../../Common/pzaUtil"),u=a("../Bullet/pzaBaseBullet"),d=a("../Bullet/pzaThrowBullet"),h=a("../Data/pzaBuffData"),m=a("../pzaGameState"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.shootNode1=null,t.bulletPrefab=null,t.bulletPrefab1=null,t.sleepAni=null,t.blinkTime=3,t.atkTime=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),this.atkTime=0,this.hasAwakePlant(this.baseData.xIndex,this.baseData.yIndex,t),t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()),m.pzaGameState.useThrowPlant=!0,m.pzaGameState.onlyShroomCofee=!1,this.baseData.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.atkTime-=t},t.prototype.playNormalAni=function(){var a=this;if(this.atkTime>0)return this.blinkTime>0?void this.animation.playAnimation("idle1",!1,this.playNormalAni.bind(this)):(this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),void this.animation.playAnimation("idle1_eye",!1,this.playNormalAni.bind(this)));var t=this.findAttackTarget();if(null!=t)return this.atkTime=this.atkInterval,l.pzaSoundManager.playAudio("CabbagePult"),void(-1==t.xIndex||Math.abs(this.baseData.xIndex-t.xIndex)>4?this.animation.playAnimation("attack2",!1,this.playNormalAni.bind(this),function(){a.attack(t)}):this.animation.playAnimation("attack",!1,this.playNormalAni.bind(this),function(){a.attack(t),a.shoot()}));this.animation.playAnimation("idle1",!1,this.playNormalAni.bind(this))},t.prototype.wakeUp=function(){a.prototype.wakeUp.call(this),null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(h.pzaBuffType.FLY)&&!o.buffData.hasBuff(h.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(h.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){o.x-=15;var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var s=cc.v2(l.x+this.baseData.logicPos.x+14,l.y+this.baseData.logicPos.y+42);i.setPosition(s);var c=i.getComponent(d.pzaThrowBullet);null!=c&&(c.init(!1,this.baseData.yIndex,this.baseData.atk,a,n),c.updateBulletAngel(90))}}}}}},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab1);if(null!=t){t.setParent(a);var e=this.shootNode1.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(u.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0));var i=m.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*m.pzaGameState.map.getBlockWidth())}}}}},i([g({displayName:"\u6295\u63b7\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([g({displayName:"\u76f4\u7ebf\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode1",void 0),i([g({displayName:"\u6295\u63b7\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([g({displayName:"\u76f4\u7ebf\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab1",void 0),i([g({displayName:"\u7761\u89c9\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"sleepAni",void 0),i([y],t)}(f.pzaBasePlant);e.pzaPuffShroomPult=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPuffShroom:[function(a,t,e){"use strict";cc._RF.push(t,"ed4225QSM9JNoAv41wvq5Yv","pzaPuffShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPuffShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpineController"),c=a("../Bullet/pzaBaseBullet"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.shootNode=null,t.bulletPrefab=null,t.attacking=!1,t.atkAniTime=1.4,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),u.pzaGameState.isZombieMode())return this.attacking=!1,this.sleepAni.node.active=!1,this.animation.playAnimation("T_idle",!0),void(this.atkAniTime=this.animation.getAnimationDuration("T_attack"));t.plantData.sleeping?(this.animation.playAnimation("idle",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.playNormalAni()),u.pzaGameState.useShroom=!0,t.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData&&!this.baseData.plantData.sleeping)return!this.attacking&&u.pzaGameState.isZombieMode()&&window.pzazombieManager.hasCanAttackZombie(this.baseData,3)?(l.pzaSoundManager.playAudio("PuffShroomAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot()},this.atkAniTime/1.4)):void 0},t.prototype.wakeUp=function(){a.prototype.wakeUp.call(this),null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.letPlantSleep=function(){!this.sleepAni.node.active&&this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},t.prototype.playNormalAni=function(){var a=this,t=function(){if(window.pzazombieManager.hasCanAttackZombie(a.baseData,3))return l.pzaSoundManager.playAudio("PuffShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){a.shoot()});a.animation.playAnimation("idle",!1,t)};t()},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0));var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([f({displayName:"\u7761\u89c9\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"sleepAni",void 0),i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaPuffShroom=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPumpkinBullet:[function(a,t,e){"use strict";cc._RF.push(t,"87afadTeRlMQbpCrd2MFEwP","pzaPumpkinBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPumpkinBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Plant/pzaAttackType"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.targetPos=null,t.targetXIndex=-1,t.targetYIndex=-1,t.logicPos=null,t.moveSpeed=800,t.atk=0,t.up=!0,t}return n(t,a),t.prototype.init=function(a,t,e,o,n){this.atk=a,this.logicPos=t,this.targetPos=e,this.targetXIndex=o,this.targetYIndex=n,this.node.scaleY=1,this.up=!0},t.prototype.logicUpdate=function(a){this.logicPos.y+=a*this.moveSpeed*(this.up?1:-1),this.node.setPosition(this.logicPos),this.up?this.logicPos.y>=560&&(this.logicPos.x=this.targetPos.x,this.up=!1,this.node.scaleY=-1):this.logicPos.y<=this.targetPos.y&&this.boom()},t.prototype.boom=function(){var a=this;this.close();var t=.7*d.pzaGameState.map.getBlockWidth(),e=window.pzazombieManager.findFixRangeZombies(this.targetPos,t);if(null==e&&(e=[]),this.targetXIndex>=7&&null!=window.pzazombieManager.drZomBoss&&e.push(window.pzazombieManager.drZomBoss),e.forEach(function(t){var e=t&&t.baseData;e.yIndex!=a.targetYIndex||null==e||e.isDead||e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||t&&t.hurt(a.atk,null,c.pzaAttackType.BOOM)}),e.length>0){p.pzaSoundManager.playAudio("cobBoom");var o=d.pzaGameState.map.getXInterval(this.targetXIndex)/2,n=d.pzaGameState.map.getYInterval(this.targetYIndex)/3;d.pzaGameState.isRoofMode()&&(n=d.pzaGameState.map.getYInterval(this.targetYIndex)/6);var i=d.pzaGameState.map.getBlockLogicPos(this.targetXIndex,this.targetYIndex,o,n);u.pzaEffectManager.createMineBoomEffect(i)}if(null==e||e.length<=0){var r=""+this.targetXIndex+this.targetYIndex;if(window.pzaplantManager.pumpkinDataMap.get(r))return window.pzaplantManager.plantCreateSun2(this.node.getPosition(),2,50),window.pzaplantManager.plantCreateSun2(this.node.getPosition(),2,50),void window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1,25);var h=window.pzaplantManager.plantDataMap.get(r);if(h)return h.plantData.plantType==s.pzaPlantEnum.PUMPKIN_CANNON?(window.pzaplantManager.plantCreateSun2(this.node.getPosition(),2,50),window.pzaplantManager.plantCreateSun2(this.node.getPosition(),2,50),void window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1,25)):void window.pzaplantManager.createRandomPlant(s.pzaPlantEnum.PUMPKIN,this.targetXIndex,this.targetYIndex);window.pzaplantManager.createRandomPlant(s.pzaPlantEnum.PUMPKIN,this.targetXIndex,this.targetYIndex)}},i([m],t)}(r.pzaBaseComponent));e.pzaPumpkinBullet=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaPumpkinCannon:[function(a,t,e){"use strict";cc._RF.push(t,"3122cWLXExC8KVSzGvZBGdU","pzaPumpkinCannon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPumpkinCannon=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../../Common/pzaWorldEventManager"),u=a("../Bullet/pzaPumpkinBullet"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cobPrefab=null,t.blinkTime=3,t.loadTime=6.25,t.cobFinishIdle=null,t.cobFinishIdle_eye=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.loadTime=6.25,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),d.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.loadTime-=t,d.pzaGameState.cobCannon&&d.pzaGameState.cobCannon.xIndex==this.baseData.xIndex&&d.pzaGameState.cobCannon.yIndex==this.baseData.yIndex?(this.cobFinishIdle="idle2",this.cobFinishIdle_eye="idle2_eye"):(this.cobFinishIdle="idle3",this.cobFinishIdle_eye="idle3_eye")},t.prototype.playNormalAni=function(){var a=this,t=function(){if(!a.baseData.plantData.cobLoadFinish&&a.loadTime<=0)return a.scheduleOnce(function(){l.pzaSoundManager.playAudio("shoop")},.2),void a.animation.playAnimation("out",!1,function(){a.baseData.plantData.cobLoadFinish=!0,t()});a.blinkTime>0?a.animation.playAnimation(a.baseData.plantData.cobLoadFinish?a.cobFinishIdle:"idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation(a.baseData.plantData.cobLoadFinish?a.cobFinishIdle_eye:"idle1_eye",!1,t))};this.animation.playAnimation(this.baseData.plantData.cobLoadFinish?this.cobFinishIdle:"idle1",!1,t)},t.prototype.shoot=function(a,t,e){var o=this;this.baseData.plantData.cobLoadFinish&&(this.baseData.plantData.cobLoadFinish=!1,this.loadTime=36,d.pzaGameState.cobCannon=null,this.animation.playAnimation("attack",!1,this.playNormalAni.bind(this),function(){l.pzaSoundManager.playAudio("coblaunch");var n=cc.v2(o.baseData.logicPos.x+5,o.baseData.logicPos.y+400),i=p.pzaNodeManager.getUpEffectNode(),s=r.pzaGameCommonPool.requestInstant(o.cobPrefab,!1);if(null!=i&&null!=s){s.setParent(i),s.setPosition(n);var c=s.getComponent(u.pzaPumpkinBullet);c&&c.init(o.baseData.atk,n,a,t,e)}}))},t.prototype.launchCob=function(a){null!=a.data&&a.data==this.baseData&&this.shoot(a.pos,a.xIndex,a.yIndex)},t.prototype.close=function(){a.prototype.close.call(this),this.baseData==d.pzaGameState.cobCannon&&(d.pzaGameState.cobCannon=null)},i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cobPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaPumpkinCannon=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaPumpkinBullet":"pzaPumpkinBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPumpkinPurpleFire:[function(a,t,e){"use strict";cc._RF.push(t,"3c194GTwf5MB7A4G2ThoGFo","pzaPumpkinPurpleFire");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPumpkinPurple=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaSpineController"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../pzaEffectManager"),u=a("./pzaAttackType"),d=a("./pzaBasePlant"),h=a("./pzaPlantBody"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.torchwoodBody=null,t.backSpine=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.backSpine.node.active=!1},t.prototype.uiShow=function(){this.animation.setAnimationSkin("skin_1"),this.backSpine.node.active=!0,a.prototype.uiShow.call(this)},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),t.plantData.cate=s.pzaPlantCate.Nut,null!=t&&null!=t.yIndex){var e=10*-this.baseData.yIndex+1;this.node.zIndex=e,c.pzaEffectManager.createBackPumpkinFire(t)}this.playNormalAni()},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.getTargetArr(1);e.length>0&&e.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||e.buffData.hasBuff(l.pzaBuffType.DIVE)||e.buffData.hasBuff(l.pzaBuffType.FLY)||e.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||(t&&t.hurt(a.baseData.atk,a.baseData,u.pzaAttackType.FLOOR_ATK),c.pzaEffectManager.createBoomFireEffect(a.baseData.yIndex,.2,e.logicPos,null))}),a.animation.playAnimation("idle",!1,t)};this.animation.playAnimation("idle",!1,t)},t.prototype.getTargetArr=function(a){var t=this,e=[];return window.pzazombieManager.zombieMap.forEach(function(o,n){null==o||null==n||n.isDead||null==n.logicPos||n.xIndex>=t.baseData.xIndex-a&&n.xIndex<=t.baseData.xIndex+a&&n.yIndex==t.baseData.yIndex&&e.push(o)}),e},t.prototype.logicLateUpdate=function(){this.bodyBindData||(this.torchwoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody)),a.prototype.logicLateUpdate.call(this)},t.prototype.death=function(t,e){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.flaserDeath.call(this)},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([z({displayName:"\u706b\u7130\u5357\u74dc\u78b0\u649e\u8eab\u4f53",type:h.pzaPlantBody})],t.prototype,"torchwoodBody",void 0),i([z({displayName:"\u80cc\u9762\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"backSpine",void 0),i([f],t)}(d.pzaBasePlant);e.pzaPumpkinPurple=y,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant","./pzaPlantBody":"pzaPlantBody"}],pzaPumpkinPurple:[function(a,t,e){"use strict";cc._RF.push(t,"a6ce71s5EZOboNP1Kf3QfoV","pzaPumpkinPurple");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPumpkinPurple=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaPlantEnum"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaAttackType"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.backSpine=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.backSpine.node.active=!1},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.backSpine.setAnimationSkin("skin_4"),this.backSpine.node.active=!0},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),t.plantData.cate=c.pzaPlantCate.Nut,null!=t&&null!=t.yIndex){var e=10*-this.baseData.yIndex+1;this.node.zIndex=e,u.pzaEffectManager.createBackPumpkinPurple(t)}this.playNormalAni()},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=!1,o=1.7*d.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(t,n){null==t||null==n||n.isDead||null==n.logicPos||n.buffData.hasBuff(s.pzaBuffType.DIVE)||n.buffData.hasBuff(s.pzaBuffType.FLY)||n.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||l.pzaUtil.getDistance(a.baseData.logicPos,n.logicPos)<o&&(e=!0)}),e||a.canJoinDrZomBoss(a.baseData)&&(e=!0),e)return r.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(null!=a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x,a.baseData.logicPos.y+47);u.pzaEffectManager.createGloomShroomEffect(a.baseData.yIndex,t,null),a.hurtZombies()}});a.animation.playAnimation("idle",!1,t)};this.animation.playAnimation("idle",!1,t)},t.prototype.canJoinDrZomBoss=function(a){if(a.xIndex<5)return null;var t=window.pzazombieManager.drZomBoss;return null==t||null==t.baseData||t.baseData.isDead||t.baseData.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)?null:t.baseData},t.prototype.hurtZombies=function(){var a=this,t=1.7*d.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(e,o){null==e||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(s.pzaBuffType.DIVE)||o.buffData.hasBuff(s.pzaBuffType.FLY)||o.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||l.pzaUtil.getDistance(a.baseData.logicPos,o.logicPos)<t&&e&&e.hurt(a.baseData.atk,a.baseData,h.pzaAttackType.PENETRATE)}),this.canJoinDrZomBoss(this.baseData)){var e=this.canJoinDrZomBoss(this.baseData),o=window.pzazombieManager.getZombie(e);o&&o.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.PENETRATE)}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([y({displayName:"\u80cc\u9762\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"backSpine",void 0),i([z],t)}(m.pzaBasePlant);e.pzaPumpkinPurple=g,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaPumpkin:[function(a,t,e){"use strict";cc._RF.push(t,"e8b25lxRy5Gm5x3+k2egv7w","pzaPumpkin");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPumpkin=void 0;var r=a("../../Common/pzaSpineController"),p=a("../../Load/pzaPreLoadManager"),l=a("../Data/pzaPlantEnum"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.backSpine=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.backSpine.node.active=!1},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.backSpine.node.active=!0,this.backSpine.playAnimation(this.uiIdleName,!0)},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),t.plantData.cate=l.pzaPlantCate.Nut,this.animation.playAnimation("idle",!0),null!=t&&null!=t.yIndex){var e=10*-this.baseData.yIndex+1;this.node.zIndex=e,this.createBackEff(t)}c.pzaGameState.onlyShroomCofee=!1},t.prototype.createBackEff=function(a){s.pzaEffectManager.createBackPumpkin(a,p.pzaResourceUrl.BACK_PUMPKIN)},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([m({displayName:"\u80cc\u9762\u52a8\u753b",type:r.pzaSpineController})],t.prototype,"backSpine",void 0),i([h],t)}(u.pzaBasePlant);e.pzaPumpkin=f,cc._RF.pop()},{"../../Common/pzaSpineController":"pzaSpineController","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPuzzleItem:[function(a,t,e){"use strict";cc._RF.push(t,"152c6CDYKRKvqa11g13cl9O","pzaPuzzleItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPuzzleItem=void 0;var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameManager"),l=a("../Common/pzaGameVase"),s=a("../Common/pzaGameVaseEndless"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaSoundManager"),d=a("../Common/pzaStatisticsMgr"),h=a("../Common/pzaTipManager"),m=a("../Common/pzaUIManager"),f=a("../Common/pzaWorldEventManager"),z=a("../Common/pzaZombieEnermyPartCfg"),y=a("../Load/pzaPreLoadManager"),g=a("../utils/pzaChannel"),b=a("../utils/pzakc"),v=a("./pzaCommonMask"),P=a("./pzaWarningView"),D=cc._decorator,S=D.ccclass,C=D.property,_=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.trophyNode=null,t.lockNode=null,t.bg=null,t.bgFrames=[],t.flagNode=null,t.flagCount=null,t.chapterName=null,t.preUnLock=null,t.startGameNode=null,t.costPowerLab=null,t.gameMode=null,t.curPart=1,t.unlock=!1,t.canPreUnlock=!1,t.startGameCall=null,t.refreshCall=null,t.costPower=c.pzaLocalData.endLessPowerCost,t.gameDelayTime=1.5,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.on(cc.Node.EventType.TOUCH_END,this.clickItem,this),this.startGameNode.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startGameNode.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startGameNode.on(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.off(cc.Node.EventType.TOUCH_END,this.clickItem,this),this.startGameNode.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startGameNode.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startGameNode.off(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.bindData=function(a,t,e,o){this.curPart=t,this.startGameCall=e,this.refreshCall=o,this.gameMode=a,this.refreshItem(),c.pzaLocalData.isShowPowerGift||(this.startGameNode.active=!1,this.gameDelayTime=0,this.costPower=0)},t.prototype.refreshItem=function(){if(this.costPowerLab.string="X"+c.pzaLocalData.normalPowerCost,this.gameMode==r.pzaGameMode.ZOMBIE_ENERMY){if(this.canPreUnlock=!1,this.unlock=c.pzaLocalData.data.zombieUnlock>=this.curPart,this.trophyNode.active=1==c.pzaLocalData.data.zombieTrophy[this.curPart-1],this.bg.spriteFrame=this.bgFrames[0],null==(a=z.pzaZombieEnermyPartCfg.PartConfigMap.get(this.curPart)))return;this.unlock||(c.pzaLocalData.data.curChapter>a.unlockChapter||c.pzaLocalData.data.curChapter==a.unlockChapter&&c.pzaLocalData.data.curPart>a.unlockPart)&&(this.unlock=!0,c.pzaLocalData.data.zombieUnlock++,c.pzaLocalData.addDirty("zombieUnlock")),this.unlock||(this.canPreUnlock=this.curPart==c.pzaLocalData.data.zombieUnlock+1),this.canPreUnlock?(d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"22"},{name:"adname",value:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"}),this.chapterName.string="\u901a\u5173"+a.unlockChapter+"-"+a.unlockPart+"\u89e3\u9501"):this.chapterName.string=this.unlock?z.pzaZombieEnermyPartCfg.getName(this.curPart):"\uff1f",this.flagNode.active=!1}else if(this.gameMode==r.pzaGameMode.ZOMBIE_ENDLESS)this.costPowerLab.string="X"+c.pzaLocalData.endLessPowerCost,this.canPreUnlock=!1,this.bg.spriteFrame=this.bgFrames[0],this.unlock=c.pzaLocalData.data.zombieUnlock>=this.curPart,this.unlock||(c.pzaLocalData.data.curChapter>5||5==c.pzaLocalData.data.curChapter&&c.pzaLocalData.data.curPart>8)&&(this.unlock=!0,c.pzaLocalData.data.zombieUnlock++,c.pzaLocalData.addDirty("zombieUnlock")),this.unlock?(this.flagNode.active=!0,this.flagCount.string=""+c.pzaLocalData.data.zombieFlagCount):(this.canPreUnlock=this.curPart==c.pzaLocalData.data.zombieUnlock+1,this.flagNode.active=!1),this.canPreUnlock?(d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"22"},{name:"adname",value:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"}),this.chapterName.string="\u901a\u51735-8\u89e3\u9501"):this.chapterName.string=this.unlock?"\u50f5\u5c38\u516c\u654c(\u65e0\u5c3d)":"\uff1f";else if(this.gameMode==r.pzaGameMode.VASE){if(this.canPreUnlock=!1,this.unlock=c.pzaLocalData.data.vasePassChapter+1>=this.curPart,this.trophyNode.active=1==c.pzaLocalData.data.vaseTrophy[this.curPart-1],this.bg.spriteFrame=this.bgFrames[1],null==(a=p.pzaGameManager.getGame(r.pzaGameMode.VASE,l.pzaGameVase).getConf(this.curPart)))return;this.unlock||(c.pzaLocalData.data.curChapter>a.unlockChapter||c.pzaLocalData.data.curChapter==a.unlockChapter&&c.pzaLocalData.data.curPart>a.unlockPart)&&(this.unlock=!0,c.pzaLocalData.data.vasePassChapter++,c.pzaLocalData.addDirty("vasePassChapter")),this.unlock||(this.canPreUnlock=this.curPart==c.pzaLocalData.data.vasePassChapter+2),this.canPreUnlock?(d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"22"},{name:"adname",value:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"}),this.chapterName.string="\u901a\u5173"+a.unlockChapter+"-"+a.unlockPart+"\u89e3\u9501"):this.chapterName.string=this.unlock?a.name:"\uff1f",this.flagNode.active=!1}else if(this.gameMode==r.pzaGameMode.VASE_ENDLESS){var a;if(this.costPowerLab.string="X"+c.pzaLocalData.endLessPowerCost,this.bg.spriteFrame=this.bgFrames[1],this.unlock=c.pzaLocalData.data.passLastPart,this.flagNode.active=this.unlock,null==(a=p.pzaGameManager.getGame(r.pzaGameMode.VASE_ENDLESS,l.pzaGameVase).getConf(this.curPart)))return;this.unlock||(c.pzaLocalData.data.curChapter>a.unlockChapter||c.pzaLocalData.data.curChapter==a.unlockChapter&&c.pzaLocalData.data.curPart>a.unlockPart)&&(this.unlock=!0,c.pzaLocalData.data.vasePassChapter++,c.pzaLocalData.addDirty("vasePassChapter")),this.unlock||15!=c.pzaLocalData.data.vasePassChapter||(this.unlock=!0),this.unlock?(this.flagCount.string=""+c.pzaLocalData.data.vaseFlagCount,this.chapterName.string=a.name,this.canPreUnlock=!1):(this.canPreUnlock=this.curPart==c.pzaLocalData.data.vasePassChapter+2,this.canPreUnlock?this.chapterName.string="\u901a\u5173"+a.unlockChapter+"-"+a.unlockPart+"\u89e3\u9501":this.chapterName.string=this.unlock?a.name:"\uff1f")}this.lockNode.active=!this.unlock,this.preUnLock.active=this.canPreUnlock,this.startGameNode.active=this.unlock,this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.bg.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),c.pzaLocalData.isShowPowerGift||(this.startGameNode.active=!1,this.gameDelayTime=0,this.costPower=0)},t.prototype.touchItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#939393"):cc.Color.fromHEX(cc.color(),"#606060")},t.prototype.cancelItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393")},t.prototype.clickItem=function(){var a=this;if((r.pzaGameState.judgeIsVase(this.gameMode)||r.pzaGameState.judgeIsZombie(this.gameMode))&&(this.costPower=c.pzaLocalData.normalPowerCost),c.pzaLocalData.isShowPowerGift||(this.costPower=0),!this.unlock){this.node.color=cc.Color.fromHEX(cc.color(),"#939393"),u.pzaSoundManager.playAudio("unlockpart");var t;return t=this.gameMode===r.pzaGameMode.VASE||this.gameMode===r.pzaGameMode.VASE_ENDLESS?p.pzaGameManager.getGame(r.pzaGameMode.VASE,l.pzaGameVase).getConf(this.curPart):z.pzaZombieEnermyPartCfg.PartConfigMap.get(this.curPart),void(this.canPreUnlock?m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.WARNING_VIEW,function(e){var o=e&&e.getComponent(P.pzaWarningView);o&&o.show("\u4f60\u5fc5\u987b\u5b8c\u6210\u5192\u9669\u6a21\u5f0f"+t.unlockChapter+"-"+t.unlockPart+"\u6765\u89e3\u9501\u672c\u5173\u5361","\u63d0\u524d\u89e3\u9501","\u8fd4\u56de",function(){g.pzaChannel.instance().showVideo({sucCall:function(){c.pzaLocalData.data.zombieUnlock++,c.pzaLocalData.addDirty("zombieUnlock"),a.refreshCall&&a.refreshCall()},failCall:function(){},endCall:function(){},posName:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501",adsid:"22"})},null,"\u672a\u89e3\u9501\uff01",!0)}):m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(P.pzaWarningView);t&&t.show("\u4f60\u5fc5\u987b\u5b8c\u6210\u5192\u9669\u6a21\u5f0f\uff1f\u6765\u89e3\u9501\u672c\u5173\u5361","\u8fd4\u56de",null,null,null,"\u672a\u89e3\u9501\uff01")}))}if(c.pzaLocalData.isWeekTwo=!1,this.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"),r.pzaGameState.midOut){if(this.gameMode==r.pzaGameMode.ZOMBIE_ENDLESS&&c.pzaLocalBattleData.data.zombieEndlessData)return p.pzaGameManager.removeBattleUI(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),m.pzaUIManager.removeBoardUI(),this.startGameCall&&this.startGameCall(),void p.pzaGameManager.preLoadAndStart(this.gameMode,r.pzaGameState.curChapter,this.curPart);r.pzaGameState.gameMode==this.gameMode&&r.pzaGameState.curPart==this.curPart?(this.startGameCall&&this.startGameCall(),p.pzaGameManager.getCurrentGame().gameRecover(2,this.curPart,null)):p.pzaGameManager.midOutStart(this.gameMode,r.pzaGameState.curChapter,this.curPart,this.startGameCall.bind(this))}else{if(this.gameMode==r.pzaGameMode.ZOMBIE_ENDLESS){if(c.pzaLocalBattleData.data.zombieEndlessData)return this.startGameCall&&this.startGameCall(),m.pzaUIManager.removeBoardUI(),void p.pzaGameManager.preLoadAndStart(this.gameMode,r.pzaGameState.curChapter,this.curPart)}else if(this.gameMode==r.pzaGameMode.VASE_ENDLESS&&c.pzaLocalData.data.vaseEndLessLevelIndex&&c.pzaLocalData.data.vaseEndLessLevelIndex>0)return r.pzaGameState.sunLightCount=c.pzaLocalData.data.vaseEndLessSunCount,p.pzaGameManager.getGame(r.pzaGameMode.VASE_ENDLESS,s.pzaGameVaseEndless).endLessRound=c.pzaLocalData.data.vaseEndLessLevelIndex,this.startGameCall&&this.startGameCall(),m.pzaUIManager.removeBoardUI(),void p.pzaGameManager.preLoadAndStart(this.gameMode,r.pzaGameState.curChapter,this.curPart);if(c.pzaLocalData.data.power<this.costPower)return h.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void m.pzaUIManager.showPowerView();c.pzaLocalData.setPower(-this.costPower),b.default.sendMsg("powerani"),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.POWER_ANI,{cost:this.costPower}),v.pzaCommonMask.showMask(),this.scheduleOnce(function(){v.pzaCommonMask.hideMask(),a.startGameCall&&a.startGameCall(),m.pzaUIManager.removeBoardUI(),p.pzaGameManager.preLoadAndStart(a.gameMode,r.pzaGameState.curChapter,a.curPart)},this.gameDelayTime)}},t.prototype.clickPreUnLock=function(){var a=this;g.pzaChannel.instance().showVideo({sucCall:function(){a.gameMode===r.pzaGameMode.VASE||a.gameMode===r.pzaGameMode.VASE_ENDLESS?(c.pzaLocalData.data.vasePassChapter++,c.pzaLocalData.addDirty("vasePassChapter")):(c.pzaLocalData.data.zombieUnlock++,c.pzaLocalData.addDirty("zombieUnlock")),a.refreshCall&&a.refreshCall()},failCall:function(){},endCall:function(){},posName:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501",adsid:"22"})},i([C({displayName:"\u5956\u676f",type:cc.Node})],t.prototype,"trophyNode",void 0),i([C({displayName:"\u9501",type:cc.Node})],t.prototype,"lockNode",void 0),i([C({displayName:"\u573a\u666f",type:cc.Sprite})],t.prototype,"bg",void 0),i([C({displayName:"\u573a\u666f\u56fe",type:[cc.SpriteFrame]})],t.prototype,"bgFrames",void 0),i([C({displayName:"\u65d7\u5e1c\u8282\u70b9",type:cc.Node})],t.prototype,"flagNode",void 0),i([C({displayName:"\u65d7\u5e1c\u6570\u91cf",type:cc.Label})],t.prototype,"flagCount",void 0),i([C({displayName:"\u5173\u5361\u540d\u79f0",type:cc.Label})],t.prototype,"chapterName",void 0),i([C({displayName:"\u63d0\u524d\u89e3\u9501\u6309\u94ae",type:cc.Node})],t.prototype,"preUnLock",void 0),i([C({displayName:"\u5f00\u59cb\u6e38\u620f\u8282\u70b9",type:cc.Node})],t.prototype,"startGameNode",void 0),i([C({displayName:"\u4f53\u529b\u6d88\u8017\u6570\u91cf",type:cc.Label})],t.prototype,"costPowerLab",void 0),i([S],t)}(cc.Component);e.pzaPuzzleItem=_,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameVase":"pzaGameVase","../Common/pzaGameVaseEndless":"pzaGameVaseEndless","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Common/pzaZombieEnermyPartCfg":"pzaZombieEnermyPartCfg","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask","./pzaWarningView":"pzaWarningView"}],pzaPuzzleView:[function(a,t,e){"use strict";cc._RF.push(t,"df561IB41BNuI3UzRT3y9Of","pzaPuzzleView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPuzzleView=void 0;var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGameManager"),s=a("../Common/pzaGameMiniGame"),c=a("../Common/pzaGameVase"),u=a("../Common/pzaLocalData"),d=a("../Common/pzaSoundManager"),h=a("../Common/pzaStatisticsMgr"),m=a("../Common/pzaUIManager"),f=a("../Common/pzaUtil"),z=a("../Common/pzaWorldEventManager"),y=a("../Load/pzaPreLoadManager"),g=a("../utils/pzaChannel"),b=a("../utils/pzaResMgr"),v=a("./pzaMiniGameItem"),P=a("./pzaPowerView"),D=a("./pzaPuzzleItem"),S=a("./pzaRankView"),C=a("./pzaWarningView"),_=cc._decorator,E=_.ccclass,M=_.property,w=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.trophyCount=null,t.coinCount=null,t.scrollView=null,t.rankWidget=null,t.puzzleItem=null,t.miniItem=null,t.puzzleContent=null,t.miniContent=null,t.puzzleItems=[],t.miniItems=[],t.curPage=0,t}return n(t,a),t.prototype.onEnable=function(){this.createPuzzleItem(),this.createMiniGameItem(),this.node.x=0,this.coinCount.string=f.pzaUtil.getCurrencyStr(u.pzaLocalData.data.coin),r.pzaGameState.gameMode==r.pzaGameMode.VASE||r.pzaGameState.gameMode==r.pzaGameMode.VASE_ENDLESS?this.curPage=1:r.pzaGameState.gameMode==r.pzaGameMode.ZOMBIE_ENERMY||r.pzaGameState.gameMode==r.pzaGameMode.ZOMBIE_ENDLESS?this.curPage=0:this.curPage=2,this.showPage(this.curPage,!0),this.rankWidget.updateAlignment(),this.createWxUserInfoButton(!1,null),"ks"==g.pzaChannel.instance().channel&&(this.rankWidget.node.active=!1)},t.prototype.createPuzzleItem=function(){var a=b.pzaResMgr.instance().getConf("a12");if(a&&!(this.puzzleContent.childrenCount>0))for(var t=0;t<a.length;t++){var e=p.pzaGameCommonPool.requestInstant(this.puzzleItem,!1);if(null==e)return;e.setParent(this.puzzleContent),this.puzzleItems.push(e.getComponent(D.pzaPuzzleItem))}},t.prototype.clickZombieBtn=function(){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(C.pzaWarningView);t&&t.show("\u6682\u672a\u5f00\u653e","\u786e\u5b9a",null,null,null,"\u50f5\u5c38\u516c\u654c")})},t.prototype.clickVaseBtn=function(){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(C.pzaWarningView);t&&t.show("\u6682\u672a\u5f00\u653e","\u786e\u5b9a",null,null,null,"\u7838\u7f50\u5b50")})},t.prototype.clickMiniBtn=function(){d.pzaSoundManager.playAudio("gravebutton"),this.showPage(2,!1)},t.prototype.showPage=function(a,t){var e=this;if(t||this.curPage!=a){if(this.curPage=a,this.scrollView.node.stopAllActions(),this.scrollView.node.y=580,this.scrollView.node.runAction(cc.sequence(cc.delayTime(t?.5:.1),cc.moveTo(.2,cc.v2(0,180)).easing(cc.easeCubicActionOut()))),0==this.curPage){this.trophyCount.string=u.pzaLocalData.getZombieTrophy()+"/9";for(var o=1;o<=9;o++)(n=this.puzzleItems[o-1])&&n.bindData(r.pzaGameMode.ZOMBIE_ENERMY,o,function(){g.pzaChannel.instance().closeBanner(),e.close()},this.refreshItem.bind(this));for((i=this.puzzleItems[9])&&i.bindData(r.pzaGameMode.ZOMBIE_ENDLESS,10,function(){g.pzaChannel.instance().closeBanner(),e.close()},this.refreshItem.bind(this)),h.pzaStatisticsMgr.sendEvent("System",{name:"system",value:10}),o=10;o<this.puzzleItems.length;o++)this.puzzleItems[o].node.active=!1}else if(1==this.curPage){for(h.pzaStatisticsMgr.sendEvent("System",{name:"system",value:11}),this.trophyCount.string=u.pzaLocalData.getVaseTrophy()+"/"+u.pzaLocalData.vaseAllTrophy,o=1;o<l.pzaGameManager.getGame(r.pzaGameMode.VASE,c.pzaGameVase).endLessId;o++){var n;(n=this.puzzleItems[o-1]).node.active=!0,n&&n.bindData(r.pzaGameMode.VASE,o,function(){g.pzaChannel.instance().closeBanner(),e.close()},this.refreshItem.bind(this))}var i,p=l.pzaGameManager.getGame(r.pzaGameMode.VASE,c.pzaGameVase).endLessId;(i=this.puzzleItems[p-1]).node.active=!0,i&&i.bindData(r.pzaGameMode.VASE_ENDLESS,p,function(){e.close(),g.pzaChannel.instance().closeBanner()},this.refreshItem.bind(this))}this.scrollView.content=2==this.curPage?this.miniContent:this.puzzleContent,this.miniContent.active=2==this.curPage,this.puzzleContent.active=2!=this.curPage,this.puzzleContent.getComponent(cc.Layout).updateLayout(),this.scrollView.setContentPosition(cc.v2(this.puzzleContent.width/2,180))}},t.prototype.refreshMiniGameItem=function(){for(var a=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).confMap.size,t=0;t<a;t++){var e=this.miniItems[t];e&&e.refreshItem()}},t.prototype.refreshItem=function(){var a=10;1==this.curPage&&(a=b.pzaResMgr.instance().getConf("a12")&&b.pzaResMgr.instance().getConf("a12").length);for(var t=1;t<=a;t++){var e=this.puzzleItems[t-1];e&&e.refreshItem()}},t.prototype.createMiniGameItem=function(){var a=this;this.trophyCount.string=u.pzaLocalData.getMiniGameTrophy()+"/13";for(var t=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).confMap.size,e=0;e<t;e++)if(0!=e){var o=p.pzaGameCommonPool.requestInstant(this.miniItem);o.setParent(this.miniContent);var n=o.getComponent(v.pzaMiniGameItem),i=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).getConfById(e);n&&n.bindData(r.pzaGameMode.MINIGAME,i,function(){a.close()},this.refreshMiniGameItem.bind(this)),this.miniItems.push(n)}},t.prototype.clickBack=function(){var a=this;d.pzaSoundManager.playSFX(),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.3,cc.v2(0,580)).easing(cc.easeCubicActionOut())),m.pzaUIManager.aniHidePopUI(function(){a.close(),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.UPDATE_RECORD_STATE,null),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.BACK_HOMEVIEW,null)})},t.prototype.clickRankBtn=function(){var a=this;this.createWxUserInfoButton(!0,function(){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.RANK_VIEW,function(t){var e=t&&t.getComponent(S.pzaRankView);e&&e.init(a.curPage+1)})})},t.prototype.createWxUserInfoButton=function(a,t){var e=this,o=g.pzaChannel.instance().getChannel();"wx"!==o.channel||null!=u.pzaLocalData.data.playerNick&&null!=u.pzaLocalData.data.playerAvatar?t&&t():o.wxCheckPrivacySetting(function(n){var i=function(){var a=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width+e.rankWidget.node.x-60)/n.width*a.width,top:(.5*n.height-e.rankWidget.node.y-60)/n.height*a.height,width:120/n.width*a.width,height:120/n.height*a.height};o.getUserInfo(function(){null!=u.pzaLocalData.data.playerNick&&null!=u.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),t&&t())},i,!1)};if(n)return a?void o.wxPrivacyAuthorize(i,null):void(t&&t());i()},null)},t.prototype.clickPower=function(){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.POWER_VIEW,function(a){var t=a&&a.getComponent(P.pzaPowerView);t&&t.bindData("\u8865\u5145\u4f53\u529b",function(){var a;a=u.pzaLocalData.data.power+u.pzaLocalData.addPowerValue,u.pzaLocalData.data.power=a,u.pzaLocalData.addDirty("power"),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.UPDATE_POWER,null)},null)})},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node);var a=g.pzaChannel.instance().getChannel();"wx"==a.channel&&a.destroyAuthorizationButton()},i([M({type:cc.Label})],t.prototype,"trophyCount",void 0),i([M({type:cc.Label})],t.prototype,"coinCount",void 0),i([M({type:cc.ScrollView})],t.prototype,"scrollView",void 0),i([M({type:cc.Widget})],t.prototype,"rankWidget",void 0),i([M({type:cc.Prefab})],t.prototype,"puzzleItem",void 0),i([M({type:cc.Prefab})],t.prototype,"miniItem",void 0),i([M({type:cc.Node})],t.prototype,"puzzleContent",void 0),i([M({type:cc.Node})],t.prototype,"miniContent",void 0),i([E],t)}(cc.Component);e.pzaPuzzleView=w,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameMiniGame":"pzaGameMiniGame","../Common/pzaGameVase":"pzaGameVase","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","./pzaMiniGameItem":"pzaMiniGameItem","./pzaPowerView":"pzaPowerView","./pzaPuzzleItem":"pzaPuzzleItem","./pzaRankView":"pzaRankView","./pzaWarningView":"pzaWarningView"}],pzaQQFumeShroom:[function(a,t,e){"use strict";cc._RF.push(t,"f0658+dyQtCtYXTqLbNS2oB","pzaQQFumeShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaQQFumeShroom=void 0;var r=a("../Data/pzaZombieEnum"),p=a("./pzaAttackType"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.animation.playAnimation("idle",!0)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t)},t.prototype.hurt=function(t,e,o){var n=this,i=window.pzazombieManager.zombieMap.get(e);e&&e.zombieData&&this.baseData&&(e.zombieData.zombieType!=r.pzaZombieEnum.ZOMBONI&&e.zombieData.zombieType!=r.pzaZombieEnum.ZOMBONI2&&e.zombieData.cate!=r.pzaZombieCate.Gargantuar||(t=100,o=p.pzaAttackType.FLOOR_ATK),a.prototype.hurt.call(this,t,e,o),e.zombieData.zombieType==r.pzaZombieEnum.GARGANTUAR4||e.zombieData.zombieType==r.pzaZombieEnum.RED_GARGANTUAR4?e.zombieData.equipHp<=0&&i.pushBack(1.33):i.pushBack(1.33),"attack"!=this.animation.spineAnimation.name&&this.baseData.hp>0&&this.animation.playAnimation("attack",!1,function(){n.animation.playAnimation("idle",!0)},null))},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this)},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this)},i([c],t)}(l.pzaBasePlant));e.pzaQQFumeShroom=u,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaRainEffect:[function(a,t,e){"use strict";cc._RF.push(t,"3895fHlA39Djo2nQYtZMqsb","pzaRainEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRainEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../utils/pzaFrameAnim"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.anis=[],t.ani=null,t}return n(t,a),t.prototype.showAnim=function(a){var t=this;this.anis.forEach(function(a){a.node.active=!1}),this.ani=a?Math.random()>.5?this.anis[0]:this.anis[1]:this.anis[2],this.ani.node.active=!0,this.ani.setEndFn(function(){t.close()}),this.ani.reset(),this.ani.play()},t.prototype.logicUpdate=function(a){this.ani.updateFrame(a)},i([c({displayName:"\u96e8\u52a8\u753b",type:[p.default]})],t.prototype,"anis",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaRainEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../utils/pzaFrameAnim":"pzaFrameAnim"}],pzaRainNightEffect:[function(a,t,e){"use strict";cc._RF.push(t,"0789e0Ur+lOyI/rZddhfjTc","pzaRainNightEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRainNightEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaSpineController"),s=a("../../Common/pzaUtil"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.rainAni=null,t.mask=null,t.rainInterval=.5,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.rainAni.playAnimation("rain",!0),this.playBlinkAni(),this.rainInterval=.5},t.prototype.logicUpdate=function(a){this.rainInterval-=a,this.rainInterval>0||this.randomRain()},t.prototype.playBlinkAni=function(){var a=this;this.mask.stopAllActions();var t=s.pzaUtil.getRandomFloatNum(2.5,4);this.mask.runAction(cc.sequence(cc.callFunc(function(){a.mask&&(a.mask.color=cc.Color.fromHEX(cc.color(),"#000000"),a.mask.opacity=255)}),cc.delayTime(t),cc.callFunc(function(){a.mask&&(p.pzaSoundManager.playAudio("thunder"),a.mask.color=cc.Color.fromHEX(cc.color(),"#ffffff"))}),cc.fadeOut(1),cc.callFunc(function(){a.mask&&(a.mask.color=cc.Color.fromHEX(cc.color(),"#000000"),a.mask.opacity=25.5)}),cc.fadeTo(.2,76.5),cc.fadeTo(.2,51),cc.fadeTo(.2,102),cc.fadeTo(.2,51),cc.fadeTo(.2,127.5),cc.fadeTo(.15,51),cc.fadeTo(.15,76.5),cc.fadeTo(.13,51),cc.fadeTo(.13,102),cc.fadeTo(.11,51),cc.fadeTo(.11,127.5),cc.fadeTo(.13,204),cc.fadeTo(.16,127.5),cc.fadeTo(.14,229.5),cc.fadeTo(.17,127.5),cc.fadeTo(.15,229.5),cc.fadeTo(.18,127.5),cc.fadeTo(.2,229.5),cc.fadeTo(.2,127.5),cc.fadeTo(.2,1),cc.callFunc(function(){a.playBlinkAni()})))},t.prototype.pauseSelf=function(){this.rainAni.pauseAnimation(),this.mask.pauseAllActions()},t.prototype.resumeSelf=function(){this.rainAni.resumeAnimation(),this.mask.resumeAllActions()},t.prototype.randomRain=function(){this.rainInterval=.5,s.pzaUtil.getRandomArrayValue([0,1,2,3,4,5],2).forEach(function(a){var t=s.pzaUtil.getRandomArrayValue([0,1,2,3,4,5,6,7,8],3),e=u.pzaGameState.map.getYInterval(a);t.forEach(function(t){var o=u.pzaGameState.map.getXInterval(t),n=u.pzaGameState.map.getBlockLogicPos(t,a,0,0);n.x+=Math.random()*o,n.y+=Math.random()*e,c.pzaEffectManager.createRainEffect(n,2!=a&&3!=a)})})},i([m({displayName:"\u96e8\u52a8\u753b",type:l.pzaSpineController})],t.prototype,"rainAni",void 0),i([m({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([h],t)}(r.pzaBaseComponent);e.pzaRainNightEffect=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaRandomPlantBox:[function(a,t,e){"use strict";cc._RF.push(t,"420ceKsg/tFdobNAOmL8s5d","pzaRandomPlantBox");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRandomPlantBox=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../Data/pzaPlantEnum"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.boxXindex=0,t.boxYindex=0,t.playAniName="idle",t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,this.animation.playAnimation(this.playAniName,!1,function(){e.body.node.getComponent(cc.BoxCollider).enabled=!0,e.baseData.isDead=!1,e.createRandomBox(),e.close()})},t.prototype.setPos=function(){null!=this.baseData&&0!=this.baseData.floatY&&null!=this.baseData.logicPos&&this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.createRandomBox=function(){if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var a=""+this.baseData.xIndex+this.baseData.yIndex,t=window.pzaplantManager.plantDataMap.get(a);this.baseData.isDead=!0,window.pzaplantManager.plantMap.delete(t),window.pzaplantManager.plantDataMap.delete(a)},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c],t)}(l.pzaBasePlant));e.pzaRandomPlantBox=u,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../Data/pzaPlantEnum":"pzaPlantEnum","./pzaBasePlant":"pzaBasePlant"}],pzaRankItem:[function(a,t,e){"use strict";cc._RF.push(t,"7d3a7Ws9V1NF5AmcmUXp4UN","pzaRankItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRankItem=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaSpriteFrameManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.rankTag=null,t.rankTagFrames=[],t.rank=null,t.headIcon=null,t.nick=null,t.flagCount=null,t.curAvatarUrl=null,t}return n(t,a),t.prototype.bindData=function(a,t){var e=this;null!=a&&(t>3?(this.rankTag.node.active=!1,this.rank.node.active=!0,this.rank.string=""+t):(this.rankTag.node.active=!0,this.rank.node.active=!1,this.rankTag.spriteFrame=this.rankTagFrames[t-1]),null==a.nickName||"\u672a\u77e5"==a.nickName?this.nick.string="\u73a9\u5bb6"+t:this.nick.string=a.nickName,this.headIcon.spriteFrame=null,this.curAvatarUrl=a.avatar,null==this.curAvatarUrl||""==this.curAvatarUrl?p.pzaSpriteFrameManager.showDefaultHead(this.headIcon):p.pzaSpriteFrameManager.showPlayerHeadImage(this.curAvatarUrl,function(a,t){e.curAvatarUrl==a&&(e.headIcon.spriteFrame=t)}),this.flagCount.string=""+a.score)},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u6392\u540d\u6807\u8bb0",type:cc.Sprite})],t.prototype,"rankTag",void 0),i([c({displayName:"\u6392\u540d\u6807\u8bb0\u56fe",type:[cc.SpriteFrame]})],t.prototype,"rankTagFrames",void 0),i([c({displayName:"\u6392\u540d",type:cc.Label})],t.prototype,"rank",void 0),i([c({displayName:"\u5934\u50cf",type:cc.Sprite})],t.prototype,"headIcon",void 0),i([c({displayName:"\u6635\u79f0",type:cc.Label})],t.prototype,"nick",void 0),i([c({displayName:"\u65d7\u5e1c\u6570",type:cc.Label})],t.prototype,"flagCount",void 0),i([s],t)}(cc.Component);e.pzaRankItem=u,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaRankMgr:[function(a,t,e){"use strict";cc._RF.push(t,"1fe3801F8RMkqdH3qC9KQ0T","pzaRankMgr"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRankMgr=void 0;var o=a("../utils/pzaChannel"),n=a("./pzaLocalData"),i=function(){function a(){}return Object.defineProperty(a,"Rank_Key",{get:function(){var t=o.pzaChannel.instance().channel;return"wx"!=t?t+a._Rank_Key:a._Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(a,"Zombie_Rank_Key",{get:function(){var t=o.pzaChannel.instance().channel;return"qq"==t?o.pzaChannel.instance().getChannel().channel+a._Zombie_Rank_Key:"wx"!=t?t+a._Zombie_Rank_Key:a._Zombie_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(a,"Vase_Rank_Key",{get:function(){var t=o.pzaChannel.instance().channel;return"qq"==t?o.pzaChannel.instance().getChannel().channel+a._Zombie_Rank_Key:"wx"!=t?t+a._Vase_Rank_Key:a._Vase_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(a,"zj_Rank_Key",{get:function(){var t=o.pzaChannel.instance().channel;return"qq"==t?o.pzaChannel.instance().getChannel().channel+a._Zombie_Rank_Key:"wx"!=t?t+a._zj_Rank_Key:a._zj_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(a,"treasure_Rank_Key",{get:function(){var t=o.pzaChannel.instance().channel;return"qq"==t?o.pzaChannel.instance().getChannel().channel+a._Zombie_Rank_Key:"wx"!=t?t+a._treasure_Rank_Key:a._treasure_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(a,"zfRandomBox_Rank_Key",{get:function(){var t=o.pzaChannel.instance().channel;return"qq"==t?o.pzaChannel.instance().getChannel().channel+a._Zombie_Rank_Key:"wx"!=t?t+a._zfRandomBox_Rank_Key:a._zfRandomBox_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(a,"luckWindmill_Rank_Key",{get:function(){var t=o.pzaChannel.instance().channel;return"qq"==t?o.pzaChannel.instance().getChannel().channel+a._Zombie_Rank_Key:"wx"!=t?t+a._luckWindmill_Rank_Key:a._luckWindmill_Rank_Key},enumerable:!1,configurable:!0}),a.syncOldRankData=function(){var a=o.pzaChannel.instance().getChannel().channelUserId;if(null!=a)for(var t=0;t<5;t++){var e=n.pzaLocalData.data.survivalFlagCount[t];if(!(null==e||e<=0)){var i=this.Rank_Key+(t+1);o.pzaChannel.leaderBoradUpdate(i,a,e,function(){})}}},a.queryMyRank=function(a,t){var e=this,n=this.Rank_Key+a,i=o.pzaChannel.instance().getChannel().channelUserId;null!=i?o.pzaChannel.leaderBoradRank(n,i,function(o){-1!=o?(o+=1,e.endlessRank[a-1]=o,t&&t()):t&&t()}):t&&t()},a.uploadEndlssScore=function(a,t,e){var i=n.pzaLocalData.data.survivalFlagCount[a-1],r=t+"\u9762\u65d7\u5e1c\u5b8c\u6210";if(null!=i&&i>=t)return null!=i&&i>t&&(r+="\uff0c\u8ddd\u79bb\u5386\u53f2\u6700\u9ad8\u65d7\u5e1c\u8fd8\u5dee"+(i-t)),void(e&&e(r));var p=this.Rank_Key+a,l=o.pzaChannel.instance().getChannel().channelUserId;null!=l?o.pzaChannel.leaderBoradUpdate(p,l,t,function(a){if(null!=a&&-1!=a.newRank){var t=-1==a.oldRank?a.newRank:Math.max(0,a.oldRank-a.newRank);a.newRank=a.newRank+1,a.newRank>9999?r+="\uff0c\u5168\u670d\u6392\u540d\u63d0\u5347 "+t+"\uff0c\u5f53\u524d 9999+ \u540d":r+="\uff0c\u5168\u670d\u6392\u540d\u63d0\u5347 "+t+"\uff0c\u5f53\u524d "+a.newRank+" \u540d",e&&e(r)}else e&&e(r)}):e&&e(r)},a.queryLeaderBoardRank=function(a,t){var e=o.pzaChannel.instance().getChannel().channel+"_"+a,n=o.pzaChannel.instance().getChannel().channelUserId;null!=n?o.pzaChannel.leaderBoradRank(e,n,function(a){-1!=a?t&&t(a+1):t&&t(null)}):t&&t(null)},a.uploadLeaderboardScore=function(a,t,e,n){var i=e+"\u9762\u65d7\u5e1c\u5b8c\u6210";if(null!=t&&t>=e){var r=null;return null!=t&&t>e&&(r="\u8ddd\u79bb\u5386\u53f2\u6700\u9ad8\u8bb0\u5f55\u8fd8\u5dee"+(t-e)),void(n&&n(r))}var p=a,l=o.pzaChannel.instance().getChannel().channelUserId;null!=l?o.pzaChannel.leaderBoradUpdate(p,l,e,function(a){if(null!=a&&-1!=a.newRank){var t=-1==a.oldRank?a.newRank:Math.max(0,a.oldRank-a.newRank);a.newRank=a.newRank+1;var e="";a.newRank>9999?e+="\u5168\u670d\u6392\u540d\u63d0\u5347 "+t+"\uff0c\u5f53\u524d 9999+ \u540d":e+="\u5168\u670d\u6392\u540d\u63d0\u5347 "+t+"\uff0c\u5f53\u524d "+a.newRank+" \u540d",n&&n(e)}else n&&n(null)}):n&&n(i)},a.endlessRank=[],a._Rank_Key="endless_rank_",a._Zombie_Rank_Key="zombie_endless_rank",a._Vase_Rank_Key="vase_endless_rank",a._zj_Rank_Key="zj_endless_rank",a._treasure_Rank_Key="treasure_endless_rank",a._zfRandomBox_Rank_Key="zfRandomBox_Rank_Key",a._luckWindmill_Rank_Key="luckWindmill_Rank_Key",a}();e.pzaRankMgr=i,cc._RF.pop()},{"../utils/pzaChannel":"pzaChannel","./pzaLocalData":"pzaLocalData"}],pzaRankView:[function(a,t,e){"use strict";cc._RF.push(t,"79949TBDxRMSY7yeG415W7n","pzaRankView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRankView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaOperationMgr"),l=a("../Common/pzaRankMgr"),s=a("../utils/pzaChannel"),c=a("./pzaCommonMask"),u=a("./pzaRankItem"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.itemPrefab=null,t.content=null,t.rankBtns=[],t.curSelectRank=null,t.curRankLabel=null,t.shareBtn=null,t.rewardBubble=null,t.items=null,t.curRankId=null,t.rankType=0,t}return n(t,a),t.prototype.onEnable=function(){s.pzaChannel.instance().showBanner()},t.prototype.onDisable=function(){s.pzaChannel.instance().closeBanner()},t.prototype.init=function(a){var t=this,e=function(e){console.log("rankCB: ",e),e?(t.rankType=a,c.pzaCommonMask.showMask(),t.showRank(1),p.pzaOperationMgr.showShareBubble(t.shareBtn,function(a){t.rewardBubble=a})):t.clickClose()};"my"==s.pzaChannel.instance().channel||"my1"==s.pzaChannel.instance().channel?s.pzaChannel.instance().getChannel().sendUserInfoToWeb(e):e(!0),this.shareBtn.x=530,this.shareBtn.y=0},t.prototype.showRank=function(a){var t=this;c.pzaCommonMask.showMask();var e=l.pzaRankMgr.Rank_Key+a;1==this.rankType?e=l.pzaRankMgr.Zombie_Rank_Key:2==this.rankType?e=l.pzaRankMgr.Vase_Rank_Key:3==this.rankType&&(e=l.pzaRankMgr.zj_Rank_Key,2==a?e=l.pzaRankMgr.treasure_Rank_Key:3==a?e=l.pzaRankMgr.zfRandomBox_Rank_Key:4==a&&(e=l.pzaRankMgr.luckWindmill_Rank_Key)),s.pzaChannel.getLeaderBorad(e,function(e){if(c.pzaCommonMask.hideMask(),null!=e){t.curRankId=a,t.clearItem(),t.items=[];for(var o=0;o<e.length;o++){var n=e[o],i=r.pzaGameCommonPool.requestInstant(t.itemPrefab);i.setParent(t.content);var p=i.getComponent(u.pzaRankItem);p&&p.bindData(n,o+1),t.items.push(p)}t.refreshRankBtn()}})},t.prototype.clearItem=function(){null!=this.items&&(this.items.forEach(function(a){a&&a.close()}),this.items=null)},t.prototype.refreshRankBtn=function(){if(1!=this.rankType)if(2!=this.rankType){if(3==this.rankType){for(t=4;t<5;t++)this.rankBtns[t].active=!1;return 1==this.curRankId?(this.curSelectRank.y=this.rankBtns[0].y,this.curRankLabel.string="\u62bd\u5956\u793c\u76d2"):2==this.curRankId?(this.curSelectRank.y=this.rankBtns[1].y,this.curRankLabel.string="\u65e0\u5c3d\u7684\u5b9d\u85cf"):3==this.curRankId?(this.curSelectRank.y=this.rankBtns[2].y,this.curRankLabel.string="\u81ea\u8d39\u793c\u76d2"):4==this.curRankId&&(this.curSelectRank.y=this.rankBtns[3].y,this.curRankLabel.string="\u65e0\u5c3d\u7684\u5e78\u8fd0"),this.rankBtns[0].getChildByName("txt").getComponent(cc.Label).string="\u62bd\u5956\u793c\u76d2",this.rankBtns[1].getChildByName("txt").getComponent(cc.Label).string="\u65e0\u5c3d\u7684\u5b9d\u85cf",this.rankBtns[2].getChildByName("txt").getComponent(cc.Label).string="\u81ea\u8d39\u793c\u76d2",void(this.rankBtns[3].getChildByName("txt").getComponent(cc.Label).string="\u65e0\u5c3d\u7684\u5e78\u8fd0")}for(t=0;t<5;t++){var a=t+1==this.curRankId;a&&(this.curSelectRank.y=this.rankBtns[t].y),this.rankBtns[t].active=!a}this.curRankLabel.string=["\u767d\u5929","\u9ed1\u591c","\u6cf3\u6c60","\u6d53\u96fe","\u5c4b\u9876"][this.curRankId-1]+"\u65e0\u5c3d"}else{for(var t=0;t<5;t++)this.rankBtns[t].active=!1;this.curRankLabel.string="\u7834\u7f50\u8005"}else{for(t=0;t<5;t++)this.rankBtns[t].active=!1;this.curRankLabel.string="\u50f5\u5c38\u516c\u654c"}},t.prototype.clickRank1=function(){this.showRank(1)},t.prototype.clickRank2=function(){this.showRank(2)},t.prototype.clickRank3=function(){this.showRank(3)},t.prototype.clickRank4=function(){this.showRank(4)},t.prototype.clickRank5=function(){this.showRank(5)},t.prototype.clickShare=function(){var a=this,t=s.pzaChannel.instance().getChannel();"wx"==t.channel?t.shareByScreenShot("\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",function(){a.rewardBubble&&a.rewardBubble.getReward(),a.rewardBubble=null}):s.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"100"},function(){a.rewardBubble&&a.rewardBubble.getReward(),a.rewardBubble=null})},t.prototype.clickClose=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([m({displayName:"item\u9884\u8bbe",type:cc.Prefab})],t.prototype,"itemPrefab",void 0),i([m({displayName:"item\u5bb9\u5668",type:cc.Node})],t.prototype,"content",void 0),i([m({displayName:"\u6392\u884c\u699c\u6309\u94ae",type:[cc.Node]})],t.prototype,"rankBtns",void 0),i([m({displayName:"\u5f53\u524d\u9009\u4e2d\u6392\u884c\u699c\u663e\u793a",type:cc.Node})],t.prototype,"curSelectRank",void 0),i([m({displayName:"\u5f53\u524d\u9009\u4e2d\u6392\u884c\u699c\u540d\u79f0",type:cc.Label})],t.prototype,"curRankLabel",void 0),i([m({displayName:"\u5206\u4eab\u6309\u94ae",type:cc.Node})],t.prototype,"shareBtn",void 0),i([h],t)}(cc.Component);e.pzaRankView=f,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaOperationMgr":"pzaOperationMgr","../Common/pzaRankMgr":"pzaRankMgr","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaRankItem":"pzaRankItem"}],pzaReCactus:[function(a,t,e){"use strict";cc._RF.push(t,"9e937plTI5OQKU/Q6WOhZYq","pzaReCactus");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaReCactus=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../pzaGameState"),d=a("./pzaRepeater"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t);var o=window.pzazombieManager.hasCanAttackZombie;this.node.scaleX=1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6);var n=function(){o.call(window.pzazombieManager,e.baseData)?e.animation.playAnimation("attack",!1,n,function(){e.shoot(),l.pzaSoundManager.playAudio("PeashooterAtk")}):e.blinkTime>0?e.animation.playAnimation("idle2",!1,n):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle2",!1,n))};n(),u.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t)},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1,null,cc.v2(1,0),!0);var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},i([m],t)}(d.pzaRepeater));e.pzaReCactus=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaRepeater":"pzaRepeater"}],pzaRecordBtn:[function(a,t,e){"use strict";cc._RF.push(t,"4c598GgxydIZ4J/snCF5xab","pzaRecordBtn");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r,p=a("../Common/pzaUIManager"),l=a("../Common/pzaWorldEventManager"),s=a("../Load/pzaPreLoadManager"),c=a("../utils/pzaChannel"),u=a("../utils/pzaChannelTT"),d=a("../utils/pzaKDefine"),h=a("../utils/pzakc"),m=cc._decorator,f=m.ccclass,z=m.property;(function(a){a[a.null=0]="null",a[a.lobby=1]="lobby",a[a.game=2]="game"})(r||(r={}));var y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bt_label=null,t.shareRewardNode=null,t.btnPos=r.null,t}return n(t,a),t.prototype.start=function(){l.pzaWorldEventManager.addListener(l.pzaWorldEventType.UPDATE_RECORD_STATE,this.onEnable,this)},t.prototype.onEnable=function(){var a=this;if(h.default.getData("shareData",{today:"",shareCount:"0"}).shareCount>=u.pzaChannelTT.shareMaxTimes)return console.log("\u5206\u4eab\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650"),void(this.node.active=!1);this.node.active=!0,"tt"==c.pzaChannel.instance().channel?(this.shareRewardNode.active=!1,this.updateUI(),h.default.regMsgReciever(d.Msg.recorderStart,function(){return a.updateUI(),!0}),h.default.regMsgReciever(d.Msg.recorderStop,function(){return a.updateUI(),!0}),h.default.regMsgReciever(d.Msg.recorderFail,function(){return a.updateUI(),!0}),h.default.regMsgReciever(d.Msg.recorderDone,function(){return a.updateUI(),!0}),h.default.regMsgReciever(d.Msg.shareMaxTimes,function(){return a.node.active=!1,!0})):this.node.active=!1},t.prototype.updateUI=function(){"idle"==u.pzaChannelTT.rState?(this.bt_label.string="\u5f55\u5236",this.shareRewardNode.active=!1):"recording"==u.pzaChannelTT.rState?(this.bt_label.string="\u5f55\u5236\u4e2d",this.shareRewardNode.active=!1):"recordEnd"==u.pzaChannelTT.rState&&(this.bt_label.string="\u5f55\u5236\u5b8c\u6bd5",this.btnPos==r.lobby&&(this.shareRewardNode.active=!0))},t.prototype.onClick=function(){"idle"==u.pzaChannelTT.rState?c.pzaChannel.instance().recorderStart():"recording"==u.pzaChannelTT.rState?c.pzaChannel.instance().recorderStop():"recordEnd"==u.pzaChannelTT.rState&&p.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.BYTE_RECORD_VIEW,function(){}),this.updateUI()},t.prototype.onDestroy=function(){l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.UPDATE_RECORD_STATE,this.onEnable,this),h.default.delMsgReciever(d.Msg.recorderStart),h.default.delMsgReciever(d.Msg.recorderStop),h.default.delMsgReciever(d.Msg.recorderFail),h.default.delMsgReciever(d.Msg.recorderDone),h.default.delMsgReciever(d.Msg.shareMaxTimes)},i([z({displayName:"\u6309\u94ae\u4e0a\u6587\u5b57",type:cc.Label})],t.prototype,"bt_label",void 0),i([z({displayName:"\u5206\u4eab\u5956\u52b1",type:cc.Node})],t.prototype,"shareRewardNode",void 0),i([z({type:cc.Enum(r),tooltip:"\u6309\u94ae\u6240\u5904\u4f4d\u7f6e"})],t.prototype,"btnPos",void 0),i([f],t)}(cc.Component);e.default=y,cc._RF.pop()},{"../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzaChannelTT":"pzaChannelTT","../utils/pzaKDefine":"pzaKDefine","../utils/pzakc":"pzakc"}],pzaRecordView:[function(a,t,e){"use strict";cc._RF.push(t,"501c98UqDNCh4VWbhSYgRLO","pzaRecordView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRecordView=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGamePropConfig"),l=a("../../Common/pzaLocalData"),s=a("../../Common/pzaRewardManager"),c=a("../../utils/pzaChannel"),u=a("../../utils/pzaChannelTT"),d=a("../../utils/pzaKDefine"),h=a("../../utils/pzakc"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onEnable=function(){"tt"==c.pzaChannel.instance().channel&&(this.node.getChildByName("board").getChildByName("desc").getComponent(cc.Label).string="\u8bb0\u5f55\u4e86\u4f60\u5728\u690d\u7269\u6d88\u9664\u50f5\u5c38\u4e2d\u5206\u7ad9\u7684\u7cbe\u5f69\u955c\u5934,\u5feb\u5206\u4eab\u7ed9\u597d\u53cb\u5427!")},t.prototype.clickShare=function(){var a=this,t=h.default.getData("shareData",{today:"",shareCount:"0"}),e=t.shareCount;e>=u.pzaChannelTT.shareMaxTimes?console.log("\u5206\u4eab\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650"):c.pzaChannel.instance().shareVideo(function(){e++,t.shareCount=e,h.default.saveData("shareData",t),l.pzaLocalData.data.coin+=200,l.pzaLocalData.addDirty("coin"),a.close(),e>=u.pzaChannelTT.shareMaxTimes&&h.default.sendMsg(d.Msg.shareMaxTimes);var o=[new p.pzaRewardPropData(p.pzaGamePropEnum.PROP_COIN,200)];s.pzaRewardManager.recieveRewards(o,function(){})})},t.prototype.clickAbandon=function(){this.close()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([f],t)}(cc.Component));e.pzaRecordView=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaRewardManager":"pzaRewardManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzaChannelTT":"pzaChannelTT","../../utils/pzaKDefine":"pzaKDefine","../../utils/pzakc":"pzakc"}],pzaRedHypnoShroom:[function(a,t,e){"use strict";cc._RF.push(t,"f1694QQ855CiYKuh+AVhshE","pzaRedHypnoShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRedHypnoShroom=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaZombieEnum"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.playNormalAni=function(){var a=this;this.blinkTime=r.pzaUtil.getRandomFloatNum(3,6);var t=function(){a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=r.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};this.animation.playAnimation("idle",!1,t)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.playNormalAni()},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.spawnZombie(p.pzaZombieEnum.RED_GARGANTUAR,1800)},t.prototype.spawnZombie=function(a,t){void 0===t&&(t=0);var e=window.pzazombieManager.createFixBlockZombieData(a,this.baseData.xIndex,this.baseData.yIndex,!0);e.zombieData.direction=1,t&&(e.atk=t),window.pzazombieManager.createHypnZombie(e)},i([c],t)}(l.pzaBasePlant));e.pzaRedHypnoShroom=u,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaBasePlant":"pzaBasePlant"}],pzaRedPointMgr:[function(a,t,e){"use strict";cc._RF.push(t,"0c8c7sXsaRMZ4adaa2ij6aR","pzaRedPointMgr");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r},r=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var p,l=a("../Battle/Data/pzaPlantEnum"),s=a("../Garden/pzaGardenMgr"),c=a("../Task/pzaTaskMgr"),u=a("../utils/pzakc"),d=a("./pzaGiftConfig"),h=a("./pzaLocalData"),m=cc._decorator,f=m.ccclass,z=m.property;(function(a){a[a.null=0]="null",a[a.sign=1]="sign",a[a.monthsign=2]="monthsign",a[a.achieve=3]="achieve",a[a.garden=4]="garden",a[a.welfare=5]="welfare",a[a.sharegift=6]="sharegift",a[a.weektwo=7]="weektwo",a[a.gift=8]="gift",a[a.battlereward=9]="battlereward",a[a.battleexp=10]="battleexp",a[a.newplayer=11]="newplayer",a[a.loginreward=12]="loginreward",a[a.loginactivity=13]="loginactivity"})(p||(p={}));var y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.type=p.null,t.tipNode=null,t.endTime=new Date("2024-08-25 00:00:00").getTime(),t}return n(t,a),t.prototype.start=function(){var a=this;this.scheduleOnce(function(){h.pzaLocalData.loadingIsOver&&a.checkRed(),a.schedule(function(){h.pzaLocalData.loadingIsOver&&a.checkRed()},3,cc.macro.REPEAT_FOREVER)},1)},t.prototype.checkRed=function(){this.tipNode.active?this.getTipState(this.type)||(this.tipNode.active=!1):this.getTipState(this.type)&&(this.tipNode.active=!0,this.tipNode.angle=0,cc.Tween.stopAllByTarget(this.tipNode),u.default.ani_JitterNode(this.tipNode,.4,15,3,!0))},t.prototype.getTipState=function(a){var t=!1;switch(a){case p.sign:t=this.checkDaySign();break;case p.monthsign:t=this.checkMonthSign();break;case p.achieve:t=this.checkAchieve();break;case p.garden:t=this.checkGarden();break;case p.sharegift:h.pzaLocalData.isNoShareAct||h.pzaLocalData.data.shareGiftRecIndex.indexOf(3)>=0&&!h.pzaLocalData.data.shareBoomNutPop&&(t=!0);break;case p.weektwo:(t=this.checkWeekTwo())||(this.node.active=!1);break;case p.welfare:(t=this.checkDaySign())||(t=this.checkMonthSign()),t||(t=this.checkWeekTwo()),h.pzaLocalData.data.shareGiftRecIndex.indexOf(3)>=0&&!h.pzaLocalData.data.shareBoomNutPop&&(t=!0);break;case p.battlereward:0==(t=this.checkBpRewards())&&(t=this.checkBpExp());break;case p.battleexp:t=this.checkBpExp();break;case p.newplayer:t=this.checkNewPlayerTask();break;case p.gift:t=this.checkGift();break;case p.loginreward:break;case p.loginactivity:t=this.checkLoginActivity()}return t},t.prototype.checkDaySign=function(){return!h.pzaLocalData.data.canMonthSign&&!h.pzaLocalData.data.hasSign},t.prototype.checkMonthSign=function(){return!(h.pzaLocalData.data&&!h.pzaLocalData.data.canMonthSign||h.pzaLocalData.data.isSignInMonth)},t.prototype.checkAchieve=function(){for(var a=!1,t=Object.values(h.pzaLocalData.data.achieves),e=0;e<t.length;e++)if(1==t[e]){a=!0;break}return a},t.prototype.checkGarden=function(){return s.default.instance().canOperate()},t.prototype.checkWeekTwo=function(){var a=!1;if(!h.pzaLocalData.data.passLastPart||h.pzaLocalData.serverTime>this.endTime)return!1;var t=c.default.instance().getTaskList();if(!t)return!1;for(var e=0;e<t.length;e++)2==t[e].state&&(a=!0);return a||(a=h.pzaLocalData.data.weekTwoStartTip),a},t.prototype.checkGift=function(){var a,t,e=d.pzaGiftConfig.isUnlockGift(d.pzaGiftID.Begin),o=d.pzaGiftConfig.isUnlockGift(d.pzaGiftID.Dave),n=d.pzaGiftConfig.isUnlockGift(d.pzaGiftID.Garden),i=d.pzaGiftConfig.getGiftData(d.pzaGiftID.Dave),r=d.pzaGiftConfig.getGiftData(d.pzaGiftID.Garden);if(i&&(a=h.pzaLocalData.data.getDaveGiftCount<d.pzaGiftConfig.getGiftData(d.pzaGiftID.Dave).getCount),r&&(t=h.pzaLocalData.data.getGardenGiftCount<d.pzaGiftConfig.getGiftData(d.pzaGiftID.Garden).getCount),e&&!h.pzaLocalData.data.hasBeginGift||o&&a||n&&t)return!0;for(var p=0;p<6;p++){var s=void 0;switch(p){case d.pzaPlantGiftType.GATLING_PEA:s=l.pzaPlantEnum.GATLING_PEA;break;case d.pzaPlantGiftType.GLOOM_SHROOM:s=l.pzaPlantEnum.GLOOM_SHROOM;break;case d.pzaPlantGiftType.CATTAIL:s=l.pzaPlantEnum.CATTAIL;break;case d.pzaPlantGiftType.SPIKEROCK:s=l.pzaPlantEnum.SPIKEROCK;break;case d.pzaPlantGiftType.COB_CANNON:s=l.pzaPlantEnum.COB_CANNON;break;case d.pzaPlantGiftType.WINTER_MELON:s=l.pzaPlantEnum.WINTER_MELON}var c=h.pzaLocalData.data.ownPlants.includes(s);if(d.pzaGiftConfig.isAbleGetPlantGift(s)&&!c)return!0}return!1},t.prototype.checkBpRewards=function(){var a,t,e,o,n=!1;try{for(var i=r(Object.keys(h.pzaLocalData.data.bpNormalRewards)),p=i.next();!p.done;p=i.next()){var l=p.value;if(1==h.pzaLocalData.data.bpNormalRewards[l])return n=!0,!0}}catch(u){a={error:u}}finally{try{p&&!p.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}if(n)return n;try{for(var s=r(Object.keys(h.pzaLocalData.data.bpHighRewards)),c=s.next();!c.done;c=s.next())if(l=c.value,1==h.pzaLocalData.data.bpHighRewards[l])return n=!0,!0}catch(d){e={error:d}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(e)throw e.error}}return n},t.prototype.checkBpExp=function(){var a,t,e,o;if(h.pzaLocalData.data.battlePassLv>=60)return!1;var n=!1;try{for(var i=r(Object.keys(h.pzaLocalData.data.bpDayTaskStates)),p=i.next();!p.done;p=i.next()){var l=p.value;if(1==h.pzaLocalData.data.bpDayTaskStates[l])return n=!0,!0}}catch(u){a={error:u}}finally{try{p&&!p.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}if(n)return n;try{for(var s=r(Object.keys(h.pzaLocalData.data.bpWeekTaskStates)),c=s.next();!c.done;c=s.next())if(l=c.value,1==h.pzaLocalData.data.bpWeekTaskStates[l])return n=!0,!0}catch(d){e={error:d}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(e)throw e.error}}return n},t.prototype.checkNewPlayerTask=function(){for(var a=!1,t=h.pzaLocalData.data.newPlayerStep>=7?7:h.pzaLocalData.data.newPlayerStep,e=1;e<=t;e++)for(var o=h.pzaLocalData.data.stepStates[e-1],n=0;n<4;n++)if(1==o[n+""])return!0;return a},t.prototype.checkLoginActivity=function(){for(var a=!1,t=1;t<=7;t++)if(2!=h.pzaLocalData.data.loginRewardStates[t+""]&&t<=h.pzaLocalData.data.loginDays){a=!0;break}return a},i([z({type:cc.Enum(p),tooltip:"\u7ea2\u70b9\u7c7b\u578b"})],t.prototype,"type",void 0),i([z({displayName:"\u63d0\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"tipNode",void 0),i([f],t)}(cc.Component);e.default=y,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Garden/pzaGardenMgr":"pzaGardenMgr","../Task/pzaTaskMgr":"pzaTaskMgr","../utils/pzakc":"pzakc","./pzaGiftConfig":"pzaGiftConfig","./pzaLocalData":"pzaLocalData"}],pzaRepeater:[function(a,t,e){"use strict";cc._RF.push(t,"084b5XksgtEvpNLAM4svCKL","pzaRepeater");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRepeater=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaBaseBullet"),c=a("../pzaGameState"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.attacking=!1,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t);var o=window.pzazombieManager.hasCanAttackZombie;if(c.pzaGameState.isZombieMode())return this.attacking=!1,this.animation.playAnimation("T_idle",!0),void(this.atkAniTime=this.animation.getAnimationDuration("T_attack"));var n=function(){o.call(window.pzazombieManager,e.baseData)?e.animation.playAnimation("attack",!1,n,function(){e.shoot(),l.pzaSoundManager.playAudio("PeashooterAtk")}):e.animation.playAnimation("idle",!1,n)};n(),c.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData)return!this.attacking&&c.pzaGameState.isZombieMode()&&window.pzazombieManager.hasCanAttackZombie(this.baseData)?(this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot(),l.pzaSoundManager.playAudio("PeashooterAtk")},this.atkAniTime/1.4)):void 0},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(s.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1,null,cc.v2(1,0));var i=c.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*c.pzaGameState.map.getBlockWidth())}}}}},i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([h],t)}(u.pzaBasePlant);e.pzaRepeater=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaResMgr:[function(a,t,e){"use strict";cc._RF.push(t,"bfe23rKP+xApq5lrOWvYJyF","pzaResMgr"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaResMgr=void 0;var o=a("../../start/pzaBundleController"),n=a("./pzaChannel"),i=a("./pzakc"),r=function(){function a(){this.cId=n.pzaChannel.verMap[n.pzaChannel.remoteVerKey].id,this.confCache=new Map}return a.instance=function(){return a._me||(a._me=new a),a._me},a.prototype.getConf=function(a){return this.confCache.get(a)},a.prototype.readDC=function(a){var t=JSON.parse(a);for(var e in t)this.confCache.set(e,t[e][e]);i.default.log("conf loaded:",this.confCache.size),i.default.log("ccv:"+this.getConf("a1")[0].ver,n.pzaChannel.remoteVerKey)},a.prototype.loadConf=function(a){var t=this;cc.resources.load("conf/conf",function(e,o){e?console.error(e):cc.assetManager.loadAny({url:o.nativeUrl,type:"binary"},function(e,o){if(e)i.default.err(e);else{var r=fflate.unzipSync(new Uint8Array(o),{filter:function(a){return"conf.txt"===a.name}}),p=fflate.strFromU8(r["conf.txt"]);t.readDC(p),n.pzaChannel.isConfRemote?i.default.jget("https://ga.gamejym.com/fcm199/zip/"+t.cId+".bin",function(e,o){if(e)a(e);else{var n=fflate.unzipSync(new Uint8Array(o),{filter:function(a){return"conf.txt"===a.name}}),i=fflate.strFromU8(n["conf.txt"]);t.readDC(i),a(null)}}):a(null)}})})},a.prototype.getSpineSync=function(a,t){var e=o.pzaBundleController.getBundle(o.pzaBundleType.Spine);if(!e)return t(new Error("\u65e0spineBundle"),null);e.load(a,sp.SkeletonData,function(a,e){a?t(a,null):t(null,e)})},a._me=null,a}();e.pzaResMgr=r,cc._RF.pop()},{"../../start/pzaBundleController":void 0,"./pzaChannel":"pzaChannel","./pzakc":"pzakc"}],pzaReviveView:[function(a,t,e){"use strict";cc._RF.push(t,"7b1d0A87u9CfKLGpAwdUwi5","pzaReviveView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaReviveView=void 0;var r=a("../../Battle/Plant/pzaAttackType"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaLocalData"),u=a("../../Common/pzaSoundManager"),d=a("../../Common/pzaStatisticsMgr"),h=a("../../Common/pzaWorldEventManager"),m=a("../../utils/pzaChannel"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tip=null,t.videoNode=null,t.shareNode=null,t.btnState=!1,t.toggle=null,t.closeBtn=null,t.confirmCall=null,t.cancelCall=null,t.giveSun=!0,t}return n(t,a),t.prototype.init=function(a,t,e){void 0===e&&(e=!1),this.confirmCall=a,this.cancelCall=t,p.pzaGameState.isZombieMode()?this.tip.string="\u6ca1\u6709\u80fd\u91cf\u53ec\u5524\u50f5\u5c38\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u83b7\u5f97500\u80fd\u91cf":p.pzaGameState.gameMode===p.pzaGameMode.VASE_ENDLESS?this.tip.string="\u50f5\u5c38\u8d70\u8fdb\u623f\u5b50\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u4fdd\u7559\u8bb0\u5f55\u4ece\u5f53\u524d\u5173\u5361\u91cd\u65b0\u5f00\u59cb\u3002":p.pzaGameState.isMiniMode()?(this.tip.string="\u50f5\u5c38\u8d70\u8fdb\u623f\u5b50\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u6e05\u7406\u6240\u6709\u50f5\u5c38",this.giveSun=!1):(this.giveSun=p.pzaGameState.isSurvival()||5!=p.pzaGameState.curPart&&10!=p.pzaGameState.curPart,this.tip.string=this.giveSun?"\u50f5\u5c38\u8d70\u8fdb\u623f\u5b50\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u6e05\u7406\u6240\u6709\u50f5\u5c38\uff0c\u5e76\u8d60\u9001500\u80fd\u91cf":"\u50f5\u5c38\u8d70\u8fdb\u623f\u5b50\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u6e05\u7406\u6240\u6709\u50f5\u5c38"),e&&(this.tip.string="\u50f5\u5c38\u8d70\u8fdb\u623f\u5b50\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u8ba9Boss\u9000\u56de\u8d77\u70b9"),this.btnState=p.pzaGameState.reviveViewBtnState%2==1,"wx"!=m.pzaChannel.instance().channel&&(this.btnState=!1),this.shareNode.active=this.btnState,this.videoNode.active=!this.btnState,d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"12"},{name:"adname",value:"\u5173\u5361\u590d\u6d3b"}),u.pzaSoundManager.stopLoopAudio(),u.pzaSoundManager.stopLongAudio(),this.toggle.active=!1},t.prototype.showCloseBtn=function(){this.toggle.active=!1,this.closeBtn.active=!0},t.prototype.clickRevive=function(){var a=this,t=function(){a.close(),a.confirmCall&&a.confirmCall();var t=s.pzaGameManager.getCurrentGame();p.pzaGameState.gamePause=!1,p.pzaGameState.hadRevived=!0,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.GAME_RESUME,null),p.pzaGameState.reviveViewBtnState++,p.pzaGameState.isZombieMode()?window.pzaplantManager.adCreateSun():(window.pzazombieManager.zombieMap.forEach(function(a,t){null!=a&&null!=t&&null!=t.logicPos&&null!=a.baseData&&a.baseData.logicPos.x<-157&&a.hurt(1e6,null,r.pzaAttackType.DEATH)}),t.createAdBomb(),a.giveSun&&window.pzaplantManager.adCreateSun())};this.videoNode.active&&m.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u5173\u5361\u590d\u6d3b",adsid:"12"}),this.shareNode.active&&m.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"12"},function(){t()})},t.prototype.clickClose=function(){this.close(),this.cancelCall&&this.cancelCall(),u.pzaSoundManager.resumeLoopAudio(),u.pzaSoundManager.resumeLongAudio()},t.prototype.close=function(){c.pzaLocalData.isPopReviveView=!1,l.pzaGameCommonPool.returnInstant(this.node)},i([y({displayName:"\u63d0\u793a\u8bed",type:cc.Label})],t.prototype,"tip",void 0),i([y({displayName:"\u89c6\u9891\u6807\u8bc6\u8282\u70b9",type:cc.Node})],t.prototype,"videoNode",void 0),i([y({displayName:"\u5206\u4eab\u6807\u8bc6\u8282\u70b9",type:cc.Node})],t.prototype,"shareNode",void 0),i([y(cc.Node)],t.prototype,"toggle",void 0),i([y({type:cc.Node})],t.prototype,"closeBtn",void 0),i([z],t)}(cc.Component);e.pzaReviveView=g,cc._RF.pop()},{"../../Battle/Plant/pzaAttackType":"pzaAttackType","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzaChannel":"pzaChannel"}],pzaRewardItem:[function(a,t,e){"use strict";cc._RF.push(t,"88504bcAuVIU6o/+NgxpLtt","pzaRewardItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRewardItem=void 0;var r=a("../Achieve/pzaAchieve"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Common/pzaBeltEquipConfig"),s=a("../Common/pzaGameConfig"),c=a("../Common/pzaGamePropConfig"),u=a("../Common/pzaSpineController"),d=a("../Common/pzaSpriteFrameManager"),h=a("../Load/pzaBundleObjectPool"),m=a("../Shop/pzaShopConfig"),f=a("../utils/pzakc"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.proIcon=null,t.propAni=null,t.plantCardNode=null,t.plantIcon=null,t.propName=null,t.shopItemIcon=null,t.swIcon=null,t.coin_path="Texture/BattleUI/coin_icon",t.taken_coin_path="Texture/MainView/RecruitView/recruitImg6",t}return n(t,a),t.prototype.init=function(a){var t=this;if(this.propName.node.y=-37,this.swIcon.active=!1,null!=a){var e=a.propType,o=a.propCount;switch(this.shopItemIcon.node.active=!1,this.proIcon.node.scale=1,e){case c.pzaGamePropEnum.PROP_COIN:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u91d1\u5e01X"+o,h.pzaBundleObjectPool.requestSpriteFrameByUrl(this.coin_path,function(a,e){null==a?e?t.proIcon.spriteFrame=e:f.default.err("\u65e0tool\u56fe"):console.error(a)});break;case c.pzaGamePropEnum.PROP_CHERRY_BOMB:case c.pzaGamePropEnum.PROP_AUTO_PICK:case c.pzaGamePropEnum.PROP_FREE_SUN:this.proIcon.node.active=!1,this.propAni.node.active=!0,this.plantCardNode.active=!1,e==c.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAni.playAnimation("3ui_1",!0):e==c.pzaGamePropEnum.PROP_AUTO_PICK?this.propAni.playAnimation("2ui_1",!0):e==c.pzaGamePropEnum.PROP_FREE_SUN&&this.propAni.playAnimation("1ui_1",!0);var n=c.pzaGamePropConfig.PorpConfigMap.get(e);null!=n&&(this.propName.string=n.propName+"X"+o);break;case c.pzaGamePropEnum.PROP_PLANTE:this.proIcon.node.active=!1,this.propAni.node.active=!1,this.plantCardNode.active=!0;var i;null!=(i=42==o?s.pzaGameConfig.getPlantConfig(p.pzaPlantEnum.TWIN_SUNFLOWER):s.pzaGameConfig.getPlantConfig(o))&&(this.propName.string=i.name+"X1",d.pzaSpriteFrameManager.loadPlantCard(o,this.plantIcon)),1==a.limitGet&&(this.propName.string="\u514d\u8d39\u8bd5\u7528\u4e00\u5929",this.swIcon.active=!0);break;case c.pzaGamePropEnum.PROP_FERTILIZER:this.proIcon.node.active=!1,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.shopItemIcon.node.active=!0,this.propName.string="\u80a5\u6599X"+o,d.pzaSpriteFrameManager.loadShopItemIcon(m.pzaShopItemType.FERTILIZER,this.shopItemIcon);break;case c.pzaGamePropEnum.EQUIP_BELT:this.proIcon.node.active=!1,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.shopItemIcon.node.active=!0,this.propName.string=l.pzaBeltEquipConfig.getConfig().get(a.targetID).name;break;case c.pzaGamePropEnum.PROP_CHOCOLATES:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u5de7\u514b\u529bX"+o,h.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/chocolate",function(a,e){null==a?e?t.proIcon.spriteFrame=e:f.default.err("\u65e0tool\u56fe"):console.error(a)});break;case c.pzaGamePropEnum.PROP_GOLD_FLOWER:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u9ec4\u91d1\u82b1\u82d7X1",d.pzaSpriteFrameManager.loadGoldPlant(33,this.proIcon);break;case c.pzaGamePropEnum.PROP_SECRET_FLOWER:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u795e\u79d8\u82b1\u82d7X"+o,d.pzaSpriteFrameManager.loadGoldPlant(30,this.proIcon);break;case c.pzaGamePropEnum.PROP_BRONZE_FLOWE:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u9752\u94dc\u82b1\u82d7X"+o,d.pzaSpriteFrameManager.loadGoldPlant(31,this.proIcon);break;case c.pzaGamePropEnum.PROP_SILVER_FLOWE:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u767d\u94f6\u82b1\u82d7X"+o,d.pzaSpriteFrameManager.loadGoldPlant(32,this.proIcon);break;case c.pzaGamePropEnum.PROP_ACHIEVE:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1;var u="Texture/MainView/Merger/tasksView/icon_59";this.propName.string="\u9650\u65f6\u6210\u5c31\u201c\u738b\u724c\u5192\u9669\u5bb6\u201d",o==r.pzaAchieveType.ACH_40?(u="Texture/MainView/Merger/tasksView/icon_60",this.propName.string="\u9650\u65f6\u6210\u5c31\u201c\u5236\u9738\u8718\u86db\u5973\u201d"):o==r.pzaAchieveType.ACH_42?(u="Texture/MainView/Merger/tasksView/icon_42",this.propName.string="\u9650\u65f6\u6210\u5c31\u201c\u5236\u9738\u767d\u9aa8\u7cbe\u201d"):o==r.pzaAchieveType.ACH_44?(u="Texture/MainView/Merger/tasksView/icon_44",this.propName.string="\u9650\u65f6\u6210\u5c31\u201c\u5236\u9738\u9ec4\u7709\u602a\u201d"):o==r.pzaAchieveType.ACH_46?(u="Texture/MainView/Merger/tasksView/icon_46",this.propName.string="\u9650\u65f6\u6210\u5c31\u201c\u5236\u9738\u7ea2\u5b69\u513f\u201d"):o==r.pzaAchieveType.ACH_48&&(u="Texture/MainView/Merger/tasksView/icon_48",this.propName.string="\u9650\u65f6\u6210\u5c31\u201c\u5236\u9738\u725b\u9b54\u738b\u201d"),this.propName.node.y=-50,h.pzaBundleObjectPool.requestSpriteFrameByUrl(u,function(a,e){null==a?e?t.proIcon.spriteFrame=e:f.default.err("\u65e0tool\u56fe"):console.error(a)});break;case c.pzaGamePropEnum.PROP_POWER:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.proIcon.node.scale=.8,this.propName.string="\u4f53\u529bX"+o,h.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/Merger/HomeView/powerIcon",function(a,e){null==a?e?t.proIcon.spriteFrame=e:f.default.err("\u65e0tool\u56fe"):console.error(a)});break;case c.pzaGamePropEnum.PROP_AD_TICKET:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.proIcon.node.scale=.8,this.propName.string="\u5e7f\u544a\u5238X"+o,h.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/Merger/HomeView/ad_ticket",function(a,e){null==a?e?t.proIcon.spriteFrame=e:f.default.err("\u65e0tool\u56fe"):console.error(a)});break;case c.pzaGamePropEnum.RANDOM_GIFT:this.propAni.node.active=!1}}},i([g({displayName:"\u9053\u5177\u56fe\u6807",type:cc.Sprite})],t.prototype,"proIcon",void 0),i([g({displayName:"\u9053\u5177\u52a8\u753b",type:u.pzaSpineController})],t.prototype,"propAni",void 0),i([g({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"plantCardNode",void 0),i([g({displayName:"\u690d\u7269\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"plantIcon",void 0),i([g({displayName:"\u9053\u5177\u540d\u79f0",type:cc.Label})],t.prototype,"propName",void 0),i([g({displayName:"\u5546\u5e97\u7269\u54c1",type:cc.Sprite})],t.prototype,"shopItemIcon",void 0),i([g({displayName:"\u8bd5\u73a9\u8282\u70b9",type:cc.Node})],t.prototype,"swIcon",void 0),i([y],t)}(cc.Component);e.pzaRewardItem=b,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Shop/pzaShopConfig":"pzaShopConfig","../utils/pzakc":"pzakc"}],pzaRewardManager:[function(a,t,e){"use strict";cc._RF.push(t,"e44bdHqe5ZLuqradI8T/8b2","pzaRewardManager"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRewardManager=void 0;var o=a("../Achieve/pzaAchieveMgr"),n=a("../Garden/pzaGardenMgr"),i=a("../Load/pzaPreLoadManager"),r=a("../Shop/pzaShopConfig"),p=a("../View/pzaCommonRewardView"),l=a("./pzaBeltEquipConfig"),s=a("./pzaGamePropConfig"),c=a("./pzaLocalData"),u=a("./pzaUIManager"),d=a("./pzaUtil"),h=function(){function a(){}return a.recieveRewards=function(a,t,e,o){void 0===t&&(t=null),void 0===e&&(e=!1),void 0===o&&(o=null),null!=a&&(!e&&this.recieveRewardData(a),u.pzaUIManager.baseShowPopUI(i.pzaResourceUrl.COMMON_REWARD_VIEW,function(e){var n=e&&e.getComponent(p.pzaCommonRewardView);n&&n.bindData(a,t),o&&n&&n.setTip(o)}))},a.recieveRewardData=function(a){null!=a&&a.forEach(function(a){if(null!=a)if(a.propType==s.pzaGamePropEnum.PROP_PLANTE)if(c.pzaLocalData.data.ownPlants.includes(a.propCount)){if(1==a.limitGet)return c.pzaLocalData.data.plantTrial[""+a.propCount]+=1,void c.pzaLocalData.addDirty("plantTrial");var t=r.pzaShopConfig.getPlantPrice(a.propCount);a.propType=s.pzaGamePropEnum.PROP_COIN,a.propCount=t,c.pzaLocalData.obtainProp(a.propType,a.propCount)}else 1==a.limitGet&&(c.pzaLocalData.data.plantTrial[""+a.propCount]+=1,c.pzaLocalData.addDirty("plantTrial")),c.pzaLocalData.data.ownPlants.push(a.propCount),c.pzaLocalData.addDirty("ownPlants"),o.default.instance().obtainPlant();else if(a.propType==s.pzaGamePropEnum.PROP_FERTILIZER)console.log("\u6dfb\u52a0\u80a5\u6599:",a.propCount),n.default.instance().addGardenTool(n.pzaGardenToolType.manure,a.propCount);else if(a.propType==s.pzaGamePropEnum.EQUIP_BELT)console.log("\u83b7\u5f97\u8170\u5e26:",a.targetID),l.pzaBeltEquipConfig.getBeltEquip(a.targetID);else if(a.propType==s.pzaGamePropEnum.PROP_CHOCOLATES)console.log("\u6dfb\u52a0\u5de7\u514b\u529b: ",a.propCount),n.default.instance().addGardenTool(n.pzaGardenToolType.chocolate,a.propCount);else if(a.propType==s.pzaGamePropEnum.PROP_GOLD_FLOWER){for(var e=0;e<a.propCount;e++){var i=n.default.instance().randomGardenPlant(1);c.pzaLocalData.data.dropPlantArr.push(i)}c.pzaLocalData.addDirty("dropPlantArr")}else if(a.propType==s.pzaGamePropEnum.PROP_SECRET_FLOWER||a.propType==s.pzaGamePropEnum.PROP_BRONZE_FLOWE||a.propType==s.pzaGamePropEnum.PROP_SILVER_FLOWE){var p=0;for(a.propType==s.pzaGamePropEnum.PROP_SECRET_FLOWER?p=0:a.propType==s.pzaGamePropEnum.PROP_BRONZE_FLOWE?p=.25:a.propType==s.pzaGamePropEnum.PROP_SILVER_FLOWE&&(p=.5),e=0;e<a.propCount;e++)i=n.default.instance().randomGardenPlant(p),c.pzaLocalData.data.dropPlantArr.push(i);c.pzaLocalData.addDirty("dropPlantArr")}else c.pzaLocalData.obtainProp(a.propType,a.propCount)})},a.checkRandomGift=function(a,t){for(var e=0,o=0,n=0,i=0;i<a;i++){var r=d.pzaUtil.getRandomValueFromArray([s.pzaGamePropEnum.PROP_AUTO_PICK,s.pzaGamePropEnum.PROP_FREE_SUN,s.pzaGamePropEnum.PROP_CHERRY_BOMB]);r==s.pzaGamePropEnum.PROP_AUTO_PICK?o++:r==s.pzaGamePropEnum.PROP_FREE_SUN?e++:r==s.pzaGamePropEnum.PROP_CHERRY_BOMB&&n++}return e>0&&t.push(new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_FREE_SUN,e)),o>0&&t.push(new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_AUTO_PICK,o)),n>0&&t.push(new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_CHERRY_BOMB,n)),t},a}();e.pzaRewardManager=h,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../View/pzaCommonRewardView":"pzaCommonRewardView","./pzaBeltEquipConfig":"pzaBeltEquipConfig","./pzaGamePropConfig":"pzaGamePropConfig","./pzaLocalData":"pzaLocalData","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil"}],pzaRicochetBulletEffect:[function(a,t,e){"use strict";cc._RF.push(t,"f80fbJLm4FPkbsC+16mztX5","pzaRicochetBulletEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRicochetBulletEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletNode=null,t.poolPrefab=null,t}return n(t,a),t.prototype.init=function(a){var t=this;this.bulletNode.stopAllActions(),this.bulletNode.setPosition(cc.v2()),this.bulletNode.runAction(cc.sequence(cc.jumpTo(.7,cc.v2(-(100*Math.random()+80),0),50*Math.random()+70,1),cc.callFunc(function(){t.close()}))),a&&(this.bulletNode.getComponent(cc.Sprite).spriteFrame=a)},t.prototype.pauseSelf=function(){this.bulletNode.pauseAllActions()},t.prototype.resumeSelf=function(){this.bulletNode.resumeAllActions()},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([c({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"bulletNode",void 0),i([c(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaRicochetBulletEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaRoofPreEffect:[function(a,t,e){"use strict";cc._RF.push(t,"cc08fOhbu9MfoyNMOPOI8P3","pzaRoofPreEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRoofPreEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../pzaGameState"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tree=null,t.treeOcclusionImgs=[],t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.tree.stopAllActions(),p.pzaGameState.isNightScene?this.tree.getComponent(cc.Sprite).spriteFrame=this.treeOcclusionImgs[1]:this.tree.getComponent(cc.Sprite).spriteFrame=this.treeOcclusionImgs[0],this.tree.setPosition(cc.v2(796,-17))},t.prototype.showTree=function(){this.tree.stopAllActions(),this.tree.setPosition(cc.v2(-1200,-17)),this.tree.runAction(cc.moveTo(1.5,cc.v2(796,-17)).easing(cc.easeCubicActionOut()))},t.prototype.hideTree=function(){this.tree.stopAllActions(),this.tree.setPosition(cc.v2(796,-17)),this.tree.runAction(cc.moveTo(1.5,cc.v2(-1200,-17)).easing(cc.easeCubicActionOut()))},i([c({displayName:"\u6811",type:cc.Node})],t.prototype,"tree",void 0),i([c({displayName:"\u6811\u906e\u6321",type:[cc.SpriteFrame]})],t.prototype,"treeOcclusionImgs",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaRoofPreEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../pzaGameState":"pzaGameState"}],pzaRotateBullet:[function(a,t,e){"use strict";cc._RF.push(t,"85830j47eFFJb5jMljzmpXE","pzaRotateBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRotateBullet=void 0;var r=a("./pzaBaseBullet"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.updateMove=function(t){a.prototype.updateMove.call(this,t)},i([l],t)}(r.pzaBaseBullet));e.pzaRotateBullet=s,cc._RF.pop()},{"./pzaBaseBullet":"pzaBaseBullet"}],pzaSaveView:[function(a,t,e){"use strict";cc._RF.push(t,"cacb6kS7VhEgZEyI4PwrDDj","pzaSaveView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSaveView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaStatisticsMgr"),c=a("../Common/pzaUIManager"),u=a("../Common/pzaUtil"),d=a("../Load/pzaPreLoadManager"),h=a("../utils/pzaChannel"),m=a("../utils/pzakc"),f=a("./pzaCommonMask"),z=a("./pzaWarningView"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.remoteTime=null,t.remotePart=null,t.remoteCoin=null,t.localTime=null,t.localPart=null,t.localCoin=null,t.deleteBtn=null,t.unlockChapter=null,t.saveBtn=null,t.remoteReadBtn=null,t.localReadBtn=null,t.remoteAd=null,t.saveAd=null,t.remoteTimeNode=null,t.remoteProNode=null,t.refreshOrReadLab=null,t.errTip=null,t.remoteData=null,t.canRefresh=!1,t}return n(t,a),t.prototype.init=function(a){h.pzaChannel.instance().showInter(),this.canRefresh=!1,this.remoteData=null,this.remoteData=a,this.localTime.string=u.pzaUtil.formatDateTime(p.pzaLocalData.data.saveTime),this.localPart.string="\u4e00\u5468\u76ee "+p.pzaLocalData.data.curChapter+"-"+p.pzaLocalData.data.curPart,p.pzaLocalData.data.curChapter>5&&(this.localPart.string="\u4e8c\u5468\u76ee "+(p.pzaLocalData.data.curChapter-5)+"-"+p.pzaLocalData.data.curPart),this.localCoin.string=u.pzaUtil.getCurrencyStr(p.pzaLocalData.data.coin),null==a?(this.remoteTime.string="\u65e0",this.remotePart.string="",this.remoteCoin.string=""):(this.remoteTime.string=u.pzaUtil.formatDateTime(a.saveTime),this.remotePart.string="\u4e00\u5468\u76ee "+a.curChapter+"-"+a.curPart,a.curChapter>5&&(this.remotePart.string="\u4e8c\u5468\u76ee "+(a.curChapter-5)+"-"+a.curPart),this.remoteCoin.string=u.pzaUtil.getCurrencyStr(a.coin)),this.remoteTimeNode.active=!0,this.remoteProNode.active=!0,this.saveAd.active=!1,this.remoteAd.active=!1,this.deleteBtn.active=!1,this.localReadBtn.active=!1,this.remoteReadBtn.active=!0,this.saveBtn.active=!0,this.deleteBtn.active=p.pzaLocalData.testMode,p.pzaLocalData.data.readGameDataCnt>0&&(this.remoteAd.active=!0),this.errTip.node.active=!1,this.refreshOrReadLab.string="\u8bfb\u53d6","noAD"==h.pzaChannel.instance().channel&&(this.saveBtn.active=!1,this.remoteReadBtn.active=!1,this.unlockChapter.active=h.pzaChannel.instance().getChannel().isWhite,h.pzaChannel.isConfRemote&&(this.saveBtn.active=!0,this.remoteReadBtn.active=!0,this.unlockChapter.active=!0))},t.prototype.gameInit=function(a){this.canRefresh=!0,this.remoteData=null,this.remoteAd.active=!1,this.deleteBtn.active=!1,this.saveBtn.active=!1,this.remoteReadBtn.active=!0,this.localReadBtn.active=!0,this.remoteData=a,this.localTime.string=u.pzaUtil.formatDateTime(p.pzaLocalData.data.saveTime),this.localPart.string="\u4e00\u5468\u76ee "+p.pzaLocalData.data.curChapter+"-"+p.pzaLocalData.data.curPart,this.localCoin.string=u.pzaUtil.getCurrencyStr(p.pzaLocalData.data.coin),this.remoteTimeNode.active=!1,this.remoteProNode.active=!1,this.refreshOrReadLab.string="\u5237\u65b0",this.errTip.node.active=!0},t.prototype.clickReadLocal=function(){var a=this;c.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(z.pzaWarningView);e&&e.show("\u8bfb\u53d6\u672c\u5730\u5b58\u6863\u4f1a\u8986\u76d6\u4e91\u7aef\u5b58\u6863,\u5efa\u8bae\u8c28\u614e\u64cd\u4f5c","\u8bfb\u53d6","\u53d6\u6d88",function(){m.default.sendMsg("readGameData");var t=h.pzaChannel.instance().getChannel();h.pzaChannel.saveToRemote(t.channelUserId,p.pzaLocalData.data,!0),a.close()},null,"")})},t.prototype.clickReadRemote=function(){var a=this;if(this.canRefresh){f.pzaCommonMask.showMask();var t=h.pzaChannel.instance().getChannel();h.pzaChannel.loadFromRemote(t.channelUserId,function(t,e){t?f.pzaCommonMask.hideMask():(f.pzaCommonMask.hideMask(),a.init(e))})}else{var e=!!this.remoteAd.active;s.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"35"},{name:"adname",value:"\u6e38\u620f\u5b58\u8bfb\u6863"}),c.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.WARNING_VIEW,function(t){var o=t&&t.getComponent(z.pzaWarningView);o&&o.show("\u8bfb\u53d6\u4e91\u7aef\u5b58\u6863\u4f1a\u8986\u76d6\u672c\u5730\u5b58\u6863,\u5efa\u8bae\u8c28\u614e\u64cd\u4f5c","\u8bfb\u53d6","\u53d6\u6d88",function(){var t=function(){p.pzaLocalData.parseFromData(a.remoteData),p.pzaLocalData.localSaveData(),m.default.sendMsg("readGameData"),p.pzaLocalData.data.readGameDataCnt=1,p.pzaLocalData.addDirty("readGameDataCnt"),a.close()};e?h.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u6e38\u620f\u5b58\u8bfb\u6863",adsid:"35"}):t()},null,"\u8b66\u544a",e)})}},t.prototype.clickSave=function(){var a=this;l.pzaSoundManager.playSFX(),this.saveAd.active,s.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"35"},{name:"adname",value:"\u6e38\u620f\u5b58\u8bfb\u6863"}),c.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(z.pzaWarningView);e&&e.show("\u4fdd\u5b58\u672c\u5730\u5b58\u6863\u4f1a\u8986\u76d6\u4e91\u7aef\u5b58\u6863,\u5efa\u8bae\u8c28\u614e\u64cd\u4f5c","\u4fdd\u5b58","\u53d6\u6d88",function(){(function(){p.pzaLocalData.data.saveGameDataCnt=1,p.pzaLocalData.addDirty("saveGameDataCnt");var t=h.pzaChannel.instance().getChannel();h.pzaChannel.saveToRemote(t.channelUserId,p.pzaLocalData.data,!0),a.close()})()},null,"\u8b66\u544a",!1)})},t.prototype.clickUnlockChapter=function(){l.pzaSoundManager.playSFX(),"noAD"==h.pzaChannel.instance().channel&&(p.pzaLocalData.unlockChapter(),m.default.sendMsg("readGameData"),this.close())},t.prototype.clickClose=function(){var a=this;l.pzaSoundManager.playSFX(),this.canRefresh?c.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(z.pzaWarningView);e&&e.show("\u786e\u5b9a\u4ee5\u672c\u5730\u5b58\u6863\u8fdb\u5165\u6e38\u620f","\u786e\u8ba4","\u53d6\u6d88",function(){a.close()},null,"\u8b66\u544a")}):this.close()},t.prototype.clickDelete=function(){l.pzaSoundManager.playSFX();var a=new p.pzaLocalData,t=h.pzaChannel.instance().getChannel();h.pzaChannel.saveToRemote(t.channelUserId,a),this.close()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([b({displayName:"\u4e91\u7aef\u8fdb\u5ea6\u65f6\u95f4",type:cc.Label})],t.prototype,"remoteTime",void 0),i([b({displayName:"\u4e91\u7aef\u5173\u5361\u8fdb\u5ea6",type:cc.Label})],t.prototype,"remotePart",void 0),i([b({displayName:"\u4e91\u7aef\u91d1\u5e01",type:cc.Label})],t.prototype,"remoteCoin",void 0),i([b({displayName:"\u672c\u5730\u8fdb\u5ea6\u65f6\u95f4",type:cc.Label})],t.prototype,"localTime",void 0),i([b({displayName:"\u672c\u5730\u5173\u5361\u8fdb\u5ea6",type:cc.Label})],t.prototype,"localPart",void 0),i([b({displayName:"\u672c\u5730\u91d1\u5e01",type:cc.Label})],t.prototype,"localCoin",void 0),i([b({displayName:"\u6e05\u6570\u636e\u6309\u94ae",type:cc.Node})],t.prototype,"deleteBtn",void 0),i([b({displayName:"\u5f00\u653e\u5173\u5361",type:cc.Node})],t.prototype,"unlockChapter",void 0),i([b({displayName:"\u4fdd\u5b58\u6309\u94ae",type:cc.Node})],t.prototype,"saveBtn",void 0),i([b({displayName:"\u8fdc\u7a0b\u8bfb\u53d6",type:cc.Node})],t.prototype,"remoteReadBtn",void 0),i([b({displayName:"\u672c\u5730\u8bfb\u53d6",type:cc.Node})],t.prototype,"localReadBtn",void 0),i([b({displayName:"\u8fdc\u7a0b\u8bfb\u53d6\u89c6\u9891\u6807\u8bc6",type:cc.Node})],t.prototype,"remoteAd",void 0),i([b({displayName:"\u4fdd\u5b58\u89c6\u9891\u6807\u8bc6",type:cc.Node})],t.prototype,"saveAd",void 0),i([b({displayName:"\u8fdc\u7aef\u65f6\u95f4\u8282\u70b9",type:cc.Node})],t.prototype,"remoteTimeNode",void 0),i([b({displayName:"\u8fdc\u7aef\u8fdb\u5ea6\u8282\u70b9",type:cc.Node})],t.prototype,"remoteProNode",void 0),i([b({displayName:"\u5237\u65b0\u6216\u8005\u8bfb\u53d6",type:cc.Label})],t.prototype,"refreshOrReadLab",void 0),i([b({displayName:"\u8bfb\u53d6\u4e91\u7aef\u5931\u8d25\u63d0\u793a",type:cc.Label})],t.prototype,"errTip",void 0),i([g],t)}(cc.Component);e.pzaSaveView=v,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask","./pzaWarningView":"pzaWarningView"}],pzaScaredyShroom:[function(a,t,e){"use strict";cc._RF.push(t,"5b53daDLMZBKa9zrcCsOB5E","pzaScaredyShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaScaredyShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpineController"),c=a("../Bullet/pzaBaseBullet"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.shootNode=null,t.bulletPrefab=null,t.hiding=!1,t.attacking=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.hiding=!1,u.pzaGameState.isZombieMode())return this.attacking=!1,this.sleepAni.node.active=!1,void this.animation.playAnimation("T_idle",!0);t.plantData.sleeping?(this.animation.playAnimation("idle",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.playNormalAni()),u.pzaGameState.useShroom=!0},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData&&!this.baseData.plantData.sleeping&&!this.attacking&&u.pzaGameState.isZombieMode()){var o=window.pzazombieManager.findZombiesByXY(this.baseData.xIndex,this.baseData.yIndex);if(null!=o&&o.length>0)return void(this.hiding||(this.attacking=!0,this.animation.playAnimation("T_scared1",!1,function(){e.hiding=!0,e.attacking=!1,e.animation.playAnimation("T_scared_idle",!0)})));if(this.hiding)return this.attacking=!0,void this.animation.playAnimation("T_scared2",!1,function(){e.hiding=!1,e.attacking=!1,e.animation.playAnimation("T_idle",!0)});if(window.pzazombieManager.hasCanAttackZombie(this.baseData))return l.pzaSoundManager.playAudio("ScaredyShroomAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot()})}},t.prototype.wakeUp=function(){a.prototype.wakeUp.call(this),null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.letPlantSleep=function(){!this.sleepAni.node.active&&this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=window.pzazombieManager.findFixRangeZombies(a.baseData.logicPos,1.5*u.pzaGameState.map.getBlockWidth());if(!(null!=e&&e.length>0))return a.hiding?(a.hiding=!1,void a.animation.playAnimation("scared2",!1,t)):window.pzazombieManager.hasCanAttackZombie(a.baseData)?(l.pzaSoundManager.playAudio("ScaredyShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){a.shoot()})):void a.animation.playAnimation("idle",!1,t);a.hiding?a.animation.playAnimation("scared_idle",!1,t):(a.hiding=!0,a.animation.playAnimation("scared1",!1,t))};t()},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0));var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([f({displayName:"\u7761\u89c9\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"sleepAni",void 0),i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaScaredyShroom=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaScreenDoorZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"3a9979RtSpAr49cg+vRqu1X","pzaScreenDoorZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaScreenDoorZombie2=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaZombieEnum"),l=a("../Plant/pzaAttackType"),s=a("./pzaScreenDoorZombie"),c=a("./pzaZombieSlot"),u=a("./pzaZombieState"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName=null,t.equip2Slot=c.pzaZombieSlotType.hat,t.hatSlotMap=new Map([[p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2,{slotName:c.pzaZombieSlotType.hat,attNameArr:[c.pzaZombieSlotType.hat+"1",c.pzaZombieSlotType.hat+"2",c.pzaZombieSlotType.hat+"3"],arr1:[97.8,-21.71,-90.94],arr2:[80.81,-21.42,-90.94],arr3:[67.81,-21.21,-90.94]}],[p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3,{slotName:c.pzaZombieSlotType.hat,attNameArr:[c.pzaZombieSlotType.hat_iron+"1",c.pzaZombieSlotType.hat_iron+"2",c.pzaZombieSlotType.hat_iron+"3"],arr1:[137.3,-22.36,-90.94],arr2:[135.3,-22.32,-90.94],arr3:[131.2,-28.26,-90.94]}]]),t.headSlotMap=new Map([[p.pzaZombieEnum.SCREEN_DOOR_NUT,{slotName:c.pzaZombieSlotType.head_nut,attNameArr:[c.pzaZombieSlotType.head_nut+"1",c.pzaZombieSlotType.head_nut+"2",c.pzaZombieSlotType.head_nut+"3"],arr1:[198,2.55,-90],arr2:[197.5,2.55,-90],arr3:[197.5,2.55,-90]}],[p.pzaZombieEnum.SCREEN_DOOR_HOLE,{slotName:c.pzaZombieSlotType.head_nut,attNameArr:[c.pzaZombieSlotType.head_nut_hole+"1",c.pzaZombieSlotType.head_nut_hole+"2",c.pzaZombieSlotType.head_nut_hole+"3"],arr1:[198,2.55,-90],arr2:[197.5,2.55,-90],arr3:[197.5,2.55,-90]}]]),t.directThrowHurt=!0,t}return n(t,a),t.prototype.initEquips=function(){if(this.baseData&&this.baseData.zombieData){var a=this.hatSlotMap.get(this.baseData.zombieData.zombieType);a?this.equip2Slot=c.pzaZombieSlotType.hat:(a=this.headSlotMap.get(this.baseData.zombieData.zombieType),this.equip2Slot=c.pzaZombieSlotType.head_nut),this.slotMap=new Map([[c.pzaZombieSlotType.butter,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.butter).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[c.pzaZombieSlotType.door,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.door).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.door+"1",-101.27,-30.17)).addState(new c.pzaZombieSlotAtt(2,c.pzaZombieSlotType.door+"2",-101.27,-30.17)).addState(new c.pzaZombieSlotAtt(3,c.pzaZombieSlotType.door+"3",-101.77,-30.17))]]),this.slotMap.set(a.slotName,new c.pzaZombieSlot(this.animation.spineAnimation,a.slotName).addState(new c.pzaZombieSlotAtt(1,a.attNameArr[0],a.arr1[0],a.arr1[1],a.arr1[2])).addState(new c.pzaZombieSlotAtt(2,a.attNameArr[1],a.arr2[0],a.arr2[1],a.arr2[2])).addState(new c.pzaZombieSlotAtt(3,a.attNameArr[2],a.arr3[0],a.arr3[1],a.arr3[2])))}},t.prototype.bindData=function(t){this.baseData=t,this.initEquips(),a.prototype.bindData.call(this,t),this.baseData.zombieData.hurtCate=p.pzaZombieHurtCate.PENETRATE_HURT,this.zombieState=u.pzaZombieState.STAY},t.prototype.randomZombieSkin=function(){this.equip2Slot===c.pzaZombieSlotType.head_nut?(this.curSkinName="6zombie_head1",this.changeSkin(this.curSkinName)):a.prototype.randomZombieSkin.call(this)},t.prototype.handBookPreview=function(t){a.prototype.handBookPreview.call(this,t),this.equipIntact(),this.equipIntact2(),this.playStayAnimation()},t.prototype.zombieHurtSound=function(t){this.hasEquip&&t!=l.pzaAttackType.PENETRATE?r.pzaSoundManager.playAudio("screenHurt"):a.prototype.zombieHurtSound.call(this,t)},i([h],t)}(s.pzaScreenDoorZombie));e.pzaScreenDoorZombie2=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","./pzaScreenDoorZombie":"pzaScreenDoorZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaScreenDoorZombie:[function(a,t,e){"use strict";cc._RF.push(t,"380c7Jm5iRIh58Mj/TsP22t","pzaScreenDoorZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaScreenDoorZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("../Plant/pzaAttackType"),c=a("./pzaNormalZombie"),u=a("./pzaZombieSlot"),d=a("./pzaZombieState"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="zombie_head_1",t.equip1Slot=u.pzaZombieSlotType.door,t.directThrowHurt=!0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,67.87,-1.82,-90.94))],[u.pzaZombieSlotType.door,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.door).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.door+"1",.4,-11.81)).addState(new u.pzaZombieSlotAtt(2,u.pzaZombieSlotType.door+"2",.4,-11.81)).addState(new u.pzaZombieSlotAtt(3,u.pzaZombieSlotType.door+"3",.4,-12.81))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_ICE_PEA,-1)),this.baseData.zombieData.hurtCate=l.pzaZombieHurtCate.PENETRATE_HURT},t.prototype.equipDeath=function(){switch(a.prototype.equipDeath.call(this,!1),this.zombieState){case d.pzaZombieState.STAY:this.playStayAnimation();break;case d.pzaZombieState.MOVE:this.playMoveAnimation();break;case d.pzaZombieState.EAT_ATK:var t=this.findTarget();null==t||t.isDead?this.playMoveAnimation():this.playAttakAnimation()}this.baseData.buffData.removeBuff(p.pzaBuffType.IMM_ICE_PEA)},t.prototype.zombieHurtSound=function(t){this.hasEquip&&t!=s.pzaAttackType.PENETRATE?r.pzaSoundManager.playAudio("screenHurt"):a.prototype.zombieHurtSound.call(this,t)},i([m],t)}(c.pzaNormalZombie));e.pzaScreenDoorZombie=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaSeaFumeShroom:[function(a,t,e){"use strict";cc._RF.push(t,"ad1493L2DJJLIysZPR5z8LI","pzaSeaFumeShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSeaFumeShroom=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../pzaEffectManager"),s=a("./pzaFumeShroom"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.baseData.plantData.canBeShoot=!1},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=window.pzazombieManager.getCanAttackZombies(a.baseData,4,!0);if(e&&e.length>0)return r.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(null!=a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x+a.shootNode.x,a.baseData.logicPos.y+a.shootNode.y);l.pzaEffectManager.createFumeShroomEffect(a.baseData.yIndex,t,null),a.hurtZombies(e)}});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};this.animation.playAnimation("idle1",!1,t)},i([u],t)}(s.pzaFumeShroom));e.pzaSeaFumeShroom=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaEffectManager":"pzaEffectManager","./pzaFumeShroom":"pzaFumeShroom"}],pzaSeaPeashooter:[function(a,t,e){"use strict";cc._RF.push(t,"54f5flzZaVGAJ3gJbZ0hsjQ","pzaSeaPeashooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSeaPeashooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaPeashooter"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.originAng=20,t.bulletCnt=3,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),d.pzaGameState.usePeaPlant=!0,this.baseData.plantData.canBeShoot=!1},t.prototype.playIdleAni=function(){var a=this,t=function(){window.pzazombieManager.hasCanAttackZombie(a.baseData)||a.findAttackTarget()?a.animation.playAnimation("attack",!1,t,function(){l.pzaSoundManager.playAudio("PeashooterAtk"),a.shoot()}):a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};t()},t.prototype.shoot=function(){for(var a=this.originAng/(this.bulletCnt-1),t=-this.originAng/2,e=p.pzaNodeManager.getBulletNode(),o=0;o<this.bulletCnt;o++){var n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null==n)return;n.setParent(e);var i=this.shootNode.convertToWorldSpaceAR(cc.v2()),l=e.convertToNodeSpaceAR(i);n.setPosition(l);var s=t+o*a,u=cc.misc.degreesToRadians(s),d=cc.v2(Math.cos(u),Math.sin(u)),h=n.getComponent(c.pzaBaseBullet);if(null==h)return;h.init(-1,this.baseData.atk,1,null,d)}},t.prototype.findAttackTarget=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},i([f],t)}(h.pzaPeashooter));e.pzaSeaPeashooter=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaPeashooter":"pzaPeashooter"}],pzaSeaShroom:[function(a,t,e){"use strict";cc._RF.push(t,"5796ctByRNPe78i2kmko1Pi","pzaSeaShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSeaShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpineController"),c=a("../../Common/pzaUtil"),u=a("../Bullet/pzaBaseBullet"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()),d.pzaGameState.useShroom=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.baseData.plantData.sleeping=!1,this.sleepAni.node.active=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.playNormalAni=function(){var a=this,t=function(){if(window.pzazombieManager.hasCanAttackZombie(a.baseData,3))return l.pzaSoundManager.playAudio("SeaShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){a.shoot()});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};t()},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(u.pzaBaseBullet);null!=n&&n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0))}}}},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([z({displayName:"\u7761\u89c9\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"sleepAni",void 0),i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaSeaShroom=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaShadowEffect:[function(a,t,e){"use strict";cc._RF.push(t,"5a5631Pu8pMi7fB/Bp6K4iY","pzaShadowEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShadowEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shadowSp=null,t.poolPrefab=null,t}return n(t,a),t.prototype.init=function(t,e,o){void 0===e&&(e=cc.v2(0,30)),void 0===o&&(o=1),a.prototype.bindData.call(this,t),this.shadowSp.stopAllActions(),null!=e&&this.shadowSp.setPosition(e),this.shadowSp.scale=o,this.showShadow(),this.updatePos()},t.prototype.update=function(){null!=this.baseData&&(this.baseData.isDead||this.baseData.hp<=0?this.close():this.updatePos())},t.prototype.pauseSelf=function(){this.shadowSp.pauseAllActions()},t.prototype.resumeSelf=function(){this.shadowSp.resumeAllActions()},t.prototype.updatePos=function(){null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.followMove=function(a){a&&this.node&&this.node.setPosition(a)},t.prototype.hideShadow=function(){this.shadowSp.active=!1},t.prototype.showShadow=function(){this.shadowSp&&(this.shadowSp.active=!0)},t.prototype.scaleShadow=function(a,t){this.shadowSp.runAction(cc.scaleTo(a,t))},t.prototype.changeOffset=function(a){void 0===a&&(a=cc.v2(0,30)),null!=a&&this.shadowSp.setPosition(a)},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([c({displayName:"\u5f71\u5b50\u56fe",type:cc.Node})],t.prototype,"shadowSp",void 0),i([c(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaShadowEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaShareGiftConfig:[function(a,t,e){"use strict";cc._RF.push(t,"10176WQUUxB6YSqxxOpgxH0","pzaShareGiftConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShareGiftConfig=void 0;var o=a("./pzaGamePropConfig"),n=function(){function a(a,t,e){this.index=0,this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.index=a,this.rewardType=t,this.rewardCount=e}return a.initGiftConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=parseInt(t.iD),n=new a(o,parseInt(t.rewardType),parseInt(t.rewardValue));e.ShareGiftConfigMap.set(o,n)}})},a.act="share_gift",a.ShareGiftConfigMap=new Map,a}();e.pzaShareGiftConfig=n,cc._RF.pop()},{"./pzaGamePropConfig":"pzaGamePropConfig"}],pzaShareGiftJar:[function(a,t,e){"use strict";cc._RF.push(t,"6ad9fmS+35NobPzmEvJo8an","pzaShareGiftJar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShareGiftJar=void 0;var r=a("../Common/pzaLocalData"),p=a("../Common/pzaSpriteFrameManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jar=null,t.jarFrames=[],t.headIcon=null,t.canBang=!1,t.curAvatarUrl=null,t}return n(t,a),t.prototype.init=function(a,t,e){var o=this;this.curAvatarUrl=e,null==e||""==e?null!=t?p.pzaSpriteFrameManager.showDefaultHead(this.headIcon):this.headIcon.spriteFrame=null:(this.headIcon.spriteFrame=null,p.pzaSpriteFrameManager.showPlayerHeadImage(e,function(a,t){o.curAvatarUrl==a&&(o.headIcon.spriteFrame=t)}));var n=null!=r.pzaLocalData.data.shareGiftRecIndex[a];this.jar.spriteFrame=n?this.jarFrames[1]:this.jarFrames[0],this.canBang=!n},t.prototype.bang=function(){this.jar.spriteFrame=this.jarFrames[1],this.canBang=!1},i([c({displayName:"\u7f50\u5b50",type:cc.Sprite})],t.prototype,"jar",void 0),i([c({displayName:"\u7f50\u5b50\u56fe",type:[cc.SpriteFrame]})],t.prototype,"jarFrames",void 0),i([c({displayName:"\u5934\u50cf",type:cc.Sprite})],t.prototype,"headIcon",void 0),i([s],t)}(cc.Component);e.pzaShareGiftJar=u,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaShareGiftView:[function(a,t,e){"use strict";cc._RF.push(t,"63728q69AlKXoxl35G3xnhW","pzaShareGiftView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShareGiftView=void 0;var r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaGamePropConfig"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaRewardManager"),d=a("../Common/pzaShareGiftConfig"),h=a("../Common/pzaStatisticsMgr"),m=a("../Common/pzaSoundManager"),f=a("../Common/pzaUtil"),z=a("../utils/pzaChannel"),y=a("./pzaCommonMask"),g=a("./pzaShareGiftJar"),b=a("./pzaShareRewardItem"),v=a("../Common/pzaUIManager"),P=a("../Load/pzaPreLoadManager"),D=a("./pzaCommonRewardView"),S=cc._decorator,C=S.ccclass,_=S.property,E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.rewardItems=[],t.jars=[],t.proBar=null,t.finalRewardNoRec=null,t.finalRewardRec=null,t.shareTag=null,t.hammerTag=null,t.shareTxt=null,t.hammerShowNode=null,t.hammer=null,t.hammerTip=null,t.leftArrow=null,t.rightArrow=null,t.shareBtn=null,t.videoBtn=null,t.shareBG=null,t.videoBG=null,t.shareSF=null,t.videoSF=null,t.showBangJar=!1,t.finishCount=0,t}return n(t,a),t.prototype.onEnable=function(){if(this.videoBtn.active=!1,this.videoBG.active=c.pzaLocalData.isNoShareAct,this.shareBG.active=!c.pzaLocalData.isNoShareAct,this.videoSF.active=c.pzaLocalData.isNoShareAct,this.shareSF.active=!c.pzaLocalData.isNoShareAct,c.pzaLocalData.isNoShareAct&&(this.jars.forEach(function(a){a.node.getChildByName("head_mask").active=!1,a.node.getChildByName("share_head_board").active=!1}),this.proBar.node.parent.active=!1,this.finalRewardNoRec=this.videoSF.getChildByName("final_reward_txt"),this.finalRewardRec=this.videoSF.getChildByName("rec_node")),c.pzaLocalData.data.shareGiftRecIndex.indexOf(3)>=0){if(!c.pzaLocalData.data.shareBoomNutPop){var a=new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_PLANTE,52);v.pzaUIManager.baseShowPopUI(P.pzaResourceUrl.COMMON_REWARD_VIEW,function(t){var e=t&&t.getComponent(D.pzaCommonRewardView);e&&e.bindData([a],null)}),c.pzaLocalData.data.shareBoomNutPop=!0,c.pzaLocalData.addDirty("shareBoomNutPop")}}else c.pzaLocalData.data.shareBoomNutPop=!0,c.pzaLocalData.addDirty("shareBoomNutPop");h.pzaStatisticsMgr.sendEvent("System",{name:"system",value:6}),this.hammerShowNode.on(cc.Node.EventType.TOUCH_START,this.touchHammer,this),this.hammerShowNode.on(cc.Node.EventType.TOUCH_MOVE,this.moveHammer,this),this.hammerShowNode.on(cc.Node.EventType.TOUCH_CANCEL,this.endHammer,this),this.hammerShowNode.on(cc.Node.EventType.TOUCH_END,this.endHammer,this)},t.prototype.onDisable=function(){this.hammerShowNode.off(cc.Node.EventType.TOUCH_START,this.touchHammer,this),this.hammerShowNode.off(cc.Node.EventType.TOUCH_MOVE,this.moveHammer,this),this.hammerShowNode.off(cc.Node.EventType.TOUCH_CANCEL,this.endHammer,this),this.hammerShowNode.off(cc.Node.EventType.TOUCH_END,this.endHammer,this)},t.prototype.init=function(a){for(var t=1;t<=5;t++){var e=this.rewardItems[t-1];e&&e.init(t)}this.finishCount=a?a.length:0;var o=0;for(this.finishCount>0&&(o=this.finishCount>=5?-1:-(.1+.2*(this.finishCount-1))),this.proBar.fillRange=o,t=0;t<5;t++){var n=this.jars[t];if(null!=n){var i=a&&a[t]&&a[t].avatar,r=a&&a[t]&&a[t].nickName;n.init(t,r,i)}}this.refreshBtn(),this.hammerShowNode.active=!1},t.prototype.clcikShare=function(){if(m.pzaSoundManager.playSFX(),this.showBangJar||c.pzaLocalData.data.showBangJar)return this.hammerShowNode.active=!0,this.hammerTip.active=!0,this.hammer.angle=0,this.hammer.setPosition(cc.v2(44,-49)),void this.showArrowAni();z.pzaChannel.instance().shareAppMessage({title:"",act:d.pzaShareGiftConfig.act,adsid:"101"})},t.prototype.clickClose=function(){m.pzaSoundManager.playSFX(),l.pzaGameCommonPool.returnInstant(this.node)},t.prototype.touchHammer=function(a){this.hammerTip.active=!1,this.updateHammerPos(a,!1)},t.prototype.moveHammer=function(a){this.updateHammerPos(a,!1)},t.prototype.endHammer=function(a){this.updateHammerPos(a,!0)},t.prototype.updateHammerPos=function(a,t){var e=a&&a.getLocation(),o=this.hammerShowNode.convertToNodeSpaceAR(e),n=cc.misc.clampf(o.x+69,-261,480);this.hammer.setPosition(cc.v2(n,-49)),t&&this.bangJar(n)},t.prototype.showArrowAni=function(){cc.Tween.stopAllByTarget(this.leftArrow),cc.Tween.stopAllByTarget(this.rightArrow),this.leftArrow.scaleX=-.5,cc.tween(this.leftArrow).repeatForever(cc.tween().to(1,{scaleX:-1}).to(1,{scaleX:-.5})).start(),this.rightArrow.scaleX=.5,cc.tween(this.rightArrow).repeatForever(cc.tween().to(1,{scaleX:1}).to(1,{scaleX:.5})).start()},t.prototype.bangJar=function(a){var t=this,e=cc.misc.clampf(Math.floor((549-a)/170),0,4),o=this.jars[e];if(null==o||!o.canBang)return this.hammerShowNode.active=!0,this.hammerTip.active=!0,this.hammer.angle=0,this.hammer.setPosition(cc.v2(44,-49)),void this.showArrowAni();y.pzaCommonMask.showMask(),this.hammer.stopAllActions(),this.hammer.runAction(cc.sequence(cc.rotateTo(.2,20),cc.rotateTo(.1,-30),cc.callFunc(function(){t.hammerShowNode.active=!1,o.bang(),t.recieveReward(e),t.refreshBtn(),y.pzaCommonMask.hideMask()})))},t.prototype.recieveReward=function(a){var t=[];d.pzaShareGiftConfig.ShareGiftConfigMap.forEach(function(a,e){c.pzaLocalData.data.shareGiftRecIndex.includes(e)||t.push(a)});var e=f.pzaUtil.getRandomValueFromArray(t);if(null!=e){c.pzaLocalData.data.showBangJar=!1,c.pzaLocalData.data.shareGiftRecIndex[a]=e.index,c.pzaLocalData.addDirty("shareGiftRecIndex","showBangJar");for(var o=!0,n=0;n<5;n++)if(null==c.pzaLocalData.data.shareGiftRecIndex[n]){o=!1;break}if(o){var i=new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_PLANTE,p.pzaPlantEnum.TWIN_SUNFLOWER);u.pzaRewardManager.recieveRewardData([i]),r.default.instance().obtainPlant()}var l=new s.pzaRewardPropData(e.rewardType,e.rewardCount);u.pzaRewardManager.recieveRewards([l],function(){if(o){var a=new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_PLANTE,p.pzaPlantEnum.TWIN_SUNFLOWER);u.pzaRewardManager.recieveRewards([a],null,!0)}});var h=this.rewardItems[e.index-1];h&&h.recieve()}},t.prototype.refreshBtn=function(){this.showBangJar=!1;for(var a=!1,t=0,e=0;e<5;e++)null==c.pzaLocalData.data.shareGiftRecIndex[e]?a=!0:t++;if(!a)return this.finalRewardNoRec.active=!1,this.finalRewardRec.active=!0,this.shareBtn.active=!1,void(c.pzaLocalData.isNoShareAct&&(this.videoBtn.active=!1,this.hammer.active=!1));this.finalRewardNoRec.active=!0,this.finalRewardRec.active=!1,this.shareBtn.active=!0,this.showBangJar=this.finishCount>t,this.showBangJar?(this.shareTag.active=!1,this.hammerTag.active=!0,this.shareTxt.string="\u7838\u91d1\u7f50"):(this.shareTag.active=!0,this.hammerTag.active=!1,this.shareTxt.string="\u5206\u4eab"),c.pzaLocalData.isNoShareAct&&(c.pzaLocalData.data.showBangJar?(this.shareTag.active=!1,this.videoBtn.active=!1,this.hammerTag.active=!0,this.shareTxt.string="\u7838\u91d1\u7f50"):(this.shareTag.active=!1,this.videoBtn.active=!0))},t.prototype.clickVideoBtn=function(){var a=this;z.pzaChannel.instance().showVideo({sucCall:function(){var t={nickName:"user"+Date.now(),avatar:""};c.pzaLocalData.data.showBangJar=!0,c.pzaLocalData.data.shareGiftArray.push(t),c.pzaLocalData.addDirty("shareGiftArray","showBangJar"),a.init(c.pzaLocalData.data.shareGiftArray),a.hammer.active=!0},failCall:function(){},endCall:function(){},posName:"\u7838\u7f50\u6709\u793c",adsid:"34"})},i([_({displayName:"\u5956\u52b1items",type:[b.pzaShareRewardItem]})],t.prototype,"rewardItems",void 0),i([_({displayName:"\u5956\u52b1\u7f50\u5b50",type:[g.pzaShareGiftJar]})],t.prototype,"jars",void 0),i([_({displayName:"\u8fdb\u5ea6\u6761",type:cc.Sprite})],t.prototype,"proBar",void 0),i([_({displayName:"\u6700\u7ec8\u5956\u52b1\u672a\u9886\u53d6",type:cc.Node})],t.prototype,"finalRewardNoRec",void 0),i([_({displayName:"\u6700\u7ec8\u5956\u52b1\u5df2\u9886\u53d6",type:cc.Node})],t.prototype,"finalRewardRec",void 0),i([_({displayName:"\u5206\u4eab\u6309\u94ae\u56fe",type:cc.Node})],t.prototype,"shareTag",void 0),i([_({displayName:"\u9524\u5b50\u6309\u94ae\u56fe",type:cc.Node})],t.prototype,"hammerTag",void 0),i([_({displayName:"\u5206\u4eab\u6309\u94ae\u6587\u5b57",type:cc.Label})],t.prototype,"shareTxt",void 0),i([_({displayName:"\u9524\u5b50\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"hammerShowNode",void 0),i([_({displayName:"\u9524\u5b50",type:cc.Node})],t.prototype,"hammer",void 0),i([_({displayName:"\u9524\u5b50\u63d0\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"hammerTip",void 0),i([_({displayName:"\u7bad\u5934\u5de6",type:cc.Node})],t.prototype,"leftArrow",void 0),i([_({displayName:"\u7bad\u5934\u53f3",type:cc.Node})],t.prototype,"rightArrow",void 0),i([_({displayName:"\u5206\u4eab\u6309\u94ae",type:cc.Node})],t.prototype,"shareBtn",void 0),i([_({displayName:"\u89c6\u9891\u6309\u94ae",type:cc.Node})],t.prototype,"videoBtn",void 0),i([_({displayName:"\u5206\u4eab\u80cc\u666f",type:cc.Node})],t.prototype,"shareBG",void 0),i([_({displayName:"\u89c6\u9891\u80cc\u666f",type:cc.Node})],t.prototype,"videoBG",void 0),i([_({displayName:"\u5206\u4eab\u5411\u65e5\u8475",type:cc.Node})],t.prototype,"shareSF",void 0),i([_({displayName:"\u89c6\u9891\u5411\u65e5\u8475",type:cc.Node})],t.prototype,"videoSF",void 0),i([C],t)}(cc.Component);e.pzaShareGiftView=E,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaCommonRewardView":"pzaCommonRewardView","./pzaShareGiftJar":"pzaShareGiftJar","./pzaShareRewardItem":"pzaShareRewardItem"}],pzaShareRewardItem:[function(a,t,e){"use strict";cc._RF.push(t,"eb89604ollH6a3w00CzIq9A","pzaShareRewardItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShareRewardItem=void 0;var r=a("../Common/pzaGameConfig"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaShareGiftConfig"),c=a("../Common/pzaSpineController"),u=a("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.recedNode=null,t.coinIcon=null,t.coinFrames=[],t.propAni=null,t.propName=null,t.propCount=null,t}return n(t,a),t.prototype.init=function(a){this.recedNode.active=l.pzaLocalData.data.shareGiftRecIndex.includes(a),this.propCount.node.active=!1;var t=s.pzaShareGiftConfig.ShareGiftConfigMap.get(a);if(null!=t)switch(t.rewardType){case p.pzaGamePropEnum.PROP_COIN:this.propAni&&(this.propAni.node.active=!1),this.propName.string=""+t.rewardCount,this.coinIcon.node.active=!0;var e=t.rewardCount>=5e3?1:0;this.coinIcon.spriteFrame=this.coinFrames[e];break;case p.pzaGamePropEnum.PROP_CHERRY_BOMB:case p.pzaGamePropEnum.PROP_AUTO_PICK:case p.pzaGamePropEnum.PROP_FREE_SUN:this.coinIcon.node.active=!1,this.propCount.node.active=!0,this.propCount.string="x"+t.rewardCount,this.propAni&&(this.propAni.node.active=!0,t.rewardType==p.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAni.playAnimation("3ui_1",!0):t.rewardType==p.pzaGamePropEnum.PROP_AUTO_PICK?this.propAni.playAnimation("2ui_1",!0):t.rewardType==p.pzaGamePropEnum.PROP_FREE_SUN&&this.propAni.playAnimation("1ui_1",!0));var o=p.pzaGamePropConfig.PorpConfigMap.get(t.rewardType);null!=o&&(this.propName.string=""+o.propName);break;case p.pzaGamePropEnum.PROP_PLANTE:var n;(n=r.pzaGameConfig.getPlantConfig(t.rewardCount))&&(this.propName.string=""+n.name,this.propAni&&(this.propAni.node.active=!1),this.coinIcon.node.active=!0,u.pzaSpriteFrameManager.loadPlantCard(t.rewardCount,this.coinIcon))}},t.prototype.recieve=function(){this.recedNode.active=!0},i([m({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],t.prototype,"recedNode",void 0),i([m({displayName:"\u91d1\u5e01\u56fe\u6807",type:cc.Sprite})],t.prototype,"coinIcon",void 0),i([m({displayName:"\u91d1\u5e01\u56fe",type:[cc.SpriteFrame]})],t.prototype,"coinFrames",void 0),i([m({displayName:"\u9053\u5177\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"propAni",void 0),i([m({displayName:"\u9053\u5177\u540d\u79f0",type:cc.Label})],t.prototype,"propName",void 0),i([m({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],t.prototype,"propCount",void 0),i([h],t)}(cc.Component);e.pzaShareRewardItem=f,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaSharkZombie:[function(a,t,e){"use strict";cc._RF.push(t,"310fc6dPRxNCYPRzy6YiRco","pzaSharkZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSharkZombie=void 0;var r=a("./pzaZombieSlot"),p=a("../Data/pzaZombieEnum"),l=a("./pzaSnorkelZombie"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="biaoqing2",t.equip1Slot=r.pzaZombieSlotType.helmet_black,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[r.pzaZombieSlotType.butter,new r.pzaZombieSlot(this.animation.spineAnimation,r.pzaZombieSlotType.butter).addState(new r.pzaZombieSlotAtt(1,r.pzaZombieSlotType.butter,-19.69,85.77))],[r.pzaZombieSlotType.helmet_black,new r.pzaZombieSlot(this.animation.spineAnimation,r.pzaZombieSlotType.helmet_black).addState(new r.pzaZombieSlotAtt(1,this.equip1Slot+"1",0,0)).addState(new r.pzaZombieSlotAtt(2,this.equip1Slot+"2",.01,6.97)).addState(new r.pzaZombieSlotAtt(3,this.equip1Slot+"3",-4.99,8.51))]])},t.prototype.zombieHurt=function(){this.zombieHurtState=p.pzaHurtStateEnum.HURT,"biaoqing1"==this.curSkinName&&(this.curSkinName="biaoqing1_1"),"biaoqing2"==this.curSkinName&&(this.curSkinName="biaoqing2_1"),this.changeSkin(this.curSkinName)},i([c],t)}(l.pzaSnorkelZombie));e.pzaSharkZombie=u,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","./pzaSnorkelZombie":"pzaSnorkelZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaShiftNut:[function(a,t,e){"use strict";cc._RF.push(t,"3ba8bI4lGVJ0Ii191ECjQ14","pzaShiftNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShiftNut=void 0;var r=a("../../utils/pzakc"),p=a("../Data/pzaPlantEnum"),l=a("../pzaEffectManager"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.nutArr=[p.pzaPlantEnum.ICE_NUT,p.pzaPlantEnum.MelonNut,p.pzaPlantEnum.VipNut,p.pzaPlantEnum.FireNut,p.pzaPlantEnum.HoleNut,p.pzaPlantEnum.MagnetNut,p.pzaPlantEnum.ZombieNut,p.pzaPlantEnum.TorchNut,p.pzaPlantEnum.SquashNut],t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,this.animation.playAnimation("idle",!1,function(){e.baseData.hp<=0||e.animation.playAnimation("zhuan",!1,function(){e.baseData.hp<=0||(l.pzaEffectManager.createImitaterEffect(cc.v2(e.baseData.logicPos.x,e.baseData.logicPos.y-25)),e.startShift())})})},t.prototype.startShift=function(){var a=""+this.baseData.xIndex+this.baseData.yIndex,t=window.pzaplantManager.plantDataMap.get(a);t.isDead=!0,window.pzaplantManager.plantMap.delete(t),window.pzaplantManager.plantDataMap.delete(a),this.close();var e=r.default.randomChoose(this.nutArr,1)[0];window.pzaplantManager.createPlant(e,this.baseData.xIndex,this.baseData.yIndex,!0)},i([u],t)}(s.pzaBasePlant));e.pzaShiftNut=d,cc._RF.pop()},{"../../utils/pzakc":"pzakc","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","./pzaBasePlant":"pzaBasePlant"}],pzaShopConfig:[function(a,t,e){"use strict";cc._RF.push(t,"d2b36zP1kZHN4M7r1NAkwvE","pzaShopConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShopConfig=e.pzaShopItemType=void 0;var o,n=a("../Battle/Data/pzaPlantEnum");(function(a){a[a.CARD_SLOT_7=1]="CARD_SLOT_7",a[a.CARD_SLOT_8=2]="CARD_SLOT_8",a[a.CARD_SLOT_9=3]="CARD_SLOT_9",a[a.POOL_CLEAN_CAR=4]="POOL_CLEAN_CAR",a[a.PITCHFORK=5]="PITCHFORK",a[a.ROOF_CART=6]="ROOF_CART",a[a.GATLING_PEA=7]="GATLING_PEA",a[a.TWIN_SUNFLOWER=8]="TWIN_SUNFLOWER",a[a.GLOOM_SHROOM=9]="GLOOM_SHROOM",a[a.CATTAIL=10]="CATTAIL",a[a.SPIKEROCK=11]="SPIKEROCK",a[a.GOLD_MAGNET=12]="GOLD_MAGNET",a[a.WINTER_MELON=13]="WINTER_MELON",a[a.COB_CANNON=14]="COB_CANNON",a[a.IMITATER=15]="IMITATER",a[a.NUT_HEALING=16]="NUT_HEALING",a[a.MARIGOLD_FLOWERPOT=17]="MARIGOLD_FLOWERPOT",a[a.GOLD_KETTLE=18]="GOLD_KETTLE",a[a.PESTICIDE=19]="PESTICIDE",a[a.JUKEBOX=21]="JUKEBOX",a[a.GLOVE=22]="GLOVE",a[a.SHROOM_GARDEN=23]="SHROOM_GARDEN",a[a.AQUARIUM=24]="AQUARIUM",a[a.WHEELBARROW=25]="WHEELBARROW",a[a.SNAIL=26]="SNAIL",a[a.FLOWER_SEED=28]="FLOWER_SEED",a[a.BRONZE_FLOWER_SEED=29]="BRONZE_FLOWER_SEED",a[a.SILVER_FLOWER_SEED=30]="SILVER_FLOWER_SEED",a[a.GOLD_FLOWER_SEED=31]="GOLD_FLOWER_SEED",a[a.BELT_SLOT1=32]="BELT_SLOT1",a[a.BELT_SLOT2=33]="BELT_SLOT2",a[a.BELT_SLOT3=34]="BELT_SLOT3",a[a.BELT_SLOT4=35]="BELT_SLOT4",a[a.BLACK_KNIGHT_BELT=36]="BLACK_KNIGHT_BELT",a[a.WITCH_KNIGHT_BELT=37]="WITCH_KNIGHT_BELT",a[a.DAVE_COIN=1e3]="DAVE_COIN"})(o=e.pzaShopItemType||(e.pzaShopItemType={}));var i=function(){function a(a,t,e,o,n){this.itemType=null,this.price=0,this.desc=null,this.unlockChapter=0,this.unlockPart=0,this.itemType=a,this.price=t,this.desc=e,this.unlockChapter=o,this.unlockPart=n}return a.initShopConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=parseInt(t.id),n=parseInt(t.gold),i=t.desc,r=t.new,p=0,l=0;if(null!=r){var s=r.split("-");p=parseInt(s[0]),l=parseInt(s[1])}var c=new a(o,n,i,p,l);e.SHOP_CONFIG.set(o,c)}})},a.getPlantTypeByItem=function(a){switch(a){case o.GATLING_PEA:return n.pzaPlantEnum.GATLING_PEA;case o.TWIN_SUNFLOWER:return n.pzaPlantEnum.TWIN_SUNFLOWER;case o.GLOOM_SHROOM:return n.pzaPlantEnum.GLOOM_SHROOM;case o.CATTAIL:return n.pzaPlantEnum.CATTAIL;case o.SPIKEROCK:return n.pzaPlantEnum.SPIKEROCK;case o.GOLD_MAGNET:return n.pzaPlantEnum.GOLD_MAGNET;case o.WINTER_MELON:return n.pzaPlantEnum.WINTER_MELON;case o.COB_CANNON:return n.pzaPlantEnum.COB_CANNON;case o.IMITATER:return n.pzaPlantEnum.IMITATER}return null},a.getPlantPrice=function(a){var t=null;switch(a){case n.pzaPlantEnum.GATLING_PEA:t=o.GATLING_PEA;break;case n.pzaPlantEnum.TWIN_SUNFLOWER:t=o.TWIN_SUNFLOWER;break;case n.pzaPlantEnum.GLOOM_SHROOM:t=o.GLOOM_SHROOM;break;case n.pzaPlantEnum.CATTAIL:t=o.CATTAIL;break;case n.pzaPlantEnum.WINTER_MELON:t=o.WINTER_MELON;break;case n.pzaPlantEnum.GOLD_MAGNET:t=o.GOLD_MAGNET;break;case n.pzaPlantEnum.SPIKEROCK:t=o.SPIKEROCK;break;case n.pzaPlantEnum.COB_CANNON:t=o.COB_CANNON;break;case n.pzaPlantEnum.IMITATER:t=o.IMITATER;break;case n.pzaPlantEnum.SUPER_CHOMPER:t=o.COB_CANNON}if(a==n.pzaPlantEnum.SUPER_CHOMPER)return 100;if(a==n.pzaPlantEnum.BOOM_NUT)return 5e3;if(a==n.pzaPlantEnum.CAIWEN||a==n.pzaPlantEnum.FireBlover||a==n.pzaPlantEnum.LaserBean)return 1e4;if(null==t)return 3e3;var e=this.SHOP_CONFIG.get(t);return null==e?3e3:e.price},a.SHOP_CONFIG=new Map,a}();e.pzaShopConfig=i,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum"}],pzaShopDave:[function(a,t,e){"use strict";cc._RF.push(t,"b5b2cEuGkdC97sMnawdSsxr","pzaShopDave");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShopDave=void 0;var r=a("../Common/pzaSoundManager"),p=a("../Common/pzaSpineController"),l=a("../Common/pzaUtil"),s=a("../Common/pzaWorldEventManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.dave=null,t.dialogNode=null,t.word=null,t.continueNode=null,t.words=null,t.dialogEndCall=null,t.idleDave=!1,t.allPlantDave=!1,t.idleWords=["\u6211\u4eec\u7684\u4ef7\u683c\n\u5f88\u4e0d\u53ef\u601d\u8bae\u5427\uff01","\u6742\u8d27\u5e97\u7684\u5546\u54c1\n\u90fd\u5df2\u7ecf\u4e0a\u67b6\u4e86\uff01\uff01","\u4e00\u8d77\u6765\u5427\uff01\u6211\u75af\u6389\u5566\n\uff01\uff01","\u6389\u5728\u5730\u4e0a\u7684\u4e1c\u897f\n\u5f02\u5e38\u7f8e\u5473\u3002"],t.lastIdleWord=null,t.idleInterval=0,t.hideDialogTime=0,t.plantDaveIndex=0,t.canContinue=!1,t}return n(t,a),t.prototype.onEnable=function(){s.pzaWorldEventManager.addListener(s.pzaWorldEventType.HIDE_DAVE_DIALOG,this.hideDaveDialog,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.HIDE_DAVE_DIALOG,this.showDaveDialog,this)},t.prototype.onDisable=function(){s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.HIDE_DAVE_DIALOG,this.hideDaveDialog,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.HIDE_DAVE_DIALOG,this.showDaveDialog,this)},t.prototype.hideDaveDialog=function(){this.allPlantDave||this.hideNormalDave(!0)},t.prototype.showDaveDialog=function(){this.allPlantDave||this.showNormalDave(!1)},t.prototype.showGuideDave=function(a,t){var e=this;this.idleDave=!1,this.allPlantDave=!1,this.dialogNode.active=!1,this.words=a,this.dialogEndCall=t,this.continueNode.active=!0,this.canContinue=!1,this.dave.playAnimation("1enter1",!1,function(){e.dave.playAnimation("1idle1",!0),e.dialogNode.active=!0,e.canContinue=!0,e.showNextWord()}),this.node.on(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.node._touchListener.setSwallowTouches(!1)},t.prototype.showNormalDave=function(a){var t=this;void 0===a&&(a=!0),this.idleDave=!0,this.allPlantDave=!1,this.dialogNode.active=!1,this.continueNode.active=!1,this.idleInterval=5,this.hideDialogTime=0,this.lastIdleWord=null,this.canContinue=!0,a&&this.dave.playAnimation("1enter1",!1,function(){t.dave.playAnimation("1idle1",!0)})},t.prototype.hideNormalDave=function(a){this.dialogNode.active=!1,this.idleInterval=5,this.hideDialogTime=0,a&&(this.idleDave=!0)},t.prototype.showCrazyDave=function(){var a=this;this.idleDave=!1,this.allPlantDave=!1,this.dialogNode.active=!0,this.continueNode.active=!0,this.canContinue=!0,this.words=null,this.dialogEndCall=function(){a.idleDave=!0,a.dialogNode.active=!1,a.continueNode.active=!1,a.idleInterval=5,a.hideDialogTime=0,a.lastIdleWord=null,a.dave.playAnimation("1idle1",!0)},this.word.string="\u55ef...\xb7\xb7\xb7\u7f8e\u5473\u963f\uff01\uff01",r.pzaSoundManager.playAudio("crazydavecrazy"),this.dave.playAnimation("crazy",!1,function(){a.dave.playAnimation("1idle2",!0)}),this.node.on(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.node._touchListener.setSwallowTouches(!1)},t.prototype.showNutWord=function(){var a=this;this.dialogNode.active=!0,this.word.string="\u60f3\u8ba9\u575a\u679c\u5f97\u5230\u6cbb\u7597\n\u5f88\u7b80\u5355\uff0c\u5728\u5df2\u7ecf\u53d7\u4f24\n\u7684\u575a\u679c\u4e0a\u518d\u79cd\u4e00\u4e2a\u65b0\n\u7684\uff01",this.lastIdleWord=null,this.idleInterval=10,this.hideDialogTime=5,this.playShortSound(),this.dave.playAnimation("1talk3",!1,function(){a.dave.playAnimation("1idle1",!0)})},t.prototype.showAllPlantWord=function(){this.idleDave=!1,this.allPlantDave=!0,this.dialogNode.active=!0,this.continueNode.active=!1,this.words=null,this.dialogEndCall=null,this.idleInterval=0,this.plantDaveIndex=0,this.showPlantDaveWord(this.plantDaveIndex),this.node.on(cc.Node.EventType.TOUCH_START,this.clickNextWord,this)},t.prototype.update=function(a){this.allPlantDave?this.updatePlantDave(a):this.idleDave&&(this.idleInterval-=a,this.idleInterval<=0?this.showIdleWord():this.hideDialogTime<=0||(this.hideDialogTime-=a,this.hideDialogTime<=0&&(this.dialogNode.active=!1)))},t.prototype.updatePlantDave=function(a){this.idleInterval<=0||(this.idleInterval-=a,this.idleInterval<=0&&this.showPlantDaveWord(this.plantDaveIndex))},t.prototype.showPlantDaveWord=function(a){var t=this;if(a>=5)return this.node.off(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),void this.showNormalDave(!1);var e=[1,1,1,2,2];this.word.string=["\u4f60\u521a\u521a\u4e70\u5230\u4e86\u6700\u540e\u4e00\n\u4e2a\u690d\u7269\uff01","\u4f60\u73b0\u5728\u8fbe\u6210\u5168\u690d\u7269\u5236\u9738\u4e86\uff01","\u8fd9\u6837\u4e00\u4e2a\u6210\u5c31\u603b\u5f97\u6709\u4e2a\u540d\u5b57\u5427\uff1f","\u6709\u4e86\xb7\xb7\xb7","\u690d\u7269\u730e\u4eba\uff01\uff01\uff01"][a],a<=3?(this.playShortSound(),this.dave.playAnimation("1talk3",!1,function(){t.idleInterval=e[a],t.dave.playAnimation("1idle1",!0)})):(r.pzaSoundManager.playAudio("crazydavecrazy"),this.dave.playAnimation("crazy",!1,function(){t.idleInterval=e[a],t.dave.playAnimation("1idle1",!0)})),this.plantDaveIndex++},t.prototype.showIdleWord=function(){for(var a=this,t=[],e=0;e<this.idleWords.length;e++)this.idleWords[e]!=this.lastIdleWord&&t.push(this.idleWords[e]);var o=l.pzaUtil.getRandomValueFromArray(t);this.dialogNode.active=!0,this.word.string=o,this.lastIdleWord=o,this.idleInterval=10,this.hideDialogTime=5,this.playShortSound(),this.dave.playAnimation("1talk3",!1,function(){a.dave.playAnimation("1idle1",!0)})},t.prototype.clickNextWord=function(){this.allPlantDave||this.canContinue&&this.showNextWord()},t.prototype.showNextWord=function(){var a=this;if(null==this.words)return this.node.off(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.dialogNode.active=!1,void(this.dialogEndCall&&this.dialogEndCall());var t=this.words.shift();if(null==t)return this.node.off(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.dialogNode.active=!1,void(this.dialogEndCall&&this.dialogEndCall());this.word.string=t.word,t.event&&t.event(),this.playShortSound(),this.dave.playAnimation("1talk3",!1,function(){a.dave.playAnimation("1idle1",!0)})},t.prototype.playShortSound=function(){r.pzaSoundManager.playAudio("daveshort")},i([d({displayName:"\u6234\u592b\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"dave",void 0),i([d({displayName:"\u5bf9\u8bdd\u6846",type:cc.Node})],t.prototype,"dialogNode",void 0),i([d({displayName:"\u6587\u5b57",type:cc.Label})],t.prototype,"word",void 0),i([d({displayName:"\u7ee7\u7eed",type:cc.Node})],t.prototype,"continueNode",void 0),i([u],t)}(cc.Component);e.pzaShopDave=h,cc._RF.pop()},{"../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaShopItem:[function(a,t,e){"use strict";cc._RF.push(t,"945eaXxxrdJMqWmnEpN5n5u","pzaShopItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShopItem=void 0;var r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Common/pzaBeltEquipConfig"),s=a("../Common/pzaGameCommonPool"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaShareGiftConfig"),d=a("../Common/pzaSpriteFrameManager"),h=a("../Common/pzaStatisticsMgr"),m=a("../Common/pzaUIManager"),f=a("../Common/pzaUtil"),z=a("../Garden/pzaGardenMgr"),y=a("../Load/pzaPreLoadManager"),g=a("../Shop/pzaShopConfig"),b=a("../utils/pzaChannel"),v=a("../utils/pzakc"),P=a("./pzaBuyConfirmView"),D=a("./pzaShareGiftView"),S=cc._decorator,C=S.ccclass,_=S.property,E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.price=null,t.specialAd=null,t.adCountPro=null,t.itemIcon=null,t.plantCard=null,t.plantIcon=null,t.plantCardBoard=null,t.plantCardBoardFrames=[],t.soldNode=null,t.comingNode=null,t.itemName=null,t.itemCount=null,t.idName=null,t.itemPosArr=[cc.v2(99,85),cc.v2(216,85),cc.v2(333,85),cc.v2(450,85),cc.v2(59,-58),cc.v2(176,-58),cc.v2(293,-58),cc.v2(410,-58)],t.itemType=null,t.shopPos=null,t.sold=!1,t.coming=!1,t.buyCall=null,t}return n(t,a),t.prototype.bindData=function(a,t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=null),a==g.pzaShopItemType.CARD_SLOT_7&&(7==c.pzaLocalData.data.plantSlotCount?a=g.pzaShopItemType.CARD_SLOT_8:8==c.pzaLocalData.data.plantSlotCount?a=g.pzaShopItemType.CARD_SLOT_9:c.pzaLocalData.data.plantSlotCount),this.itemType=a,this.coming=o,this.buyCall=n,this.shopPos=t+"-"+e;var i=this.itemPosArr[e];null!=i&&this.node.setPosition(i);var r=g.pzaShopConfig.SHOP_CONFIG.get(a);null!=r&&(a==g.pzaShopItemType.TWIN_SUNFLOWER?(this.price.node.active=!0,this.specialAd.active=!1,this.price.string="\u6d3b\u52a8\u83b7\u53d6","ks"!=b.pzaChannel.instance().channel&&"tt"!=b.pzaChannel.instance().channel||(this.price.node.active=!1,this.specialAd.active=!0,this.adCountPro.string="("+c.pzaLocalData.data.twinsFlowerAdCnt+"/2)")):a==g.pzaShopItemType.GATLING_PEA?(this.price.node.active=!1,this.specialAd.active=!0,this.adCountPro.string="("+c.pzaLocalData.data.gatlingAdCount+"/2)",h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"17"},{name:"adname",value:"\u83b7\u53d6\u673a\u67aa\u5c04\u624b"})):(this.price.node.active=!0,this.specialAd.active=!1,this.price.string=f.pzaUtil.getCurrencyStr(r.price)),this.comingNode.active=this.coming,this.itemName.node.active=!1,this.itemCount.node.active=!1,a>=g.pzaShopItemType.CARD_SLOT_7&&a<=g.pzaShopItemType.CARD_SLOT_9?(this.itemIcon.node.active=!0,this.plantCard.active=!1,this.itemName.node.active=!0,this.itemIcon.node.setPosition(cc.v2(-5,66)),d.pzaSpriteFrameManager.loadShopItemIcon(1,this.itemIcon),a==g.pzaShopItemType.CARD_SLOT_7?this.itemName.string="7\n\u5361\u7247\u69fd":a==g.pzaShopItemType.CARD_SLOT_8?this.itemName.string="8\n\u5361\u7247\u69fd":this.itemName.string="9\n\u5361\u7247\u69fd"):a<g.pzaShopItemType.GATLING_PEA||a>g.pzaShopItemType.IMITATER?(this.itemIcon.node.active=!0,this.plantCard.active=!1,this.itemIcon.node.setPosition(cc.v2(5,74)),d.pzaSpriteFrameManager.loadShopItemIcon(a,this.itemIcon),a==g.pzaShopItemType.PESTICIDE&&(this.itemCount.node.active=!0)):(this.itemIcon.node.active=!1,this.plantCard.active=!0,d.pzaSpriteFrameManager.loadPlantCard(g.pzaShopConfig.getPlantTypeByItem(a),this.plantIcon),a==g.pzaShopItemType.IMITATER?this.plantCardBoard.spriteFrame=this.plantCardBoardFrames[0]:this.plantCardBoard.spriteFrame=this.plantCardBoardFrames[1]),this.idName.string="ID: "+g.pzaShopConfig.SHOP_CONFIG.get(a).itemType,this.refreshPurchasedState())},t.prototype.refreshPurchasedState=function(){switch(this.sold=!1,this.itemType){case g.pzaShopItemType.GATLING_PEA:this.sold=c.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.GATLING_PEA);break;case g.pzaShopItemType.TWIN_SUNFLOWER:this.sold=c.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.TWIN_SUNFLOWER);break;case g.pzaShopItemType.GLOOM_SHROOM:this.sold=c.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.GLOOM_SHROOM);break;case g.pzaShopItemType.CATTAIL:this.sold=c.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.CATTAIL);break;case g.pzaShopItemType.SPIKEROCK:this.sold=c.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.SPIKEROCK);break;case g.pzaShopItemType.GOLD_MAGNET:this.sold=c.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.GOLD_MAGNET);break;case g.pzaShopItemType.WINTER_MELON:this.sold=c.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.WINTER_MELON);break;case g.pzaShopItemType.COB_CANNON:this.sold=c.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.COB_CANNON);break;case g.pzaShopItemType.IMITATER:this.sold=c.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.IMITATER);break;case g.pzaShopItemType.POOL_CLEAN_CAR:case g.pzaShopItemType.PITCHFORK:case g.pzaShopItemType.ROOF_CART:case g.pzaShopItemType.NUT_HEALING:this.sold=c.pzaLocalData.getGoodsCount(this.itemType)>0;break;case g.pzaShopItemType.SHROOM_GARDEN:this.sold=null!=c.pzaLocalData.data.gardenEnv[""+z.pzaGardenEnv.night];break;case g.pzaShopItemType.AQUARIUM:this.sold=null!=c.pzaLocalData.data.gardenEnv[""+z.pzaGardenEnv.water];break;case g.pzaShopItemType.SNAIL:this.sold=(c.pzaLocalData.data.gardenToolNum[""+z.pzaGardenToolType.snail]||0)>0;break;case g.pzaShopItemType.GOLD_KETTLE:this.sold=(c.pzaLocalData.data.gardenToolNum[""+z.pzaGardenToolType.goldWaterPot]||0)>0;break;case g.pzaShopItemType.JUKEBOX:this.sold=(c.pzaLocalData.data.gardenToolNum[""+z.pzaGardenToolType.phonograph]||0)>0;break;case g.pzaShopItemType.GLOVE:this.sold=(c.pzaLocalData.data.gardenToolNum[""+z.pzaGardenToolType.glove]||0)>0;break;case g.pzaShopItemType.WHEELBARROW:this.sold=(c.pzaLocalData.data.gardenToolNum[""+z.pzaGardenToolType.cart]||0)>0;break;case g.pzaShopItemType.PESTICIDE:this.sold=(c.pzaLocalData.data.gardenToolNum[""+z.pzaGardenToolType.pesticide]||0)>=999;break;case g.pzaShopItemType.MARIGOLD_FLOWERPOT:case g.pzaShopItemType.FLOWER_SEED:case g.pzaShopItemType.BRONZE_FLOWER_SEED:case g.pzaShopItemType.SILVER_FLOWER_SEED:case g.pzaShopItemType.GOLD_FLOWER_SEED:b.pzaChannel.isConfRemote?this.sold=!z.default.instance().hasEmptyPos(z.pzaGardenEnv.normal):this.sold=c.pzaLocalData.data.purchasedPos.includes(this.shopPos)||!z.default.instance().hasEmptyPos(z.pzaGardenEnv.normal);break;case g.pzaShopItemType.BLACK_KNIGHT_BELT:var a=c.pzaLocalData.data.beltEquipData.hasEquipList[l.pzaBeltEquipEnum.HeiQi];this.sold=null!=a&&a!=l.pzaBeltEquipEnum.null;break;case g.pzaShopItemType.WITCH_KNIGHT_BELT:var t=c.pzaLocalData.data.beltEquipData.hasEquipList[l.pzaBeltEquipEnum.WuQi];this.sold=null!=t&&t!=l.pzaBeltEquipEnum.null}this.soldNode.active=this.sold},t.prototype.click=function(){var a=this;if(!this.sold&&!this.coming){var t=function(){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.BUY_CONFIRM_VIEW,function(t){var e=t&&t.getComponent(P.pzaBuyConfirmView);e&&e.bindData(a.itemType,a.shopPos,function(){a.buyCall&&a.buyCall(a.itemType),a.itemType>=g.pzaShopItemType.CARD_SLOT_7&&a.itemType<=5?a.bindData(g.pzaShopItemType.CARD_SLOT_7,1,0,a.coming,a.buyCall):(a.refreshPurchasedState(),!a.sold||a.itemType!==g.pzaShopItemType.FLOWER_SEED&&a.itemType!==g.pzaShopItemType.GOLD_FLOWER_SEED&&a.itemType!==g.pzaShopItemType.SILVER_FLOWER_SEED&&a.itemType!==g.pzaShopItemType.BRONZE_FLOWER_SEED||v.default.sendMsg("refreshOtherItems",a.itemType))})})};if(this.itemType!=g.pzaShopItemType.TWIN_SUNFLOWER)this.itemType!=g.pzaShopItemType.GATLING_PEA?t():(o=function(){c.pzaLocalData.data.gatlingAdCount++,c.pzaLocalData.addDirty("gatlingAdCount"),a.adCountPro.string="("+c.pzaLocalData.data.gatlingAdCount+"/2)",c.pzaLocalData.data.gatlingAdCount>=2&&t()},b.pzaChannel.instance().showVideo({sucCall:o,failCall:function(){},endCall:function(){},posName:"\u83b7\u53d6\u673a\u67aa\u5c04\u624b",adsid:"17"}));else{var e=b.pzaChannel.instance().getChannel();if("tt"==e.channel||"ks"==e.channel){var o=function(){c.pzaLocalData.data.twinsFlowerAdCnt++,c.pzaLocalData.addDirty("twinsFlowerAdCnt"),a.adCountPro.string="("+c.pzaLocalData.data.twinsFlowerAdCnt+"/2)",c.pzaLocalData.data.twinsFlowerAdCnt>=2&&(c.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.TWIN_SUNFLOWER),c.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant(),a.refreshPurchasedState())};return void b.pzaChannel.instance().showVideo({sucCall:o,failCall:function(){},endCall:function(){},posName:"\u83b7\u53d6\u53cc\u5b50\u5411\u65e5\u8475",adsid:"28"})}"wx"==e.channel?e.getShareResult(u.pzaShareGiftConfig.act,function(a){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.SHARE_GIFT_VIEW,function(t){var e=t&&t.getComponent(D.pzaShareGiftView);e&&e.init(a)})}):"my"==e.channel&&e.getShareResult(u.pzaShareGiftConfig.act,function(a){m.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.SHARE_GIFT_VIEW,function(t){var e=t&&t.getComponent(D.pzaShareGiftView);e&&e.init(a)})})}}},t.prototype.close=function(){s.pzaGameCommonPool.returnInstant(this.node)},i([_({displayName:"\u4ef7\u683c",type:cc.Label})],t.prototype,"price",void 0),i([_({displayName:"\u7279\u6b8a\u5e7f\u544a",type:cc.Node})],t.prototype,"specialAd",void 0),i([_({displayName:"\u5e7f\u544a\u8fdb\u5ea6",type:cc.Label})],t.prototype,"adCountPro",void 0),i([_({displayName:"\u7269\u54c1\u56fe\u6807",type:cc.Sprite})],t.prototype,"itemIcon",void 0),i([_({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"plantCard",void 0),i([_({displayName:"\u690d\u7269\u56fe\u7247",type:cc.Sprite})],t.prototype,"plantIcon",void 0),i([_({displayName:"\u690d\u7269\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"plantCardBoard",void 0),i([_({displayName:"\u690d\u7269\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"plantCardBoardFrames",void 0),i([_({displayName:"\u5df2\u552e\u51fa",type:cc.Node})],t.prototype,"soldNode",void 0),i([_({displayName:"\u5373\u5c06\u63a8\u51fa",type:cc.Node})],t.prototype,"comingNode",void 0),i([_({displayName:"\u5546\u54c1\u540d\u79f0",type:cc.Label})],t.prototype,"itemName",void 0),i([_({displayName:"\u5546\u54c1\u6570\u91cf",type:cc.Label})],t.prototype,"itemCount",void 0),i([_({type:cc.Label})],t.prototype,"idName",void 0),i([C],t)}(cc.Component);e.pzaShopItem=E,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaBeltEquipConfig":"pzaBeltEquipConfig","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBuyConfirmView":"pzaBuyConfirmView","./pzaShareGiftView":"pzaShareGiftView"}],pzaShopView:[function(a,t,e){"use strict";cc._RF.push(t,"33f42AEVkRP07M+oYZJtsjF","pzaShopView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShopView=void 0;var r=a("../Battle/Data/pzaGuideType"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaStatisticsMgr"),d=a("../Common/pzaUIManager"),h=a("../Common/pzaUtil"),m=a("../Garden/pzaGardenMgr"),f=a("../Load/pzaPreLoadManager"),z=a("../Shop/pzaShopConfig"),y=a("../Shop/pzaShopDave"),g=a("../utils/pzaChannel"),b=a("../utils/pzakc"),v=a("./pzaBuyConfirmView"),P=a("./pzaCommonMask"),D=a("./pzaShopItem"),S=cc._decorator,C=S.ccclass,_=S.property,E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bg=null,t.bgFrames=[],t.backCarNode=null,t.backCarDoor=null,t.backCarCloseDoor=null,t.nightWindow=null,t.nightbackWindow=null,t.coin=null,t.mainBtnNode=null,t.mainBtn=null,t.mainBtnFrames=[],t.itemPrefab=null,t.shopContent=null,t.leftLightBtn=null,t.rightLightBtn=null,t.dialogDave=null,t.diamond=null,t.nightCar=[],t.lastCoinCount=null,t.shopItems=[],t.curPage=null,t.closeCall=null,t.buyPlantCall=null,t.words=null,t.maxPage=1,t.pageShops=[[z.pzaShopItemType.CARD_SLOT_7,z.pzaShopItemType.POOL_CLEAN_CAR,z.pzaShopItemType.PITCHFORK,z.pzaShopItemType.ROOF_CART,z.pzaShopItemType.GATLING_PEA,z.pzaShopItemType.TWIN_SUNFLOWER,z.pzaShopItemType.GLOOM_SHROOM,z.pzaShopItemType.CATTAIL],[z.pzaShopItemType.SPIKEROCK,z.pzaShopItemType.GOLD_MAGNET,z.pzaShopItemType.WINTER_MELON,z.pzaShopItemType.COB_CANNON,z.pzaShopItemType.IMITATER,z.pzaShopItemType.NUT_HEALING],[z.pzaShopItemType.MARIGOLD_FLOWERPOT,z.pzaShopItemType.MARIGOLD_FLOWERPOT,z.pzaShopItemType.MARIGOLD_FLOWERPOT,z.pzaShopItemType.GOLD_KETTLE,z.pzaShopItemType.PESTICIDE,z.pzaShopItemType.JUKEBOX,z.pzaShopItemType.GLOVE],[z.pzaShopItemType.SHROOM_GARDEN,z.pzaShopItemType.AQUARIUM,z.pzaShopItemType.WHEELBARROW,z.pzaShopItemType.SNAIL,z.pzaShopItemType.FLOWER_SEED,z.pzaShopItemType.BRONZE_FLOWER_SEED,z.pzaShopItemType.SILVER_FLOWER_SEED,z.pzaShopItemType.GOLD_FLOWER_SEED],[z.pzaShopItemType.BLACK_KNIGHT_BELT,z.pzaShopItemType.WITCH_KNIGHT_BELT]],t.unlocks=[["3-4","3-4","3-4","5-1","3-4","3-4","4-4","4-4"],["5-1","5-1","5-10","5-10","5-10","5-10"],["5-10","5-10","5-10","5-4","5-4","5-4","5-4","5-4"],["5-10","5-10","5-10","5-10","5-10","5-10","5-10","5-10"],["3-4","3-4"]],t}return n(t,a),t.prototype.onEnable=function(){var a=this;u.pzaStatisticsMgr.sendEvent("System",{name:"system",value:3}),this.words=null,this.lastCoinCount=null,this.refreshCoinCount(),this.curPage=null,this.diamond.active=!1,this.initMaxPage(),g.pzaChannel.instance().closeBanner(),s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_3_4||s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_4_4||s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_5_1||s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_GARDEN_5_4&&s.pzaLocalData.gardenGuiding?(this.bindCloseCall(!1,function(){d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.PART_SELECT_VIEW,null)}),this.mainBtnNode.active=!1,s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_3_4?this.words=[new r.pzaDialog("\u54e6\uff1f\u8fd9\u662f\u2026\u2026\u4e00\u5f20\u7834\u635f\u7684\u9a91\u58eb\u5361\u7247\uff01\n!"),new r.pzaDialog("\u867d\u7136\u4ed6\u7684\u529b\u91cf\u88ab\u524a\u5f31\u4e86\uff0c\n\u4f46\u662f\u6211\u53ef\u4ee5\u901a\u8fc7\u5546\u5e97\u7684\u529b\u91cf\u6162\u6162\u4fee\u590d\u5b83\uff01\uff01"),new r.pzaDialog("\u7ed9\u4f601000\u9a91\u58eb\u5e01\u628a\u5b83\u5356\u7ed9\u6211\uff0c\n\u53e6\u5916\u6211\u8fd8\u4f1a\u7ed9\u4f60\u4e00\u4e2a\u793c\u7269\uff01"),new r.pzaDialog("\u5f88\u597d\uff01\u6765\u5427\uff0c\u8ba9\u6211\u5e26\u4f60\u8fdb\u5165\u5546\u5e97,",function(){a.showDiamondAni()}),new r.pzaDialog("\u89e3\u9501\u66f4\u591a\u7684\u9a91\u58eb\u529b\u91cf\uff01",function(){a.openCarDoor()})]:s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_4_4?this.words=[new r.pzaDialog("\u4f60\u627e\u5230\u4e86\u6211\u7684\n\u9b54\u6cd5\u7389\u7c73\u5377\uff01\uff01"),new r.pzaDialog("\u5b83\u53ea\u80fd\u662f\u6211\u7684\uff01\n\u6211\u7ed9\u4f601000\u91d1\u5e01\uff01"),new r.pzaDialog("\u5f88\u597d\uff01\u7389\u7c73\u5377\n\u73b0\u5728\u662f\u6211\u7684\u5566\uff01",function(){a.showDiamondAni()}),new r.pzaDialog("\u4e3a\u4ec0\u4e48\u6211\u8981\u82b1\u8fd9\u4e48\u591a\n\u94b1\u4e70\u4f60\u90a3\u4e2a\u7389\u7c73\u5377\uff1f"),new r.pzaDialog("\u56e0\u4e3a\u6211\u5f88\u75af\u72c2\uff01\uff01\uff01\n\uff01"),new r.pzaDialog("\u6211\u7684\u5c0f\u5e97\uff01\u4f60\u4f1a\u6ce8\u610f\n\u5230\u6211\u8fdb\u4e86\u4e9b\u65b0\u8d27\uff01",function(){a.openCarDoor()})]:s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_5_1?this.words=[new r.pzaDialog("\u563f\uff01\u6307\u6325\u5b98\uff0c\u5546\u5e97\u6709\n\u4e00\u4e9b\u65b0\u4e1c\u897f\u51fa\u552e\u5566\uff01")]:s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_GARDEN_5_4&&(this.words=[new r.pzaDialog("\u6b22\u8fce\u6765\u5230\u4f11\u95f2\u82b1\u56ed\uff01"),new r.pzaDialog("\u6211\u4f1a\u987a\u4fbf\u7ed9\u4f60\u4e00\u4e9b\u5316\n\u80a5\u7684\uff01",function(){a.openCarDoor(3),m.default.instance().addGardenTool(m.pzaGardenToolType.manure,5)}),new r.pzaDialog("\u5468\u56f4\u6709\u6ca1\u6709\u4ec0\u4e48\u4f60\u559c\n\u6b22\u7684\u4e1c\u897f\uff01")],this.bindCloseCall(!1,null)),this.show(s.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_4_4,!1)):(this.mainBtnNode.active=!0,this.show(!0,!0),this.bindCloseCall(!1,null),this.showShopItem(1)),b.default.regMsgReciever("refreshOtherItems",function(t){return console.log("refreshOtherItems!!!!",t),a.refreshOtherItems(t),!1})},t.prototype.onDisable=function(){b.default.delMsgReciever("refreshOtherItems"),this.clearShopItem()},t.prototype.bindCloseCall=function(a,t,e){void 0===e&&(e=null),this.closeCall=t,this.buyPlantCall=e,this.mainBtn.string=a?"\u4e3b\u83dc\u5355":"\u7ee7\u7eed"},t.prototype.show=function(a,t){var e=this;a?(this.bg.spriteFrame=this.bgFrames[0],this.nightWindow.active=!1,this.nightbackWindow.active=!1,t?(this.backCarDoor.opacity=255,this.backCarDoor.active=!0,this.backCarCloseDoor.active=!1,this.leftLightBtn.interactable=this.maxPage>1,this.rightLightBtn.interactable=this.maxPage>1):(this.backCarDoor.active=!1,this.backCarCloseDoor.opacity=255,this.backCarCloseDoor.active=!0,this.leftLightBtn.interactable=!1,this.rightLightBtn.interactable=!1)):(this.bg.spriteFrame=this.bgFrames[1],this.nightWindow.active=!0,t?(this.nightbackWindow.active=!1,this.backCarDoor.opacity=255,this.backCarDoor.active=!0,this.backCarCloseDoor.active=!1,this.leftLightBtn.interactable=this.maxPage>1,this.rightLightBtn.interactable=this.maxPage>1):(this.nightbackWindow.active=!0,this.backCarDoor.active=!1,this.backCarCloseDoor.opacity=255,this.backCarCloseDoor.active=!0,this.leftLightBtn.interactable=!1,this.rightLightBtn.interactable=!1)),this.shopContent.opacity=255,this.nightCar.forEach(function(t){t.active=0==a}),null!=this.words?this.dialogDave.showGuideDave(this.words,function(){e.mainBtnNode.active=!0,s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_5_1&&e.openCarDoor(),s.pzaLocalData.data.curGuideType=null,s.pzaLocalData.addDirty("curGuideType"),e.dialogDave.showNormalDave(!1)}):this.dialogDave.showNormalDave()},t.prototype.update=function(){this.refreshCoinCount()},t.prototype.refreshCoinCount=function(){this.lastCoinCount!=s.pzaLocalData.data.coin&&(this.lastCoinCount=s.pzaLocalData.data.coin,this.coin.string=h.pzaUtil.getCurrencyStr(this.lastCoinCount))},t.prototype.clickMainView=function(){c.pzaSoundManager.playSFX(),this.close(),this.closeCall&&this.closeCall()},t.prototype.clickBuyMoreCoin=function(){c.pzaSoundManager.playSFX(),d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.BUY_CONFIRM_VIEW,function(a){var t=a&&a.getComponent(v.pzaBuyConfirmView);t&&t.bindData(z.pzaShopItemType.DAVE_COIN,null,null)})},t.prototype.refreshOtherItems=function(a){for(var t=this.shopContent.children,e=0;e<t.length;e++){var o=t[e].getComponent(D.pzaShopItem);o.itemType!==a&&o.refreshPurchasedState()}},t.prototype.showShopItem=function(a){if(this.curPage!=a){this.curPage=a,this.clearShopItem();var t=this.pageShops[this.curPage-1];if(null!=t)for(var e=0;e<t.length;e++){var o=!1,n=t[e],i=z.pzaShopConfig.SHOP_CONFIG.get(n),r=i.unlockChapter+"-"+i.unlockPart;if(!this.hasUnlock(r)){if(n!=z.pzaShopItemType.MARIGOLD_FLOWERPOT)continue;o=!0}var p=l.pzaGameCommonPool.requestInstant(this.itemPrefab);p.setParent(this.shopContent);var s=p.getComponent(D.pzaShopItem);s&&s.bindData(n,this.curPage,e,o,this.buyCall.bind(this)),this.shopItems.push(s)}}},t.prototype.clearShopItem=function(){this.shopItems.forEach(function(a){a&&a.close()}),this.shopItems=[]},t.prototype.clickPrePage=function(){var a=this.curPage-1;a<1&&(a=this.maxPage),this.showChangeAni(a),c.pzaSoundManager.playAudio("hatchback_close")},t.prototype.clickNextPage=function(){var a=this.curPage+1;a>this.maxPage&&(a=1),this.showChangeAni(a),this.dialogDave.hideNormalDave(!1),c.pzaSoundManager.playAudio("hatchback_close")},t.prototype.showChangeAni=function(a){var t=this;P.pzaCommonMask.showMask(),this.backCarDoor.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){t.leftLightBtn.interactable=!1,t.rightLightBtn.interactable=!1}),cc.delayTime(.47),cc.fadeIn(.15))),this.backCarCloseDoor.active=!0,this.backCarCloseDoor.opacity=1,this.backCarCloseDoor.runAction(cc.sequence(cc.delayTime(.15),cc.fadeIn(.15),cc.delayTime(.22),cc.fadeOut(.2))),this.backCarNode.y=30,this.backCarNode.runAction(cc.sequence(cc.delayTime(.3),cc.repeat(cc.sequence(cc.moveTo(.02,cc.v2(-23.361,28)),cc.moveTo(.02,cc.v2(-23.361,30))),3))),this.shopContent.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){t.showShopItem(a)}),cc.delayTime(.47),cc.callFunc(function(){t.leftLightBtn.interactable=!0,t.rightLightBtn.interactable=!0}),cc.fadeIn(.15),cc.callFunc(function(){P.pzaCommonMask.hideMask(),t.backCarCloseDoor.active=!1})))},t.prototype.openCarDoor=function(a){var t=this;void 0===a&&(a=1),P.pzaCommonMask.showMask(),this.backCarNode.y=30,this.backCarNode.runAction(cc.repeat(cc.sequence(cc.moveTo(.02,cc.v2(-23.361,28)),cc.moveTo(.02,cc.v2(-23.361,30))),3)),this.backCarDoor.active=!0,this.backCarDoor.opacity=1,this.backCarDoor.runAction(cc.sequence(cc.delayTime(.37),cc.fadeIn(.15))),this.backCarCloseDoor.runAction(cc.sequence(cc.delayTime(.22),cc.fadeOut(.2))),this.shopContent.opacity=1,c.pzaSoundManager.playAudio("hatchback_open"),this.shopContent.runAction(cc.sequence(cc.callFunc(function(){t.showShopItem(a)}),cc.delayTime(.37),cc.callFunc(function(){t.leftLightBtn.interactable=t.maxPage>1,t.rightLightBtn.interactable=t.maxPage>1}),cc.fadeIn(.15),cc.callFunc(function(){P.pzaCommonMask.hideMask(),t.backCarCloseDoor.active=!1})))},t.prototype.showDiamondAni=function(){this.diamond.active=!0,this.diamond.stopAllActions(),this.diamond.setPosition(cc.v2(-424,-262)),this.diamond.opacity=255,this.diamond.runAction(cc.sequence(cc.moveTo(.5,cc.v2(281,-288)),cc.callFunc(function(){s.pzaLocalData.data.coin+=1e3,s.pzaLocalData.addDirty("coin")}),cc.fadeOut(.3)))},t.prototype.initMaxPage=function(){for(var a=this,t=function(t){if(t>=3&&s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_GARDEN_5_4)return"continue";e.unlocks[t-1].forEach(function(e){a.hasUnlock(e)&&(a.maxPage=t)})},e=this,o=1;o<=this.unlocks.length;o++)t(o)},t.prototype.hasUnlock=function(a){if(s.pzaLocalData.data.passLastPart)return!0;if(null==a)return!1;var t=a.split("-"),e=parseInt(t[0]),o=parseInt(t[1]);return s.pzaLocalData.data.curChapter>e||s.pzaLocalData.data.curChapter==e&&s.pzaLocalData.data.curPart>o},t.prototype.buyCall=function(a){if(a==z.pzaShopItemType.NUT_HEALING)this.dialogDave.showNutWord();else if(a>=z.pzaShopItemType.GATLING_PEA&&a<=z.pzaShopItemType.IMITATER){s.pzaLocalData.data.ownPlants.length>=p.pzaPlantEnum.IMITATER&&this.dialogDave.showAllPlantWord();var t=z.pzaShopConfig.getPlantTypeByItem(a);this.buyPlantCall&&this.buyPlantCall(t)}},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([_({displayName:"\u80cc\u666f",type:cc.Sprite})],t.prototype,"bg",void 0),i([_({displayName:"\u80cc\u666f\u56fe",type:[cc.SpriteFrame]})],t.prototype,"bgFrames",void 0),i([_({displayName:"\u540e\u8f66\u8282\u70b9",type:cc.Node})],t.prototype,"backCarNode",void 0),i([_({displayName:"\u540e\u8f66\u95e8-\u5f00",type:cc.Node})],t.prototype,"backCarDoor",void 0),i([_({displayName:"\u540e\u8f66\u95e8-\u5173",type:cc.Node})],t.prototype,"backCarCloseDoor",void 0),i([_({displayName:"\u591c\u665a\u7a97",type:cc.Node})],t.prototype,"nightWindow",void 0),i([_({displayName:"\u591c\u665a\u540e\u7a97",type:cc.Node})],t.prototype,"nightbackWindow",void 0),i([_({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],t.prototype,"coin",void 0),i([_({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"mainBtnNode",void 0),i([_({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae\u6587\u672c",type:cc.Label})],t.prototype,"mainBtn",void 0),i([_({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae\u56fe",type:[cc.SpriteFrame]})],t.prototype,"mainBtnFrames",void 0),i([_({displayName:"\u5546\u54c1\u9884\u8bbe",type:cc.Prefab})],t.prototype,"itemPrefab",void 0),i([_({displayName:"\u5546\u54c1\u5bb9\u5668",type:cc.Node})],t.prototype,"shopContent",void 0),i([_({displayName:"\u5de6\u8f66\u706f\u6309\u94ae",type:cc.Button})],t.prototype,"leftLightBtn",void 0),i([_({displayName:"\u53f3\u8f66\u706f\u6309\u94ae",type:cc.Button})],t.prototype,"rightLightBtn",void 0),i([_({displayName:"\u6234\u592b\u5bf9\u8bdd",type:y.pzaShopDave})],t.prototype,"dialogDave",void 0),i([_({displayName:"\u94bb\u77f3",type:cc.Node})],t.prototype,"diamond",void 0),i([_({type:[cc.Node]})],t.prototype,"nightCar",void 0),i([C],t)}(cc.Component);e.pzaShopView=E,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../Shop/pzaShopDave":"pzaShopDave","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBuyConfirmView":"pzaBuyConfirmView","./pzaCommonMask":"pzaCommonMask","./pzaShopItem":"pzaShopItem"}],pzaShovelEffect:[function(a,t,e){"use strict";cc._RF.push(t,"180dahVd7hG1a5MYuVZoAx0","pzaShovelEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShovelEffect=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../pzaGameState"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shovelNode=null,t}return n(t,a),t.prototype.init=function(a,t){this.changeShovelPos(a,t),this.shovelNode.stopAllActions(),this.shovelNode.setPosition(cc.v2()),this.shovelNode.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(60,60)),cc.moveTo(.3,cc.v2()))))},t.prototype.changeShovelPos=function(a,t){if(null!=a&&null!=a){var e=p.pzaGameState.map.getBlockLogicPos(a,t,0,0),o=p.pzaGameState.map.getXInterval(a),n=p.pzaGameState.map.getYInterval(t);e.x+=.5*o,e.y+=.5*n,this.node.setPosition(e)}else this.close()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u94f2\u5b50\u8282\u70b9",type:cc.Node})],t.prototype,"shovelNode",void 0),i([s],t)}(cc.Component);e.pzaShovelEffect=u,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../pzaGameState":"pzaGameState"}],pzaShovelPlantShooter:[function(a,t,e){"use strict";cc._RF.push(t,"ad3cdQBLg9CI5EtzTPP1zOF","pzaShovelPlantShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShovelPlantShooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Bullet/pzaPeaBullet"),s=a("../pzaGameState"),c=a("./pzaBaseShooter"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.showShooter=function(a){var t=2;a&&a[0]&&(t=(t=Math.floor(a[0]/25))<=0?1:t,t*=2),this.node.y+=50,this.shootAtk(t,a[1],a[2])},t.prototype.shootAtk=function(a,t,e){for(var o=this,n=p.pzaNodeManager.getBulletNode(),i=function(i){c.scheduleOnce(function(){var p=r.pzaGameCommonPool.requestInstant2(o.bulletPrefab1);p.setParent(n);var c=p.getComponent(l.pzaPeaBullet),u=o.node.getPosition();p.setPosition(u),c.setPeaBallType(),c.init(t,20),c.setSpeed(400);var d=s.pzaGameState.map.getMapSkewColumn();d>0&&e<=d-2&&(c.maxPosX=o.node.x+1.5*s.pzaGameState.map.getBlockWidth()),i==a&&o.close()},.05*i)},c=this,u=0;u<a;u++)i(u)},i([d],t)}(c.pzaBaseShooter));e.pzaShovelPlantShooter=h,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Bullet/pzaPeaBullet":"pzaPeaBullet","../pzaGameState":"pzaGameState","./pzaBaseShooter":"pzaBaseShooter"}],pzaShowGrassEffect:[function(a,t,e){"use strict";cc._RF.push(t,"2b996IP4bdIDLNEomB4BUYn","pzaShowGrassEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShowGrassEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaGuideType"),s=a("../pzaGameState"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.roads=null,t.BlackNode=null,t}return n(t,a),t.prototype.showStaticGrass=function(a){this.BlackNode.active=!1,this.roads.children.forEach(function(a){a.active=!1}),1==a?this.roads.getChildByName("3").active=!0:2==a?(this.roads.getChildByName("2").active=!0,this.roads.getChildByName("3").active=!0,this.roads.getChildByName("4").active=!0):3==a&&this.roads.children.forEach(function(a){a.active=!0})},t.prototype.showGrass=function(a,t){this.BlackNode.active=!1,p.pzaSoundManager.playAudio("grassstep"),t&&t()},t.prototype.update=function(){window.pzaGuideManager.guideType==l.pzaGuideType.GUIDE_PLANT_1_1&&(this.BlackNode.active||1!=window.pzaGuideManager.guideStep&&(6!=window.pzaGuideManager.guideStep||null==s.pzaGameState.selectPlant)?!this.BlackNode.active||1==window.pzaGuideManager.guideStep||6==window.pzaGuideManager.guideStep&&null!=s.pzaGameState.selectPlant||this.hideBlankGrass():this.blankGrass())},t.prototype.pauseSelf=function(){this.BlackNode.active&&this.BlackNode.pauseAllActions()},t.prototype.resumeSelf=function(){this.BlackNode.active&&this.BlackNode.resumeAllActions()},t.prototype.blankGrass=function(){this.BlackNode.stopAllActions(),this.BlackNode.active=!0,this.BlackNode.opacity=0,this.BlackNode.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.4,177),cc.fadeOut(.4))))},t.prototype.hideBlankGrass=function(){this.BlackNode.active=!1},i([d({type:cc.Node})],t.prototype,"roads",void 0),i([d({displayName:"\u8349\u5730\u9ed1\u52a8\u753b",type:cc.Node})],t.prototype,"BlackNode",void 0),i([u],t)}(r.pzaBaseComponent);e.pzaShowGrassEffect=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaGuideType":"pzaGuideType","../pzaGameState":"pzaGameState"}],pzaSidebarView:[function(a,t,e){"use strict";cc._RF.push(t,"459adWyfklAsqz4rY8LOrdD","pzaSidebarView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaRewardManager"),s=a("../Common/pzaSoundManager"),c=a("../Common/pzaWorldEventManager"),u=a("../utils/pzaChannel"),d=a("../utils/pzakc"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.btnLabel=null,t.ttView=null,t.ksView=null,t.ks_titleP3=null,t.ks_appName=null,t.hasGet=!1,t}return n(t,a),t.prototype.setView=function(){this.ksView.active=!1,this.ttView.active=!1,"tt"==u.pzaChannel.instance().channel?this.ttView.active=!0:"ks"==u.pzaChannel.instance().channel&&(this.ksView.active=!0),this.ksView.getChildByName("item4")&&this.ksView.getChildByName("item4").getChildByName("lab")&&(this.ksView.getChildByName("item4").getChildByName("lab").getComponent(cc.Label).string="4.\u9886\u53d6\u5956\u52b1")},t.prototype.onEnable=function(){c.pzaWorldEventManager.addListener(c.pzaWorldEventType.UPDATE_SIDEVIEW_STATE,this.setBtnState,this),this.setBtnState(),this.setView()},t.prototype.onDisable=function(){c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.UPDATE_SIDEVIEW_STATE,this.setBtnState,this)},t.prototype.setBtnState=function(){var a=d.default.getData("sidebar",{today:"",canGet:"-1"}),t=new Date,e=t.getUTCFullYear()+"-"+t.getUTCMonth()+"-"+t.getUTCDay();a.today==e?(this.hasGet=!0,this.btnLabel.string="\u5df2\u9886\u53d6",this.node.getChildByName("board").getChildByName("btn_2").active=!0):"1"==a.canGet?(this.hasGet=!1,this.btnLabel.string="\u9886\u53d6",this.node.getChildByName("board").getChildByName("btn_2").active=!0):(this.hasGet=!1,this.btnLabel.string="\u6253\u5f00\u4fa7\u8fb9\u680f","ks"==u.pzaChannel.instance().channel&&(this.node.getChildByName("board").getChildByName("btn_2").active=!1,this.btnLabel.string=""))},t.prototype.clickSidebar=function(){s.pzaSoundManager.playSFX();var a=d.default.getData("sidebar",{today:"",canGet:"-1"}),t=new Date,e=t.getUTCFullYear()+"-"+t.getUTCMonth()+"-"+t.getUTCDay();if(this.hasGet)console.log("\u4eca\u65e5\u5956\u52b1\u5df2\u9886\u53d6");else if("0"==a.canGet);else if(e==a.today)console.log("\u4eca\u65e5\u5956\u52b1\u5df2\u9886\u53d6");else{this.hasGet=!0,a.today=e,d.default.saveData("sidebar",a),this.btnLabel.string="\u5df2\u9886\u53d6";var o=[new p.pzaRewardPropData(p.pzaGamePropEnum.PROP_COIN,200)];l.pzaRewardManager.recieveRewards(o,function(){})}},t.prototype.clickClose=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([f(cc.Label)],t.prototype,"btnLabel",void 0),i([f(cc.Node)],t.prototype,"ttView",void 0),i([f(cc.Node)],t.prototype,"ksView",void 0),i([f(cc.Label)],t.prototype,"ks_titleP3",void 0),i([f(cc.Label)],t.prototype,"ks_appName",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc"}],pzaSixPlanternShooter:[function(a,t,e){"use strict";cc._RF.push(t,"85bf5dMZ5BICIaUTLf9pog5","pzaSixPlanternShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSixPlanternShooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Bullet/pzaPeaBullet"),s=a("./pzaBaseShooter"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.checkCdTime=0,t.fixedTime=.3,t.shootCnt=0,t}return n(t,a),t.prototype.logicUpdate=function(a){this.checkCdTime>0&&(this.checkCdTime-=a,this.checkCdTime<=0&&(this.checkCdTime=this.fixedTime,this.shootAtk()))},t.prototype.showShooter=function(){this.checkCdTime=this.fixedTime,this.shootCnt=0,this.shootAtk()},t.prototype.shootAtk=function(){if(this.shootCnt>10)this.close();else{this.shootCnt++;var a=cc.v2(1,0),t=2*Math.PI/6,e=p.pzaNodeManager.getBulletNode(),o=this.node.getPosition();o.y=o.y+50;for(var n=0;n<6;n++){var i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab1);i.setParent(e),i.setPosition(o);var s=i.getComponent(l.pzaPeaBullet);s.setPeaBallType(),n<2?s.init(-1,20,0,null,a.rotate(t*n)):n<4?s.init(-1,20,1,null,a.rotate(t*n)):s.init(-1,20,2,null,a.rotate(t*n)),s.setSpeed(400)}}},t.prototype.close=function(){this.poolPrefab?r.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u],t)}(s.pzaBaseShooter));e.pzaSixPlanternShooter=d,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Bullet/pzaPeaBullet":"pzaPeaBullet","./pzaBaseShooter":"pzaBaseShooter"}],pzaSkeletonZombie:[function(a,t,e){"use strict";cc._RF.push(t,"c71988seSNJ8Kfd4NYzHxUz","pzaSkeletonZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSkeletonZombie=void 0;var r=a("../Data/pzaBuffData"),p=a("../Plant/pzaAttackType"),l=a("../pzaEffectManager"),s=a("../pzaGameState"),c=a("./pzaBaseZombie"),u=a("./pzaZombieSlot"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName=null,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,61.81,13.02,-93.13))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_HYPNOSIS,-1))},t.prototype.createZombieHole=function(){if(!window.pzaplantManager.holeMap.has(""+this.baseData.xIndex+this.baseData.yIndex)&&!(this.baseData.xIndex<0||this.baseData.zombieData.isHoleCreate)){var a=s.pzaGameState.map.getXInterval(this.baseData.xIndex)/2,t=s.pzaGameState.map.getYInterval(this.baseData.yIndex)/2,e=s.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.baseData.yIndex,a,t);l.pzaEffectManager.createZombieHoleEffect(e,this.baseData.xIndex,this.baseData.yIndex)}},t.prototype.death=function(a,t){var e=this;if(void 0===t&&(t=null),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData),!a)return this.close(),void(t!=p.pzaAttackType.DEATH&&this.createZombieHole());this.playDeathAnimation(function(){e.close(),t!=p.pzaAttackType.DEATH&&e.createZombieHole()})},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.createZombieHole()},i([h],t)}(c.pzaBaseZombie));e.pzaSkeletonZombie=m,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaSmallMiniGame:[function(a,t,e){"use strict";cc._RF.push(t,"3c49fk+gI1F5KHZgGXMQrCh","pzaSmallMiniGame");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSmallMiniGame=void 0;var r=a("../Battle/Data/pzaBaseData"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Battle/Data/pzaZombieEnum"),s=a("../Battle/Zombie/pzaBaseZombie"),c=a("../Battle/pzaEffectManager"),u=a("../Battle/pzaGameState"),d=a("../Load/pzaBundleObjectPool"),h=a("../Load/pzaPreLoadManager"),m=a("../View/Battle/pzaPlantBeltView"),f=a("../View/pzaCommonMask"),z=a("../utils/pzaChannel"),y=a("../utils/pzakc"),g=a("./pzaBeltConfig"),b=a("./pzaCollisionManager"),v=a("./pzaGameConfig"),P=a("./pzaGameManager"),D=a("./pzaGameMiniGame"),S=a("./pzaLocalData"),C=a("./pzaSoundManager"),_=a("./pzaStatisticsMgr"),E=a("./pzaUIManager"),M=a("./pzaUtil"),w=a("./pzaWorldEventManager"),T=cc._decorator,B=T.ccclass,A=(T.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.waveZombieDensity=null,t}var e;return n(t,a),e=t,t.prototype.preLoad=function(a,t,e){this.init();var o=this.getConf(t);u.pzaGameState.init(a,t,this.gameMode,this.skipPartStar(),0,o.isnight,o.mapId),this.beforeLoad(a,t),u.pzaGameState.isGameEnd=!1,b.pzaCollisionManager.getInstance.setOn();var n=this.getResArr(a,t);E.pzaUIManager.showLoading(),this.initMapPlantZombie(a,t),C.pzaSoundManager.clearAllLoopAudio(),this.readData(a,t),d.pzaBundleObjectPool.preLoadSubResource(n,function(){E.pzaUIManager.hideLoading(e)},function(a){E.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*a)))}),C.pzaSoundManager.playAudio("loadingbar_zombie"),u.pzaGameState.autoPickLock=!1},t.prototype.gameStart=function(t,e){a.prototype.resetTryPlant.call(this),S.pzaLocalData.gameStartTimeStamp=Date.now();var o=400+e;_.pzaStatisticsMgr.sendLevelEvent(u.pzaGameState.curPart,2,0,0,u.pzaGameMode.MINIGAME),y.default.eventReport(o+"\u5173\u5361\u8fdb\u5165"),u.pzaGameState.gameMode=u.pzaGameMode.SMALL_ZOMBIE,this.beforeGameStart(t,e),this.normalStartGameCall(t,e)},t.prototype.beforeGameStart=function(){_.pzaStatisticsMgr.sendEvent("System",{name:"system",value:13}),f.pzaCommonMask.showMask(),c.pzaEffectManager.createGroveEffect()},t.prototype.normalStartGameCall=function(){window.pzaMapManager.previewMap(function(){f.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){P.pzaGameManager.showBattleUI(h.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var t=a&&a.getComponent(m.pzaPlantBeltView);t&&t.showView(function(){window.pzaMapManager.initCleanCar(),c.pzaEffectManager.createReadyWord(function(){f.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),u.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=8,g.pzaBeltConfig.initMiniSmallPlants(),w.pzaWorldEventManager.triggerEvent(w.pzaWorldEventType.GAME_RESUME,null),C.pzaSoundManager.playBgm(C.pzaBGMName.BOWLING_BGM)})})})})},!0)},t.prototype.createWave=function(t){a.prototype.createWave.call(this,t),t.nextWaveTime=v.pzaGameConfig.miniZombieWaveInterval;var e=this.getConf(u.pzaGameState.curPart);if(!(null==e||e.maxWave<t.wave)){e.maxWave==t.wave&&(t.lastWave=!0);var o=this.getRandomWaveZombie(t.wave,!0,window.pzaMapManager.getIceYCount(),0,u.pzaGameState.redLeft);if(null!=o){var n=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||n.indexOf(a.yIndex)>=0||n.push(a.yIndex)});for(var i=u.pzaGameState.map.getMapRow(),r=!0,p=[],s=[],c=0;c<i;c++)s.push(c);s.sort(function(){return Math.random()-.5});var d=0;o.forEach(function(a){var e=window.pzaMapManager.getRandomWayIndex(d,a,s);if(d++,a==l.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,p);if(null==o)return;p.push(o);var i=o.split("-"),c=t.createFixBlockZombieData(a,parseInt(i[0]),parseInt(i[1]));return t.createZombie(c),void t.curWaveZombieDatas.add(c)}a==l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&n.length>0&&(e=n.shift());var h=t.createZombieData(a,e);!r&&h.logicPos&&(h.logicPos.x+=M.pzaUtil.getRandomFloatNum(.2,1)*u.pzaGameState.map.getBlockWidth()),t.createZombie(h),t.curWaveZombieDatas.add(h),r=!1})}}},t.prototype.createTombWaterWaveData=function(){},t.prototype.lastTombWaterZombie=function(){},t.prototype.getRandomDiveZombie=function(){var a=[l.pzaZombieEnum.DUCKY_TUBE_ZOMBIE],t=this.getConf(u.pzaGameState.curPart).zombieTypes;null!=t&&(t.indexOf(l.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE)>=0&&a.push(l.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),t.indexOf(l.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE)>=0&&a.push(l.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE));var e=[];return a.forEach(function(a){var t=v.pzaGameConfig.getZombieConfig(a);e.push(t.refrshWeight)}),a[M.pzaUtil.getRandomIndexByWeight(e)]},t.prototype.getRandomWaveZombie=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[];if(this.waveZombieDensity=this.getConf(u.pzaGameState.curPart).waveZombieDensity,null==this.waveZombieDensity||a-1<0)return[l.pzaZombieEnum.ZOMBIE];var r=this.waveZombieDensity[a-1];if(null==r||r<=1)return[l.pzaZombieEnum.ZOMBIE];if(t&&a%10==0){i.push(l.pzaZombieEnum.FLAG_ZOMBIE),r-=v.pzaGameConfig.getZombieLevel(l.pzaZombieEnum.FLAG_ZOMBIE);for(var p=Math.min(Math.floor(r/2),8),s=0;s<p;s++)i.push(l.pzaZombieEnum.ZOMBIE),r-=v.pzaGameConfig.getZombieLevel(l.pzaZombieEnum.ZOMBIE)}var c=this.getConf(u.pzaGameState.curPart),d=c.maxWave,h=c.zombieTypes;for(a==d&&a>=10&&h.forEach(function(a){a!=l.pzaZombieEnum.ZOMBIE&&(i.push(a),r-=v.pzaGameConfig.getZombieLevel(a))});r>0;){var m=this.getRandomZombie1(r,a,e,o,n);if(null==m)break;if(m==l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?e--:m==l.pzaZombieEnum.RED_GARGANTUAR&&a%10!=0&&n--,i.push(m),i.length>=50)break;r-=v.pzaGameConfig.getZombieLevel(m)}return i},t.prototype.getRandomZombie1=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[],r=[];if(this.getConf(u.pzaGameState.curPart).zombieTypes.forEach(function(e){if(null!=e){var p=v.pzaGameConfig.getZombieConfig(e);null==p||0==p.refrshWeight||p.refreshLevel>a||p.refrshMinWave>t||o>0&&e==l.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&t%10!=0||(i.push(e),r.push(p.refrshWeight))}}),e>0){var p=v.pzaGameConfig.getZombieConfig(l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM);null!=p&&p.refreshLevel<=a&&(i.push(l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),r.push(p.refrshWeight))}var s=M.pzaUtil.getRandomIndexByWeight(r);return i[s]},t.prototype.createPreviewZombie=function(a,t){var e=M.pzaUtil.getRandomNum(13,14),o=v.pzaGameConfig.miniZombieScale,n=this.getPreviewZombies(e);if(null!=n){var i=[];5==t?(i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),75)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),75)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),125)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),125)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),175)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),175)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),225)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),225)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),275)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),275)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),325)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),325)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),375)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),375)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),75)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),75)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),125)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),125)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),175)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),175)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),225)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),225)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),275)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),275)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),325)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),325)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),375)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),375)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),410)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),410))):(i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),40)),i.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),40)),i.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),40)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),90)),i.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),90)),i.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),90)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),140)),i.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),140)),i.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),140)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),190)),i.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),190)),i.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),190)),i.push(cc.v2(1680+M.pzaUtil.getRandomFloatNum(-20,20),240)),i.push(cc.v2(1780+M.pzaUtil.getRandomFloatNum(-20,20),240)),i.push(cc.v2(1880+M.pzaUtil.getRandomFloatNum(-20,20),240)),i.push(cc.v2(1680+M.pzaUtil.getRandomFloatNum(-20,20),290)),i.push(cc.v2(1780+M.pzaUtil.getRandomFloatNum(-20,20),290)),i.push(cc.v2(1880+M.pzaUtil.getRandomFloatNum(-20,20),290)),i.push(cc.v2(1680+M.pzaUtil.getRandomFloatNum(-20,20),340)),i.push(cc.v2(1780+M.pzaUtil.getRandomFloatNum(-20,20),340)),i.push(cc.v2(1880+M.pzaUtil.getRandomFloatNum(-20,20),340)),i.push(cc.v2(1670+M.pzaUtil.getRandomFloatNum(-30,30),390)),i.push(cc.v2(1770+M.pzaUtil.getRandomFloatNum(-30,30),390)),i.push(cc.v2(1670+M.pzaUtil.getRandomFloatNum(-30,30),440)),i.push(cc.v2(1770+M.pzaUtil.getRandomFloatNum(-30,30),440)),i.push(cc.v2(1670+M.pzaUtil.getRandomFloatNum(-30,30),490)),i.push(cc.v2(1770+M.pzaUtil.getRandomFloatNum(-30,30),490)),i.push(cc.v2(1660+M.pzaUtil.getRandomFloatNum(-20,20),540)),i.push(cc.v2(1700+M.pzaUtil.getRandomFloatNum(-20,20),540))),i.sort(function(){return Math.random()-.5});for(var p=function(t,e){var n=h.pzaPreLoadManager.getZombieUrl(t);d.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(n,i){if(null==n&&null!=i){i.setParent(a.previewZombieNode),i.setPosition(e),i.zIndex=-e.y;var p=i.getComponent(s.pzaBaseZombie),l=new r.pzaBaseData(null,t);l.hp=1,l.logicPos=e,p&&p.preview(l,a.previewShadowNode,o),a.PreviewZombies.add(p)}else console.error(n)})},c=0;c<n.length;c++){var u=n[c],m=i[c];u==l.pzaZombieEnum.BUNGEE_ZOMBIE&&(m=5==t?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),p(u,m)}C.pzaSoundManager.playBgm(C.pzaBGMName.PRE_BGM)}},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1,t.skipPartBtn.active=!1,t.freePlantNode.active=!0,t.speedBtn.active=!0},t.prototype.getAdPlantArr=function(){return[p.pzaPlantEnum.GATLING_PEA,p.pzaPlantEnum.GLOOM_SHROOM,p.pzaPlantEnum.CATTAIL,p.pzaPlantEnum.WINTER_MELON,p.pzaPlantEnum.GOLD_MAGNET,p.pzaPlantEnum.SPIKEROCK,p.pzaPlantEnum.COB_CANNON]},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=!1,z.pzaChannel.isConfRemote?a.cherryBombNode.active=!0:a.cherryBombNode.active=!1,a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.isLastWave=function(a){var t=P.pzaGameManager.getGame(u.pzaGameMode.SMALL_ZOMBIE,e).getConf(u.pzaGameState.curPart);return a.wave==t.maxWave},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=P.pzaGameManager.getGame(u.pzaGameMode.SMALL_ZOMBIE,e).getConf(u.pzaGameState.curPart);a.maxWave=t.maxWave;for(var o=Math.floor(a.maxWave/10),n=0;n<a.partFlags.length;n++){var i=a.partFlags[n];n+1>o?i.active=!1:(i.active=!0,i.setPosition(-315*(n+1)/o-30,42))}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0;var r=this.getConf(u.pzaGameState.curPart).name;a.partLabel.string=r},e=i([B],t)}(D.pzaGameMiniGame));e.pzaSmallMiniGame=A,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantBeltView":"pzaPlantBeltView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBeltConfig":"pzaBeltConfig","./pzaCollisionManager":"pzaCollisionManager","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGameMiniGame":"pzaGameMiniGame","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaSnorkelSharkZombie:[function(a,t,e){"use strict";cc._RF.push(t,"d6759oE7BhF0b18wVMYhFOP","pzaSnorkelSharkZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSnorkelSharkZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../pzaEffectManager"),s=a("./pzaZombieState"),c=a("../pzaGameState"),u=a("../Data/pzaZombieEnum"),d=a("./pzaSnorkelZombie"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="biaoqing2",t.recordX=0,t.recordY=0,t}return n(t,a),t.prototype.initEquips=function(){a.prototype.initEquips.call(this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.recordX=0,this.recordY=0},t.prototype.logicUpdate=function(a){if(this.baseData.zombieData.frozen&&(this.baseData.zombieData.frozen=!1,l.pzaEffectManager.createFrozenEffect(this.baseData)),this.breakDirtTime>0){this.breakDirtTime-=a;var t=-Math.max(0,this.breakDirtTime/.3)*this.breakDirtHeight+this.animationYOffset;return this.animation.node.y=t*this.zombieScale,void(this.breakDirtTime<=0&&null!=this.mask&&(this.mask.enabled=!1,this.curShadow&&this.curShadow.showShadow(),this.breakCall&&this.breakCall()))}if(null!=this.baseData&&null!=this.baseData.zombieData&&(!this.isPlayEquipDeath||this.baseData.buffData.hasBuff(p.pzaBuffType.FROZEN))&&!this.baseData.isDead){if(c.pzaGameState.allZombieInvisible?this.node.opacity=0:this.node.opacity=255,this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(a);else{var e=this.findTarget();(3==c.pzaGameState.curChapter||4==c.pzaGameState.curChapter)&&this.baseData.xIndex<0&&(e=null),e&&!e.isDead&&this.eatTime<=0?this.attack(a,e):this.updateMove(a)}else this.changeRowMove(a)}},t.prototype.updateMove=function(t){a.prototype.updateMove.call(this,t),(this.diving||this.isJumping)&&this.eatTime>0&&(this.eatTime-=t,this.eatTime<=0&&this.checkHasPlant())},t.prototype.checkHasPlant=function(){this.zombieState=s.pzaZombieState.STAY,this.diving=!1},t.prototype.attack=function(a,t){var e=this;if(!this.diving||0==a)return this.diving=!0,this.animation.playAnimation(this.hasInWater?"attack":"attack2",!1,function(){var a=""+t.xIndex+t.yIndex,o=window.pzaplantManager.plantDataMap.get(a);if(null!=o){e.recordX=t.xIndex,e.recordY=t.yIndex;var n=window.pzaplantManager.getPlantByData(o);return n&&n.hurt(100*e.baseData.atk,e.baseData),e.eatTime=15,void e.animation.playAnimation(e.hasInWater?"attack_1":"attack2_1",!0)}var i=window.pzaplantManager.plantEnvDataMap.get(a);if(null!=i){e.recordX=t.xIndex,e.recordY=t.yIndex;var r=window.pzaplantManager.getPlantByData(i);return r&&r.hurt(100*e.baseData.atk,e.baseData),e.eatTime=15,void e.animation.playAnimation(e.hasInWater?"attack_1":"attack2_1",!0)}e.diving=!1,e.playMoveAnimation()}),this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE)?(this.diving=!0,r.pzaSoundManager.playAudio("zombie_leave_water"),void this.baseData.buffData.removeBuff(p.pzaBuffType.DIVE)):void 0},t.prototype.zombieHurt=function(){this.zombieHurtState=u.pzaHurtStateEnum.HURT,"biaoqing1"==this.curSkinName&&(this.curSkinName="biaoqing1_1"),"biaoqing2"==this.curSkinName&&(this.curSkinName="biaoqing2_1"),this.changeSkin(this.curSkinName)},i([m],t)}(d.pzaSnorkelZombie));e.pzaSnorkelSharkZombie=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaSnorkelZombie":"pzaSnorkelZombie","./pzaZombieState":"pzaZombieState"}],pzaSnorkelTangleZombie:[function(a,t,e){"use strict";cc._RF.push(t,"6d9c2T6yyxGfY3qNAAYbNjm","pzaSnorkelTangleZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSnorkelTangleZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../pzaEffectManager"),l=a("../Data/pzaZombieEnum"),s=a("./pzaSnorkelZombie"),c=a("../Data/pzaPlantEnum"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="biaoqing2",t}return n(t,a),t.prototype.initEquips=function(){a.prototype.initEquips.call(this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.attack=function(t,e){var o=this;if(!this.hasInWater)return a.prototype.attack.call(this,t,e);if(!this.diving){if(e&&e.plantData&&!e.isDead&&e.plantData.plantType==c.pzaPlantEnum.SEAFUME_SHROOM)return a.prototype.attack.call(this,t,e);this.diving=!0,r.pzaSoundManager.playAudio("floop"),r.pzaSoundManager.playAudio("TangleKelp"),this.animation.playAnimation("attack3",!1,function(){var a=""+e.xIndex+e.yIndex,t=window.pzaplantManager.plantDataMap.get(a);if(null!=t){var n=window.pzaplantManager.getPlantByData(t);return p.pzaEffectManager.createWaterFlowerEffect(e.yIndex,cc.v2(e.logicPos.x+7,e.logicPos.y+3),null,.5),p.pzaEffectManager.createWaterFlowerEffect(o.baseData.yIndex,o.baseData.logicPos,null,.5),n&&n.hurt(20*o.baseData.atk,o.baseData),void o.dragDeath()}var i=window.pzaplantManager.plantEnvDataMap.get(a);if(null!=i){var r=window.pzaplantManager.getPlantByData(i);return r&&r.hurt(20*o.baseData.atk,o.baseData),p.pzaEffectManager.createWaterFlowerEffect(e.yIndex,cc.v2(e.logicPos.x+7,e.logicPos.y+3),null,.5),p.pzaEffectManager.createWaterFlowerEffect(o.baseData.yIndex,o.baseData.logicPos,null,.5),void o.dragDeath()}o.diving=!1,o.playMoveAnimation()})}},t.prototype.dragDeath=function(){var a=this;this.animation.playAnimation("death3",!1,function(){a.death(!1)})},t.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,"biaoqing1"==this.curSkinName&&(this.curSkinName="biaoqing1_1"),"biaoqing2"==this.curSkinName&&(this.curSkinName="biaoqing2_1"),this.changeSkin(this.curSkinName)},i([d],t)}(s.pzaSnorkelZombie));e.pzaSnorkelTangleZombie=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaSnorkelZombie":"pzaSnorkelZombie"}],pzaSnorkelZombie:[function(a,t,e){"use strict";cc._RF.push(t,"17264xFfYRMaY/c70hgyGYu","pzaSnorkelZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSnorkelZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../pzaEffectManager"),s=a("./pzaBaseZombie"),c=a("./pzaZombieState"),u=a("./pzaZombieSlot"),d=a("../Data/pzaZombieEnum"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="biaoqing2",t.diving=!1,t.isJumping=!1,t.eatTime=0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,-19.69,85.77))]])},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.animation.node.y=0},t.prototype.preview=function(t,e,o){a.prototype.preview.call(this,t,e,o),this.animation.node.y=0*this.zombieScale},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.diving=!1,this.animation.node.y=20},t.prototype.updateMove=function(t){var e=this;if(!this.diving&&!this.isJumping){if(!this.hasInWater)return a.prototype.updateMove.call(this,t);var o=this.baseData.xIndex;if(this.garlicChangeR){if(o>=0&&!this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE))return this.diving=!0,void this.animation.playAnimation("down",!1,function(){e.diving=!1,e.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.DIVE,-1)),e.playMoveAnimation()});a.prototype.updateMove.call(this,t);var n=this.baseData.xIndex;o<0&&n>=0?(this.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.DIVE,-1)),this.curShadow&&this.curShadow.hideShadow(),this.isJumping=!0,this.animation.playAnimation("jump",!1,function(){e.isJumping=!1,e.playMoveAnimation()},function(){r.pzaSoundManager.playAudio("zombie_entering_water"),l.pzaEffectManager.createWaterFlowerEffect(e.baseData.yIndex,e.baseData.logicPos,null)})):n<0&&o>=0&&(null!=this.mask&&(this.mask.enabled=!0),r.pzaSoundManager.playAudio("zombie_leave_water"),l.pzaEffectManager.createWaterFlowerEffect(this.baseData.yIndex,this.baseData.logicPos,null),this.animation.node.y=-85*this.zombieScale,this.animation.playAnimation("move",!0),this.animation.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,20*this.zombieScale)),cc.callFunc(function(){e.curShadow&&e.curShadow.showShadow(),null!=e.mask&&(e.mask.enabled=!1)}))))}else a.prototype.updateMove.call(this,t)}},t.prototype.attack=function(t,e){var o=this;return this.hasInWater?this.diving?void 0:this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE)?(this.diving=!0,r.pzaSoundManager.playAudio("zombie_leave_water"),void this.animation.playAnimation("up",!1,function(){o.diving=!1,o.baseData.buffData.removeBuff(p.pzaBuffType.DIVE)})):void a.prototype.attack.call(this,t,e):a.prototype.attack.call(this,t,e)},t.prototype.playMoveAnimation=function(){if(!this.hasInWater)return a.prototype.playMoveAnimation.call(this);this.zombieState=c.pzaZombieState.MOVE,this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE)||!this.garlicChangeR?this.animation.playAnimation("move2",!0):this.animation.playAnimation("move",!0)},t.prototype.zombieHurt=function(){this.zombieHurtState=d.pzaHurtStateEnum.HURT,"biaoqing1"==this.curSkinName&&(this.curSkinName="biaoqing1_1"),"biaoqing2"==this.curSkinName&&(this.curSkinName="biaoqing2_1"),this.changeSkin(this.curSkinName)},t.prototype.onWaterEnter=function(){},t.prototype.onWaterExit=function(){this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE)&&(r.pzaSoundManager.playAudio("zombie_leave_water"),this.baseData.buffData.removeBuff(p.pzaBuffType.DIVE))},i([m],t)}(s.pzaBaseZombie));e.pzaSnorkelZombie=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaSnowBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"7c6fbo6q+BFrawlX/VV8KkB","pzaSnowBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSnowBaseBullet=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Effect/pzaBaseEffect"),u=a("./pzaBaseBullet"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.colliderZombie=function(a){if(a&&!a.isDead)if(null!=a.zombieData){if(a.zombieData&&a.zombieData.hypnosis)this.close();else if(!a.buffData.hasBuff(l.pzaBuffType.DIVE)&&!a.buffData.hasBuff(l.pzaBuffType.FLY))if(a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE))this.close();else{var t=window.pzazombieManager.getZombie(a);if(null!=t){if(t.hurt(this.atk),this.close(),this.hitPrefab){var e=cc.v2(this.node.x,this.node.y),o=p.pzaNodeManager.getPlantZombieNode(),n=r.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.setPosition(e);var i=n.getComponent(c.pzaBaseEffect);i&&i.showEffect(null,null),a.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||t.baseData.zombieData.zombieType!=s.pzaZombieEnum.NightWear&&a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5))}}else this.close()}}else this.close()},i([h],t)}(u.pzaBaseBullet));e.pzaSnowBaseBullet=m,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","./pzaBaseBullet":"pzaBaseBullet"}],pzaSnowDragonShooter:[function(a,t,e){"use strict";cc._RF.push(t,"dc3223CWeNHuovKlZd0QX3N","pzaSnowDragonShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSnowDragonShooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaBaseBullet"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaZombieEnum"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=a("./pzaAttackType"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.playNormalAni()},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=window.pzazombieManager.getCanAttackZombies(a.baseData,8);if(e&&e.length>0)return l.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(null!=a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x+a.shootNode.x,a.baseData.logicPos.y+a.shootNode.y);d.pzaEffectManager.createIceFumeShroomEffect(a.baseData.yIndex,t,null),a.hurtZombies(e),a.attack()}});a.animation.playAnimation("idle2",!0,t)};t()},t.prototype.attack=function(){for(var a=this,t=0;t<4;t++)this.scheduleOnce(function(){if(null!=a.baseData&&!a.baseData.isDead){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(a.bulletPrefab);if(null!=e){e.setParent(t);var o=a.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o);e.setPosition(n);var i=e.getComponent(s.pzaBaseBullet);if(null!=i){i.setPeaBallType(),i.init(a.baseData.yIndex,a.baseData.atk);var l=h.pzaGameState.map.getMapSkewColumn();l>0&&a.baseData.xIndex<=l-2&&(i.maxPosX=a.baseData.logicPos.x+1.5*h.pzaGameState.map.getBlockWidth())}}}}},.1*t)},t.prototype.hurtZombies=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=t.baseData){a.zombieData.zombieType==u.pzaZombieEnum.NightWear||a.buffData.hasBuff(c.pzaBuffType.IMM_ICE)||a.buffData.addBuff(new c.pzaBuffInfo(c.pzaBuffType.FROST,5,.5));var e=window.pzazombieManager.getZombie(a);e&&e.hurt(t.baseData.atk,t.baseData,m.pzaAttackType.PENETRATE)}})},i([g({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([g({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([y],t)}(f.pzaBasePlant);e.pzaSnowDragonShooter=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSnowPea:[function(a,t,e){"use strict";cc._RF.push(t,"d0858T0P0xCCbkWdXg2wTUe","pzaSnowPea");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSnowPea=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaBaseBullet"),c=a("../Data/pzaBuffData"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),u.pzaGameState.isZombieMode())return this.attacking=!1,void this.animation.playAnimation("T_idle",!0);var o=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData))return l.pzaSoundManager.playAudio("SnowPeaAtk"),void e.animation.playAnimation("attack",!1,o,function(){e.shoot()});e.animation.playAnimation("idle",!1,o)};o(),u.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData)return!this.attacking&&u.pzaGameState.isZombieMode()&&(window.pzazombieManager.hasCanAttackZombie(this.baseData)||this.findAttackTarget())?(l.pzaSoundManager.playAudio("SnowPeaAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot()})):void 0},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(s.pzaBaseBullet);if(null!=n){n.setPeaBallType(),n.init(this.baseData.yIndex,this.baseData.atk);var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},t.prototype.findAttackTarget=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)?null:a.baseData},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaSnowPea=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSoundManager:[function(a,t,e){"use strict";cc._RF.push(t,"b22d3Pe1rVO/psEpbJ2xye9","pzaSoundManager");var o=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var o,n,i=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBGMName=e.pzaSoundManager=void 0;var i=a("../../start/pzaBundleController"),r=a("../Battle/pzaGameState"),p=a("../utils/pzaChannel"),l=a("./pzaLocalData"),s=function(){function a(){}return a.playAudio=function(a,t,e){var o=this;l.pzaLocalData.data.soundValue<=0||this.getAudioByName(a,function(a){if(null!=a){if(null!=t){var n=Date.now(),i=o.soundTimeMap.get(a);if(null!=i&&(n-i)/1e3<t)return;o.soundTimeMap.set(a,n)}if("qq"==p.pzaChannel.instance().channel)o.qqPlayAudio(a.nativeUrl);else{var r=cc.audioEngine.playEffect(a,!1);e&&e(r)}}})},a.getAudioByName=function(a,t){var e=this;if(null!=a){var o=this.gameSoundMap.get(a);null==o?cc.assetManager.loadBundle(i.pzaBundleType.Audio,function(o,n){!o&&n?n.load(a,cc.AudioClip,function(o,n){if(!o&&n){var i=e.gameSoundMap.get(a);null==i?(t&&t(n),e.gameSoundMap.set(a,n),p.pzaChannel.isConfRemote&&console.log("\u6210\u529f\u52a0\u8f7d\u97f3\u4e50",a)):t&&t(i)}else console.error(o)}):console.error(o)}):t&&t(o)}},a.playBattleAudio=function(a,t,e){l.pzaLocalData.data.soundValue<=0||this.playAudio(a,t,e)},a.stop=function(a){null!=a&&cc.audioEngine.getState(a)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.stop(a)},a.playBgm=function(a){var t=this;if(!(r.pzaGameState.setBgmCount>3||(r.pzaGameState.setBgmCount++,null!=a&&a==this.lastbgmName&&cc.audioEngine.isMusicPlaying()||(null==a&&(a=this.lastbgmName),null==a||(this.lastbgmName=a,l.pzaLocalData.data.musicValue<=0))))){var e=this.gameSoundMap.get(a);if(e)return cc.audioEngine.playMusic(e,!0),void this.setMusicVolume(l.pzaLocalData.data.musicValue);this.getAudioByName(a,function(a){cc.audioEngine.playMusic(a,!0),t.setMusicVolume(l.pzaLocalData.data.musicValue)})}},a.stopBgm=function(){cc.audioEngine.isMusicPlaying()&&cc.audioEngine.stopMusic(),this.clearAllLoopAudio()},a.pausePlayMusic=function(){cc.audioEngine.isMusicPlaying()&&cc.audioEngine.pauseMusic()},a.setMusicVolume=function(a){null==a||a<=0?this.stopBgm():cc.audioEngine.isMusicPlaying()?cc.audioEngine.setMusicVolume(a):this.resumeMusic()},a.resumeMusic=function(){l.pzaLocalData.data.musicValue<=0||null==this.lastbgmName||cc.audioEngine.isMusicPlaying()||this.playBgm(this.lastbgmName)},a.playLongAudio=function(a,t,e,o){var n=this;l.pzaLocalData.data.soundValue<=0||this.getAudioByName(a,function(i){if(null!=i){if(null!=e){var r=Date.now(),p=n.soundTimeMap.get(i);if(null!=p&&(r-p)/1e3<e)return;n.soundTimeMap.set(i,r)}var l=cc.audioEngine.playEffect(i,!1),s=a+t;n.longAudioMap.set(s,l),n.longId2AudioIdMap.set(t,l),o&&o(l)}})},a.resumeLongAudio=function(){var a,t;if(this.longAudioMap.size>0)try{for(var e=o(this.longAudioMap),i=e.next();!i.done;i=e.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PAUSED&&cc.audioEngine.resume(p)}}catch(l){a={error:l}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(a)throw a.error}}},a.stopLongAudio=function(){var a,t;if(this.longAudioMap.size>0)try{for(var e=o(this.longAudioMap),i=e.next();!i.done;i=e.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.pause(p)}}catch(l){a={error:l}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(a)throw a.error}}},a.deleteLongAudio=function(a,t){if(null!=a){var e=this.longId2AudioIdMap.get(t);cc.audioEngine.getState(e)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.stop(e),this.longId2AudioIdMap.delete(t);var o=a+t;this.longAudioMap.delete(o)}},a.cleatAllLongAudio=function(){this.longAudioMap.forEach(function(a){cc.audioEngine.stop(a)}),this.longAudioMap.clear(),this.longId2AudioIdMap.clear()},a.playLoopAudio=function(a,t,e){var o=this;if(!(l.pzaLocalData.data.soundValue<=0||null==a||this.loopAudioNameArr.indexOf(a)>=0)){var n=this.loopSoundMap.get(a);cc.audioEngine.getState(n)!=cc.audioEngine.AudioState.PLAYING&&(this.getAudioByName(a,function(n){if(null!=n){var i=cc.audioEngine.playEffect(n,t);o.loopSoundMap.set(a,i),e&&e(i)}}),this.loopAudioNameArr.push(a))}},a.stopLoopAudio=function(){var a,t;try{for(var e=o(this.loopSoundMap),i=e.next();!i.done;i=e.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.pause(p)}}catch(l){a={error:l}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(a)throw a.error}}},a.resumeLoopAudio=function(){var a,t;try{for(var e=o(this.loopSoundMap),i=e.next();!i.done;i=e.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PAUSED&&cc.audioEngine.resume(p)}}catch(l){a={error:l}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(a)throw a.error}}},a.deleteLoopAudioName=function(a){if(!(null==a||this.loopAudioNameArr.indexOf(a)<0)){var t=this.loopSoundMap.get(a);if(t){if(cc.audioEngine.getState(t)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.stop(t),this.loopSoundMap.delete(a),this.loopAudioNameArr.indexOf(a)>=0){var e=this.loopAudioNameArr.indexOf(a);this.loopAudioNameArr.splice(e,1)}}else console.error("audioName\u4e0d\u5b58\u5728",a)}},a.clearAllLoopAudio=function(){this.loopSoundMap.forEach(function(a){cc.audioEngine.stop(a)}),this.loopSoundMap.clear(),this.loopAudioNameArr=[],this.cleatAllLongAudio()},a.playSFX=function(){var a=Math.random()>.5?"tap":"tap2";this.playAudio(a)},a.initQQPlayAudio=function(){},a.qqPlayAudio=function(a){if(a){var t=window.qq,e=this.qqAudioMap.get(a);e||((e=t.createInnerAudioContext()).onError(function(a){a&&a.errCode,e.offEnded(function(){}),e.offError(function(){}),e.destroy()}),this.qqAudioMap.set(a,e)),e&&(e.src=a,e.loop=!1,e.play())}},a.myPlayAudio=function(a,t){if(void 0===t&&(t=!1),a){var e=window.my.createInnerAudioContext();e&&(this.innerAudio=e,e.onEnded(function(){e.offEnded(function(){}),e.offError(function(){}),e.destroy()}),e.onError(function(a){a&&a.errCode,e.offEnded(function(){}),e.offError(function(){}),e.destroy()}),e.onCanPlay(function(){e.play()}),e.src=a,e.loop=t,e.play())}},a.gameSoundMap=new Map,a.soundTimeMap=new Map,a.loopSoundMap=new Map,a.loopAudioNameArr=[],a.longAudioMap=new Map,a.longId2AudioIdMap=new Map,a.lastbgmName=null,a.innerAudio=null,a.qqAudioMap=new Map,a}();e.pzaSoundManager=s,function(a){a.LOADING="loadingbgm",a.PRE_BGM="fightbeforebgm",a.CHAPTER_1="Grasswalk",a.CHAPTER_2="Moongrains",a.CHAPTER_3="WateryGraves",a.CHAPTER_4="RigorMormist",a.CHAPTER_5="GrazetheRoof",a.GARDEN="ZenGarden",a.BOWLING_BGM="BowlingBgm",a.BELT_BGM="BeltBgm",a.PUZZLE_BGM="PuzzleBgm",a.RAIN_BGM="rain",a.NEWPLANT_BGM="newplant",a.ZOMBIEBOSS_BGM="zombiebossbgm"}(e.pzaBGMName||(e.pzaBGMName={})),cc._RF.pop()},{"../../start/pzaBundleController":void 0,"../Battle/pzaGameState":"pzaGameState","../utils/pzaChannel":"pzaChannel","./pzaLocalData":"pzaLocalData"}],pzaSpeedBlinkEffect:[function(a,t,e){"use strict";cc._RF.push(t,"3ba1eDemKtOa7Hl1T9eYLkk","pzaSpeedBlinkEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpeedBlinkEffect=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani=null,t.mask=null,t.aniEvent=null,t}return n(t,a),t.prototype.playTransition=function(a){this.aniEvent=a,this.node.active=!0,this.ani.play("transitionAni")},t.prototype.onAniEvent=function(){this.aniEvent&&this.aniEvent()},t.prototype.blinkGreen=function(){this.node.active=!0,this.mask.color=cc.Color.fromHEX(cc.color(),"#78db30"),this.ani.play("speed_blink")},t.prototype.blinkRed=function(){this.node.active=!0,this.mask.color=cc.Color.fromHEX(cc.color(),"#ff865e"),this.ani.play("speed_blink")},t.prototype.blinkWhite=function(){this.node.active=!0,this.mask.color=cc.Color.fromHEX(cc.color(),"#ffffff"),this.ani.play("speed_blink")},i([l({displayName:"\u52a8\u753b",type:cc.Animation})],t.prototype,"ani",void 0),i([l({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([p],t)}(cc.Component);e.pzaSpeedBlinkEffect=s,cc._RF.pop()},{}],pzaSpikeChomper:[function(a,t,e){"use strict";cc._RF.push(t,"3c7b00HOItMMJjB7u3FLeto","pzaSpikeChomper");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpikeChomper=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaAttackType"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.eating=!1,t.eatAct=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.eating=!1,this.baseData.plantData.eatTime=0,this.baseData.plantData.cate=s.pzaPlantCate.Spike,this.animation.playAnimation("idle1",!0),this.baseData.plantData.atkInterval=0,this.baseData.plantData.atkInterval2=0,this.baseData.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead&&!this.eating){if(this.baseData.plantData.eatTime>0)return this.baseData.plantData.eatTime-=t,this.baseData.plantData.eatTime<=0?(this.eating=!0,void this.animation.playAnimation("back",!1,function(){e.eating=!1,e.animation.playAnimation("idle1",!0)})):(this.baseData.plantData.atkInterval-=t,void(this.baseData.plantData.atkInterval<0&&this.findSpikeAttackTarget()&&(this.baseData.plantData.atkInterval=this.atkInterval,this.spikeAttack())));if(this.baseData.plantData.atkInterval2>0)this.baseData.plantData.atkInterval2-=t;else{var o=this.findAttackTarget();null!=o&&(this.baseData.plantData.atkInterval2=1.5,this.attack(o))}}},t.prototype.findAttackTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1;if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.DIVE))&&(o.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(l.pzaBuffType.FROZEN)||o.zombieData.toolType==c.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType!=c.pzaZombieEnum.BUNGEE_ZOMBIE||o.xIndex!=a.baseData.xIndex)){var n=p.pzaUtil.getDistance(o.logicPos,a.baseData.logicPos);if(o.logicPos.x<=a.baseData.logicPos.x)n<=.5*d.pzaGameState.map.getBlockWidth()&&(t=o,e=0);else if(!(n>1.8*d.pzaGameState.map.getBlockWidth()))return-1==e?(t=o,void(e=n)):void(e<=n||(t=o,e=n))}}),null==t){var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t}},t.prototype.findSpikeAttackTarget=function(){var a=this;if(null==this.baseData)return null;var t=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(e){null==t&&(null==e||e.isDead||e.buffData.hasBuff(l.pzaBuffType.FLY)||e.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||e.xIndex==a.baseData.xIndex&&(t=e))}),t},t.prototype.spikeAttack=function(){var a=this;this.eatAct||(r.pzaSoundManager.playAudio("Spikeweed"),this.animation.playAnimation("attack2",!1,function(){a.animation.playAnimation(a.baseData.plantData.eatTime>0?"idle2":"idle1",!0)}),null==this.baseData||this.baseData.isDead||window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(!(null==t||t.isDead||t.buffData.hasBuff(l.pzaBuffType.FLY)||t.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT))&&t.xIndex==a.baseData.xIndex){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.plantData.atkArr[1],a.baseData,h.pzaAttackType.SPIKE)}}))},t.prototype.attack=function(a){var t=this;this.eatAct=!0,this.baseData.plantData.eatTime=40,this.animation.playAnimation("attack1",!1,function(){t.animation.playAnimation(t.baseData.plantData.eatTime>0?"idle2":"idle1",!0)},function(){if(t.eatAct=!1,t.baseData&&!t.baseData.isDead){var e=window.pzazombieManager.getZombie(a);if(null==e||null==e.baseData||e.baseData.isDead)t.baseData.plantData.eatTime=0;else{if(null!=a.zombieData&&(a.zombieData.cate===c.pzaZombieCate.Gargantuar||a.zombieData.cate===c.pzaZombieCate.IceCar||a.zombieData.zombieType==c.pzaZombieEnum.DR_ZOMBOSS))return e.hurt(t.baseData.atk,t.baseData,h.pzaAttackType.FLOOR_ATK),void(t.baseData.plantData.eatTime=0);e.hurt(t.baseData.atk,t.baseData,h.pzaAttackType.EAT),r.pzaSoundManager.playAudio("ChomperAtk"),a.isDead||(t.baseData.plantData.eatTime=0)}}})},t.prototype.hurt=function(a,t,e){if(this.baseData)if(e==h.pzaAttackType.BOOM)window.pzaplantManager.removePlant(this.baseData),this.death(t);else if(e==h.pzaAttackType.BANG)return this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()},t.prototype.deadAttack=function(){var a=this,t=d.pzaGameState.map.getXInterval(this.baseData.xIndex)/2,e=d.pzaGameState.map.getYInterval(this.baseData.yIndex)/3;d.pzaGameState.isRoofMode()&&(e=d.pzaGameState.map.getYInterval(this.baseData.yIndex)/6);var o=d.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.baseData.yIndex,t,e);o.y-=50,u.pzaEffectManager.createMineBoomEffect(o),window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(!(null==t||t.isDead||t.buffData.hasBuff(l.pzaBuffType.FLY)||t.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT))&&t.xIndex==a.baseData.xIndex){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(1800,a.baseData,h.pzaAttackType.FLOOR_ATK)}})},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.deadAttack()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.deadAttack()},i([z],t)}(m.pzaBasePlant));e.pzaSpikeChomper=y,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSpikeRockNut:[function(a,t,e){"use strict";cc._RF.push(t,"304beCVvU9EGZSEPDWKsxKD","pzaSpikeRockNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpikeRockNut=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaPlantEnum"),s=a("./pzaAttackType"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.xArr=[],t}return n(t,a),t.prototype.canAttack=function(a){for(var t=0;t<this.xArr.length;t++)if(a===this.xArr[t])return!0;return!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=l.pzaPlantCate.Nut;var e=this.baseData.xIndex;this.xArr=[e],0==e?this.xArr.push(e+1):8==e?this.xArr.push(e-1):(this.xArr.push(e-1),this.xArr.push(e+1)),this.animation.playAnimation("idle",!0)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.atkInterval-=t,this.atkInterval>0||(this.atkInterval=this.baseData.plantData.atkInterval,null!=this.findAttackTarget()&&this.attack())},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData)return null;var t=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(e){null==t&&(null==e||e.isDead||e.buffData.hasBuff(p.pzaBuffType.FLY)||e.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)||a.canAttack(e.xIndex)&&(t=e))}),t},t.prototype.attack=function(){var a=this;r.pzaSoundManager.playAudio("Spikeweed"),this.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("idle",!0)}),null==this.baseData||this.baseData.isDead||window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(a.baseData&&t&&!t.isDead&&!t.buffData.hasBuff(p.pzaBuffType.FLY)&&!t.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)&&a.canAttack(t.xIndex)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,s.pzaAttackType.SPIKE)}})},t.prototype.hurt=function(t,e,o){if(this.baseData){if(o==s.pzaAttackType.BOOM)return window.pzaplantManager.removePlant(this.baseData),void this.death(e);if(o==s.pzaAttackType.BANG){if(t=this.baseData.maxHp/8,this.baseData.hurtPlanet(t),this.refreshHurtState(!1),!this.baseData.isDead)return;return window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()}a.prototype.hurt.call(this,t,e,o)}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin1")},i([d],t)}(c.pzaBasePlant));e.pzaSpikeRockNut=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSpikerock:[function(a,t,e){"use strict";cc._RF.push(t,"fd1cd8QNDZCH6f0AV+eOBfD","pzaSpikerock");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpikerock=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaTipManager"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaPlantEnum"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=c.pzaPlantCate.Spike,t.plantData.canBeShoot=!1,this.animation.playAnimation("idle",!0),this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),u.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.isDead||(this.blinkTime-=t,this.baseData.plantData.atkInterval+=t,this.baseData.plantData.atkInterval<this.atkInterval?this.blinkTime<=0&&(this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("idle_eye",!1,function(){e.animation.playAnimation("idle",!0)})):null!=this.findAttackTarget()&&this.attack())},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData)return null;var t=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(e){null==t&&(null==e||e.isDead||e.buffData.hasBuff(s.pzaBuffType.FLY)||e.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||e.xIndex==a.baseData.xIndex&&(t=e))}),t},t.prototype.attack=function(){var a=this;r.pzaSoundManager.playAudio("Spikeweed"),this.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("idle",!0)}),null==this.baseData||this.baseData.isDead||(this.baseData.plantData.atkInterval=0,window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(a.baseData&&null!=t&&!t.isDead&&!t.buffData.hasBuff(s.pzaBuffType.FLY)&&!t.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)&&t.xIndex==a.baseData.xIndex){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.SPIKE)}}))},t.prototype.hurt=function(a,t,e){if(this.baseData)if(e==d.pzaAttackType.BOOM)window.pzaplantManager.removePlant(this.baseData),this.death(t),u.pzaGameState.partStar>0&&u.pzaGameState.lossPlantCount==u.pzaGameState.lossStarCount&&(p.pzaTipManager.showLossStarTip(!1,!0),u.pzaGameState.partStar--),u.pzaGameState.lossPlantCount++;else if(e==d.pzaAttackType.BANG){if(this.baseData.hurtPlanet(a),this.refreshHurtState(!1),!this.baseData.isDead)return;return window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin1")},i([f],t)}(h.pzaBasePlant));e.pzaSpikerock=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSpikeweed:[function(a,t,e){"use strict";cc._RF.push(t,"4ecf2vQkM1HfaFg6WAuXHm/","pzaSpikeweed");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpikeweed=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaTipManager"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaPlantEnum"),u=a("../Data/pzaZombieEnum"),d=a("../pzaGameState"),h=a("./pzaAttackType"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=c.pzaPlantCate.Spike,t.plantData.canBeShoot=!1;var o=d.pzaGameState.isZombieMode()?"T_idle":"idle";if(this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),d.pzaGameState.onlyShroomCofee=!1,this.baseData.plantData.atkInterval=this.atkInterval,d.pzaGameState.isZombieMode())this.animation.playAnimation(o,!0);else{var n=function(){e.blinkTime>0?e.animation.playAnimation(o,!1,n):(e.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,n))};n()}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.isDead||(this.blinkTime-=t,this.baseData.plantData.atkInterval-=t,this.baseData.plantData.atkInterval>0||(this.baseData.plantData.atkInterval=this.atkInterval,null!=this.findAttackTarget()&&this.attack()))},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData)return null;var t=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(e){null==t&&(null==e||e.isDead||e.buffData.hasBuff(s.pzaBuffType.FLY)||e.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||e.xIndex!=a.baseData.xIndex&&e.zombieData.cate!=u.pzaZombieCate.IceCar||e.zombieData.cate==u.pzaZombieCate.IceCar&&a.baseData.xIndex!=e.xIndex&&a.baseData.xIndex-1!=e.xIndex||(t=e))}),t},t.prototype.attack=function(){var a=this;r.pzaSoundManager.playAudio("Spikeweed"),this.animation.playAnimation(d.pzaGameState.isZombieMode()?"T_attack":"attack",!1,function(){a.animation.playAnimation(d.pzaGameState.isZombieMode()?"T_idle":"idle",!0)}),null==this.baseData||this.baseData.isDead||window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(a.baseData&&t&&!t.isDead&&!t.buffData.hasBuff(s.pzaBuffType.FLY)&&!t.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)&&!(t.xIndex!=a.baseData.xIndex&&t.zombieData.cate!=u.pzaZombieCate.IceCar||t.zombieData.cate==u.pzaZombieCate.IceCar&&a.baseData.xIndex!=t.xIndex&&a.baseData.xIndex-1!=t.xIndex)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,h.pzaAttackType.SPIKE)}})},t.prototype.hurt=function(a,t,e){if(this.baseData)if(e==h.pzaAttackType.BOOM)window.pzaplantManager.removePlant(this.baseData),d.pzaGameState.partStar>0&&d.pzaGameState.lossPlantCount==d.pzaGameState.lossStarCount&&(p.pzaTipManager.showLossStarTip(!1,!0),d.pzaGameState.partStar--),d.pzaGameState.lossPlantCount++,this.death(t);else if(e==h.pzaAttackType.BANG)return this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()},i([z],t)}(m.pzaBasePlant));e.pzaSpikeweed=y,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSpineController:[function(a,t,e){"use strict";cc._RF.push(t,"261d4+Q1HdGA5w3tjdBw83c","pzaSpineController");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpineController=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spineAnimation=null,t.activeFlash=!1,t._material=null,t.flashTime=0,t.lightTime=0,t.currentTimeScale=1,t}return n(t,a),t.prototype.onLoad=function(){this.activeFlash&&(this._material=this.spineAnimation.getMaterial(0))},t.prototype.onEnable=function(){this.activeFlash&&(this._material.setProperty("u_rate",1),this.flashTime=0,this.lightTime=0)},t.prototype.playAnimation=function(a,t,e,o,n){void 0===o&&(o=null),void 0===n&&(n=1),e?this.spineAnimation.setCompleteListener(e):this.spineAnimation.setCompleteListener(null),o?this.spineAnimation.setEventListener(o):this.spineAnimation.setEventListener(null),this.spineAnimation.loop=t,this.spineAnimation.timeScale=n,this.currentTimeScale=n,this.spineAnimation.paused=!1,this.spineAnimation.animation=a},t.prototype.setAnimationSkin=function(a){null!=a&&""!=a&&this.spineAnimation.setSkin(a)},t.prototype.pauseAnimation=function(){this.spineAnimation.paused||(this.spineAnimation.paused=!0)},t.prototype.resumeAnimation=function(){this.spineAnimation.paused&&(this.spineAnimation.paused=!1)},t.prototype.changeAnimationTimeScale=function(a){var t=this.currentTimeScale*a;return this.spineAnimation.timeScale!==t&&(this.spineAnimation.timeScale=t,!0)},t.prototype.setColor=function(a,t){null==a.setFromString?(t="#"==t.charAt(0)?t.substr(1):t,a.r=parseInt(t.substr(0,2),16)/255,a.g=parseInt(t.substr(2,2),16)/255,a.b=parseInt(t.substr(4,2),16)/255,a.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255):a.setFromString(t)},t.prototype.getAnimationDuration=function(a){var t=this.spineAnimation.findAnimation(a);return null==t?.5:t.duration},t.prototype.findBone=function(a){return this.spineAnimation.findBone(a)},t.prototype.flashUpdate=function(a){if(this.activeFlash&&(this.lightTime>0&&(this.lightTime-=a,this.lightTime<=0&&this.hideLight()),!(this.flashTime<=0))){this.flashTime-=a;var t=(2-Math.max(this.flashTime/.1,0))/2;this._material.setProperty("u_rate",t)}},t.prototype.flash=function(){this.activeFlash&&(this.flashTime=.1)},t.prototype.closeFlash=function(){this.activeFlash&&this._material.setProperty("u_rate",1)},t.prototype.showLight=function(){this.activeFlash&&(this.lightTime=.3,this._material.setProperty("u_color",[1,252/255,87/255,1]),this._material.setProperty("u_rate",.5))},t.prototype.hideLight=function(){this.activeFlash&&this._material.setProperty("u_rate",1)},i([l({displayName:"spine\u52a8\u753b\u7ec4\u4ef6",type:sp.Skeleton})],t.prototype,"spineAnimation",void 0),i([l({displayName:"\u5f00\u542f\u95ea\u767d"})],t.prototype,"activeFlash",void 0),i([p],t)}(cc.Component);e.pzaSpineController=s,cc._RF.pop()},{}],pzaSpineTool:[function(a,t,e){"use strict";cc._RF.push(t,"54c87MgY1NI065puHBCk/Uy","pzaSpineTool"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpineTool=void 0;var o=function(){function a(){this.zombieAtlasSpine=null,this.atlasSlotAttMap=new Map}return a.instance=function(){return a._me||(a._me=new a),a._me},a.prototype.init=function(a){this.zombieAtlasSpine=a,this.initAtlasSlot()},a.prototype.initAtlasSlot=function(){this.zombieAtlasSpine.setSkin("skin1");for(var a=this.zombieAtlasSpine._skeleton.slots,t=0;t<a.length;t++){var e=a[t],o=e.getAttachment();o&&this.atlasSlotAttMap.set(e.data.name,o)}},a.prototype.copyAttr=function(a,t){var e=new sp.spine.RegionAttachment(a);return e.region=t.region,e.rendererObject=t.rendererObject,e.path=t.path,e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.rotation=t.rotation,e.width=t.width,e.height=t.height,sp.spine.Utils.arrayCopy(t.uvs,0,e.uvs,0,8),sp.spine.Utils.arrayCopy(t.offset,0,e.offset,0,8),e.color.setFromColor(t.color),e},a.prototype.setSlotAtt=function(a,t,e,o,n,i){void 0===i&&(i=0);var r=a.findSlot(t);if(a&&!r){console.log("slot\u4e3a\u7a7a,\u4f7f\u7528\u539f\u59cb\u904d\u5386\u83b7\u53d6");for(var p=0;p<a.skeletonData._skeletonCache.slots.length;p++){var l=a.skeletonData._skeletonCache.slots[p];if(l.name==t){r=l;break}}}if(r)if(e){var s=this.atlasSlotAttMap.get(e);if(s){var c=this.copyAttr(e,s);return c.x=o,c.y=n,i&&(c.rotation=i),c.updateOffset(),r.setAttachment(c),r}console.log("atlasSlotName\u4e0d\u5b58\u5728",e)}else r.setAttachment(null);else console.log("targetSlotName\u4e0d\u5b58\u5728",t)},a.prototype.setSlotAttSize=function(a,t,e,o){var n=a.findSlot(t);if(n){var i=n.getAttachment();if(i){var r=this.copyAttr(t,i);return r.width=e,r.height=o,r.updateOffset(),n.setAttachment(r),n}console.log("targetSlotName\u4e0d\u5b58\u5728",t)}else console.log("targetSlotName\u4e0d\u5b58\u5728",t)},a.findBonePos=function(a,t,e){if(!t)return null;var o=a.findBone(t);if(!o)return console.log("findBonePos\u672a\u627e\u5230",t),null;var n=e.convertToWorldSpaceAR(a.node.getPosition());return n.x+=o.worldX,n.y+=o.worldY,n},a._me=null,a}();e.pzaSpineTool=o,cc._RF.pop()},{}],pzaSplitPea:[function(a,t,e){"use strict";cc._RF.push(t,"fe46bSZniRJ554OYK8IgKeB","pzaSplitPea");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSplitPea=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lShootNode=null,t.rShootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t.atkAniTime1=1.4,t.atkAniTime2=1.4,t.atkAniTime3=1.4,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),u.pzaGameState.isZombieMode())return this.attacking=!1,this.animation.playAnimation("T_idle",!0),this.atkAniTime1=this.animation.getAnimationDuration("T_attack1"),this.atkAniTime2=this.animation.getAnimationDuration("T_attack2"),void(this.atkAniTime3=this.animation.getAnimationDuration("T_attack3"));this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),u.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&u.pzaGameState.isZombieMode()){var o=window.pzazombieManager.hasCanAttackZombie(this.baseData),n=window.pzazombieManager.hasCanAttackBackZombie(this.baseData),i=window.pzazombieManager.hasZombieInBlock(this.baseData);if(n&&o){l.pzaSoundManager.playAudio("PeashooterAtk");var r=0;return this.attacking=!0,i?this.lShootNode.setPosition(cc.v2(0,52)):this.lShootNode.setPosition(cc.v2(-90,52)),void this.animation.playAnimation("T_attack3",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){0==r&&e.shoot(!0),e.shoot(!1),r++},this.atkAniTime3/1.4)}if(n)return l.pzaSoundManager.playAudio("PeashooterAtk"),this.attacking=!0,i?this.lShootNode.setPosition(cc.v2(0,52)):this.lShootNode.setPosition(cc.v2(-90,52)),void this.animation.playAnimation("T_attack2",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot(!1)},this.atkAniTime2/1.4);if(o)return l.pzaSoundManager.playAudio("PeashooterAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack1",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot(!0)},this.atkAniTime1/1.4)}},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=window.pzazombieManager.hasCanAttackZombie(a.baseData),o=window.pzazombieManager.hasCanAttackBackZombie(a.baseData),n=window.pzazombieManager.hasZombieInBlock(a.baseData);if(!o||!e)return o?(n?a.lShootNode.setPosition(cc.v2(0,52)):a.lShootNode.setPosition(cc.v2(-90,52)),l.pzaSoundManager.playAudio("PeashooterAtk"),void a.animation.playAnimation("attack2",!1,t,function(){a.shoot(!1)})):e?(l.pzaSoundManager.playAudio("PeashooterAtk"),void a.animation.playAnimation("attack1",!1,t,function(){a.shoot(!0)})):void(a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle2",!1,t)));n?a.lShootNode.setPosition(cc.v2(0,52)):a.lShootNode.setPosition(cc.v2(-90,52)),l.pzaSoundManager.playAudio("PeashooterAtk");var i=0;a.animation.playAnimation("attack3",!1,t,function(){0==i&&a.shoot(!0),a.shoot(!1),i++})};t()},t.prototype.shoot=function(a){if(null!=this.baseData&&!this.baseData.isDead){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=a?this.rShootNode.convertToWorldSpaceAR(cc.v2()):this.lShootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o);e.setPosition(n);var i=e.getComponent(c.pzaBaseBullet);if(null!=i&&(i.init(this.baseData.yIndex,this.baseData.atk,1,null,a?cc.v2(1,0):cc.v2(-1,0)),a)){var l=u.pzaGameState.map.getMapSkewColumn();l>0&&this.baseData.xIndex<=l-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},i([f({displayName:"\u5de6\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"lShootNode",void 0),i([f({displayName:"\u53f3\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"rShootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaSplitPea=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSpriteFrameManager:[function(a,t,e){"use strict";cc._RF.push(t,"d13677cUm5Cm5ueL3UZ51Y4","pzaSpriteFrameManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpriteFrameManager=void 0;var r=a("../Battle/Data/pzaZombieEnum"),p=a("../Load/pzaBundleObjectPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.defaultHead=null,t}var e;return n(t,a),e=t,t.prototype.onLoad=function(){e.instance=this},t.loadZombieCard=function(a,t){a==r.pzaZombieEnum.IMP_MINI&&(a=r.pzaZombieEnum.IMP);var e="resources/Texture/ZombieIcon/"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadPropIcon=function(a,t){if(null!=a){var e="resources/Texture/PropIcon/"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})}},t.loadPlantCard=function(a,t){if(null!=a){var e="resources/Texture/PlantIcon/"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})}},t.loadSkinCard=function(a,t){if(a){var e="resources/Texture/SkinIcon/"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})}},t.loadPlantWholeCard=function(a,t){if(null!=a){var e="resources/Texture/wholePlantIcon/"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})}},t.loadGoldPlant=function(a,t){var e="resources/Texture/ShopItemIcon/"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadMap=function(a,t){var e="resources/Texture/Map/background"+t;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(t,e){null==t?null!=a&&(a.spriteFrame=e):console.error(t)})},t.loadPreMapByType=function(a,t){var e="resources/Texture/Map/pre_bg_"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadPreMap=function(a,t,e){void 0===e&&(e="");var o="resources/Texture/Map/pre_bg_"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(o,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadInDoorByType=function(a,t){var e="resources/Texture/Map/indoor_"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadInDoor=function(a,t){var e="resources/Texture/Map/indoor_"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadShopItemIcon=function(a,t){var e="resources/Texture/ShopItemIcon/"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.warn(a)})},t.loadPlantImg=function(a,t){var e="resources/Texture/"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadGuanKaImg=function(a,t){var e="resources/Texture/GuanKa/"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadAchieveIcon=function(a,t){var e="achieve_"+a;p.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/Achieve2/InfantVersion/"+e,function(a,e){e&&(t.spriteFrame=e)})},t.showPlayerHeadImage=function(a,t){a&&"null"!=a&&cc.assetManager.loadRemote(a,{ext:".head"},function(e,o){if(!e&&o){var n=new cc.SpriteFrame(o);t&&t(a,n)}else t&&t(a,this.instance&&this.instance.defaultHead)})},t.showDefaultHead=function(a){null!=a&&(a.spriteFrame=this.instance&&this.instance.defaultHead)},t.instance=null,i([c({displayName:"\u9ed8\u8ba4\u73a9\u5bb6\u5934\u50cf",type:cc.SpriteFrame})],t.prototype,"defaultHead",void 0),e=i([s],t)}(cc.Component);e.pzaSpriteFrameManager=u,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Load/pzaBundleObjectPool":"pzaBundleObjectPool"}],pzaSquashJalapeno:[function(a,t,e){"use strict";cc._RF.push(t,"110f6RLs2BHxpAH/lOR0CAM","pzaSquashJalapeno");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r},r=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},p=this&&this.__read||function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var o,n,i=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSquashJalapeno=void 0;var l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaWorldEventManager"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaPlantEnum"),d=a("../Data/pzaZombieEnum"),h=a("../pzaEffectManager"),m=a("../pzaGameState"),f=a("./pzaAttackType"),z=a("./pzaSquashNut"),y=cc._decorator,g=y.ccclass,b=(y.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani_plant_inact=null,t.ani_plant_hurt=null,t.ani_plant_die=null,t.ani_jump_down="jumpdown",t.deathAttack=null,t}return n(t,a),t.prototype.afterBind=function(a){var t=this;a.plantData.cate=u.pzaPlantCate.Nut;var e=function(){t.jumpTarget=t.findTarget(),t.jumpTarget?t.attack(t.jumpTarget):t.animation.playAnimation("idle",!1,e)};e()},t.prototype.attack=function(a){var t=this;this.jumpTarget=a,this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,l.pzaSoundManager.playAudio("SquashStart"),this.animation.playAnimation(a.logicPos.x>=this.baseData.logicPos.x?"lookright":"lookleft",!1,function(){t.animation.playAnimation("jumpup1",!1,function(){if(t.animation.playAnimation("jumpup2",!1,function(){t.animation.playAnimation("jumpup3",!1)}),t.baseData){var e=10*-a.yIndex+6;t.node.zIndex=e,t.jumpUpTime=t.jumpUpMaxTime;var o=t.jumpTarget.logicPos.x-t.baseData.logicPos.x;t.speedX=o/t.jumpUpTime}})})},t.prototype.damageTarget=function(a){var t=this;if(null!=this.baseData&&null!=a){var e=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null!=e){e.forEach(function(e){if(e&&!e.isDead&&e.logicPos&&!(Math.abs(a.x-e.logicPos.x)>1.5*m.pzaGameState.map.getBlockWidth())){var o=window.pzazombieManager.getZombie(e);o&&o.hurt(1800,t.baseData,f.pzaAttackType.BANG),o&&e.isDead}});var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&o.baseData&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)&&o&&o.hurt(this.baseData.atk,this.baseData,f.pzaAttackType.BANG),this.boomAtk()}}},t.prototype.boomAtk=function(){for(var a=this,t=m.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),e=0;e<12;e++){var o=t.clone();o.x+=100*e,m.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,o,0);var n=.1*e+.5;e>=5&&(n=.05*e+.5),h.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,n,o,null)}window.pzaMapManager.removeRowIceGround(this.baseData.yIndex);for(var i=0;i<=8;i++)window.pzaMapManager.removeLadder(i,this.baseData.yIndex);s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var r=window.pzazombieManager.zombieDatas[this.baseData.yIndex],p=Array.from(r);null!=window.pzazombieManager.drZomBoss&&p.push(window.pzazombieManager.drZomBoss.baseData),p.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(c.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);a.baseData.plantData.adClearPlant?e&&e.hurt(m.pzaGameState.adCherryBoomDmg,a.baseData,f.pzaAttackType.BOOM):e&&e.hurt(a.baseData.atk,a.baseData,f.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==d.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(c.pzaBuffType.FROST),t.buffData.removeBuff(c.pzaBuffType.FROZEN))}})},t.prototype.close=function(){var t,e;a.prototype.close.call(this);try{for(var o=r(window.pzaplantManager.fireSquashMap),n=o.next();!n.done;n=o.next()){var i=p(n.value,2),l=i[0];if(i[1]===this.node.uuid){window.pzaplantManager.fireSquashMap.delete(l);break}}}catch(s){t={error:s}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},i([g],t)}(z.pzaSquashNut));e.pzaSquashJalapeno=b,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaSquashNut":"pzaSquashNut"}],pzaSquashKing:[function(a,t,e){"use strict";cc._RF.push(t,"92b58H5QzdFBKk5UPYaw3wK","pzaSquashKing");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSquashKing=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaPlantEnum"),s=a("../Data/pzaZombieEnum"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaSquashNut"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani_plant_inact=null,t.ani_plant_hurt=null,t.ani_plant_die=null,t.ani_jump_down="jumpdown",t.deathAttack=null,t}return n(t,a),t.prototype.afterBind=function(a){var t=this;a.plantData.cate=l.pzaPlantCate.Nut;var e=function(){t.jumpTarget=t.findTarget(),t.jumpTarget?t.attack(t.jumpTarget):t.animation.playAnimation("idle",!1,e)};e()},t.prototype.attack=function(a){var t=this;this.jumpTarget=a,this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,r.pzaSoundManager.playAudio("SquashStart"),this.animation.playAnimation(a.logicPos.x>=this.baseData.logicPos.x?"lookright":"lookleft",!1,function(){t.animation.playAnimation("jumpup1",!1,function(){if(t.animation.playAnimation("jumpup2",!1,function(){t.animation.playAnimation("jumpup3",!1)}),t.baseData){var e=10*-a.yIndex+6;t.node.zIndex=e,t.jumpUpTime=t.jumpUpMaxTime;var o=t.jumpTarget.logicPos.x-t.baseData.logicPos.x;t.speedX=o/t.jumpUpTime}})})},t.prototype.damageTarget=function(a){var t=this;if(null!=this.baseData&&null!=a){var e=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null!=e){e.forEach(function(e){if(e&&!e.isDead&&e.logicPos&&!(Math.abs(a.x-e.logicPos.x)>1.5*c.pzaGameState.map.getBlockWidth())){var o=window.pzazombieManager.getZombie(e),n=e.zombieData.cate===s.pzaZombieCate.Gargantuar?3*t.baseData.atk:t.baseData.atk;o&&o.hurt(n,t.baseData,u.pzaAttackType.BANG),o&&e.isDead}});var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&o.baseData&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)&&o&&o.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.BANG)}}},i([m],t)}(d.pzaSquashNut));e.pzaSquashKing=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaSquashNut":"pzaSquashNut"}],pzaSquashNut:[function(a,t,e){"use strict";cc._RF.push(t,"932edZFHrZNNI2+77mADcd4","pzaSquashNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSquashNut=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaPlantEnum"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jumpTarget=null,t.jumpUpTime=0,t.jumpUpMaxTime=0,t.speedX=0,t.speedY=0,t.isDeadAttacked=!1,t.ani_plant_inact="body_1",t.ani_plant_hurt="body_2",t.ani_plant_die="body_3",t.ani_jump_down="jumpdown4",t.deathAttack=function(){var e=t.findTarget();if(!e)return console.log("\u7a9d\u74dc\u575a\u679c\u6b7b\u4ea1\u65e0\u76ee\u6807"),void a.prototype.death.call(t);t.attack(e)},t}return n(t,a),t.prototype.afterBind=function(){this.animation.playAnimation("idle1",!0)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=l.pzaPlantCate.Nut,this.jumpTarget=null,this.jumpUpTime=0,this.speedX=0,this.speedY=0,this.isDeadAttacked=!1,this.jumpUpMaxTime=this.animation.getAnimationDuration("jumpup2"),this.speedY=135/this.jumpUpMaxTime,this.afterBind(t),this.body.node.getComponent(cc.BoxCollider).enabled=!0},t.prototype.findTarget=function(){var a=this;if(null==this.baseData||this.isDeadAttacked||null==this.baseData.logicPos)return null;var t=null,e=-1,o=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null==o)return null;if(o.forEach(function(o){if(o&&!o.isDead&&o.logicPos&&!(o.buffData.hasBuff(p.pzaBuffType.FLY)||o.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(p.pzaBuffType.DIVE)&&o.zombieData.zombieType!=s.pzaZombieEnum.SNORKEL_ZOMBIE)){var n=Math.abs(a.baseData.logicPos.x-o.logicPos.x);-1!=e&&n>=e||o.logicPos.x<a.baseData.logicPos.x&&n>u.pzaGameState.map.getBlockWidth()||o.logicPos.x>a.baseData.logicPos.x&&n>1.7*u.pzaGameState.map.getBlockWidth()||(e=n,t=o)}}),!t){var n=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=n&&!n.baseData.isDead&&!n.baseData.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t},t.prototype.attack=function(a){var t=this;this.jumpTarget=a,r.pzaSoundManager.playAudio("SquashStart"),this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,this.animation.playAnimation("jumpup1",!1,function(){if(t.animation.playAnimation("jumpup2",!1,function(){t.animation.playAnimation("jumpup3",!1)}),t.baseData){var e=10*-a.yIndex+6;t.node.zIndex=e,t.jumpUpTime=t.jumpUpMaxTime;var o=t.jumpTarget.logicPos.x-t.baseData.logicPos.x;t.speedX=o/t.jumpUpTime}})},t.prototype.damageTarget=function(a){var t=this;if(null!=this.baseData&&null!=a){var e=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null!=e){e.forEach(function(e){if(e&&!e.isDead&&e.logicPos&&!(Math.abs(a.x-e.logicPos.x)>u.pzaGameState.map.getBlockWidth())){var o=window.pzazombieManager.getZombie(e);o&&o.hurt(t.baseData.atk,t.baseData,d.pzaAttackType.BANG),o&&e.isDead}});var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&o.baseData&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)&&o&&o.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.BANG)}}},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.jumpUpTime>0&&this.jumpTarget&&this.jumpTarget.logicPos&&(this.jumpUpTime-=t,this.baseData.logicPos.x+=this.speedX*t,this.animation.node.y+=this.speedY*t,this.jumpUpTime<=0)){var o=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);this.animation.node.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){o?r.pzaSoundManager.playAudio("zombiesplash"):r.pzaSoundManager.playAudio("gargantuar_thump"),e.animation.playAnimation(e.ani_jump_down,!1,function(){o||c.pzaEffectManager.createSquashEffect(e.baseData.logicPos)})}),cc.spawn(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){window.pzaplantManager.removePlant(e.baseData),e.damageTarget(e.jumpTarget.logicPos)})),cc.moveTo(2/15,cc.v2(0,-5)).easing(cc.easeBackIn())),cc.delayTime(o?0:.3),cc.callFunc(function(){o&&c.pzaEffectManager.createWaterFlowerEffect(e.baseData.yIndex,e.baseData.logicPos,null),e.isDeadAttacked=!0,e.deathAttack?a.prototype.death.call(e):e.death()})))}},t.prototype.logicLateUpdate=function(){this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null==this.baseData||this.isDeadAttacked||null==this.baseData.logicPos||this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.death=function(t,e){this.deathAttack?this.deathAttack():a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.deathAttack?this.deathAttack():a.prototype.flaserDeath.call(this)},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.ani_plant_die&&this.animation.setAnimationSkin(this.ani_plant_die)},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.ani_plant_die&&this.animation.setAnimationSkin(this.ani_plant_hurt)},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.ani_plant_die&&this.animation.setAnimationSkin(this.ani_plant_inact)},i([f],t)}(h.pzaBasePlant));e.pzaSquashNut=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSquashTorch:[function(a,t,e){"use strict";cc._RF.push(t,"f154ef4T1hI7p8NkM7dSvmT","pzaSquashTorch");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSquashTorch=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaPlantEnum"),s=a("../pzaGameState"),c=a("./pzaBasePlant"),u=a("./pzaPlantBody"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.torchwoodBody=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(e.blinkTime<=0)return e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),void e.animation.playAnimation("1idle_eye",!1,o);e.animation.playAnimation("1idle",!1,o)};this.animation.playAnimation("1idle",!1,o),s.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.logicLateUpdate=function(){this.bodyBindData||(this.torchwoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody)),a.prototype.logicLateUpdate.call(this)},t.prototype.createSquashCherry=function(){for(var a=this.baseData.xIndex+1;a<s.pzaGameState.map.getMapColumn();a++){var t=""+a+this.baseData.yIndex;if(!window.pzaplantManager.plantDataMap.get(t)&&!window.pzaMapManager.hasTomb(a,this.baseData.yIndex)){window.pzaplantManager.createRandomPlant(l.pzaPlantEnum.SQUASH_JALAPENO,a,this.baseData.yIndex,!1,!0,this.uuid);break}}},t.prototype.death=function(t,e){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.flaserDeath.call(this)},i([m({displayName:"\u706b\u70ac\u78b0\u649e\u8eab\u4f53",type:u.pzaPlantBody})],t.prototype,"torchwoodBody",void 0),i([h],t)}(c.pzaBasePlant);e.pzaSquashTorch=f,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant","./pzaPlantBody":"pzaPlantBody"}],pzaSquashZombie:[function(a,t,e){"use strict";cc._RF.push(t,"4f098TzwlZJGqAJJ4c5BCWS","pzaSquashZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSquashZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaSpineController"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../Plant/pzaAttackType"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=a("./pzaNormalZombie"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jumpUpTime=0,t.speedX=0,t.jumpTarget=null,t.squashAni=null,t.hurtState=1,t.findPlant=!1,t}return n(t,a),t.prototype.initEquips=function(){a.prototype.initEquips.call(this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.findPlant=!1,this.hurtState=1,this.jumpTarget=null,this.jumpUpTime=0,this.speedX=0,this.squashAni.node.setPosition(0,0),this.squashAni.node.active=!1,this.squashAni.node.scaleX-=.2,this.squashAni.node.scaleY-=.2,this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var e=this.animation.findBone("aduck");this.hasUseSrAni?e&&(e.scaleX=.158,e.scaleY=.158):e&&(e.scaleX=0,e.scaleY=0)},t.prototype.logicUpdate=function(a){var t=this;if(this.jumpUpTime>0){if(this.jumpUpTime-=a,this.squashAni.node.x+=this.speedX*a,this.jumpUpTime<=0){var e=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);this.squashAni.node.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){e?r.pzaSoundManager.playAudio("zombiesplash"):r.pzaSoundManager.playAudio("gargantuar_thump"),t.squashAni.playAnimation("1plant/jumpdown_plant",!1,function(){e||d.pzaEffectManager.createSquashEffect(cc.v2(t.baseData.logicPos.x+t.squashAni.node.x,t.baseData.logicPos.y))})}),cc.spawn(cc.sequence(cc.delayTime(.05),cc.callFunc(function(){t.removePlant()})),cc.moveTo(2/15,cc.v2(this.squashAni.node.x,-50)).easing(cc.easeBackIn())),cc.delayTime(e?0:.3),cc.callFunc(function(){t.squashAni.node.active=!1,t.death(!0)})))}}else if(!this.findPlant&&null!=this.baseData&&null!=this.baseData.zombieData&&(!this.isPlayEquipDeath||this.baseData.buffData.hasBuff(l.pzaBuffType.FROZEN))&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(a);else{var o=this.findTarget();(3==h.pzaGameState.curChapter||4==h.pzaGameState.curChapter)&&this.baseData.xIndex<0&&(o=null),o&&!o.isDead?this.attack(a,o):this.updateMove(a)}else this.changeRowMove(a)}},t.prototype.updateMove=function(t){var e=this.baseData.xIndex;a.prototype.updateMove.call(this,t);var o=this.baseData.xIndex;e<0&&o>=0&&this.hasUseSrAni?(this.hasInWater=!0,this.playMoveAnimation(),d.pzaEffectManager.createWaterFlowerEffect(this.baseData.yIndex,this.baseData.logicPos,null),this.curShadow&&this.curShadow.hideShadow()):o<0&&e>=0&&this.hasUseSrAni&&(null!=this.mask&&(this.mask.enabled=!0),r.pzaSoundManager.playAudio("zombie_leave_water"),this.hasInWater=!1,this.playMoveAnimation())},t.prototype.removePlant=function(){var a=""+this.jumpTarget.xIndex+this.jumpTarget.yIndex,t=window.pzaplantManager.pumpkinDataMap.get(a);if(null!=t){var e=window.pzaplantManager.getPlantByData(t);e&&e.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.BANG)}var o=window.pzaplantManager.plantDataMap.get(a);if(null!=o){var n=window.pzaplantManager.getPlantByData(o);o.plantData.plantType==s.pzaPlantEnum.QQFUME_SHROOM?o.hp<=100?n&&n.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.BANG):n&&n.hurt(100,this.baseData,u.pzaAttackType.FLOOR_ATK):n&&n.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.BANG)}var i=window.pzaplantManager.plantEnvDataMap.get(a);if(null!=i){var r=window.pzaplantManager.getPlantByData(i);r&&r.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.BANG)}var p=window.pzaplantManager.notTargetMap.get(a);if(null!=p){var l=window.pzaplantManager.getPlantByData(p);l&&l.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.BANG)}},t.prototype.attack=function(a,t){var e=this;this.jumpTarget=t,this.findPlant=!0;var o=this.animation.findBone("plant");o&&(o.scaleX=0,o.scaleY=0,o.active=!1),this.animation.playAnimation("jumpup1",!1),this.squashAni.node.active=!0,this.squashAni.playAnimation("1plant/jumpup1_plant",!1,function(){e.squashAni.playAnimation("1plant/jumpup2_plant",!1,function(){e.squashAni.playAnimation("1plant/jumpup3_plant",!1)});var a=e.animation.getAnimationDuration("1plant/jumpup2_plant");e.jumpUpTime=a;var o=10*-t.yIndex+6;e.node.zIndex=o;var n=t.logicPos.x-e.baseData.logicPos.x;e.speedX=n/a}),this.preventBreak()},t.prototype.zombieHurt=function(){this.zombieHurtState=c.pzaHurtStateEnum.HURT,this.curSkinName="1plant/1zombie_plant_1_2",this.hurtState=2,this.changeSkin(this.curSkinName)},t.prototype.death=function(a,t){var e=this;void 0===t&&(t=null),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,!0,t),a?this.playDeathAnimation(function(){e.close()}):this.close()},t.prototype.ashesDeath=function(t,e){a.prototype.ashesDeath.call(this,t,e,this.hasInWater?"blow_1pant_duck":"blow_1pant")},i([y({displayName:"\u7a9d\u74dc\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"squashAni",void 0),i([z],t)}(m.pzaNormalZombie);e.pzaSquashZombie=g,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaNormalZombie":"pzaNormalZombie"}],pzaSquash:[function(a,t,e){"use strict";cc._RF.push(t,"81fc9M/dexOrq+atyCuJ59k","pzaSquash");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSquash=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaSoundManager"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaZombieEnum"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jumpTarget=null,t.jumpUpTime=0,t.speedX=0,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.animation.node.stopAllActions(),this.animation.node.y=-5,this.jumpTarget=null,this.jumpUpTime=0,this.speedX=0,u.pzaGameState.isZombieMode())return this.attacking=!1,void this.animation.playAnimation("T_idle",!0);this.playNorAni(),this.body.node.getComponent(cc.BoxCollider).enabled=!0,u.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.jumpUpTime>0&&null!=this.jumpTarget&&null!=this.jumpTarget.logicPos)return this.jumpUpTime-=t,this.baseData.logicPos.x+=this.speedX*t,void this.jumpUpTime;if(!this.attacking&&u.pzaGameState.isZombieMode()){var o=this.findTarget();if(null!=o)return this.jumpTarget=o,l.pzaSoundManager.playAudio("SquashStart"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){},function(a,t){if(console.log("event ",t),t){var n=e.animation.getAnimationDuration("jumpup2");e.jumpUpTime=n;var i=10*-o.yIndex+6;e.node.zIndex=i,window.pzaplantManager.removePlant(e.baseData),e.damageTarget(e.jumpTarget.logicPos)}})}},t.prototype.logicLateUpdate=function(){this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.findTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null==o)return null;if(o.forEach(function(o){if(o&&!o.isDead&&o.logicPos&&!(o.buffData.hasBuff(s.pzaBuffType.FLY)||o.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(s.pzaBuffType.DIVE)&&o.zombieData.zombieType!=c.pzaZombieEnum.SNORKEL_ZOMBIE)){var n=Math.abs(a.baseData.logicPos.x-o.logicPos.x);-1!=e&&n>=e||o.logicPos.x<a.baseData.logicPos.x&&n>.5*u.pzaGameState.map.getBlockWidth()||o.logicPos.x>a.baseData.logicPos.x&&n>1.7*u.pzaGameState.map.getBlockWidth()||(e=n,t=o)}}),!t){var n=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=n&&n.baseData&&!n.baseData.isDead&&!n.baseData.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t},t.prototype.damageTarget=function(a){var t=this;if(null!=this.baseData&&null!=a){var e=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null!=e){var o=0;e.forEach(function(e){if(e&&!e.isDead&&e.logicPos&&!(Math.ceil(Math.abs(a.x-e.logicPos.x))>=u.pzaGameState.map.getBlockWidth())){var n=window.pzazombieManager.getZombie(e);n&&n.hurt(t.baseData.atk,t.baseData,d.pzaAttackType.BANG),e.isDead&&o++}});var n=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=n&&n.baseData&&!n.baseData.isDead&&!n.baseData.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)&&n&&n.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.BANG),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_20,o)}}},t.prototype.playNorAni=function(){var a=this,t=this.findTarget();if(null!=t)return this.jumpTarget=t,l.pzaSoundManager.playAudio("SquashStart"),this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,void this.animation.playAnimation("attack",!1,function(){},function(e,o){if(console.log("event ",o),o){var n=a.animation.getAnimationDuration("jumpup2");a.jumpUpTime=n;var i=10*-t.yIndex+6;a.node.zIndex=i,window.pzaplantManager.removePlant(a.baseData),a.damageTarget(a.jumpTarget.logicPos)}});this.animation.playAnimation("idle",!1,this.playNorAni.bind(this))},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.animation.node.pauseAllActions()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.animation.node.resumeAllActions()},i([f],t)}(h.pzaBasePlant));e.pzaSquash=z,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaStarFruitShadow:[function(a,t,e){"use strict";cc._RF.push(t,"68b4f/6l2NC8IeaIP9jO6rZ","pzaStarFruitShadow");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaStarFruitShadow=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onEnable=function(){p.pzaWorldEventManager.addListener(p.pzaWorldEventType.BACK_HOME,this.closeNode,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_OVER,this.closeNode,this),this.node.zIndex=-300},t.prototype.showNode=function(){this.node.opacity=120},t.prototype.hideNode=function(){this.node.opacity=0},t.prototype.onDisable=function(){p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.BACK_HOME,this.closeNode,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_OVER,this.closeNode,this)},t.prototype.closeNode=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s],t)}(cc.Component));e.pzaStarFruitShadow=c,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaStarFruit:[function(a,t,e){"use strict";cc._RF.push(t,"16374wVFltJwqD9k1Th58af","pzaStarFruit");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaStarFruit=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),d.pzaGameState.isZombieMode())return this.attacking=!1,void this.animation.playAnimation("T_idle",!0);this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),d.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()&&null!=this.findAttackTarget())return l.pzaSoundManager.playAudio("StarFruit"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.attack()})},t.prototype.playNormalAni=function(){var a=this,t=function(){if(null!=a.findAttackTarget())return l.pzaSoundManager.playAudio("StarFruit"),void a.animation.playAnimation("attack",!1,t,function(){a.attack()});a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};t()},t.prototype.findAttackTarget=function(){var a=this,t=null;return window.pzazombieManager.zombieMap.forEach(function(e,o){if(null==t&&null!=o&&!o.buffData.hasBuff(u.pzaBuffType.FLY)&&!o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT))if(o.yIndex==a.baseData.yIndex&&o.logicPos.x<=a.baseData.logicPos.x)t=o;else if(o.xIndex!=a.baseData.xIndex){var n=cc.v2(a.baseData.logicPos.x+a.shootNode.x,a.baseData.logicPos.y+a.shootNode.y),i=o.logicPos.sub(n);if(a.baseData.logicPos.y<o.logicPos.y){var r=s.pzaUtil.getVectorsRadion(cc.v2(Math.sqrt(3)/2,.5),i),p=Math.sin(r)*i.len();if(p>=-30&&p<=30)return void(t=o)}var l=s.pzaUtil.getVectorsRadion(cc.v2(Math.sqrt(3)/2,-.5),i),c=Math.sin(l)*i.len();c>=-40&&c<=30&&(t=o)}else t=o}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(){var a=this;null==this.baseData||this.baseData.isDead||[cc.v2(-1,0),cc.v2(0,1),cc.v2(Math.sqrt(3)/2,.5),cc.v2(Math.sqrt(3)/2,-.5),cc.v2(0,-1)].forEach(function(t){a.shoot(t)})},t.prototype.shoot=function(a){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o);e.setPosition(n);var i=e.getComponent(c.pzaBaseBullet);if(null!=i&&(i.init(-1,this.baseData.atk,1,null,a),!(a.x<=0))){var l=d.pzaGameState.map.getMapSkewColumn();l>0&&this.baseData.xIndex<=l-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}},t.prototype.close=function(){a.prototype.close.call(this)},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaStarFruit=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaStarMine:[function(a,t,e){"use strict";cc._RF.push(t,"b26f6waR1RFxa4jE5uYWCQd","pzaStarMine");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaStarMine=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaZombieEnum"),h=a("../pzaEffectManager"),m=a("../pzaGameState"),f=a("./pzaAttackType"),z=a("./pzaStarFruit"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab2=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.playNormalAni=function(){var a=this,t=function(){if(null!=a.findAttackTarget())return l.pzaSoundManager.playAudio("StarFruit"),void a.animation.playAnimation("attack",!1,t,function(){a.attack()});a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};t()},t.prototype.shoot=function(a){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e,o=!1,n=this.baseData.atk;100*Math.random()<5&&(o=!0,n=this.baseData.plantData.atk2Arr[0]),e=o?this.bulletPrefab2:this.bulletPrefab;var i=r.pzaGameCommonPool.requestInstant2(e);if(null!=i){i.setParent(t);var l=this.shootNode.convertToWorldSpaceAR(cc.v2()),s=t.convertToNodeSpaceAR(l);i.setPosition(s);var u=i.getComponent(c.pzaBaseBullet);if(null!=u&&(u.init(-1,n,1,null,a),!(a.x<=0))){var d=m.pzaGameState.map.getMapSkewColumn();d>0&&this.baseData.xIndex<=d-2&&(u.maxPosX=this.baseData.logicPos.x+1.5*m.pzaGameState.map.getBlockWidth())}}}},t.prototype.deathBoom=function(){var a=this,t=m.pzaGameState.map.getXInterval(this.baseData.xIndex)/2,e=m.pzaGameState.map.getYInterval(this.baseData.yIndex)/3;m.pzaGameState.isRoofMode()&&(e=m.pzaGameState.map.getYInterval(this.baseData.yIndex)/6);var o=m.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.baseData.yIndex,t,e);o.y-=50,h.pzaEffectManager.createMineBoomEffect(o),l.pzaSoundManager.playAudio("PotatoMineBoom"),this.animation.playAnimation("blow",!1,function(){a.close()});var n=new Set,i=this.findAttackTarget();null==i&&(i=this.findDrZomBoss()),null!=i&&i.isDead&&(i=null,this.body.curTarget=null),i&&n.add(i);var r=.6*m.pzaGameState.map.getBlockWidth();window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(a.baseData&&null!=t&&(t.xIndex==a.baseData.xIndex||t.xIndex-1==a.baseData.xIndex)){if(s.pzaUtil.getDistance(a.baseData.logicPos,t.logicPos)>r)return;n.add(t)}}),n.forEach(function(t){if(a.baseData&&null!=t&&!t.isDead&&!t.buffData.hasBuff(u.pzaBuffType.FLY)&&(t.zombieData.zombieType==d.pzaZombieEnum.DIGGER_ZOMBIE||!t.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)&&!t.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT))){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.plantData.atk2Arr[1],a.baseData,f.pzaAttackType.NORMAL_BOOM)}})},t.prototype.death=function(a,t){void 0===a&&(a=null),void 0===t&&(t=null),this.deathBoom()},i([b({displayName:"\u5b50\u5f39\u9884\u8bbe2",type:cc.Prefab})],t.prototype,"bulletPrefab2",void 0),i([g],t)}(z.pzaStarFruit);e.pzaStarMine=v,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaStarFruit":"pzaStarFruit"}],pzaStateComponent:[function(a,t,e){"use strict";cc._RF.push(t,"9e2c0GREKJPX5OImvXLEtIa","pzaStateComponent");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaKDefine"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.state=r.State.idle,t.stateMap={idle:function(){}},t}return n(t,a),t.prototype.setState=function(a){cc.Tween.stopAllByTarget(this.node),this.state=a},t.prototype.regState=function(a,t){this.stateMap[a]=t},t.prototype.updateFrame=function(a){this.stateMap[this.state].call(this,a)},i([l],t)}(cc.Component));e.default=s,cc._RF.pop()},{"./pzaKDefine":"pzaKDefine"}],pzaStatisticsMgr:[function(a,t,e){"use strict";cc._RF.push(t,"a28a0oabexCVLrIFbs0weJy","pzaStatisticsMgr"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaStatisticsMgr=void 0;var o=a("../Battle/pzaGameState"),n=a("../utils/pzaChannel"),i=a("./pzaLocalData"),r=a("./pzaUtil"),p=function(){function a(){}return a.init=function(a){"oppo"!==n.pzaChannel.instance().getChannel().channel&&"vivo"!==n.pzaChannel.instance().channel&&"hw"!==n.pzaChannel.instance().channel&&"mi"!=n.pzaChannel.instance().channel&&"mg"!=n.pzaChannel.instance().channel&&TDAnalytics.init(a)},a.login=function(a){"oppo"!==n.pzaChannel.instance().getChannel().channel&&"vivo"!==n.pzaChannel.instance().channel&&"hw"!==n.pzaChannel.instance().channel&&"mi"!=n.pzaChannel.instance().channel&&"mg"!=n.pzaChannel.instance().channel&&TDAnalytics.login(a)},a.setUserProp=function(){var a=n.pzaChannel.instance().getChannel();if(("wx"===a.channel||"tt"==n.pzaChannel.instance().channel)&&"oppo"!==a.channel&&"vivo"!==n.pzaChannel.instance().channel&&"hw"!==n.pzaChannel.instance().channel&&"mi"!=n.pzaChannel.instance().channel&&"mg"!=n.pzaChannel.instance().channel){var t={openid:a.channelUserId,gameid:6666,gameversion:n.pzaChannel.version,level:parseInt(i.pzaLocalData.data.curChapter+""+i.pzaLocalData.data.curPart),coins:i.pzaLocalData.data.coin};1==i.pzaLocalData.isNewUser?(t.tracetime=new Date,t.channel=a.reportChannel,TDAnalytics.userSetOnce({properties:t})):TDAnalytics.userSet({properties:t})}},a.setPubProp=function(){var a=n.pzaChannel.instance().getChannel();if(("wx"===a.channel||"tt"==n.pzaChannel.instance().channel)&&"oppo"!==a.channel&&"vivo"!==n.pzaChannel.instance().channel&&"hw"!==n.pzaChannel.instance().channel&&"mi"!=n.pzaChannel.instance().channel&&"mg"!=n.pzaChannel.instance().channel){var t=1;null!=i.pzaLocalData.data.reachPartTime&&(t=r.pzaUtil.getDayInterval(i.pzaLocalData.data.reachPartTime,Date.now())+1);var e={level:parseInt(i.pzaLocalData.data.curChapter+""+i.pzaLocalData.data.curPart),day:t,coins:i.pzaLocalData.data.coin,channel:a.reportChannel,openid:a.channelUserId,is_new:i.pzaLocalData.isNewUser};TDAnalytics.setSuperProperties(e)}},a.sendEvent=function(a){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];console.log("\u53d1\u9001\u4e8b\u4ef6: name",a),console.log("\u53d1\u9001\u4e8b\u4ef6: props",t);var o=n.pzaChannel.instance().getChannel();if("noAD"!==o.channel&&"oppo"!==o.channel&&"vivo"!==n.pzaChannel.instance().channel&&"hw"!==n.pzaChannel.instance().channel&&"mi"!=n.pzaChannel.instance().channel&&"mg"!=n.pzaChannel.instance().channel){this.setPubProp();var i={};null!=t&&t.forEach(function(a){i[a.name]=a.value}),TDAnalytics.track({eventName:a,properties:i})}},a.sendLevelEvent=function(a,t,e,n,i){var r=-1;switch(i){case o.pzaGameMode.NORMAL:case o.pzaGameMode.NORMAL_WEEKTWO:r=1;break;case o.pzaGameMode.SURVIVAL:case o.pzaGameMode.SUR_ENDLESS:r=2;break;case o.pzaGameMode.ZOMBIE_ENERMY:case o.pzaGameMode.ZOMBIE_ENDLESS:r=3;break;case o.pzaGameMode.VASE:case o.pzaGameMode.VASE_ENDLESS:r=4;break;case o.pzaGameMode.MINIGAME:case o.pzaGameMode.KNOCK_ZOMBIE:case o.pzaGameMode.SMALL_ZOMBIE:r=5}t&&2==t?this.sendEvent("leveling",{name:"level",value:a},{name:"type",value:r}):this.sendEvent("level",{name:"level",value:a},{name:"is_Win",value:t},{name:"Use",value:e},{name:"time",value:n},{name:"type",value:r})},a}();e.pzaStatisticsMgr=p,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../utils/pzaChannel":"pzaChannel","./pzaLocalData":"pzaLocalData","./pzaUtil":"pzaUtil"}],pzaSunBean:[function(a,t,e){"use strict";cc._RF.push(t,"f4af1F1i7FDmaEsbuiYrqOm","pzaSunBean");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunBean=void 0;var r=a("../../Common/pzaSoundManager"),p=a("./pzaBasePlant"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sunTime=12.5,t.growTime=90,t.isBig=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.sunTime=3,this.growTime=90,this.isBig=!1,this.node.scale=.8,this.animation.playAnimation("idle1",!0);var e=10*-this.baseData.yIndex+2;this.node.zIndex=e,this.bodyBindData=!0,this.body.node.getComponent(cc.Collider).enabled=!1,t.plantData&&t.plantData.isGrow&&(this.growTime=0,this.isBig=!0,this.node.scale=1)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.sunTime-=t,this.sunTime<=0&&(this.sunTime=12.5,this.isBig?window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1,25):window.pzaplantManager.plantCreateSun2(this.node.getPosition(),.7,15)),this.isBig||(this.growTime-=t,this.growTime<=0&&(this.growUp(),this.baseData&&this.baseData.plantData&&(this.baseData.plantData.isGrow=!0))))},t.prototype.growUp=function(){this.isBig=!0,this.baseData.hp+=this.baseData.maxHp,r.pzaSoundManager.playAudio("garden_plantgrow"),cc.tween(this.node).to(.5,{scale:1}).start()},t.prototype.close=function(){a.prototype.close.call(this),this.baseData&&window.pzaplantManager.notTargetMap.delete(""+this.baseData.xIndex+this.baseData.yIndex)},i([s],t)}(p.pzaBasePlant));e.pzaSunBean=c,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","./pzaBasePlant":"pzaBasePlant"}],pzaSunBomb:[function(a,t,e){"use strict";cc._RF.push(t,"4c473JnJutHG6va77M4sq2L","pzaSunBomb");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunBomb=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaUtil"),u=a("../../Load/pzaBundleObjectPool"),d=a("../../Load/pzaPreLoadManager"),h=a("../Data/pzaBuffData"),m=a("../pzaEffectManager"),f=a("../pzaGameState"),z=a("../pzaSunLight"),y=a("./pzaAttackType"),g=a("./pzaBasePlant"),b=cc._decorator,v=b.ccclass,P=(b.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),s.pzaSoundManager.playAudio("JalapenoReady",1),this.animation.playAnimation("attack",!1,function(){s.pzaSoundManager.playAudio("cherrybomb",1),e.attack()}),f.pzaGameState.onlyShroomCofee=!1},t.prototype.attack=function(){var a=this;m.pzaEffectManager.createFrameEffect(d.pzaResourceUrl.CHERRY_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),null),window.pzaMapManager.shakeMap(),this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),this.death();var t=0,e=1.5*f.pzaGameState.map.getBlockWidth(),o=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,e);if(null==o&&(o=[]),this.baseData.xIndex>=7&&null!=window.pzazombieManager.drZomBoss&&o.push(window.pzazombieManager.drZomBoss),o.forEach(function(e){var o=e&&e.baseData;null==o||o.isDead||o.buffData.hasBuff(h.pzaBuffType.INVINCIBLE)||(e&&e.hurt(a.baseData.atk,a.baseData,y.pzaAttackType.BOOM),e.baseData.isDead&&t++)}),window.pzaMapManager.LadderMap.forEach(function(t,o){c.pzaUtil.getDistance(a.baseData.logicPos,t.logicPos)>e||(t.close(),window.pzaMapManager.LadderMap.delete(o))}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_3,t),!f.pzaGameState.noCreateSun())for(var n=this.node.getPosition(),i=0;i<t;i++)this.dropSun(n)},t.prototype.dropSun=function(a){u.pzaBundleObjectPool.requestInstantByUrl2(d.pzaResourceUrl.SUN,function(t,e){if(null==t&&null!=e){e.setParent(l.pzaNodeManager.getUpBgNode());var o=e.getComponent(z.pzaSunLight);o&&o.init2(a,1,25),window.pzaplantManager.AllSunLight.add(o)}else console.error(t)})},t.prototype.flaserDeath=function(){var a=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},i([v],t)}(g.pzaBasePlant));e.pzaSunBomb=P,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","../pzaSunLight":"pzaSunLight","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSunFlowerPlus:[function(a,t,e){"use strict";cc._RF.push(t,"29d6cNlGhdLoqqs/4nrQIV2","pzaSunFlowerPlus");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunFlowerPlus=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.growTime=120,t.isBig=!1,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.growTime=120,this.isBig=!1,this.node.scale=1,this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=p.pzaUtil.getRandomFloatNum(3,12.5));var o=function(){if(!l.pzaGameState.gameWin&&e.baseData.plantData.atkInterval<=0){if(e.baseData.plantData.atkInterval=0,null==e.baseData||e.baseData.isDead)return;return e.baseData.plantData.atkInterval=p.pzaUtil.getRandomFloatNum(23.5,25),r.pzaSoundManager.playAudio("SunShroom"),void e.animation.playAnimation("Sunlinght",!1,o,function(){window.pzaplantManager.plantCreateSun2(e.baseData.logicPos.clone(),1,e.isBig?75:40)})}e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle1",!1,o))};this.animation.playAnimation("idle1",!1,o),t.plantData&&t.plantData.isGrow&&(this.growTime=0,this.isBig=!0,this.node.scale=1.5)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,this.baseData.plantData.atkInterval-=t,this.isBig||(this.growTime-=t,this.growTime<=0&&(this.growUp(),this.baseData&&this.baseData.plantData&&(this.baseData.plantData.isGrow=!0))))},t.prototype.growUp=function(){this.isBig=!0,this.baseData.hp+=this.baseData.maxHp,r.pzaSoundManager.playAudio("garden_plantgrow"),cc.tween(this.node).to(.5,{scale:1.5}).start()},i([u],t)}(s.pzaBasePlant));e.pzaSunFlowerPlus=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSunFlower:[function(a,t,e){"use strict";cc._RF.push(t,"a67d7VbSSNC2qvchm9+QwqV","pzaSunFlower");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunFlower=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),l.pzaGameState.isZombieMode())this.animation.playAnimation("T_idle",!0);else{0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=p.pzaUtil.getRandomFloatNum(3,12.5));var o=function(){if(!l.pzaGameState.gameWin&&e.baseData.plantData.atkInterval<=0){if(e.baseData.plantData.atkInterval=0,null==e.baseData||e.baseData.isDead)return;return e.baseData.plantData.atkInterval=p.pzaUtil.getRandomFloatNum(23.5,25),r.pzaSoundManager.playAudio("SunShroom"),void e.animation.playAnimation("Sunlight",!1,o,function(){window.pzaplantManager.plantCreateSun(e.baseData.logicPos.clone(),!0)})}e.animation.playAnimation("idle",!1,o)};this.animation.playAnimation("idle",!1,o),l.pzaGameState.onlyShroomCofee=!1}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.baseData.plantData.atkInterval-=t)},t.prototype.hurt=function(t,e,o){var n=this.baseData.maxHp-this.baseData.hp;if(a.prototype.hurt.call(this,t,e,o),l.pzaGameState.isZombieMode())for(var i=this.baseData.maxHp-this.baseData.hp,r=Math.floor(i/37)-Math.floor(n/37),p=0;p<r;p++)window.pzaplantManager.plantCreateSun(this.baseData.logicPos.clone(),!0)},t.prototype.steal=function(){if(l.pzaGameState.isZombieMode())for(var a=this.baseData.maxHp-this.baseData.hp,t=this.baseData.hp,e=Math.floor(t/37)-Math.floor(a/37),o=0;o<e;o++)window.pzaplantManager.plantCreateSun(this.baseData.logicPos.clone(),!0)},i([u],t)}(s.pzaBasePlant));e.pzaSunFlower=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSunLight:[function(a,t,e){"use strict";cc._RF.push(t,"42f77b1njtIFLkVhJG239kv","pzaSunLight");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunLight=void 0;var r=a("../Achieve/pzaAchieve"),p=a("../Achieve/pzaAchieveMgr"),l=a("../Common/pzaBaseComponent"),s=a("../Common/pzaGameCommonPool"),c=a("../Common/pzaGameConfig"),u=a("../Common/pzaGameManager"),d=a("../Common/pzaGamePartConfig"),h=a("../Common/pzaLocalData"),m=a("../Common/pzaNodeManager"),f=a("../Common/pzaSoundManager"),z=a("../Common/pzaUtil"),y=a("../Common/pzaWorldEventManager"),g=a("../Load/pzaPreLoadManager"),b=a("../View/Battle/pzaPlantSelectView"),v=a("./Data/pzaGuideType"),P=a("./pzaGameState"),D=cc._decorator,S=D.ccclass,C=D.property,_=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spineAnimation=null,t.poolPrefab=null,t.liveTime=0,t.disappearing=!1,t.picked=!1,t.leftDropDis=0,t.sunValue=0,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.spineAnimation.paused=!1,y.pzaWorldEventManager.addListener(y.pzaWorldEventType.AUTO_PICK,this.autoPick,this),y.pzaWorldEventManager.addListener(y.pzaWorldEventType.PASS_PICK,this.passPick,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.AUTO_PICK,this.autoPick,this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.PASS_PICK,this.passPick,this)},t.prototype.init2=function(a,t,e,o){var n=this;if(void 0===o&&(o=!1),null!=a){var i=a.x,r=a.y;if(this.node.stopAllActions(),this.node.opacity=255,this.sunValue=e,this.node.scale=t,this.liveTime=0,this.disappearing=!1,this.picked=!1,o)return this.node.setPosition(cc.v2(i,r)),void(this.leftDropDis=c.pzaGameConfig.getRandomSunDis());this.leftDropDis=0;var p=t;r+=50*Math.random()*p,i>500&&(i=500),this.node.setPosition(cc.v2(i,r));var l=z.pzaUtil.getRandomFloatNum(-50,50)*p;this.node.runAction(cc.sequence(cc.jumpTo(.6*p,cc.v2(i+l,r),80*p,1),cc.callFunc(function(){n.autoPick()})))}else this.close()},t.prototype.init=function(a,t,e,o){var n=this;if(void 0===o&&(o=!1),null!=a){if(this.node.stopAllActions(),this.node.opacity=255,this.sunValue=e?c.pzaGameConfig.bigSunValue:c.pzaGameConfig.smallSunValue,this.node.scale=e?1:.5,this.liveTime=0,this.disappearing=!1,this.picked=!1,t)return this.node.setPosition(a),void(this.leftDropDis=c.pzaGameConfig.getRandomSunDis());this.leftDropDis=0;var i=e?1:.5;a.y+=50*Math.random()*i,this.node.setPosition(a);var r=o?0:z.pzaUtil.getRandomFloatNum(-50,50)*i;this.node.runAction(cc.sequence(cc.jumpTo(.6*i,cc.v2(a.x+r,a.y),80*i,1),cc.callFunc(function(){n.autoPick()})))}else this.close()},t.prototype.initAdSun=function(a,t){var e=this;this.node.stopAllActions(),this.node.opacity=255,this.sunValue=0,this.node.scale=1,this.liveTime=0,this.disappearing=!0,this.picked=!0,this.node.setPosition(a),this.node.runAction(cc.sequence(cc.moveTo(.5,t).easing(cc.easeQuarticActionOut()),cc.delayTime(.1),cc.callFunc(function(){e.moveToUI()})))},t.prototype.logicUpdate=function(a){this.disappearing||(this.liveTime+=a,this.liveTime>=c.pzaGameConfig.sunLiveTime?this.disappear():this.drop(a))},t.prototype.drop=function(a){if(!(this.leftDropDis<=0)){var t=a*c.pzaGameConfig.autoSunSpeed;t>this.leftDropDis&&(t=this.leftDropDis),this.leftDropDis-=t,this.node.y=this.node.y-t,this.node.y<=100&&this.autoPick()}},t.prototype.clickSun=function(){P.pzaGameState.gamePause||this.disappearing||(window.pzaplantManager.AllSunLight.delete(this),this.moveToUI(),f.pzaSoundManager.playAudio("getSun"),window.pzaGuideManager.guideType!=v.pzaGuideType.GUIDE_PLANT_1_1||3!=window.pzaGuideManager.guideStep&&4!=window.pzaGuideManager.guideStep||window.pzaGuideManager.guideStepNext())},t.prototype.autoPick=function(){P.pzaGameState.autoPickLeft<=0||this.disappearing||(window.pzaplantManager.AllSunLight.delete(this),this.moveToUI(),f.pzaSoundManager.playAudio("getSun"))},t.prototype.passPick=function(){this.disappearing||(window.pzaplantManager.AllSunLight.delete(this),this.moveToUI(),f.pzaSoundManager.playAudio("getSun"))},t.prototype.disappear=function(){window.pzaplantManager.AllSunLight.delete(this),this.disappearing=!0,this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(this.close.bind(this))))},t.prototype.moveToUI=function(){var a=this;if(this.disappearing=!0,this.picked=!0,null==P.pzaGameState.sunMoveUIPos)return P.pzaGameState.sunLightCount+=this.sunValue,h.pzaLocalData.bpGetSun(this.sunValue),void this.close();var t=m.pzaNodeManager.getBattleUINode();if(this.node.setParent(t),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.5,P.pzaGameState.sunMoveUIPos).easing(cc.easeQuinticActionOut()),cc.sequence(cc.delayTime(.3),cc.fadeOut(.2))),cc.callFunc(function(){P.pzaGameState.sunLightCount+=a.sunValue,P.pzaGameState.pickCoinCount+=a.sunValue,h.pzaLocalData.bpGetSun(a.sunValue),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_10,P.pzaGameState.pickCoinCount),a.close()}))),!P.pzaGameState.showSunUI&&(P.pzaGameState.gameMode==P.pzaGameMode.KNOCK_ZOMBIE||P.pzaGameState.gameMode==P.pzaGameMode.KNOCK_ZOMBIE_MINIGAME)){window.pzaMapManager.showSunUI();var e;e=2==P.pzaGameState.curChapter&&7==P.pzaGameState.curPart?d.pzaGamePartConfig.getPartDefaultPlant(2,5):d.pzaGamePartConfig.getPartDefaultPlant(P.pzaGameState.curChapter,P.pzaGameState.curPart),u.pzaGameManager.showBattleUI(g.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(b.pzaPlantSelectView);t&&t.init(e,null),t&&t.initPlant()})}},t.prototype.pauseSelf=function(){this.picked||(this.spineAnimation.paused=!0,this.node.pauseAllActions())},t.prototype.resumeSelf=function(){this.spineAnimation.paused=!1,this.node.resumeAllActions()},t.prototype.close=function(){this.poolPrefab?s.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([C({displayName:"spine\u52a8\u753b\u7ec4\u4ef6",type:sp.Skeleton})],t.prototype,"spineAnimation",void 0),i([C(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([S],t)}(l.pzaBaseComponent);e.pzaSunLight=_,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","./Data/pzaGuideType":"pzaGuideType","./pzaGameState":"pzaGameState"}],pzaSunMine:[function(a,t,e){"use strict";cc._RF.push(t,"ff855joZqVLO7D/cbF7VFC1","pzaSunMine");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunMine=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaZombieEnum"),d=a("../pzaGameState"),h=a("./pzaAttackType"),m=a("./pzaPotatoMine"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.attack=function(a){var t=this;this.hasBomb=!0,this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),l.pzaSoundManager.playAudio("PotatoMineBoom"),this.animation.playAnimation(d.pzaGameState.isZombieMode()?"T_blow":"blow",!1,function(){t.death()});var e=new Set;e.add(a);var o=.6*d.pzaGameState.map.getBlockWidth();window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(a){if(t.baseData&&null!=a&&(a.xIndex==t.baseData.xIndex||a.xIndex-1==t.baseData.xIndex)){if(s.pzaUtil.getDistance(t.baseData.logicPos,a.logicPos)>o)return;e.add(a)}});var n=0;e.forEach(function(a){if(t.baseData&&null!=a&&!a.isDead&&!a.buffData.hasBuff(c.pzaBuffType.FLY)&&(a.zombieData.zombieType==u.pzaZombieEnum.DIGGER_ZOMBIE||!a.buffData.hasBuff(c.pzaBuffType.INVINCIBLE)&&!a.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT))){var e=window.pzazombieManager.getZombie(a);e&&e.hurt(t.baseData.atk,t.baseData,h.pzaAttackType.NORMAL_BOOM),e.baseData.isDead&&n++}}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_2,n),d.pzaGameState.noCreateSun()||window.pzaplantManager.plantCreateSun2(this.node.getPosition(),2,50)},i([z],t)}(m.pzaPotatoMine));e.pzaSunMine=y,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaPotatoMine":"pzaPotatoMine"}],pzaSunPot:[function(a,t,e){"use strict";cc._RF.push(t,"4b94aVkRhxP3r7IvInVPTM2","pzaSunPot");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunPot=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaPlantEnum"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sunTime=25,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.sunTime=3,this.node.zIndex=10*-this.baseData.yIndex-1,this.animation.playAnimation("idle",!0),this.baseData.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead){var e=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaplantManager.plantDataMap.get(e),n=window.pzaplantManager.pumpkinDataMap.get(e);null!=o&&(o.plantData.plantType==p.pzaPlantEnum.PEA_CATTAIL?o.floatY=45:o.floatY=25),null!=n&&(n.floatY=25),this.sunTime-=t,this.sunTime<=0&&(this.sunTime=25,window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1,25))}},t.prototype.flaserDeath=function(){var a=this;this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.FLASER,-1)),this.pauseSelf(),this.node.scaleX=1,this.node.scaleY=.3,this.scheduleOnce(function(){a.node.scale=1,a.close()},5),this.animation.node.stopAllActions()},i([c],t)}(l.pzaBasePlant));e.pzaSunPot=u,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","./pzaBasePlant":"pzaBasePlant"}],pzaSunQueen:[function(a,t,e){"use strict";cc._RF.push(t,"ccce5cebKFE34/BAZjMCNSy","pzaSunQueen");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunQueen=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaUtil"),c=a("../../utils/pzakc"),u=a("../Bullet/pzaTrackBullet"),d=a("../Data/pzaBuffData"),h=a("../pzaEffectManager"),m=a("./pzaAttackType"),f=a("./pzaBasePlant"),z=a("./pzaPlantBody"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.torchwoodBody=null,t.bindWoodData=!1,t.sunTime=25,t.fireCd=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.sunTime=3,this.animation.playAnimation("idle1",!0),this.fireCd=1,this.bindWoodData=!1},t.prototype.logicUpdate=function(t){if(this.bindWoodData||(this.bindWoodData=!0,this.torchwoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody)),a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData){if(this.fireCd>0&&(this.fireCd-=t,this.fireCd<=0&&(this.fireRangeAtk(),this.fireCd=1)),this.sunTime-=t,this.atkInterval-=t,this.sunTime<=0){this.sunTime=25;for(var e=0;e<3;e++)window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1.5,50)}if(!(this.atkInterval>0)){this.atkInterval=this.baseData.plantData.atkInterval;var o=this.findAttackTarget();null!=o&&this.attack(o)}}},t.prototype.fireRangeAtk=function(){var a=this,t=[];window.pzazombieManager.zombieMap.forEach(function(e,o){null==e||null==o||o.isDead||null==o.logicPos||o.xIndex>=a.baseData.xIndex-1&&o.xIndex<=a.baseData.xIndex+1&&o.yIndex>=a.baseData.yIndex-1&&o.yIndex<=a.baseData.yIndex+1&&t.push(e)}),t.length>0&&t.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(d.pzaBuffType.INVINCIBLE)||e.buffData.hasBuff(d.pzaBuffType.DIVE)||e.buffData.hasBuff(d.pzaBuffType.FLY)||e.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)||e.buffData.hasBuff(d.pzaBuffType.INVINCIBLE)||(t&&t.hurt(a.baseData.atk,a.baseData,m.pzaAttackType.FLOOR_ATK),h.pzaEffectManager.createBoomFireEffect(a.baseData.yIndex,.2,e.logicPos,null))})},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(d.pzaBuffType.DIVE)&&!r.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)){var p=s.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(d.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.attack=function(a){if(!(this.baseData.isDead||window.pzazombieManager.zombieMap.size<=0))for(var t=l.pzaNodeManager.getBulletNode(),e=this.node.convertToWorldSpaceAR(cc.v2()),o=t.convertToNodeSpaceAR(e),n=0;n<6;n++){var i=p.pzaGameCommonPool.requestInstant2(this.bulletPrefab);i.setParent(t);var r=cc.v2(o.x,o.y);r.y+=c.default.randomInt(-20,20),r.x+=c.default.randomInt(-20,20);var s=i.getComponent(u.pzaTrackBullet);s.moveSpeed=400,s.init(this.baseData.atk,a,r,this.baseData.yIndex)}},t.prototype.death=function(t,e){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.flaserDeath.call(this)},i([b({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([b({displayName:"\u706b\u70ac\u78b0\u649e\u8eab\u4f53",type:z.pzaPlantBody})],t.prototype,"torchwoodBody",void 0),i([g],t)}(f.pzaBasePlant);e.pzaSunQueen=v,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../utils/pzakc":"pzakc","../Bullet/pzaTrackBullet":"pzaTrackBullet","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant","./pzaPlantBody":"pzaPlantBody"}],pzaSunShroomShooter:[function(a,t,e){"use strict";cc._RF.push(t,"97140gi7dhElbDGhwARRRZP","pzaSunShroomShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunShroomShooter=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaNodeManager"),c=a("../../Common/pzaSoundManager"),u=a("../Bullet/pzaThrowBullet"),d=a("../Data/pzaBuffData"),h=a("../pzaGameState"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.atkTime=0,t.sunTime=25,t.growTime=120,t.isBig=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.growTime=120,this.sunTime=3,this.isBig=!1,this.atkTime=this.atkInterval,this.node.scale=1,this.aniCom(),t.plantData&&t.plantData.isGrow&&(this.growTime=0,this.isBig=!0,this.node.scale=1.5),h.pzaGameState.twinFlowerCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_15,h.pzaGameState.twinFlowerCount)},t.prototype.aniCom=function(){var a=this;if(this.atkTime>0)this.animation.playAnimation("idle",!1,this.aniCom.bind(this));else{var t=this.findAttackTarget();if(t)return this.atkTime=this.atkInterval,void this.animation.playAnimation("attack",!1,this.aniCom.bind(this),function(){a.attack(t)});this.animation.playAnimation("idle",!1,this.aniCom.bind(this))}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.sunTime-=t,this.atkTime-=t,this.sunTime<=0&&(this.sunTime=25,window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1,this.isBig?50:25)),this.isBig||(this.growTime-=t,!this.isBig&&this.growTime<=0&&(this.growUp(),this.baseData&&this.baseData.plantData&&(this.baseData.plantData.isGrow=!0))))},t.prototype.growUp=function(){this.isBig=!0,c.pzaSoundManager.playAudio("garden_plantgrow"),cc.tween(this.node).to(.5,{scale:1.5}).start()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(d.pzaBuffType.FLY)&&!o.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=s.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){var n=t.convertToNodeSpaceAR(o),i=l.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var r=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var p=cc.v2(r.x+this.baseData.logicPos.x+16,r.y+this.baseData.logicPos.y+57);i.setPosition(p);var c=i.getComponent(u.pzaThrowBullet);null!=c&&(c.init(!1,this.baseData.yIndex,this.isBig?this.baseData.plantData.atk2Arr[0]:this.baseData.atk,a,n),this.isBig&&(i.scale=1.5))}}}}}},i([y({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([y({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([z],t)}(m.pzaBasePlant);e.pzaSunShroomShooter=g,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSunShroom:[function(a,t,e){"use strict";cc._RF.push(t,"24255GcIXxBbJDyg2usbMpg","pzaSunShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunShroom=void 0;var r=a("../../Common/pzaNodeManager"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaSpineController"),s=a("../../Common/pzaUtil"),c=a("../../Load/pzaBundleObjectPool"),u=a("../../Load/pzaPreLoadManager"),d=a("../Effect/pzaShadowEffect"),h=a("../pzaGameState"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.blinkTime=3,t.shadow=null,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=24),t.plantData.sleeping?(this.animation.playAnimation("idle_small2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,t.plantData.growStep>0?this.animation.playAnimation("idle_big1",!1,this.playIdleAni.bind(this)):this.animation.playAnimation("idle_small1",!1,this.playIdleAni.bind(this))),this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),h.pzaGameState.useShroom=!0,t.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.plantData.sleeping||(this.grow(t),this.blinkTime-=t,this.baseData.plantData.atkInterval-=t,h.pzaGameState.gameWin||this.baseData.plantData.atkInterval>0||(this.baseData.plantData.atkInterval=24,p.pzaSoundManager.playAudio("SunShroom"),window.pzaplantManager.plantCreateSun(this.baseData.logicPos.clone(),this.baseData.plantData.growStep>=1),this.animation.showLight()))},t.prototype.wakeUp=function(){a.prototype.wakeUp.call(this),null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.baseData.plantData.sleeping=!1,this.sleepAni.node.active=!1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("small_bawoke",!1,this.playIdleAni.bind(this)))},t.prototype.letPlantSleep=function(){!this.sleepAni.node.active&&this.plantSleepAni&&(this.plantSleepAni.node.active=!0,this.plantSleepAni.playAnimation("idle",!0))},t.prototype.grow=function(a){var t=this;if(this.baseData.plantData.growTime+=a,!(this.baseData.plantData.growStep>=1||this.baseData.plantData.growTime<=120)){this.baseData.plantData.growStep=1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),p.pzaSoundManager.playAudio("garden_plantgrow"),this.animation.playAnimation("idle_small_big",!1,function(){t.animation.playAnimation("idle_big1",!1,t.playIdleAni.bind(t))});var e=this.animation.getAnimationDuration("idle_small_big");this.shadow&&this.shadow.scaleShadow(e,1)}},t.prototype.playIdleAni=function(){var a=this;this.blinkTime>0?this.animation.playAnimation(this.baseData.plantData.growStep>=1?"idle_big1":"idle_small1",!1,this.playIdleAni.bind(this)):(this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation(this.baseData.plantData.growStep>=1?"idle_big1_eye":"idle_small1_eye",!1,function(){a.animation.playAnimation(a.baseData.plantData.growStep>=1?"idle_big1":"idle_small1",!1,a.playIdleAni.bind(a))}))},t.prototype.createShadow=function(){var a=this;this.needShadow?c.pzaBundleObjectPool.requestInstantByUrl2(u.pzaResourceUrl.SHADOW,function(t,e){if(null==t&&null!=e){var o=r.pzaNodeManager.getDownEffectNode();if(null!=o){e.setParent(o);var n=e.getComponent(d.pzaShadowEffect);n&&n.init(a.baseData,a.shadowOffset,a.shadowScale),a.shadow=n}}else console.error(t)}):this.shadow=null},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([y({displayName:"\u7761\u89c9\u52a8\u753b",type:l.pzaSpineController})],t.prototype,"sleepAni",void 0),i([z],t)}(m.pzaBasePlant);e.pzaSunShroom=g,cc._RF.pop()},{"../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Effect/pzaShadowEffect":"pzaShadowEffect","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSunflowerZombie:[function(a,t,e){"use strict";cc._RF.push(t,"6db22POi+tJe4o8S5NiZO58","pzaSunflowerZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunflowerZombie=void 0;var r=a("../pzaGameState"),p=a("./pzaBaseZombie"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sunLight_InitTime=15,t.sunLight_CurrentTime=15,t.garlicSkinName="zombie_head_1",t}return n(t,a),t.prototype.bindData=function(t,e){a.prototype.bindData.call(this,t,e),this.sunLight_CurrentTime=this.sunLight_InitTime},t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[l.pzaZombieSlotType.butter,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.butter).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.butter,67.87,-1.82,-90.94))]])},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this&&this.baseData&&!this.baseData.isDead&&(this.sunLight_CurrentTime-=t,this.sunLight_CurrentTime<=0&&(this.sunLight_CurrentTime=this.sunLight_InitTime,this.operateSunLight()))},t.prototype.operateSunLight=function(){this.hypnosisState?window.pzaplantManager.plantCreateSun(this.baseData.logicPos.clone(),!0,!1,25):r.pzaGameState.sunLightCount-=25},i([c],t)}(p.pzaBaseZombie));e.pzaSunflowerZombie=u,cc._RF.pop()},{"../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaSuperChomper:[function(a,t,e){"use strict";cc._RF.push(t,"40a3e3X5CxDVZCnOfVaBBMz","pzaSuperChomper");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSuperChomper=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.eating=!1,t.isEat=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.eating=!1,this.animation.playAnimation(t.plantData.eatTime>0?"idle2":"idle1",!0),c.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead){if(this.baseData.plantData.eatTime>0)return this.baseData.plantData.eatTime-=t,void(this.baseData.plantData.eatTime<=0&&(this.eating=!0,this.animation.playAnimation("eat",!1,function(){e.eating=!1,e.animation.playAnimation("idle1",!0)})));if(!this.eating&&!this.isEat){var o=this.findAttackTarget();if(null!=o)if(Math.random()<.2){var n=this.findSpecialAttackTarget();n.length>0&&this.specialAttack(n)}else this.attack(o)}}},t.prototype.findAttackTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1;if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.DIVE))&&(o.zombieData.zombieType!=s.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(l.pzaBuffType.FROZEN)||o.zombieData.toolType==s.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType!=s.pzaZombieEnum.BUNGEE_ZOMBIE||o.xIndex!=a.baseData.xIndex)){var n=p.pzaUtil.getDistance(o.logicPos,a.baseData.logicPos);if(o.logicPos.x<=a.baseData.logicPos.x)n<=.5*c.pzaGameState.map.getBlockWidth()&&(t=o,e=0);else if(!(n>1.8*c.pzaGameState.map.getBlockWidth()))return-1==e?(t=o,void(e=n)):void(e<=n||(t=o,e=n))}}),null==t){var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t}},t.prototype.findSpecialAttackTarget=function(){var a=this,t=[];return window.pzazombieManager.zombieMap.forEach(function(e,o){null==e||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.DIVE)||(o.zombieData.zombieType!=s.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(l.pzaBuffType.FROZEN)||o.zombieData.toolType==s.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType==s.pzaZombieEnum.BUNGEE_ZOMBIE&&o.xIndex==a.baseData.xIndex||a.baseData.yIndex==o.yIndex&&o.xIndex>=a.baseData.xIndex&&o.xIndex<=a.baseData.xIndex+3&&t.push(o))}),t},t.prototype.attack=function(a){var t=this;this.baseData.plantData.eatTime=20,this.isEat=!0,this.animation.playAnimation("attack1",!1,function(){t.animation.playAnimation(t.baseData.plantData.eatTime>0?"idle2":"idle1",!0)},function(){if(t.isEat=!1,t.baseData&&!t.baseData.isDead){var e=window.pzazombieManager.getZombie(a);null==e||null==e.baseData||e.baseData.isDead?t.baseData.plantData.eatTime=0:(e.hurt(t.baseData.atk,t.baseData,u.pzaAttackType.EAT),null==a.zombieData||a.zombieData.cate!==s.pzaZombieCate.Gargantuar&&a.zombieData.zombieType!=s.pzaZombieEnum.DR_ZOMBOSS?(r.pzaSoundManager.playAudio("ChomperAtk"),a.isDead||(t.baseData.plantData.eatTime=0)):t.baseData.plantData.eatTime=0)}})},t.prototype.specialAttack=function(a){var t=this,e=0,o=0;this.isEat=!0,this.animation.playAnimation("attack2",!1,function(){t.animation.playAnimation(t.baseData.plantData.eatTime>0?"idle2":"idle1",!0)},function(){t.isEat=!1,t.baseData&&!t.baseData.isDead&&(a.forEach(function(a){var n=window.pzazombieManager.getZombie(a);null==n||null==n.baseData||n.baseData.isDead?t.baseData.plantData.eatTime=0:null==a.zombieData||a.zombieData.zombieType!=s.pzaZombieEnum.DR_ZOMBOSS?(n.hurt(200*t.baseData.atk,t.baseData,u.pzaAttackType.DEATH),null!=a.zombieData&&a.zombieData.zombieType==s.pzaZombieEnum.GARGANTUAR?e+=20:null!=a.zombieData&&a.zombieData.zombieType==s.pzaZombieEnum.RED_GARGANTUAR?e+=40:o=(o+=5)>=20?20:o,r.pzaSoundManager.playAudio("ChomperAtk")):n.hurt(t.baseData.atk,t.baseData,u.pzaAttackType.EAT)}),t.baseData.plantData.eatTime=e+o)})},i([m],t)}(d.pzaBasePlant));e.pzaSuperChomper=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSuperPitaya:[function(a,t,e){"use strict";cc._RF.push(t,"a02acfUTIRKS5zYeYcieZCT","pzaSuperPitaya");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSuperPitaya=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../Bullet/pzaBaseBullet"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaPlantEnum"),d=a("../Data/pzaZombieEnum"),h=a("../pzaEffectManager"),m=a("../pzaGameState"),f=a("./pzaAttackType"),z=a("./pzaBasePlant"),y=cc._decorator,g=y.ccclass,b=y.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.shootNode=null,t.blinkTime=8,t.atkTime=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=u.pzaPlantCate.Nut,this.blinkTime=l.pzaUtil.getRandomFloatNum(8,10),this.atkTime=0,this.playNormalAni(),m.pzaGameState.onlyShroomCofee=!1,this.animation.setAnimationSkin("skin1")},t.prototype.playNormalAni=function(){var a=this;if(this.atkTime>0)return this.blinkTime>0?void this.animation.playAnimation("idle",!1,this.playNormalAni.bind(this)):(this.blinkTime=l.pzaUtil.getRandomFloatNum(8,10),void this.animation.playAnimation("idle_eye",!1,this.playNormalAni.bind(this)));var t=this.findAttackTarget();if(t)return this.atkTime=this.atkInterval,void this.animation.playAnimation("attack",!1,this.playNormalAni.bind(this),function(){a.attackZombie(t)});this.animation.playAnimation("idle",!1,this.playNormalAni.bind(this))},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.atkTime-=t},t.prototype.findAttackTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1;if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.buffData.hasBuff(c.pzaBuffType.FLY)||o.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(c.pzaBuffType.DIVE))&&(o.zombieData.zombieType!=d.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(c.pzaBuffType.FROZEN)||o.zombieData.toolType==d.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType!=d.pzaZombieEnum.BUNGEE_ZOMBIE||o.xIndex!=a.baseData.xIndex)){var n=l.pzaUtil.getDistance(o.logicPos,a.baseData.logicPos);if(!(o.logicPos.x>=a.baseData.logicPos.x))return-1==e?(t=o,void(e=n)):void(e<=n||(t=o,e=n));n<=1*m.pzaGameState.map.getBlockWidth()&&(t=o,e=0)}}),null==t){var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t}},t.prototype.attackZombie=function(a){if(null!=this.baseData&&!this.baseData.isDead&&a&&!a.isDead){var t=window.pzazombieManager.getZombie(a);a.zombieData.equipHp>0||a.zombieData.equipHp2>0?(t.hurt(this.baseData.atk,this.baseData,f.pzaAttackType.EAT),this.shootBullet(80)):a.hp>500?(t.hurt(this.baseData.atk,this.baseData),this.shootBullet(80)):(t.hurt(200*this.baseData.atk,this.baseData,f.pzaAttackType.DEATH_ANI),this.shootBullet(20,5))}},t.prototype.hurt=function(t,e,o){if(this.baseData){if(o==f.pzaAttackType.BOOM)return window.pzaplantManager.removePlant(this.baseData),void this.death(e);if(o==f.pzaAttackType.BANG){if(t=this.baseData.maxHp/8,this.baseData.hurtPlanet(t),this.refreshHurtState(!1),!this.baseData.isDead)return;return window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()}a.prototype.hurt.call(this,t,e,o)}},t.prototype.shootBullet=function(a,t){if(void 0===t&&(t=0),null!=this.baseData&&!this.baseData.isDead){var e=p.pzaNodeManager.getBulletNode();if(null!=e){var o=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=o){o.setParent(e);var n=this.shootNode.convertToWorldSpaceAR(cc.v2()),i=e.convertToNodeSpaceAR(n);o.setPosition(i);var l=o.getComponent(s.pzaBaseBullet);if(null!=l){l.init(this.baseData.yIndex,a,1,null,cc.v2(1,0),!0,!1,t);var c=m.pzaGameState.map.getMapSkewColumn();c>0&&this.baseData.xIndex<=c-2&&(l.maxPosX=this.baseData.logicPos.x+1.5*m.pzaGameState.map.getBlockWidth())}}}}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin3");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+130),e=10*-this.baseData.yIndex;h.pzaEffectManager.createNutHurtEffect(t,"blow2",e)},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin2");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+130),e=10*-this.baseData.yIndex;h.pzaEffectManager.createNutHurtEffect(t,"blow1",e)},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin1")},i([b({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([b({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([g],t)}(z.pzaBasePlant);e.pzaSuperPitaya=v,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSurfBananaZombie:[function(a,t,e){"use strict";cc._RF.push(t,"c2bd5ioZWxLtpB299aA5z4J","pzaSurfBananaZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSurfBananaZombie=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaBaseBullet"),c=a("../Bullet/pzaZombieBaseBullet"),u=a("../pzaGameState"),d=a("../pzaSpineTool"),h=a("./pzaDolphinRiderZombie"),m=a("./pzaZombieSlot"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.plantBltPre=null,t.garlicSkinName=null,t.equip1Slot=m.pzaZombieSlotType.hat,t.yIndexIsWater=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,52.1,-3.44,-89.7))],[m.pzaZombieSlotType.hat,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.hat).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.hat+"1",.01,.01)).addState(new m.pzaZombieSlotAtt(2,m.pzaZombieSlotType.hat+"2",.01,.01)).addState(new m.pzaZombieSlotAtt(3,m.pzaZombieSlotType.hat+"3",-.09,15))]])},t.prototype.shoot=function(){if(this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(a){l.pzaSoundManager.playAudio("PeashooterAtk");var t=null;(t=this.baseData.zombieData.canAtkZombie?r.pzaGameCommonPool.requestInstant2(this.plantBltPre):r.pzaGameCommonPool.requestInstant2(this.bulletPrefab)).setParent(a);var e=d.pzaSpineTool.findBonePos(this.animation.spineAnimation,"1head1",this.node),o=a.convertToNodeSpaceAR(e);o.y-=15,t.setPosition(o);var n=null;this.baseData.zombieData.canAtkZombie?(n=t.getComponent(s.pzaBaseBullet)).init(this.baseData.yIndex,20,1):(n=t.getComponent(c.pzaZombieBaseBullet)).init(this.baseData.yIndex,20);var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}},i([y(cc.Prefab)],t.prototype,"bulletPrefab",void 0),i([y(cc.Prefab)],t.prototype,"plantBltPre",void 0),i([z],t)}(h.pzaDolphinRiderZombie);e.pzaSurfBananaZombie=g,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaZombieBaseBullet":"pzaZombieBaseBullet","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaDolphinRiderZombie":"pzaDolphinRiderZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaSurfGatlingZombie:[function(a,t,e){"use strict";cc._RF.push(t,"945beBrmPBO6aJ6qRRFHqBm","pzaSurfGatlingZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSurfGatlingZombie=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaBaseBullet"),c=a("../Bullet/pzaZombieBaseBullet"),u=a("../pzaGameState"),d=a("../pzaSpineTool"),h=a("./pzaDolphinRiderZombie"),m=a("./pzaZombieSlot"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.plantBltPre=null,t.garlicSkinName=null,t.equip1Slot=m.pzaZombieSlotType.hat,t.yIndexIsWater=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,52.1,-3.44,-89.7))],[m.pzaZombieSlotType.hat,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.hat).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.hat+"1",80.01,-22.25,-90.94)).addState(new m.pzaZombieSlotAtt(2,m.pzaZombieSlotType.hat+"2",63.2,-21.91,-90.94)).addState(new m.pzaZombieSlotAtt(3,m.pzaZombieSlotType.hat+"3",49.92,-21.73,-90.94))]])},t.prototype.shoot=function(){if(this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(a){l.pzaSoundManager.playAudio("PeashooterAtk");var t=null;(t=this.baseData.zombieData.canAtkZombie?r.pzaGameCommonPool.requestInstant2(this.plantBltPre):r.pzaGameCommonPool.requestInstant2(this.bulletPrefab)).setParent(a);var e=d.pzaSpineTool.findBonePos(this.animation.spineAnimation,"1head1",this.node),o=a.convertToNodeSpaceAR(e);o.y-=15,t.setPosition(o);var n=null;this.baseData.zombieData.canAtkZombie?(n=t.getComponent(s.pzaBaseBullet)).init(this.baseData.yIndex,20,1):(n=t.getComponent(c.pzaZombieBaseBullet)).init(this.baseData.yIndex,20);var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}},i([y(cc.Prefab)],t.prototype,"bulletPrefab",void 0),i([y(cc.Prefab)],t.prototype,"plantBltPre",void 0),i([z],t)}(h.pzaDolphinRiderZombie);e.pzaSurfGatlingZombie=g,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaZombieBaseBullet":"pzaZombieBaseBullet","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaDolphinRiderZombie":"pzaDolphinRiderZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaSurvivalConfig:[function(a,t,e){"use strict";cc._RF.push(t,"029eafKdDNAf7+1SwbYKfUY","pzaSurvivalConfig");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSurvivalConfig=void 0;var i=a("../Battle/Data/pzaZombieEnum"),r=a("./pzaGamePartConfig"),p=a("./pzaUtil"),l=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.minRandomTypeC=0,t.maxRandomTypeC=0,t.randomTypePool=[],t}return n(t,a),t.initSurvivalConfig=function(a){var e=this;null!=a&&a.forEach(function(a){if(null!=a){var o=null;null!=a.density&&(o=a.density.split(",")).forEach(function(a,t){o[t]=parseInt(a)});var n=null;null!=a.type&&(n=a.type.split(",")).forEach(function(a,t){n[t]=parseInt(a)});var i=new t(a.Level,parseInt(a.wave),o,null,null,parseInt(a.multiple),parseInt(a.tombstone),parseInt(a.tombstonemini),parseInt(a.flowerpot),0,a.map,a.isnight,"",0);if(i.randomTypePool=n,null!=a.waterexit&&(i.minWaterWave=parseInt(a.waterexit)),null!=a.waterend){var r=a.waterend.split(",");null!=r&&(i.lastWaterWaveMinColumn=parseInt(r[0]),i.lastWaterWaveZombie=parseInt(r[1]))}if(null!=a.fall){var p=a.fall.split(",");null!=p&&(i.lastBungeeMinColumn=parseInt(p[0]),i.lastBungeeZombie=parseInt(p[1]))}if(null!=a.fog&&(i.minFogColumn=parseInt(a.fog)),null!=a.typenumber){var l=a.typenumber.split(",");null!=l&&null!=l[0]&&null!=l[1]&&(i.minRandomTypeC=parseInt(l[0]),i.maxRandomTypeC=parseInt(l[1]))}e.survivalConfigMap.set(a.Level,i)}})},t.prototype.createNewConfig=function(){var a=new t(this.part,this.maxWave,this.waveZombieDensity,this.zombieTypes,this.newZombieType,this.magnification,this.tombCount,this.tombMinRow,this.flowerPotColumn,this.initSun,this.mapId,this.isnight,this.gamename,this.partPlantType);if(a.minWaterWave=this.minWaterWave,a.lastWaterWaveMinColumn=this.lastWaterWaveMinColumn,a.lastWaterWaveZombie=this.lastWaterWaveZombie,a.lastBungeeMinColumn=this.lastBungeeMinColumn,a.lastBungeeZombie=this.lastBungeeZombie,a.minFogColumn=this.minFogColumn,a.zombieTypes=[],0==this.minRandomTypeC&&0==this.maxRandomTypeC)this.randomTypePool.forEach(function(t){a.zombieTypes.push(t)});else{a.zombieTypes.push(i.pzaZombieEnum.ZOMBIE),Math.random()>=.2?a.zombieTypes.push(i.pzaZombieEnum.CONE_HEAD_ZOMBIE):a.zombieTypes.push(i.pzaZombieEnum.NEWSPAPER_ZOMBIE);var e=p.pzaUtil.getRandomNum(this.minRandomTypeC,this.maxRandomTypeC),o=[];this.randomTypePool.forEach(function(t){t!=i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE&&t!=i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE&&t!=i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE&&a.zombieTypes.indexOf(t)<0&&o.push(t)});var n=p.pzaUtil.getRandomArrayValue(o,e);a.zombieTypes=a.zombieTypes.concat(n),this.randomTypePool.forEach(function(t){t!=i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE?t==i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE&&a.zombieTypes.indexOf(i.pzaZombieEnum.CONE_HEAD_ZOMBIE)>=0?a.zombieTypes.push(t):t==i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE&&a.zombieTypes.indexOf(i.pzaZombieEnum.BUCKET_HEAD_ZOMBIE)>=0&&a.zombieTypes.push(t):a.zombieTypes.push(t)})}return a},t.createEndlessConfig=function(a,e){var o=new t(a+"-"+e,20,this.createZombieDensity(e),[],null,1,0,0,0);if(2==a?(o.tombCount=6,o.tombMinRow=6):3==a?(o.minWaterWave=1==e?8:6,o.lastWaterWaveMinColumn=6,o.lastWaterWaveZombie=3):4==a?(o.minWaterWave=1==e?8:6,o.lastWaterWaveMinColumn=6,o.lastWaterWaveZombie=3,o.minFogColumn=6):5==a&&(o.flowerPotColumn=3,o.lastBungeeMinColumn=5,o.lastBungeeZombie=3),o.redLimit=Math.min(50,e-5),1==e)o.zombieTypes.push(i.pzaZombieEnum.ZOMBIE),o.zombieTypes.push(i.pzaZombieEnum.CONE_HEAD_ZOMBIE),o.zombieTypes.push(i.pzaZombieEnum.BUCKET_HEAD_ZOMBIE),3!=a&&4!=a||(o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE),o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE));else{var n=[4,5,7,8,18,19,21,23,24,25];o.zombieTypes.push(i.pzaZombieEnum.ZOMBIE),Math.random()>=.2?(o.zombieTypes.push(i.pzaZombieEnum.CONE_HEAD_ZOMBIE),n.push(i.pzaZombieEnum.NEWSPAPER_ZOMBIE)):(o.zombieTypes.push(i.pzaZombieEnum.NEWSPAPER_ZOMBIE),n.push(i.pzaZombieEnum.CONE_HEAD_ZOMBIE)),3!=a&&4!=a||(n.push(i.pzaZombieEnum.SNORKEL_ZOMBIE),n.push(i.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE)),2!=a&&e>4&&n.push(i.pzaZombieEnum.ZOMBONI),5!=a&&(n.push(i.pzaZombieEnum.DANCING_ZOMBIE),n.push(i.pzaZombieEnum.DIGGER_ZOMBIE)),e>4&&n.push(i.pzaZombieEnum.GARGANTUAR),e>10&&n.push(i.pzaZombieEnum.RED_GARGANTUAR);var r=Math.min(e,9),l=p.pzaUtil.getRandomArrayValue(n,r);o.zombieTypes=o.zombieTypes.concat(l),3!=a&&4!=a||(o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE),o.zombieTypes.indexOf(i.pzaZombieEnum.CONE_HEAD_ZOMBIE)>=0&&o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),o.zombieTypes.indexOf(i.pzaZombieEnum.BUCKET_HEAD_ZOMBIE)>=0&&o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE))}return o},t.createZombieDensity=function(a){for(var t=[],e=1;e<=20;e++){var o=Math.floor(Math.floor(.8*(e+20*(a-1)-1))/2)+1;e%10==0&&(o=Math.floor(2.5*o)),t.push(o)}return t},t.getSurvivaliConfig=function(a,t){var e=this.survivalConfigMap.get(a+"-"+t);return null==e?(console.error("\u672a\u627e\u5230\u5bf9\u5e94\u5173\u5361\u914d\u7f6e"),null):e.createNewConfig()},t.getAllZombies=function(a){for(var t=[],e=1;e<=5;e++){var o=this.survivalConfigMap.get(a+"-"+e);null!=o&&null!=o.randomTypePool&&o.randomTypePool.forEach(function(a){t.indexOf(a)<0&&t.push(a)})}return t},t.getAllEndlessZombies=function(a){var t=[1,2,3,4,5,6,7,8,18,19,21,23,24,25,26,27];return 3!=a&&4!=a||(t.push(i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE),t.push(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),t.push(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE),t.push(i.pzaZombieEnum.SNORKEL_ZOMBIE),t.push(i.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE)),2!=a&&t.push(i.pzaZombieEnum.ZOMBONI),5!=a&&(t.push(i.pzaZombieEnum.DANCING_ZOMBIE),t.push(i.pzaZombieEnum.DIGGER_ZOMBIE)),t},t.cloneConfig=function(a){if(null==a)return null;var e=new t(a.part,a.maxWave,a.waveZombieDensity,a.zombieTypes,a.newZombieType,a.magnification,a.tombCount,a.tombMinRow,a.flowerPotColumn,a.initSun,a.mapId,a.isnight,a.gamename,a.partPlantType);return e.minWaterWave=a.minWaterWave,e.lastWaterWaveMinColumn=a.lastWaterWaveMinColumn,e.lastWaterWaveZombie=a.lastWaterWaveZombie,e.lastBungeeMinColumn=a.lastBungeeMinColumn,e.lastBungeeZombie=a.lastBungeeZombie,e.minFogColumn=a.minFogColumn,e.minRandomTypeC=a.minRandomTypeC,e.maxRandomTypeC=a.maxRandomTypeC,e.randomTypePool=a.randomTypePool,e.redLimit=a.redLimit,e},t.survivalConfigMap=new Map,t}(r.pzaGamePartConfig);e.pzaSurvivalConfig=l,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","./pzaGamePartConfig":"pzaGamePartConfig","./pzaUtil":"pzaUtil"}],pzaSurvivalItem:[function(a,t,e){"use strict";cc._RF.push(t,"43c35UedddIXZJuEZQCzZjm","pzaSurvivalItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSurvivalItem=void 0;var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameManager"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSoundManager"),c=a("../Common/pzaTipManager"),u=a("../Common/pzaUIManager"),d=a("../Common/pzaWorldEventManager"),h=a("../utils/pzakc"),m=a("./pzaCommonMask"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.trophyNode=null,t.lockNode=null,t.zombie=[],t.bg=null,t.flagNode=null,t.flagCount=null,t.startNode=null,t.curChapter=1,t.unlock=!1,t.startGameCall=null,t.costPower=l.pzaLocalData.endLessPowerCost,t.gameDelayTime=1.5,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.on(cc.Node.EventType.TOUCH_END,this.clickItem,this),this.startNode.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startNode.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startNode.on(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.off(cc.Node.EventType.TOUCH_END,this.clickItem,this),this.startNode.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.startNode.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.startNode.off(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.bindData=function(a,t){this.curChapter=a,this.startGameCall=t,this.unlock=l.pzaLocalData.data.survivalPassChapter+1>=a||l.pzaLocalData.data.survivalPassChapter>=5||l.pzaLocalData.data.preOpenSurvival,this.trophyNode.active=a<=5&&l.pzaLocalData.data.survivalPassChapter>=a,this.lockNode.active=!this.unlock,this.startNode.active=this.unlock,this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.bg.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.unlock?(this.zombie.forEach(function(a){a.color=cc.Color.fromHEX(cc.color(),"#FFFFFF")}),a>5&&(this.flagNode.active=!0,this.flagCount.string=""+l.pzaLocalData.getSurvivalFlagCount(a-5))):(this.zombie.forEach(function(a){a.color=cc.Color.fromHEX(cc.color(),"#939393")}),this.flagNode&&(this.flagNode.active=!1)),l.pzaLocalData.isShowPowerGift||(this.costPower=0,this.gameDelayTime=0,this.startNode.active=!1);var e=this.node.getChildByName("lv_imgSta").getChildByName("rightPower").getChildByName("rightPowercost");e&&(e.getComponent(cc.Label).string="X"+l.pzaLocalData.endLessPowerCost)},t.prototype.touchItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#939393"):cc.Color.fromHEX(cc.color(),"#606060")},t.prototype.cancelItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393")},t.prototype.clickItem=function(){var a=this;if(!this.unlock)return this.node.color=cc.Color.fromHEX(cc.color(),"#939393"),void s.pzaSoundManager.playAudio("unlockpart");this.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF");var t=r.pzaGameState.gameMode,e=this.curChapter,o=r.pzaGameMode.SURVIVAL;if(this.curChapter>5&&(e=this.curChapter-5,o=r.pzaGameMode.SUR_ENDLESS),l.pzaLocalData.isWeekTwo=!1,r.pzaGameState.midOut){if(o==r.pzaGameMode.SUR_ENDLESS&&l.pzaLocalBattleData.data.endlessBattleData[e-1])return p.pzaGameManager.removeBattleUI(),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.GAME_OVER,null),this.startGameCall&&this.startGameCall(),u.pzaUIManager.removeBoardUI(),void p.pzaGameManager.preLoadAndStart(o,e,1);console.log("newGameMode",o,"oldGameMode",t,"this.curChapter",this.curChapter,"curChapter",e),o===t&&r.pzaGameState.curChapter===e?(this.startGameCall&&this.startGameCall(),console.log("recover"),p.pzaGameManager.getCurrentGame().gameRecover(e,1,o===r.pzaGameMode.SURVIVAL?l.pzaLocalBattleData.data.survivalBattleData[e-1]:l.pzaLocalBattleData.data.endlessBattleData[e-1])):(console.log("midOutStart"),p.pzaGameManager.midOutStart(o,e,1,this.startGameCall.bind(this)))}else{if(o==r.pzaGameMode.SUR_ENDLESS&&l.pzaLocalBattleData.data.endlessBattleData[e-1])return this.startGameCall&&this.startGameCall(),u.pzaUIManager.removeBoardUI(),void p.pzaGameManager.preLoadAndStart(o,e,1);if(l.pzaLocalData.data.power<this.costPower)return c.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void u.pzaUIManager.showPowerView();l.pzaLocalData.setPower(-this.costPower),h.default.sendMsg("powerani"),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.POWER_ANI,{cost:this.costPower}),m.pzaCommonMask.showMask(),this.scheduleOnce(function(){m.pzaCommonMask.showMask(),a.startGameCall&&a.startGameCall(),u.pzaUIManager.removeBoardUI(),p.pzaGameManager.preLoadAndStart(o,e,1)},this.gameDelayTime)}},i([y({displayName:"\u5956\u676f",type:cc.Node})],t.prototype,"trophyNode",void 0),i([y({displayName:"\u9501",type:cc.Node})],t.prototype,"lockNode",void 0),i([y({displayName:"\u50f5\u5c38",type:[cc.Node]})],t.prototype,"zombie",void 0),i([y({displayName:"\u573a\u666f",type:cc.Node})],t.prototype,"bg",void 0),i([y({displayName:"\u65d7\u5e1c\u8282\u70b9",type:cc.Node})],t.prototype,"flagNode",void 0),i([y({displayName:"\u65d7\u5e1c\u6570\u91cf",type:cc.Label})],t.prototype,"flagCount",void 0),i([y({displayName:"\u5f00\u59cb\u6e38\u620f\u8282\u70b9",type:cc.Node})],t.prototype,"startNode",void 0),i([z],t)}(cc.Component);e.pzaSurvivalItem=g,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameManager":"pzaGameManager","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask"}],pzaSurvivalView:[function(a,t,e){"use strict";cc._RF.push(t,"dc77cBkXi5Pj6oAJ6X9XOtJ","pzaSurvivalView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSurvivalView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaTipManager"),c=a("../Common/pzaUIManager"),u=a("../Common/pzaUtil"),d=a("../Common/pzaWorldEventManager"),h=a("../Load/pzaPreLoadManager"),m=a("../utils/pzaChannel"),f=a("./pzaPowerView"),z=a("./pzaRankView"),y=a("./pzaSurvivalItem"),g=cc._decorator,b=g.ccclass,v=g.property,P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.coinCount=null,t.trophyCount=null,t.scrollView=null,t.items=[],t.rankWidget=null,t}return n(t,a),t.prototype.onEnable=function(){var a=this;this.node.x=0,this.coinCount.string=u.pzaUtil.getCurrencyStr(p.pzaLocalData.data.coin),this.trophyCount.string=p.pzaLocalData.data.survivalPassChapter+"/5",this.scrollView.node.stopAllActions(),this.scrollView.node.y=580,this.scrollView.node.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(.2,cc.v2(0,180)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){l.pzaSoundManager.playAudio("chapterdown")}))),p.pzaLocalData.data.survivalPassChapter<5?this.scrollView.scrollToLeft(0):this.scrollView.scrollToRight(0);for(var t=1;t<=10;t++){var e=this.items[t-1];e&&e.bindData(t,function(){m.pzaChannel.instance().closeBanner(),a.close()})}this.rankWidget.updateAlignment(),this.createWxUserInfoButton(!1,null),"ks"==m.pzaChannel.instance().channel&&(this.rankWidget.node.active=!1),m.pzaChannel.instance().showBanner()},t.prototype.clickBack=function(){var a=this;l.pzaSoundManager.playSFX(),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.3,cc.v2(0,580)).easing(cc.easeCubicActionOut())),c.pzaUIManager.aniHidePopUI(function(){a.close(),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.UPDATE_RECORD_STATE,null),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.BACK_HOMEVIEW,null)})},t.prototype.clickRankBtn=function(){"hw"!=m.pzaChannel.instance().channel&&"oppo"!=m.pzaChannel.instance().channel&&"vivo"!=m.pzaChannel.instance().channel?this.createWxUserInfoButton(!0,function(){c.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.RANK_VIEW,function(a){var t=a&&a.getComponent(z.pzaRankView);t&&t.init(0)})}):s.pzaTipManager.showHomeTip("\u6682\u672a\u5f00\u653e",this.node,2)},t.prototype.createWxUserInfoButton=function(a,t){var e=this,o=m.pzaChannel.instance().getChannel();"wx"!==o.channel||null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar?t&&t():o.wxCheckPrivacySetting(function(n){var i=function(){var a=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width+e.rankWidget.node.x-60)/n.width*a.width,top:(.5*n.height-e.rankWidget.node.y-60)/n.height*a.height,width:120/n.width*a.width,height:120/n.height*a.height};o.getUserInfo(function(){null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),t&&t())},i,!1)};if(n)return a?void o.wxPrivacyAuthorize(i,null):void(t&&t());i()},null)},t.prototype.clickPower=function(){c.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.POWER_VIEW,function(a){var t=a&&a.getComponent(f.pzaPowerView);t&&t.bindData("\u8865\u5145\u4f53\u529b",function(){var a;a=p.pzaLocalData.data.power+p.pzaLocalData.addPowerValue,p.pzaLocalData.data.power=a,p.pzaLocalData.addDirty("power"),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.UPDATE_POWER,null)},null)})},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node);var a=m.pzaChannel.instance().getChannel();"wx"==a.channel&&a.destroyAuthorizationButton()},i([v({displayName:"\u91d1\u5e01",type:cc.Label})],t.prototype,"coinCount",void 0),i([v({displayName:"\u5956\u676f\u6570\u91cf",type:cc.Label})],t.prototype,"trophyCount",void 0),i([v({displayName:"scrollView",type:cc.ScrollView})],t.prototype,"scrollView",void 0),i([v({displayName:"\u7ae0\u8282\u5217\u8868",type:[y.pzaSurvivalItem]})],t.prototype,"items",void 0),i([v({displayName:"\u6392\u884c\u699c\u6309\u94aewidget",type:cc.Widget})],t.prototype,"rankWidget",void 0),i([b],t)}(cc.Component);e.pzaSurvivalView=P,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaPowerView":"pzaPowerView","./pzaRankView":"pzaRankView","./pzaSurvivalItem":"pzaSurvivalItem"}],pzaTallBowlingNut:[function(a,t,e){"use strict";cc._RF.push(t,"1784dclvO5NaI7VOK7taKOf","pzaTallBowlingNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBowlingNut=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaBaseComponent"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaSpineController"),d=a("../Zombie/pzaZombieBody"),h=a("../pzaGameState"),m=a("./pzaAttackType"),f=a("./pzaBowlingBody"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.colliderBody=null,t.rotateNode=null,t.isBoom=!1,t.bodyBindData=!1,t.rotateSpeed=180,t.speedX=200,t.yDirection=0,t.colliderInterval=0,t.killCount=0,t.animation=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.rotateNode.angle=0,this.yDirection=0,this.bodyBindData=!1,this.colliderInterval=0,this.killCount=0;var e=10*-this.baseData.yIndex+6;this.node.zIndex=e,c.pzaSoundManager.playAudio("plantplant"),c.pzaSoundManager.playAudio("throwBowling")},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.animation.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.animation.resumeAnimation()},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.logicPos){this.colliderInterval-=a,this.baseData.logicPos.x+=this.speedX*a,this.baseData.logicPos.y+=this.speedX*a*this.yDirection;var t=h.pzaGameState.map.getMapYIndex(this.baseData.logicPos),e=h.pzaGameState.map.getMapXIndex(this.baseData.logicPos);if(this.baseData.yIndex!=t){this.baseData.yIndex=t;var o=10*-this.baseData.yIndex+5+this.yDirection;this.node.zIndex=o}this.baseData.xIndex!=e&&(this.baseData.xIndex=e),this.baseData.logicPos.x>=640&&this.close()}},t.prototype.logicLateUpdate=function(t){a.prototype.logicLateUpdate.call(this,t),this.bodyBindData||null==this.colliderBody||(this.bodyBindData=!0,this.colliderBody.bindData(this.baseData,this.onCollision.bind(this),this.onCollisionExit.bind(this))),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(this.baseData.logicPos)},t.prototype.onCollision=function(a){if(a.node.group==s.pzaGroupEnum.ZOMBIE){if(this.colliderInterval>0)return;var t=a.node.getComponent(d.pzaZombieBody);if(null==t||null==t.baseData)return;if(this.baseData.yIndex!=t.baseData.yIndex)return;var e=window.pzazombieManager.getZombie(t.baseData);e&&e.hurt(1e4,null,m.pzaAttackType.TALL_BOWLING),t.baseData.isDead&&(this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_6,this.killCount)),this.colliderInterval=0;var o=10*-(this.baseData.yIndex+this.yDirection)+5+this.yDirection;this.node.zIndex=o}},t.prototype.onCollisionExit=function(){},i([g({displayName:"\u78b0\u649e\u8eab\u4f53",type:f.pzaBowlingBody})],t.prototype,"colliderBody",void 0),i([g({displayName:"\u65cb\u8f6c\u8282\u70b9",type:cc.Node})],t.prototype,"rotateNode",void 0),i([g({displayName:"\u7206\u70b8\u575a\u679c"})],t.prototype,"isBoom",void 0),i([g({type:u.pzaSpineController})],t.prototype,"animation",void 0),i([y],t)}(l.pzaBaseComponent);e.pzaBowlingNut=b,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBowlingBody":"pzaBowlingBody"}],pzaTallNutLeaf:[function(a,t,e){"use strict";cc._RF.push(t,"5fa4eW+C7tGap6eSDi/n8GN","pzaTallNutLeaf");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTallNutLeaf=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("./pzaTallNut"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.attacking=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.RICOCHET_BULLET,this.ricochetBullet,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.RICOCHET_ZOMBIE,this.ricochetZombie,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.RICOCHET_BULLET,this.ricochetBullet,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.RICOCHET_ZOMBIE,this.ricochetZombie,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&!this.attacking){var o=!1;window.pzazombieManager.zombieMap.forEach(function(a,t){null==t||t.isDead||null==t.zombieData||t.zombieData.zombieType!=s.pzaZombieEnum.BUNGEE_ZOMBIE||t.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||t.xIndex>e.baseData.xIndex+1||t.xIndex<e.baseData.xIndex-1||t.yIndex>e.baseData.yIndex+1||t.yIndex<e.baseData.yIndex-1||(t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.RICOCHET,-1)),o=!0)}),o&&(this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),this.animation.playAnimation("attack",!1,function(){e.attacking=!1,e.playNormalAni()}))}},t.prototype.ricochetBullet=function(a,t){var e=this;if(a==this.baseData){this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),this.animation.playAnimation("attack",!1,function(){e.attacking=!1,e.playNormalAni()});var o=cc.v2(this.baseData.logicPos.x-80,this.baseData.logicPos.y+70);c.pzaEffectManager.createRicochetBulletEffect(o,t)}},t.prototype.ricochetZombie=function(a){var t=this;a==this.baseData&&(this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),this.animation.playAnimation("attack",!1,function(){t.attacking=!1,t.playNormalAni()}))},t.prototype.ricocheLadder=function(){var a=this;this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),this.animation.playAnimation("attack",!1,function(){a.attacking=!1,a.playNormalAni()});var t=""+this.baseData.xIndex+this.baseData.yIndex,e=window.pzaMapManager.LadderMap.get(t);e&&(e.node.runAction(cc.sequence(cc.rotateTo(.15,90),cc.scaleTo(.15,.5,1),cc.delayTime(.1),cc.callFunc(function(){e.node.rotation=0,e.close()}))),window.pzaMapManager.LadderMap.delete(t))},i([h],t)}(u.pzaTallNut));e.pzaTallNutLeaf=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaTallNut":"pzaTallNut"}],pzaTallNutZombie:[function(a,t,e){"use strict";cc._RF.push(t,"834c03JQvhNZplAW+cYxdFU","pzaTallNutZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTallNutZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaZombieEnum"),l=a("./pzaConeHeadZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=s.pzaZombieSlotType.head_tallnut,t.hatType=s.pzaZombieSlotType.head_tallnut,t.isNut=!0,t.garlicSkinName="",t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):(this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,67.87,-1.82,-90.94))]]),this.isNut?this.slotMap.set(s.pzaZombieSlotType.head_tallnut,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.head_tallnut).addState(new s.pzaZombieSlotAtt(1,"Dbody1",262.41,-1.5,-90.45)).addState(new s.pzaZombieSlotAtt(2,"Dbody2",258.29,-1.21,-90.45)).addState(new s.pzaZombieSlotAtt(3,"Dbody3",244.29,-2.07,-90.45))):this.slotMap.set(s.pzaZombieSlotType.hat,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.hat).addState(new s.pzaZombieSlotAtt(1,this.hatType+"1",-11.09,33.86,-90.94)).addState(new s.pzaZombieSlotAtt(2,this.hatType+"2",-11.09,33.86,-90.94)).addState(new s.pzaZombieSlotAtt(3,this.hatType+"3",-22.53,37.55,-90.94))))},t.prototype.bindData=function(t,e){a.prototype.bindData.call(this,t,e),this.hasUseSrAni=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);var o=this.animation.findBone("aduck");this.hasUseSrAni?o&&(o.scaleX=.158,o.scaleY=.158):o&&(o.scaleX=0,o.scaleY=0)},t.prototype.zombieHurt=function(){this.zombieHurtState=p.pzaHurtStateEnum.HURT,this.curSkinName="5plant/5zombie_plant_1_2",this.changeSkin(this.curSkinName)},t.prototype.equipDeath=function(){this.equipHurtState=p.pzaHurtStateEnum.DEAD,this.hasEquip=!1},t.prototype.updateMove=function(t){var e=this.baseData.xIndex;a.prototype.updateMove.call(this,t);var o=this.baseData.xIndex;e<0&&o>=0&&this.hasUseSrAni?(this.hasInWater=!0,this.playMoveAnimation(),this.curShadow&&this.curShadow.hideShadow()):o<0&&e>=0&&this.hasUseSrAni&&(null!=this.mask&&(this.mask.enabled=!0),r.pzaSoundManager.playAudio("zombie_leave_water"),this.hasInWater=!1,this.playMoveAnimation())},t.prototype.ashesDeath=function(t,e){a.prototype.ashesDeath.call(this,t,e,this.hasInWater?"blow_5pant_duck":"blow_5pant")},i([u],t)}(l.pzaConeHeadZombie));e.pzaTallNutZombie=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaConeHeadZombie":"pzaConeHeadZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaTallNut:[function(a,t,e){"use strict";cc._RF.push(t,"bf049L/anZKXoHAQ0j0pCKJ","pzaTallNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTallNut=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaPlantEnum"),l=a("../pzaEffectManager"),s=a("../pzaGameState"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=8,t}return n(t,a),t.prototype.playNormalAni=function(){var a=this,t=function(){a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=r.pzaUtil.getRandomFloatNum(8,10),a.animation.playAnimation(Math.random()>.5?"idle_eye1":"idle_eye2",!1,t))};this.animation.playAnimation("idle",!1,t)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,s.pzaGameState.isZombieMode()?this.animation.playAnimation("T_idle",!0):(this.blinkTime=r.pzaUtil.getRandomFloatNum(8,10),this.playNormalAni(),s.pzaGameState.onlyShroomCofee=!1,this.animation.setAnimationSkin("skin_1"))},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+130),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow2",e)},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+130),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow1",e)},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([d],t)}(c.pzaBasePlant));e.pzaTallNut=h,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaTangleKelpDoom:[function(a,t,e){"use strict";cc._RF.push(t,"6f029SFByJI46hrzgIViYAp","pzaTangleKelpDoom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTangleKelpDoom=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaTangleKelp"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),c.pzaGameState.usePondPlant=!0,this.baseData.plantData.canBeShoot=!1},t.prototype.attack=function(a){var t=this;this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),r.pzaSoundManager.playAudio("floop"),r.pzaSoundManager.playAudio("TangleKelp"),s.pzaEffectManager.createWaterFlowerEffect(a.yIndex,cc.v2(a.logicPos.x+7,a.logicPos.y+3),null,.5),s.pzaEffectManager.createTangleKelpEffect(a.logicPos,function(){s.pzaEffectManager.createWaterFlowerEffect(t.baseData.yIndex,cc.v2(t.baseData.logicPos.x,t.baseData.logicPos.y-25),null);var e=window.pzazombieManager.getZombie(a);e&&t.baseData&&e.hurt(t.baseData.atk,t.baseData,u.pzaAttackType.TWINE)},function(){s.pzaEffectManager.createWaterFlowerEffect(a.yIndex,a.logicPos,null,.5),t.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){t.boom(),t.death(null)})))})},t.prototype.boom=function(){var a=this;this.close(),r.pzaSoundManager.playAudio("doomshroom"),window.pzaMapManager.blink(2);var t=c.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.baseData.yIndex,c.pzaGameState.map.getXInterval(this.baseData.xIndex)/2,50);s.pzaEffectManager.createDoomBoomEffect(t),window.pzaplantManager.holeMap.has(""+this.baseData.xIndex+this.baseData.yIndex)||s.pzaEffectManager.createDoomHoleEffect(t,this.baseData.xIndex,this.baseData.yIndex);var e=3.5*c.pzaGameState.map.getBlockWidth(),o=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,e);null==o&&(o=[]),this.baseData.xIndex>=7&&null!=window.pzazombieManager.drZomBoss&&o.push(window.pzazombieManager.drZomBoss),o.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||t&&t.hurt(a.baseData.plantData.atk2Arr[0],null,u.pzaAttackType.BOOM)}),window.pzaMapManager.LadderMap.forEach(function(t,o){p.pzaUtil.getDistance(a.baseData.logicPos,t.logicPos)>e||(t.close(),window.pzaMapManager.LadderMap.delete(o))})},i([m],t)}(d.pzaTangleKelp));e.pzaTangleKelpDoom=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaTangleKelp":"pzaTangleKelp"}],pzaTangleKelpEffect:[function(a,t,e){"use strict";cc._RF.push(t,"53e72GuT55P6JIIbXGWKW40","pzaTangleKelpEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTangleKelpEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine1=null,t.spine2=null,t.pullStartCall=null,t.pullEndCall=null,t}return n(t,a),t.prototype.showEffect=function(a,t){var e=this;this.pullStartCall=a,this.pullEndCall=t,this.spine1.node.stopAllActions(),this.spine1.node.y=30,this.spine1.playAnimation("attack1_1",!1,function(){e.pullDown(),e.pullStartCall&&e.pullStartCall()}),this.spine2.playAnimation("attack1_2",!1,null)},t.prototype.pullDown=function(){var a=this;this.spine1.node.runAction(cc.sequence(cc.moveTo(.4,cc.v2(-30,-70)),cc.callFunc(function(){a.close(),a.pullEndCall&&a.pullEndCall()})))},t.prototype.pauseSelf=function(){this.spine1.pauseAnimation(),this.spine2.pauseAnimation(),this.spine1.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.spine1.resumeAnimation(),this.spine2.resumeAnimation(),this.spine1.node.resumeAllActions()},i([c({displayName:"\u6c34\u83491",type:p.pzaSpineController})],t.prototype,"spine1",void 0),i([c({displayName:"\u6c34\u83492",type:p.pzaSpineController})],t.prototype,"spine2",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaTangleKelpEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController"}],pzaTangleKelp:[function(a,t,e){"use strict";cc._RF.push(t,"ce5f4Bw6xJFdLASTNSw7c7E","pzaTangleKelp");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTangleKelp=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../pzaEffectManager"),l=a("../pzaGameState"),s=a("./pzaAttackType"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.playBlinkAni=function(){var a=this,t=function(){a.animation.playAnimation("idle",!1,t)};this.animation.playAnimation("idle",!1,t)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.stopAllActions(),this.node.opacity=255,this.playBlinkAni(),l.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead){var e=this.findAttackTarget();null!=e&&this.attack(e)}},t.prototype.findAttackTarget=function(){return this.body.curTarget},t.prototype.attack=function(a){var t=this;this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),r.pzaSoundManager.playAudio("floop"),r.pzaSoundManager.playAudio("TangleKelp"),p.pzaEffectManager.createWaterFlowerEffect(a.yIndex,cc.v2(a.logicPos.x+7,a.logicPos.y+3),null,.5),p.pzaEffectManager.createTangleKelpEffect(a.logicPos,function(){p.pzaEffectManager.createWaterFlowerEffect(t.baseData.yIndex,cc.v2(t.baseData.logicPos.x,t.baseData.logicPos.y-25),null);var e=window.pzazombieManager.getZombie(a);e&&t.baseData&&e.hurt(t.baseData.atk,t.baseData,s.pzaAttackType.TWINE)},function(){p.pzaEffectManager.createWaterFlowerEffect(a.yIndex,a.logicPos,null,.5),t.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){t.death(null)})))})},i([d],t)}(c.pzaBasePlant));e.pzaTangleKelp=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaTaskMgr:[function(a,t,e){"use strict";cc._RF.push(t,"78294NVJKZNLKTaS0KOgc5f","pzaTaskMgr"),Object.defineProperty(e,"__esModule",{value:!0});var o=a("../Achieve/pzaAchieveMgr"),n=a("../Common/pzaGameManager"),i=a("../Common/pzaGamePropConfig"),r=a("../Common/pzaLocalData"),p=a("../Common/pzaRewardManager"),l=a("../Common/pzaTipManager"),s=a("../utils/pzaResMgr"),c=a("../utils/pzakc"),u=a("./pzaTask"),d=function(){function a(){this.taskMap=null,this.list=null,this.tmpConf=null}return a.instance=function(){return a._me||(a._me=new a),a._me},a.prototype.init=function(){if(this.tmpConf||(this.tmpConf=s.pzaResMgr.instance().getConf("a21")),!this.tmpConf)return null;this.taskMap=new Map,this.list=[];for(var a=r.pzaLocalData.data.tasks||{},t=0;t<this.tmpConf.length;t++){var e=new u.pzaTask(this.tmpConf[t]),o=a[""+e.id];e.state=o||0,this.taskMap.set(e.id,e),this.list.push(e)}return this.list.sort(function(a,t){var e={2:0,0:1,1:2};return e[a.state]-e[t.state]}),this.list},a.prototype.getTask=function(a){return this.taskMap.get(a)},a.prototype.canGetTask=function(a,t){var e=this.taskMap.get(a);return!(!e||e.state)&&(t>=e.condNum?(this.addTask(e),!0):void 0)},a.prototype.hasTask=function(a){return this.taskMap.has(a)},a.prototype.addTask=function(a,t,e){void 0===t&&(t=2),void 0===e&&(e=!1),a&&1!==a.state&&(a.state=t,r.pzaLocalData.data.tasks[""+a.id]=t,e||(r.pzaLocalData.addDirty("tasks"),c.default.sendMsg("taskUpdate")))},a.prototype.obtainReward=function(a){var t=this.taskMap.get(a);if(t){t.state=2,r.pzaLocalData.data.tasks[""+a]=1,r.pzaLocalData.addDirty("tasks"),c.default.sendMsg("taskUpdate");var e=[];null!=t.reward&&t.reward.forEach(function(a){if(null!=a){var t=a.split("_"),o=new i.pzaRewardPropData(parseInt(t[0]),parseInt(t[1]));e.push(o)}}),p.pzaRewardManager.recieveRewards(e),t.condRank<0&&o.default.instance().addAchieve(40)}else console.error("\u65e0\u6b64\u4efb\u52a1id",a)},a.prototype.getTaskList=function(){return this.init()},a.prototype.checkWhenPassRank=function(a,t,e){if(void 0===e&&(e=!0),n.pzaGameManager.getCurrentGame().isMainMode()&&!(a<6||t<10)){t>=10&&a++;var o=a-5-1,i=this.taskMap.get(o);1!=r.pzaLocalData.data.tasks[""+o]&&a>=i.condRank&&this.addTask(i),r.pzaLocalData.addDirty("tasks")}},a.prototype.checkStar=function(a){if(n.pzaGameManager.getCurrentGame().isMainMode()){for(var t=0;t<this.list.length;t++){var e=this.list[t];e.condRank>0||e.condNum<=a&&this.addTask(e,2,!0)}r.pzaLocalData.addDirty("tasks"),c.default.sendMsg("taskUpdate")}},a.prototype.checkAddTask=function(a,t,e){if(void 0===t&&(t=1),void 0===e&&(e=!0),a&&n.pzaGameManager.getCurrentGame().isMainMode()&&!r.pzaLocalData.data.tasks[""+a]){var o=this.getTask(a);if(null!=o&&0==o.state&&!(o.condNum>t)&&(this.addTask(o),e)){var i=o.name+" \u4efb\u52a1\u8fbe\u6210";l.pzaTipManager.showGameTip(i)}}},a._me=null,a}();e.default=d,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaTipManager":"pzaTipManager","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaTask":"pzaTask"}],pzaTasksIcon:[function(a,t,e){"use strict";cc._RF.push(t,"43ed1OSNRlOhKabNFu9qsgm","pzaTasksIcon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGamePropConfig"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSpineController"),s=a("../Common/pzaSpriteFrameManager"),c=a("../Common/pzaUIManager"),u=a("../Load/pzaPreLoadManager"),d=a("./pzaBuyConfirmView"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.t_num=null,t.pic=null,t.icon=null,t.select1=null,t.select2=null,t.propAni=null,t.iconFrameArr=[],t.limitImg=null,t.goodsType=null,t}return n(t,a),t.prototype.init=function(a,t){var e=a.split("_");switch(2===e.length?this.t_num.string="X"+e[1]:this.t_num.node.active=!1,this.icon.node.active=!0,this.propAni.node.active=!1,this.limitImg.active=!1,this.goodsType=parseInt(e[0]),parseInt(e[0])){case r.pzaGamePropEnum.PROP_SECRET_FLOWER:s.pzaSpriteFrameManager.loadGoldPlant(30,this.icon);break;case r.pzaGamePropEnum.PROP_BRONZE_FLOWE:s.pzaSpriteFrameManager.loadGoldPlant(31,this.icon);break;case r.pzaGamePropEnum.PROP_SILVER_FLOWE:s.pzaSpriteFrameManager.loadGoldPlant(32,this.icon);break;case r.pzaGamePropEnum.PROP_GOLD_FLOWER:s.pzaSpriteFrameManager.loadGoldPlant(33,this.icon);break;case r.pzaGamePropEnum.PROP_CHOCOLATES:this.icon.spriteFrame=this.iconFrameArr[0];break;case r.pzaGamePropEnum.PROP_COIN:this.icon.spriteFrame=this.iconFrameArr[1];break;case r.pzaGamePropEnum.PROP_CHERRY_BOMB:case r.pzaGamePropEnum.PROP_AUTO_PICK:case r.pzaGamePropEnum.PROP_FREE_SUN:this.icon.node.active=!1,this.propAni.node.active=!0,parseInt(e[0])==r.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAni.playAnimation("3ui_1",!0):parseInt(e[0])==r.pzaGamePropEnum.PROP_AUTO_PICK?this.propAni.playAnimation("2ui_1",!0):parseInt(e[0])==r.pzaGamePropEnum.PROP_FREE_SUN&&this.propAni.playAnimation("1ui_1",!0)}this.node.parent=t},t.prototype.weekTwohasGet=function(a){1===p.pzaLocalData.data.tasks[""+a]&&(this.select1.active=!0,this.select2.active=!0)},t.prototype.clickFlowerIcon=function(){var a=this;switch(this.goodsType){case r.pzaGamePropEnum.PROP_SECRET_FLOWER:case r.pzaGamePropEnum.PROP_BRONZE_FLOWE:case r.pzaGamePropEnum.PROP_SILVER_FLOWE:case r.pzaGamePropEnum.PROP_GOLD_FLOWER:c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.BUY_CONFIRM_VIEW,function(t){var e=t&&t.getComponent(d.pzaBuyConfirmView);e&&e.tasksBindData(a.goodsType)})}},t.prototype.hasGet=function(){this.select1.active=!0,this.select2.active=!0},i([f(cc.Label)],t.prototype,"t_num",void 0),i([f(cc.Sprite)],t.prototype,"pic",void 0),i([f(cc.Sprite)],t.prototype,"icon",void 0),i([f(cc.Node)],t.prototype,"select1",void 0),i([f(cc.Node)],t.prototype,"select2",void 0),i([f(l.pzaSpineController)],t.prototype,"propAni",void 0),i([f([cc.SpriteFrame])],t.prototype,"iconFrameArr",void 0),i([f(cc.Node)],t.prototype,"limitImg",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaBuyConfirmView":"pzaBuyConfirmView"}],pzaTasksItem:[function(a,t,e){"use strict";cc._RF.push(t,"356616dRkFGepXVwmW62Cfq","pzaTasksItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaLocalData"),p=a("./pzaTasksIcon"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.t_name1=null,t.t_name2=null,t.t_name3=null,t.bt_pick=null,t.container_reward=null,t.prefab_reward=null,t.btn_lab=null,t.btnSpriFArr=[],t.view=null,t.task=null,t.call=null,t.spiderTask=null,t.showToWeekBtn=!1,t.nowTask=0,t}return n(t,a),t.prototype.init=function(a,t,e){this.nowTask=1,this.t_name2.node.color=cc.Color.fromHEX(cc.color(),"#E6300D"),this.call=e,this.t_name2.string="",this.t_name3.string="",this.t_name1.string=a.name,a.condNum&&(this.t_name1.string=a.name+"(",this.t_name2.string=r.pzaLocalData.getAllStar(!0)+"",this.t_name3.string="/"+a.condNum+")"),this.view=t,this.task=a,this.node.parent=this.view.container;for(var o=0;o<a.reward.length;o++){var n=a.reward[o],i=cc.instantiate(this.prefab_reward);i.getComponent(p.default).init(n,this.container_reward),i.getComponent(p.default).weekTwohasGet(a.id)}1===r.pzaLocalData.data.tasks[""+this.task.id]&&(this.bt_pick.active=!1),this.showToWeekBtn=!r.pzaLocalData.data.tasks[""+this.task.id],this.showToWeekBtn?(this.btn_lab.string="\u524d\u5f80",this.bt_pick.getComponent(cc.Sprite).spriteFrame=this.btnSpriFArr[1]):(this.btn_lab.string="\u9886\u53d6",this.bt_pick.getComponent(cc.Sprite).spriteFrame=this.btnSpriFArr[0],this.t_name2.node.color=cc.Color.fromHEX(cc.color(),"#0E9000"))},t.prototype.onClickPick=function(){if(this.showToWeekBtn)this.call();else{1==this.nowTask&&this.view.pickReward(this.task.id),this.bt_pick.active=!1;for(var a=0;a<this.container_reward.childrenCount;a++)this.container_reward.children[a].getComponent(p.default).hasGet()}},i([c(cc.Label)],t.prototype,"t_name1",void 0),i([c(cc.Label)],t.prototype,"t_name2",void 0),i([c(cc.Label)],t.prototype,"t_name3",void 0),i([c(cc.Node)],t.prototype,"bt_pick",void 0),i([c(cc.Node)],t.prototype,"container_reward",void 0),i([c(cc.Prefab)],t.prototype,"prefab_reward",void 0),i([c(cc.Label)],t.prototype,"btn_lab",void 0),i([c([cc.SpriteFrame])],t.prototype,"btnSpriFArr",void 0),i([s],t)}(cc.Component);e.default=u,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","./pzaTasksIcon":"pzaTasksIcon"}],pzaTasksView:[function(a,t,e){"use strict";cc._RF.push(t,"18792uaQChA84v8ThmwFEKO","pzaTasksView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaLocalData"),p=a("../Common/pzaUIManager"),l=a("../Load/pzaPreLoadManager"),s=a("../Task/pzaTaskMgr"),c=a("../utils/pzakc"),u=a("./pzaTasksItem"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.t_left_time=null,t.container=null,t.prefab_item=null,t.isInHomeView=!1,t.endTime=new Date("2024-08-25 00:00:00").getTime(),t}var e;return n(t,a),e=t,t.prototype.showLeftTime=function(){this.t_left_time.string=c.default.showPassTime(this.endTime-Date.now())},t.prototype.init=function(a){var t=this;this.isInHomeView=a,this.unschedule(this.showLeftTime),this.showLeftTime(),this.schedule(this.showLeftTime.bind(this),1);for(var e=s.default.instance().getTaskList(),o=0;o<e.length;o++){var n=e[o];cc.instantiate(this.prefab_item).getComponent(u.default).init(n,this,function(){t.clickClose(),t.isInHomeView&&p.pzaUIManager.aniShowPopUI(l.pzaResourceUrl.PART_SELECT_VIEW,null)})}},t.prototype.pickReward=function(a){s.default.instance().obtainReward(a)},t.prototype.clickClose=function(){this.unscheduleAllCallbacks(),this.node.destroy()},t.show=function(a){void 0===a&&(a=!0),r.pzaLocalData.data.weekTwoStartTip&&(r.pzaLocalData.data.weekTwoStartTip=!1,r.pzaLocalData.addDirty("weekTwoStartTip")),p.pzaUIManager.baseShowPopUI("resources/Prefab/View/tasksView",function(t){t.getComponent(e).init(a)})},i([m(cc.Label)],t.prototype,"t_left_time",void 0),i([m(cc.Node)],t.prototype,"container",void 0),i([m(cc.Prefab)],t.prototype,"prefab_item",void 0),e=i([h],t)}(cc.Component);e.default=f,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Task/pzaTaskMgr":"pzaTaskMgr","../utils/pzakc":"pzakc","./pzaTasksItem":"pzaTasksItem"}],pzaTask:[function(a,t,e){"use strict";cc._RF.push(t,"43f05V/ouRMjbIlNw8kt2YK","pzaTask"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTask=void 0;var o=a("../utils/pzakc");e.pzaTask=function(a){this.id=0,this.name="",this.reward=[],this.condNum=0,this.condRank=0,this.state=0,this.id=a.id,this.name=a.name||"",this.reward=o.default.strArr(a.reward),this.condNum=a.condNum||0,this.condRank=a.condRank||0},cc._RF.pop()},{"../utils/pzakc":"pzakc"}],pzaThreeKernelPult:[function(a,t,e){"use strict";cc._RF.push(t,"caa80ggAZFIjoqVT01mrIpE","pzaThreeKernelPult");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaThreeKernelPult=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaThrowBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaKernelPult"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode2=null,t.shootNode3=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.kernelPultInit=function(){this.node.zIndex=10*-this.baseData.yIndex-1,this.butterBullet=!1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atk1AniTime=this.animation.getAnimationDuration("attack1"),d.pzaGameState.useThrowPlant=!0,d.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findTargetByY(a.baseData.yIndex),o=a.findTargetByY(a.baseData.yIndex+1),n=a.findTargetByY(a.baseData.yIndex-1);if(null!=e||null!=o||null!=n)return a.butterBullet,l.pzaSoundManager.playAudio("kernelpult"),void a.animation.playAnimation("attack1",!1,t,function(){a.attackZombie(e,o,n)});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};t()},t.prototype.findTargetByY=function(a){var t=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var e=null,o=-1,n=window.pzazombieManager.zombieDatas[a];return n?(n.forEach(function(a){if(a&&a.logicPos&&!(a.logicPos.x<t.baseData.logicPos.x)&&!a.buffData.hasBuff(u.pzaBuffType.FLY)&&!a.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var n=a.logicPos.x-t.baseData.logicPos.x;(-1==o||n<o)&&(e=a,o=n)}}),null==e?this.findDrZomBoss():e):null},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attackZombie=function(a,t,e){if(!(null==a&&null==t&&null==e||null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)){var o=p.pzaNodeManager.getBulletNode();if(null!=o){var n=window.pzazombieManager.getZombie(a),i=window.pzazombieManager.getZombie(t),l=window.pzazombieManager.getZombie(e);if(null!=n||null!=i||null!=l){var u=null,h=null,m=null;if(n)u=n.getZombieHeadWps(this.baseData.yIndex);else{var f=this.baseData.yIndex,z=d.pzaGameState.map.getBlockWidth()*f+46;u=cc.v2(s.pzaUtil.getRandomFloatNum(1300,1400),z)}if(i?h=i.getZombieHeadWps(this.baseData.yIndex+1):(f=this.baseData.yIndex+1,z=d.pzaGameState.map.getBlockWidth()*f+46,h=cc.v2(s.pzaUtil.getRandomFloatNum(1300,1400),z)),l?m=l.getZombieHeadWps(this.baseData.yIndex-1):(f=this.baseData.yIndex-1,z=d.pzaGameState.map.getBlockWidth()*f+46,m=cc.v2(s.pzaUtil.getRandomFloatNum(1300,1400),z)),null!=u||null!=h||null!=m){u.x-=15,h.x-=15,m.x-=15;var y=o.convertToNodeSpaceAR(u),g=o.convertToNodeSpaceAR(h),b=o.convertToNodeSpaceAR(m),v=r.pzaGameCommonPool.requestInstant2(this.butterBullet?this.butterBulletPrefab:this.cornBulletPrefab),P=r.pzaGameCommonPool.requestInstant2(this.butterBullet?this.butterBulletPrefab:this.cornBulletPrefab),D=r.pzaGameCommonPool.requestInstant2(this.butterBullet?this.butterBulletPrefab:this.cornBulletPrefab);if(null!=v||null!=P||null!=D){var S=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2())),C=this.node.convertToNodeSpaceAR(this.shootNode2.convertToWorldSpaceAR(cc.v2())),_=this.node.convertToNodeSpaceAR(this.shootNode3.convertToWorldSpaceAR(cc.v2()));v.setParent(o);var E=this.butterBullet?cc.v2(S.x+this.baseData.logicPos.x+15,S.y+this.baseData.logicPos.y+57):cc.v2(S.x+this.baseData.logicPos.x+8,S.y+this.baseData.logicPos.y+48);v.setPosition(E),P.setParent(o);var M=this.butterBullet?cc.v2(C.x+this.baseData.logicPos.x+15,C.y+this.baseData.logicPos.y+57):cc.v2(C.x+this.baseData.logicPos.x+8,C.y+this.baseData.logicPos.y+48);P.setPosition(M),D.setParent(o);var w=this.butterBullet?cc.v2(_.x+this.baseData.logicPos.x+15,_.y+this.baseData.logicPos.y+57):cc.v2(_.x+this.baseData.logicPos.x+8,_.y+this.baseData.logicPos.y+48);D.setPosition(w);var T=v.getComponent(c.pzaThrowBullet),B=P.getComponent(c.pzaThrowBullet),A=D.getComponent(c.pzaThrowBullet);null==T&&null==B&&null==A||(null==a&&(t&&(a=t),e&&(a=e)),T.init(!1,this.baseData.yIndex,this.butterBullet?40:this.baseData.atk,a,y),T.updateBulletAngel(this.butterBullet?90:50),null==t&&(a&&(t=a),e&&(t=e)),B.init(!1,this.baseData.yIndex+1,this.butterBullet?40:this.baseData.atk,t,g),B.updateBulletAngel(this.butterBullet?90:50),null==e&&(a&&(e=a),t&&(e=t)),A.init(!1,this.baseData.yIndex-1,this.butterBullet?40:this.baseData.atk,e,b),A.updateBulletAngel(this.butterBullet?90:50),this.butterBullet&&(T.hasImmobilize=!0),this.butterBullet=Math.random()<=.25)}}}}}},i([z({displayName:"\u53d1\u5c04\u70b92",type:cc.Node})],t.prototype,"shootNode2",void 0),i([z({displayName:"\u53d1\u5c04\u70b93",type:cc.Node})],t.prototype,"shootNode3",void 0),i([f],t)}(h.pzaKernelPult);e.pzaThreeKernelPult=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaKernelPult":"pzaKernelPult"}],pzaThreePeater:[function(a,t,e){"use strict";cc._RF.push(t,"9c84c/GRQpOC6M8xFkB02aA","pzaThreePeater");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaThreePeater=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),d.pzaGameState.isZombieMode())return this.attacking=!1,this.atkAniTime=this.animation.getAnimationDuration("T_attack"),void this.animation.playAnimation("T_idle",!0);this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(e.canAttack()){var a=s.pzaUtil.getRandomNum(1,2),t=0;return l.pzaSoundManager.playAudio("PeashooterAtk"),void e.animation.playAnimation("attack",!1,o,function(){a==++t&&e.shoot()})}e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};o(),d.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()&&this.canAttack())return l.pzaSoundManager.playAudio("PeashooterAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot()},this.atkAniTime/1.4)},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a)for(var t=2;t>=0;t--){var e=null,o=this.baseData.yIndex+t-1;if(!(o<0||o>=d.pzaGameState.map.getMapRow())){var n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=n){n.setParent(a);var i=this.shootNode.convertToWorldSpaceAR(cc.v2()),l=a.convertToNodeSpaceAR(i);if(n.setPosition(l),o!=this.baseData.yIndex){var s=d.pzaGameState.map.getYInterval(o)/3+this.shootNode.y;e=d.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,o,0,s).y}var u=n.getComponent(c.pzaBaseBullet);u.setPeaBallType(),u&&u.init(o,this.baseData.atk,1,e);var h=d.pzaGameState.map.getMapSkewColumn();h>0&&this.baseData.xIndex<=h-2&&(u.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},t.prototype.canAttack=function(){var a=this;if(null==this.baseData||null==this.baseData.logicPos)return!1;for(var t=function(t){var o=e.baseData.yIndex+t-1;if(o<0||o>=d.pzaGameState.map.getMapRow())return"continue";var n=!1;return window.pzazombieManager.zombieDatas[o].forEach(function(t){!t||!t.logicPos||t.logicPos.x<a.baseData.logicPos.x||t.buffData.hasBuff(u.pzaBuffType.DIVE)||t.buffData.hasBuff(u.pzaBuffType.FLY)||t.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||(n=!0)}),n||(n=e.findDrZomBoss()),n?{value:!0}:void 0},e=this,o=0;o<3;o++){var n=t(o);if("object"==typeof n)return n.value}return!1},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null!=a&&null!=a.baseData&&!a.baseData.isDead&&!a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaThreePeater=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaThrowBullet:[function(a,t,e){"use strict";cc._RF.push(t,"fee5cYvFCdESpVzGX06894o","pzaThrowBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaThrowBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaNodeManager"),u=a("../../Common/pzaWorldEventManager"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaPlantEnum"),m=a("../Data/pzaZombieEnum"),f=a("../Effect/pzaBaseEffect"),z=a("../Plant/pzaAttackType"),y=a("../Plant/pzaPlantBody"),g=a("../Zombie/pzaZombieBody"),b=a("../pzaEffectManager"),v=a("../pzaGameState"),P=cc._decorator,D=P.ccclass,S=P.property,C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.throwMaxHeight=270,t.maxLifeTime=3,t.hitPrefab=null,t.bulletNode=null,t.bullet_corn=null,t.rotateSpeed=180,t.isShooter=!1,t.poolPrefab=null,t.lifeTime=0,t.bulletYIndex=-1,t.targetXIndex=-1,t.atk=0,t.aSpeed=-1e3,t.xSpeed=450,t.ySpeed=800,t.hasImmobilize=!1,t.hasSpatter=!1,t.hasFrost=!1,t.hasColl=!1,t.floorCheckY=0,t.target=null,t.xOffset=0,t.leftThrowTime=0,t.isDownHasDmg=!1,t.collider=null,t.stopXSpeed=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.bulletNode&&(this.bulletNode.active=!0),this.bullet_corn&&(this.bullet_corn.active=!1)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.init=function(a,t,e,o,n,i,r,l,s){if(void 0===i&&(i=-1),void 0===r&&(r=!1),void 0===l&&(l=!1),void 0===s&&(s=0),this.bulletYIndex=t,this.targetXIndex=i,this.atk=e,this.lifeTime=0,this.hasImmobilize=!1,this.hasSpatter=r,this.hasFrost=r,this.hasColl=!1,this.isDownHasDmg=l,null!=n&&null!=o){this.target=o,this.xOffset=n.x-this.target.logicPos.x,this.floorCheckY=n.y-130,s>0&&(this.throwMaxHeight=s),this.ySpeed=Math.sqrt(2*this.throwMaxHeight*Math.abs(this.aSpeed));var c=Math.abs(this.ySpeed/this.aSpeed)+Math.sqrt(2*Math.abs(this.node.y+this.throwMaxHeight-n.y)/Math.abs(this.aSpeed));this.leftThrowTime=c,this.floorCheckY=n.y-130;var u=n.x-this.node.x;this.xSpeed=u/c,a?p.pzaCollisionManager.getInstance.addZombieByRow(this.bulletYIndex,this):p.pzaCollisionManager.getInstance.addBulletByRow(this.bulletYIndex,this),this.node.scale=1,this.stopXSpeed=!1}},t.prototype.updateBulletAngel=function(a){this.bulletNode.angle=a},t.prototype.logicUpdate=function(a){this.lifeTime+=a,this.leftThrowTime-=a,this.lifeTime>=this.maxLifeTime?this.close():(this.rotateSpeed||(this.rotateSpeed=180),this.bulletNode.angle-=this.rotateSpeed*a,this.updateMove(a))},t.prototype.updateMove=function(a){if(this.node.x+=this.xSpeed*a,this.node.y+=this.ySpeed*a,this.ySpeed+=this.aSpeed*a,this.ySpeed<0&&this.isDownHasDmg&&(this.isDownHasDmg=!1,this.stopXSpeed=!0),this.ySpeed<0&&this.node.y<this.floorCheckY)return this.close(),void this.playHitEffect(null);if(null!=this.target&&0==this.stopXSpeed){var t=this.target.logicPos.x+this.xOffset-this.node.x;this.xSpeed=t/this.leftThrowTime}},t.prototype.setCornBullet=function(){this.bullet_corn&&(this.bullet_corn.active=!0),this.bulletNode&&(this.bulletNode.active=!1)},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.onCollision=function(a){if(null!=a&&!this.hasColl&&!this.isDownHasDmg)if(a.node.group!=s.pzaGroupEnum.ZOMBIE){if(a.node.group==s.pzaGroupEnum.PLANT){var t=a.node.getComponent(y.pzaPlantBody);this.colliderPlant(t&&t.baseData)}}else{var e=a.node.getComponent(g.pzaZombieBody);this.colliderZombie(e&&e.baseData)}},t.prototype.colliderZombie=function(a){var t=this;if(a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==m.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&!(a.zombieData&&a.zombieData.hypnosis||a.buffData.hasBuff(d.pzaBuffType.FLY)||a.buffData.hasBuff(d.pzaBuffType.INVINCIBLE))){var e=window.pzazombieManager.getZombie(a);if(e){if(e.hurt(this.atk,null,z.pzaAttackType.THROW_ATK),this.hasImmobilize&&!a.buffData.hasBuff(d.pzaBuffType.IMM_CONTROL)&&!a.buffData.hasBuff(d.pzaBuffType.IMM_IMMOBILIZE)){var o=a.buffData.releaseBuff(d.pzaBuffType.IMMOBILIZE);null!=o?o.buffTime=5:(o=new d.pzaBuffInfo(d.pzaBuffType.IMMOBILIZE,5),a.buffData.addBuff(o),e.bePauseControl(),b.pzaEffectManager.createButterEffect(a,cc.v2(a.logicPos.x,a.logicPos.y+130),e.node.zIndex))}if(!this.hasFrost||a.buffData.hasBuff(d.pzaBuffType.IMM_ICE)||e.baseData.buffData.hasBuff(d.pzaBuffType.HARD_BODY)||e.baseData.zombieData.zombieType!=m.pzaZombieEnum.NightWear&&a.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROST,10,.5)),this.hasSpatter){for(var n=[],i=a.yIndex-1;i<=a.yIndex+1;i++)i<0||i>=v.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[i].forEach(function(t){null!=t&&t!=a&&t.xIndex==a.xIndex&&(t.buffData.hasBuff(d.pzaBuffType.FLY)||t.buffData.hasBuff(d.pzaBuffType.DIVE)||t.buffData.hasBuff(d.pzaBuffType.INVINCIBLE)||n.push(t))});n.forEach(function(a){var e=window.pzazombieManager.getZombie(a);null!=e&&(e.hurt(26),!t.hasFrost||e.baseData.buffData.hasBuff(d.pzaBuffType.IMM_ICE)||e.baseData.buffData.hasBuff(d.pzaBuffType.HARD_BODY)||e.baseData.zombieData.zombieType!=m.pzaZombieEnum.NightWear&&e.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROST,10,.5)))})}this.close(),this.isShooter&&b.pzaEffectManager.createHitShooter(a,this.node.getPosition(),this.hasImmobilize),this.playHitEffect(a)}}},t.prototype.colliderPlant=function(a){if(!(!a||a.isDead||-1!=this.bulletYIndex&&this.bulletYIndex!=a.yIndex||-1!=this.targetXIndex&&this.targetXIndex!=a.xIndex)){this.close();var t=null,e=-1,o=window.pzaplantManager.getAllPlant(h.pzaPlantEnum.UMBRELLA_LEAF),n=window.pzaplantManager.getAllPlant(h.pzaPlantEnum.COFFEE_Umbrella),i=window.pzaplantManager.getAllPlant(h.pzaPlantEnum.TALL_NUT_LEAF);if(o.concat(n).concat(i).forEach(function(o){if(null==t||0!=e)if(o.xIndex==a.xIndex&&o.yIndex==a.yIndex)t=o,e=0;else if(Math.abs(o.xIndex-a.xIndex)<=1&&Math.abs(o.yIndex-a.yIndex)<=1){var n=Math.abs(o.xIndex-a.xIndex)+Math.abs(o.yIndex-a.yIndex);(null==t||n<e)&&(t=o,e=n)}}),null==t){var r=""+a.xIndex+a.yIndex,p=window.pzaplantManager.pumpkinDataMap.get(r);if(null==p){var l=window.pzaplantManager.plantDataMap.get(r);if(null==l){var s=window.pzaplantManager.plantEnvDataMap.get(r);null==s||(c=window.pzaplantManager.getPlantByData(s))&&c.hurt(this.atk,null,z.pzaAttackType.THROW_ATK)}else(c=window.pzaplantManager.getPlantByData(l))&&c.hurt(this.atk,null,z.pzaAttackType.THROW_ATK)}else{var c;(c=window.pzaplantManager.getPlantByData(p))&&c.hurt(this.atk,null,z.pzaAttackType.THROW_ATK)}}else u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.RICOCHET_BULLET,t,this.bulletNode.getComponent(cc.Sprite).spriteFrame)}},t.prototype.playHitEffect=function(a){if(null!=this.hitPrefab){var t=10*-this.bulletYIndex+5,e=cc.v2(this.node.x,this.node.y);null!=a&&(null==a.zombieData||a.zombieData.zombieType!=m.pzaZombieEnum.DR_ZOMBOSS?(t=10*-a.yIndex+5,e=cc.v2(a.logicPos.x,a.logicPos.y+70)):t=5);var o=c.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=l.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.zIndex=t,n.setPosition(e);var i=n.getComponent(f.pzaBaseEffect);i&&i.showEffect(null,null)}}},t.prototype.close=function(){p.pzaCollisionManager.getInstance.delBulletByRow(this.bulletYIndex,this),this.hasColl=!0,this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([S({displayName:"\u6295\u5c04\u6700\u5927\u9ad8\u5ea6"})],t.prototype,"throwMaxHeight",void 0),i([S({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],t.prototype,"maxLifeTime",void 0),i([S({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"hitPrefab",void 0),i([S({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"bulletNode",void 0),i([S({displayName:"\u6843\u5b50\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"bullet_corn",void 0),i([S({displayName:"\u65cb\u8f6c\u901f\u5ea6"})],t.prototype,"rotateSpeed",void 0),i([S({displayName:"\u662f\u5426\u4f5c\u4e3a\u53d1\u5c04\u5668"})],t.prototype,"isShooter",void 0),i([S(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([D],t)}(r.pzaBaseComponent);e.pzaThrowBullet=C,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../Plant/pzaAttackType":"pzaAttackType","../Plant/pzaPlantBody":"pzaPlantBody","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaTipManager:[function(a,t,e){"use strict";cc._RF.push(t,"39a22IkorxKOZqNP3AroKAb","pzaTipManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTipManager=void 0;var r=a("../Battle/Data/pzaPlantEnum"),p=a("../Battle/pzaGameState"),l=a("./pzaGameCommonPool"),s=a("./pzaGuideTip"),c=a("./pzaHomeTip"),u=a("./pzaMapManager"),d=a("./pzaPreviewTip"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.guideTipNode=null,t.homeTipNode=null,t.previewTipPrefab=null,t.guideTipPrefab=null,t.homeTipPrefab=null,t.curGuideTip=null,t.curHomeTip=null,t.curPreviewTip=null,t}var e;return n(t,a),e=t,t.prototype.onLoad=function(){e.instance=this},t.showHomeTip=function(a,t,o){void 0===t&&(t=null),void 0===o&&(o=0);var n=e.instance;if(null!=n&&null!=n.homeTipNode){this.hideHomeTip();var i=l.pzaGameCommonPool.requestInstant(n.homeTipPrefab);if(null!=i){t?i.setParent(t):i.setParent(n.homeTipNode);var r=i.getComponent(c.pzaHomeTip);r&&r.showTip(a,o),n.curHomeTip=r}}},t.hideHomeTip=function(){var a=e.instance;null!=a&&null!=a.curHomeTip&&(a.curHomeTip.close(),a.curHomeTip=null)},t.showPreviewTip=function(a,t,o,n){var i=e.instance;if(null!=i&&null!=i.guideTipNode){i.curPreviewTip&&i.curPreviewTip.close(),i.curPreviewTip=null;var r=l.pzaGameCommonPool.requestInstant(i.previewTipPrefab);if(null!=r){r.setParent(i.guideTipNode);var p=r.getComponent(d.pzaPreviewTip);p&&p.showTip(a,t,o,n),i.curPreviewTip=p}}},t.showGuideTip=function(a,t){void 0===t&&(t=0);var o=e.instance;if(null!=o&&null!=o.guideTipNode){this.hideGuideTip();var n=l.pzaGameCommonPool.requestInstant(o.guideTipPrefab);if(null!=n){n.setParent(o.guideTipNode);var i=n.getComponent(s.pzaGuideTip);i&&i.showGuideTip(a,t),o.curGuideTip=i}}},t.hideGuideTip=function(){var a=e.instance;null!=a&&null!=a.curGuideTip&&(a.curGuideTip.close(),a.curGuideTip=null)},t.showLossStarTip=function(a,t){var o=e.instance;if(null!=o&&null!=o.guideTipNode){this.hideGuideTip();var n=l.pzaGameCommonPool.requestInstant(o.guideTipPrefab);if(null!=n){n.setParent(o.guideTipNode);var i=n.getComponent(s.pzaGuideTip);i&&i.showStarLoseTip(a,t),o.curGuideTip=i}}},t.showGameTip=function(a,t,o){void 0===t&&(t=null),void 0===o&&(o=!1);var n=e.instance;if(null!=n&&null!=n.guideTipNode)if(a){this.hideGuideTip();var i=l.pzaGameCommonPool.requestInstant(n.guideTipPrefab);if(null!=i){i.setParent(n.guideTipNode);var r=i.getComponent(s.pzaGuideTip);r&&r.showGameTip(a,t,o),n.curGuideTip=r}}else t&&t()},t.showEnvPlantTip=function(a){p.pzaGameState.envPlantTip.has(a)||(p.pzaGameState.envPlantTip.add(a),a!=u.pzaBlockType.POND?a!=u.pzaBlockType.ROOF?a!=u.pzaBlockType.DOOM_HOLE&&a!=u.pzaBlockType.GOLD_HOLE||this.showGameTip("\u4f60\u4e0d\u80fd\u628a\u690d\u7269\u79cd\u5728\u5f39\u5751\u4e0a"):this.showGameTip("\u4f60\u53ea\u80fd\u628a\u690d\u7269\u79cd\u5728\u82b1\u76c6\u91cc"):this.showGameTip("\u8bf7\u5148\u79cd\u83b2\u53f6"))},t.showPondPlantTip=function(a,t){p.pzaGameState.pondPlantTip.has(a)||(p.pzaGameState.pondPlantTip.add(a),this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u6c34\u91cc"))},t.showSpecialPlantTip=function(a,t){p.pzaGameState.specialPlantTip.has(a)||(p.pzaGameState.specialPlantTip.add(a),a!=r.pzaPlantEnum.GRAVE_BUSTER?a!=r.pzaPlantEnum.POTATO_MINE?a!=r.pzaPlantEnum.SPIKEWEED?a!=r.pzaPlantEnum.COFFEE_BEAN?a!=r.pzaPlantEnum.GATLING_PEA?a!=r.pzaPlantEnum.TWIN_SUNFLOWER?a!=r.pzaPlantEnum.GLOOM_SHROOM?a!=r.pzaPlantEnum.CATTAIL?a!=r.pzaPlantEnum.WINTER_MELON?a!=r.pzaPlantEnum.GOLD_MAGNET?a!=r.pzaPlantEnum.SPIKEROCK?a!=r.pzaPlantEnum.COB_CANNON?a!=r.pzaPlantEnum.SUPER_CHOMPER?a!=r.pzaPlantEnum.STAR_FRUIT||this.showGameTip("\u4f60\u53ea\u80fd\u628a\u5c0f\u661f\u661f\u79cd\u5b50\u79cd\u5728\u8fd9\u91cc"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u706b\u9f99\u679c\u4e0a"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u4e00\u5bf9\u6843\u5b50\u6295\u624b"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u6309\u6307\u7248"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u78c1\u529b\u83b2\u85d5"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u897f\u74dc\u529b\u58eb"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u8377\u53f6"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u5927\u5c71\u7af9"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u80fd\u91cf\u82b1"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u591a\u53d1\u5c04\u624b"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u7761\u89c9\u4e2d\u7684\u5bf9\u8c61"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u575a\u56fa\u7684\u5730\u9762"):this.showGameTip(t+"\u4e0d\u80fd\u79cd\u5728\u8377\u53f6"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u5893\u7891\u4e0a"))},t.showGameSpecialTip=function(a,t){p.pzaGameState.gameSpecialTip.has(a)||(p.pzaGameState.gameSpecialTip.add(a),this.showGameTip(t))},t.instance=null,i([f({displayName:"\u663e\u793a\u5f15\u5bfc\u63d0\u793a\u6846\u7684\u8282\u70b9",type:cc.Node})],t.prototype,"guideTipNode",void 0),i([f({displayName:"\u663e\u793a\u5927\u5385\u63d0\u793a\u6846\u7684\u8282\u70b9",type:cc.Node})],t.prototype,"homeTipNode",void 0),i([f({displayName:"\u9884\u89c8\u63d0\u793a\u6846\u9884\u8bbe",type:cc.Prefab})],t.prototype,"previewTipPrefab",void 0),i([f({displayName:"\u5f15\u5bfc\u63d0\u793a\u6846\u9884\u8bbe",type:cc.Prefab})],t.prototype,"guideTipPrefab",void 0),i([f({displayName:"\u5927\u5385\u63d0\u793a\u6846\u9884\u8bbe",type:cc.Prefab})],t.prototype,"homeTipPrefab",void 0),e=i([m],t)}(cc.Component);e.pzaTipManager=z,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameCommonPool":"pzaGameCommonPool","./pzaGuideTip":"pzaGuideTip","./pzaHomeTip":"pzaHomeTip","./pzaMapManager":"pzaMapManager","./pzaPreviewTip":"pzaPreviewTip"}],pzaTomb:[function(a,t,e){"use strict";cc._RF.push(t,"cbb17mM/rdJO6fjRCGZFwHz","pzaTomb");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTomb=void 0;var r=a("../Common/pzaBaseComponent"),p=a("../Common/pzaUtil"),l=a("./pzaEffectManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tomb=null,t.tombFrames=[],t.taft=null,t.taftFrames=[],t.xIndex=0,t.yIndex=0,t.dirtAniEnd=!1,t.tombGrowTime=0,t.growEnd=!1,t.smallTomb=!1,t.createCall=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this)},t.prototype.init=function(a,t,e,o){var n=this;if(void 0===o&&(o=!1),this.xIndex=a,this.yIndex=t,this.createCall=e,this.dirtAniEnd=!1,this.tombGrowTime=0,this.growEnd=!1,this.smallTomb=Math.random()>.5,this.taft.spriteFrame=this.smallTomb?this.taftFrames[0]:this.taftFrames[1],this.tomb.spriteFrame=p.pzaUtil.getRandomValueFromArray(this.tombFrames),this.tomb.node.active=!1,this.taft.node.active=!1,this.node.zIndex=10*-t,window.pzaplantManager.holeMap.set(""+a+t,1),o)return this.dirtAniEnd=!0,this.growEnd=!0,this.tomb.node.active=!0,this.taft.node.active=!0,void(this.tomb.node.y=this.smallTomb?26:44);l.pzaEffectManager.createDirtEffect("idle1",t,cc.v2(this.node.x,this.node.y),function(){n.dirtAniEnd=!0})},t.prototype.update=function(a){if(!this.growEnd){if(this.tombGrowTime>0){this.tombGrowTime-=a;var t=this.smallTomb?26:44;return this.tomb.node.y=Math.min(.3,.3-this.tombGrowTime)/.3*(t+this.tomb.node.height/2)-this.tomb.node.height/2,void(this.tombGrowTime<=0&&(this.createCall&&this.createCall(),this.growEnd=!0))}this.dirtAniEnd&&(this.tomb.node.active=!0,this.taft.node.active=!0,this.tomb.node.y=-this.tomb.node.height/2,this.tombGrowTime=.3)}},t.prototype.disapper=function(){window.pzaMapManager.removeTomb(this.xIndex,this.yIndex),this.close()},t.prototype.close=function(){a.prototype.close.call(this),window.pzaplantManager.holeMap.delete(""+this.xIndex+this.yIndex)},i([u({displayName:"\u5893\u7891",type:cc.Sprite})],t.prototype,"tomb",void 0),i([u({displayName:"\u5893\u7891\u56fe",type:[cc.SpriteFrame]})],t.prototype,"tombFrames",void 0),i([u({displayName:"\u571f\u5806",type:cc.Sprite})],t.prototype,"taft",void 0),i([u({displayName:"\u571f\u5806\u56fe",type:[cc.SpriteFrame]})],t.prototype,"taftFrames",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaTomb=d,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaUtil":"pzaUtil","./pzaEffectManager":"pzaEffectManager"}],pzaTorchBowlingNut:[function(a,t,e){"use strict";cc._RF.push(t,"317f25lQ39MWp7vUvKouVTa","pzaTorchBowlingNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTorchBowlingNut=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGroupEnum"),s=a("../../Common/pzaSoundManager"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaZombieEnum"),d=a("../Zombie/pzaZombieBody"),h=a("../pzaEffectManager"),m=a("./pzaAttackType"),f=a("./pzaBowlingNut"),z=cc._decorator,y=z.ccclass,g=(z.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onCollision=function(a){if(a.node.group!=l.pzaGroupEnum.WALL){if(a.node.group==l.pzaGroupEnum.ZOMBIE){if(this.colliderInterval>0)return;var t=a.node.getComponent(d.pzaZombieBody);if(null==t||null==t.baseData)return;if(this.baseData.yIndex!=t.baseData.yIndex)return;if(t.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT))return;h.pzaEffectManager.createLongFireEffect(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),5,1,this.baseData.yIndex),0==t.baseData.yIndex?this.yDirection=1:4==t.baseData.yIndex?this.yDirection=-1:0==this.yDirection?this.yDirection=Math.random()>.5?1:-1:this.yDirection=-this.yDirection,s.pzaSoundManager.playAudio("bowlingHitNormal");var e=window.pzazombieManager.getZombie(t.baseData);t.baseData.zombieData.zombieType==u.pzaZombieEnum.SCREEN_DOOR_ZOMBIE&&this.baseData.plantData.isChangeLine?e&&e.hurt(1e4,null,m.pzaAttackType.TALL_BOWLING):e&&e.hurt(1800,null,m.pzaAttackType.BOWLING),t.baseData.isDead&&(this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_6,this.killCount)),this.colliderInterval=.5;var o=10*-(this.baseData.yIndex+this.yDirection)+5+this.yDirection;this.node.zIndex=o}}else this.yDirection=a.tag-2},t.prototype.onCollisionExit=function(){},i([y],t)}(f.pzaBowlingNut));e.pzaTorchBowlingNut=g,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","./pzaAttackType":"pzaAttackType","./pzaBowlingNut":"pzaBowlingNut"}],pzaTorchNut:[function(a,t,e){"use strict";cc._RF.push(t,"93d33OnRxFOf5VCxchjjSiG","pzaTorchNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTorchNut=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaPlantEnum"),s=a("./pzaAttackType"),c=a("./pzaBasePlant"),u=a("./pzaPlantBody"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.torchwoodBody=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=l.pzaPlantCate.Nut,this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(e.blinkTime<=0)return e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),void e.animation.playAnimation("idle2",!1,o);e.animation.playAnimation("idle1",!1,o)};this.animation.playAnimation("idle1",!1,o)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.logicLateUpdate=function(){this.bodyBindData||(this.torchwoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody)),a.prototype.logicLateUpdate.call(this)},t.prototype.hurt=function(t,e,o){a.prototype.hurt.call(this,t,e,o);var n=window.pzazombieManager.getZombie(e);n&&n.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.FLOOR_ATK)},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody)},t.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.flaserDeath.call(this)},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([m({displayName:"\u706b\u70ac\u78b0\u649e\u8eab\u4f53",type:u.pzaPlantBody})],t.prototype,"torchwoodBody",void 0),i([h],t)}(c.pzaBasePlant);e.pzaTorchNut=f,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant","./pzaPlantBody":"pzaPlantBody"}],pzaTorchwood:[function(a,t,e){"use strict";cc._RF.push(t,"ec469XJcg1Ccr6pdk9quX8Q","pzaTorchwood");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTorchwood=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaUtil"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=a("./pzaPlantBody"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.torchwoodBody=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),l.pzaGameState.isZombieMode())this.animation.playAnimation("T_idle",!0);else{this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(e.blinkTime<=0)return e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),void e.animation.playAnimation("idle_eye",!1,o);e.animation.playAnimation("idle",!1,o)};this.animation.playAnimation("idle",!1,o),l.pzaGameState.onlyShroomCofee=!1}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.logicLateUpdate=function(){this.bodyBindData||(this.torchwoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody)),a.prototype.logicLateUpdate.call(this)},t.prototype.death=function(t,e){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.flaserDeath.call(this)},i([h({displayName:"\u706b\u70ac\u78b0\u649e\u8eab\u4f53",type:c.pzaPlantBody})],t.prototype,"torchwoodBody",void 0),i([d],t)}(s.pzaBasePlant);e.pzaTorchwood=m,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant","./pzaPlantBody":"pzaPlantBody"}],pzaTrackBullet:[function(a,t,e){"use strict";cc._RF.push(t,"6b0f9fmLplNC4K6TIvIqKNh","pzaTrackBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTrackBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaNodeManager"),u=a("../../Common/pzaUtil"),d=a("../../Common/pzaWorldEventManager"),h=a("../../Load/pzaBundleObjectPool"),m=a("../../Load/pzaPreLoadManager"),f=a("../Data/pzaBuffData"),z=a("../Effect/pzaShadowEffect"),y=a("../Zombie/pzaZombieBody"),g=cc._decorator,b=g.ccclass,v=g.property,P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletNode=null,t.maxLifeTime=3,t.poolPrefab=null,t.moveSpeed=500,t.angelSpeed=250,t.moveDirection=cc.v2(1,0),t.targetData=null,t.yIndex=-1,t.logicPos=null,t.atk=0,t.hasColl=!1,t.curShadow=null,t.lifeTime=0,t.collider=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.maxLifeTime=3},t.prototype.onDisable=function(){p.pzaCollisionManager.getInstance.delBulletOther(this),a.prototype.onDisable.call(this)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.init=function(a,t,e,o){this.targetData=t,this.logicPos=e,this.atk=a,this.yIndex=o,this.hasColl=!1,this.lifeTime=0,this.moveDirection=cc.v2(1,0),this.node.setPosition(e),this.node.angle=0,this.lifeTime=0,this.createShadow(),p.pzaCollisionManager.getInstance.addBulletOther(this)},t.prototype.logicUpdate=function(a){this.lifeTime+=a,this.lifeTime>=this.maxLifeTime?this.close():(null==this.targetData||this.targetData.isDead||null==this.targetData.zombieData||this.targetData.zombieData.hypnosis||this.updateDirection(a),this.updateMove(a))},t.prototype.updateDirection=function(a){var t=window.pzazombieManager.getZombie(this.targetData);if(null!=t){var e=t.getZombieHeadWps(this.yIndex);if(null!=e){var o=this.node.parent.convertToNodeSpaceAR(e).sub(this.logicPos).normalizeSelf(),n=u.pzaUtil.getVectorsRadion(o,this.moveDirection)*(180/Math.PI);if(!(Math.abs(n)<=1)){var i=n>=0?-this.angelSpeed*a:this.angelSpeed*a,r=u.pzaUtil.rotateAngle(this.moveDirection,i);this.moveDirection=r.normalizeSelf(),this.node.angle=u.pzaUtil.getVectorsRadion(this.moveDirection,cc.v2(1,0))*(180/Math.PI)}}}},t.prototype.updateMove=function(a){this.logicPos.x+=a*this.moveSpeed*this.moveDirection.x,this.logicPos.y+=a*this.moveSpeed*this.moveDirection.y,this.node.setPosition(this.logicPos),this.shadowMove()},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.onCollision=function(a){if(null!=a&&!this.hasColl)if(a.node.group!=s.pzaGroupEnum.ZOMBIE);else{var t=a.node.getComponent(y.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderZombie=function(a){if(a&&!a.isDead)if(null!=a.zombieData){if(a.zombieData&&a.zombieData.hypnosis)this.close();else if(a.buffData.hasBuff(f.pzaBuffType.INVINCIBLE))this.close();else if(!a.buffData.hasBuff(f.pzaBuffType.DIVE)){var t=window.pzazombieManager.getZombie(a);null!=t?(t.hurt(this.atk),this.close()):this.close()}}else this.close()},t.prototype.close=function(){d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.hasColl=!0,null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},t.prototype.createShadow=function(){var a=this,t=c.pzaNodeManager.getDownEffectNode();h.pzaBundleObjectPool.requestInstantByUrl2(m.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(t);var n=o.getComponent(z.pzaShadowEffect);n&&n.init(null,cc.v2(),.35),a.curShadow=n,a.shadowMove()}else console.error(e)})},t.prototype.shadowMove=function(){if(null!=this.curShadow){var a=cc.v2(this.node.x,this.node.y-80);this.curShadow.followMove(a)}},i([v({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"bulletNode",void 0),i([v({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],t.prototype,"maxLifeTime",void 0),i([v(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([b],t)}(r.pzaBaseComponent);e.pzaTrackBullet=P,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Effect/pzaShadowEffect":"pzaShadowEffect","../Zombie/pzaZombieBody":"pzaZombieBody"}],pzaTreasureBuster:[function(a,t,e){"use strict";cc._RF.push(t,"6818bgoM6FJV4IzR/w6WscP","pzaTreasureBuster");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTreasureBuster=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../pzaEffectManager"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.swallTime=0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.swallTime=0,r.pzaSoundManager.playAudio("GraveBuster"),this.animation.playAnimation("idle1",!1,function(){r.pzaSoundManager.playAudio("gravebusterchomp"),e.animation.playAnimation("idle2",!0)}),this.atkInterval=4.5},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||(this.swallTime+=t,this.swallTime>=this.atkInterval?this.swallowEnd():this.baseData.logicPos)},t.prototype.logicLateUpdate=function(){a.prototype.logicLateUpdate.call(this)},t.prototype.swallowEnd=function(){window.pzaplantManager.removePlant(this.baseData),this.death(),p.pzaEffectManager.createImitaterEffect(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y-25)),p.pzaEffectManager.createGoldHoleEffect(this.baseData.logicPos,this.baseData.xIndex,this.baseData.yIndex)},i([c],t)}(l.pzaBasePlant));e.pzaTreasureBuster=u,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../pzaEffectManager":"pzaEffectManager","./pzaBasePlant":"pzaBasePlant"}],pzaTryPlantCard:[function(a,t,e){"use strict";cc._RF.push(t,"25e79xufflKz5dPfz55BIRZ","pzaTryPlantCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTryPlantCard=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaSpriteFrameManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.plantIcon=null,t.mask=null,t.tryCountText=null,t.curPlantType=null,t.isSelect=!1,t.noCommend=!1,t.index=null,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.clickCard,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.clickCard,this)},t.prototype.bindData=function(a,t,e,o){this.curPlantType=a,this.selectCall=t,this.isSelect=!1,this.noCommend=3!=p.pzaGameState.curChapter&&4!=p.pzaGameState.curChapter&&8!=p.pzaGameState.curChapter&&9!=p.pzaGameState.curChapter&&a==r.pzaPlantEnum.CATTAIL||(5==p.pzaGameState.curChapter||10==p.pzaGameState.curChapter)&&a==r.pzaPlantEnum.SPIKEROCK,l.pzaSpriteFrameManager.loadPlantCard(a,this.plantIcon),this.noCommend?(this.mask.active=!0,this.mask.opacity=200,this.tryCountText.node.active=!1):(this.mask.active=!1,this.tryCountText.node.active=!0),this.tryCountText.string=o.toString(),this.index=e},t.prototype.refreshView=function(a){this.tryCountText.string=a.toString()},t.prototype.clickCard=function(){this.noCommend||(this.selectCall&&this.selectCall(this.curPlantType,this.index,parseInt(this.tryCountText.string)),this.isSelect=!0,this.mask.active=!0,this.mask.opacity=177)},t.prototype.disSelect=function(){this.isSelect&&(this.isSelect=!1,this.mask.active=!1)},i([u({displayName:"\u690d\u7269\u56fe\u6807",type:cc.Sprite})],t.prototype,"plantIcon",void 0),i([u({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([u({displayName:"\u8bd5\u7528\u6b21\u6570",type:cc.Label})],t.prototype,"tryCountText",void 0),i([c],t)}(cc.Component);e.pzaTryPlantCard=d,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaTrySelectView:[function(a,t,e){"use strict";cc._RF.push(t,"027b4eBRt5OLbIEDm+3D9Qu","pzaTrySelectView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTrySelectView=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaLocalData"),u=a("../../Common/pzaStatisticsMgr"),d=a("../../Common/pzaWorldEventManager"),h=a("../../utils/pzaChannel"),m=a("./pzaTryPlantCard"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tryBtn=null,t.useBtn=null,t.tryProgress=null,t.tips=null,t.cards=[],t.videoIcon=null,t.curTryPlant=null,t.curTryPlantIndex=null,t.curPlant=null,t.selectCall=null,t}return n(t,a),t.prototype.init=function(a){this.selectCall=a,this.curPlant=null,this.tryBtn.active=!1,this.videoIcon.active=!c.pzaLocalData.data.isShowVideoIcon,this.setCurTryPlant();var t=s.pzaGameManager.getCurrentGame().getAdPlantArr();if(t)for(o=0;o<this.cards.length;o++){var e=t.shift();e?(this.cards[o].node.active=!0,this.cards[o].bindData(e,this.selectCardCall.bind(this),o,this.curTryPlant[o])):this.cards[o].node.active=!1}else for(var o=0;o<this.cards.length;o++)this.cards[o].node.active=!0,this.cards[o].bindData(r.pzaPlantEnum.GATLING_PEA+o,this.selectCardCall.bind(this),o,this.curTryPlant[o]);this.refreshView()},t.prototype.refreshView=function(){this.tips.string="\u6bcf\u89c2\u770b5\u4e2a\u5e7f\u544a\u89c6\u9891\u5373\u53ef\u89e3\u9501\u5168\u90e8\u690d\u7269",this.setCurTryPlant(),this.isEndLessMode()?this.tryProgress.string="\u5f53\u524d\u8fdb\u5ea6: "+c.pzaLocalData.data.watchADTryPlantCountEndLess.toString()+" / 5":this.tryProgress.string="\u5f53\u524d\u8fdb\u5ea6: "+c.pzaLocalData.data.watchADTryPlantCountNormal.toString()+" / 5";for(var a=0;a<this.cards.length;a++)this.cards[a].refreshView(this.curTryPlant[a]);this.useBtn.active=this.curTryPlant[this.curTryPlantIndex]>0,this.tryBtn.active=this.curTryPlant[this.curTryPlantIndex]<=0},t.prototype.isEndLessMode=function(){return p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS||p.pzaGameState.gameMode==p.pzaGameMode.SURVIVAL||p.pzaGameState.gameMode==p.pzaGameMode.ZOMBIE_ENDLESS},t.prototype.setCurTryPlant=function(){this.isEndLessMode()?this.curTryPlant=c.pzaLocalData.data.tryPlantCountArrayEndLess:this.curTryPlant=c.pzaLocalData.data.tryPlantCountArrayNormal},t.prototype.selectCardCall=function(a,t){this.curPlant=a,this.cards.forEach(function(a){a&&a.disSelect()}),p.pzaGameState.isVaseMode()?u.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"23"+a},{name:"adname",value:"\u7834\u7f50\u8005\u8bd5\u73a9\u9ad8\u7ea7\u690d\u7269"}):p.pzaGameState.isMiniMode()?u.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"25"+a},{name:"adname",value:"\u8ff7\u4f60\u6e38\u620f\u8bd5\u73a9\u9ad8\u7ea7\u690d\u7269"}):u.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"9"+a},{name:"adname",value:"\u5c40\u5185\u8bd5\u73a9\u9ad8\u7ea7\u690d\u7269"}),this.useBtn.active=this.curTryPlant[t]>0,this.tryBtn.active=this.curTryPlant[t]<=0,this.curTryPlantIndex=t},t.prototype.clickUse=function(){this.close(),this.selectCall&&this.selectCall(this.curPlant)},t.prototype.clickTry=function(){var a=this,t="9"+this.curPlant;p.pzaGameState.isVaseMode()&&(t="23"+this.curPlant),h.pzaChannel.instance().showVideo({sucCall:function(){a.isEndLessMode()?(c.pzaLocalData.data.watchADTryPlantCountEndLess++,c.pzaLocalData.data.tryPlantCountArrayEndLess[a.curTryPlantIndex]++,c.pzaLocalData.data.watchADTryPlantCountEndLess>=5&&(c.pzaLocalData.data.watchADTryPlantCountEndLess=0),a.tryProgress.string="\u5f53\u524d\u8fdb\u5ea6: "+c.pzaLocalData.data.watchADTryPlantCountEndLess.toString()+" / 5"):(c.pzaLocalData.data.watchADTryPlantCountNormal++,c.pzaLocalData.data.tryPlantCountArrayNormal[a.curTryPlantIndex]++,c.pzaLocalData.data.watchADTryPlantCountNormal>=5&&(c.pzaLocalData.data.watchADTryPlantCountNormal=0),a.tryProgress.string="\u5f53\u524d\u8fdb\u5ea6: "+c.pzaLocalData.data.watchADTryPlantCountNormal.toString()+" / 5",c.pzaLocalData.addDirty("watchADTryPlantCountNormal","tryPlantCountArrayNormal")),a.refreshView()},failCall:function(){},endCall:function(){},posName:"\u8bd5\u73a9\u9ad8\u7ea7\u690d\u7269",adsid:t})},t.prototype.clickClose=function(){this.selectCall&&this.selectCall(null),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.DISSELECT_CARD,null),p.pzaGameState.selectCard=null,this.close()},t.prototype.onEnable=function(){p.pzaGameState.curTryPlantIndex=null},t.prototype.close=function(){p.pzaGameState.gamePause=!1,d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.GAME_RESUME,null),l.pzaGameCommonPool.returnInstant(this.node),p.pzaGameState.curTryPlantIndex=this.curTryPlantIndex},i([y({displayName:"\u8bd5\u7528\u6309\u94ae",type:cc.Node})],t.prototype,"tryBtn",void 0),i([y({displayName:"\u79cd\u690d\u6309\u94ae",type:cc.Node})],t.prototype,"useBtn",void 0),i([y({displayName:"\u8bd5\u7528\u8fdb\u5ea6",type:cc.Label})],t.prototype,"tryProgress",void 0),i([y({displayName:"\u63d0\u793a\u6587\u672c",type:cc.Label})],t.prototype,"tips",void 0),i([y({displayName:"\u5361\u7247",type:[m.pzaTryPlantCard]})],t.prototype,"cards",void 0),i([y({displayName:"\u5361\u7247",type:cc.Node})],t.prototype,"videoIcon",void 0),i([z],t)}(cc.Component);e.pzaTrySelectView=g,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzaChannel":"pzaChannel","./pzaTryPlantCard":"pzaTryPlantCard"}],pzaTwinSunflower:[function(a,t,e){"use strict";cc._RF.push(t,"b1ab1UU/d5FBq7i+EZv8G8N","pzaTwinSunflower");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTwinSunflower=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=p.pzaUtil.getRandomFloatNum(3,12.5));var o=function(){if(!l.pzaGameState.gameWin&&e.baseData.plantData.atkInterval<=0){if(null==e.baseData||e.baseData.isDead)return;return e.baseData.plantData.atkInterval=p.pzaUtil.getRandomFloatNum(23.5,25),r.pzaSoundManager.playAudio("SunShroom"),void e.animation.playAnimation("Sunlight",!1,o,function(){window.pzaplantManager.plantCreateSun(e.baseData.logicPos.clone(),!0),window.pzaplantManager.plantCreateSun(e.baseData.logicPos.clone(),!0)})}e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};this.animation.playAnimation("idle",!1,o),l.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,this.baseData.plantData.atkInterval-=t)},i([u],t)}(s.pzaBasePlant));e.pzaTwinSunflower=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaUIManager:[function(a,t,e){"use strict";cc._RF.push(t,"5fc2bwtxBVEhpbi01E3sB0R","pzaUIManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaUIManager=void 0;var r=a("../Load/pzaBundleObjectPool"),p=a("../Load/pzaPreLoadManager"),l=a("../utils/pzaChannel"),s=a("../View/pzaCommonMask"),c=a("../View/pzaPowerView"),u=a("./pzaGameCommonPool"),d=a("./pzaGameManager"),h=a("./pzaLocalData"),m=a("./pzaSpineController"),f=a("./pzaWorldEventManager"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.boardNode=null,t.popNode=null,t.loadNode=null,t.loadRotateNode=null,t.loadPro=null,t.snailAni=null,t.loadActText=null,t.loadErrorView=null,t.boardUINode=null,t.popUIMap=new Map,t}var e;return n(t,a),e=t,t.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),e.instance=this,this.loadNode.active=!1},t.baseShowBoardUI=function(a,t){l.pzaChannel.instance().closeBanner();var e=this.instance;if(null!=e&&null!=a){if(null!=e.boardUINode){if(e.boardUINode.url==a)return e.boardUINode.active=!0,void(t&&t(e.boardUINode));u.pzaGameCommonPool.returnInstant(e.boardUINode),e.boardUINode=null}s.pzaCommonMask.showMask(!0);var o=function(){r.pzaBundleObjectPool.requestInstantByUrl(a,!1,function(o,n){null==o&&null!=n?(n.url=a,n.setParent(e.boardNode),s.pzaCommonMask.hideMask(),t&&t(n),e.boardUINode=n):console.error(o)})},n=p.pzaPreLoadManager.getSubResources(a);null!=n?r.pzaBundleObjectPool.preLoadSubResource(n,function(){o()}):o()}},t.baseShowPopUI=function(a,t){l.pzaChannel.instance().closeBanner();var e=this.instance;if(null!=e&&null!=a){var o=e.popUIMap.get(a);if(null!=o&&o.active)t&&t(o);else{s.pzaCommonMask.showMask(!0);var n=function(){"resources/Prefab/View/WarningView"==a?r.pzaBundleObjectPool.requestInstantByUrl2(a,function(o,n){!o&&n?(n.setParent(e.popNode),s.pzaCommonMask.hideMask(),t&&t(n),e.popUIMap.set(a,n)):console.error(o)}):r.pzaBundleObjectPool.requestInstantByUrl(a,!1,function(o,n){!o&&n?(n.setParent(e.popNode),s.pzaCommonMask.hideMask(),t&&t(n),e.popUIMap.set(a,n)):console.error(o)})},i=p.pzaPreLoadManager.getSubResources(a);null!=i?r.pzaBundleObjectPool.preLoadSubResource(i,function(){n()}):n()}}},t.removeAllPopUI=function(){var a=this.instance;null!=a&&null!=a.popNode.children&&a.popNode.children.forEach(function(a){u.pzaGameCommonPool.returnInstant(a)})},t.removeBoardUI=function(){var a=this.instance;null!=a&&null!=a.boardUINode&&(u.pzaGameCommonPool.returnInstant(a.boardUINode),a.boardUINode=null)},t.showLoading=function(){var a=this.instance;null!=a&&(a.loadNode.active=!0,a.loadPro.string="0%",a.snailAni.playAnimation("idle2",!0),a.loadRotateNode.stopAllActions(),a.loadRotateNode.angle=0,cc.tween(a.loadRotateNode).to(10,{angle:-720}).repeatForever().start())},t.updateLoadPro=function(a){var t=this.instance;null!=t&&(t.loadPro.string=a+"%")},t.hideLoading=function(a){var t=this.instance;null!=t?(a&&a(),t.loadNode.active=!1,t.loadRotateNode.stopAllActions()):a&&a()},t.showPowerView=function(){this.baseShowPopUI(p.pzaResourceUrl.POWER_VIEW,function(a){var t=a&&a.getComponent(c.pzaPowerView);t&&t.bindData("\u8865\u5145\u4f53\u529b",function(){var a;a=h.pzaLocalData.data.power+h.pzaLocalData.addPowerValue,h.pzaLocalData.data.power=a,h.pzaLocalData.addDirty("power"),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.UPDATE_POWER,null)},null)})},t.aniShowPopUI=function(a,t){var e=this.instance;null!=e&&null!=a&&this.baseShowPopUI(a,function(a){s.pzaCommonMask.showMask(!1),e.boardNode.stopAllActions(),e.boardNode.x=0,e.boardNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(-1680,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){e.boardNode.x=0}))),e.popNode.stopAllActions(),e.popNode.x=1680,e.popNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){e.popNode.x=0,s.pzaCommonMask.hideMask(),t&&t(a)})))})},t.aniHidePopUI=function(a){var t=this.instance;null!=t&&(s.pzaCommonMask.showMask(!1),t.boardNode.stopAllActions(),t.boardNode.x=-1680,t.boardNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){t.boardNode.x=0}))),t.popNode.stopAllActions(),t.popNode.x=0,t.popNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(1680,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){t.popNode.x=0,s.pzaCommonMask.hideMask(),a&&a()}))))},t.hasPopUI=function(){var a=this.instance;return null!=a&&null!=a.popNode.children&&a.popNode.children.length>0},t.setLoadingActText=function(a){var t=this.instance;null!=t&&(t.loadActText.string=a)},t.showLoadErrorView=function(){var a=this.instance;null!=a&&(a.loadErrorView.active=!0)},t.hideLoadErrorView=function(){var a=this.instance;null!=a&&(a.loadErrorView.active=!1)},t.prototype.clickReloadBtn=function(){d.pzaGameManager.getCurrentGame().preLoadFun&&d.pzaGameManager.getCurrentGame().preLoadFun()},t.prototype.clickBackHomeBtn=function(){e.hideLoadErrorView(),e.instance.loadNode.active=!1,e.baseShowBoardUI(p.pzaResourceUrl.HOME_SELECT_VIEW,null)},t.instance=null,i([g({displayName:"\u9762\u677f\u8282\u70b9",type:cc.Node})],t.prototype,"boardNode",void 0),i([g({displayName:"\u5f39\u7a97\u8282\u70b9",type:cc.Node})],t.prototype,"popNode",void 0),i([g({displayName:"\u52a0\u8f7d\u754c\u9762\u8282\u70b9",type:cc.Node})],t.prototype,"loadNode",void 0),i([g({displayName:"\u52a0\u8f7d\u8282\u70b9\u65cb\u8f6c",type:cc.Node})],t.prototype,"loadRotateNode",void 0),i([g({displayName:"\u52a0\u8f7d\u8fdb\u5ea6",type:cc.Label})],t.prototype,"loadPro",void 0),i([g({displayName:"\u8717\u725b\u52a8\u753b",type:m.pzaSpineController})],t.prototype,"snailAni",void 0),i([g({displayName:"\u52a0\u8f7d\u52a8\u4f5c\u6587\u672c",type:cc.Label})],t.prototype,"loadActText",void 0),i([g({displayName:"\u52a0\u8f7d\u9519\u8bef\u754c\u9762",type:cc.Node})],t.prototype,"loadErrorView",void 0),e=i([y],t)}(cc.Component);e.pzaUIManager=b,cc._RF.pop()},{"../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaCommonMask":"pzaCommonMask","../View/pzaPowerView":"pzaPowerView","../utils/pzaChannel":"pzaChannel","./pzaGameCommonPool":"pzaGameCommonPool","./pzaGameManager":"pzaGameManager","./pzaLocalData":"pzaLocalData","./pzaSpineController":"pzaSpineController","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaUmbrellaLeaf:[function(a,t,e){"use strict";cc._RF.push(t,"029c8UfLAZMhr0KRIDyS44u","pzaUmbrellaLeaf");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaUmbrellaLeaf=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../../Common/pzaWorldEventManager"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaZombieEnum"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.attacking=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.RICOCHET_BULLET,this.ricochetBullet,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.RICOCHET_ZOMBIE,this.ricochetZombie,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.RICOCHET_BULLET,this.ricochetBullet,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.RICOCHET_ZOMBIE,this.ricochetZombie,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.attacking=!1,d.pzaGameState.isZombieMode()?this.animation.playAnimation("T_idle",!0):(this.playNormalAni(),d.pzaGameState.onlyShroomCofee=!1)},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&!this.attacking){var o=!1;window.pzazombieManager.zombieMap.forEach(function(a,t){null==t||t.isDead||null==t.zombieData||t.zombieData.zombieType!=c.pzaZombieEnum.BUNGEE_ZOMBIE||t.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||t.xIndex>e.baseData.xIndex+1||t.xIndex<e.baseData.xIndex-1||t.yIndex>e.baseData.yIndex+1||t.yIndex<e.baseData.yIndex-1||(t.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.RICOCHET,-1)),o=!0)}),o&&(this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),d.pzaGameState.isZombieMode()?this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)}):this.animation.playAnimation("attack",!1,function(){e.attacking=!1,e.playNormalAni()}))}},t.prototype.ricochetBullet=function(a,t){var e=this;if(a==this.baseData){this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),d.pzaGameState.isZombieMode()?this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)}):this.animation.playAnimation("attack",!1,function(){e.attacking=!1,e.playNormalAni()});var o=cc.v2(this.baseData.logicPos.x-80,this.baseData.logicPos.y+70);u.pzaEffectManager.createRicochetBulletEffect(o,t)}},t.prototype.ricochetZombie=function(a){var t=this;a==this.baseData&&(this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),d.pzaGameState.isZombieMode()?this.animation.playAnimation("T_attack",!1,function(){t.attacking=!1,t.animation.playAnimation("T_idle",!0)}):this.animation.playAnimation("attack",!1,function(){t.attacking=!1,t.playNormalAni()}))},t.prototype.playNormalAni=function(){var a=this;this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var t=function(){a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};this.animation.playAnimation("idle",!1,t)},i([f],t)}(h.pzaBasePlant));e.pzaUmbrellaLeaf=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaUtil:[function(a,t,e){"use strict";cc._RF.push(t,"f1088fhgM5C05+lhr93RDcO","pzaUtil");var o=this&&this.__assign||function(){return(o=Object.assign||function(a){for(var t,e=1,o=arguments.length;e<o;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(a[n]=t[n]);return a}).apply(this,arguments)},n=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var o,n,i=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return r},r=this&&this.__spread||function(){for(var a=[],t=0;t<arguments.length;t++)a=a.concat(i(arguments[t]));return a};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaUtil=void 0;var p=function(){function a(){}return a.uuid=function(){var a,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=[];for(a=0;a<16;a++)e[a]=t[0|16*Math.random()];return e.join("")},a.getRandomNum=function(a,t){if(a==t)return a;var e=a>t?t:a,o=(a>t?a+1:t+1)-e;return Math.floor(Math.random()*o)+e},a.getRandomFloatNum=function(a,t){return t<=a?a:a+(t-a)*Math.random()},a.getDistance=function(a,t){return null==a||null==t?0:Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2))},a.getRandomIndexByWeight=function(a){var t,e;if(null==a||a.length<=0)return 0;var o=0;try{for(var i=n(a),r=i.next();!r.done;r=i.next())o+=r.value}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}o*=Math.random();for(var p=0,l=a.length;p<l;p++)if((o-=a[p])<=0)return p;return a.length-1},a.getRandomValueFromArray=function(a){if(null==a||a.length<=0)return null;var t=a.length,e=Math.random();return a[Math.floor(e*t)]},a.getRandomArrayValue=function(a,t){if(null==a||a.length<=1||a.length<=t)return a||[];for(var e=a.slice(0),o=a.length,n=o-t,i=null,r=null;o-- >n;)i=e[r=Math.floor((o+1)*Math.random())],e[r]=e[o],e[o]=i;return e.slice(n)},a.switchGraySprite=function(a,t){var e=t?cc.Material.getBuiltinMaterial("2d-gray-sprite"):cc.Material.getBuiltinMaterial("2d-sprite");a&&a.setMaterial(0,e)},a.getAngle=function(a,t){return null==a||null==t?0:Math.atan2(a.y-t.y,a.x-t.x)*(180/Math.PI)},a.getVectorsRadion=function(a,t){return null==a||null==t?0:t.signAngle(a)},a.rotateAngle=function(a,t){if(0==t)return a;if(null==a)return cc.v2();var e=Math.PI/180*t,o=Math.sin(e),n=Math.cos(e),i=a.x*n+a.y*o,r=-a.x*o+a.y*n;return cc.v2(i,r)},a.isSameDay=function(a,t){return null!=a&&null!=t&&new Date(a).toDateString()===new Date(t).toDateString()},a.getDayInterval=function(a,t){var e=new Date(a),o=new Date(t),n=e.setHours(0,0,0,0),i=o.setHours(0,0,0,0)-n;return i=Math.abs(i),Math.floor(i/864e5)},a.getCurrencyStr=function(a){if(null==a)return"";if(a<1e3)return a+"";var t="",e=(a+"").split("");e=e.reverse();for(var o=0,n=0;n<e.length;n++)t=e[n]+t,o++,n<e.length-1&&o>=3&&(t=","+t,o=0);return t},a.blinkAni=function(a,t){if(void 0===t&&(t=!1),t){if(!a)return;var e=a.tw;return e&&e.stop(),void(a&&(a.color=cc.Color.WHITE))}var o=null,n=function(t,e,n,i){var r=t+(e-t)*i;if(!a||!a.name)return o&&o.stop(),r;var p=new cc.Color(r,r,r);return a&&(a.color=p),r};o=cc.tween({c:255}).repeatForever(cc.tween().to(.5,{c:40},{progress:n}).to(.5,{c:255},{progress:n})),a.tw=o,o.start()},a.formatDateTime=function(a){var t=function(a){return a<10?"0"+a:a},e=new Date(a);return t(e.getMonth()+1)+"/"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())},a.initGameSpeed=function(){cc.gameSpeed=1,cc.director.calculateDeltaTime=function(a){a||(a=performance.now()),this._deltaTime=a>this._lastUpdate?(a-this._lastUpdate)/1e3:0,this._deltaTime*=cc.gameSpeed,this._lastUpdate=a}},a.changeGameSpeed=function(a){cc.gameSpeed=a},a.secondsToHms=function(a){var t=Math.floor(a/3600),e=Math.floor((a-3600*t)/60);return[t,e,a%60].map(function(a){return a<10?"0"+a:a.toString()}).filter(function(a,e){return e>0||t>0}).join(":")},a.getGameSpeed=function(){return cc.gameSpeed||(cc.gameSpeed=1),cc.gameSpeed},a.analysisPickState=function(a,t){for(var e="",o=0;o<t;o++){var n=a[o];n=n&&""!=n?parseInt(n):0,0==o?e=""+n:e+=","+n}return e},a.setPickState=function(a,t,e){if(!a||null==t||null==e)return"";for(var o=a.split(","),n="",i=0;i<o.length;i++){var r=null;r=o[i]&&""!=o[i]?parseInt(o[i]):0,i==t&&(r=e),0==i?n=""+r:n+=","+r}return n},a.deepCopySet=function(a){var t=Array.from(a),e=r(t);return new Set(e)},a.deepCloneMap=function(a){var t=this;return new Map(Array.from(a).map(function(a){var e=i(a,2),n=e[0],r=e[1];return r instanceof Map?[n,t.deepCloneMap(r)]:Array.isArray(r)?[n,r.slice()]:r&&"object"==typeof r?[n,o({},r)]:[n,r]}))},a.deepCloneArray=function(t){return t.map(function(t){return Array.isArray(t)?a.deepCloneArray(t):t})},a.generateRandomString=function(a){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array.from({length:a}).reduce(function(a){return a+t.charAt(Math.floor(Math.random()*t.length))},"")},a}();e.pzaUtil=p,cc._RF.pop()},{}],pzaVideoGiftView:[function(a,t,e){"use strict";cc._RF.push(t,"ac701j067FJ/ZhV+w0N6Xxd","pzaVideoGiftView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaVideoGiftView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGiftConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaRewardManager"),c=a("../utils/pzaChannel"),u=a("./pzaRewardItem"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.items=[],t.title=null,t.cancelBtn=null,t.toggle=null,t.successCall=null,t.closeCall=null,t}return n(t,a),t.prototype.bindData=function(a,t,e){var o=this;c.pzaChannel.instance().showBanner(),this.giftData=p.pzaGiftConfig.getGiftData(a),this.title.string=this.giftData.name;for(var n=p.pzaGiftConfig.getGiftPropData(this.giftData.ID),i=0;i<4;i++){var r=this.items[i];if(null==r)return;var s=n[i];null==s?r.node.active=!1:(r.node.active=!0,r.init(s),r.propName.node.y=0)}this.successCall=t,this.closeCall=e,this.cancelBtn.active=!1,"tt"==c.pzaChannel.instance().channel?(this.cancelBtn.active=!0,this.cancelBtn.getComponent(cc.Sprite).enabled=!0):(this.toggle.active=!1,setTimeout(function(){o&&o.cancelBtn&&(o.cancelBtn.active=!0)},l.pzaLocalData.data.DelayShowCancelBtnTime))},t.prototype.showCloseBtn=function(){this.toggle.active=!1,this.cancelBtn.active=!0},t.prototype.showVideo=function(){var a=this;c.pzaChannel.instance().showVideo({sucCall:function(){s.pzaRewardManager.recieveRewards(p.pzaGiftConfig.getGiftPropData(a.giftData.ID),function(){a.close(),p.pzaGiftConfig.setGiftCount(a.giftData.ID),a.successCall&&a.successCall()})},failCall:function(){},endCall:function(){},posName:"\u8d44\u6e90\u793c\u5305\u83b7\u53d6",adsid:"30"})},t.prototype.clickClose=function(){this.close(),this.closeCall&&this.closeCall()},t.prototype.close=function(){c.pzaChannel.instance().closeBanner(),r.pzaGameCommonPool.returnInstant(this.node)},i([m({displayName:"\u5956\u52b1items",type:[u.pzaRewardItem]})],t.prototype,"items",void 0),i([m({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"title",void 0),i([m({displayName:"\u53d6\u6d88\u6309\u94ae",type:cc.Node})],t.prototype,"cancelBtn",void 0),i([m(cc.Node)],t.prototype,"toggle",void 0),i([h],t)}(cc.Component);e.pzaVideoGiftView=f,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGiftConfig":"pzaGiftConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../utils/pzaChannel":"pzaChannel","./pzaRewardItem":"pzaRewardItem"}],pzaVideoPlantGiftView:[function(a,t,e){"use strict";cc._RF.push(t,"97f58kN/phJpInMTXNtODox","pzaVideoPlantGiftView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaVideoPlantGiftView=void 0;var r=a("../Battle/Data/pzaPlantEnum"),p=a("../Battle/pzaGameState"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaGiftConfig"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaSoundManager"),d=a("../utils/pzaChannel"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.item=null,t.plantName=null,t.plantDesc=null,t.videoIcon=null,t.plantImg=[],t}return n(t,a),t.prototype.bindData=function(a){switch(a){case r.pzaPlantEnum.GATLING_PEA:this.plantType=s.pzaPlantGiftType.GATLING_PEA;break;case r.pzaPlantEnum.GLOOM_SHROOM:this.plantType=s.pzaPlantGiftType.GLOOM_SHROOM;break;case r.pzaPlantEnum.CATTAIL:this.plantType=s.pzaPlantGiftType.CATTAIL;break;case r.pzaPlantEnum.SPIKEROCK:this.plantType=s.pzaPlantGiftType.SPIKEROCK;break;case r.pzaPlantEnum.COB_CANNON:this.plantType=s.pzaPlantGiftType.COB_CANNON;break;case r.pzaPlantEnum.WINTER_MELON:this.plantType=s.pzaPlantGiftType.WINTER_MELON}var t=s.pzaGiftConfig.getPlantGiftDesc(a);t&&(this.plantDesc.string=t),this.refreshView(),this.videoIcon.active=!c.pzaLocalData.data.isShowVideoIcon;for(var e=0;e<c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL].length;e++)if(c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL][e]==a){c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL].splice(e);break}},t.prototype.refreshView=function(){this.refreshPlantItem(this.item,this.plantType)},t.prototype.setBtnVideoNum=function(a,t){var e,o;switch(t){case s.pzaPlantGiftType.GATLING_PEA:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GATLING_PEA),o=c.pzaLocalData.data.gatlingAdCount;break;case s.pzaPlantGiftType.GLOOM_SHROOM:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GLOOM_SHROOM),o=c.pzaLocalData.data.gloomShroomAdCount;break;case s.pzaPlantGiftType.CATTAIL:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.CATTAIL),o=c.pzaLocalData.data.cattailAdCount;break;case s.pzaPlantGiftType.SPIKEROCK:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.SPIKEROCK),o=c.pzaLocalData.data.spikerockAdCount;break;case s.pzaPlantGiftType.COB_CANNON:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.COB_CANNON),o=c.pzaLocalData.data.cobCannonAdCount;break;case s.pzaPlantGiftType.WINTER_MELON:e=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.WINTER_MELON),o=c.pzaLocalData.data.winterMelonAdCount}var n=a.getChildByName("btn_5");n.active=!0;var i=a.getChildByName("buy_text").getComponent(cc.Label);i.string="\u9700\u8981\u89c2\u770b("+o+"/"+e.needVideo+")\u5e7f\u544a",o>=e.needVideo&&(n.active=!1,i.string="\u5df2\u89e3\u9501")},t.prototype.refreshPlantItem=function(a,t){var e=a.getChildByName("name").getComponent(cc.Label),o=a.getChildByName("btn_5").getComponent(cc.Button),n=new cc.Component.EventHandler;switch(n.target=this.node,n.component="pzaVideoPlantGiftView",n.handler="clickPlantVideoBtn",t){case s.pzaPlantGiftType.GATLING_PEA:e.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GATLING_PEA).name,n.customEventData=r.pzaPlantEnum.GATLING_PEA.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[0];break;case s.pzaPlantGiftType.GLOOM_SHROOM:e.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.GLOOM_SHROOM).name,n.customEventData=r.pzaPlantEnum.GLOOM_SHROOM.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[1];break;case s.pzaPlantGiftType.CATTAIL:e.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.CATTAIL).name,n.customEventData=r.pzaPlantEnum.CATTAIL.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[2];break;case s.pzaPlantGiftType.SPIKEROCK:e.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.SPIKEROCK).name,n.customEventData=r.pzaPlantEnum.SPIKEROCK.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[3];break;case s.pzaPlantGiftType.COB_CANNON:e.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.COB_CANNON).name,n.customEventData=r.pzaPlantEnum.COB_CANNON.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[4];break;case s.pzaPlantGiftType.WINTER_MELON:e.string=s.pzaGiftConfig.PlantGiftConfigMap.get(r.pzaPlantEnum.WINTER_MELON).name,n.customEventData=r.pzaPlantEnum.WINTER_MELON.toString(),a.getChildByName("sprite").getComponent(cc.Sprite).spriteFrame=this.plantImg[5]}this.plantName.string=e.string,o.clickEvents.push(n),this.setBtnVideoNum(a,t),this.removeTrialPlant()},t.prototype.removeTrialPlant=function(){var a,t=p.pzaGameState.curChapter,e=p.pzaGameState.curPart;2==t&&6==e?a=r.pzaPlantEnum.GATLING_PEA:2==t&&8==e?a=r.pzaPlantEnum.GLOOM_SHROOM:3==t&&1==e?a=r.pzaPlantEnum.CATTAIL:4==t&&9==e?a=r.pzaPlantEnum.SPIKEROCK:5==t&&4==e?a=r.pzaPlantEnum.COB_CANNON:5==t&&9==e&&(a=r.pzaPlantEnum.WINTER_MELON);var o=c.pzaLocalData.data.ownPlants.includes(a);if(a&&!o&&p.pzaGameState.gameMode==p.pzaGameMode.NORMAL)for(var n=0;n<c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL].length;n++)if(c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL][n]==a){c.pzaLocalData.data.modeUsePlants[p.pzaGameMode.NORMAL].splice(n);break}},t.prototype.clickPlantVideoBtn=function(a,t){var e=this;d.pzaChannel.instance().showVideo({sucCall:function(){var o,n=s.pzaGiftConfig.getPlantGiftData(parseInt(t));switch(n.plant){case r.pzaPlantEnum.GATLING_PEA:c.pzaLocalData.data.gatlingAdCount++,c.pzaLocalData.addDirty("gatlingAdCount"),o=c.pzaLocalData.data.gatlingAdCount;break;case r.pzaPlantEnum.GLOOM_SHROOM:c.pzaLocalData.data.gloomShroomAdCount++,c.pzaLocalData.addDirty("gloomShroomAdCount"),o=c.pzaLocalData.data.gloomShroomAdCount;break;case r.pzaPlantEnum.CATTAIL:c.pzaLocalData.data.cattailAdCount++,c.pzaLocalData.addDirty("cattailAdCount"),o=c.pzaLocalData.data.cattailAdCount;break;case r.pzaPlantEnum.SPIKEROCK:c.pzaLocalData.data.spikerockAdCount++,c.pzaLocalData.addDirty("spikerockAdCount"),o=c.pzaLocalData.data.spikerockAdCount;break;case r.pzaPlantEnum.COB_CANNON:c.pzaLocalData.data.cobCannonAdCount++,c.pzaLocalData.addDirty("cobCannonAdCount"),o=c.pzaLocalData.data.cobCannonAdCount;break;case r.pzaPlantEnum.WINTER_MELON:c.pzaLocalData.data.winterMelonAdCount++,c.pzaLocalData.addDirty("winterMelonAdCount"),o=c.pzaLocalData.data.winterMelonAdCount}o>=n.needVideo?(c.pzaLocalData.data.ownPlants.push(n.plant),c.pzaLocalData.addDirty("ownPlants"),e.close()):e.setBtnVideoNum(a.target.parent,e.plantType)},failCall:function(){},endCall:function(){},posName:"\u690d\u7269\u793c\u5305\u83b7\u53d6",adsid:"31"})},t.prototype.clickCancel=function(){u.pzaSoundManager.playSFX(),this.close()},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([f({displayName:"\u793c\u5305ITEM",type:cc.Node})],t.prototype,"item",void 0),i([f({displayName:"\u690d\u7269\u540d\u79f0",type:cc.Label})],t.prototype,"plantName",void 0),i([f({displayName:"\u690d\u7269\u4ecb\u7ecd",type:cc.Label})],t.prototype,"plantDesc",void 0),i([f({displayName:"\u89c6\u9891ICON",type:cc.Node})],t.prototype,"videoIcon",void 0),i([f({type:[cc.SpriteFrame]})],t.prototype,"plantImg",void 0),i([m],t)}(cc.Component);e.pzaVideoPlantGiftView=z,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGiftConfig":"pzaGiftConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../utils/pzaChannel":"pzaChannel"}],pzaVipNut:[function(a,t,e){"use strict";cc._RF.push(t,"781aaP0ZV9KuJrV9UgQGfUL","pzaVipNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaVipNut=void 0;var r=a("../../Common/pzaNodeManager"),p=a("../../Common/pzaUtil"),l=a("../../Load/pzaBundleObjectPool"),s=a("../../Load/pzaPreLoadManager"),c=a("../Data/pzaPlantEnum"),u=a("../pzaSunLight"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=8,t.sunTime=25,t.growTime=100,t.isBig=!1,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=c.pzaPlantCate.Nut,this.isBig=!1,this.blinkTime=p.pzaUtil.getRandomFloatNum(8,10),this.sunTime=3,this.growTime=100,this.isBig=!1;var o=function(){e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=p.pzaUtil.getRandomFloatNum(8,10),e.animation.playAnimation("idle2",!1,o))};this.animation.playAnimation("idle1",!1,o),o(),t.plantData&&t.plantData.isGrow&&(this.growTime=0,this.isBig=!0,this.node.scale=1.4)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.sunTime-=t,this.blinkTime-=t,this.sunTime-=t,this.sunTime<=0&&(this.sunTime=25,this.dropSun(25)),this.isBig||(this.growTime-=t,this.growTime<=0&&(this.growUp(),this.baseData&&this.baseData.plantData&&(this.baseData.plantData.isGrow=!0))))},t.prototype.growUp=function(){this.isBig=!0,this.baseData.hp+=this.baseData.maxHp,cc.tween(this.node).to(.5,{scale:1.4}).start()},t.prototype.dropSun=function(a){var t=this.node.getPosition();l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.SUN,function(e,o){if(null==e&&null!=o){o.setParent(r.pzaNodeManager.getUpBgNode());var n=o.getComponent(u.pzaSunLight);n&&n.init2(t,1,a),window.pzaplantManager.AllSunLight.add(n)}else console.error(e)})},t.prototype.deadDropSun=function(){for(var a=this.isBig?600:300,t=Math.round(a/50),e=0;e<t;e++)this.dropSun(50)},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.deadDropSun()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.deadDropSun()},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([m],t)}(d.pzaBasePlant));e.pzaVipNut=f,cc._RF.pop()},{"../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaSunLight":"pzaSunLight","./pzaBasePlant":"pzaBasePlant"}],pzaWallNut:[function(a,t,e){"use strict";cc._RF.push(t,"7f523i63cpNt5U+azxQROnr","pzaWallNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWallNut=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaPlantEnum"),l=a("../pzaEffectManager"),s=a("../pzaGameState"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=8,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,s.pzaGameState.isZombieMode())this.animation.playAnimation("T_idle",!0);else{this.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=r.pzaUtil.getRandomFloatNum(8,10),e.animation.playAnimation("idle",!1,o))};this.animation.playAnimation("idle",!1,o),s.pzaGameState.onlyShroomCofee=!1,this.animation.setAnimationSkin("body_1")}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+80),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow2",e)},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+80),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow1",e)},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([d],t)}(c.pzaBasePlant));e.pzaWallNut=h,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaWarningView:[function(a,t,e){"use strict";cc._RF.push(t,"c8b2eMkM0xK7bVO1Yn/Wwm0","pzaWarningView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWarningView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSoundManager"),c=a("../Common/pzaTipManager"),u=a("../Common/pzaUIManager"),d=a("../utils/pzaChannel"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tittle=null,t.tip=null,t.confirmBtn=null,t.cancelBtn=null,t.confirmTxt=null,t.cancelTxt=null,t.adIcon=null,t.shareIcon=null,t.rightAdIcon=null,t.rightShareIcon=null,t.leftPowerNode=null,t.leftPowerCostLab=null,t.rightPowerNode=null,t.rightPowerCostLab=null,t.powerProNode=null,t.poolPrefab=null,t.PropNum=null,t.PropUseBtn=null,t.PropUseTxt=null,t.toggle=null,t.confirmCall=null,t.cancelCall=null,t.isPropViewType=!1,t.costPower=0,t.interJudge=!1,t}return n(t,a),t.prototype.setView=function(){if(this.toggle.active=!1,"wx"==d.pzaChannel.instance().channel||"tt"==d.pzaChannel.instance().channel){var a=this.node.getChildByName("board");a&&(a.y=100)}this.confirmTxt.node.active=!this.isPropViewType,this.PropNum.node.parent.active=this.isPropViewType,this.adIcon.active=!this.isPropViewType,this.shareIcon.active=!this.isPropViewType,this.rightAdIcon.active=!this.isPropViewType,this.rightShareIcon.active=!this.isPropViewType,this.PropUseBtn.active=this.isPropViewType,this.tip.node.y=this.isPropViewType?50:12,this.tittle.node.y=110},t.prototype.show=function(a,t,e,o,n,i,r,p,s,c,u,h,m){void 0===i&&(i="\u8b66\u544a"),void 0===r&&(r=!1),void 0===p&&(p=!1),void 0===s&&(s=0),void 0===c&&(c=!1),void 0===u&&(u=0),void 0===h&&(h=!1),void 0===m&&(m=0),this.isPropViewType=!1,this.setView(),this.leftPowerNode.active=!1,this.rightPowerNode.active=!1,this.powerProNode.active=!1,this.costPower=0,this.interJudge=!1,this.tip.string=a,this.confirmCall=o,this.cancelCall=n,this.confirmTxt.string=t,this.cancelTxt.string=e,this.tittle.string=i,null!=e?(this.cancelTxt.string=e,this.cancelBtn.active=!0,this.cancelBtn.x=121,this.confirmBtn.x=-121):(this.cancelBtn.active=!1,this.confirmBtn.x=0),this.adIcon.active=r,this.shareIcon.active=p,"ks"!=d.pzaChannel.instance().channel&&"tt"!=d.pzaChannel.instance().channel&&"my"!=d.pzaChannel.instance().channel||(this.shareIcon.active=!1,this.adIcon.active=r,p&&(this.adIcon.active=!0)),this.rightAdIcon.active=!1,this.rightShareIcon.active=!1,s&&(1==s&&(this.rightAdIcon.active=!0),2==s&&(this.rightShareIcon.active=!0,"ks"!=d.pzaChannel.instance().channel&&"tt"!=d.pzaChannel.instance().channel&&"my"!=d.pzaChannel.instance().channel||(this.rightAdIcon.active=!0,this.rightShareIcon.active=!1))),l.pzaLocalData.isShowPowerGift||(c=!1),c?(this.powerProNode.active=!0,this.leftPowerNode.active=1==m,this.rightPowerNode.active=2==m,this.leftPowerCostLab.string=u+"",this.rightPowerCostLab.string=u+"",this.interJudge=h,this.costPower=u,this.tittle.node.y=120,this.tip.node.y=42):(this.tittle.node.y=110,this.tip.node.y=12)},t.prototype.showPlayTicke=function(){"wx"!=d.pzaChannel.instance().channel&&(this.PropNum.node.parent.active=!0,this.PropNum.string=l.pzaLocalData.getPropCount(p.pzaGamePropEnum.PLAY_TICKET_ITEM)+"",this.tip.node.y=50,this.tittle.node.y=110)},t.prototype.showUseItemView=function(a,t,e,o,n,i,r,s,c){if(void 0===o&&(o="\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f"),void 0===n&&(n="\u4f60\u60f3\u8981\u518d\u6b21\u4ece\u5934\u8fdb\u884c\u8fd9\u4e00\u5173\u5361\u5417\uff1f"),void 0===i&&(i="\u7acb\u5373\u4f7f\u7528"),void 0===r&&(r="\u53d6\u6d88"),void 0===s&&(s=121),void 0===c&&(c=-121),this.leftPowerNode.active=!1,this.rightPowerNode.active=!1,this.powerProNode.active=!1,this.isPropViewType=!0,this.setView(),this.PropType=a,a!=p.pzaGamePropEnum.PLAY_TICKET_ITEM)return console.warn("\u6ca1\u6709\u5bf9\u5e94\u9053\u5177\u7c7b\u578b!"),t&&t(),void this.close();this.PropNum.string=l.pzaLocalData.getPropCount(a)+"",this.confirmCall=t,this.cancelCall=e,this.tip.string=n,this.tittle.string=o,this.PropUseTxt.string=i,this.cancelTxt.string=r,s&&(this.PropUseBtn.x=s),c&&(this.cancelBtn.x=c)},t.prototype.clickConfirmUseProp=function(){s.pzaSoundManager.playSFX(),l.pzaLocalData.consumeProp(this.PropType),this.close(),this.confirmCall&&this.confirmCall()},t.prototype.clickConfirm=function(){s.pzaSoundManager.playSFX(),this.close(),this.confirmCall&&this.confirmCall()},t.prototype.clickCancel=function(){if(s.pzaSoundManager.playSFX(),l.pzaLocalData.isShowPowerGift||(this.interJudge=!1),this.interJudge){if(l.pzaLocalData.data.power<this.costPower)return c.pzaTipManager.showHomeTip("\u4f53\u529b\u4e0d\u8db3",null,2),void u.pzaUIManager.showPowerView();l.pzaLocalData.setPower(-this.costPower),this.cancelCall&&this.cancelCall()}else this.cancelCall&&this.cancelCall();this.close()},t.prototype.close=function(){this.poolPrefab?r.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):r.pzaGameCommonPool.returnInstant(this.node)},i([f({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"tittle",void 0),i([f({displayName:"\u63d0\u793a\u8bed",type:cc.Label})],t.prototype,"tip",void 0),i([f({displayName:"\u786e\u5b9a\u6309\u94ae",type:cc.Node})],t.prototype,"confirmBtn",void 0),i([f({displayName:"\u53d6\u6d88\u6309\u94ae",type:cc.Node})],t.prototype,"cancelBtn",void 0),i([f({displayName:"\u786e\u5b9a\u6309\u94ae\u6587\u6848",type:cc.Label})],t.prototype,"confirmTxt",void 0),i([f({displayName:"\u53d6\u6d88\u6309\u94ae\u6587\u6848",type:cc.Label})],t.prototype,"cancelTxt",void 0),i([f({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Node})],t.prototype,"adIcon",void 0),i([f({displayName:"\u5206\u4eab\u56fe\u6807",type:cc.Node})],t.prototype,"shareIcon",void 0),i([f({displayName:"\u53f3\u4fa7\u5e7f\u544a\u6807\u8bc6",type:cc.Node})],t.prototype,"rightAdIcon",void 0),i([f({displayName:"\u53f3\u4fa7\u5206\u4eab\u6807\u8bc6",type:cc.Node})],t.prototype,"rightShareIcon",void 0),i([f({displayName:"\u5de6\u8fb9\u4f53\u529b\u7b26\u53f7",type:cc.Node})],t.prototype,"leftPowerNode",void 0),i([f({displayName:"\u5de6\u8fb9\u4f53\u529b\u6587\u5b57",type:cc.Label})],t.prototype,"leftPowerCostLab",void 0),i([f({displayName:"\u53f3\u8fb9\u4f53\u529b\u7b26\u53f7",type:cc.Node})],t.prototype,"rightPowerNode",void 0),i([f({displayName:"\u53f3\u8fb9\u4f53\u529b\u6587\u5b57",type:cc.Label})],t.prototype,"rightPowerCostLab",void 0),i([f({displayName:"\u4f53\u529b\u8fdb\u5ea6\u8282\u70b9",type:cc.Node})],t.prototype,"powerProNode",void 0),i([f(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([f({displayName:"\u9053\u5177\u6b21\u6570",type:cc.Label})],t.prototype,"PropNum",void 0),i([f({displayName:"\u9053\u5177\u4f7f\u7528\u6309\u94ae",type:cc.Node})],t.prototype,"PropUseBtn",void 0),i([f({displayName:"\u9053\u5177\u4f7f\u7528\u6309\u94ae\u6587\u672c",type:cc.Label})],t.prototype,"PropUseTxt",void 0),i([f(cc.Node)],t.prototype,"toggle",void 0),i([m],t)}(cc.Component);e.pzaWarningView=z,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../utils/pzaChannel":"pzaChannel"}],pzaWaterLightEffect:[function(a,t,e){"use strict";cc._RF.push(t,"02c0fxAip5MbqgSRlsznf+Y","pzaWaterLightEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWaterLightEffect=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaUtil"),l=a("../../Common/pzaWorldEventManager"),s=a("../pzaGameState"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.waterLight1=null,t.waterLight2=null,t.waterLight3=null,t.interval=0,t.freeWaterArr1=[],t.freeWaterArr2=[],t.freeWaterArr3=[],t.activeWater=new Set,t.pause=!1,t.mapId=0,t.minY=-130,t.maxY=40,t.minX=0,t.maxX=0,t}return n(t,a),t.prototype.onLoad=function(){this.freeWaterArr1.push(this.waterLight1),this.freeWaterArr2.push(this.waterLight2),this.freeWaterArr3.push(this.waterLight3),this.waterLight1.name="1",this.waterLight2.name="2",this.waterLight3.name="3",this.minY=-130,this.maxY=40,this.mapId=0},t.prototype.onEnable=function(){this.interval=0,this.pause=!1,this.createLight(!1),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.BACK_HOME,this.close,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_OVER,this.close,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),s.pzaGameState.isNightScene?this.node.opacity=76.5:this.node.opacity=255},t.prototype.setMapId=function(a){this.mapId=a,15==this.mapId?(this.minY=-300,this.maxY=250,this.minX=-70,this.maxX=200):19==this.mapId?(this.minY=-300,this.maxY=250,this.minX=-70,this.maxX=500):20==this.mapId&&(this.minY=-300,this.maxY=250,this.minX=-450,this.maxX=520)},t.prototype.onDisable=function(){var a=this;l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.BACK_HOME,this.close,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_OVER,this.close,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),this.activeWater.forEach(function(t){t.stopAllActions(),"1"==t.name?a.freeWaterArr1.push(t):"2"==t.name?a.freeWaterArr2.push(t):a.freeWaterArr3.push(t)}),this.activeWater.clear()},t.prototype.update=function(a){this.pause||(this.interval+=a,this.interval>=.07&&(this.interval=0,this.createLight(!1)))},t.prototype.createLight=function(a){var t=Math.random();this.mapId>0?((a||t<=.07)&&this.createLittleLight(this.minX,this.maxX),(a||t<=.14&&t>.07)&&this.createLittleLight(this.minX,this.maxX),(a||t<=.21&&t>.14)&&this.createLittleLight(this.minX,this.maxX),(a||t<=.28&&t>.21)&&this.createLittleLight(this.minX,this.maxX),20==this.mapId&&((a||t<=.14&&t>.07)&&this.createLittleLight(this.minX,this.maxX),(a||t<=.21&&t>.14)&&this.createLittleLight(this.minX,this.maxX),(a||t<=.28&&t>.21)&&this.createLittleLight(this.minX,this.maxX)),(a||t<=.37&&t>.28)&&this.createMiddleLight(this.minX,this.maxX),(a||t<=.46&&t>.37)&&this.createMiddleLight(this.minX,this.maxX),20==this.mapId&&((a||t<=.37&&t>.28)&&this.createMiddleLight(this.minX,this.maxX),(a||t<=.46&&t>.37)&&this.createMiddleLight(this.minX,this.maxX),(a||t<=.37&&t>.28)&&this.createMiddleLight(this.minX,this.maxX),(a||t<=.46&&t>.37)&&this.createMiddleLight(this.minX,this.maxX)),(a||t<=.52&&t>.46)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.57&&t>.52)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.62&&t>.57)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.67&&t>.62)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.72&&t>.67)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.77&&t>.72)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.82&&t>.77)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.87&&t>.82)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.92&&t>.87)&&this.createLargeLight(this.minX,this.maxX),(a||t>=.92)&&this.createLargeLight(this.minX,this.maxX),20==this.mapId&&((a||t<=.52&&t>.46)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.57&&t>.52)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.62&&t>.57)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.67&&t>.62)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.72&&t>.67)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.77&&t>.72)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.82&&t>.77)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.87&&t>.82)&&this.createLargeLight(this.minX,this.maxX),(a||t<=.92&&t>.87)&&this.createLargeLight(this.minX,this.maxX))):((a||t<=.07)&&this.createLittleLight(-365,-265),(a||t<=.14&&t>.07)&&this.createLittleLight(-265,-165),(a||t<=.21&&t>.14)&&this.createLittleLight(-165,-65),(a||t<=.28&&t>.21)&&this.createLittleLight(-65,65),(a||t<=.37&&t>.28)&&this.createMiddleLight(65,175),(a||t<=.46&&t>.37)&&this.createMiddleLight(425,570),(a||t<=.52&&t>.46)&&this.createLargeLight(175,200),(a||t<=.57&&t>.52)&&this.createLargeLight(200,225),(a||t<=.62&&t>.57)&&this.createLargeLight(225,250),(a||t<=.67&&t>.62)&&this.createLargeLight(250,275),(a||t<=.72&&t>.67)&&this.createLargeLight(275,300),(a||t<=.77&&t>.72)&&this.createLargeLight(300,325),(a||t<=.82&&t>.77)&&this.createLargeLight(325,350),(a||t<=.87&&t>.82)&&this.createLargeLight(350,375),(a||t<=.92&&t>.87)&&this.createLargeLight(375,400),(a||t>=.92)&&this.createLargeLight(400,425))},t.prototype.createLittleLight=function(a,t){for(var e=p.pzaUtil.getRandomNum(0,3),o=0;o<e;o++){var n=p.pzaUtil.getRandomNum(a,t),i=p.pzaUtil.getRandomNum(this.minY,this.maxY),r=this.getWaterLight();r.x=n,r.y=i,this.activeWater.add(r)}},t.prototype.createMiddleLight=function(a,t){for(var e=p.pzaUtil.getRandomNum(1,4),o=0;o<e;o++){var n=p.pzaUtil.getRandomNum(a,t),i=p.pzaUtil.getRandomNum(this.minY,this.maxY),r=this.getWaterLight();r.x=n,r.y=i,this.activeWater.add(r)}},t.prototype.createLargeLight=function(a,t){for(var e=p.pzaUtil.getRandomNum(2,6),o=0;o<e;o++){var n=p.pzaUtil.getRandomNum(a,t),i=p.pzaUtil.getRandomNum(this.minY,this.maxY),r=this.getWaterLight();r.x=n,r.y=i,this.activeWater.add(r)}},t.prototype.getWaterLight=function(){var a=this,t=Math.random();if(t<=.1){var e=this.freeWaterArr1.pop();null==e?((e=cc.instantiate(this.waterLight1)).setParent(this.node),e.name="1"):e.active=!0,e.opacity=122;var o=1*Math.random()+.4;return e.runAction(cc.sequence(cc.fadeIn(.1),cc.spawn(cc.sequence(cc.delayTime(o),cc.fadeOut(.2)),cc.moveBy(o,cc.v2(-5,0))),cc.callFunc(function(){e.active=!1,a.freeWaterArr1.push(e),a.activeWater.delete(e)}))),e}if(t<=.7){var n=this.freeWaterArr2.pop();return null==n?((n=cc.instantiate(this.waterLight2)).setParent(this.node),n.name="2"):n.active=!0,n.opacity=122,o=1*Math.random()+.4,n.runAction(cc.sequence(cc.fadeIn(.1),cc.spawn(cc.sequence(cc.delayTime(o),cc.fadeOut(.2)),cc.moveBy(o,cc.v2(-5,0))),cc.callFunc(function(){n.active=!1,a.freeWaterArr2.push(n),a.activeWater.delete(n)}))),n}var i=this.freeWaterArr3.pop();return null==i?((i=cc.instantiate(this.waterLight3)).setParent(this.node),i.name="3"):i.active=!0,i.opacity=122,o=1*Math.random()+.4,i.runAction(cc.sequence(cc.fadeIn(.1),cc.spawn(cc.sequence(cc.delayTime(o),cc.fadeOut(.2)),cc.moveBy(o,cc.v2(-5,0))),cc.callFunc(function(){i.active=!1,a.freeWaterArr3.push(i),a.activeWater.delete(i)}))),i},t.prototype.pauseSelf=function(){this.pause=!0,this.activeWater.forEach(function(a){a&&a.pauseAllActions()})},t.prototype.resumeSelf=function(){this.pause=!1,this.activeWater.forEach(function(a){a&&a.resumeAllActions()})},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u6c34\u51491",type:cc.Node})],t.prototype,"waterLight1",void 0),i([d({displayName:"\u6c34\u51492",type:cc.Node})],t.prototype,"waterLight2",void 0),i([d({displayName:"\u6c34\u51493",type:cc.Node})],t.prototype,"waterLight3",void 0),i([u],t)}(cc.Component);e.pzaWaterLightEffect=h,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState"}],pzaWaterWaveEffect:[function(a,t,e){"use strict";cc._RF.push(t,"b8bfb61mf5JK4Xs6nmfC9To","pzaWaterWaveEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWaterWaveEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../utils/pzaFrameAnim"),l=a("../../Common/pzaGameCommonPool"),s=a("../Data/pzaZombieEnum"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani=null,t.poolPrefab=null,t.offset=cc.v2(0,0),t}return n(t,a),t.prototype.init=function(t,e,o){void 0===e&&(e=cc.v2(0,30)),void 0===o&&(o=1),a.prototype.bindData.call(this,t),this.offset=e,this.node.scale=o,this.updatePos(),this.ani.reset(),this.ani.play()},t.prototype.update=function(a){null!=this.baseData&&(this.baseData.zombieData.cate!=s.pzaZombieCate.Gargantuar&&(this.baseData.isDead||this.baseData.hp<=0)?this.close():(this.ani.updateFrame(a),this.updatePos()))},t.prototype.showWaterWave=function(){this.ani.node.active=!0},t.prototype.hideWaterWave=function(){this.ani.node.active=!1},t.prototype.updatePos=function(){null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY).add(this.offset))},t.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([d({displayName:"\u52a8\u753b",type:p.default})],t.prototype,"ani",void 0),i([d(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([u],t)}(r.pzaBaseComponent);e.pzaWaterWaveEffect=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../utils/pzaFrameAnim":"pzaFrameAnim","../Data/pzaZombieEnum":"pzaZombieEnum"}],pzaWildPea:[function(a,t,e){"use strict";cc._RF.push(t,"bff51oCdtZLqppGLGmbfRsI","pzaWildPea");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWildPea=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.shootNode=null,t.blinkTime=3,t.atk=20,t.atkCd=0,t.originAng=20,t.bulletCnt=5,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("idle1",!0);var o=function(){window.pzazombieManager.hasWildShootCanAttackZombie(e.baseData)&&e.atkCd<=0?e.animation.playAnimation("attack",!1,function(){e.atkCd=1,o()},function(){e.shoot(),l.pzaSoundManager.playAudio("PeashooterAtk")}):e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle2",!1,o))};o(),u.pzaGameState.usePeaPlant=!0},t.prototype.close=function(){a.prototype.close.call(this)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,this.atkCd>0&&(this.atkCd-=t))},t.prototype.shoot=function(){for(var a=this.originAng/(this.bulletCnt-1),t=-this.originAng/2,e=p.pzaNodeManager.getBulletNode(),o=0;o<5;o++){var n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null==n)return;n.setParent(e);var i=this.shootNode.convertToWorldSpaceAR(cc.v2()),l=e.convertToNodeSpaceAR(i);n.setPosition(l);var s=t+o*a,u=cc.misc.degreesToRadians(s),d=cc.v2(Math.cos(u),Math.sin(u)),h=n.getComponent(c.pzaBaseBullet);if(null==h)return;h.init(-1,this.baseData.atk,1,null,d)}},i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([m],t)}(d.pzaBasePlant);e.pzaWildPea=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaWinterMelonPult:[function(a,t,e){"use strict";cc._RF.push(t,"1c94fQ/hjZIqrQ4DMAZvZUU","pzaWinterMelonPult");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWinterMelonPult=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaThrowBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack1"),d.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null!=e)return l.pzaSoundManager.playAudio("melonimpact"),void a.animation.playAnimation("attack1",!1,t,function(){a.attack(e)},a.atkAniTime/a.atkInterval);a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};t()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(u.pzaBuffType.FLY)&&!o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)&&!o.buffData.hasBuff(u.pzaBuffType.DIVE)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var s=cc.v2(l.x+this.baseData.logicPos.x+16,l.y+this.baseData.logicPos.y+57);i.setPosition(s);var u=i.getComponent(c.pzaThrowBullet);null!=u&&(u.init(!1,this.baseData.yIndex,this.baseData.atk,a,n,-1,!0),u.updateBulletAngel(90),u.hasSpatter=!0,u.hasFrost=!0)}}}}}},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaWinterMelonPult=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaWordEffect:[function(a,t,e){"use strict";cc._RF.push(t,"dfe58WKdXhPIIN3qd6gO7l7","pzaWordEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWordEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaWorldEventManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.wordSprite=null,t.wordFrames=[],t.endCall=null,t}return n(t,a),t.prototype.onEnable=function(){l.pzaWorldEventManager.addListener(l.pzaWorldEventType.CLOSE_REDTIP,this.closeWord,this)},t.prototype.onDisable=function(){l.pzaWorldEventManager.addListener(l.pzaWorldEventType.CLOSE_REDTIP,this.closeWord,this)},t.prototype.closeWord=function(){this.node.stopAllActions(),this.close()},t.prototype.playReadyPlant=function(a){var t=this;this.endCall=a,this.node.stopAllActions(),this.node.scale=.01,this.wordSprite.spriteFrame=this.wordFrames[0],this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){t.node.scale=1,p.pzaSoundManager.playAudio("readygo")}),cc.scaleTo(.5,1.5),cc.callFunc(function(){t.wordSprite.spriteFrame=null}),cc.delayTime(.1),cc.callFunc(function(){t.node.scale=1,t.wordSprite.spriteFrame=t.wordFrames[1]}),cc.scaleTo(.5,1.5),cc.callFunc(function(){t.wordSprite.spriteFrame=null}),cc.delayTime(.1),cc.callFunc(function(){t.wordSprite.spriteFrame=t.wordFrames[2]}),cc.delayTime(.5),cc.callFunc(function(){t.endCall&&t.endCall(),t.close()})))},t.prototype.playLargeWave=function(a){var t=this;this.node.stopAllActions(),this.node.scale=1.4,this.wordSprite.spriteFrame=this.wordFrames[3],p.pzaSoundManager.playAudio("hugewave"),this.node.runAction(cc.sequence(cc.scaleTo(1,.8),cc.delayTime(1),cc.callFunc(function(){p.pzaSoundManager.playAudio("siren"),a?t.playLastWave():t.close()})))},t.prototype.playLastWave=function(){var a=this;this.node.stopAllActions(),this.node.scale=3,this.wordSprite.spriteFrame=this.wordFrames[4],p.pzaSoundManager.playAudio("finalwave"),this.node.runAction(cc.sequence(cc.scaleTo(1,1.5),cc.delayTime(4),cc.callFunc(function(){a.close()})))},t.prototype.pauseSelf=function(){this.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.node.resumeAllActions()},i([u({displayName:"\u6587\u5b57\u56fe",type:cc.Sprite})],t.prototype,"wordSprite",void 0),i([u({displayName:"\u6587\u5b57\u56fe\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"wordFrames",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaWordEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaWorldEventManager:[function(a,t,e){"use strict";cc._RF.push(t,"132dcxtIelN5q2Nk4+WL4Rp","pzaWorldEventManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWorldEventManager=e.pzaWorldEventType=void 0,function(a){a.BACK_HOME="BACK_HOME",a.GAME_PAUSE="GAME_PAUSE",a.GAME_RESUME="GAME_RESUME",a.GAME_OVER="GAME_OVER",a.GAME_WIN="GAME_WIN",a.SELECT_CARD="SELECT_CARD",a.DISSELECT_CARD="DISSELECT_CARD",a.BLOW_WIND="BLOW_WIND",a.PLANT_PLANT="PLANT_PLANT",a.PLANT_AD_PLANT="PLANT_AD_PLANT",a.GROVE_SHAKE="GROVE_SHAKE",a.CLEAR_SCREEN="CLEAR_SCREEN",a.LACK_SUN="LACK_SUN",a.JALAPENO_BOOM="JALAPENO_BOOM",a.ICE_SHROOM_BOOM="ICE_SHROOM_BOOM",a.LAUNCH_COB_CANNON="LAUNCH_COB_CANNON",a.AUTO_PICK="AUTO_PICK",a.PASS_PICK="PASS_PICK",a.GUIDE_REFRESH_PROP="GUIDE_REFRESH_PROP",a.GUIDE_SHOW_SPEED="GUIDE_SHOW_SPEED",a.GUIDE_USE_SPEED="GUIDE_USE_SPEED",a.USE_GAME_PROP="USE_GAME_PROP",a.SPECIAL_ACH="SPECIAL_ACH",a.HIDE_DAVE_DIALOG="HIDE_DAVE_DIALOG",a.SHOW_DAVE_DIALOG="SHOW_DAVE_DIALOG",a.UPDATE_PART_PRO="UPDATE_PART_PRO",a.UPDATE_PLANT_PRICE="UPDATE_PLANT_PRICE",a.RICOCHET_BULLET="RICOCHET_BULLET",a.RICOCHET_ZOMBIE="RICOCHET_ZOMBIE",a.CLOSE_REDTIP="CLOSE_REDTIP",a.RESET_CARD_STATE="RESET_CARD_STATE",a.UPDATE_ALL_PLANT_PRICE="UPDATE_ALL_PLANT_PRICE",a.UPDATE_POWER="UPDATE_POWER",a.POWER_ANI="POWER_ANI",a.SHOW_BUBBLE_TIPS="SHOW_BUBBLE_TIPS",a.SHOW_BUBBLE_ARROW="SHOW_BUBBLE_ARROW",a.SETTIME_BUBBLE_CLOSE="SETTIME_BUBBLE_CLOSE",a.REFRESH_FREE_PLANT="REFRESH_FREE_PLANT",a.PLANTNUT_AD_PLANT="PLANTNUT_AD_PLANT",a.UPDATE_RECORD_STATE="UPDATE_RECORD_STATE",a.UPDATE_GARDEN_STATE="UPDATE_GARDEN_STATE",a.REPORT_AD_SHOW="REPORT_AD_SHOW",a.BACK_HOMEVIEW="BACK_HOMEVIEW",a.CLEAR_CLEANCAR="CLEAR_CLEANCAR",a.MISSILE_DEATH="MISSILE_DEATH",a.UPDATE_SIDEVIEW_STATE="UPDATE_SIDEVIEW_STATE",a.UPDATE_ADTICKET="UPDATE_ADTICKET",a.BATTLEPASS_GETALL="BATTLEPASS_GETALL",a.NEWPLAYER_TASK_OVER="NEWPLAYER_TASK_OVER"}(e.pzaWorldEventType||(e.pzaWorldEventType={}));var r=cc._decorator,p=r.ccclass,l=(r.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}var e;return n(t,a),e=t,t.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),e.worldEventNode=this.node},t.addListener=function(a,t,o){null!=e.worldEventNode&&e.worldEventNode.on(a,t,o,!1)},t.removeListener=function(a,t,o){null!=e.worldEventNode&&e.worldEventNode.off(a,t,o)},t.triggerEvent=function(a,t){null!=e.worldEventNode&&e.worldEventNode.emit(a,t)},t.worldEventNode=null,e=i([p],t)}(cc.Component));e.pzaWorldEventManager=l,cc._RF.pop()},{}],pzaXxlCandy:[function(a,t,e){"use strict";cc._RF.push(t,"92e25ntHKhEwqpv1NZGUKOS","pzaXxlCandy");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaXxlCandy=void 0;var r=a("../../Common/pzaUtil"),p=a("../../Common/pzaWorldEventManager"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.bodyBindData=!0,this.body.node.getComponent(cc.Collider).enabled=!1,this.showCandyAni()},t.prototype.showCandyAni=function(){var a,t,e=this;window.pzaMapManager.DoomHoleSet.forEach(function(a){var t;t=e.judgeIsRange(a.mapXIndex,a.mapYIndex),null!=a&&t&&a.clearHole()}),window.pzaMapManager.GoldHoleSet.forEach(function(a){var t;t=e.judgeIsRange(a.mapXIndex,a.mapYIndex),null!=a&&t&&a.clearHole()}),window.pzaMapManager.ZombieHoleSet.forEach(function(a){var t;t=e.judgeIsRange(a.mapXIndex,a.mapYIndex),null!=a&&t&&a.clearHole()}),a=1.5*l.pzaGameState.map.getBlockWidth(),window.pzaMapManager.LadderMap.forEach(function(t,o){r.pzaUtil.getDistance(e.baseData.logicPos,t.logicPos)>a||(t.close(),window.pzaMapManager.LadderMap.delete(o))}),t=1.5*l.pzaGameState.map.getBlockWidth(),window.pzazombieManager.zombieMap.forEach(function(a,o){null!=o&&null!=o.zombieData&&o.logicPos.sub(e.baseData.logicPos).len()<=t&&(o.clearAllEquip(),o.destroyIronEquipInZj(0),o.destroyIronEquipInZj(1),o.destroyIronEquipInZj(2))}),this.animation.playAnimation("blow",!1,function(){window.pzaplantManager.removePlant(e.baseData),e.death()},null,.9)},t.prototype.judgeIsRange=function(a,t){var e=this.baseData.xIndex,o=this.baseData.yIndex;return Math.abs(e-a)<=1&&Math.abs(o-t)<=1},t.prototype.close=function(){a.prototype.close.call(this),this.baseData&&window.pzaplantManager.notTargetMap.delete(""+this.baseData.xIndex+this.baseData.yIndex),l.pzaGameState.hasPlantCandy||(l.pzaGameState.hasPlantCandy=!0,p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.UPDATE_ALL_PLANT_PRICE,null))},i([u],t)}(s.pzaBasePlant));e.pzaXxlCandy=d,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaYellowDuckZombie:[function(a,t,e){"use strict";cc._RF.push(t,"251b4HHHvRAYZLXYZDrQji/","pzaYellowDuckZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaYellowDuckZombie=void 0;var r=a("../Data/pzaBaseData"),p=a("../Data/pzaZombieEnum"),l=a("../Plant/pzaAttackType"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaBaseZombie"),d=a("./pzaZombieSlot"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="zombie_2",t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[d.pzaZombieSlotType.butter,new d.pzaZombieSlot(this.animation.spineAnimation,d.pzaZombieSlotType.butter).addState(new d.pzaZombieSlotAtt(1,d.pzaZombieSlotType.butter,61.81,13.02,-93.13))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.zombieHurt=function(){this.zombieHurtState=p.pzaHurtStateEnum.HURT,"zombie_1"==this.curSkinName&&(this.curSkinName="zombie1_1"),"zombie_2"==this.curSkinName&&(this.curSkinName="zombie2_1"),this.changeSkin(this.curSkinName)},t.prototype.death=function(a,t){var e=this;if(void 0===t&&(t=null),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData),!a)return this.close(),void(t!=l.pzaAttackType.DEATH&&this.createSwimmingCircle());this.playDeathAnimation(function(){e.close(),t!=l.pzaAttackType.DEATH&&e.createSwimmingCircle()})},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this)},t.prototype.ashesDeath=function(a,t){if(void 0===a&&(a=0),void 0===t&&(t=l.pzaAttackType.FLOOR_ATK),this.baseData.zombieDie(),a==c.pzaGameState.adCherryBoomDmg?this.death(!1,l.pzaAttackType.DEATH):this.death(!1),!(this.baseData.xIndex>=0&&window.pzaMapManager.isInWaterWay(this.baseData.yIndex))){var e;e=this.hasInWater?this.srBlowDeathInWaterAni?this.srBlowDeathInWaterAni:"blow_duck2":this.hasUseSrAni?this.srBlowDeathAni?this.srBlowDeathAni:"blow_duck":this.blowDeathAni?this.blowDeathAni:"blow";var o=this.baseData.zombieData.zombieType;s.pzaEffectManager.createAshesEffect(o,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,this.animation.spineAnimation.node,e)}},t.prototype.createSwimmingCircle=function(){var a=new r.pzaBaseData(null,p.pzaZombieEnum.DUCK_SWIMMING_CIRCLE);a.hp=a.maxHp=800,a.xIndex=this.baseData.xIndex,a.yIndex=this.baseData.yIndex,a.logicPos=this.baseData.logicPos,window.pzazombieManager.zombieDatas[a.yIndex].add(a),window.pzazombieManager.createZombie(a,!1,!1,!1,null,!1,!0)},i([m],t)}(u.pzaBaseZombie));e.pzaYellowDuckZombie=f,cc._RF.pop()},{"../Data/pzaBaseData":"pzaBaseData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaYetiZombie:[function(a,t,e){"use strict";cc._RF.push(t,"6bf68f5cVRDSpfEXCibGTwO","pzaYetiZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaYetiZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../Data/pzaZombieEnum"),l=a("../pzaGameState"),s=a("./pzaBaseZombie"),c=a("../../Common/pzaLocalData"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.runAwayIndex=0,t.runAwayFlag=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.runAwayIndex=Math.random()>.5?4:5,this.runAwayFlag=!1},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(a);else if(this.hasTool)this.updateMove(a);else{var t=this.findTarget();null==t||t.isDead?this.updateMove(a):this.attack(a,t),this.canRunAway(),8!=l.pzaGameState.map.getMapXIndex(this.baseData.logicPos)||c.pzaLocalData.hasUnlockZombie[p.pzaZombieEnum.YETI_ZOMBIE]||c.pzaLocalData.unlockZombie(p.pzaZombieEnum.YETI_ZOMBIE)}else this.changeRowMove(a)}},t.prototype.canRunAway=function(){if(this.baseData.xIndex>=0&&this.baseData.xIndex<=this.runAwayIndex&&!this.runAwayFlag){var a=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=l.pzaGameState.map.getBlockWidth()/a,this.runAwayFlag||(this.runAwayFlag=!0,this.baseData.zombieData.direction=1,this.refreshOrientation())}},i([d],t)}(s.pzaBaseZombie));e.pzaYetiZombie=h,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaLocalData":"pzaLocalData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie"}],pzaZFRandomPlantBox:[function(a,t,e){"use strict";cc._RF.push(t,"2203aiq7GFDZq+oZGylSx/s","pzaZFRandomPlantBox");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZFRandomPlantBox=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("./pzaRandomPlantBox"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.playAniName="idle2",t}return n(t,a),t.prototype.createRandomBox=function(){if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var a=""+this.baseData.xIndex+this.baseData.yIndex,t=window.pzaplantManager.plantDataMap.get(a);this.baseData.isDead=!0,window.pzaplantManager.plantMap.delete(t),window.pzaplantManager.plantDataMap.delete(a)},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s],t)}(p.pzaRandomPlantBox));e.pzaZFRandomPlantBox=c,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","./pzaRandomPlantBox":"pzaRandomPlantBox"}],pzaZJPlantConf:[function(a,t,e){"use strict";cc._RF.push(t,"eaeb5zaxm1EoLvQdjBLCHiZ","pzaZJPlantConf");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZJPlantConf=void 0;var i=a("../utils/pzakc"),r=function(a){function t(t){var e=this,o=parseInt(t.id);return(e=a.call(this,o,t.name,parseInt(t.env),parseInt(t.hp),0,0,parseInt(t.gold),parseFloat(t.createCD),parseFloat(t.initCD),!!t.isNight)||this).atkArr=null,e.atk2Arr=null,e.atkCD=0,e.atkCD2=0,e.senior=0,e.completed=0,e.atkArr=i.default.strNumArr(t.atk),e.atk2Arr=i.default.strNumArr(t.atk2),e.atkCD=parseFloat(t.atkCD||0),e.atkCD2=parseFloat(t.atkCD2||0),e.atkInterval=e.atkCD,e.atkArr&&(e.atk=e.atkArr[0]),e.senior=parseInt(t.senior),e.completed=parseInt(t.Completed),e.rareLevel=e.senior,e}return n(t,a),t}(a("./pzaGameConfig").pzaPlantConfigData);e.pzaZJPlantConf=r,cc._RF.pop()},{"../utils/pzakc":"pzakc","./pzaGameConfig":"pzaGameConfig"}],pzaZJZombieConf:[function(a,t,e){"use strict";cc._RF.push(t,"a964faMAJFBxbXrAfbVOuCq","pzaZJZombieConf");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZJZombieConf=void 0;var i=function(a){function t(t){var e,o=this,n=parseInt(t.id);if((o=a.call(this,n,t.name,parseInt(t.hp),parseInt(t.armorHP),parseInt(t.armor),parseInt(t.tool),0,parseFloat(t.atkCD),0,parseInt(t.level),parseInt(t.weight),parseInt(t.min),parseInt(t.ableroad),parseInt(t.ableroad_old),t.typeId,t.showWeight)||this).equipType2=0,o.equipHp2=0,o.atkArr=null,o.atkInterval2=0,o.equipType2=parseInt(t.armor2||0),o.equipHp2=parseInt(t.armorHP2||0),o.atkArr=[t.atk],t.atk2&&o.atkArr.push(t.atk2),o.atkInterval2=parseInt(t.atkCD2||0),o.atk=o.atkArr[0]||0,null!=t.speed)if((e=t.speed.split(",")).length>1){var i=parseFloat(e[0]),r=parseFloat(e[1]);o.minSpeed=Math.min(i,r),o.maxSpeed=Math.max(i,r)}else o.minSpeed=o.maxSpeed=parseFloat(e[0]);return null!=t.speed2&&((e=t.speed2.split(",")).length>1?(i=parseFloat(e[0]),r=parseFloat(e[1]),o.specialMinSpeed=Math.min(i,r),o.specialMaxSpeed=Math.max(i,r)):o.specialMinSpeed=o.specialMaxSpeed=parseFloat(e[0])),o}return n(t,a),t}(a("./pzaGameConfig").pzaZombieConfigData);e.pzaZJZombieConf=i,cc._RF.pop()},{"./pzaGameConfig":"pzaGameConfig"}],pzaZombieBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"0bd3e1+3rpDrYGxQK8+qEfk","pzaZombieBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieBaseBullet=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGroupEnum"),s=a("../../Common/pzaNodeManager"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaWorldEventManager"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaPlantEnum"),m=a("../Data/pzaZombieEnum"),f=a("../Effect/pzaBaseEffect"),z=a("../Plant/pzaAttackType"),y=a("../Plant/pzaPlantBody"),g=a("../pzaEffectManager"),b=a("../Zombie/pzaZombieBody"),v=a("./pzaBaseBullet"),P=cc._decorator,D=P.ccclass,S=P.property,C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.normalBulletNode=null,t.fireBulletNode=null,t.fireBall=null,t.bulletLevel=0,t.direction=cc.v2(-1,0),t.colliderWoods=new Set,t}return n(t,a),t.prototype.init=function(a,t,e,o,n){void 0===e&&(e=1),void 0===o&&(o=null),void 0===n&&(n=cc.v2(-1,0)),this.bulletYIndex=a,r.pzaCollisionManager.getInstance.addZombieBulletByRow(this.bulletYIndex,this),this.atk=t,this.lifeTime=0,this.yTargetPos=o,this.realYSpeed=this.ySpeed,this.direction=n,this.isInAir=!1,this.maxPosX=null,this.node.scale=1,this.createShadow(),this.speed=this.originSpeed,this.bulletLevel=e,this.refreshBulletState(),this.colliderWoods.clear()},t.prototype.update=function(){},t.prototype.logicLateUpdate=function(a){1==this.bulletLevel?this.normalBulletNode.angle+=360*a:2==this.bulletLevel&&(this.fireBall.angle+=360*a)},t.prototype.refreshBulletState=function(){this.normalBulletNode.active=1==this.bulletLevel,this.fireBulletNode.active=2==this.bulletLevel},t.prototype.onCollision=function(a){if(a)if(a.node.group==l.pzaGroupEnum.PLANT){var t=a.node.getComponent(y.pzaPlantBody);if(t)this.colliderPlant(t&&t.baseData);else{var e=a.node.getComponent(b.pzaZombieBody);this.colliderZombie(e&&e.baseData)}}else a.node.group!=l.pzaGroupEnum.ZOMBIEFIRETORCH||this.colliderWoods.has(a)||this.colliderZombieTorch(a)},t.prototype.colliderZombieTorch=function(a){var t=a&&a.node.getComponent(b.pzaZombieBody);null==t||null==t.baseData||t.baseData.isDead||this.bulletLevel>=2||(this.bulletLevel++,this.colliderWoods.add(a),this.refreshBulletState(),this.bulletLevel>=2&&c.pzaSoundManager.playAudio("Torchwood",.5))},t.prototype.colliderPlant=function(a){if(a&&!a.isDead&&a.plantData.canBeShoot){this.playHitEffect(a),this.close();var t=null,e=-1,o=window.pzaplantManager.getAllPlant(h.pzaPlantEnum.UMBRELLA_LEAF),n=window.pzaplantManager.getAllPlant(h.pzaPlantEnum.COFFEE_Umbrella),i=window.pzaplantManager.getAllPlant(h.pzaPlantEnum.TALL_NUT_LEAF);if(o.concat(n).concat(i).forEach(function(o){if(null==t||0!=e)if(o.xIndex==a.xIndex&&o.yIndex==a.yIndex)t=o,e=0;else if(Math.abs(o.xIndex-a.xIndex)<=1&&Math.abs(o.yIndex-a.yIndex)<=1){var n=Math.abs(o.xIndex-a.xIndex)+Math.abs(o.yIndex-a.yIndex);(null==t||n<e)&&(t=o,e=n)}}),this.bulletLevel>=2&&(t=null,this.atk=2*this.atk),null!=t){var r=null;return 1==this.bulletLevel?r=this.normalBulletNode.getComponent(cc.Sprite).spriteFrame:2==this.bulletLevel&&(r=this.fireBall.getComponent(cc.Sprite).spriteFrame),void u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.RICOCHET_BULLET,t,r)}var p=""+a.xIndex+a.yIndex,l=window.pzaplantManager.plantEnvDataMap.get(p);if(null==l||l.plantData.plantType!=h.pzaPlantEnum.LILY_SHELL){var s=window.pzaplantManager.pumpkinDataMap.get(p);if(null==s){var c=window.pzaplantManager.plantDataMap.get(p);null==c?null==l||(d=window.pzaplantManager.getPlantByData(l))&&d.hurt(this.atk,null,z.pzaAttackType.FLOOR_ATK):(d=window.pzaplantManager.getPlantByData(c))&&d.hurt(this.atk,null,z.pzaAttackType.FLOOR_ATK)}else(d=window.pzaplantManager.getPlantByData(s))&&d.hurt(this.atk,null,z.pzaAttackType.FLOOR_ATK)}else{var d;(d=window.pzaplantManager.getPlantByData(l))&&d.hurt(this.atk,null,z.pzaAttackType.FLOOR_ATK)}}},t.prototype.colliderZombie=function(a){if(a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==m.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&!a.buffData.hasBuff(d.pzaBuffType.DIVE)&&!a.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)&&(this.isInAir||!a.buffData.hasBuff(d.pzaBuffType.FLY))&&(!this.isInAir||a.buffData.hasBuff(d.pzaBuffType.FLY))&&!a.buffData.hasBuff(d.pzaBuffType.INVINCIBLE)&&a.zombieData&&a.zombieData.hypnosis){var t=window.pzazombieManager.getHypnoZombie(a);null!=t&&(this.isCanfrost?this.frostColliderZombie(a):(this.isMine?this.rangeAtk(a):t.hurt(this.atk),this.penetrate||this.close(),this.playHitEffect(a)))}},t.prototype.playHitEffect=function(a){var t=5,e=cc.v2(this.node.x,this.node.y);null!=a&&(t=10*-a.yIndex+5,e=cc.v2(a.logicPos.x,a.logicPos.y+70)),this.bulletLevel>=2&&(c.pzaSoundManager.playAudio("firepeaHit",.5),g.pzaEffectManager.createBoomFireEffect(this.bulletYIndex,0,e,null));var o=s.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=p.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.zIndex=t,n.setPosition(e);var i=n.getComponent(f.pzaBaseEffect);i&&i.showEffect(null,null)}},t.prototype.close=function(){this.bulletYIndex<0?r.pzaCollisionManager.getInstance.delZombieBulletOther(this):r.pzaCollisionManager.getInstance.delZombieBulletByRow(this.bulletYIndex,this),null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([S({displayName:"\u666e\u901a\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"normalBulletNode",void 0),i([S({displayName:"\u706b\u7130\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"fireBulletNode",void 0),i([S({displayName:"\u706b\u7130\u5b50\u5f39\u7403",type:cc.Node})],t.prototype,"fireBall",void 0),i([D],t)}(v.pzaBaseBullet);e.pzaZombieBaseBullet=C,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../Plant/pzaAttackType":"pzaAttackType","../Plant/pzaPlantBody":"pzaPlantBody","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","./pzaBaseBullet":"pzaBaseBullet"}],pzaZombieBobsledTeam:[function(a,t,e){"use strict";cc._RF.push(t,"7a718blukBMlonF38uNGJmf","pzaZombieBobsledTeam");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieBobsledTeam=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Plant/pzaAttackType"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaBaseZombie"),m=a("./pzaZombieState"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.butterSlot=null,t.zombieInCar=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.animation.node.stopAllActions(),this.animation.node.opacity=255,this.animation.node.x=80},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.changeSkin("biaoqing1_1"),this.animation.playAnimation(this.uiIdleName,!0,null,null,.5)},t.prototype.preview=function(t,e,o){void 0===o&&(o=1),a.prototype.bindData.call(this,t),this.hasEquip=!0,this.hasTool=!0,this.zombieWin=!1,this.setZombieScale(o),this.node.scaleX=o,this.refreshFrostState(!0),this.changeSkin("biaoqing1_1"),this.playStayAnimation()},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.zombieInCar=!1,t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE,-1)),t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_SPATTER,-1)),t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1))},t.prototype.logicUpdate=function(a){null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.isDead||(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),this.updateMove(a))))},t.prototype.updateMove=function(t){a.prototype.updateMove.call(this,t),this.leaveIce()?this.playDieAnimation(!1):this.zombieInCar||-1!=this.baseData.xIndex&&this.baseData.xIndex<=8&&this.jumpInCar()},t.prototype.onChangeIndex=function(){},t.prototype.leaveIce=function(){var a=this,t=window.pzaMapManager.getIceGround(this.baseData.yIndex);if(null==t||t.length<=0)return!0;var e=!0;return t.forEach(function(t){null!=t&&t.getIceX()<a.baseData.logicPos.x&&(e=!1)}),e},t.prototype.jumpInCar=function(){var a=this;this.zombieInCar=!0,this.animation.playAnimation("jump",!1,function(){a.animation.playAnimation("idle2",!0)})},t.prototype.playDeathAnimation=function(t){a.prototype.playDeathAnimation.call(this,t),this.zombieState=m.pzaZombieState.DEAD,this.zombieHurtState=s.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),this.changeSkin("biaoqing1_4"),this.animation.playAnimation("die",!1,t)},t.prototype.zombieDying=function(){this.zombieHurtState=s.pzaHurtStateEnum.DYING,this.changeSkin("biaoqing1_3")},t.prototype.zombieHurt=function(){this.zombieHurtState=s.pzaHurtStateEnum.HURT,this.changeSkin("biaoqing1_2")},t.prototype.zombieIntact=function(){this.zombieHurtState=s.pzaHurtStateEnum.INTACT,this.changeSkin("biaoqing1_1")},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.animation.node.pauseAllActions()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.animation.node.resumeAllActions()},t.prototype.hurt=function(a,t,e){if(d.pzaGameState.critValue>0&&Math.random()<d.pzaGameState.critValue&&(a=Math.round(1.5*a)),this.baseData&&!this.baseData.isDead){if(e==c.pzaAttackType.CLEAN_CAR)return this.baseData.zombieDie(),void this.flaserDeath();if(e==c.pzaAttackType.BANG)return this.baseData.zombieDie(),void this.death(!1);if(e==c.pzaAttackType.EAT||e==c.pzaAttackType.DEATH)return this.baseData.zombieDie(),void this.death(!1);if(e!=c.pzaAttackType.TWINE)if(e!=c.pzaAttackType.BOOM){if(e==c.pzaAttackType.NORMAL_BOOM)return this.baseData.zombieDie(),void this.death(!1);e==c.pzaAttackType.SPIKE?this.baseData.hurtZombieBody(a):this.baseData.hurtZombie(a),this.baseData.isDead||this.baseData.hp<=0?this.playDieAnimation(!0):(this.refreshHurtState(!1),this.animation.flash())}else this.ashesDeath();else this.twineDeath()}},t.prototype.playDieAnimation=function(a){for(var t=this,e=0;e<4;e++){var o=cc.v2(this.baseData.logicPos.x+120+50*e,this.baseData.logicPos.y),n=d.pzaGameState.map.getMapXIndex(o),i=window.pzazombieManager.createFixBlockZombieData(s.pzaZombieEnum.ZOMBIE_BOBSLED,n,this.baseData.yIndex);i.logicPos=o,window.pzazombieManager.createZombie(i,!1)}this.baseData.zombieDie(),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,a),this.animation.setAnimationSkin("biaoqing1_4"),this.animation.playAnimation("idle2",!0),this.animation.node.runAction(cc.sequence(cc.moveTo(1,cc.v2(-40,0)),cc.fadeOut(.2),cc.callFunc(function(){t.close()})))},t.prototype.ashesDeath=function(a,t){if(void 0===a&&(a=0),void 0===t&&(t=c.pzaAttackType.FLOOR_ATK),this.baseData.zombieDie(),a!=d.pzaGameState.adCherryBoomDmg||t!=c.pzaAttackType.BOOM||this.baseData.zombieData.zombieType!=s.pzaZombieEnum.YELLOW_DUCK_ZOMBIE&&this.baseData.zombieData.zombieType!=s.pzaZombieEnum.SKELETON_ZOMBIE&&this.baseData.zombieData.zombieType!=s.pzaZombieEnum.BedCar&&this.baseData.zombieData.zombieType!=s.pzaZombieEnum.ZOMBONI3?this.death(!1):this.death(!1,c.pzaAttackType.DEATH),!(this.baseData.xIndex>=0&&window.pzaMapManager.isInWaterWay(this.baseData.yIndex))){var e=this.zombieInCar?"blow3":"blow2",o=this.baseData.zombieData.zombieType;u.pzaEffectManager.createAshesEffect(o,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,this.animation.spineAnimation.node,e)}},t.prototype.death=function(t,e){void 0===e&&(e=null),a.prototype.death.call(this,t,e),d.pzaGameState.killZombieTeam++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_18,d.pzaGameState.killZombieTeam)},i([z],t)}(h.pzaBaseZombie));e.pzaZombieBobsledTeam=y,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieState":"pzaZombieState"}],pzaZombieBobsled:[function(a,t,e){"use strict";cc._RF.push(t,"cc21b+6q0xMHKir0g6acnU1","pzaZombieBobsled");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieBobsled=void 0;var r=a("./pzaBaseZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="biaoqing2_1",t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,67.87,-1.82,-90.94))]])},i([s],t)}(r.pzaBaseZombie));e.pzaZombieBobsled=c,cc._RF.pop()},{"./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaZombieBody:[function(a,t,e){"use strict";cc._RF.push(t,"b1abdSI13NE76lu3aJ+NI5X","pzaZombieBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieBody=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaGroupEnum"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../Plant/pzaAttackType"),d=a("../pzaBaseBody"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.isUseInitGroup=!1,t.collider=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.isUseInitGroup||(null!=t.zombieData&&t.zombieData.hypnosis?(this.node.group=p.pzaGroupEnum.PLANT,r.pzaCollisionManager.getInstance.zombieToPlant(t.yIndex,this)):(this.node.group=p.pzaGroupEnum.ZOMBIE,r.pzaCollisionManager.getInstance.addZombieByRow(t.yIndex,this)))},t.prototype.hypnosischangeGroup=function(){this.curTarget=null,this.node.group=p.pzaGroupEnum.PLANT},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t,!1)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t,!0)},t.prototype.getCollider=function(){var a=this;return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.baseData&&this.baseData.zombieData&&this.baseData.zombieData.zombieType===c.pzaZombieEnum.BUNGEE_ZOMBIE?this.collider.poSource=function(){return{x:a.node.parent.parent.x,y:a.node.parent.parent.y}}:this.collider.poSource=function(){return{x:a.node.parent.x+a.node.x,y:a.node.parent.y+a.node.y}},this.collider):null},t.prototype.onCollisionExit=function(a){if(null!=a&&null!=this.curTarget){if(a.node.group==p.pzaGroupEnum.PLANT){var t=a.node.getComponent(d.pzaBaseBody);if(null!=t)return void(t.baseData==this.curTarget&&(this.curTarget=null));if(null!=(e=a.node.getComponent(d.pzaBaseBody)))return void(e.baseData==this.curTarget&&(this.curTarget=null))}var e;if(a.node.group==p.pzaGroupEnum.ZOMBIE&&null!=(e=a.node.getComponent(d.pzaBaseBody))&&e.baseData==this.curTarget&&(this.curTarget=null),a.node.group==p.pzaGroupEnum.BRAIN){var o=a.node.getComponent(d.pzaBaseBody);if(null!=o)return void(o.baseData==this.curTarget&&(this.curTarget=null))}}},t.prototype.onCollision=function(a,t,e){if(null!=a&&null==this.curTarget){if(a.node.group==p.pzaGroupEnum.PLANT){var o=a.node.getComponent(d.pzaBaseBody);if(null!=o)return void this.colliderPlant(o.baseData,e);if(null!=(n=a.node.getComponent(d.pzaBaseBody)))return void this.colliderZombie(n.baseData)}var n;if(a.node.group==p.pzaGroupEnum.ZOMBIE&&null!=(n=a.node.getComponent(d.pzaBaseBody)))return void this.colliderZombie(n.baseData);if(a.node.group==p.pzaGroupEnum.BRAIN){var i=a.node.getComponent(d.pzaBaseBody);if(this.baseData.zombieData.direction<0&&null!=i&&null!=i.baseData&&i.baseData.yIndex==this.baseData.yIndex)return void(this.curTarget=i.baseData)}}},t.prototype.isCanClimbLabby=function(){return this.baseData.zombieData.cate!=c.pzaZombieCate.Gargantuar&&this.baseData.zombieData.cate!=c.pzaZombieCate.IceCar&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.CATAPULT_ZOMBIE},t.prototype.colliderPlant=function(a,t){if(!(null==this.baseData||null==a||a.isDead||a&&a.buffData&&a.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||null!=a.plantData&&a.plantData.plantType==s.pzaPlantEnum.SQUASH&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE||this.baseData.yIndex!=a.yIndex)){if(a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)&&a.plantData.plantType==s.pzaPlantEnum.DIAMOND_SNAIL){var e=window.pzazombieManager.getZombie(this.baseData);return e.bePauseControl(),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROZEN,4)),null!=this.baseData.zombieData&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.DR_ZOMBOSS&&(this.baseData.zombieData.frozen=!0),void(e&&e.hurt(0,this.baseData,u.pzaAttackType.SPIKE))}if(null==this.baseData.zombieData||-1!=this.baseData.zombieData.direction||!window.pzaMapManager.hasLadder(a.xIndex,a.yIndex)||!this.isCanClimbLabby())if(null==this.baseData.zombieData||this.baseData.zombieData.zombieType!=c.pzaZombieEnum.ZOMBONI&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.CATAPULT_ZOMBIE){if(null==a.plantData||a.plantData.cate!==s.pzaPlantCate.Spike||this.baseData.zombieData.cate==c.pzaZombieCate.Gargantuar)if(null!=a.plantData&&a.plantData.adClearPlant)this.curTarget=a;else{if(this.baseData.zombieData.direction>0){if(this.baseData.logicPos.x>a.logicPos.x)return}else if(this.baseData.logicPos.x<a.logicPos.x)return;if(this.baseData.zombieData.zombieType!=c.pzaZombieEnum.CATAPULT_ZOMBIE&&this.baseData.zombieData.cate!==c.pzaZombieCate.Gargantuar&&this.baseData.zombieData.cate!==c.pzaZombieCate.IceCar&&(this.baseData.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.POGO_ZOMBIE||this.baseData.zombieData.toolType==c.pzaEquipType.NO_EQUIP)||null!=a.plantData||this.baseData.zombieData.hypnosis){if(!t){var o=window.pzaplantManager.getPlantByData(a);a&&a.plantData&&a.plantData.plantType==s.pzaPlantEnum.SPIKEROCK&&this.baseData.zombieData.zombieType==c.pzaZombieEnum.Mac_GARGANTUAR&&o&&o.hurt(a.maxHp/3,this.baseData,u.pzaAttackType.BANG),a&&a.plantData&&a.plantData.plantType==s.pzaPlantEnum.SPIKEWEED&&this.baseData.zombieData.zombieType==c.pzaZombieEnum.Mac_GARGANTUAR&&o&&o.hurt(a.maxHp,this.baseData,u.pzaAttackType.BANG)}this.curTarget=a}}}else this.curTarget=a}},t.prototype.colliderZombie=function(a){if(null!=this.baseData&&null!=a&&!a.isDead&&this.baseData.yIndex==a.yIndex){if(this.baseData.zombieData.direction>0){if(this.baseData.logicPos.x>a.logicPos.x)return}else if(this.baseData.logicPos.x<a.logicPos.x)return;this.curTarget=a}},i([f({displayName:"\u662f\u5426\u4f7f\u7528\u521d\u59cb\u78b0\u649e\u7ec4"})],t.prototype,"isUseInitGroup",void 0),i([m],t)}(d.pzaBaseBody);e.pzaZombieBody=z,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaBaseBody":"pzaBaseBody"}],pzaZombieCard:[function(a,t,e){"use strict";cc._RF.push(t,"3b719bhP+NDUpgv/kC7a5T2","pzaZombieCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieCard=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaSpriteFrameManager"),s=a("../../Common/pzaWorldEventManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardIcon=null,t.priceLabel=null,t.mask=null,t.selectTag=null,t.curZombieType=null,t.curPrice=0,t.clickCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.node._touchListener.setSwallowTouches(!1),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.SELECT_CARD,this.diselect,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.SELECT_CARD,this.diselect,this)},t.prototype.bindData=function(a,t,e){this.curZombieType=a,this.curPrice=t,this.clickCall=e,null!=a?(this.node.active=!0,this.mask.active=!1,this.selectTag.active=!1,l.pzaSpriteFrameManager.loadZombieCard(a,this.cardIcon),this.priceLabel.string=""+this.curPrice):this.node.active=!1},t.prototype.clickCard=function(){if(null!=this.curZombieType){var a=r.pzaGameState.selectZombie;this.clickCall&&this.clickCall(this.curZombieType),a==this.curZombieType&&(r.pzaGameState.selectCard=null,r.pzaGameState.selectZombie=null)}},t.prototype.update=function(){null==this.curZombieType||r.pzaGameState.gamePause||(r.pzaGameState.sunLightCount>=this.curPrice?this.mask.active=!1:this.mask.active=!0)},t.prototype.select=function(){if(null!=this.curZombieType){if(this.curPrice>r.pzaGameState.sunLightCount)return s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.LACK_SUN,null),p.pzaSoundManager.playAudio("sunlack"),r.pzaGameState.selectCard=null,void(r.pzaGameState.selectZombie=null);r.pzaGameState.selectCard=r.pzaSelectCardType.SLOT_CARD,r.pzaGameState.selectZombie=this.curZombieType,this.selectTag.active=!0,p.pzaSoundManager.playAudio("selectPlant")}},t.prototype.diselect=function(){this.selectTag.active=!1},i([d({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([d({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],t.prototype,"priceLabel",void 0),i([d({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([d({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"selectTag",void 0),i([u],t)}(cc.Component);e.pzaZombieCard=h,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaZombieEnermyPartCfg:[function(a,t,e){"use strict";cc._RF.push(t,"0e450UTG6JPxKRTcmtcZjNM","pzaZombieEnermyPartCfg"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieEnermyPartCfg=void 0;var o=a("../Battle/Data/pzaPlantEnum"),n=a("./pzaUtil"),i=function(){function a(a,t,e,o,n,i,r){this.level=1,this.name=null,this.plantPool=null,this.zombiePool=null,this.plantColumn=4,this.fixPlant=null,this.fixRowPlant=null,this.unlockChapter=1,this.unlockPart=1,this.endlessWeight=0,this.level=a,this.name=t,this.plantPool=e,this.zombiePool=o,this.plantColumn=n,this.fixPlant=i,this.fixRowPlant=r}return a.initPartConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=null,n=null,i=null,r=[],p=1,l=1;try{if(null!=t.plant&&""!=t.plant&&(o=JSON.parse(t.plant)),null!=t.special&&""!=t.special&&(n=JSON.parse(t.special)),null!=t.special2&&""!=t.special2&&(i=JSON.parse(t.special2)),null!=t.unlock){var s=t.unlock.split("-").map(Number);p=s[0],l=s[1]}}catch(d){console.log(d)}null!=t.zombie&&(r=t.zombie.split(",").map(Number));var c=parseInt(t.level),u=new a(c,t.name,o,r,parseInt(t.green),n,i);u.unlockChapter=p,u.unlockPart=l,u.endlessWeight=t.probability&&parseInt(t.probability),e.PartConfigMap.set(c,u)}})},a.initPuffFloat=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var e=parseInt(a.level),o=parseInt(a.mini),n=parseInt(a.max);t.PuffFloatMap.set(e,{min:o,max:n}),t.maxPuffPart=Math.max(e,t.maxPuffPart)}})},a.getName=function(a){var t=this.PartConfigMap.get(a);return t&&t.name},a.getZombiePool=function(a){var t=this.PartConfigMap.get(a);return t&&t.zombiePool},a.getPlantType=function(a){var t=this.PartConfigMap.get(a);if(null==t)return[];var e=new Set;return null!=t.fixPlant&&t.fixPlant.forEach(function(a){if(null!=a){var t=a[1];e.add(t)}}),null!=t.fixRowPlant&&t.fixRowPlant.forEach(function(a){if(null!=a)for(var t=1;t<a.length;t++){var o=a[t];e.add(o)}}),null!=t.plantPool&&t.plantPool.forEach(function(a){if(null!=a){var t=a[0];e.add(t)}}),Array.from(e)},a.getPlantList=function(a,t){var e=[],n=this.PartConfigMap.get(a);if(null==n)return e;var i=new Set;if(null!=n.fixPlant&&n.fixPlant.forEach(function(a){if(null!=a){var t=a[1],o=a[0],r=(o-1)%n.plantColumn,p=4-Math.floor((o-1)/n.plantColumn);e.push({x:r,y:p,type:t}),i.add(""+r+p)}}),null!=n.fixRowPlant&&n.fixRowPlant.forEach(function(a){if(null!=a){for(var t=4-(a[0]-1),o=[],r=0;r<n.plantColumn;r++){var p=""+r+t;i.has(p)||o.push(r)}o.sort(function(){return Math.random()-.5});for(var l=1;l<a.length;l++){o.push(l),r=o[l-1];var s=a[l];e.push({x:r,y:t,type:s}),i.add(""+r+t)}}}),null!=n.plantPool){var r=[];n.plantPool.forEach(function(a){if(null!=a)for(var e=a[0],n=a[1],i=0;i<n;i++)t>0&&e==o.pzaPlantEnum.SUN_FLOWER?(t--,r.push(o.pzaPlantEnum.PUFF_SHROOM)):r.push(e)}),r.sort(function(){return Math.random()-.5});for(var p=0,l=0;l<n.plantColumn;l++)for(var s=0;s<5;s++){var c=""+l+s;if(!i.has(c)){var u=r[p];l<=1&&(u==o.pzaPlantEnum.WALL_NUT||u==o.pzaPlantEnum.TALL_NUT)?(p++,s--,r.push(u)):(e.push({x:l,y:s,type:r[p]}),p++)}}}return e},a.getPlantColumn=function(a){var t=this.PartConfigMap.get(a);return null==t?0:t.plantColumn},a.getEndlessCfgLevel=function(a){var t=[];1==a?t.push(10,11,12):t.push(10,11,12,13,14,15,16,17);for(var e=[],o=0;o<t.length;o++){var i=this.PartConfigMap.get(t[o]);e.push(i&&i.endlessWeight||0)}return t[n.pzaUtil.getRandomIndexByWeight(e)]},a.getRandomPuff=function(a){a=Math.min(this.maxPuffPart,a);var t=this.PuffFloatMap.get(a);return n.pzaUtil.getRandomNum(t.min,t.max)},a.PartConfigMap=new Map,a.PuffFloatMap=new Map,a.maxPuffPart=1,a}();e.pzaZombieEnermyPartCfg=i,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","./pzaUtil":"pzaUtil"}],pzaZombieEnum:[function(a,t,e){"use strict";cc._RF.push(t,"b5ab5QGCLlGqZm0T4j6hFMJ","pzaZombieEnum"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaEquipType=e.pzaHurtStateEnum=e.pzaZombieHurtCate=e.pzaZombieCate=e.pzaZombieEnum=void 0,function(a){a[a.ZOMBIE=1]="ZOMBIE",a[a.FLAG_ZOMBIE=2]="FLAG_ZOMBIE",a[a.CONE_HEAD_ZOMBIE=3]="CONE_HEAD_ZOMBIE",a[a.POLEVAULTING_ZOMBIE=4]="POLEVAULTING_ZOMBIE",a[a.BUCKET_HEAD_ZOMBIE=5]="BUCKET_HEAD_ZOMBIE",a[a.NEWSPAPER_ZOMBIE=6]="NEWSPAPER_ZOMBIE",a[a.SCREEN_DOOR_ZOMBIE=7]="SCREEN_DOOR_ZOMBIE",a[a.FOOTBALL_ZOMBIE=8]="FOOTBALL_ZOMBIE",a[a.DANCING_ZOMBIE=9]="DANCING_ZOMBIE",a[a.BACKUP_DANCER=10]="BACKUP_DANCER",a[a.DUCKY_TUBE_ZOMBIE=11]="DUCKY_TUBE_ZOMBIE",a[a.DUCKY_TUBE_CONE_ZOMBIE=12]="DUCKY_TUBE_CONE_ZOMBIE",a[a.DUCKY_TUBE_BUCKET_ZOMBIE=13]="DUCKY_TUBE_BUCKET_ZOMBIE",a[a.SNORKEL_ZOMBIE=14]="SNORKEL_ZOMBIE",a[a.ZOMBONI=15]="ZOMBONI",a[a.ZOMBIE_BOBSLED_TEAM=16]="ZOMBIE_BOBSLED_TEAM",a[a.DOLPHIN_RIDER_ZOMBIE=17]="DOLPHIN_RIDER_ZOMBIE",a[a.JACK_ZOMBIE=18]="JACK_ZOMBIE",a[a.BALLOON_ZOMBIE=19]="BALLOON_ZOMBIE",a[a.DIGGER_ZOMBIE=20]="DIGGER_ZOMBIE",a[a.POGO_ZOMBIE=21]="POGO_ZOMBIE",a[a.YETI_ZOMBIE=22]="YETI_ZOMBIE",a[a.BUNGEE_ZOMBIE=23]="BUNGEE_ZOMBIE",a[a.LADDER_ZOMBIE=24]="LADDER_ZOMBIE",a[a.CATAPULT_ZOMBIE=25]="CATAPULT_ZOMBIE",a[a.GARGANTUAR=26]="GARGANTUAR",a[a.RED_GARGANTUAR=27]="RED_GARGANTUAR",a[a.IMP=28]="IMP",a[a.DR_ZOMBOSS=29]="DR_ZOMBOSS",a[a.ZOMBIE_BOBSLED=30]="ZOMBIE_BOBSLED",a[a.IMP_MINI=31]="IMP_MINI",a[a.NormalPeaZombie=32]="NormalPeaZombie",a[a.Nut_Zombie=33]="Nut_Zombie",a[a.Mac_GARGANTUAR=34]="Mac_GARGANTUAR",a[a.SQUASH_ZOMBIE=35]="SQUASH_ZOMBIE",a[a.JALAPENO_ZOMBIE=36]="JALAPENO_ZOMBIE",a[a.GATLINGSHOOT_ZOMBIE=37]="GATLINGSHOOT_ZOMBIE",a[a.TALLNUT_ZOMBIE=38]="TALLNUT_ZOMBIE",a[a.CONE_HEAD_ZOMBIE2=101]="CONE_HEAD_ZOMBIE2",a[a.POLEVAULTING_ZOMBIE2=102]="POLEVAULTING_ZOMBIE2",a[a.SCREEN_DOOR_ZOMBIE2=104]="SCREEN_DOOR_ZOMBIE2",a[a.SCREEN_DOOR_ZOMBIE3=105]="SCREEN_DOOR_ZOMBIE3",a[a.FOOTBALL_ZOMBIE2=106]="FOOTBALL_ZOMBIE2",a[a.FOOTBALL_ZOMBIE3=107]="FOOTBALL_ZOMBIE3",a[a.GATLING_ZOMBIE=145]="GATLING_ZOMBIE",a[a.GATLING_ZOMBIE_CONE=146]="GATLING_ZOMBIE_CONE",a[a.GATLING_ZOMBIE_DOOR=147]="GATLING_ZOMBIE_DOOR",a[a.GATLING_ZOMBIE_BUCKET=148]="GATLING_ZOMBIE_BUCKET",a[a.TEST_DARK_ZOMBIE_5=1700]="TEST_DARK_ZOMBIE_5",a[a.SURF_BANANA_ZOMBIE=114]="SURF_BANANA_ZOMBIE",a[a.SURF_GATLING_ZOMBIE=167]="SURF_GATLING_ZOMBIE",a[a.POLEVAULTING_ZOMBIE_3=168]="POLEVAULTING_ZOMBIE_3",a[a.SNORKEL_TANGLE_ZOMBIE=169]="SNORKEL_TANGLE_ZOMBIE",a[a.CONE_HEAD_ZOMBIE3=111]="CONE_HEAD_ZOMBIE3",a[a.SNORKEL_SHARK_ZOMBIE=170]="SNORKEL_SHARK_ZOMBIE",a[a.SHARK_ZOMBIE=112]="SHARK_ZOMBIE",a[a.Nut_Zombie1=133]="Nut_Zombie1",a[a.Nut_Zombie1_Conehead=134]="Nut_Zombie1_Conehead",a[a.Nut_Zombie1_Bucket=135]="Nut_Zombie1_Bucket",a[a.SCREEN_DOOR_NUT=136]="SCREEN_DOOR_NUT",a[a.Nut_Zombie2=137]="Nut_Zombie2",a[a.Nut_Zombie2_Conehead=138]="Nut_Zombie2_Conehead",a[a.Nut_Zombie2_Bucket=139]="Nut_Zombie2_Bucket",a[a.SCREEN_DOOR_HOLE=140]="SCREEN_DOOR_HOLE",a[a.JALAPENO_ZOMBIEZJ=141]="JALAPENO_ZOMBIEZJ",a[a.JALAPENO_CONE_ZOMBIEZJ=142]="JALAPENO_CONE_ZOMBIEZJ",a[a.JALAPENO_SCREEN_ZOMBIEZJ=143]="JALAPENO_SCREEN_ZOMBIEZJ",a[a.JALAPENO_BUCKET_ZOMBIEZJ=144]="JALAPENO_BUCKET_ZOMBIEZJ",a[a.DANCING_ZOMBIE2=108]="DANCING_ZOMBIE2",a[a.DANCING_ZOMBIE3=109]="DANCING_ZOMBIE3",a[a.BACKUP_DANCER2=110]="BACKUP_DANCER2",a[a.DANCINGNARUTO_ZOMBIE3=191]="DANCINGNARUTO_ZOMBIE3",a[a.BACKUPNARUTO_DANCER2=171]="BACKUPNARUTO_DANCER2",a[a.JACK_ZOMBIE2=115]="JACK_ZOMBIE2",a[a.BALLOON_ZOMBIE2=116]="BALLOON_ZOMBIE2",a[a.CATAPULT_ZOMBIE2=124]="CATAPULT_ZOMBIE2",a[a.GARGANTUAR2=125]="GARGANTUAR2",a[a.GARGANTUAR3=126]="GARGANTUAR3",a[a.GARGANTUAR4=127]="GARGANTUAR4",a[a.RED_GARGANTUAR2=154]="RED_GARGANTUAR2",a[a.RED_GARGANTUAR3=155]="RED_GARGANTUAR3",a[a.RED_GARGANTUAR4=156]="RED_GARGANTUAR4",a[a.ZOMBONI2=103]="ZOMBONI2",a[a.ZOMBONI3=113]="ZOMBONI3",a[a.DIGGERFOOTBALL_ZOMBIE2=117]="DIGGERFOOTBALL_ZOMBIE2",a[a.POGO_ZOMBIE2=118]="POGO_ZOMBIE2",a[a.POGO_ZOMBIE3=119]="POGO_ZOMBIE3",a[a.ZOMBONIYeti=120]="ZOMBONIYeti",a[a.LADDER_ZOMBIE2=121]="LADDER_ZOMBIE2",a[a.LADDER_ZOMBIE3=122]="LADDER_ZOMBIE3",a[a.LADDER_ZOMBIE4=123]="LADDER_ZOMBIE4",a[a.BedCar=164]="BedCar",a[a.NightWear=165]="NightWear",a[a.PeaZombie=129]="PeaZombie",a[a.PeaZombie2=130]="PeaZombie2",a[a.PeaZombie3=131]="PeaZombie3",a[a.PeaZombie4=132]="PeaZombie4",a[a.SKELETON_ZOMBIE=157]="SKELETON_ZOMBIE",a[a.NECROMANCER_ZOMBIE=158]="NECROMANCER_ZOMBIE",a[a.DANCING_FIRE_ZOMBIE=159]="DANCING_FIRE_ZOMBIE",a[a.BACKUP_FIRE_DANCER=160]="BACKUP_FIRE_DANCER",a[a.YELLOW_DUCK_ZOMBIE=161]="YELLOW_DUCK_ZOMBIE",a[a.YELLOW_DUCK_ZOMBIE2=162]="YELLOW_DUCK_ZOMBIE2",a[a.YELLOW_DUCK_ZOMBIE3=163]="YELLOW_DUCK_ZOMBIE3",a[a.SUNFLOWER_ZOMBIE=166]="SUNFLOWER_ZOMBIE",a[a.DUCK_SWIMMING_CIRCLE=1610]="DUCK_SWIMMING_CIRCLE"}(e.pzaZombieEnum||(e.pzaZombieEnum={})),function(a){a[a.Null=0]="Null",a[a.Gargantuar=1]="Gargantuar",a[a.IceCar=2]="IceCar",a[a.Ladder=3]="Ladder"}(e.pzaZombieCate||(e.pzaZombieCate={})),function(a){a[a.Null=0]="Null",a[a.PENETRATE_HURT=1]="PENETRATE_HURT"}(e.pzaZombieHurtCate||(e.pzaZombieHurtCate={})),function(a){a[a.INTACT=0]="INTACT",a[a.HURT=1]="HURT",a[a.DYING=2]="DYING",a[a.DEAD=3]="DEAD",a[a.HURTCHARM=4]="HURTCHARM"}(e.pzaHurtStateEnum||(e.pzaHurtStateEnum={})),function(a){a[a.NO_EQUIP=0]="NO_EQUIP",a[a.NORMAL_EQUIP=1]="NORMAL_EQUIP",a[a.IRON_EQUIP=2]="IRON_EQUIP"}(e.pzaEquipType||(e.pzaEquipType={})),cc._RF.pop()},{}],pzaZombieHandbookView:[function(a,t,e){"use strict";cc._RF.push(t,"52c7fSRVGhMCbajYpKgtYzJ","pzaZombieHandbookView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieHandbookView=void 0;var r=a("../Battle/Data/pzaZombieEnum"),p=a("../Battle/Zombie/pzaBaseZombie"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaGameConfig"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaSoundManager"),d=a("../Load/pzaBundleObjectPool"),h=a("../Load/pzaPreLoadManager"),m=a("./pzaZombiebookCard"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardPrefab=null,t.cardContent=null,t.zombieName=null,t.zombieDesc=null,t.zombieProp=null,t.special=null,t.bg=null,t.bg2=null,t.txtScroll=null,t.zJtxtScroll=null,t.zombieAniNode=null,t.shadow=null,t.cardScroll=null,t.title=null,t.curZombie=null,t.zombieCardList=null,t.zombieAni=null,t.closeCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.zombieCardList=[];for(var a=r.pzaZombieEnum.ZOMBIE;a<=r.pzaZombieEnum.Mac_GARGANTUAR;a++)if(a!=r.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE&&a!=r.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE&&a!=r.pzaZombieEnum.RED_GARGANTUAR&&a!=r.pzaZombieEnum.ZOMBIE_BOBSLED&&a!=r.pzaZombieEnum.IMP_MINI&&a!=r.pzaZombieEnum.NormalPeaZombie&&a!=r.pzaZombieEnum.Nut_Zombie&&a!=r.pzaZombieEnum.Mac_GARGANTUAR){var t=l.pzaGameCommonPool.requestInstant(this.cardPrefab);t.setParent(this.cardContent);var e=t.getComponent(m.pzaZombiebookCard);null!=e&&(e.bindData(a,this.showZombie.bind(this)),this.zombieCardList.push(e))}this.txtScroll.node.active=!0,this.zJtxtScroll.node.active=!1,this.curZombie=null,this.showZombie(r.pzaZombieEnum.ZOMBIE),this.cardScroll.scrollToTop(),this.title.string="\u7ecf\u5178\u7248-\u50f5\u5c38"},t.prototype.onDisable=function(){null!=this.zombieCardList&&this.zombieCardList.forEach(function(a){a&&a.close()}),this.zombieCardList=null,null!=this.zombieAni&&(this.zombieAni.close(),this.zombieAni=null)},t.prototype.bindCloseCall=function(a){this.closeCall=a},t.prototype.showZombie=function(a){var t=this;if(this.curZombie!=a){this.shadow.active=!1,null!=this.zombieAni&&(this.zombieAni.close(),this.zombieAni=null),this.curZombie=a;var e=s.pzaGameConfig.getZombieConfig(a),o=s.pzaGameConfig.ZombieBookMap.get(a);if(null!=e&&null!=o){if(this.zombieName.string=e.name,c.pzaLocalData.hasUnlockZombie(a))this.zombieDesc.node.active=null!=o.desc,null!=o.desc&&(this.zombieDesc.string=o.desc),this.zombieProp.node.active=null!=o.prop,null!=o.prop&&(this.zombieProp.string=o.prop),this.special.active=o.special,this.bg.node.active=null!=o.bg,null!=o.bg&&(this.bg.string=o.bg),this.bg2.node.active=null!=o.bg2,null!=o.bg2&&(this.bg2.string=o.bg2);else if(this.zombieDesc.node.active=!0,this.zombieDesc.string="(\u672a\u9047\u5230)",this.zombieProp.node.active=!1,this.special.active=!1,this.bg.node.active=!1,this.bg2.node.active=!1,a==r.pzaZombieEnum.YETI_ZOMBIE)return this.zombieName.string="\uff1f\uff1f\uff1f",void this.txtScroll.scrollToTop();this.txtScroll.scrollToTop(),a==r.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&(a=r.pzaZombieEnum.ZOMBIE_BOBSLED);var n=h.pzaPreLoadManager.getZombieUrl(a);d.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(e,o){if(null==e&&null!=o){o.setParent(t.zombieAniNode),o.zIndex=0;var n=-75;a==r.pzaZombieEnum.BALLOON_ZOMBIE?(o.setPosition(cc.v2(0,-100)),n=-80):a==r.pzaZombieEnum.BUNGEE_ZOMBIE?o.setPosition(cc.v2()):a==r.pzaZombieEnum.CATAPULT_ZOMBIE?o.setPosition(cc.v2(-65,-70)):a==r.pzaZombieEnum.DR_ZOMBOSS?o.setPosition(cc.v2(300,-166)):a==r.pzaZombieEnum.GARGANTUAR?(o.setPosition(cc.v2(0,-140)),n=-110):a==r.pzaZombieEnum.SNORKEL_ZOMBIE?o.setPosition(cc.v2(0,-90)):a==r.pzaZombieEnum.ZOMBONI?(o.scale=.8,o.setPosition(cc.v2(-35,-100))):a==r.pzaZombieEnum.Mac_GARGANTUAR?o.setPosition(cc.v2(0,-140)):o.setPosition(cc.v2(0,-70)),null!=t.zombieAni&&t.zombieAni.close(),t.zombieAni=o.getComponent(p.pzaBaseZombie),null!=t.zombieAni&&(t.zombieAni.uiShow(),a==r.pzaZombieEnum.ZOMBONI&&(o.scale=.8),t.zombieAni.needShadow&&(t.shadow.active=!0,t.shadow.setPosition(cc.v2(0+t.zombieAni.shadowOffset.x,n+t.zombieAni.shadowOffset.y))))}else console.error(e)})}}},t.prototype.clickBack=function(){u.pzaSoundManager.playSFX(),this.close()},t.prototype.clickClose=function(){u.pzaSoundManager.playSFX(),this.close(),this.closeCall&&this.closeCall()},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([y({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cardPrefab",void 0),i([y({displayName:"\u5361\u7247\u5bb9\u5668",type:cc.Node})],t.prototype,"cardContent",void 0),i([y({displayName:"\u50f5\u5c38\u540d\u79f0",type:cc.Label})],t.prototype,"zombieName",void 0),i([y({displayName:"\u50f5\u5c38\u4ecb\u7ecd",type:cc.Label})],t.prototype,"zombieDesc",void 0),i([y({displayName:"\u50f5\u5c38\u5c5e\u6027",type:cc.RichText})],t.prototype,"zombieProp",void 0),i([y({displayName:"\u7279\u6b8a",type:cc.Node})],t.prototype,"special",void 0),i([y({displayName:"\u80cc\u666f\u63cf\u8ff0",type:cc.Label})],t.prototype,"bg",void 0),i([y({displayName:"\u80cc\u666f\u63cf\u8ff02",type:cc.Label})],t.prototype,"bg2",void 0),i([y({displayName:"\u6587\u672cScroll",type:cc.ScrollView})],t.prototype,"txtScroll",void 0),i([y({displayName:"\u6742\u4ea4\u6587\u672cScroll",type:cc.ScrollView})],t.prototype,"zJtxtScroll",void 0),i([y({displayName:"\u50f5\u5c38\u52a8\u753b\u8282\u70b9",type:cc.Node})],t.prototype,"zombieAniNode",void 0),i([y({displayName:"\u50f5\u5c38\u5f71\u5b50",type:cc.Node})],t.prototype,"shadow",void 0),i([y({displayName:"\u5361\u7247Scroll",type:cc.ScrollView})],t.prototype,"cardScroll",void 0),i([y({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"title",void 0),i([z],t)}(cc.Component);e.pzaZombieHandbookView=g,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaZombiebookCard":"pzaZombiebookCard"}],pzaZombieHoleEffect:[function(a,t,e){"use strict";cc._RF.push(t,"d33deKSlFRFybS19vmriGEy","pzaZombieHoleEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieHoleEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../Data/pzaZombieEnum"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hole=null,t.holeFrames=[],t.holeTime=0,t.holeStep=1,t.mapXIndex=-1,t.mapYIndex=-1,t}return n(t,a),t.prototype.init=function(a,t){this.mapXIndex=a,this.mapYIndex=t,this.holeTime=0,this.holeStep=1,this.showHole(),window.pzaMapManager.ZombieHoleSet.add(this)},t.prototype.recover=function(a,t,e,o){this.mapXIndex=a,this.mapYIndex=t,this.holeTime=e,this.holeStep=o,this.showHole(),window.pzaMapManager.ZombieHoleSet.add(this)},t.prototype.logicUpdate=function(a){if(this.holeTime+=a,this.holeTime>=30)return this.close(),void this.createSkeleton();this.holeTime>=15&&1==this.holeStep&&(this.holeStep=2,this.showHole())},t.prototype.createSkeleton=function(){var a,t;a=this.mapXIndex,t=this.mapYIndex;var e=p.pzaZombieEnum.SKELETON_ZOMBIE,o=window.pzazombieManager.createFixBlockZombieData(e,a,t);o.zombieData.isHoleCreate=!0,window.pzazombieManager.createZombie(o,!1,!0),window.pzazombieManager.curWaveZombieDatas.add(o)},t.prototype.showHole=function(){this.hole.spriteFrame=1==this.holeStep?this.holeFrames[0]:this.holeFrames[1],window.pzaplantManager.holeMap.set(""+this.mapXIndex+this.mapYIndex,1)},t.prototype.clearHole=function(){this.holeTime=0,this.close()},t.prototype.close=function(){a.prototype.close.call(this),window.pzaMapManager.ZombieHoleSet.delete(this),window.pzaplantManager.holeMap.delete(""+this.mapXIndex+this.mapYIndex)},i([c({displayName:"\u6d1e",type:cc.Sprite})],t.prototype,"hole",void 0),i([c({displayName:"\u6d1e\u56fe",type:[cc.SpriteFrame]})],t.prototype,"holeFrames",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaZombieHoleEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../Data/pzaZombieEnum":"pzaZombieEnum"}],pzaZombieManager:[function(a,t,e){"use strict";cc._RF.push(t,"3114bnqbzFBEqjH2YiD/Eos","pzaZombieManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieManager=void 0;var r=a("../Achieve/pzaAchieve"),p=a("../Achieve/pzaAchieveMgr"),l=a("../Common/pzaCollisionManager"),s=a("../Common/pzaGameConfig"),c=a("../Common/pzaGameManager"),u=a("../Common/pzaGamePartConfig"),d=a("../Common/pzaGroupEnum"),h=a("../Common/pzaLocalData"),m=a("../Common/pzaNodeManager"),f=a("../Common/pzaSoundManager"),z=a("../Common/pzaStatisticsMgr"),y=a("../Common/pzaUIManager"),g=a("../Common/pzaUtil"),b=a("../Common/pzaWorldEventManager"),v=a("../Common/pzaZJZombieConf"),P=a("../Load/pzaBundleObjectPool"),D=a("../Load/pzaPreLoadManager"),S=a("../View/Battle/pzaNewPlantView"),C=a("../utils/pzakc"),_=a("./Data/pzaBaseData"),E=a("./Data/pzaBuffData"),M=a("./Data/pzaDropType"),w=a("./Data/pzaGuideType"),T=a("./Data/pzaZombieEnum"),B=a("./Zombie/pzaBaseZombie"),A=a("./Zombie/pzaDrZomBoss"),O=a("./pzaEffectManager"),I=a("./pzaGameState"),N=a("./pzaSpineTool"),G=a("../Garden/pzaGardenMgr"),R=cc._decorator,L=R.ccclass,k=R.property,Z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.atlasSpine=null,t.zombieDatas=[new Set,new Set,new Set,new Set,new Set,new Set],t.zombieMap=new Map,t.hypnoZombieMap=new Map,t.curWaveZombieDatas=new Set,t.lastZombieDataMap=new Map,t.drZomBoss=null,t.wave=0,t.lastWave=!1,t.nextWaveTime=u.pzaWaveConfig.firstWaveTime,t.curWaveTime=0,t.preRefreshHp=0,t.hasShowRedTip=!1,t.specialNextWaveTime=0,t.lastWayZombieTime=0,t.zombieModeCheckTime=0,t}return n(t,a),t.prototype.onLoad=function(){window.pzazombieManager=this,N.pzaSpineTool.instance().init(this.atlasSpine),this.atlasSpine.node.y=3e3},t.prototype.init=function(){this.zombieDatas.forEach(function(a){a&&a.clear()}),this.zombieMap.clear(),this.hypnoZombieMap.clear(),this.curWaveZombieDatas.clear(),this.lastZombieDataMap.clear(),this.drZomBoss=null,this.wave=0,this.nextWaveTime=u.pzaWaveConfig.firstWaveTime,this.curWaveTime=0,this.preRefreshHp=0,this.hasShowRedTip=!1,this.lastWave=!1,this.specialNextWaveTime=0,this.lastWayZombieTime=0},t.prototype.logicUpdate=function(a){I.pzaGameState.guideZombiePause||(this.refreshWaveZombie(a),this.lastWayZombieTime>0&&(this.lastWayZombieTime-=a,this.lastWayZombieTime<=0&&this.lastTombWaterZombie()))},t.prototype.refreshWaveZombie=function(a){c.pzaGameManager.getCurrentGame().refreshNextWave(this,a)},t.prototype.lastTombWaterZombie=function(){c.pzaGameManager.getCurrentGame().lastTombWaterZombie(this)},t.prototype.createMiniBungee=function(a,t){for(var e=[],o=a-1;o<9;o++)e.push([o,0]),e.push([o,1]),e.push([o,2]),e.push([o,3]),e.push([o,4]);e.sort(function(){return Math.random()-.5});for(var n=0;n<t;n++){var i=e[n];if(null!=i){var r=window.pzazombieManager.createFixBlockZombieData(T.pzaZombieEnum.ZOMBIE,i[0],i[1]);this.zombieDatas[i[1]].delete(r),O.pzaEffectManager.createBungeeZombieEffect(r),this.curWaveZombieDatas.add(r)}}},t.prototype.createBungeePutZombie=function(a,t){if(null!=t){for(var e=[],o=a-1;o<9;o++)e.push([o,0]),e.push([o,1]),e.push([o,2]),e.push([o,3]),e.push([o,4]);e.sort(function(){return Math.random()-.5});for(var n=0;n<t.length;n++){var i=e[n],r=t[n];if(null!=i&&null!=r){if(r==T.pzaZombieEnum.GARGANTUAR||r==T.pzaZombieEnum.RED_GARGANTUAR){var p=[5,6,7,8],l=Math.floor(Math.random()*p.length);i[0]=p[l]}var s=window.pzazombieManager.createFixBlockZombieData(r,i[0],i[1]);this.zombieDatas[i[1]].delete(s),this.curWaveZombieDatas.add(s),O.pzaEffectManager.createBungeeZombieEffect(s)}}}},t.prototype.createZombie=function(a,t,e,o,n,i,r){var p=this;if(void 0===t&&(t=!0),void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===n&&(n=null),void 0===i&&(i=!0),void 0===r&&(r=!1),null!=a&&null!=a.zombieData){var l=m.pzaNodeManager.getPlantZombieNode();if(null!=l){var c=a.zombieData.zombieType,u=D.pzaPreLoadManager.getZombieUrl(c);h.pzaLocalData.unlockZombie(c),P.pzaBundleObjectPool.requestInstantByUrl(u,!1,function(t,i){if(null==t&&null!=i){i.setParent(l),i.setPosition(a.logicPos);var u=i.getComponent(B.pzaBaseZombie);null!=u&&(I.pzaGameState.isSmallGame()?u.setZombieScale(s.pzaGameConfig.miniZombieScale):u.setZombieScale(1),r?u.bindData(a,!0):u.bindData(a),e&&u.breakDirt(n),o&&u.breakWater(n),p.zombieMap.set(a,u))}else console.error(t,"\u50f5\u5c38\u52a0\u8f7d\u5931\u8d25",c)}),t&&b.pzaWorldEventManager.triggerEvent(b.pzaWorldEventType.GROVE_SHAKE,a.yIndex),e&&i&&(f.pzaSoundManager.playAudio("tombzombie"),O.pzaEffectManager.createDirtEffect("idle3",a.yIndex,a.logicPos,null)),o&&(f.pzaSoundManager.playAudio("zombie_entering_water"),O.pzaEffectManager.createWaterFlowerEffect(a.yIndex,a.logicPos,null))}}},t.prototype.createHypnZombie=function(a,t){var e=this;if(void 0===t&&(t=null),null!=a&&null!=a.zombieData){var o=m.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=a.zombieData.zombieType,i=D.pzaPreLoadManager.getZombieUrl(n);a.buffData.addBuff(new E.pzaBuffInfo(E.pzaBuffType.IMM_CONTROL,-1)),P.pzaBundleObjectPool.requestInstantByUrl(i,!1,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(a.logicPos);var r=i.getComponent(B.pzaBaseZombie);null!=r&&(I.pzaGameState.isSmallGame()?r.setZombieScale(s.pzaGameConfig.miniZombieScale):r.setZombieScale(1),r.bindData(a),r.body.node.group=d.pzaGroupEnum.PLANT,t&&r.breakDirt(t),e.hypnoZombieMap.set(a,r),l.pzaCollisionManager.getInstance.zombieToPlant(a.yIndex,r.body))}else console.error(n)})}}},t.prototype.createDrZomBoss=function(a,t){var e=this;void 0===t&&(t=0);var o=T.pzaZombieEnum.DR_ZOMBOSS,n=s.pzaGameConfig.getZombieConfig(o),i=new _.pzaBaseData(null,o);i.hp=i.maxHp=t>0?t:n.hp,i.atk=n.atk,i.logicPos=cc.v2(655,-20);var r=m.pzaNodeManager.getPlantZombieNode();if(null!=r){var p=D.pzaPreLoadManager.getZombieUrl(o);h.pzaLocalData.unlockZombie(o),P.pzaBundleObjectPool.requestInstantByUrl(p,!1,function(t,o){if(null==t&&null!=o){o.setParent(r),o.setPosition(i.logicPos);var n=o.getComponent(A.pzaDrZomBoss);null!=n&&(n.bindData(i),n.playEnterAni(a),e.drZomBoss=n)}else console.error(t)})}},t.prototype.playerPutZombie=function(a,t,e){var o=this.createFixBlockZombieData(e,a,t,!0);o.zombieData.direction=1,window.pzazombieManager.createHypnZombie(o);var n=window.pzaMapManager.getPlantBlockType(a,t);if(O.pzaEffectManager.createPlantEffect(o.logicPos,n,null),I.pzaGameState.selectCard==I.pzaSelectCardType.DROP_CARD){var i=null;return window.pzaplantManager.dropZombieCards.forEach(function(a){a&&a.plant()&&(i=a)}),void window.pzaplantManager.dropZombieCards.delete(i)}},t.prototype.hasCanAttackZombie=function(a,t,e){if(void 0===e&&(e=!1),null==a||null==a.logicPos)return!1;var o=!1;return this.zombieDatas[a.yIndex].forEach(function(n){!n||!n.logicPos||n.logicPos.x<a.logicPos.x||!e&&n.buffData.hasBuff(E.pzaBuffType.DIVE)||n.buffData.hasBuff(E.pzaBuffType.FLY)||n.buffData.hasBuff(E.pzaBuffType.UNABLE_SELECT)||t&&(n.xIndex<=-1||a.xIndex+t<n.xIndex)||(o=!0)}),o||(o=this.findDrZomBoss()),o},t.prototype.hasWildShootCanAttackZombie=function(a,t){if(null==a||null==a.logicPos)return!1;for(var e=!1,o=a.yIndex-1;o<=a.yIndex+1;o++)o<0||o>=I.pzaGameState.map.getMapRow()||this.zombieDatas[o].forEach(function(o){!o||!o.logicPos||o.logicPos.x<a.logicPos.x||o.buffData.hasBuff(E.pzaBuffType.DIVE)||o.buffData.hasBuff(E.pzaBuffType.FLY)||o.buffData.hasBuff(E.pzaBuffType.UNABLE_SELECT)||t&&(o.xIndex<=-1||a.xIndex+t<o.xIndex)||(e=!0)});return e||(e=this.findDrZomBoss()),e},t.prototype.hasCanAttackBackZombie=function(a,t){if(null==a||null==a.logicPos)return!1;var e=!1;return this.zombieDatas[a.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x>a.logicPos.x||o.buffData.hasBuff(E.pzaBuffType.DIVE)||o.buffData.hasBuff(E.pzaBuffType.FLY)||o.buffData.hasBuff(E.pzaBuffType.UNABLE_SELECT)||t&&(o.xIndex<=-1||a.xIndex+t>o.xIndex)||(e=!0)}),e||(e=this.findDrZomBoss()),e},t.prototype.hasZombieInBlock=function(a){if(null==a||null==a.logicPos)return!1;var t=!1;return this.zombieDatas[a.yIndex].forEach(function(e){e&&e.logicPos&&e.xIndex!=a.xIndex||(t=!0)}),t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null!=a&&null!=a.baseData&&!a.baseData.isDead&&!a.baseData.buffData.hasBuff(E.pzaBuffType.UNABLE_SELECT)},t.prototype.getCanAttackZombies=function(a,t,e){if(void 0===e&&(e=!1),null==a||null==a.logicPos)return null;var o=[];return this.zombieDatas[a.yIndex].forEach(function(n){!n||!n.logicPos||n.logicPos.x<a.logicPos.x||0==e&&n.buffData.hasBuff(E.pzaBuffType.DIVE)||n.buffData.hasBuff(E.pzaBuffType.FLY)||n.buffData.hasBuff(E.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(E.pzaBuffType.INVINCIBLE)||t&&(n.xIndex<=-1||a.xIndex+t<n.xIndex)||o.push(n)}),this.canJoinDrZomBoss(a)&&o.push(this.canJoinDrZomBoss(a)),o},t.prototype.getCanAttackBackZombies=function(a,t){if(null==a||null==a.logicPos)return null;var e=[];return this.zombieDatas[a.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x>a.logicPos.x||o.buffData.hasBuff(E.pzaBuffType.DIVE)||o.buffData.hasBuff(E.pzaBuffType.FLY)||o.buffData.hasBuff(E.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(E.pzaBuffType.INVINCIBLE)||t&&(o.xIndex<=-1||a.xIndex-t>o.xIndex)||e.push(o)}),this.canJoinDrZomBoss(a)&&e.push(this.canJoinDrZomBoss(a)),e},t.prototype.canJoinDrZomBoss=function(a){if(a.xIndex<5)return null;var t=window.pzazombieManager.drZomBoss;return null==t||null==t.baseData||t.baseData.isDead||t.baseData.buffData.hasBuff(E.pzaBuffType.UNABLE_SELECT)?null:t.baseData},t.prototype.getZombie=function(a){return null!=this.drZomBoss&&this.drZomBoss.baseData==a?this.drZomBoss:this.zombieMap.get(a)},t.prototype.getHypnoZombie=function(a){return this.hypnoZombieMap.get(a)},t.prototype.findFixRangeZombies=function(a,t){if(null==a)return null;var e=[];return this.zombieMap.forEach(function(o,n){null==o||null==n||n.isDead||null==n.logicPos||g.pzaUtil.getDistance(a,n.logicPos)<=t&&e.push(o)}),e},t.prototype.findZombiesByXY=function(a,t,e){void 0===e&&(e=1);var o=[];return this.zombieMap.forEach(function(n,i){null==n||null==i||i.isDead||null==i.logicPos||i.xIndex<0||i.xIndex>=a-e&&i.xIndex<=a+e&&i.yIndex>=t-e&&i.yIndex<=t+e&&o.push(n)}),o},t.prototype.findFixNearestZombie=function(a,t,e){if(null==t)return null;var o=null,n=-1;return this.zombieDatas[a].forEach(function(a){if(a&&a.logicPos&&!(a.logicPos.x<t.x)&&!a.buffData.hasBuff(E.pzaBuffType.FLY)&&!a.buffData.hasBuff(E.pzaBuffType.UNABLE_SELECT)){var i=g.pzaUtil.getDistance(a.logicPos,t);if(!(i>e))return-1==n?(o=a,void(n=i)):void(n<=i||(o=a,n=i))}}),o},t.prototype.findFixNearestHypnoZombie=function(a,t,e){if(null==t)return null;var o=null,n=-1;return this.hypnoZombieMap.forEach(function(i,r){if(r&&r.logicPos&&r.yIndex==a&&!(r.logicPos.x>t.x)){var p=g.pzaUtil.getDistance(r.logicPos,t);if(!(p>e))return-1==n?(o=r,void(n=p)):void(n<=p||(o=r,n=p))}}),o},t.prototype.findAllZombies=function(){var a=[];return this.zombieMap.forEach(function(t,e){null==t||null==e||e.isDead||a.push(t)}),a},t.prototype.showBigWaveTip=function(a,t){this.hasShowRedTip||(this.hasShowRedTip=!0,this.nextWaveTime=u.pzaWaveConfig.redTipNextWaveTime,O.pzaEffectManager.createLargeWord(a,t))},t.prototype.specialBigWaveTip=function(){this.hasShowRedTip||(this.hasShowRedTip=!0,this.nextWaveTime=u.pzaWaveConfig.redTipNextWaveTime)},t.prototype.zombieDeath=function(a,t,e){if(void 0===t&&(t=!0),void 0===e&&(e=null),null!=a){this.zombieMap.delete(a);var o=this.zombieDatas[a.yIndex];null!=o&&o.delete(a),a.zombieData.hypnosis||(a.hp=0),I.pzaGameState.isGameEnd||c.pzaGameManager.getCurrentGame().onZombieDeath(this,a,t,e)}},t.prototype.skipPassPart=function(){var a=0;h.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-h.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3);var e=5*(I.pzaGameState.curChapter-1)+I.pzaGameState.curPart;z.pzaStatisticsMgr.sendLevelEvent(e,1,a,t,I.pzaGameMode.NORMAL),C.default.eventReport(e+"\u5173\u5361\u6210\u529f"),h.pzaLocalData.hasUseProp=!1,h.pzaLocalData.data.autoPickLeft=I.pzaGameState.autoPickLeft,h.pzaLocalData.addDirty("autoPickLeft"),I.pzaGameState.gameWin=!0,I.pzaGameState.lossPlantCount=10,I.pzaGameState.lossCar=!0,0!=I.pzaGameState.partStar&&(I.pzaGameState.partStar=1),h.pzaLocalData.passPart(I.pzaGameState.curChapter,I.pzaGameState.curPart,I.pzaGameState.partStar),5==I.pzaGameState.curChapter&&10==I.pzaGameState.curPart&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_1),10==I.pzaGameState.curChapter&&10==I.pzaGameState.curPart&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_24);var o=s.pzaGameConfig.getPartDrop(I.pzaGameState.curChapter,I.pzaGameState.curPart);switch(3==I.pzaGameState.curChapter&&4==I.pzaGameState.curPart?(h.pzaLocalData.data.curGuideType=w.pzaGuideType.GUIDE_SHOP_3_4,h.pzaLocalData.data.unlockShop=!0,h.pzaLocalData.addDirty("curGuideType","unlockShop")):4==I.pzaGameState.curChapter&&4==I.pzaGameState.curPart?(h.pzaLocalData.data.curGuideType=w.pzaGuideType.GUIDE_SHOP_4_4,h.pzaLocalData.addDirty("curGuideType")):5==I.pzaGameState.curChapter&&1==I.pzaGameState.curPart?(h.pzaLocalData.data.curGuideType=w.pzaGuideType.GUIDE_SHOP_5_1,h.pzaLocalData.addDirty("curGuideType")):5==I.pzaGameState.curChapter&&4==I.pzaGameState.curPart&&(h.pzaLocalData.data.curGuideType=w.pzaGuideType.GUIDE_GARDEN_5_4,h.pzaLocalData.data.unlockGarden=!0,h.pzaLocalData.addDirty("curGuideType","unlockGarden")),o){case M.pzaDropType.PLANT_CARD:var n=I.pzaGameState.curChapter+"-"+I.pzaGameState.curPart,i=s.pzaGameConfig.newPlantDropMap.get(n);h.pzaLocalData.data.ownPlants.push(i),h.pzaLocalData.addDirty("ownPlants"),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_4,h.pzaLocalData.data.ownPlants.length,!1),y.pzaUIManager.baseShowPopUI(D.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(S.pzaNewPlantView)).showView(o,i)});break;case M.pzaDropType.HAND_BOOK:h.pzaLocalData.data.unlockBook=!0,h.pzaLocalData.addDirty("unlockBook"),y.pzaUIManager.baseShowPopUI(D.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(S.pzaNewPlantView)).showView(o,null)});break;case M.pzaDropType.CG_PAPER:y.pzaUIManager.baseShowPopUI(D.pzaResourceUrl.CG_PAPER_VIEW,null);break;case M.pzaDropType.COIN_PACKAGE:I.pzaGameState.curChapter<5||(s.pzaGameConfig.getPartStar(I.pzaGameState.curChapter,I.pzaGameState.curPart)<=0?(b.pzaWorldEventManager.triggerEvent(b.pzaWorldEventType.GAME_OVER,null),c.pzaGameManager.removeBattleUI(),c.pzaGameManager.getCurrentGame().showPassUiNoStar(),g.pzaUtil.changeGameSpeed(1)):(y.pzaUIManager.baseShowPopUI(D.pzaResourceUrl.GAME_WIN_VIEW,null),g.pzaUtil.changeGameSpeed(1)));break;case M.pzaDropType.SHOVEL:case M.pzaDropType.BACONIC:case M.pzaDropType.TACO:case M.pzaDropType.SURVIVAL_TROPHY:y.pzaUIManager.baseShowPopUI(D.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(S.pzaNewPlantView)).showView(o,null)});break;case M.pzaDropType.SPRINKLER:G.default.instance().addGardenTool(G.pzaGardenToolType.waterPot,1),y.pzaUIManager.baseShowPopUI(D.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(S.pzaNewPlantView)).showView(o,null)});break;default:c.pzaGameManager.getCurrentGame().partWin()}h.pzaLocalData.bpPassPart()},t.prototype.hypnoZombieDeath=function(a){this.hypnoZombieMap.delete(a),a.hp=0},t.prototype.zombieHypnosis=function(a){if(null!=a&&null!=a.zombieData){a.zombieData.direction=1,a.zombieData.hypnosis=!0;var t=this.zombieMap.get(a);null!=t&&(this.hypnoZombieMap.set(a,t),l.pzaCollisionManager.getInstance.zombieToPlant(a.yIndex,t.body)),this.zombieDeath(a)}},t.prototype.zombieChangeMapRow=function(a,t,e){null!=t&&null!=e&&(this.zombieDatas[t.yIndex].delete(t),this.zombieDatas[e].add(t),l.pzaCollisionManager.getInstance.zombieChangeRow(a,t.yIndex,e),t.yIndex=e)},t.prototype.getCurWaveLeftHp=function(){var a=0,t=0;return this.curWaveZombieDatas.forEach(function(e){null!=e&&(t+=e.maxHp,e.zombieData.hypnosis||(a+=e.hp))}),0==t?0:a/t},t.prototype.createZombieData=function(a,t){var e=s.pzaGameConfig.getZombieConfig(a),o=new _.pzaBaseData(null,a);o.hp=o.maxHp=e.hp,o.atk=e.atk,o.zombieData.equipHp=o.zombieData.maxEquipHp=e.equipHp,o.zombieData.direction=-1,o.zombieData.initMSpd=o.zombieData.moveSpd=I.pzaGameState.map.getBlockWidth()/e.speed,o.zombieData.equipType=e.equipType,o.zombieData.toolType=e.toolType,e instanceof v.pzaZJZombieConf&&(o.zombieData.typeId=e.typeId,o.zombieData.showWeight=e.showWeight,o.zombieData.equipType2=e.equipType2,o.zombieData.equipHp2=o.zombieData.maxEquipHp2=e.equipHp2,o.zombieData.atkArr=e.atkArr,o.zombieData.atkInterval2=e.atkInterval2,I.pzaGameState.isSmallGame()&&(o.zombieData.equipHp2=o.zombieData.maxEquipHp2=e.equipHp2*s.pzaGameConfig.miniZombieHp)),I.pzaGameState.isSmallGame()&&(o.hp=o.maxHp=e.hp*s.pzaGameConfig.miniZombieHp,o.zombieData.equipHp=o.zombieData.maxEquipHp=e.equipHp*s.pzaGameConfig.miniZombieHp),o.yIndex=t;var n=I.pzaGameState.map.getMapColumn(),i=.1*I.pzaGameState.map.getYInterval(t),r=I.pzaGameState.map.getBlockLogicPos(n-1,t,0,i);return r.x=670,o.logicPos=r,this.zombieDatas[o.yIndex].add(o),o},t.prototype.createFixBlockZombieData=function(a,t,e,o){void 0===o&&(o=!1);var n=s.pzaGameConfig.getZombieConfig(a);I.pzaGameState.isZombieMode()&&a==T.pzaZombieEnum.IMP&&(n=s.pzaGameConfig.getZombieConfig(T.pzaZombieEnum.IMP_MINI));var i=new _.pzaBaseData(null,a);i.hp=i.maxHp=n.hp,i.atk=n.atk,i.zombieData.equipHp=i.zombieData.maxEquipHp=n.equipHp,i.zombieData.direction=-1,i.zombieData.initMSpd=i.zombieData.moveSpd=I.pzaGameState.map.getBlockWidth()/n.speed,i.zombieData.equipType=n.equipType,i.zombieData.toolType=n.toolType,n instanceof v.pzaZJZombieConf&&(i.zombieData.typeId=n.typeId,i.zombieData.showWeight=n.showWeight,i.zombieData.equipType2=n.equipType2,i.zombieData.equipHp2=i.zombieData.maxEquipHp2=n.equipHp2,i.zombieData.atkArr=n.atkArr,i.zombieData.atkInterval2=n.atkInterval2),I.pzaGameState.isSmallGame()&&(i.hp=i.maxHp=n.hp*s.pzaGameConfig.miniZombieHp,i.zombieData.equipHp=i.zombieData.maxEquipHp=n.equipHp),i.xIndex=t,i.yIndex=e;var r=I.pzaGameState.map.getXInterval(t)/2,p=.1*I.pzaGameState.map.getYInterval(e);a==T.pzaZombieEnum.BUNGEE_ZOMBIE&&(p=I.pzaGameState.map.getYInterval(e)/3+40);var l=I.pzaGameState.map.getBlockLogicPos(t,e,r,p);if(i.logicPos=l,o)i.zombieData.hypnosis=o;else{var c=this.zombieDatas[i.yIndex];c&&c.add(i)}return i},t.prototype.clearAllZombie=function(){this.zombieDatas.forEach(function(a){a&&a.clear()}),this.zombieMap.forEach(function(a,t){t&&(t.isDead=!0),a&&a.close()}),this.zombieMap.clear(),this.hypnoZombieMap.forEach(function(a,t){t&&(t.isDead=!0),a&&a.close()}),this.hypnoZombieMap.clear()},t.prototype.getZombieMapData=function(){var a=0;return this.zombieMap.forEach(function(t,e){18==e.zombieData.zombieType&&a++}),a},t.prototype.getJackHasToolAmt=function(){var a=0;return this.zombieMap.forEach(function(t,e){18==e.zombieData.zombieType&&2==e.zombieData.toolType&&a++}),a},i([k(sp.Skeleton)],t.prototype,"atlasSpine",void 0),i([L],t)}(cc.Component);e.pzaZombieManager=Z,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaCollisionManager":"pzaCollisionManager","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaGroupEnum":"pzaGroupEnum","../Common/pzaLocalData":"pzaLocalData","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Common/pzaZJZombieConf":"pzaZJZombieConf","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaNewPlantView":"pzaNewPlantView","../utils/pzakc":"pzakc","./Data/pzaBaseData":"pzaBaseData","./Data/pzaBuffData":"pzaBuffData","./Data/pzaDropType":"pzaDropType","./Data/pzaGuideType":"pzaGuideType","./Data/pzaZombieEnum":"pzaZombieEnum","./Zombie/pzaBaseZombie":"pzaBaseZombie","./Zombie/pzaDrZomBoss":"pzaDrZomBoss","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState","./pzaSpineTool":"pzaSpineTool"}],pzaZombieNut:[function(a,t,e){"use strict";cc._RF.push(t,"58ab3m2fwBPJYF5Ex3ehGOV","pzaZombieNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieNut=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaPlantEnum"),l=a("../Data/pzaZombieEnum"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spawnMaxTime=30,t.spawnTime=t.spawnMaxTime,t.blinkTime=8,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,this.spawnTime=this.spawnMaxTime,this.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=r.pzaUtil.getRandomFloatNum(8,10),e.animation.playAnimation("idle1_eye",!1,o))};this.animation.playAnimation("idle1",!1,o),o()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.spawnTime-=t,this.spawnTime<=0&&(this.spawnTime=this.spawnMaxTime,this.spawnZombie(l.pzaZombieEnum.SCREEN_DOOR_NUT))},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.spawnZombie(l.pzaZombieEnum.GARGANTUAR2,1800)},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.spawnZombie(l.pzaZombieEnum.GARGANTUAR2,1800)},t.prototype.steal=function(){this.spawnZombie(l.pzaZombieEnum.GARGANTUAR2,1800)},t.prototype.spawnZombie=function(a,t){void 0===t&&(t=0);var e=window.pzazombieManager.createFixBlockZombieData(a,this.baseData.xIndex,this.baseData.yIndex,!0);e.zombieData.direction=1,t&&(e.atk=t),window.pzazombieManager.createHypnZombie(e)},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([u],t)}(s.pzaBasePlant));e.pzaZombieNut=d,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaBasePlant":"pzaBasePlant"}],pzaZombiePeashooter:[function(a,t,e){"use strict";cc._RF.push(t,"eb175MHl9dMlYL21haNLpEt","pzaZombiePeashooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombiePeashooter=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaZombieEnum"),s=a("../pzaGameState"),c=a("./pzaPeashooter"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.createZombieTime=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.createZombieTime=30,s.pzaGameState.usePeaPlant=!0},t.prototype.playIdleAni=function(){var a=this,t=function(){window.pzazombieManager.hasCanAttackZombie(a.baseData)||a.findAttackTarget()?a.animation.playAnimation("attack",!1,t,function(){r.pzaSoundManager.playAudio("PeashooterAtk"),a.shoot()}):a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};t()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.createZombieTime>0&&(this.createZombieTime-=t,this.createZombieTime<=0&&(this.createZombie(),this.createZombieTime=30))},t.prototype.createZombie=function(){var a=window.pzazombieManager.createFixBlockZombieData(l.pzaZombieEnum.PeaZombie,this.baseData.xIndex,this.baseData.yIndex,!0);a.zombieData.direction=1,a.atk=this.baseData.atk,a.zombieData.canAtkZombie=!0,window.pzazombieManager.createHypnZombie(a)},i([d],t)}(c.pzaPeashooter));e.pzaZombiePeashooter=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaPeashooter":"pzaPeashooter"}],pzaZombieSelectView:[function(a,t,e){"use strict";cc._RF.push(t,"7618fDpLWdEeIIeX3WkhaY6","pzaZombieSelectView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieSelectView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameConfig"),l=a("./pzaZombieCard"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardList=[],t}return n(t,a),t.prototype.init=function(a){for(var t=0;t<this.cardList.length;t++){var e=this.cardList[t],o=a[t];if(null==o)e.bindData(null,null,null);else{var n=p.pzaGameConfig.getZombieConfig(o).price;e.bindData(o,n,this.clickCardCall.bind(this))}}},t.prototype.clickCardCall=function(a){r.pzaGameState.selectZombie==a&&(r.pzaGameState.selectCard=null,r.pzaGameState.selectZombie=null,a=null),this.cardList.forEach(function(t){t.curZombieType==a?t.select():t.diselect()})},i([u({displayName:"\u5361\u7247\u5217\u8868",type:[l.pzaZombieCard]})],t.prototype,"cardList",void 0),i([c],t)}(cc.Component);e.pzaZombieSelectView=d,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameConfig":"pzaGameConfig","./pzaZombieCard":"pzaZombieCard"}],pzaZombieSlot:[function(a,t,e){"use strict";cc._RF.push(t,"f1301n9mitKk6/Wjk7m2ZLL","pzaZombieSlot"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieSlot=e.pzaZombieSlotAtt=e.pzaZombieSlotType=void 0;var o=a("../pzaSpineTool");(function(a){a.butter="10pr",a.butter2="10pr2",a.hat="1hat",a.hat1="1hat1",a.hat_green="2hat",a.hat_iron="3hat",a.door="4door",a.head_nut="5body",a.head_nut_hole="11body",a.helmet_red="6hat",a.helmet_black="7hat",a.helmet_fei="8hat",a.gar_hand="9weapon",a.hat_digger="19hat",a.hat_digger_in="19hat1",a.hat_digger2="12hat",a.hat_digger2_in="12hat1",a.gao="20pr",a.gao2="20pr1",a.flag="18pr",a.hat_night="15hat1",a.hat_night_1="15hat01",a.hat_night_2="15hata02",a.ladder="14pr1",a.ladder2="14pr",a.newspaper="16pr",a.pogo="13pra",a.pogo2="13prb",a.pogo3="13prc",a.ice_car="17pra",a.ice_car_b="17prb",a.ice_car_z1="17prz1",a.ice_car_z2="17prz2",a.ice_car_z3="17prz3",a.ice_car_z4="17prz4",a.ice_car_z5="17prz5",a.ice_car_z6="17prz6",a.ice_car_z7="17prz7",a.MachineHead="1head",a.head_tallnut="Dbody1"})(e.pzaZombieSlotType||(e.pzaZombieSlotType={}));e.pzaZombieSlotAtt=function(a,t,e,o,n){void 0===e&&(e=0),void 0===o&&(o=0),void 0===n&&(n=0),this.attName=null,this.x=0,this.y=0,this.rotation=0,this.state=0,this.attName=t,this.x=e,this.y=o,this.state=a,this.rotation=n};var n=function(){function a(a,t){this.zombieSpine=null,this.slotName=null,this.state=0,this.stateMap=new Map,this.zombieSpine=a,this.slotName=t}return a.prototype.addState=function(a){return this.stateMap.set(a.state,a),this},a.prototype.updateState=function(a,t){if(void 0===t&&(t=!1),t||this.state!==a){if(a<=0)return o.pzaSpineTool.instance().setSlotAtt(this.zombieSpine,this.slotName,null,0,0),void(this.state=a);var e=this.stateMap.get(a);e?(o.pzaSpineTool.instance().setSlotAtt(this.zombieSpine,this.slotName,e.attName,e.x,e.y,e.rotation),this.state=e.state):console.log("\u65e0\u6b64equipState",a,this.slotName)}},a}();e.pzaZombieSlot=n,cc._RF.pop()},{"../pzaSpineTool":"pzaSpineTool"}],pzaZombieState:[function(a,t,e){"use strict";cc._RF.push(t,"1254fuzgXhNfbmLza1fO2Do","pzaZombieState"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieState=void 0,function(a){a[a.STAY=1]="STAY",a[a.MOVE=2]="MOVE",a[a.EAT_ATK=3]="EAT_ATK",a[a.DEAD=4]="DEAD",a[a.SPECIAL=5]="SPECIAL"}(e.pzaZombieState||(e.pzaZombieState={})),cc._RF.pop()},{}],pzaZombieSunFlower:[function(a,t,e){"use strict";cc._RF.push(t,"10dfevpIG9O4I1s27g+nEsf","pzaZombieSunFlower");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieSunFlower=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.createZombieTime=0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.createZombieTime=30,this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=15);var o=function(){if(!l.pzaGameState.gameWin&&e.baseData.plantData.atkInterval<=0){if(e.baseData.plantData.atkInterval=0,null==e.baseData||e.baseData.isDead)return;return e.baseData.plantData.atkInterval=15,r.pzaSoundManager.playAudio("SunShroom"),e.animation.showWhiteLight(),window.pzaplantManager.plantCreateSun(e.baseData.logicPos.clone(),!0),void o()}e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle2",!1,o))};this.animation.playAnimation("idle1",!1,o),l.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,this.baseData.plantData.atkInterval-=t,this.createZombieTime-=t,this.createZombieTime<=0&&(this.createZombieTime=30,this.createZombieCard()))},t.prototype.createZombieCard=function(){},i([u],t)}(s.pzaBasePlant));e.pzaZombieSunFlower=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaZombiebookCard:[function(a,t,e){"use strict";cc._RF.push(t,"9484177j0tLUo9Ri0pFBdw8","pzaZombiebookCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombiebookCard=void 0;var r=a("../Battle/Data/pzaZombieEnum"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGameConfig"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardIcon=null,t.cardNode=null,t.voidNode=null,t.zombieType=null,t.clickCall=null,t.unlock=!1,t}return n(t,a),t.prototype.bindData=function(a,t){this.zombieType=a,this.clickCall=t;var e=l.pzaGameConfig.getZombieConfig(a);if(null==e||s.pzaLocalData.data.curChapter<e.unlockChapter||s.pzaLocalData.data.curChapter==e.unlockChapter&&s.pzaLocalData.data.curPart<e.unlockPart?this.unlock=!1:this.unlock=!0,!this.unlock)return this.voidNode.active=!0,void(this.cardNode.active=!1);this.voidNode.active=!1,this.cardNode.active=!0,u.pzaSpriteFrameManager.loadZombieCard(a,this.cardIcon),a==r.pzaZombieEnum.ZOMBONI?this.cardIcon.node.scale=.8:a==r.pzaZombieEnum.CATAPULT_ZOMBIE?(this.cardIcon.node.scale=.8,this.cardIcon.node.x=20):a==r.pzaZombieEnum.GARGANTUAR?this.cardIcon.node.scale=.8:(this.cardIcon.node.scale=1,this.cardIcon.node.x=0,this.cardIcon.node.y=0),a!=r.pzaZombieEnum.YETI_ZOMBIE||s.pzaLocalData.hasUnlockZombie(a)?this.cardIcon.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"):this.cardIcon.node.color=cc.Color.fromHEX(cc.color(),"#000000")},t.prototype.zjBindData=function(a,t){switch(this.zombieType=a,this.clickCall=t,this.unlock=!0,this.cardIcon.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"),this.voidNode.active=!1,this.cardNode.active=!0,a){case r.pzaZombieEnum.POLEVAULTING_ZOMBIE2:a=102;break;case r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE:a=104;break;case r.pzaZombieEnum.FOOTBALL_ZOMBIE2:a=106;break;case r.pzaZombieEnum.DANCING_ZOMBIE2:case r.pzaZombieEnum.DANCING_ZOMBIE3:a=r.pzaZombieEnum.DANCING_ZOMBIE2;break;case r.pzaZombieEnum.BACKUP_DANCER2:a=r.pzaZombieEnum.BACKUP_DANCER;break;case r.pzaZombieEnum.DIGGERFOOTBALL_ZOMBIE2:a=r.pzaZombieEnum.DIGGER_ZOMBIE;break;case r.pzaZombieEnum.POGO_ZOMBIE2:a=r.pzaZombieEnum.POGO_ZOMBIE;break;case r.pzaZombieEnum.LADDER_ZOMBIE2:a=r.pzaZombieEnum.LADDER_ZOMBIE;break;case r.pzaZombieEnum.JACK_ZOMBIE2:a=175;break;case r.pzaZombieEnum.CATAPULT_ZOMBIE2:a=r.pzaZombieEnum.CATAPULT_ZOMBIE,this.cardIcon.node.x+=20;break;case r.pzaZombieEnum.CONE_HEAD_ZOMBIE2:a=101}u.pzaSpriteFrameManager.loadZombieCard(a,this.cardIcon)},t.prototype.clickCard=function(){this.unlock&&(c.pzaSoundManager.playSFX(),this.clickCall&&this.clickCall(this.zombieType))},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([m({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([m({displayName:"\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"cardNode",void 0),i([m({displayName:"\u7a7a\u69fd",type:cc.Node})],t.prototype,"voidNode",void 0),i([h],t)}(cc.Component);e.pzaZombiebookCard=f,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaZomboni2:[function(a,t,e){"use strict";cc._RF.push(t,"33a9ev6e5JP5oviGosr9GRa","pzaZomboni2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZomboni2=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../pzaGameState"),l=a("./pzaZomboni"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=s.pzaZombieSlotType.newspaper,t.isLockSpeed=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.ice_car,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.ice_car).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.ice_car+"1",493.34,-14.36,-90.31)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.ice_car+"2",493.35,-14.36,-90.31)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.ice_car+"3",477.35,-14.36,-90.31))],[s.pzaZombieSlotType.ice_car_b+"1",new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.ice_car_b+"1").addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.ice_car_b+"1",107.02,7.77,-90.31))],[s.pzaZombieSlotType.ice_car_b+"2",new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.ice_car_b+"2").addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.ice_car_b+"2",116.72,-6.31,-90.31))],[s.pzaZombieSlotType.ice_car_b+"3",new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.ice_car_b+"3").addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.ice_car_b+"3",103.04,.9,-90.31))],[s.pzaZombieSlotType.ice_car_b+"4",new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.ice_car_b+"4").addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.ice_car_b+"4",69.43,2.1,-90.31))],[s.pzaZombieSlotType.newspaper,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.newspaper).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.newspaper+"1",4.77,21.76)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.newspaper+"2",4.77,21.76)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.newspaper+"3",4.77,25.19))]])},t.prototype.logicUpdate=function(a){null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.isDead||(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow?this.pushBackTime>0?this.pushBackMove(a):(!this.isLockSpeed&&-1!=this.baseData.xIndex&&this.baseData.xIndex<8&&(this.baseData.zombieData.moveSpd-=this.baseData.zombieData.initMSpd/100,this.baseData.zombieData.moveSpd=Math.max(this.baseData.zombieData.moveSpd,3*this.baseData.zombieData.initMSpd/8)),this.updateMove(a),this.rollingPlant()):this.changeRowMove(a))))},t.prototype.equipDeath=function(t){if(a.prototype.equipDeath.call(this,t),null!=this.baseData&&null!=this.baseData.zombieData){var e=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.isLockSpeed=!0,this.baseData.zombieData.moveSpd=p.pzaGameState.map.getBlockWidth()/e,this.updateCarState(1)}},i([u],t)}(l.pzaZomboni));e.pzaZomboni2=d,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../pzaGameState":"pzaGameState","./pzaZombieSlot":"pzaZombieSlot","./pzaZomboni":"pzaZomboni"}],pzaZomboni3:[function(a,t,e){"use strict";cc._RF.push(t,"6a0a9R2Y2dPN7v958mzIW+j","pzaZomboni3");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZomboni3=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaZombieEnum"),l=a("../pzaGameState"),s=a("./pzaZomboni"),c=a("./pzaZombieSlot"),u=a("../Plant/pzaAttackType"),d=a("../pzaSpineTool"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[c.pzaZombieSlotType.ice_car,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.ice_car).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.ice_car+"1",493.34,-14.36,-90.31)).addState(new c.pzaZombieSlotAtt(2,c.pzaZombieSlotType.ice_car+"2",493.34,-13.86,-90.31)).addState(new c.pzaZombieSlotAtt(3,c.pzaZombieSlotType.ice_car+"3",477.35,-13.27,-90.31))],[c.pzaZombieSlotType.hat_iron,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.hat_iron).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.hat_iron+"1",1.94,40.88,0)).addState(new c.pzaZombieSlotAtt(2,c.pzaZombieSlotType.hat_iron+"2",1.94,40.88,0)).addState(new c.pzaZombieSlotAtt(3,c.pzaZombieSlotType.hat_iron+"3",1.94,40.88,0))]])},t.prototype.updateCarState=function(a){this.slotMap.get(c.pzaZombieSlotType.ice_car).updateState(a),d.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,"17prz6","17prz6",1.13,-.78),d.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,"17prz7","17prz7",-9.98,2.1)},t.prototype.speedDown=function(){},t.prototype.handBookPreview=function(){this.animation.playAnimation("move",!0)},t.prototype.death=function(a,t){var e=this;if(void 0===t&&(t=null),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData),!a)return this.close(),void(t!=u.pzaAttackType.DEATH&&this.spawnZombie(p.pzaZombieEnum.GARGANTUAR2,1800));this.playDeathAnimation(function(){t!=u.pzaAttackType.DEATH&&e.spawnZombie(p.pzaZombieEnum.GARGANTUAR2,1800),e.close()}),r.pzaSoundManager.playAudio("explosion")},t.prototype.spawnZombie=function(a,t){void 0===t&&(t=0);var e=window.pzazombieManager.createFixBlockZombieData(a,this.baseData.xIndex+1,this.baseData.yIndex,!1);if(t&&(e.atk=t),this.baseData.xIndex<0||this.baseData.xIndex>=8){var o=.1*l.pzaGameState.map.getYInterval(this.baseData.yIndex)+15,n=l.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,o);n.x=600,e.logicPos=n}window.pzazombieManager.createZombie(e,!1)},i([m],t)}(s.pzaZomboni));e.pzaZomboni3=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaZombieSlot":"pzaZombieSlot","./pzaZomboni":"pzaZomboni"}],pzaZomboni:[function(a,t,e){"use strict";cc._RF.push(t,"48dea0mPk5KtqXNcJhrI6kz","pzaZomboni");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZomboni=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("../Plant/pzaAttackType"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaBaseZombie"),h=a("./pzaZombieState"),m=a("../../Common/pzaSpineController"),f=a("../Data/pzaPlantEnum"),z=cc._decorator,y=z.ccclass,g=z.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.dieSpine=null,t.butterSlot=null,t.iceMakeNode=null,t}return n(t,a),t.prototype.updateCarState=function(){this.slotMap||this.initEquips()},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.updateCarState(1)},t.prototype.preview=function(t,e,o){a.prototype.preview.call(this,t,e,o)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.animation.node.active=!0,this.dieSpine.node.active=!1,this.baseData.zombieData.cate=l.pzaZombieCate.IceCar,null!=t.logicPos&&(this.createSpecialGround(),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_ICE,-1)),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_SPATTER,-1)),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_IMMOBILIZE,-1)))},t.prototype.createSpecialGround=function(){var a=this.baseData.logicPos.x+this.iceMakeNode.x,t=this.baseData.logicPos.y+this.iceMakeNode.y;c.pzaEffectManager.createIceGround(this.baseData,a,t)},t.prototype.speedDown=function(){-1!=this.baseData.xIndex&&this.baseData.xIndex<8&&(this.baseData.zombieData.moveSpd-=this.baseData.zombieData.initMSpd/100,this.baseData.zombieData.moveSpd=Math.max(this.baseData.zombieData.moveSpd,3*this.baseData.zombieData.initMSpd/8))},t.prototype.logicUpdate=function(a){null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.isDead||(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation&&this.animation.flashUpdate(a),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow?this.pushBackTime>0?this.pushBackMove(a):(this.speedDown(),this.updateMove(a),this.rollingPlant()):this.changeRowMove(a))))},t.prototype.changeRowMove=function(a){this.updateMove(a),this.baseData.logicPos.y+=150*a*(this.baseData.yIndex<this.changeTargetRow?1:-1);var t=.1*u.pzaGameState.map.getYInterval(this.changeTargetRow),e=u.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.changeTargetRow,0,t);if(this.baseData.yIndex<this.changeTargetRow&&e.y<=this.baseData.logicPos.y||this.baseData.yIndex>this.changeTargetRow&&e.y>=this.baseData.logicPos.y){this.baseData.logicPos.y=e.y,this.body.curTarget=null,window.pzazombieManager.zombieChangeMapRow(this.body,this.baseData,this.changeTargetRow),this.changeTargetRow=-1;var o=this.baseData.logicPos.x+this.iceMakeNode.x,n=this.baseData.logicPos.y+this.iceMakeNode.y;c.pzaEffectManager.createIceGround(this.baseData,o,n,!0)}},t.prototype.rollingPlant=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a,t=this.findTarget();a=t?""+t.xIndex+t.yIndex:""+this.baseData.xIndex+this.baseData.yIndex;var e=window.pzaplantManager.plantDataMap.get(a);if(null!=e){var o=window.pzaplantManager.getPlantByData(e);if(e.plantData.plantType==f.pzaPlantEnum.QQFUME_SHROOM)return void(e.hp<=100?o&&o.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING):o&&o.hurt(100,this.baseData,s.pzaAttackType.FLOOR_ATK));o&&o.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var n=window.pzaplantManager.plantEnvDataMap.get(a);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var r=window.pzaplantManager.pumpkinDataMap.get(a);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var l=window.pzaplantManager.notTargetMap.get(a);if(null!=l){var c=window.pzaplantManager.getPlantByData(l);c&&c.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}}},t.prototype.hurt=function(t,e,o){var n=this;if(void 0===o&&(o=s.pzaAttackType.FLOOR_ATK),this.baseData&&!this.baseData.isDead){if(o==s.pzaAttackType.BANG)return this.baseData.zombieDie(),this.death(!0),void r.pzaSoundManager.playAudio("zomboniDeath");if(o!=s.pzaAttackType.SPIKE){if(o==s.pzaAttackType.NORMAL_BOOM)return this.baseData.zombieDie(),void this.death(!0);a.prototype.hurt.call(this,t,e,o)}else{if(this.baseData.zombieDie(),r.pzaSoundManager.playAudio("ball_fall"),this.animation.playAnimation("jump",!1,function(){n.death(!0)}),null!=e){var i=window.pzaplantManager.getPlantByData(e);i&&i.hurt(50,this.baseData,s.pzaAttackType.BANG)}r.pzaSoundManager.playAudio("zomboniDeath")}}},t.prototype.death=function(a){var t=this;this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData),a?(this.playDeathAnimation(function(){t.close()}),r.pzaSoundManager.playAudio("explosion")):this.close()},t.prototype.playDeathAnimation=function(a){this.zombieState=h.pzaZombieState.DEAD,this.zombieHurtState=l.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),this.animation.node.active=!1,this.dieSpine.node.active=!0,this.dieSpine.playAnimation("blow",!1,a)},t.prototype.zombieDying=function(){this.zombieHurtState=l.pzaHurtStateEnum.DYING,this.updateCarState(3)},t.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,this.updateCarState(2)},t.prototype.zombieIntact=function(){this.zombieHurtState=l.pzaHurtStateEnum.INTACT,this.updateCarState(1)},t.prototype.zombieScream=function(){r.pzaSoundManager.playAudio("Zomboni_Enter")},i([g(m.pzaSpineController)],t.prototype,"dieSpine",void 0),i([g({displayName:"\u5236\u51b0\u8282\u70b9",type:cc.Node})],t.prototype,"iceMakeNode",void 0),i([y],t)}(d.pzaBaseZombie);e.pzaZomboni=b,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieState":"pzaZombieState"}],pzakc:[function(a,t,e){"use strict";cc._RF.push(t,"a61f6W3ID1MGoqPrk0iw1E8","pzakc");var o=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r},n=this&&this.__read||function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var o,n,i=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return r},i=this&&this.__spread||function(){for(var a=[],t=0;t<arguments.length;t++)a=a.concat(n(arguments[t]));return a};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaLocalData"),p=a("./pzaChannel"),l=cc._decorator,s=l.ccclass,c=(l.property,function(){function a(){}var t;return t=a,a.log=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];a.unshift("====>"),console.log.apply(window,a)},a.err=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];a.unshift("====>"),console.error.apply(window,a)},a.removeNodeChildren=function(a){a.children.forEach(function(a){a.isValid&&a.destroy()})},a.objToMap=function(a){var e=new Map;return t.forMap(a,function(t){e.set(t,Number(a[t]))}),e},a.mapToObj=function(a){var t={};return a.forEach(function(a,e){t[e]=a}),t},a.str=function(a){return null==a?"":a.trim()},a.num=function(a){return a?Number(a):0},a.strArr=function(a){return a?(a=a.replace(/\s/g,"").replace(/\uff0c/g,",")).split(","):null},a.strNumArr=function(a){if(!a)return null;for(var t=[],e=(a=a.replace(/\s/g,"").replace(/\uff0c/g,",")).split(","),o=0;o<e.length;o++)t.push(Number(e[o]||0));return t},a.strSet=function(a){if(!a)return null;for(var e=t.strArr(a),o=new Set,n=0;n<e.length;n++)o.add(e[n]);return o},a.strMap=function(a){if(!a)return null;for(var e=t.strArr(a),o=new Map,n=0;n<e.length;n++){var i=e[n].split(":");if(2!==i.length)throw new Error("\u89e3\u6790\u9519\u8bef!"+a);i[1].replace(/%/g,"");var r=parseInt(i[1]);if(isNaN(r))throw new Error("\u89e3\u6790\u9519\u8bef!"+i+","+a);o.set(i[0],r)}return o},a.forMap=function(a,t){for(var e=Object.keys(a),o=0,n=e.length;o<n;o++){var i=t(e[o],o);if(void 0!==i)return i}return null},a.loadSubGame=function(a,t,e,o,n){cc.assetManager.loadAny({url:a},{version:e,ext:"bundle",preset:"bundle",__isNative__:!0},function(){},function(e,i){if(e)n(e);else{var r=new cc.AssetManager.Bundle;i.base=i.base||a+"/",r.init(i),r.load("pkg/"+t,cc.Prefab,o,function(a,t){a?n(a):n(null,t,r)})}})},a.init=function(){var a=cc.view.getVisibleSize();t.view_x=a.width/2,t.view_y=a.height/2,t.view_mag=cc.v2(t.view_x,t.view_y).mag(),t.log("\u53ef\u89c6\u533a\u57df",t.view_x,t.view_y),cc.view.setResizeCallback(t.init),t.loadData(null)},a.leftPad=function(a,t,e){void 0===e&&(e="0");var o=t-a.length;if(o<=0)return a;for(var n=0;n<o;n++)a=e+a;return a},a.showPassTime=function(a){var t=Math.floor(a/1e3),e=Math.floor(t/86400);e>0&&(t%=86400);var o=Math.floor(t/3600);o>0&&(t%=3600);var n=""+Math.floor(t/60),i=""+t%60;return(e>0?e+"\u5929":"")+this.leftPad(""+o,2)+":"+this.leftPad(n,2)+":"+this.leftPad(i,2)},a.showPercent=function(a){return 100*a+"%"},a.bezier=function(a,t,e,o,n){var i=1-n;return i*(i*(a+(3*t-a)*n)+3*e*n*n)+o*n*n*n},a.bezierTo=function(a,e,o,n,i,r){return r||(r=Object.create(null)),r.progress=function(e,i,r,p){var l=t.bezier(e.x,o.x,n.x,i.x,p),s=t.bezier(e.y,o.y,n.y,i.y,p);return a.angle=t.posToAngle(r.x,r.y,l,s),r.x=l,r.y=s,r},cc.tween(a).to(e,{position:i},r)},a.posToAngle=function(a,t,e,o){return 180*Math.atan2(o-t,e-a)/Math.PI},a.posToRadian=function(a,t,e,o){return Math.atan2(o-t,e-a)},a.clone=function(a){if(Array.isArray(a)){for(var e=[],o=0,n=a.length;o<n;o++)e.push(t.clone(a[o]));return e}if("[object Object]"===Object.prototype.toString.call(a)){var i={};return t.forMap(a,function(e){i[e]=t.clone(a[e])}),i}return a},a.isNewDay=function(a){if(a<=0)return!0;var t=new Date(a),e=new Date;return t.getFullYear()!==e.getFullYear()||t.getMonth()!==e.getMonth()||t.getDate()!==e.getDate()},a.randomInt=function(a,t){return Math.floor(Math.random()*(t-a+1)+a)},a.randomBool=function(a){return void 0===a&&(a=.5),Math.random()<a},a.randomPosNeg1=function(){return Math.random()>.5?1:-1},a.randomStr=function(a,e){for(var o=e||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",i=0;i<a;i++)n+=o[t.randomInt(0,a-1)];return n},a.distinctArr=function(a,t){return void 0===t&&(t=[]),Array.from(new Set(i(a,t)))},a.arrSub=function(a,t){for(var e=new Set(t),o=[],n=0,i=a.length;n<i;n++){var r=a[n];e.has(r)||o.push(r)}return o},a.randomChooseIndex=function(a,e){for(var o=new Array,n=new Array,i=a.length,r=0;r<i;r++)n[r]=r;for(var p=0;p<e;p++){var l=t.randomInt(0,n.length-1);o.push(n.splice(l,1)[0])}return o},a.randomChoose=function(a,t){if(!t||1===t)return[a[Math.floor(Math.random()*a.length)]];var e=a.slice(0);if(t>a.length)return e;for(var o=0,n=0,i=a.length,r=i-t;i-- >r;)o=e[n=Math.floor((i+1)*Math.random())],e[n]=e[i],e[i]=o;return e.slice(r)},a.randomDraw=function(a){var e=Math.random(),o=0;return t.forMap(a,function(t){if(e>o&&e<o+a[t])return t;o+=a[t]})},a.randomPick=function(a,t){if(!t||1===t)return a.splice(Math.floor(Math.random()*a.length),1);if(t>a.length)return a;for(var e=[],o=0;o<t;o++){var n=Math.floor(Math.random()*a.length);e.push(a.splice(n,1)[0])}return e},a.resetTexRect=function(a){if(a.spriteFrame){var e=a.spriteFrame.getRect(),o=a.spriteFrame.getTexture(),n=e.x/o.width,i=e.y/o.height,r=(e.x+e.width)/o.width,p=(e.y+e.height)/o.height,l=new cc.Vec4(n,i,r-n,p-i);a.getMaterial(0).setProperty("_TexRect",l)}else t.err("[ERR]resetTexRect",a)},a.shake=function(a,t,e,o){void 0===t&&(t=3),void 0===e&&(e=0),void 0===o&&(o=10);var n={shakeCount:t,node:a,orgX:a.x,orgY:a.y,isDone:!1,doneFn:function(){},done:null,tw:null};return n.done=function(a,t){return a&&(n.doneFn=function(){a.call(t||n.node)}),n},n.tw=cc.tween(n.node).repeat(n.shakeCount,cc.tween().to(.05,{x:n.orgX+o,y:n.orgY+e}).to(.05,{x:n.orgX-o,y:n.orgY-e})).call(function(){n.doneFn()}),n.tw.start(),n},a.resetMsgReciever=function(a,e){t.msgMap[a]=e},a.delMsgReciever=function(a){delete t.msgMap[a]},a.regMsgReciever=function(a,e){var o=t.msgMap[a];o?t.msgMap[a]=function(a){return!!o(a)&&e(a)}:t.resetMsgReciever(a,e)},a.sendMsg=function(a,e){var o=t.msgMap[a];o&&o(e)},a.moveTo=function(a,t,e,o,n){void 0===o&&(o=.5),void 0===n&&(n=function(){});var i=t.sub(cc.v2(a.position)),r=i.mag();if(0!==r){var p=i.x/r*e,l=i.y/r*e;cc.tween(a).to(o,{x:a.x+p,y:a.y+l}).call(n).start()}else n()},a.updateMove=function(a,t,e,o,n,i){if(void 0===o&&(o=10),void 0===n&&(n=0),a&&0!==o){var r=t.sub(e),p=r.mag();if(!(p<10)){0!==n&&(r.x<0&&a.scaleX>0||r.x>0&&a.scaleX<0)&&(a.scaleX=-a.scaleX);var l=r.x/p,s=r.y/p;i&&!i(r,p,l,s)||(a.x+=l*o,a.y+=s*o)}}},a.twoInt=function(a){return a<10?"0"+a:a},a.todayStr=function(){var a=new Date;return""+a.getFullYear()+t.twoInt(a.getMonth()+1)+t.twoInt(a.getDate())},a.saveData=function(a,e){var o=window.localStorage;o&&(t.saveObj[a]=e,o.setItem(t.gameName,JSON.stringify(t.saveObj)))},a.getData=function(a,e){var o=t.saveObj[a];return null==o?e:o},a.loadData=function(a){var e=window.localStorage;if(e){var o=e.getItem(t.gameName);if(o){if(t.saveObj=JSON.parse(o),!t.saveObj.userId){var n=""+t.randomInt(1e8,999999999);this.saveData("userId",n)}return t.saveObj[a]}n=""+t.randomInt(1e8,999999999),this.saveData("userId",n)}return null},a.clearData=function(){var a=window.localStorage;a&&a.removeItem(t.gameName)},a.jget=function(a,e){e||(e=function(a){if(a)return t.err(a)});var o=new XMLHttpRequest;o.responseType="arraybuffer",o.open("GET",a,!0),o.onload=function(){return 200==o.status?e(null,o.response):e("[ERR-jget]:"+o.status)},o.onerror=function(a){e(a)},o.send()},a.jgetJson=function(a,e){e||(e=function(a){if(a)return t.err(a)});var o=new XMLHttpRequest;o.responseType="json",o.open("GET",a,!0),o.onload=function(){return 200==o.status?(console.error("fail 200"),e(null,o.response)):(console.error("fail 2001"),e("[ERR-jget]:"+o.status))},o.onerror=function(a){console.error("fail 2002"),e(a)},o.send()},a.jpost=function(a,e,o){o||(o=function(a){if(a)return t.err(a)});var n=new XMLHttpRequest;n.open("POST",a,!0),n.setRequestHeader("Content-Type","application/json; charset=utf-8");var i=JSON.stringify(e);n.send(i),n.onerror=function(a){o(a)},n.onload=function(){if(200==n.status){if("object"==typeof n.responseText)return o(null,n.responseText);var e={postERR:""+n.responseText};try{e=JSON.parse(n.responseText)}catch(i){return t.err(i),o(null,{code:"1111",err:"jsonErr:"+n.responseText,url:a})}return o(null,e)}return o(null,{code:""+n.status})}},a.encodeUTF8=function(a){var t,e,o,n=[];for(t=0;t<a.length;t++)(e=a.charCodeAt(t))<128?n.push(e):e<2048?n.push(192+(e>>6&31),128+(63&e)):((o=55296^e)>>10==0?(e=(o<<10)+(56320^a.charCodeAt(++t))+65536,n.push(240+(e>>18&7),128+(e>>12&63))):n.push(224+(e>>12&15)),n.push(128+(e>>6&63),128+(63&e)));return n},a.s=function(a){var e,o,n,i=new Uint8Array(t.encodeUTF8(a)),r=16+(i.length+8>>>6<<4);for((a=new Uint8Array(r<<2)).set(new Uint8Array(i.buffer)),a=new Uint32Array(a.buffer),n=new DataView(a.buffer),e=0;e<r;e++)a[e]=n.getUint32(e<<2);a[i.length>>2]|=128<<24-8*(3&i.length),a[r-1]=i.length<<3;var p=[],l=[function(){return u[1]&u[2]|~u[1]&u[3]},function(){return u[1]^u[2]^u[3]},function(){return u[1]&u[2]|u[1]&u[3]|u[2]&u[3]},function(){return u[1]^u[2]^u[3]}],s=function(a,t){return a<<t|a>>>32-t},c=[1518500249,1859775393,-1894007588,-899497514],u=[1732584193,-271733879,null,null,-1009589776];for(u[2]=~u[0],u[3]=~u[1],e=0;e<a.length;e+=16){var d=u.slice(0);for(o=0;o<80;o++)p[o]=o<16?a[e+o]:s(p[o-3]^p[o-8]^p[o-14]^p[o-16],1),n=s(u[0],5)+l[o/20|0]()+u[4]+p[o]+c[o/20|0]|0,u[1]=s(u[1],30),u.pop(),u.unshift(n);for(o=0;o<5;o++)u[o]=u[o]+d[o]|0}for(n=new DataView(new Uint32Array(u).buffer),e=0;e<5;e++)u[e]=n.getUint32(e<<2);return Array.prototype.map.call(new Uint8Array(new Uint32Array(u).buffer),function(a){return(a<16?"0":"")+a.toString(16)}).join("")},a.b=function(a){var t=[];for(var e in a)t.push(e);t=t.sort();for(var o="",n=0;n<t.length;n++){var i=a[t[n]];"object"==typeof i&&(i=this.b(i)),o+=t[n]+i}return o},a.a=function(a,e,o){var n=[];for(var i in a)null!==a[i]&&void 0!==a[i]?n.push(i):delete a[i];n=n.sort();var r=t.b(a);return e&&(r+=e),r+=o||"pH0Xhyenu2e1zdUg",t.s(r)},a.jax=function(a,e,o){o||(o=function(a){if(a)return t.err(a)});var n=new XMLHttpRequest,i=Date.now();e.s=t.a(e,i),n.open("POST",a,!0),n.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.setRequestHeader("ts",""+i);var r=JSON.stringify(e);n.send(r),n.onload=function(){if(200==n.status){var a={jaxERR:""+n.responseText};try{a=JSON.parse(n.responseText)}catch(e){return t.err(e),o(null,{re:"1111",err:"jsonErr:"+n.responseText})}return o(null,a)}return o(null,{re:"9"+n.status})}},a.eventReport=function(a,e,o){if(!p.pzaChannel.isConfRemote&&p.pzaChannel.instance().getPara("gid"))return"my"==p.pzaChannel.instance().getChannel().channel?console.log("\u6682\u505cmy\u6253\u70b9\u4e0a\u62a5=="):void p.pzaChannel.instance().getChannel().jpost("https://ga.gamejym.com/htApi/ht_api/eventReport",{eventName:a,eventProp:e,gid:p.pzaChannel.instance().getPara("gid"),uid:r.pzaLocalData.data.saveId,userProps:o},function(a){a&&t.err(a)})},a.htInit=function(a,e){if(void 0===e&&(e=function(){}),a){var o={gid:a,uid:t.getData("user",{}).id||"u"+Date.now(),v:t.htVer};t.jax(t.htHost+"init2",o,function(a,o){if(a||!o)return t.err("jhtERR",a),e(a||new Error("no re"));if(0!==o.re)return t.err("jht FAILED!"+JSON.stringify(o)),e(new Error("err:"+o.re));if(t.log("HT init OK:"+t.htVer),o.uid){var n=t.getData("user",{});n.id=o.uid,t.saveData("user",n)}o.picType&&(t.picType=o.picType),t.iconPre=o.iconPre,e(null,o)})}},a.htGetBox=function(a,e){if(void 0===e&&(e=function(){}),a){var o={bid:a};t.jax(t.htHost+"getBox",o,function(o,n){if(o)return e(o);if(0!==n.re||!n.arr)return e(new Error("\u670d\u52a1\u914d\u7f6e\u6709\u8befbid:"+a+",re:"+n.re));for(var i=[],r={},p=0;p<n.arr.length;p++)for(var l=n.arr[p],s=0;s<l.length;s++){var c=l[s].split("@"),u="",d="";c.length>=4&&"0"!==c[3]&&(u="_"+c[3]),c.length>=5&&(d=c[4]),r[c[0]]||(i.push({jumpKey:c[1],mid:c[0],iconUrl:t.iconPre+c[0]+u+"."+t.picType,txt:c[2],mark:d}),r[c[0]]=c[0])}e(null,i)})}else t.err("htGetBox bid\u4e3a\u7a7a!!")},a.ani_JitterNode=function(a,t,e,o,n){if(void 0===n&&(n=!1),n){var i=(r=cc.tween(a).by(t/4,{angle:e}).by(t/2,{angle:2*-e}).by(t/4,{angle:e})).delay(.5);cc.tween(a).repeatForever(i).start()}else{var r=cc.tween(a).by(t/2,{angle:e}).by(t/2,{angle:-e});(i=cc.tween(a).sequence(r,cc.tween(a).delay(.1),r.reverseTime()).delay(.1)).repeat(o).start()}},a.getRemainingSeconds=function(){var a=new Date,t=new Date(a);t.setHours(24,0,0,0);var e=t.getTime()-a.getTime();return Math.floor(e/1e3)},a.format=function(a,t){void 0===t&&(t=!0);var e=Math.floor(a/3600),o=Math.floor(a%3600/60),n=a%60;return t?this.formatTime(e)+":"+this.formatTime(o)+":"+this.formatTime(n):this.formatTime(o)+":"+this.formatTime(n)},a.formatTime=function(a){return a<10?"0"+a:""+a},a.formatCountdown=function(a){var t=Math.floor(a%3600/60),e=Math.floor(a%60);return t.toString().padStart(2,"0")+":"+e.toString().padStart(2,"0")},a.getMonthDays=function(){var a;a=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:new Date;var t=new Date(a),e=(t.getDate(),t.getMonth()+1);return new Date(t.getFullYear(),e,0).getDate()},a.getCurrentDay=function(){var a;return a=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:new Date,new Date(a).getDate()},a.getCurrentMonty=function(){var a;return a=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:new Date,new Date(a).getMonth()+1},a.getCurrentYear=function(){var a;return a=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:new Date,new Date(a).getFullYear()},a.returnNowTime=function(a){var t=new Date(a),e=t.getDate(),o=t.getMonth()+1;return t.getFullYear()+"\u5e74"+o+"\u6708"+e+"\u65e5"},a.setServerTimeToLocal=function(a){console.log("\u4f7f\u7528\u670d\u52a1\u5668\u65f6\u95f4"),r.pzaLocalData.serverTime=a},a.getDaysDifference=function(a,t){var e=new Date(a),o=new Date(t),n=Math.abs(o.getTime()-e.getTime());return Math.floor(n/864e5)},a.judgeMonth=function(){this.getCurrentMonty()!=r.pzaLocalData.data.nowMonth&&(r.pzaLocalData.data.monthSignDays=0,r.pzaLocalData.data.retroSignDays=0,r.pzaLocalData.data.nowMonth=this.getCurrentMonty(),r.pzaLocalData.addDirty("monthSignDays","retroSignDays","nowMonth")),this.judgeDay(),this.judgeWeek(),this.canLockMonthSign()},a.judgeWeek=function(){var a;a=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:Date.now();var t=!1;null==r.pzaLocalData.data.weekDayTime?(t=!1,r.pzaLocalData.data.weekDayTime=a):(t=this.isSameWeek(r.pzaLocalData.data.weekDayTime,a),r.pzaLocalData.data.weekDayTime=a),r.pzaLocalData.addDirty("weekDayTime");var e=new Date,o=e.getUTCFullYear()+"-"+e.getUTCMonth()+"-"+e.getUTCDay();0==t?r.pzaLocalData.clearBpData():(r.pzaLocalData.data.bpWeekRecordLogin!=o&&(r.pzaLocalData.data.bpWeekRecordLogin=o,r.pzaLocalData.data.bpWeekLoginCnt++),r.pzaLocalData.addDirty("bpWeekRecordLogin","bpWeekLoginCnt"))},a.isSameWeek=function(a,t){var e=new Date(a),o=new Date(t),n=new Date(e);n.setDate(e.getDate()-(e.getDay()+6)%7),n.setHours(0,0,0,0);var i=new Date(o);i.setDate(o.getDate()-(o.getDay()+6)%7),i.setHours(0,0,0,0);var r=new Date(n);r.setDate(n.getDate()+6),r.setHours(23,59,59,999);var p=new Date(i);return p.setDate(p.getDate()+6),p.setHours(23,59,59,999),n<=o&&o<=r||i<=e&&e<=p},a.judgeDay=function(){var a=t.getCurrentYear(),e=t.getCurrentMonty(),o=t.getCurrentDay();if(r.pzaLocalData.data.signDasyEnd.length<3)r.pzaLocalData.data.signDasyEnd=[a,e,o],r.pzaLocalData.data.isSignInMonth=!1,r.pzaLocalData.addDirty("signDasyEnd","isSignInMonth");else{var n=!1;a==r.pzaLocalData.data.signDasyEnd[0]&&e==r.pzaLocalData.data.signDasyEnd[1]&&o==r.pzaLocalData.data.signDasyEnd[2]&&(n=!0),n||(r.pzaLocalData.data.isSignInMonth=!1,r.pzaLocalData.data.signDasyEnd=[a,e,o],r.pzaLocalData.addDirty("signDasyEnd"))}p.pzaChannel.instance().channel},a.newPlayerJudgeDay=function(){var a=new Date,t=a.getUTCFullYear()+"-"+a.getUTCMonth()+"-"+a.getUTCDay();t!=r.pzaLocalData.data.newPlayerSameDay&&(r.pzaLocalData.data.newPlayerSameDay=t,r.pzaLocalData.data.newPlayerLoginCnt++,r.pzaLocalData.data.newPlayerStep++,r.pzaLocalData.data.newPlayerStep>=7&&(r.pzaLocalData.data.newPlayerStep=7),r.pzaLocalData.data.loginDays++,r.pzaLocalData.addDirty("newPlayerLoginCnt","newPlayerStep","newPlayerSameDay","loginDays"))},a.canLockMonthSign=function(){r.pzaLocalData.data.canMonthSign||r.pzaLocalData.data&&r.pzaLocalData.data.signDays>=7&&(r.pzaLocalData.data.canMonthSign=!0,r.pzaLocalData.addDirty("canMonthSign"))},a.gameName="td_hwcsmlq",a.dancingZomIdx=1,a.callbackArr=function(a,t,e,o){void 0===o&&(o=!1);for(var n=[],i=a.length,r=function(a,t){return a?e(a,n):(void 0===t&&(t=null),n.push(t),o||n.length===i?e(null,n):void 0)},p=0;p<i;p++)t(a[p],r)},a.view_x=0,a.view_y=0,a.view_mag=0,a.shuffle=function(a){for(var t,e=a.length,o=0;e;)o=Math.random()*e-->>>0,t=n([a[o],a[e]],2),a[e]=t[0],a[o]=t[1];return a},a.msgMap={},a.saveObj={},a.htVer="203",a.picType="",a.iconPre="",a.htHost="https://ga.gamejym.com/htApi/ht_api/",t=o([s],a)}());e.default=c,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","./pzaChannel":"pzaChannel"}]},{},["pzaAchieve","pzaAchieveItem","pzaAchieveMgr","pzaAchieveRewardItem","pzaAchieveView","pzaBattlePassConf","pzaBattlePassItem","pzaBattlePassMgr","pzaBattlePassTaskConf","pzaBattlePassTaskItem","pzaBattlePassTaskMgr","pzaBattlePassTaskView","pzaBattlePassView","pzaBaseBullet","pzaButterBaseBullet","pzaCatSunBullet","pzaCobBullet","pzaCupidBullet","pzaDirBullet","pzaDoomBullet","pzaGoldBullet","pzaIceMelonBaseBullet","pzaIceMelonBullet","pzaMelonBullet","pzaMissile","pzaPeaBullet","pzaPeaFireBaseBullet","pzaPeaFireTrackBullet","pzaPeaTrackBullet","pzaPenetrateBullet","pzaPumpkinBullet","pzaRotateBullet","pzaSnowBaseBullet","pzaThrowBullet","pzaTrackBullet","pzaZombieBaseBullet","pzaBaseData","pzaBattleData","pzaBuffData","pzaDropType","pzaGuideType","pzaJarData","pzaPlantEnum","pzaZombieEnum","pzaATest","pzaAbsorbIronEquip","pzaBackPumpkin","pzaBaseEffect","pzaBaseShooter","pzaBattleFrameAnim","pzaBoomFireEffect","pzaBungeeTarget","pzaBungeeZombieEffect","pzaButterEffect","pzaCobHoleEffect","pzaCornMortarShooter","pzaDoomHoleEffect","pzaDrZomBall","pzaDropCard","pzaDropCoin","pzaDropPlantCard","pzaDropZombieCard","pzaFireBallEffect","pzaFireEffect","pzaFogEffect","pzaFrozenEffect","pzaGoldHoleEffect","pzaGroveEffect","pzaHammerEffect","pzaIceGroundEffect","pzaLadder","pzaLongFireEffect","pzaPitchFork","pzaPlanternEffect","pzaPortalDoor","pzaRainEffect","pzaRainNightEffect","pzaRicochetBulletEffect","pzaRoofPreEffect","pzaShadowEffect","pzaShovelEffect","pzaShovelPlantShooter","pzaShowGrassEffect","pzaSixPlanternShooter","pzaSpeedBlinkEffect","pzaTangleKelpEffect","pzaWaterLightEffect","pzaWaterWaveEffect","pzaWordEffect","pzaZombieHoleEffect","pzaAttackType","pzaBasePlant","pzaBlover","pzaBoomNut","pzaBowlingBody","pzaBowlingNut","pzaBowlingWallBody","pzaButterGloomShroom","pzaButterJoker","pzaButterSpike","pzaCabbagePult","pzaCactus","pzaCaiWen","pzaCatLitterPot","pzaCatSun","pzaCatcusBlover","pzaCatcusFlower","pzaCattail","pzaCherryBomb","pzaCherryJalapeno","pzaChomper","pzaCobCannon","pzaCoffeeBean","pzaCoffeeUmbrella","pzaCornMortar","pzaCupidShooter","pzaDiamondSeeds","pzaDiamondSnail","pzaDoomCannon","pzaDoomShroom","pzaFireBlover","pzaFireGloomShroom","pzaFireMine","pzaFireNut","pzaFlowerPot","pzaFlowerPotShadow","pzaFlowerPotShroom","pzaFumeShroom","pzaGarlic","pzaGarlicChomper","pzaGarlicJalapeno","pzaGatlingCabbagePult","pzaGatlingPea","pzaGiftMachine","pzaGloomShroom","pzaGoldMagnet","pzaGoldMagnetShooter","pzaGraveBuster","pzaHamburgShooter","pzaHeighIceNut","pzaHoleNut","pzaHoloCards","pzaHotDog","pzaHypnoGarlic","pzaHypnoShroom","pzaIceBlover","pzaIceBowlingNut","pzaIceCat","pzaIceCat2","pzaIceFumeShroom","pzaIceNut","pzaIceSeaShroom","pzaIceShroom","pzaIceSnowShroom","pzaIceSpike","pzaIceSquash","pzaIceSunShroom","pzaIceWood","pzaImitater","pzaJalapeno","pzaJalapenoBowlingNut","pzaKernelPult","pzaLaserBean","pzaLilyFlowerPot","pzaLilyPad","pzaLilyShell","pzaLuckWindmill","pzaLuckyCattail","pzaMagnetNut","pzaMagnetShroom","pzaMallet","pzaMarigold","pzaMarigoldMammon","pzaMelonNut","pzaMelonPult","pzaMineBuster","pzaNutMoneyJar","pzaPeaBomb","pzaPeaCannon","pzaPeaCattail","pzaPeaLilyPad","pzaPeaPool","pzaPeaSun","pzaPeaTangleKelp","pzaPeashooter","pzaPlantBody","pzaPlantern","pzaPotatoMine","pzaPuffShroom","pzaPuffShroomPult","pzaPumpkin","pzaPumpkinCannon","pzaPumpkinPurple","pzaPumpkinPurpleFire","pzaQQFumeShroom","pzaRandomPlantBox","pzaReCactus","pzaRedHypnoShroom","pzaRepeater","pzaScaredyShroom","pzaSeaFumeShroom","pzaSeaPeashooter","pzaSeaShroom","pzaShiftNut","pzaSnowDragonShooter","pzaSnowPea","pzaSpikeChomper","pzaSpikeRockNut","pzaSpikerock","pzaSpikeweed","pzaSplitPea","pzaSquash","pzaSquashJalapeno","pzaSquashKing","pzaSquashNut","pzaSquashTorch","pzaStarFruit","pzaStarFruitShadow","pzaStarMine","pzaSunBean","pzaSunBomb","pzaSunFlower","pzaSunFlowerPlus","pzaSunMine","pzaSunPot","pzaSunQueen","pzaSunShroom","pzaSunShroomShooter","pzaSuperChomper","pzaSuperPitaya","pzaTallBowlingNut","pzaTallNut","pzaTallNutLeaf","pzaTangleKelp","pzaTangleKelpDoom","pzaThreeKernelPult","pzaThreePeater","pzaTorchBowlingNut","pzaTorchNut","pzaTorchwood","pzaTreasureBuster","pzaTwinSunflower","pzaUmbrellaLeaf","pzaVipNut","pzaWallNut","pzaWildPea","pzaWinterMelonPult","pzaXxlCandy","pzaZFRandomPlantBox","pzaZombieNut","pzaZombiePeashooter","pzaZombieSunFlower","DuckSwimmingCircle","pzaBackUpNarutoZombie","pzaBackupDancerFireZombie","pzaBackupDancerZombie","pzaBackupDancerZombie2","pzaBalloonZombie","pzaBalloonZombie2","pzaBaseZombie","pzaBedCar","pzaBucketHeadZombie","pzaBungeeZombie","pzaCatapultZombie","pzaCatapultZombie2","pzaConeHeadZombie","pzaConeHeadZombie2","pzaConeHeadZombie3","pzaDancingFireZombie","pzaDancingZombie","pzaDancingZombie2","pzaDancingZombie3","pzaDancingZombieNaruto","pzaDiggerFootBallZombie","pzaDiggerZombie","pzaDolphinRiderZombie","pzaDrZomBoss","pzaDuckyTubeBucketZombie","pzaDuckyTubeConeZombie","pzaDuckyTubeZombie","pzaFlagZombie","pzaFootballZombie","pzaFootballZombie2","pzaGargantuar","pzaGargantuar2","pzaGatlingShooterZombie","pzaImp","pzaJackZombie","pzaJackZombie2","pzaJalapenoBucketZombie","pzaJalapenoConeZombie","pzaJalapenoScreenZombie","pzaJalapenoZombie","pzaLadderZombie","pzaLadderZombie2","pzaMachineGargantuar","pzaNecromancerZombie","pzaNewspaperZombie","pzaNightWear","pzaNormalZombie","pzaNutZombie","pzaNutZombie2","pzaPeaZombie","pzaPogoZombie","pzaPogoZombie2","pzaPolevaultingZombie","pzaPolevaultingZombie2","pzaPolevaultingZombie3","pzaScreenDoorZombie","pzaScreenDoorZombie2","pzaSharkZombie","pzaSkeletonZombie","pzaSnorkelSharkZombie","pzaSnorkelTangleZombie","pzaSnorkelZombie","pzaSquashZombie","pzaSunflowerZombie","pzaSurfBananaZombie","pzaSurfGatlingZombie","pzaTallNutZombie","pzaYellowDuckZombie","pzaYetiZombie","pzaZombieBobsled","pzaZombieBobsledTeam","pzaZombieBody","pzaZombieSlot","pzaZombieState","pzaZomboni","pzaZomboni2","pzaZomboni3","pzaBaseBody","pzaBrain","pzaCleanCar","pzaEffectManager","pzaGameState","pzaGameTouch","pzaJar","pzaJarBody","pzaPlantManager","pzaPlantTouch","pzaPortalDoorBody","pzaSpineTool","pzaSunLight","pzaTomb","pzaZombieManager","pzaBaseComponent","pzaBaseComponentManager","pzaBeltConfig","pzaBeltEquipConfig","pzaChapterConfig","pzaCollisionManager","pzaCountDown","pzaDaySignConfig","pzaGameArtTest","pzaGameBase","pzaGameBelt","pzaGameBoss","pzaGameCommonPool","pzaGameConfig","pzaGameJar","pzaGameKnock","pzaGameManager","pzaGameMiniGame","pzaGameNormal","pzaGamePartConfig","pzaGamePropConfig","pzaGameSmall","pzaGameSurEndless","pzaGameSurvival","pzaGameTime","pzaGameVase","pzaGameVaseEndless","pzaGameZombieEnemy","pzaGameZombieEnemyEndless","pzaGiftConfig","pzaGroupEnum","pzaGuideManager","pzaGuideTip","pzaHomeTip","pzaKnockMiniGame","pzaLocalData","pzaMapManager","pzaNodeManager","pzaOperationMgr","pzaPreviewTip","pzaRankMgr","pzaRedPointMgr","pzaRewardManager","pzaShareGiftConfig","pzaSmallMiniGame","pzaSoundManager","pzaSpineController","pzaSpriteFrameManager","pzaStatisticsMgr","pzaSurvivalConfig","pzaTipManager","pzaUIManager","pzaUtil","pzaWorldEventManager","pzaZJPlantConf","pzaZJZombieConf","pzaZombieEnermyPartCfg","pzaGardenDave","pzaGardenDropCoin","pzaGardenMgr","pzaGardenPlant","pzaGardenPlantConfig","pzaGardenPot","pzaGardenShadow","pzaGardenSnail","pzaGardenTool","pzaGardenView","pzaBundleObjectPool","pzaPreLoadManager","pzaLoginActivityConf","pzaLoginActivityItem","pzaLoginActivityView","pzaLoginRewardMgr","pzaLoginRewardView","pzaLoginRiderView","pzaMiniGameConf","pzaMiniVaseConf","pzaMonthSignConf","pzaMonthSignItem","pzaMonthSignMgr","pzaMonthSignView","pzaShopConfig","pzaShopDave","pzaTask","pzaTaskMgr","pzaAssessView","pzaBagPlantCard","pzaBattleDownView","pzaBattleFreePlant","pzaBattlePropView","pzaBattleUpView","pzaBeltCard","pzaCGPaperView","pzaDaveAdReward","pzaDaveTreasureView","pzaGameFailView","pzaGameWinView","pzaGetAchieveItem","pzaGetAchieveView","pzaGuideView","pzaImitaterSelectView","pzaLoginView","pzaMenuView","pzaNewPlantView","pzaNewZombieView","pzaOptionView","pzaPlantBeltView","pzaPlantCard","pzaPlantSelectCardList","pzaPlantSelectView","pzaRecordView","pzaReviveView","pzaTryPlantCard","pzaTrySelectView","pzaZombieCard","pzaZombieSelectView","pzaBeltEquipItem","pzaBeltEquipView","pzaBeltOverView","pzaBeltSlotItem","pzaAdTicketIcon","pzaAdTicketView","pzaBubbleItem","pzaBuyConfirmView","pzaClickShowTimer","pzaCommonMask","pzaCommonRewardView","pzaDaySignItem","pzaDaySignView","pzaFitIPhoneX","pzaGiftRwdItem","pzaGiftView","pzaGotRewardView","pzaGuanKaItemView","pzaGuideDialogView","pzaHandbookCard","pzaHandbookView","pzaHomeView","pzaMiniGameItem","pzaMiniGameView","pzaNoticeView","pzaPartSelectView","pzaPlantHandbookView","pzaPlantSkinCard","pzaPlantSkinView","pzaPower","pzaPowerTime","pzaPowerView","pzaPreOpenView","pzaPuzzleItem","pzaPuzzleView","pzaRankItem","pzaRankView","pzaRecordBtn","pzaRewardItem","pzaSaveView","pzaShareGiftJar","pzaShareGiftView","pzaShareRewardItem","pzaShopItem","pzaShopView","pzaSidebarView","pzaSurvivalItem","pzaSurvivalView","pzaTasksIcon","pzaTasksItem","pzaTasksView","pzaVideoGiftView","pzaVideoPlantGiftView","pzaWarningView","pzaZombieHandbookView","pzaZombiebookCard","pzaNewPlayTaskConf","pzaNewPlayTaskMgr","pzaNewPlayerStepConf","pzaNewPlayerTaskItem","pzaNewPlayerTaskView","pzaArtTest","Byte_analytics","ShufenManager","ks_analytics","lanfei","pzaAES","pzaAdNative","pzaBulletPool","pzaChannel","pzaChannelBiLi","pzaChannelHw","pzaChannelIOS","pzaChannelKs","pzaChannelMg","pzaChannelMi","pzaChannelMy","pzaChannelMy1","pzaChannelNoAD","pzaChannelOppo","pzaChannelQQ","pzaChannelRY","pzaChannelTT","pzaChannelTap","pzaChannelVivo","pzaChannelVivo2","pzaChannelWeb","pzaChannelWx","pzaChannelWx1","pzaFrameAnim","pzaFrameAnimComponent","pzaGdyxIcon","pzaGdyxItem","pzaHtBox","pzaKDefine","pzaLayeredAssembler","pzaLayeredRootSprite","pzaNativeInterAd","pzaParseCond","pzaPrivacyWin","pzaResMgr","pzaStateComponent","pzakc"]);