window.__require=function a(t,e,o){function n(r,p){if(!e[r]){if(!t[r]){var l=r.split("/");if(l=l[l.length-1],!t[l]){var s="function"==typeof __require&&__require;if(!p&&s)return s(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+r+"'")}r=l}var c=e[r]={exports:{}};t[r][0].call(c.exports,function(a){return n(t[r][1][a]||a)},c,c.exports,a,t,e,o)}return e[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)n(o[r]);return n}({Byte_analytics:[function(a,t,e){"use strict";cc._RF.push(t,"a16597u6y5E55uQnpMqFCGN","Byte_analytics"),Object.defineProperty(e,"__esModule",{value:!0}),e.Byte_analytics=void 0;var o=function(){function a(){}return a.init=function(a){this.ge=new window.GravityEngineAPI(a)},a.ge=null,a}();e.Byte_analytics=o,cc._RF.pop()},{}],ShufenManager:[function(a,t,e){"use strict";cc._RF.push(t,"96dc0OzT0RL6K7Cl70Ja7Mk","ShufenManager"),Object.defineProperty(e,"__esModule",{value:!0}),e.ShufenEvent=void 0,e.ShufenEvent={login:"login",signup:"signup",custom:"custom",video:"video",prop:"prop",guide:"guide",level:"level",load:"load",onlineTime:"onlineTime"};var o=function(){function a(){}return a.report=function(t,o){void 0===o&&(o=!1),t&&t.event?t.event==e.ShufenEvent.load?1==t.type?(a.uuidStr=a.generateUUID(),a.uuidStr?(a.loadStartTime=a.getTime(),t.userId=a.uuidStr,t.len=0,a.send(t,o)):console.log(".....is loaded")):2==t.type?a.uuidStr?(a.loadStartTime?t.len=""+(a.getTime()-a.loadStartTime):t.len=0,t.userId=a.uuidStr,a.send(t,o)):console.log(".....is loaded 2"):console.error(".....shu fen load type error"):t.event==e.ShufenEvent.login?t.userId?(a.openid=t.userId,a.send(t,o)):console.error("......shufen no openid..."):a.send(t,o):console.error(".....shu fen data error")},a.sendAll=function(){if(a.sendT&&(clearTimeout(a.sendT),a.sendT=null),a.sendDataList.length>0){for(var t=0;t<a.sendDataList.length;t++){var e=a.sendDataList[t];a.send(e,!0)}a.sendDataList=[]}},a.send=function(t,e){if(t.appid||(t.appid=a.appid),t.userId||(t.userId=a.openid),t.timestamp||(t.timestamp=""+Math.floor(a.getTime()/1e3)),e){var o=a.object2String(t,"&")+"&"+a.secret;t.sign=a.getMD5(o),a.httpRequest(a.shufenUrl,t,null,null,"POST")}else a.sendDataList.length>0?(a.sendDataList.push(t),a.queueToSend()):a.send(t,!0)},a.queueToSend=function(){if(a.sendDataList.length>0){var t=a.sendDataList.shift();a.send(t,!0),a.sendDataList.length>0?a.sendT=setTimeout(function(){a.queueToSend()},50):a.sendT=null}},a.getTime=function(){return(new Date).getTime()},a.generateUUID=function(){var t="mj_rsck_local_uuid"+a.appid,e=cc.sys.localStorage.getItem(t);if(e&&e.length>0)return null;var o=(new Date).getTime(),n=Math.floor(o/1e5)%1e6,i="xx-xxx-yxx-xx".replace(/[xy]/g,function(a){var t=(o+16*Math.random())%16|0;return o=Math.floor(o/16),("x"==a?t:3&t|8).toString(16)}),r="mj_"+a.appid+"_"+n+"_"+i;return cc.sys.localStorage.setItem(t,r),r},a.object2String=function(a,t){for(var e=Object.keys(a).sort(),o="",n=0;n<e.length;n++)n==e.length-1?o+=e[n]+"="+a[e[n]]:o+=e[n]+"="+a[e[n]]+t;return console.log("\u6570\u636e1",o),o},a.getMD5=function(a){function t(a,t){return a<<t|a>>>32-t}function e(a,t){var e,o,n,i,r;return n=2147483648&a,i=2147483648&t,r=(1073741823&a)+(1073741823&t),(e=1073741824&a)&(o=1073741824&t)?2147483648^r^n^i:e|o?1073741824&r?3221225472^r^n^i:1073741824^r^n^i:r^n^i}function o(a,t,e){return a&t|~a&e}function n(a,t,e){return a&e|t&~e}function i(a,t,e){return a^t^e}function r(a,t,e){return t^(a|~e)}function p(a,n,i,r,p,l,s){return a=e(a,e(e(o(n,i,r),p),s)),e(t(a,l),n)}function l(a,o,i,r,p,l,s){return a=e(a,e(e(n(o,i,r),p),s)),e(t(a,l),o)}function s(a,o,n,r,p,l,s){return a=e(a,e(e(i(o,n,r),p),s)),e(t(a,l),o)}function c(a,o,n,i,p,l,s){return a=e(a,e(e(r(o,n,i),p),s)),e(t(a,l),o)}function u(a){var t,e="",o="";for(t=0;t<=3;t++)e+=(o="0"+(a>>>8*t&255).toString(16)).substr(o.length-2,2);return e}var d,h,m,f,z,y,g,v,b,S=new Array;for(S=function(a){for(var t,e=a.length,o=e+8,n=16*((o-o%64)/64+1),i=new Array(n-1),r=0,p=0;p<e;)r=p%4*8,i[t=(p-p%4)/4]=i[t]|a.charCodeAt(p)<<r,p++;return r=p%4*8,i[t=(p-p%4)/4]=i[t]|128<<r,i[n-2]=e<<3,i[n-1]=e>>>29,i}(a=function(a){a=a.replace(/\r\n/g,"\n");for(var t="",e=0;e<a.length;e++){var o=a.charCodeAt(e);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}(a)),y=1732584193,g=4023233417,v=2562383102,b=271733878,d=0;d<S.length;d+=16)h=y,m=g,f=v,z=b,y=p(y,g,v,b,S[d+0],7,3614090360),b=p(b,y,g,v,S[d+1],12,3905402710),v=p(v,b,y,g,S[d+2],17,606105819),g=p(g,v,b,y,S[d+3],22,3250441966),y=p(y,g,v,b,S[d+4],7,4118548399),b=p(b,y,g,v,S[d+5],12,1200080426),v=p(v,b,y,g,S[d+6],17,2821735955),g=p(g,v,b,y,S[d+7],22,4249261313),y=p(y,g,v,b,S[d+8],7,1770035416),b=p(b,y,g,v,S[d+9],12,2336552879),v=p(v,b,y,g,S[d+10],17,4294925233),g=p(g,v,b,y,S[d+11],22,2304563134),y=p(y,g,v,b,S[d+12],7,1804603682),b=p(b,y,g,v,S[d+13],12,4254626195),v=p(v,b,y,g,S[d+14],17,2792965006),y=l(y,g=p(g,v,b,y,S[d+15],22,1236535329),v,b,S[d+1],5,4129170786),b=l(b,y,g,v,S[d+6],9,3225465664),v=l(v,b,y,g,S[d+11],14,643717713),g=l(g,v,b,y,S[d+0],20,3921069994),y=l(y,g,v,b,S[d+5],5,3593408605),b=l(b,y,g,v,S[d+10],9,38016083),v=l(v,b,y,g,S[d+15],14,3634488961),g=l(g,v,b,y,S[d+4],20,3889429448),y=l(y,g,v,b,S[d+9],5,568446438),b=l(b,y,g,v,S[d+14],9,3275163606),v=l(v,b,y,g,S[d+3],14,4107603335),g=l(g,v,b,y,S[d+8],20,1163531501),y=l(y,g,v,b,S[d+13],5,2850285829),b=l(b,y,g,v,S[d+2],9,4243563512),v=l(v,b,y,g,S[d+7],14,1735328473),y=s(y,g=l(g,v,b,y,S[d+12],20,2368359562),v,b,S[d+5],4,4294588738),b=s(b,y,g,v,S[d+8],11,2272392833),v=s(v,b,y,g,S[d+11],16,1839030562),g=s(g,v,b,y,S[d+14],23,4259657740),y=s(y,g,v,b,S[d+1],4,2763975236),b=s(b,y,g,v,S[d+4],11,1272893353),v=s(v,b,y,g,S[d+7],16,4139469664),g=s(g,v,b,y,S[d+10],23,3200236656),y=s(y,g,v,b,S[d+13],4,681279174),b=s(b,y,g,v,S[d+0],11,3936430074),v=s(v,b,y,g,S[d+3],16,3572445317),g=s(g,v,b,y,S[d+6],23,76029189),y=s(y,g,v,b,S[d+9],4,3654602809),b=s(b,y,g,v,S[d+12],11,3873151461),v=s(v,b,y,g,S[d+15],16,530742520),y=c(y,g=s(g,v,b,y,S[d+2],23,3299628645),v,b,S[d+0],6,4096336452),b=c(b,y,g,v,S[d+7],10,1126891415),v=c(v,b,y,g,S[d+14],15,2878612391),g=c(g,v,b,y,S[d+5],21,4237533241),y=c(y,g,v,b,S[d+12],6,1700485571),b=c(b,y,g,v,S[d+3],10,2399980690),v=c(v,b,y,g,S[d+10],15,4293915773),g=c(g,v,b,y,S[d+1],21,2240044497),y=c(y,g,v,b,S[d+8],6,1873313359),b=c(b,y,g,v,S[d+15],10,4264355552),v=c(v,b,y,g,S[d+6],15,2734768916),g=c(g,v,b,y,S[d+13],21,1309151649),y=c(y,g,v,b,S[d+4],6,4149444226),b=c(b,y,g,v,S[d+11],10,3174756917),v=c(v,b,y,g,S[d+2],15,718787259),g=c(g,v,b,y,S[d+9],21,3951481745),y=e(y,h),g=e(g,m),v=e(v,f),b=e(b,z);return(u(y)+u(g)+u(v)+u(b)).toLowerCase()},a.httpRequest=function(a,t,e,o,n){void 0===n&&(n="GET");var i="";for(var r in t)i&&(i+="&"),i+=r+"="+t[r];var p=new XMLHttpRequest;p.onreadystatechange=function(){if(4==p.readyState)if(p.status>=200&&p.status<400){var t=p.responseText;if(console.log("\u8fd4\u56de\u6210\u529f",t),t){if(-1!=a.indexOf(".json"))n=JSON.parse(t);else var n=JSON.parse(t);o&&o(n,e)}else console.log("\u8fd4\u56de\u6570\u636e\u4e0d\u5b58\u5728"),o&&o(!1,e)}else console.log("\u8bf7\u6c42\u5931\u8d25"),o&&o(!1,e)},"GET"==n?(p.open("GET",a+"?"+i,!0),p.send()):(p.open("POST",a,!0),p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(i)),console.log("\u8c03\u7528\u94fe\u63a5\uff1a"+a+"?"+i)},a.appid="yr1lmttwpf89lwaw29ng",a.secret="bugj9akhlb2t23g91ieppkofbabx1j",a.shufenUrl="https://ddht.jinkezhexin.com/shufen/writeLog",a.loadStartTime=null,a.sendDataList=[],a.sendT=null,a.uuidStr=null,a.openid=null,a}();e.default=o,cc._RF.pop()},{}],ks_analytics:[function(a,t,e){"use strict";cc._RF.push(t,"ddb93iGOUtPtL4ZmYA8X8uq","ks_analytics"),Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function a(){}return a.init=function(t,e,o,n,i){if(void 0===t&&(t=""),void 0===e&&(e=""),void 0===o&&(o={}),void 0===n&&(n=function(){}),void 0===i&&(i=function(){}),""!=e){var r={app_id:t,js_code:e,query:JSON.stringify(o)};console.log("param",r),a.httpPost("init_code",r,function(a){console.log(a),null!=a.result?n(a):i(a)},"https://kszt-sdk.tianjinyuren.cn/ks")}else console.error("\u53c2\u6570code\u9519\u8bef")},a.init_uid=function(t,e,o,n,i,r){void 0===t&&(t=""),void 0===e&&(e=""),void 0===o&&(o="test_union_id"),void 0===n&&(n={}),void 0===i&&(i=function(){}),void 0===r&&(r=function(){});var p={app_id:t,open_id:e,union_id:o,query:JSON.stringify(n)};console.log("param",p),a.httpPost("init_uid",p,function(a){console.log(a),0==a.code?i(a):r(a)},"https://kszt-sdk.tianjinyuren.cn/ks")},a.ad_complete=function(t,e,o){void 0===t&&(t=""),void 0===e&&(e=function(){}),void 0===o&&(o=function(){});var n={open_id:t};a.httpPost("handle_ad_complete",n,function(a){console.log(a),0==a.code?e(a):o(a)},"https://kszt-sdk.tianjinyuren.cn/ks")},a.ad_exposure=function(t,e,o){void 0===t&&(t=""),void 0===e&&(e=function(){}),void 0===o&&(o=function(){});var n={open_id:t};a.httpPost("handle_ad_exposure",n,function(a){console.log(a),0==a.code?e(a):o(a)},"https://kszt-sdk.tianjinyuren.cn/ks")},a.httpGet=function(a,t,e,o){var n=new XMLHttpRequest,i=o+"/"+a;n.open("GET",i,!0),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var a=JSON.parse(n.responseText);null!==e&&e(a)}else console.error("httpGet status --\x3e",n.status)},n.send(t)},a.httpPost=function(a,t,e,o){var n=new XMLHttpRequest,i=o+"/"+a;n.open("POST",i,!0),n.setRequestHeader("Content-type","multipart/form-data"),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var a=JSON.parse(n.responseText);null!==e&&e(a)}else console.error("httpGet status --\x3e",n.status)},n.send(t)},a}();e.default=o,cc._RF.pop()},{}],pzaAES:[function(a,t,e){"use strict";cc._RF.push(t,"b3fcfx7pd9Mp7FHwnuJb1Jb","pzaAES"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAES=void 0;var o=a("./pzakc"),n=function(){function a(t){if(this.outMap={base64:a.base64,hex:a.hex,binary:function(a){return a}},this.inMap={base64:a.base64_to_binary,hex:a.str2hex,binary:function(a){return a}},this.modMap={cbc:{mEncrypt:function(t,e,o){e=a.pad(e);for(var n=new Uint8Array(e.length),i=o,r=0;r<e.length;r+=a.blockSize)i=t.encrypt(a.xor(e.slice(r,r+a.blockSize),i)),n.set(i,r);return n},mDecrypt:function(t,e,o){for(var n=new Uint8Array(e.length),i=o,r=0;r<e.length;r+=a.blockSize){var p=e.slice(r,r+a.blockSize);n.set(a.xor(t.decrypt(p),i),r),i=p}return a.unpad(n)}},cfb:{mEncrypt:function(t,e,o){for(var n=new Uint8Array(e.length),i=o,r=0;r<e.length;r+=a.blockSize)i=a.xor(e.slice(r,r+a.blockSize),t.encrypt(i)),n.set(i,r);return n},mDecrypt:function(t,e,o){for(var n=new Uint8Array(e.length),i=o,r=0;r<e.length;r+=a.blockSize){var p=e.slice(r,Math.min(r+a.blockSize,e.length));n.set(a.xor(p,t.encrypt(i)),r),i=p}return n}},ecb:{mEncrypt:function(t,e){if((e=a.pad(e)).length%a.blockSize!=0)throw"Message is not properly padded";for(var o=new Uint8Array(e.length),n=0;n<e.length;n+=a.blockSize)o.set(t.encrypt(e.slice(n,n+a.blockSize)),n);return o},mDecrypt:function(t,e){if(e.length%a.blockSize!=0)throw"Message is not properly padded";for(var o=new Uint8Array(e.length),n=0;n<e.length;n+=a.blockSize)o.set(t.decrypt(e.slice(n,n+a.blockSize)),n);return a.unpad(o)}}},this.opt={mode:"cbc",iv:new Uint8Array(16),padding:"pkcs5",output:"base64"},!t)throw new Error("AES requires key!");switch(t.length){case 16:this.NK=4,this.NR=10;break;case 24:this.NK=6,this.NR=12;break;case 32:this.NK=8,this.NR=14;break;default:throw new Error("AES supports only 16, 24 and 32 bytes keys!")}this.KEY=new Array(a.AES_NB*(this.NR+1)*4),this.expandKey(t)}return a.subWord=function(t){for(var e=0;e<4;e++)t[e]=a.AES_SBOX[16*((240&t[e])>>4)+(15&t[e])]},a.rotWord=function(a){for(var t=a[0],e=0;e<3;e++)a[e]=a[e+1];a[3]=t},a.gmult=function(a,t){for(var e=0,o=0,n=0;n<8;n++)1&t&&(e^=a),o=128&a,a<<=1,o&&(a^=27),t>>=1;return e},a.coefAdd=function(a,t,e){e[0]=a[0]^t[0],e[1]=a[1]^t[1],e[2]=a[2]^t[2],e[3]=a[3]^t[3]},a.coefMult=function(t,e,o){o[0]=a.gmult(t[0],e[0])^a.gmult(t[3],e[1])^a.gmult(t[2],e[2])^a.gmult(t[1],e[3]),o[1]=a.gmult(t[1],e[0])^a.gmult(t[0],e[1])^a.gmult(t[3],e[2])^a.gmult(t[2],e[3]),o[2]=a.gmult(t[2],e[0])^a.gmult(t[1],e[1])^a.gmult(t[0],e[2])^a.gmult(t[3],e[3]),o[3]=a.gmult(t[3],e[0])^a.gmult(t[2],e[1])^a.gmult(t[1],e[2])^a.gmult(t[0],e[3])},a.xor=function(a,t){for(var e=new Uint8Array(a.length),o=0;o<e.length;o++)e[o]=a[o]^t[o%t.length];return e},a.hex=function(a){for(var t="",e=0;e<a.length;e++)t+=a[e].toString(16).padStart(2,"0");return t},a.str2hex=function(a){if(a.length%2!=0)throw"Invalid hex format";for(var t=new Uint8Array(a.length>>1),e=0,o=0;o<a.length;o+=2)t[e++]=parseInt(a.substring(o,o+2),16);return t},a.concat=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];for(var e=a.reduce(function(a,t){return a+t.length},0),o=new Uint8Array(e),n=0,i=0;i<a.length;i++)o.set(a[i],n),n+=a[i].length;return o},a.random_bytes=function(a){for(var t=new Uint8Array(a),e=0;e<a;e++)t[e]=1+(254*Math.random()|0);return t},a.pad=function(a){var t=16*Math.ceil((a.length+1)/16),e=t-a.length,o=new Uint8Array(t);return o.set(a,0),o.set(new Array(e).fill(e),a.length),o},a.unpad=function(a){var t=a[a.length-1];return new Uint8Array(a.slice(0,a.length-t))},a.base64=function(t){return a.base64encode(String.fromCharCode.apply(null,t))},a.base64encode=function(t){var e,o,n,i,r,p;for(n=t.length,o=0,e="";o<n;){if(i=255&t.charCodeAt(o++),o==n){e+=a.base64EncodeChars.charAt(i>>2),e+=a.base64EncodeChars.charAt((3&i)<<4),e+="==";break}if(r=t.charCodeAt(o++),o==n){e+=a.base64EncodeChars.charAt(i>>2),e+=a.base64EncodeChars.charAt((3&i)<<4|(240&r)>>4),e+=a.base64EncodeChars.charAt((15&r)<<2),e+="=";break}p=t.charCodeAt(o++),e+=a.base64EncodeChars.charAt(i>>2),e+=a.base64EncodeChars.charAt((3&i)<<4|(240&r)>>4),e+=a.base64EncodeChars.charAt((15&r)<<2|(192&p)>>6),e+=a.base64EncodeChars.charAt(63&p)}return e},a.base64decode=function(t){var e,o,n,i,r,p,l;for(p=t.length,r=0,l="";r<p;){do{e=a.base64DecodeChars[255&t.charCodeAt(r++)]}while(r<p&&-1==e);if(-1==e)break;do{o=a.base64DecodeChars[255&t.charCodeAt(r++)]}while(r<p&&-1==o);if(-1==o)break;l+=String.fromCharCode(e<<2|(48&o)>>4);do{if(61==(n=255&t.charCodeAt(r++)))return l;n=a.base64DecodeChars[n]}while(r<p&&-1==n);if(-1==n)break;l+=String.fromCharCode((15&o)<<4|(60&n)>>2);do{if(61==(i=255&t.charCodeAt(r++)))return l;i=a.base64DecodeChars[i]}while(r<p&&-1==i);if(-1==i)break;l+=String.fromCharCode((3&n)<<6|i)}return l},a.utf16to8=function(a){var t,e,o,n;for(t="",o=a.length,e=0;e<o;e++)(n=a.charCodeAt(e))>=1&&n<=127?t+=a.charAt(e):n>2047?(t+=String.fromCharCode(224|n>>12&15),t+=String.fromCharCode(128|n>>6&63),t+=String.fromCharCode(128|n>>0&63)):(t+=String.fromCharCode(192|n>>6&31),t+=String.fromCharCode(128|n>>0&63));return t},a.utf8to16=function(a){var t,e,o,n,i,r;for(t="",o=a.length,e=0;e<o;)switch((n=a.charCodeAt(e++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=a.charAt(e-1);break;case 12:case 13:i=a.charCodeAt(e++),t+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=a.charCodeAt(e++),r=a.charCodeAt(e++),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&r)<<0)}return t},a.base64_to_binary=function(t){for(var e=a.base64decode(t),o=e.length,n=new Uint8Array(o),i=0;i<o;i++)n[i]=e.charCodeAt(i);return n},a.computeMessage=function(a){if("string"!=typeof a)return a;for(var t,e,o=a,n=[],i=0;i<o.length;i++){t=o.charCodeAt(i),e=[];do{e.push(255&t),t>>=8}while(t);n=n.concat(e.reverse())}return Uint8Array.from(n)},a.create=function(t,e){var n=a.computeMessage(t),i=new a(n);return e&&(o.default.forMap(i.opt,function(a){e[a]&&(i.opt[a]=e[a])}),"string"==typeof i.opt.iv&&(i.opt.iv=a.computeMessage(i.opt.iv))),i},a.prototype.encString=function(t){var e=this.modMap[this.opt.mode];if(!e)throw"Unknown mode:"+this.opt.mode;var o=e.mEncrypt(this,a.computeMessage(t),this.opt.iv);return(0,this.outMap[this.opt.output])(o)},a.prototype.Uint8ArrayToString=function(a){var t,e,o,n,i,r;for(t="",o=a.length,e=0;e<o;)switch((n=a[e++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(n);break;case 12:case 13:i=a[e++],t+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=a[e++],r=a[e++],t+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&r)<<0)}return t},a.prototype.decString=function(a){var t=this.modMap[this.opt.mode];if(!t)throw"Unknown mode:"+this.opt.mode;var e=this.inMap[this.opt.output],o=t.mDecrypt(this,e(a),this.opt.iv);return this.Uint8ArrayToString(o)},a.prototype.encrypt=function(a){var t=this.createState(a);this.addRoundKey(t,0);for(var e=1;e<this.NR;e++)this.subBytes(t),this.shiftRows(t),this.mixColumns(t),this.addRoundKey(t,e);return this.subBytes(t),this.shiftRows(t),this.addRoundKey(t,this.NR),this.stateToResult(t)},a.prototype.decrypt=function(a){var t=this.createState(a);this.addRoundKey(t,this.NR);for(var e=this.NR-1;e>=1;e--)this.shiftRows(t,!0),this.subBytes(t,!0),this.addRoundKey(t,e),this.mixColumns(t,!0);return this.shiftRows(t,!0),this.subBytes(t,!0),this.addRoundKey(t,0),this.stateToResult(t)},a.prototype.createState=function(t){for(var e=new Uint8Array(4*a.AES_NB),o=0;o<4;o++)for(var n=0;n<a.AES_NB;n++)e[a.AES_NB*o+n]=t[o+4*n];return e},a.prototype.stateToResult=function(t){for(var e=new Uint8Array(16),o=0;o<4;o++)for(var n=0;n<a.AES_NB;n++)e[o+4*n]=t[a.AES_NB*o+n];return e},a.prototype.expandKey=function(t){for(var e=new Array(4),o=a.AES_NB*(this.NR+1),n=0;n<this.NK;n++)this.KEY[4*n]=t[4*n],this.KEY[4*n+1]=t[4*n+1],this.KEY[4*n+2]=t[4*n+2],this.KEY[4*n+3]=t[4*n+3];for(n=this.NK;n<o;n++)e[0]=this.KEY[4*(n-1)],e[1]=this.KEY[4*(n-1)+1],e[2]=this.KEY[4*(n-1)+2],e[3]=this.KEY[4*(n-1)+3],n%this.NK==0?(a.rotWord(e),a.subWord(e),a.coefAdd(e,a.roundConstant(n/this.NK),e)):this.NK>6&&n%this.NK==4&&a.subWord(e),this.KEY[4*n]=this.KEY[4*(n-this.NK)]^e[0],this.KEY[4*n+1]=this.KEY[4*(n-this.NK)+1]^e[1],this.KEY[4*n+2]=this.KEY[4*(n-this.NK)+2]^e[2],this.KEY[4*n+3]=this.KEY[4*(n-this.NK)+3]^e[3]},a.roundConstant=function(t){if(1==t)a.AES_R[0]=1;else if(t>1)for(a.AES_R[0]=2,t--;t-1>0;)a.AES_R[0]=a.gmult(a.AES_R[0],2),t--;return a.AES_R},a.prototype.addRoundKey=function(t,e){for(var o=0;o<a.AES_NB;o++)t[o]^=this.KEY[4*a.AES_NB*e+4*o],t[a.AES_NB+o]^=this.KEY[4*a.AES_NB*e+4*o+1],t[2*a.AES_NB+o]^=this.KEY[4*a.AES_NB*e+4*o+2],t[3*a.AES_NB+o]^=this.KEY[4*a.AES_NB*e+4*o+3]},a.prototype.mixColumns=function(t,e){void 0===e&&(e=!1);for(var o=e?[14,9,13,11]:[2,1,1,3],n=new Array(4),i=new Array(4),r=0;r<a.AES_NB;r++){for(var p=0;p<4;p++)n[p]=t[a.AES_NB*p+r];for(a.coefMult(o,n,i),p=0;p<4;p++)t[a.AES_NB*p+r]=i[p]}},a.prototype.shiftRows=function(t,e){void 0===e&&(e=!1);for(var o=1;o<4;o++)for(var n=0;n<o;){var i=e?t[a.AES_NB*o+a.AES_NB-1]:t[a.AES_NB*o+0];if(e){for(var r=a.AES_NB-1;r>0;r--)t[a.AES_NB*o+r]=t[a.AES_NB*o+r-1];t[a.AES_NB*o]=i}else{for(r=1;r<a.AES_NB;r++)t[a.AES_NB*o+r-1]=t[a.AES_NB*o+r];t[a.AES_NB*o+a.AES_NB-1]=i}n++}},a.prototype.subBytes=function(t,e){void 0===e&&(e=!1);for(var o=e?a.AES_INVERSE_SBOX:a.AES_SBOX,n=0;n<4;n++)for(var i=0;i<a.AES_NB;i++){var r=(240&t[a.AES_NB*n+i])>>4,p=15&t[a.AES_NB*n+i];t[a.AES_NB*n+i]=o[16*r+p]}},a.AES_NB=4,a.AES_SBOX=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],a.AES_INVERSE_SBOX=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],a.AES_R=[2,0,0,0],a.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a.base64DecodeChars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),a.blockSize=16,a}();e.pzaAES=n,cc._RF.pop()},{"./pzakc":"pzakc"}],pzaATest:[function(a,t,e){"use strict";cc._RF.push(t,"00f4e7Fz0RATYep1rVwZB7o","pzaATest");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaATest=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sp1=null,t.sp2=null,t.sp3=null,t.sp4=null,t.sp5=null,t.pic1=null,t.pic2=null,t.theSlot=null,t.atlasSlotAttMap=new Map,t}return n(t,a),t.prototype.onLoad=function(){var a=this;this.sp2.node.active=!1,this.initAtlasSlot(),this.scheduleOnce(function(){a.changeA()},1),this.scheduleOnce(function(){a.changeB()},2)},t.prototype.initAtlasSlot=function(){for(var a=this.sp2._skeleton.slots,t=0;t<a.length;t++){var e=a[t],o=e.getAttachment();o&&this.atlasSlotAttMap.set(e.data.name,o)}},t.prototype.setSlotAtt=function(a,t,e,o,n){var i=a.findSlot(e);if(i)if(t){var r=this.atlasSlotAttMap.get(t);if(r){var p=r.copy();return p.x=o,p.y=n,p.updateOffset(),i.setAttachment(p),i}console.log("atlasSlotName\u4e0d\u5b58\u5728",t)}else i.setAttachment(null);else console.log("targetSlotName\u4e0d\u5b58\u5728",e)},t.prototype.changeB=function(){var a=this;this.sp3.setSkin("1zombie"),this.setSlotAtt(this.sp3,"5body1","5body",262.41,-1.5),this.scheduleOnce(function(){a.setSlotAtt(a.sp3,"10pr","10pr",-11.57,78.5),a.sp3.paused=!0},2),this.scheduleOnce(function(){a.setSlotAtt(a.sp3,null,"10pr",0,0),a.setSlotAtt(a.sp3,"5body3","5body",262.41,-1.5),a.sp3.timeScale=1},5)},t.prototype.changeA=function(){console.log("pic1",this.pic1.spriteFrame);var a=this.pic1.spriteFrame._texture,t=new sp.SkeletonTexture;t.setRealTexture(a),t._image=a._image;var e=this.pic1.spriteFrame._rect,o=new sp.spine.TextureAtlasPage;o.name=a.name,o.uWrap=sp.spine.TextureWrap.ClampToEdge,o.vWrap=sp.spine.TextureWrap.ClampToEdge,o.texture=t,o.texture.setWraps(o.uWrap,o.vWrap),o.width=e.width,o.height=e.height;var n=new sp.spine.TextureAtlasRegion;n.page=o,n.width=e.width,n.height=e.height,n.originalWidth=a.width,n.originalHeight=a.height,n.offsetX=e.x,n.offsetY=e.y,n.rotate?(n.u=e.x/a.width,n.v=e.y/a.height,n.u2=(e.x+e.height)/a.width,n.v2=(e.y+e.width)/a.height):(n.u=e.x/a.width,n.v=e.y/a.height,n.u2=(e.x+e.width)/a.width,n.v2=(e.y+e.height)/a.height,console.log("\u4e0d\u8f6c")),n.texture=t,console.log("region",n);var i=this.sp1.findSlot("head").getAttachment();i.region=n,i instanceof sp.spine.MeshAttachment?i.updateUVs():i.updateOffset(),console.log("changeA")},i([l(sp.Skeleton)],t.prototype,"sp1",void 0),i([l(sp.Skeleton)],t.prototype,"sp2",void 0),i([l(sp.Skeleton)],t.prototype,"sp3",void 0),i([l(sp.Skeleton)],t.prototype,"sp4",void 0),i([l(sp.Skeleton)],t.prototype,"sp5",void 0),i([l(cc.Sprite)],t.prototype,"pic1",void 0),i([l(cc.Sprite)],t.prototype,"pic2",void 0),i([p],t)}(cc.Component);e.pzaATest=s,cc._RF.pop()},{}],pzaAbsorbIronEquip:[function(a,t,e){"use strict";cc._RF.push(t,"d06f0s2FhRHL5NufHOcxmir","pzaAbsorbIronEquip");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAbsorbIronEquip=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=a("../Data/pzaZombieEnum"),s=a("../../Common/pzaGameCommonPool"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.atlasSpine=null,t.jackBoxAni=null,t.poolPrefab=null,t.absorbFlying=!0,t.returnTime=0,t.plantData=null,t}return n(t,a),t.prototype.init=function(a,t,e,o){var n=this;if(void 0===o&&(o=0),null!=a&&null!=t&&null!=t.zombieData){this.plantData=a,this.node.zIndex=5;var i=cc.v2(0,100);switch(this.atlasSpine.node.active=!0,this.jackBoxAni.node.active=!1,this.atlasSpine.paused=!0,t.zombieData.zombieType){case l.pzaZombieEnum.BUCKET_HEAD_ZOMBIE:case l.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE:e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("3hat3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("3hat2"):this.atlasSpine.setSkin("3hat1");break;case l.pzaZombieEnum.SCREEN_DOOR_ZOMBIE:case l.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2:e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("4door3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("4door2"):this.atlasSpine.setSkin("4door1");break;case l.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3:case l.pzaZombieEnum.GARGANTUAR2:this.createZjAni(e,o);break;case l.pzaZombieEnum.GARGANTUAR3:this.createZjAni(e,o,1);break;case l.pzaZombieEnum.FOOTBALL_ZOMBIE:e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("6hat3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("6hat2"):this.atlasSpine.setSkin("6hat1");break;case l.pzaZombieEnum.JACK_ZOMBIE:this.jackBoxAni.node.active=!0,this.atlasSpine.node.active=!1,this.jackBoxAni.pauseAnimation(),i=cc.v2(10,60);break;case l.pzaZombieEnum.POGO_ZOMBIE:e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("13pr3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("13pr2"):this.atlasSpine.setSkin("13pr1");break;case l.pzaZombieEnum.DIGGER_ZOMBIE:case l.pzaZombieEnum.DIGGERFOOTBALL_ZOMBIE2:this.atlasSpine.setSkin("20pr2");break;case l.pzaZombieEnum.LADDER_ZOMBIE:e==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("14pr3"):e==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("14pr2"):this.atlasSpine.setSkin("14pr1")}if(null!=t.logicPos&&this.node.setPosition(t.logicPos.clone()),null!=a.logicPos){var r=a.logicPos.clone();null!=i&&(r.x+=i.x,r.y+=i.y),this.absorbFlying=!0,this.node.runAction(cc.sequence(cc.moveTo(.5,r),cc.callFunc(function(){n.absorbFlying=!1,n.returnTime=10,n.node.zIndex=10*-a.yIndex})))}}},t.prototype.createZjAni=function(a,t,e){void 0===t&&(t=0),void 0===e&&(e=0),2==t?a==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("4door3"):a==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("4door2"):this.atlasSpine.setSkin("4door1"):1==t&&(1==e?a==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("7hat3"):a==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("7hat2"):this.atlasSpine.setSkin("7hat1"):a==l.pzaHurtStateEnum.DYING?this.atlasSpine.setSkin("3hat3"):a==l.pzaHurtStateEnum.HURT?this.atlasSpine.setSkin("3hat2"):this.atlasSpine.setSkin("3hat1"))},t.prototype.labbyInit=function(a,t){var e=this;if(this.plantData=a,this.node.zIndex=5,this.jackBoxAni.node.active=!1,this.atlasSpine.node.active=!0,null!=t.logicPos&&this.node.setPosition(t.logicPos.clone()),null!=a.logicPos){var o=a.logicPos.clone();this.absorbFlying=!0,this.node.runAction(cc.sequence(cc.moveTo(.5,o),cc.callFunc(function(){e.absorbFlying=!1,e.returnTime=10,e.node.zIndex=10*-a.yIndex})))}},t.prototype.logicUpdate=function(a){this.absorbFlying||(null==this.plantData||this.plantData.isDead?this.close():(this.returnTime-=a,this.returnTime<=0&&this.close()))},t.prototype.pauseSelf=function(){this.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.node.resumeAllActions()},t.prototype.close=function(){this.poolPrefab?s.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([d(sp.Skeleton)],t.prototype,"atlasSpine",void 0),i([d(p.pzaSpineController)],t.prototype,"jackBoxAni",void 0),i([d(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([u],t)}(r.pzaBaseComponent);e.pzaAbsorbIronEquip=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaZombieEnum":"pzaZombieEnum"}],pzaAchieveItem:[function(a,t,e){"use strict";cc._RF.push(t,"3d125L0iahI36Dm6qIZMrRf","pzaAchieveItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaWorldEventManager"),c=a("../Load/pzaBundleObjectPool"),u=a("./pzaAchieveMgr"),d=a("./pzaAchieveRewardItem"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.t_name=null,t.t_desc=null,t.reward_prefab=null,t.pic_icon=null,t.pic_bg=null,t.bt_reward=null,t.reward_rec=null,t.reward=null,t.rewardContainer=null,t.special=null,t.achieve=null,t.bg_res=null,t.rewardItems=null,t}return n(t,a),t.prototype.onEnable=function(){s.pzaWorldEventManager.addListener(s.pzaWorldEventType.SPECIAL_ACH,this.showSpecial,this),this.bt_reward.on(cc.Node.EventType.TOUCH_END,this.clickRecieveReward,this)},t.prototype.onDisable=function(){s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.SPECIAL_ACH,this.showSpecial,this),this.bt_reward.off(cc.Node.EventType.TOUCH_END,this.clickRecieveReward,this)},t.prototype.show=function(a,t,e){return void 0===e&&(e=null),this.achieve=t,this.bg_res=e,this.node.active=!0,this.node.parent=a.container,this.special.active=!1,this.updateUI(!0),this.showRewards(),this},t.prototype.updateUI=function(a){var t=this;return null!=this.achieve&&36==this.achieve.id&&0==this.achieve.state?(this.t_desc.node.active=!1,this.t_name.node.active=!1,void(this.pic_icon.node.active=!1)):this.achieve?(this.t_desc.node.active=!0,this.t_name.node.active=!0,this.pic_icon.node.active=!0,a&&(this.t_name.string=this.achieve.name,this.t_desc.string=this.achieve.desc),c.pzaBundleObjectPool.requestSpriteFrameByAtlas("Texture/Achieve2",this.achieve.icon,function(a,e){e&&t.pic_icon&&(t.pic_icon.spriteFrame=e)}),this.achieve.state?(this.pic_icon.node.opacity=255,36===this.achieve.id&&(this.t_desc.string=this.achieve.desc.replace("100",p.pzaLocalData.data.specailAchTime.toFixed(2)))):this.pic_icon.node.opacity=80,this.bt_reward.active=1===this.achieve.state,this.reward_rec.active=2===this.achieve.state,void(this.reward.active=!0)):(this.t_desc.node.active=!1,this.t_name.node.active=!1,this.pic_icon.node.active=!1,void(this.bg_res&&c.pzaBundleObjectPool.requestSpriteFrameByAtlas("Texture/Achieve2",this.bg_res,function(a,e){e&&t.pic_bg&&(t.pic_bg.spriteFrame=e)})))},t.prototype.showRewards=function(){if(this.achieve){this.reward.active=!0;var a=this.achieve.reward;null!=this.rewardItems&&this.rewardItems.forEach(function(a){r.pzaGameCommonPool.returnInstant(a.node)}),this.rewardItems=[];for(var t=0;t<a.length;t++){var e=a[t].split("_"),o=parseInt(e[0]),n=parseInt(e[1]),i=r.pzaGameCommonPool.requestInstant(this.reward_prefab),p=i.getComponent(d.pzaAchieveRewardItem);p.init(o,n),this.rewardItems.push(p),i.parent=this.rewardContainer,i.setPosition(0,0),i.active=!0}null!=this.achieve&&36==this.achieve.id&&0==this.achieve.state&&(this.reward.active=!1)}else this.reward.active=!1},t.prototype.showSpecial=function(){"achieve_i_3"==this.bg_res&&(this.special.active=!0)},t.prototype.clickRecieveReward=function(){null!=this.achieve&&(l.pzaSoundManager.playSFX(),u.default.instance().obtainReward(this.achieve.id),this.bt_reward.active=!1,this.reward_rec.active=!0)},i([f({displayName:"\u6210\u5c31\u540d",type:cc.Label})],t.prototype,"t_name",void 0),i([f({displayName:"\u6210\u5c31\u63cf\u8ff0",type:cc.Label})],t.prototype,"t_desc",void 0),i([f({displayName:"\u5956\u52b1\u5185\u5bb9\u9884\u8bbe",type:cc.Prefab})],t.prototype,"reward_prefab",void 0),i([f({displayName:"\u6210\u5c31icon",type:cc.Sprite})],t.prototype,"pic_icon",void 0),i([f({displayName:"\u6210\u5c31\u9879\u80cc\u666f",type:cc.Sprite})],t.prototype,"pic_bg",void 0),i([f({displayName:"\u5956\u52b1\u6309\u94ae",type:cc.Node})],t.prototype,"bt_reward",void 0),i([f({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],t.prototype,"reward_rec",void 0),i([f({displayName:"\u5956\u52b1\u7236\u8282\u70b9",type:cc.Node})],t.prototype,"reward",void 0),i([f({displayName:"\u5956\u52b1\u5bb9\u5668",type:cc.Node})],t.prototype,"rewardContainer",void 0),i([f({displayName:"\u7279\u6b8a\u6210\u5c31\u8fbe\u6210\u63d0\u793a",type:cc.Node})],t.prototype,"special",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","./pzaAchieveMgr":"pzaAchieveMgr","./pzaAchieveRewardItem":"pzaAchieveRewardItem"}],pzaAchieveMgr:[function(a,t,e){"use strict";cc._RF.push(t,"0b984szx4VDnYKdQmGVCQ6w","pzaAchieveMgr"),Object.defineProperty(e,"__esModule",{value:!0});var o=a("../Battle/pzaGameState"),n=a("../Common/pzaGamePropConfig"),i=a("../Common/pzaLocalData"),r=a("../Common/pzaRewardManager"),p=a("../Common/pzaTipManager"),l=a("../utils/pzaResMgr"),s=a("../utils/pzakc"),c=a("./pzaAchieve"),u=function(){function a(){this.achieveMap=null,this.list=null}return a.instance=function(){return a._me||(a._me=new a),a._me},a.prototype.init=function(a){this.achieveMap=new Map;for(var t=[],e=[],o=[],n=i.pzaLocalData.data.achieves||{},r=0;r<a.length;r++){var p=new c.pzaAchieve(a[r]),l=n[""+p.id];p.state=l||0,this.achieveMap.set(p.id,p),1==l?t.push(p):2==l?o.push(p):p.id<36&&e.push(p)}this.list=t.concat(e).concat(o),this.checkAddAchieve(c.pzaAchieveType.ACH_4,i.pzaLocalData.data.ownPlants.length,!1)},a.prototype.refreshConf=function(){this.init(l.pzaResMgr.instance().getConf("a14"))},a.prototype.getAchieve=function(a){return this.achieveMap.get(a)},a.prototype.canGetAchieve=function(a,t){var e=this.achieveMap.get(a);return e?!e.state&&(t>=e.condNum?(this.addAchieve(a),!0):void 0):(console.error("\u65e0\u6210\u5c31id",a),!1)},a.prototype.hasAchieve=function(a){return this.achieveMap.has(a)},a.prototype.addAchieve=function(a,t){void 0===t&&(t=1);var e=this.achieveMap.get(a);e&&(e.state=t,i.pzaLocalData.data.achieves[""+a]=t,i.pzaLocalData.addDirty("achieves"),s.default.sendMsg("achieveUpdate"))},a.prototype.obtainReward=function(a){var t=this.achieveMap.get(a);if(t){t.state=2,i.pzaLocalData.data.achieves[""+a]=2,i.pzaLocalData.addDirty("achieves"),s.default.sendMsg("achieveUpdate");var e=[];null!=t.reward&&t.reward.forEach(function(a){if(null!=a){var t=a.split("_"),o=new n.pzaRewardPropData(parseInt(t[0]),parseInt(t[1]));e.push(o)}}),r.pzaRewardManager.recieveRewards(e)}else console.error("\u65e0\u6b64\u6210\u5c31id",a)},a.prototype.getAchieveList=function(){return this.list?this.list:(this.refreshConf(),this.list)},a.prototype.obtainPlant=function(){for(var a=i.pzaLocalData.getAdvancedPlant(),t=0;t<a;t++){var e=this.achieveMap.get(c.pzaAchieveType.ACH_28+t);e&&0==e.state&&(e.state=1,i.pzaLocalData.data.achieves[""+e.id]=1,i.pzaLocalData.addDirty("achieves"))}this.checkAddAchieve(c.pzaAchieveType.ACH_4,i.pzaLocalData.data.ownPlants.length,!1)},a.prototype.addMature=function(){var a=this.achieveMap.get(c.pzaAchieveType.ACH_26);null!=a&&0==a.state&&(i.pzaLocalData.data.maturePlantCount++,i.pzaLocalData.addDirty("maturePlantCount"),a.condNum<=i.pzaLocalData.data.maturePlantCount&&(a.state=1,i.pzaLocalData.data.achieves[""+a.id]=1,i.pzaLocalData.addDirty("achieves")))},a.prototype.addGardenPlant=function(a){if(!i.pzaLocalData.data.hasGardenPlants.includes(a)&&(i.pzaLocalData.data.hasGardenPlants.push(a),i.pzaLocalData.addDirty("hasGardenPlants"),i.pzaLocalData.data.hasGardenPlants.length>=39)){var t=this.achieveMap.get(c.pzaAchieveType.ACH_25);if(null==t||0!=t.state)return;t.state=1,i.pzaLocalData.data.achieves[""+t.id]=1,i.pzaLocalData.addDirty("achieves")}},a.prototype.checkAddAchieve=function(a,t,e){if(void 0===t&&(t=1),void 0===e&&(e=!0),!(o.pzaGameState.isZombieMode()||o.pzaGameState.isVaseMode()||o.pzaGameState.isCreativeVaseMode()||o.pzaGameState.isCreativeTrad()||o.pzaGameState.isZjMode()||null==a||o.pzaGameState.achieveArr.includes(a))){var n=this.getAchieve(a);if(null!=n&&0==n.state&&!(n.condNum>t)&&(o.pzaGameState.achieveArr.push(a),this.addAchieve(a),e)){var i=n.name+" \u6210\u5c31\u8fbe\u6210";p.pzaTipManager.showGameTip(i)}}},a._me=null,a}();e.default=u,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaTipManager":"pzaTipManager","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaAchieve":"pzaAchieve"}],pzaAchieveRewardItem:[function(a,t,e){"use strict";cc._RF.push(t,"3acbcbOR+RH8YDGyBTTqyU6","pzaAchieveRewardItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAchieveRewardItem=void 0;var r=a("../Common/pzaGamePropConfig"),p=a("../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.proIcon=null,t.propAni=null,t.propCount=null,t}return n(t,a),t.prototype.init=function(a,t){if(null!=a){switch(a){case r.pzaGamePropEnum.PROP_COIN:this.proIcon.node.active=!0,this.propAni.node.active=!1;break;case r.pzaGamePropEnum.PROP_CHERRY_BOMB:case r.pzaGamePropEnum.PROP_AUTO_PICK:case r.pzaGamePropEnum.PROP_FREE_SUN:this.proIcon.node.active=!1,this.propAni.node.active=!0,a==r.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAni.playAnimation("3ui_1",!0):a==r.pzaGamePropEnum.PROP_AUTO_PICK?this.propAni.playAnimation("2ui_1",!0):a==r.pzaGamePropEnum.PROP_FREE_SUN&&this.propAni.playAnimation("1ui_1",!0)}this.propCount.string="x"+t}},i([c({displayName:"\u9053\u5177\u56fe\u6807",type:cc.Sprite})],t.prototype,"proIcon",void 0),i([c({displayName:"\u9053\u5177\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"propAni",void 0),i([c({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],t.prototype,"propCount",void 0),i([s],t)}(cc.Component);e.pzaAchieveRewardItem=u,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaSpineController":"pzaSpineController"}],pzaAchieveView:[function(a,t,e){"use strict";cc._RF.push(t,"e73c0q6S7BLdbS1+m2BEFUd","pzaAchieveView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaLocalData"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaStatisticsMgr"),s=a("../Common/pzaWorldEventManager"),c=a("../Load/pzaBundleObjectPool"),u=a("../View/pzaCommonMask"),d=a("../utils/pzakc"),h=a("./pzaAchieveItem"),m=a("./pzaAchieveMgr"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.container=null,t.bt_home=null,t.popup=null,t.scrollView=null,t.prefab_top=null,t.prefab_item=null,t.scrollBegin=0,t.scrollBottomTime=0,t.itemArr=[],t.homeView=null,t}var e;return n(t,a),e=t,t.prototype.onEnable=function(){var a=this;l.pzaStatisticsMgr.sendEvent("System",{name:"system",value:2}),this.bt_home.on(cc.Node.EventType.TOUCH_END,this.clickHome,this),d.default.delMsgReciever("achieveUpdate"),d.default.regMsgReciever("achieveUpdate",function(){return a.refreshList(),!1}),m.default.instance().getAchieve(36)&&m.default.instance().getAchieve(36).state||(this.scrollView.node.on("scroll-began",function(){a.scrollBegin||(a.scrollBegin=Date.now(),console.log("\u5f00\u59cb\u6eda\u52a8!!",a.scrollBegin))},this),this.scrollView.node.on("scroll-ended",function(){a.scrollBegin<=0||a.scrollView.getScrollOffset().y+5<a.scrollView.getMaxScrollOffset().y||(a.scrollBottomTime=(Date.now()-a.scrollBegin)/1e3,console.log("\u5230\u5e95\u4e86!!",a.scrollBottomTime),r.pzaLocalData.data.specailAchTime=a.scrollBottomTime,r.pzaLocalData.addDirty("specailAchTime"),m.default.instance().addAchieve(36),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.SPECIAL_ACH,null),a.scrollBegin=-1)},this))},t.prototype.onDisable=function(){e.instance=null,this.scrollBegin=0,this.bt_home.off(cc.Node.EventType.TOUCH_END,this.clickHome,this),d.default.delMsgReciever("achieveUpdate"),this.scrollView.node.off("scroll-began"),this.scrollView.node.off("scroll-ended")},t.prototype.clickHome=function(){var a=this;p.pzaSoundManager.playSFX(),cc.tween(this.homeView.node).to(.5,{y:0},{easing:"cubicOut"}).call(function(){a.node.active=!1}).start()},t.prototype.show=function(a){return this.node?(this.homeView=a,this.node.active=!0,this.itemArr=[],this.node.parent=a.achUI,this.node.setPosition(0,-360),this.refreshList(),this.scrollView.scrollToTop(),cc.tween(this.homeView.node).to(.5,{y:720},{easing:"cubicOut"}).start(),this):null},t.prototype.refreshList=function(){if(this.itemArr&&this.itemArr.length>0)for(var a=this.itemArr.length,t=0;t<a;t++)(n=this.itemArr[t])&&n.achieve&&n.updateUI(!1);else{d.default.removeNodeChildren(this.container),this.itemArr=[],this.container.addChild(cc.instantiate(this.prefab_top));var e=m.default.instance().getAchieveList();if(e){for(t=0;t<e.length;t++){var o=e[t],n=cc.instantiate(this.prefab_item).getComponent(h.default);this.itemArr.push(n.show(this,o,null))}for(t=1;t<=3;t++){for(var i=0;i<15;i++)cc.instantiate(this.prefab_item).getComponent(h.default).show(this,null,null);(n=cc.instantiate(this.prefab_item).getComponent(h.default)).show(this,null,"achieve_i_"+t)}u.pzaCommonMask.hideMask()}}},t.show=function(a){if(e.instance)return m.default.instance().refreshConf(),void e.instance.show(a);u.pzaCommonMask.showMask(!0),c.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Achieve/AchieveView",!1,function(t,o){!t&&o?(m.default.instance().refreshConf(),e.instance=o.getComponent(e).show(a)):console.error(t)})},t.instance=null,i([y({displayName:"\u6210\u5c31\u5bb9\u5668",type:cc.Node})],t.prototype,"container",void 0),i([y({displayName:"\u8fd4\u56dehome\u6309\u94ae",type:cc.Node})],t.prototype,"bt_home",void 0),i([y({displayName:"\u5f39\u7a97\u5c42",type:cc.Node})],t.prototype,"popup",void 0),i([y(cc.ScrollView)],t.prototype,"scrollView",void 0),i([y(cc.Prefab)],t.prototype,"prefab_top",void 0),i([y(cc.Prefab)],t.prototype,"prefab_item",void 0),e=i([z],t)}(cc.Component);e.default=g,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../View/pzaCommonMask":"pzaCommonMask","../utils/pzakc":"pzakc","./pzaAchieveItem":"pzaAchieveItem","./pzaAchieveMgr":"pzaAchieveMgr"}],pzaAchieve:[function(a,t,e){"use strict";cc._RF.push(t,"ce8dfzoBBFECoL0EhxMStB9","pzaAchieve"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAchieveType=e.pzaAchieve=void 0;var o=a("../utils/pzakc");e.pzaAchieve=function(a){this.id=0,this.name="",this.desc="",this.icon="",this.reward=[],this.condNum=0,this.state=0,this.id=a.id,this.name=a.name||"",this.desc=a.desc||"",this.icon=a.icon||"",this.reward=o.default.strArr(a.reward),this.condNum=a.condNum||0},function(a){a[a.ACH_1=1]="ACH_1",a[a.ACH_2=2]="ACH_2",a[a.ACH_3=3]="ACH_3",a[a.ACH_4=4]="ACH_4",a[a.ACH_5=5]="ACH_5",a[a.ACH_6=6]="ACH_6",a[a.ACH_7=7]="ACH_7",a[a.ACH_8=8]="ACH_8",a[a.ACH_9=9]="ACH_9",a[a.ACH_10=10]="ACH_10",a[a.ACH_11=11]="ACH_11",a[a.ACH_12=12]="ACH_12",a[a.ACH_13=13]="ACH_13",a[a.ACH_14=14]="ACH_14",a[a.ACH_15=15]="ACH_15",a[a.ACH_16=16]="ACH_16",a[a.ACH_17=17]="ACH_17",a[a.ACH_18=18]="ACH_18",a[a.ACH_19=19]="ACH_19",a[a.ACH_20=20]="ACH_20",a[a.ACH_21=21]="ACH_21",a[a.ACH_22=22]="ACH_22",a[a.ACH_23=23]="ACH_23",a[a.ACH_25=25]="ACH_25",a[a.ACH_26=26]="ACH_26",a[a.ACH_27=27]="ACH_27",a[a.ACH_28=28]="ACH_28",a[a.ACH_29=29]="ACH_29",a[a.ACH_30=30]="ACH_30",a[a.ACH_31=31]="ACH_31",a[a.ACH_32=32]="ACH_32",a[a.ACH_33=33]="ACH_33",a[a.ACH_34=34]="ACH_34",a[a.ACH_35=35]="ACH_35",a[a.ACH_38=38]="ACH_38"}(e.pzaAchieveType||(e.pzaAchieveType={})),cc._RF.pop()},{"../utils/pzakc":"pzakc"}],pzaAdNative:[function(a,t,e){"use strict";cc._RF.push(t,"cfc56ai9w5HdaBb5+sG/urM","pzaAdNative");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaChannel"),p=a("./pzakc"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.pic=null,t.close=null,t.clickArea=null,t.adKey=null,t.adList=null,t}return n(t,a),t.prototype.onLoad=function(){var a=this;this.close.on(cc.Node.EventType.TOUCH_END,function(){p.default.log("\u539f\u751f\u5c06\u5173\u95ed");var t=r.pzaChannel.instance().getCtrl("p8");t&&Math.random()<t/100&&r.pzaChannel.instance().reportAdClick(a.adKey),a.hide()}),this.clickArea.on(cc.Node.EventType.TOUCH_END,function(){p.default.log("\u539f\u751f\u70b9\u51fb"),r.pzaChannel.instance().reportAdClick(a.adKey),a.adKey.indexOf("Icon")<0&&a.hide()})},t.prototype.hide=function(){this.node.active=!1,r.pzaChannel.instance().closeNative(this.adKey),this.node.destroy()},t.prototype.show=function(a,t,e,o){var n=this;this.adKey=e,this.adList=o,p.default.log("\u539f\u751f\u5f00\u59cbshow",e,o);var i=o[0];if(i){var l=i.icon;if(i.imgUrlList&&i.imgUrlList.length>0?l=i.imgUrlList[0]:i.iconUrlList&&i.iconUrlList>0&&(l=i.iconUrlList[0]),p.default.log("\u539f\u751fpicUrl:",l),l){var s=".jpg";-1!=l.indexOf(".png")?s=".png":-1!=l.indexOf(".jpg")?s=".jpg":-1!=l.indexOf(".jpeg")&&(s=".jpeg"),cc.assetManager.loadRemote(l,{ext:s},function(o,l){if(o)return p.default.err("\u539f\u751f\u56fe\u7247\u52a0\u8f7d\u5931\u8d25",s,o),void r.pzaChannel.instance().closeNative(n.adKey);var c=new cc.SpriteFrame(l);n.pic.spriteFrame=c,p.default.log("adid==",i.adId);var u=r.pzaChannel.instance().getCtrl("p2");u>0&&n.adKey.indexOf("nsert")>0?setTimeout(function(){n.node.active=!0,n.node.parent=a,n.node.setPosition(t),r.pzaChannel.instance().reportAdShow(e,n.node)},1e3*u):(n.node.active=!0,n.node.parent=a,n.node.setPosition(t),r.pzaChannel.instance().reportAdShow(e,n.node))})}}},i([c(cc.Sprite)],t.prototype,"pic",void 0),i([c(cc.Node)],t.prototype,"close",void 0),i([c(cc.Node)],t.prototype,"clickArea",void 0),i([s],t)}(cc.Component);e.default=u,cc._RF.pop()},{"./pzaChannel":"pzaChannel","./pzakc":"pzakc"}],pzaAssessView:[function(a,t,e){"use strict";cc._RF.push(t,"173b5FvLf5FWof0z0h/yswq","pzaAssessView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAssessView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaGameZJ"),u=a("../../Common/pzaLocalData"),d=a("../../Common/pzaNodeManager"),h=a("../../Common/pzaUIManager"),m=a("../../Common/pzaUtil"),f=a("../../Common/pzaWorldEventManager"),z=a("../../Load/pzaPreLoadManager"),y=a("../../utils/pzaChannel"),g=a("../../utils/pzaResMgr"),v=a("../pzaWarningView"),b=a("./pzaBattleDownView"),S=cc._decorator,P=S.ccclass,C=S.property,D=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.assessNode=null,t.noAssessNode=null,t.backBtn=null,t.backTxt=null,t.reStartBtn=null,t.plantStarLab=null,t.backGameCall=null,t}return n(t,a),t.prototype.onEnable=function(){var a=0;s.pzaGameManager.getCurrentGame().skipPartStar()||(a=l.pzaGameConfig.getPartStar(r.pzaGameState.curChapter,r.pzaGameState.curPart)),this.noAssessNode.active=a<=0,this.assessNode.active=a>0,this.backBtn.x=-204,this.reStartBtn.active=!0,this.backTxt.string="\u8fd4\u56de\u6e38\u620f",1==r.pzaGameState.curChapter||3==r.pzaGameState.curChapter||5==r.pzaGameState.curChapter||6==r.pzaGameState.curChapter||8==r.pzaGameState.curChapter||10==r.pzaGameState.curChapter?this.plantStarLab.string="\u4e0d\u88ab\u5403\u63895\u68f5\u690d\u7269":this.plantStarLab.string="\u4e0d\u88ab\u5403\u63897\u68f5\u690d\u7269"},t.prototype.bindBackGameCall=function(a,t){void 0===t&&(t=!1),this.backGameCall=a,t&&(this.backBtn.x=0,this.reStartBtn.active=!1,this.backTxt.string="\u786e\u5b9a")},t.prototype.clickBackGame=function(){this.backGameCall&&this.backGameCall(),this.close()},t.prototype.clickRestart=function(){var a=this;if(r.pzaGameState.gameMode==r.pzaGameMode.ZaJiao&&d.pzaNodeManager.getBattleUINode().getChildByName("BattleDownUI").getComponent(b.pzaBattleDownView).restartCountDownSec>0)h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(v.pzaWarningView);e&&e.show("\u6ce8\uff1a\u5012\u8ba1\u65f6\u7ed3\u675f\u524d\u91cd\u65b0\u5f00\u59cb\u4e0d\u6d88\u8017\u6311\u6218\u6b21\u6570","\u91cd\u65b0\u5f00\u59cb","\u5173\u95ed",function(){s.pzaGameManager.getCurrentGame().gameRestart(),a.close()},function(){},"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1)});else{var t=!1,e=!1,o=0;if(r.pzaGameState.isCreativeVaseMode()||r.pzaGameState.isCreativeTrad()||r.pzaGameState.isZjMode()){var n=s.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,c.pzaGameZJ).rankCount,i=g.pzaResMgr.instance().getConf("a24").length;g.pzaResMgr.instance().getConf("a25").length,r.pzaGameState.isZjMode()?o=r.pzaGameState.curPart:r.pzaGameState.isCreativeVaseMode()?o=r.pzaGameState.curPart+n:r.pzaGameState.isCreativeTrad()&&(o=r.pzaGameState.curPart+n+i),u.pzaLocalData.data.creativeItemState[o]<3?(t=!1,e=!1):u.pzaLocalData.data.creativeItemState[o]%2==1?(t=!1,e=!0):(t=!0,e=!1)}h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.WARNING_VIEW,function(n){var i=n&&n.getComponent(v.pzaWarningView);i&&i.show("\u4f60\u60f3\u8981\u518d\u6b21\u4ece\u5934\u8fdb\u884c\u8fd9\u4e00\u5173\u5361\u5417\uff1f","\u91cd\u65b0\u5f00\u59cb","\u53d6\u6d88",function(){var n=function(){u.pzaLocalData.data.autoPickLeft=r.pzaGameState.autoPickLeft,u.pzaLocalData.addDirty("autoPickLeft"),s.pzaGameManager.removeBattleUI(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),m.pzaUtil.changeGameSpeed(1),s.pzaGameManager.getCurrentGame().gameRestart(),(r.pzaGameState.isCreativeVaseMode()||r.pzaGameState.isCreativeTrad()||r.pzaGameState.isZjMode())&&(u.pzaLocalData.data.creativeItemState[o]++,u.pzaLocalData.addDirty("creativeItemState")),a.close()};t?y.pzaChannel.instance().showVideo({sucCall:n,failCall:function(){},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):e?"ks"==y.pzaChannel.instance().channel||"tt"==y.pzaChannel.instance().channel||"my"==y.pzaChannel.instance().channel?y.pzaChannel.instance().showVideo({sucCall:n,failCall:function(){},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):y.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"24"},function(){n()}):n()},null,"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",t,e)})}},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([C({displayName:"\u8bc4\u4ef7\u8282\u70b9",type:cc.Node})],t.prototype,"assessNode",void 0),i([C({displayName:"\u65e0\u8bc4\u4ef7\u8282\u70b9",type:cc.Node})],t.prototype,"noAssessNode",void 0),i([C({displayName:"\u8fd4\u56de\u6309\u94ae",type:cc.Node})],t.prototype,"backBtn",void 0),i([C({displayName:"\u8fd4\u56de\u6309\u94ae\u6587\u5b57",type:cc.Label})],t.prototype,"backTxt",void 0),i([C({displayName:"\u91cd\u65b0\u5f00\u59cb\u6309\u94ae",type:cc.Node})],t.prototype,"reStartBtn",void 0),i([C({displayName:"\u690d\u7269\u661f\u7ea7\u63cf\u8ff0",type:cc.Label})],t.prototype,"plantStarLab",void 0),i([P],t)}(cc.Component);e.pzaAssessView=D,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameZJ":"pzaGameZJ","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzaResMgr":"pzaResMgr","../pzaWarningView":"pzaWarningView","./pzaBattleDownView":"pzaBattleDownView"}],pzaAttackType:[function(a,t,e){"use strict";cc._RF.push(t,"6732547mBFJwZjBvvCg1w3a","pzaAttackType"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaAttackType=void 0,function(a){a[a.FLOOR_ATK=1]="FLOOR_ATK",a[a.BOOM=2]="BOOM",a[a.EAT=3]="EAT",a[a.BANG=4]="BANG",a[a.SPIKE=5]="SPIKE",a[a.TWINE=6]="TWINE",a[a.ROLLING=7]="ROLLING",a[a.CLEAN_CAR=8]="CLEAN_CAR",a[a.BOWLING=9]="BOWLING",a[a.NORMAL_BOOM=10]="NORMAL_BOOM",a[a.KNOCK=11]="KNOCK",a[a.PENETRATE=12]="PENETRATE",a[a.DEATH=13]="DEATH",a[a.THROW_ATK=14]="THROW_ATK",a[a.TALL_BOWLING=15]="TALL_BOWLING",a[a.DEATH_ANI=16]="DEATH_ANI"}(e.pzaAttackType||(e.pzaAttackType={})),cc._RF.pop()},{}],pzaBackPumpkin:[function(a,t,e){"use strict";cc._RF.push(t,"f2546d9ZlZCerwKwtGHxLQB","pzaBackPumpkin");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBackPumpkin=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.animation=null,t}return n(t,a),t.prototype.bindData=function(a){if(this.baseData=a,null!=a&&null!=a.yIndex){var t=10*-this.baseData.yIndex-2;this.node.zIndex=t}this.animation.playAnimation("idle",!0),this.logicLateUpdate()},t.prototype.logicUpdate=function(){(null==this.baseData||this.baseData.isDead)&&this.close()},t.prototype.logicLateUpdate=function(){null==this.baseData||this.baseData.isDead||0==this.baseData.floatY||null==this.baseData.logicPos||this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.pauseSelf=function(){this.animation.pauseAnimation()},t.prototype.resumeSelf=function(){this.baseData&&this.baseData.isBePauseControlled()||this.animation.resumeAnimation()},i([c({displayName:"\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"animation",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaBackPumpkin=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController"}],pzaBackupDancerZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"54b23NwbLRGFalKE2O5PKtF","pzaBackupDancerZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBackupDancerZombie2=void 0;var r=a("./pzaBackupDancerZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=p.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,61.03,12.86,-93.13))],[p.pzaZombieSlotType.hat,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.hat).addState(new p.pzaZombieSlotAtt(1,this.equip1Slot+"1",81.36,3.83,-93.13)).addState(new p.pzaZombieSlotAtt(2,this.equip1Slot+"2",59.86,-19.27,-93.13)).addState(new p.pzaZombieSlotAtt(3,this.equip1Slot+"3",60.71,-18.51,-93.13))]])},t.prototype.handBookPreview=function(){this.animation.playAnimation("idle6",!0,null,null,.5),this.equipIntact()},i([s],t)}(r.pzaBackupDancerZombie));e.pzaBackupDancerZombie2=c,cc._RF.pop()},{"./pzaBackupDancerZombie":"pzaBackupDancerZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaBackupDancerZombie:[function(a,t,e){"use strict";cc._RF.push(t,"6429fMJWr9ANbWhxTI8PfRn","pzaBackupDancerZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBackupDancerZombie=void 0;var r=a("../../Common/pzaSpineController"),p=a("../../Common/pzaUIManager"),l=a("../../Common/pzaWorldEventManager"),s=a("../../Load/pzaPreLoadManager"),c=a("../../View/Battle/pzaNewZombieView"),u=a("../Data/pzaBaseData"),d=a("../Data/pzaBuffData"),h=a("../pzaGameState"),m=a("./pzaNormalZombie"),f=a("./pzaZombieSlot"),z=a("./pzaZombieState"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="skin2",t.dirtAni=null,t.dacing=!1,t.summoning=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[f.pzaZombieSlotType.butter,new f.pzaZombieSlot(this.animation.spineAnimation,f.pzaZombieSlotType.butter).addState(new f.pzaZombieSlotAtt(1,f.pzaZombieSlotType.butter,61.03,12.86,-93.13))]])},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.dirtAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.dacing=!1,this.summoning=!1,this.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.IMM_CONTROL,-1))},t.prototype.breakDirt=function(a){var t=this;this.breakCall=a,null!=this.mask&&(this.mask.enabled=!0),this.breakDirtTime=.5,this.animation.node.y=-140,this.animation.playAnimation("idle1",!0),this.dirtAni.node.active=!0,this.dirtAni.playAnimation("tu",!1,function(){t.dirtAni.node.active=!1})},t.prototype.logicUpdate=function(a){var t=this;if(this.breakDirtTime>0){this.breakDirtTime-=a;var e=140*-Math.max(0,this.breakDirtTime/.5);return this.animation.node.y=e,void(this.breakDirtTime<=0&&null!=this.mask&&(this.mask.enabled=!1,this.summoning=!0,this.curShadow&&this.curShadow.showShadow(),this.animation.playAnimation("idle5",!1,function(){t.summoning=!1,t.breakCall&&t.breakCall(),t.baseData.buffData.removeBuff(d.pzaBuffType.IMM_CONTROL)})))}if(!this.summoning&&null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(a);else{var o=this.findTarget();null==o||o.isDead?this.updateMove(a):(this.dacing&&(this.dacing=!1),this.attack(a,o))}else this.changeRowMove(a)}},t.prototype.updateMove=function(a){if(!this.dacing&&this.baseData.zombieData.danceData){this.zombieState!=z.pzaZombieState.MOVE&&this.playMoveAnimation();var t=this.baseData.zombieData.moveSpd,e=1;if(t*=e+=this.baseData.zombieData.danceData.getSpeedBuff(),this.hasStopZombie()&&(t=0),this.animation.changeAnimationTimeScale(e),1==this.baseData.zombieData.direction?this.baseData.logicPos.x+=a*t:this.baseData.logicPos.x-=a*t,this.baseData.zombieData.hypnosis&&this.baseData.logicPos.x>=640)this.death(!1);else{this.baseData.logicPos.x<(h.pzaGameState.isZombieMode()?-450:-480)&&this.zombieGoHome();var o=this.baseData.xIndex,n=h.pzaGameState.map.getMapXIndex(this.baseData.logicPos);if(this.baseData.xIndex=n,-1==this.changeTargetRow){var i=.1*h.pzaGameState.map.getYInterval(this.baseData.yIndex);h.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,this.baseData.logicPos,i)}if(o<0&&n>=0&&this.zombieScream(),h.pzaGameState.newZombie==this.baseData.zombieData.zombieType&&7==n){h.pzaGameState.gamePause=!0,l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.GAME_PAUSE,null);var r=this.node.convertToWorldSpaceAR(cc.v2());p.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.NEW_ZOMBIE_VIEW,function(a){var t=a&&a.getComponent(c.pzaNewZombieView);t&&t.showNewZombie(h.pzaGameState.newZombie,r),h.pzaGameState.showUnlockZombie()})}}}},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=z.pzaZombieState.MOVE,this.baseData.isDead||(this.baseData.zombieData.danceData.getMainData()==this.baseData?this.baseData.zombieData.danceData.walkStep>=3&&!this.hasStopZombie()?this.dance():this.animation.playAnimation("idle6",!1,function(){a.baseData.zombieData.danceData.walkStep++,a.playMoveAnimation()}):this.animation.playAnimation("idle6",!1,function(){a.playMoveAnimation()}))},t.prototype.dance=function(){var a=this;if(this.dacing=!0,this.animation.playAnimation("idle7",!1,function(){a.dacing=!1,a.playMoveAnimation()}),this.baseData.zombieData.danceData.getMainData()==this.baseData){this.baseData.zombieData.danceData.walkStep=0,this.zombieState=z.pzaZombieState.SPECIAL;var t=this.baseData.zombieData.danceData.getOtherDatas();t&&t.forEach(function(a){var t=a.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(a):window.pzazombieManager.getZombie(a);t&&t.dance()})}},t.prototype.bePauseControl=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead&&!this.lastBePasueControled){this.lastBePasueControled=!0,this.pauseSelf();var t=this.baseData.zombieData.danceData.getOtherDatas();null!=t&&t.forEach(function(t){if(t!=a.baseData&&null!=t&&!t.isDead){var e=t.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(t):window.pzazombieManager.getZombie(t);e&&e.bePauseControl()}})}},t.prototype.hasStopZombie=function(){if(!this.baseData.zombieData.danceData)return!1;var a=this.baseData.zombieData.danceData.getOtherDatas(),t=this.baseData.zombieData.danceData.getMainData();if(null==a)return!1;null!=t&&a.push(t);for(var e=0;e<a.length;e++){var o=a[e];if(o!=this.baseData&&null!=o&&!o.isDead){if(o.isBeControlled())return!0;var n=o.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(o):window.pzazombieManager.getZombie(o);if(null==n)continue;var i=n;if(i.zombieState==z.pzaZombieState.EAT_ATK||i.zombieState==z.pzaZombieState.SPECIAL)return!0}}return!1},t.prototype.changeMapRow=function(){a.prototype.changeMapRow.call(this),this.dacing=!1,this.baseData.zombieData.danceData.removeOtherData(this.baseData),this.baseData.zombieData.danceData=new u.pzaDanceData(this.baseData)},t.prototype.death=function(t,e){if(this.breakDirtTime>0||this.summoning)return this.breakCall&&this.breakCall(),void a.prototype.death.call(this,!1,e);a.prototype.death.call(this,t,e)},i([v({displayName:"\u571f\u52a8\u753b",type:r.pzaSpineController})],t.prototype,"dirtAni",void 0),i([g],t)}(m.pzaNormalZombie);e.pzaBackupDancerZombie=b,cc._RF.pop()},{"../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewZombieView":"pzaNewZombieView","../Data/pzaBaseData":"pzaBaseData","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaBagPlantCard:[function(a,t,e){"use strict";cc._RF.push(t,"d4c9aa5gwhP3pERHLKMrPqN","pzaBagPlantCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBagPlantCard=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGameConfig"),c=a("../../Common/pzaLocalData"),u=a("../../Common/pzaSoundManager"),d=a("../../Common/pzaSpriteFrameManager"),h=a("../../Common/pzaUIManager"),m=a("../../Common/pzaUtil"),f=a("../../Load/pzaPreLoadManager"),z=a("../pzaWarningView"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.voidBoard=null,t.swIcon=null,t.cardBoard=null,t.cardBoardFrames=[],t.cardIcon=null,t.priceLabel=null,t.mask=null,t.unselectTag=null,t.curPlantType=null,t.plantConfigData=null,t.clickCall=null,t.isSelected=!1,t.isFull=!1,t.isNoRecommend=!1,t.lock=!1,t.imitaterPlant=!1,t}return n(t,a),t.prototype.onEnable=function(){this.lock||this.node.on(cc.Node.EventType.TOUCH_END,this.clickCard,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.clickCard,this)},t.prototype.bindData=function(a,t,e){void 0===e&&(e=!1);var o=null!=c.pzaLocalData.data.ownPlants&&c.pzaLocalData.data.ownPlants.indexOf(a)>=0;if(p.pzaGameState.isSurvival()&&c.pzaLocalData.data.preOpenSurvival&&null!=a&&a>=r.pzaPlantEnum.PEA_SHOOTER&&a<=r.pzaPlantEnum.MELON_PULT&&(o=!0),p.pzaGameState.isMiniMode()&&(4==p.pzaGameState.curPart||p.pzaGameState.curPart>=10)&&(o=!0),p.pzaGameState.isZjMode()&&(o=!0),null==a||!o)return this.voidBoard.active=!0,this.cardBoard.node.active=!1,void(this.lock=!0);this.node.on(cc.Node.EventType.TOUCH_END,this.clickCard,this),this.lock=!1,this.voidBoard.active=!1,this.cardBoard.node.active=!0,this.imitaterPlant=e,this.curPlantType=a,this.plantConfigData=s.pzaGameConfig.getPlantConfig(a),this.clickCall=t,d.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),this.imitaterPlant?this.cardBoard.spriteFrame=this.cardBoardFrames[0]:this.cardBoard.spriteFrame=this.cardBoardFrames[this.plantConfigData.rareLevel],p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS&&s.pzaGameConfig.isAdvancePlant(a)?this.priceLabel.string=this.plantConfigData.price+"+":this.priceLabel.string=""+this.plantConfigData.price,m.pzaUtil.switchGraySprite(this.cardIcon,this.imitaterPlant),this.node.stopAllActions(),this.unselectTag.active=!1,this.isSelected=!1,this.isFull=!1,this.refreshRecommend(!1),this.swIcon.active=!1,a==r.pzaPlantEnum.SUPER_CHOMPER&&c.pzaLocalData.data.superChomperTrial>0&&c.pzaLocalData.data.superChomperTrial<1e3&&(this.swIcon.active=!0)},t.prototype.moveTo=function(a,t,e){var o=this;null!=a?this.node.runAction(cc.sequence(cc.moveTo(t,a),cc.callFunc(function(){o.close(),e&&e()}))):this.close()},t.prototype.initSelect=function(){this.isSelected=!0,this.mask.active=!0,this.mask.opacity=200},t.prototype.disSelect=function(){this.isSelected=!1,this.unselectTag.active=!1,this.isNoRecommend?(this.mask.active=!0,this.mask.opacity=150):this.mask.active=!1},t.prototype.selectFull=function(a){this.curPlantType==r.pzaPlantEnum.STAR_FRUIT&&p.pzaGameState.isMiniMode()&&14==p.pzaGameState.curPart&&!a||(this.isFull=a,this.isSelected||(this.unselectTag.active=a,a?(this.mask.active=!0,this.mask.opacity=200):this.isNoRecommend?(this.mask.active=!0,this.mask.opacity=150):this.mask.active=!1))},t.prototype.clickCard=function(){if(!p.pzaGameState.cardIsMove)if(this.imitaterPlant)this.clickCall&&this.clickCall(this.curPlantType,null);else if(!this.isFull&&!this.isSelected&&this.curPlantType){if(this.isNoRecommend&&!p.pzaGameState.grayPlantWarning)return p.pzaGameState.grayPlantWarning=!0,void h.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(z.pzaWarningView);t&&t.show("\u4e0d\u63a8\u8350\u4f7f\u7528\u53d8\u7070\u690d\u7269","\u786e\u5b9a",null,null,null)});this.isSelected=!0,this.mask.active=!0,this.mask.opacity=200,p.pzaGameState.cardIsMove=!0;var a=this.node.convertToWorldSpaceAR(cc.v2());this.clickCall&&this.clickCall(this.curPlantType,a),u.pzaSoundManager.playSFX()}},t.prototype.refreshRecommend=function(a){null!=this.plantConfigData&&(this.plantConfigData.isNight&&a?this.curPlantType==r.pzaPlantEnum.SEA_SHROOM&&3!=p.pzaGameState.curChapter?this.isNoRecommend=s.pzaGameConfig.isNoRecommendPlant(this.curPlantType,p.pzaGameState.curChapter):this.isNoRecommend=!1:p.pzaGameState.isMiniMode()&&4==p.pzaGameState.curPart?this.isNoRecommend=s.pzaGameConfig.isNoRecommendPlantInMini(this.curPlantType,1):this.isNoRecommend=s.pzaGameConfig.isNoRecommendPlant(this.curPlantType,p.pzaGameState.curChapter),this.isSelected?(this.mask.active=!0,this.mask.opacity=200):this.isNoRecommend?(this.mask.active=!0,this.mask.opacity=150):this.mask.active=!1)},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([v({displayName:"\u7a7a\u5361\u7247\u6846",type:cc.Node})],t.prototype,"voidBoard",void 0),i([v({displayName:"\u8bd5\u73a9\u8282\u70b9",type:cc.Node})],t.prototype,"swIcon",void 0),i([v({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([v({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([v({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([v({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],t.prototype,"priceLabel",void 0),i([v({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([v({displayName:"\u4e0d\u80fd\u9009\u62e9\u6846",type:cc.Node})],t.prototype,"unselectTag",void 0),i([g],t)}(cc.Component);e.pzaBagPlantCard=b,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../pzaWarningView":"pzaWarningView"}],pzaBalloonZombie:[function(a,t,e){"use strict";cc._RF.push(t,"9caderigZRMC6ujgVCOQMwS","pzaBalloonZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBalloonZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaWorldEventManager"),s=a("../Data/pzaBuffData"),c=a("../Plant/pzaAttackType"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaBaseZombie"),m=a("./pzaZombieSlot"),f=a("./pzaZombieState"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ballNode=null,t.hasBeenBlow=!1,t.falling=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,-20.56,89.45))]])},t.prototype.onEnable=function(){a.prototype.onEnable.call(this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.BLOW_WIND,this.onBlowWind,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.BLOW_WIND,this.onBlowWind,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.hasBeenBlow=!1,this.falling=!1,t.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FLY,-1)),t.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_ICE,-1)),p.pzaSoundManager.playAudio("ball_enter")},t.prototype.logicUpdate=function(t){this.falling||a.prototype.logicUpdate.call(this,t)},t.prototype.findTarget=function(){return null!=this.baseData&&this.hasEquip?null:a.prototype.findTarget.call(this)},t.prototype.updateMove=function(t){if(this.hasBeenBlow)return this.baseData.logicPos.x+=1300*t,void(this.baseData.logicPos.x>=640&&(this.baseData.zombieDie(),this.death(!1)));a.prototype.updateMove.call(this,t)},t.prototype.equipDeath=function(){var t=this;if(window.pzaMapManager.isInWaterWay(this.baseData.yIndex))return this.baseData.zombieDie(),void this.death(!1);a.prototype.equipDeath.call(this,!1),this.falling=!0,p.pzaSoundManager.playAudio("ball_fall"),this.baseData.buffData.removeBuff(s.pzaBuffType.FLY),this.animation.playAnimation("bao",!1,function(){t.falling=!1;var a=r.pzaGameConfig.getZombieSpecialSpeed(t.baseData.zombieData.zombieType);t.baseData.zombieData.initMSpd=t.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/a,t.baseData.buffData.removeBuff(s.pzaBuffType.IMM_ICE),t.playMoveAnimation()})},t.prototype.zombieGoHome=function(){if(d.pzaGameState.isZombieMode()&&window.pzaplantManager.hasBrain(this.baseData.yIndex)){if(!this.hasEquip)return;return this.equipDeath(),void(this.body.curTarget=null)}a.prototype.zombieGoHome.call(this)},t.prototype.flaserDeath=function(){if(this.hasEquip)return this.death(!1,c.pzaAttackType.CLEAN_CAR),void(window.pzaMapManager.isInWaterWay(this.baseData.yIndex)||u.pzaEffectManager.createSmokeEffect("blow1",cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+100)));a.prototype.flaserDeath.call(this)},t.prototype.playMoveAnimation=function(){this.zombieState=f.pzaZombieState.MOVE,this.animation.playAnimation(this.hasEquip?"idle":"move2",!0)},t.prototype.onBlowWind=function(){null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.zombieData&&this.hasEquip&&(this.hasBeenBlow||(this.hasBeenBlow=!0))},t.prototype.zombieScream=function(){},t.prototype.getZombieHeadWps=function(){return this.hasEquip?this.ballNode.convertToWorldSpaceAR(cc.v2()):a.prototype.getZombieHeadWps.call(this)},t.prototype.ashesDeath=function(){if(this.baseData.zombieDie(),this.death(!1),!(this.baseData.xIndex>=0&&window.pzaMapManager.isInWaterWay(this.baseData.yIndex))){var a=this.baseData.zombieData.zombieType;u.pzaEffectManager.createAshesEffect(a,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,"die")}},i([g({displayName:"\u6c14\u7403\u8282\u70b9",type:cc.Node})],t.prototype,"ballNode",void 0),i([y],t)}(h.pzaBaseZombie);e.pzaBalloonZombie=v,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaBaseBody:[function(a,t,e){"use strict";cc._RF.push(t,"4f0e6uxYcdOJIcW1JqOuhwC","pzaBaseBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseBody=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.body=null,t.circleBody=null,t.baseData=null,t.curTarget=null,t}return n(t,a),t.prototype.onEnable=function(){null!=this.body&&(this.body.enabled=!1),null!=this.circleBody&&(this.circleBody.enabled=!1)},t.prototype.bindData=function(a){this.baseData=a,this.curTarget=null,null!=this.body&&(this.body.enabled=!0),null!=this.circleBody&&(this.circleBody.enabled=!0)},t.prototype.changeBody=function(a,t){null!=this.body&&(null!=a&&(this.body.offset=a),null!=t&&(this.body.size.width=t))},i([l({displayName:"\u8eab\u4f53\u78b0\u649e\u76d2",type:cc.BoxCollider})],t.prototype,"body",void 0),i([l({displayName:"\u8eab\u4f53\u78b0\u649e\u76d2",type:cc.CircleCollider})],t.prototype,"circleBody",void 0),i([p],t)}(cc.Component);e.pzaBaseBody=s,cc._RF.pop()},{}],pzaBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"25e84qr2r5CfK0bp6CEXb0Q","pzaBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaNodeManager"),u=a("../../Common/pzaWorldEventManager"),d=a("../../Load/pzaBundleObjectPool"),h=a("../../Load/pzaPreLoadManager"),m=a("../Data/pzaBuffData"),f=a("../Data/pzaZombieEnum"),z=a("../Effect/pzaBaseEffect"),y=a("../Effect/pzaShadowEffect"),g=a("../Zombie/pzaZombieBody"),v=a("../pzaGameState"),b=cc._decorator,S=b.ccclass,P=b.property,C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.speed=400,t.ySpeed=300,t.maxLifeTime=3,t.needShadow=!0,t.hitPrefab=null,t.poolPrefab=null,t.lifeTime=0,t.atk=0,t.realYSpeed=0,t.yTargetPos=null,t.direction=cc.v2(1,0),t.bulletYIndex=-1,t.isInAir=!1,t.maxPosX=null,t.curShadow=null,t.originSpeed=400,t.collider=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.originSpeed=this.speed,u.pzaWorldEventManager.addListener(u.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.init=function(a,t,e,o,n){void 0===e&&(e=0),void 0===o&&(o=null),void 0===n&&(n=cc.v2(1,0)),this.bulletYIndex=a,this.bulletYIndex<0?p.pzaCollisionManager.getInstance.addBulletOther(this):p.pzaCollisionManager.getInstance.addBulletByRow(this.bulletYIndex,this),this.atk=t,this.lifeTime=0,this.yTargetPos=o,this.realYSpeed=this.ySpeed,this.direction=n,this.isInAir=!1,this.maxPosX=null,this.node.scale=1,this.createShadow(),this.speed=this.originSpeed},t.prototype.logicUpdate=function(a){this.lifeTime+=a,this.lifeTime>=this.maxLifeTime?this.close():this.updateMove(a)},t.prototype.updateMove=function(a){if(this.node.x+=this.direction.x*this.speed*a,this.node.y+=this.direction.y*this.speed*a,this.shadowMove(),null!=this.maxPosX&&this.node.x>=this.maxPosX)return this.playHitEffect(),void this.close();if(this.yTargetPos&&this.node.y!=this.yTargetPos){if(this.realYSpeed=Math.max(0,this.realYSpeed-400*a),this.node.y>this.yTargetPos){var t=this.node.y-this.ySpeed*a;this.node.y=Math.max(this.yTargetPos,t)}this.node.y<this.yTargetPos&&(t=this.node.y+this.ySpeed*a,this.node.y=Math.min(this.yTargetPos,t))}},t.prototype.createShadow=function(){var a=this;if(this.needShadow){var t=c.pzaNodeManager.getDownEffectNode();d.pzaBundleObjectPool.requestInstantByUrl2(h.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(t);var n=o.getComponent(y.pzaShadowEffect);n&&n.init(null,cc.v2(),.35),a.curShadow=n,a.shadowMove()}else console.error(e)})}else this.curShadow=null},t.prototype.shadowMove=function(){if(null!=this.curShadow){var a=cc.v2(this.node.x,0);if(this.bulletYIndex<0)a.y=this.node.y-60;else{var t=.2*v.pzaGameState.map.getYInterval(this.bulletYIndex);v.pzaGameState.map.fixMapYOffset(this.bulletYIndex,a,t),null!=this.yTargetPos&&this.node.y!=this.yTargetPos&&(a.y-=this.yTargetPos-this.node.y)}this.curShadow.followMove(a)}},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.onCollision=function(a){if(a&&a.node.group==s.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(g.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderZombie=function(a){if(a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==f.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&!a.buffData.hasBuff(m.pzaBuffType.DIVE)&&!a.buffData.hasBuff(m.pzaBuffType.UNABLE_SELECT)&&(this.isInAir||!a.buffData.hasBuff(m.pzaBuffType.FLY))&&(!this.isInAir||a.buffData.hasBuff(m.pzaBuffType.FLY))&&!(a.buffData.hasBuff(m.pzaBuffType.INVINCIBLE)||a.zombieData&&a.zombieData.hypnosis)){var t=window.pzazombieManager.getZombie(a);null!=t&&(t.hurt(this.atk),this.close(),this.playHitEffect(a))}},t.prototype.close=function(){this.bulletYIndex<0?p.pzaCollisionManager.getInstance.delBulletOther(this):p.pzaCollisionManager.getInstance.delBulletByRow(this.bulletYIndex,this),null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},t.prototype.playHitEffect=function(a){if(this.hitPrefab){var t=5,e=cc.v2(this.node.x,this.node.y);a&&(t=10*-a.yIndex+5,e=cc.v2(a.logicPos.x,a.logicPos.y+70));var o=c.pzaNodeManager.getPlantZombieNode();if(o){var n=l.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.zIndex=t,n.setPosition(e);var i=n.getComponent(z.pzaBaseEffect);i&&i.showEffect(null,null)}}},i([P({displayName:"\u5b50\u5f39\u98de\u884c\u901f\u5ea6"})],t.prototype,"speed",void 0),i([P({displayName:"\u5b50\u5f39Y\u8f74\u98de\u884c\u901f\u5ea6"})],t.prototype,"ySpeed",void 0),i([P({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],t.prototype,"maxLifeTime",void 0),i([P({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],t.prototype,"needShadow",void 0),i([P({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"hitPrefab",void 0),i([P(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([S],t)}(r.pzaBaseComponent);e.pzaBaseBullet=C,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../Effect/pzaShadowEffect":"pzaShadowEffect","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaGameState":"pzaGameState"}],pzaBaseComponentManager:[function(a,t,e){"use strict";cc._RF.push(t,"5c468O9/vFPubEpk5DzQ5Lm","pzaBaseComponentManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseComponentManager=void 0;var r=a("../Battle/pzaGameState"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.baseCmpSet=new Set,t}return n(t,a),t.prototype.onLoad=function(){window.pzabaseCmpManager=this},t.prototype.onEnable=function(){this.baseCmpSet.clear()},t.prototype.update=function(a){r.pzaGameState.gamePause||r.pzaGameState.starModeGameOver||(this.baseCmpSet.forEach(function(t){null!=t&&t.logicUpdate(a)}),window.pzaplantManager.logicUpdate(a),window.pzazombieManager.logicUpdate(a))},t.prototype.lateUpdate=function(a){r.pzaGameState.gamePause||this.baseCmpSet.size<=0||this.baseCmpSet.forEach(function(t){null!=t&&t.logicLateUpdate(a)})},t.prototype.addBaseCmp=function(a){this.baseCmpSet.add(a)},t.prototype.deleteBaseCmp=function(a){this.baseCmpSet.delete(a)},i([l],t)}(cc.Component));e.pzaBaseComponentManager=s,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState"}],pzaBaseComponent:[function(a,t,e){"use strict";cc._RF.push(t,"450c507UNlIE55+Gb7BO0ny","pzaBaseComponent");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseComponent=void 0;var r=a("./pzaGameCommonPool"),p=a("./pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lastBePasueControled=!1,t.baseData=null,t}return n(t,a),t.prototype.onEnable=function(){window.pzabaseCmpManager.addBaseCmp(this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.BACK_HOME,this.close,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_OVER,this.close,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this)},t.prototype.onDisable=function(){window.pzabaseCmpManager.deleteBaseCmp(this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.BACK_HOME,this.close,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_OVER,this.close,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this)},t.prototype.bindData=function(a){this.baseData=a},t.prototype.logicUpdate=function(){},t.prototype.logicLateUpdate=function(){},t.prototype.bePauseControl=function(){this.lastBePasueControled=!0},t.prototype.pauseSelf=function(){},t.prototype.resumeSelf=function(){},t.prototype.hurt=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t]},t.prototype.steal=function(){},t.prototype.getZombieHeadWps=function(){return null},t.prototype.updateRoleBuff=function(a){null==this.baseData||this.baseData.isDead||null==this.baseData.buffData||this.baseData.hp<0||this.baseData.buffData.refreshBuff(a,this)},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s],t)}(cc.Component));e.pzaBaseComponent=c,cc._RF.pop()},{"./pzaGameCommonPool":"pzaGameCommonPool","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaBaseData:[function(a,t,e){"use strict";cc._RF.push(t,"74bddgAawJMj7VtGs65WMFT","pzaBaseData"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDanceData=e.pzaZombieData=e.pzaPlantData=e.pzaBaseData=void 0;var o=a("./pzaBuffData"),n=a("./pzaPlantEnum"),i=a("./pzaZombieEnum"),r=function(){function a(a,t,e){void 0===e&&(e=!1),this.plantData=null,this.maxHp=0,this.hp=0,this.atk=0,this.logicPos=null,this.floatY=0,this.xIndex=-1,this.yIndex=-1,this.secondXIndex=-1,this.secondYIndex=-1,this.isDead=!1,this.isBrain=!1,this.zombieData=null,this.buffData=new o.pzaBuffData,null!=a&&(this.plantData=new p(a)),null!=t&&(this.zombieData=new l(t)),this.isBrain=e}return a.clonePlantData=function(t){var e=new a(t.plantData.plantType,null);return e.maxHp=t.maxHp,e.hp=t.hp,e.atk=t.atk,e.logicPos=cc.v2(t.logicPos.x,t.logicPos.y),e.floatY=t.floatY,e.xIndex=t.xIndex,e.yIndex=t.yIndex,e.secondXIndex=t.secondXIndex,e.secondYIndex=t.secondYIndex,e.plantData.readyTime=t.plantData.readyTime,e.plantData.atkInterval=t.plantData.atkInterval,e.plantData.sleeping=t.plantData.sleeping,e.plantData.hasBreakGround=t.plantData.hasBreakGround,e.plantData.cobLoadFinish=t.plantData.cobLoadFinish,e.plantData.eatTime=t.plantData.eatTime,e.plantData.growTime=t.plantData.growTime,e.plantData.growStep=t.plantData.growStep,e.plantData.growStep=t.plantData.growStep,e.plantData.atkInterval2=t.plantData.atkInterval2,e.plantData.atkArr=t.plantData.atkArr,e.plantData.atk2Arr=t.plantData.atk2Arr,t.plantData.isGrow&&(e.plantData.isGrow=t.plantData.isGrow),e},a.prototype.hurtPlanet=function(a){this.hp-=a,this.hp<=0&&(this.isDead=!0)},a.prototype.destroyIronEquip=function(){null!=this.zombieData&&(this.zombieData.equipType==i.pzaEquipType.IRON_EQUIP?(this.zombieData.equipHp=0,this.zombieData.equipType=i.pzaEquipType.NO_EQUIP):this.zombieData.equipType2==i.pzaEquipType.IRON_EQUIP?(this.zombieData.equipHp2=0,this.zombieData.equipType2=i.pzaEquipType.NO_EQUIP):this.zombieData.toolType==i.pzaEquipType.IRON_EQUIP&&(this.zombieData.toolType=i.pzaEquipType.NO_EQUIP),this.zombieData.needRefreshEquip=!0)},a.prototype.destroyIronEquipInZj=function(a){null!=this.zombieData&&(this.zombieData.equipType==i.pzaEquipType.IRON_EQUIP&&1==a?(this.zombieData.equipHp=0,this.zombieData.equipType=i.pzaEquipType.NO_EQUIP):this.zombieData.equipType2==i.pzaEquipType.IRON_EQUIP&&2==a?(this.zombieData.equipHp2=0,this.zombieData.equipType2=i.pzaEquipType.NO_EQUIP):this.zombieData.toolType==i.pzaEquipType.IRON_EQUIP&&(this.zombieData.toolType=i.pzaEquipType.NO_EQUIP),this.zombieData.needRefreshEquip=!0)},a.prototype.hurtZombie=function(a){if(!(null==this.zombieData||this.hp<=0)){if(this.zombieData.cate===i.pzaZombieCate.Gargantuar){if(this.zombieData.equipHp2>0)return void(this.zombieData.equipHp2-=a);if(this.zombieData.equipHp>0)return void(this.zombieData.equipHp-=a)}else{if(this.zombieData.equipHp>0)return void(this.zombieData.equipHp-=a);if(this.zombieData.equipHp2>0)return void(this.zombieData.equipHp2-=a)}this.hp-=a,this.hp<=0&&(this.isDead=!0)}},a.prototype.hurtZombie2=function(a){if(!(null==this.zombieData||this.hp<=0)){if(this.zombieData.cate==i.pzaZombieCate.Gargantuar){if(this.zombieData.equipHp>0)return void(this.zombieData.equipHp-=a)}else if(this.zombieData.equipHp2>0)return void(this.zombieData.equipHp2-=a);this.hp-=a,this.hp<=0&&(this.isDead=!0)}},a.prototype.hurtZombieWithEquip=function(a){if(!(null==this.zombieData||this.hp<=0)){if(this.zombieData.equipHp>0){if(!(this.zombieData.equipHp<=a))return void(this.zombieData.equipHp-=a);a-=this.zombieData.equipHp,this.zombieData.equipHp=0}if(this.zombieData.equipHp2>0){if(!(this.zombieData.equipHp2<=a))return void(this.zombieData.equipHp2-=a);a-=this.zombieData.equipHp2,this.zombieData.equipHp2=0}this.hp-=a,this.hp<=0&&(this.isDead=!0)}},a.prototype.hurtZombieBody=function(a){null==this.zombieData||this.hp<=0||(this.hp-=a,this.hp<=0&&(this.isDead=!0))},a.prototype.zombieDie=function(){this.hp<=0||(this.hp=0,this.zombieData.equipHp=0,this.isDead=!0)},a.prototype.isBePauseControlled=function(){return!(this.isDead||!this.buffData.hasBuff(o.pzaBuffType.FROZEN)&&!this.buffData.hasBuff(o.pzaBuffType.IMMOBILIZE)&&!this.buffData.hasBuff(o.pzaBuffType.FLASER))},a.prototype.isBeControlled=function(){return!(this.isDead||!this.buffData.hasBuff(o.pzaBuffType.FROZEN)&&!this.buffData.hasBuff(o.pzaBuffType.IMMOBILIZE)&&!this.buffData.hasBuff(o.pzaBuffType.DIZZ)&&!this.buffData.hasBuff(o.pzaBuffType.GARLIC)&&!this.buffData.hasBuff(o.pzaBuffType.HARD_BODY))},a}();e.pzaBaseData=r;var p=function(){function a(a){this.plantType=n.pzaPlantEnum.PEA_SHOOTER,this.readyTime=0,this.atkInterval=0,this.sleeping=!1,this.hasBreakGround=!1,this._cobLoadFinish=!1,this.adClearPlant=!1,this.eatTime=0,this.growTime=0,this.growStep=0,this.atkArr=null,this.atk2Arr=null,this.atkInterval2=0,this.isChangeLine=!1,this.cate=n.pzaPlantCate.Null,this.isGrow=!1,this.canBeShoot=!0,this.plantType=a}return Object.defineProperty(a.prototype,"cobLoadFinish",{get:function(){return this._cobLoadFinish},set:function(a){this._cobLoadFinish=a},enumerable:!1,configurable:!0}),a}();e.pzaPlantData=p;var l=function(a){this.zombieType=i.pzaZombieEnum.ZOMBIE,this.equipType=0,this.toolType=0,this.equipHp=0,this.maxEquipHp=0,this.direction=-1,this.initMSpd=0,this.moveSpd=0,this.atkInterval=0,this.hypnosis=!1,this.needRefreshEquip=!1,this.typeId=0,this.showWeight=100,this.equipType2=0,this.equipHp2=0,this.maxEquipHp2=0,this.atkArr=null,this.atkInterval2=0,this.danceData=null,this.zomBossFinger=null,this.cate=i.pzaZombieCate.Null,this.hurtCate=i.pzaZombieHurtCate.Null,this.zombieType=a};e.pzaZombieData=l;var s=function(){function a(a){this.mainData=null,this.upData=null,this.downData=null,this.leftData=null,this.rightData=null,this.walkStep=0,this.hypnosis=!1,this.mainData=a,this.hypnosis=a.zombieData.hypnosis}return a.prototype.removeOtherData=function(a){this.upData==a&&(this.upData=null),this.downData==a&&(this.downData=null),this.leftData==a&&(this.leftData=null),this.rightData==a&&(this.rightData=null)},a.prototype.getMainData=function(){return null==this.mainData||this.mainData.isDead||this.mainData.zombieData.hypnosis!=this.hypnosis?null==this.upData||this.upData.isDead||this.upData.zombieData.hypnosis!=this.hypnosis?null==this.downData||this.downData.isDead||this.downData.zombieData.hypnosis!=this.hypnosis?null==this.leftData||this.leftData.isDead||this.leftData.zombieData.hypnosis!=this.hypnosis?null==this.rightData||this.rightData.isDead||this.rightData.zombieData.hypnosis!=this.hypnosis?void 0:this.rightData:this.leftData:this.downData:this.upData:this.mainData},a.prototype.getOtherDatas=function(){var a=[],t=this.getMainData();return t==this.upData||null==this.upData||this.upData.isDead||this.upData.zombieData.hypnosis!=this.hypnosis||a.push(this.upData),t==this.downData||null==this.downData||this.downData.isDead||this.downData.zombieData.hypnosis!=this.hypnosis||a.push(this.downData),t==this.leftData||null==this.leftData||this.leftData.isDead||this.leftData.zombieData.hypnosis!=this.hypnosis||a.push(this.leftData),t==this.rightData||null==this.rightData||this.rightData.isDead||this.rightData.zombieData.hypnosis!=this.hypnosis||a.push(this.rightData),a},a.prototype.hasUpData=function(){return null!=this.upData&&!this.upData.isDead&&this.upData.zombieData.hypnosis==this.hypnosis||(this.upData=null,!1)},a.prototype.hasDownData=function(){return null!=this.downData&&!this.downData.isDead&&this.downData.zombieData.hypnosis==this.hypnosis||(this.downData=null,!1)},a.prototype.hasLeftData=function(){return null!=this.leftData&&!this.leftData.isDead&&this.leftData.zombieData.hypnosis==this.hypnosis||(this.leftData=null,!1)},a.prototype.hasRightData=function(){return null!=this.rightData&&!this.rightData.isDead&&this.rightData.zombieData.hypnosis==this.hypnosis||(this.rightData=null,!1)},a.prototype.getSpeedBuff=function(){var a;return(null==this.mainData||this.mainData.isDead||this.mainData.zombieData.hypnosis!=this.hypnosis||null==(a=this.mainData.buffData.releaseBuff(o.pzaBuffType.FROST)))&&(null==this.upData||this.upData.isDead||this.upData.zombieData.hypnosis!=this.hypnosis||null==(a=this.upData.buffData.releaseBuff(o.pzaBuffType.FROST)))&&(null==this.downData||this.downData.isDead||this.downData.zombieData.hypnosis!=this.hypnosis||null==(a=this.downData.buffData.releaseBuff(o.pzaBuffType.FROST)))&&(null==this.leftData||this.leftData.isDead||this.leftData.zombieData.hypnosis!=this.hypnosis||null==(a=this.leftData.buffData.releaseBuff(o.pzaBuffType.FROST)))&&(null==this.rightData||this.rightData.isDead||this.rightData.zombieData.hypnosis!=this.hypnosis||null==(a=this.rightData.buffData.releaseBuff(o.pzaBuffType.FROST)))?0:-a.buffValue},a}();e.pzaDanceData=s,cc._RF.pop()},{"./pzaBuffData":"pzaBuffData","./pzaPlantEnum":"pzaPlantEnum","./pzaZombieEnum":"pzaZombieEnum"}],pzaBaseEffect:[function(a,t,e){"use strict";cc._RF.push(t,"b2afbvP8rxKZpOCQLPbuZGR","pzaBaseEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaSpineController"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine=null,t.aniName="",t.starPlantSpine=null,t.starAniName="",t.ccAni=null,t.poolPrefab=null,t.endCall=null,t}return n(t,a),t.prototype.showEffect=function(a,t){var e=this;if(this.spine&&(this.spine.node.active=!0),this.starPlantSpine&&(this.starPlantSpine.node.active=!1),this.endCall=t,null==a&&(a=this.aniName),this.ccAni)return this.ccAni.play().wrapMode=cc.WrapMode.Normal,this.ccAni.off("finished",this.aniDone,this),void this.ccAni.on("finished",function(){e.aniDone()},this);this.spine.playAnimation(a,!1,this.aniDone.bind(this))},t.prototype.showStarEffect=function(){this.spine&&(this.spine.node.active=!1),this.starPlantSpine&&(this.starPlantSpine.node.active=!0),this.starPlantSpine.playAnimation(this.starAniName,!1,this.close.bind(this),null,2)},t.prototype.aniDone=function(){this.endCall&&this.endCall(),this.close()},t.prototype.pauseSelf=function(){this.ccAni?this.ccAni.pause():this.spine.pauseAnimation()},t.prototype.resumeSelf=function(){this.ccAni?this.ccAni.resume():this.spine.resumeAnimation()},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"spine\u52a8\u753b",type:l.pzaSpineController})],t.prototype,"spine",void 0),i([u({displayName:"\u52a8\u753b\u540d\u79f0"})],t.prototype,"aniName",void 0),i([u({displayName:"\u661f\u661f\u679c\u5b9e\u79cd\u4e0b\u7279\u6548",type:l.pzaSpineController})],t.prototype,"starPlantSpine",void 0),i([u({displayName:"\u661f\u661f\u679c\u5b9e\u52a8\u753b\u540d\u79f0"})],t.prototype,"starAniName",void 0),i([u(cc.Animation)],t.prototype,"ccAni",void 0),i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaBaseEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController"}],pzaBasePlant:[function(a,t,e){"use strict";cc._RF.push(t,"4a9690vgsxE/qlh9aEzanvc","pzaBasePlant");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBasePlant=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameConfig"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaSpineController"),u=a("../../Common/pzaTipManager"),d=a("../../Common/pzaUtil"),h=a("../../Common/pzaWorldEventManager"),m=a("../../Load/pzaBundleObjectPool"),f=a("../../Load/pzaPreLoadManager"),z=a("../Data/pzaBuffData"),y=a("../Data/pzaPlantEnum"),g=a("../Data/pzaZombieEnum"),v=a("../Effect/pzaShadowEffect"),b=a("../pzaGameState"),S=a("./pzaAttackType"),P=a("./pzaPlantBody"),C=cc._decorator,D=C.ccclass,M=C.property,E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.animation=null,t.body=null,t.needShadow=!0,t.shadowOffset=cc.v2(),t.shadowScale=1,t.uiIdleName="idle",t.bodyBindData=!1,t.atkInterval=0,t.hurtState=null,t.inUI=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.node.scale=1,this.inUI=!1,this.node.stopAllActions()},t.prototype.uiShow=function(){this.plantIntact(),this.animation.playAnimation(this.uiIdleName,!0),this.inUI=!0},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.bodyBindData=!1,this.hurtState=null,this.refreshHurtState(!0),null!=t&&null!=t.yIndex){var e=10*-this.baseData.yIndex;this.node.zIndex=e}if(null!=t&&null!=t.plantData){var o=p.pzaGameConfig.getPlantConfig(t.plantData.plantType);null!=o&&(this.atkInterval=o.atkInterval)}this.createShadow(),this.setPos()},t.prototype.logicUpdate=function(a){this.animation.flashUpdate(a)},t.prototype.logicLateUpdate=function(){this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),this.setPos()},t.prototype.setPos=function(){null==this.baseData||this.baseData.isDead||0==this.baseData.floatY||null==this.baseData.logicPos||this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.pauseSelf=function(){this.animation.pauseAnimation(),this.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.baseData&&this.baseData.isBePauseControlled()||(this.animation.resumeAnimation(),this.node.resumeAllActions())},t.prototype.findAttackTarget=function(){return null},t.prototype.attack=function(){},t.prototype.wakeUp=function(){},t.prototype.createShadow=function(){var a=this;this.needShadow&&m.pzaBundleObjectPool.requestInstantByUrl2(f.pzaResourceUrl.SHADOW,function(t,e){if(null==t&&null!=e){var o=l.pzaNodeManager.getDownEffectNode();if(null!=o){e.setParent(o);var n=e.getComponent(v.pzaShadowEffect);n&&n.init(a.baseData,a.shadowOffset,a.shadowScale)}}else console.error(t)})},t.prototype.hurt=function(a,t,e){if(void 0===e&&(e=null),this.baseData&&!this.baseData.isDead){if(e==S.pzaAttackType.ROLLING||e==S.pzaAttackType.BOOM||e==S.pzaAttackType.BANG){this.baseData.isDead=!0,this.baseData.hp=0,window.pzaplantManager.removePlant(this.baseData),e==S.pzaAttackType.BOOM?this.death(t):this.flaserDeath();var o=0;return o=1==b.pzaGameState.curChapter||3==b.pzaGameState.curChapter||5==b.pzaGameState.curChapter||6==b.pzaGameState.curChapter||8==b.pzaGameState.curChapter||10==b.pzaGameState.curChapter?5:7,b.pzaGameState.partStar>0&&b.pzaGameState.lossPlantCount==o&&(u.pzaTipManager.showLossStarTip(!1,!0),b.pzaGameState.partStar--),void b.pzaGameState.lossPlantCount++}if(this.baseData.hurtPlanet(a),this.refreshHurtState(!1),this.animation.showLight(),(this.baseData.isDead||this.baseData.hp<=0)&&(window.pzaplantManager.removePlant(this.baseData),this.death(t),o=0,o=1==b.pzaGameState.curChapter||3==b.pzaGameState.curChapter||5==b.pzaGameState.curChapter||6==b.pzaGameState.curChapter||8==b.pzaGameState.curChapter||10==b.pzaGameState.curChapter?4:6,b.pzaGameState.partStar>0&&b.pzaGameState.lossPlantCount==o&&(u.pzaTipManager.showLossStarTip(!1,!0),b.pzaGameState.partStar--),b.pzaGameState.lossPlantCount++,s.pzaSoundManager.playAudio("gulp")),e==S.pzaAttackType.THROW_ATK&&this.baseData.hp>0){var n="zombieHurt"+(Math.floor(2*Math.random())+1);s.pzaSoundManager.playAudio(n)}}},t.prototype.flaserDeath=function(){var a=this,t="chomp_plant"+d.pzaUtil.getRandomNum(1,2);s.pzaSoundManager.playAudio(t),this.baseData.buffData.addBuff(new z.pzaBuffInfo(z.pzaBuffType.FLASER,-1)),this.pauseSelf(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},t.prototype.refreshHurtState=function(a){if(a)this.plantIntact();else if(null!=this.baseData&&null!=this.baseData.plantData){var t=this.baseData.hp/this.baseData.maxHp;this.baseData.plantData.plantType==y.pzaPlantEnum.BOOM_NUT?t<=.3?this.hurtState!=g.pzaHurtStateEnum.DYING&&this.plantDying():t<=.5?this.hurtState!=g.pzaHurtStateEnum.HURT&&this.plantHurt2():t<=.75?this.hurtState!=g.pzaHurtStateEnum.HURT&&this.plantHurt():this.hurtState!=g.pzaHurtStateEnum.INTACT&&this.plantIntact():t<=1/3?this.hurtState!=g.pzaHurtStateEnum.DYING&&this.plantDying():t<=2/3?this.hurtState!=g.pzaHurtStateEnum.HURT&&this.plantHurt():this.hurtState!=g.pzaHurtStateEnum.INTACT&&this.plantIntact()}},t.prototype.plantDying=function(){this.hurtState=g.pzaHurtStateEnum.DYING},t.prototype.plantHurt=function(){this.hurtState=g.pzaHurtStateEnum.HURT},t.prototype.plantHurt2=function(){this.hurtState=g.pzaHurtStateEnum.HURT},t.prototype.plantIntact=function(){this.hurtState=g.pzaHurtStateEnum.INTACT},t.prototype.death=function(a,t){void 0===a&&(a=null),void 0===t&&(t=null),this.baseData.isDead=!0,this.close()},t.prototype.close=function(){this.deletePlant(),a.prototype.close.call(this)},t.prototype.deletePlant=function(){this.baseData&&b.pzaGameState.deletPlant(this.baseData.plantData.plantType)&&h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.UPDATE_PLANT_PRICE,this.baseData.plantData.plantType)},i([M({displayName:"\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"animation",void 0),i([M({displayName:"\u78b0\u649e\u8eab\u4f53",type:P.pzaPlantBody})],t.prototype,"body",void 0),i([M({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],t.prototype,"needShadow",void 0),i([M({displayName:"\u5f71\u5b50\u504f\u79fb"})],t.prototype,"shadowOffset",void 0),i([M({displayName:"\u5f71\u5b50\u7f29\u653e"})],t.prototype,"shadowScale",void 0),i([M({displayName:"ui\u5f85\u673a\u52a8\u753b"})],t.prototype,"uiIdleName",void 0),i([D],t)}(r.pzaBaseComponent);e.pzaBasePlant=E,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaShadowEffect":"pzaShadowEffect","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaPlantBody":"pzaPlantBody"}],pzaBaseZombie:[function(a,t,e){"use strict";cc._RF.push(t,"fabae/AhBdCuZz/pzZ7aC9g","pzaBaseZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBaseZombie=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaGameZJ"),u=a("../../Common/pzaLocalData"),d=a("../../Common/pzaNodeManager"),h=a("../../Common/pzaSoundManager"),m=a("../../Common/pzaSpineController"),f=a("../../Common/pzaUIManager"),z=a("../../Common/pzaUtil"),y=a("../../Common/pzaWorldEventManager"),g=a("../../Load/pzaBundleObjectPool"),v=a("../../Load/pzaPreLoadManager"),b=a("../../View/Battle/pzaNewZombieView"),S=a("../../View/Battle/pzaReviveView"),P=a("../Data/pzaBuffData"),C=a("../Data/pzaPlantEnum"),D=a("../Data/pzaZombieEnum"),M=a("../Effect/pzaShadowEffect"),E=a("../Plant/pzaAttackType"),_=a("../pzaEffectManager"),T=a("../pzaGameState"),w=a("../pzaSpineTool"),A=a("./pzaZombieBody"),B=a("./pzaZombieSlot"),G=a("./pzaZombieState"),O=cc._decorator,I=O.ccclass,N=O.property,R=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.animation=null,t.body=null,t.idleAniName=[],t.moveAniName=[],t.deathAniName=[],t.attackAniName=[],t.skinName=[],t.needShadow=!0,t.shadowOffset=cc.v2(),t.mask=null,t.uiIdleName="idle",t.curShadow=null,t.curSkinName=null,t.zombieState=G.pzaZombieState.STAY,t.zombieHurtState=null,t.equipHurtState=null,t.equipHurtState2=null,t.showFrost=!1,t.showFire=!1,t.hypnosisState=!1,t.bodyBindData=!1,t.hasEquip=!1,t.hasEquip2=!1,t.hasTool=!1,t.changeTargetRow=-1,t.zombieWin=!1,t.directThrowHurt=!1,t.breakDirtTime=0,t.breakDirtHeight=140,t.animationYOffset=0,t.ladderY=0,t.pushBackTime=0,t.breakCall=null,t.zombieScale=1,t.inUI=!1,t.slotMap=null,t.isInButterState=!1,t.isInGarlicState=!1,t.garlicSkinName=null,t.equip1Slot=null,t.equip2Slot=null,t.butterSlot=B.pzaZombieSlotType.butter,t.isPlayEquipDeath=!1,t.hurtMap=new Map([[E.pzaAttackType.TALL_BOWLING,function(a){return t.baseData.hurtZombieWithEquip(a),t.baseData.isDead||t.baseData.hp<=0?(t.baseData.zombieDie(),t.death(!0),h.pzaSoundManager.playAudio("bowlingHitNormal",.5),p.pzaCollisionManager.getInstance.delZombieByRow(t.baseData.yIndex,t.body),!0):(t.zombieHurtSound(E.pzaAttackType.BOWLING),t.refreshHurtState(!1),t.animation.flash(),!0)}],[E.pzaAttackType.CLEAN_CAR,function(){return t.baseData.zombieDie(),t.flaserDeath(),!0}],[E.pzaAttackType.BANG,function(a){return t.baseData.hurtZombieWithEquip(a),t.baseData.isDead||t.baseData.hp<=0?(t.baseData.zombieDie(),t.death(!1),!0):(t.zombieHurtSound(E.pzaAttackType.BANG),t.refreshHurtState(!1),t.animation.flash(),!0)}],[E.pzaAttackType.EAT,function(){return t.baseData.zombieData.cate!==D.pzaZombieCate.Gargantuar&&t.baseData.zombieData.zombieType!==D.pzaZombieEnum.DR_ZOMBOSS&&(t.baseData.zombieDie(),t.death(!1),!0)}],[E.pzaAttackType.TWINE,function(){return t.twineDeath(),!0}],[E.pzaAttackType.BOOM,function(a){return t.baseData.hurtZombieBody(a),t.baseData.isDead||t.baseData.hp<=0?(t.ashesDeath(a,E.pzaAttackType.BOOM),!0):(t.zombieHurtSound(E.pzaAttackType.BOOM),t.refreshHurtState(!1),t.animation.flash(),!0)}],[E.pzaAttackType.NORMAL_BOOM,function(){return t.baseData.zombieData.cate!==D.pzaZombieCate.Gargantuar&&t.baseData.zombieData.zombieType!==D.pzaZombieEnum.DR_ZOMBOSS&&(t.baseData.zombieDie(),t.death(!1),!0)}],[E.pzaAttackType.PENETRATE,function(a){return t.baseData.zombieData.hurtCate==D.pzaZombieHurtCate.PENETRATE_HURT&&(t.zombieHurtSound(E.pzaAttackType.PENETRATE),t.penetrateHurt(a),t.refreshHurtState(!1),t.animation.flash(),!(t.baseData.isDead||t.baseData.hp<=0)||(t.death(!0),!0))}],[E.pzaAttackType.THROW_ATK,function(a){return!!t.directThrowHurt&&(t.zombieHurtSound(E.pzaAttackType.THROW_ATK),t.baseData.zombieData.hurtCate==D.pzaZombieHurtCate.PENETRATE_HURT?t.baseData.hurtZombieBody(a):t.baseData.hurtZombie2(a),t.baseData.isDead||t.baseData.hp<=0?(t.death(!0),!0):(t.refreshHurtState(!1),t.animation.flash(),!0))}],[E.pzaAttackType.SPIKE,function(a){return t.baseData.zombieData.hurtCate==D.pzaZombieHurtCate.PENETRATE_HURT&&(t.baseData.hurtZombieBody(a),(t.baseData.isDead||t.baseData.hp<=0)&&t.death(!0),t.refreshHurtState(!1),t.animation.flash(),!0)}],[E.pzaAttackType.BOWLING,function(a){return t.baseData.zombieData.zombieType==D.pzaZombieEnum.SCREEN_DOOR_ZOMBIE&&(a/=4),t.baseData.zombieData.zombieType==D.pzaZombieEnum.BUCKET_HEAD_ZOMBIE&&(a/=2),t.zombieHurtSound(E.pzaAttackType.BOWLING),t.baseData.hurtZombie(a),t.baseData.isDead||t.baseData.hp<=0?(t.death(!0),p.pzaCollisionManager.getInstance.delZombieByRow(t.baseData.yIndex,t.body),!0):(t.refreshHurtState(!1),t.animation.flash(),!0)}],[E.pzaAttackType.DEATH_ANI,function(a){return t.penetrateHurt(a),t.refreshHurtState(!1),t.animation.flash(),!(t.baseData.isDead||t.baseData.hp<=0)||(t.death(!0),!0)}]]),t.color_frozen=cc.Color.fromHEX(cc.color(),"#3B95FF"),t.color_fire=cc.Color.fromHEX(cc.color(),"#FF4242"),t}return n(t,a),t.prototype.initEquips=function(){},t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.body.node.getComponent(cc.BoxCollider).enabled=!0,this.inUI=!1,this.ladderY=0,y.pzaWorldEventManager.addListener(y.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.initEquips()},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),y.pzaWorldEventManager.removeListener(y.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.preventBreak=function(){this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0},t.prototype.resumeBreak=function(){this.body.node.getComponent(cc.BoxCollider).enabled=!0,this.baseData.hp>0&&(this.baseData.isDead=!1)},t.prototype.uiShow=function(){this.inUI=!0,this.setZombieScale(1),this.node.scaleX=1,this.refreshFrostState(!0),this.animation.playAnimation(this.uiIdleName,!0,null,null,.5),this.refreshHurtState(!0),this.randomZombieSkin()},t.prototype.preview=function(t,e,o){void 0===o&&(o=1),a.prototype.bindData.call(this,t),this.slotMap||this.initEquips(),this.hasEquip=!0,this.hasEquip2=!0,this.hasTool=!0,this.zombieWin=!1,this.setZombieScale(o),this.node.scaleX=o,this.createShadow(e),this.randomZombieSkin(),this.refreshFrostState(!0),this.refreshHurtState(!0),this.playStayAnimation()},t.prototype.setZombieScale=function(a){this.zombieScale=a,this.node.scale=a},t.prototype.bindData=function(t,e){if(void 0===e&&(e=!1),a.prototype.bindData.call(this,t),null!=t&&null!=t.yIndex){var o=10*-this.baseData.yIndex+5;this.node.zIndex=o}this.createShadow(),this.hasEquip=t.zombieData.equipType!=D.pzaEquipType.NO_EQUIP,this.hasEquip2=t.zombieData.equipType2!=D.pzaEquipType.NO_EQUIP,this.hasTool=t.zombieData.toolType!=D.pzaEquipType.NO_EQUIP,this.zombieHurtState=null,this.equipHurtState=null,this.equipHurtState2=null,this.bodyBindData=!1,this.hypnosisState=!1,this.zombieWin=!1,this.pushBackTime=0,null!=this.mask&&(this.mask.enabled=!1),this.breakDirtTime=0,this.changeTargetRow=-1,this.isPlayEquipDeath=!1,this.randomZombieSkin(),this.slotMap||this.initEquips(),this.refreshOrientation(),this.playStayAnimation(),this.refreshFrostState(!0),this.refreshHurtState(!0),this.baseData.zombieData.hypnosis&&this.beHypnosis(!1)},t.prototype.updateEquipState=function(a,t){if(a){this.slotMap||this.initEquips();var e=this.slotMap.get(a);e?e.updateState(t):console.log("updateEquipState\u672a\u5b9a\u4f4d\u5230slot",this.baseData.zombieData.zombieType,a)}},t.prototype.breakDirt=function(a){void 0===a&&(a=null),this.breakCall=a,null!=this.mask&&(this.mask.enabled=!0),this.breakDirtTime=.3,this.breakDirtHeight=140*this.zombieScale,this.animation.node.y=-this.breakDirtHeight,this.animationYOffset=0,this.curShadow&&this.curShadow.hideShadow()},t.prototype.breakWater=function(a){void 0===a&&(a=null),this.breakCall=a,null!=this.mask&&(this.mask.enabled=!0),this.breakDirtTime=.3,this.breakDirtHeight=160*this.zombieScale,this.animation.node.y=-this.breakDirtHeight,this.animationYOffset=-30*this.zombieScale,this.curShadow&&this.curShadow.hideShadow()},t.prototype.update=function(a){!this.inUI&&this.zombieWin&&null!=this.baseData&&this.zombieWinMove(a)},t.prototype.logicUpdate=function(a){if(this.breakDirtTime>0){this.breakDirtTime-=a;var t=-Math.max(0,this.breakDirtTime/.3)*this.breakDirtHeight+this.animationYOffset;return this.animation.node.y=t*this.zombieScale,void(this.breakDirtTime<=0&&null!=this.mask&&(this.mask.enabled=!1,this.curShadow&&this.curShadow.showShadow(),this.breakCall&&this.breakCall()))}if(null!=this.baseData&&null!=this.baseData.zombieData&&(!this.isPlayEquipDeath||this.baseData.buffData.hasBuff(P.pzaBuffType.FROZEN))&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(a);else{var e=this.findTarget();(3==T.pzaGameState.curChapter||4==T.pzaGameState.curChapter)&&this.baseData.xIndex<0&&(e=null),e&&!e.isDead?this.attack(a,e):this.updateMove(a)}else this.changeRowMove(a)}},t.prototype.createShadow=function(a){var t=this;void 0===a&&(a=null),this.needShadow?(null==a&&(a=d.pzaNodeManager.getDownEffectNode()),g.pzaBundleObjectPool.requestInstantByUrl2(v.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(a);var n=o.getComponent(M.pzaShadowEffect);n&&n.init(t.baseData,t.shadowOffset,t.zombieScale),t.breakDirtTime>0&&n&&n.hideShadow(),t.curShadow=n}else console.error(e)})):this.curShadow=null},t.prototype.pushBack=function(a){this.pushBackTime=a},t.prototype.pushBackMove=function(a){this.baseData.zombieData.hypnosis||this.baseData.isDead?this.pushBackTime=0:(this.pushBackTime-=a,this.baseData.logicPos.x+=200*a,this.baseData.logicPos.x>=600&&(this.baseData.logicPos.x=600))},t.prototype.updateMove=function(a){if(!(a>.7||this.isInButterState)){this.zombieState!=G.pzaZombieState.MOVE&&this.playMoveAnimation();var t=this.baseData.zombieData.moveSpd,e=1,o=this.baseData.buffData.releaseBuff(P.pzaBuffType.FROST);null!=o&&(e-=o.buffValue);var n=this.baseData.buffData.releaseBuff(P.pzaBuffType.SPEED_UP);if(null!=n&&(e+=n.buffValue),t*=e,this.animation.changeAnimationTimeScale(e),1==this.baseData.zombieData.direction?this.baseData.logicPos.x+=a*t:this.baseData.logicPos.x-=a*t,(this.baseData.zombieData.hypnosis||this.baseData.zombieData.zombieType==D.pzaZombieEnum.YETI_ZOMBIE&&1==this.baseData.zombieData.direction)&&this.baseData.logicPos.x>=640)return this.baseData.zombieDie(),void this.death(!1);this.baseData.logicPos.x<(T.pzaGameState.isZombieMode()?-450:-480)&&this.zombieGoHome();var i=this.baseData.xIndex,r=T.pzaGameState.map.getMapXIndex(this.baseData.logicPos);if(this.baseData.xIndex=r,-1==this.changeTargetRow){var p=.1*T.pzaGameState.map.getYInterval(this.baseData.yIndex);T.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,this.baseData.logicPos,p)}if(i<0&&r>=0&&this.zombieScream(),T.pzaGameState.newZombie==this.baseData.zombieData.zombieType&&7==r)if(this.baseData.zombieData.zombieType==D.pzaZombieEnum.BUNGEE_ZOMBIE)T.pzaGameState.showUnlockZombie();else{T.pzaGameState.gamePause=!0,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_PAUSE,null);var l=this.node.convertToWorldSpaceAR(cc.v2());f.pzaUIManager.baseShowPopUI(v.pzaResourceUrl.NEW_ZOMBIE_VIEW,function(a){var t=a&&a.getComponent(b.pzaNewZombieView);t&&t.showNewZombie(T.pzaGameState.newZombie,l),T.pzaGameState.showUnlockZombie()})}}},t.prototype.changeRowMove=function(a){this.updateMove(a),this.baseData.logicPos.y+=150*a*(this.baseData.yIndex<this.changeTargetRow?1:-1);var t=.1*T.pzaGameState.map.getYInterval(this.changeTargetRow),e=T.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.changeTargetRow,0,t);(this.baseData.yIndex<this.changeTargetRow&&e.y<=this.baseData.logicPos.y||this.baseData.yIndex>this.changeTargetRow&&e.y>=this.baseData.logicPos.y)&&(this.baseData.logicPos.y=e.y,this.body.curTarget=null,window.pzazombieManager.zombieChangeMapRow(this.body,this.baseData,this.changeTargetRow),this.changeTargetRow=-1,this.isInGarlicState&&(this.isInGarlicState=!1,this.changeSkin(this.curSkinName)))},t.prototype.zombieWinMove=function(a){var t=this;if(!T.pzaGameState.zombieWinShowUI){if(5==T.pzaGameState.curChapter||10==T.pzaGameState.curChapter){if(!T.pzaGameState.zombieWinShowMap)return window.pzaMapManager.failShowInfactMap(function(){t.node.setPosition(cc.v2(-650,180))}),T.pzaGameState.zombieWinShowMap=!0,this.baseData.logicPos=cc.v2(-650,180),this.node.setPosition(cc.v2(1e4,1e4)),void this.pauseSelf();if(!T.pzaGameState.finishShowWinShowMap)return;return this.baseData.logicPos.y-=250*a,this.baseData.logicPos.y<=-60&&(T.pzaGameState.zombieWinShowUI=!0,s.pzaGameManager.showGameFail()),void this.node.setPosition(this.baseData.logicPos)}this.baseData.logicPos.x-=40*a;var e=-690;if(3!=T.pzaGameState.curChapter&&4!=T.pzaGameState.curChapter&&8!=T.pzaGameState.curChapter&&9!=T.pzaGameState.curChapter||(e=-750),this.baseData.logicPos.x<=e)return T.pzaGameState.zombieWinShowUI=!0,s.pzaGameManager.showGameFail(),void this.node.setPosition(this.baseData.logicPos);if(T.pzaGameState.zombieWinShowMap)this.node.setPosition(this.baseData.logicPos);else{var o=-130;T.pzaGameState.isZjMode()&&s.pzaGameManager.getGame(T.pzaGameMode.ZaJiao,c.pzaGameZJ).getRankConf(T.pzaGameState.curPart).map>5&&(o=0);var n=300*a,i=300*a,r=!1,p=!1;this.baseData.logicPos.y>o?(this.baseData.logicPos.y-=n,this.baseData.logicPos.y<=o&&(this.baseData.logicPos.y=o,p=!0)):this.baseData.logicPos.y<o?(this.baseData.logicPos.y+=n,this.baseData.logicPos.y>=o&&(this.baseData.logicPos.y=o,p=!0)):p=!0,(3==T.pzaGameState.curChapter||4==T.pzaGameState.curChapter)&&this.baseData.logicPos.x>-570?(this.baseData.logicPos.x-=i,this.baseData.logicPos.x<=-570&&(this.baseData.logicPos.x=-570,r=!0)):r=!0,this.node.setPosition(this.baseData.logicPos),r&&p&&(window.pzaMapManager.failShowInfactMap(),T.pzaGameState.zombieWinShowMap=!0)}}},t.prototype.isCanClimbLabby=function(){return this.baseData.zombieData.cate!==D.pzaZombieCate.Gargantuar&&this.baseData.zombieData.cate!==D.pzaZombieCate.IceCar&&this.baseData.zombieData.zombieType!=D.pzaZombieEnum.CATAPULT_ZOMBIE},t.prototype.logicLateUpdate=function(t){if(!(t>.7)&&(a.prototype.logicLateUpdate.call(this,t),this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null!=this.baseData&&null!=this.baseData.logicPos)){var e=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaMapManager.LadderMap.get(e);if(null!=o&&-1==this.baseData.zombieData.direction&&this.isCanClimbLabby()){var n=o.logicPos.x-this.baseData.logicPos.x;if(n>0&&n<=60){var i=1.6*n;return this.ladderY=i,this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+i)),void(this.baseData.buffData.hasBuff(P.pzaBuffType.SPEED_UP)||this.baseData.buffData.addBuff(new P.pzaBuffInfo(P.pzaBuffType.SPEED_UP,-1,1.5)))}}if(this.ladderY>0)return this.baseData.buffData.hasBuff(P.pzaBuffType.SPEED_UP)&&this.baseData.buffData.removeBuff(P.pzaBuffType.SPEED_UP),this.ladderY-=300*t,void this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.ladderY));this.node.setPosition(this.baseData.logicPos)}},t.prototype.bePauseControl=function(){null==this.baseData||this.baseData.isDead||(a.prototype.bePauseControl.call(this),this.pauseSelf())},t.prototype.pauseSelf=function(){this.zombieWin||this.animation.pauseAnimation()},t.prototype.resumeSelf=function(){this.baseData&&this.baseData.isBePauseControlled()||this.animation&&this.animation.resumeAnimation()},t.prototype.hurt=function(a,t,e){if(void 0===e&&(e=E.pzaAttackType.FLOOR_ATK),this.baseData&&!this.baseData.isDead){if(T.pzaGameState.critValue>0&&Math.random()<T.pzaGameState.critValue&&(a=Math.round(1.5*a)),e==E.pzaAttackType.DEATH)return this.baseData.zombieDie(),void this.death(!1,e);if(!this.baseData.buffData.hasBuff(P.pzaBuffType.HARD_BODY)||e==E.pzaAttackType.BOOM||e==E.pzaAttackType.EAT){var o=this.hurtMap.get(e);if(!o||!o.call(this,a,t)){if(this.zombieHurtSound(e),this.baseData.hurtZombie(a),this.baseData.isDead||this.baseData.hp<=0)return e==E.pzaAttackType.KNOCK?void this.death(!1):void this.death(!0);this.refreshHurtState(!1),this.animation.flash()}}}},t.prototype.penetrateHurt=function(a){this.baseData.hurtZombieBody(a)},t.prototype.twineDeath=function(){this.baseData.zombieDie(),this.death(!1)},t.prototype.death=function(a,t){var e=this;void 0===t&&(t=null),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,!0,t),a?(this.preventBreak(),this.playDeathAnimation(function(){e.close()})):this.close()},t.prototype.flaserDeath=function(){var a=this;window.pzaMapManager.isInWaterWay(this.baseData.yIndex)?this.death(!1,E.pzaAttackType.CLEAN_CAR):(this.preventBreak(),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,!0,E.pzaAttackType.CLEAN_CAR),this.pauseSelf(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.rotateTo(.15,90),cc.scaleTo(.15,.5*this.zombieScale,1*this.zombieScale),cc.delayTime(.1),cc.callFunc(function(){a.node.rotation=0,a.close()}))))},t.prototype.attack=function(a,t){if(null!=t&&null!=t.plantData&&t.plantData.plantType==C.pzaPlantEnum.GARLIC)return this.baseData.zombieData.atkInterval=0,this.damage(t),this.changeMapRow(),void h.pzaSoundManager.playAudio("Garlic");if(null!=t&&null!=t.plantData&&t.plantData.plantType==C.pzaPlantEnum.QQFUME_SHROOM)return this.baseData.zombieData.atkInterval=1,this.baseData.zombieData.atkInterval+=a,void(this.baseData.zombieData.atkInterval>=1&&(this.baseData.zombieData.atkInterval=0,this.damage(t)));this.zombieState!=G.pzaZombieState.EAT_ATK&&(this.baseData.zombieData.atkInterval=0,this.playAttakAnimation());var e=this.baseData.buffData.releaseBuff(P.pzaBuffType.FROST);null!=e&&(a*=e.buffValue),this.baseData.zombieData.atkInterval+=a,this.baseData.zombieData.atkInterval>=1&&(this.baseData.zombieData.atkInterval=0,this.damage(t))},t.prototype.damage=function(a){if(null!=a&&null!=this.baseData&&null!=this.baseData.zombieData)if(a.isBrain){var t=window.pzaplantManager.brainMap.get(a);t&&t.hurt(this.baseData.atk,this.baseData)}else if(null!=a.zombieData){var e;this.baseData.zombieData.hypnosis?(e=window.pzazombieManager.getZombie(a))&&e.hurt(this.baseData.atk):(e=window.pzazombieManager.getHypnoZombie(a))&&e.hurt(this.baseData.atk),this.zombieEatSound(a)}else{this.zombieEatSound(a);var o=window.pzaplantManager.getCanAttackPlant(a.xIndex,a.yIndex);o&&o.hurt(this.baseData.atk,this.baseData)}},t.prototype.beHypnosis=function(a){void 0===a&&(a=!0),this.hypnosisState=!0,this.body&&this.body.hypnosischangeGroup(),this.refreshOrientation(),this.animation.node.color=cc.Color.fromHEX(cc.color(),"#F35CFC"),a&&_.pzaEffectManager.createHypnoEffect(this.baseData.logicPos,this.node.zIndex)},t.prototype.findTarget=function(){if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isBrain)return this.body.curTarget;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;if(null!=this.body.curTarget.zombieData)return this.body.curTarget;if(null==this.body.curTarget.plantData)return null;var a=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(null!=window.pzaMapManager.LadderMap.get(a)&&this.isCanClimbLabby())return null;if(this.body.curTarget.plantData.plantType==C.pzaPlantEnum.PUMPKIN)return this.body.curTarget;if(this.body.curTarget.plantData.plantType==C.pzaPlantEnum.TALL_NUT){var t=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex,e=window.pzaplantManager.pumpkinDataMap.get(t);return null==e||e.isDead?this.body.curTarget:e}if(this.body.curTarget.plantData.cate===C.pzaPlantCate.Spike)return this.baseData.zombieData.cate===D.pzaZombieCate.Gargantuar?this.body.curTarget:null;if(l.pzaPlantConfigData.isEnvPlant(this.body.curTarget.plantData.plantType)){var o=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex,n=window.pzaplantManager.plantDataMap.get(o);return null==n||n.isDead?this.body.curTarget:n}return this.body.curTarget},t.prototype.changeMapRow=function(){var a=this;if(this.attackAniName[0])this.zombieState=G.pzaZombieState.EAT_ATK,this.baseData.buffData.addBuff(new P.pzaBuffInfo(P.pzaBuffType.GARLIC,-1)),this.animation.playAnimation(this.attackAniName[0],!1,null,function(){if(a.garlicSkinName&&(a.isInGarlicState=!0,a.changeSkin(a.garlicSkinName)),a.baseData.buffData.removeBuff(P.pzaBuffType.GARLIC),Math.random()>.5){var t=a.changeToUpRow();a.changeTargetRow=t?a.baseData.yIndex+1:a.baseData.yIndex-1}else t=a.changeToDownRow(),a.changeTargetRow=t?a.baseData.yIndex-1:a.baseData.yIndex+1;var e=10*-a.changeTargetRow+5;a.node.zIndex=e});else{if(Math.random()>.5){var t=this.changeToUpRow();this.changeTargetRow=t?this.baseData.yIndex+1:this.baseData.yIndex-1}else t=this.changeToDownRow(),this.changeTargetRow=t?this.baseData.yIndex-1:this.baseData.yIndex+1;var e=10*-this.changeTargetRow+5;this.node.zIndex=e}},t.prototype.changeToUpRow=function(){var a=this.baseData.yIndex+1;if(a>=T.pzaGameState.map.getMapRow())return!1;var t=window.pzaMapManager.isInWaterWay(a);return l.pzaGameConfig.isWaterZombie(this.baseData.zombieData.zombieType)==t},t.prototype.changeToDownRow=function(){var a=this.baseData.yIndex-1;if(a<0)return!1;var t=window.pzaMapManager.isInWaterWay(a);return l.pzaGameConfig.isWaterZombie(this.baseData.zombieData.zombieType)==t},t.prototype.refreshHurtState=function(a){if(a)return this.animation.node.y=0,this.equipIntact(),this.equipIntact2(),void this.zombieIntact();if(this.baseData&&this.baseData.zombieData){var t;if(this.hasEquip&&(this.baseData.zombieData.equipType==D.pzaEquipType.NO_EQUIP?this.equipDeath(!1):(t=this.baseData.zombieData.equipHp/this.baseData.zombieData.maxEquipHp)<=0?this.equipHurtState!=D.pzaHurtStateEnum.DEAD&&this.equipDeath(!0):t<=1/3?this.equipHurtState!=D.pzaHurtStateEnum.DYING&&this.equipDying():t<=2/3?this.equipHurtState!=D.pzaHurtStateEnum.HURT&&this.equipHurt():this.equipHurtState!=D.pzaHurtStateEnum.INTACT&&this.equipIntact()),this.hasEquip2&&(this.baseData.zombieData.equipType2==D.pzaEquipType.NO_EQUIP?this.equipDeath2(!1):(t=this.baseData.zombieData.equipHp2/this.baseData.zombieData.maxEquipHp2)<=0?this.equipHurtState2!=D.pzaHurtStateEnum.DEAD&&this.equipDeath2(!0):t<=1/3?this.equipHurtState2!=D.pzaHurtStateEnum.DYING&&this.equipDying2():t<=2/3?this.equipHurtState2!=D.pzaHurtStateEnum.HURT&&this.equipHurt2():this.equipHurtState2!=D.pzaHurtStateEnum.INTACT&&this.equipIntact2()),this.baseData.zombieData.cate==D.pzaZombieCate.Gargantuar)if(this.baseData.zombieData.zombieType==D.pzaZombieEnum.GARGANTUAR4||this.baseData.zombieData.zombieType==D.pzaZombieEnum.RED_GARGANTUAR4){var e=this.baseData.zombieData.equipHp/this.baseData.zombieData.maxEquipHp,o=this.baseData.zombieData.equipHp2/this.baseData.zombieData.maxEquipHp2;e<=0&&o<=0&&(this.baseData.buffData.removeBuff(P.pzaBuffType.IMM_CONTROL),this.baseData.buffData.removeBuff(P.pzaBuffType.IMM_ICE),this.baseData.buffData.removeBuff(P.pzaBuffType.IMM_ICE_PEA))}else(o=this.baseData.zombieData.equipHp2/this.baseData.zombieData.maxEquipHp2)<=0&&this.baseData.buffData.removeBuff(P.pzaBuffType.IMM_ICE_PEA);this.hasTool&&this.baseData.zombieData.toolType==D.pzaEquipType.NO_EQUIP&&this.toolDeath();var n=this.baseData.hp/this.baseData.maxHp;n<=1/3?this.zombieHurtState!=D.pzaHurtStateEnum.DYING&&this.zombieDying():n<=2/3?this.zombieHurtState!=D.pzaHurtStateEnum.HURT&&this.zombieHurt():this.zombieHurtState!=D.pzaHurtStateEnum.INTACT&&this.zombieIntact()}},t.prototype.refreshOrientation=function(){null!=this.baseData&&null!=this.baseData.zombieData&&(this.node.scaleX=-this.baseData.zombieData.direction*this.zombieScale)},t.prototype.changeSkin=function(a){this.animation.setAnimationSkin(a),a!==this.garlicSkinName&&(this.curSkinName=a),this.slotMap&&this.slotMap.forEach(function(a){a.state&&a.updateState(a.state,!0)})},t.prototype.randomZombieSkin=function(){null!=this.skinName&&(this.skinName.length<=1?null!=this.skinName[0]&&this.changeSkin(this.skinName[0]):(this.curSkinName=Math.random()>.9?this.skinName[1]:this.skinName[0],this.changeSkin(this.curSkinName)))},t.prototype.getStayAniName=function(){return z.pzaUtil.getRandomValueFromArray(this.idleAniName)},t.prototype.playStayAnimation=function(){this.zombieState=G.pzaZombieState.STAY,this.animation.playAnimation(this.getStayAniName(),!0)},t.prototype.getMoveAniName=function(){return z.pzaUtil.getRandomValueFromArray(this.moveAniName)},t.prototype.playMoveAnimation=function(){this.zombieState=G.pzaZombieState.MOVE,this.animation.playAnimation(this.getMoveAniName(),!0,null,null,1)},t.prototype.getAttackAniName=function(){return z.pzaUtil.getRandomValueFromArray(this.attackAniName)},t.prototype.playAttakAnimation=function(){var a=this;this.zombieState=G.pzaZombieState.EAT_ATK,this.animation.playAnimation(this.getAttackAniName(),!0,null,function(){var t=a.findTarget();if(null!=t&&!t.isDead&&null!=t.plantData&&t.plantData.plantType==C.pzaPlantEnum.HYPNO_SHROOM&&!t.plantData.sleeping){h.pzaSoundManager.playAudio("floop"),h.pzaSoundManager.playAudio("mindcontrolled"),t.isDead=!0,window.pzazombieManager.zombieHypnosis(a.baseData);var e=window.pzaplantManager.getPlantByData(t);e&&e.close(),window.pzaplantManager.removePlant(t)}})},t.prototype.playDeathAnimation=function(a){this.zombieState=G.pzaZombieState.DEAD,this.zombieHurtState=D.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),this.animation.playAnimation(z.pzaUtil.getRandomValueFromArray(this.deathAniName),!1,a),this.zombieFallSound(),this.hasEquip&&this.updateEquipState(this.equip1Slot,0),this.hasEquip2&&this.updateEquipState(this.equip2Slot,0)},t.prototype.equipDeath=function(){this.equipHurtState=D.pzaHurtStateEnum.DEAD,this.hasEquip=!1,this.equip1Slot!=B.pzaZombieSlotType.head_nut&&this.updateEquipState(this.equip1Slot,0)},t.prototype.equipDeath2=function(){this.equipHurtState=D.pzaHurtStateEnum.DEAD,this.hasEquip2=!1,this.equip2Slot!=B.pzaZombieSlotType.head_nut&&this.updateEquipState(this.equip2Slot,0)},t.prototype.toolDeath=function(){this.hasTool=!1},t.prototype.zombieDying=function(){this.zombieHurtState=D.pzaHurtStateEnum.DYING},t.prototype.zombieHurt=function(){this.zombieHurtState=D.pzaHurtStateEnum.HURT},t.prototype.zombieIntact=function(){this.zombieHurtState=D.pzaHurtStateEnum.INTACT},t.prototype.equipDying=function(){this.equipHurtState=D.pzaHurtStateEnum.DYING,this.updateEquipState(this.equip1Slot,3)},t.prototype.equipHurt=function(){this.equipHurtState=D.pzaHurtStateEnum.HURT,this.updateEquipState(this.equip1Slot,2)},t.prototype.equipIntact=function(){this.equipHurtState=D.pzaHurtStateEnum.INTACT,this.updateEquipState(this.equip1Slot,1)},t.prototype.equipDying2=function(){this.equipHurtState2=D.pzaHurtStateEnum.DYING,this.updateEquipState(this.equip2Slot,3)},t.prototype.equipHurt2=function(){this.equipHurtState2=D.pzaHurtStateEnum.HURT,this.updateEquipState(this.equip2Slot,2)},t.prototype.equipIntact2=function(){this.equipHurtState2=D.pzaHurtStateEnum.INTACT,this.updateEquipState(this.equip2Slot,1)},t.prototype.refreshFrostState=function(a){if(a)return this.showFrost=!1,this.showFire=!1,void(this.animation.node.color=cc.Color.WHITE);if(!(null==this.baseData||this.animation.flashTime>0||this.baseData.zombieData.hypnosis))if(this.baseData.buffData.hasBuff(P.pzaBuffType.FROST)){if(!this.baseData.isDead&&!this.showFrost)return this.showFrost=!0,void(this.animation.node.color=this.color_frozen)}else if(this.baseData.buffData.hasBuff(P.pzaBuffType.FIRE)){if(!this.baseData.isDead&&!this.showFire)return this.showFire=!0,void(this.animation.node.color=this.color_fire)}else(this.showFrost||this.showFire)&&(this.showFire=!1,this.showFrost=!1,this.animation.node.color=cc.Color.WHITE)},t.prototype.previewClose=function(){this.baseData&&(this.baseData.isDead=!0,this.baseData.hp=0),this.close()},t.prototype.updateRoleBuff=function(t){if(a.prototype.updateRoleBuff.call(this,t),this.slotMap){var e=this.slotMap.get(this.butterSlot);e&&(this.baseData.buffData.hasBuff(P.pzaBuffType.IMMOBILIZE)?(this.isInButterState=!0,e.updateState(1)):this.isInButterState&&(this.isInButterState=!1,e.updateState(0)))}},t.prototype.zombieGoHome=function(){var a=this;if(T.pzaGameState.isZombieMode())return this.baseData.zombieDie(),void this.death(!1);if(!window.pzaMapManager.hasCleanCar(this.baseData.yIndex)&&!T.pzaGameState.isGameEnd&&!u.pzaLocalData.isPopReviveView){var t=function(){T.pzaGameState.isGameEnd=!0,a.zombieWin=!0,a.resumeSelf(),a.node.zIndex=100,(T.pzaGameState.isVaseMode()||T.pzaGameState.isCreativeVaseMode())&&(T.pzaGameState.zombieWinInVase=!0),s.pzaGameManager.getCurrentGame().partFail()};if(!T.pzaGameState.hadRevived)return T.pzaGameState.gamePause=!0,y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.GAME_PAUSE,null),u.pzaLocalData.isPopReviveView=!0,void f.pzaUIManager.baseShowPopUI(v.pzaResourceUrl.GAME_REVIVE_VIEW,function(e){var o=e&&e.getComponent(S.pzaReviveView);o&&o.init(function(){a.baseData&&(a.baseData.zombieDie(),a.death(!1))},t)});t()}},t.prototype.getZombieHeadWps=function(){return!this.butterSlot||this.baseData.zombieData.zombieType==D.pzaZombieEnum.LADDER_ZOMBIE||this.baseData.zombieData.zombieType==D.pzaZombieEnum.BALLOON_ZOMBIE&&!this.hasEquip?this.node.convertToWorldSpaceAR(cc.v2()):w.pzaSpineTool.findBonePos(this.animation.spineAnimation,this.butterSlot,this.node)},t.prototype.ashesDeath=function(a,t){if(void 0===a&&(a=0),void 0===t&&(t=E.pzaAttackType.FLOOR_ATK),this.baseData.zombieDie(),5e4!=a||t!=E.pzaAttackType.BOOM||this.baseData.zombieData.zombieType!=D.pzaZombieEnum.BedCar&&this.baseData.zombieData.zombieType!=D.pzaZombieEnum.ZOMBONI3?this.death(!1):this.death(!1,E.pzaAttackType.DEATH),!(this.baseData.xIndex>=0&&window.pzaMapManager.isInWaterWay(this.baseData.yIndex))){var e=this.baseData.zombieData.zombieType;_.pzaEffectManager.createAshesEffect(e,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale)}},t.prototype.zombieScream=function(){var a="groan"+z.pzaUtil.getRandomNum(1,6);h.pzaSoundManager.playAudio(a)},t.prototype.zombieFallSound=function(){var a="zombie_falling_"+z.pzaUtil.getRandomNum(1,2);h.pzaSoundManager.playAudio(a)},t.prototype.zombieEatSound=function(a){if(null!=a.zombieData){var t="chomp_plant3";h.pzaSoundManager.playAudio(t)}else null!=a.plantData&&(a.plantData.plantType==C.pzaPlantEnum.WALL_NUT||a.plantData.plantType==C.pzaPlantEnum.TALL_NUT?(t="chomp_plant3",h.pzaSoundManager.playAudio(t)):(t="chomp_plant"+z.pzaUtil.getRandomNum(1,2),h.pzaSoundManager.playAudio(t)))},t.prototype.zombieHurtSound=function(a){if(a==E.pzaAttackType.KNOCK)h.pzaSoundManager.playAudio("bangzombie");else{var t="zombieHurt"+z.pzaUtil.getRandomNum(1,2);h.pzaSoundManager.playAudio(t)}},t.prototype.handBookPreview=function(){},t.prototype.close=function(){this.baseData&&(this.baseData.zombieData.hypnosis?p.pzaCollisionManager.getInstance.delPlantByRow(this.baseData.yIndex,this.body):p.pzaCollisionManager.getInstance.delZombieByRow(this.baseData.yIndex,this.body)),a.prototype.close.call(this)},i([N({displayName:"\u52a8\u753b",type:m.pzaSpineController})],t.prototype,"animation",void 0),i([N({displayName:"\u78b0\u649e\u8eab\u4f53",type:A.pzaZombieBody})],t.prototype,"body",void 0),i([N({displayName:"\u5f85\u673a\u52a8\u753b\u540d\u79f0",type:[cc.String]})],t.prototype,"idleAniName",void 0),i([N({displayName:"\u79fb\u52a8\u52a8\u753b\u540d\u79f0",type:[cc.String]})],t.prototype,"moveAniName",void 0),i([N({displayName:"\u6b7b\u4ea1\u52a8\u753b\u540d\u79f0",type:[cc.String]})],t.prototype,"deathAniName",void 0),i([N({displayName:"\u653b\u51fb\u52a8\u753b\u540d\u79f0",type:[cc.String]})],t.prototype,"attackAniName",void 0),i([N({displayName:"\u50f5\u5c38\u76ae\u80a4\u540d\u79f0",type:[cc.String]})],t.prototype,"skinName",void 0),i([N({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],t.prototype,"needShadow",void 0),i([N({displayName:"\u5f71\u5b50\u504f\u79fb"})],t.prototype,"shadowOffset",void 0),i([N({displayName:"mask",type:cc.Mask})],t.prototype,"mask",void 0),i([N({displayName:"ui\u5f85\u673a\u52a8\u753b"})],t.prototype,"uiIdleName",void 0),i([I],t)}(r.pzaBaseComponent);e.pzaBaseZombie=R,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameZJ":"pzaGameZJ","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewZombieView":"pzaNewZombieView","../../View/Battle/pzaReviveView":"pzaReviveView","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaShadowEffect":"pzaShadowEffect","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaZombieBody":"pzaZombieBody","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaBattleData:[function(a,t,e){"use strict";cc._RF.push(t,"3f945218QVK2JRe0zeKr3TM","pzaBattleData"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattleData=void 0;var o=a("../../Common/pzaGameManager"),n=a("../../Common/pzaSurvivalConfig"),i=a("../pzaGameState"),r=function(){function a(){this.gameMode=6,this.chapter=1,this.part=1,this.sunLightCount=0,this.selectPlants=null,this.curImitaterPlant=null,this.hasRevive=!1,this.survivalConfig=null,this.advancePlant=[],this.cdReduceValue=0,this.sunReduceValue=0,this.critValue=0,this.cleanCarState=[],this.TombMap=[],this.DoomHoleMap=[],this.GoldHoleMap=[],this.LadderMap=[],this.plantData=[],this.plantEnvData=[],this.pumpkinData=[],this.noTargetData=[],this.zombieEndlessPart=1,this.zombiePlantList=null,this.state=0,this.adPlantTimes=0,this.toolButtonLeftArr=null}return a.saveData=function(t,e){void 0===e&&(e=null);var n=new a;n.gameMode=i.pzaGameState.gameMode,n.chapter=i.pzaGameState.curChapter,n.part=i.pzaGameState.curPart,n.sunLightCount=i.pzaGameState.sunLightCount,n.selectPlants=window.pzaplantManager.curSelectPlants,n.curImitaterPlant=i.pzaGameState.curImitaterPlant,n.hasRevive=i.pzaGameState.hadRevived,n.survivalConfig=i.pzaGameState.survivalConfig,i.pzaGameState.advancePlantMap.forEach(function(a,t){n.advancePlant.push({plant:t,count:a})}),n.cdReduceValue=i.pzaGameState.cdReduceValue,n.sunReduceValue=i.pzaGameState.sunReduceValue,n.critValue=i.pzaGameState.critValue,n.cleanCarState=window.pzaMapManager.getCleanCarState(),n.zombieEndlessPart=i.pzaGameState.zombieEndlessPart,n.zombiePlantList=e,n.state=t;var r=o.pzaGameManager.getCurrentGame();return n.adPlantTimes=r.adPlantTimes,n.toolButtonLeftArr=r.toolButtonLeftArr,window.pzaMapManager.TombMap.forEach(function(a){n.TombMap.push({xIndex:a.xIndex,yIndex:a.yIndex})}),window.pzaMapManager.LadderMap.forEach(function(a){n.LadderMap.push({xIndex:a.xIndex,yIndex:a.yIndex})}),window.pzaMapManager.DoomHoleSet.forEach(function(a){n.DoomHoleMap.push({xIndex:a.mapXIndex,yIndex:a.mapYIndex,time:a.holeTime,step:a.holeStep})}),window.pzaMapManager.GoldHoleSet.forEach(function(a){n.GoldHoleMap.push({xIndex:a.mapXIndex,yIndex:a.mapYIndex,time:a.holeTime,step:a.holeStep})}),window.pzaplantManager.plantDataMap.forEach(function(a){n.plantData.push(a)}),window.pzaplantManager.plantEnvDataMap.forEach(function(a){n.plantEnvData.push(a)}),window.pzaplantManager.pumpkinDataMap.forEach(function(a){n.pumpkinData.push(a)}),window.pzaplantManager.notTargetMap.forEach(function(a){n.noTargetData.push(a)}),n},a.readData=function(a){null!=a&&(i.pzaGameState.gameMode=a.gameMode,i.pzaGameState.curChapter=a.chapter,i.pzaGameState.curPart=a.part,i.pzaGameState.sunLightCount=a.sunLightCount,i.pzaGameState.curImitaterPlant=a.curImitaterPlant,i.pzaGameState.hadRevived=a.hasRevive,i.pzaGameState.survivalConfig=n.pzaSurvivalConfig.cloneConfig(a.survivalConfig),i.pzaGameState.cdReduceValue=a.cdReduceValue,i.pzaGameState.sunReduceValue=a.sunReduceValue,i.pzaGameState.critValue=a.critValue,i.pzaGameState.zombieEndlessPart=a.zombieEndlessPart,null!=a.advancePlant&&a.advancePlant.forEach(function(a){i.pzaGameState.advancePlantMap.set(a.plant,a.count)}))},a}();e.pzaBattleData=r,cc._RF.pop()},{"../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSurvivalConfig":"pzaSurvivalConfig","../pzaGameState":"pzaGameState"}],pzaBattleDownView:[function(a,t,e){"use strict";cc._RF.push(t,"980c1Mp5PZGYaDiC5mPrVDT","pzaBattleDownView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattleDownView=void 0;var r=a("../../Battle/Data/pzaGuideType"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameManager"),s=a("../../Common/pzaGameZJ"),c=a("../../Common/pzaLocalData"),u=a("../../Common/pzaNodeManager"),d=a("../../Common/pzaSoundManager"),h=a("../../Common/pzaStatisticsMgr"),m=a("../../Common/pzaUIManager"),f=a("../../Common/pzaUtil"),z=a("../../Common/pzaWorldEventManager"),y=a("../../Load/pzaBundleObjectPool"),g=a("../../Load/pzaPreLoadManager"),v=a("../../utils/pzaChannel"),b=a("../../utils/pzakc"),S=a("../pzaWarningView"),P=a("./pzaBattlePropView"),C=a("./pzaMenuView"),D=cc._decorator,M=D.ccclass,E=D.property,_=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sunUIShowNode=null,t.sunCountLabel=null,t.sunUINode=null,t.shovelShowNode=null,t.shovel=null,t.blackShovel=null,t.guideArrow=null,t.pauseBtn=null,t.speedBtn=null,t.speedAdTag=null,t.speedCount=null,t.gameProp=null,t.freePlantNode=null,t.skipPartBtn=null,t.restartBtn=null,t.restartTxt=null,t.testNextWaveBtn=null,t.curSunCount=0,t.skipCutDown=0,t.restartCountDown=0,t.restartCountDownSec=0,t.restartCountDownMax=60,t}return n(t,a),t.prototype.onLoad=function(){var a=this.sunUINode.convertToWorldSpaceAR(cc.v2()),t=u.pzaNodeManager.getUpEffectNode();if(null!=t){var e=t.convertToNodeSpaceAR(a);p.pzaGameState.sunMoveUIPos=cc.v2(e.x,e.y)}},t.prototype.onEnable=function(){this.curSunCount=p.pzaGameState.sunLightCount,this.sunCountLabel.string=""+this.curSunCount,this.refreshSkipPartBtn(),this.testNextWaveBtn.active=c.pzaLocalData.testMode,v.pzaChannel.isConfRemote||(this.testNextWaveBtn.active=!1),this.shovel.on(cc.Node.EventType.TOUCH_START,this.clickShovel,this),this.shovel._touchListener.setSwallowTouches(!1),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.SELECT_CARD,this.selectCard,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.LACK_SUN,this.blinkSunLabel,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.GUIDE_REFRESH_PROP,this.guideRefreshProp,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.GUIDE_SHOW_SPEED,this.guideShowSpeed,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.GUIDE_USE_SPEED,this.guideUseSpeed,this),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_PROP_1_4?(this.freePlantNode.active=!1,this.gameProp.hideAllProp()):(h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"3"},{name:"adname",value:"\u5c40\u5185\u6a31\u6843\u70b8\u5f39"}),h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"4"},{name:"adname",value:"\u5c40\u5185\u81ea\u52a8\u62fe\u53d6"}),h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"5"},{name:"adname",value:"\u5c40\u5185\u989d\u5916\u9633\u5149"})),this.refreshGameSpeed(),l.pzaGameManager.getCurrentGame().showBattleDown(this)},t.prototype.onDisable=function(){this.shovel.off(cc.Node.EventType.TOUCH_START,this.clickShovel,this),this.blackShovel.stopAllActions(),this.blackShovel.opacity=0,z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.SELECT_CARD,this.selectCard,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.LACK_SUN,this.blinkSunLabel,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.GUIDE_REFRESH_PROP,this.guideRefreshProp,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.GUIDE_SHOW_SPEED,this.guideShowSpeed,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.GUIDE_USE_SPEED,this.guideUseSpeed,this)},t.prototype.showPauseBtn=function(){this.pauseBtn.active=!0,this.speedBtn.active=!0},t.prototype.showSunUI=function(){this.sunUIShowNode.active=!0,this.shovelShowNode.active=!0},t.prototype.hideSunUI=function(){this.sunUIShowNode.active=!1,this.shovelShowNode.active=!1},t.prototype.update=function(a){if(this.curSunCount!=p.pzaGameState.sunLightCount&&(this.curSunCount=p.pzaGameState.sunLightCount,this.sunCountLabel.string=""+this.curSunCount),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_SHOVEL_1_5&&1==window.pzaGuideManager.guideStep&&!this.guideArrow.active){var t=cc.v2(this.shovel.x,this.shovel.y-70);this.guideArrow.active=!0,this.guideArrow.stopAllActions(),this.guideArrow.setPosition(t),this.guideArrow.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(t.x,t.y+20)),cc.moveTo(.2,cc.v2(t.x,t.y)))))}p.pzaGameState.gamePause||(this.skipCutDown>0&&(this.skipCutDown-=a,this.skipCutDown<=0&&(this.skipPartBtn.active=!1)),this.restartCountDownSec>0&&(this.restartCountDown-=a,this.restartCountDown<this.restartCountDownSec&&this.showRestartTxt()))},t.prototype.showRestartTxt=function(){this.restartCountDownSec--,this.restartCountDownSec<=0?this.restartBtn.active=!1:this.restartTxt.string="\u91cd\u65b0\u5f00\u59cb\n00:"+b.default.twoInt(this.restartCountDownSec)},t.prototype.refreshSkipPartBtn=function(){var a=this;if(p.pzaGameState.gameMode===p.pzaGameMode.ZaJiao&&l.pzaGameManager.getGame(p.pzaGameMode.ZaJiao,s.pzaGameZJ).getRankConf(p.pzaGameState.curPart).daverestart){if(8==l.pzaGameManager.getGame(p.pzaGameMode.ZaJiao,s.pzaGameZJ).getRankConf(p.pzaGameState.curPart).trophyid)return this.restartCountDownSec=0,void(this.restartBtn.active=!1);this.restartBtn.active=!0,this.skipPartBtn.active=!1,this.restartCountDownSec=this.restartCountDownMax,this.restartCountDown=this.restartCountDownSec,this.restartTxt.string="\u91cd\u65b0\u5f00\u59cb\n00:"+b.default.twoInt(this.restartCountDownSec);var t,e=c.pzaLocalData.data.zaJiaoRestartTimes;return t=e<10?"Texture/BattleUI/restartBt0":e<50?"Texture/BattleUI/restartBt1":"Texture/BattleUI/restartBt2",void y.pzaBundleObjectPool.requestSpriteFrameByUrl(t,function(t,e){null==t&&null!=e?a.restartBtn.getChildByName("btPic").getComponent(cc.Sprite).spriteFrame=e:console.error(t)})}if(this.restartCountDownSec=0,this.restartBtn.active=!1,p.pzaGameState.isSurvival()||p.pzaGameState.isZombieMode())this.skipPartBtn.active=!1;else if(p.pzaGameState.curChapter<c.pzaLocalData.data.curChapter||p.pzaGameState.curChapter==c.pzaLocalData.data.curChapter&&p.pzaGameState.curPart<c.pzaLocalData.data.curPart)this.skipPartBtn.active=!1;else{var o=v.pzaChannel.instance().getChannel();("wx"!==o.channel||null!=o.ctrl&&"1"===o.ctrl.p4)&&("ks"!==o.channel||null!=o.ctrl&&"1"===o.ctrl.p4)&&("tt"!==o.channel||null!=o.ctrl&&"1"===o.ctrl.p4)&&("my"!==o.channel||null!=o.ctrl&&"1"===o.ctrl.p4)?(this.skipPartBtn.active=!0,this.skipCutDown=10):this.skipPartBtn.active=!1}},t.prototype.clickShovel=function(){if(p.pzaGameState.selectCard==p.pzaSelectCardType.SHOVE_CARD)return p.pzaGameState.selectCard=null,void this.refreshShovel();p.pzaGameState.selectCard=p.pzaSelectCardType.SHOVE_CARD,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null,this.refreshShovel(),d.pzaSoundManager.playAudio("clickShovel"),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.SELECT_CARD,null),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_SHOVEL_1_5&&1==window.pzaGuideManager.guideStep&&(this.guideArrow.active=!1,window.pzaGuideManager.guideStepNext())},t.prototype.clickPause=function(){c.pzaLocalData.isPopReviveView||(p.pzaGameState.resetCardState(),p.pzaGameState.gamePause=!0,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_PAUSE,null),d.pzaSoundManager.pausePlayMusic(),m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.GAME_MENU_VIEW,function(a){var t=a&&a.getComponent(C.pzaMenuView);t&&t.init(function(){p.pzaGameState.gamePause=!1,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_RESUME,null),d.pzaSoundManager.resumeMusic()},!0)}))},t.prototype.clickGameSpeed=function(){var a=this,t=function(){p.pzaGameState.gameSpeed<4?(p.pzaGameState.gameSpeed++,window.pzaMapManager.blink(0),d.pzaSoundManager.playAudio("faston")):(p.pzaGameState.isMiniMode()&&11==p.pzaGameState.curPart?p.pzaGameState.gameSpeed=2:p.pzaGameState.gameSpeed=1,window.pzaMapManager.blink(1),d.pzaSoundManager.playAudio("fastoff")),a.refreshGameSpeed(),f.pzaUtil.changeGameSpeed(p.pzaGameState.gameSpeed),h.pzaStatisticsMgr.sendEvent("System",{name:"system",value:p.pzaGameState.gameSpeed}),p.pzaGameState.resetCardState()};c.pzaLocalData.hasPass12()&&!c.pzaLocalData.data.unlockSpeed?(p.pzaGameState.gamePause=!0,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_PAUSE,null),d.pzaSoundManager.pausePlayMusic(),v.pzaChannel.instance().showVideo({sucCall:function(){c.pzaLocalData.data.unlockSpeed=!0,c.pzaLocalData.addDirty("unlockSpeed"),t()},failCall:function(){},endCall:function(){p.pzaGameState.gamePause=!1,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_RESUME,null),d.pzaSoundManager.resumeMusic()},posName:"\u89e3\u9501\u52a0\u901f\u529f\u80fd",adsid:"18"})):t()},t.prototype.clickRestartBt=function(){var a=this;p.pzaGameState.gamePause=!0,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_PAUSE,null),d.pzaSoundManager.pausePlayMusic(),m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(S.pzaWarningView);e&&e.show("\u6ce8\uff1a\u5012\u8ba1\u65f6\u7ed3\u675f\u524d\u91cd\u65b0\u5f00\u59cb\u4e0d\u6d88\u8017\u6311\u6218\u6b21\u6570","\u91cd\u65b0\u5f00\u59cb","\u8fd4\u56de\u6e38\u620f",function(){a.restartCountDownSec=0,l.pzaGameManager.getCurrentGame().gameRestart()},function(){p.pzaGameState.gamePause=!1,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_RESUME,null),d.pzaSoundManager.resumeMusic()},"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1)})},t.prototype.clickSkipPartBtn=function(){h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"21"},{name:"adname",value:"\u5c40\u5185\u8df3\u5173"}),p.pzaGameState.gamePause=!0,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_PAUSE,null),d.pzaSoundManager.pausePlayMusic(),m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(S.pzaWarningView);t&&t.show("\u6ce8\uff1a\u5feb\u901f\u8df3\u5173\u4ec5\u53ef\u83b7\u5f97\u4e00\u661f\u8bc4\u4ef7","\u8df3\u8fc7\u5173\u5361","\u8fd4\u56de\u6e38\u620f",function(){v.pzaChannel.instance().showVideo({sucCall:function(){d.pzaSoundManager.resumeMusic(),window.pzazombieManager.skipPassPart(),d.pzaSoundManager.stopLoopAudio(),d.pzaSoundManager.stopLongAudio(),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_WIN,null)},failCall:function(){p.pzaGameState.gamePause=!1,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_RESUME,null),d.pzaSoundManager.resumeMusic()},endCall:function(){},posName:"\u5c40\u5185\u8df3\u5173",adsid:"21"})},function(){p.pzaGameState.gamePause=!1,z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GAME_RESUME,null),d.pzaSoundManager.resumeMusic()},"\u662f\u5426\u5feb\u901f\u8df3\u8fc7\u672c\u5173\uff1f",!0)})},t.prototype.clickTestNextWave=function(){window.pzazombieManager.nextWaveTime=0,window.pzazombieManager.curWaveTime=46},t.prototype.selectCard=function(){p.pzaGameState.selectCard!=p.pzaSelectCardType.SHOVE_CARD&&(this.blackShovel.active=!1)},t.prototype.refreshShovel=function(){if(p.pzaGameState.selectCard==p.pzaSelectCardType.SHOVE_CARD)return this.blackShovel.stopAllActions(),this.blackShovel.active=!0,this.blackShovel.opacity=0,void this.blackShovel.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.4,177),cc.fadeOut(.4))));this.blackShovel.active=!1},t.prototype.blinkSunLabel=function(){var a=this;this.sunCountLabel.node.stopAllActions(),this.sunCountLabel.node.runAction(cc.repeat(cc.sequence(cc.callFunc(function(){a.sunCountLabel.node.color=cc.Color.fromHEX(cc.color(),"#FF0000")}),cc.delayTime(.1),cc.callFunc(function(){a.sunCountLabel.node.color=cc.Color.fromHEX(cc.color(),"#000000")}),cc.delayTime(.1)),4))},t.prototype.guideRefreshProp=function(){window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_PROP_1_4&&(0==window.pzaGuideManager.guideStep?this.freePlantNode.active=!0:1==window.pzaGuideManager.guideStep?this.gameProp.showFreeSun():2==window.pzaGuideManager.guideStep?this.gameProp.showAutoPick():3==window.pzaGuideManager.guideStep&&this.gameProp.showCherryBomb())},t.prototype.refreshGameSpeed=function(){this.speedAdTag.active=!c.pzaLocalData.data.unlockSpeed&&c.pzaLocalData.hasPass12(),this.speedCount.string="X"+p.pzaGameState.gameSpeed},t.prototype.guideShowSpeed=function(){this.speedBtn.active=!0,this.speedAdTag.active=!1,this.speedCount.string="X"+p.pzaGameState.gameSpeed},t.prototype.guideUseSpeed=function(){p.pzaGameState.gameSpeed=2,f.pzaUtil.changeGameSpeed(p.pzaGameState.gameSpeed),this.speedCount.string="X"+p.pzaGameState.gameSpeed,window.pzaMapManager.blink(0),d.pzaSoundManager.playAudio("faston")},i([E({displayName:"\u9633\u5149\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"sunUIShowNode",void 0),i([E({displayName:"\u9633\u5149\u6570\u91cf",type:cc.Label})],t.prototype,"sunCountLabel",void 0),i([E({displayName:"\u9633\u5149UI\u4f4d\u7f6e",type:cc.Node})],t.prototype,"sunUINode",void 0),i([E({displayName:"\u94f2\u5b50\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"shovelShowNode",void 0),i([E({displayName:"\u94f2\u5b50",type:cc.Node})],t.prototype,"shovel",void 0),i([E({displayName:"\u94f2\u5b50-\u9ed1",type:cc.Node})],t.prototype,"blackShovel",void 0),i([E({displayName:"\u5f15\u5bfc\u7bad\u5934",type:cc.Node})],t.prototype,"guideArrow",void 0),i([E({displayName:"\u83dc\u5355\u6309\u94ae",type:cc.Node})],t.prototype,"pauseBtn",void 0),i([E({displayName:"\u52a0\u901f\u6309\u94ae",type:cc.Node})],t.prototype,"speedBtn",void 0),i([E({displayName:"\u52a0\u901f\u5e7f\u544a\u56fe\u6807",type:cc.Node})],t.prototype,"speedAdTag",void 0),i([E({displayName:"\u901f\u5ea6",type:cc.Label})],t.prototype,"speedCount",void 0),i([E({displayName:"\u6e38\u620f\u5185\u9053\u5177\u8282\u70b9",type:P.pzaBattlePropView})],t.prototype,"gameProp",void 0),i([E({displayName:"\u514d\u8d39\u690d\u7269\u8282\u70b9",type:cc.Node})],t.prototype,"freePlantNode",void 0),i([E({displayName:"\u8df3\u5173\u6309\u94ae",type:cc.Node})],t.prototype,"skipPartBtn",void 0),i([E({displayName:"\u91cd\u5f00\u6309\u94ae",type:cc.Node})],t.prototype,"restartBtn",void 0),i([E({displayName:"\u91cd\u5f00\u6309\u94ae\u6587\u5b57",type:cc.Label})],t.prototype,"restartTxt",void 0),i([E({displayName:"\u6d4b\u8bd5\u4e0b\u4e00\u6ce2\u6309\u94ae",type:cc.Node})],t.prototype,"testNextWaveBtn",void 0),i([M],t)}(cc.Component);e.pzaBattleDownView=_,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameZJ":"pzaGameZJ","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzakc":"pzakc","../pzaWarningView":"pzaWarningView","./pzaBattlePropView":"pzaBattlePropView","./pzaMenuView":"pzaMenuView"}],pzaBattleFrameAnim:[function(a,t,e){"use strict";cc._RF.push(t,"7c9ef+mNP5N/ZWOKV0x/u2L","pzaBattleFrameAnim");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattleFrameAnim=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../utils/pzaFrameAnim"),l=a("../../Common/pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani=null,t.poolPrefab=null,t}return n(t,a),t.prototype.showAnim=function(a){var t=this;this.ani.setEndFn(function(){a&&a(),t.close()}),this.ani.reset(),this.ani.play()},t.prototype.logicUpdate=function(a){this.ani.updateFrame(a)},t.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"\u52a8\u753b",type:p.default})],t.prototype,"ani",void 0),i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaBattleFrameAnim=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../utils/pzaFrameAnim":"pzaFrameAnim"}],pzaBattleFreePlant:[function(a,t,e){"use strict";cc._RF.push(t,"34f5dc2/LZLcqUzgVcb9ZdO","pzaBattleFreePlant");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattleFreePlant=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaSpriteFrameManager"),s=a("../../Common/pzaUIManager"),c=a("../../Common/pzaWorldEventManager"),u=a("../../Load/pzaPreLoadManager"),d=a("./pzaTrySelectView"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.freePlantBtn=null,t.freePlantCard=null,t.cardIcon=null,t.selectTag=null,t}return n(t,a),t.prototype.onEnable=function(){null==r.pzaGameState.adFreePlant?(this.freePlantBtn.active=!0,this.freePlantCard.active=!1):(this.freePlantBtn.active=!1,this.freePlantCard.active=!0,this.selectTag.active=!1,l.pzaSpriteFrameManager.loadPlantCard(r.pzaGameState.adFreePlant,this.cardIcon)),this.freePlantCard.on(cc.Node.EventType.TOUCH_START,this.clickFreePlantCard,this),this.freePlantCard._touchListener.setSwallowTouches(!1),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.PLANT_AD_PLANT,this.plantAdPlant,this)},t.prototype.onDisable=function(){this.freePlantCard.off(cc.Node.EventType.TOUCH_START,this.clickFreePlantCard,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.PLANT_AD_PLANT,this.plantAdPlant,this)},t.prototype.clickFreePlant=function(){var a=this;s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.TRY_SELECT_VIEW,function(t){var e=t&&t.getComponent(d.pzaTrySelectView);e&&e.init(function(t){r.pzaGameState.adFreePlant=t,a.freePlantBtn.active=!1,a.freePlantCard.active=!0,a.selectTag.active=!0,l.pzaSpriteFrameManager.loadPlantCard(t,a.cardIcon),r.pzaGameState.selectCard=r.pzaSelectCardType.AD_CARD,r.pzaGameState.selectPlant=t,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null)})}),r.pzaGameState.gamePause=!0,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.GAME_PAUSE,null)},t.prototype.clickFreePlantCard=function(){r.pzaGameState.selectCard!=r.pzaSelectCardType.AD_CARD&&(this.selectTag.active=!0,r.pzaGameState.selectCard=r.pzaSelectCardType.AD_CARD,r.pzaGameState.selectPlant=r.pzaGameState.adFreePlant,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null))},t.prototype.selectCard=function(){null!=r.pzaGameState.adFreePlant&&r.pzaGameState.selectCard!=r.pzaSelectCardType.AD_CARD&&(this.selectTag.active=!1)},t.prototype.plantAdPlant=function(){this.freePlantBtn.active=!0,this.freePlantCard.active=!1,r.pzaGameState.adFreePlant=null;var a=p.pzaGameManager.getCurrentGame();a.adPlantTimes>0&&(a.adPlantTimes--,a.adPlantTimes<=0&&(this.node.active=!1))},i([f({displayName:"\u514d\u8d39\u690d\u7269\u6309\u94ae",type:cc.Node})],t.prototype,"freePlantBtn",void 0),i([f({displayName:"\u514d\u8d39\u690d\u7269\u5361\u7247",type:cc.Node})],t.prototype,"freePlantCard",void 0),i([f({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([f({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"selectTag",void 0),i([m],t)}(cc.Component);e.pzaBattleFreePlant=z,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaTrySelectView":"pzaTrySelectView"}],pzaBattlePropView:[function(a,t,e){"use strict";cc._RF.push(t,"7119a5Olx9MbpF1Iusq6ePQ","pzaBattlePropView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattlePropView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaGamePropConfig"),s=a("../../Common/pzaLocalData"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaSpineController"),d=a("../../Common/pzaWorldEventManager"),h=a("../../utils/pzaChannel"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.freeSunNode=null,t.autoPickNode=null,t.clearCDNode=null,t.cherryBombNode=null,t.propCount=[],t.adIcon=[],t.cutDown=null,t.ani=[],t.autoPickAdIcon=null,t.adShareBtnFrames=[],t.refreshInterval=0,t.aniChangeInterval=0,t.isForceAd=!1,t.bombAni_1="3ui_1",t.bombAni_2="3ui_idle3",t}return n(t,a),t.prototype.onEnable=function(){this.showAllProp(),this.cutDown.node.active=!1,this.refreshInterval=0,this.aniChangeInterval=0,this.ani[0].playAnimation(this.bombAni_1,!0),this.ani[1].playAnimation("1ui_1",!0),this.ani[2].playAnimation("2ui_1",!0),this.isForceAd=p.pzaGameManager.getCurrentGame().toolButtonUseTimes>0,this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.USE_GAME_PROP,this.useGameProp,this)},t.prototype.onDisable=function(){d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.USE_GAME_PROP,this.useGameProp,this)},t.prototype.refreshProp=function(a){if(this.isForceAd)return this.propCount[a-1].node.active=!1,void(this.adIcon[a-1].active=!0);if(a==l.pzaGamePropEnum.PROP_AUTO_PICK&&r.pzaGameState.autoPickLeft>0)return this.adIcon[a-1].active=!1,this.propCount[a-1].node.active=!1,this.cutDown.node.active=!0,this.ani[2].playAnimation("2ui_xi",!0),void this.refreshCutDown();var t=s.pzaLocalData.getPropCount(a);t>0?(this.propCount[a-1].node.active=!0,this.propCount[a-1].string=""+t,this.adIcon[a-1].active=!1):(this.propCount[a-1].node.active=!1,this.adIcon[a-1].active=!0,a==l.pzaGamePropEnum.PROP_AUTO_PICK&&(s.pzaLocalData.maxShareRwdCount>0&&s.pzaLocalData.data.autoPickShareCount<s.pzaLocalData.maxShareRwdCount?(this.autoPickAdIcon.spriteFrame=this.adShareBtnFrames[1],"ks"!=h.pzaChannel.instance().channel&&"tt"!=h.pzaChannel.instance().channel&&"my"!=h.pzaChannel.instance().channel||(this.autoPickAdIcon.spriteFrame=this.adShareBtnFrames[0])):this.autoPickAdIcon.spriteFrame=this.adShareBtnFrames[0]))},t.prototype.update=function(a){if(!(r.pzaGameState.gamePause||(this.aniChangeInterval+=a,this.aniChangeInterval>=10&&this.aniChange(),r.pzaGameState.autoPickLeft<=0))){if(this.refreshInterval+=a,!r.pzaGameState.autoPickLock&&(r.pzaGameState.autoPickLeft-=a,r.pzaGameState.autoPickLeft<=0))return this.cutDown.node.active=!1,this.ani[2].playAnimation("2ui_idle",!0),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),s.pzaLocalData.data.autoPickLeft=0,void s.pzaLocalData.addDirty("autoPickLeft");this.refreshInterval>=.5&&(this.refreshInterval=0,this.refreshCutDown())}},t.prototype.clickClearCD=function(){var a=this,t=p.pzaGameManager.getCurrentGame();h.pzaChannel.instance().showVideo({sucCall:function(){window.pzaplantManager.clearAllCD(),t.toolButtonUseTimes<=0||(t.toolButtonLeftArr[2]--,t.toolButtonLeftArr[2]<=0&&(a.clearCDNode.active=!1),s.pzaLocalData.hasUseProp=!0)},failCall:function(){},endCall:function(){a.resumeGame()},posName:"\u6e05cd",adsid:"29"})},t.prototype.clickFreeSun=function(){var a=this,t=p.pzaGameManager.getCurrentGame();t.toolButtonUseTimes<=0&&s.pzaLocalData.getPropCount(l.pzaGamePropEnum.PROP_FREE_SUN)>0?(s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_FREE_SUN),window.pzaplantManager.adCreateSun(),this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN),s.pzaLocalData.hasUseProp=!0):(this.pauseGame(),h.pzaChannel.instance().showVideo({sucCall:function(){c.pzaSoundManager.playAudio("getSun"),window.pzaplantManager.adCreateSun(),t.toolButtonUseTimes<=0||(t.toolButtonLeftArr[0]--,t.toolButtonLeftArr[0]<=0&&(a.freeSunNode.active=!1),s.pzaLocalData.hasUseProp=!0)},failCall:function(){},endCall:function(){a.resumeGame()},posName:"\u989d\u5916\u9633\u5149",adsid:"5"}))},t.prototype.clickAutoPick=function(){var a=this;if(!(r.pzaGameState.autoPickLeft>0)){var t=p.pzaGameManager.getCurrentGame();if(t.toolButtonUseTimes<=0&&s.pzaLocalData.getPropCount(l.pzaGamePropEnum.PROP_AUTO_PICK)>0)s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_AUTO_PICK),r.pzaGameState.autoPickLeft=s.pzaLocalData.data.autoPickLeft=600,s.pzaLocalData.addDirty("autoPickLeft"),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.AUTO_PICK,null),s.pzaLocalData.hasUseProp=!0;else{var e=function(){r.pzaGameState.autoPickLeft=s.pzaLocalData.data.autoPickLeft=600,s.pzaLocalData.addDirty("autoPickLeft"),a.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.AUTO_PICK,null),t.toolButtonUseTimes<=0||(t.toolButtonLeftArr[1]--,t.toolButtonLeftArr[1]<=0&&(a.autoPickNode.active=!1),s.pzaLocalData.hasUseProp=!0)};if("ks"!=h.pzaChannel.instance().channel&&s.pzaLocalData.maxShareRwdCount>0&&s.pzaLocalData.data.autoPickShareCount<s.pzaLocalData.maxShareRwdCount)return void h.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"4"},function(){a.resumeGame(),s.pzaLocalData.data.autoPickShareCount++,s.pzaLocalData.addDirty("autoPickShareCount"),e()});this.pauseGame(),h.pzaChannel.instance().showVideo({sucCall:e,failCall:function(){},endCall:function(){a.resumeGame()},posName:"\u81ea\u52a8\u62fe\u53d6",adsid:"4"})}}},t.prototype.clickCherryBomb=function(){var a=this,t=p.pzaGameManager.getCurrentGame();t.toolButtonUseTimes<=0&&s.pzaLocalData.getPropCount(l.pzaGamePropEnum.PROP_CHERRY_BOMB)>0?(s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),t.createAdBomb(),this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),s.pzaLocalData.hasUseProp=!0):(this.pauseGame(),h.pzaChannel.instance().showVideo({sucCall:function(){t.createAdBomb(),t.toolButtonUseTimes<=0||(t.toolButtonLeftArr[3]--,t.toolButtonLeftArr[3]<=0&&(a.cherryBombNode.active=!1),s.pzaLocalData.hasUseProp=!0)},failCall:function(){},endCall:function(){a.resumeGame()},posName:"\u6a31\u6843\u70b8\u5f39",adsid:"3"}))},t.prototype.aniChange=function(){var a=this;this.aniChangeInterval=0,this.ani[0].playAnimation(this.bombAni_2,!1,function(){a.ani[0].playAnimation(a.bombAni_1,!0)}),this.ani[1].playAnimation("1ui_idle",!1,function(){a.ani[1].playAnimation("1ui_1",!0)}),r.pzaGameState.autoPickLeft<=0&&this.ani[2].playAnimation("2ui_idle",!1,function(){a.ani[2].playAnimation("2ui_1",!0)})},t.prototype.useGameProp=function(a){a==l.pzaGamePropEnum.PROP_AUTO_PICK?(s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_AUTO_PICK),r.pzaGameState.autoPickLeft=s.pzaLocalData.data.autoPickLeft=600,s.pzaLocalData.addDirty("autoPickLeft"),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK),d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.AUTO_PICK,null)):a==l.pzaGamePropEnum.PROP_FREE_SUN?(s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_FREE_SUN),window.pzaplantManager.adCreateSun(),this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN)):a==l.pzaGamePropEnum.PROP_CHERRY_BOMB&&(s.pzaLocalData.consumeProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),window.pzaplantManager.createAdCherry(),this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB))},t.prototype.pauseSelf=function(){this.ani[0].pauseAnimation(),this.ani[1].pauseAnimation(),this.ani[2].pauseAnimation()},t.prototype.resumeSelf=function(){this.ani[0].resumeAnimation(),this.ani[1].resumeAnimation(),this.ani[2].resumeAnimation(),this.refreshPropCnt()},t.prototype.refreshCutDown=function(){this.cutDown.string=this.getTimeCutDownString(r.pzaGameState.autoPickLeft)},t.prototype.getTimeCutDownString=function(a){if(null==a||a<=0)return"00 : 00";var t=Math.floor(a/60),e=Math.floor(a-60*t);return(t>=10?t+"":"0"+t)+" : "+(e>=10?e+"":"0"+e)},t.prototype.hideAllProp=function(){this.freeSunNode.active=!1,this.cherryBombNode.active=!1,this.autoPickNode.active=!1,this.clearCDNode.active=!1},t.prototype.showAllProp=function(){p.pzaGameManager.getCurrentGame().showBattlePropButtons(this)},t.prototype.showFreeSun=function(){this.freeSunNode.active=!0,this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN)},t.prototype.showCherryBomb=function(){this.cherryBombNode.active=!0,this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB)},t.prototype.showAutoPick=function(){this.autoPickNode.active=!0,this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK)},t.prototype.refreshPropCnt=function(){this.refreshProp(l.pzaGamePropEnum.PROP_FREE_SUN),this.refreshProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB),this.refreshProp(l.pzaGamePropEnum.PROP_AUTO_PICK)},t.prototype.pauseGame=function(){r.pzaGameState.gamePause=!0,d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.GAME_PAUSE,null),c.pzaSoundManager.pausePlayMusic()},t.prototype.resumeGame=function(){r.pzaGameState.gamePause=!1,d.pzaWorldEventManager.triggerEvent(d.pzaWorldEventType.GAME_RESUME,null),c.pzaSoundManager.resumeMusic()},i([z({displayName:"\u514d\u8d39\u9633\u5149",type:cc.Node})],t.prototype,"freeSunNode",void 0),i([z({displayName:"\u81ea\u52a8\u62fe\u53d6",type:cc.Node})],t.prototype,"autoPickNode",void 0),i([z({displayName:"\u6e05CD",type:cc.Node})],t.prototype,"clearCDNode",void 0),i([z({displayName:"\u6a31\u6843\u6e05\u5c4f",type:cc.Node})],t.prototype,"cherryBombNode",void 0),i([z({displayName:"\u9053\u5177\u6570\u91cf",type:[cc.Label]})],t.prototype,"propCount",void 0),i([z({displayName:"\u5e7f\u544a\u56fe\u6807",type:[cc.Node]})],t.prototype,"adIcon",void 0),i([z({displayName:"\u81ea\u52a8\u62fe\u53d6\u5012\u8ba1\u65f6",type:cc.Label})],t.prototype,"cutDown",void 0),i([z({displayName:"\u52a8\u753b",type:[u.pzaSpineController]})],t.prototype,"ani",void 0),i([z({displayName:"\u81ea\u52a8\u62fe\u53d6\u5e7f\u544a\u56fe\u6807",type:cc.Sprite})],t.prototype,"autoPickAdIcon",void 0),i([z({displayName:"\u5e7f\u544a\u5206\u4eab\u6309\u94ae\u56fe",type:[cc.SpriteFrame]})],t.prototype,"adShareBtnFrames",void 0),i([f],t)}(cc.Component);e.pzaBattlePropView=y,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzaChannel":"pzaChannel"}],pzaBattleUpView:[function(a,t,e){"use strict";cc._RF.push(t,"62cb1l/69BGA7XnrfIYDdqK","pzaBattleUpView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBattleUpView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaLocalData"),s=a("../../Common/pzaNodeManager"),c=a("../../Common/pzaUtil"),u=a("../../Common/pzaWorldEventManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.coinShowNode=null,t.coinUINode=null,t.coinLabel=null,t.tokencoinShowNode=null,t.tokencoinUINode=null,t.tokencoinLabel=null,t.partLabel=null,t.partProNode=null,t.partProgress=null,t.zombieHeadNode=null,t.partFlags=[],t.proLabel=null,t.maxWave=0,t.coinShowTime=0,t.lastShowCoinCount=null,t.lastShowTokenCoinCnt=null,t}return n(t,a),t.prototype.onLoad=function(){var a=this.coinUINode.convertToWorldSpaceAR(cc.v2()),t=s.pzaNodeManager.getUpEffectNode(),e=this.tokencoinUINode.convertToWorldSpaceAR(cc.v2());if(null!=t){var o=t.convertToNodeSpaceAR(a);r.pzaGameState.coinMoveUIPos=cc.v2(o.x,o.y);var n=t.convertToNodeSpaceAR(e);r.pzaGameState.tokenCoinMoveUIPos=cc.v2(n.x,n.y)}},t.prototype.onEnable=function(){p.pzaGameManager.getCurrentGame().initPartProcess(this),this.showCoinNode(),this.lastShowCoinCount=null,this.refrshCoinCount(),this.lastShowTokenCoinCnt=null,this.refreshTokenCoinCount(),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.UPDATE_PART_PRO,this.updatePartPro,this)},t.prototype.onDisable=function(){u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.UPDATE_PART_PRO,this.updatePartPro,this)},t.prototype.update=function(a){this.coinShowTime+=a,this.coinShowTime>=3&&(this.coinShowNode.active=!1,this.tokencoinShowNode.active=!1),this.refrshCoinCount(),this.refreshTokenCoinCount(),r.pzaGameState.gamePause||this.refreshBossPartPro()},t.prototype.showCoinNode=function(){this.coinShowNode.active=!0,this.coinShowTime=0,r.pzaGameState.isMiniMode()&&9==r.pzaGameState.curPart&&(this.tokencoinShowNode.active=!0)},t.prototype.refrshCoinCount=function(){this.lastShowCoinCount!=l.pzaLocalData.data.coin&&(this.lastShowCoinCount=l.pzaLocalData.data.coin,this.coinLabel.string=c.pzaUtil.getCurrencyStr(this.lastShowCoinCount))},t.prototype.refreshTokenCoinCount=function(){this.lastShowTokenCoinCnt!=l.pzaLocalData.data.tokenCoin&&(this.lastShowTokenCoinCnt=l.pzaLocalData.data.tokenCoin,this.tokencoinLabel.string=c.pzaUtil.getCurrencyStr(this.lastShowTokenCoinCnt))},t.prototype.refreshBossPartPro=function(){if(r.pzaGameState.gameMode==r.pzaGameMode.ZOM_BOSS||r.pzaGameState.isMiniMode()&&(3==r.pzaGameState.curPart||4==r.pzaGameState.curPart)){this.partProNode.active=!0,this.zombieHeadNode.active=!1;var a=window.pzazombieManager.drZomBoss;if(null!=a&&null!=a.baseData){var t=1-a.baseData.hp/a.baseData.maxHp;this.partProgress.fillRange=-t}}},t.prototype.updatePartPro=function(){p.pzaGameManager.getCurrentGame().updatePartProcess(this)},i([m({displayName:"\u91d1\u5e01\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"coinShowNode",void 0),i([m({displayName:"\u91d1\u5e01UI\u4f4d\u7f6e",type:cc.Node})],t.prototype,"coinUINode",void 0),i([m({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],t.prototype,"coinLabel",void 0),i([m({displayName:"\u4ee3\u5e01\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"tokencoinShowNode",void 0),i([m({displayName:"\u4ee3\u5e01UI\u4f4d\u7f6e",type:cc.Node})],t.prototype,"tokencoinUINode",void 0),i([m({displayName:"\u4ee3\u5e01\u6570\u91cf",type:cc.Label})],t.prototype,"tokencoinLabel",void 0),i([m({displayName:"\u5173\u5361\u663e\u793a",type:cc.Label})],t.prototype,"partLabel",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u8282\u70b9",type:cc.Node})],t.prototype,"partProNode",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u6761",type:cc.Sprite})],t.prototype,"partProgress",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u50f5\u5c38\u5934",type:cc.Node})],t.prototype,"zombieHeadNode",void 0),i([m({displayName:"\u5173\u5361\u8fdb\u5ea6\u65d7\u5e1c",type:[cc.Node]})],t.prototype,"partFlags",void 0),i([m({displayName:"\u8fdb\u5ea6\u6587\u5b57",type:cc.Label})],t.prototype,"proLabel",void 0),i([h],t)}(cc.Component);e.pzaBattleUpView=f,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaBedCar:[function(a,t,e){"use strict";cc._RF.push(t,"55191LYvo9Gdr8QXvvPlQC9","pzaBedCar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBedCar=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("../Plant/pzaAttackType"),c=a("../pzaGameState"),u=a("./pzaBaseZombie"),d=a("./pzaZombieState"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.butterSlot=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.animation.node.x=40,this.baseData.zombieData.cate=l.pzaZombieCate.IceCar,null!=t.logicPos&&(this.animation.playAnimation("idle",!0),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_ICE,-1)),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_CONTROL,-1)),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_SPATTER,-1)),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_IMMOBILIZE,-1)))},t.prototype.logicUpdate=function(a){null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.isDead||(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow?this.pushBackTime>0?this.pushBackMove(a):(-1!=this.baseData.xIndex&&this.baseData.xIndex<8&&(this.baseData.zombieData.moveSpd-=this.baseData.zombieData.initMSpd/100,this.baseData.zombieData.moveSpd=Math.max(this.baseData.zombieData.moveSpd,3*this.baseData.zombieData.initMSpd/8)),this.updateMove(a),this.rollingPlant()):this.changeRowMove(a))))},t.prototype.changeRowMove=function(a){this.updateMove(a),this.baseData.logicPos.y+=150*a*(this.baseData.yIndex<this.changeTargetRow?1:-1);var t=.1*c.pzaGameState.map.getYInterval(this.changeTargetRow),e=c.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.changeTargetRow,0,t);(this.baseData.yIndex<this.changeTargetRow&&e.y<=this.baseData.logicPos.y||this.baseData.yIndex>this.changeTargetRow&&e.y>=this.baseData.logicPos.y)&&(this.baseData.logicPos.y=e.y,this.body.curTarget=null,window.pzazombieManager.zombieChangeMapRow(this.body,this.baseData,this.changeTargetRow),this.changeTargetRow=-1)},t.prototype.rollingPlant=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a,t=this.findTarget();a=t?""+t.xIndex+t.yIndex:""+this.baseData.xIndex+this.baseData.yIndex;var e=window.pzaplantManager.plantDataMap.get(a);if(null!=e){var o=window.pzaplantManager.getPlantByData(e);o&&o.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var n=window.pzaplantManager.plantEnvDataMap.get(a);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var r=window.pzaplantManager.pumpkinDataMap.get(a);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var l=window.pzaplantManager.notTargetMap.get(a);if(null!=l){var c=window.pzaplantManager.getPlantByData(l);c&&c.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}}},t.prototype.hurt=function(t,e,o){if(void 0===o&&(o=s.pzaAttackType.FLOOR_ATK),this.baseData&&!this.baseData.isDead){if(o==s.pzaAttackType.BANG)return this.baseData.zombieDie(),this.changeSkin("skin3"),this.death(!0),void r.pzaSoundManager.playAudio("zomboniDeath");if(o!=s.pzaAttackType.SPIKE){if(o==s.pzaAttackType.NORMAL_BOOM)return this.baseData.zombieDie(),void this.death(!0);a.prototype.hurt.call(this,t,e,o)}else{if(this.baseData.zombieDie(),this.changeSkin("skin3"),r.pzaSoundManager.playAudio("ball_fall"),this.death(!0),null!=e){var n=window.pzaplantManager.getPlantByData(e);n&&n.hurt(50,this.baseData,s.pzaAttackType.BANG)}r.pzaSoundManager.playAudio("zomboniDeath")}}},t.prototype.spawnZombie=function(){var a=window.pzazombieManager.createFixBlockZombieData(l.pzaZombieEnum.NightWear,this.baseData.xIndex,this.baseData.yIndex);if(this.baseData.xIndex<0){var t=.1*c.pzaGameState.map.getYInterval(this.baseData.yIndex),e=c.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,t);e.x=600,a.logicPos=e}window.pzazombieManager.createZombie(a)},t.prototype.death=function(a,t){var e=this;if(void 0===t&&(t=null),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData),!a)return this.close(),void(t!=s.pzaAttackType.DEATH&&this.spawnZombie());this.playDeathAnimation(function(){e.close(),t!=s.pzaAttackType.DEATH&&e.spawnZombie()}),r.pzaSoundManager.playAudio("explosion")},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.spawnZombie()},t.prototype.playDeathAnimation=function(a){this.zombieState=d.pzaZombieState.DEAD,this.zombieHurtState=l.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),this.changeSkin("skin3"),this.animation.playAnimation("death",!1,a)},t.prototype.zombieDying=function(){this.zombieHurtState=l.pzaHurtStateEnum.DYING,this.changeSkin("skin3")},t.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,this.changeSkin("skin2")},t.prototype.zombieIntact=function(){this.zombieHurtState=l.pzaHurtStateEnum.INTACT,this.changeSkin("skin1")},i([m],t)}(u.pzaBaseZombie));e.pzaBedCar=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieState":"pzaZombieState"}],pzaBeltCard:[function(a,t,e){"use strict";cc._RF.push(t,"8cfbd1YdzlOzJ7ggalAXv4I","pzaBeltCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBeltCard=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaSpriteFrameManager"),u=a("../../Common/pzaWorldEventManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.selectTag=null,t.icon=null,t.plantType=null,t.clickCall=null,t.hasSelect=!1,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.node._touchListener.setSwallowTouches(!1)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this)},t.prototype.bindData=function(a,t){this.plantType=a,this.clickCall=t,a==r.pzaPlantEnum.WALL_NUT_BOWLING?c.pzaSpriteFrameManager.loadPlantCard(r.pzaPlantEnum.WALL_NUT,this.icon):c.pzaSpriteFrameManager.loadPlantCard(a,this.icon),this.selectTag.active=!1,this.hasSelect=!1},t.prototype.clickCard=function(){var a=this.hasSelect;this.clickCall&&this.clickCall(),a?(p.pzaGameState.selectCard=null,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null):this.select()},t.prototype.select=function(){p.pzaGameState.selectCard=p.pzaSelectCardType.BELT_CARD,p.pzaGameState.selectPlant=this.plantType,p.pzaGameState.cobCannon=null,this.hasSelect=!0,this.selectTag.active=!0,s.pzaSoundManager.playAudio("selectPlant"),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.SELECT_CARD,null)},t.prototype.diselect=function(){this.hasSelect&&(this.hasSelect=!1,this.selectTag.active=!1)},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([m({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"selectTag",void 0),i([m({displayName:"icon",type:cc.Sprite})],t.prototype,"icon",void 0),i([h],t)}(cc.Component);e.pzaBeltCard=f,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaBeltConfig:[function(a,t,e){"use strict";cc._RF.push(t,"c1564gSGttOob7xInXAhlOo","pzaBeltConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBeltConfig=void 0;var o=a("../Battle/Data/pzaPlantEnum"),n=a("../Battle/pzaGameState"),i=a("../CreativeMode/pzaGameCreativeTrad"),r=a("./pzaGameManager"),p=a("./pzaGameMiniGame"),l=function(){function a(){}return a.initMiniPlants=function(a){this.miniPlantCards=[];var t=r.pzaGameManager.getGame(n.pzaGameMode.MINIGAME,p.pzaGameMiniGame);this.miniPlantCards=t.getBeltPlantArr(a),this.miniPlantWeights=[],this.miniPlantWeights=t.getBeltPlantWeightArr(a),this.miniInter=[3,3],5!=n.pzaGameState.curPart&&6!=n.pzaGameState.curPart||(this.miniInter=[])},a.initMiniSmallPlants=function(){this.miniInitCards=[],this.miniPlantCards=[],this.miniPlantWeights=[],this.miniPlantCards=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.WALL_NUT,o.pzaPlantEnum.PEA_SHOOTER,o.pzaPlantEnum.CHERRY_BOMB],this.miniPlantWeights=[25,15,25,35],this.miniInter=[]},a.initTradPlants=function(a){this.miniPlantCards=[];var t=r.pzaGameManager.getGame(n.pzaGameMode.CREATIVE_TRAD,i.pzaGameCreativeTrad);this.miniPlantCards=t.getBeltPlantArr(a),this.miniPlantWeights=[],this.miniPlantWeights=t.getBeltPlantWeightArr(a),this.miniInter=[3,3]},a.getBeltPlants=function(a,t){if(n.pzaGameState.isMiniMode()||n.pzaGameState.isCreativeTrad())return Array.from(this.miniPlantCards);if(1==a||6==a){if(5==t)return Array.from(this.BeltPlant15);if(10==t)return Array.from(this.BeltPlant110)}if((2==a||7==a)&&10==t)return Array.from(this.BeltPlant210);if(3==a||8==a){if(5==t)return Array.from(this.BeltPlant35);if(10==t)return Array.from(this.BeltPlant310)}if((4==a||9==a)&&10==t)return Array.from(this.BeltPlant410);if(5==a||10==a){if(5==t)return Array.from(this.BeltPlant55);if(10==t)return Array.from(this.BeltPlant510)}return null},a.getBeltPlantsWeight=function(a,t){if(n.pzaGameState.isMiniMode()||n.pzaGameState.isCreativeTrad())return Array.from(this.miniPlantWeights);if(1==a||6==a){if(5==t)return Array.from(this.BeltPlantWeight15);if(10==t)return Array.from(this.BeltPlantWeight110)}if((2==a||7==a)&&10==t)return Array.from(this.BeltPlantWeight210);if(3==a||8==a){if(5==t)return Array.from(this.BeltPlantWeight35);if(10==t)return Array.from(this.BeltPlantWeight310)}if((4==a||9==a)&&10==t)return Array.from(this.BeltPlantWeight410);if(5==a||10==a){if(5==t)return Array.from(this.BeltPlantWeight55);if(10==t)return Array.from(this.BeltPlantWeight510)}return null},a.firstGraveBusterWeight=function(a,t,e){return t>=e?0:a},a.firstLilypadWeight=function(a,t){return Math.max(1,Math.floor((1-a)*t/18+a+.5))},a.firstPotWeight=function(a,t){return Math.max(1,Math.floor((1-a)*t/35+a+.5))},a.firstCabbageMelonWeight=function(a,t){return t>5?a:t>=3?3:2},a.firstKernelWeight=function(a,t){return t>5?a:1},a.sencondWeight=function(a,t,e,o){return 0==a||t<=2?a:e>=4?1:3==e?5:o?a/2:a},a.getInitCard=function(a,t,e){var o;return 5!=t&&10!=t||10!=e?n.pzaGameState.isMiniMode()?n.pzaGameState.gameMode==n.pzaGameMode.MINIGAME_SMALL?null:(o=r.pzaGameManager.getGame(n.pzaGameMode.MINIGAME,p.pzaGameMiniGame).getInitPlantArr(e))[a]?o[a]:null:n.pzaGameState.isCreativeTrad()&&(o=r.pzaGameManager.getGame(n.pzaGameMode.CREATIVE_TRAD,i.pzaGameCreativeTrad).getInitPlantArr(e))[a]?o[a]:null:(o=[33,21,33,15])[a]},a.getFirstCardInterval=function(a,t){if(1==a||6==a){if(5==t)return.01;if(10==t)return 2}if((2==a||7==a)&&10==t)return 2;if(3==a||8==a){if(5==t)return 2;if(10==t)return 2}if((4==a||9==a)&&10==t)return 2;if(5==a||10==a){if(5==t)return 2;if(10==t)return 10}return 2},a.getNextCardInterval=function(a,t,e){if((n.pzaGameState.isMiniMode()||n.pzaGameState.isCreativeTrad())&&this.miniInter.length>0)return this.miniInter.shift();var o=1;5!=a&&10!=a||10!=t||(o=.875),(n.pzaGameState.isMiniMode()||n.pzaGameState.isCreativeTrad())&&(o=!n.pzaGameState.isMiniMode()||5!=n.pzaGameState.curPart&&6!=n.pzaGameState.curPart?.875:1,n.pzaGameState.gameMode==n.pzaGameMode.MINIGAME_SMALL&&(o=1));var i=4;return e<=4?(i=4,5!=a&&10!=a||10!=t||(i=3.5),n.pzaGameState.isMiniMode()?n.pzaGameState.gameMode!=n.pzaGameMode.MINIGAME_SMALL&&(3==n.pzaGameState.curPart?i=3.5:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=4:9==n.pzaGameState.curPart?(o=1,i=4):o=3.5):n.pzaGameState.isCreativeTrad()&&(o=3.5)):e<=6?(i=4.25,5!=a&&10!=a||10!=t||(i=3.71),n.pzaGameState.isMiniMode()?n.pzaGameState.gameMode!=n.pzaGameMode.MINIGAME_SMALL&&(3==n.pzaGameState.curPart?i=3.71:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=4.25:o=9==n.pzaGameState.curPart?4.25:3.71):n.pzaGameState.isCreativeTrad()&&(o=3.71)):e<=8?(i=5,5!=a&&10!=a||10!=t||(i=4.37),n.pzaGameState.isMiniMode()?n.pzaGameState.gameMode!=n.pzaGameMode.MINIGAME_SMALL&&(3==n.pzaGameState.curPart?i=4.37:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=5:9==n.pzaGameState.curPart?i=5:o=4.37):n.pzaGameState.isCreativeTrad()&&(o=4.37)):(i=10,5!=a&&10!=a||10!=t||(i=8.75),n.pzaGameState.isMiniMode()?n.pzaGameState.gameMode!=n.pzaGameMode.MINIGAME_SMALL&&(3==n.pzaGameState.curPart?i=8.75:5==n.pzaGameState.curPart||6==n.pzaGameState.curPart?i=10:9==n.pzaGameState.curPart?i=10:o=8.75):n.pzaGameState.isCreativeTrad()&&(o=8.75)),o*i},a.BeltPlant15=[o.pzaPlantEnum.WALL_NUT_BOWLING,o.pzaPlantEnum.BOOM_NUT_BOWLING],a.BeltPlantWeight15=[85,15],a.BeltPlant110=[o.pzaPlantEnum.PEA_SHOOTER,o.pzaPlantEnum.CHERRY_BOMB,o.pzaPlantEnum.WALL_NUT,o.pzaPlantEnum.REPEATER,o.pzaPlantEnum.SNOW_PEA,o.pzaPlantEnum.CHOMPER,o.pzaPlantEnum.POTATO_MINE],a.BeltPlantWeight110=[20,20,15,10,10,5,20],a.BeltPlant210=[o.pzaPlantEnum.GRAVE_BUSTER,o.pzaPlantEnum.ICE_SHROOM,o.pzaPlantEnum.DOOM_SHROOM,o.pzaPlantEnum.HYPNO_SHROOM,o.pzaPlantEnum.SCAREDY_SHROOM,o.pzaPlantEnum.FUME_SHROOM,o.pzaPlantEnum.PUFF_SHROOM],a.BeltPlantWeight210=[20,15,15,10,15,15,10],a.BeltPlant35=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.WALL_NUT,o.pzaPlantEnum.PEA_SHOOTER,o.pzaPlantEnum.CHERRY_BOMB],a.BeltPlantWeight35=[25,15,25,35],a.BeltPlant310=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.SQUASH,o.pzaPlantEnum.THREE_PEATER,o.pzaPlantEnum.TANGLE_KELP,o.pzaPlantEnum.JALAPENO,o.pzaPlantEnum.SPIKEWEED,o.pzaPlantEnum.TORCHWOOD,o.pzaPlantEnum.TALL_NUT],a.BeltPlantWeight310=[25,5,25,5,10,10,10,10],a.BeltPlant410=[o.pzaPlantEnum.LILY_PAD,o.pzaPlantEnum.SEA_SHROOM,o.pzaPlantEnum.MAGNET_SHROOM,o.pzaPlantEnum.BLOVER,o.pzaPlantEnum.CACTUS,o.pzaPlantEnum.STAR_FRUIT,o.pzaPlantEnum.SPLIT_PEA,o.pzaPlantEnum.PUMPKIN],a.BeltPlantWeight410=[25,10,5,5,15,25,5,10],a.BeltPlant55=[o.pzaPlantEnum.FLOWER_POT,o.pzaPlantEnum.CHOMPER,o.pzaPlantEnum.PUMPKIN,o.pzaPlantEnum.CHERRY_BOMB],a.BeltPlantWeight55=[50,25,15,10],a.BeltPlant510=[o.pzaPlantEnum.FLOWER_POT,o.pzaPlantEnum.MELON_PULT,o.pzaPlantEnum.JALAPENO,o.pzaPlantEnum.CABBAGE_PULT,o.pzaPlantEnum.KERNEL_PULT,o.pzaPlantEnum.ICE_SHROOM],a.BeltPlantWeight510=[55,10,12,10,5,8],a.miniInitCards=[],a.miniPlantCards=[],a.miniPlantWeights=[],a.InitCardInterval=1.6,a.miniInter=[3,5],a}();e.pzaBeltConfig=l,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../CreativeMode/pzaGameCreativeTrad":"pzaGameCreativeTrad","./pzaGameManager":"pzaGameManager","./pzaGameMiniGame":"pzaGameMiniGame"}],pzaBlover:[function(a,t,e){"use strict";cc._RF.push(t,"220957hlOBIzLEXNVfa0prp","pzaBlover");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBlover=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lifeTime=0,t.trigger=!1,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.lifeTime=0,this.trigger=!1,r.pzaSoundManager.playAudio("Blover"),this.animation.playAnimation("attack1",!1,function(){e.animation.playAnimation("attack2",!1,function(){window.pzaplantManager.removePlant(e.baseData),e.death()})}),l.pzaGameState.onlyShroomCofee=!1,l.pzaGameState.onlyBoomPlant=!1,l.pzaGameState.usePlanternBlover=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.trigger||(this.lifeTime+=t,this.lifeTime>=.5&&this.attack())},t.prototype.hurt=function(t,e,o){this.trigger||this.attack(),a.prototype.hurt.call(this,t,e,o)},t.prototype.attack=function(){this.trigger=!0,window.pzaMapManager.blowFog(),p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.BLOW_WIND,null)},i([u],t)}(s.pzaBasePlant));e.pzaBlover=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaBoomFireEffect:[function(a,t,e){"use strict";cc._RF.push(t,"c78e8ZsdD9NwaSx7lFo8EFm","pzaBoomFireEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBoomFireEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine=null,t.poolPrefab=null,t.delayTime=0,t.endCall=null,t.disappering=!1,t}return n(t,a),t.prototype.showEffect=function(a,t){var e=this;this.delayTime=a,this.endCall=t,a<=0?(this.spine.node.scale=.4,this.disappering=!0,this.spine.playAnimation("fire2",!1,function(){e.close(),e.endCall&&e.endCall()})):(this.spine.node.scale=1,this.disappering=!1,this.spine.playAnimation("fire1",!0))},t.prototype.logicUpdate=function(a){var t=this;this.disappering||(this.delayTime-=a,this.delayTime<=0&&(this.disappering=!0,this.spine.playAnimation("fire2",!1,function(){t.close(),t.endCall&&t.endCall()})))},t.prototype.pauseSelf=function(){this.spine.pauseAnimation()},t.prototype.resumeSelf=function(){this.spine.resumeAnimation()},t.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u({displayName:"spine\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"spine",void 0),i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaBoomFireEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController"}],pzaBoomNut:[function(a,t,e){"use strict";cc._RF.push(t,"d4bd0hwIfBFnrY9MO37nsbS","pzaBoomNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBoomNut=void 0;var r=a("../../Common/pzaUtil"),p=a("../../Load/pzaPreLoadManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=8,t.originState="hurt1",t.nutStateMap=new Map([["hurt1",["idle2","idle3_body1"]],["hurt2",["idle2","idle4_body2"]],["hurt3",["idle2"]],["hurt4",["blow_body4"]]]),t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=s.pzaPlantCate.Nut,this.originState="hurt1",this.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var o=function(){if(e.blinkTime>0)e.animation.playAnimation("hurt4"==e.originState?"blow_body4":"idle1",!1,o);else{e.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var a=e.nutStateMap.get(e.originState),t=r.pzaUtil.getRandomValueFromArray(a);e.animation.playAnimation(t,!1,o)}};this.animation.playAnimation("idle1",!1,o),u.pzaGameState.onlyShroomCofee=!1,u.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.originState="hurt4",this.animation.setAnimationSkin("body_4")},t.prototype.plantHurt2=function(){a.prototype.plantHurt2.call(this),this.originState="hurt3",this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.originState="hurt2",this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.originState="hurt1",this.animation.setAnimationSkin("body_1")},t.prototype.death=function(t,e){this.attack(),a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.attack(),a.prototype.death.call(this)},t.prototype.attack=function(){var a=this;c.pzaEffectManager.createFrameEffect(p.pzaResourceUrl.CHERRY_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),null),window.pzaMapManager.shakeMap();var t=1.5*u.pzaGameState.map.getBlockWidth(),e=window.pzazombieManager.findZombiesByXY(this.baseData.xIndex,this.baseData.yIndex);null==e&&(e=[]),this.baseData.xIndex>=7&&null!=window.pzazombieManager.drZomBoss&&e.push(window.pzazombieManager.drZomBoss),e.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||(t&&t.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.BOOM),t.baseData.isDead)}),window.pzaMapManager.LadderMap.forEach(function(e,o){r.pzaUtil.getDistance(a.baseData.logicPos,e.logicPos)>t||(e.close(),window.pzaMapManager.LadderMap.delete(o))})},i([f],t)}(h.pzaBasePlant));e.pzaBoomNut=z,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaBowlingBody:[function(a,t,e){"use strict";cc._RF.push(t,"c203by+yGpE+aE56seGo1fX","pzaBowlingBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBowlingBody=void 0;var r=a("../../Common/pzaCollisionManager"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.circleBody=null,t.baseData=null,t.onCollisionCall=null,t.onCollisionExitCall=null,t}return n(t,a),t.prototype.onEnable=function(){null!=this.circleBody&&(this.circleBody.enabled=!1)},t.prototype.onDisable=function(){r.pzaCollisionManager.getInstance.delBulletOther(this)},t.prototype.bindData=function(a,t,e){this.baseData=a,this.onCollisionCall=t,this.onCollisionExitCall=e,null!=this.circleBody&&(this.circleBody.enabled=!0,r.pzaCollisionManager.getInstance.addBulletOther(this))},t.prototype.onCollisionEnter=function(a,t){this.onCollisionCall&&this.onCollisionCall(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollisionCall&&this.onCollisionCall(a,t)},t.prototype.getCollider=function(){var a=this;return this.node&&this.node.isValid?(this.circleBody.poSource=function(){return{x:a.node.parent.parent.x,y:a.node.parent.parent.y+60}},this.circleBody):null},t.prototype.onCollisionExit=function(a,t){this.onCollisionExitCall&&this.onCollisionExitCall(a,t)},i([s({displayName:"\u8eab\u4f53\u78b0\u649e\u76d2",type:cc.CircleCollider})],t.prototype,"circleBody",void 0),i([l],t)}(cc.Component);e.pzaBowlingBody=c,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager"}],pzaBowlingNut:[function(a,t,e){"use strict";cc._RF.push(t,"7d18elgHKdBmKcYojTvpfSZ","pzaBowlingNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBowlingNut=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaBaseComponent"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaSoundManager"),u=a("../../Load/pzaPreLoadManager"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaZombieEnum"),m=a("../Zombie/pzaZombieBody"),f=a("../pzaEffectManager"),z=a("../pzaGameState"),y=a("./pzaAttackType"),g=a("./pzaBowlingBody"),v=cc._decorator,b=v.ccclass,S=v.property,P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.colliderBody=null,t.rotateNode=null,t.isBoom=!1,t.bodyBindData=!1,t.rotateSpeed=360,t.speedX=250,t.yDirection=0,t.colliderInterval=0,t.killCount=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.rotateNode.angle=0,this.yDirection=0,this.bodyBindData=!1,this.colliderInterval=0,this.killCount=0,this.baseData.plantData.isChangeLine=!1;var e=10*-this.baseData.yIndex+6;this.node.zIndex=e,c.pzaSoundManager.playAudio("plantplant"),c.pzaSoundManager.playAudio("throwBowling")},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.logicPos){this.colliderInterval-=a,this.rotateNode.angle-=a*this.rotateSpeed,this.baseData.logicPos.x+=this.speedX*a,this.baseData.logicPos.y+=this.speedX*a*this.yDirection;var t=z.pzaGameState.map.getMapYIndex(this.baseData.logicPos),e=z.pzaGameState.map.getMapXIndex(this.baseData.logicPos);if(this.baseData.yIndex!=t){this.baseData.yIndex=t;var o=10*-this.baseData.yIndex+5+this.yDirection;this.node.zIndex=o,this.baseData.plantData.isChangeLine=!0}this.baseData.xIndex!=e&&(this.baseData.xIndex=e),this.baseData.logicPos.x>=640&&this.close()}},t.prototype.logicLateUpdate=function(t){a.prototype.logicLateUpdate.call(this,t),this.bodyBindData||null==this.colliderBody||(this.bodyBindData=!0,this.colliderBody.bindData(this.baseData,this.onCollision.bind(this),this.onCollisionExit.bind(this))),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(this.baseData.logicPos)},t.prototype.onCollision=function(a){var t=this;if(a.node.group!=s.pzaGroupEnum.WALL){if(a.node.group==s.pzaGroupEnum.ZOMBIE){if(this.colliderInterval>0)return;var e=a.node.getComponent(m.pzaZombieBody);if(null==e||null==e.baseData)return;if(this.baseData.yIndex!=e.baseData.yIndex)return;if(e.baseData.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT))return;if(this.isBoom||c.pzaSoundManager.playAudio("bowlingHitNormal"),this.isBoom){c.pzaSoundManager.playAudio("bowlingHit"),c.pzaSoundManager.playAudio("cherrybomb"),f.pzaEffectManager.createFrameEffect(u.pzaResourceUrl.NUT_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),null);var o=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,1.5*z.pzaGameState.map.getBlockWidth());if(null==o)return;return o.forEach(function(a){a&&a.hurt(1800,t.baseData,y.pzaAttackType.BOOM)}),(z.pzaGameState.isMiniMode()&&(5==z.pzaGameState.curPart||6==z.pzaGameState.curPart)||6==z.pzaGameState.curChapter&&5==z.pzaGameState.curPart)&&window.pzaplantManager.plantMap.delete(this.baseData),void this.close()}0==e.baseData.yIndex?this.yDirection=1:4==e.baseData.yIndex?this.yDirection=-1:0==this.yDirection?this.yDirection=Math.random()>.5?1:-1:this.yDirection=-this.yDirection;var n=window.pzazombieManager.getZombie(e.baseData);e.baseData.zombieData.zombieType==h.pzaZombieEnum.SCREEN_DOOR_ZOMBIE&&this.baseData.plantData.isChangeLine?n&&n.hurt(1e4,null,y.pzaAttackType.TALL_BOWLING):n&&n.hurt(1800,null,y.pzaAttackType.BOWLING),e.baseData.isDead&&(this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_6,this.killCount)),this.colliderInterval=.5;var i=10*-(this.baseData.yIndex+this.yDirection)+5+this.yDirection;this.node.zIndex=i}}else this.yDirection=a.tag-2},t.prototype.onCollisionExit=function(){},i([S({displayName:"\u78b0\u649e\u8eab\u4f53",type:g.pzaBowlingBody})],t.prototype,"colliderBody",void 0),i([S({displayName:"\u65cb\u8f6c\u8282\u70b9",type:cc.Node})],t.prototype,"rotateNode",void 0),i([S({displayName:"\u7206\u70b8\u575a\u679c"})],t.prototype,"isBoom",void 0),i([b],t)}(l.pzaBaseComponent);e.pzaBowlingNut=P,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBowlingBody":"pzaBowlingBody"}],pzaBowlingWallBody:[function(a,t,e){"use strict";cc._RF.push(t,"75e08Ld5bJOToQucGoQZGx8","pzaBowlingWallBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBowlingBodyWall=void 0;var r=a("../../Common/pzaCollisionManager"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.collider=null,t}return n(t,a),t.prototype.onDisable=function(){r.pzaCollisionManager.getInstance.delZombieOther(this)},t.prototype.onCollisionEnter=function(){},t.prototype.getCollider=function(){return this.node&&this.node.isValid?(this.collider.poSource=this.node,this.collider):null},i([s(cc.BoxCollider)],t.prototype,"collider",void 0),i([l],t)}(cc.Component);e.pzaBowlingBodyWall=c,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager"}],pzaBrain:[function(a,t,e){"use strict";cc._RF.push(t,"c6d3100LY1IzLjVhS/o4FIJ","pzaBrain");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBrain=void 0;var r=a("../Common/pzaBaseComponent"),p=a("../Common/pzaCollisionManager"),l=a("../Common/pzaGameManager"),s=a("../Common/pzaSoundManager"),c=a("../Common/pzaWorldEventManager"),u=a("./Data/pzaDropType"),d=a("./Plant/pzaAttackType"),h=a("./pzaBaseBody"),m=a("./pzaEffectManager"),f=a("./pzaGameState"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.brain=null,t.body=null,t.blinkTime=0,t.blinkTween=null,t.collider=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.body.bindData(this.baseData),this.node.stopAllActions(),this.node.scale=1,this.blinkTime=0;var e=f.pzaGameState.map.getMapOriPos();if(null!=e){var o=cc.v2(e.x-26,e.y+f.pzaGameState.map.getYPos(t.yIndex)+55);this.node.setPosition(o);var n=10*-t.yIndex+1;this.node.zIndex=n,p.pzaCollisionManager.getInstance.addBrain(t.yIndex,this)}},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.logicUpdate=function(a){this.blinkTime>0&&(this.blinkTime-=a,this.blinkTime<=0&&this.blink(!0))},t.prototype.blink=function(a){var t=this;if(a)this.blinkTween&&this.blinkTween.stop(),this.brain.node.color=cc.Color.WHITE;else{if(this.blinkTime=5,null==this.blinkTween){var e=function(a,e,o,n){var i=a+(e-a)*n,r=new cc.Color(i,i,i);return t.brain&&t.brain.node?(t.brain.node.color=r,i):(t.blinkTween.stop(),i)};this.blinkTween=cc.tween({c:255}).repeatForever(cc.tween().to(.5,{c:40},{progress:e}).to(.5,{c:255},{progress:e}))}this.blinkTween.start()}},t.prototype.hurt=function(a,t,e){if(void 0===e&&(e=null),!(this.baseData.hp<=0)&&this.baseData){if(e==d.pzaAttackType.ROLLING||e==d.pzaAttackType.BOOM||e==d.pzaAttackType.BANG)return this.baseData.hp=0,this.baseData.isDead=!0,window.pzaplantManager.brainMap.delete(this.baseData),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.UPDATE_PART_PRO,null),this.death(),void(e==d.pzaAttackType.BOOM?this.close():this.flaserDeath());this.baseData.hp-=a,this.baseData.hp<=0&&(this.baseData.isDead=!0,window.pzaplantManager.brainMap.delete(this.baseData),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.UPDATE_PART_PRO,null),this.close(),this.death())}},t.prototype.flaserDeath=function(){var a=this;s.pzaSoundManager.playAudio("chomp_plant1"),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},t.prototype.close=function(){this.blinkTween&&this.blinkTween.stop(),a.prototype.close.call(this)},t.prototype.death=function(){Math.random()<=.1?m.pzaEffectManager.createDropCoin(u.pzaDropType.GOLD_COIN,cc.v2(this.node.x,this.node.y)):m.pzaEffectManager.createDropCoin(u.pzaDropType.SILVER_COIN,cc.v2(this.node.x,this.node.y)),window.pzaplantManager.brainMap.size<=0&&l.pzaGameManager.passPart(cc.v2(0,-300))},i([g({displayName:"\u5927\u8111\u56fe",type:cc.Sprite})],t.prototype,"brain",void 0),i([g({displayName:"\u8eab\u4f53\u78b0\u649e",type:h.pzaBaseBody})],t.prototype,"body",void 0),i([y],t)}(r.pzaBaseComponent);e.pzaBrain=v,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaCollisionManager":"pzaCollisionManager","../Common/pzaGameManager":"pzaGameManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","./Data/pzaDropType":"pzaDropType","./Plant/pzaAttackType":"pzaAttackType","./pzaBaseBody":"pzaBaseBody","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState"}],pzaBucketHeadZombie:[function(a,t,e){"use strict";cc._RF.push(t,"8b2c291wzNAyKkk9KnBsDCS","pzaBucketHeadZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBucketHeadZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("./pzaNormalZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=s.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[s.pzaZombieSlotType.hat,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.hat).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.hat_iron+"1",-44.8,-9.46)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.hat_iron+"2",-43.87,-7.38)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.hat_iron+"3",-30.28,-7.12))]])},t.prototype.zombieHurtSound=function(t){if(this.hasEquip){var e="shieldhit"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(e)}else a.prototype.zombieHurtSound.call(this,t)},i([u],t)}(l.pzaNormalZombie));e.pzaBucketHeadZombie=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaBuffData:[function(a,t,e){"use strict";cc._RF.push(t,"7aee3sm3VRPvZxOhsmVvDxI","pzaBuffData"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBuffInfo=e.pzaBuffData=e.pzaBuffType=void 0,function(a){a[a.FROST=1]="FROST",a[a.FROZEN=2]="FROZEN",a[a.DIVE=3]="DIVE",a[a.IMM_ICE=4]="IMM_ICE",a[a.IMM_SPATTER=5]="IMM_SPATTER",a[a.HARD_BODY=6]="HARD_BODY",a[a.FLY=7]="FLY",a[a.DIZZ=8]="DIZZ",a[a.UNABLE_SELECT=9]="UNABLE_SELECT",a[a.IMMOBILIZE=10]="IMMOBILIZE",a[a.GARLIC=11]="GARLIC",a[a.SPEED_UP=12]="SPEED_UP",a[a.IMM_CONTROL=13]="IMM_CONTROL",a[a.RICOCHET=14]="RICOCHET",a[a.IMM_HYPNOSIS=15]="IMM_HYPNOSIS",a[a.INVINCIBLE=16]="INVINCIBLE",a[a.IMM_IMMOBILIZE=17]="IMM_IMMOBILIZE",a[a.FLASER=18]="FLASER",a[a.IMM_ICE_PEA=19]="IMM_ICE_PEA",a[a.FIRE=20]="FIRE"}(e.pzaBuffType||(e.pzaBuffType={}));var o=function(){function a(){this.buffs=new Map}return a.prototype.refreshBuff=function(a){var t=this;this.buffs.forEach(function(e,o){e?null!=e.buffTime&&-1!=e.buffTime&&(e.buffTime-=a,e.buffTime<=0&&t.buffs.delete(o)):t.buffs.delete(o)})},a.prototype.addBuff=function(a,t,e,o){if(null!=a&&null!=a.buffType){var n=this.buffs.get(a.buffType);null!=n&&(t||o||e)?(t?n.addTime(a.buffTime):n.buffTime=a.buffTime,e?n.addValue(a.buffValue):n.buffValue=a.buffValue,o?n.addChane(a.buffChance):n.buffChance=a.buffChance,n.buffExcuted=!1):this.buffs.set(a.buffType,a)}},a.prototype.removeBuff=function(a){null!=a&&this.buffs.delete(a)},a.prototype.reduceBuffValue=function(a,t){if(null!=a){var e=this.buffs.get(a);if(null!=e){var o=e.buffValue;null!=o&&(0==(o-=t)?this.removeBuff(a):(e.buffValue=o,this.buffs.set(a,e)))}}},a.prototype.releaseBuff=function(a){if(null==a)return null;var t=this.buffs.get(a);return null==t?null:null!=t.buffChance?Math.random()<=t.buffChance?t:null:t},a.prototype.hasBuff=function(a){return null!=a&&null!=this.buffs.get(a)},a.prototype.getBuffChance=function(a){if(null==a)return 0;var t=this.buffs.get(a);return null==t?0:t.buffChance},a.prototype.getAllForever=function(){if(this.buffs.size<=0)return[];var a=[];return this.buffs.forEach(function(t){-1==t.buffTime&&a.push(t)}),a},a.prototype.getAllBuffs=function(){return Array.from(this.buffs.values())},a.prototype.clone=function(){var t=new a;return null!=this.buffs&&this.buffs.size>0&&this.buffs.forEach(function(a){var e=a.clone();t.addBuff(e)}),t},a.prototype.clear=function(){this.buffs.clear()},a}();e.pzaBuffData=o;var n=function(){function a(a,t,e,o,n,i){this.buffType=null,this.buffTime=null,this.buffValue=null,this.buffChance=null,this.intervalTimer=0,this.buffInterval=null,this.buffMessage=null,this.buffExcuted=!1,this.buffType=a,this.buffTime=t,this.buffValue=e,this.buffChance=o,this.buffInterval=n,this.buffMessage=i,this.buffExcuted=!1}return a.prototype.clone=function(){return new a(this.buffType,this.buffTime,this.buffValue,this.buffChance)},a.prototype.addTime=function(a){null!=a&&(null!=this.buffTime?-1!=this.buffTime&&-1!=a?this.buffTime+=a:this.buffTime=-1:this.buffTime=a)},a.prototype.addChane=function(a){null!=a&&(null!=this.buffChance?this.buffChance+=a:this.buffChance=a)},a.prototype.addValue=function(a){null!=a&&(null!=this.buffValue?this.buffValue+=a:this.buffValue=a)},a}();e.pzaBuffInfo=n,cc._RF.pop()},{}],pzaBulletPool:[function(a,t,e){"use strict";cc._RF.push(t,"08129opfb5H1Z0jUbb2VvxA","pzaBulletPool"),Object.defineProperty(e,"__esModule",{value:!0});var o=a("./pzakc"),n=function(){function a(){this.unuseMap=new Map,this.inuseMap=new Map,this.outPosX=2*o.default.view_x+100*o.default.randomInt(0,20),this.outPosY=-5e3,this.outPosDist=100}return a.prototype.put=function(a){return a.opacity=0,a.x=this.outPosX,this.outPosY+=this.outPosDist,a.y=this.outPosY,this.unuseMap.set(a.uuid,a),this},a.prototype.back=function(a){return a.opacity=0,this.outPosY+=this.outPosDist,this.outPosY>5e3&&(this.outPosY=-5e3),this.inuseMap.delete(a.uuid),this.unuseMap.set(a.uuid,a),this},a.prototype.del=function(a){this.inuseMap.delete(a.uuid),this.unuseMap.delete(a.uuid)},a.prototype.get=function(){var a=this.unuseMap.keys().next();if(a.done)return null;var t=this.unuseMap.get(a.value);return this.unuseMap.delete(a.value),this.inuseMap.set(a.value,t),t},a.prototype.destroy=function(){this.unuseMap.forEach(function(a){a.destroy()}),this.inuseMap.forEach(function(a){a.destroy()}),this.unuseMap.clear(),this.inuseMap.clear()},a}();e.default=n,cc._RF.pop()},{"./pzakc":"pzakc"}],pzaBundleController:[function(a,t,e){"use strict";cc._RF.push(t,"64727tiUHJM3KQvgplqFo8w","pzaBundleController"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBundleType=e.pzaBundleController=void 0;var o=function(){function a(){}return a.loadBundle=function(a,t){var e=this,o=this.bundleMap.get(a);o?t&&t(o):cc.assetManager.loadBundle(a,function(o,n){if(o||!n)return console.error(o),void e.loadBundle(a,t);console.log("Bundle "+a+" \u52a0\u8f7d\u6210\u529f~"),e.bundleMap.set(a,n),t&&t(n)})},a.getBundle=function(a){var t=this.bundleMap.get(a);return null!=t?t:null},a.bundleMap=new Map,a}();e.pzaBundleController=o,function(a){a.Loading="loading",a.Game="game",a.Scripts="Scripts",a.Audio="Audio",a.Spine="Spine"}(e.pzaBundleType||(e.pzaBundleType={})),cc._RF.pop()},{}],pzaBundleObjectPool:[function(a,t,e){"use strict";cc._RF.push(t,"35ecbUbHqVFoJLa6dyXuLAh","pzaBundleObjectPool");var o=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBundleObjectPool=void 0;var n=a("../../start/pzaBundleController"),i=a("../Common/pzaGameCommonPool"),r=a("./pzaPreLoadManager"),p=function(){function a(){}return a.preLoadSubResource=function(a,t,e){var o=this;if(void 0===e&&(e=null),null==a||a.length<=0)t&&t(!0);else{var n=a.length,i=0;a.forEach(function(a){o.preLoadResource(a,null,function(){i++,e&&e(i/n),i>=n&&t&&t(!0)})})}},a.preLoadResource=function(a,t,e){switch(a.resourceType){case r.pzaResourceType.Prefab:this.preLoadPrefab(a,t,e);break;case r.pzaResourceType.PrefabDir:this.preLoadPrefabDir(a,t,e);break;case r.pzaResourceType.SpriteFrameDir:this.preLoadSpriteFrameDir(a,t,e);break;case r.pzaResourceType.Scene:this.preLoadScene(a,t,e);break;default:e&&e(!0)}},a.preLoadPrefab=function(a,t,e){var o=this;i.pzaGameCommonPool.urlToPrefab.has(a.url)?e&&e(!0):n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(n){null!=n?n.load(a.url,cc.Prefab,function(a,e){t&&t(a,e)},function(n,r){if(null!=n||null==r)return console.error(n),void o.preLoadPrefab(a,t,e);i.pzaGameCommonPool.addUrlToPrefab(a.url,r),e&&e(!0)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})},a.preLoadPrefabDir=function(a,t,e){var r=this;this.LoadedResource.has(a)?e&&e(!0):n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(n){null!=n?n.loadDir(a.url,cc.Prefab,function(a,e){t&&t(a,e)},function(n,p){var l,s;if(null!=n||null==p)return console.error(n),void r.preLoadPrefabDir(a,t,e);try{for(var c=o(p),u=c.next();!u.done;u=c.next()){var d=u.value,h=a.url+"/"+(d.data&&d.data._name);i.pzaGameCommonPool.urlToPrefab.has(h)||i.pzaGameCommonPool.addUrlToPrefab(h,d)}}catch(m){l={error:m}}finally{try{u&&!u.done&&(s=c.return)&&s.call(c)}finally{if(l)throw l.error}}r.LoadedResource.add(a),e&&e(!0)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})},a.preLoadSpriteFrameDir=function(a,t,e){var o=this;this.LoadedResource.has(a)?e&&e(!0):n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(n){null!=n?n.loadDir(a.url,cc.SpriteFrame,function(a,e){t&&t(a,e)},function(n,r){if(null!=n||null==r)return console.error(n),void o.preLoadSpriteFrameDir(a,t,e);r.forEach(function(t){i.pzaGameCommonPool.urlToSpriteFame.set(a.url+"/"+t.name,t)}),o.LoadedResource.add(a),e&&e(!0)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})},a.preLoadScene=function(a,t,e){var o=this;n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(n){null!=n?n.preloadScene(a.url,function(a,e){t&&t(a,e)},function(n){null!=n&&(console.error(n),o.preLoadScene(a,t,e)),e&&e(!0)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})},a.requestInstantByUrl2=function(a,t){if(a){var e=i.pzaGameCommonPool.urlToPrefab.get(a);if(e){var o=i.pzaGameCommonPool.requestInstant2(e);t&&t(null,o)}else n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(e){null!=e?e.load(a,cc.Prefab,function(e,o){if(e)return console.error("\u52a0\u8f7dPrefab\u5f02\u5e38",a),void t(e);i.pzaGameCommonPool.addUrlToPrefab(a,o);var n=i.pzaGameCommonPool.requestInstant2(o);t&&t(e,n)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})}else t&&t("null url")},a.requestInstantByUrl=function(a,t,e){var o=this;if(a){var r=i.pzaGameCommonPool.urlToPrefab.get(a);if(r){var p=i.pzaGameCommonPool.requestInstant(r,t);e&&e(null,p)}else n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(n){null!=n?n.load(a,cc.Prefab,function(n,r){if(n)return console.error(n),void o.requestInstantByUrl(a,t,e);i.pzaGameCommonPool.addUrlToPrefab(a,r);var p=i.pzaGameCommonPool.requestInstant(r,t);e&&e(n,p)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})}else e&&e("null url")},a.requestSpriteFrameByUrl=function(a,t){if(null!=a)if(i.pzaGameCommonPool.urlToSpriteFame.has(a)){var e=i.pzaGameCommonPool.urlToSpriteFame.get(a);t&&t(null,e)}else n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(e){null!=e?e.load(a,cc.SpriteFrame,function(e,o){null==e&&null!=o&&i.pzaGameCommonPool.urlToSpriteFame.set(a,o),t&&t(e,o)}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")});else t&&t("null url")},a.requestSpriteFrameByAtlas=function(a,t,e){if(null!=a&&null!=t){var o=a+"/"+t;if(i.pzaGameCommonPool.urlToSpriteFame.has(o)){var r=i.pzaGameCommonPool.urlToSpriteFame.get(o);e&&e(null,r)}else n.pzaBundleController.loadBundle(n.pzaBundleType.Game,function(t){null!=t?t.loadDir(a,cc.SpriteAtlas,null,function(t,n){if(t)console.error(t);else{for(var r=0;r<n.length;r++)for(var p=n[r].getSpriteFrames(),l=0;l<p.length;l++){var s=p[l],c=a+"/"+s.name;i.pzaGameCommonPool.urlToSpriteFame.set(c,s)}var u=i.pzaGameCommonPool.urlToSpriteFame.get(o);e&&e(null,u)}}):console.error("\u52a0\u8f7dGame Bundle\u5f02\u5e38~")})}else e&&e("null url")},a.LoadedResource=new Set,a}();e.pzaBundleObjectPool=p,cc._RF.pop()},{"../../start/pzaBundleController":"pzaBundleController","../Common/pzaGameCommonPool":"pzaGameCommonPool","./pzaPreLoadManager":"pzaPreLoadManager"}],pzaBungeeTarget:[function(a,t,e){"use strict";cc._RF.push(t,"8242bUT/KJOJoQL6XKXRfTg","pzaBungeeTarget");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBungeeTarget=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(a){this.baseData=a;var t=10*-this.baseData.yIndex+6;this.node.zIndex=t,this.node.stopAllActions();var e=cc.v2(a.logicPos.x,400-a.logicPos.y);this.node.setPosition(e),this.node.runAction(cc.sequence(cc.moveTo((400-a.logicPos.y)/720,cc.v2(a.logicPos.x,a.logicPos.y-40)),cc.callFunc(function(){p.pzaSoundManager.playAudio("bungeetarget")})))},t.prototype.logicUpdate=function(){(null==this.baseData||this.baseData.isDead)&&this.close()},t.prototype.pauseSelf=function(){this.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.node.resumeAllActions()},i([s],t)}(r.pzaBaseComponent));e.pzaBungeeTarget=c,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager"}],pzaBungeeZombieEffect:[function(a,t,e){"use strict";cc._RF.push(t,"6de90umtgVMJZ1sORcEGDup","pzaBungeeZombieEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBungeeZombieEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaWorldEventManager"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaGameState"),d=a("../pzaSpineTool"),h=a("../Zombie/pzaZombieSlot"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cordNode=null,t.cordPutNode=null,t.bungeeZombie=null,t.normalZombie=null,t.ladderZombie=null,t.gargantuarZombie=null,t.zombieHeight=0,t.putZombieData=null,t.countDown=0,t.fallTime=0,t.riseTime=0,t.hasFall=!1,t}return n(t,a),t.prototype.init=function(a){if(null!=a){this.putZombieData=a,this.gargantuarZombie.active=!1,a.zombieData.zombieType==c.pzaZombieEnum.ZOMBIE?(this.normalZombie.node.active=!0,this.ladderZombie.node.active=!1,d.pzaSpineTool.instance().setSlotAtt(this.normalZombie,h.pzaZombieSlotType.hat,null,0,0)):a.zombieData.zombieType==c.pzaZombieEnum.CONE_HEAD_ZOMBIE?(this.normalZombie.node.active=!0,this.ladderZombie.node.active=!1,d.pzaSpineTool.instance().setSlotAtt(this.normalZombie,h.pzaZombieSlotType.hat,h.pzaZombieSlotType.hat+"1",-5.4,81.02)):a.zombieData.zombieType==c.pzaZombieEnum.BUCKET_HEAD_ZOMBIE?(this.normalZombie.node.active=!0,this.ladderZombie.node.active=!1,d.pzaSpineTool.instance().setSlotAtt(this.normalZombie,h.pzaZombieSlotType.hat,h.pzaZombieSlotType.hat_iron+"1",-44.8,-9.46)):a.zombieData.zombieType==c.pzaZombieEnum.LADDER_ZOMBIE?(this.normalZombie.node.active=!1,this.ladderZombie.node.active=!0,this.ladderZombie.paused=!0,d.pzaSpineTool.instance().setSlotAtt(this.ladderZombie,h.pzaZombieSlotType.ladder,h.pzaZombieSlotType.ladder+"1",221.34,-20,-119.57)):a.zombieData.zombieType!=c.pzaZombieEnum.GARGANTUAR&&a.zombieData.zombieType!=c.pzaZombieEnum.RED_GARGANTUAR||(this.normalZombie.node.active=!1,this.ladderZombie.node.active=!1,this.gargantuarZombie.active=!0);var t=a.xIndex,e=a.yIndex;this.node.zIndex=10*-e+5;var o=u.pzaGameState.map.getXInterval(t)/2,n=.1*u.pzaGameState.map.getYInterval(e)+33,i=u.pzaGameState.map.getBlockLogicPos(t,e,o,n);this.node.setPosition(i),this.zombieHeight=400-i.y,this.bungeeZombie.y=this.zombieHeight,this.countDown=1,this.fallTime=0,this.riseTime=0,this.hasFall=!1,this.updateCord()}},t.prototype.logicUpdate=function(a){if(this.fallTime>0)return this.fallTime-=a,this.zombieHeight-=720*a,this.zombieHeight=Math.max(0,this.zombieHeight),this.bungeeZombie.y=this.zombieHeight,void(this.fallTime<=0&&this.putZombie());if(this.riseTime>0)return this.riseTime-=a,this.zombieHeight+=800*a,this.bungeeZombie.y=this.zombieHeight,void(this.riseTime<=0&&this.close());if(this.countDown-=a,!(this.countDown>0||this.hasFall)){this.hasFall=!0,this.fallTime=this.zombieHeight/720;var t="Bungee_fall",e=Math.ceil(3*Math.random());return t=e>1?t+e:t,void p.pzaSoundManager.playAudio(t)}},t.prototype.update=function(){this.updateCord()},t.prototype.updateCord=function(){var a=this.cordPutNode.convertToWorldSpaceAR(cc.v2()),t=this.node.convertToNodeSpaceAR(a);this.cordNode.setPosition(t);var e=cc.winSize.height-a.y;this.cordNode.height=e+10},t.prototype.putZombie=function(){for(var a=this.putZombieData.xIndex,t=this.putZombieData.yIndex,e=a-1;e<=a+1;e++)for(var o=t-1;o<=t+1;o++){var n=""+e+o,i=window.pzaplantManager.plantDataMap.get(n);if(null!=i&&!i.isDead&&i.plantData.plantType==s.pzaPlantEnum.UMBRELLA_LEAF)return l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.RICOCHET_ZOMBIE,i),void this.beRicochet()}this.riseTime=1,this.normalZombie.node.active=!1,this.ladderZombie.node.active=!1,window.pzazombieManager.zombieDatas[this.putZombieData.yIndex].add(this.putZombieData),window.pzazombieManager.createZombie(this.putZombieData,!1,!1,!1,null,!1)},t.prototype.beRicochet=function(){this.riseTime=1},i([z({displayName:"\u7ef3\u5b50\u8282\u70b9",type:cc.Node})],t.prototype,"cordNode",void 0),i([z({displayName:"\u7ef3\u5b50\u6302\u70b9",type:cc.Node})],t.prototype,"cordPutNode",void 0),i([z({displayName:"\u8e66\u6781\u50f5\u5c38\u8282\u70b9",type:cc.Node})],t.prototype,"bungeeZombie",void 0),i([z({displayName:"\u666e\u50f5\u8282\u70b9",type:sp.Skeleton})],t.prototype,"normalZombie",void 0),i([z({displayName:"\u68af\u5b50\u50f5\u5c38\u8282\u70b9",type:sp.Skeleton})],t.prototype,"ladderZombie",void 0),i([z({displayName:"\u5de8\u4eba\u50f5\u5c38\u8282\u70b9",type:cc.Node})],t.prototype,"gargantuarZombie",void 0),i([f],t)}(r.pzaBaseComponent);e.pzaBungeeZombieEffect=y,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieSlot":"pzaZombieSlot","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool"}],pzaBungeeZombie:[function(a,t,e){"use strict";cc._RF.push(t,"840be7Xt5hAxIWKZBLLxR4S","pzaBungeeZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBungeeZombie=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaSpineController"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaPlantEnum"),u=a("../Data/pzaZombieEnum"),d=a("../Effect/pzaBungeeTarget"),h=a("../pzaSpineTool"),m=a("./pzaBaseZombie"),f=a("./pzaZombieSlot"),z=a("./pzaZombieState"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cordNode=null,t.targetPrefab=null,t.carryNode=null,t.handAni=null,t.ashesEffect=null,t.zombieHeight=0,t.countDown=0,t.fallTime=0,t.riseTime=0,t.fallCheckTime=0,t.hasFall=!1,t.bungeeTarget=null,t.stealPlantIns=null,t.ashesShowTime=0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[f.pzaZombieSlotType.butter,new f.pzaZombieSlot(this.animation.spineAnimation,f.pzaZombieSlotType.butter).addState(new f.pzaZombieSlotAtt(1,f.pzaZombieSlotType.butter,-26.66,75.52))]])},t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.ashesEffect.active=!1,this.animation.node.active=!0,this.ashesShowTime=0},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.countDown=2,this.fallTime=0,this.riseTime=0,this.fallCheckTime=0,this.hasFall=!1;var e=10*-this.baseData.yIndex-2;this.node.zIndex=e,this.zombieHeight=400-t.logicPos.y,this.animation.node.y=this.zombieHeight,this.animation.playAnimation("attack2",!0),t.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),t.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_CONTROL,-1)),null==this.baseData.zombieData.zomBossFinger?this.createTarget():this.countDown=.6,this.updateCord()},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&(this.ashesShowTime>0&&(this.ashesShowTime-=a,this.ashesShowTime<=0&&this.death(!1)),!this.baseData.isDead&&(this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),!this.baseData.isBeControlled()))){if(this.baseData.buffData.hasBuff(s.pzaBuffType.RICOCHET)){this.riseTime=1,this.fallTime=0,this.baseData.buffData.removeBuff(s.pzaBuffType.RICOCHET),this.bungeeTarget&&this.bungeeTarget.close(),this.bungeeTarget=null,this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_CONTROL,-1));var t=10*-this.baseData.yIndex+5;this.node.zIndex=t}if(this.fallTime>0)return this.fallTime-=a,this.zombieHeight-=720*a,this.zombieHeight=Math.max(0,this.zombieHeight),this.animation.node.y=this.zombieHeight,this.fallCheckTime>0&&(this.fallCheckTime-=a,this.fallCheckTime<=0&&(this.baseData.buffData.removeBuff(s.pzaBuffType.UNABLE_SELECT),this.baseData.buffData.removeBuff(s.pzaBuffType.IMM_CONTROL))),void(this.fallTime<=0&&(this.animation.playAnimation("move",!0),this.countDown=4));if(this.riseTime>0){if(null!=this.baseData.zombieData.zomBossFinger)return;return this.riseTime-=a,this.zombieHeight+=800*a,this.animation.node.y=this.zombieHeight,void(this.riseTime<=0&&this.disappear())}if(this.countDown-=a,!(this.countDown>0)){if(!this.hasFall){this.hasFall=!0,this.fallTime=this.zombieHeight/720,this.fallCheckTime=.9*this.fallTime;var e="Bungee_fall",o=Math.ceil(3*Math.random());return e=o>1?e+o:e,void p.pzaSoundManager.playAudio(e)}this.stealPlant()}}},t.prototype.update=function(){this.updateCord()},t.prototype.updateCord=function(){if(this.baseData){var a=h.pzaSpineTool.findBonePos(this.animation.spineAnimation,"shenti2",this.node),t=this.node.convertToNodeSpaceAR(a);this.cordNode.setPosition(t);var e;e=this.baseData.zombieData&&null!=this.baseData.zombieData.zomBossFinger?this.baseData.zombieData.zomBossFinger.y-a.y:cc.winSize.height-a.y,this.cordNode.height=e+10}},t.prototype.createTarget=function(){var a=r.pzaGameCommonPool.requestInstant(this.targetPrefab);a.setParent(this.node.parent),this.bungeeTarget=a&&a.getComponent(d.pzaBungeeTarget),this.bungeeTarget&&this.bungeeTarget.bindData(this.baseData)},t.prototype.stealPlant=function(){var a=this;if(null!=this.baseData.zombieData.zomBossFinger&&this.baseData.isBeControlled())this.disappear();else{this.countDown=2,p.pzaSoundManager.playAudio("Bungee_steal"),this.animation.playAnimation("attack",!1,function(){a.riseTime=1,a.animation.playAnimation("attack3",!0)});var t=10*-this.baseData.yIndex+6;this.node.zIndex=t;var e=window.pzaplantManager.getCanAttackPlantData(this.baseData.xIndex,this.baseData.yIndex,!0),o=window.pzaplantManager.getPlantByData(e);if(null!=e&&null!=o&&e.plantData.plantType!=c.pzaPlantEnum.COB_CANNON){o.steal(),e.isDead=!0,window.pzaplantManager.removePlant(e);var n=o.node.convertToWorldSpaceAR(cc.v2());o.node.setParent(this.carryNode),o.node.setPosition(this.carryNode.convertToNodeSpaceAR(n)),this.stealPlantIns=o}this.bungeeTarget&&this.bungeeTarget.close(),this.bungeeTarget=null,this.handAni.node.active=!0,this.handAni.playAnimation("attack",!1,function(){a.handAni.playAnimation("attack3",!0)}),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_CONTROL,-1))}},t.prototype.close=function(){null!=this.stealPlantIns&&(this.stealPlantIns.close(),this.stealPlantIns=null),a.prototype.close.call(this)},t.prototype.disappear=function(){this.baseData.isDead=!0,this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,!1),this.close()},t.prototype.playDeathAnimation=function(a){this.zombieState=z.pzaZombieState.DEAD,this.zombieHurtState=u.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),a&&a()},t.prototype.zombieIntact=function(){a.prototype.zombieIntact.call(this),this.handAni.node.active=!1},t.prototype.ashesDeath=function(){this.baseData.zombieDie(),this.animation.node.active=!1,this.ashesEffect.active=!0,this.ashesShowTime=1},t.prototype.logicLateUpdate=function(a){a>.5?console.log("\u8fc7\u9ad8dt====>",a):(this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(this.baseData.logicPos))},i([v({displayName:"\u7ef3\u5b50\u8282\u70b9",type:cc.Node})],t.prototype,"cordNode",void 0),i([v({displayName:"\u9776\u5b50\u9884\u8bbe",type:cc.Prefab})],t.prototype,"targetPrefab",void 0),i([v({displayName:"\u5b58\u653e\u690d\u7269\u8282\u70b9",type:cc.Node})],t.prototype,"carryNode",void 0),i([v({displayName:"\u624b\u52a8\u753b",type:l.pzaSpineController})],t.prototype,"handAni",void 0),i([v({displayName:"\u7070\u70ec",type:cc.Node})],t.prototype,"ashesEffect",void 0),i([g],t)}(m.pzaBaseZombie);e.pzaBungeeZombie=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBungeeTarget":"pzaBungeeTarget","../pzaSpineTool":"pzaSpineTool","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaButterBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"0a0c1vHdGJAqYAKBcVznChF","pzaButterBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaButterBaseBullet=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaZombieEnum"),l=a("../Plant/pzaAttackType"),s=a("./pzaBaseBullet"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.colliderZombie=function(a){if(a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==p.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&!(a.zombieData&&a.zombieData.hypnosis||a.buffData.hasBuff(r.pzaBuffType.DIVE)||a.buffData.hasBuff(r.pzaBuffType.FLY)||a.buffData.hasBuff(r.pzaBuffType.INVINCIBLE))){var t=window.pzazombieManager.getZombie(a);if(t){if(t.hurt(this.atk,null,l.pzaAttackType.FLOOR_ATK),!a.buffData.hasBuff(r.pzaBuffType.IMM_CONTROL)&&!a.buffData.hasBuff(r.pzaBuffType.IMM_IMMOBILIZE)){var e=a.buffData.releaseBuff(r.pzaBuffType.IMMOBILIZE);null!=e?e.buffTime=5:(e=new r.pzaBuffInfo(r.pzaBuffType.IMMOBILIZE,5),a.buffData.addBuff(e),t.bePauseControl())}this.close(),this.playHitEffect(a)}}},i([u],t)}(s.pzaBaseBullet));e.pzaButterBaseBullet=d,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","./pzaBaseBullet":"pzaBaseBullet"}],pzaButterEffect:[function(a,t,e){"use strict";cc._RF.push(t,"32ccbWnqjdDuLH77GoS4EXI","pzaButterEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaButterEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=a("../Data/pzaBuffData"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.poolPrefab=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t)},t.prototype.logicUpdate=function(){null!=this.baseData&&!this.baseData.isDead&&this.baseData.buffData.hasBuff(l.pzaBuffType.IMMOBILIZE)||this.close()},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaButterEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../Data/pzaBuffData":"pzaBuffData"}],pzaButterGloomShroom:[function(a,t,e){"use strict";cc._RF.push(t,"27710eqz05MxLpoXxCIBoJ1","pzaButterGloomShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaButterGloomShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaDirBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=a("./pzaAttackType"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.bulletPrefab2=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.playNormalAni()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t)},t.prototype.playNormalAni=function(){var a=this,t=function(){if(a.baseData&&!a.baseData.isDead){var e=!1,o=1.7*h.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(t,n){null==t||null==n||n.isDead||null==n.logicPos||n.buffData.hasBuff(u.pzaBuffType.DIVE)||n.buffData.hasBuff(u.pzaBuffType.FLY)||n.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||s.pzaUtil.getDistance(a.baseData.logicPos,n.logicPos)<o&&(e=!0)}),e||a.canJoinDrZomBoss(a.baseData)&&(e=!0),e)return l.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x,a.baseData.logicPos.y+47);d.pzaEffectManager.createGloomShroomEffect(a.baseData.yIndex,t,null),a.hurtZombies(),a.attack()}});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))}};this.animation.playAnimation("idle1",!1,t)},t.prototype.attack=function(){for(var a=cc.v2(1,0),t=2*Math.PI/8,e=p.pzaNodeManager.getBulletNode(),o=this.node.getPosition(),n=Math.random()<.8?this.bulletPrefab:this.bulletPrefab2,i=0;i<8;i++){var l=r.pzaGameCommonPool.requestInstant2(n);l.setParent(e),l.setPosition(o.x,o.y+50),l.getComponent(c.pzaDirBullet).init(a.rotate(t*i),this.baseData.atk)}},t.prototype.canJoinDrZomBoss=function(a){if(a.xIndex<5)return null;var t=window.pzazombieManager.drZomBoss;return null==t||null==t.baseData||t.baseData.isDead||t.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:t.baseData},t.prototype.hurtZombies=function(){var a=this,t=1.7*h.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(e,o){null==e||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(u.pzaBuffType.DIVE)||o.buffData.hasBuff(u.pzaBuffType.FLY)||o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||s.pzaUtil.getDistance(a.baseData.logicPos,o.logicPos)<t&&e&&e.hurt(a.baseData.atk,a.baseData,m.pzaAttackType.PENETRATE)}),this.canJoinDrZomBoss(this.baseData)){var e=this.canJoinDrZomBoss(this.baseData),o=window.pzazombieManager.getZombie(e);o&&o.hurt(this.baseData.atk,this.baseData,m.pzaAttackType.PENETRATE)}},i([g({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([g({displayName:"\u5b50\u5f39\u9884\u8bbe2",type:cc.Prefab})],t.prototype,"bulletPrefab2",void 0),i([y],t)}(f.pzaBasePlant);e.pzaButterGloomShroom=v,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaDirBullet":"pzaDirBullet","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaButterJoker:[function(a,t,e){"use strict";cc._RF.push(t,"17c49CbuVtJoLLDs3ZHPIu2","pzaButterJoker");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaButterJoker=void 0;var r=a("../../Common/pzaWorldEventManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaJalapeno"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.attack=function(){var a=this;window.pzaplantManager.removePlant(this.baseData),this.death();var t=window.pzaMapManager,e=this.baseData.xIndex,o=this.baseData.yIndex,n=c.pzaGameState.map.getMapRow();t.shakeMap();for(var i=c.pzaGameState.map.getBlockLogicPos(0,o,0,0),d=0;d<12;d++){(m=i.clone()).x+=100*d,c.pzaGameState.map.fixMapYOffset(o,m,0);var h=.1*d+.5;d>=5&&(h=.05*d+.5),s.pzaEffectManager.createBoomFireEffect(o,h,m,null)}for(i=c.pzaGameState.map.getBlockLogicPos(e,0,0,0),d=0;d<10;d++){var m;(m=i.clone()).x+=50,m.y+=70*d,s.pzaEffectManager.createBoomFireEffect(e,.1*d+.5,m,null)}t.removeColRowIceGround(e,o);for(var f=0;f<=8;f++)t.removeLadder(f,o);for(var z=0;z<=n;z++)t.removeLadder(e,z);r.pzaWorldEventManager.triggerEvent(r.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var y=[];for(d=0;d<n;d++){var g=window.pzazombieManager.zombieDatas[d];d!==o?g.forEach(function(a){a.xIndex===e&&y.push(a)}):y=y.concat(Array.from(g))}null!=window.pzazombieManager.drZomBoss&&y.push(window.pzazombieManager.drZomBoss.baseData),y.forEach(function(t){if(t&&!t.isDead&&!t.buffData.hasBuff(p.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);if(e&&(e.hurt(a.baseData.atk,a.baseData,u.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==l.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(p.pzaBuffType.FROST),t.buffData.removeBuff(p.pzaBuffType.FROZEN)),!e.baseData.isDead&&(e.bePauseControl(),!e.baseData.buffData.hasBuff(p.pzaBuffType.IMM_CONTROL)&&!e.baseData.buffData.hasBuff(p.pzaBuffType.IMM_IMMOBILIZE)))){var o=e.baseData.buffData.releaseBuff(p.pzaBuffType.IMMOBILIZE);null!=o?o.buffTime=5:(o=new p.pzaBuffInfo(p.pzaBuffType.IMMOBILIZE,5),e.baseData.buffData.addBuff(o),e.bePauseControl())}}})},i([m],t)}(d.pzaJalapeno));e.pzaButterJoker=f,cc._RF.pop()},{"../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaJalapeno":"pzaJalapeno"}],pzaBuyConfirmView:[function(a,t,e){"use strict";cc._RF.push(t,"11edfsimUdBF7p40xxx3Rtx","pzaBuyConfirmView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBuyConfirmView=void 0;var r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaGamePropConfig"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaSoundManager"),d=a("../Common/pzaSpriteFrameManager"),h=a("../Common/pzaStatisticsMgr"),m=a("../Common/pzaUIManager"),f=a("../Common/pzaUtil"),z=a("../Common/pzaWorldEventManager"),y=a("../Garden/pzaGardenMgr"),g=a("../Load/pzaPreLoadManager"),v=a("../Shop/pzaShopConfig"),b=a("../utils/pzaChannel"),S=a("./pzaWarningView"),P=cc._decorator,C=P.ccclass,D=P.property,M=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.price=null,t.priceNode=null,t.itemIcon=null,t.plantCard=null,t.plantIcon=null,t.plantCardBoard=null,t.plantCardBoardFrames=[],t.tittle=null,t.desc=null,t.coin=null,t.confirmTxt=null,t.confirmBtn=null,t.cancelTxt=null,t.cancelBtn=null,t.adIcon=null,t.itemCount=null,t.adShareBtnFrames=[],t.itemType=null,t.shopPos=null,t}var e;return n(t,a),e=t,t.prototype.onEnable=function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.HIDE_DAVE_DIALOG,null)},t.prototype.onDisable=function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.SHOW_DAVE_DIALOG,null)},t.prototype.bindData=function(a,t,e){if(this.itemType=a,this.shopPos=t,this.buyCall=e,this.confirmBtn.active=!0,this.cancelBtn.x=-204,this.coin.node.active=!0,this.coin.string="\u786c\u5e01\uff1a"+f.pzaUtil.getCurrencyStr(c.pzaLocalData.data.coin),this.itemCount.node.active=!1,a==v.pzaShopItemType.DAVE_COIN)return this.tittle.string="\u6234\u592b\u7684\u79d8\u5bc6\u8d27\u7269",this.desc.string="\u5e7f\u544a\u4ee5\u83b7\u5f971000\u786c\u5e01",this.adIcon.node.active=!0,this.confirmTxt.string="\u7acb\u5373\u9886\u53d6",this.cancelTxt.string="\u8fd4\u56de",this.confirmTxt.node.x=31,d.pzaSpriteFrameManager.loadShopItemIcon(a,this.itemIcon),this.priceNode.active=!1,this.itemIcon.node.active=!0,this.plantCard.active=!1,void(c.pzaLocalData.maxShareRwdCount>0&&c.pzaLocalData.data.freeCoinShareCount<c.pzaLocalData.maxShareRwdCount?(this.adIcon.spriteFrame=this.adShareBtnFrames[1],"ks"!=b.pzaChannel.instance().channel&&"tt"!=b.pzaChannel.instance().channel&&"my"!=b.pzaChannel.instance().channel||(this.adIcon.spriteFrame=this.adShareBtnFrames[0])):(this.adIcon.spriteFrame=this.adShareBtnFrames[0],h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"2"},{name:"adname",value:"\u5546\u5e97\u8d2d\u4e70\u91d1\u5e01"})));this.tittle.string="\u8d2d\u4e70\u8fd9\u4e00\u7269\u54c1\uff1f",this.adIcon.node.active=!1,this.confirmTxt.string="\u5426",this.cancelTxt.string="\u662f",this.confirmTxt.node.x=-3,this.priceNode.active=!0;var o=v.pzaShopConfig.SHOP_CONFIG.get(a);null!=o&&(this.desc.string=o.desc,this.price.string=f.pzaUtil.getCurrencyStr(o.price),a>=v.pzaShopItemType.CARD_SLOT_7&&a<=v.pzaShopItemType.CARD_SLOT_9?(this.itemIcon.node.active=!0,this.plantCard.active=!1,d.pzaSpriteFrameManager.loadShopItemIcon(1,this.itemIcon)):a==v.pzaShopItemType.BACONIC_SMALL||a==v.pzaShopItemType.BACONIC_BIG?(this.itemIcon.node.active=!0,this.plantCard.active=!1,d.pzaSpriteFrameManager.loadShopItemIcon(4,this.itemIcon)):a<v.pzaShopItemType.GATLING_PEA||a>v.pzaShopItemType.IMITATER?(this.itemIcon.node.active=!0,this.plantCard.active=!1,d.pzaSpriteFrameManager.loadShopItemIcon(a,this.itemIcon),a!=v.pzaShopItemType.FERTILIZER&&a!=v.pzaShopItemType.PESTICIDE||(this.itemCount.node.active=!0)):(this.itemIcon.node.active=!1,this.plantCard.active=!0,d.pzaSpriteFrameManager.loadPlantCard(v.pzaShopConfig.getPlantTypeByItem(a),this.plantIcon),a==v.pzaShopItemType.IMITATER?this.plantCardBoard.spriteFrame=this.plantCardBoardFrames[0]:this.plantCardBoard.spriteFrame=this.plantCardBoardFrames[1]),a==v.pzaShopItemType.GATLING_PEA&&(this.priceNode.active=!1,this.coin.node.active=!1,this.tittle.string="\u606d\u559c\u83b7\u5f97\u673a\u67aa\u5c04\u624b\uff01",this.cancelTxt.string="\u786e\u5b9a",this.confirmBtn.active=!1,this.cancelBtn.x=0,this.buyItem(this.itemType,this.shopPos)))},t.prototype.tasksBindData=function(a){this.tittle.node.active=!1,this.priceNode.active=!1,this.coin.node.active=!1,this.confirmBtn.active=!1;var t="";switch(a){case s.pzaGamePropEnum.PROP_SECRET_FLOWER:t="\u795e\u79d8\u7684\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u597d\u597d\u517b\u5b83\uff0c\u6211\u4fdd\u8bc1\u4f60\u4f1a\u6709\u5f88\u5927\u6536\u83b7\uff01",d.pzaSpriteFrameManager.loadGoldPlant(30,this.itemIcon);break;case s.pzaGamePropEnum.PROP_BRONZE_FLOWE:t="\u795e\u79d8\u7684\u9752\u94dc\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u670925%\u7684\u673a\u4f1a\u53d8\u6210\u4f60\u6ca1\u6709\u7684\u690d\u7269\uff01",d.pzaSpriteFrameManager.loadGoldPlant(31,this.itemIcon);break;case s.pzaGamePropEnum.PROP_SILVER_FLOWE:t="\u795e\u79d8\u7684\u767d\u94f6\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u670950%\u7684\u673a\u4f1a\u53d8\u6210\u4f60\u6ca1\u6709\u7684\u690d\u7269\uff01",d.pzaSpriteFrameManager.loadGoldPlant(32,this.itemIcon);break;case s.pzaGamePropEnum.PROP_GOLD_FLOWER:t="\u795e\u79d8\u7684\u9ec4\u91d1\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u6709100%\u7684\u673a\u4f1a\u53d8\u6210\u4f60\u6ca1\u6709\u7684\u690d\u7269\uff01",d.pzaSpriteFrameManager.loadGoldPlant(33,this.itemIcon)}this.desc.string=t,this.itemCount.string="",this.cancelBtn.x=0,this.cancelTxt.string="\u786e\u5b9a"},t.prototype.clickConfirm=function(){var a=this;u.pzaSoundManager.playSFX();var t=function(){a.close(),a.itemType==v.pzaShopItemType.DAVE_COIN&&(c.pzaLocalData.data.coin+=1e3,c.pzaLocalData.addDirty("coin"))};this.itemType==v.pzaShopItemType.DAVE_COIN?c.pzaLocalData.maxShareRwdCount>0&&c.pzaLocalData.data.freeCoinShareCount<c.pzaLocalData.maxShareRwdCount?"ks"==b.pzaChannel.instance().channel||"tt"==b.pzaChannel.instance().channel||"my"==b.pzaChannel.instance().channel?b.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u5546\u5e97\u8d2d\u4e70\u91d1\u5e01",adsid:"2"}):b.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"2"},function(){c.pzaLocalData.data.freeCoinShareCount++,c.pzaLocalData.addDirty("freeCoinShareCount"),t()}):b.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u5546\u5e97\u8d2d\u4e70\u91d1\u5e01",adsid:"2"}):this.close()},t.prototype.buyItem=function(a,t){switch(a){case v.pzaShopItemType.CARD_SLOT_7:c.pzaLocalData.data.plantSlotCount=7,c.pzaLocalData.addDirty("plantSlotCount"),c.pzaLocalData.obtainGoods(a,1);break;case v.pzaShopItemType.CARD_SLOT_8:c.pzaLocalData.data.plantSlotCount=8,c.pzaLocalData.addDirty("plantSlotCount"),c.pzaLocalData.obtainGoods(a,1);break;case v.pzaShopItemType.CARD_SLOT_9:c.pzaLocalData.data.plantSlotCount=9,c.pzaLocalData.addDirty("plantSlotCount"),c.pzaLocalData.obtainGoods(a,1);break;case v.pzaShopItemType.BACONIC_SMALL:case v.pzaShopItemType.BACONIC_BIG:case v.pzaShopItemType.POOL_CLEAN_CAR:case v.pzaShopItemType.ROOF_CART:case v.pzaShopItemType.NUT_HEALING:c.pzaLocalData.obtainGoods(a,1);break;case v.pzaShopItemType.PITCHFORK:c.pzaLocalData.obtainGoods(a,3);break;case v.pzaShopItemType.SHROOM_GARDEN:y.default.instance().addGardenEnv(y.pzaGardenEnv.night);break;case v.pzaShopItemType.AQUARIUM:y.default.instance().addGardenEnv(y.pzaGardenEnv.water);break;case v.pzaShopItemType.SNAIL:y.default.instance().addGardenTool(y.pzaGardenToolType.snail,1);break;case v.pzaShopItemType.WHEELBARROW:y.default.instance().addGardenTool(y.pzaGardenToolType.cart,1);break;case v.pzaShopItemType.JUKEBOX:y.default.instance().addGardenTool(y.pzaGardenToolType.phonograph,1);break;case v.pzaShopItemType.GLOVE:y.default.instance().addGardenTool(y.pzaGardenToolType.glove,1);break;case v.pzaShopItemType.GOLD_KETTLE:y.default.instance().addGardenTool(y.pzaGardenToolType.goldWaterPot,1);break;case v.pzaShopItemType.GATLING_PEA:c.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.GATLING_PEA),c.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.TWIN_SUNFLOWER:c.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.TWIN_SUNFLOWER),c.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.GLOOM_SHROOM:c.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.GLOOM_SHROOM),c.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.CATTAIL:c.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.CATTAIL),c.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.SPIKEROCK:c.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.SPIKEROCK),c.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.GOLD_MAGNET:c.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.GOLD_MAGNET),c.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.WINTER_MELON:c.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.WINTER_MELON),c.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.COB_CANNON:c.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.COB_CANNON),c.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant();break;case v.pzaShopItemType.IMITATER:c.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.IMITATER),c.pzaLocalData.addDirty("ownPlants");break;case v.pzaShopItemType.FERTILIZER:y.default.instance().addGardenTool(y.pzaGardenToolType.manure,5);break;case v.pzaShopItemType.PESTICIDE:y.default.instance().addGardenTool(y.pzaGardenToolType.pesticide,5);break;case v.pzaShopItemType.MARIGOLD_FLOWERPOT:y.default.instance().addGardenPlant(p.pzaPlantEnum.MARIGOLD),c.pzaLocalData.data.purchasedPos.push(t),c.pzaLocalData.addDirty("purchasedPos");break;case v.pzaShopItemType.FLOWER_SEED:var e=y.default.instance().randomGardenPlant(0);y.default.instance().addGardenPlant(e),c.pzaLocalData.data.purchasedPos.push(t),c.pzaLocalData.addDirty("purchasedPos");break;case v.pzaShopItemType.BRONZE_FLOWER_SEED:var o=y.default.instance().randomGardenPlant(.25);y.default.instance().addGardenPlant(o),c.pzaLocalData.data.purchasedPos.push(t),c.pzaLocalData.addDirty("purchasedPos");break;case v.pzaShopItemType.SILVER_FLOWER_SEED:var n=y.default.instance().randomGardenPlant(.5);y.default.instance().addGardenPlant(n),c.pzaLocalData.data.purchasedPos.push(t),c.pzaLocalData.addDirty("purchasedPos");break;case v.pzaShopItemType.GOLD_FLOWER_SEED:var i=y.default.instance().randomGardenPlant(1);y.default.instance().addGardenPlant(i),c.pzaLocalData.data.purchasedPos.push(t),c.pzaLocalData.addDirty("purchasedPos")}},t.prototype.clickCancel=function(){if(u.pzaSoundManager.playSFX(),this.close(),this.itemType!=v.pzaShopItemType.DAVE_COIN)if(this.itemType!=v.pzaShopItemType.GATLING_PEA){var a=v.pzaShopConfig.SHOP_CONFIG.get(this.itemType);if(null!=a)return c.pzaLocalData.data.coin>=a.price?(c.pzaLocalData.data.coin-=a.price,this.buyItem(this.itemType,this.shopPos),this.buyCall&&this.buyCall(),this.itemType>=v.pzaShopItemType.CARD_SLOT_7&&this.itemType<=v.pzaShopItemType.CARD_SLOT_9&&m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(S.pzaWarningView);t&&t.show("\u73b0\u5728\u4f60\u53ef\u4ee5\u5728\u6bcf\u4e2a\u5173\u5361\n\u9009\u62e9"+c.pzaLocalData.data.plantSlotCount+"\u4e2a\u690d\u7269\u79cd\u5b50\u4e86\uff01","\u786e\u5b9a",null,null,null,"\u66f4\u591a\u5361\u7247\u69fd\uff01")}),void(a.price>5e3&&this.scheduleOnce(function(){var a=b.pzaChannel.instance().getChannel();b.pzaChannel.saveToRemote(a.channelUserId,c.pzaLocalData.data)},1))):void m.pzaUIManager.baseShowPopUI(g.pzaResourceUrl.BUY_CONFIRM_VIEW,function(a){var t=a&&a.getComponent(e);t&&t.bindData(v.pzaShopItemType.DAVE_COIN,null,null)})}else this.buyCall&&this.buyCall()},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([D({displayName:"\u4ef7\u683c",type:cc.Label})],t.prototype,"price",void 0),i([D({displayName:"\u4ef7\u683c\u8282\u70b9",type:cc.Node})],t.prototype,"priceNode",void 0),i([D({displayName:"\u7269\u54c1\u56fe\u6807",type:cc.Sprite})],t.prototype,"itemIcon",void 0),i([D({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"plantCard",void 0),i([D({displayName:"\u690d\u7269\u56fe\u7247",type:cc.Sprite})],t.prototype,"plantIcon",void 0),i([D({displayName:"\u690d\u7269\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"plantCardBoard",void 0),i([D({displayName:"\u690d\u7269\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"plantCardBoardFrames",void 0),i([D({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"tittle",void 0),i([D({displayName:"\u63cf\u8ff0",type:cc.Label})],t.prototype,"desc",void 0),i([D({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],t.prototype,"coin",void 0),i([D({displayName:"\u786e\u8ba4\u6587\u6848",type:cc.Label})],t.prototype,"confirmTxt",void 0),i([D({displayName:"\u786e\u8ba4\u6309\u94ae",type:cc.Node})],t.prototype,"confirmBtn",void 0),i([D({displayName:"\u53d6\u6d88\u6587\u6848",type:cc.Label})],t.prototype,"cancelTxt",void 0),i([D({displayName:"\u53d6\u6d88\u6309\u94ae",type:cc.Node})],t.prototype,"cancelBtn",void 0),i([D({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Sprite})],t.prototype,"adIcon",void 0),i([D({displayName:"\u5546\u54c1\u6570\u91cf",type:cc.Label})],t.prototype,"itemCount",void 0),i([D({displayName:"\u5e7f\u544a\u5206\u4eab\u6309\u94ae\u56fe",type:[cc.SpriteFrame]})],t.prototype,"adShareBtnFrames",void 0),e=i([C],t)}(cc.Component);e.pzaBuyConfirmView=M,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../utils/pzaChannel":"pzaChannel","./pzaWarningView":"pzaWarningView"}],pzaCGPaperView:[function(a,t,e){"use strict";cc._RF.push(t,"5ab46dVn0lIiL0A+HFwDcq9","pzaCGPaperView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCGPaperView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameManager"),s=a("../../Common/pzaSoundManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.paperSprite=null,t.paperFrames=[],t}return n(t,a),t.prototype.onEnable=function(){if((5==r.pzaGameState.curChapter||10==r.pzaGameState.curChapter)&&10==r.pzaGameState.curPart)return this.paperSprite.spriteFrame=this.paperFrames[5],void s.pzaSoundManager.playAudio("paper");var a=r.pzaGameState.curChapter>5?r.pzaGameState.curChapter-5:r.pzaGameState.curChapter;this.paperSprite.spriteFrame=this.paperFrames[a-1],s.pzaSoundManager.playAudio("cg")},t.prototype.clickNext=function(){this.close(),l.pzaGameManager.getCurrentGame().partWin()},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u7eb8\u6761",type:cc.Sprite})],t.prototype,"paperSprite",void 0),i([d({displayName:"\u7eb8\u6761\u56fe",type:[cc.SpriteFrame]})],t.prototype,"paperFrames",void 0),i([u],t)}(cc.Component);e.pzaCGPaperView=h,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSoundManager":"pzaSoundManager"}],pzaCabbagePult:[function(a,t,e){"use strict";cc._RF.push(t,"e04dbXPTkRA2IEuUkS7pTRI","pzaCabbagePult");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCabbagePult=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaThrowBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),d.pzaGameState.useThrowPlant=!0,d.pzaGameState.onlyShroomCofee=!1,d.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null!=e)return l.pzaSoundManager.playAudio("CabbagePult"),void a.animation.playAnimation("attack",!1,t,function(){a.attack(e)});a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};t()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(u.pzaBuffType.FLY)&&!o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){o.x-=15;var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var s=cc.v2(l.x+this.baseData.logicPos.x+14,l.y+this.baseData.logicPos.y+42);i.setPosition(s);var u=i.getComponent(c.pzaThrowBullet);null!=u&&(u.init(!1,this.baseData.yIndex,this.baseData.atk,a,n),u.updateBulletAngel(90))}}}}}},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaCabbagePult=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaCactus:[function(a,t,e){"use strict";cc._RF.push(t,"a5050dcEfVDkIX49vL7JqiK","pzaCactus");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCactus=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.shootHNode=null,t.bulletPrefab=null,t.blinkTime=3,t.rise=!1,t.atk1AniTime=1.4,t.atk2AniTime=1.4,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.rise=!1,d.pzaGameState.isZombieMode())return this.attacking=!1,this.atk1AniTime=this.animation.getAnimationDuration("T_attack1"),this.atk2AniTime=this.animation.getAnimationDuration("T_attack2"),void this.animation.playAnimation("T_idle1",!0);this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atk1AniTime=this.animation.getAnimationDuration("attack1"),this.atk2AniTime=this.animation.getAnimationDuration("attack2"),d.pzaGameState.onlyShroomCofee=!1,d.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()){var o=this.findAttackTarget();if(null!=o)return this.attacking=!0,o.buffData.hasBuff(u.pzaBuffType.FLY)?void(this.rise?(l.pzaSoundManager.playAudio("CactusAtk"),this.animation.playAnimation("T_attack2",!1,function(){e.attacking=!1},function(){e.shoot(!0)},this.atk2AniTime/this.atkInterval)):(l.pzaSoundManager.playAudio("Cactus"),this.animation.playAnimation("T_rise",!1,function(){e.rise=!0,e.attacking=!1}))):void(this.rise?this.animation.playAnimation("T_lower",!1,function(){e.rise=!1,e.attacking=!1,e.animation.playAnimation("T_idle1",!0)}):(l.pzaSoundManager.playAudio("CactusAtk"),this.animation.playAnimation("T_attack1",!1,function(){e.attacking=!1},function(){e.shoot(!1)},this.atk1AniTime/this.atkInterval)));if(this.rise)return this.attacking=!0,void this.animation.playAnimation("T_lower",!1,function(){e.rise=!1,e.attacking=!1,e.animation.playAnimation("T_idle1",!0)})}},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null!=e)return e.buffData.hasBuff(u.pzaBuffType.FLY)?void(a.rise?(l.pzaSoundManager.playAudio("CactusAtk"),a.animation.playAnimation("attack2",!1,t,function(){a.shoot(!0)},a.atk2AniTime/a.atkInterval)):(l.pzaSoundManager.playAudio("Cactus"),a.animation.playAnimation("rise",!1,function(){a.rise=!0,t()}))):void(a.rise?a.animation.playAnimation("lower",!1,function(){a.rise=!1,t()}):(l.pzaSoundManager.playAudio("CactusAtk"),a.animation.playAnimation("attack1",!1,t,function(){a.shoot(!1)},a.atk1AniTime/a.atkInterval)));a.rise?a.animation.playAnimation("lower",!1,function(){a.rise=!1,t()}):a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};t()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x<a.baseData.logicPos.x||o.buffData.hasBuff(u.pzaBuffType.DIVE)||o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||(o.buffData.hasBuff(u.pzaBuffType.FLY)?e=o:t=o)}),null!=e?e:null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.shoot=function(a){if(null!=this.baseData&&!this.baseData.isDead){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=a?this.shootHNode.convertToWorldSpaceAR(cc.v2()):this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o);e.setPosition(n);var i=e.getComponent(c.pzaBaseBullet);if(null!=i){i.init(this.baseData.yIndex,this.baseData.atk,1),i.isInAir=a;var l=d.pzaGameState.map.getMapSkewColumn();l>0&&this.baseData.xIndex<=l-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u53d1\u5c04\u70b9-\u9ad8",type:cc.Node})],t.prototype,"shootHNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaCactus=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaCatLitterPot:[function(a,t,e){"use strict";cc._RF.push(t,"16bd7Tp+M1N14vv2xRSCKwj","pzaCatLitterPot");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCatLitterPot=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGameConfig"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaTrackBullet"),u=a("../Data/pzaBuffData"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.animation.playAnimation("idle",!0),null!=t&&null!=t.plantData){var e=p.pzaGameConfig.getPlantConfig(t.plantData.plantType);null!=e&&(this.atkInterval=e.atkInterval)}this.playNormalAni()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null!=this.baseData&&this.baseData.isDead},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();null==e?a.animation.playAnimation("idle",!1,t):a.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("idle2",!1,t)},function(){a.attack(e)})},function(){a.attack(e)})};this.animation.playAnimation("idle",!1,t)},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=l.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o),i=e.getComponent(c.pzaTrackBullet);i&&i.init(this.baseData.atk,a,n,this.baseData.yIndex)}}}},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(u.pzaBuffType.DIVE)&&!r.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var p=s.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(u.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.flaserDeath=function(){var a=this;this.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FLASER,-1)),this.pauseSelf(),this.node.scaleX=1,this.node.scaleY=.3,this.scheduleOnce(function(){a.node.scale=1,a.close()},5),this.animation.node.stopAllActions()},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaCatLitterPot=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaTrackBullet":"pzaTrackBullet","../Data/pzaBuffData":"pzaBuffData","./pzaBasePlant":"pzaBasePlant"}],pzaCatSunBullet:[function(a,t,e){"use strict";cc._RF.push(t,"ea889YFEPhI5p1BWwddmlka","pzaCatSunBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCatSunBullet=void 0;var r=a("../../Common/pzaWorldEventManager"),p=a("./pzaTrackBullet"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.close=function(){r.pzaWorldEventManager.removeListener(r.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.hasColl=!0,null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),window.pzaplantManager.plantCreateSun2(this.node.getPosition(),.5,15),a.prototype.close.call(this)},i([s],t)}(p.pzaTrackBullet));e.pzaCatSunBullet=c,cc._RF.pop()},{"../../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaTrackBullet":"pzaTrackBullet"}],pzaCatSun:[function(a,t,e){"use strict";cc._RF.push(t,"8c9ffB8IU5FTaqE+aik6pNB","pzaCatSun");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCatSun=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../Bullet/pzaTrackBullet"),c=a("../Data/pzaBuffData"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.atkTime=0,t.sunTime=25,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.sunTime=3,this.atkTime=0,this.aniCom()},t.prototype.aniCom=function(){var a=this;if(this.atkTime>0)this.animation.playAnimation("idle1",!1,this.aniCom.bind(this));else{var t=this.findAttackTarget();if(t)return this.atkTime=this.atkInterval,void this.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("idle1",!1,a.aniCom.bind(a))},function(){a.attack(t)});this.animation.playAnimation("idle1",!1,this.aniCom.bind(this))}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.atkTime-=t,this.sunTime-=t,this.sunTime<=0&&(this.sunTime=25,window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1,25))},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(c.pzaBuffType.DIVE)&&!r.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(c.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o),i=e.getComponent(s.pzaTrackBullet);i&&i.init(this.baseData.atk,a,n,this.baseData.yIndex)}}}},i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([h],t)}(u.pzaBasePlant);e.pzaCatSun=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaTrackBullet":"pzaTrackBullet","../Data/pzaBuffData":"pzaBuffData","./pzaBasePlant":"pzaBasePlant"}],pzaCatapultZombie:[function(a,t,e){"use strict";cc._RF.push(t,"b8c45xHmH5BNaHGZppu8KLF","pzaCatapultZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCatapultZombie=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaThrowBullet"),c=a("../Plant/pzaAttackType"),u=a("../pzaGameState"),d=a("../pzaSpineTool"),h=a("./pzaBaseZombie"),m=a("./pzaZombieSlot"),f=a("./pzaZombieState"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.firstStopXPos=-1,t.canAttack=!1,t.leftBullet=20,t.attacking=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,-14.95,68.85))]])},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.animation.node.x=65},t.prototype.preview=function(t,e,o){a.prototype.preview.call(this,t,e,o),this.animation.node.x=-50},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.leftBullet=20,this.animation.node.x=45,this.canAttack=!1,this.attacking=!1;var e=u.pzaGameState.map.getMapColumn(),o=u.pzaGameState.map.getBlockLogicPos(e-1,t.yIndex,0,0);this.firstStopXPos=o.x},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead&&(this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),!this.baseData.isBeControlled()&&(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),this.rollingPlant(),!this.attacking)))if(this.pushBackTime>0)this.pushBackMove(a);else{if(!this.canAttack&&null!=this.baseData.logicPos&&this.baseData.logicPos.x<=this.firstStopXPos&&(this.canAttack=!0),this.canAttack&&this.leftBullet>0){var t=this.findCapTarget();if(null!=t)return this.baseData.zombieData.atkInterval-=a,void(this.baseData.zombieData.atkInterval<=0?this.attack(a,t):this.zombieState!=f.pzaZombieState.STAY&&this.playStayAnimation())}this.updateMove(a)}},t.prototype.rollingPlant=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a=this.findTarget();if(null!=a){var t=""+a.xIndex+a.yIndex,e=window.pzaplantManager.plantDataMap.get(t);if(null!=e){var o=window.pzaplantManager.getPlantByData(e);o&&o.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.ROLLING)}var n=window.pzaplantManager.plantEnvDataMap.get(t);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.ROLLING)}var r=window.pzaplantManager.pumpkinDataMap.get(t);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,c.pzaAttackType.ROLLING)}}}},t.prototype.hurt=function(t,e,o){var n=this;if(void 0===o&&(o=c.pzaAttackType.FLOOR_ATK),this.baseData&&!this.baseData.isDead)if(o!=c.pzaAttackType.SPIKE)a.prototype.hurt.call(this,t,e,o);else if(this.baseData.zombieDie(),l.pzaSoundManager.playAudio("ball_fall"),this.animation.playAnimation("jump",!1,function(){n.death(!0)}),null!=e){var i=window.pzaplantManager.getPlantByData(e);i&&i.hurt(50,this.baseData,c.pzaAttackType.BANG)}},t.prototype.death=function(a){var t=this;this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData),a?(this.playDeathAnimation(function(){t.close()}),l.pzaSoundManager.playAudio("explosion")):this.close()},t.prototype.findCapTarget=function(){for(var a=0;a<this.baseData.xIndex;a++){var t=window.pzaplantManager.getCanAttackPlantData(a,this.baseData.yIndex,!0);if(null!=t)return t}return null},t.prototype.attack=function(a,t){var e=this;this.zombieState=f.pzaZombieState.EAT_ATK,this.attacking=!0,l.pzaSoundManager.playAudio("CatapultAtk"),this.animation.playAnimation("attack",!1,function(){e.baseData&&(e.refreshQiu(e.leftBullet-1),e.leftBullet--,e.attacking=!1,e.baseData.zombieData.atkInterval=2)},function(){e.shoot(t)})},t.prototype.changeSkin=function(t){a.prototype.changeSkin.call(this,t),this.leftBullet<=0&&this.animation.spineAnimation.setAttachment("qiu0",null)},t.prototype.zombieDying=function(){a.prototype.zombieDying.call(this),this.leftBullet<=0?this.changeSkin("che2_1"):this.changeSkin("che2")},t.prototype.zombieIntact=function(){a.prototype.zombieIntact.call(this),this.changeSkin("che1");for(var t=0;t<=4;t++){var e="qiu"+t;1==t&&(e="qiu"),this.animation.spineAnimation.setAttachment(e,"qiu")}},t.prototype.refreshQiu=function(a){if(!(a>=5))for(var t=0;t<=4;t++){var e="qiu"+t;1==t&&(e="qiu"),a<=t?this.animation.spineAnimation.setAttachment(e,null):this.animation.spineAnimation.setAttachment(e,"qiu")}},t.prototype.shoot=function(a){if(null!=a&&null!=a.logicPos&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){var o=d.pzaSpineTool.findBonePos(this.animation.spineAnimation,"qiu0",this.node);if(o){e.setParent(t),e.setPosition(this.node.parent.convertToNodeSpaceAR(o));var n=e.getComponent(s.pzaThrowBullet);null!=n&&n.init(!0,this.baseData.yIndex,this.baseData.atk,a,a.logicPos,a.xIndex)}}}}},i([g({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([y],t)}(h.pzaBaseZombie);e.pzaCatapultZombie=v,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaCattail:[function(a,t,e){"use strict";cc._RF.push(t,"5f4ddIxVelOYKh2ks0pgTsL","pzaCattail");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCattail=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../../Common/pzaWorldEventManager"),c=a("../Bullet/pzaTrackBullet"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaPlantEnum"),h=a("../pzaGameState"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.atkAniTime=1.4,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.BACK_HOME,this.close,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.GAME_OVER,this.close,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.BACK_HOME,this.realClose,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.GAME_OVER,this.realClose,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.BACK_HOME,this.realClose,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.GAME_OVER,this.realClose,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack"),h.pzaGameState.onlyShroomCofee=!1,h.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null==e)a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t));else{var o=a.atkAniTime/a.atkInterval*2;a.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("idle2",!1,t)},function(){a.attack(e)},o)},function(){a.attack(e)},o)}};this.animation.playAnimation("idle",!1,t)},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(u.pzaBuffType.DIVE)&&!r.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(u.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o),i=e.getComponent(c.pzaTrackBullet);i&&i.init(this.baseData.atk,a,n,this.baseData.yIndex)}}}},t.prototype.close=function(){if(a.prototype.close.call(this),!this.inUI){var t=""+this.baseData.xIndex+this.baseData.yIndex;null!=window.pzaplantManager.pumpkinDataMap.get(t)&&window.pzaplantManager.createPlant(d.pzaPlantEnum.LILY_PAD,this.baseData.xIndex,this.baseData.yIndex)}},t.prototype.realClose=function(){a.prototype.close.call(this)},i([y({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([y({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([z],t)}(m.pzaBasePlant);e.pzaCattail=g,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaTrackBullet":"pzaTrackBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaChallengeView:[function(a,t,e){"use strict";cc._RF.push(t,"0d69670jrBLuoeF8tEEhDkx","pzaChallengeView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChallengeView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaStatisticsMgr"),c=a("../Common/pzaUIManager"),u=a("../Load/pzaPreLoadManager"),d=a("../utils/pzaChannel"),h=a("./pzaCommonMask"),m=a("./pzaPreOpenView"),f=a("./pzaWarningView"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.survivalNode=null,t.survivalBtn=null,t.puzzleNode=null,t.puzzleBtn=null,t.trophyCount=null,t.puzzleSkull=null,t.survivalSkull=null,t.miniSkull=null,t.miniNode=null,t.miniBtn=null,t.isTouching=!1,t}return n(t,a),t.prototype.onEnable=function(){this.node.x=0,this.survivalNode.active=!1,this.puzzleNode.active=!1,this.miniNode.active=!1,this.puzzleSkull.active=p.pzaLocalData.data.curChapter>1||p.pzaLocalData.data.curPart>4,this.survivalSkull.active=p.pzaLocalData.data.passLastPart,this.miniSkull.active=p.pzaLocalData.data.curChapter>1||p.pzaLocalData.data.curPart>4,this.survivalBtn.on(cc.Node.EventType.TOUCH_START,this.touchSurvivalBtn,this),this.survivalBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.clickSurvivalBtn,this),this.survivalBtn.on(cc.Node.EventType.TOUCH_END,this.clickSurvivalBtn,this),this.puzzleBtn.on(cc.Node.EventType.TOUCH_START,this.touchPuzzleBtn,this),this.puzzleBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.clickPuzzleBtn,this),this.puzzleBtn.on(cc.Node.EventType.TOUCH_END,this.clickPuzzleBtn,this),this.miniBtn.on(cc.Node.EventType.TOUCH_START,this.touchMiniBtn,this),this.miniBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.clickMiniBtn,this),this.miniBtn.on(cc.Node.EventType.TOUCH_END,this.clickMiniBtn,this),this.trophyCount.string=p.pzaLocalData.getTrophy()+"/"+p.pzaLocalData.getMaxTrophy()},t.prototype.onDisable=function(){this.survivalBtn.off(cc.Node.EventType.TOUCH_START,this.touchSurvivalBtn,this),this.survivalBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.clickSurvivalBtn,this),this.survivalBtn.off(cc.Node.EventType.TOUCH_END,this.clickSurvivalBtn,this),this.puzzleBtn.off(cc.Node.EventType.TOUCH_START,this.touchPuzzleBtn,this),this.puzzleBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.clickPuzzleBtn,this),this.puzzleBtn.off(cc.Node.EventType.TOUCH_END,this.clickPuzzleBtn,this),this.miniBtn.off(cc.Node.EventType.TOUCH_START,this.touchMiniBtn,this),this.miniBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.clickMiniBtn,this),this.miniBtn.off(cc.Node.EventType.TOUCH_END,this.clickMiniBtn,this)},t.prototype.touchPuzzleBtn=function(){this.isTouching||(this.isTouching=!0,this.puzzleNode.active=!0)},t.prototype.clickPuzzleBtn=function(){var a=this;l.pzaSoundManager.playAudio("gravebutton"),this.puzzleNode.active=!1,1==p.pzaLocalData.data.curChapter&&p.pzaLocalData.data.curPart<=4?c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(t){a.isTouching=!1;var e=t&&t.getComponent(f.pzaWarningView);e&&e.show("\u5192\u9669\u6a21\u5f0f\u901a\u51731-4\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")}):c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PUZZLE_VIEW,function(){a.isTouching=!1,h.pzaCommonMask.showMask(),a.node.parent.stopAllActions(),a.node.parent.x=1680,a.node.x=-1680,a.node.parent.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){h.pzaCommonMask.hideMask(),a.close()})))})},t.prototype.touchMiniBtn=function(){this.isTouching||(this.isTouching=!0,this.miniNode.active=!0)},t.prototype.clickMiniBtn=function(){var a=this;this.miniNode.active=!1,1==p.pzaLocalData.data.curChapter&&p.pzaLocalData.data.curPart<=4?c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(f.pzaWarningView);e&&e.show("\u5192\u9669\u6a21\u5f0f\u901a\u51731-4\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01"),a.isTouching=!1}):c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.MINIGAME_VIEW,function(){a.isTouching=!1,h.pzaCommonMask.showMask(),a.node.parent.stopAllActions(),a.node.parent.x=1680,a.node.x=-1680,a.node.parent.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){h.pzaCommonMask.hideMask(),a.close()})))})},t.prototype.touchSurvivalBtn=function(){this.isTouching||(this.isTouching=!0,this.survivalNode.active=!0)},t.prototype.clickSurvivalBtn=function(){var a=this;l.pzaSoundManager.playAudio("gravebutton"),this.survivalNode.active=!1,s.pzaStatisticsMgr.sendEvent("System",{name:"system",value:8});var t=function(){c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.SURVIVAL_VIEW,function(){h.pzaCommonMask.showMask(),a.node.parent.stopAllActions(),a.node.parent.x=1680,a.node.x=-1680,a.node.parent.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){h.pzaCommonMask.hideMask(),a.close()}))),a.isTouching=!1})};p.pzaLocalData.data.passLastPart?(p.pzaLocalData.data.preOpenSurvival&&(p.pzaLocalData.data.preOpenSurvival=!1,p.pzaLocalData.addDirty("preOpenSurvival")),t()):c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PRE_OPEN_VIEW,function(e){var o=e&&e.getComponent(m.pzaPreOpenView);o&&o.show(function(){d.pzaChannel.instance().showVideo({sucCall:function(){p.pzaLocalData.data.preOpenSurvival=!0,p.pzaLocalData.addDirty("preOpenSurvival"),t()},failCall:function(){a.isTouching=!1},endCall:function(){},posName:"\u65e0\u5c3d\u6a21\u5f0f\u63d0\u524d\u89e3\u9501",adsid:"19"})})})},t.prototype.clickBack=function(){var a=this;this.isTouching=!1,l.pzaSoundManager.playSFX(),c.pzaUIManager.aniHidePopUI(function(){a.close()})},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([g({displayName:"\u751f\u5b58\u6309\u94ae\u56fe\u8282\u70b9",type:cc.Node})],t.prototype,"survivalNode",void 0),i([g({displayName:"\u751f\u5b58\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"survivalBtn",void 0),i([g({displayName:"\u76ca\u667a\u6309\u94ae\u56fe\u8282\u70b9",type:cc.Node})],t.prototype,"puzzleNode",void 0),i([g({displayName:"\u76ca\u667a\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"puzzleBtn",void 0),i([g({displayName:"\u5956\u676f\u6570\u91cf",type:cc.Label})],t.prototype,"trophyCount",void 0),i([g({displayName:"\u76ca\u667a\u6a21\u5f0f\u9ab7\u9ac5",type:cc.Node})],t.prototype,"puzzleSkull",void 0),i([g({displayName:"\u751f\u5b58\u6a21\u5f0f\u9ab7\u9ac5",type:cc.Node})],t.prototype,"survivalSkull",void 0),i([g({displayName:"\u8ff7\u4f60\u6a21\u5f0f\u9ab7\u9ac5",type:cc.Node})],t.prototype,"miniSkull",void 0),i([g({displayName:"\u8ff7\u4f60\u6e38\u620f\u56fe\u8282\u70b9",type:cc.Node})],t.prototype,"miniNode",void 0),i([g({displayName:"\u8ff7\u4f60\u5c0f\u6e38\u620f\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"miniBtn",void 0),i([y],t)}(cc.Component);e.pzaChallengeView=v,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaPreOpenView":"pzaPreOpenView","./pzaWarningView":"pzaWarningView"}],pzaChannelIOS:[function(a,t,e){"use strict";cc._RF.push(t,"2c6c7wq3+9Eqq7w7Hv7emWW","pzaChannelIOS");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelIOS=void 0;var i=a("./pzaChannelWeb"),r=a("./pzaKDefine"),p=a("./pzakc"),l=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="ios",t}return n(t,a),t.prototype.init=function(t){a.prototype.init.call(this,t),window.showComm=this.showComm,window.exitGame=this.exit,window.showAlert=this.showAlert},t.prototype.copyToClip=function(a){jsb.reflection.callStaticMethod("AppController","copy2Clip:",a)},t.prototype.hasPrivacy=function(){return!!p.default.getData("isAgree",0)},t.prototype.exit=function(){p.default.log("\u9000\u51fa\u6e38\u620f"),jsb.reflection.callStaticMethod("AppController","onExit:",""),cc.game.end()},t.prototype.showVideo=function(a){window.videoSuc=a.sucCall,window.videoFail=a.failCall;var t=a.endCall;a.endCall=function(){cc.game.resume(),t()},cc.game.pause(),window.videoEnd=a.endCall,jsb.reflection.callStaticMethod("AppController","showVideo:","")},t.prototype.showComm=function(){p.default.log("showComm-ios"),jsb.reflection.callStaticMethod("AppController","showComm:","")},t.prototype.showAlert=function(){p.default.log("showAlert-ios"),p.default.sendMsg(r.Msg.showIosAlert)},t}(i.pzaChannelWeb);e.pzaChannelIOS=l,cc._RF.pop()},{"./pzaChannelWeb":"pzaChannelWeb","./pzaKDefine":"pzaKDefine","./pzakc":"pzakc"}],pzaChannelKs:[function(a,t,e){"use strict";cc._RF.push(t,"e9fa8VLpddPsooqAc+gUSe7","pzaChannelKs");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelKs=void 0;var i=a("../Common/pzaLocalData"),r=a("../Common/pzaSoundManager"),p=a("../Common/pzaStatisticsMgr"),l=a("./ks_analytics"),s=a("./pzaChannel"),c=a("./pzaChannelWeb"),u=a("./pzakc"),d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="ks",t.channelId=3,t.paraMap=new Map([["appId","ks681732394039713600"],["vedioAd","2300006644_01"],["ctrlId","6653eceda331ce3adb822a39"],["gid","6625cc6ea331ce3adb8228f6"]]),t.sharePicsArr=[{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",url:"https://mmocgame.qpic.cn/wechatgame/a06ia0rK6eLAFOr97s9y4MXbfDz3hjYEjhAT6lWwv10xALzjGl9thAIqw3EYNEwhN/0",id:"Xf4UCePgQ6Owe0gO7nnOkw=="},{title:"\u5927\u54e5\uff0c\u6765\u548c\u59b9\u59b9\u4e00\u8d77\u73a9\u597d\u5417\uff1f",url:"https://mmocgame.qpic.cn/wechatgame/I1v75NcAhVDGbaKAWabMVB4HY5iaW8HfrWOqvibxcq1ic32xLibRswZuVj6txBSykbHl/0",id:"7Ic8CnJeSN+yLEi8xpRO5w=="}],t.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u62d3\u7ef4\u4fe1\u606f\u7cfb\u7edf\u80a1\u4efd\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2024SA0026397",t.channelObj=window.ks,t.sid=null,t.authorizationButton=null,t.onShowCall=null,t.cachedBannerSize=null,t.bannerTimeId=-1,t.shareIndex=0,t}return n(t,a),t.prototype.hasPrivacy=function(){return!0},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this.channelObj;o.onShow(function(){cc.game.resume(),r.pzaSoundManager.resumeMusic(),e.onShowCall&&e.onShowCall(),e.onShowCall=null}),o.onHide(function(){cc.game.pause(),e.isShare&&(e.shareTime=(new Date).getTime())});var n=this.getPara("ctrlId"),p=this;if(n){var l=u.default.getData("sid",null);l||(l=p.channelObj.getLaunchOptionsSync().scene,u.default.saveData("sid",l));var c={id:n,sid:l};u.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",c,function(a,t){a?u.default.err(a):""+t.code=="0"?(p.ctrl=t.data,u.default.log("\u5feb\u624b\u8fd4\u56de",p.ctrl),i.pzaLocalData.maxAdShareCount=parseInt(p.ctrl.p2),i.pzaLocalData.maxShareRwdCount=parseInt(p.ctrl.p3)):u.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(t))})}this.ksLogin(function(){t&&t()}),s.pzaChannel.getSharePics("zwdzjs",function(a){e.initSharePic(a)})},t.prototype.onLoginSuc=function(){var a=this.channelObj.getLaunchOptionsSync().query;if(a&&a.act&&a.sid){if("recruit_share"==a.act){if(i.pzaLocalData.data.hasInGame)return void(i.pzaLocalData.autoPopInvitateView=!0);2!=i.pzaLocalData.data.reportShareState&&(i.pzaLocalData.data.reportShareState=1,i.pzaLocalData.addDirty("reportShareState")),i.pzaLocalData.autoPopInvitateView=!0}this.sid=a.sid,this.shareFrom(),null!=i.pzaLocalData.data.playerNick&&null!=i.pzaLocalData.data.playerAvatar||this.getUserInfo(null)}},t.prototype.initSharePic=function(a){var t=this;null==a||a.length<=0||(this.sharePicsArr=[],a.forEach(function(a){var e={title:a.txt,url:a.picUrl,id:a.picId};t.sharePicsArr.push(e)}))},t.prototype.ksLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var t=window.ks,e=this;t.login({success:function(t){if(!t.code)return console.log("\u767b\u5f55\u5931\u8d25\uff01"+t.errMsg),void a(t.errMsg);var o=window.ks.getLaunchOptionsSync().query,n=e.getPara("appId");l.default.init(n,t.code,o,function(t){console.log("ks_ana\u521d\u59cb\u5316\u6210\u529f",t),e.channelUserId=t.result.open_id,a(null),console.log("ks-openId:",e.channelUserId)},function(){a("\u83b7\u53d6openid\u5931\u8d25"),console.log("\u521d\u59cb\u5316\u5931\u8d25")}),u.default.jpost("https://ga.gamejym.com/fcm/kuaishou/getOpenId",{appId:e.getPara("appId"),code:t.code},function(a,t){a||u.default.log("get serverTime",t)})},fail:function(){a(null)}})},t.prototype.cacheBanner=function(){var a=this;if(this.getPara("bannerAd")&&(!this.bannerAd||!this.cachedBannerSize)){u.default.log("cacheBanner\u5f00\u59cb,size:",this.cachedBannerSize,"ad:",this.bannerAd);var t=this.channelObj,e={adUnitId:this.getPara("bannerAd"),adIntervals:30,style:{left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1}};this.bannerAd=t.createBannerAd(e),this.bannerAd.onError(function(t){u.default.log("cachedBanner\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(t)),a.bannerAd=null,a.cachedBannerSize=null}),this.bannerAd.onResize(function(t){console.log("cachedBanner onResize===",t.height,t.width),a.cachedBannerSize=t}),this.bannerAd.show().then(function(){u.default.log("cachedBanner\u6210\u529f")}).catch(function(t){u.default.log("cachedBanner err:"+JSON.stringify(t)),a.bannerAd=null,a.cachedBannerSize=null})}},t.prototype.showBanner=function(a,t,e){var o=this,n=this.getPara("bannerAd");if(n){if(u.default.log("showBanner isShow",n,e),this.bannerAd&&this.cachedBannerSize){var i=t?t(this.cachedBannerSize):{top:this.getSysInfo().windowHeight-this.cachedBannerSize.height,left:(this.getSysInfo().windowWidth-this.cachedBannerSize.width)/2};return this.bannerAd.style.top=i.top,this.bannerAd.style.left=i.left,i.height&&(this.bannerAd.style.height=i.height),void u.default.log("cachedBanner style:",this.bannerAd.style.top,this.bannerAd.style.left,this.bannerAd.style.height)}var r=this.channelObj,p={adUnitId:n,adIntervals:30,style:{left:0,top:this.getSysInfo().windowHeight-1}};this.bannerAd=r.createBannerAd(p),this.bannerAd.onError(function(a){u.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a)),o.bannerAd=null,o.cachedBannerSize=null}),this.bannerAd.onResize(function(a){console.log("banner onResize===",a.height,a.width);var e=t?t(a):{top:o.getSysInfo().windowHeight-a.height,left:(o.getSysInfo().windowWidth-a.width)/2};o.bannerAd.style.top=e.top,o.bannerAd.style.left=e.left,e.height&&(o.bannerAd.style.height=e.height),u.default.log("bannerAd style:",o.bannerAd.style.top,o.bannerAd.style.left,o.bannerAd.style.height)}),this.bannerAd.show().then(function(){u.default.log("banner\u663e\u793a\u6210\u529f")}).catch(function(a){o.bannerAd=null,o.cachedBannerSize=null,u.default.log("showBanner err:"+JSON.stringify(a))})}},t.prototype.closeBanner=function(){if(this.bannerAd)if(this.cachedBannerSize){var a={left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1};this.bannerAd.style.left=a.left,this.bannerAd.style.top=a.top}else this.bannerAd.hide()},t.prototype.showBannerByTime=function(a){var t=this;if(void 0===a&&(a=!1),this.getPara("bannerAd")){var e=30;this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<30&&(e=30),this.showBanner(a,null,"battle"),this.bannerTimeId=setInterval(function(){t.showBanner(a,null,"battle")},1e3*e)}},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.canShare=function(){return!0},t.prototype.getShareObj=function(){var a=Math.floor(Math.random()*this.sharePicsArr.length);return this.sharePicsArr[a]},t.prototype.sendUserInfo=function(a){if(null!=a)if(i.pzaLocalData.data.playerNick=a.nickName,i.pzaLocalData.data.playerAvatar=a.avatarUrl,i.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};u.default.jpost("https://ga.gamejym.com/fcm/kuaishou/sendUserInfo",t,function(a,t){a?u.default.err(a):u.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(a,t,e){void 0===e&&(e=!0);var o=this.channelObj,n=this;o.authorize({scope:"scope.userInfo",success:function(){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u6210\u529f"),o.getUserInfo({success:function(t){console.log("userInfo",t.userInfo),n.sendUserInfo(t.userInfo),a&&a()}})},fail:function(a){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25: "+JSON.stringify(a))},complete:function(){console.log("\u6388\u6743\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5b8c\u6210")}})},t.prototype.shareAppMessage=function(a,t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.canShare()){var o=this.getShareObj(),n="";if(a&&a.act&&(n=a.act),n){var i=this;i.shareFailBack=null,i.shareSucBack=null,i.isShare=!1,"recruit_share"==a.act&&(i.isShare=!0,i.shareFailBack=e,i.shareSucBack=t);var r={appId:this.getPara("appId"),openId:this.channelUserId,act:n};u.default.jpost("https://ga.gamejym.com/fcm/kuaishou/shareTo",r,function(a,t){if(a)u.default.err(a);else{u.default.log("shareTo\u8fd4\u56de",t);var e={title:o.title,imageUrl:o.url,imageUrlId:o.id,query:null};t&&0===t.code&&(e.query="sid="+t.data.sid+"&act="+n,u.default.log("shareQuery",e.query)),i.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,query:e.query,success:function(){console.log("act share succ"),i.shareSucBack&&i.shareSucBack()},fail:function(){console.log("act share fail"),i.shareFailBack&&i.shareFailBack()}})}})}else{this.shareFailBack=e,this.shareSucBack=t,this.isShare=!0;var p=this;this.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,success:function(){console.log("11share succ"),p.shareSucBack&&p.shareSucBack()},fail:function(){console.log("22share fail"),p.shareFailBack&&p.shareFailBack()}})}}},t.prototype.shareByScreenShot=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null);var o=this,n=16*canvas.height/9;try{canvas.toTempFilePath({x:.3234375*n+(canvas.width-n)/2,y:0,width:.5078125*n,height:.85*canvas.height,destWidth:500,destHeight:400,success:function(n){o.channelObj.shareAppMessage({title:a,imageUrl:n.tempFilePath}),o.shareFailBack=e,o.shareSucBack=t,o.isShare=!0},fail:function(a){console.log("shareByScreenShot",a)}})}catch(i){console.log("shareByScreenShot",i)}},t.prototype.shareFrom=function(){if(this.sid&&this.channelUserId){u.default.log("shareFrom join");var a={sid:this.sid,openId:this.channelUserId,star:i.pzaLocalData.getAllStar()};u.default.jpost("https://ga.gamejym.com/fcm/kuaishou/shareFrom",a,function(a,t){a?u.default.err(a):u.default.log("shareFrom\u8fd4\u56de",t)})}else u.default.log("sid null channelUserId null")},t.prototype.getShareResult=function(a,t){if(!this.channelUserId)return t([]);var e={appId:this.getPara("appId"),openId:this.channelUserId,act:a};u.default.jpost("https://ga.gamejym.com/fcm/kuaishou/getShareResult",e,function(a,e){if(a)return u.default.err(a),void t([]);u.default.log("getShareResult\u8fd4\u56de",e),e&&0===e.code?t(e.data):t([])})},t.prototype.showVideo=function(a){var t=this;p.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:a.adsid},{name:"adname",value:a.posName});var e=this.getPara("vedioAd");if(e){this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;o.videoFns.onLoad=function(){u.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},o.videoFns.onError=function(e){u.default.err(e),a.failCall(),a.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:-1},{name:"adname",value:a.posName}),i.pzaLocalData.maxAdShareCount>0&&i.pzaLocalData.data.adShareCount<i.pzaLocalData.maxAdShareCount?t.shareAppMessage({title:null,act:null,adsid:a.adsid},function(){i.pzaLocalData.data.adShareCount++,i.pzaLocalData.addDirty("adShareCount"),a.sucCall&&a.sucCall()}):t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},o.videoFns.onClose=function(t){t&&t.isEnded?(a.sucCall(),o.channelUserId&&l.default.ad_complete(o.channelUserId),u.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+a.posName),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:0},{name:"adname",value:a.posName})):(a.failCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:1},{name:"adname",value:a.posName})),a.endCall()},o.rewardedVideoAd.onLoad(o.videoFns.onLoad),o.rewardedVideoAd.onError(o.videoFns.onError),o.rewardedVideoAd.onClose(o.videoFns.onClose),o.rewardedVideoAd.show().then(function(){o.channelUserId&&l.default.ad_exposure(o.channelUserId),u.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(){o.rewardedVideoAd.load().then(function(){return u.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){cc.game.pause()})}).catch(function(){cc.game.resume(),r.pzaSoundManager.resumeMusic()})})}},t.prototype.showInter=function(){var a=this.getPara("insertAd");if(a){var t=this.channelObj;u.default.log("showInter isShow",a),this.interstitialAd=t.createInterstitialAd({adUnitId:a}),this.interstitialAd.onError(function(a){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.interstitialAd.show().then(function(){u.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){u.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})}},t.prototype.showDesktop=function(){},t.prototype.jumpTo=function(a,t,e,o){u.default.log("jumpTo:"+a),this.channelObj.navigateToMiniProgram({appId:a,success:t,fail:e,complete:o})},t.prototype.registerOnshow=function(a){this.onShowCall=a},t.unionid=null,t}(c.pzaChannelWeb);e.pzaChannelKs=d,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","./ks_analytics":"ks_analytics","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelMy1:[function(a,t,e){"use strict";cc._RF.push(t,"8dc7dTee0dIpLDB9323Q9L5","pzaChannelMy1");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelMy1=void 0;var i=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channelId=2,t.channel="my1",t.paraMap=new Map([["appId","2021004144657858"],["vedioAd","ad_tiny_2021004144657858_202405162200097610"],["ctrlId","6645caaaa331ce3adb822a25"],["gid","6625cc6ea331ce3adb8228f6"]]),t.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u62d3\u7ef4\u4fe1\u606f\u7cfb\u7edf\u80a1\u4efd\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2024SA0026397\n",t}return n(t,a),t}(a("./pzaChannelMy").pzaChannelMy);e.pzaChannelMy1=i,cc._RF.pop()},{"./pzaChannelMy":"pzaChannelMy"}],pzaChannelMy:[function(a,t,e){"use strict";cc._RF.push(t,"1e6ecuLuNtLBbRAkcaU1AOA","pzaChannelMy");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelMy=e.reportAct=void 0;var i,r=a("../Common/pzaLocalData"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaStatisticsMgr"),s=a("./pzaChannel"),c=a("./pzaChannelWeb"),u=a("./pzakc");(function(a){a.reportLoadingCompleted="reportLoadingCompleted",a.reportAuthorized="reportAuthorized",a.reportGameCharacterCreated="reportGameCharacterCreated",a.reportGamePlay="reportGamePlay"})(i=e.reportAct||(e.reportAct={}));var d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channelId=2,t.channel="my",t.paraMap=new Map([["appId","2021004149683348"],["vedioAd","ad_tiny_2021004149683348_202406122200105736"],["ctrlId","6645caaaa331ce3adb822a25"],["gid","6625cc6ea331ce3adb8228f6"]]),t.channelObj=window.my,t.sid=null,t.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u62d3\u7ef4\u4fe1\u606f\u7cfb\u7edf\u80a1\u4efd\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2024SA0021151\n\u5ba1\u6279\u6587\u53f7\uff1a\u65b0\u51fa\u5ba1\u5b57[2013]1508\u53f7  ISBN\u53f7\uff1aISBN 978-7-89989-833-8",t.onShowCall=null,t}return n(t,a),t.prototype.hasPrivacy=function(){return!0},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this.channelObj;o.onShow(function(){cc.game.resume(),p.pzaSoundManager.resumeMusic(),e.isShare&&(e.isShareSuc()?(e.shareSucBack&&e.shareSucBack(),o.showToast({title:"\u5206\u4eab\u6210\u529f!"})):(o.showToast({title:"\u5206\u4eab\u5931\u8d25"}),e.shareFailBack&&e.shareFailBack()),e.isShare=!1),e.onShowCall&&e.onShowCall(),e.onShowCall=null}),o.onHide(function(){cc.game.pause(),e.isShare&&(e.shareTime=(new Date).getTime())});var n=this.getPara("ctrlId"),i=this;if(n){var l=u.default.getData("sid",null);l||(l=i.channelObj.getLaunchOptionsSync().scene,u.default.saveData("sid",l));var s={id:n,sid:l};i.jpost("https://ga.gametdd.com/adCtrl/agd/conf",s,function(a,t){a?u.default.err(a):""+t.code=="0"?(i.ctrl=t.data,u.default.log("\u8fd4\u56de",i.ctrl),r.pzaLocalData.maxAdShareCount=parseInt(i.ctrl.p2),r.pzaLocalData.maxShareRwdCount=parseInt(i.ctrl.p3)):u.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(t))})}this.myLogin(function(){t&&t()}),this.channelObj.onShareAppMessage=function(){return{title:"\u690d\u7269\u5927\u6218\u50f5\u5c38\uff01",desc:"\u7ecf\u5178\u56de\u5f52\uff01\u5927\u5bb6\u719f\u6089\u7684\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b\u56de\u6765\u4e86\uff01\u5e26\u4e0a\u4f60\u7684\u690d\u7269\uff0c\u75db\u6253\u5165\u4fb5\u7684\u50f5\u5c38\u4eec\uff01"}}},t.prototype.onLoginSuc=function(){var a=this.channelObj.getLaunchOptionsSync().query;if(console.log("\u767b\u5f55query: ",a),a&&a.act&&a.sid){if("recruit_share"==a.act){if(r.pzaLocalData.data.hasInGame)return void(r.pzaLocalData.autoPopInvitateView=!0);2!=r.pzaLocalData.data.reportShareState&&(r.pzaLocalData.data.reportShareState=1,r.pzaLocalData.addDirty("reportShareState")),r.pzaLocalData.autoPopInvitateView=!0}this.sid=a.sid,this.shareFrom(),null!=r.pzaLocalData.data.playerNick&&null!=r.pzaLocalData.data.playerAvatar||this.getUserInfo(null)}},t.prototype.sendUserInfoToWeb=function(){null!=r.pzaLocalData.data.playerNick&&null!=r.pzaLocalData.data.playerAvatar||this.getUserInfo(null)},t.prototype.actSubmit=function(){var a=this;if(a.channelUserId){console.log("query====>",a.channelObj.getLaunchOptionsSync().query);var t=a.channelObj.getLaunchOptionsSync().query?a.channelObj.getLaunchOptionsSync().query.channel:"other";a.jpost("https://ga.gamejym.com/fcm/alipay/gameActionSubmit",{appId:a.getPara("appId"),act:"zwdzjs_game_pass_every_1",channel:t,openId:a.channelUserId},function(a,t){a?u.default.err(a):u.default.log("\u652f\u4ed8\u5b9dactSubmit",t)})}},t.SOPReport=function(a){if("my"==s.pzaChannel.instance().channel){var t=window.my;if(t&&t.gameBiz&&t.gameBiz[a])if(a===i.reportGameCharacterCreated){var e=!!cc.sys.localStorage.getItem("isSOPcreated");t.gameBiz.reportGameCharacterCreated(e),e||cc.sys.localStorage.setItem("isSOPcreated",1)}else a===i.reportAuthorized?(e=!!cc.sys.localStorage.getItem("isSOPAuthed"))||(cc.sys.localStorage.setItem("isSOPAuthed",1),t.gameBiz.reportAuthorized()):t.gameBiz[a]()}},t.prototype.myLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var e=window.my,o=this;e.getAuthCode({scopes:"auth_base",success:function(e){if(console.log("getAuthCode\u6210\u529f",e),!e.authCode)return console.log("\u767b\u5f55\u5931\u8d25\uff01"+e),void a(e);o.jpost("https://ga.gamejym.com/fcm/alipay/getOpenId",{appId:o.getPara("appId"),code:e.authCode},function(e,n){return e?(u.default.err(e),void a(e)):(u.default.log("\u83b7\u53d6openId my",n),n.openid?(o.channelUserId=n.openid||"",t.unionid=n.unionid||"",o.sendUserInfoToWeb(),void a(null)):(u.default.err("\u83b7\u53d6openId\u5931\u8d25",n),void a("\u83b7\u53d6openId\u5931\u8d25")))}),t.SOPReport(i.reportAuthorized)},fail:function(t){a(null),console.log("my.getAuthCode \u8c03\u7528\u5931\u8d25",t)}})},t.prototype.canShare=function(){return!0},t.prototype.shareFrom=function(){if(u.default.log("shareFrom: ",this.sid,this.channelUserId),this.sid&&this.channelUserId){var a={sid:this.sid,openId:this.channelUserId,star:r.pzaLocalData.getAllStar()};this.jpost("https://ga.gamejym.com/fcm/alipay/shareFrom",a,function(a,t){a?u.default.err(a):u.default.log("shareFrom\u8fd4\u56de",t)})}},t.prototype.sendUserInfo=function(a){if(null!=a)if(r.pzaLocalData.data.playerNick=a.nickName,r.pzaLocalData.data.playerAvatar=a.avatarUrl,r.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};this.jpost("https://ga.gamejym.com/fcm/alipay/sendUserInfo",t,function(a,t){a?u.default.err(a):u.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(a){var t=this.channelObj,e=this;t.getAuthCode({scopes:"auth_user",success:function(){t.getAuthUserInfo({success:function(t){e.sendUserInfo({nickName:t.nickName,avatarUrl:t.avatar}),a&&a()},fail:function(a){console.log("getOpenUserInfo fail",a)}})},fail:function(a){console.log("auth_user fail",a)}})},t.prototype.shareAppMessage=function(a,t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.canShare()){var o="";if(a&&a.act&&(o=a.act),!o)return this.channelObj.onShareAppMessage=function(){return{title:"\u690d\u7269\u5927\u6218\u50f5\u5c38\uff01",desc:"\u7ecf\u5178\u56de\u5f52\uff01\u5927\u5bb6\u719f\u6089\u7684\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b\u56de\u6765\u4e86\uff01\u5e26\u4e0a\u4f60\u7684\u690d\u7269\uff0c\u75db\u6253\u5165\u4fb5\u7684\u50f5\u5c38\u4eec\uff01"}},this.shareFailBack=e,this.shareSucBack=t,this.isShare=!0,void this.channelObj.showSharePanel({});var n=this;n.shareFailBack=null,n.shareSucBack=null,n.isShare=!1,"recruit_share"==a.act&&(n.isShare=!0,n.shareFailBack=e,n.shareSucBack=t);var i={appId:this.getPara("appId"),openId:this.channelUserId,act:o};this.jpost("https://ga.gamejym.com/fcm/alipay/shareTo",i,function(a,t){if(a)u.default.err(a);else{u.default.log("shareTo\u8fd4\u56de",t);var e=null;t&&0===t.code&&(e="sid="+t.data.sid+"&act="+o,u.default.log("shareQuery",e)),n.channelObj.onShareAppMessage=function(){return{title:"\u690d\u7269\u5927\u6218\u50f5\u5c38\uff01",desc:"\u7ecf\u5178\u56de\u5f52\uff01\u5927\u5bb6\u719f\u6089\u7684\u300a\u690d\u7269\u5927\u6218\u50f5\u5c38\u300b\u56de\u6765\u4e86\uff01\u5e26\u4e0a\u4f60\u7684\u690d\u7269\uff0c\u75db\u6253\u5165\u4fb5\u7684\u50f5\u5c38\u4eec\uff01",query:e,success:function(a){console.log(a)},fail:function(a){console.log(a)},complete:function(a){console.log(a)}}},n.channelObj.showSharePanel({})}})}},t.prototype.getShareResult=function(a,t){if(u.default.log("getshareResult start"),!this.channelUserId)return t([]);console.log("getshareResult join");var e={appId:this.getPara("appId"),openId:this.channelUserId,act:a};this.jpost("https://ga.gamejym.com/fcm/alipay/getShareResult",e,function(a,e){if(a)return u.default.err(a),void t([]);u.default.log("getShareResult\u8fd4\u56de",e),e&&0===e.code?t(e.data):t([])})},t.prototype.copyToClip=function(a,t){this.channelObj.setClipboardData({text:a,success:function(){t()},fail:function(){t("\u590d\u5236\u5931\u8d25")}})},t.prototype.showVideo=function(a){var t=this;l.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:a.adsid},{name:"adname",value:a.posName});var e=this.getPara("vedioAd");if(e){this.rewardedVideoAd=this.channelObj.createRewardedAd({adUnitId:e});var o=this;o.videoFns.onLoad=function(){u.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},o.videoFns.onError=function(e){u.default.err(e),cc.game.resume(),p.pzaSoundManager.resumeMusic(),a.failCall(),a.endCall(),l.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:-1},{name:"adname",value:a.posName}),t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},o.videoFns.onClose=function(t){cc.game.resume(),p.pzaSoundManager.resumeMusic(),t&&t.isEnded?(a.sucCall(),u.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+a.posName),l.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:0},{name:"adname",value:a.posName})):(a.failCall(),l.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:1},{name:"adname",value:a.posName})),a.endCall()},o.rewardedVideoAd.onLoad(o.videoFns.onLoad),o.rewardedVideoAd.onError(o.videoFns.onError),o.rewardedVideoAd.onClose(o.videoFns.onClose),cc.game.pause(),o.rewardedVideoAd.show().then(function(){u.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(){o.rewardedVideoAd.load().then(function(){return u.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){cc.game.pause()})}).catch(function(){cc.game.resume(),p.pzaSoundManager.resumeMusic()})})}},t.prototype.registerOnshow=function(a){this.onShowCall=a},t.prototype.jpost=function(a,t,e){e||(e=function(a){if(a)return u.default.err(a)}),this.channelObj.request({url:a,data:t,method:"POST",headers:{"content-type":"application/json",charset:"utf-8"},success:function(a){e&&e(null,a&&a.data)},fail:function(a){return console.error(a),e(null,{code:""+a.error})}})},t.unionid=null,t}(c.pzaChannelWeb);e.pzaChannelMy=d,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelNoAD:[function(a,t,e){"use strict";cc._RF.push(t,"751940+7/9O/ZFp9R4PTCQt","pzaChannelNoAD");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelNoAD=void 0;var i=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channelId=0,t.channel="noAD",t.isReadRemoteUserData=!1,t}return n(t,a),t.prototype.init=function(t){a.prototype.init.call(this,t),t&&t()},t}(a("./pzaChannelWeb").pzaChannelWeb);e.pzaChannelNoAD=i,cc._RF.pop()},{"./pzaChannelWeb":"pzaChannelWeb"}],pzaChannelOppo:[function(a,t,e){"use strict";cc._RF.push(t,"0c79d6z+f9ChZUETpE5tBRV","pzaChannelOppo");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelOppo=void 0;var i=a("./pzaChannelWeb"),r=a("./pzakc"),p=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="oppo",t.paraMap=new Map([["customBannerAd","837770"],["customInsertAd","837776"],["videoId","837781"],["ctrlId","63f71c07e6d3ab07ce9c459e"]]),t.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u6df1\u5733\u7fbd\u6e38\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2023SRE001822",t.channelObj=window.qg,t.bannerTimeId=-1,t.customAdMap={},t}return n(t,a),t.prototype.hasPrivacy=function(){return!!r.default.getData("isAgree",0)},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.exit=function(){this.channelObj.exitApplication({data:0})},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this.getPara("ctrlId");if(o){var n={id:o};r.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",n,function(a,t){a?r.default.err(a):""+t.code=="0"?(e.ctrl=t.data,r.default.log("\u8fd4\u56de",e.ctrl)):r.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(t))})}},t.prototype.showVideo=function(a){var t=this,e=this.getPara("videoId");if(e){r.default.log("showVideo",e,this.rewardedVideoAd),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;this.videoFns.onLoad=function(){r.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){r.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(a){r.default.err(a)})},this.videoFns.onError=function(e){r.default.err(e),a.failCall(),t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(t){t&&t.isEnded&&(a.sucCall(),r.default.eventReport("showVideo\u5b8c\u6210-"+a.posName)),a.endCall()},this.rewardedVideoAd.onLoad(this.videoFns.onLoad),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onClose(this.videoFns.onClose),this.rewardedVideoAd.load()}},t.prototype.showBanner=function(){this.showCustomAd(!0)},t.prototype.closeBanner=function(){this.closeCustomAd(!0)},t.prototype.showBannerByTime=function(a){var t=this;void 0===a&&(a=!1);var e=this.getCtrl("p1");this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<40&&(e=40),this.showBanner(a),this.bannerTimeId=setInterval(function(){t.showBanner(a)},1e3*e)},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.showCustomAd=function(a,t,e){var o=this,n=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");if(n){var i=a?this.getSysInfo().windowHeight-300:this.getSysInfo().windowHeight/2-260,p={adUnitId:n,style:{top:i}};if(e&&(p.style=e),r.default.log("showCustomAd",n,a,i),this.customAdMap[n]||(r.default.log("\u539f\u751f\u6a21\u677f\u6b63\u5728\u663e\u793a\u4e2d",n),this.customAdMap[n]=this.channelObj.createCustomAd(p),this.customAdMap[n].offHide(),this.customAdMap[n].onHide(function(){o.customAdMap[n].destroy(),o.customAdMap[n]=null}),this.customAdMap[n].offError(),this.customAdMap[n].onError(function(a){r.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))})),a)this.customAdMap[n].show().then(function(){r.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){r.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))});else{var l=this.getCtrl("p2");setTimeout(function(){o.customAdMap[n].show().then(function(){r.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){r.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})},1e3*l)}}},t.prototype.closeCustomAd=function(a){void 0===a&&(a=!1);var t=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");t&&this.customAdMap[t]&&this.customAdMap[t].hide()},t}(i.pzaChannelWeb);e.pzaChannelOppo=p,cc._RF.pop()},{"./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelTT:[function(a,t,e){"use strict";cc._RF.push(t,"c18b6INM5FCMLS581mPF2C7","pzaChannelTT");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelTT=void 0;var i=a("../Common/pzaLocalData"),r=a("../Common/pzaSoundManager"),p=a("../Common/pzaStatisticsMgr"),l=a("../Common/pzaTipManager"),s=a("./pzaChannel"),c=a("./pzaChannelWeb"),u=a("./pzakc"),d=a("./pzaKDefine"),h=function(){var a=!1,t=!1,e="",o="";function n(t,o,n){void 0===o&&(o=function(){}),void 0===n&&(n=function(){}),0!=a?i(t,{openid:e},function(a){0==a.code?o(a):n(a)},"https://dyzt.jinkezhexin.top:8001"):console.error("sdk\u672a\u521d\u59cb\u5316")}function i(a,e,o,n){var i=new XMLHttpRequest,r="";if(e)for(var p in r="?",e)"?"!=r&&(r+="&"),r+=p+"="+window.encodeURIComponent(e[p]);var l=n+"/"+a+r;t&&console.log("RequestUrl: "+l),i.open("GET",l,!0),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var a=JSON.parse(i.responseText);null!==o&&o(a)}else console.error("httpGet status --\x3e",i.status)},i.send()}return{init:function(t,n,r,p,l){void 0===t&&(t=""),void 0===n&&(n=""),void 0===r&&(r={}),void 0===p&&(p=function(){}),void 0===l&&(l=function(){}),""!=t?""!=n?i("getZjOpenIdV2",{d:JSON.stringify({code:t,game:n,query:r})},function(t){0==t.code?(a=!0,e=t.openid,o=t.session_key,p(t)):l(t)},"https://dyzt.jinkezhexin.top:8001"):console.error("\u53c2\u6570game\u9519\u8bef"):console.error("\u53c2\u6570code\u9519\u8bef")},register:function(t,o){void 0===t&&(t=function(){}),void 0===o&&(o=function(){}),0!=a?i("zjRegister",{openid:e},function(a){0==a.code?t(a):o(a)},"https://dyzt.jinkezhexin.top:8001"):console.error("sdk\u672a\u521d\u59cb\u5316")},RewardedVideoAdShow:function(a,t){void 0===a&&(a=function(){}),void 0===t&&(t=function(){}),n("ading",a,t)},RewardedVideoAdClose:function(a,t){void 0===a&&(a=function(){}),void 0===t&&(t=function(){}),n("adkanwan",a,t)},analytics:function(t,o,n){void 0===t&&(t=""),void 0===o&&(o=function(){}),void 0===n&&(n=function(){}),0!=a?""!=t?i("adZhiTou",{openid:e,eventType:t},function(a){0==a.code?o(a):n(a)},"https://dyzt.jinkezhexin.top:8001"):console.error("\u53c2\u6570eventType\u9519\u8bef"):console.error("sdk\u672a\u521d\u59cb\u5316")},analytics_properties:function(t,o,n,r){void 0===t&&(t=""),void 0===o&&(o=null),void 0===n&&(n=function(){}),void 0===r&&(r=function(){}),0!=a?""!=t?null!=o?i("adZhiTou",{openid:e,eventType:t,properties:JSON.stringify(o)},function(a){0==a.code?n(a):r(a)},"https://dyzt.jinkezhexin.top:8001"):console.error("\u53c2\u6570properties\u9519\u8bef"):console.error("\u53c2\u6570eventType\u9519\u8bef"):console.error("sdk\u672a\u521d\u59cb\u5316")},addGold:function(t,n,r,p,l,s){void 0===t&&(t=0),void 0===n&&(n=""),void 0===r&&(r=0),void 0===p&&(p=""),void 0===l&&(l=function(){}),void 0===s&&(s=function(){}),0!=a?t<=0?console.error("amount\u5fc5\u987b\u5927\u4e8e0"):""!=n?0!=r?""!=p?""!=o?i("lingquJinBi",{openid:e,amount:t,description:n,task_id:r,task_key:p,sessionKey:o},function(a){0==a.errcode?l(a):s(a)},"https://dyzt.jinkezhexin.top:8001"):console.error("\u53c2\u6570sessionKey\u9519\u8bef"):console.error("\u53c2\u6570task_key\u9519\u8bef"):console.error("\u53c2\u6570task_id\u9519\u8bef"):console.error("\u53c2\u6570description\u4e0d\u80fd\u4e3a\u7a7a\u5b57\u7b26\u4e32"):console.error("sdk\u672a\u521d\u59cb\u5316")},queryGold:function(t,o){void 0===t&&(t=function(){}),void 0===o&&(o=function(){}),0!=a?i("searchGold",{openid:e},function(a){0==a.errcode?t(a):o(a)},"https://dyzt.jinkezhexin.top:8001"):console.error("sdk\u672a\u521d\u59cb\u5316")},maxGold:function(t,o){void 0===t&&(t=function(){}),void 0===o&&(o=function(){}),0!=a?i("getJinBiShouYi",{openid:e},function(a){0==a.code?t(a):o(a)},"https://dyzt.jinkezhexin.top:8001"):console.error("sdk\u672a\u521d\u59cb\u5316")},debug:function(a){t=a},gametdd:function(a,t,e,o){void 0===a&&(a=""),void 0===t&&(t=""),void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),""!=a?i("gametdd",{id:a,sid:t},function(a){0==a.code?e(a.data):o(a)},"https://dyzt.jinkezhexin.top:8001"):console.error("\u53c2\u6570id\u9519\u8bef")}}}(),m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="tt",t.channelId=1,t.paraMap=new Map([["appId","tt4033368edf05cd3c02"],["vedioAd","45oe7a52iep1h468gi"],["ctrlId","663db8e6a331ce3adb8229fb"]]),t.sharePicsArr=[{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",url:"https://mmocgame.qpic.cn/wechatgame/a06ia0rK6eLAFOr97s9y4MXbfDz3hjYEjhAT6lWwv10xALzjGl9thAIqw3EYNEwhN/0",id:"Xf4UCePgQ6Owe0gO7nnOkw=="},{title:"\u5927\u54e5\uff0c\u6765\u548c\u59b9\u59b9\u4e00\u8d77\u73a9\u597d\u5417\uff1f",url:"https://mmocgame.qpic.cn/wechatgame/I1v75NcAhVDGbaKAWabMVB4HY5iaW8HfrWOqvibxcq1ic32xLibRswZuVj6txBSykbHl/0",id:"7Ic8CnJeSN+yLEi8xpRO5w=="}],t.shareTitle="\u690d\u7269\u5927\u6218\u50f5\u5c38",t.shareImgId="3grhfxi84lo43cmn9m",t.channelObj=window.tt,t.sid=null,t.ruanzhu="\u8457\u4f5c\u6743\u4eba\uff1a\u62d3\u7ef4\u4fe1\u606f\u7cfb\u7edf\u80a1\u4efd\u6709\u9650\u516c\u53f8 \u767b\u8bb0\u53f7\uff1a2024SA0021151",t.onShowCall=null,t.authorizationButton=null,t.sdkData=null,t.shareIndex=0,t.startRecorderTime=0,t.endRecorderTime=0,t.video_path=null,t.videoTopics=["\u690d\u7269\u5927\u6218\u50f5\u5c38"],t.title="\u690d\u7269\u5927\u6218\u50f5\u5c38",t.recordeFlag=0,t}return n(t,a),t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.hasPrivacy=function(){return!0},t.prototype.exit=function(){this.channelObj.exitMiniProgram({isFullExit:!0})},t.prototype.init=function(t){var e=this;console.log("byte init"),a.prototype.init.call(this,t);var o=this.channelObj;o.onShow(function(){cc.game.resume(),r.pzaSoundManager.resumeMusic(),e.onShowCall&&e.onShowCall(),e.onShowCall=null}),o.onHide(function(){cc.game.pause(),e.isShare&&(e.shareTime=(new Date).getTime())});var n={id:this.getPara("ctrlId")};u.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",n,function(a,t){a?u.default.err(a):""+t.code=="0"?(e.ctrl=t.data,u.default.log("\u5b57\u8282\u8fd4\u56de",e.ctrl)):u.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(t))}),this.channelObj.showShareMenu({}),this.ttLogin(function(){t&&t()});var i=u.default.getData("sidebar",null),p={today:"",canGet:""};i&&(p=i),o.checkScene?o.checkScene({scene:"sidebar",success:function(a){console.log("check scene success: ",a.isExist),p.canGet="0",u.default.saveData("sidebar",p)},fail:function(a){console.log("check scene fail:",a),p.canGet="-1",u.default.saveData("sidebar",p)}}):console.log("\u6ca1\u6709checkScene");var l=u.default.getData("shareData",{today:"",shareCount:"0"}),c=new Date,d=c.getUTCFullYear()+"-"+c.getUTCMonth()+"-"+c.getUTCDay();l.today!=d&&(l.today=d,l.shareCount=0,u.default.saveData("shareData",l)),s.pzaChannel.getSharePics("zwdzjs",function(a){e.initSharePic(a)})},t.prototype.initSharePic=function(a){var t=this;null==a||a.length<=0||(this.sharePicsArr=[],a.forEach(function(a){var e={title:a.txt,url:a.picUrl,id:a.picId};t.sharePicsArr.push(e)}))},t.prototype.onLoginSuc=function(){var a=this.channelObj.getLaunchOptionsSync().query;if(a&&a.act&&a.sid){if("recruit_share"==a.act){if(i.pzaLocalData.data.hasInGame)return void(i.pzaLocalData.autoPopInvitateView=!0);2!=i.pzaLocalData.data.reportShareState&&(i.pzaLocalData.data.reportShareState=1,i.pzaLocalData.addDirty("reportShareState")),i.pzaLocalData.autoPopInvitateView=!0}this.sid=a.sid,this.shareFrom(),null!=i.pzaLocalData.data.playerNick&&null!=i.pzaLocalData.data.playerAvatar||this.getUserInfo(null)}},t.prototype.getUserInfoToWeb=function(){null!=i.pzaLocalData.data.playerNick&&null!=i.pzaLocalData.data.playerAvatar||this.getUserInfo(null)},t.prototype.shareFrom=function(){if(this.sid&&this.channelUserId){var a={sid:this.sid,openId:this.channelUserId,star:i.pzaLocalData.getAllStar()};u.default.jpost("https://ga.gamejym.com/fcm/zijie/shareFrom",a,function(a,t){a?u.default.err(a):u.default.log("shareFrom\u8fd4\u56de",t)})}},t.prototype.getShareResult=function(a,t){if(!this.channelUserId)return t([]);var e={appId:this.getPara("appId"),openId:this.channelUserId,act:a};u.default.jpost("https://ga.gamejym.com/fcm/zijie/getShareResult",e,function(a,e){if(a)return u.default.err(a),void t([]);u.default.log("getShareResult\u8fd4\u56de",e),e&&0===e.code?t(e.data):t([])})},t.prototype.wxCheckPrivacySetting=function(a,t){var e=window.tt;"function"==typeof e.getPrivacySetting?e.getPrivacySetting({success:function(t){console.log(t),a&&a(t&&t.needAuthorization)},fail:function(){t&&t()},complete:function(){}}):t&&t()},t.prototype.wxPrivacyAuthorize=function(a,t){var e=window.tt;"function"==typeof e.requirePrivacyAuthorize?e.requirePrivacyAuthorize({success:function(){console.log("\u7528\u6237\u540c\u610f\u9690\u79c1\u6388\u6743"),a&&a()},fail:function(){console.log("\u7528\u6237\u62d2\u7edd\u9690\u79c1\u6388\u6743"),t&&t()},complete:function(){}}):t&&t()},t.prototype.ttLogin=function(a){void 0===a&&(a=function(a){a&&console.error(a)});var e=window.tt,o=this;e.login({force:!0,success:function(n){console.log("login \u8c03\u7528\u6210\u529f",n.code);var i=e.getLaunchOptionsSync(),r=o.shareTitle,p=n.code,l=i.query;h.init(p,r,l,function(e){if(console.log("tt_analytics\u521d\u59cb\u5316\u6210\u529f",e),o.sdkData=e,!e.openid)return console.log("\u83b7\u53d6openid\u5931\u8d25"),void a("\u83b7\u53d6openid\u5931\u8d25");setTimeout(function(){cc.sys.localStorage.getItem("ttstate")||(cc.sys.localStorage.setItem("ttstate",1),o.apiReport(t.API_EventType.active_register),console.log("ttstate 1"))},2e3),o.channelUserId=e.openid||"",o.getUserInfoToWeb(),a(null)},function(a){console.log("tt_analytics\u521d\u59cb\u5316\u5931\u8d25"+a.msg)})},fail:function(t){a(t.errMsg),console.log("login\u8c03\u7528\u5931\u8d25")}}),e.onShareAppMessage(function(){var a=o.getShareObj();return null!=a?{title:a.title,imageUrl:a.url,imageUrlId:a.id,success:function(){console.log("\u5206\u4eab\u6210\u529f")},fail:function(a){console.log("\u5206\u4eab\u5931\u8d25",a)}}:{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",imageUrl:"https://mmocgame.qpic.cn/wechatgame/a06ia0rK6eLAFOr97s9y4MXbfDz3hjYEjhAT6lWwv10xALzjGl9thAIqw3EYNEwhN/0",imageUrlId:"Xf4UCePgQ6Owe0gO7nnOkw==",success:function(){console.log("\u5206\u4eab\u6210\u529f")},fail:function(a){console.log("\u5206\u4eab\u5931\u8d25",a)}}})},t.prototype.getShareObj=function(){var a=Math.floor(Math.random()*this.sharePicsArr.length);return this.sharePicsArr[a]},t.prototype.registerOnshow=function(a){this.onShowCall=a},t.prototype.sendUserInfo=function(a){if(null!=a)if(i.pzaLocalData.data.playerNick=a.nickName,i.pzaLocalData.data.playerAvatar=a.avatarUrl,i.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};u.default.jpost("https://ga.gamejym.com/fcm/zijie/sendUserInfo",t,function(a,t){a?u.default.err(a):u.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(a,t,e){void 0===e&&(e=!0);var o=this.channelObj,n=this;o.getUserInfo({success:function(a){console.log("getUserInfo\u8c03\u7528\u6210\u529f: ",a.userInfo),n.sendUserInfo({nickName:a.userInfo.nickName,avatarUrl:a.userInfo.avatarUrl})},fail:function(a){console.log("getUserInfo\u8c03\u7528\u5931\u8d25: ",a.errMsg)}})},t.prototype.destroyAuthorizationButton=function(){try{if(!this.authorizationButton)return;this.authorizationButton.destroy(),this.authorizationButton=null}catch(a){this.authorizationButton=null,console.error(a)}},t.prototype.canShare=function(){return!0},t.prototype.apiReport=function(a,e){if(void 0===e&&(e=null),this.sdkData)return console.log("\u3010apiReport\u3011\u7c7b\u578b:"+a),a===t.API_EventType.active_register?(console.log("\u51c6\u5907\u4e0a\u62a5\u6ce8\u518c",this.sdkData.ecpm,this.sdkData.adCount),void h.register(function(a){console.log("\u6ce8\u518c\u6210\u529f",a)},function(a){console.log("\u6ce8\u518c\u5931\u8d25",a)})):void 0;console.log("\u3010apiReport\u3011API_clickid\u4e0d\u5b58\u5728\u6216SDK\u672a\u521d\u59cb\u5316\u5b8c\u6210!")},t.prototype.showBanner=function(a,t){var e=this,o=this.getPara("bannerAd");if(o){u.default.log("showBanner isShow",o);var n=this.channelObj,i={adUnitId:o};this.bannerAd=n.createBannerAd(i),this.bannerAd.onResize(function(a){console.log("banner onResize===",a.height,a.width);var o=t?t(a):{top:e.getSysInfo().windowHeight-a.height,left:(e.getSysInfo().windowWidth-a.width)/2};e.bannerAd.style.top=o.top,e.bannerAd.style.left=o.left}),this.bannerAd.onLoad(function(){e.bannerAd.show().then(function(){u.default.log("banner\u52a0\u8f7d\u6210\u529f")}).catch(function(a){e.bannerAd=null,u.default.log("showBanner err:"+JSON.stringify(a))})})}},t.prototype.closeBanner=function(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)},t.prototype.showBannerByTime=function(a){void 0===a&&(a=!1)},t.prototype.closeBannerByTime=function(){this.closeBanner()},t.prototype.copyToClip=function(a,t){this.channelObj.setClipboardData({data:a,success:function(){t(null)},fail:function(a){t(a)}})},t.prototype.showVideo=function(a){var t=this;p.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:a.adsid},{name:"adname",value:a.posName});var e=this.getPara("vedioAd");if(e){this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;o.videoFns.onLoad=function(){u.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},o.videoFns.onError=function(e){u.default.err("onError",e),cc.game.resume(),r.pzaSoundManager.resumeMusic(),a.failCall(),a.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:-1},{name:"adname",value:a.posName}),t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},o.videoFns.onClose=function(t){cc.game.resume(),r.pzaSoundManager.resumeMusic(),t&&t.isEnded?(a.sucCall(),a.endCall(),o.sdkData&&1==cc.sys.localStorage.getItem("ttstate")&&(cc.sys.localStorage.setItem("ttstate",2),h.RewardedVideoAdClose(function(a){console.log("\u5e7f\u544a\u64ad\u5b8c\u4e0a\u62a5\u6210\u529f",a)},function(a){console.log("\u5e7f\u544a\u64ad\u5b8c\u4e0a\u62a5\u5931\u8d25",a)}),console.log("ttstate 2")),u.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+a.posName),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:0},{name:"adname",value:a.posName})):(a.failCall(),a.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:1},{name:"adname",value:a.posName}))},o.rewardedVideoAd.onLoad(o.videoFns.onLoad),o.rewardedVideoAd.onError(o.videoFns.onError),o.rewardedVideoAd.onClose(o.videoFns.onClose),o.rewardedVideoAd.show().then(function(){u.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a"),o.sdkData&&h.RewardedVideoAdShow(function(a){console.log("\u5e7f\u544a\u66dd\u5149\u4e0a\u62a5\u6210\u529f",a)},function(a){console.log("\u5e7f\u544a\u66dd\u5149\u4e0a\u62a5\u5931\u8d25",a)})}).catch(function(){o.rewardedVideoAd.load().then(function(){return u.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){cc.game.pause()})}).catch(function(){cc.game.resume(),r.pzaSoundManager.resumeMusic()})})}},t.prototype.showInter=function(a){var t=this.getPara("insertAd");if(t){var e=this.channelObj;this.ctrl&&this.ctrl.p1&&parseInt(this.ctrl.p1)||a?(u.default.log("showInter isShow",t),this.interstitialAd=e.createInterstitialAd({adUnitId:t}),this.interstitialAd.show().then(function(){u.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){u.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})):u.default.log("\u63d2\u5c4f\u4e0d\u5c55\u793a")}},t.prototype.closeInter=function(){this.interstitialAd&&this.interstitialAd.close&&this.interstitialAd.close()},t.prototype.showDesktop=function(){},t.prototype.checkShortcut=function(a){window.tt.checkShortcut({sucess:function(t){1==t.status?a.sucCall():a.failCall()},fail:function(){a.failCall()}})},t.prototype.addShortcut=function(a){this.channelObj.addShortcut({success:function(){u.default.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f"),a.sucCall()},fail:function(t){u.default.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25:"+t.errMsg),a.failCall()}})},t.prototype.recorderStart=function(){u.default.log("\u5f55\u5c4f====start"),t.recordTime=0,t.rState="recording";var a=this;try{a.channelObj.getGameRecorderManager().onStart(function(){a.startRecorderTime=Date.now(),u.default.log("\u5f55\u5c4f\u5f00\u59cb",a.startRecorderTime)}),a.channelObj.getGameRecorderManager().start({duration:300}),u.default.sendMsg(d.Msg.recorderStart),a.recordeFlag=setInterval(function(){"recording"===t.rState&&(t.recordTime++,t.recordTime>300&&(a.recorderStop(),u.default.sendMsg(d.Msg.recorderStop)))},1e3)}catch(e){}},t.prototype.recorderStop=function(){var a=this;if(a.endRecorderTime=Date.now(),t.rState="recordEnd",clearInterval(a.recordeFlag),u.default.log("\u5f55\u5c4fStop",a.endRecorderTime),u.default.log("\u505c\u6b62\u5f55\u5c4f"),a.channelObj.getGameRecorderManager().stop(),u.default.sendMsg(d.Msg.recorderStop),a.endRecorderTime-a.startRecorderTime<3e3)return l.pzaTipManager.showHomeTip("\u5f55\u5c4f\u5931\u8d25:\u65f6\u957f\u5c11\u4e8e3\u79d2",null,2),a.video_path=null,a.endRecorderTime=0,a.startRecorderTime=0,t.rState="idle",t.recordTime=0,u.default.sendMsg(d.Msg.recorderFail),void a.channelObj.getGameRecorderManager().onStop(function(){});a.channelObj.getGameRecorderManager().onStop(function(t){a.video_path=t.videoPath,a.endRecorderTime=Date.now()})},t.prototype.getRecordTime=function(){return this.endRecorderTime-this.startRecorderTime},t.prototype.shareAppMessage=function(a,t,e){if(void 0===t&&(t=null),void 0===e&&(e=null),this.canShare()){var o=this.getShareObj(),n="";if(a&&a.act&&(n=a.act),n){var i=this;i.shareFailBack=null,i.shareSucBack=null,i.isShare=!1,"recruit_share"==a.act&&(i.isShare=!0,i.shareFailBack=e,i.shareSucBack=t);var r={appId:this.getPara("appId"),openId:this.channelUserId,act:n};u.default.jpost("https://ga.gamejym.com/fcm/zijie/shareTo",r,function(a,t){if(a)u.default.err(a);else{u.default.log("shareTo\u8fd4\u56de",t);var e={title:o.title,imageUrl:o.url,imageUrlId:o.id,query:null};t&&0===t.code&&(e.query="sid="+t.data.sid+"&act="+n,u.default.log("shareQuery",e.query)),i.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,query:e.query,success:function(){console.log("act share succ"),i.shareSucBack&&i.shareSucBack()},fail:function(){console.log("act share fail"),i.shareFailBack&&i.shareFailBack()}})}})}else{this.shareFailBack=e,this.shareSucBack=t,this.isShare=!0;var p=this;this.channelObj.shareAppMessage({title:o.title,imageUrl:o.url,imageUrlId:o.id,success:function(){console.log("11share succ"),p.shareSucBack&&p.shareSucBack()},fail:function(){console.log("22share fail"),p.shareFailBack&&p.shareFailBack()}})}}},t.prototype.shareVideo=function(a){if(void 0===a&&(a=null),!this.video_path)return u.default.err("\u65e0\u5f55\u5236\u89c6\u9891"),this.video_path=null,this.endRecorderTime=0,this.startRecorderTime=0,t.rState="idle",t.recordTime=0,u.default.sendMsg(d.Msg.recorderFail),void this.channelObj.showToast({title:"\u89c6\u9891\u672a\u5f55\u5236\u8db3\u591f\u65f6\u95f4"});var e=this;this.channelObj.shareAppMessage({channel:"video",title:e.title,imageUrl:"",query:"",extra:{videoPath:e.video_path,videoTopics:e.videoTopics},success:function(){a&&a(),e.channelObj.showToast({title:"\u5206\u4eab\u6210\u529f"}),e.endRecorderTime=0,e.startRecorderTime=0,t.rState="idle",t.recordTime=0,u.default.sendMsg(d.Msg.recorderDone)},fail:function(a){e.channelObj.showToast({title:"\u5206\u4eab\u89c6\u9891\u5931\u8d25"}),u.default.err(a),e.endRecorderTime=0,e.startRecorderTime=0,e.video_path=null,t.rState="idle",t.recordTime=0,u.default.sendMsg(d.Msg.recorderFail)}})},t.prototype.showSidebar=function(a){var t=u.default.getData("sidebar",{today:"",canGet:"-1"});window.tt.navigateToScene({scene:"sidebar",success:function(){console.log("navigate to scene success"),t.canGet="1",u.default.saveData("sidebar",t),a&&a(!0)},fail:function(e){console.log("navigate to scene fail: ",e),t.canGet="0",u.default.saveData("sidebar",t),a&&a(!1)}})},t.unionid=null,t.API_EventType={active:"active",active_register:"active_register",game_addiction:"game_addiction"},t.recordTime=0,t.rState="idle",t.shareMaxTimes=5,t}(c.pzaChannelWeb);e.pzaChannelTT=m,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzaKDefine":"pzaKDefine","./pzakc":"pzakc"}],pzaChannelTap:[function(a,t,e){"use strict";cc._RF.push(t,"bdf3bDXHLdCIJ9KdMaNOJlp","pzaChannelTap");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelTap=void 0;var i=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="taptap",t.isVideoStarted=!1,t}return n(t,a),t.prototype.copyToClip=function(a){window.AJProxy.copyToClip(a)},t.prototype.hasPrivacy=function(){return!0},t.prototype.showVideo=function(a){var t=this;if(!this.isVideoStarted){this.isVideoStarted=!0;var e=a.endCall;a.endCall=function(){t.isVideoStarted=!1,e()},window.regAndroidCall("videoReward",a.sucCall),window.regAndroidCall("videoClose",a.endCall),window.regAndroidCall("videoFail",a.failCall),window.AJProxy.showVideo("b63ff12ab86fdb")}},t}(a("./pzaChannelWeb").pzaChannelWeb);e.pzaChannelTap=i,cc._RF.pop()},{"./pzaChannelWeb":"pzaChannelWeb"}],pzaChannelVivo:[function(a,t,e){"use strict";cc._RF.push(t,"822a5eHpGtJnLCyYDZgotAk","pzaChannelVivo");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelVivo=void 0;var i=a("./pzaChannelWeb"),r=a("./pzakc"),p=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="vivo",t.paraMap=new Map([["bannerAd","57a43af6fddc4501a2c34f8ef488a063"],["customInsertAd","a33a662da55b468bbae2f059297258bb"],["videoAd","684c830dce584509af4761310268248e"],["ctrlId","63f71c07e6d3ab07ce9c459e"]]),t.channelObj=window.qg,t.ruanzhu="\n\u8457\u4f5c\u6743\u4eba\uff1a\u6df1\u5733\u7fbd\u6e38\u79d1\u6280\u6709\u9650\u516c\u53f8\n\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a2023SRE001822",t.bannerTimeId=-1,t.lastCustomShowTime=0,t.customGapSec=5e3,t.customAdMap={},t}return n(t,a),t.prototype.hasPrivacy=function(){return!!r.default.getData("isAgree",0)},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.exit=function(){this.channelObj.exitApplication()},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this.getPara("ctrlId");if(o){var n={id:o};r.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",n,function(a,t){a?r.default.err(a):""+t.code=="0"?(e.ctrl=t.data,r.default.log("\u8fd4\u56de",e.ctrl)):r.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(t))})}},t.prototype.showVideo=function(a){var t=this,e=this.getPara("videoAd");e&&(r.default.log("showVideo",e),this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({posId:e}),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose(),this.videoFns.onLoad=function(){r.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),t.rewardedVideoAd.show().then(function(){r.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(a){r.default.err(a),t.rewardedVideoAd.load().then(function(){r.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f")})})},this.videoFns.onError=function(e){r.default.err(e),a.failCall(),t.channelObj.showToast({message:"\u6682\u65e0\u5e7f\u544a"})},this.videoFns.onClose=function(t){r.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u5173\u95ed",t),t&&t.isEnded&&(a.sucCall(),r.default.eventReport("showVideo\u5b8c\u6210-"+a.posName)),a.endCall()},this.rewardedVideoAd.onLoad(this.videoFns.onLoad),this.rewardedVideoAd.onError(this.videoFns.onError),this.rewardedVideoAd.onClose(this.videoFns.onClose))},t.prototype.showBanner=function(){var a=this.getPara("bannerAd");a&&(r.default.log("showBanner",a),this.bannerAd=this.channelObj.createBannerAd({posId:a,adIntervals:30}),this.bannerAd.onError(function(a){r.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.bannerAd.show().then(function(){r.default.log("banner\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){r.default.log("banner\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))}))},t.prototype.closeBanner=function(){this.bannerAd&&this.bannerAd.hide()},t.prototype.showBannerByTime=function(a){var t=this;void 0===a&&(a=!1);var e=30;this.getCtrl("p4")<1?r.default.log("banner\u4e0d\u5c55\u793a"):(this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<30&&(e=30),this.showBanner(a,null,"battle"),this.bannerTimeId=setInterval(function(){t.showBanner(a,null,"battle")},1e3*e))},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.showCustomAd=function(a,t,e){var o=this,n=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");if(n)if(Date.now()-this.lastCustomShowTime<this.customGapSec)r.default.log("custom\u5e7f\u544a\u95f4\u9694\u672a\u5230",this.customGapSec);else{this.lastCustomShowTime=Date.now();var i=a?this.getSysInfo().windowHeight-300:this.getSysInfo().windowHeight/2-300;r.default.log("showCustomAd",n,a,i);var p={posId:n,style:{top:i}};if(e&&(p.style=e),r.default.log("\u539f\u751f\u6a21\u677f\u5c06\u521b\u5efa",n),this.customAdMap[n]=this.channelObj.createCustomAd(p),this.customAdMap[n].offError(),this.customAdMap[n].onError(function(a){r.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),a)this.customAdMap[n].show().then(function(){r.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){r.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))});else{var l=this.getCtrl("p3");r.default.log("\u539f\u751f\u6a21\u677f\u5c55\u793a2",l),setTimeout(function(){o.customAdMap[n].show().then(function(){r.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){r.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})},1e3*l)}}},t.prototype.closeCustomAd=function(a){var t=a?this.getPara("customBannerAd"):this.getPara("customInsertAd");t&&this.customAdMap[t]&&this.customAdMap[t].hide()},t}(i.pzaChannelWeb);e.pzaChannelVivo=p,cc._RF.pop()},{"./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannelWeb:[function(a,t,e){"use strict";cc._RF.push(t,"35b06SD/kFLbqmUbKV8Ncm5","pzaChannelWeb"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelWeb=void 0;var o=a("./pzaChannel"),n=a("./pzakc"),i=function(){function a(){this.channel="web",this.paraMap=new Map([]),this.ruanzhu="",this.isReadRemoteUserData=!0,this.channelId=0,this.channelObj=window,this.ctrl=null,this.interstitialAd=null,this.bannerAd=null,this.rewardedVideoAd=null,this.customAd1=null,this.customAd2=null,this.boxPortalAd=null,this.channelUserId=null,this.sysInfo=null,this.privacyStr=["\u9690\u79c1\u653f\u7b56\n    \u6b22\u8fce\u60a8\u9009\u62e9\u7531Chun Liu\uff08\u4ee5\u4e0b\u7b80\u79f0\u201c\u6211\u4eec\u201d\uff09\u63d0\u4f9b\u7684\u6e38\u620f\u6216\u5e94\u7528APP\uff08\u4ee5\u4e0b\u7edf\u79f0\u201cAPP\u201d\uff09\u3002\u5efa\u8bae\u60a8\u5b8c\u6574\u5730\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u5e2e\u52a9\u60a8\u4e86\u89e3\u7ef4\u62a4\u81ea\u5df1\u9690\u79c1\u6743\u7684\u65b9\u5f0f\u3002\u5982\u60a8\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u6709\u4efb\u4f55\u7591\u95ee\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u5e73\u53f0\u516c\u5e03\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\u6211\u4eec\u91cd\u89c6\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u4fdd\u62a4\uff0c\u5982\u60a8\u4e3a\u672a\u6210\u5e74\u4eba\uff0c\u5efa\u8bae\u60a8\u8bf7\u60a8\u7684\u76d1\u62a4\u4eba\u4ed4\u7ec6\u9605\u8bfb\u672c\u9690\u79c1\u653f\u7b56,\u5e76\u5728\u5f81\u5f97\u60a8\u7684\u76d1\u62a4\u4eba \u540c\u610f\u7684\u524d\u63d0\u4e0b\u4f7f\u7528\u6211\u4eec\u7684\u670d\u52a1\u6216\u5411\u6211\u4eec\u63d0\u4f9b\u4fe1\u606f\u3002\u672c\u9690\u79c1\u653f\u7b56\u4e3b\u8981\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u5e2e\u60a8\u8be6\u7ec6\u4e86\u89e3\u6211\u4eec\u6216\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5982\u4f55\u6536\u96c6\u3001\u4f7f\u7528\u3001\u5b58\u50a8\u3001\u4f20\u8f93\u3001\u5171\u4eab\u4e0e\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\uff1b\u5e2e\u60a8\u4e86\u89e3\u67e5\u8be2\u3001\u8bbf\u95ee\u3001\u5220\u9664\u3001\u66f4\u6b63\u3001\u64a4\u56de\u6388\u6743\u4e2a\u4eba\u4fe1\u606f\u7684\u65b9\u5f0f\u3002\n\xa0\t\n\u4e00\u3001\u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\u4e8c\u3001\u5982\u4f55\u4f7f\u7528cookie\u6216\u540c\u7c7b\u6280\u672f\n\u4e09\u3001\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\u56db\u3001\u5982\u4f55\u5b58\u50a8\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\u4e94\u3001\u5982\u4f55\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\u516d\u3001\u5982\u4f55\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\u4e03\u3001\u672a\u6210\u5e74\u4eba\u4f7f\u7528\u6761\u6b3e\n\u516b\u3001\u9690\u79c1\u653f\u7b56\u7684\u4fee\u8ba2\u548c\u901a\u77e5\n\u4e5d\u3001\u5982\u4f55\u8054\u7cfb\u6211\u4eec\n\xa0\n\xa0\n\u4e00\u3001\u5982\u4f55\u6536\u96c6\u548c\u4f7f\u7528\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\xa0\n1.1.\u60a8\u4e3b\u52a8\u63d0\u4f9b\u7684\u4fe1\u606f\n\xa0\n\uff081\uff09\u60a8\u5728\u63a5\u53d7\u6216\u4f7f\u7528\u6211\u4eec\u6240\u63d0\u4f9b\u7684\u670d\u52a1\u65f6\u4e3b\u52a8\u5411\u6211\u4eec\u63d0\u4f9b\u7684\u4fe1\u606f\uff0c\u5305\u62ec\uff1a\n\u2460\u60a8\u5728\u6ce8\u518c\u6210\u4e3a\u6211\u4eec\u7684\u7528\u6237\u65f6\u6240\u63d0\u4f9b\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\u2461\u60a8\u5728\u83b7\u53d6\u6211\u4eec\u7279\u5b9a\u670d\u52a1\u6216\u529f\u80fd\u65f6\u6240\u4e0a\u4f20\u3001\u53d1\u5e03\u6216\u63d0\u4f9b\u7684\u4fe1\u606f\uff1b\n\u2462\u60a8\u53c2\u4e0e\u6211\u4eec\u6240\u4e3e\u529e\u7684\u7ebf\u4e0a\u3001\u7ebf\u4e0b\u6d3b\u52a8\u65f6\u6240\u63d0\u4ea4\u7684\u4fe1\u606f\uff1b\n\u2463\u60a8\u5411\u6211\u4eec\u5ba2\u670d\u6216\u5176\u4ed6\u5b98\u65b9\u6e20\u9053\u6240\u63d0\u4f9b\u7684\u4fe1\u606f\u3002\n\u6211\u4eec\u5728\u60a8\u63a5\u53d7\u6216\u4f7f\u7528\u6211\u4eec\u670d\u52a1\u65f6\u6240\u83b7\u53d6\u7684\u4fe1\u606f\uff0c\u5305\u62ec\uff1a\n\u2460\u65e5\u5fd7\u4fe1\u606f\uff1a\u5f53\u60a8\u83b7\u5f97\u6211\u4eec\u670d\u52a1\u65f6\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u81ea\u52a8\u6536\u96c6\u76f8\u5173\u4fe1\u606f\u5e76\u5b58\u50a8\u4e3a\u670d\u52a1\u65e5\u5fd7\u4fe1\u606f\u3002\n\u2461\u4f4d\u7f6e\u4fe1\u606f\uff1a\u5f53\u60a8\u83b7\u5f97\u6211\u4eec\u670d\u52a1\u6216\u63a5\u53d7\u670d\u52a1\u4e2d\u7684\u7279\u5b9a\u529f\u80fd\u65f6\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u6536\u96c6\u60a8\u6240\u4f7f\u7528\u8bbe\u5907\u7684\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u3002\n\u2462\u5176\u4ed6\u4fe1\u606f\uff1a\u6211\u4eec\u4e3a\u66f4\u597d\u5730\u5411\u60a8\u63d0\u4f9b\u670d\u52a1\uff0c\u63d0\u5347\u6211\u4eec\u7684\u670d\u52a1\u8d28\u91cf\uff0c\u6211\u4eec\u53ef\u80fd\u9700\u8981\u6536\u96c6\u7ecf\u60a8\u540c\u610f\u7684\u60a8\u7684\u5176\u4ed6\u76f8\u5173\u4fe1\u606f\u3002\n\uff083\uff09\u5176\u4ed6\u65b9\u5411\u6211\u4eec\u63d0\u4f9b\u6216\u5206\u4eab\u7684\u60a8\u7684\u4fe1\u606f\u3002\n\n\u2460\u5176\u4ed6\u7528\u6237\u5728\u83b7\u5f97\u6211\u4eec\u670d\u52a1\u65f6\u6240\u63d0\u4f9b\u7684\u60a8\u7684\u4fe1\u606f\u6216\u53ef\u80fd\u5305\u542b\u7684\u4e0e\u60a8\u6709\u5173\u7684\u4fe1\u606f\u3002\n\n\u2461\u7b2c\u4e09\u65b9\u5408\u4f5c\u4f19\u4f34\u5411\u6211\u4eec\u6240\u5171\u4eab\u7684\u60a8\u5728\u83b7\u5f97\u7b2c\u4e09\u65b9\u5408\u4f5c\u4f19\u4f34\u670d\u52a1\u65f6\u6240\u4ea7\u751f\u3001\u63d0\u4f9b\u6216\u5206\u4eab\u7684\u4fe1\u606f\u3002\u5728\u6b64\u79cd\u60c5\u51b5\u4e0b\uff0c\u8bf7\u60a8\u4ed4\u7ec6\u9605\u8bfb\u7b2c\u4e09\u65b9\u5408\u4f5c\u4f19\u4f34\u670d\u52a1\u7684\u7528\u6237\u534f\u8bae\u6216\u9690\u79c1\u653f\u7b56\uff0c\u6211\u4eec\u5c06\u540c\u65f6\u9075\u5b88\u672c\u653f\u7b56\u53ca\u7b2c\u4e09\u65b9\u5408\u4f5c\u4f19\u4f34\u7684\u9690\u79c1\u653f\u7b56\uff0c\u4ee5\u5bf9\u60a8\u7684\u7528\u6237\u4fe1\u606f\u8fbe\u5230\u201c\u6700\u5c0f\u5316\u5229\u7528\u6700\u5927\u5316\u4fdd\u62a4\u201d\u7684\u76ee\u7684\u3002\n\xa0\n1.2. \u6211\u4eec\u6216\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u6536\u96c6\u548c\u4f7f\u7528\u7684\u4fe1\u606f\u53ca\u83b7\u53d6\u7684\u6743\u9650\n\xa0\n\u4e3a\u4e86\u7ed9\u60a8\u63d0\u4f9b\u66f4\u597d\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u6211\u4eec\u5728APP\u5185\u63a5\u5165\u4e86\u7b2c\u4e09\u65b9\u670d\u52a1\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u5b9e\u540d\u8ba4\u8bc1\u3001\u6570\u636e\u5206\u6790\u3001\u7b2c\u4e09\u65b9\u652f\u4ed8\u3001\u6295\u653e\u5e7f\u544a\u7b49\uff09\uff0c\u5f53\u60a8\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\u65f6\uff0c\u4e3a\u4e86\u786e\u4fdd\u60a8\u80fd\u6b63\u5e38\u4f7f\u7528APP\u548c\u4f18\u5316\u7528\u6237\u4f53\u9a8c\uff0c\u6211\u4eec\u548c\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u53ef\u80fd\u5728APP\u5b89\u88c5\u548c\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u901a\u8fc7\u8c03\u7528\u8bbe\u5907\u6743\u9650\u6536\u96c6\u90e8\u5206\u8bbe\u5907\u76f8\u5173\u4fe1\u606f\u548c\u4e2a\u4eba\u4fe1\u606f\uff08\u5305\u542b\uff1a\u8bbe\u5907\u4fe1\u606f\uff0c\u8bfb\u5199\u5916\u7f6e\u5b58\u50a8\u5668\uff0c\u4f4d\u7f6e\u4fe1\u606f\uff09\u3002\n\xa0\n1\uff09\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f\uff08\u4f8b\u5982\u786c\u4ef6\u578b\u53f7\u3001\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u8bbe\u5907\u8bbe\u7f6e\u3001IMEI\u3001\u5fc5\u8981\u7684\u8f6f\u4ef6\u5217\u8868\u7b49\uff09\n\xa0\n\u4e3a\u4fdd\u969c\u60a8\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684\u4ea7\u54c1\u6216\u670d\u52a1\uff0c\u5b9e\u73b0APP\u6570\u636e\u7684\u7edf\u8ba1\u548c\u5206\u6790\u4ee5\u53ca\u63d0\u5347\u8bbe\u5907\u8d26\u53f7\u7684\u5b89\u5168\u6027\uff0c\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u4f1a\u5728\u83b7\u5f97\u60a8\u540c\u610f\u7684\u60c5\u51b5\u4e0b\u6536\u96c6\u60a8\u7684\u8bbe\u5907ID\u3001\u8bbe\u5907\u540d\u79f0\u3001\u8bbe\u5907\u7c7b\u578b\u548c\u7248\u672c\u3001\u7cfb\u7edf\u7248\u672c\u3001IP\u5730\u5740\u3001MAC\u5730\u5740\u3001IMEI\u3001\u5e94\u7528ID\u3001\u7f51\u7edc\u8fde\u63a5\u72b6\u6001\u3001\u8f6f\u4ef6\u5217\u8868\u3001\u63a5\u5165\u7f51\u7edc\u7684\u65b9\u5f0f\u548c\u7c7b\u578b\u7b49\u4fe1\u606f\u3002\u62d2\u7edd\u6388\u6743\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u83b7\u53d6\u60a8\u7684\u4e0a\u8ff0\u4fe1\u606f\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u60a8\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684APP\u6216\u5728\u4f7f\u7528\u6211\u4eecAPP\u7684\u8fc7\u7a0b\u4e2d\u53d7\u5230\u76f8\u5e94\u9650\u5236\u3002\n\xa0\n\u5982\u60a8\u4f7f\u7528OPPO\u3001VIVO\u3001\u534e\u4e3a\u3001\u5c0f\u7c73\u3001\u9b45\u65cf\u7b49\u54c1\u724c\u624b\u673a\uff0c\u6211\u4eec\u7684APP\u53ef\u80fd\u4f1a\u63a5\u5165\u4e0a\u8ff0\u624b\u673a\u5382\u5546\u8054\u8fd0\u6240\u9700\u7684SDK\uff0c\u9700\u8981\u6536\u96c6\u624b\u673a\u552f\u4e00\u6807\u8bc6\u4fe1\u606f\uff08\u4f8b\u5982IMEI\uff09\uff0c\u5e76\u53ef\u80fd\u4f1a\u6536\u96c6\u60a8\u7684\u624b\u673a\u578b\u53f7\u3001\u7cfb\u7edf\u7c7b\u578b\u3001\u7cfb\u7edf\u7248\u672c\u3001\u8bbe\u5907\u5c4f\u5e55\u5c3a\u5bf8\u7b49\u53c2\u6570\u7528\u4e8e\u5b9e\u73b0\u4ea7\u54c1\u529f\u80fd\uff0c\u5177\u4f53\u60c5\u51b5\u8bf7\u53c2\u89c1SDK\u8fd0\u8425\u65b9\u7684\u9690\u79c1\u653f\u7b56\u6216\u76f8\u5173\u58f0\u660e\u3002\n\xa0\n2\uff09\u5b58\u50a8\u6743\u9650\n\xa0\n\u4e3a\u4fdd\u969c\u60a8\u80fd\u5145\u5206\u4f7f\u7528APP\u7684\u5404\u9879\u529f\u80fd\u548c\u4fdd\u5b58\u73a9\u5bb6\u7684\u6570\u636e\uff0c\u6211\u4eec\u548c\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u4f1a\u5728\u83b7\u5f97\u60a8\u540c\u610f\u7684\u60c5\u51b5\u4e0b\u83b7\u53d6\u60a8\u79fb\u52a8\u8bbe\u5907\u7684\u5b58\u50a8\u6743\u9650\u3002\u62d2\u7edd\u6388\u6743\u6211\u4eec\u6216\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u83b7\u53d6\u60a8\u79fb\u52a8\u8bbe\u5907\u7684\u5b58\u50a8\u6743\u9650\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u60a8\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u6211\u4eec\u7684APP\u6216\u5728\u4f7f\u7528\u6211\u4eecAPP\u7684\u8fc7\u7a0b\u4e2d\u53d7\u5230\u76f8\u5e94\u9650\u5236\u3002\n\xa0\n3\uff09\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\n\xa0\n\u4e3a\u4e86\u4e30\u5bccAPP\u4f53\u9a8c\uff0c\u5b9e\u73b0\u5185\u5bb9\u591a\u6837\u6027\uff0c\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u5728\u83b7\u5f97\u60a8\u540c\u610f\u7684\u60c5\u51b5\u4e0b\u4f1a\u6536\u96c6\u60a8\u7684\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u3002\u62d2\u7edd\u63d0\u4f9b\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u4ec5\u4f1a\u4f7f\u60a8\u65e0\u6cd5\u4f7f\u7528\u4e0e\u4f4d\u7f6e\u4fe1\u606f\u76f8\u5173\u7684\u529f\u80fd\uff0c\u4f46\u4e0d\u5f71\u54cd\u60a8\u6b63\u5e38\u4f7f\u7528\u6211\u4eecAPP\u7684\u5176\u4ed6\u529f\u80fd\u3002\u60a8\u4e5f\u53ef\u4ee5\u968f\u65f6\u53d6\u6d88\u6388\u6743\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u83b7\u53d6\u60a8\u7684\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u3002\n\xa0\n4\uff09\u5b9e\u540d\u8eab\u4efd\u4fe1\u606f\n\xa0\n\u4e3a\u7b26\u5408\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u653f\u7b56\u53ca\u76f8\u5173\u4e3b\u7ba1\u90e8\u95e8\u7684\u8981\u6c42\uff0c\u6211\u4eec\u7684\u6e38\u620f\u7528\u6237\u9700\u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1\u4ee5\u7ee7\u7eed\u4f7f\u7528\u6211\u4eec\u7684\u6e38\u620f\u3002\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u4f1a\u5728\u83b7\u5f97\u60a8\u540c\u610f\u7684\u60c5\u51b5\u4e0b\u8981\u6c42\u60a8\u586b\u5199\u60a8\u7684\u5b9e\u540d\u8eab\u4efd\u4fe1\u606f\uff0c\u8be5\u4fe1\u606f\u5c5e\u4e8e\u654f\u611f\u4fe1\u606f\uff0c\u62d2\u7edd\u63d0\u4f9b\u5b9e\u540d\u8eab\u4efd\u4fe1\u606f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u60a8\u65e0\u6cd5\u767b\u9646\u6211\u4eec\u7684\u6e38\u620f\u6216\u5728\u4f7f\u7528\u6211\u4eec\u7684\u6e38\u620f\u8fc7\u7a0b\u4e2d\u53d7\u5230\u76f8\u5e94\u9650\u5236\u3002\u82e5\u60a8\u5e0c\u671b\u4e86\u89e3\u7b2c\u4e09\u65b9\u670d\u52a1\u63d0\u4f9b\u5546\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\u5177\u4f53\u89c4\u5219\uff0c\u8bf7\u53c2\u9605\u60a8\u9009\u62e9\u7684\u7b2c\u4e09\u65b9\u4ed8\u6b3e\u670d\u52a1\u63d0\u4f9b\u5546\u7684\u9690\u79c1\u653f\u7b56\u3002\n\xa0\n5\uff09\u652f\u4ed8\u4fe1\u606f\n\xa0\n\u60a8\u53ef\u80fd\u4f1a\u901a\u8fc7\u4ed8\u6b3e\u7684\u65b9\u5f0f\u83b7\u53d6\u6211\u4eecAPP\u76f8\u5173\u7684\u865a\u62df\u4ea7\u54c1\uff0c\u5305\u62ec\u6e38\u620f\u5e01\u3001\u6e38\u620f\u9053\u5177\u3001\u6e38\u620f\u88c5\u5907\u7b49\u3002\u4e0a\u8ff0\u4ed8\u6b3e\u670d\u52a1\u7531\u7b2c\u4e09\u65b9\u63d0\u4f9b\uff0c\u8be5\u7b2c\u4e09\u65b9\u53ef\u80fd\u4f1a\u6536\u96c6\u60a8\u7684\u5145\u503c\u8bb0\u5f55\u3001\u6d88\u8d39\u8bb0\u5f55\u7b49\u4ea4\u6613\u4fe1\u606f\u3002\u6211\u4eec\u4e0d\u4f1a\u83b7\u53d6\u4e0e\u60a8\u4ed8\u6b3e\u76f8\u5173\u7684\u652f\u4ed8\u8d26\u53f7\u3001\u5bc6\u7801\u7b49\u4fe1\u606f\u3002\u5728\u60a8\u6210\u529f\u4ed8\u6b3e\u540e\uff0c\u6211\u4eec\u4ec5\u4f1a\u4ece\u8be5\u7b2c\u4e09\u65b9\u4ed8\u6b3e\u670d\u52a1\u63d0\u4f9b\u5546\u5904\u83b7\u53d6\u60a8\u5df2\u5b8c\u6210\u4ed8\u6b3e\u7684\u4fe1\u606f\uff0c\u8fdb\u800c\u5411\u60a8\u63d0\u4f9b\u76f8\u5e94\u865a\u62df\u4ea7\u54c1\u3002\u82e5\u60a8\u5e0c\u671b\u4e86\u89e3\u7b2c\u4e09\u65b9\u670d\u52a1\u63d0\u4f9b\u5546\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\u5177\u4f53\u89c4\u5219\uff0c\u8bf7\u53c2\u9605\u60a8\u9009\u62e9\u7684\u7b2c\u4e09\u65b9\u4ed8\u6b3e\u670d\u52a1\u63d0\u4f9b\u5546\u7684\u9690\u79c1\u653f\u7b56\u3002\n\xa0\n\xa0\n6)\u7b2c\u4e09\u65b9\u5e73\u53f0SDK\u4e3b\u8981\u83b7\u53d6\u7684\u6743\u9650\u4ee5\u53ca\u5bf9\u5e94\u7684\u7528\u9014\u5982\u4e0b\uff1a\n\xa0\u2460\u7b2c\u4e09\u65b9SDK\uff1a\u53cb\u76df+\u7edf\u8ba1\n\u7528\u9014\uff1aApp\u6570\u636e\u5206\u6790\n\u6536\u96c6\u7684\u4fe1\u606f\uff1a1.\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f\uff08\u4f8b\u5982\u786c\u4ef6\u578b\u53f7\u3001\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u8bbe\u5907\u8bbe\u7f6e\u3001IMEI\u3001MAC\u5730\u5740\u3001AndroidID\u3001\u5fc5\u8981\u7684\u8f6f\u4ef6\u5217\u8868\u7b49\uff09\n2.\u83b7\u53d6\u7f51\u7edc\u4fe1\u606f\u72b6\u6001\uff0c\u8bbf\u95ee\u7f51\u7edc\u8fde\u63a5\uff0c\u53ef\u80fd\u4ea7\u751fGPRS\u6d41\u91cf\n\u9002\u7528\u8303\u56f4\uff1a\u6240\u6709\u6e20\u9053\u5305\n\u9690\u79c1\u8bf4\u660e\uff1a\n\u2461\u7b2c\u4e09\u65b9SDK\uff1a\u5947\u864e360\u52a0\u56fa\u4fdd\u63d2\u4ef6\n\u7528\u9014\uff1a\u4ee3\u7801\u52a0\u56fa\u6df7\u6dc6\uff0c\u9632\u6b62\u88ab\u7834\u89e3\u6cc4\u9732\n\u6536\u96c6\u7684\u4fe1\u606f\uff1a1.\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f\uff08\u4f8b\u5982\u786c\u4ef6\u578b\u53f7\u3001\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u8bbe\u5907\u8bbe\u7f6e\u3001IMEI\u3001MAC\u5730\u5740\u3001AndroidID\u3001\u5fc5\u8981\u7684\u8f6f\u4ef6\u5217\u8868\u7b49\uff09\n2.\u83b7\u53d6\u7f51\u7edc\u4fe1\u606f\u72b6\u6001\uff0c\u8bbf\u95ee\u7f51\u7edc\u8fde\u63a5\uff0c\u53ef\u80fd\u4ea7\u751fGPRS\u6d41\u91cf\n\u9002\u7528\u8303\u56f4\uff1a\u6240\u6709\u6e20\u9053\u5305\n\u9690\u79c1\u8bf4\u660e\uff1a\n\u2462\u7b2c\u4e09\u65b9SDK\uff1a\u7a7f\u5c71\u7532\u5e7f\u544aSDK\n\u7528\u9014\uff1a\u5728APP\u4e2d\u6295\u653e\u5e7f\u544a\u4e0e\u6570\u636e\u5206\u6790\n\u6536\u96c6\u7684\u4fe1\u606f\uff1a1.\u5141\u8bb8\u7a0b\u5e8f\u5199\u5165\u5916\u90e8\u5b58\u50a8\n2.\u83b7\u53d6\u7c97\u7565\u4f4d\u7f6e\n3.\u83b7\u53d6\u7cbe\u786e\u4f4d\u7f6e\n4.\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f\uff08\u4f8b\u5982\u786c\u4ef6\u578b\u53f7\u3001\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u8bbe\u5907\u8bbe\u7f6e\u3001IMEI\u3001MAC\u5730\u5740\u3001AndroidID\u3001\u5fc5\u8981\u7684\u8f6f\u4ef6\u5217\u8868\u7b49\uff09\n\u9002\u7528\u8303\u56f4\uff1aTAPTAP\u3001\u597d\u6e38\u5feb\u62a5\u3001360\u7b49\u6e20\u9053\u5305\u7b49\n\u9690\u79c1\u8bf4\u660e\uff1ahttps://www.pangle.cn/privacy\n\u2463\u7b2c\u4e09\u65b9SDK\uff1a\u4f18\u91cf\u6c47\u5e7f\u544aSDK\n\u7528\u9014\uff1a\u5728APP\u4e2d\u6295\u653e\u5e7f\u544a\u4e0e\u6570\u636e\u5206\u6790\n\u6536\u96c6\u7684\u4fe1\u606f\uff1a1.\u5141\u8bb8\u7a0b\u5e8f\u5199\u5165\u5916\u90e8\u5b58\u50a8\n2.\u83b7\u53d6\u7c97\u7565\u4f4d\u7f6e\n3.\u83b7\u53d6\u7cbe\u786e\u4f4d\u7f6e\n4.\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f\uff08\u4f8b\u5982\u786c\u4ef6\u578b\u53f7\u3001\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u8bbe\u5907\u8bbe\u7f6e\u3001IMEI\u3001MAC\u5730\u5740\u3001AndroidID\u3001\u5fc5\u8981\u7684\u8f6f\u4ef6\u5217\u8868\u7b49\uff09\n\u9002\u7528\u8303\u56f4\uff1aTAPTAP\u3001360\u3001\u597d\u6e38\u5feb\u62a5\u7b49\u6e20\u9053\u5305\n\u9690\u79c1\u8bf4\u660e\uff1ahttps://www.tencent.com/zh-cn/privacy-policy.html\n\u2464\u7b2c\u4e09\u65b9SDK\uff1aOPPO\u5e94\u7528\u5e02\u573a\u8054\u8fd0SDK\uff08\u5185\u542b\u652f\u4ed8\u5b9d,OPPO\u5b89\u5168\u652f\u4ed8,\u6613\u8054\u652f\u4ed8,\u73b0\u5728\u652f\u4ed8\u805a\u5408\u5e73\u53f0\uff09\u548c\u5e7f\u544aSDK\n\u7528\u9014\uff1a1.\u8054\u8fd0\u5e02\u573a\u5fc5\u987b\u63a5\u5165\uff1b2.\u5728App\u4e2d\u6295\u653e\u5e7f\u544a\u4e0e\u6570\u636e\u5206\u6790\n\u6536\u96c6\u7684\u4fe1\u606f\uff1a1.\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f\uff08\u4f8b\u5982\u786c\u4ef6\u578b\u53f7\u3001\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u8bbe\u5907\u8bbe\u7f6e\u3001IMEI\u3001MAC\u5730\u5740\u3001AndroidID\u3001\u5fc5\u8981\u7684\u8f6f\u4ef6\u5217\u8868\u7b49\uff09\n2.\u5141\u8bb8\u7a0b\u5e8f\u5199\u5165\u5916\u90e8\u5b58\u50a8\n3.\u5141\u8bb8\u7a0b\u5e8f\u8bfb\u53d6\u5916\u90e8\u5b58\u50a8\n4.\u83b7\u53d6\u7c97\u7565\u4f4d\u7f6e\n5.\u83b7\u53d6\u7cbe\u786e\u4f4d\u7f6e\n\u9002\u7528\u8303\u56f4\uff1aOPPO\u6e20\u9053\u5305\n\u9690\u79c1\u8bf4\u660e\uff1ahttps://privacy.oppo.com/cn/overview/\n\u2465\u7b2c\u4e09\u65b9SDK\uff1aVIVO\u5e94\u7528\u5e02\u573a\u8054\u8fd0\u548c\u5e7f\u544aSDK\uff08\u5176\u53ef\u80fd\u96c6\u6210\u5934\u6761sdk\uff0c\u548c\u5feb\u624b\u5e7f\u544asdk\uff09\n\u7528\u9014\uff1a1.\u8054\u8fd0\u5e02\u573a\u5fc5\u987b\u63a5\u5165\uff1b2.\u5728App\u4e2d\u6295\u653e\u5e7f\u544a\u4e0e\u6570\u636e\u5206\u6790\n\u6536\u96c6\u7684\u4fe1\u606f\uff1a1.\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f\uff08\u4f8b\u5982\u786c\u4ef6\u578b\u53f7\u3001\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u8bbe\u5907\u8bbe\u7f6e\u3001IMEI\u3001MAC\u5730\u5740\u3001AndroidID\u3001\u5fc5\u8981\u7684\u8f6f\u4ef6\u5217\u8868\u7b49\uff09\n2.\u5141\u8bb8\u7a0b\u5e8f\u5199\u5165\u5916\u90e8\u5b58\u50a8\n3.\u5141\u8bb8\u7a0b\u5e8f\u8bfb\u53d6\u5916\u90e8\u5b58\u50a8\n4.\u83b7\u53d6\u7c97\u7565\u4f4d\u7f6e\n5.\u83b7\u53d6\u7cbe\u786e\u4f4d\u7f6e\n\u9002\u7528\u8303\u56f4\uff1aVIVO\u6e20\u9053\u5305\n\u9690\u79c1\u8bf4\u660e\uff1ahttps://www.vivo.com.cn/about-vivo/privacy-policy\n\u2466\u7b2c\u4e09\u65b9SDK\uff1a\u534e\u4e3a\u5e94\u7528\u5e02\u573a\u8054\u8fd0\u548c\u5e7f\u544aSDK\n\u7528\u9014\uff1a1.\u8054\u8fd0\u5e02\u573a\u5fc5\u987b\u63a5\u5165\uff1b2.\u5728App\u4e2d\u6295\u653e\u5e7f\u544a\u4e0e\u6570\u636e\u5206\u6790\n\u6536\u96c6\u7684\u4fe1\u606f\uff1a1.\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f\uff08\u4f8b\u5982\u786c\u4ef6\u578b\u53f7\u3001\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u8bbe\u5907\u8bbe\u7f6e\u3001IMEI\u3001MAC\u5730\u5740\u3001AndroidID\u3001\u5fc5\u8981\u7684\u8f6f\u4ef6\u5217\u8868\u7b49\uff09\n2.\u5141\u8bb8\u7a0b\u5e8f\u5199\u5165\u5916\u90e8\u5b58\u50a8\n3.\u5141\u8bb8\u7a0b\u5e8f\u8bfb\u53d6\u5916\u90e8\u5b58\u50a8\n4.\u83b7\u53d6\u7c97\u7565\u4f4d\u7f6e\n5.\u83b7\u53d6\u7cbe\u786e\u4f4d\u7f6e\n\u9002\u7528\u8303\u56f4\uff1a\u534e\u4e3a\u6e20\u9053\u5305\n\u9690\u79c1\u8bf4\u660e\uff1a\n\u2467\u7b2c\u4e09\u65b9SDK\uff1a\u5c0f\u7c73\u5e94\u7528\u5e02\u573a\u8054\u8fd0\u548c\u5e7f\u544aSDK\n\u7528\u9014\uff1a1.\u8054\u8fd0\u5e02\u573a\u5fc5\u987b\u63a5\u5165\uff1b2.\u5728App\u4e2d\u6295\u653e\u5e7f\u544a\u4e0e\u6570\u636e\u5206\u6790\n\u6536\u96c6\u7684\u4fe1\u606f\uff1a1.\u8bbe\u5907\u6807\u8bc6\u4fe1\u606f\uff08\u4f8b\u5982\u786c\u4ef6\u578b\u53f7\u3001\u64cd\u4f5c\u7cfb\u7edf\u7248\u672c\u3001\u8bbe\u5907\u8bbe\u7f6e\u3001IMEI\u3001MAC\u5730\u5740\u3001AndroidID\u3001\u5fc5\u8981\u7684\u8f6f\u4ef6\u5217\u8868\u7b49\uff09\n\u9002\u7528\u8303\u56f4\uff1a\u5c0f\u7c73\u6e20\u9053\u5305\n\u9690\u79c1\u8bf4\u660e\uff1ahttps://privacy.mi.com/all/zh_CN/\n\n1.3.\u6536\u96c6\u548c\u4f7f\u7528\u4fe1\u606f\u7684\u4f8b\u5916\u548c\u7279\u6b8a\u60c5\u51b5\n\xa0\n1.3.1\u4f8b\u5916\u60c5\u51b5\n\xa0\n\u6839\u636e\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u53ca\u56fd\u5bb6\u6807\u51c6\uff0c\u4ee5\u4e0b\u60c5\u5f62\u4e2d\uff0c\u6211\u4eec\u6216\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u53ef\u80fd\u4f1a\u6536\u96c6\u3001\u4f7f\u7528\u60a8\u7684\u76f8\u5173\u4e2a\u4eba\u4fe1\u606f\u800c\u65e0\u9700\u5f81\u6c42\u60a8\u7684\u6388\u6743\u540c\u610f\uff1a\n\xa0\n1\uff09\u4e0e\u56fd\u5bb6\u5b89\u5168\u3001\u56fd\u9632\u5b89\u5168\u7b49\u56fd\u5bb6\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\u4e0e\u516c\u5171\u5b89\u5168\u3001\u516c\u5171\u536b\u751f\u3001\u516c\u5171\u77e5\u60c5\u7b49\u91cd\u5927\u516c\u5171\u5229\u76ca\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\xa0\n2\uff09\u4e0e\u72af\u7f6a\u4fa6\u67e5\u3001\u8d77\u8bc9\u3001\u5ba1\u5224\u548c\u5224\u51b3\u6267\u884c\u7b49\u76f4\u63a5\u76f8\u5173\u7684\uff1b\n\xa0\n3\uff09\u51fa\u4e8e\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u3001\u58f0\u8a89\u7b49\u91cd\u5927\u5408\u6cd5\u6743\u76ca\u4f46\u53c8\u5f88\u96be\u5f97\u5230\u672c\u4eba\u540c\u610f\u7684\uff1b\n\xa0\n4\uff09\u6240\u6536\u96c6\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u60a8\u81ea\u884c\u5411\u793e\u4f1a\u516c\u4f17\u516c\u5f00\u7684\uff1b\n\xa0\n5\uff09\u4ece\u5408\u6cd5\u516c\u5f00\u62ab\u9732\u7684\u4fe1\u606f\u4e2d\u6536\u96c6\u4e2a\u4eba\u4fe1\u606f\u7684\uff0c\u5982\u5408\u6cd5\u7684\u65b0\u95fb\u62a5\u9053\u3001\u653f\u5e9c\u4fe1\u606f\u516c\u5f00\u7b49\u6e20\u9053\uff1b\n\xa0\n6\uff09\u6839\u636e\u60a8\u8981\u6c42\u7b7e\u8ba2\u548c\u5c65\u884c\u5408\u540c\u6240\u5fc5\u9700\u7684\uff1b\n\xa0\n7\uff09\u7528\u4e8e\u7ef4\u62a4\u6240\u63d0\u4f9b\u7684\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u5b89\u5168\u7a33\u5b9a\u8fd0\u884c\u6240\u5fc5\u9700\u7684\uff0c\u4f8b\u5982\u53d1\u73b0\u3001\u5904\u7f6e\u4ea7\u54c1\u6216\u670d\u52a1\u7684\u6545\u969c\uff1b\n\xa0\n8\uff09\u51fa\u4e8e\u516c\u5171\u5229\u76ca\u5f00\u5c55\u7edf\u8ba1\u6216\u5b66\u672f\u7814\u7a76\u6240\u5fc5\u8981\uff0c\u4e14\u5176\u5bf9\u5916\u63d0\u4f9b\u5b66\u672f\u7814\u7a76\u6216\u63cf\u8ff0\u7684\u7ed3\u679c\u65f6\uff0c\u5bf9\u7ed3\u679c\u4e2d\u6240\u5305\u542b\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u53bb\u6807\u8bc6\u5316\u5904\u7406\u7684\uff1b\n\xa0\n9\uff09\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\u7684\u5176\u4ed6\u60c5\u5f62\u3002\n\xa0\n\xa0\n\xa0\n1.3.2\u7279\u6b8a\u60c5\u51b5\n\xa0\n\u8bf7\u60a8\u7406\u89e3\uff0c\u6211\u4eec\u53ca\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u5411\u60a8\u63d0\u4f9b\u7684\u529f\u80fd\u548c\u670d\u52a1\u662f\u4e0d\u65ad\u66f4\u65b0\u548c\u53d1\u5c55\u7684\uff0c\u5982\u679c\u6211\u4eec\u63d0\u4f9b\u7684\u67d0\u4e00\u529f\u80fd\u6216\u670d\u52a1\u9700\u8981\u83b7\u53d6\u65b0\u7684\u6743\u9650\u800c\u672a\u5728\u524d\u8ff0\u8bf4\u660e\u4e2d\uff0c\u6211\u4eec\u4f1a\u5728APP\u4e2d\u901a\u8fc7\u5f39\u7a97\u7684\u65b9\u5f0f\u53e6\u884c\u63d0\u793a\u60a8\u9009\u62e9\u662f\u5426\u6388\u6743\uff0c\u5e76\u5728APP\u7684\u9690\u79c1\u653f\u7b56\u4e2d\u8fdb\u884c\u66f4\u65b0\u4e0e\u8bf4\u660e\uff1b\u5982\u679c\u7b2c\u4e09\u65b9\u5e73\u53f0\u63d0\u4f9b\u7684\u67d0\u4e00\u529f\u80fd\u6216\u670d\u52a1\u9700\u8981\u83b7\u53d6\u60a8\u65b0\u7684\u6743\u9650\uff0c\u7b2c\u4e09\u65b9\u5e73\u53f0\u53ef\u80fd\u4f1a\u5728\u5176\u53d1\u5e03\u7684\u9690\u79c1\u653f\u7b56\u4e2d\u8fdb\u884c\u66f4\u65b0\u4e0e\u8bf4\u660e\uff0c\u5982\u60a8\u60f3\u8981\u4e86\u89e3\u7b2c\u4e09\u65b9\u5e73\u53f0\u83b7\u53d6\u60a8\u6743\u9650\u7684\u6700\u65b0\u60c5\u51b5\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2\u7b2c\u4e09\u65b9\u5e73\u53f0\u6700\u65b0\u7684\u9690\u79c1\u653f\u7b56\u3002\n\xa0\n\xa0\n\xa0\n\u4e8c\u3001\u5982\u4f55\u4f7f\u7528cookie\u6216\u540c\u7c7b\u6280\u672f\n\xa0\n2.1. Cookie\u6216\u540c\u7c7b\u6280\u672f\u662f\u4e92\u8054\u7f51\u4e2d\u666e\u904d\u4f7f\u7528\u7684\u6280\u672f\u3002\u5f53\u60a8\u4f53\u9a8c\u3001\u767b\u5f55\u3001\u4f7f\u7528\u6211\u4eec\u7684APP\u65f6\uff0c\u6211\u4eec\u6216\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u53ef\u80fd\u4f1a\u4f7f\u7528\u76f8\u5173\u6280\u672f\u5411\u60a8\u7684\u8bbe\u5907\u53d1\u9001\u4e00\u4e2a\u6216\u591a\u4e2a Cookie\u6216\u533f\u540d\u6807\u8bc6\u7b26\uff0c\u4ee5\u6536\u96c6\u548c\u5b58\u50a8\u60a8\u8bbf\u95ee\u3001\u4f7f\u7528\u672cAPP\u65f6\u7684\u4fe1\u606f\uff0c\u7528\u4e8e\u5206\u6790\u60a8\u4f7f\u7528\u6211\u4eecAPP\u7684\u504f\u597d\u60c5\u51b5\uff0c\u4ece\u800c\u4f18\u5316\u7528\u6237\u4f53\u9a8c\u3002\u6211\u4eec\u627f\u8bfa\uff0c\u4e0d\u4f1a\u5c06 Cookie\u7528\u4e8e\u672c\u9690\u79c1\u653f\u7b56\u6240\u8ff0\u76ee\u7684\u4e4b\u5916\u7684\u4efb\u4f55\u5176\u4ed6\u7528\u9014\u3002\n\xa0\n2.2. \u6211\u4eec\u5728\u4f7f\u7528Cookie\u6216\u540c\u7c7b\u6280\u672f\u65f6\u4f1a\u4e25\u683c\u9075\u5b88\u79fb\u52a8\u4e92\u8054\u7f51\u5e94\u7528\u5b89\u5168\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\uff0c\u5e76\u63d0\u4f9b\u6709\u6548\u7684\u5b89\u5168\u63aa\u65bd\u4ee5\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\u5982\u60a8\u60f3\u8981\u8be6\u7ec6\u4e86\u89e3\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u5982\u4f55\u4f7f\u7528Cookie\u6216\u540c\u7c7b\u6280\u672f\uff0c\u60a8\u53ef\u4ee5\u67e5\u9605\u7b2c\u4e09\u65b9\u5e73\u53f0\u7684\u9690\u79c1\u653f\u7b56\u3002\n\xa0\n\xa0\n\xa0\n\u4e09\u3001\u5982\u4f55\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\xa0\n\u6211\u4eec\u5c06\u4e25\u683c\u9075\u5b88\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u5bf9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4e88\u4ee5\u4fdd\u5bc6\uff0c\u4e0d\u4f1a\u5c06\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u51fa\u552e\u7ed9\u7b2c\u4e09\u65b9\u3002\u6211\u4eec\u4ec5\u4f1a\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\uff0c\u5904\u4e8e\u5408\u6cd5\u3001\u6b63\u5f53\u3001\u5fc5\u8981\u3001\u7279\u5b9a\u3001\u660e\u786e\u7684\u76ee\u7684\uff0c\u4e14\u91c7\u53d6\u7b26\u5408\u4e1a\u754c\u6807\u51c6\u7684\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u7684\u524d\u63d0\u4e0b\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u6570\u636e\u3002\u7528\u4e8e\u5171\u4eab\u3001\u8f6c\u8ba9\u3001\u62ab\u9732\u7684\u4e2a\u4eba\u4fe1\u606f\u662f\u53bb\u6807\u8bc6\u5316\u5904\u7406\u540e\u7684\u4fe1\u606f\uff0c\u4e14\u5171\u4eab\u7b2c\u4e09\u65b9\u65e0\u6cd5\u91cd\u65b0\u8bc6\u522b\u6b64\u7c7b\u4fe1\u606f\u7684\u81ea\u7136\u4eba\u4e3b\u4f53\u3002\n\xa0\n3.1\xa0 \u5171\u4eab\n\xa0\n1\uff09\xa0 \u4e8b\u5148\u83b7\u5f97\u60a8\u660e\u786e\u7684\u540c\u610f\u6216\u6388\u6743\uff1b\n\xa0\n2\uff09\xa0 \u6839\u636e\u9002\u7528\u7684\u6cd5\u5f8b\u6cd5\u89c4\u89c4\u5b9a\uff0c\u6216\u57fa\u4e8e\u53f8\u6cd5\u6216\u884c\u653f\u4e3b\u7ba1\u90e8\u95e8\u7684\u5f3a\u5236\u6027\u8981\u6c42\u8fdb\u884c\u63d0\u4f9b\uff1b\n\xa0\n3\uff09\xa0 \u5728\u6cd5\u5f8b\u6cd5\u89c4\u5141\u8bb8\u7684\u8303\u56f4\u5185\uff0c\u4e3a\u7ef4\u62a4\u60a8\u6216\u5176\u4ed6\u7528\u6237\u6216\u5176\u4ed6\u4e2a\u4eba\u7684\u751f\u547d\u3001\u8d22\u4ea7\u7b49\u5408\u6cd5\u6743\u76ca\u6216\u662f\u793e\u4f1a\u516c\u5171\u5229\u76ca\u800c\u6709\u5fc5\u8981\u63d0\u4f9b\uff1b\n\xa0\n4\uff09\xa0 \u5e94\u60a8\u7684\u76d1\u62a4\u4eba\u7684\u5408\u6cd5\u8981\u6c42\u800c\u63d0\u4f9b\u60a8\u7684\u4fe1\u606f\uff1b\n\xa0\n5\uff09\xa0 \u6839\u636e\u4e0e\u60a8\u7b7e\u7f72\u7684\u76f8\u5173\u534f\u8bae\uff08\u5305\u62ec\u670d\u52a1\u534f\u8bae\uff09\u6216\u5176\u4ed6\u7684\u6cd5\u5f8b\u6587\u4ef6\u7ea6\u5b9a\u800c\u63d0\u4f9b\uff1b\n\xa0\n6\uff09\xa0 \u53ef\u80fd\u4f1a\u57fa\u4e8e\u60a8\u7684\u76f8\u5e94\u6388\u6743\u5c06\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4e0e\u5173\u8054\u65b9\u5171\u4eab\u3002\u4f46\u53ea\u4f1a\u5171\u4eab\u5fc5\u8981\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u4e14\u53d7\u672c\u9690\u79c1\u653f\u7b56\u6240\u8ff0\u76ee\u7684\u4e4b\u7ea6\u675f\u3002\u5173\u8054\u65b9\u5982\u8981\u6539\u53d8\u4e2a\u4eba\u4fe1\u606f\u7684\u5904\u7406\u76ee\u7684\uff0c\u5c06\u9002\u65f6\u5411\u60a8\u5f81\u5f97\u660e\u793a\u540c\u610f\u3002\n\xa0\n\xa0\n\xa0\n3.2\xa0 \u8f6c\u8ba9\n\xa0\n1\uff09\xa0 \u4e8b\u5148\u83b7\u5f97\u60a8\u660e\u786e\u7684\u540c\u610f\u6216\u6388\u6743\uff1b\n\xa0\n2\uff09\xa0 \u6839\u636e\u9002\u7528\u7684\u6cd5\u5f8b\u6cd5\u89c4\u3001\u6cd5\u5f8b\u7a0b\u5e8f\u7684\u8981\u6c42\u3001\u5f3a\u5236\u6027\u7684\u884c\u653f\u6216\u53f8\u6cd5\u8981\u6c42\u800c\u5fc5\u987b\u8fdb\u884c\u63d0\u4f9b\uff1b\n\xa0\n3\uff09\xa0 \u6839\u636e\u4e0e\u60a8\u7b7e\u7f72\u7684\u76f8\u5173\u534f\u8bae\uff08\u5305\u62ec\u670d\u52a1\u534f\u8bae\uff09\u6216\u5176\u4ed6\u7684\u6cd5\u5f8b\u6587\u4ef6\u7ea6\u5b9a\u800c\u63d0\u4f9b\uff1b\n\xa0\n4\uff09\xa0 \u5728\u6d89\u53ca\u6536\u8d2d\u3001\u517c\u5e76\u3001\u7834\u4ea7\u6e05\u7b97\u3001\u91cd\u7ec4\u7b49\u53d8\u66f4\u65f6\uff0c\u5982\u6d89\u53ca\u5230\u4e2a\u4eba\u4fe1\u606f\u8f6c\u8ba9\uff0c\u4f1a\u8981\u6c42\u65b0\u7684\u6301\u6709\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u516c\u53f8\u6216\u7ec4\u7ec7\u7ee7\u7eed\u5c65\u884c\u672c\u9690\u79c1\u653f\u7b56\u9879\u4e0b\u7684\u8d23\u4efb\u548c\u4e49\u52a1\u3002\u5982\u53d8\u66f4\u540e\u7684\u4e3b\u4f53\u9700\u53d8\u66f4\u4e2a\u4eba\u4fe1\u606f\u4f7f\u7528\u76ee\u7684\uff0c\u6211\u4eec\u4f1a\u8981\u6c42\u5176\u4e8b\u5148\u83b7\u5f97\u60a8\u7684\u660e\u793a\u540c\u610f\u3002\n\xa0\n\xa0\n\xa0\n3.3\xa0 \u516c\u5f00\u62ab\u9732\n\xa0\n1\uff09\xa0 \u6839\u636e\u60a8\u7684\u9700\u6c42\uff0c\u5728\u60a8\u660e\u786e\u540c\u610f\u7684\u62ab\u9732\u65b9\u5f0f\u4e0b\u62ab\u9732\u60a8\u6240\u6307\u5b9a\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\n\xa0\n2\uff09\xa0 \u6839\u636e\u6cd5\u5f8b\u3001\u6cd5\u89c4\u7684\u8981\u6c42\u3001\u884c\u653f\u6216\u53f8\u6cd5\u673a\u5173\u7684\u5f3a\u5236\u6027\u8981\u6c42\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u516c\u5f00\u62ab\u9732\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\u5f53\u6536\u5230\u4e0a\u8ff0\u62ab\u9732\u8bf7\u6c42\u65f6\uff0c\u6211\u4eec\u4f1a\u4f9d\u6cd5\u8981\u6c42\u8bf7\u6c42\u65b9\u51fa\u5177\u76f8\u5173\u6cd5\u5f8b\u6587\u4ef6\uff0c\u5982\u4f20\u7968\u6216\u8c03\u67e5\u51fd\u7b49\u3002\u6211\u4eec\u4f1a\u614e\u91cd\u5ba1\u67e5\u6bcf\u4e00\u62ab\u9732\u8bf7\u6c42\uff0c\u4ee5\u786e\u4fdd\u8be5\u7b49\u62ab\u9732\u8bf7\u6c42\u7b26\u5408\u76f8\u5173\u6cd5\u5f8b\u89c4\u5b9a\u3002\u5728\u6cd5\u5f8b\u6cd5\u89c4\u8bb8\u53ef\u7684\u524d\u63d0\u4e0b\uff0c\u6211\u4eec\u4f1a\u5bf9\u5305\u542b\u62ab\u9732\u4fe1\u606f\u7684\u6587\u4ef6\u8fdb\u884c\u52a0\u5bc6\u4fdd\u62a4\u3002\n\xa0\n\xa0\n\xa0\n\u56db\u3001\u5982\u4f55\u5b58\u50a8\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\xa0\n4.1.\xa0 \xa0\u6211\u4eec\u4ec5\u5728\u672c\u9690\u79c1\u653f\u7b56\u6240\u8ff0\u76ee\u7684\u6240\u5fc5\u9700\u671f\u95f4\u548c\u6cd5\u5f8b\u6cd5\u89c4\u8981\u6c42\u7684\u6700\u77ed\u65f6\u9650\u5185\u50a8\u5b58\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\u5982\u6211\u4eec\u7ec8\u6b62\u670d\u52a1\u6216\u8fd0\u8425\uff0c\u6211\u4eec\u53ca\u6211\u4eec\u5408\u4f5c\u7684\u7b2c\u4e09\u65b9\u5e73\u53f0\u5c06\u53ca\u65f6\u505c\u6b62\u7ee7\u7eed\u6536\u96c6\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u6d3b\u52a8\uff0c\u540c\u65f6\u4f1a\u9075\u5b88\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u8981\u6c42\u63d0\u524d\u5411\u60a8\u901a\u77e5\uff0c\u5e76\u5728\u7ec8\u6b62\u670d\u52a1\u6216\u8fd0\u8425\u540e\u5bf9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u5220\u9664\u6216\u533f\u540d\u5316\u5904\u7406\uff0c\u4f46\u6cd5\u5f8b\u6cd5\u89c4\u6216\u76d1\u7ba1\u90e8\u95e8\u53e6\u6709\u89c4\u5b9a\u7684\u9664\u5916\u3002\n\xa0\n4.2.\xa0 \xa0\u6211\u4eec\u5728\u4e2d\u534e\u4eba\u6c11\u5171\u548c\u56fd\u5883\u5185\u8fd0\u8425\u4e2d\u6536\u96c6\u548c\u4ea7\u751f\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u50a8\u5b58\u5728\u4e2d\u534e\u4eba\u6c11\u5171\u548c\u56fd\u5883\u5185\uff0c\u4ee5\u4e0b\u60c5\u5f62\u9664\u5916\uff1a\n\xa0\n1\uff09 \u6cd5\u5f8b\u6cd5\u89c4\u6709\u660e\u786e\u89c4\u5b9a\uff1b\n\xa0\n2\uff09 \u83b7\u5f97\u60a8\u7684\u6388\u6743\u540c\u610f\uff1b\n\xa0\n3\uff09 \u76ee\u524d\u6211\u4eec\u4e0d\u4f1a\u5c06\u4e0a\u8ff0\u4fe1\u606f\u4f20\u8f93\u81f3\u5883\u5916\uff0c\u5982\u679c\u6211\u4eec\u5411\u5883\u5916\u4f20\u8f93\uff0c\u6211\u4eec\u5c06\u4f1a\u9075\u5faa\u76f8\u5173\u56fd\u5bb6\u89c4\u5b9a\u6216\u8005\u5f81\u6c42\u60a8\u7684\u540c\u610f\u3002\n\xa0\n4\uff09 \u9488\u5bf9\u4ee5\u4e0a\u60c5\u5f62\uff0c\u6211\u4eec\u4f1a\u786e\u4fdd\u4f9d\u636e\u672c\u9690\u79c1\u653f\u7b56\u53ca\u56fd\u5bb6\u6cd5\u5f8b\u6cd5\u89c4\u8981\u6c42\u5bf9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u63d0\u4f9b\u8db3\u591f\u7684\u4fdd\u62a4\u3002\n\xa0\n\xa0\n\xa0\n\u4e94\u3001\u5982\u4f55\u4fdd\u62a4\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\xa0\n5.1. \u6211\u4eec\u5c06\u91c7\u7528\u4e25\u683c\u7684\u5b89\u5168\u5236\u5ea6\u4ee5\u53ca\u884c\u4e1a\u901a\u884c\u7684\u5b89\u5168\u6280\u672f\u548c\u7a0b\u5e8f\u6765\u786e\u4fdd\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u4e0d\u88ab\u4e22\u5931\u3001\u6cc4\u9732\u3001\u6bc1\u635f\u6216\u6ee5\u7528\u3002\n\xa0\n5.2. \u6211\u4eec\u7684\u670d\u52a1\u91c7\u53d6\u540c\u884c\u4e1a\u8981\u6c42\u6c34\u5e73\u7684\u52a0\u5bc6\u6280\u672f\u3001\u533f\u540d\u5316\u5904\u7406\u7b49\u5408\u7406\u624b\u6bb5\u5bf9\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u8fdb\u884c\u52a0\u5bc6\u4fdd\u5b58\uff0c\u5e76\u901a\u8fc7\u9694\u79bb\u6280\u672f\u8fdb\u884c\u9694\u79bb\u3002\u6211\u4eec\u8fd8\u4f1a\u91c7\u7528\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u6743\u9650\u63a7\u5236\u548c\u591a\u91cd\u8eab\u4efd\u8ba4\u8bc1\u6280\u672f\u4fdd\u62a4\u4e2a\u4eba\u4fe1\u606f\uff0c\u907f\u514d\u6570\u636e\u88ab\u8fdd\u89c4\u4f7f\u7528\u3002\n\xa0\n5.3. \u6211\u4eec\u901a\u8fc7\u5efa\u7acb\u6570\u636e\u5b89\u5168\u7ba1\u7406\u89c4\u8303\u3001\u91c7\u7528\u4e25\u683c\u7684\u6570\u636e\u8bbf\u95ee\u6743\u9650\u63a7\u5236\u7b49\u65b9\u5f0f\u52a0\u5f3a\u5458\u5de5\u7684\u5b89\u5168\u610f\u8bc6\u4ee5\u53ca\u5bf9\u4e8e\u4fdd\u62a4\u4fe1\u606f\u91cd\u8981\u6027\u7684\u8ba4\u8bc6\u3002\n\xa0\n5.4. \u6211\u4eec\u4ec5\u5141\u8bb8\u6709\u5fc5\u8981\u77e5\u6653\u8fd9\u4e9b\u4fe1\u606f\u7684\u4eba\u5458\u8bbf\u95ee\u4e2a\u4eba\u4fe1\u606f\u6570\u636e\uff0c\u5e76\u4e3a\u6b64\u8bbe\u7f6e\u4e86\u4e25\u683c\u7684\u8bbf\u95ee\u6743\u9650\u63a7\u5236\u548c\u76d1\u63a7\u673a\u5236\u3002\u6211\u4eec\u540c\u65f6\u8981\u6c42\u53ef\u80fd\u63a5\u89e6\u5230\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u7684\u6240\u6709\u4eba\u5458\u5c65\u884c\u76f8\u5e94\u7684\u4fdd\u5bc6\u4e49\u52a1\u3002\u5982\u679c\u672a\u80fd\u5c65\u884c\u8fd9\u4e9b\u4e49\u52a1\uff0c\u53ef\u80fd\u4f1a\u88ab\u8ffd\u7a76\u6cd5\u5f8b\u8d23\u4efb\u6216\u88ab\u4e2d\u6b62\u4e0e\u6211\u4eec\u7684\u5408\u4f5c\u5173\u7cfb\u3002\n\xa0\n5.5. \u6211\u4eec\u5c06\u91c7\u53d6\u4e00\u5207\u5408\u7406\u53ef\u884c\u7684\u63aa\u65bd\uff0c\u786e\u4fdd\u4e0d\u6536\u96c6\u4e0e\u6211\u4eec\u7684APP\u670d\u52a1\u65e0\u5173\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\n\xa0\n5.6. \u4e92\u8054\u7f51\u73af\u5883\u5e76\u975e\u767e\u5206\u4e4b\u767e\u5b89\u5168\uff0c\u6211\u4eec\u4f1a\u5c3d\u529b\u4fdd\u62a4\u60a8\u4e2a\u4eba\u4fe1\u606f\u7684\u5b89\u5168\u6027\u3002\u5f53\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u51fa\u73b0\u6cc4\u9732\u3001\u635f\u6bc1\u6216\u4e22\u5931\u7b49\u5b89\u5168\u4e8b\u4ef6\u65f6\uff0c\u6211\u4eec\u5c06\u6309\u7167\u6cd5\u5f8b\u6cd5\u89c4\u7684\u8981\u6c42\uff0c\u53ca\u65f6\u5411\u60a8\u544a\u77e5\uff1a\u5b89\u5168\u4e8b\u4ef6\u7684\u57fa\u672c\u60c5\u51b5\u548c\u53ef\u80fd\u7684\u5f71\u54cd\u3001\u6211\u4eec\u5df2\u91c7\u53d6\u6216\u5c06\u8981\u91c7\u53d6\u7684\u5904\u7f6e\u63aa\u65bd\u3001\u60a8\u53ef\u81ea\u4e3b\u9632\u8303\u548c\u964d\u4f4e\u98ce\u9669\u7684\u5efa\u8bae\u3001\u5bf9\u60a8\u7684\u8865\u6551\u63aa\u65bd\u7b49\u3002\u6211\u4eec\u540c\u65f6\u5c06\u53ca\u65f6\u5c06\u4e8b\u4ef6\u76f8\u5173\u60c5\u51b5\u4ee5\u90ae\u4ef6\u3001\u4fe1\u51fd\u3001\u7535\u8bdd\u3001\u63a8\u9001\u901a\u77e5\u7b49\u65b9\u5f0f\u544a\u77e5\u60a8\uff0c\u96be\u4ee5\u9010\u4e00\u544a\u77e5\u4fe1\u606f\u4e3b\u4f53\u65f6\uff0c\u6211\u4eec\u4f1a\u91c7\u53d6\u5408\u7406\u3001\u6709\u6548\u7684\u65b9\u5f0f\u53d1\u5e03\u516c\u544a\u3002\u540c\u65f6\uff0c\u6211\u4eec\u8fd8\u5c06\u6309\u7167\u76d1\u7ba1\u90e8\u95e8\u8981\u6c42\uff0c\u4e3b\u52a8\u4e0a\u62a5\u4fe1\u606f\u5b89\u5168\u4e8b\u4ef6\u7684\u5904\u7f6e\u60c5\u51b5\u3002\n\xa0\n5.7. \u60a8\u901a\u8fc7\u4ed8\u6b3e\u7684\u65b9\u5f0f\u83b7\u53d6\u6211\u4eecAPP\u76f8\u5173\u7684\u865a\u62df\u4ea7\u54c1\u65f6\uff0c\u5c06\u901a\u8fc7\u7b2c\u4e09\u65b9\u4ed8\u6b3e\u670d\u52a1\u5546\u8fdb\u884c\u4ea4\u6613\u3002\u5c4a\u65f6\u60a8\u4e0d\u53ef\u907f\u514d\u7684\u8981\u5411\u4ea4\u6613\u5bf9\u65b9\u6216\u6f5c\u5728\u7684\u4ea4\u6613\u5bf9\u65b9\u62ab\u9732\u81ea\u5df1\u7684\u4fe1\u606f\uff0c\u5982\u8054\u7edc\u65b9\u5f0f\u3001\u94f6\u884c\u8d26\u6237\u6216\u8005\u90ae\u7bb1\u7b49\u3002\u8bf7\u60a8\u59a5\u5584\u4fdd\u62a4\u81ea\u5df1\u7684\u4fe1\u606f\uff0c\u4ec5\u5728\u5fc5\u8981\u7684\u60c5\u5f62\u4e0b\u5411\u4ed6\u4eba\u63d0\u4f9b\u3002\n\xa0\n5.8. \u5982\u679c\u6211\u4eec\u76d1\u6d4b\u5230\u60a8\u5c06\u6211\u4eec\u7684APP\u53ca\u670d\u52a1\u4ee5\u53ca\u76f8\u5173\u4fe1\u606f\u7528\u4e8e\u6b3a\u8bc8\u6216\u975e\u6cd5\u76ee\u7684\uff0c\u6211\u4eec\u5c06\u4f1a\u91c7\u53d6\u76f8\u5e94\u63aa\u65bd\uff0c\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u4e2d\u6b62\u6216\u7ec8\u6b62\u60a8\u4f7f\u7528\u6211\u4eec\u7684APP\u6216\u670d\u52a1\u3002\n\xa0\n\xa0\n\xa0\n\u516d\u3001\u5982\u4f55\u7ba1\u7406\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\n\xa0\n6.1. \u8bbf\u95ee\u3001\u66f4\u65b0\u548c\u5220\u9664\u4e2a\u4eba\u4fe1\u606f\n\xa0\n\u6211\u4eec\u975e\u5e38\u91cd\u89c6\u60a8\u5bf9\u4e2a\u4eba\u4fe1\u606f\u7ba1\u7406\u7684\u6743\u5229\u3002\u60a8\u53ef\u6839\u636e\u6211\u4eecAPP\u5185\u7684\u6307\u5f15\uff0c\u5728APP\u5185\u6216\u5728APP\u4e2d\u63a5\u5165\u7684\u7b2c\u4e09\u65b9\u670d\u52a1\u4e2d\u8bbf\u95ee\u3001\u66f4\u65b0\u548c\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u3002\u5728\u8bbf\u95ee\u3001\u66f4\u65b0\u548c\u5220\u9664\u524d\u8ff0\u4fe1\u606f\u65f6\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u8981\u6c42\u60a8\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u4ee5\u4fdd\u969c\u4fe1\u606f\u5b89\u5168\u3002\n\xa0\n6.2. \u6ce8\u9500\u8d26\u53f7\n\xa0\n\u5982\u60a8\u60f3\u8981\u6ce8\u9500APP\u8d26\u53f7\uff0c\u60a8\u53ef\u4ee5\u6309\u7167\u6211\u4eecAPP\u4e2d\u7684\u6307\u5f15\u63d0\u4ea4\u8d26\u53f7\u6ce8\u9500\u7533\u8bf7\uff0c\u6216\u8005\u901a\u8fc7\u6211\u4eec\u5728\u672c\u9690\u79c1\u653f\u7b56\u7b2c\u4e5d\u6761\u4e2d\u6240\u5217\u660e\u7684\u8054\u7cfb\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\uff0c\u6211\u4eec\u5c06\u8be6\u7ec6\u7684\u5411\u60a8\u544a\u77e5\u5982\u4f55\u6ce8\u9500APP\u8d26\u53f7\u3002\n\xa0\n6.3. \u9664\u6cd5\u5f8b\u6cd5\u89c4\u53e6\u6709\u89c4\u5b9a\uff0c\u5f53\u60a8\u66f4\u65b0\u3001\u5220\u9664\u60a8\u7684\u4e2a\u4eba\u4fe1\u606f\u6216\u7533\u8bf7\u6ce8\u9500\u5e10\u53f7\u65f6\uff0c\u6211\u4eec\u53ef\u80fd\u4e0d\u4f1a\u7acb\u5373\u4ece\u5907\u4efd\u7cfb\u7edf\u4e2d\u66f4\u65b0\u6216\u5220\u9664\u76f8\u5e94\u7684\u4fe1\u606f\uff0c\u4f46\u4f1a\u5728\u5907\u4efd\u66f4\u65b0\u65f6\u66f4\u65b0\u6216\u5220\u9664\u8fd9\u4e9b\u4fe1\u606f\u3002\n\xa0\n\xa0\n\xa0\n\u4e03\u3001\u672a\u6210\u5e74\u4eba\u4f7f\u7528\u6761\u6b3e\n\xa0\n7.1.\xa0 \xa0\u82e5\u60a8\u662f\u672a\u6ee118\u5468\u5c81\u7684\u672a\u6210\u5e74\u4eba\uff0c\u5728\u4f7f\u7528\u6211\u4eec\u7684APP\u53ca\u76f8\u5173\u670d\u52a1\u524d\uff0c\u5e94\u5728\u60a8\u7684\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u76d1\u62a4\u3001\u6307\u5bfc\u4e0b\u5171\u540c\u9605\u8bfb\u5e76\u540c\u610f\u672c\u9690\u79c1\u653f\u7b56\u3002\n\xa0\n7.2.\xa0 \xa0\u6211\u4eec\u6839\u636e\u56fd\u5bb6\u76f8\u5173\u6cd5\u5f8b\u6cd5\u89c4\u7684\u89c4\u5b9a\u4fdd\u62a4\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u53ea\u4f1a\u5728\u6cd5\u5f8b\u5141\u8bb8\u3001\u7236\u6bcd\u6216\u5176\u4ed6\u76d1\u62a4\u4eba\u660e\u786e\u540c\u610f\u6216\u4fdd\u62a4\u672a\u6210\u5e74\u4eba\u6240\u5fc5\u8981\u7684\u60c5\u51b5\u4e0b\u6536\u96c6\u3001\u4f7f\u7528\u3001\u50a8\u5b58\u3001\u5171\u4eab\u3001\u8f6c\u8ba9\u6216\u62ab\u9732\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\uff1b\u5982\u679c\u6211\u4eec\u53d1\u73b0\u5728\u672a\u4e8b\u5148\u83b7\u5f97\u53ef\u8bc1\u5b9e\u7684\u7236\u6bcd\u540c\u610f\u7684\u60c5\u51b5\u4e0b\u6536\u96c6\u4e86\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5219\u4f1a\u8bbe\u6cd5\u5c3d\u5feb\u5220\u9664\u76f8\u5173\u4fe1\u606f\u3002\n\xa0\n7.3.\xa0 \xa0\u82e5\u60a8\u662f\u672a\u6210\u5e74\u4eba\u7684\u76d1\u62a4\u4eba\uff0c\u5f53\u60a8\u5bf9\u60a8\u6240\u76d1\u62a4\u7684\u672a\u6210\u5e74\u4eba\u7684\u4e2a\u4eba\u4fe1\u606f\u6709\u76f8\u5173\u7591\u95ee\u65f6\uff0c\u8bf7\u901a\u8fc7\u516c\u53f8\u672c\u9690\u79c1\u653f\u7b56\u516c\u793a\u7684\u8054\u7cfb\u65b9\u5f0f\u4e0e\u6211\u4eec\u8054\u7cfb\u3002\n\xa0\n\xa0\n\xa0\n\u516b\u3001\u300a\u9690\u79c1\u653f\u7b56\u300b\u53d8\u66f4\n\xa0\n8.1.\xa0 \xa0\u672c\u300a\u9690\u79c1\u653f\u7b56\u300b\u7684\u6761\u6b3e\u5bf9\u4f7f\u7528\u672c\u516c\u53f8\u7f51\u7ad9\u53ca\u5176\u641c\u96c6\u5230\u7684\u4fe1\u606f\u5177\u6709\u7ea6\u675f\u6027\u3002\u6211\u4eec\u5bf9\u6b64\u653f\u7b56\u4fdd\u7559\u4fee\u6539\u6743\uff0c\u5982\u6709\u91cd\u5927\u53d8\u66f4\uff0c\u6211\u4eec\u4f1a\u7aed\u529b\u5728\u5b98\u65b9\u7f51\u7ad9\u4e0a\u505a\u51fa\u660e\u786e\u901a\u77e5\u3002\n\u9690\u79c1\u653f\u7b56\u53d1\u5e03\u65e5\u671f\u22362021\u5e7410\u670815\u65e5\n\u9690\u79c1\u653f\u7b56\u751f\u6548\u65e5\u671f\u22362021\u5e7410\u670815\u65e5\n\xa0\n\xa0\n\u4e5d\u3001\u5982\u4f55\u8054\u7cfb\u6211\u4eec\n\xa0\n9.1.\xa0 \xa0\u6211\u4eec\u975e\u5e38\u5c0a\u91cd\u6bcf\u4e00\u4f4d\u7528\u6237\u7684\u9690\u79c1\uff0c\u5e76\u7aed\u529b\u4fdd\u62a4\u7528\u6237\u7684\u4e2a\u4eba\u4fe1\u606f\uff0c\u5982\u679c\u60a8\u5bf9\u672c\u9690\u79c1\u653f\u7b56\u6709\u4efb\u4f55\u7591\u95ee\u3001\u610f\u89c1\u6216\u5efa\u8bae\uff0c\u6b22\u8fce\u5728\u5de5\u4f5c\u65e5\u65f6\u95f49:00-18:00\u8054\u7cfb\u6211\u4eec\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u505a\u51fa\u56de\u590d\u3002\n\xa0 \n\u5ba2\u670d\u90ae\u7bb1\uff1a3624303643@qq.com\xa0\n\u6ce8\u518c\u5730\u5740\uff1a\u6df1\u5733\u5e02\u798f\u7530\u533a\u6c99\u5934\u8857\u9053\u5929\u5b89\u793e\u533a\u6cf0\u7136\u56db\u8def26\u53f7\u6cf0\u7136\u79d1\u6280\u56ed\u52b2\u677e\u5927\u53a619C5D\n\u516c\u53f8\u5730\u5740\uff1a\u5e7f\u4e1c\u7701\u6df1\u5733\u5e02\u5b9d\u5b89\u533a\u65b0\u5b89\u8857\u9053\u6d77\u5929\u8def15\u53f7\u524d\u6d77\u5353\u8d8a\u65f6\u4ee3\u5e7f\u573aA\u5ea72606\u5ba4","\u7528\u6237\u534f\u8bae\n    \u6b22\u8fce\u60a8\u4f7f\u7528\u7531Chun Liu\u63d0\u4f9b\u7684\u670d\u52a1\u3002\n\u672c\u300a\u7528\u6237\u670d\u52a1\u534f\u8bae\u300b\uff08\u4ee5\u4e0b\u79f0\u201c\u672c\u534f\u8bae\u201d\uff09\u662f\u7528\u6237\uff08\u4ee5\u4e0b\u79f0\u201c\u60a8\u201d\uff09\u63a5\u53d7Chun Liu\uff08\u4ee5\u4e0b\u7b80\u79f0\u4e3a\u201c\u672c\u516c\u53f8\u201d\uff09\u6240\u63d0\u4f9b\u7684\u670d\u52a1\u6240\u4f7f\u7528\u7684\u6cd5\u5f8b\u670d\u52a1\u6761\u6b3e\u3002 \u672c\u516c\u53f8\u5728\u6b64\u7279\u522b\u63d0\u9192\u60a8\u8ba4\u771f\u9605\u8bfb\u672c\u534f\u8bae\u7684\u5168\u90e8\u6761\u6b3e\uff0c\u7279\u522b\u662f\u5176\u4e2d\u514d\u9664\u6216\u8005\u9650\u5236\u672c\u516c\u53f8\u8d23\u4efb\u7684\u514d\u8d23\u58f0\u660e\u6761\u6b3e\u4ee5\u53ca\u7528\u6237\u987b\u9075\u5b88\u7684\u6761\u6b3e\u548c\u5176\u5b83\u9650\u5236\u7528\u6237\u6743\u5229\u7684\u6761\u6b3e\uff0c\u8fd9\u4e9b\u6761\u6b3e\u5e94\u5728\u4e2d\u56fd\u6cd5\u5f8b\u6240\u5141\u8bb8\u7684\u8303\u56f4\u5185\u6700\u5927\u7a0b\u5ea6\u5730\u9002\u7528\u3002\u9664\u975e\u7528\u6237\u63a5\u53d7\u672c\u534f\u8bae\u7684\u5168\u90e8\u6761\u6b3e\uff0c\u5426\u5219\u65e0\u6743\u5b89\u88c5\u8fd0\u884c\u5ba2\u6237\u7aef\u8f6f\u4ef6\u6216\u4ee5\u5176\u5b83\u65b9\u5f0f\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u4efb\u4f55\u670d\u52a1\u5185\u5bb9\u3002\n\u5f53\u60a8\u5728\u7ebf\u70b9\u51fb\u201c\u540c\u610f\u201d\u6216\u201c\u63a5\u53d7\u201d\u540e\uff0c\u5219\u89c6\u4e3a\u60a8\u5df2\u8be6\u7ec6\u9605\u8bfb\u5e76\u540c\u610f\u672c\u534f\u8bae\u7684\u5168\u90e8\u5185\u5bb9\uff0c\u5e76\u540c\u610f\u9075\u5b88\u672c\u534f\u8bae\u7684\u89c4\u5b9a\u3002\n\u5982\u679c\u60a8\u672a\u6ee118\u5468\u5c81\uff0c\u8bf7\u5728\u6cd5\u5b9a\u76d1\u62a4\u4eba\u7684\u966a\u540c\u4e0b\u9605\u8bfb\u672c\u534f\u8bae\u3002\n\u4e00\u3001\u7279\u522b\u63d0\u793a\n1. \u672c\u516c\u53f8\u540c\u610f\u6309\u7167\u672c\u534f\u8bae\u7684\u89c4\u5b9a\u53ca\u5176\u4e0d\u65f6\u53d1\u5e03\u7684\u64cd\u4f5c\u89c4\u5219\u63d0\u4f9b\u57fa\u4e8e\u4e92\u8054\u7f51\u7684\u76f8\u5173 \u670d\u52a1(\u4ee5\u4e0b\u79f0\u201c\u7f51\u7edc\u670d\u52a1\u201d)\uff0c\u4e3a\u83b7\u5f97\u7f51\u7edc\u670d\u52a1\uff0c\u60a8\u540c\u610f\u672c\u534f\u8bae\u7684\u5168\u90e8\u6761\u6b3e\u5e76\u6309\u7167\u9875\u9762\u4e0a\u7684\u63d0\u793a\u5b8c\u6210\u5168\u90e8\u7a0b\u5e8f\u3002\u60a8\u5728\u8fdb\u884c\u7a0b\u5e8f\u8fc7\u7a0b\u4e2d\u70b9\u51fb\u201c\u540c\u610f\u201d\u6309\u94ae\u5373\u8868\u793a\u7528\u6237\u5b8c\u5168\u63a5\u53d7\u672c\u534f\u8bae\u9879\u4e0b\u7684\u5168\u90e8\u6761\u6b3e\u3002\u8fd9\u4e9b\u6761\u6b3e\u53ef\u7531\u672c\u516c\u53f8\u968f\u65f6\u66f4\u65b0\uff0c\u534f\u8bae\u6761\u6b3e\u4e00\u65e6\u53d1\u751f\u53d8\u52a8\uff0c\u672c\u516c\u53f8\u5c06\u4f1a\u5728\u76f8\u5173\u7684\u9875\u9762\u4e0a\u63d0\u793a\u53d8\u66f4\u5185\u5bb9\u3002\u4fee\u6539\u540e\u7684\u534f\u8bae\u4e00\u65e6\u5728\u9875\u9762\u4e0a\u516c\u5e03\u5373\u6709\u6548\u4ee3\u66ff\u539f\u6765\u7684\u534f\u8bae\u3002\u60a8\u5728\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u8f6f\u4ef6\u4ea7\u54c1\u4e4b\u524d\uff0c\u5e94\u4ed4\u7ec6\u9605\u8bfb\u672c\u534f\u8bae\uff0c\u5982\u4e0d\u540c\u610f\u672c\u670d\u52a1\u534f\u8bae\u53ca\u6216\u968f\u65f6\u5bf9\u5176\u7684\u4fee\u6539\uff0c\u8bf7\u505c\u6b62\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u670d\u52a1\u5185\u5bb9\u3002\n2. \u7279\u522b\u7533\u660e\uff0c\u672a\u6210\u5e74\u4eba\u5e94\u5728\u6cd5\u5b9a\u76d1\u62a4\u4eba\u7684\u966a\u540c\u4e0b\u5ba1\u9605\u548c\u63a5\u53d7\u672c\u534f\u8bae\u3002\u672a\u6210\u5e74\u4eba\u5728\u4f7f\u7528\u672c\u516c\u53f8\u7684\u670d\u52a1\u524d\uff0c\u5e94\u4e8b\u5148\u53d6\u5f97\u7236\u6bcd\uff08\u76d1\u62a4\u4eba\uff09\u7684\u540c\u610f\u3002\u82e5\u7236\u6bcd\uff08\u76d1\u62a4\u4eba\uff09\u5e0c\u671b\u672a\u6210\u5e74\u4eba\uff08\u5c24\u5176\u662f\u5341\u5c81\u4ee5\u4e0b\u5b50\u5973\uff09\u5f97\u4ee5\u4f7f\u7528\u672c\u670d\u52a1\uff0c\u5fc5\u987b\u4ee5\u6cd5\u5b9a\u76d1\u62a4\u4eba\u8eab\u4efd\u52a0\u4ee5\u5224\u65ad\u672c\u670d\u52a1\u662f\u5426\u7b26\u5408\u4e8e\u672a\u6210\u5e74\u4eba\u3002\u672a\u6210\u5e74\u4eba\u7528\u6237\u5e94\u5f53\u5728\u5408\u7406\u7a0b\u5ea6\u5185\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u670d\u52a1\u5185\u5bb9\uff0c\u4e0d\u5f97\u56e0\u4f7f\u7528\u672c\u516c\u53f8\u63d0\u4f9b\u7684\u670d\u52a1\u5185\u5bb9\u800c\u5f71\u54cd\u4e86\u65e5\u5e38\u7684\u5b66\u4e60\u751f\u6d3b\u3002\u7528\u6237\u7406\u89e3\u672c\u516c\u53f8\u65e0\u4e49\u52a1\u5bf9\u672c\u6b3e\u524d\u8ff0\u4e8b\u9879\u8fdb\u884c\u4efb\u4f55\u5f62\u5f0f\u7684\u5ba1\u67e5\u548c\u786e\u8ba4\u3002\n\u4e8c\u3001\u6743\u5c5e\u58f0\u660e\n1. \u672c\u516c\u53f8\u53d1\u5e03\u7684\u6240\u6709\u8f6f\u4ef6\u5747\u53d7\u4e2d\u534e\u4eba\u6c11\u5171\u548c\u56fd\u7248\u6743\u6cd5\u4fdd\u62a4\uff0c\u7528\u6237\u53ef\u4ee5\u514d\u8d39\u4e0b\u8f7d\u5e76\u4f7f\u7528\uff0c\u4f46\u672a\u7ecf\u672c\u516c\u53f8\u8bb8\u53ef\uff0c\u7528\u6237\u4e0d\u5f97\u4fee\u6539\u672c\u516c\u53f8\u6e38\u620f\u7684\u5ba2\u6237\u7aef\u7a0b\u5e8f\uff1b\u4e0d\u5f97\u5236\u4f5c\u3001\u4f20\u64ad\u6216\u4f7f\u7528\u6270 \u4e71\u6b63\u5e38\u6e38\u620f\u79e9\u5e8f\u6216\u6709\u635f\u672c\u516c\u53f8\u5229\u76ca\u7684\u4efb\u4f55\u7b2c\u4e09\u65b9\u8f6f\u4ef6\u3002\n2. \u672c\u516c\u53f8\u6e38\u620f\u670d\u52a1\u7684\u7ecf\u8425\u6743\u5c5e\u4e8e\u672c\u516c\u53f8\u6240\u6709\uff0c\u9664\u975e\u4e0e\u672c\u516c\u53f8\u53e6\u7b7e\u534f\u8bae\uff0c\u7528\u6237\u540c\u610f\u672c\u670d\u52a1\u4ec5\u4f9b\u4e2a\u4eba\u4e14\u4ec5\u4e8e\u672c\u670d\u52a1\u5e73\u53f0\u8303\u56f4\u5185\u975e\u5546\u4e1a\u6027\u8d28\u7684\u4f7f\u7528\u3002\u7528\u6237\u540c\u65f6\u627f\u8bfa\u4e0d\u7ecf\u672c\u516c\u53f8\u4e66\u9762\u540c\u610f\uff0c\u4e0d\u5f97\u5229\u7528\u672c\u670d\u52a1\u8fdb\u884c\u5e7f\u544a\u3001\u9500\u552e\u3001\u5546\u4e1a\u5c55\u793a\u7b49\u5546\u4e1a\u6027\u7528\u9014\u3002\n3. \u7528\u6237\u53d1\u8868\u4e8e\u672c\u516c\u53f8\u6e38\u620f\u53ca\u914d\u5957\u7f51\u7ad9\u7684\u6240\u6709\u5185\u5bb9\u4ec5\u4ee3\u8868\u7528\u6237\u81ea\u5df1\u7684\u7acb\u573a\u548c\u89c2\u70b9\uff0c\u4e0e\u672c\u516c\u53f8\u65e0\u5173\uff0c\u7531\u7528\u6237\u672c\u4eba\u627f\u62c5\u4e00\u5207\u6cd5\u5f8b\u8d23\u4efb\u3002\n\u4e09\u3001\u7528\u6237\u9690\u79c1\u5236\u5ea6\n\u672c\u516c\u53f8\u7edd\u5bf9\u4e0d\u4f1a\u4fee\u6539\u7528\u6237\u7684\u4e2a\u4eba\u8d44\u6599\uff0c\u6216\u7f16\u8f91\u6216\u900f\u9732\u7528\u6237\u5728\u6ce8\u518c\u8d44\u6599\u4e2d\u7684\u5bc6\u7801\u3001\u59d3\u540d\u3001\u5730\u5740\u3001\u7535\u8bdd\u3001\u8eab\u4efd\u8bc1\u53f7\u7801\u53ca\u4fdd\u5b58\u5728\u672c\u516c\u53f8\u4e2d\u7684\u975e\u516c\u5f00\u5185\u5bb9\uff0c\u9664\u975e\u6709\u6cd5\u5f8b\u8bb8\u53ef\u8981\u6c42\u6216\u672c\u516c\u53f8\u5728\u8bda\u4fe1\u7684\u57fa\u7840\u4e0a\u8ba4\u4e3a\u900f\u9732\u8fd9\u4e9b\u4fe1\u606f\u5728\u4ee5\u4e0b\u56db\u79cd\u60c5\u51b5\u662f\u5fc5\u8981\u7684\uff1a\n1. \u9075\u5b88\u6709\u5173\u6cd5\u5f8b\u89c4\u5b9a\uff0c\u9075\u4ece\u5408\u6cd5\u670d\u52a1\u7a0b\u5e8f\u3002\n2. \u7ef4\u62a4\u672c\u516c\u53f8\u7684\u5546\u6807\u6240\u6709\u6743\u3002\n3. \u5728\u7d27\u6025\u60c5\u51b5\u4e0b\u7aed\u529b\u7ef4\u62a4\u7528\u6237\u4e2a\u4eba\u548c\u793e\u4f1a\u5927\u4f17\u7684\u9690\u79c1\u5b89\u5168\u3002\n4. \u7b26\u5408\u5176\u4ed6\u76f8\u5173\u7684\u8981\u6c42\u3002\n\u56db\u3001\u6e38\u620f\u6570\u636e\u7684\u7279\u522b\u89c4\u5b9a\n\u672c\u516c\u53f8\u4e25\u7981\u4ee5\u4e0b\u884c\u4e3a\uff1a\n1. \u53d1\u5e03\u8fdd\u6cd5\u4fe1\u606f\u3001\u4e25\u91cd\u8fdd\u80cc\u793e\u4f1a\u516c\u5fb7\u3001\u4ee5\u53ca\u5176\u4ed6\u8fdd\u53cd\u6cd5\u5f8b\u7981\u6b62\u6027\u89c4\u5b9a\u7684\u884c\u4e3a\uff1b\n2. \u5229\u7528\u6e38\u620f\u4f5c\u5f0a\u5de5\u5177\u6216\u8005\u5916\u6302\u3001\u6e38\u620fBUG\u83b7\u53d6\u975e\u6cd5\u5229\u76ca\uff0c\u4e25\u91cd\u4fb5\u72af\u672c\u516c\u53f8\u5229\u76ca\u7684\u884c\u4e3a\uff1b\n3. \u8bba\u575b\u3001\u6e38\u620f\u4e2d\u4f20\u64ad\u975e\u6cd5\u8baf\u606f\u3001\u6728\u9a6c\u75c5\u6bd2\u3001\u5916\u6302\u8f6f\u4ef6\u7b49\u7684\u884c\u4e3a\uff1b\n4. \u56e0\u6e38\u620f\u4e2d\u4e3e\u529e\u7684\u6d3b\u52a8\u7ed3\u675f\uff0c\u76f8\u5173\u9053\u5177\u88ab\u5220\u9664\u6216\u5151\u6362\uff0c\u7528\u6237\u4e0d\u5f97\u63d0\u51fa\u7d22\u8d54\u7b49\u8981\u6c42\uff0c\u672c\u516c\u53f8\u5bf9\u4e8e\u6d3b\u52a8\u6709\u6700\u7ec8\u7684\u89e3\u91ca\u6743\u3002\n\u4e94\u3001\u670d\u52a1\u7684\u505c\u6b62\u548c\u66f4\u6539\n1. \u53d1\u751f\u4e0b\u5217\u60c5\u5f62\u4e4b\u4e00\u65f6\uff0c\u672c\u516c\u53f8\u6709\u6743\u505c\u6b62\u6216\u4e2d\u65ad\u5411\u7528\u6237\u63d0\u4f9b\u7684\u670d\u52a1\uff1a\u7528\u6237\u6709\u53d1\u5e03\u8fdd\u6cd5\u4fe1\u606f\u3001\u4e25\u91cd\u8fdd\u80cc\u793e\u4f1a\u516c\u5fb7\u3001\u4ee5\u53ca\u5176\u4ed6\u8fdd\u53cd\u6cd5\u5f8b\u7981\u6b62\u6027\u89c4\u5b9a\u7684\u884c\u4e3a\uff1b\n\ta. \u53d1\u5e03\u4e0d\u9053\u5fb7\u4fe1\u606f\u3001\u5e7f\u544a\u3001\u8a00\u8bba\u3001\u8fb1\u9a82\u9a9a\u6270\u4ed6\u4eba\uff0c\u6270\u4e71\u6b63\u5e38\u7684\u7f51\u7edc\u79e9\u5e8f\u548c\u6e38\u620f\u79e9\u5e8f\u7684\u884c\u4e3a\uff0c\u4ee5\u53ca\u5b9e\u65bd\u8fdd\u53cd\u672c\u534f\u8bae\u548c\u76f8\u5173\u89c4\u5b9a\u3001\u7ba1\u7406\u529e\u6cd5\u3001\u516c\u544a\u3001\u91cd\u8981\u63d0\u793a\uff0c\u5bf9\u672c\u516c\u53f8\u548c\u5176\u4ed6\u7528\u6237\u5229\u76ca\u9020\u6210\u635f\u5bb3\u7684\u5176\u4ed6\u884c\u4e3a\uff1b\n\tb. \u7531\u4e8e\u76f8\u5173\u653f\u5e9c\u673a\u6784\u7684\u8981\u6c42\u3002\n2. \u5728\u672c\u670d\u52a1\u6761\u6b3e\u7ea6\u5b9a\u7684\u60c5\u5f62\u4e0b\uff0c\u672c\u516c\u53f8\u5c31\u505c\u6b62\u6216\u66f4\u6539\u6216\u7ec8\u6b62\u5411\u7528\u6237\u6240\u63d0\u4f9b\u7684\u670d\u52a1\u800c\u53ef\u80fd\u4ea7\u751f\u7684\u4e0d\u4fbf\u6216\u635f\u5bb3\uff0c\u672c\u516c\u53f8\u5bf9\u7528\u6237\u672c\u4eba\u6216\u4efb\u4f55\u7b2c\u4e09\u4eba\u5747\u4e0d\u8d1f\u4efb\u4f55\u635f\u5bb3\u8d54\u507f\u8d23\u4efb\u3002\n3. \u672c\u516c\u53f8\u6709\u6743\u4ec5\u6839\u636e\u5176\u5224\u65ad\uff0c\u5355\u65b9\u51b3\u5b9a\u65b0\u589e\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u6682\u505c\u6216\u7ec8\u6b62\u5176\u6240\u63d0\u4f9b\u7684\u5168\u90e8\u6216\u90e8\u5206\u670d\u52a1\uff08\u5305\u62ec\u4e14\u4e0d\u9650\u4e8e\u589e\u52a0\u3001\u6682\u505c\u6216\u7ec8\u6b62\u67d0\u4e2a\u6e38\u620f\u7684\u8fd0\u8425\uff09\uff0c\u4e14\u65e0\u9700\u53e6\u884c\u4e2a\u522b\u901a\u77e5\u7528\u6237\uff0c\u7528\u6237\u4e0d\u5f97\u56e0\u6b64\u8981\u6c42\u4efb\u4f55\u8865\u507f\u6216\u8d54\u507f\u3002\n4. \u672c\u516c\u53f8\u5bf9\u5176\u670d\u52a1\u4e0d\u4fdd\u8bc1\u4e0d\u51fa\u73b0\u4efb\u4f55\u7a0b\u5e8fBUG\uff0c\u5e76\u5bf9\u7531\u6b64\u53ef\u80fd\u4ea7\u751f\u7684\u95ee\u9898\u4e0d\u627f\u62c5\u4efb\u4f55\u8d54\u507f\u8d23\u4efb\u3002\n\u516d\u3001\u670d\u52a1\u6761\u6b3e\u7684\u4fee\u6539\n\u672c\u516c\u53f8\u4fdd\u7559\u968f\u65f6\u4fee\u6539\u672c\u670d\u52a1\u6761\u6b3e\u7684\u6743\u5229\uff0c\u4fee\u6539\u672c\u670d\u52a1\u6761\u6b3e\u65f6\uff0c\u672c\u516c\u53f8\u5c06\u4e8e\u76f8\u5173\u7f51\u7ad9\u516c\u544a\u4fee\u6539\u7684\u4e8b\u5b9e\uff0c\u800c\u4e0d\u53e6\u5bf9\u7528\u6237\u8fdb\u884c\u4e2a\u522b\u901a\u77e5\u3002\u82e5\u7528\u6237\u4e0d\u540c\u610f\u4fee\u6539\u7684\u5185\u5bb9\uff0c\u53ef\u505c\u6b62\u4f7f\u7528\u672c\u516c\u53f8\u7684\u670d\u52a1\u3002\u82e5\u7528\u6237\u7ee7\u7eed\u4f7f\u7528\u672c\u516c\u53f8\u7684\u670d\u52a1\uff0c\u5373\u89c6\u4e3a\u7528\u6237\u5df2\u63a5\u53d7\u672c\u516c\u53f8\u6240\u4fee\u8ba2\u7684\u5185\u5bb9\u3002\n\u4e03\u3001\u6cd5\u5f8b\u9002\u7528\u548c\u4e89\u8bae\u89e3\u51b3\n1. \u672c\u534f\u8bae\u7684\u8ba2\u7acb\u3001\u6267\u884c\u548c\u89e3\u91ca\u53ca\u4e89\u8bae\u7684\u89e3\u51b3\u5747\u5e94\u9002\u7528\u4e2d\u56fd\u6cd5\u5f8b\u3002\n2. \u672c\u534f\u8bae\u6784\u6210\u53cc\u65b9\u5bf9\u672c\u534f\u8bae\u4e4b\u7ea6\u5b9a\u4e8b\u9879\u53ca\u5176\u4ed6\u6709\u5173\u4e8b\u5b9c\u7684\u5b8c\u6574\u534f\u8bae\uff0c\u9664\u672c\u534f\u8bae\u89c4\u5b9a\u7684\u4e4b\u5916\uff0c\u672a\u8d4b\u4e88\u672c\u534f\u8bae\u5404\u65b9\u5176\u4ed6\u6743\u5229\u3002\n3. \u5982\u672c\u534f\u8bae\u4e2d\u7684\u4efb\u4f55\u6761\u6b3e\u65e0\u8bba\u56e0\u4f55\u79cd\u539f\u56e0\u5b8c\u5168\u6216\u90e8\u5206\u65e0\u6548\u6216\u4e0d\u5177\u6709\u6267\u884c\u529b\uff0c\u672c\u534f\u8bae\u7684\u5176\u4f59\u6761\u6b3e\u4ecd\u5e94\u6709\u6548\u5e76\u4e14\u6709\u7ea6\u675f\u529b\u3002\n4. \u672c\u534f\u8bae\u4e2d\u7684\u6807\u9898\u4ec5\u4e3a\u65b9\u4fbf\u800c\u8bbe\uff0c\u4e0d\u5177\u6cd5\u5f8b\u6216\u5951\u7ea6\u6548\u679c\u3002\n5. \u5982\u53cc\u65b9\u5c31\u672c\u534f\u8bae\u5185\u5bb9\u6216\u5176\u6267\u884c\u53d1\u751f\u4efb\u4f55\u4e89\u8bae\uff0c\u53cc\u65b9\u5e94\u5c3d\u91cf\u53cb\u597d\u534f\u5546\u89e3\u51b3\uff1b\u534f\u5546\u4e0d\u6210\u65f6\uff0c\u4efb\u4f55\u4e00\u65b9\u5747\u53ef\u5411\u672c\u516c\u53f8\u6240\u5728\u5730\u7684\u4eba\u6c11\u6cd5\u9662\u63d0\u8d77\u8bc9\u8bbc\u3002\n6. \u5728\u9002\u7528\u6cd5\u5f8b\u5141\u8bb8\u7684\u6700\u5927\u8303\u56f4\u5185\uff0c\u672c\u516c\u53f8\u4fdd\u7559\u5bf9\u672c\u534f\u8bae\u7684\u6700\u7ec8\u89e3\u91ca\u6743\u3002\u7528\u6237\u5982\u5bf9\u672c\u534f\u8bae\u6709\u4efb\u4f55\u7591\u95ee\uff0c\u8bf7\u8054\u7cfb3624303643@qq.com\u3002\n\n\u7528\u6237\u534f\u8bae\u66f4\u65b0\u65e5\u671f\uff1a2021\u5e7410\u670818\u65e5\n    "],this.privacyPage=0,this.privacyPageTxtCount=400,this.privacyPageSum=[Math.ceil(this.privacyStr[0].length/this.privacyPageTxtCount),Math.ceil(this.privacyStr[1].length/this.privacyPageTxtCount)],this.isShare=!1,this.shareTime=0,this.shareFailBack=null,this.shareSucBack=null,this.videoFns={},this.nativeAds={},this.nativeAdListMap={},this.nativeAdCallMap={},this.nativeNodeMap={}}return a.prototype.setParaMap=function(a){this.paraMap=a},a.prototype.getPara=function(a){return this.paraMap.get(a)},a.prototype.getRuanZhu=function(){return this.ruanzhu},a.prototype.exit=function(){},a.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo={windowHeight:cc.view.getVisibleSize().height,windowWidth:cc.view.getVisibleSize().width}),this.sysInfo},a.prototype.hasPrivacy=function(){return!0},a.prototype.privacyAgree=function(){return n.default.getData("isAgree",0)||n.default.saveData("isAgree",1),1},a.prototype.privacyReject=function(){return n.default.saveData("isAgree",0),0},a.prototype.privacyNextPage=function(a){this.privacyPage+1<this.privacyPageSum[a]&&this.privacyPage++;var t=this.privacyPage*this.privacyPageTxtCount;return this.privacyStr[a].substring(t,t+this.privacyPageTxtCount)},a.prototype.privacyPrePage=function(a){this.privacyPage-1>=0&&this.privacyPage--;var t=this.privacyPage*this.privacyPageTxtCount;return this.privacyStr[a].substring(t,t+this.privacyPageTxtCount)},a.prototype.privacyPage1=function(a){return this.privacyPage=0,this.privacyStr[a].substring(0,this.privacyPageTxtCount)},a.prototype.getCtrl=function(a){return this.ctrl&&this.ctrl[a]?parseFloat(this.ctrl[a]):0},a.prototype.getPrivacyShort=function(){return""},a.prototype.getPrivacy=function(){return""},a.prototype.init=function(){n.default.log("init1\u76ee\u6807===>"+this.channel+",R:"+o.pzaChannel.isConfRemote+",gid:"+this.getPara("gid"))},a.prototype.isShareSuc=function(){return!((new Date).getTime()-this.shareTime<3e3||(this.shareTime=(new Date).getTime(),0))},a.prototype.canShare=function(){return!1},a.prototype.shareAppMessage=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null),t&&t()},a.prototype.copyToClip=function(a,t){var e=document.createElement("textarea");e.value=a,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="12pt";var o,i=getSelection();i.rangeCount>0&&(o=i.getRangeAt(0)),document.body.appendChild(e),e.select(),e.selectionStart=0,e.selectionEnd=a.length;try{document.execCommand("copy"),t()}catch(r){n.default.err(r),t("\u590d\u5236\u5931\u8d25!")}document.body.removeChild(e),o&&(i.removeAllRanges(),i.addRange(o))},a.prototype.showVideo=function(a){a.sucCall(),a.endCall()},a.prototype.addGird9Icon=function(){},a.prototype.gird9IconClick=function(){},a.prototype.showGird9=function(){},a.prototype.canAutoGird9=function(){return!1},a.prototype.closeGird9=function(){},a.prototype.showBanner=function(a,t,e){void 0===a&&(a=!1),void 0===t&&(t=null),void 0===e&&(e=null)},a.prototype.closeBanner=function(){},a.prototype.showBannerByTime=function(a){void 0===a&&(a=!1)},a.prototype.closeBannerByTime=function(){},a.prototype.checkNativeInsert=function(){return!1},a.prototype.showNative=function(a,t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=null)},a.prototype.loadAndShowNative=function(){},a.prototype.loadNative=function(){},a.prototype.findAndReport=function(){},a.prototype.reportAdShow=function(){},a.prototype.reportAdClick=function(){},a.prototype.closeNative=function(){},a.prototype.getNativeData=function(){},a.prototype.showCustomAd=function(a,t,e){void 0===t&&(t=!1),void 0===e&&(e=null)},a.prototype.closeCustomAd=function(a){void 0===a&&(a=!1)},a.prototype.showInter=function(a){void 0===a&&(a=!1)},a.prototype.closeInter=function(){},a.prototype.showDesktop=function(){},a.prototype.addShortcut=function(){},a.prototype.checkShortcut=function(){},a.prototype.recorderStart=function(){},a.prototype.recorderStop=function(){},a.prototype.getRecordTime=function(){return 0},a.prototype.shareVideo=function(a){void 0===a&&(a=null)},a.prototype.jumpTo=function(a,t,e,o){void 0===t&&(t=function(){}),void 0===e&&(e=function(){}),void 0===o&&(o=function(){})},a.prototype.canMoreGame=function(){return!1},a.prototype.showMoreGameBox=function(){},a.prototype.showSidebar=function(a){a&&a()},a.prototype.jpost=function(a,t,e){n.default.jpost(a,t,e)},a}();e.pzaChannelWeb=i,cc._RF.pop()},{"./pzaChannel":"pzaChannel","./pzakc":"pzakc"}],pzaChannelWx1:[function(a,t,e){"use strict";cc._RF.push(t,"647a5kYA3lKsouIwp/koyBL","pzaChannelWx1");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelWx1=void 0;var i=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="wx1",t.paraMap=new Map([["appId","wx000000000"],["vedioAd","adunit-8326ea3dc016f65f"]]),t.ruanzhu="",t.sharePicsArr=[{title:"{\u6709\u4eba@\u6211}\u5feb\u6765\u6311\u9009\u4f60\u7684\u5fc3\u52a8\u4e3b\u64ad",url:"https://mmocgame.qpic.cn/wechatgame/xQIymonI7UDQNaBQ6DEqwibh5guA7Gf0YyibM8lcVK5WOBOa7aFasHIAz1BJdmaicIz/0",id:"QCLyA+TbRv2sj5Odvg7p6A=="}],t}return n(t,a),t}(a("./pzaChannelWx").pzaChannelWx);e.pzaChannelWx1=i,cc._RF.pop()},{"./pzaChannelWx":"pzaChannelWx"}],pzaChannelWx:[function(a,t,e){"use strict";cc._RF.push(t,"d3233Z4pp5G1ohhvieWKzhz","pzaChannelWx");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannelWx=void 0;var i=a("../Common/pzaLocalData"),r=a("../Common/pzaSoundManager"),p=a("../Common/pzaStatisticsMgr"),l=a("./pzaChannel"),s=a("./pzaChannelWeb"),c=a("./pzakc"),u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.channel="wx",t.channelId=0,t.paraMap=new Map([["appId","wx987d4570f328b6d4"],["videoAd","adunit-b6ecbee0564eabed"],["ctrlId","662a0b22a331ce3adb82292d"],["gid","6625cc6ea331ce3adb8228f6"],["sharePicId","zwdzjs"]]),t.sharePicsArr=[{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",url:"https://mmocgame.qpic.cn/wechatgame/a06ia0rK6eLAFOr97s9y4MXbfDz3hjYEjhAT6lWwv10xALzjGl9thAIqw3EYNEwhN/0",id:"Xf4UCePgQ6Owe0gO7nnOkw=="},{title:"\u5927\u54e5\uff0c\u6765\u548c\u59b9\u59b9\u4e00\u8d77\u73a9\u597d\u5417\uff1f",url:"https://mmocgame.qpic.cn/wechatgame/I1v75NcAhVDGbaKAWabMVB4HY5iaW8HfrWOqvibxcq1ic32xLibRswZuVj6txBSykbHl/0",id:"7Ic8CnJeSN+yLEi8xpRO5w=="},{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",url:"https://mmocgame.qpic.cn/wechatgame/ydA3REVMkVhp7a79KzLgkuMOGfWLtxYPTfIzjc9qavnf4WsNysZDia5IlPAu23HYp/0",id:"YzLjZNGDSniMJgn2J9mxHQ=="},{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",url:"https://mmocgame.qpic.cn/wechatgame/bjpXOAwbcenrJKunQBbN1MXdMgh0MC7rZo1Iyk2FKdLa4w1IZ87vXsASVF4IAS9s/0",id:"d2bawcZ/R+CxiBrwqwKkYQ=="},{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",url:"https://mmocgame.qpic.cn/wechatgame/O6yeaZYUDPpMP9bZjUibBjTJIHdg6VS8qY9Q5gT3iaIIl3Zib8auuRyxnv5VBG2QU0F/0",id:"h3hF6zNARFOTk77nDaPNww=="}],t.ruanzhu="",t.channelObj=window.wx,t.sid=null,t.authorizationButton=null,t.onShowCall=null,t.cachedBannerSize=null,t.bannerTimeId=-1,t.shareIndex=0,t}return n(t,a),t.prototype.hasPrivacy=function(){return!0},t.prototype.getSysInfo=function(){return this.sysInfo||(this.sysInfo=this.channelObj.getSystemInfoSync()),this.sysInfo},t.prototype.init=function(t){var e=this;a.prototype.init.call(this,t);var o=this.channelObj;o.onShow(function(){cc.game.resume(),r.pzaSoundManager.resumeMusic(),e.isShare&&(e.isShareSuc()?(e.shareSucBack&&e.shareSucBack(),o.showToast({title:"\u5206\u4eab\u6210\u529f!"})):(o.showToast({title:"\u5206\u4eab\u5931\u8d25"}),e.shareFailBack&&e.shareFailBack()),e.isShare=!1),e.onShowCall&&e.onShowCall(),e.onShowCall=null}),o.onHide(function(){cc.game.pause(),e.isShare&&(e.shareTime=(new Date).getTime())});var n=this.getPara("ctrlId"),p=this;if(n){var s=c.default.getData("sid",null);s||(s=p.channelObj.getLaunchOptionsSync().scene,c.default.saveData("sid",s));var u={id:n,sid:s};c.default.jpost("https://ga.gametdd.com/adCtrl/agd/conf",u,function(a,t){a?c.default.err(a):""+t.code=="0"?(p.ctrl=t.data,c.default.log("\u8fd4\u56de",p.ctrl),i.pzaLocalData.maxAdShareCount=parseInt(p.ctrl.p2),i.pzaLocalData.maxShareRwdCount=parseInt(p.ctrl.p3)):c.default.err("\u8fd4\u56de\u503c\u9519\u8bef:"+JSON.stringify(t))})}o.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),this.wxLogin(function(){t&&t()}),l.pzaChannel.getSharePics("zwdzjs",function(a){e.initSharePic(a)})},t.prototype.initSharePic=function(a){var t=this;console.log("initsharePic: ",a),null==a||a.length<=0||(this.sharePicsArr=[],a.forEach(function(a){var e={title:a.txt,url:a.picUrl,id:a.picId};t.sharePicsArr.push(e)}))},t.prototype.onLoginSuc=function(){var a=this,t=this.channelObj.getLaunchOptionsSync().query;if(t&&(console.log("query query: ",t,t.act),t.wxPicId&&t.wxPicId.length>6&&l.pzaChannel.picShareFrom(this.getPara("sharePicId"),t.wxPicId),t.act&&t.sid)){if("recruit_share"==t.act){if(i.pzaLocalData.data.hasInGame)return void(i.pzaLocalData.autoPopInvitateView=!0);2!=i.pzaLocalData.data.reportShareState&&(i.pzaLocalData.data.reportShareState=1,i.pzaLocalData.addDirty("reportShareState")),i.pzaLocalData.autoPopInvitateView=!0}this.sid=t.sid,this.shareFrom(),null!=i.pzaLocalData.data.playerNick&&null!=i.pzaLocalData.data.playerAvatar||this.wxCheckPrivacySetting(function(t){t?a.wxPrivacyAuthorize(function(){a.getUserInfo(null)},null):a.getUserInfo(null)},null)}},t.prototype.wxCheckPrivacySetting=function(a,t){var e=window.wx;"function"==typeof e.getPrivacySetting?e.getPrivacySetting({success:function(t){console.log(t),a&&a(t&&t.needAuthorization)},fail:function(){t&&t()},complete:function(){}}):t&&t()},t.prototype.wxPrivacyAuthorize=function(a,t){var e=window.wx;"function"==typeof e.requirePrivacyAuthorize?e.requirePrivacyAuthorize({success:function(){console.log("\u7528\u6237\u540c\u610f\u9690\u79c1\u6388\u6743"),a&&a()},fail:function(){console.log("\u7528\u6237\u62d2\u7edd\u9690\u79c1\u6388\u6743"),t&&t()},complete:function(){}}):t&&t()},t.prototype.wxLogin=function(a){void 0===a&&(a=function(){});var e=window.wx,o=this;e.login({success:function(e){if(!e.code)return console.error("\u767b\u5f55\u5931\u8d25\uff01"+e.errMsg),void a();console.log("wxLogin",e.code),c.default.jpost("https://ga.gamejym.com/fcm/wx/getOpenId",{appId:o.getPara("appId"),code:e.code},function(e,n){return e?(c.default.err(e),void a()):(c.default.log("\u83b7\u53d6openId",n),n.openid?(o.channelUserId=n.openid||"",t.unionid=n.unionid||"",void a()):(c.default.err("\u83b7\u53d6openId\u5931\u8d25",n),void a()))})},fail:function(){a()}}),e.onShareAppMessage(function(){var a=o.getShareObj();return null!=a?{title:a.title,imageUrl:a.url,imageUrlId:a.id}:{title:"\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01",imageUrl:"https://mmocgame.qpic.cn/wechatgame/a06ia0rK6eLAFOr97s9y4MXbfDz3hjYEjhAT6lWwv10xALzjGl9thAIqw3EYNEwhN/0",imageUrlId:"Xf4UCePgQ6Owe0gO7nnOkw=="}})},t.prototype.cacheBanner=function(){var a=this;if(this.getPara("bannerAd")&&(!this.bannerAd||!this.cachedBannerSize)){c.default.log("cacheBanner\u5f00\u59cb,size:",this.cachedBannerSize,"ad:",this.bannerAd);var t=this.channelObj,e={adUnitId:this.getPara("bannerAd"),adIntervals:30,style:{left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1}};this.bannerAd=t.createBannerAd(e),this.bannerAd.onError(function(t){c.default.log("cachedBanner\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(t)),a.bannerAd=null,a.cachedBannerSize=null}),this.bannerAd.onResize(function(t){console.log("cachedBanner onResize===",t.height,t.width),a.cachedBannerSize=t}),this.bannerAd.show().then(function(){c.default.log("cachedBanner\u6210\u529f")}).catch(function(t){c.default.log("cachedBanner err:"+JSON.stringify(t)),a.bannerAd=null,a.cachedBannerSize=null})}},t.prototype.showBanner=function(a,t,e){var o=this,n=this.getPara("bannerAd");if(n){if(c.default.log("showBanner isShow",n,e),this.bannerAd&&this.cachedBannerSize){var i=t?t(this.cachedBannerSize):{top:this.getSysInfo().windowHeight-this.cachedBannerSize.height,left:(this.getSysInfo().windowWidth-this.cachedBannerSize.width)/2};return this.bannerAd.style.top=i.top,this.bannerAd.style.left=i.left,i.height&&(this.bannerAd.style.height=i.height),void c.default.log("cachedBanner style:",this.bannerAd.style.top,this.bannerAd.style.left,this.bannerAd.style.height)}var r=this.channelObj,p={adUnitId:n,adIntervals:30,style:{left:0,top:this.getSysInfo().windowHeight-1}};this.bannerAd=r.createBannerAd(p),this.bannerAd.onError(function(a){c.default.log("banner\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a)),o.bannerAd=null,o.cachedBannerSize=null}),this.bannerAd.onResize(function(a){console.log("banner onResize===",a.height,a.width);var e=t?t(a):{top:o.getSysInfo().windowHeight-a.height,left:(o.getSysInfo().windowWidth-a.width)/2};o.bannerAd.style.top=e.top,o.bannerAd.style.left=e.left,e.height&&(o.bannerAd.style.height=e.height),c.default.log("bannerAd style:",o.bannerAd.style.top,o.bannerAd.style.left,o.bannerAd.style.height)}),this.bannerAd.show().then(function(){c.default.log("banner\u663e\u793a\u6210\u529f")}).catch(function(a){o.bannerAd=null,o.cachedBannerSize=null,c.default.log("showBanner err:"+JSON.stringify(a))})}},t.prototype.closeBanner=function(){if(this.bannerAd)if(this.cachedBannerSize){var a={left:1-this.getSysInfo().windowWidth,top:this.getSysInfo().windowHeight-1};this.bannerAd.style.left=a.left,this.bannerAd.style.top=a.top}else this.bannerAd.hide()},t.prototype.showBannerByTime=function(a){var t=this;if(void 0===a&&(a=!1),this.getPara("bannerAd")){var e=30;this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner(),e<30&&(e=30),this.showBanner(a,null,"battle"),this.bannerTimeId=setInterval(function(){t.showBanner(a,null,"battle")},1e3*e)}},t.prototype.closeBannerByTime=function(){this.bannerTimeId>=0&&clearInterval(this.bannerTimeId),this.closeBanner()},t.prototype.canShare=function(){return!0},t.prototype.getShareObj=function(){var a=this.shareIndex;return this.shareIndex++,this.shareIndex>=this.sharePicsArr.length&&(this.shareIndex=0),this.sharePicsArr[a]},t.prototype.sendUserInfo=function(a){if(null!=a)if(i.pzaLocalData.data.playerNick=a.nickName,i.pzaLocalData.data.playerAvatar=a.avatarUrl,i.pzaLocalData.addDirty("playerNick","playerAvatar"),this.channelUserId){var t={appId:this.getPara("appId"),openId:this.channelUserId,nickName:a.nickName||"",avatar:a.avatarUrl||""};c.default.jpost("https://ga.gamejym.com/fcm/wx/sendUserInfo",t,function(a,t){a?c.default.err(a):c.default.log("sendUserInfo\u8fd4\u56de",t)})}else console.error("sendUserInfo\u65e0openId")},t.prototype.getUserInfo=function(a,t,e){void 0===e&&(e=!0);var o=this.channelObj,n=this;o.getSetting({success:function(i){if(i.authSetting["scope.userInfo"])o.getUserInfo({success:function(t){console.log("userInfo",t.userInfo),n.sendUserInfo(t.userInfo),a&&a()}});else{n.destroyAuthorizationButton();var r=n.getSysInfo().screenWidth,p=n.getSysInfo().screenHeight;if(n.authorizationButton=o.createUserInfoButton({type:"image",image:"img/startGameButton.png",style:t||{left:0,top:0,width:r,height:p}}),!n.authorizationButton)return;n.authorizationButton.onTap(function(t){e&&n.destroyAuthorizationButton(),console.log("userInfo2",t),n.sendUserInfo(t.userInfo),a&&a()})}}})},t.prototype.destroyAuthorizationButton=function(){try{if(!this.authorizationButton)return;this.authorizationButton.destroy(),this.authorizationButton=null}catch(a){this.authorizationButton=null,console.error(a)}},t.prototype.shareAppMessage=function(a,t,e){var o=this;if(void 0===t&&(t=null),void 0===e&&(e=null),this.canShare()){var n=this.getShareObj(),i="";if(a&&a.act&&(i=a.act),!i){var r={title:n.title,imageUrl:n.url,imageUrlId:n.id,query:null};return r.query="wxPicId="+n.id,this.channelObj.shareAppMessage(r),this.shareFailBack=e,this.shareSucBack=t,this.isShare=!0,void l.pzaChannel.picShareTo(this.getPara("sharePicId"),n.id)}if(!this.channelUserId)return console.error("\u8bf7\u5148\u767b\u5f55"),this.wxLogin(),void this.channelObj.showToast({title:"\u8bf7\u5148\u767b\u5f55"});var p=this;p.shareFailBack=null,p.shareSucBack=null,p.isShare=!1,"recruit_share"==a.act&&(p.isShare=!0,p.shareFailBack=e,p.shareSucBack=t);var s={appId:this.getPara("appId"),openId:this.channelUserId,act:i};c.default.jpost("https://ga.gamejym.com/fcm/wx/shareTo",s,function(a,t){if(a)c.default.err(a);else{c.default.log("shareTo\u8fd4\u56de",t);var e={title:n.title,imageUrl:n.url,imageUrlId:n.id,query:null};t&&0===t.code&&(e.query="sid="+t.data.sid+"&act="+i+"&wxPicId="+n.id,c.default.log("shareQuery",e.query)),p.channelObj.shareAppMessage(e),l.pzaChannel.picShareTo(o.getPara("sharePicId"),n.id)}})}},t.prototype.shareByScreenShot=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null);var o=this,n=16*canvas.height/9;try{canvas.toTempFilePath({x:.3234375*n+(canvas.width-n)/2,y:0,width:.5078125*n,height:.85*canvas.height,destWidth:500,destHeight:400,success:function(n){o.channelObj.shareAppMessage({title:a,imageUrl:n.tempFilePath}),o.shareFailBack=e,o.shareSucBack=t,o.isShare=!0},fail:function(a){console.error("shareByScreenShot",a)}})}catch(i){console.error("shareByScreenShot",i)}},t.prototype.shareFrom=function(){if(c.default.log("sharefrom in"),this.sid&&this.channelUserId){console.log("sharefrom star: ",i.pzaLocalData.getAllStar());var a={sid:this.sid,openId:this.channelUserId,star:i.pzaLocalData.getAllStar()};c.default.jpost("https://ga.gamejym.com/fcm/wx/shareFrom",a,function(a,t){a?c.default.err("sharefrom Error: "+a):c.default.log("shareFrom\u8fd4\u56de",t)})}},t.prototype.getShareResult=function(a,t){if(!this.channelUserId)return t([]);c.default.log("getshareResult in");var e={appId:this.getPara("appId"),openId:this.channelUserId,act:a};c.default.jpost("https://ga.gamejym.com/fcm/wx/getShareResult",e,function(a,e){if(a)return c.default.err("getshareResult: ",a),void t([]);c.default.log("getShareResult\u8fd4\u56de",e),e&&0===e.code?t(e.data):t([])})},t.prototype.copyToClip=function(a,t){this.channelObj.setClipboardData({data:a,success:function(){t()},fail:function(){t("\u590d\u5236\u5931\u8d25")}})},t.prototype.showVideo=function(a){var t=this;p.pzaStatisticsMgr.sendEvent("AdsButtonClick",{name:"adsid",value:a.adsid},{name:"adname",value:a.posName});var e=this.getPara("videoAd");if(e){this.rewardedVideoAd=this.channelObj.createRewardedVideoAd({adUnitId:e}),this.videoFns.onLoad&&this.rewardedVideoAd.offLoad(this.videoFns.onLoad),this.videoFns.onError&&this.rewardedVideoAd.offError(this.videoFns.onError),this.videoFns.onClose&&this.rewardedVideoAd.offClose(this.videoFns.onClose),this.rewardedVideoAd.offLoad(),this.rewardedVideoAd.offError(),this.rewardedVideoAd.offClose();var o=this;o.videoFns.onLoad=function(){c.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},o.videoFns.onError=function(e){c.default.err(e),cc.game.resume(),r.pzaSoundManager.resumeMusic(),a.failCall(),a.endCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:-1},{name:"adname",value:a.posName}),i.pzaLocalData.maxAdShareCount>0&&i.pzaLocalData.data.adShareCount<i.pzaLocalData.maxAdShareCount?t.shareAppMessage({title:null,act:null,adsid:a.adsid},function(){i.pzaLocalData.data.adShareCount++,i.pzaLocalData.addDirty("adShareCount"),a.sucCall&&a.sucCall()}):t.channelObj.showToast({title:"\u6682\u65e0\u5e7f\u544a"})},o.videoFns.onClose=function(t){cc.game.resume(),r.pzaSoundManager.resumeMusic(),t&&t.isEnded?(a.sucCall(),c.default.eventReport("\u5e7f\u544a\u5b8c\u6210-"+a.posName),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:0},{name:"adname",value:a.posName})):(a.failCall(),p.pzaStatisticsMgr.sendEvent("AdsPlayRet",{name:"adsid",value:a.adsid},{name:"playret",value:1},{name:"adname",value:a.posName})),a.endCall()},o.rewardedVideoAd.onLoad(o.videoFns.onLoad),o.rewardedVideoAd.onError(o.videoFns.onError),o.rewardedVideoAd.onClose(o.videoFns.onClose),o.rewardedVideoAd.show().then(function(){cc.game.pause(),c.default.log("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(){o.rewardedVideoAd.load().then(function(){return c.default.log("\u624b\u52a8\u52a0\u8f7d\u6210\u529f"),o.rewardedVideoAd.show().then(function(){cc.game.pause()}).catch(function(){cc.game.resume(),r.pzaSoundManager.resumeMusic()})}).catch(function(){cc.game.resume(),r.pzaSoundManager.resumeMusic()})})}},t.prototype.showGird9=function(){var a=this.getPara("gird9");if(a){var t=this.ctrl&&this.ctrl.p3?parseInt(this.ctrl.p3):1;if(c.default.log("showCustomAd-wx","p3",t),t){var e=this.channelObj,o={adUnitId:a,adIntervals:30,style:{top:this.getSysInfo().windowHeight/2-280,left:0}};this.boxPortalAd=e.createCustomAd(o),this.boxPortalAd.offError(),this.boxPortalAd.onError(function(a){c.default.log("custom\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.boxPortalAd.show().then(function(){c.default.log("custom\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){c.default.log("custom\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})}}},t.prototype.closeGird9=function(){this.boxPortalAd&&this.boxPortalAd.hide()},t.prototype.canAutoGird9=function(){return!0},t.prototype.showNative=function(a,t,e){var o=this,n=this.getPara(e);if(n){c.default.log("showCustomAd-wx",e);var i=this.channelObj;if(this.nativeAds[e]&&this.nativeAds[e].isShow())c.default.log("icon\u6b63\u5728\u663e\u793a\u4e2d\uff0c\u4e0d\u518d\u91cd\u590d\u663e\u793a");else{var r=this.getSysInfo().windowHeight;c.default.log("showCustomAd-wx",e,n,r,this.getSysInfo().windowWidth);var p={adUnitId:n,adIntervals:30,style:{top:r/2-100,left:e.indexOf("2")<0?0:this.getSysInfo().windowWidth-70}};this.nativeAds[e]=i.createCustomAd(p),this.nativeAdCallMap.onError&&this.nativeAds[e].offError(this.nativeAdCallMap.onError),this.nativeAds[e].offError(),this.nativeAdCallMap.onError=function(a){c.default.log("\u539f\u751f\u6a21\u677f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a)),o.nativeNodeMap[e]=0},this.nativeAds[e].onError(this.nativeAdCallMap.onError),this.nativeAdCallMap.onHide&&this.nativeAds[e].offHide(this.nativeAdCallMap.onHide),this.nativeAds[e].offHide(),this.nativeAdCallMap.onHide=function(){o.nativeNodeMap[e]=0,c.default.log("\u539f\u751ficon\u5173\u95ed")},this.nativeAds[e].onHide(this.nativeAdCallMap.onHide),this.nativeAds[e].show().then(function(){c.default.log("\u539f\u751ficon\u5c55\u793a\u5b8c\u6210"),o.nativeNodeMap[e]=1}).catch(function(a){c.default.log("\u539f\u751ficon\u5c55\u793a\u5931\u8d25"+JSON.stringify(a)),o.nativeNodeMap[e]=0})}}},t.prototype.checkNativeInsert=function(a){if(a.indexOf("Insert")>0&&this.nativeNodeMap[a]&&this.nativeNodeMap[a].active){if(this.nativeNodeMap.nativeInsertAd&&this.nativeNodeMap.nativeInsertAd.active)return c.default.log("\u539f\u751f\u63d2\u5c4f\u53ea\u80fd\u51fa\u4e00\u4e2a"),!1;if(this.nativeNodeMap.nativeInsertAd2&&this.nativeNodeMap.nativeInsertAd2.active)return c.default.log("\u539f\u751f\u63d2\u5c4f\u53ea\u80fd\u51fa\u4e00\u4e2a2"),!1}return!0},t.prototype.closeNative=function(a){this.nativeAds[a]&&this.nativeAds[a].hide()},t.prototype.showInter=function(){var a=this.getPara("insertAd");if(a){var t=this.channelObj;c.default.log("showInter isShow",a),this.interstitialAd=t.createInterstitialAd({adUnitId:a}),this.interstitialAd.onError(function(a){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(a))}),this.interstitialAd.show().then(function(){c.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(a){c.default.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25"+JSON.stringify(a))})}},t.prototype.showDesktop=function(){},t.prototype.jumpTo=function(a,t,e,o){c.default.log("jumpTo:"+a),this.channelObj.navigateToMiniProgram({appId:a,success:t,fail:e,complete:o})},t.prototype.requestSubscribeMessage=function(a,t){var e=this.channelObj;if("function"==typeof e.requestSubscribeMessage){console.log("\u89e6\u53d1\u5fae\u4fe1\u8ba2\u9605",a);try{e.requestSubscribeMessage({tmplIds:a,success:function(e){console.log(e,e[a[0]]),"accept"==e[a[0]]&&t&&t()},fail:function(a){console.log(a)}})}catch(o){console.error(o)}}},t.prototype.createGameClubButton=function(a,t,e,o){var n=this.channelObj;if(null!=n.createGameClubButton&&"function"==typeof n.createGameClubButton){var i=this.getSysInfo();if(null!=i){var r=i.screenHeight/720,p={type:"image",image:"img/game_club.png",style:{left:a*r,top:t*r,width:e*r,height:o*r}};return n.createGameClubButton(p)}}},t.prototype.getGameClubData=function(a){var t=this.channelObj;if("function"==typeof t.getGameClubData){var e=function(){t.login({success:function(e){console.log("wxLogin succ  loginRes.code is : "+e.code),t.getGameClubData({dataTypeList:[{type:1},{type:4},{type:5}],success:function(t){console.log(t);var o=t&&t.encryptedData,n=t&&t.signature,i=t&&t.iv;a&&a({authCode:e.code,encryptedData:o,iv:i,signature:n})},fail:function(t){console.error(t),a&&a(null)}})},fail:function(t){console.log("wxlogin fail"),console.error(t),a&&a(null)}})};t.getSetting({success:function(o){null==o||null==o.authSetting||1!=o.authSetting["scope.gameClubData"]?(console.log("autoorize pop"),t.authorize({scope:"scope.gameClubData",success:function(){e()},fail:function(){a&&a(null)}})):e()}})}else a&&a(null)},t.prototype.getAbTest=function(a){var t=this.channelObj;if(null!=t.getExptInfoSync&&"function"==typeof t.getExptInfoSync){var e=t.getExptInfoSync(["expt_1720752823"]);return console.log("getAbTest",e),null==e?null:("1"==e.expt_1720752823&&(i.pzaLocalData.isNoZj=!0),e[a])}console.log("wx not getExptInfoSync")},t.prototype.registerOnshow=function(a){this.onShowCall=a},t.unionid=null,t}(s.pzaChannelWeb);e.pzaChannelWx=u,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","./pzaChannel":"pzaChannel","./pzaChannelWeb":"pzaChannelWeb","./pzakc":"pzakc"}],pzaChannel:[function(a,t,e){"use strict";cc._RF.push(t,"891b1VRbSpD0accy/xnCqYi","pzaChannel"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChannel=void 0;var o=a("../Common/pzaTipManager"),n=a("./pzaChannelIOS"),i=a("./pzaChannelKs"),r=a("./pzaChannelMy"),p=a("./pzaChannelMy1"),l=a("./pzaChannelNoAD"),s=a("./pzaChannelOppo"),c=a("./pzaChannelTap"),u=a("./pzaChannelTT"),d=a("./pzaChannelVivo"),h=a("./pzaChannelWeb"),m=a("./pzaChannelWx"),f=a("./pzakc"),z=function(){function a(){this.channel="noAD",this.channelMap=new Map([["web",new h.pzaChannelWeb],["wx",new m.pzaChannelWx],["ios",new n.pzaChannelIOS],["tt",new u.pzaChannelTT],["oppo",new s.pzaChannelOppo],["vivo",new d.pzaChannelVivo],["taptap",new c.pzaChannelTap],["my",new r.pzaChannelMy],["my1",new p.pzaChannelMy1],["ks",new i.pzaChannelKs],["noAD",new l.pzaChannelNoAD]])}return a.instance=function(){return a._me||(a._me=new a),a._me},a.decodeWxData=function(a,t,e,o,n,i){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/decodeWxData",{appId:a,encryptedData:t,iv:e,code:o,signature:n},function(a,t){if(a)return console.error(a),void i(null);0===t.code?i(t.data&&t.data.dataList):i(null)})},a.subMsg=function(a,t,e,o,n){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/wxOrderSubMsg",{appId:a,openId:t,template_id:e,signDay:o},function(a,t){if(a)return console.error(a),void n(-1);0===t.code?n(0):n(-1)})},a.redeem=function(a,t,e,o){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/redeem",{code:e,gameId:a,userId:t},function(a,t){if(a)return console.error(a),void o(null);if(0===t.code){var e=f.default.strArr(t.data);if(e){for(var n=[],i=0;i<e.length;i++){var r=e[i].split(":");r.length<2?console.error("\u5151\u6362\u7801\u914d\u7f6e\u6709\u8bef",e[i]):n.push({key:r[0],val:r[1]})}o(n)}else o(null)}else o(null)})},a.getSharePics=function(a,t){var e={game:a,query:"aaa",v:"1.2.0",s:"s"};this.instance().getChannel().jpost("https://dk.gametdd.com/htApi/ht_api/getSharePic",e,function(a,e){if(a)return f.default.err(a),void t([]);if(!e||0!=e.re||!e.data||e.data.length<=0)return t([]);for(var o=[],n=0;n<e.data.length;n++){var i=e.data[n].split("|");o.push({picId:i[0],txt:i[1],picUrl:i[2]})}t(o)})},a.leaderBoradUpdate=function(a,t,e,o){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/leaderBoradUpdate",{gameId:a,userId:t,score:e},function(a,t){return a?(f.default.err(a),void o(null)):t.code?(f.default.err(t.code),void o(null)):void o(t.data)})},a.leaderBoradRank=function(a,t,e){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/leaderBoradRank",{gameId:a,userId:t},function(a,t){return a?(f.default.err(a),void e(-1)):t.code?(f.default.err(t.code),void e(-1)):void e(t.data)})},a.getLeaderBorad=function(a,t){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/getLeaderBorad",{gameId:a},function(a,e){return a?(f.default.err(a),void t([])):e.code?(f.default.err(e.code),void t([])):void t(e.data)})},a.reportToRankList=function(a,t,e,o,n,i){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/phbUpdate",{userId:t,gameId:a,userName:e,userIcon:o,sortVal:n},function(a){i&&i(),a&&f.default.err(a)})},a.getRankList=function(a,t){this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/gameApi/phbList",{gameId:a},function(a,e){return a?(f.default.err(a),void t([])):e.code?(f.default.err(e.code),void t([])):void t(e.data)})},a.loadFromRemote=function(t,e){a.isConfRemote?e(null):(f.default.log("\u52a0\u8f7d\u8fdc\u7a0b\u5b58\u6863\u5f00\u59cb....",t),this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/userSave/getUserData",{game_id:a.gameName+a.instance().channel,user_id:t},function(a,t){return a?(f.default.err(a),void e(a)):0===t.code&&t.data?(delete t.data.user_id,delete t.data.game_id,delete t.data._id,f.default.log("\u8fdc\u7a0b\u5b58\u6863\u52a0\u8f7d\u5b8c\u6210"),void e(null,t.data.saveData)):void e(null)}))},a.saveToRemote=function(t,e,n){void 0===n&&(n=!1),a.isConfRemote||this.instance().getChannel().jpost("https://ga.gamejym.com/fcm/userSave/saveUserData",{game_id:a.gameName+a.instance().channel,user_id:t,saveData:e},function(a,t){a?f.default.err(a):(f.default.log("saveToRemote\u5b8c\u6210:"+JSON.stringify(t)),n&&o.pzaTipManager.showHomeTip("\u6570\u636e\u4e0a\u4f20\u6210\u529f",null,3))})},a.picShareTo=function(a,t){var e={game:a,query:"aaa",v:"1.2.0",s:"s",wxPicId:t};this.instance().getChannel().jpost("https://dk.gametdd.com/htApi/ht_api/shareTo",e,function(a){a&&f.default.err(a)})},a.picShareFrom=function(a,t){var e={game:a,query:"aaa",v:"1.2.0",s:"s",wxPicId:t};this.instance().getChannel().jpost("https://dk.gametdd.com/htApi/ht_api/shareFrom",e,function(a){a&&f.default.err(a)})},a.getRemoteTime=function(){f.default.jpost("https://ga.gamejym.com/fcm/gameApi/serverTime",{},function(a,t){a?console.log("serverTime: ",a):(f.default.log("get serverTime",t),t.ts&&f.default.setServerTimeToLocal(t.ts))})},a.prototype.getPara=function(a){return this.getChannel().getPara(a)},a.prototype.getChannel=function(){return this.channelMap.get(this.channel)},a.prototype.getRuanZhu=function(){return this.getChannel().getRuanZhu()},a.prototype.exit=function(){this.getChannel().exit()},a.prototype.getSysInfo=function(){return this.getChannel().getSysInfo()},a.prototype.hasPrivacy=function(){return this.getChannel().hasPrivacy()},a.prototype.privacyReject=function(){return this.getChannel().privacyReject()},a.prototype.privacyAgree=function(){return this.getChannel().privacyAgree()},a.prototype.privacyNextPage=function(a){return this.getChannel().privacyNextPage(a)},a.prototype.privacyPrePage=function(a){return this.getChannel().privacyPrePage(a)},a.prototype.privacyPage1=function(a){return this.getChannel().privacyPage1(a)},a.prototype.getCtrl=function(a){return this.getChannel().getCtrl(a)},a.prototype.getPrivacyShort=function(){return this.getChannel().getPrivacyShort()},a.prototype.getPrivacy=function(){return this.getChannel().getPrivacy()},a.prototype.init=function(a){this.getChannel().init(a)},a.prototype.canShare=function(){return this.getChannel().canShare()},a.prototype.shareAppMessage=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.getChannel().shareAppMessage(a,t,e)},a.prototype.copyToClip=function(a,t){this.getChannel().copyToClip(a,t)},a.prototype.showVideo=function(a){this.getChannel().showVideo(a)},a.prototype.addGird9Icon=function(a,t){this.getChannel().addGird9Icon(a,t)},a.prototype.gird9IconClick=function(){this.getChannel().gird9IconClick()},a.prototype.showGird9=function(){this.getChannel().showGird9()},a.prototype.canAutoGird9=function(){return this.getChannel().canAutoGird9()},a.prototype.closeGird9=function(){this.getChannel().closeGird9()},a.prototype.showBanner=function(a,t,e){void 0===a&&(a=!1),void 0===t&&(t=null),void 0===e&&(e=null),this.getChannel().showBanner(a,t,e)},a.prototype.closeBanner=function(){this.getChannel().closeBanner()},a.prototype.showBannerByTime=function(a){void 0===a&&(a=!1),this.getChannel().showBannerByTime(a)},a.prototype.closeBannerByTime=function(){this.getChannel().closeBannerByTime()},a.prototype.checkNativeInsert=function(a){return this.getChannel().checkNativeInsert(a)},a.prototype.showNative=function(a,t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=null),this.getChannel().showNative(a,t,e,o,n)},a.prototype.loadAndShowNative=function(a,t,e){this.getChannel().loadAndShowNative(a,t,e)},a.prototype.loadNative=function(a,t){this.getChannel().loadNative(a,t)},a.prototype.findAndReport=function(){this.getChannel().findAndReport()},a.prototype.reportAdShow=function(a,t){this.getChannel().reportAdShow(a,t)},a.prototype.reportAdClick=function(a){this.getChannel().reportAdClick(a)},a.prototype.closeNative=function(a){this.getChannel().closeNative(a)},a.prototype.getNativeData=function(a){this.getChannel().getNativeData(a)},a.prototype.showCustomAd=function(a,t,e){void 0===t&&(t=!1),void 0===e&&(e=null),this.getChannel().showCustomAd(a,t,e)},a.prototype.closeCustomAd=function(a){void 0===a&&(a=!1),this.getChannel().closeCustomAd(a)},a.prototype.showInter=function(a){void 0===a&&(a=!1),this.getChannel().showInter(a)},a.prototype.closeInter=function(){this.getChannel().closeInter()},a.prototype.showDesktop=function(a,t){this.getChannel().showDesktop(a,t)},a.prototype.checkShortcut=function(a){this.getChannel().checkShortcut(a)},a.prototype.addShortcut=function(a){this.getChannel().addShortcut(a)},a.prototype.recorderStart=function(){this.getChannel().recorderStart()},a.prototype.recorderStop=function(){this.getChannel().recorderStop()},a.prototype.getRecordTime=function(){return this.getChannel().getRecordTime()},a.prototype.shareVideo=function(a){void 0===a&&(a=null),this.getChannel().shareVideo(a)},a.prototype.jumpTo=function(a,t,e,o){void 0===t&&(t=function(){}),void 0===e&&(e=function(){}),void 0===o&&(o=function(){}),this.getChannel().jumpTo(a,t,e,o)},a.prototype.canMoreGame=function(){return this.getChannel().canMoreGame()},a.prototype.showMoreGameBox=function(a,t,e){this.getChannel().showMoreGameBox(a,t,e)},a.prototype.showComm=function(){"ios"===this.getChannel().channel&&this.getChannel().showComm()},a.version="1.0.30",a.verMap={pza1B:{key:"sxWHACSj4ghJoBt9",id:"660b6996b898e60eabd66c59"},debug:{key:"ihiKqvgY3kNFwou4",id:"65dbfb5a05db8b4be9b19b21"},dev:{key:"gWtyRomDWsImGFAD",id:"6672aa160b505b2c6a57d417"},demo1:{key:"bUa53t5USIzfGVRk",id:"6672adba0b505b2c6a57d5f6"},demo2:{key:"VYr2U86UJYXfUBId",id:"6672adc10b505b2c6a57d613"},demo3:{key:"k2Kgpu4rtBHhBl0q",id:"6672adc70b505b2c6a57d630"}},a.isConfRemote=!1,a.remoteVerKey="debug",a.adDayMax=5,a.gameName="\u690d\u7269\u5927\u6218\u50f5\u5c381\u4ee3",a}();e.pzaChannel=z,cc._RF.pop()},{"../Common/pzaTipManager":"pzaTipManager","./pzaChannelIOS":"pzaChannelIOS","./pzaChannelKs":"pzaChannelKs","./pzaChannelMy":"pzaChannelMy","./pzaChannelMy1":"pzaChannelMy1","./pzaChannelNoAD":"pzaChannelNoAD","./pzaChannelOppo":"pzaChannelOppo","./pzaChannelTT":"pzaChannelTT","./pzaChannelTap":"pzaChannelTap","./pzaChannelVivo":"pzaChannelVivo","./pzaChannelWeb":"pzaChannelWeb","./pzaChannelWx":"pzaChannelWx","./pzakc":"pzakc"}],pzaChapterConfig:[function(a,t,e){"use strict";cc._RF.push(t,"3e462gHxl9CDojzK6SoDnHG","pzaChapterConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChapterConfig=void 0;var o=function(){function a(a,t,e){this.chapter=1,this.chapterName=null,this.partCount=0,this.chapter=a,this.chapterName=t,this.partCount=e}return a.chapterConfigMap=new Map([[1,new a(1,"\u50f5\u5c38\u6765\u88ad",10)],[2,new a(2,"\u9ed1\u5e55\u964d\u4e34",10)],[3,new a(3,"\u540e\u9662\u544a\u6025",10)],[4,new a(4,"\u8ff7\u96fe\u91cd\u91cd",10)],[5,new a(5,"\u5c4b\u9876\u51b3\u6218",10)]]),a}();e.pzaChapterConfig=o,cc._RF.pop()},{}],pzaCherryBomb:[function(a,t,e){"use strict";cc._RF.push(t,"f74c6b9TIpBYZF6od1SUQB5","pzaCherryBomb");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCherryBomb=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../../Load/pzaPreLoadManager"),u=a("../Data/pzaBuffData"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=a("./pzaAttackType"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=(z.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),l.pzaSoundManager.playAudio("JalapenoReady",1),this.animation.playAnimation("attack",!1,function(){l.pzaSoundManager.playAudio("cherrybomb",1),null!==e.baseData&&null!=e.baseData.plantData&&e.baseData.plantData.adClearPlant?e.adBoom():e.attack()}),h.pzaGameState.onlyShroomCofee=!1},t.prototype.attack=function(){var a=this;d.pzaEffectManager.createFrameEffect(c.pzaResourceUrl.CHERRY_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),null),window.pzaMapManager.shakeMap(),this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),this.death();var t=0,e=1.5*h.pzaGameState.map.getBlockWidth(),o=window.pzazombieManager.findZombiesByXY(this.baseData.xIndex,this.baseData.yIndex);null==o&&(o=[]),this.baseData.xIndex>=7&&null!=window.pzazombieManager.drZomBoss&&o.push(window.pzazombieManager.drZomBoss),o.forEach(function(e){var o=e&&e.baseData;null==o||o.isDead||o.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||(e&&e.hurt(a.baseData.atk,a.baseData,m.pzaAttackType.BOOM),e.baseData.isDead&&t++)}),window.pzaMapManager.LadderMap.forEach(function(t,o){s.pzaUtil.getDistance(a.baseData.logicPos,t.logicPos)>e||(t.close(),window.pzaMapManager.LadderMap.delete(o))}),h.pzaGameState.gameMode!=h.pzaGameMode.MINIGAME_SMALL&&h.pzaGameState.gameMode!=h.pzaGameMode.SMALL_ZOMBIE&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_3,t)},t.prototype.adBoom=function(){var a=this;window.pzaMapManager.shakeMap(),d.pzaEffectManager.createFrameEffect(c.pzaResourceUrl.CHERRY_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),null),this.death(),window.pzazombieManager.zombieMap.forEach(function(t,e){null==e||e.isDead||(e.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)?t&&t.hurt(a.baseData.atk,a.baseData,m.pzaAttackType.DEATH):t&&t.hurt(5e4,a.baseData,m.pzaAttackType.BOOM))}),window.pzaMapManager.LadderMap.forEach(function(a,t){a.close(),window.pzaMapManager.LadderMap.delete(t)})},t.prototype.flaserDeath=function(){var a=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},i([y],t)}(f.pzaBasePlant));e.pzaCherryBomb=g,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaCherryJalapeno:[function(a,t,e){"use strict";cc._RF.push(t,"e4a9ed3tdtP5Zon3JYFIJn7","pzaCherryJalapeno");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCherryJalapeno=void 0;var r=a("../../Common/pzaWorldEventManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaJalapeno"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.attack=function(){var a=this;window.pzaplantManager.removePlant(this.baseData),this.death();var t=window.pzaMapManager,e=this.baseData.yIndex,o=c.pzaGameState.map.getMapRow();t.shakeMap();var n;n=0===e?[0,1]:e===o?[o-1,o]:[e-1,e,e+1];for(var i=0;i<n.length;i++){for(var d=n[i],h=c.pzaGameState.map.getBlockLogicPos(0,d,0,0),m=0;m<12;m++){var f=h.clone();f.x+=100*m,c.pzaGameState.map.fixMapYOffset(d,f,0);var z=.1*m+.5;m>=5&&(z=.05*m+.5),s.pzaEffectManager.createBoomFireEffect(d,z,f,null)}t.removeRowIceGround(d);for(var y=0;y<=8;y++)t.removeLadder(y,d);var g=window.pzazombieManager.zombieDatas[d],v=Array.from(g);null!=window.pzazombieManager.drZomBoss&&v.push(window.pzazombieManager.drZomBoss.baseData),v.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(p.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,u.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==l.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(p.pzaBuffType.FROST),t.buffData.removeBuff(p.pzaBuffType.FROZEN))}})}r.pzaWorldEventManager.triggerEvent(r.pzaWorldEventType.JALAPENO_BOOM,this.baseData)},i([m],t)}(d.pzaJalapeno));e.pzaCherryJalapeno=f,cc._RF.pop()},{"../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaJalapeno":"pzaJalapeno"}],pzaChomper:[function(a,t,e){"use strict";cc._RF.push(t,"a41fdxYsaxBIZPWmsxhOAdl","pzaChomper");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaChomper=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.eating=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.eating=!1,c.pzaGameState.isZombieMode()?this.animation.playAnimation(t.plantData.eatTime>0?"T_idle2":"T_idle1",!0):this.animation.playAnimation(t.plantData.eatTime>0?"idle2":"idle1",!0),c.pzaGameState.onlyShroomCofee=!1,c.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead){if(this.baseData.plantData.eatTime>0)return this.baseData.plantData.eatTime-=t,void(this.baseData.plantData.eatTime<=0&&(this.eating=!0,this.animation.playAnimation(c.pzaGameState.isZombieMode()?"T_eat":"eat",!1,function(){e.eating=!1,e.animation.playAnimation(c.pzaGameState.isZombieMode()?"T_idle1":"idle1",!0)})));if(!this.eating){var o=this.findAttackTarget();null!=o&&this.attack(o)}}},t.prototype.findAttackTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1;if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.DIVE))&&(o.zombieData.zombieType!=s.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(l.pzaBuffType.FROZEN)||o.zombieData.toolType==s.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType!=s.pzaZombieEnum.BUNGEE_ZOMBIE||o.xIndex!=a.baseData.xIndex)){var n=p.pzaUtil.getDistance(o.logicPos,a.baseData.logicPos);if(o.logicPos.x<=a.baseData.logicPos.x)n<=.5*c.pzaGameState.map.getBlockWidth()&&(t=o,e=0);else if(!(n>1.8*c.pzaGameState.map.getBlockWidth()))return-1==e?(t=o,void(e=n)):void(e<=n||(t=o,e=n))}}),null==t){var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t}},t.prototype.attack=function(a){var t=this;this.baseData.plantData.eatTime=40,this.animation.playAnimation(c.pzaGameState.isZombieMode()?"T_attack":"attack",!1,function(){c.pzaGameState.isZombieMode()?t.animation.playAnimation(t.baseData.plantData.eatTime>0?"T_idle2":"T_idle1",!0):t.animation.playAnimation(t.baseData.plantData.eatTime>0?"idle2":"idle1",!0)},function(){if(null!=t.baseData&&!t.baseData.isDead){var e=window.pzazombieManager.getZombie(a);null==e||null==e.baseData||e.baseData.isDead?t.baseData.plantData.eatTime=0:(e.hurt(t.baseData.atk,t.baseData,u.pzaAttackType.EAT),null==a.zombieData||a.zombieData.cate!==s.pzaZombieCate.Gargantuar&&a.zombieData.zombieType!=s.pzaZombieEnum.DR_ZOMBOSS?(r.pzaSoundManager.playAudio("ChomperAtk"),a.isDead||(t.baseData.plantData.eatTime=0)):t.baseData.plantData.eatTime=0)}})},i([m],t)}(d.pzaBasePlant));e.pzaChomper=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaCleanCar:[function(a,t,e){"use strict";cc._RF.push(t,"5a52ePJqmdPd7fMu7FAbLQM","pzaCleanCar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCleanCar=void 0;var r=a("../Achieve/pzaAchieve"),p=a("../Achieve/pzaAchieveMgr"),l=a("../Common/pzaBaseComponent"),s=a("../Common/pzaCollisionManager"),c=a("../Common/pzaGroupEnum"),u=a("../Common/pzaNodeManager"),d=a("../Common/pzaSoundManager"),h=a("../Common/pzaSpineController"),m=a("../Common/pzaTipManager"),f=a("../Common/pzaWorldEventManager"),z=a("../Load/pzaBundleObjectPool"),y=a("../Load/pzaPreLoadManager"),g=a("./Data/pzaBaseData"),v=a("./Data/pzaZombieEnum"),b=a("./Effect/pzaDrZomBall"),S=a("./Effect/pzaShadowEffect"),P=a("./Plant/pzaAttackType"),C=a("./Zombie/pzaZombieBody"),D=a("./pzaEffectManager"),M=a("./pzaGameState"),E=cc._decorator,_=E.ccclass,T=E.property,w=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lawnCar=null,t.poolCar=null,t.roofCar=null,t.hasTrigger=!1,t.carType=1,t.inWater=!1,t.yIndex=0,t.killCount=0,t.isDead=!1,t.shadow=null,t.collider=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),f.pzaWorldEventManager.addListener(f.pzaWorldEventType.CLEAR_SCREEN,this.clearScreen,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),f.pzaWorldEventManager.removeListener(f.pzaWorldEventType.CLEAR_SCREEN,this.clearScreen,this)},t.prototype.init=function(a,t){var e=this;this.lawnCar.active=1==a,this.poolCar.node.active=2==a,this.roofCar.node.active=3==a,this.carType=a,this.yIndex=t,this.hasTrigger=!1,this.inWater=!1,this.isDead=!1,this.killCount=0,2==a?(this.poolCar.playAnimation("idle1",!1),this.poolCar.pauseAnimation()):3==a&&(this.roofCar.node.scale=1,this.roofCar.playAnimation("idle",!1),this.roofCar.pauseAnimation());var o=M.pzaGameState.map.getMapOriPos();if(null!=o){var n=cc.v2(o.x-26,o.y+M.pzaGameState.map.getYPos(t)+55);this.node.stopAllActions(),this.node.setPosition(n.add(cc.v2(-100,0))),this.node.runAction(cc.sequence(cc.moveTo(.05+.02*t,n),cc.callFunc(function(){e.createShadow()})));var i=10*-t+1;this.node.zIndex=i,this.baseData=new g.pzaBaseData(null,null),this.baseData.logicPos=n,this.baseData.hp=1,s.pzaCollisionManager.getInstance.addPlantByRow(this.yIndex,this)}},t.prototype.recover=function(a,t){this.lawnCar.active=1==a,this.poolCar.node.active=2==a,this.roofCar.node.active=3==a,this.carType=a,this.yIndex=t,this.hasTrigger=!1,this.inWater=!1,this.isDead=!1,this.killCount=0,2==a?(this.poolCar.playAnimation("idle1",!1),this.poolCar.pauseAnimation()):3==a&&(this.roofCar.node.scale=1,this.roofCar.playAnimation("idle",!1),this.roofCar.pauseAnimation());var e=M.pzaGameState.map.getMapOriPos();if(null!=e){var o=cc.v2(e.x-26,e.y+M.pzaGameState.map.getYPos(t)+55);this.node.stopAllActions(),this.node.setPosition(o);var n=10*-t+1;this.node.zIndex=n,this.baseData=new g.pzaBaseData(null,null),this.baseData.logicPos=o,this.baseData.hp=1,this.createShadow(),s.pzaCollisionManager.getInstance.addPlantByRow(this.yIndex,this)}},t.prototype.logicUpdate=function(a){if(this.hasTrigger&&!this.isDead){var t=this.node.x;t+=450*a;var e=cc.v2(t,this.node.y);if(M.pzaGameState.map.fixMapYOffset(this.yIndex,e,55),this.baseData.logicPos=e,this.node.setPosition(e),2!=this.carType&&window.pzaMapManager.isInWaterWay(this.yIndex)&&(o=M.pzaGameState.map.getMapOriPos())&&t>=o.x+10)return D.pzaEffectManager.createWaterFlowerEffect(this.yIndex,cc.v2(this.node.x,this.node.y-30),null,1),void this.close();if(2==this.carType){var o=M.pzaGameState.map.getMapOriPos(),n=M.pzaGameState.map.getMapWidth();if(!this.inWater&&t>o.x+10&&t<o.x+n)return this.inWater=!0,this.poolCar.playAnimation("idle2",!0),D.pzaEffectManager.createWaterFlowerEffect(this.yIndex,cc.v2(this.node.x+this.poolCar.node.x,this.node.y+this.poolCar.node.y),null,1),void this.shadow.hideShadow();if(this.inWater&&t>=o.x+n)return this.inWater=!1,this.poolCar.playAnimation("idle1",!0),D.pzaEffectManager.createWaterFlowerEffect(this.yIndex,cc.v2(this.node.x+this.poolCar.node.x,this.node.y+this.poolCar.node.y),null,1),void this.shadow.showShadow()}t>=640&&this.close()}},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.onCollision=function(a){var t=this;if(null!=a&&!this.isDead){if(a.node.group==c.pzaGroupEnum.ZOMBIE){var e=a.node.getComponent(C.pzaZombieBody);this.colliderZombie(e&&e.baseData)}if(a.node.group==c.pzaGroupEnum.ZOMBIE_BULLET&&1==a.tag){var o=a.node.getComponent(b.pzaDrZomBall);if(null==o||o.yIndex!=this.yIndex)return;this.isDead=!0,this.roofCar.node.stopAllActions(),this.roofCar.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){t.close()})))}}},t.prototype.colliderZombie=function(a){var t=this;if(null!=a&&!a.isDead&&a.yIndex==this.yIndex&&a.zombieData.zombieType!=v.pzaZombieEnum.DR_ZOMBOSS){if(this.hasTrigger)2==this.carType&&this.inWater&&this.poolCar.playAnimation("suck2",!1,function(){t.poolCar.playAnimation("idle2",!0)},null,2);else{if(null!=a.zombieData&&a.zombieData.direction>0)return;this.hasTrigger=!0;var e=10*-this.yIndex+6;this.node.zIndex=e,M.pzaGameState.partStar>0&&!M.pzaGameState.lossCar&&(M.pzaGameState.lossCar=!0,M.pzaGameState.partStar--,m.pzaTipManager.showLossStarTip(!0,!1)),1==this.carType&&(D.pzaEffectManager.createSmokeEffect("blow2",cc.v2(this.node.x-54,this.node.y+16)),d.pzaSoundManager.playAudio("CleanCar")),2==this.carType?(this.poolCar.playAnimation("idle1",!0),d.pzaSoundManager.playAudio("pool_cleancar")):3==this.carType&&(this.roofCar.playAnimation("idle",!0),d.pzaSoundManager.playAudio("CleanCar"))}var o=window.pzazombieManager.getZombie(a);o&&o.hurt(1800,null,P.pzaAttackType.CLEAN_CAR),this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_17,this.killCount)}},t.prototype.createShadow=function(){var a=this,t=u.pzaNodeManager.getDownEffectNode();z.pzaBundleObjectPool.requestInstantByUrl2(y.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(t);var n=o.getComponent(S.pzaShadowEffect);1==a.carType?n&&n.init(a.baseData,cc.v2(10,-20)):2==a.carType?n&&n.init(a.baseData,cc.v2(0,-35)):n&&n.init(a.baseData,cc.v2(0,-30)),a.shadow=n}else console.error(e)})},t.prototype.pauseSelf=function(){this.hasTrigger&&(this.poolCar.pauseAnimation(),this.roofCar.pauseAnimation())},t.prototype.resumeSelf=function(){this.hasTrigger&&(this.poolCar.resumeAnimation(),this.roofCar.resumeAnimation())},t.prototype.clearScreen=function(){this.hasTrigger&&this.close()},t.prototype.close=function(){s.pzaCollisionManager.getInstance.delPlantByRow(this.yIndex,this),a.prototype.close.call(this),this.baseData.isDead=!0,window.pzaMapManager.CleanCar.delete(this)},i([T({displayName:"\u8349\u5730\u63a8\u8f66",type:cc.Node})],t.prototype,"lawnCar",void 0),i([T({displayName:"\u6c34\u6c60\u63a8\u8f66",type:h.pzaSpineController})],t.prototype,"poolCar",void 0),i([T({displayName:"\u5c4b\u9876\u63a8\u8f66",type:h.pzaSpineController})],t.prototype,"roofCar",void 0),i([_],t)}(l.pzaBaseComponent);e.pzaCleanCar=w,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaCollisionManager":"pzaCollisionManager","../Common/pzaGroupEnum":"pzaGroupEnum","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaTipManager":"pzaTipManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./Data/pzaBaseData":"pzaBaseData","./Data/pzaZombieEnum":"pzaZombieEnum","./Effect/pzaDrZomBall":"pzaDrZomBall","./Effect/pzaShadowEffect":"pzaShadowEffect","./Plant/pzaAttackType":"pzaAttackType","./Zombie/pzaZombieBody":"pzaZombieBody","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState"}],pzaCobBullet:[function(a,t,e){"use strict";cc._RF.push(t,"1a3dcDmX6BMdJpCLB7fJQn3","pzaCobBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCobBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Plant/pzaAttackType"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.targetPos=null,t.targetXIndex=-1,t.logicPos=null,t.moveSpeed=800,t.atk=0,t.up=!0,t}return n(t,a),t.prototype.init=function(a,t,e,o){this.atk=a,this.logicPos=t,this.targetPos=e,this.targetXIndex=o,this.node.scaleY=1,this.up=!0},t.prototype.logicUpdate=function(a){this.logicPos.y+=a*this.moveSpeed*(this.up?1:-1),this.node.setPosition(this.logicPos),this.up?this.logicPos.y>=560&&(this.logicPos.x=this.targetPos.x,this.up=!1,this.node.scaleY=-1):this.logicPos.y<=this.targetPos.y&&this.boom()},t.prototype.boom=function(){var a=this;this.close(),p.pzaSoundManager.playAudio("cobBoom"),c.pzaEffectManager.createCobBoomEffect(this.targetPos),c.pzaEffectManager.createCobBoomHoleEffect(this.targetPos);var t=2*u.pzaGameState.map.getBlockWidth(),e=window.pzazombieManager.findFixRangeZombies(this.targetPos,t);null==e&&(e=[]),this.targetXIndex>=7&&null!=window.pzazombieManager.drZomBoss&&e.push(window.pzazombieManager.drZomBoss),e.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||t&&t.hurt(a.atk,null,s.pzaAttackType.BOOM)})},i([h],t)}(r.pzaBaseComponent));e.pzaCobBullet=m,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaCobCannon:[function(a,t,e){"use strict";cc._RF.push(t,"c43cb9C3IdBn4h1XVq6oIBG","pzaCobCannon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCobCannon=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaNodeManager"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaUtil"),d=a("../../Common/pzaWorldEventManager"),h=a("../Bullet/pzaCobBullet"),m=a("../pzaGameState"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cobPrefab=null,t.blinkTime=3,t.loadTime=6.25,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.loadTime=6.25,this.blinkTime=u.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),m.pzaGameState.cobCannonCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_19,m.pzaGameState.cobCannonCount),m.pzaGameState.onlyShroomCofee=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.loadTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){if(!a.baseData.plantData.cobLoadFinish&&a.loadTime<=0)return c.pzaSoundManager.playAudio("shoop"),void a.animation.playAnimation("out",!1,function(){a.baseData.plantData.cobLoadFinish=!0,t()});a.blinkTime>0?a.animation.playAnimation(a.baseData.plantData.cobLoadFinish?"idle2":"idle1",!1,t):(a.blinkTime=u.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation(a.baseData.plantData.cobLoadFinish?"idle2_eye":"idle1_eye",!1,t))};this.animation.playAnimation(this.baseData.plantData.cobLoadFinish?"idle2":"idle1",!1,t)},t.prototype.shoot=function(a,t){var e=this;this.baseData.plantData.cobLoadFinish&&(this.baseData.plantData.cobLoadFinish=!1,this.loadTime=36,m.pzaGameState.cobCannon=null,this.animation.playAnimation("attack",!1,this.playNormalAni.bind(this),function(){c.pzaSoundManager.playAudio("coblaunch");var o=cc.v2(e.baseData.logicPos.x+5,e.baseData.logicPos.y+400),n=s.pzaNodeManager.getUpEffectNode(),i=l.pzaGameCommonPool.requestInstant(e.cobPrefab,!1);if(null!=n&&null!=i){i.setParent(n),i.setPosition(o);var r=i.getComponent(h.pzaCobBullet);r&&r.init(e.baseData.atk,o,a,t)}}))},t.prototype.launchCob=function(a){null!=a.data&&a.data==this.baseData&&this.shoot(a.pos,a.xIndex)},t.prototype.close=function(){a.prototype.close.call(this),this.baseData==m.pzaGameState.cobCannon&&(m.pzaGameState.cobCannon=null)},i([g({displayName:"\u7389\u7c73\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cobPrefab",void 0),i([y],t)}(f.pzaBasePlant);e.pzaCobCannon=v,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaCobBullet":"pzaCobBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaCobHoleEffect:[function(a,t,e){"use strict";cc._RF.push(t,"7cbbcdIxOBLtofgWQTsMO3q","pzaCobHoleEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCobHoleEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onEnable=function(){var t=this;a.prototype.onEnable.call(this),this.node.stopAllActions(),this.node.opacity=255,this.node.runAction(cc.sequence(cc.delayTime(1),cc.fadeOut(.5),cc.callFunc(function(){t.close()})))},t.prototype.pauseSelf=function(){this.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.node.resumeAllActions()},i([l],t)}(r.pzaBaseComponent));e.pzaCobHoleEffect=s,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent"}],pzaCoffeeBean:[function(a,t,e){"use strict";cc._RF.push(t,"9a409nTfSpAAr41TDJZfv8e","pzaCoffeeBean");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCoffeeBean=void 0;var r=a("../../Common/pzaSoundManager"),p=a("./pzaBasePlant"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.wakeTime=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.wakeTime=0,this.animation.playAnimation("idle",!0)},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),!(null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.wakeTime+=t,this.wakeTime<1))){var e=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaplantManager.plantDataMap.get(e);this.attack(o)}},t.prototype.attack=function(a){var t=this;r.pzaSoundManager.playAudio("CoffeeBean"),this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),this.animation.playAnimation("death",!1,function(){t.death()},null);var e=window.pzaplantManager.getPlantByData(a);null!=e&&(r.pzaSoundManager.playAudio("garden_wakeup"),e.wakeUp())},i([s],t)}(p.pzaBasePlant));e.pzaCoffeeBean=c,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","./pzaBasePlant":"pzaBasePlant"}],pzaCollisionManager:[function(a,t,e){"use strict";cc._RF.push(t,"f47c5wLAAZL35lEo7ZfwU94","pzaCollisionManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCollisionManager=void 0;var r=a("./pzaWorldEventManager"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.self=null,t.collisionMgr=null,t.bulletRowMap=new Map,t.zombieBulletRowMap=new Map,t.zombieBulletOtherMap=new Map,t.bulletOtherMap=new Map,t.plantRowMap=new Map,t.bulletPlantRowMap=new Map,t.zombieRowMap=new Map,t.zombieOtherMap=new Map,t.jarMap=new Map,t.brainMap=new Map,t.colliedMap=new Map,t.removeColliedSet=new Set,t.isOn=!1,t.cTime=0,t}var e;return n(t,a),e=t,Object.defineProperty(t,"getInstance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.self=e.instance=this,this.collisionMgr=cc.director.getCollisionManager(),this.collisionMgr.enabled=!1,this.collisionMgr.enabledDebugDraw=!1;for(var a=-1;a<7;a++)this.bulletRowMap.set(a,new Map),this.zombieBulletRowMap.set(a,new Map),this.plantRowMap.set(a,new Map),this.bulletPlantRowMap.set(a,new Map),this.zombieRowMap.set(a,new Map),this.jarMap.set(a,new Map);this.collisionMgr.addCollider=function(){},this.collisionMgr.removeCollider=function(){},r.pzaWorldEventManager.addListener(r.pzaWorldEventType.GAME_OVER,this.setOff,this)},t.prototype.zombieToPlant=function(a,t){this.zombieRowMap.get(a).delete(t.uuid),this.plantRowMap.get(a).set(t.uuid,t)},t.prototype.zombieChangeRow=function(a,t,e){this.zombieRowMap.get(t).delete(a.uuid),this.zombieRowMap.get(e).set(a.uuid,a)},t.prototype.addBulletByRow=function(a,t){a<0?this.bulletOtherMap.set(t.uuid,t):this.bulletRowMap.get(a).set(t.uuid,t)},t.prototype.addZombieBulletByRow=function(a,t){a<0?this.zombieBulletOtherMap.set(t.uuid,t):this.zombieBulletRowMap.get(a).set(t.uuid,t)},t.prototype.addPlantByRow=function(a,t){this.plantRowMap.get(a).set(t.uuid,t)},t.prototype.addBulletPlantByRow=function(a,t){this.bulletPlantRowMap.get(a).set(t.uuid,t)},t.prototype.addZombieByRow=function(a,t){a<0?this.zombieOtherMap.set(t.uuid,t):this.zombieRowMap.get(a).set(t.uuid,t)},t.prototype.addJarByRow=function(a,t){this.jarMap.get(a).set(t.uuid,t)},t.prototype.addBulletOther=function(a){this.bulletOtherMap.set(a.uuid,a)},t.prototype.addZombieOther=function(a){this.zombieOtherMap.set(a.uuid,a)},t.prototype.addBrain=function(a,t){this.brainMap.set(a,t)},t.prototype.delBrain=function(a){this.brainMap.delete(a)},t.prototype.delJarByRow=function(a,t){this.jarMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delBulletByRow=function(a,t){a<0?this.bulletOtherMap.delete(t.uuid):this.bulletRowMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delZombieBulletByRow=function(a,t){a<0?this.zombieBulletOtherMap.delete(t.uuid):this.zombieBulletRowMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delPlantByRow=function(a,t){this.plantRowMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delBulletPlantByRow=function(a,t){this.bulletPlantRowMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delZombieByRow=function(a,t){a<0?this.zombieOtherMap.delete(t.uuid):this.zombieRowMap.get(a).delete(t.uuid),this.removeColliedSet.add(t.getCollider())},t.prototype.delBulletOther=function(a){this.bulletOtherMap.delete(a.uuid),this.removeColliedSet.add(a.getCollider())},t.prototype.delZombieBulletOther=function(a){this.zombieBulletOtherMap.delete(a.uuid),this.removeColliedSet.add(a.getCollider())},t.prototype.delZombieOther=function(a){this.zombieOtherMap.delete(a.uuid),this.removeColliedSet.add(a.getCollider())},t.prototype.getCollisionManager=function(){return this.self?this.self.collisionMgr:null},t.prototype.setOn=function(){this.isOn=!0},t.prototype.setOff=function(){this.isOn=!1;for(var a=-1;a<7;a++)this.bulletRowMap.get(a).clear(),this.zombieBulletRowMap.get(a).clear(),this.plantRowMap.get(a).clear(),this.bulletPlantRowMap.get(a).clear(),this.zombieRowMap.get(a).clear(),this.jarMap.get(a).clear();this.zombieOtherMap.clear(),this.bulletOtherMap.clear(),this.zombieBulletOtherMap.clear(),this.brainMap.clear(),this.colliedMap.clear(),this.removeColliedSet.clear()},t.prototype.getRectFromCollider=function(a){var t=a.node,e=a.offset,o={x:0,y:0,width:0,height:0},n=a.radius,i=a.poSource;if(i?"function"==typeof i&&(i=i.call(a)):i=t.convertToWorldSpaceAR(cc.v2()),o.x=i.x+e.x,o.y=i.y+e.y,n)o.width=n,o.height=n;else{var r=a.size;o.width=r.width,o.height=r.height}return o},t.prototype.rectRect=function(a,t){var e=a.width/2,o=a.height/2,n=a.x-e,i=a.y-o,r=a.x+e,p=a.y+o,l=t.width/2,s=t.height/2,c=t.x-l,u=t.y-s,d=t.x+l,h=t.y+s;return n<=d&&r>=c&&i<=h&&p>=u},t.prototype.isCollision=function(a,t){return!!this.rectRect(this.getRectFromCollider(a),this.getRectFromCollider(t))},t.prototype.checkColli=function(a,t){var e=this;a.forEach(function(o,n){var i=o.getCollider();if(i){if(i.enabled)for(var r=function(a){var n=t[a];n.forEach(function(a,t){var r=a.getCollider();r?r.enabled&&e.isCollision(i,r)&&(e.colliedMap.has(o.uuid+a.uuid)?o.onCollisionStay&&o.onCollisionStay(r,i):o.onCollisionEnter(r,i),e.colliedMap.set(o.uuid+a.uuid,[e.cTime,o,a]),e.colliedMap.has(a.uuid+o.uuid)?a.onCollisionStay&&a.onCollisionStay(i,r):a.onCollisionEnter(i,r),e.colliedMap.set(a.uuid+o.uuid,[e.cTime,a,o])):n.delete(t)})},p=0;p<t.length;p++)r(p)}else a.delete(n)})},t.prototype.checkColliByOne=function(a,t){var e=this;if(a){var o=a.getCollider();if(o&&o.enabled)for(var n=0;n<t.length;n++)t[n].forEach(function(a){var t=a.getCollider();t&&t.enabled&&e.isCollision(o,t)&&a.onCollisionEnter(o,t)})}},t.prototype.checkCollision=function(){var a=this;this.cTime=Date.now();for(var t=0;t<7;t++){var e=this.bulletRowMap.get(t),o=this.zombieBulletRowMap.get(t),n=this.plantRowMap.get(t),i=this.bulletPlantRowMap.get(t),r=this.zombieRowMap.get(t),p=this.jarMap.get(t);this.checkColli(e,[r,this.zombieOtherMap,i]),this.checkColli(o,[n]),this.checkColli(this.bulletOtherMap,[r,i]),this.checkColli(this.zombieBulletOtherMap,[n]),this.checkColli(p,[r]),this.checkColli(n,[r,this.zombieOtherMap]),this.checkColliByOne(this.brainMap.get(t),[r,this.zombieOtherMap])}this.checkColli(this.bulletOtherMap,[this.zombieOtherMap]),this.colliedMap.forEach(function(t,e){if(t[0]!==a.cTime)a.colliedMap.delete(e),t[1].onCollisionExit&&t[1].onCollisionExit(t[2].getCollider(),t[1].getCollider());else{var o=t[1].getCollider(),n=t[2].getCollider();(a.removeColliedSet.has(o)||a.removeColliedSet.has(n))&&(a.colliedMap.delete(e),t[1].onCollisionExit&&t[1].onCollisionExit(t[2].getCollider(),t[1].getCollider()))}}),this.removeColliedSet.clear()},t.prototype.update=function(a){this.isOn&&!this.collisionMgr.enabled&&this.checkCollision(a)},t.instance=null,e=i([l],t)}(cc.Component));e.pzaCollisionManager=s,cc._RF.pop()},{"./pzaWorldEventManager":"pzaWorldEventManager"}],pzaCommonMask:[function(a,t,e){"use strict";cc._RF.push(t,"8acf6hM6spH95r2V4yFdaI6","pzaCommonMask");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCommonMask=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.maskNode=null,t.loadSprite=null,t.showLoad=!1,t.loadTime=0,t}var e;return n(t,a),e=t,t.prototype.onLoad=function(){this.maskNode.active=!1,this.showLoad=!1,e.instance=this},t.prototype.update=function(a){this.showLoad&&(this.loadTime+=a,this.loadTime<=1||(this.loadSprite.active=!0,this.loadSprite.angle+=360*a))},t.showMask=function(a){void 0===a&&(a=!1);var t=e.instance;null!=t&&(t.showLoad=a,t.loadTime=0,t.loadSprite.active=!1,t.maskNode.active=!0)},t.hideMask=function(){var a=e.instance;null!=a&&(a.showLoad=!1,a.maskNode.active=!1)},t.instance=null,i([l({displayName:"\u901a\u7528\u906e\u7f69",type:cc.Node})],t.prototype,"maskNode",void 0),i([l({displayName:"\u52a0\u8f7d\u5706\u56fe",type:cc.Node})],t.prototype,"loadSprite",void 0),e=i([p],t)}(cc.Component);e.pzaCommonMask=s,cc._RF.pop()},{}],pzaCommonRewardView:[function(a,t,e){"use strict";cc._RF.push(t,"7373fYx08ZDraBGpyJDiu8i","pzaCommonRewardView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCommonRewardView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("./pzaRewardItem"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.items=[],t.title=null,t.tip=null,t.closeCall=null,t}return n(t,a),t.prototype.bindData=function(a,t){this.title.string="\u4f60\u5df2\u7ecf\u83b7\u5f97";for(var e=0;e<4;e++){var o=this.items[e];if(null==o)return;var n=a[e];null==n?o.node.active=!1:(o.node.active=!0,o.init(n),n.trunToCoin&&(this.title.string="\u4e0d\u6ee1\u8db3\u83b7\u53d6\u6761\u4ef6,\u7b49\u4ef7\u8f6c\u5316\u4e3a\u91d1\u5e01"))}this.tip.string="",this.closeCall=t},t.prototype.setTip=function(a){this.tip.string=a},t.prototype.clickClose=function(){this.close(),this.closeCall&&this.closeCall()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u5956\u52b1items",type:[p.pzaRewardItem]})],t.prototype,"items",void 0),i([c({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"title",void 0),i([c({displayName:"\u63d0\u793a",type:cc.Label})],t.prototype,"tip",void 0),i([s],t)}(cc.Component);e.pzaCommonRewardView=u,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","./pzaRewardItem":"pzaRewardItem"}],pzaConeHeadZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"6d684KM7ohDqpJMHZHPzQTg","pzaConeHeadZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaConeHeadZombie2=void 0;var r=a("./pzaConeHeadZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hatType=p.pzaZombieSlotType.hat_green,t}return n(t,a),i([s],t)}(r.pzaConeHeadZombie));e.pzaConeHeadZombie2=c,cc._RF.pop()},{"./pzaConeHeadZombie":"pzaConeHeadZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaConeHeadZombie:[function(a,t,e){"use strict";cc._RF.push(t,"7840eOssB1PAL8q0Rc3DOeL","pzaConeHeadZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaConeHeadZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("./pzaNormalZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=s.pzaZombieSlotType.hat,t.hatType=s.pzaZombieSlotType.hat,t.isNut=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):(this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,61.81,13.02,-93.13))]]),this.isNut?this.slotMap.set(s.pzaZombieSlotType.head_nut,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.head_nut).addState(new s.pzaZombieSlotAtt(1,this.hatType+"1",262.41,-1.5,-90.45)).addState(new s.pzaZombieSlotAtt(2,this.hatType+"2",258.29,-1.21,-90.45)).addState(new s.pzaZombieSlotAtt(3,this.hatType+"3",244.29,-2.07,-90.45))):this.slotMap.set(s.pzaZombieSlotType.hat,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.hat).addState(new s.pzaZombieSlotAtt(1,this.hatType+"1",-5.4,81.02)).addState(new s.pzaZombieSlotAtt(2,this.hatType+"2",16.67,62.68)).addState(new s.pzaZombieSlotAtt(3,this.hatType+"3",16.67,62.68))))},t.prototype.zombieHurtSound=function(t){if(this.hasEquip){var e="plastichit"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(e)}else a.prototype.zombieHurtSound.call(this,t)},i([u],t)}(l.pzaNormalZombie));e.pzaConeHeadZombie=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaCreativeModeItem:[function(a,t,e){"use strict";cc._RF.push(t,"2ab8aJzvsROibLgfrzLm9Y9","pzaCreativeModeItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameManager"),l=a("../Common/pzaGameZJ"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaUIManager"),u=a("../Common/pzaWorldEventManager"),d=a("../Load/pzaBundleObjectPool"),h=a("../Load/pzaPreLoadManager"),m=a("../View/pzaWarningView"),f=a("../utils/pzaChannel"),z=a("../utils/pzaResMgr"),y=a("../utils/pzakc"),g=a("./pzaGameCreativeTrad"),v=a("./pzaGameCreativeVase"),b=cc._decorator,S=b.ccclass,P=b.property,C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.trophyNode=null,t.gameName=null,t.itemBg=null,t.noItemBg=null,t.magnifierNode=null,t.partImg=null,t.spriteFrameArr=[],t.partIcon=null,t.topImgFrameArr=[],t.zJNode=null,t.newFlagNode=null,t.flagNode=null,t.flagLab=null,t.content=null,t.gameMode=null,t.curPart=1,t.startGameCall=null,t.unlock=!1,t.imgRes="Texture/MainView/creativeModeView/",t.creativeVaseLen=0,t.creativeTradLen=0,t.creativeZjLen=0,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.on(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.off(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.bindData=function(a,t,e,o){switch(this.newFlagNode.active=!1,this.partIcon.node.active=!1,this.zJNode.active=!1,this.flagNode.active=!1,this.creativeZjLen=p.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,l.pzaGameZJ).rankCount,this.creativeVaseLen=z.pzaResMgr.instance().getConf("a24").length,this.creativeTradLen=z.pzaResMgr.instance().getConf("a25").length,this.curPart=t,this.startGameCall=e,this.gameMode=a,this.unlock=this.curPart<=o,this.itemBg.active=this.unlock,this.noItemBg.active=!this.unlock,this.content.y=-40,this.refreshItem(),this.gameMode){case r.pzaGameMode.CREATIVE_VASE:case r.pzaGameMode.CREATIVE_TRAD:case r.pzaGameMode.ZaJiao:!s.pzaLocalData.data.creativeItemState[t]&&this.unlock&&(s.pzaLocalData.data.creativeItemState[t]=0)}},t.prototype.refreshItem=function(){var a=this;if(this.gameMode&&this.gameMode==r.pzaGameMode.CREATIVE_VASE){this.gameName.string=p.pzaGameManager.getGame(r.pzaGameMode.CREATIVE_VASE,v.pzaGameCreativeVase).getConf(this.curPart-this.creativeZjLen).name,this.partImg.spriteFrame=this.spriteFrameArr[0];var t=p.pzaGameManager.getGame(r.pzaGameMode.CREATIVE_VASE,v.pzaGameCreativeVase).getConf(this.curPart-this.creativeZjLen).trophyid;s.pzaLocalData.data.creativeTrophyArr[t]&&s.pzaLocalData.data.creativeTrophyArr[t][0]?this.trophyNode.active=!0:(this.trophyNode.active=!1,s.pzaLocalData.data.creativeTrophyArr[t]=[],s.pzaLocalData.data.creativeTrophyArr[t][0]=0,s.pzaLocalData.addDirty("creativeTrophyArr"))}else if(this.gameMode&&this.gameMode==r.pzaGameMode.CREATIVE_TRAD)this.gameName.string=p.pzaGameManager.getGame(r.pzaGameMode.CREATIVE_TRAD,g.pzaGameCreativeTrad).getConf(this.curPart-this.creativeVaseLen-this.creativeZjLen).name,this.partImg.spriteFrame=this.spriteFrameArr[1],t=p.pzaGameManager.getGame(r.pzaGameMode.CREATIVE_TRAD,g.pzaGameCreativeTrad).getConf(this.curPart-this.creativeVaseLen-this.creativeZjLen).trophyid,s.pzaLocalData.data.creativeTrophyArr[t]&&s.pzaLocalData.data.creativeTrophyArr[t][0]?this.trophyNode.active=!0:(this.trophyNode.active=!1,s.pzaLocalData.data.creativeTrophyArr[t]=[],s.pzaLocalData.data.creativeTrophyArr[t][0]=0,s.pzaLocalData.addDirty("creativeTrophyArr"));else if(this.gameMode&&this.gameMode==r.pzaGameMode.ZaJiao){this.gameName.string=p.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,l.pzaGameZJ).getRankConf(this.curPart).name,this.partIcon.node.active=!0;var e=p.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,l.pzaGameZJ).getRankConf(this.curPart).itembg,o=p.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,l.pzaGameZJ).getRankConf(this.curPart).itemicon;d.pzaBundleObjectPool.requestSpriteFrameByUrl(this.imgRes+e,function(t,e){null==t?a.partImg&&(a.partImg.spriteFrame=e):console.error(t)}),d.pzaBundleObjectPool.requestSpriteFrameByUrl(this.imgRes+o,function(t,e){null==t?a.partIcon&&(a.partIcon.spriteFrame=e):console.error(t)}),t=p.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,l.pzaGameZJ).getRankConf(this.curPart).trophyid,s.pzaLocalData.data.creativeTrophyArr[t]&&s.pzaLocalData.data.creativeTrophyArr[t][0]?this.trophyNode.active=!0:(this.trophyNode.active=!1,s.pzaLocalData.data.creativeTrophyArr[t]=[],s.pzaLocalData.data.creativeTrophyArr[t][0]=0,s.pzaLocalData.addDirty("creativeTrophyArr")),p.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,l.pzaGameZJ).getRankConf(this.curPart).endLess&&(this.flagNode.active=!0,this.flagLab.string=s.pzaLocalData.data.zaJiaoPassPart+"",this.content.y=-34,this.trophyNode.active=!1)}1==s.pzaLocalData.data.creativeNewGameArr[this.curPart]&&(this.newFlagNode.active=!0,this.newFlagNode.angle=0,cc.Tween.stopAllByTarget(this.newFlagNode),y.default.ani_JitterNode(this.newFlagNode,.4,15,3,!0)),s.pzaLocalData.isNoZj&&(this.newFlagNode.active=!1,cc.Tween.stopAllByTarget(this.newFlagNode))},t.prototype.clickMagnifier=function(){var a={x:this.node.x+this.magnifierNode.x,y:this.node.y+20,curPart:this.curPart};u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.CLICK_CREATIVE,a)},t.prototype.touchItem=function(){this.unlock},t.prototype.cancelItem=function(){this.unlock},t.prototype.clickItem=function(){var a=this;if(s.pzaLocalData.data.hasPassZjTeach&&this.unlock)if(s.pzaLocalData.isWeekTwo=!1,r.pzaGameState.midOut)if(r.pzaGameState.gameMode==this.gameMode&&this.gameMode==r.pzaGameMode.CREATIVE_VASE&&r.pzaGameState.curPart==this.curPart-this.creativeZjLen)this.startGameCall&&this.startGameCall(),p.pzaGameManager.getCurrentGame().gameRecover(2,this.curPart-this.creativeZjLen,null);else if(r.pzaGameState.gameMode==this.gameMode&&this.gameMode==r.pzaGameMode.CREATIVE_TRAD&&r.pzaGameState.curPart==this.curPart-this.creativeZjLen-this.creativeVaseLen){this.startGameCall&&this.startGameCall();var t=p.pzaGameManager.getGame(r.pzaGameMode.CREATIVE_TRAD,g.pzaGameCreativeTrad).getConf(this.curPart-this.creativeVaseLen-this.creativeZjLen).atlas;p.pzaGameManager.getCurrentGame().gameRecover(t,this.curPart-this.creativeVaseLen-this.creativeZjLen,null)}else if(r.pzaGameState.gameMode==this.gameMode&&this.gameMode==r.pzaGameMode.ZaJiao&&r.pzaGameState.curPart==this.curPart)this.startGameCall&&this.startGameCall(),p.pzaGameManager.getCurrentGame().gameRecover(1,this.curPart,null);else{var e=0;this.gameMode==r.pzaGameMode.CREATIVE_VASE?e=this.curPart-this.creativeZjLen:this.gameMode==r.pzaGameMode.CREATIVE_TRAD?e=this.curPart-this.creativeVaseLen-this.creativeZjLen:this.gameMode==r.pzaGameMode.ZaJiao&&(e=this.curPart),p.pzaGameManager.midOutStart(this.gameMode,r.pzaGameState.curChapter,e,function(){if(a.gameMode==r.pzaGameMode.ZaJiao&&p.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,l.pzaGameZJ).getRankConf(a.curPart).endLess&&s.pzaLocalData.data.zaJiaoRound>0)return p.pzaGameManager.removeBattleUI(),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.GAME_OVER,null),c.pzaUIManager.removeBoardUI(),void a.startGame();a.creativeGameLogic()})}else this.creativeGameLogic()},t.prototype.creativeGameLogic=function(){var a=this;this.gameMode==r.pzaGameMode.ZaJiao&&p.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,l.pzaGameZJ).getRankConf(this.curPart).endLess&&s.pzaLocalData.data.zaJiaoRound>0?this.startGame():s.pzaLocalData.data.creativeItemState[this.curPart]<3?(this.startGame(),s.pzaLocalData.data.creativeItemState[this.curPart]++,s.pzaLocalData.addDirty("creativeItemState")):c.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.WARNING_VIEW,function(t){var e=!1,o=!1;s.pzaLocalData.data.creativeItemState[a.curPart]%2==1?(e=!1,o=!0):(e=!0,o=!1);var n=t&&t.getComponent(m.pzaWarningView);n&&n.show("\u6bcf\u65e5\u514d\u8d39\u6b21\u6570\uff080/3\uff09\n\u662f\u5426\u83b7\u53d6\u989d\u5916\u6311\u6218\u6b21\u6570\u3002","\u7acb\u5373\u83b7\u5f97","\u8fd4\u56de",function(){var t=function(){s.pzaLocalData.data.creativeItemState[a.curPart]++,s.pzaLocalData.addDirty("creativeItemState"),a.startGame()};o&&("ks"==f.pzaChannel.instance().channel||"tt"==f.pzaChannel.instance().channel||"my"==f.pzaChannel.instance().channel?f.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):f.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"27"},function(){t()})),e&&f.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"})},null,"\u672a\u89e3\u9501\uff01",e,o)})},t.prototype.startGame=function(){1==s.pzaLocalData.data.creativeNewGameArr[this.curPart]&&(s.pzaLocalData.data.creativeNewGameArr[this.curPart]=10,s.pzaLocalData.addDirty("creativeNewGameArr")),this.startGameCall&&this.startGameCall(),c.pzaUIManager.removeBoardUI();var a=0;this.gameMode==r.pzaGameMode.CREATIVE_VASE?a=this.curPart-this.creativeZjLen:this.gameMode==r.pzaGameMode.CREATIVE_TRAD?a=this.curPart-this.creativeVaseLen-this.creativeZjLen:this.gameMode==r.pzaGameMode.ZaJiao&&(a=this.curPart,r.pzaGameState.curChapter=1),p.pzaGameManager.preLoadAndStart(this.gameMode,r.pzaGameState.curChapter,a)},i([P({displayName:"\u5956\u676f",type:cc.Node})],t.prototype,"trophyNode",void 0),i([P({displayName:"\u6e38\u620f\u540d\u5b57",type:cc.Label})],t.prototype,"gameName",void 0),i([P({displayName:"\u80cc\u666f\u6846\u56fe",type:cc.Node})],t.prototype,"itemBg",void 0),i([P({displayName:"\u6ca1\u6709\u5173\u5361\u56fe",type:cc.Node})],t.prototype,"noItemBg",void 0),i([P({displayName:"\u653e\u5927\u955c\u8282\u70b9",type:cc.Node})],t.prototype,"magnifierNode",void 0),i([P({displayName:"\u5173\u5361\u56fe\u7247",type:cc.Sprite})],t.prototype,"partImg",void 0),i([P({displayName:"\u5173\u5361\u56fe\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"spriteFrameArr",void 0),i([P({displayName:"\u5173\u5361\u56fe\u6807",type:cc.Sprite})],t.prototype,"partIcon",void 0),i([P({displayName:"\u4e0a\u5c42\u56fe\u7247\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"topImgFrameArr",void 0),i([P({displayName:"\u6742\u4ea4\u8282\u70b9\u6807\u5fd7",type:cc.Node})],t.prototype,"zJNode",void 0),i([P({displayName:"\u65b0\u6e38\u620f\u6807\u8bc6",type:cc.Node})],t.prototype,"newFlagNode",void 0),i([P({displayName:"\u65d7\u5e1c\u8282\u70b9",type:cc.Node})],t.prototype,"flagNode",void 0),i([P({displayName:"\u65d7\u5e1c\u6570\u91cf",type:cc.Label})],t.prototype,"flagLab",void 0),i([P({displayName:"\u65d7\u5e1c\u6e38\u620f\u540d\u5b57\u5bb9\u5668",type:cc.Node})],t.prototype,"content",void 0),i([S],t)}(cc.Component);e.default=C,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameZJ":"pzaGameZJ","../Common/pzaLocalData":"pzaLocalData","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaGameCreativeTrad":"pzaGameCreativeTrad","./pzaGameCreativeVase":"pzaGameCreativeVase"}],pzaCreativeModeView:[function(a,t,e){"use strict";cc._RF.push(t,"db99d8V4m5KTaTUG/M1lrK3","pzaCreativeModeView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCreativeModeView=void 0;var r=a("../Battle/Data/pzaGuideType"),p=a("../Battle/pzaGameState"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaGameManager"),c=a("../Common/pzaGameZJ"),u=a("../Common/pzaLocalData"),d=a("../Common/pzaStatisticsMgr"),h=a("../Common/pzaUIManager"),m=a("../Common/pzaUtil"),f=a("../Common/pzaWorldEventManager"),z=a("../Load/pzaPreLoadManager"),y=a("../View/pzaCommonMask"),g=a("../View/pzaHandbookView"),v=a("../View/pzaRankView"),b=a("../utils/pzaChannel"),S=a("../utils/pzaResMgr"),P=a("../utils/pzakc"),C=a("./pzaCreativeModeItem"),D=a("./pzaGameCreativeTrad"),M=a("./pzaGameCreativeVase"),E=cc._decorator,_=E.ccclass,T=E.property,w=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.coinCount=null,t.trophyCount=null,t.content=null,t.scrollView=null,t.tipNode=null,t.authLab=null,t.handBookNode=null,t.itemPrefab=null,t.rankWidget=null,t.curPage=2,t.items=[],t.creativeVaseLen=0,t.creativeTradLen=0,t.creativeZjLen=0,t.lastPosIdx=1,t}return n(t,a),t.prototype.onEnable=function(){var a=this;d.pzaStatisticsMgr.sendEvent("System",{name:"system",value:14}),this.creativeZjLen=s.pzaGameManager.getGame(p.pzaGameMode.ZaJiao,c.pzaGameZJ).rankCount,this.creativeVaseLen=S.pzaResMgr.instance().getConf("a24").length,this.creativeTradLen=S.pzaResMgr.instance().getConf("a25").length,s.pzaGameManager.getGame(p.pzaGameMode.CREATIVE_TRAD,D.pzaGameCreativeTrad),this.tipNode.active=!1,this.authLab.node.active=!1,this.scrollView.scrollToTop(),this.coinCount.string=m.pzaUtil.getCurrencyStr(u.pzaLocalData.data.coin);var t=0;if(u.pzaLocalData.isNoZj?(t=u.pzaLocalData.getCreativeAllTrophy()>=6?6:u.pzaLocalData.getCreativeAllTrophy(),this.trophyCount.string=t+"/6"):(t=u.pzaLocalData.getCreativeAllTrophy()>=8?8:u.pzaLocalData.getCreativeAllTrophy(),this.trophyCount.string=t+"/8"),this.createItem(),this.refreshItem(),f.pzaWorldEventManager.addListener(f.pzaWorldEventType.CLICK_CREATIVE,this.showAuthMsg,this),this.scrollView.node.on("scrolling",this.onScrolling,this),u.pzaLocalData.isNoZj&&(u.pzaLocalData.data.clickCreateModeTip=!0,u.pzaLocalData.data.hasInCreateMode=!0,u.pzaLocalData.data.hasPassZjTeach=!1,u.pzaLocalData.addDirty("clickCreateModeTip","hasInCreateMode"),P.default.sendMsg("closecreativetip"),this.handBookNode.active=!1,this.handBookNode.setPosition(cc.v2(0,0))),u.pzaLocalData.data.clickCreateModeTip||u.pzaLocalData.data.hasInCreateMode)u.pzaLocalData.data.clickCreateModeTip||(u.pzaLocalData.data.clickCreateModeTip=!0,u.pzaLocalData.addDirty("clickCreateModeTip"),P.default.sendMsg("closecreativetip")),this.handBookNode.active=!0,u.pzaLocalData.data.hasPassZjTeach=!0,this.handBookNode.setPosition(cc.v2(-422,-298));else if(u.pzaLocalData.data.clickCreateModeTip=!0,u.pzaLocalData.data.hasInCreateMode=!0,u.pzaLocalData.data.hasPassZjTeach=!1,u.pzaLocalData.addDirty("clickCreateModeTip","hasInCreateMode"),P.default.sendMsg("closecreativetip"),this.handBookNode.active=!1,this.handBookNode.setPosition(cc.v2(0,0)),window.pzaGuideManager.guideStart(function(){},r.pzaGuideType.GUIDE_ENTERZJ),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_ENTERZJ)return y.pzaCommonMask.hideMask(),void window.pzaGuideManager.guideShow(function(){a.handBookNode.active=!0,cc.tween(a.handBookNode).to(.3,{x:-422,y:-298}).start(),u.pzaLocalData.data.hasPassZjTeach=!0});this.rankWidget.updateAlignment(),this.createWxUserInfoButton(!1,null),"ks"==b.pzaChannel.instance().channel&&(this.rankWidget.node.active=!1),u.pzaLocalData.isNoZj&&(this.handBookNode.active=!1,this.handBookNode.setPosition(cc.v2(0,0)),this.rankWidget.node.active=!1)},t.prototype.onDisable=function(){f.pzaWorldEventManager.addListener(f.pzaWorldEventType.CLICK_CREATIVE,this.showAuthMsg,this),this.scrollView.node.off("scrolling",this.onScrolling,this)},t.prototype.onScrolling=function(){this.tipNode.active=!1,this.authLab.node.active=!1},t.prototype.showAuthMsg=function(a){if(this.tipNode.active&&this.lastPosIdx==a.curPart)return this.tipNode.active=!1,void(this.authLab.node.active=!1);this.tipNode.active=!0,this.authLab.node.active=!0,this.tipNode.x=a.x,this.tipNode.y=a.y-15;var t=parseInt(a.curPart);t<=this.creativeZjLen?this.authLab.string="\u521b\u610f\u5173\u5361\u4f5c\u8005: "+s.pzaGameManager.getGame(p.pzaGameMode.ZaJiao,c.pzaGameZJ).getRankConf(t).creator:t<=this.creativeZjLen+this.creativeVaseLen?this.authLab.string="\u521b\u610f\u5173\u5361\u4f5c\u8005: "+s.pzaGameManager.getGame(p.pzaGameMode.CREATIVE_VASE,M.pzaGameCreativeVase).getConf(t-this.creativeZjLen).creator:this.authLab.string="\u521b\u610f\u5173\u5361\u4f5c\u8005: "+s.pzaGameManager.getGame(p.pzaGameMode.CREATIVE_TRAD,D.pzaGameCreativeTrad).getConf(t-this.creativeZjLen-this.creativeVaseLen).creator,this.lastPosIdx=a.curPart},t.prototype.createItem=function(){if(!(this.content.childrenCount>0)){for(var a=1,t=1;t<=this.creativeZjLen;t++){if(null==(e=l.pzaGameCommonPool.requestInstant(this.itemPrefab,!1)))return;e.setParent(this.content),this.items.push(e.getComponent(C.default))}for(t=a+=this.creativeZjLen;t<a+this.creativeVaseLen;t++){if(null==(e=l.pzaGameCommonPool.requestInstant(this.itemPrefab,!1)))return;e.setParent(this.content),this.items.push(e.getComponent(C.default))}for(t=a+=this.creativeVaseLen;t<a+this.creativeTradLen;t++){if(null==(e=l.pzaGameCommonPool.requestInstant(this.itemPrefab,!1)))return;e.setParent(this.content),this.items.push(e.getComponent(C.default))}for(t=a+=this.creativeTradLen;t<=15;t++){var e;if(null==(e=l.pzaGameCommonPool.requestInstant(this.itemPrefab,!1)))return;e.setParent(this.content),this.items.push(e.getComponent(C.default))}this.content.height=608}},t.prototype.refreshItem=function(){for(var a=this,t=1,e=1;e<=this.creativeZjLen;e++){if(null==(o=this.items[e-1]))return;u.pzaLocalData.data.creativeNewGameArr[e]||(u.pzaLocalData.data.creativeNewGameArr[e]=s.pzaGameManager.getGame(p.pzaGameMode.ZaJiao,c.pzaGameZJ).getRankConf(e).isNew),o.getComponent(C.default).bindData(p.pzaGameMode.ZaJiao,e,function(){a.close()},this.creativeVaseLen+this.creativeTradLen+this.creativeZjLen)}for(e=t+=this.creativeZjLen;e<t+this.creativeVaseLen;e++){if(null==(o=this.items[e-1]))return;u.pzaLocalData.data.creativeNewGameArr[e]||(u.pzaLocalData.data.creativeNewGameArr[e]=s.pzaGameManager.getGame(p.pzaGameMode.CREATIVE_VASE,M.pzaGameCreativeVase).getConf(e-this.creativeZjLen).isNew),o.getComponent(C.default).bindData(p.pzaGameMode.CREATIVE_VASE,e,function(){a.close()},this.creativeVaseLen+this.creativeTradLen+this.creativeZjLen)}for(e=t+=this.creativeVaseLen;e<t+this.creativeTradLen;e++){if(null==(o=this.items[e-1]))return;u.pzaLocalData.data.creativeNewGameArr[e]||(u.pzaLocalData.data.creativeNewGameArr[e]=s.pzaGameManager.getGame(p.pzaGameMode.CREATIVE_TRAD,D.pzaGameCreativeTrad).getConf(e-this.creativeZjLen-this.creativeVaseLen).isNew),o.getComponent(C.default).bindData(p.pzaGameMode.CREATIVE_TRAD,e,function(){a.close()},this.creativeVaseLen+this.creativeTradLen+this.creativeZjLen)}for(e=t+=this.creativeTradLen;e<=15;e++){var o;if(null==(o=this.items[e-1]))return;o.getComponent(C.default).bindData(null,e,null,this.creativeVaseLen+this.creativeTradLen)}u.pzaLocalData.addDirty("creativeNewGameArr")},t.prototype.clickHandBook=function(){h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(g.pzaHandbookView);t&&t.zjInit()})},t.prototype.clickClose=function(){h.pzaUIManager.baseShowBoardUI(z.pzaResourceUrl.HOME_SELECT_VIEW,null),this.close()},t.prototype.clickRankBtn=function(){var a=this;this.createWxUserInfoButton(!0,function(){h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.RANK_VIEW,function(t){var e=t&&t.getComponent(v.pzaRankView);e&&e.init(a.curPage+1)})})},t.prototype.createWxUserInfoButton=function(a,t){var e=this,o=b.pzaChannel.instance().getChannel();"wx"!==o.channel||null!=u.pzaLocalData.data.playerNick&&null!=u.pzaLocalData.data.playerAvatar?t&&t():o.wxCheckPrivacySetting(function(n){var i=function(){var a=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width+e.rankWidget.node.x-60)/n.width*a.width,top:(.5*n.height-e.rankWidget.node.y-60)/n.height*a.height,width:120/n.width*a.width,height:120/n.height*a.height};o.getUserInfo(function(){null!=u.pzaLocalData.data.playerNick&&null!=u.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),t&&t())},i,!1)};if(n)return a?void o.wxPrivacyAuthorize(i,null):void(t&&t());i()},null)},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node);var a=b.pzaChannel.instance().getChannel();"wx"==a.channel&&a.destroyAuthorizationButton()},i([T({displayName:"\u91d1\u5e01",type:cc.Label})],t.prototype,"coinCount",void 0),i([T({displayName:"\u5956\u676f\u6570\u91cf",type:cc.Label})],t.prototype,"trophyCount",void 0),i([T({displayName:"\u5bb9\u5668",type:cc.Node})],t.prototype,"content",void 0),i([T({displayName:"scrollview",type:cc.ScrollView})],t.prototype,"scrollView",void 0),i([T({displayName:"\u5192\u6ce1\u6846",type:cc.Node})],t.prototype,"tipNode",void 0),i([T({displayName:"\u4f5c\u8005\u540d",type:cc.Label})],t.prototype,"authLab",void 0),i([T({displayName:"\u56fe\u9274\u8282\u70b9",type:cc.Node})],t.prototype,"handBookNode",void 0),i([T({displayName:"\u521b\u610f\u5173\u5361\u9884\u8bbe",type:cc.Prefab})],t.prototype,"itemPrefab",void 0),i([T({displayName:"\u6392\u884c\u699c\u6309\u94aewidget",type:cc.Widget})],t.prototype,"rankWidget",void 0),i([_],t)}(cc.Component);e.pzaCreativeModeView=w,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameZJ":"pzaGameZJ","../Common/pzaLocalData":"pzaLocalData","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaCommonMask":"pzaCommonMask","../View/pzaHandbookView":"pzaHandbookView","../View/pzaRankView":"pzaRankView","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaCreativeModeItem":"pzaCreativeModeItem","./pzaGameCreativeTrad":"pzaGameCreativeTrad","./pzaGameCreativeVase":"pzaGameCreativeVase"}],pzaCreativeTradConf:[function(a,t,e){"use strict";cc._RF.push(t,"77b27l8bz5CL6j66MecXzyf","pzaCreativeTradConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCreativeTradConf=void 0;e.pzaCreativeTradConf=function(a,t,e,o,n,i,r,p,l,s,c,u,d,h,m,f,z){void 0===i&&(i=1),void 0===r&&(r=0),this.id=0,this.name="",this.maxWave=0,this.waveZombieDensity=[],this.zombieTypes=[],this.magnification=1,this.flowerPotColumn=0,this.initialCards=[],this.plantCardsId=[],this.plantCardsWeight=[],this.lastBungeeMinColumn=0,this.lastBungeeZombie=0,this.fog=0,this.atlas=0,this.creator="",this.isNew=0,this.trophyid=0,this.id=a,this.name=t,this.maxWave=e,this.waveZombieDensity=o,this.zombieTypes=n,this.magnification=i,this.flowerPotColumn=r,this.initialCards=p,this.plantCardsId=l,this.plantCardsWeight=s,this.lastBungeeMinColumn=c,this.lastBungeeZombie=u,this.fog=d,this.atlas=h,this.creator=m,this.isNew=f,this.trophyid=z},cc._RF.pop()},{}],pzaCreativeVaseConf:[function(a,t,e){"use strict";cc._RF.push(t,"d5c68zolANLp7UDWMOO3X6G","pzaCreativeVaseConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCreativeVaseConf=void 0;e.pzaCreativeVaseConf=function(a){this.id=0,this.name="",this.plant="",this.zombie="",this.min=0,this.max=0,this.green=0,this.endless=0,this.creator="",this.isNew=0,this.trophyid=0,this.id=a.id,this.name=a.name||"",this.plant=a.plant||"",this.zombie=a.zombie||"",this.min=a.min||0,this.max=a.max||0,this.green=a.green||0,this.endless=a.endless||0,this.creator=a.creator||"",this.isNew=a.isnew||0,this.trophyid=a.trophyid||0},cc._RF.pop()},{}],pzaCupidBullet:[function(a,t,e){"use strict";cc._RF.push(t,"36c89wflyVBH4sXyBstZEJs","pzaCupidBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCupidBullet=void 0;var r=a("../../Common/pzaGroupEnum"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Zombie/pzaZombieBody"),u=a("./pzaBaseBullet"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletNode=null,t}return n(t,a),t.prototype.init=function(t,e,o,n,i){void 0===o&&(o=0),void 0===n&&(n=null),void 0===i&&(i=cc.v2(1,0)),a.prototype.init.call(this,t,e,o,n,i)},t.prototype.onCollision=function(a){if(null!=a&&a.node.group==r.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(c.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderZombie=function(a){a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==s.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&(a.zombieData&&a.zombieData.hypnosis||a.buffData.hasBuff(l.pzaBuffType.DIVE)||a.buffData.hasBuff(l.pzaBuffType.FLY)||a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||this.normalColliderZombie(a))},t.prototype.normalColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);return t.baseData.zombieData.zombieType==s.pzaZombieEnum.RED_GARGANTUAR4||t.baseData.zombieData.zombieType==s.pzaZombieEnum.GARGANTUAR4||t.baseData.zombieData.zombieType==s.pzaZombieEnum.DANCING_ZOMBIE3?(t.baseData.zombieData.equipHp>0?t&&t.hurt(1800):(p.pzaSoundManager.playAudio("floop"),p.pzaSoundManager.playAudio("mindcontrolled"),window.pzazombieManager.zombieHypnosis(t.baseData)),this.close(),void this.playHitEffect(a)):t.baseData.zombieData.zombieType==s.pzaZombieEnum.BedCar||t.baseData.zombieData.zombieType==s.pzaZombieEnum.ZOMBONI3||t.baseData.zombieData.zombieType==s.pzaZombieEnum.ZOMBONI2||t.baseData.zombieData.zombieType==s.pzaZombieEnum.ZOMBONI?(t&&t.hurt(1800),this.close(),void this.playHitEffect(a)):(this.isCanHypnosis(a)?(p.pzaSoundManager.playAudio("floop"),p.pzaSoundManager.playAudio("mindcontrolled"),window.pzazombieManager.zombieHypnosis(t.baseData)):t&&t.hurt(1800),this.close(),void this.playHitEffect(a))},t.prototype.isCanHypnosis=function(a){var t=!1,e=window.pzazombieManager.getZombie(a);return e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE4||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE5||e.baseData.zombieData.zombieType==s.pzaZombieEnum.LADDER_ZOMBIE||e.baseData.zombieData.zombieType==s.pzaZombieEnum.NEWSPAPER_ZOMBIE||e.baseData.zombieData.cate==s.pzaZombieCate.Gargantuar?e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE4||e.baseData.zombieData.zombieType==s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE5||e.baseData.zombieData.zombieType==s.pzaZombieEnum.NEWSPAPER_ZOMBIE||e.baseData.zombieData.zombieType==s.pzaZombieEnum.LADDER_ZOMBIE?t=e.baseData.zombieData.equipHp<=0:e.baseData.zombieData.cate==s.pzaZombieCate.Gargantuar&&(t=e.baseData.zombieData.equipHp2<=0):t=!0,t},i([m({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"bulletNode",void 0),i([h],t)}(u.pzaBaseBullet);e.pzaCupidBullet=f,cc._RF.pop()},{"../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Zombie/pzaZombieBody":"pzaZombieBody","./pzaBaseBullet":"pzaBaseBullet"}],pzaCupidShooter:[function(a,t,e){"use strict";cc._RF.push(t,"8ba9eGsT35Dk7qs5Rc9GjN4","pzaCupidShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaCupidShooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Bullet/pzaBaseBullet"),s=a("../pzaGameState"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.shootNode=null,t.atkCd=2,t.lifeTime=15,t.originAng=30,t.bulletCnt=5,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.animation.playAnimation("idle",!0),this.atkCd=2,this.lifeTime=15},t.prototype.atkAni=function(){var a=this;this.animation.playAnimation("attack",!1,function(){a.atkCd=2,a.animation.playAnimation("idle",!0)},function(){a.shoot()})},t.prototype.cupidDead=function(){var a=""+this.baseData.xIndex+this.baseData.yIndex,t=window.pzaplantManager.plantDataMap.get(a);this.baseData.isDead=!0,window.pzaplantManager.plantMap.delete(t),window.pzaplantManager.plantDataMap.delete(a),this.close()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.atkCd>0&&(this.atkCd-=t,this.atkCd<=0&&this.atkAni()),this.lifeTime>0&&(this.lifeTime-=t,this.lifeTime<=0&&this.cupidDead()))},t.prototype.shoot=function(){for(var a=p.pzaNodeManager.getBulletNode(),t=2;t>=0;t--){var e=null,o=this.baseData.yIndex+t-1;if(!(o<0||o>=s.pzaGameState.map.getMapRow())){var n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=n){n.setParent(a);var i=this.shootNode.convertToWorldSpaceAR(cc.v2()),c=a.convertToNodeSpaceAR(i);if(n.setPosition(c),o!=this.baseData.yIndex){var u=s.pzaGameState.map.getYInterval(o)/3+this.shootNode.y;e=s.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,o,0,u).y}var d=n.getComponent(l.pzaBaseBullet);d&&d.init(o,this.baseData.atk,1,e);var h=s.pzaGameState.map.getMapSkewColumn();h>0&&this.baseData.xIndex<=h-2&&(d.maxPosX=this.baseData.logicPos.x+1.5*s.pzaGameState.map.getBlockWidth())}}}},i([h({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([h({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([d],t)}(c.pzaBasePlant);e.pzaCupidShooter=m,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaDancingZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"a7cf9gpaXtJlKg3c/YTnXMJ","pzaDancingZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDancingZombie2=void 0;var r=a("../../utils/pzakc"),p=a("../Data/pzaZombieEnum"),l=a("./pzaDancingZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=s.pzaZombieSlotType.helmet_black,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,-5.83,77.07))],[s.pzaZombieSlotType.helmet_black,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.helmet_black).addState(new s.pzaZombieSlotAtt(1,this.equip1Slot+"1",-86.52,49.5,-89.62)).addState(new s.pzaZombieSlotAtt(2,this.equip1Slot+"2",-71.5,47.1,-89.62)).addState(new s.pzaZombieSlotAtt(3,this.equip1Slot+"3",-83.5,47.52,-89.62))]])},t.prototype.getSummonZombieTypes=function(){for(var a=r.default.randomInt(0,3),t=[],e=0;e<4;e++)e===a?t.push(p.pzaZombieEnum.DANCING_ZOMBIE):t.push(p.pzaZombieEnum.BACKUP_DANCER2);return t},i([u],t)}(l.pzaDancingZombie));e.pzaDancingZombie2=d,cc._RF.pop()},{"../../utils/pzakc":"pzakc","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaDancingZombie":"pzaDancingZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaDancingZombie3:[function(a,t,e){"use strict";cc._RF.push(t,"b7a37DqXK1CUZ3dJuqvEusZ","pzaDancingZombie3");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDancingZombie3=void 0;var r=a("../Data/pzaBuffData"),p=a("./pzaDancingZombie2"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=l.pzaZombieSlotType.helmet_fei,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[l.pzaZombieSlotType.butter,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.butter).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.butter,-5.83,77.07))],[l.pzaZombieSlotType.helmet_fei,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.helmet_fei).addState(new l.pzaZombieSlotAtt(1,this.equip1Slot+"1",-100.07,57.91,-89.62)).addState(new l.pzaZombieSlotAtt(2,this.equip1Slot+"2",-100.07,57.91,-89.62)).addState(new l.pzaZombieSlotAtt(3,this.equip1Slot+"3",-100.07,57.91,-89.62))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_CONTROL,-1)),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_ICE,-1))},i([c],t)}(p.pzaDancingZombie2));e.pzaDancingZombie3=u,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","./pzaDancingZombie2":"pzaDancingZombie2","./pzaZombieSlot":"pzaZombieSlot"}],pzaDancingZombie:[function(a,t,e){"use strict";cc._RF.push(t,"20bc9UOvSlIXarlMuYUaqFr","pzaDancingZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDancingZombie=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaUIManager"),u=a("../../Common/pzaWorldEventManager"),d=a("../../Load/pzaPreLoadManager"),h=a("../../View/Battle/pzaNewZombieView"),m=a("../../utils/pzakc"),f=a("../Data/pzaBaseData"),z=a("../Data/pzaBuffData"),y=a("../Data/pzaZombieEnum"),g=a("../pzaGameState"),v=a("./pzaBaseZombie"),b=a("./pzaZombieSlot"),S=a("./pzaZombieState"),P=cc._decorator,C=P.ccclass,D=P.property,M=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.upLight=null,t.upLightFrame=[],t.downLight=null,t.downLightFrame=[],t.garlicSkinName=null,t.backState=!0,t.backTime=3.6,t.dacing=!1,t.summoning=!1,t.showLightState=0,t.lightInterval=0,t.dancingIdx=0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[b.pzaZombieSlotType.butter,new b.pzaZombieSlot(this.animation.spineAnimation,b.pzaZombieSlotType.butter).addState(new b.pzaZombieSlotAtt(1,b.pzaZombieSlotType.butter,-5.83,77.07))]])},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.node.scaleX=-1,this.upLight.node.active=!1,this.downLight.node.active=!1},t.prototype.preview=function(t,e,o){a.prototype.preview.call(this,t,e,o),this.node.scaleX=-o,this.upLight.node.active=!1,this.downLight.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.backState=!0,this.backTime=3.6,this.dacing=!1,this.summoning=!1,null!=this.curShadow&&this.curShadow.changeOffset(cc.v2(-this.shadowOffset.x,this.shadowOffset.y)),this.showLightState=0,this.upLight.node.active=!1,this.downLight.node.active=!1,this.baseData.buffData.addBuff(new z.pzaBuffInfo(z.pzaBuffType.IMM_HYPNOSIS,-1)),this.baseData.zombieData.danceData=new f.pzaDanceData(this.baseData),this.dancingIdx=++m.default.dancingZomIdx,m.default.dancingZomIdx>10&&(m.default.dancingZomIdx=1),s.pzaSoundManager.playLongAudio("dancer",this.dancingIdx)},t.prototype.logicUpdate=function(t){this.backTime-=t,this.refreshLight(t),a.prototype.logicUpdate.call(this,t)},t.prototype.updateMove=function(a){if(!this.dacing&&!this.isInButterState){this.zombieState!=S.pzaZombieState.MOVE&&this.playMoveAnimation();var t=this.baseData.zombieData.moveSpd,e=1;if(this.backState||(e+=this.baseData.zombieData.danceData.getSpeedBuff()),t*=e,this.hasStopZombie()&&(t=0),this.animation.changeAnimationTimeScale(e),1==this.baseData.zombieData.direction?this.baseData.logicPos.x+=a*t:this.baseData.logicPos.x-=a*t,this.baseData.zombieData.hypnosis&&this.baseData.logicPos.x>=640)this.death(!1);else{this.baseData.logicPos.x<(g.pzaGameState.isZombieMode()?-450:-480)&&this.zombieGoHome();var o=this.baseData.xIndex,n=g.pzaGameState.map.getMapXIndex(this.baseData.logicPos);if(this.baseData.xIndex=n,-1==this.changeTargetRow){var i=.1*g.pzaGameState.map.getYInterval(this.baseData.yIndex);g.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,this.baseData.logicPos,i)}if(o<0&&n>=0&&this.zombieScream(),this.backState&&this.backTime<=0&&-1!=n&&this.changeBackState(),g.pzaGameState.newZombie==this.baseData.zombieData.zombieType&&7==n){g.pzaGameState.gamePause=!0,u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.GAME_PAUSE,null);var r=this.node.convertToWorldSpaceAR(cc.v2());c.pzaUIManager.baseShowPopUI(d.pzaResourceUrl.NEW_ZOMBIE_VIEW,function(a){var t=a&&a.getComponent(h.pzaNewZombieView);t&&t.showNewZombie(g.pzaGameState.newZombie,r),g.pzaGameState.showUnlockZombie()})}}}},t.prototype.attack=function(t,e){this.backState&&null!=e&&null!=e.plantData?this.changeBackState():this.summoning||(this.dacing&&(this.dacing=!1),a.prototype.attack.call(this,t,e))},t.prototype.changeBackState=function(){this.backState=!1,null!=this.curShadow&&this.curShadow.changeOffset(this.shadowOffset),this.summonZombie();var a=l.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=g.pzaGameState.map.getBlockWidth()/a},t.prototype.breakDirt=function(a){if(this.baseData&&this.node){this.backState=!1;var t=l.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=g.pzaGameState.map.getBlockWidth()/t,a&&a()}},t.prototype.summonZombie=function(){var a=this;this.dacing=!0,this.summoning=!0,this.zombieState=S.pzaZombieState.SPECIAL;var t=g.pzaGameState.map.getMapRow(),e=g.pzaGameState.map.getMapColumn(),o=0,n=function(){a.baseData&&--o<=0&&!a.baseData.isDead&&(a.dance(function(){a.changeLight(),a.baseData.buffData.removeBuff(z.pzaBuffType.IMM_HYPNOSIS)}),a.summoning=!1)};this.showLight();var i=this.getSummonZombieTypes();this.animation.playAnimation("idle2",!1,function(){a.baseData.yIndex+1<t&&!window.pzaMapManager.isInWaterWay(a.baseData.yIndex+1)&&(o++,a.summonCreateZombie(0,n,i[0])),a.baseData.yIndex>0&&!window.pzaMapManager.isInWaterWay(a.baseData.yIndex-1)&&(o++,a.summonCreateZombie(1,n,i[1])),a.baseData.xIndex>0&&(o++,a.summonCreateZombie(2,n,i[2])),a.baseData.xIndex+1<e&&(o++,a.summonCreateZombie(3,n,i[3]))})},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=S.pzaZombieState.MOVE,-1==this.changeTargetRow?this.backState?this.animation.playAnimation("idle1",!0):this.baseData.zombieData.danceData.walkStep>=3&&!this.hasStopZombie()?this.dance():this.animation.playAnimation("idle6",!1,function(){a.baseData.zombieData.danceData.walkStep++,a.playMoveAnimation()}):this.animation.playAnimation("idle6",!0)},t.prototype.dance=function(a){var t=this;void 0===a&&(a=null),this.baseData.zombieData.danceData.walkStep=0,this.dacing=!0,this.zombieState=S.pzaZombieState.SPECIAL,this.animation.playAnimation("idle7",!1,function(){t.dacing=!1,t.suppleZombie(),a&&a()});var e=this.baseData.zombieData.danceData.getOtherDatas();e&&e.forEach(function(a){var t=a.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(a):window.pzazombieManager.getZombie(a);t&&t.dance()})},t.prototype.getSummonZombieTypes=function(){return[y.pzaZombieEnum.BACKUP_DANCER,y.pzaZombieEnum.BACKUP_DANCER,y.pzaZombieEnum.BACKUP_DANCER,y.pzaZombieEnum.BACKUP_DANCER]},t.prototype.suppleZombie=function(){var a=this,t=!1,e=!1,o=!1,n=!1,i=this.baseData.zombieData.danceData,r=g.pzaGameState.map.getMapRow(),p=g.pzaGameState.map.getMapColumn();if(this.baseData.yIndex+1<r&&!window.pzaMapManager.isInWaterWay(this.baseData.yIndex+1)&&(t=!i.hasUpData()),this.baseData.yIndex>0&&!window.pzaMapManager.isInWaterWay(this.baseData.yIndex-1)&&(e=!i.hasDownData()),this.baseData.xIndex>0&&(o=!i.hasLeftData()),this.baseData.xIndex+1<p&&(n=!i.hasRightData()),t||e||o||n){this.summoning=!0,this.dacing=!0,this.zombieState=S.pzaZombieState.SPECIAL;var l=0,s=function(){a.baseData&&--l<=0&&!a.baseData.isDead&&(a.playMoveAnimation(),a.summoning=!1,a.dacing=!1)},c=this.getSummonZombieTypes();this.animation.playAnimation("idle2",!1,function(){t&&(l++,a.summonCreateZombie(0,s,c[0])),e&&(l++,a.summonCreateZombie(1,s,c[1])),o&&(l++,a.summonCreateZombie(2,s,c[2])),n&&(l++,a.summonCreateZombie(3,s,c[3]))})}else this.playMoveAnimation()},t.prototype.hasStopZombie=function(){if(!this.baseData.zombieData.danceData)return!1;var a=this.baseData.zombieData.danceData.getOtherDatas();if(null==a)return!1;for(var t=0;t<a.length;t++){var e=a[t];if(e!=this.baseData&&e&&!e.isDead){if(e.isBeControlled())return!0;var o=e.zombieData.hypnosis?window.pzazombieManager.getHypnoZombie(e):window.pzazombieManager.getZombie(e);if(null==o)continue;var n=o;if(n.zombieState==S.pzaZombieState.EAT_ATK||n.zombieState==S.pzaZombieState.SPECIAL)return!0}}return!1},t.prototype.beHypnosis=function(){a.prototype.beHypnosis.call(this);var t=this.baseData.zombieData.danceData;this.baseData.zombieData.danceData=new f.pzaDanceData(this.baseData),this.baseData.zombieData.danceData.walkStep=t.walkStep,t.mainData=null,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_27)},t.prototype.changeMapRow=function(){a.prototype.changeMapRow.call(this);var t=this.baseData.zombieData.danceData;this.baseData.zombieData.danceData=new f.pzaDanceData(this.baseData),this.baseData.zombieData.danceData.walkStep=t.walkStep,t.mainData=null,this.dacing=!1},t.prototype.summonCreateZombie=function(a,t,e){var o=g.pzaGameState.map.getBlockWidth(),n=this.baseData.zombieData.danceData,i=null,r=this.baseData.zombieData.hypnosis;0==a?((i=window.pzazombieManager.createFixBlockZombieData(e,this.baseData.xIndex,this.baseData.yIndex+1,r)).logicPos.x=this.baseData.logicPos.x,i.zombieData.danceData=n,n.upData=i):1==a?((i=window.pzazombieManager.createFixBlockZombieData(e,this.baseData.xIndex,this.baseData.yIndex-1,r)).logicPos.x=this.baseData.logicPos.x,i.zombieData.danceData=n,n.downData=i):2==a?((i=window.pzazombieManager.createFixBlockZombieData(e,this.baseData.xIndex-1,this.baseData.yIndex,r)).logicPos.y=this.baseData.logicPos.y,i.logicPos.x=this.baseData.logicPos.x-o,i.zombieData.danceData=n,n.leftData=i):3==a&&((i=window.pzazombieManager.createFixBlockZombieData(e,this.baseData.xIndex+1,this.baseData.yIndex,r)).logicPos.y=this.baseData.logicPos.y,i.logicPos.x=this.baseData.logicPos.x+o,i.zombieData.danceData=n,n.rightData=i),null!=i&&(r?(i.zombieData.direction=1,window.pzazombieManager.createHypnZombie(i,t)):window.pzazombieManager.createZombie(i,!1,!0,!1,t,!1))},t.prototype.refreshLight=function(a){0!=this.showLightState&&(this.lightInterval-=a,this.lightInterval<=0&&this.changeLight())},t.prototype.showLight=function(){this.showLightState=1,this.lightInterval=10,this.upLight.node.active=!0,this.downLight.node.active=!0,this.upLight.spriteFrame=this.upLightFrame[0],this.downLight.spriteFrame=this.downLightFrame[0]},t.prototype.changeLight=function(){0!=this.showLightState&&(this.showLightState++,this.showLightState>=5&&(this.showLightState=1),this.lightInterval=1,this.upLight.spriteFrame=this.upLightFrame[this.showLightState-1],this.downLight.spriteFrame=this.downLightFrame[this.showLightState-1])},t.prototype.zombieScream=function(){},t.prototype.close=function(){a.prototype.close.call(this),s.pzaSoundManager.deleteLongAudio("dancer",this.dancingIdx)},i([D({displayName:"\u4e0a\u706f",type:cc.Sprite})],t.prototype,"upLight",void 0),i([D({displayName:"\u4e0a\u706f\u56fe",type:[cc.SpriteFrame]})],t.prototype,"upLightFrame",void 0),i([D({displayName:"\u4e0b\u706f",type:cc.Sprite})],t.prototype,"downLight",void 0),i([D({displayName:"\u4e0b\u706f\u56fe",type:[cc.SpriteFrame]})],t.prototype,"downLightFrame",void 0),i([C],t)}(v.pzaBaseZombie);e.pzaDancingZombie=M,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewZombieView":"pzaNewZombieView","../../utils/pzakc":"pzakc","../Data/pzaBaseData":"pzaBaseData","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaDaveAdReward:[function(a,t,e){"use strict";cc._RF.push(t,"66b7et7MSpGj6rbaps6XSv5","pzaDaveAdReward");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDaveAdReward=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaGamePropConfig"),s=a("../../Common/pzaLocalData"),c=a("../../Common/pzaStatisticsMgr"),u=a("../../Common/pzaUtil"),d=a("../../utils/pzaChannel"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.propName=[],t.propDesc=[],t.adIcon=[],t.recieveIcon=[],t.recieveTxt=[],t.recieveBtn=[],t.skipPartNode=null,t.board=null,t.cherryNode=null,t}return n(t,a),t.prototype.onEnable=function(){this.recieveBtn.forEach(function(a){a.interactable=!0}),this.adIcon.forEach(function(a){a.active=!0}),this.recieveTxt.forEach(function(a){a.string="\u9886\u53d6"}),this.recieveIcon.forEach(function(a){u.pzaUtil.switchGraySprite(a,!1)});for(var a=l.pzaGamePropEnum.PROP_CHERRY_BOMB;a<=l.pzaGamePropEnum.PROP_AUTO_PICK;a++){var t=l.pzaGamePropConfig.PorpConfigMap.get(a);null!=t&&(this.propName[a-1].string=t.propName,this.propDesc[a-1].string=t.propDesc)}c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"6"},{name:"adname",value:"\u51c6\u5907\u9875\u9762\u6a31\u6843\u70b8\u5f39"}),c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"7"},{name:"adname",value:"\u51c6\u5907\u9875\u9762\u81ea\u52a8\u62fe\u53d6"}),c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"8"},{name:"adname",value:"\u51c6\u5907\u9875\u9762\u989d\u5916\u9633\u5149"});var e=!1,o=d.pzaChannel.instance().getChannel();if("wx"!==o.channel||null!=o.ctrl&&"1"===o.ctrl.p4||(e=!0),"ks"!==o.channel||null!=o.ctrl&&"1"===o.ctrl.p4||(e=!0),"tt"!==o.channel||null!=o.ctrl&&"1"===o.ctrl.p4||(e=!0),"my"!==o.channel||null!=o.ctrl&&"1"===o.ctrl.p4||(e=!0),r.pzaGameState.isMiniMode())return this.skipPartNode.active=!1,this.cherryNode.active=r.pzaGameState.curPart>=10,void(this.board.height=r.pzaGameState.curPart>=10?330:250);this.cherryNode.active=!0,e||r.pzaGameState.isSurvival()||r.pzaGameState.curChapter<s.pzaLocalData.data.curChapter||r.pzaGameState.curChapter==s.pzaLocalData.data.curChapter&&r.pzaGameState.curPart<s.pzaLocalData.data.curPart?(this.skipPartNode.active=!1,this.board.height=330):(this.skipPartNode.active=!0,this.board.height=410,c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"20"},{name:"adname",value:"\u6234\u592b\u5b9d\u85cf\u4f4d\u7f6e\u8df3\u5173"}))},t.prototype.clickCherryBomb=function(){var a=this;d.pzaChannel.instance().showVideo({sucCall:function(){a.obtainProp(l.pzaGamePropEnum.PROP_CHERRY_BOMB)},failCall:function(){},endCall:function(){},posName:"\u6a31\u6843\u70b8\u5f39",adsid:"6"})},t.prototype.clickAutoPick=function(){var a=this;d.pzaChannel.instance().showVideo({sucCall:function(){a.obtainProp(l.pzaGamePropEnum.PROP_AUTO_PICK)},failCall:function(){},endCall:function(){},posName:"\u81ea\u52a8\u62fe\u53d6",adsid:"7"})},t.prototype.clickFreeSun=function(){var a=this;d.pzaChannel.instance().showVideo({sucCall:function(){a.obtainProp(l.pzaGamePropEnum.PROP_FREE_SUN)},failCall:function(){},endCall:function(){},posName:"\u989d\u5916\u9633\u5149",adsid:"8"})},t.prototype.clickSkipPart=function(){d.pzaChannel.instance().showVideo({sucCall:function(){p.pzaGameManager.removeBattleUI(),window.pzazombieManager.skipPassPart()},failCall:function(){},endCall:function(){},posName:"\u6234\u592b\u5b9d\u85cf\u4f4d\u7f6e\u8df3\u5173",adsid:"20"})},t.prototype.obtainProp=function(a){this.recieveBtn[a-1].interactable=!1,this.adIcon[a-1].active=!1,this.recieveTxt[a-1].string="\u5df2\u9886",u.pzaUtil.switchGraySprite(this.recieveIcon[a-1],!0),s.pzaLocalData.obtainProp(a,1)},t.prototype.clickClose=function(){this.node.active=!1},i([f({displayName:"\u9053\u5177\u540d\u79f0",type:[cc.Label]})],t.prototype,"propName",void 0),i([f({displayName:"\u9053\u5177\u63cf\u8ff0",type:[cc.Label]})],t.prototype,"propDesc",void 0),i([f({displayName:"\u5e7f\u544a\u56fe\u6807",type:[cc.Node]})],t.prototype,"adIcon",void 0),i([f({displayName:"\u9886\u53d6\u6309\u94ae\u56fe",type:[cc.Sprite]})],t.prototype,"recieveIcon",void 0),i([f({displayName:"\u9886\u53d6\u6309\u94ae\u6587\u5b57",type:[cc.Label]})],t.prototype,"recieveTxt",void 0),i([f({displayName:"\u9886\u53d6\u6309\u94ae",type:[cc.Button]})],t.prototype,"recieveBtn",void 0),i([f({displayName:"\u8df3\u5173\u8282\u70b9",type:cc.Node})],t.prototype,"skipPartNode",void 0),i([f({displayName:"\u9762\u677f",type:cc.Node})],t.prototype,"board",void 0),i([f({displayName:"\u6a31\u6843\u70b8\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"cherryNode",void 0),i([m],t)}(cc.Component);e.pzaDaveAdReward=z,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaUtil":"pzaUtil","../../utils/pzaChannel":"pzaChannel"}],pzaDaveTreasureView:[function(a,t,e){"use strict";cc._RF.push(t,"52932bAw+lI3Z1YxI198yHJ","pzaDaveTreasureView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDaveTreasureView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaStatisticsMgr"),s=a("../../Common/pzaUtil"),c=a("../../utils/pzaChannel"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.recAllBtn=null,t.recBtn=[],t.cdReduceLevel=null,t.cdReduceLevelFrames=[],t.cdReduceValue=null,t.sunReduceLevel=null,t.sunReduceLevelFrames=[],t.sunReduceValue=null,t.critAddLevel=null,t.critAddLevelFrames=[],t.critAddValue=null,t.cardBoards=[],t.boradFrames=[],t.recNodes=[],t.cdValues=[.15,.25,.35],t.sunValues=[.15,.25,.35],t.critValues=[.15,.25,.35],t.curCdLevel=0,t.curSunLevel=0,t.curCritLevel=0,t.closeCall=null,t}return n(t,a),t.prototype.init=function(a){this.closeCall=a,this.recAllBtn.active=!1,this.recBtn.forEach(function(a){a.active=!0}),this.recNodes.forEach(function(a){a.active=!1}),this.curCdLevel=s.pzaUtil.getRandomNum(0,2),this.curSunLevel=s.pzaUtil.getRandomNum(0,2),this.curCritLevel=s.pzaUtil.getRandomNum(0,2),this.cdReduceLevel.spriteFrame=this.cdReduceLevelFrames[this.curCdLevel],this.cdReduceValue.string="\u51b7\u5374\u65f6\u95f4-"+Math.round(100*this.cdValues[this.curCdLevel])+"%",this.cardBoards[0].spriteFrame=this.boradFrames[this.curCdLevel],this.sunReduceLevel.spriteFrame=this.sunReduceLevelFrames[this.curSunLevel],this.sunReduceValue.string="\u9633\u5149\u6d88\u8017-"+Math.round(100*this.sunValues[this.curSunLevel])+"%",this.cardBoards[1].spriteFrame=this.boradFrames[this.curSunLevel],this.critAddLevel.spriteFrame=this.critAddLevelFrames[this.curCritLevel],this.critAddValue.string="\u690d\u7269\u66b4\u51fb+"+Math.round(100*this.critValues[this.curCritLevel])+"%",this.cardBoards[2].spriteFrame=this.boradFrames[this.curCritLevel],l.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"13"},{name:"adname",value:"\u9633\u5149\u6d88\u8017\u51cf\u5c11\u83b7\u53d6"}),l.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"14"},{name:"adname",value:"\u51b7\u5374\u65f6\u95f4\u51cf\u5c11\u83b7\u53d6"}),l.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"15"},{name:"adname",value:"\u690d\u7269\u66b4\u51fb\u589e\u52a0\u83b7\u53d6"})},t.prototype.clickRecCdReduce=function(){var a=this;c.pzaChannel.instance().showVideo({sucCall:function(){a.recAllBtn.active=!0,a.recBtn.forEach(function(a){a.active=!1}),a.recNodes[0].active=!0,r.pzaGameState.cdReduceValue=a.cdValues[a.curCdLevel],l.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"16"},{name:"adname",value:"\u5361\u7247\u5b9d\u85cf\u5168\u90fd\u8981"})},failCall:function(){},endCall:function(){},posName:"\u51b7\u5374\u65f6\u95f4\u51cf\u5c11",adsid:"14"})},t.prototype.clickRecSunReduce=function(){var a=this;c.pzaChannel.instance().showVideo({sucCall:function(){a.recAllBtn.active=!0,a.recBtn.forEach(function(a){a.active=!1}),a.recNodes[1].active=!0,r.pzaGameState.sunReduceValue=a.sunValues[a.curSunLevel],l.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"16"},{name:"adname",value:"\u5361\u7247\u5b9d\u85cf\u5168\u90fd\u8981"})},failCall:function(){},endCall:function(){},posName:"\u9633\u5149\u6d88\u8017\u51cf\u5c11",adsid:"13"})},t.prototype.clickCritAdd=function(){var a=this;c.pzaChannel.instance().showVideo({sucCall:function(){a.recAllBtn.active=!0,a.recBtn.forEach(function(a){a.active=!1}),a.recNodes[2].active=!0,r.pzaGameState.critValue=a.critValues[a.curCritLevel],l.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"16"},{name:"adname",value:"\u5361\u7247\u5b9d\u85cf\u5168\u90fd\u8981"})},failCall:function(){},endCall:function(){},posName:"\u690d\u7269\u66b4\u51fb\u589e\u52a0",adsid:"15"})},t.prototype.clickRecAll=function(){var a=this;c.pzaChannel.instance().showVideo({sucCall:function(){r.pzaGameState.cdReduceValue=a.cdValues[a.curCdLevel],r.pzaGameState.sunReduceValue=a.sunValues[a.curSunLevel],r.pzaGameState.critValue=a.critValues[a.curCritLevel],a.close()},failCall:function(){},endCall:function(){},posName:"\u5b9d\u85cf\u5168\u90fd\u8981",adsid:"16"})},t.prototype.clickClose=function(){this.close()},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node),this.closeCall&&this.closeCall()},i([h({displayName:"\u5168\u90e8\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"recAllBtn",void 0),i([h({displayName:"\u9886\u53d6\u6309\u94ae",type:[cc.Node]})],t.prototype,"recBtn",void 0),i([h({displayName:"\u51b7\u5374\u65f6\u95f4\u7b49\u7ea7",type:cc.Sprite})],t.prototype,"cdReduceLevel",void 0),i([h({displayName:"\u51b7\u5374\u65f6\u95f4\u7b49\u7ea7\u56fe",type:[cc.SpriteFrame]})],t.prototype,"cdReduceLevelFrames",void 0),i([h({displayName:"\u51b7\u5374\u65f6\u95f4\u6570\u503c",type:cc.Label})],t.prototype,"cdReduceValue",void 0),i([h({displayName:"\u9633\u5149\u6d88\u8017\u7b49\u7ea7",type:cc.Sprite})],t.prototype,"sunReduceLevel",void 0),i([h({displayName:"\u9633\u5149\u6d88\u8017\u7b49\u7ea7\u56fe",type:[cc.SpriteFrame]})],t.prototype,"sunReduceLevelFrames",void 0),i([h({displayName:"\u9633\u5149\u6d88\u8017\u6570\u503c",type:cc.Label})],t.prototype,"sunReduceValue",void 0),i([h({displayName:"\u690d\u7269\u66b4\u51fb\u7b49\u7ea7",type:cc.Sprite})],t.prototype,"critAddLevel",void 0),i([h({displayName:"\u690d\u7269\u66b4\u51fb\u7b49\u7ea7\u56fe",type:[cc.SpriteFrame]})],t.prototype,"critAddLevelFrames",void 0),i([h({displayName:"\u690d\u7269\u66b4\u51fb\u6570\u503c",type:cc.Label})],t.prototype,"critAddValue",void 0),i([h({displayName:"\u5361\u7247\u6846",type:[cc.Sprite]})],t.prototype,"cardBoards",void 0),i([h({displayName:"\u5361\u7247\u6846\u56fe",type:[cc.SpriteFrame]})],t.prototype,"boradFrames",void 0),i([h({displayName:"\u5df2\u9886\u53d6",type:[cc.Node]})],t.prototype,"recNodes",void 0),i([d],t)}(cc.Component);e.pzaDaveTreasureView=m,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaUtil":"pzaUtil","../../utils/pzaChannel":"pzaChannel"}],pzaDaySignConfig:[function(a,t,e){"use strict";cc._RF.push(t,"2062dWUqXhHDaeVfTtiTElm","pzaDaySignConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDaySignConfig=void 0;var o=a("./pzaGamePropConfig"),n=function(){function a(a,t,e,n,i){this.day=1,this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.recFun=0,this.iconIndex=0,this.day=a,this.rewardType=t,this.rewardCount=e,this.recFun=n,this.iconIndex=i}return a.initPropConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=parseInt(t.iD),n=new a(o,parseInt(t.rewardType),parseInt(t.rewardValue),parseInt(t.aDClaim),parseInt(t.icon));e.SignConfigMap.set(o,n)}})},a.SignConfigMap=new Map,a}();e.pzaDaySignConfig=n,cc._RF.pop()},{"./pzaGamePropConfig":"pzaGamePropConfig"}],pzaDaySignItem:[function(a,t,e){"use strict";cc._RF.push(t,"07009t8FXVPd5/j6Z3klToj","pzaDaySignItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDaySignItem=void 0;var r=a("../Common/pzaDaySignConfig"),p=a("../Common/pzaGameConfig"),l=a("../Common/pzaGamePropConfig"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaSpineController"),u=a("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.recedNode=null,t.coinIcon=null,t.coinFrames=[],t.propAni=null,t.plantCardNode=null,t.plantIcon=null,t.propName=null,t.propCount=null,t}return n(t,a),t.prototype.init=function(a){this.recedNode.active=s.pzaLocalData.data.signDays>=a,this.propCount.node.active=!1;var t=r.pzaDaySignConfig.SignConfigMap.get(a);if(null!=t)switch(t.rewardType){case l.pzaGamePropEnum.PROP_COIN:this.propAni&&(this.propAni.node.active=!1),this.plantCardNode&&(this.plantCardNode.active=!1),this.propName.string=""+t.rewardCount,this.coinIcon&&(this.coinIcon.node.active=!0,t.iconIndex>0&&(this.coinIcon.spriteFrame=this.coinFrames[t.iconIndex-1]));break;case l.pzaGamePropEnum.PROP_CHERRY_BOMB:case l.pzaGamePropEnum.PROP_AUTO_PICK:case l.pzaGamePropEnum.PROP_FREE_SUN:this.coinIcon&&(this.coinIcon.node.active=!1),this.plantCardNode&&(this.plantCardNode.active=!1),this.propCount.node.active=!0,this.propCount.string="x"+t.rewardCount,this.propAni&&(this.propAni.node.active=!0,t.rewardType==l.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAni.playAnimation("3ui_1",!0):t.rewardType==l.pzaGamePropEnum.PROP_AUTO_PICK?this.propAni.playAnimation("2ui_1",!0):t.rewardType==l.pzaGamePropEnum.PROP_FREE_SUN&&this.propAni.playAnimation("1ui_1",!0));var e=l.pzaGamePropConfig.PorpConfigMap.get(t.rewardType);null!=e&&(this.propName.string=""+e.propName);break;case l.pzaGamePropEnum.PROP_PLANTE:this.coinIcon&&(this.coinIcon.node.active=!1),this.propAni&&(this.propAni.node.active=!1),this.plantCardNode&&(this.plantCardNode.active=!0);var o=p.pzaGameConfig.getPlantConfig(t.rewardCount);null!=o&&(this.propName.string=""+o.name,u.pzaSpriteFrameManager.loadPlantCard(t.rewardCount,this.plantIcon))}},i([m({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],t.prototype,"recedNode",void 0),i([m({displayName:"\u91d1\u5e01\u56fe\u6807",type:cc.Sprite})],t.prototype,"coinIcon",void 0),i([m({displayName:"\u91d1\u5e01\u56fe",type:[cc.SpriteFrame]})],t.prototype,"coinFrames",void 0),i([m({displayName:"\u9053\u5177\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"propAni",void 0),i([m({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"plantCardNode",void 0),i([m({displayName:"\u690d\u7269\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"plantIcon",void 0),i([m({displayName:"\u9053\u5177\u540d\u79f0",type:cc.Label})],t.prototype,"propName",void 0),i([m({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],t.prototype,"propCount",void 0),i([h],t)}(cc.Component);e.pzaDaySignItem=f,cc._RF.pop()},{"../Common/pzaDaySignConfig":"pzaDaySignConfig","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaDaySignView:[function(a,t,e){"use strict";cc._RF.push(t,"9f77dOqf6JEWLFQaxF7d/9e","pzaDaySignView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDaySignView=void 0;var r=a("../Common/pzaDaySignConfig"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGamePropConfig"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaRewardManager"),u=a("../Common/pzaSoundManager"),d=a("../Common/pzaStatisticsMgr"),h=a("../utils/pzaChannel"),m=a("../utils/pzakc"),f=a("./pzaDaySignItem"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.adRecBtn=null,t.recBtn=null,t.adRecBtnTxt=null,t.items=[],t}return n(t,a),t.prototype.onEnable=function(){d.pzaStatisticsMgr.sendEvent("System",{name:"system",value:1});for(var a=0;a<7;a++){var t=this.items[a];null!=t&&t.init(a+1)}if(s.pzaLocalData.data.hasSign||s.pzaLocalData.data.signDays>=7)return this.adRecBtn.active=!1,void(this.recBtn.active=!1);var e=r.pzaDaySignConfig.SignConfigMap.get(s.pzaLocalData.data.signDays+1);null!=e&&(0==e.recFun?(this.adRecBtn.active=!0,this.recBtn.active=!0,this.adRecBtn.x=-222,this.adRecBtnTxt.string="\u53cc\u500d\u9886\u53d6"):(this.adRecBtn.active=!0,this.recBtn.active=!1,this.adRecBtn.x=0,this.adRecBtnTxt.string="\u7acb\u5373\u9886\u53d6"),d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"1"},{name:"adname",value:"\u7b7e\u5230\u53cc\u500d\u9886\u53d6"}))},t.prototype.clickClose=function(){u.pzaSoundManager.playSFX(),this.close()},t.prototype.clickRec=function(){var a=this;u.pzaSoundManager.playSFX();var t=r.pzaDaySignConfig.SignConfigMap.get(s.pzaLocalData.data.signDays+1);if(null!=t){s.pzaLocalData.data.signDays++,s.pzaLocalData.data.hasSign=!0,s.pzaLocalData.addDirty("signDays","hasSign"),s.pzaLocalData.data.signDays>=7&&(s.pzaLocalData.data.canMonthSign=!0,s.pzaLocalData.addDirty("canMonthSign"),m.default.sendMsg("unlockMonth"));var e=[new l.pzaRewardPropData(t.rewardType,t.rewardCount)];c.pzaRewardManager.recieveRewards(e,function(){a.requestSubscribeMessage(s.pzaLocalData.data.signDays+1)}),this.close()}},t.prototype.clickAdRec=function(){var a=this;u.pzaSoundManager.playSFX(),h.pzaChannel.instance().showVideo({sucCall:function(){var t=r.pzaDaySignConfig.SignConfigMap.get(s.pzaLocalData.data.signDays+1);if(null!=t){s.pzaLocalData.data.signDays++,s.pzaLocalData.data.hasSign=!0,s.pzaLocalData.addDirty("signDays","hasSign"),s.pzaLocalData.data.signDays>=7&&(s.pzaLocalData.data.canMonthSign=!0,s.pzaLocalData.addDirty("canMonthSign"),m.default.sendMsg("unlockMonth"));var e=new l.pzaRewardPropData(t.rewardType,t.rewardCount);0==t.recFun&&(e.propCount=2*t.rewardCount),c.pzaRewardManager.recieveRewards([e],function(){a.requestSubscribeMessage(s.pzaLocalData.data.signDays+1)}),a.close()}},failCall:function(){},endCall:function(){},posName:"\u7b7e\u5230\u53cc\u500d\u9886\u53d6",adsid:"1"})},t.prototype.requestSubscribeMessage=function(a){if(!(a>7)){var t=h.pzaChannel.instance().getChannel();"wx"==t.channel&&t.requestSubscribeMessage(["9AljghJM-RaQdzrE4D9cRyuoz21RyEBL93lYx9lm0gI"],function(){h.pzaChannel.subMsg(t.getPara("appId"),t.channelUserId,"9AljghJM-RaQdzrE4D9cRyuoz21RyEBL93lYx9lm0gI",a,function(a){console.log("subMsg",a)})})}},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([g({displayName:"\u5e7f\u544a\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"adRecBtn",void 0),i([g({displayName:"\u666e\u901a\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"recBtn",void 0),i([g({displayName:"\u5e7f\u544a\u9886\u53d6\u6309\u94ae\u6587\u5b57",type:cc.Label})],t.prototype,"adRecBtnTxt",void 0),i([g({displayName:"\u7b7e\u5230items",type:[f.pzaDaySignItem]})],t.prototype,"items",void 0),i([y],t)}(cc.Component);e.pzaDaySignView=v,cc._RF.pop()},{"../Common/pzaDaySignConfig":"pzaDaySignConfig","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaDaySignItem":"pzaDaySignItem"}],pzaDiggerFootBallZombie:[function(a,t,e){"use strict";cc._RF.push(t,"83d8bXs2gdJHalSDJ3F4gSD","pzaDiggerFootBallZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDiggerFootBallZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../pzaGameState"),u=a("./pzaDiggerZombie"),d=a("./pzaZombieSlot"),h=a("./pzaZombieState"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=d.pzaZombieSlotType.hat_digger2,t.gaoSlot=d.pzaZombieSlotType.gao2,t.hatInDig=d.pzaZombieSlotType.hat_digger2,t.garlicSkinName="2biaoqing2",t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[d.pzaZombieSlotType.butter,new d.pzaZombieSlot(this.animation.spineAnimation,d.pzaZombieSlotType.butter).addState(new d.pzaZombieSlotAtt(1,d.pzaZombieSlotType.butter,-31.2,76.01))],[d.pzaZombieSlotType.hat_digger2,new d.pzaZombieSlot(this.animation.spineAnimation,d.pzaZombieSlotType.hat_digger2).addState(new d.pzaZombieSlotAtt(1,d.pzaZombieSlotType.hat_digger2_in,-28.91,13.93))],[this.gaoSlot,new d.pzaZombieSlot(this.animation.spineAnimation,this.gaoSlot).addState(new d.pzaZombieSlotAtt(1,this.gaoSlot,36.1,5.03,-139.57))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE,-1))},t.prototype.findTarget=function(){if(!this.hasBreakGround){var t=a.prototype.findTarget.call(this);if(null!=t){var e=""+t.xIndex+t.yIndex,o=window.pzaplantManager.plantDataMap.get(e);null!=o&&null!=o.plantData&&o.plantData.plantType==s.pzaPlantEnum.HoleNut&&this.breakGround(!1)}return null}return a.prototype.findTarget.call(this)},t.prototype.breakGround=function(a){var t=this;this.body.node.scaleX=1,this.baseData.buffData.removeBuff(l.pzaBuffType.UNABLE_SELECT),this.baseData.buffData.removeBuff(l.pzaBuffType.DIVE),this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_ICE),this.hasBreakGround=!0,this.curShadow&&this.curShadow.showShadow(),this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,a&&(this.baseData.zombieData.direction=1,this.refreshOrientation()),this.hasTool=!1;var e=!1;if(function(){a?p.pzaSoundManager.playAudio("digger_arise"):p.pzaSoundManager.playAudio("gravestone_rumble"),t.updateEquipState(t.hatInDig,0),t.updateEquipState(t.gaoSlot,0),t.animation.playAnimation("jump",!1,function(){t.body.node.getComponent(cc.BoxCollider).enabled=!0,t.baseData.isDead=!1,t.zombieState=h.pzaZombieState.STAY,e=!0});var o=t.animation.getAnimationDuration("fall")/t.animation.spineAnimation.timeScale+.1;t.scheduleOnce(function(){e||(t.body.node.getComponent(cc.BoxCollider).enabled=!0,t.baseData.isDead=!1)},o),t.body.node.scaleY=1}(),null!=this.baseData&&null!=this.baseData.zombieData){var o=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=c.pzaGameState.map.getBlockWidth()/o}},t.prototype.getMoveAniName=function(){return"walk"},i([f],t)}(u.pzaDiggerZombie));e.pzaDiggerFootBallZombie=z,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaDiggerZombie":"pzaDiggerZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaDiggerZombie:[function(a,t,e){"use strict";cc._RF.push(t,"bbc77EVr1JHka/8NvpYWl2d","pzaDiggerZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDiggerZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Load/pzaBundleObjectPool"),c=a("../../Load/pzaPreLoadManager"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaPlantEnum"),h=a("../Effect/pzaShadowEffect"),m=a("../pzaEffectManager"),f=a("../pzaGameState"),z=a("./pzaBaseZombie"),y=a("./pzaZombieSlot"),g=a("./pzaZombieState"),v=cc._decorator,b=v.ccclass,S=(v.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hasBreakGround=!1,t.breakPosX=0,t.isNormalBreak=!0,t.equip1Slot=y.pzaZombieSlotType.hat_digger,t.gaoSlot=y.pzaZombieSlotType.gao,t.hatInDig=y.pzaZombieSlotType.hat_digger_in,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[y.pzaZombieSlotType.butter,new y.pzaZombieSlot(this.animation.spineAnimation,y.pzaZombieSlotType.butter).addState(new y.pzaZombieSlotAtt(1,y.pzaZombieSlotType.butter,-22.79,100.48))],[this.equip1Slot,new y.pzaZombieSlot(this.animation.spineAnimation,this.equip1Slot).addState(new y.pzaZombieSlotAtt(1,this.equip1Slot+"1",20.19,23.81,-114.32)).addState(new y.pzaZombieSlotAtt(2,this.equip1Slot+"2",20.19,23.81,-114.32)).addState(new y.pzaZombieSlotAtt(3,this.equip1Slot+"3",23.32,13.66,-114.32))],[this.hatInDig,new y.pzaZombieSlot(this.animation.spineAnimation,this.hatInDig).addState(new y.pzaZombieSlotAtt(1,this.hatInDig,-23.74,-20.56,4.1))],[this.gaoSlot,new y.pzaZombieSlot(this.animation.spineAnimation,this.gaoSlot).addState(new y.pzaZombieSlotAtt(1,this.gaoSlot+"1",51.27,-7.94,-150.79))]])},t.prototype.bindData=function(t){this.hasBreakGround=!1,a.prototype.bindData.call(this,t),this.body.node.scaleX=.1,t.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.UNABLE_SELECT,-1)),t.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.DIVE,-1)),f.pzaGameState.map&&(this.breakPosX=f.pzaGameState.map.getMapOriPos().x+50),this.isNormalBreak=!0},t.prototype.equipIntact=function(){a.prototype.equipIntact.call(this),this.updateEquipState(this.gaoSlot,1)},t.prototype.findTarget=function(){if(!this.hasBreakGround){var t=a.prototype.findTarget.call(this);if(null!=t){var e=""+t.xIndex+t.yIndex,o=window.pzaplantManager.plantDataMap.get(e);if(null!=o&&null!=o.plantData)if(o.plantData.plantType==d.pzaPlantEnum.POTATO_MINE){if(!o.plantData.hasBreakGround)return o}else o.plantData.plantType==d.pzaPlantEnum.HoleNut&&(this.breakPosX=t.logicPos.x+50,this.isNormalBreak=!1)}return null}return a.prototype.findTarget.call(this)},t.prototype.updateMove=function(t){a.prototype.updateMove.call(this,t),this.hasBreakGround?this.baseData.logicPos.x>=640&&(this.baseData.zombieDie(),this.death(!1)):this.baseData.logicPos.x<=this.breakPosX&&this.breakGround(this.isNormalBreak)},t.prototype.breakGround=function(a){var t=this;this.body.node.scaleX=1,this.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.DIZZ,-1)),this.baseData.buffData.removeBuff(u.pzaBuffType.UNABLE_SELECT),this.baseData.buffData.removeBuff(u.pzaBuffType.DIVE),this.hasBreakGround=!0,this.curShadow&&this.curShadow.showShadow(),this.preventBreak(),a&&(this.baseData.zombieData.direction=1,this.refreshOrientation());var e=function(){a?l.pzaSoundManager.playAudio("digger_arise"):l.pzaSoundManager.playAudio("gravestone_rumble");var e=!1,o=a?"arise":"jump";t.updateEquipState(t.hatInDig,0),t.animation.playAnimation(o,!1,function(){t.animation.playAnimation(o+"1",!1,function(){e||(e=!0,t.updateEquipState(t.equip1Slot,1),t.resumeBreak(),t.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.DIZZ,3)),t.animation.playAnimation("idle2",!0),t.zombieState=g.pzaZombieState.STAY)})});var n=(t.animation.getAnimationDuration(o)+t.animation.getAnimationDuration(o+"1"))/t.animation.spineAnimation.timeScale+.1;t.scheduleOnce(function(){e||(e=!0,t.updateEquipState(t.equip1Slot,1),t.resumeBreak(),t.baseData.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.DIZZ,3)),t.animation.playAnimation("idle2",!0),t.zombieState=g.pzaZombieState.STAY)},n),t.body.node.scaleY=1};a?e():this.animation.playAnimation("dig2",!1,e);var o=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=f.pzaGameState.map.getBlockWidth()/o},t.prototype.toolDeath=function(){this.hasTool=!1,this.updateEquipState(this.gaoSlot,0),this.hasBreakGround||this.breakGround(!1)},t.prototype.getMoveAniName=function(){return"move"},t.prototype.playMoveAnimation=function(){var a=this;if(this.zombieState=g.pzaZombieState.MOVE,this.hasBreakGround)this.animation.playAnimation(this.getMoveAniName(),!0);else{this.updateEquipState(this.hatInDig,1),this.updateEquipState(this.equip1Slot,0);var t=function(){l.pzaSoundManager.playAudio("digger_zombie"),a.animation.playAnimation("dig",!1,t),a.body.node.scaleY=.4};t()}},t.prototype.playAttakAnimation=function(){var a=this;this.zombieState=g.pzaZombieState.EAT_ATK,this.hasBreakGround?this.animation.playAnimation("attack",!0,null,function(){var t=a.findTarget();if(null!=t&&!t.isDead&&null!=t.plantData&&t.plantData.plantType==d.pzaPlantEnum.HYPNO_SHROOM&&!t.plantData.sleeping){l.pzaSoundManager.playAudio("mindcontrolled"),t.isDead=!0,window.pzazombieManager.zombieHypnosis(a.baseData);var e=window.pzaplantManager.getPlantByData(t);e&&e.close(),window.pzaplantManager.removePlant(t)}}):(this.updateEquipState(this.hatInDig,1),this.updateEquipState(this.equip1Slot,0),this.animation.playAnimation("dig",!0))},t.prototype.createShadow=function(a){var t=this;void 0===a&&(a=null),this.needShadow?(null==a&&(a=p.pzaNodeManager.getDownEffectNode()),s.pzaBundleObjectPool.requestInstantByUrl2(c.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(a);var n=o.getComponent(h.pzaShadowEffect);n&&n.init(t.baseData,t.shadowOffset,t.zombieScale),n&&n.hideShadow(),t.curShadow=n}else console.error(e)})):this.curShadow=null},t.prototype.ashesDeath=function(){if(this.baseData.zombieDie(),this.death(!1),this.hasBreakGround){var a=this.baseData.zombieData.zombieType,t="death1";this.hasTool||(t="death2"),m.pzaEffectManager.createAshesEffect(a,this.baseData.logicPos,this.baseData.zombieData.direction,this.node.zIndex,this.zombieScale,t)}},t.prototype.logicLateUpdate=function(t){t>.7||(this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null!=this.baseData&&null!=this.baseData.logicPos&&(this.hasBreakGround?a.prototype.logicLateUpdate.call(this,t):this.node.setPosition(this.baseData.logicPos)))},i([b],t)}(z.pzaBaseZombie));e.pzaDiggerZombie=S,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Effect/pzaShadowEffect":"pzaShadowEffect","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaDirBullet:[function(a,t,e){"use strict";cc._RF.push(t,"0d455lSmZ5G4ITb0JWm066z","pzaDirBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDirBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaNodeManager"),u=a("../../Common/pzaWorldEventManager"),d=a("../../Load/pzaBundleObjectPool"),h=a("../../Load/pzaPreLoadManager"),m=a("../Data/pzaBuffData"),f=a("../Effect/pzaBaseEffect"),z=a("../Effect/pzaShadowEffect"),y=a("../Zombie/pzaZombieBody"),g=cc._decorator,v=g.ccclass,b=g.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.speed=400,t.maxLifeTime=3,t.needShadow=!1,t.hitPrefab=null,t.poolPrefab=null,t.hitBuff=0,t.lifeTime=0,t.atk=0,t.curShadow=null,t.direction=cc.v2(1,0),t.isInAir=!1,t.collider=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.init=function(a,t){p.pzaCollisionManager.getInstance.addBulletOther(this),this.atk=t,this.lifeTime=0,this.direction=a,this.isInAir=!1,this.node.scale=1,this.createShadow()},t.prototype.logicUpdate=function(a){this.lifeTime+=a,this.lifeTime>=this.maxLifeTime?this.close():this.updateMove(a)},t.prototype.updateMove=function(a){this.node.x+=this.direction.x*this.speed*a,this.node.y+=this.direction.y*this.speed*a,this.shadowMove()},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.onCollision=function(a){if(null!=a&&a.node.group==s.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(y.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderZombie=function(a){if(a&&!a.isDead&&!a.buffData.hasBuff(m.pzaBuffType.DIVE)&&!a.buffData.hasBuff(m.pzaBuffType.UNABLE_SELECT)&&(this.isInAir||!a.buffData.hasBuff(m.pzaBuffType.FLY))&&(!this.isInAir||a.buffData.hasBuff(m.pzaBuffType.FLY))&&!(a.buffData.hasBuff(m.pzaBuffType.INVINCIBLE)||a.zombieData&&a.zombieData.hypnosis)){var t=window.pzazombieManager.getZombie(a);if(t&&(t.hurt(this.atk),this.close(),this.playHitEffect(a),1===this.hitBuff&&!a.buffData.hasBuff(m.pzaBuffType.IMM_CONTROL)&&!a.buffData.hasBuff(m.pzaBuffType.IMM_IMMOBILIZE))){var e=a.buffData.releaseBuff(m.pzaBuffType.IMMOBILIZE);null!=e?e.buffTime=5:(e=new m.pzaBuffInfo(m.pzaBuffType.IMMOBILIZE,5),a.buffData.addBuff(e),t.bePauseControl())}}},t.prototype.createShadow=function(){var a=this;if(this.needShadow){var t=c.pzaNodeManager.getDownEffectNode();d.pzaBundleObjectPool.requestInstantByUrl2(h.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(t);var n=o.getComponent(z.pzaShadowEffect);n&&n.init(null,cc.v2(),.35),a.curShadow=n,a.shadowMove()}else console.error(e)})}else this.curShadow=null},t.prototype.shadowMove=function(){if(null!=this.curShadow){var a=cc.v2(this.node.x,0);a.y=this.node.y-60,this.curShadow.followMove(a)}},t.prototype.close=function(){p.pzaCollisionManager.getInstance.delBulletOther(this),null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},t.prototype.playHitEffect=function(a){if(null!=this.hitPrefab){var t=5,e=cc.v2(this.node.x,this.node.y);null!=a&&(t=10*-a.yIndex+5,e=cc.v2(a.logicPos.x,a.logicPos.y+70));var o=c.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=l.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.zIndex=t,n.setPosition(e);var i=n.getComponent(f.pzaBaseEffect);i&&i.showEffect(null,null)}}},i([b({displayName:"\u5b50\u5f39\u98de\u884c\u901f\u5ea6"})],t.prototype,"speed",void 0),i([b({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],t.prototype,"maxLifeTime",void 0),i([b({displayName:"\u662f\u5426\u9700\u8981\u5f71\u5b50"})],t.prototype,"needShadow",void 0),i([b({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"hitPrefab",void 0),i([b(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([b({displayName:"\u5b50\u5f39\u51fb\u4e2dbuff"})],t.prototype,"hitBuff",void 0),i([v],t)}(r.pzaBaseComponent);e.pzaDirBullet=S,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Effect/pzaBaseEffect":"pzaBaseEffect","../Effect/pzaShadowEffect":"pzaShadowEffect","../Zombie/pzaZombieBody":"pzaZombieBody"}],pzaDolphinRiderZombie:[function(a,t,e){"use strict";cc._RF.push(t,"e72a1SeCnFGirdVMv2VJly8","pzaDolphinRiderZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDolphinRiderZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaBaseZombie"),m=a("./pzaZombieSlot"),f=a("./pzaZombieState"),z=cc._decorator,y=z.ccclass,g=(z.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.enterWater=!1,t.hasJump=!1,t.jumping=!1,t.jumpMsp=0,t.jumpDuration=1,t.garlicSkinName="biaoqing2",t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,20,65.73,10))]])},t.prototype.bindData=function(t){this.hasJump=!1,this.jumping=!1,this.enterWater=!1,this.jumpMsp=0,this.jumpDuration=this.animation.getAnimationDuration("jump2"),a.prototype.bindData.call(this,t);var e=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/e,this.body.changeBody(cc.v2(-20,65),110)},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData)if(this.baseData.isDead)this.baseData.hp>0&&this.jumpMsp>0&&this.jumpMove(a);else if(this.jumpMsp>0)this.jumpMove(a);else if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow){if(this.pushBackTime>0)this.pushBackMove(a);else if(!this.jumping)if(this.hasJump||!this.enterWater){var t=this.findTarget();null!=t&&!t.isDead&&this.enterWater?this.attack(a,t):this.updateMove(a)}else{var e=this.findJumpTarget();null!=e?this.jump(e):this.updateMove(a)}}else this.changeRowMove(a)},t.prototype.updateMove=function(t){var e=this,o=this.baseData.xIndex;a.prototype.updateMove.call(this,t),o<0&&this.baseData.xIndex>=0?(this.jumping=!0,this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.curShadow&&this.curShadow.hideShadow(),this.animation.playAnimation("jump1",!1,function(){e.jumping=!1,e.resumeBreak(),e.enterWater=!0,e.body.curTarget=null;var a=e.animation.findBone("zong");null!=a?e.baseData.logicPos.x+=e.baseData.zombieData.direction*(84.15-a.worldX):e.baseData.logicPos.x-=85;var t=r.pzaGameConfig.getZombieSpeed(e.baseData.zombieData.zombieType);e.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/t,e.playMoveAnimation(),u.pzaEffectManager.createWaterFlowerEffect(e.baseData.yIndex,e.baseData.logicPos,null)},function(){p.pzaSoundManager.playAudio("zombie_entering_water"),u.pzaEffectManager.createWaterFlowerEffect(e.baseData.yIndex,cc.v2(e.baseData.logicPos.x-85,e.baseData.logicPos.y),null)})):this.baseData.xIndex<0&&o>=0&&(null!=this.mask&&(this.mask.enabled=!0),this.animation.playAnimation("move2",!0),u.pzaEffectManager.createWaterFlowerEffect(this.baseData.yIndex,this.baseData.logicPos,null),this.animation.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2()),cc.callFunc(function(){e.curShadow&&e.curShadow.showShadow(),null!=e.mask&&(e.mask.enabled=!1)}))))},t.prototype.findJumpTarget=function(){if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;if(null==this.body.curTarget.zombieData){var a=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(this.body.curTarget.plantData.cate===s.pzaPlantCate.Spike){var t=window.pzaplantManager.pumpkinDataMap.get(a);return null==t||t.isDead?null:t}if(this.body.curTarget.plantData.plantType==s.pzaPlantEnum.TALL_NUT)return this.body.curTarget;if(this.body.curTarget.plantData.plantType==s.pzaPlantEnum.COB_CANNON)return this.body.curTarget;var e=window.pzaplantManager.plantDataMap.get(a);return null==e||e.isDead||e.plantData.plantType!=s.pzaPlantEnum.TALL_NUT&&e.plantData.plantType!=s.pzaPlantEnum.COB_CANNON?this.body.curTarget:e}},t.prototype.jumpMove=function(a){this.baseData.logicPos.x-=a*this.jumpMsp},t.prototype.jump=function(a){var t=this;if(null!=a){var e=a.xIndex,o=d.pzaGameState.map.getXPos(e)+d.pzaGameState.map.getMapOriPos().x;this.jumpMsp=(this.baseData.logicPos.x-o)/(this.jumpDuration-.26),this.jumping=!0,this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1));var n=a.plantData.plantType!=s.pzaPlantEnum.TALL_NUT;p.pzaSoundManager.playAudio("dolphin_before_jumping");var i=0;this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.animation.playAnimation(n?"jump2":"jump3",!1,function(){t.resumeBreak(),t.jumpMsp=0,n||p.pzaSoundManager.playAudio("bonk"),p.pzaSoundManager.playAudio("zombie_entering_water"),t.baseData.zombieData.toolType=c.pzaEquipType.NO_EQUIP,t.toolDeath();var a=r.pzaGameConfig.getZombieSpecialSpeed(t.baseData.zombieData.zombieType);t.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/a;var e=d.pzaGameState.map.getMapXIndex(t.baseData.logicPos);t.baseData.xIndex=e,t.hasJump=!0,n?t.playMoveAnimation():t.animation.playAnimation("attack",!0),t.body.changeBody(cc.v2(10,65),60),t.body.curTarget=null,t.jumping=!1,t.baseData.buffData.removeBuff(l.pzaBuffType.IMM_CONTROL)},function(){if(t.jumpMsp=0,n||1==i){var a=cc.v2(t.baseData.logicPos.x,t.baseData.logicPos.y);u.pzaEffectManager.createWaterFlowerEffect(t.baseData.yIndex,a,null)}i++})}},t.prototype.playMoveAnimation=function(){if(null!=this.baseData&&this.baseData.xIndex>=0)return this.zombieState=f.pzaZombieState.MOVE,void(this.hasJump?this.animation.playAnimation("move4",!0):this.animation.playAnimation("move3",!0));this.zombieState=f.pzaZombieState.MOVE,this.hasJump?this.animation.playAnimation("move2",!0):this.animation.playAnimation("move1",!0)},t.prototype.zombieGoHome=function(){this.jumping||a.prototype.zombieGoHome.call(this)},t.prototype.zombieWinMove=function(t){if(!this.hasJump){this.hasJump=!0;var e=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/e}a.prototype.zombieWinMove.call(this,t)},t.prototype.zombieScream=function(){p.pzaSoundManager.playAudio("Dolphin_Enter")},t.prototype.ashesDeath=function(){this.jumping?this.death(!1):a.prototype.ashesDeath.call(this)},i([y],t)}(h.pzaBaseZombie));e.pzaDolphinRiderZombie=g,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaDoomBullet:[function(a,t,e){"use strict";cc._RF.push(t,"7105651O/ZNMaf3HrdseBE8","pzaDoomBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDoomBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Plant/pzaAttackType"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.targetPos=null,t.targetXIndex=-1,t.targetYIndex=-1,t.logicPos=null,t.moveSpeed=800,t.atk=0,t.up=!0,t}return n(t,a),t.prototype.init=function(a,t,e,o,n){this.atk=a,this.logicPos=t,this.targetPos=e,this.targetXIndex=o,this.targetYIndex=n,this.node.scaleY=1,this.up=!0},t.prototype.logicUpdate=function(a){this.logicPos.y+=a*this.moveSpeed*(this.up?1:-1),this.node.setPosition(this.logicPos),this.up?this.logicPos.y>=560&&(this.logicPos.x=this.targetPos.x,this.up=!1,this.node.scaleY=-1):this.logicPos.y<=this.targetPos.y&&this.boom()},t.prototype.boom=function(){var a=this;this.close(),p.pzaSoundManager.playAudio("doomshroom"),c.pzaEffectManager.createDoomBoomEffect(this.targetPos);var t=u.pzaGameState.map.getBlockLogicPos(this.targetXIndex,this.targetYIndex,u.pzaGameState.map.getXInterval(this.targetXIndex)/2,50);c.pzaEffectManager.createDoomHoleEffect(t,this.targetXIndex,this.targetYIndex);var e=3.5*u.pzaGameState.map.getBlockWidth(),o=window.pzazombieManager.findFixRangeZombies(this.targetPos,e);null==o&&(o=[]),this.targetXIndex>=7&&null!=window.pzazombieManager.drZomBoss&&o.push(window.pzazombieManager.drZomBoss),o.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||t&&t.hurt(a.atk,null,s.pzaAttackType.BOOM)})},i([h],t)}(r.pzaBaseComponent));e.pzaDoomBullet=m,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDoomCannon:[function(a,t,e){"use strict";cc._RF.push(t,"0764dK0M4RI0YKB0Lc41ZJG","pzaDoomCannon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDoomCannon=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../../Common/pzaWorldEventManager"),u=a("../Bullet/pzaDoomBullet"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cobPrefab=null,t.blinkTime=3,t.loadTime=6.25,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.LAUNCH_COB_CANNON,this.launchCob,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.loadTime=6.25,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),d.pzaGameState.cobCannonCount++},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.loadTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){if(!a.baseData.plantData.cobLoadFinish&&a.loadTime<=0)return a.scheduleOnce(function(){l.pzaSoundManager.playAudio("shoop")},.2),void a.animation.playAnimation("out",!1,function(){a.baseData.plantData.cobLoadFinish=!0,t()});a.blinkTime>0?a.animation.playAnimation(a.baseData.plantData.cobLoadFinish?"idle2":"idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation(a.baseData.plantData.cobLoadFinish?"idle2_eye":"idle1_eye",!1,t))};this.animation.playAnimation(this.baseData.plantData.cobLoadFinish?"idle2":"idle1",!1,t)},t.prototype.shoot=function(a,t,e){var o=this;this.baseData.plantData.cobLoadFinish&&(this.baseData.plantData.cobLoadFinish=!1,this.loadTime=36,d.pzaGameState.cobCannon=null,this.animation.playAnimation("attack",!1,this.playNormalAni.bind(this),function(){l.pzaSoundManager.playAudio("coblaunch");var n=cc.v2(o.baseData.logicPos.x+5,o.baseData.logicPos.y+400),i=p.pzaNodeManager.getUpEffectNode(),s=r.pzaGameCommonPool.requestInstant(o.cobPrefab,!1);if(null!=i&&null!=s){s.setParent(i),s.setPosition(n);var c=s.getComponent(u.pzaDoomBullet);c&&c.init(o.baseData.atk,n,a,t,e)}}))},t.prototype.launchCob=function(a){null!=a.data&&a.data==this.baseData&&this.shoot(a.pos,a.xIndex,a.yIndex)},t.prototype.close=function(){a.prototype.close.call(this),this.baseData==d.pzaGameState.cobCannon&&(d.pzaGameState.cobCannon=null)},i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cobPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaDoomCannon=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaDoomBullet":"pzaDoomBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaDoomHoleEffect:[function(a,t,e){"use strict";cc._RF.push(t,"e1c4f49UvxH+oX3UHpxrfA2","pzaDoomHoleEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDoomHoleEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaMapManager"),l=a("../pzaGameState"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hole=null,t.holeFrames=[],t.holeTime=0,t.holeStep=1,t.mapXIndex=-1,t.mapYIndex=-1,t}return n(t,a),t.prototype.init=function(a,t){this.mapXIndex=a,this.mapYIndex=t,this.holeTime=0,this.holeStep=1,this.showHole(),window.pzaMapManager.addDoomHole(this)},t.prototype.recover=function(a,t,e,o){this.mapXIndex=a,this.mapYIndex=t,this.holeTime=e,this.holeStep=o,this.showHole(),window.pzaMapManager.addDoomHole(this)},t.prototype.logicUpdate=function(a){if(this.holeTime+=a,this.holeTime>=180)return this.close(),void window.pzaMapManager.removeDoomHole(this);this.holeTime>=90&&1==this.holeStep&&(this.holeStep=2,this.showHole())},t.prototype.close=function(){a.prototype.close.call(this),window.pzaplantManager.holeMap.delete(""+this.mapXIndex+this.mapYIndex)},t.prototype.showHole=function(){var a=window.pzaMapManager.getRowBlockType(this.mapYIndex);a==p.pzaBlockType.GRASS?l.pzaGameState.gameTimeType==l.pzaGameTimeType.DAY?this.hole.spriteFrame=1==this.holeStep?this.holeFrames[0]:this.holeFrames[1]:this.hole.spriteFrame=1==this.holeStep?this.holeFrames[2]:this.holeFrames[3]:a==p.pzaBlockType.POND?l.pzaGameState.gameTimeType==l.pzaGameTimeType.DAY?this.hole.spriteFrame=1==this.holeStep?this.holeFrames[4]:this.holeFrames[5]:this.hole.spriteFrame=1==this.holeStep?this.holeFrames[6]:this.holeFrames[7]:a==p.pzaBlockType.ROOF&&(this.hole.spriteFrame=1==this.holeStep?this.holeFrames[8]:this.holeFrames[9]),window.pzaplantManager.holeMap.set(""+this.mapXIndex+this.mapYIndex,1)},i([u({displayName:"\u6d1e",type:cc.Sprite})],t.prototype,"hole",void 0),i([u({displayName:"\u6d1e\u56fe",type:[cc.SpriteFrame]})],t.prototype,"holeFrames",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaDoomHoleEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaMapManager":"pzaMapManager","../pzaGameState":"pzaGameState"}],pzaDoomShroom:[function(a,t,e){"use strict";cc._RF.push(t,"36aa8kF/wpAbJVUIU/KcNOn","pzaDoomShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDoomShroom=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaUtil"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.animation.node.active=!0,t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.attack()),c.pzaGameState.useShroom=!0},t.prototype.wakeUp=function(){var a=this;null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,function(){a.attack()}))},t.prototype.attack=function(){var a=this;this.baseData.hp=0,this.baseData.isDead=!0,r.pzaSoundManager.playAudio("JalapenoReady"),this.animation.playAnimation("blow",!1,function(){a.boom()})},t.prototype.boom=function(){var a=this;r.pzaSoundManager.playAudio("doomshroom"),window.pzaMapManager.shakeMap(),window.pzaMapManager.blink(2),s.pzaEffectManager.createDoomBoomEffect(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y-25)),window.pzaplantManager.removePlant(this.baseData),s.pzaEffectManager.createDoomHoleEffect(this.baseData.logicPos,this.baseData.xIndex,this.baseData.yIndex),this.death();var t=3.5*c.pzaGameState.map.getBlockWidth(),e=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,t);null==e&&(e=[]),this.baseData.xIndex>=5&&null!=window.pzazombieManager.drZomBoss&&e.push(window.pzazombieManager.drZomBoss),e.forEach(function(t){t&&t.hurt(a.baseData.atk,a.baseData,u.pzaAttackType.BOOM)});var o=""+this.baseData.xIndex+this.baseData.yIndex,n=window.pzaplantManager.plantEnvDataMap.get(o);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,null,u.pzaAttackType.BOOM)}window.pzaMapManager.LadderMap.forEach(function(e,o){l.pzaUtil.getDistance(a.baseData.logicPos,e.logicPos)>t||(e.close(),window.pzaMapManager.LadderMap.delete(o))})},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},t.prototype.flaserDeath=function(){var a=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},i([f({displayName:"\u7761\u89c9\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"sleepAni",void 0),i([m],t)}(d.pzaBasePlant);e.pzaDoomShroom=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaDrZomBall:[function(a,t,e){"use strict";cc._RF.push(t,"a211c37MKtCApje1YozAb2U","pzaDrZomBall");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDrZomBall=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGroupEnum"),s=a("../../Common/pzaSpineController"),c=a("../../Common/pzaWorldEventManager"),u=a("../Plant/pzaPlantBody"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ballAni=null,t.fireAni=null,t.fireOutNode=null,t.fireAnis=[],t.bodyC=null,t.atk=0,t.yIndex=-1,t.fire=!1,t.xSpeed=60,t.logicPos=null,t.life=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.JALAPENO_BOOM,this.jalapenoBoom,this),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.ICE_SHROOM_BOOM,this.iceShroomBoom,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.JALAPENO_BOOM,this.jalapenoBoom,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.ICE_SHROOM_BOOM,this.iceShroomBoom,this)},t.prototype.init=function(a,t,e){var o=this;this.ballAni.node.active=!0,this.node.zIndex=7,this.fire=a,this.yIndex=t,this.atk=e,this.life=!1,this.ballAni.playAnimation(this.fire?"1qiu_1":"2qiu_1",!1,function(){o.node.zIndex=10*-o.yIndex+5,o.ballAni.playAnimation(o.fire?"1qiu_2":"2qiu_2",!0,null,null,.3),o.bodyC.enabled=!0,o.life=!0}),this.fireAni.node.active=!0,this.fireAni.playAnimation(a?"1FX":"2FX",!1,function(){o.fireAni.node.active=!1}),this.fireOutNode.active=!1,this.bodyC.enabled=!1;var n=h.pzaGameState.map.getXInterval(6)/2,i=h.pzaGameState.map.getBlockLogicPos(6,t,n,0);this.logicPos=i,this.node.setPosition(i),p.pzaCollisionManager.getInstance.addZombieByRow(this.yIndex,this)},t.prototype.close=function(){p.pzaCollisionManager.getInstance.delZombieByRow(this.yIndex,this),a.prototype.close.call(this)},t.prototype.logicUpdate=function(a){this.life&&(this.logicPos.x-=this.xSpeed*a,h.pzaGameState.map.fixMapYOffset(this.yIndex,this.logicPos,0),h.pzaGameState.map.getMapXIndex(this.logicPos)<0&&this.death())},t.prototype.lateUpdate=function(){null!=this.logicPos&&this.node.setPosition(this.logicPos)},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?(this.bodyC.poSource=this.node,this.bodyC):null},t.prototype.onCollision=function(a){if(null!=a&&a.node.group==l.pzaGroupEnum.PLANT){var t=a.node.getComponent(u.pzaPlantBody);this.colliderPlant(t&&t.baseData)}},t.prototype.colliderPlant=function(a){a&&!a.isDead&&this.yIndex==a.yIndex&&window.pzaplantManager.bangPlant(a.xIndex,a.yIndex,this.atk,null)},t.prototype.death=function(){var a=this;if(this.life=!1,!this.fire)return d.pzaEffectManager.createIceBoomEffect(this.logicPos),void this.close();this.ballAni.node.active=!1,this.fireOutNode.active=!0,this.fireAnis.forEach(function(t){t.playAnimation("fire2",!1,function(){a.close()})})},t.prototype.pauseSelf=function(){this.ballAni.pauseAnimation(),this.fireOutNode.active&&this.fireAnis.forEach(function(a){a.pauseAnimation()})},t.prototype.resumeSelf=function(){this.ballAni.resumeAnimation(),this.fireOutNode.active&&this.fireAnis.forEach(function(a){a.resumeAnimation()})},t.prototype.jalapenoBoom=function(a){this.fire||null==a||a.yIndex!=this.yIndex||this.death()},t.prototype.iceShroomBoom=function(){this.fire&&this.death()},i([z({displayName:"\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"ballAni",void 0),i([z({displayName:"\u55b7\u706b\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"fireAni",void 0),i([z({displayName:"\u706b\u7130\u6d88\u5931\u8282\u70b9",type:cc.Node})],t.prototype,"fireOutNode",void 0),i([z({displayName:"\u706b\u7130\u6d88\u5931\u52a8\u753b",type:[s.pzaSpineController]})],t.prototype,"fireAnis",void 0),i([z({displayName:"\u78b0\u649e",type:cc.CircleCollider})],t.prototype,"bodyC",void 0),i([f],t)}(r.pzaBaseComponent);e.pzaDrZomBall=y,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Plant/pzaPlantBody":"pzaPlantBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDrZomBoss:[function(a,t,e){"use strict";cc._RF.push(t,"ddb00KgyH1AK6EMwr2kkJQE","pzaDrZomBoss");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDrZomBoss=void 0;var r=a("../../Common/pzaGameManager"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaZombieEnum"),u=a("../Plant/pzaAttackType"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=a("./pzaBaseZombie"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.standing=!0,t.lifeTime=0,t.atk=5e3,t.normalZombieCd=-1,t.bungeeCd=-1,t.bangCarCd=-1,t.trampleCd=-1,t.extendHeadCd=-1,t.commonCd=-1,t.mustBungee=!1,t.mustBangCar=!1,t.fireBallCd=-1,t.backHeadTime=-1,t.releasing=!1,t.backFingerTime=0,t.fingerIndex=1,t.fingerZombies=new Set,t.fingerPos=[[cc.v2(-1025,690),cc.v2(-910,615),cc.v2(-785,630)],[cc.v2(-910,690),cc.v2(-785,615),cc.v2(-665,630)],[cc.v2(-785,690),cc.v2(-665,615),cc.v2(-545,630)]],t.blinkTime=0,t}return n(t,a),t.prototype.bindData=function(a){this.baseData=a,null!=a&&null!=a.yIndex&&(this.node.zIndex=-50),this.zombieHurtState=null,this.equipHurtState=null,this.bodyBindData=!1,this.hypnosisState=!1,this.zombieWin=!1,this.breakDirtTime=0,this.refreshHurtState(!0),this.refreshOrientation(),this.refreshFrostState(!0),this.standing=!0,this.releasing=!1,this.mustBungee=!1,this.mustBangCar=!1,this.lifeTime=0,this.commonCd=0,this.extendHeadCd=50,this.trampleCd=-1,this.bungeeCd=this.bangCarCd=this.fireBallCd=this.backHeadTime=-1,this.normalZombieCd=5,this.backFingerTime=0,this.fingerIndex=1,this.fingerZombies.clear(),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.INVINCIBLE,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.IMM_IMMOBILIZE,-1))},t.prototype.logicUpdate=function(a){var t=this;if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead&&(this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),this.blink(a),!this.baseData.isBeControlled()))if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),this.lifeTime+=a,this.commonCd=Math.max(0,this.commonCd-a),this.extendHeadCd=Math.max(0,this.extendHeadCd-a),this.normalZombieCd=Math.max(0,this.normalZombieCd-a),-1!=this.trampleCd&&(this.trampleCd=Math.max(0,this.trampleCd-a)),-1!=this.bungeeCd&&(this.bungeeCd=Math.max(0,this.bungeeCd-a)),-1!=this.bangCarCd&&(this.bangCarCd=Math.max(0,this.bangCarCd-a)),-1!=this.fireBallCd&&(this.fireBallCd=Math.max(0,this.fireBallCd-a)),-1!=this.backHeadTime&&(this.backHeadTime=Math.max(0,this.backHeadTime-a)),this.backFingerTime>0&&(this.backFingerTime-=a,this.backFingerTime<=0))this.playBackFingerAni(this.fingerIndex);else if(!(this.releasing||this.commonCd>0)){if(!this.standing)return-1!=this.fireBallCd&&this.fireBallCd<=0?void this.fireBall():void(-1!=this.backHeadTime&&this.backHeadTime<=0&&(this.backHeadTime=-1,this.releasing=!0,this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.INVINCIBLE,-1)),this.playBackHeadAni(function(){t.standing=!0,t.releasing=!1,t.randomExtendHeadCd(),t.randomCommonCd()})));if(this.mustBangCar)return this.mustBangCar=!1,this.mustBungee=!1,void this.bangCar();if(this.mustBungee)return this.mustBungee=!1,void this.putBungeeZombie();if(-1!=this.trampleCd&&this.trampleCd<=0&&this.hasTramplePlant())this.trample();else{if(-1!=this.bungeeCd&&this.bungeeCd<=0){var e=Math.random();return-1==this.bangCarCd||this.bangCarCd>0||e>.5?void this.putBungeeZombie():void this.bangCar()}this.extendHeadCd<=0?this.extendHead():this.normalZombieCd<=0&&this.putNormalZombie()}}},t.prototype.putNormalZombie=function(){var a=this;this.releasing=!0;var t=[1];this.lifeTime>=125?t=[3,4,5,6,7,8,15,18,21,24,25,26]:this.lifeTime>=80?t=[5]:this.lifeTime>=35&&(t=[3]);var e=l.pzaUtil.getRandomNum(0,4),o=l.pzaUtil.getRandomValueFromArray(t);this.node.zIndex=6,this.playHandZombieAni(e,function(){var a=window.pzazombieManager.createFixBlockZombieData(o,7,e);window.pzazombieManager.createZombie(a,!1)},function(){a.node.zIndex=-50,a.animation.playAnimation("idle",!0),a.randomZombieCd(),a.randomCommonCd(),a.releasing=!1})},t.prototype.putBungeeZombie=function(){this.releasing=!0;var a=l.pzaUtil.getRandomNum(1,3);this.node.zIndex=6;for(var t=this.fingerPos[a-1],e=0;e<=2;e++){for(var o=a-1+e,n=[],i=0;i<5;i++)window.pzaplantManager.hasPlant(o,i)&&n.push(i);(null==n||n.length<=0)&&(n=[0,1,2,3,4]);var r=l.pzaUtil.getRandomValueFromArray(n),p=window.pzazombieManager.createFixBlockZombieData(c.pzaZombieEnum.BUNGEE_ZOMBIE,o,r);p.logicPos.x=this.baseData.logicPos.x+t[e].x,p.zombieData.zomBossFinger=t[e].clone(),window.pzazombieManager.createZombie(p),this.fingerZombies.add(p)}this.playHandBungeeAni(a),this.fingerIndex=a,this.backFingerTime=6},t.prototype.bangCar=function(){var a=this;h.pzaGameState.bangCaring=!0,this.releasing=!0;var t=l.pzaUtil.getRandomNum(0,2),e=l.pzaUtil.getRandomNum(1,4);this.node.zIndex=6,p.pzaSoundManager.playAudio("hydraulic_short"),this.playBangCarAni(t,e,function(){for(var o=t;o<=t+2;o++)for(var n=e;n>=e-1;n--)window.pzaplantManager.bangPlant(o,n,a.atk,a.baseData);p.pzaSoundManager.playAudio("RVthrow"),window.pzaMapManager.trampleShakeMap()},function(){a.node.zIndex=-50,a.animation.playAnimation("idle",!0),a.randomBangCarCd(),a.randomCommonCd(),a.bangCarResetCd(),a.releasing=!1,h.pzaGameState.bangCaring=!1})},t.prototype.hasTramplePlant=function(){for(var a=0;a<=4;a++)if(window.pzaplantManager.hasPlant(5,a)||window.pzaplantManager.hasPlant(6,a)||window.pzaplantManager.hasPlant(7,a))return!0;return!1},t.prototype.trample=function(){var a=this;this.releasing=!0;for(var t=[],e=0;e<=4;e++)(window.pzaplantManager.hasPlant(5,e)||window.pzaplantManager.hasPlant(6,e)||window.pzaplantManager.hasPlant(7,e))&&(e>0&&e<=4&&!t.includes(e)&&t.push(e),e+1>0&&e+1<=4&&!t.includes(e+1)&&t.push(e+1));t.length<=0&&(t=[1,2,3,4]);var o=l.pzaUtil.getRandomValueFromArray(t);this.node.zIndex=6,p.pzaSoundManager.playAudio("hydraulic_short"),this.playTrampleAni(o,function(){for(var t=5;t<=7;t++)for(var e=o;e>=o-1;e--)window.pzaplantManager.bangPlant(t,e,a.atk,a.baseData);p.pzaSoundManager.playAudio("bossfootdown"),window.pzaMapManager.trampleShakeMap()},function(){a.node.zIndex=-50,a.animation.playAnimation("idle",!0),a.randomTrampleCd(),a.randomCommonCd(),a.releasing=!1})},t.prototype.extendHead=function(){var a=this;this.releasing=!0,this.node.zIndex=6,this.fireBallCd=10,this.playExtendHeadAni(function(){a.standing=!1,a.releasing=!1,a.baseData.buffData.removeBuff(s.pzaBuffType.UNABLE_SELECT),a.baseData.buffData.removeBuff(s.pzaBuffType.INVINCIBLE)})},t.prototype.fireBall=function(){var a=this,t=l.pzaUtil.getRandomNum(0,4),e=Math.random()>.5,o=function(){d.pzaEffectManager.createDrZomBallEffect(e,t,a.atk)};this.releasing=!0,this.fireBallCd=-1;var n=function(){a.animation.playAnimation("attack1_idle",!0),a.backHeadTime=6,a.releasing=!1};p.pzaSoundManager.playAudio("bossboulderattack"),e?this.playSpoutFireBallAni(t,o,n):this.playSpoutIceBallAni(t,o,n)},t.prototype.hurt=function(a,t,e){if(void 0===e&&(e=u.pzaAttackType.FLOOR_ATK),h.pzaGameState.critValue>0&&Math.random()<h.pzaGameState.critValue&&(a=Math.round(1.5*a)),this.baseData&&!this.baseData.isDead){if(this.baseData.hurtZombie(a),this.baseData.isDead||this.baseData.hp<=0)return window.pzazombieManager.clearAllZombie(),void this.playDeathAni(function(){r.pzaGameManager.passPart(cc.v2())});this.refreshHurtState(!1),this.animation.flash();var o="shieldhit"+l.pzaUtil.getRandomNum(1,2);p.pzaSoundManager.playAudio(o)}},t.prototype.refreshHurtState=function(a){if(a)this.zombieIntact();else if(null!=this.baseData&&null!=this.baseData.zombieData){var t=this.baseData.hp/this.baseData.maxHp;t<=.5?(this.zombieHurtState!=c.pzaHurtStateEnum.DYING&&this.zombieDying(),-1==this.bangCarCd&&(this.bangCarCd=0,this.mustBangCar=!0),-1==this.trampleCd&&this.randomTrampleCd()):t<=.8?(this.zombieHurtState!=c.pzaHurtStateEnum.HURT&&this.zombieHurt(),-1==this.bungeeCd&&(this.bungeeCd=0,this.mustBungee=!0)):this.zombieHurtState!=c.pzaHurtStateEnum.INTACT&&this.zombieIntact()}},t.prototype.refreshOrientation=function(){null!=this.baseData&&null!=this.baseData.zombieData&&(this.node.scaleX=-this.baseData.zombieData.direction)},t.prototype.zombieDying=function(){this.zombieHurtState=c.pzaHurtStateEnum.DYING,this.animation.setAnimationSkin("skin3")},t.prototype.zombieHurt=function(){this.zombieHurtState=c.pzaHurtStateEnum.HURT,this.animation.setAnimationSkin("skin2")},t.prototype.zombieIntact=function(){this.zombieHurtState=c.pzaHurtStateEnum.INTACT,this.animation.setAnimationSkin("skin1"),this.animation.node.color=new cc.Color(255,255,255,255)},t.prototype.playEnterAni=function(a){var t=this;this.animation.playAnimation("ruchang1",!1,function(){t.animation.playAnimation("idle",!0),a&&a(),p.pzaSoundManager.playBgm(p.pzaBGMName.ZOMBIEBOSS_BGM)},function(){p.pzaSoundManager.playAudio("bossfootdown"),window.pzaMapManager.trampleShakeMap()})},t.prototype.playExtendHeadAni=function(a){var t=this;this.animation.playAnimation("attack1_xia",!1,function(){t.animation.playAnimation("attack1_idle",!0),a&&a()},function(){p.pzaSoundManager.playAudio("hydraulic")})},t.prototype.playBackHeadAni=function(a){var t=this;this.animation.playAnimation("attack1_qi_1",!1,function(){t.animation.playAnimation("idle",!0),a&&a()},function(){t.baseData.buffData.removeBuff(s.pzaBuffType.FROST),p.pzaSoundManager.playAudio("bossfootdown"),window.pzaMapManager.trampleShakeMap()})},t.prototype.playHandZombieAni=function(a,t,e){var o="put1_"+(a+1);this.animation.playAnimation(o,!1,e,t),p.pzaSoundManager.playAudio("hydraulic_short")},t.prototype.playHandBungeeAni=function(a){var t="put"+(a+1)+"_1";this.animation.playAnimation(t,!1,null)},t.prototype.playBackFingerAni=function(a){var t=this,e=!1;if(this.fingerZombies.forEach(function(a){null!=a&&!a.isDead&&a.isBeControlled()&&(e=!0)}),e)this.backFingerTime=.1;else{this.fingerZombies.forEach(function(a){a.zombieData.zomBossFinger=null}),this.fingerZombies.clear();var o="put"+(a+1)+"_3";this.animation.playAnimation(o,!1,function(){t.releasing=!1,t.randomBungeeCd(),t.randomCommonCd()})}},t.prototype.playSpoutFireBallAni=function(a,t,e){var o="attack2_"+(5-a);this.animation.playAnimation(o,!1,e,t)},t.prototype.playSpoutIceBallAni=function(a,t,e){var o="attack3_"+(5-a);this.animation.playAnimation(o,!1,e,t)},t.prototype.playTrampleAni=function(a,t,e){var o="trample1_"+(5-a);this.animation.playAnimation(o,!1,e,t)},t.prototype.playBangCarAni=function(a,t,e,o){var n="attack4_"+(4*a+5-t);this.animation.playAnimation(n,!1,o,e)},t.prototype.playDeathAni=function(a){var t=this;this.animation.closeFlash(),this.refreshFrostState(!0),this.preventBreak();var e=function(){p.pzaSoundManager.playAudio("gargantudeath"),p.pzaSoundManager.playAudio("bossdie"),t.animation.playAnimation("death",!1,function(){t.animation.playAnimation("death_idle_2",!0),a&&a()},function(){p.pzaSoundManager.playAudio("explosion")})};this.standing?e():this.animation.playAnimation("death_idle_1",!1,function(){e()})},t.prototype.getZombieHeadWps=function(a){if(null==a)return null;var t=h.pzaGameState.map.getXInterval(8)/2,e=h.pzaGameState.map.getYInterval(a)/2,o=h.pzaGameState.map.getBlockLogicPos(8,a,t,e);return this.node.parent.convertToWorldSpaceAR(o)},t.prototype.pauseSelf=function(){this.animation.pauseAnimation()},t.prototype.randomZombieCd=function(){var a=this.baseData.hp/this.baseData.maxHp;this.normalZombieCd=a>=1?5:a>=.8?l.pzaUtil.getRandomFloatNum(4.5,5.5):a>=.5?l.pzaUtil.getRandomFloatNum(3.5,4.5):l.pzaUtil.getRandomFloatNum(1.5,2.5)},t.prototype.randomBungeeCd=function(){var a=this.baseData.hp/this.baseData.maxHp;this.bungeeCd=a>=.8?-1:l.pzaUtil.getRandomFloatNum(40,50)},t.prototype.randomBangCarCd=function(){var a=this.baseData.hp/this.baseData.maxHp;this.bangCarCd=a>=.8?-1:l.pzaUtil.getRandomFloatNum(40,50)},t.prototype.randomTrampleCd=function(){var a=this.baseData.hp/this.baseData.maxHp;this.trampleCd=a>=.5?-1:l.pzaUtil.getRandomFloatNum(55,65)},t.prototype.randomExtendHeadCd=function(){var a=this.baseData.hp/this.baseData.maxHp;this.extendHeadCd=a>=.8?50:l.pzaUtil.getRandomFloatNum(40,50)},t.prototype.randomCommonCd=function(){this.commonCd=l.pzaUtil.getRandomFloatNum(1,2)},t.prototype.bangCarResetCd=function(){this.extendHeadCd=50,this.trampleCd=40,this.bangCarCd=this.bungeeCd=65,this.normalZombieCd=5},t.prototype.updateRoleBuff=function(t){a.prototype.updateRoleBuff.call(this,t);var e=1,o=this.baseData.buffData.releaseBuff(s.pzaBuffType.FROST);null!=o&&(e-=o.buffValue),this.animation.changeAnimationTimeScale(e)},t.prototype.refreshFrostState=function(a){return a?(this.showFrost=!1,void(this.animation.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"))):null==this.baseData||this.animation.flashTime>0||this.baseData.zombieData.hypnosis?void 0:this.baseData.isDead||!this.baseData.buffData.hasBuff(s.pzaBuffType.FROST)||this.showFrost?!this.baseData.isDead&&this.baseData.buffData.hasBuff(s.pzaBuffType.FROST)||!this.showFrost?void 0:(this.showFrost=!1,void(this.animation.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"))):(this.showFrost=!0,void(this.animation.node.color=cc.Color.fromHEX(cc.color(),"#3B95FF")))},t.prototype.blink=function(a){if(!(this.baseData.hp/this.baseData.maxHp>.1))if(this.baseData.isDead||this.baseData.buffData.hasBuff(s.pzaBuffType.FROST))this.blinkTime>0&&(this.blinkTime=0);else{var t;this.blinkTime+=a,this.blinkTime>.6&&(this.blinkTime=0),t=this.blinkTime<=.3?255-this.blinkTime/.3*122:122+(this.blinkTime-.3)/.3*122,this.animation.node.color=new cc.Color(t,t,t,255)}},i([z],t)}(m.pzaBaseZombie));e.pzaDrZomBoss=y,cc._RF.pop()},{"../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie"}],pzaDropCard:[function(a,t,e){"use strict";cc._RF.push(t,"94b08Rs2DtFaZTn5L6m+n0u","pzaDropCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDropCard=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameConfig"),l=a("../../Common/pzaGameManager"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaSpineController"),u=a("../../Common/pzaSpriteFrameManager"),d=a("../../Common/pzaUIManager"),h=a("../../Common/pzaWorldEventManager"),m=a("../../Load/pzaPreLoadManager"),f=a("../../View/Battle/pzaNewPlantView"),z=a("../../View/pzaCommonMask"),y=a("../Data/pzaDropType"),g=a("../pzaEffectManager"),v=a("../pzaGameState"),b=cc._decorator,S=b.ccclass,P=b.property,C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.arrow=null,t.cardBoard=null,t.cardBoardFrames=[],t.cardIcon=null,t.cardPrice=null,t.propNode=null,t.shovel=null,t.handbook=null,t.baconic=null,t.taco=null,t.sprinkler=null,t.paper=null,t.coinPackage=null,t.trophy=null,t.lightAni=null,t.curDropType=null,t.curPlantType=null,t.canClick=!1,t.clickCall=null,t}return n(t,a),t.prototype.showCard=function(a,t,e,o){void 0===o&&(o=null),this.node.stopAllActions(),this.node.opacity=255,this.node.setPosition(e),this.curDropType=a,this.curPlantType=t,this.clickCall=o,this.arrow.active=!1,this.canClick=!1,this.lightAni.node.active=!1,this.curDropType==y.pzaDropType.PLANT_CARD?(this.propNode.active=!1,this.cardBoard.node.active=!0,this.playCardDropAni(e)):(this.propNode.active=!0,this.cardBoard.node.active=!1,this.playPropDropAni(e))},t.prototype.playCardDropAni=function(a){var t=this,e=p.pzaGameConfig.getPlantConfig(this.curPlantType);u.pzaSpriteFrameManager.loadPlantCard(this.curPlantType,this.cardIcon),this.cardBoard.spriteFrame=this.cardBoardFrames[e.rareLevel],this.cardPrice.string=""+e.price,this.cardBoard.node.stopAllActions(),this.cardBoard.node.opacity=255,this.cardBoard.node.setPosition(cc.v2());var o=a.x>500?-150:Math.random()>.5?-50:50,n=a.y>-200?-60:-a.y-200;this.cardBoard.node.runAction(cc.sequence(cc.jumpTo(.4,cc.v2(o,n),60,1),cc.callFunc(function(){t.canClick=!0,t.showArrow(),s.pzaSoundManager.playAudio("poleland")})))},t.prototype.playPropDropAni=function(a){var t=this;this.shovel.active=this.curDropType==y.pzaDropType.SHOVEL,this.paper.active=this.curDropType==y.pzaDropType.CG_PAPER,this.handbook.active=this.curDropType==y.pzaDropType.HAND_BOOK,this.baconic.active=this.curDropType==y.pzaDropType.BACONIC,this.taco.active=this.curDropType==y.pzaDropType.TACO,this.sprinkler.active=this.curDropType==y.pzaDropType.SPRINKLER,this.coinPackage.active=this.curDropType==y.pzaDropType.COIN_PACKAGE,this.trophy.active=this.curDropType>=y.pzaDropType.SURVIVAL_TROPHY,this.propNode.stopAllActions(),this.propNode.opacity=255,this.propNode.setPosition(cc.v2());var e=a.x>500?-150:Math.random()>.5?-50:50,o=a.y>-200?-60:-a.y-200;this.propNode.runAction(cc.sequence(cc.jumpTo(.4,cc.v2(e,o),60,1),cc.callFunc(function(){t.canClick=!0,t.showArrow()})))},t.prototype.clickCard=function(){var a=this;if(this.canClick){s.pzaSoundManager.stopBgm(),5==v.pzaGameState.curChapter&&10==v.pzaGameState.curPart?s.pzaSoundManager.playAudio("finalfanfare"):s.pzaSoundManager.playAudio("winmusic"),z.pzaCommonMask.showMask(),v.pzaGameState.gamePause=!0,this.canClick=!1,this.arrow.active=!1,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.GAME_WIN,null);var t=this.curDropType==y.pzaDropType.PLANT_CARD?this.cardBoard.node:this.propNode,e=cc.v2(-t.x,-t.y-37);if(this.node.runAction(cc.sequence(cc.delayTime(this.curDropType==y.pzaDropType.COIN_PACKAGE?.6:0),cc.callFunc(function(){a.lightAni.node.active=!0,a.lightAni.node.setPosition(cc.v2(t.x,t.y+37)),a.lightAni.playAnimation("idle1",!1,function(){})}),cc.moveTo(3,e),cc.delayTime(1),cc.callFunc(function(){z.pzaCommonMask.hideMask(),t.runAction(cc.fadeOut(1)),v.pzaGameState.gameMode!=v.pzaGameMode.ZOMBIE_ENDLESS&&v.pzaGameState.gameMode!==v.pzaGameMode.VASE_ENDLESS&&(a.curDropType!=y.pzaDropType.COIN_PACKAGE?a.curDropType==y.pzaDropType.CG_PAPER?d.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.CG_PAPER_VIEW,null):d.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.NEW_PLANT_VIEW,function(t){(t&&t.getComponent(f.pzaNewPlantView)).showView(a.curDropType,a.curPlantType)}):l.pzaGameManager.getCurrentGame().partWin())}),cc.fadeOut(.5),cc.callFunc(function(){a.close()}))),this.curDropType==y.pzaDropType.COIN_PACKAGE)if(v.pzaGameState.gameMode==v.pzaGameMode.ZOMBIE_ENDLESS)this.createDiamond();else{var o=3;(v.pzaGameState.curChapter>5||v.pzaGameState.gameMode==v.pzaGameMode.SURVIVAL||v.pzaGameState.gameMode==v.pzaGameMode.ZOMBIE_ENERMY||v.pzaGameState.gameMode===v.pzaGameMode.VASE||v.pzaGameState.isMiniMode()||v.pzaGameState.gameMode===v.pzaGameMode.CREATIVE_VASE||v.pzaGameState.isZjMode())&&(o=5),this.createPackageCoin(o)}else this.curDropType==y.pzaDropType.VASE_TROPHY?this.createPackageCoin(5):this.curDropType!=y.pzaDropType.SURVIVAL_TROPHY&&this.curDropType!=y.pzaDropType.ZOMBIE_TROPHY&&this.curDropType!=y.pzaDropType.MINIGAME_TROPHY||this.createDiamond();this.clickCall&&this.clickCall()}},t.prototype.createPackageCoin=function(a){var t=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y),e=cc.v2(this.node.x+this.propNode.x-112,this.node.y+this.propNode.y+132),o=cc.v2(this.node.x+this.propNode.x-65,this.node.y+this.propNode.y+182),n=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y+200),i=cc.v2(this.node.x+this.propNode.x+65,this.node.y+this.propNode.y+182),r=cc.v2(this.node.x+this.propNode.x+112,this.node.y+this.propNode.y+132);v.pzaGameState.isMiniMode()&&9==v.pzaGameState.curPart&&v.pzaGameState.isToken?(g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.TOKEN_COIN,t,e),g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.TOKEN_COIN,t,n),g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.TOKEN_COIN,t,r)):(g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.GOLD_COIN,t,e),g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.GOLD_COIN,t,n),g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.GOLD_COIN,t,r),5==a&&(g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.GOLD_COIN,t,o),g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.GOLD_COIN,t,i))),window.pzaMapManager.showCoinUI()},t.prototype.createDiamond=function(){var a=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y),t=cc.v2(this.node.x+this.propNode.x,this.node.y+this.propNode.y+200);g.pzaEffectManager.createPartRewardCoin(y.pzaDropType.DIAMOND,a,t),window.pzaMapManager.showCoinUI()},t.prototype.showArrow=function(){var a=this.curDropType==y.pzaDropType.PLANT_CARD?this.cardBoard.node:this.propNode;this.arrow.active=!0,this.arrow.stopAllActions();var t=cc.v2(a.x,a.y+110);this.arrow.setPosition(t),this.arrow.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(t.x,t.y+20)),cc.moveTo(.2,cc.v2(t.x,t.y)))))},t.prototype.pauseSelf=function(){this.arrow.pauseAllActions()},t.prototype.resumeSelf=function(){this.arrow.resumeAllActions()},i([P({displayName:"\u7bad\u5934",type:cc.Node})],t.prototype,"arrow",void 0),i([P({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([P({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([P({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([P({displayName:"\u5361\u7247\u4ef7\u683c",type:cc.Label})],t.prototype,"cardPrice",void 0),i([P({displayName:"\u9053\u5177\u8282\u70b9",type:cc.Node})],t.prototype,"propNode",void 0),i([P({displayName:"\u94f2\u5b50",type:cc.Node})],t.prototype,"shovel",void 0),i([P({displayName:"\u56fe\u9274",type:cc.Node})],t.prototype,"handbook",void 0),i([P({displayName:"\u57f9\u6839",type:cc.Node})],t.prototype,"baconic",void 0),i([P({displayName:"\u7389\u7c73\u5377",type:cc.Node})],t.prototype,"taco",void 0),i([P({displayName:"\u6c34\u58f6",type:cc.Node})],t.prototype,"sprinkler",void 0),i([P({displayName:"\u7eb8\u6761",type:cc.Node})],t.prototype,"paper",void 0),i([P({displayName:"\u94b1\u888b",type:cc.Node})],t.prototype,"coinPackage",void 0),i([P({displayName:"\u5956\u676f",type:cc.Node})],t.prototype,"trophy",void 0),i([P({displayName:"\u5149\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"lightAni",void 0),i([S],t)}(r.pzaBaseComponent);e.pzaDropCard=C,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../View/Battle/pzaNewPlantView":"pzaNewPlantView","../../View/pzaCommonMask":"pzaCommonMask","../Data/pzaDropType":"pzaDropType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDropCoin:[function(a,t,e){"use strict";cc._RF.push(t,"b02987q0AFJKLS8MgxGVLpM","pzaDropCoin");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDropCoin=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaBaseComponent"),s=a("../../Common/pzaGameCommonPool"),c=a("../../Common/pzaLocalData"),u=a("../../Common/pzaNodeManager"),d=a("../../Common/pzaSoundManager"),h=a("../../Common/pzaSpineController"),m=a("../../Common/pzaTipManager"),f=a("../../Common/pzaUtil"),z=a("../../Common/pzaWorldEventManager"),y=a("../../Garden/pzaGardenMgr"),g=a("../Data/pzaDropType"),v=a("../pzaEffectManager"),b=a("../pzaGameState"),S=cc._decorator,P=S.ccclass,C=S.property,D=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.animation=null,t.dropNode=null,t.dropSpri=null,t.dropFrameArr=[],t.poolPrefab=null,t.liveTime=0,t.disappearing=!1,t.picked=!1,t.clicked=!1,t.curDropType=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.GAME_WIN,this.winMove,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.AUTO_PICK,this.clickCoin,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.PASS_PICK,this.winMove,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.GAME_WIN,this.winMove,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.AUTO_PICK,this.clickCoin,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.PASS_PICK,this.winMove,this)},t.prototype.pauseSelf=function(){this.picked||(this.animation.pauseAnimation(),this.node.pauseAllActions())},t.prototype.resumeSelf=function(){this.animation.resumeAnimation(),this.node.resumeAllActions()},t.prototype.init=function(a,t){var e=this;this.clicked=!1,this.animation.node.active=!1,this.dropNode.active=!1,this.curDropType=a,a==g.pzaDropType.SILVER_COIN?(d.pzaSoundManager.playAudio("pickSilver"),this.animation.node.active=!0,this.animation.playAnimation("pr3",!0)):a==g.pzaDropType.GOLD_COIN?(this.animation.node.active=!0,d.pzaSoundManager.playAudio("moneyfalls"),this.animation.node.active=!0,this.animation.playAnimation("pr2",!0)):a==g.pzaDropType.GARDEN_PLANT?(this.dropNode.active=!0,this.dropSpri.spriteFrame=this.dropFrameArr[0],this.dropSpri.node.scale=1.3,d.pzaSoundManager.playAudio("chime")):a==g.pzaDropType.GARDEN_CHOCOLATE?(this.dropNode.active=!0,this.dropSpri.spriteFrame=this.dropFrameArr[1],this.dropSpri.node.scale=.8,d.pzaSoundManager.playAudio("chime")):(this.animation.node.active=!0,d.pzaSoundManager.playAudio("chime"),this.animation.playAnimation("pr1_2",!0)),this.liveTime=0,this.disappearing=!1,this.picked=!1,this.node.stopAllActions(),this.node.opacity=255,this.node.setPosition(cc.v2(t.x,t.y+50*Math.random()));var o=f.pzaUtil.getRandomFloatNum(-20,20),n=t.x+o;n=Math.min(n,cc.winSize.width/2-100),this.node.runAction(cc.sequence(cc.jumpTo(.6,cc.v2(n,t.y+50*Math.random()),80,1),cc.callFunc(function(){b.pzaGameState.autoPickLeft<=0&&!b.pzaGameState.isZjMode()||e.clickCoin()}))),window.pzaMapManager.DropCoinSet.add(this)},t.prototype.initPartRewardCoin=function(a,t,e){var o=this;this.dropNode.active=!1;var n=!1;this.curDropType=a,this.clicked=!1,a==g.pzaDropType.SILVER_COIN?(d.pzaSoundManager.playAudio("pickSilver"),this.animation.playAnimation("pr3",!0),this.animation.pauseAnimation()):a==g.pzaDropType.GOLD_COIN?(this.animation.playAnimation("pr2",!0),this.animation.pauseAnimation()):a==g.pzaDropType.TOKEN_COIN?(this.animation.playAnimation("pr4",!0),this.animation.pauseAnimation(),n=!0):(d.pzaSoundManager.playAudio("pickDiamond"),this.animation.playAnimation("pr1_2",!0),this.animation.pauseAnimation()),this.liveTime=0,this.disappearing=!0,this.node.stopAllActions(),this.node.opacity=255,this.node.setPosition(t),this.node.runAction(cc.sequence(cc.moveTo(.5,e).easing(cc.easeQuarticActionOut()),cc.delayTime(.1),cc.callFunc(function(){o.moveToUI(n)})))},t.prototype.logicUpdate=function(a){this.disappearing||(this.liveTime+=a,this.liveTime>=5&&this.disappear())},t.prototype.disappear=function(){window.pzaMapManager.DropCoinSet.delete(this),this.disappearing=!0,b.pzaGameState.pickCoinCount=0,this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(this.close.bind(this))))},t.prototype.moveToUI=function(a){var t=this;void 0===a&&(a=!1),window.pzaMapManager.DropCoinSet.delete(this),this.disappearing=!0,this.picked=!0;var e;if(null==(e=a?b.pzaGameState.tokenCoinMoveUIPos:b.pzaGameState.coinMoveUIPos))return a?this.addTokenCoin():this.addCoin(),void this.close();var o=u.pzaNodeManager.getBattleUINode();this.node.setParent(o),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.5,e).easing(cc.easeQuinticActionOut()),cc.sequence(cc.delayTime(.3),cc.fadeOut(.2))),cc.callFunc(function(){a?t.addTokenCoin():t.addCoin(),t.close()})))},t.prototype.clickCoin=function(){if(!b.pzaGameState.gamePause&&!this.disappearing&&!this.clicked){if(this.curDropType==g.pzaDropType.GARDEN_PLANT)return this.dropSpri.node.scale=.8,this.dropSpri.spriteFrame=this.dropFrameArr[2],this.liveTime=2,y.default.instance().dropGardenPlant(),m.pzaTipManager.showGameTip("\u4f60\u627e\u5230\u4e86\u4e00\u682a\u690d\u7269\uff0c\u5728\u82b1\u56ed\u57f9\u517b\u5b83\u5427\uff01"),this.clicked=!0,void v.pzaEffectManager.createStarFruitEffect(this.node.getPosition(),!1);if(this.curDropType==g.pzaDropType.GARDEN_CHOCOLATE)return this.clicked=!0,y.default.instance().addGardenTool(y.pzaGardenToolType.chocolate,1),m.pzaTipManager.showGameSpecialTip(2001,"\u4f60\u627e\u5230\u4e86\u5de7\u514b\u529b,\u628a\u5b83\u5582\u7ed9\u8717\u725b\u5403,\u5c31\u80fd\u8ba9\u8717\u725b\u7684\u901f\u5ea6\u52a0\u5feb!"),v.pzaEffectManager.createStarFruitEffect(this.node.getPosition(),!1),void this.close();this.curDropType==g.pzaDropType.SILVER_COIN?d.pzaSoundManager.playAudio("pickSilver"):this.curDropType==g.pzaDropType.GOLD_COIN?d.pzaSoundManager.playAudio("pickGold"):d.pzaSoundManager.playAudio("pickDiamond"),this.moveToUI(),window.pzaMapManager.showCoinUI(),c.pzaLocalData.data.firstPickCoinTip||(m.pzaTipManager.showGameTip("\u5b58\u94b1\u6765\u4e70\u66f4\u9177\u7684\u9053\u5177\u5427\uff01"),c.pzaLocalData.data.firstPickCoinTip=!0,c.pzaLocalData.addDirty("firstPickCoinTip")),b.pzaGameState.pickCoinCount++,p.default.instance().canGetAchieve(r.pzaAchieveType.ACH_9,b.pzaGameState.pickCoinCount)&&b.pzaGameState.achieveArr.push(r.pzaAchieveType.ACH_9)}},t.prototype.winMove=function(){this.disappearing||(this.moveToUI(),window.pzaMapManager.showCoinUI())},t.prototype.absorbMove=function(a){var t=this;this.disappearing||(window.pzaMapManager.DropCoinSet.delete(this),this.disappearing=!0,this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.8,a).easing(cc.easeQuinticActionOut()),cc.sequence(cc.delayTime(.6),cc.fadeOut(.2))),cc.callFunc(function(){t.addCoin(),t.close()}))),window.pzaMapManager.showCoinUI())},t.prototype.addCoin=function(){var a=10;this.curDropType==g.pzaDropType.GOLD_COIN?a=50:this.curDropType==g.pzaDropType.DIAMOND&&(a=1e3),c.pzaLocalData.data.coin+=a,c.pzaLocalData.addDirty("coin"),d.pzaSoundManager.playAudio("pickCoin")},t.prototype.addTokenCoin=function(){c.pzaLocalData.data.tokenCoin+=15,c.pzaLocalData.addDirty("tokenCoin"),d.pzaSoundManager.playAudio("pickCoin")},t.prototype.close=function(){this.poolPrefab?s.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([C({displayName:"\u52a8\u753b",type:h.pzaSpineController})],t.prototype,"animation",void 0),i([C({displayName:"\u6389\u843d\u8282\u70b9",type:cc.Node})],t.prototype,"dropNode",void 0),i([C({displayName:"\u6389\u843d\u7cbe\u7075",type:cc.Sprite})],t.prototype,"dropSpri",void 0),i([C({displayName:"\u6389\u843d\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"dropFrameArr",void 0),i([C(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([P],t)}(l.pzaBaseComponent);e.pzaDropCoin=D,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Garden/pzaGardenMgr":"pzaGardenMgr","../Data/pzaDropType":"pzaDropType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaDropPlantCard:[function(a,t,e){"use strict";cc._RF.push(t,"7565dzkeSxE9Z+ln9bhzrSX","pzaDropPlantCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDropPlantCard=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameConfig"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpriteFrameManager"),c=a("../../Common/pzaWorldEventManager"),u=a("../Data/pzaPlantEnum"),d=a("../pzaGameState"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardBoard=null,t.cardBoardFrames=[],t.cardIcon=null,t.mask=null,t.curPlantType=null,t.lifeTime=0,t.blink=!1,t.blinkTime=0,t.select=!1,t.canBeClick=!0,t.leftDropDis=0,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.cardIcon.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.cardIcon.node.scaleX=1,this.cardIcon.node._touchListener.setSwallowTouches(!1),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),this.cardIcon.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},t.prototype.show=function(a,t,e){this.curPlantType=a,this.lifeTime=0,this.blinkTime=0,this.blink=!1,this.select=!1,this.canBeClick=e;var o=p.pzaGameConfig.getPlantConfig(this.curPlantType);s.pzaSpriteFrameManager.loadPlantCard(this.curPlantType,this.cardIcon),this.cardBoard.spriteFrame=this.cardBoardFrames[o.rareLevel],this.mask.active=!1,this.node.setPosition(t),this.cardBoard.node.setPosition(0,0),a===u.pzaPlantEnum.REPEATER&&(d.pzaGameState.isVaseMode()||d.pzaGameState.isCreativeVaseMode())?this.cardIcon.node.scaleX=-1:this.cardIcon.node.scaleX=1,this.canBeClick||this.onDisable()},t.prototype.init=function(a,t,e){this.show(a,t,!0),this.showDropAni(t,e)},t.prototype.miniInit=function(a,t){this.show(a,t,!0),this.leftDropDis=p.pzaGameConfig.getRandomSunDis()},t.prototype.logicUpdate=function(a){if(this.canBeClick){if(!(this.leftDropDis>0))return this.lifeTime+=a,this.blink?(this.blinkTime+=a,void(this.blinkTime>=3&&!this.select&&this.close())):this.lifeTime>=10?(this.blink=!0,this.mask.active=!0,this.mask.stopAllActions(),this.mask.opacity=150,void this.mask.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(.4),cc.fadeTo(.4,150))))):void 0;this.drop(a)}},t.prototype.drop=function(a){if(!(this.leftDropDis<=0)){var t=a*p.pzaGameConfig.autoSunSpeed;t>this.leftDropDis&&(t=this.leftDropDis),this.leftDropDis-=t,this.node.y=this.node.y-t}},t.prototype.showDropAni=function(a,t){this.cardBoard.node.stopAllActions(),this.cardBoard.node.setPosition(cc.v2());var e=a.x>550?-50:Math.random()>.5?-30:30,o=a.y>-290?-20:0;this.cardBoard.node.runAction(cc.sequence(cc.jumpTo(.4,cc.v2(e,o),60,1),cc.callFunc(function(){t&&t()})))},t.prototype.pauseSelf=function(){this.node.pauseAllActions(),this.mask.pauseAllActions(),this.cardBoard.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.node.resumeAllActions(),this.mask.resumeAllActions(),this.cardBoard.node.resumeAllActions()},t.prototype.clickCard=function(){var a=this;this.canBeClick&&!d.pzaGameState.gamePause&&(this.select=!this.select,this.select?(d.pzaGameState.selectCard=null,d.pzaGameState.selectPlant=null,this.scheduleOnce(function(){a.select&&(d.pzaGameState.selectCard=d.pzaSelectCardType.DROP_CARD,d.pzaGameState.selectPlant=a.curPlantType,a.select=!0,c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.SELECT_CARD,null))},.3),d.pzaGameState.cobCannon=null,l.pzaSoundManager.playAudio("selectPlant"),this.blink?(this.mask.stopAllActions(),this.mask.opacity=170,this.mask.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.4,100),cc.fadeTo(.4,170))))):(this.mask.active=!0,this.mask.stopAllActions(),this.mask.opacity=150),window.pzaplantManager.dropPlantCards.forEach(function(t){t!=a&&null!=t&&t.disSelect()})):(d.pzaGameState.selectCard=null,d.pzaGameState.selectPlant=null,d.pzaGameState.cobCannon=null,this.mask.active=!1,this.blink&&(this.blink=!1,this.blinkTime=0)),this.leftDropDis>0&&(this.leftDropDis=0))},t.prototype.selectCard=function(){d.pzaGameState.selectCard!=d.pzaSelectCardType.DROP_CARD&&this.disSelect()},t.prototype.disSelect=function(){this.select&&(this.select=!1,this.mask.active=!1,this.blink&&(this.blink=!1,this.blinkTime=0))},t.prototype.plant=function(){return!!this.select&&(this.close(),!0)},t.prototype.close=function(){this.cardIcon&&this.cardIcon.node&&(this.cardIcon.node.scaleX=1),a.prototype.close.call(this),this.select&&(d.pzaGameState.selectCard=null,d.pzaGameState.selectPlant=null)},i([f({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([f({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([f({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([f({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([m],t)}(r.pzaBaseComponent);e.pzaDropPlantCard=z,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState"}],pzaDropType:[function(a,t,e){"use strict";cc._RF.push(t,"3c472Cq/v5PIIVOFNjzovjN","pzaDropType"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDropType=void 0,function(a){a[a.PLANT_CARD=1]="PLANT_CARD",a[a.SHOVEL=2]="SHOVEL",a[a.CG_PAPER=3]="CG_PAPER",a[a.HAND_BOOK=4]="HAND_BOOK",a[a.SILVER_COIN=5]="SILVER_COIN",a[a.GOLD_COIN=6]="GOLD_COIN",a[a.DIAMOND=7]="DIAMOND",a[a.BACONIC=8]="BACONIC",a[a.TACO=9]="TACO",a[a.SPRINKLER=10]="SPRINKLER",a[a.COIN_PACKAGE=11]="COIN_PACKAGE",a[a.SURVIVAL_TROPHY=12]="SURVIVAL_TROPHY",a[a.ZOMBIE_TROPHY=13]="ZOMBIE_TROPHY",a[a.VASE_TROPHY=14]="VASE_TROPHY",a[a.MINIGAME_TROPHY=15]="MINIGAME_TROPHY",a[a.ZAJIAO_TROPHY=16]="ZAJIAO_TROPHY",a[a.CREATIVE_VASE_TROPHY=17]="CREATIVE_VASE_TROPHY",a[a.CREATIVE_TRAD_TROPHY=18]="CREATIVE_TRAD_TROPHY",a[a.TOKEN_COIN=19]="TOKEN_COIN",a[a.GARDEN_PLANT=20]="GARDEN_PLANT",a[a.GARDEN_CHOCOLATE=21]="GARDEN_CHOCOLATE"}(e.pzaDropType||(e.pzaDropType={})),cc._RF.pop()},{}],pzaDuckyTubeBucketZombie:[function(a,t,e){"use strict";cc._RF.push(t,"829a66bKDxAAJGwm9LZe+Pp","pzaDuckyTubeBucketZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDuckyTubeBucketZombie=void 0;var r=a("./pzaDuckyTubeZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=p.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[p.pzaZombieSlotType.hat,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.hat).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.hat_iron+"1",-7,45.25,-93.13)).addState(new p.pzaZombieSlotAtt(2,p.pzaZombieSlotType.hat_iron+"2",-4.97,44.2,-93.13)).addState(new p.pzaZombieSlotAtt(3,p.pzaZombieSlotType.hat_iron+"3",-5.46,30.63,-93.13))]])},i([s],t)}(r.pzaDuckyTubeZombie));e.pzaDuckyTubeBucketZombie=c,cc._RF.pop()},{"./pzaDuckyTubeZombie":"pzaDuckyTubeZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaDuckyTubeConeZombie:[function(a,t,e){"use strict";cc._RF.push(t,"ec97fCWqtpGvpJ4aPzTm0vt","pzaDuckyTubeConeZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDuckyTubeConeZombie=void 0;var r=a("./pzaDuckyTubeZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=p.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[p.pzaZombieSlotType.hat,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.hat).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.hat+"1",81.52,6.84,-93.13)).addState(new p.pzaZombieSlotAtt(2,p.pzaZombieSlotType.hat+"2",61.68,-20.07,-93.13)).addState(new p.pzaZombieSlotAtt(3,p.pzaZombieSlotType.hat+"3",60.85,-19.15,-93.13))]])},i([s],t)}(r.pzaDuckyTubeZombie));e.pzaDuckyTubeConeZombie=c,cc._RF.pop()},{"./pzaDuckyTubeZombie":"pzaDuckyTubeZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaDuckyTubeZombie:[function(a,t,e){"use strict";cc._RF.push(t,"045b3WlsgBOGY909sopESqJ","pzaDuckyTubeZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDuckyTubeZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaZombieEnum"),s=a("../pzaEffectManager"),c=a("./pzaBaseZombie"),u=a("./pzaZombieSlot"),d=a("./pzaZombieState"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.waterGrass=[],t.waterGrassFrame=[],t.garlicSkinName="zombie_head_1",t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,61.81,13.02,-93.13))]])},t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.animation.node.stopAllActions(),this.animation.node.y=0,this.closeWaterGrass()},t.prototype.breakWater=function(t){void 0===t&&(t=null),this.randomWaterGrass(),a.prototype.breakWater.call(this,t)},t.prototype.updateMove=function(t){var e=this,o=this.baseData.xIndex;a.prototype.updateMove.call(this,t),this.baseData.isDead||this.baseData.hp<=0||(o<0&&this.baseData.xIndex>=0?(null!=this.mask&&(this.mask.enabled=!0),this.curShadow&&this.curShadow.hideShadow(),this.animation.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,-30)),cc.callFunc(function(){e.baseData.isDead||e.baseData.hp<=0||(e.playMoveAnimation(),null!=e.mask&&(e.mask.enabled=!1))}))),r.pzaSoundManager.playAudio("zombie_entering_water"),s.pzaEffectManager.createWaterFlowerEffect(this.baseData.yIndex,this.baseData.logicPos,null)):this.baseData.xIndex<0&&o>=0&&(null!=this.mask&&(this.mask.enabled=!0),this.playMoveAnimation(),s.pzaEffectManager.createWaterFlowerEffect(this.baseData.yIndex,this.baseData.logicPos,null),this.animation.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2()),cc.callFunc(function(){e.curShadow&&e.curShadow.showShadow(),null!=e.mask&&(e.mask.enabled=!1)})))))},t.prototype.playMoveAnimation=function(){if(null!=this.baseData&&this.baseData.xIndex>=0)return this.zombieState=d.pzaZombieState.MOVE,void this.animation.playAnimation("move3",!0);a.prototype.playMoveAnimation.call(this)},t.prototype.playDeathAnimation=function(t){if(this.closeWaterGrass(),null!=this.baseData&&this.baseData.xIndex>=0)return this.zombieState=d.pzaZombieState.DEAD,this.zombieHurtState=l.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),void this.animation.playAnimation("death3",!1,t);a.prototype.playDeathAnimation.call(this,t)},t.prototype.twineDeath=function(){var a=this;null!=this.mask&&(this.mask.enabled=!0),this.animation.node.runAction(cc.sequence(cc.moveTo(.4,cc.v2(0,-130)),cc.callFunc(function(){a.baseData.zombieDie(),a.death(!1)})))},t.prototype.death=function(t){this.animation.node.stopAllActions(),null!=this.mask&&(this.mask.enabled=!1),a.prototype.death.call(this,t)},t.prototype.randomWaterGrass=function(){var a=this;this.waterGrass.forEach(function(t){null!=t&&(Math.random()>=.7||(t.node.active=!0,t.spriteFrame=p.pzaUtil.getRandomValueFromArray(a.waterGrassFrame),t.node.scale=p.pzaUtil.getRandomFloatNum(2,5),t.node.angle=p.pzaUtil.getRandomFloatNum(0,360)))})},t.prototype.closeWaterGrass=function(){this.waterGrass.forEach(function(a){null!=a&&(a.node.active=!1)})},t.prototype.zombieHurtSound=function(t){if(this.hasEquip){var e="plastichit"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(e)}else a.prototype.zombieHurtSound.call(this,t)},i([f({displayName:"\u6c34\u8349",type:[cc.Sprite]})],t.prototype,"waterGrass",void 0),i([f({displayName:"\u6c34\u8349\u56fe",type:[cc.SpriteFrame]})],t.prototype,"waterGrassFrame",void 0),i([m],t)}(c.pzaBaseZombie);e.pzaDuckyTubeZombie=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaEffectManager:[function(a,t,e){"use strict";cc._RF.push(t,"3e827N46slE6aAMNV/k29mW","pzaEffectManager"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaEffectManager=void 0;var o=a("../Common/pzaGameConfig"),n=a("../Common/pzaMapManager"),i=a("../Common/pzaNodeManager"),r=a("../Common/pzaSoundManager"),p=a("../Load/pzaBundleObjectPool"),l=a("../Load/pzaPreLoadManager"),s=a("./Data/pzaPlantEnum"),c=a("./Data/pzaZombieEnum"),u=a("./Effect/pzaAbsorbIronEquip"),d=a("./Effect/pzaBackPumpkin"),h=a("./Effect/pzaBaseEffect"),m=a("./Effect/pzaBattleFrameAnim"),f=a("./Effect/pzaBoomFireEffect"),z=a("./Effect/pzaBungeeZombieEffect"),y=a("./Effect/pzaButterEffect"),g=a("./Effect/pzaDoomHoleEffect"),v=a("./Effect/pzaDrZomBall"),b=a("./Effect/pzaDropCard"),S=a("./Effect/pzaDropCoin"),P=a("./Effect/pzaDropPlantCard"),C=a("./Effect/pzaFogEffect"),D=a("./Effect/pzaFrozenEffect"),M=a("./Effect/pzaGoldHoleEffect"),E=a("./Effect/pzaHammerEffect"),_=a("./Effect/pzaIceGroundEffect"),T=a("./Effect/pzaPlanternEffect"),w=a("./Effect/pzaRainEffect"),A=a("./Effect/pzaRicochetBulletEffect"),B=a("./Effect/pzaShowGrassEffect"),G=a("./Effect/pzaTangleKelpEffect"),O=a("./Effect/pzaWordEffect"),I=function(){function a(){}return a.createReadyWord=function(a){var t=i.pzaNodeManager.getUpBgNode();null!=t&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.WORD_EFFECT,!1,function(e,o){if(null!=e||null==o)return console.error(e),void(a&&a());o.setParent(t),o.zIndex=1;var n=o.getComponent(O.pzaWordEffect);n&&n.playReadyPlant(a)})},a.createLargeWord=function(a,t){var e=i.pzaNodeManager.getUpBgNode();null!=e&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.WORD_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(e),n.zIndex=1;var i=n.getComponent(O.pzaWordEffect);null!=i&&(t?i.playLastWave():i.playLargeWave(a))}else console.error(o)})},a.createIceGround=function(a,t,e,o){void 0===o&&(o=!1);var n=i.pzaNodeManager.getDownEffectNode();null!=n&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.ICE_GROUND,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(_.pzaIceGroundEffect);p&&p.init(a,t,e,o)}else console.error(i)})},a.createIceGroundStart=function(a,t,e,o){var n=i.pzaNodeManager.getDownEffectNode();null!=n&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.ICE_GROUND,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(_.pzaIceGroundEffect);p&&p.miniInit(a,t,e,o)}else console.error(i)})},a.createFogEffect=function(a,t){var e=i.pzaNodeManager.getUpBgNode();null!=e&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.FOG_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(e);var i=window.pzaplantManager.getAllPlant(s.pzaPlantEnum.PLANTERN),r=n.getComponent(C.pzaFogEffect);r&&r.init(a,t,i),window.pzaMapManager.fog=r}else console.error(o)})},a.createAbsorbIronEquip=function(a,t,e,o){void 0===o&&(o=0);var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.ABSORB_IRON_EQUIP,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(u.pzaAbsorbIronEquip);p&&p.init(a,t,e,o)}else console.error(i)})},a.createLaddyEff=function(a,t){var e=i.pzaNodeManager.getPlantZombieNode();null!=e&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.ABSORB_IRON_EQUIP,function(o,n){if(null==o&&null!=n){n.setParent(e);var i=n.getComponent(u.pzaAbsorbIronEquip);i&&i.labbyInit(a,t);var r=""+t.xIndex+t.yIndex;t.close(),window.pzaMapManager.LadderMap.delete(r)}else console.error(o)})},a.createGroveEffect=function(){var a=i.pzaNodeManager.getUpBgNode();null!=a&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.GROVE_EFFECT,!1,function(t,e){null==t&&null!=e?e.setParent(a):console.error(t)})},a.createShowGrassEffect=function(a,t,e){void 0===e&&(e=!1);var o=i.pzaNodeManager.getGrassNode();null!=o&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.SHOW_GRASS_EFFECT,!1,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(B.pzaShowGrassEffect);e?r&&r.showStaticGrass(a):r&&r.showGrass(a,t)}else console.error(n)})},a.createFrameEffect=function(a,t,e){var o=i.pzaNodeManager.getUpEffectNode();null!=o&&p.pzaBundleObjectPool.requestInstantByUrl2(a,function(a,n){if(null==a&&null!=n){n.setParent(o),n.setPosition(t);var i=n.getComponent(m.pzaBattleFrameAnim);i&&i.showAnim(e)}else console.error(a)})},a.createPlantEffect=function(a,t,e){var o=l.pzaResourceUrl.PLANT_EFFECT;t==n.pzaBlockType.POND?(o=l.pzaResourceUrl.PLANT_WATER_EFFECT,r.pzaSoundManager.playAudio("zombie_entering_water",.1)):r.pzaSoundManager.playAudio("plantplant",.1);var s=i.pzaNodeManager.getUpEffectNode();null!=s&&p.pzaBundleObjectPool.requestInstantByUrl2(o,function(t,o){if(null==t&&null!=o){o.setParent(s),o.setPosition(a);var n=o.getComponent(h.pzaBaseEffect);n&&n.showEffect(null,e)}else console.error(t)})},a.createStarFruitEffect=function(a,t){void 0===t&&(t=!0);var e=l.pzaResourceUrl.PLANT_EFFECT;t&&r.pzaSoundManager.playAudio("pickDiamond",.1);var o=i.pzaNodeManager.getUpEffectNode();null!=o&&p.pzaBundleObjectPool.requestInstantByUrl2(e,function(t,e){if(null==t&&null!=e){e.setParent(o),e.setPosition(a);var n=e.getComponent(h.pzaBaseEffect);n&&n.showStarEffect()}else console.error(t)})},a.createDropCard=function(a,t,e,o){void 0===o&&(o=null);var n=i.pzaNodeManager.getBattleUINode();null!=n&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.DROP_CARD,!1,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(b.pzaDropCard);p&&p.showCard(a,t,e,o)}else console.error(i)})},a.createDirtEffect=function(a,t,e,o){var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.DIRT_EFFECT,function(i,r){if(null==i&&null!=r){r.setParent(n),r.setPosition(e),r.zIndex=10*-t+6;var p=r.getComponent(h.pzaBaseEffect);p&&p.showEffect(a,o)}else console.error(i)})},a.createHammerEffect=function(a,t){var e=i.pzaNodeManager.getUpEffectNode();null!=e&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.HAMMER_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(e),n.setPosition(a);var i=n.getComponent(E.pzaHammerEffect);t?i&&i.onlyShowHammer():i&&i.showEffect()}else console.error(o)})},a.createDropCoin=function(a,t){var e=i.pzaNodeManager.getUpBgNode();null!=e&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.DROP_COIN,function(o,n){if(null==o&&null!=n){n.setParent(e);var i=n.getComponent(S.pzaDropCoin);i&&i.init(a,t)}else console.error(o)})},a.createPartRewardCoin=function(a,t,e){var o=i.pzaNodeManager.getUpBgNode();null!=o&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.DROP_COIN,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(S.pzaDropCoin);r&&r.initPartRewardCoin(a,t,e)}else console.error(n)})},a.createWaterLightEffect=function(){var a=i.pzaNodeManager.getDownEffectNode();null!=a&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.WATER_LIGHT_EFFECT,!1,function(t,e){null==t&&null!=e?(e.setParent(a),e.zIndex=-2):console.error(t)})},a.createWaterFlowerEffect=function(a,t,e,o){void 0===o&&(o=1);var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.WATER_FLOWER_EFFECT,function(i,r){if(null==i&&null!=r){r.scale=o,r.zIndex=10*-a+10,r.setParent(n),r.setPosition(t);var p=r.getComponent(h.pzaBaseEffect);p&&p.showEffect(null,e)}else console.error(i)})},a.createBoomFireEffect=function(a,t,e,o){var n=i.pzaNodeManager.getPlantZombieNode();null!=n&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.BOOM_FIRE_EFFECT,function(i,r){if(null==i&&null!=r){r.setParent(n),r.setPosition(e),r.zIndex=10*-a+10;var p=r.getComponent(f.pzaBoomFireEffect);p&&p.showEffect(t,o)}else console.error(i)})},a.createTangleKelpEffect=function(a,t,e){var o=i.pzaNodeManager.getUpEffectNode();null!=o&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.TANGLEKELP_EFFECT,!1,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(a);var r=i.getComponent(G.pzaTangleKelpEffect);r&&r.showEffect(t,e)}else console.error(n)})},a.createBackPumpkin=function(a){var t=i.pzaNodeManager.getPlantZombieNode();null!=t&&null!=a&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.BACK_PUMPKIN,!1,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a.logicPos);var n=o.getComponent(d.pzaBackPumpkin);n&&n.bindData(a)}else console.error(e)})},a.createBackPumpkinFire=function(a){var t=i.pzaNodeManager.getPlantZombieNode();null!=t&&null!=a&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.BACK_PUMPKINFIRE,!1,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a.logicPos);var n=o.getComponent(d.pzaBackPumpkin);n&&n.bindData(a)}else console.error(e)})},a.createDoomHoleEffect=function(a,t,e,o,n,r){void 0===o&&(o=!1);var s=i.pzaNodeManager.getDownEffectNode();null!=s&&null!=a&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.DOOM_HOLE_EFFECT,!1,function(i,p){if(null==i&&null!=p){p.setParent(s),p.setPosition(a);var l=p.getComponent(g.pzaDoomHoleEffect);o?l&&l.recover(t,e,n,r):l&&l.init(t,e)}else console.error(i)})},a.createGoldHoleEffect=function(a,t,e,o,n,r){void 0===o&&(o=!1);var s=i.pzaNodeManager.getDownEffectNode();null!=s&&null!=a&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.GOLD_HOLE_EFFECT,!1,function(i,p){if(null==i&&null!=p){p.setParent(s),p.setPosition(a);var l=p.getComponent(M.pzaGoldHoleEffect);o?l&&l.recover(t,e,n,r):l&&l.init(t,e)}else console.error(i)})},a.createZombieCloseFallEffect=function(){},a.createDoomBoomEffect=function(a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&null!=a&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.DOOM_BOOM_EFFECT,!1,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a);var n=o.getComponent(h.pzaBaseEffect);n&&n.showEffect(null,null)}else console.error(e)})},a.createCobBoomEffect=function(a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&null!=a&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.COB_BOOM_EFFECT,!1,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a);var n=o.getComponent(h.pzaBaseEffect);n&&n.showEffect(null,null)}else console.error(e)})},a.createCobBoomHoleEffect=function(a){var t=i.pzaNodeManager.getDownEffectNode();null!=t&&null!=a&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.COB_BOOM_HOLE,!1,function(e,o){null==e&&null!=o?(o.setParent(t),o.setPosition(a)):console.error(e)})},a.createFumeShroomEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.FUME_SHROOM_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(t),i.zIndex=10*-a+10;var r=i.getComponent(h.pzaBaseEffect);r&&r.showEffect(null,e)}else console.error(n)})},a.createIceFumeShroomEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.ICE_FUME_SHROOM_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(t),i.zIndex=10*-a+10;var r=i.getComponent(h.pzaBaseEffect);r&&r.showEffect(null,e)}else console.error(n)})},a.createGloomShroomEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.GLOOM_SHROOM_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(t),i.zIndex=10*-a+10;var r=i.getComponent(h.pzaBaseEffect);r&&r.showEffect(null,e)}else console.error(n)})},a.createIceBoomEffect=function(a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&null!=a&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.ICE_BOOM_EFFECT,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a);var n=o.getComponent(h.pzaBaseEffect);n&&n.showEffect(null,null)}else console.error(e)})},a.createFrozenEffect=function(a){var t=i.pzaNodeManager.getPlantZombieNode();null!=t&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.FROZEN_EFFECT,function(e,o){if(null==e&&null!=o){o.setParent(t);var n=o.getComponent(D.pzaFrozenEffect);n&&n.bindData(a)}else console.error(e)})},a.createNutHurtEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&null!=a&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.NUT_HURT_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(o),i.zIndex=e,i.setPosition(a);var r=i.getComponent(h.pzaBaseEffect);r&&r.showEffect(t,null)}else console.error(n)})},a.createRainNightEffect=function(){var a=i.pzaNodeManager.getUpBgNode();null!=a&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.RAIN_NIGHT_EFFECT,!1,function(t,e){null==t&&null!=e?e.setParent(a):console.error(t)})},a.createRainEffect=function(a,t){var e=i.pzaNodeManager.getDownEffectNode();null!=e&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.RAIN_EFFECT,!1,function(o,n){if(null==o&&null!=n){n.setParent(e),n.setPosition(a);var i=n.getComponent(w.pzaRainEffect);i&&i.showAnim(t)}else console.error(o)})},a.createDropPlantCard=function(a,t,e){var o=i.pzaNodeManager.getCardsNode();null!=o&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.DROP_PLANT_CARD,!1,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(P.pzaDropPlantCard);window.pzaplantManager.dropPlantCards.add(r),r&&r.init(a,t,e)}else console.error(n)})},a.createAutoCard=function(a){var t=i.pzaNodeManager.getCardsNode();if(null!=t){var e=o.pzaGameConfig.getRandomSunPos();p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.DROP_PLANT_CARD,!1,function(o,n){if(null==o&&null!=n){n.setParent(t);var i=n.getComponent(P.pzaDropPlantCard);window.pzaplantManager.dropPlantCards.add(i),i&&i.miniInit(a,e)}else console.error(o)})}},a.createButterEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.BUTTER_EFFECT,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=o.convertToNodeSpaceAR(t);i.setPosition(r),i.zIndex=e,i.getComponent(y.pzaButterEffect).bindData(a)}else console.error(n)})},a.createPlanternEffect=function(a,t){var e=i.pzaNodeManager.getUpEffectNode();null!=e&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.PLANTERN_EFFECT,!1,function(o,n){null==o&&null!=n?(n.setParent(e),n.setPosition(t),n.getComponent(T.pzaPlanternEffect).bindData(a)):console.error(o)})},a.createSquashEffect=function(a){var t=i.pzaNodeManager.getDownEffectNode();null!=t&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.SQUASH_EFFECT,function(e,o){null==e&&null!=o?(o.setParent(t),o.setPosition(a),o.getComponent(h.pzaBaseEffect).showEffect("blow",null)):console.error(e)})},a.createHypnoEffect=function(a,t){var e=i.pzaNodeManager.getPlantZombieNode();null!=e&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.HYPNO_EFFECT,function(o,n){null==o&&null!=n?(n.setParent(e),n.zIndex=t,n.setPosition(a),n.getComponent(h.pzaBaseEffect).showEffect("blow",null)):console.error(o)})},a.createImitaterEffect=function(a){var t=i.pzaNodeManager.getUpEffectNode();null!=t&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.IMITATER_EFFECT,function(e,o){null==e&&null!=o?(o.setParent(t),o.setPosition(a),o.getComponent(h.pzaBaseEffect).showEffect(null,null)):console.error(e)})},a.createSmokeEffect=function(a,t){var e=i.pzaNodeManager.getUpEffectNode();null!=e&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.SMOKE_EFFECT,function(o,n){null==o&&null!=n?(n.setParent(e),n.setPosition(t),n.getComponent(h.pzaBaseEffect).showEffect(a,null)):console.error(o)})},a.createDrZomBallEffect=function(a,t,e){var o=i.pzaNodeManager.getPlantZombieNode();null!=o&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.DR_ZOM_BALL,!1,function(n,i){null==n&&null!=i?(i.setParent(o),i.getComponent(v.pzaDrZomBall).init(a,t,e)):console.error(n)})},a.createBungeeZombieEffect=function(a){var t=i.pzaNodeManager.getPlantZombieNode();null!=t&&p.pzaBundleObjectPool.requestInstantByUrl(l.pzaResourceUrl.BUNGEE_ZOMBIE_EFFECT,!1,function(e,o){null==e&&null!=o?(o.setParent(t),o.getComponent(z.pzaBungeeZombieEffect).init(a)):console.error(e)})},a.createRicochetBulletEffect=function(a){var t=i.pzaNodeManager.getBulletNode();null!=t&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.RICOCHET_BULLET_EFFECT,function(e,o){if(null==e&&null!=o){o.setParent(t),o.setPosition(a);var n=o.getComponent(A.pzaRicochetBulletEffect);n&&n.init()}else console.error(e)})},a.createPolevaultingEffect=function(a,t){var e=i.pzaNodeManager.getPlantZombieNode();null!=e&&p.pzaBundleObjectPool.requestInstantByUrl2(l.pzaResourceUrl.POLEVAULTING_EFFECT,function(o,n){null==o&&null!=n?(n.setParent(e),n.setPosition(a),n.zIndex=t,n.getComponent(h.pzaBaseEffect).showEffect(null,null)):console.error(o)})},a.createAshesEffect=function(a,t,e,o,n,r){void 0===r&&(r="death");var s=i.pzaNodeManager.getPlantZombieNode();if(null!=s){var u=l.pzaResourceUrl.NORMAL_ASHES_EFFECT;a==c.pzaZombieEnum.DIGGER_ZOMBIE?u=l.pzaResourceUrl.DIGGER_ASHES_EFFECT:a==c.pzaZombieEnum.GARGANTUAR?u=l.pzaResourceUrl.GARGANTUAR_ASHES_EFFECT:a==c.pzaZombieEnum.ZOMBONI||a==c.pzaZombieEnum.ZOMBONI2?u=l.pzaResourceUrl.ZOMBONI_ASHES_EFFECT:a==c.pzaZombieEnum.IMP?u=l.pzaResourceUrl.IMP_ASHES_EFFECT:a==c.pzaZombieEnum.CATAPULT_ZOMBIE?u=l.pzaResourceUrl.CATAPULT_ASHES_EFFECT:a==c.pzaZombieEnum.BALLOON_ZOMBIE&&(u=l.pzaResourceUrl.BALLOON_ASHES_EFFECT),p.pzaBundleObjectPool.requestInstantByUrl2(u,function(a,i){null==a&&null!=i?(i.setParent(s),i.setPosition(t),i.scale=n,i.zIndex=o,i.scaleX=-e*n,i.getComponent(h.pzaBaseEffect).showEffect(r,null)):console.error(a)})}},a}();e.pzaEffectManager=I,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaMapManager":"pzaMapManager","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./Data/pzaPlantEnum":"pzaPlantEnum","./Data/pzaZombieEnum":"pzaZombieEnum","./Effect/pzaAbsorbIronEquip":"pzaAbsorbIronEquip","./Effect/pzaBackPumpkin":"pzaBackPumpkin","./Effect/pzaBaseEffect":"pzaBaseEffect","./Effect/pzaBattleFrameAnim":"pzaBattleFrameAnim","./Effect/pzaBoomFireEffect":"pzaBoomFireEffect","./Effect/pzaBungeeZombieEffect":"pzaBungeeZombieEffect","./Effect/pzaButterEffect":"pzaButterEffect","./Effect/pzaDoomHoleEffect":"pzaDoomHoleEffect","./Effect/pzaDrZomBall":"pzaDrZomBall","./Effect/pzaDropCard":"pzaDropCard","./Effect/pzaDropCoin":"pzaDropCoin","./Effect/pzaDropPlantCard":"pzaDropPlantCard","./Effect/pzaFogEffect":"pzaFogEffect","./Effect/pzaFrozenEffect":"pzaFrozenEffect","./Effect/pzaGoldHoleEffect":"pzaGoldHoleEffect","./Effect/pzaHammerEffect":"pzaHammerEffect","./Effect/pzaIceGroundEffect":"pzaIceGroundEffect","./Effect/pzaPlanternEffect":"pzaPlanternEffect","./Effect/pzaRainEffect":"pzaRainEffect","./Effect/pzaRicochetBulletEffect":"pzaRicochetBulletEffect","./Effect/pzaShowGrassEffect":"pzaShowGrassEffect","./Effect/pzaTangleKelpEffect":"pzaTangleKelpEffect","./Effect/pzaWordEffect":"pzaWordEffect"}],pzaFireMine:[function(a,t,e){"use strict";cc._RF.push(t,"91f80St/sJJMp81Cx8Rcg97","pzaFireMine");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFireMine=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaPotatoMine"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.attack=function(){var a=this;this.hasBomb=!0,this.baseData.isDead=!0,this.death(),r.pzaSoundManager.playAudio("JalapenoBoom"),window.pzaplantManager.removePlant(this.baseData),window.pzaMapManager.shakeMap();for(var t=u.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),e=0;e<12;e++){var o=t.clone();o.x+=100*e,u.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,o,0);var n=.1*e+.5;e>=5&&(n=.05*e+.5),c.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,n,o,null)}window.pzaMapManager.removeRowIceGround(this.baseData.yIndex);for(var i=0;i<=8;i++)window.pzaMapManager.removeLadder(i,this.baseData.yIndex);p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var h=window.pzazombieManager.zombieDatas[this.baseData.yIndex],m=Array.from(h);null!=window.pzazombieManager.drZomBoss&&m.push(window.pzazombieManager.drZomBoss.baseData),m.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==s.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(l.pzaBuffType.FROST),t.buffData.removeBuff(l.pzaBuffType.FROZEN))}})},i([f],t)}(h.pzaPotatoMine));e.pzaFireMine=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaPotatoMine":"pzaPotatoMine"}],pzaFireNut:[function(a,t,e){"use strict";cc._RF.push(t,"04fa0ONLBhAJ6KKZ458m4Ks","pzaFireNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFireNut=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaAttackType"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=s.pzaPlantCate.Nut,this.animation.playAnimation("idle1",!0)},t.prototype.hurt=function(t,e,o){if(a.prototype.hurt.call(this,t,e,o),e){e.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FIRE,3,this.baseData.atk));var n=window.pzazombieManager.getZombie(e);n&&n.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.FLOOR_ATK)}},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.attack()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.attack()},t.prototype.attack=function(){var a=this;r.pzaSoundManager.playAudio("JalapenoBoom"),window.pzaplantManager.removePlant(this.baseData),window.pzaMapManager.shakeMap();for(var t=d.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),e=0;e<12;e++){var o=t.clone();o.x+=100*e,d.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,o,0);var n=.1*e+.5;e>=5&&(n=.05*e+.5),u.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,n,o,null)}window.pzaMapManager.removeRowIceGround(this.baseData.yIndex);for(var i=0;i<=8;i++)window.pzaMapManager.removeLadder(i,this.baseData.yIndex);p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var s=window.pzazombieManager.zombieDatas[this.baseData.yIndex],m=Array.from(s);null!=window.pzazombieManager.drZomBoss&&m.push(window.pzazombieManager.drZomBoss.baseData),m.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.plantData.atk2Arr[0],a.baseData,h.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==c.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(l.pzaBuffType.FROST),t.buffData.removeBuff(l.pzaBuffType.FROZEN))}})},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([z],t)}(m.pzaBasePlant));e.pzaFireNut=y,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaFitIPhoneX:[function(a,t,e){"use strict";cc._RF.push(t,"42313kvA4BFtrzlzDcwp0vx","pzaFitIPhoneX");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFitIPhoneX=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.widget=null,t.topOffset=0,t.bottomOffset=0,t.leftOffset=0,t.rightOffset=0,t}return n(t,a),t.prototype.onLoad=function(){this.widget&&cc.winSize.width/cc.winSize.height>2&&(this.widget.top+=this.topOffset,this.widget.bottom+=this.bottomOffset,this.widget.left+=this.leftOffset,this.widget.right+=this.rightOffset)},i([l(cc.Widget)],t.prototype,"widget",void 0),i([l(cc.Float)],t.prototype,"topOffset",void 0),i([l(cc.Float)],t.prototype,"bottomOffset",void 0),i([l(cc.Float)],t.prototype,"leftOffset",void 0),i([l(cc.Float)],t.prototype,"rightOffset",void 0),i([p],t)}(cc.Component);e.pzaFitIPhoneX=s,cc._RF.pop()},{}],pzaFitIpad:[function(a,t,e){"use strict";cc._RF.push(t,"40bc1fN32NI5463ZsehbVWI","pzaFitIpad");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFitIpad=void 0;var r=cc._decorator,p=r.ccclass,l=(r.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onLoad=function(){cc.winSize.width/cc.winSize.height<16/9&&(cc.Canvas.instance.fitWidth=!0)},i([p],t)}(cc.Component));e.pzaFitIpad=l,cc._RF.pop()},{}],pzaFlagZombie:[function(a,t,e){"use strict";cc._RF.push(t,"4ea6aBnvahK862jVHmtItra","pzaFlagZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFlagZombie=void 0;var r=a("../Data/pzaZombieEnum"),p=a("./pzaNormalZombie"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[l.pzaZombieSlotType.butter,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.butter).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[l.pzaZombieSlotType.flag,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.flag).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.flag+"1",239.35,-113.5,-103.06)).addState(new l.pzaZombieSlotAtt(2,l.pzaZombieSlotType.flag+"2",239.34,-113.5,-103.06)).addState(new l.pzaZombieSlotAtt(3,l.pzaZombieSlotType.flag+"3",420.37,-157.3,-103.06))]])},t.prototype.updateFlagState=function(a){this.slotMap||this.initEquips(),this.slotMap.get(l.pzaZombieSlotType.flag).updateState(a)},t.prototype.playDeathAnimation=function(t){this.updateFlagState(3),a.prototype.playDeathAnimation.call(this,t)},t.prototype.zombieDying=function(){this.zombieHurtState=r.pzaHurtStateEnum.DYING,this.updateFlagState(2)},t.prototype.zombieHurt=function(){this.zombieHurtState=r.pzaHurtStateEnum.HURT,this.updateFlagState(2)},t.prototype.zombieIntact=function(){this.zombieHurtState=r.pzaHurtStateEnum.INTACT,this.updateFlagState(1)},i([c],t)}(p.pzaNormalZombie));e.pzaFlagZombie=u,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaFlowerPot:[function(a,t,e){"use strict";cc._RF.push(t,"844b3i3LINC/YeQXQ5ZJ4Rg","pzaFlowerPot");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFlowerPot=void 0;var r=a("../Data/pzaBuffData"),p=a("../pzaGameState"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hasPlant=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.animation.node.y=0},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.hasPlant=!1,this.animation.playAnimation("idle1",!0),p.pzaGameState.onlyShroomCofee=!1,p.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead){var e=""+this.baseData.xIndex+this.baseData.yIndex,o=window.pzaplantManager.plantDataMap.get(e),n=window.pzaplantManager.pumpkinDataMap.get(e);return null!=o&&(o.floatY=45),null!=n&&(n.floatY=45),null==o&&null==n&&this.hasPlant?(this.hasPlant=!1,void this.animation.playAnimation("idle1",!0)):null==o&&null==n||this.hasPlant?void 0:(this.hasPlant=!0,void this.animation.playAnimation("idle2",!0))}},t.prototype.flaserDeath=function(){var a=this;this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.FLASER,-1)),this.pauseSelf(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()}))),this.animation.node.stopAllActions(),this.animation.node.runAction(cc.moveTo(.15,cc.v2(0,100)))},i([c],t)}(l.pzaBasePlant));e.pzaFlowerPot=u,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaFogEffect:[function(a,t,e){"use strict";cc._RF.push(t,"89d9aoAzfxKuobLHg49NVFI","pzaFogEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFogEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../pzaGameState"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.column5Cloud=[],t.column6Cloud=[],t.column7Cloud=[],t.column8Cloud=[],t.column9Cloud=[],t.planternDatas=new Set,t.allScatterNode=null,t.hasBeBlow=!1,t.beBlowTime=0,t.backing=!1,t.fogOffsetX=0,t.minFogColumn=0,t}return n(t,a),t.prototype.init=function(a,t,e){var o=this;this.planternDatas.clear(),this.allScatterNode=null,this.hasBeBlow=!1,this.backing=!1,this.beBlowTime=0,this.fogOffsetX=0,this.minFogColumn=a,this.initFog(),this.node.stopAllActions();var n=cc.winSize;this.node.setPosition(cc.v2(n.width/2,0)),this.node.runAction(cc.sequence(cc.moveTo(1.5,cc.v2(0,0)).easing(cc.easeQuadraticActionOut()),cc.callFunc(function(){t&&t()}))),null!=e&&e.length>0&&(e.forEach(function(a){o.planternDatas.add(a)}),this.getAllScatterFogNode(),this.allScatterNode.forEach(function(a){null!=a&&(a.stopAllActions(),a.opacity=255,a.runAction(cc.fadeOut(.3)))}))},t.prototype.initFog=function(){var a=this;this.column5Cloud.forEach(function(t){null!=t&&(t.stopAllActions(),t.active=a.minFogColumn<=5,t.opacity=255)}),this.column6Cloud.forEach(function(t){null!=t&&(t.stopAllActions(),t.active=a.minFogColumn<=6,t.opacity=255)}),this.column7Cloud.forEach(function(t){null!=t&&(t.stopAllActions(),t.active=a.minFogColumn<=7,t.opacity=255)}),this.column8Cloud.forEach(function(a){null!=a&&(a.stopAllActions(),a.opacity=255)}),this.column9Cloud.forEach(function(a){null!=a&&(a.stopAllActions(),a.opacity=255)})},t.prototype.logicUpdate=function(a){this.backing?this.backFog(a):this.hasBeBlow&&(this.beBlowTime+=a,this.beBlowTime<24||(this.hasBeBlow=!1,this.backing=!0,this.initFog(),this.fogOffsetX=Math.floor(cc.winSize.width/2/p.pzaGameState.map.getBlockWidth()),this.allScatterNode=null))},t.prototype.pauseSelf=function(){this.node.pauseAllActions(),this.column5Cloud.forEach(function(a){a&&a.pauseAllActions()}),this.column6Cloud.forEach(function(a){a&&a.pauseAllActions()}),this.column7Cloud.forEach(function(a){a&&a.pauseAllActions()}),this.column8Cloud.forEach(function(a){a&&a.pauseAllActions()}),this.column9Cloud.forEach(function(a){a&&a.pauseAllActions()})},t.prototype.resumeSelf=function(){this.node.resumeAllActions(),this.column5Cloud.forEach(function(a){a&&a.resumeAllActions()}),this.column6Cloud.forEach(function(a){a&&a.resumeAllActions()}),this.column7Cloud.forEach(function(a){a&&a.resumeAllActions()}),this.column8Cloud.forEach(function(a){a&&a.resumeAllActions()}),this.column9Cloud.forEach(function(a){a&&a.resumeAllActions()})},t.prototype.backFog=function(a){var t=this,e=this.fogOffsetX,o=cc.winSize.width/28,n=this.node.x-o*a;if(n<=0&&(n=0,this.backing=!1),this.node.setPosition(cc.v2(n,0)),this.fogOffsetX=Math.floor(n/p.pzaGameState.map.getBlockWidth()),this.fogOffsetX!=e){var i=this.allScatterNode;this.getAllScatterFogNode(),this.allScatterNode.forEach(function(a){null==a||i&&i.has(a)||(a.stopAllActions(),a.opacity=255,a.runAction(cc.fadeOut(.3)))}),i&&i.forEach(function(a){null==a||t.allScatterNode&&t.allScatterNode.has(a)||(a.stopAllActions(),a.opacity=0,a.runAction(cc.fadeIn(.3)))})}},t.prototype.blowFog=function(){if(!this.hasBeBlow){this.hasBeBlow=!0,this.backing=!1,this.beBlowTime=0,this.node.stopAllActions();var a=cc.winSize;this.node.runAction(cc.moveTo(.7,cc.v2(a.width/2,0)).easing(cc.easeQuadraticActionOut()))}},t.prototype.addPlantern=function(a){if(null!=a){var t=this.allScatterNode;this.planternDatas.add(a),this.getAllScatterFogNode(),this.allScatterNode.forEach(function(a){null==a||t&&t.has(a)||(a.stopAllActions(),a.opacity=255,a.runAction(cc.fadeOut(.3)))})}},t.prototype.removePlantern=function(a){var t=this;if(null!=a){var e=this.allScatterNode;this.planternDatas.delete(a),this.getAllScatterFogNode(),e&&e.forEach(function(a){null==a||t.allScatterNode&&t.allScatterNode.has(a)||(a.stopAllActions(),a.opacity=0,a.runAction(cc.fadeIn(.3)))})}},t.prototype.getAllScatterFogNode=function(){this.allScatterNode=new Set;for(var a=p.pzaGameState.map.getMapRow(),t=4;t<=8;t++){var e=this.getColumnFog(t);if(null!=e)for(var o=0;o<a;o++){var n=e[o];null!=n&&this.planterContainFog(t+this.fogOffsetX,o)&&this.allScatterNode.add(n)}}},t.prototype.getColumnFog=function(a){switch(a){case 4:return this.column5Cloud;case 5:return this.column6Cloud;case 6:return this.column7Cloud;case 7:return this.column8Cloud;case 8:return this.column9Cloud}},t.prototype.planterContainFog=function(a,t){var e=!1;return this.planternDatas.forEach(function(o){e||null==o||o.xIndex<=-1||o.yIndex<=-1||t>o.yIndex+2||t<o.yIndex-2||(e=t==o.yIndex+2||t==o.yIndex-2?a>=o.xIndex-2&&a<=o.xIndex+2:a>=o.xIndex-3&&a<=o.xIndex+3)}),e},i([c({displayName:"5\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],t.prototype,"column5Cloud",void 0),i([c({displayName:"6\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],t.prototype,"column6Cloud",void 0),i([c({displayName:"7\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],t.prototype,"column7Cloud",void 0),i([c({displayName:"8\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],t.prototype,"column8Cloud",void 0),i([c({displayName:"9\u5217\u4e91\u8282\u70b9",type:[cc.Node]})],t.prototype,"column9Cloud",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaFogEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../pzaGameState":"pzaGameState"}],pzaFootballZombie:[function(a,t,e){"use strict";cc._RF.push(t,"f3422LKR3FJdJV8UNfW8IGR","pzaFootballZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFootballZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Plant/pzaAttackType"),l=a("./pzaBaseZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=s.pzaZombieSlotType.helmet_red,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,-29.65,88.31))],[s.pzaZombieSlotType.helmet_red,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.helmet_red).addState(new s.pzaZombieSlotAtt(1,this.equip1Slot+"1",.87,-5.4,-113.55)).addState(new s.pzaZombieSlotAtt(2,this.equip1Slot+"2",14.41,-12.51,-113.55)).addState(new s.pzaZombieSlotAtt(3,this.equip1Slot+"3",3.03,-7.68,-113.55))]])},t.prototype.zombieHurtSound=function(t){t==p.pzaAttackType.KNOCK?a.prototype.zombieHurtSound.call(this,t):r.pzaSoundManager.playAudio("FootballHurt")},i([u],t)}(l.pzaBaseZombie));e.pzaFootballZombie=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Plant/pzaAttackType":"pzaAttackType","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaFrameAnimComponent:[function(a,t,e){"use strict";cc._RF.push(t,"c0754jcq6ZBT7iiagRYrYIF","pzaFrameAnimComponent");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaFrameAnim"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.update=function(a){this.updateFrame(a)},i([l],t)}(r.default));e.default=s,cc._RF.pop()},{"./pzaFrameAnim":"pzaFrameAnim"}],pzaFrameAnim:[function(a,t,e){"use strict";cc._RF.push(t,"2f54fyh8VpKBaCciEDVPkHC","pzaFrameAnim");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spriteFrames=[],t.duration=.1,t.loop=!1,t.playOnload=!1,t.endCallback=null,t.isPlaying=!1,t.playTime=0,t.spriteLen=0,t.spriteIndex=0,t}return n(t,a),t.prototype.onLoad=function(){this.sprite||(this.sprite=this.node.getComponent(cc.Sprite),this.spriteLen=this.spriteFrames.length),this.sprite?(this.sprite.sizeMode=cc.Sprite.SizeMode.RAW,this.sprite.trim=!1,this.playOnload&&this.play()):console.error("====[ERR]FrameAnim, \u672a\u914d\u7f6esprite")},t.prototype.setFrames=function(a){return this.spriteFrames=a,this.spriteLen=this.spriteFrames.length,this.node.getComponent(cc.Sprite).spriteFrame=a[0],this},t.prototype.setDuration=function(a){return this.duration=a,this},t.prototype.setLoop=function(a){return this.loop=a,this},t.prototype.setEndFn=function(a){return this.endCallback=a,this},t.prototype.play=function(){return this.spriteLen<=0?(console.error("====[ERR]FrameAnim, spriteLen\u4e3a\u7a7a"),this):(this.isPlaying=!0,this)},t.prototype.stop=function(){return this.isPlaying=!1,this},t.prototype.reset=function(){return this.spriteIndex=0,this.playTime=0,this.sprite.spriteFrame=this.spriteFrames[0],this},t.prototype.updateFrame=function(a){if(this.isPlaying&&(this.playTime+=a,!(this.playTime<this.duration))){if(this.spriteIndex++,this.playTime=0,this.spriteIndex>=this.spriteLen){if(!this.loop)return this.isPlaying=!1,void(this.endCallback&&this.endCallback());this.spriteIndex=0}this.sprite.spriteFrame=this.spriteFrames[this.spriteIndex]}},i([l({type:[cc.SpriteFrame]})],t.prototype,"spriteFrames",void 0),i([l({tooltip:"\u6bcf\u4e00\u5e27\u65f6\u957f"})],t.prototype,"duration",void 0),i([l(cc.Boolean)],t.prototype,"loop",void 0),i([l(cc.Boolean)],t.prototype,"playOnload",void 0),i([p],t)}(cc.Component);e.default=s,cc._RF.pop()},{}],pzaFrozenEffect:[function(a,t,e){"use strict";cc._RF.push(t,"2216dff601LwaALsQ/9tumg","pzaFrozenEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFrozenEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaSpineController"),s=a("../Data/pzaBuffData"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine=null,t.frostNode=null,t.poolPrefab=null,t.thawing=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.thawing=!1,this.node.setPosition(t.logicPos),this.spine.node.active=!1,this.frostNode.active=!0;var e=10*-this.baseData.yIndex+5;this.node.zIndex=e},t.prototype.logicUpdate=function(){this.thawing||(null==this.baseData||this.baseData.isDead?this.close():this.baseData.buffData.hasBuff(s.pzaBuffType.FROZEN)||this.thaw())},t.prototype.thaw=function(){var a=this;this.thawing=!0,this.spine.node.active=!0,this.frostNode.active=!1,this.spine.playAnimation("blow1",!1,function(){a.close()})},t.prototype.pauseSelf=function(){this.thawing&&this.spine.pauseAnimation()},t.prototype.resumeSelf=function(){this.thawing&&this.spine.resumeAnimation()},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([d({displayName:"spine\u52a8\u753b",type:l.pzaSpineController})],t.prototype,"spine",void 0),i([d({displayName:"\u51b0\u51bb\u56fe\u8282\u70b9",type:cc.Node})],t.prototype,"frostNode",void 0),i([d(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([u],t)}(r.pzaBaseComponent);e.pzaFrozenEffect=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData"}],pzaFumeShroom:[function(a,t,e){"use strict";cc._RF.push(t,"3a637jM3wtCYrxURFH0/B6g","pzaFumeShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFumeShroom=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaUtil"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.shootNode=null,t.blinkTime=3,t.attacking=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),c.pzaGameState.isZombieMode())return this.attacking=!1,this.sleepAni.node.active=!1,void this.animation.playAnimation("T_idle",!0);t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()),c.pzaGameState.useShroom=!0,c.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData&&!this.baseData.plantData.sleeping&&(this.blinkTime-=t,!this.attacking&&c.pzaGameState.isZombieMode())){var o=window.pzazombieManager.getCanAttackZombies(this.baseData,4);if(o&&o.length>0)return r.pzaSoundManager.playAudio("FumeShroomAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){if(null!=e.baseData&&!e.baseData.isDead){var a=cc.v2(e.baseData.logicPos.x+e.shootNode.x,e.baseData.logicPos.y+e.shootNode.y);s.pzaEffectManager.createFumeShroomEffect(e.baseData.yIndex,a,null),e.hurtZombies(o)}})}},t.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=window.pzazombieManager.getCanAttackZombies(a.baseData,4);if(e&&e.length>0)return r.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(null!=a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x+a.shootNode.x,a.baseData.logicPos.y+a.shootNode.y);s.pzaEffectManager.createFumeShroomEffect(a.baseData.yIndex,t,null),a.hurtZombies(e)}});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};this.animation.playAnimation("idle1",!1,t)},t.prototype.hurtZombies=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=t.baseData){var e=window.pzazombieManager.getZombie(a);e&&e.hurt(t.baseData.atk,t.baseData,u.pzaAttackType.PENETRATE)}})},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([f({displayName:"\u7761\u89c9\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"sleepAni",void 0),i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([m],t)}(d.pzaBasePlant);e.pzaFumeShroom=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaGameBase:[function(a,t,e){"use strict";cc._RF.push(t,"2ea68IoCGRJ3oY1yVnC2lvC","pzaGameBase"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameBase=void 0;var o=a("../Battle/Data/pzaDropType"),n=a("../Battle/pzaEffectManager"),i=a("../Battle/pzaGameState"),r=a("../Load/pzaBundleObjectPool"),p=a("../Load/pzaPreLoadManager"),l=a("../View/Battle/pzaDaveTreasureView"),s=a("../View/Battle/pzaGetAchieveView"),c=a("../View/Battle/pzaPlantSelectView"),u=a("../View/pzaCommonMask"),d=a("../View/pzaWarningView"),h=a("../utils/pzaChannel"),m=a("../utils/pzakc"),f=a("./pzaCollisionManager"),z=a("./pzaGameConfig"),y=a("./pzaGameManager"),g=a("./pzaGamePartConfig"),v=a("./pzaLocalData"),b=a("./pzaRankMgr"),S=a("./pzaSoundManager"),P=a("./pzaStatisticsMgr"),C=a("./pzaTipManager"),D=a("./pzaUIManager"),M=a("./pzaUtil"),E=a("./pzaWorldEventManager"),_=a("../Battle/Data/pzaBaseData"),T=a("../Battle/Data/pzaZombieEnum"),w=a("../Battle/Zombie/pzaBaseZombie"),A=a("./pzaGameZJ"),B=a("../utils/pzaResMgr"),G=a("../Garden/pzaGardenMgr"),O=function(){function a(){this.gameMode=i.pzaGameMode.NORMAL,this.toolButtonUseTimes=0,this.toolButtonLeftArr=null,this.adPlantTimes=0,this.autoSunCreate=null}return a.prototype.getGameModeName=function(){return"\u666e\u901a\u6a21\u5f0f-"},a.prototype.getRankKey=function(){return""},a.prototype.createAdBomb=function(){window.pzaplantManager.createAdCherry()},a.prototype.init=function(){return this},a.prototype.isMainMode=function(){return!1},a.prototype.isEndless=function(){return!1},a.prototype.isAutoCreateSun=function(){return!0},a.prototype.beforeLoad=function(){},a.prototype.skipPartStar=function(){return!0},a.prototype.getPlantArr=function(){return v.pzaLocalData.data.ownPlants},a.prototype.getZombieTypeArr=function(){return null},a.prototype.addOtherRes=function(){},a.prototype.getResArr=function(a,t){var e=Array.from(p.pzaPreLoadManager.getPartSubResources(a,t)),o=this.getPlantArr(a,t),n=[];o.forEach(function(a){var t=p.pzaPreLoadManager.getPlantUrl(a);if(null!=t&&!(n.indexOf(t)>=0)){e.push(new p.pzaResourceDetail(t));var o=p.pzaPreLoadManager.getSubResources(t);null!=o&&(e=e.concat(o)),n.push(t)}});var r=this.getZombieTypeArr(a,t);return null!=r&&(e.push(new p.pzaResourceDetail(p.pzaResourceUrl.FLAG_ZOMBIE)),r.forEach(function(a){var t=p.pzaPreLoadManager.getZombieUrl(a);if(null!=t){e.push(new p.pzaResourceDetail(t));var o=p.pzaPreLoadManager.getSubResources(t);null!=o&&(e=e.concat(o))}})),i.pzaGameState.isZjMode()&&y.pzaGameManager.getGame(i.pzaGameMode.ZaJiao,A.pzaGameZJ).getRankConf(i.pzaGameState.curPart).endLess&&this.randomBoxPlant().forEach(function(a){var t=p.pzaPreLoadManager.getPlantUrl(a);if(null!=t&&!(n.indexOf(t)>=0)){e.push(new p.pzaResourceDetail(t));var o=p.pzaPreLoadManager.getSubResources(t);null!=o&&(e=e.concat(o)),n.push(t)}}),this.addOtherRes(e),e},a.prototype.randomBoxPlant=function(){var a=y.pzaGameManager.getGame(i.pzaGameMode.ZaJiao,A.pzaGameZJ).normalPlantArr,t=y.pzaGameManager.getGame(i.pzaGameMode.ZaJiao,A.pzaGameZJ).goldPlantArr;return a.concat(t)},a.prototype.readData=function(){},a.prototype.initMapPlantZombie=function(a,t){window.pzaMapManager.init(a,t),window.pzaplantManager.init(),window.pzazombieManager.init()},a.prototype.preLoad=function(a,t,e){this.init();var o=0;i.pzaGameState.isZjMode()&&(o=y.pzaGameManager.getGame(i.pzaGameMode.ZaJiao,A.pzaGameZJ).getRankConf(t).initSun),i.pzaGameState.init(a,t,this.gameMode,this.skipPartStar(),o),this.beforeLoad(a,t),this.toolButtonUseTimes>0&&(this.toolButtonLeftArr=[this.toolButtonUseTimes,this.toolButtonUseTimes,this.toolButtonUseTimes,this.toolButtonUseTimes]),i.pzaGameState.isGameEnd=!1,f.pzaCollisionManager.getInstance.setOn();var n=this.getResArr(a,t);D.pzaUIManager.showLoading(),this.initMapPlantZombie(a,t),S.pzaSoundManager.clearAllLoopAudio(),this.readData(a,t);var p=!1;r.pzaBundleObjectPool.preLoadSubResource(n,function(){p=!0,D.pzaUIManager.hideLoading(e)},function(a){var t=Math.min(100,Math.ceil(100*a));D.pzaUIManager.updateLoadPro(t),100==t&&setTimeout(function(){p||(D.pzaUIManager.instance.loadNode.active=!1,e())},1e3)}),S.pzaSoundManager.playAudio("loadingbar_zombie"),i.pzaGameState.autoPickLock=!1},a.prototype.beforeGameStart=function(){S.pzaSoundManager.playBgm(S.pzaBGMName.LOADING),u.pzaCommonMask.showMask(),n.pzaEffectManager.createGroveEffect()},a.prototype.gameStart=function(a,t){this.beforeGameStart(a,t),this.normalStartGameCall(a,t)},a.prototype.loadAndStart=function(a,t){var e=this;this.preLoad(a,t,function(){e.gameStart(a,t)})},a.prototype.firstStart=function(a,t,e){void 0===e&&(e=!1),i.pzaGameState.gameMode==i.pzaGameMode.NORMAL_WEEKTWO&&(this.gameMode=i.pzaGameMode.NORMAL_WEEKTWO),i.pzaGameState.hadRevived=!1,this.loadAndStart(a,t)},a.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u5192\u9669\u6a21\u5f0f\u201d\uff0c"+["\u4e00\u5468\u76ee\u767d\u5929","\u4e00\u5468\u76ee\u9ed1\u591c","\u4e00\u5468\u76ee\u6c34\u6c60","\u4e00\u5468\u76ee\u6d53\u96fe","\u4e00\u5468\u76ee\u5c4b\u9876","\u4e8c\u5468\u76ee\u767d\u5929","\u4e8c\u5468\u76ee\u9ed1\u591c","\u4e8c\u5468\u76ee\u6c34\u6c60","\u4e8c\u5468\u76ee\u6d53\u96fe","\u4e8c\u5468\u76ee\u5c4b\u9876"][i.pzaGameState.curChapter-1]+"\u7b2c"+i.pzaGameState.curPart+"\u5173\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},a.prototype.midOutAndStart=function(a,t,e,o,n){var r=this;a?D.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.WARNING_VIEW,function(p){var l=p&&p.getComponent(d.pzaWarningView);l&&l.show(a,"\u662f","\u5426",function(){n!=i.pzaGameMode.CREATIVE_VASE&&n!=i.pzaGameMode.CREATIVE_TRAD&&n!=i.pzaGameMode.ZaJiao?(i.pzaGameState.gameMode=r.gameMode,y.pzaGameManager.removeBattleUI(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),o&&o(),D.pzaUIManager.removeBoardUI(),r.loadAndStart(t,e),n!=i.pzaGameMode.VASE&&(i.pzaGameState.hadRevived=!1),v.pzaLocalData.isWeekTwo&&(i.pzaGameState.weekTwoInitPlants=[])):(y.pzaGameManager.removeBattleUI(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),D.pzaUIManager.removeBoardUI(),o&&o(),i.pzaGameState.midOut=!1)},null,"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f")}):n!=i.pzaGameMode.CREATIVE_TRAD&&n!=i.pzaGameMode.CREATIVE_VASE&&n!=i.pzaGameMode.ZaJiao?(i.pzaGameState.gameMode=this.gameMode,y.pzaGameManager.removeBattleUI(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),o&&o(),D.pzaUIManager.removeBoardUI(),this.firstStart(t,e),v.pzaLocalData.isWeekTwo&&(i.pzaGameState.weekTwoInitPlants=[])):(y.pzaGameManager.removeBattleUI(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),D.pzaUIManager.removeBoardUI(),o&&o(),i.pzaGameState.midOut=!1)},a.prototype.initPartProcess=function(){},a.prototype.updatePartProcess=function(a){a.partProNode.active=!0,a.zombieHeadNode.active=!0;var t=window.pzazombieManager.wave/a.maxWave;t=Math.min(1,t);var e=a.partProgress.fillRange+t,o=Math.max(.05,3*e);cc.Tween.stopAllByTarget(a.partProgress),cc.Tween.stopAllByTarget(a.zombieHeadNode),cc.tween(a.partProgress).to(o,{fillRange:-t}).start(),cc.tween(a.zombieHeadNode).to(o,{x:Math.min(10+-315*t,-15)}).start()},a.prototype.showBattleDown=function(a){a.pauseBtn.active=!0,a.blackShovel.active=!1,a.guideArrow.active=!1,a.speedBtn.active=!1,a.sunUIShowNode.active=!1,a.freePlantNode.active=!1,a.gameProp.bombAni_1="3ui_1",a.gameProp.bombAni_2="3ui_idle3",a.gameProp.node.active=!0},a.prototype.refreshNextWave=function(a,t){a.curWaveTime+=t,a.nextWaveTime-=t},a.prototype.createWave=function(a){a.wave++,console.log("createWaveZombie",a.wave),a.curWaveZombieDatas.clear(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.UPDATE_PART_PRO,null),a.curWaveTime=0,a.preRefreshHp=g.pzaWaveConfig.getPreRefreshHp(),a.hasShowRedTip=!1},a.prototype.lastTombWaterZombie=function(){},a.prototype.createRandomDrop=function(a){var t=Math.random();t<=z.pzaGameConfig.DIAMOND_CHANCE?n.pzaEffectManager.createDropCoin(o.pzaDropType.DIAMOND,a):t<=z.pzaGameConfig.DIAMOND_CHANCE+z.pzaGameConfig.GOLD_CHANCE?n.pzaEffectManager.createDropCoin(o.pzaDropType.GOLD_COIN,a):t<=z.pzaGameConfig.DIAMOND_CHANCE+z.pzaGameConfig.GOLD_CHANCE+z.pzaGameConfig.SILVER_CHANCE&&n.pzaEffectManager.createDropCoin(o.pzaDropType.SILVER_COIN,a)},a.prototype.createPassLastPartDrop=function(a){var t=Math.random();t<=z.pzaGameConfig.PLANT_CHANCE&&G.default.instance().getEmptyPos(G.pzaGardenEnv.normal)>0?n.pzaEffectManager.createDropCoin(o.pzaDropType.GARDEN_PLANT,a):t<=z.pzaGameConfig.CHOCOLATE_CHANCE?n.pzaEffectManager.createDropCoin(o.pzaDropType.GARDEN_CHOCOLATE,a):this.createRandomDrop(a)},a.prototype.createYetiDrops=function(a){for(var t=0;t<4;t++)n.pzaEffectManager.createDropCoin(o.pzaDropType.DIAMOND,cc.v2(a.x+80*Math.random()-40,a.y+80*Math.random()-40));v.pzaLocalData.data.hasKillYeti||(v.pzaLocalData.data.hasKillYeti=!0,v.pzaLocalData.addDirty("hasKillYeti"))},a.prototype.zombieDeathDrop=function(a){a.zombieData.zombieType!=T.pzaZombieEnum.YETI_ZOMBIE?v.pzaLocalData.data.passLastPart&&y.pzaGameManager.getCurrentGame().isMainMode()?this.createPassLastPartDrop(a.logicPos):this.createRandomDrop(a.logicPos):a.logicPos.x<640&&this.createYetiDrops(a.logicPos)},a.prototype.checkAllZombieDeath=function(a){var t=0;return a.zombieDatas.forEach(function(a){t+=a.size}),!(t>0)},a.prototype.isLastWave=function(a){return a.wave>=g.pzaGamePartConfig.getPartConfig(i.pzaGameState.curChapter,i.pzaGameState.curPart).maxWave},a.prototype.onZombieDeath=function(a,t,e,o){void 0===e&&(e=!0),void 0===o&&(o=null),e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)&&y.pzaGameManager.passPart(t.logicPos)},a.prototype.createPreviewZombie=function(a,t,e){var o=10==e?M.pzaUtil.getRandomNum(16,17):M.pzaUtil.getRandomNum(9,10),n=1;1==t&&1==e&&(o=5),3!=t&&8!=t||5!=e||(o=M.pzaUtil.getRandomNum(13,14),n=z.pzaGameConfig.miniZombieScale);var l=null;if(i.pzaGameState.isSurvival()?(l=i.pzaGameState.survivalConfig,o=M.pzaUtil.getRandomNum(9,10),n=1):l=g.pzaGamePartConfig.getPartConfig(t,e),null!=l){var s=l.getPreviewZombies(o);if(null!=s){var c=[];5==t||10==t?(c.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),75)),c.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),75)),c.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),125)),c.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),125)),c.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),175)),c.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),175)),c.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),225)),c.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),225)),c.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),275)),c.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),275)),c.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),325)),c.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),325)),c.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),375)),c.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),375)),c.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),75)),c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),75)),c.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),125)),c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),125)),c.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),175)),c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),175)),c.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),225)),c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),225)),c.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),275)),c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),275)),c.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),325)),c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),325)),c.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),375)),c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),375)),c.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),410)),c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),410))):(c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),40)),c.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),40)),c.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),40)),c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),90)),c.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),90)),c.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),90)),c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),140)),c.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),140)),c.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),140)),c.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),190)),c.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),190)),c.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),190)),c.push(cc.v2(1680+M.pzaUtil.getRandomFloatNum(-20,20),240)),c.push(cc.v2(1780+M.pzaUtil.getRandomFloatNum(-20,20),240)),c.push(cc.v2(1880+M.pzaUtil.getRandomFloatNum(-20,20),240)),c.push(cc.v2(1680+M.pzaUtil.getRandomFloatNum(-20,20),290)),c.push(cc.v2(1780+M.pzaUtil.getRandomFloatNum(-20,20),290)),c.push(cc.v2(1880+M.pzaUtil.getRandomFloatNum(-20,20),290)),c.push(cc.v2(1680+M.pzaUtil.getRandomFloatNum(-20,20),340)),c.push(cc.v2(1780+M.pzaUtil.getRandomFloatNum(-20,20),340)),c.push(cc.v2(1880+M.pzaUtil.getRandomFloatNum(-20,20),340)),c.push(cc.v2(1670+M.pzaUtil.getRandomFloatNum(-30,30),390)),c.push(cc.v2(1770+M.pzaUtil.getRandomFloatNum(-30,30),390)),c.push(cc.v2(1670+M.pzaUtil.getRandomFloatNum(-30,30),440)),c.push(cc.v2(1770+M.pzaUtil.getRandomFloatNum(-30,30),440)),c.push(cc.v2(1670+M.pzaUtil.getRandomFloatNum(-30,30),490)),c.push(cc.v2(1770+M.pzaUtil.getRandomFloatNum(-30,30),490)),c.push(cc.v2(1660+M.pzaUtil.getRandomFloatNum(-20,20),540)),c.push(cc.v2(1700+M.pzaUtil.getRandomFloatNum(-20,20),540))),c.sort(function(){return Math.random()-.5});for(var u=function(t,e){var o=p.pzaPreLoadManager.getZombieUrl(t);r.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(o,i){if(null==o&&null!=i){i.setParent(a.previewZombieNode),i.setPosition(e),i.zIndex=-e.y;var r=i.getComponent(w.pzaBaseZombie),p=new _.pzaBaseData(null,t);p.hp=1,p.logicPos=e,r&&r.preview(p,a.previewShadowNode,n),a.PreviewZombies.add(r)}else console.error(o)})},d=0;d<s.length;d++){var h=s[d],m=c[d];h==T.pzaZombieEnum.BUNGEE_ZOMBIE&&(m=5==t?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),u(h,m)}if((5==t||10==t)&&5==e&&!i.pzaGameState.isSurvival()){var f=[cc.v2(1400,550+100*Math.random()),cc.v2(1500,550+100*Math.random()),cc.v2(1600,550+100*Math.random())];for(d=0;d<3;d++)m=f[d],u(T.pzaZombieEnum.BUNGEE_ZOMBIE,m)}S.pzaSoundManager.playBgm(S.pzaBGMName.PRE_BGM)}}},a.prototype.showPreviewTip=function(a,t){a.word.string=a.chapterPreviewTips[t-1],a.flagWord.node.active=!1},a.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=!0,a.cherryBombNode.active=!0,a.autoPickNode.active=!0,a.clearCDNode.active=!1},a.prototype.clickSelectPartInFailView=function(){D.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.PART_SELECT_VIEW,function(){D.pzaUIManager.baseShowBoardUI(p.pzaResourceUrl.HOME_SELECT_VIEW,null)})},a.prototype.getAdPlantArr=function(){return null},a.prototype.playBgm=function(){switch(i.pzaGameState.curChapter){case 1:S.pzaSoundManager.playBgm(S.pzaBGMName.CHAPTER_1);break;case 2:S.pzaSoundManager.playBgm(S.pzaBGMName.CHAPTER_2);break;case 3:S.pzaSoundManager.playBgm(S.pzaBGMName.CHAPTER_3);break;case 4:S.pzaSoundManager.playBgm(S.pzaBGMName.CHAPTER_4);break;case 5:S.pzaSoundManager.playBgm(S.pzaBGMName.CHAPTER_5);break;case 6:S.pzaSoundManager.playBgm(S.pzaBGMName.CHAPTER_1);break;case 7:S.pzaSoundManager.playBgm(S.pzaBGMName.CHAPTER_2);break;case 8:S.pzaSoundManager.playBgm(S.pzaBGMName.CHAPTER_3);break;case 9:S.pzaSoundManager.playBgm(S.pzaBGMName.CHAPTER_4);break;case 10:S.pzaSoundManager.playBgm(S.pzaBGMName.CHAPTER_5)}},a.prototype.normalStartGameCall=function(a,t,e){var o=this;void 0===e&&(e=!0);var r=null;1!=a||3!=t&&4!=t||n.pzaEffectManager.createShowGrassEffect(2,null,!0),(this.gameMode==i.pzaGameMode.NORMAL||this.gameMode==i.pzaGameMode.NORMAL_WEEKTWO&&7==a&&5==t)&&(r=g.pzaGamePartConfig.getPartDefaultPlant(a,t)),window.pzaMapManager.previewMap(function(){y.pzaGameManager.showBattleUI(p.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){u.pzaCommonMask.hideMask();var s=e&&e.getComponent(c.pzaPlantSelectView);s&&s.init(r,function(){window.pzaplantManager.initFlowerPot(),u.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(null==r?0:1,function(){if(o.gameMode==i.pzaGameMode.SURVIVAL||o.gameMode==i.pzaGameMode.SUR_ENDLESS||1!=a||4!=t){var e=function(){null!=r&&window.pzaMapManager.initCleanCar(),window.pzaMapManager.initMapTomb(a,t,function(){window.pzaMapManager.fogEnter(function(){null==r&&window.pzaMapManager.initCleanCar(),n.pzaEffectManager.createReadyWord(function(){if(o.playBgm(),u.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s&&s.initPlant(),i.pzaGameState.gamePause=!1,E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_RESUME,null),i.pzaGameState.gameMode==i.pzaGameMode.SURVIVAL&&1==i.pzaGameState.curPart)C.pzaTipManager.showGameTip("\u4f60\u80fd\u575a\u6301\u5230\u7b2c5\u6ce2\u653b\u51fb\u5417\uff1f");else if(i.pzaGameState.gameMode==i.pzaGameMode.SUR_ENDLESS&&1==i.pzaGameState.curPart){var a="\u4f60\u80fd\u575a\u6301\u5230\u7b2c\u51e0\u6ce2\u653b\u51fb\u5462\uff1f",t=v.pzaLocalData.data.survivalFlagCount[i.pzaGameState.curChapter-1];if(null!=t&&t>0){a+="\n\u5386\u53f2\u6700\u9ad8\u65d7\u5e1c\uff1a"+t;var e=b.pzaRankMgr.endlessRank[i.pzaGameState.curChapter-1];null!=e&&e>0&&(a+=" \u5168\u670d\u6392\u540d\uff1a"+e)}C.pzaTipManager.showGameTip(a)}})})})},c=h.pzaChannel.instance().getChannel();("wx"!==c.channel||null!=c.ctrl&&"1"===c.ctrl.p1)&&("ks"!==c.channel||null!=c.ctrl&&"1"===c.ctrl.p1)&&("tt"!==c.channel||null!=c.ctrl&&"1"===c.ctrl.p1)&&("my"!==c.channel||null!=c.ctrl&&"1"===c.ctrl.p1)&&(o.gameMode==i.pzaGameMode.SURVIVAL||o.gameMode==i.pzaGameMode.SUR_ENDLESS||t%5!=0&&(a>1||1==a&&t>=6))?D.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.DAVE_TREASURE_VIEW,function(a){var t=a&&a.getComponent(l.pzaDaveTreasureView);t&&t.init(e)}):e()}else n.pzaEffectManager.createShowGrassEffect(3,function(){window.pzaMapManager.initCleanCar(),n.pzaEffectManager.createReadyWord(function(){u.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s&&s.initPlant(),i.pzaGameState.gamePause=!1,E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_RESUME,null)})})})})})},e)},a.prototype.gameRestart=function(){D.pzaUIManager.removeBoardUI(),i.pzaGameState.midOut=!1,y.pzaGameManager.removeBattleUI(),i.pzaGameState.gameMode!==i.pzaGameMode.BANG_JAR&&i.pzaGameState.gameMode!==i.pzaGameMode.VASE&&i.pzaGameState.gameMode!==i.pzaGameMode.VASE_ENDLESS&&i.pzaGameState.gameMode!==i.pzaGameMode.CREATIVE_VASE||(i.pzaGameState.isGameEnd=!1,i.pzaGameState.isMenuShow=!1),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),this.loadAndStart(i.pzaGameState.curChapter,i.pzaGameState.curPart),i.pzaGameState.isZjMode()&&M.pzaUtil.changeGameSpeed(1),i.pzaGameState.hadRevived=!1,i.pzaGameState.gameMode!==i.pzaGameMode.VASE&&i.pzaGameState.gameMode!==i.pzaGameMode.VASE_ENDLESS&&i.pzaGameState.gameMode!==i.pzaGameMode.CREATIVE_VASE||(i.pzaGameState.hadRevived=!0)},a.prototype.gameRecover=function(a,t){var e=this;D.pzaUIManager.removeBoardUI(),i.pzaGameState.midOut=!1;var o=0,n=0;if(i.pzaGameState.isCreativeVaseMode()||i.pzaGameState.isCreativeTrad()||i.pzaGameState.isZjMode()){var r=y.pzaGameManager.getGame(i.pzaGameMode.ZaJiao,A.pzaGameZJ).rankCount,l=B.pzaResMgr.instance().getConf("a24").length;B.pzaResMgr.instance().getConf("a25").length,i.pzaGameState.isZjMode()?n=i.pzaGameState.curPart:i.pzaGameState.isCreativeVaseMode()?n=i.pzaGameState.curPart+r:i.pzaGameState.isCreativeTrad()&&(n=i.pzaGameState.curPart+r+l),o=v.pzaLocalData.data.creativeItemState[n]<3?0:v.pzaLocalData.data.creativeItemState[n]%2==1?2:1}D.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.WARNING_VIEW,function(r){var p=r&&r.getComponent(d.pzaWarningView);p&&p.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){i.pzaGameState.gamePause=!1,E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_RESUME,null),M.pzaUtil.changeGameSpeed(i.pzaGameState.gameSpeed),e.playBgm(),S.pzaSoundManager.clearAllLoopAudio(),window.pzazombieManager.getZombieMapData()>0&&S.pzaSoundManager.playLoopAudio("jack_enter",!0),4!=a&&9!=a||10!=t||S.pzaSoundManager.playLoopAudio("rain",!0),5!=a&&10!=a||10!=t||S.pzaSoundManager.playBgm(S.pzaBGMName.ZOMBIEBOSS_BGM)},function(){var r=function(){y.pzaGameManager.removeBattleUI(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),e.firstStart(a,t,!0),(i.pzaGameState.isCreativeVaseMode()||i.pzaGameState.isCreativeTrad()||i.pzaGameState.isZjMode())&&(v.pzaLocalData.data.creativeItemState[n]++,v.pzaLocalData.addDirty("creativeItemState")),v.pzaLocalData.isWeekTwo&&(i.pzaGameState.weekTwoInitPlants=[])},p=function(){i.pzaGameState.gamePause=!1,E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_RESUME,null),M.pzaUtil.changeGameSpeed(i.pzaGameState.gameSpeed),e.playBgm(),S.pzaSoundManager.clearAllLoopAudio(),window.pzazombieManager.getZombieMapData()>0&&S.pzaSoundManager.playLoopAudio("jack_enter",!0),4!=a&&9!=a||10!=t||S.pzaSoundManager.playLoopAudio("rain",!0)};1==o?h.pzaChannel.instance().showVideo({sucCall:r,failCall:function(){p()},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):2==o?"ks"==h.pzaChannel.instance().channel||"tt"==h.pzaChannel.instance().channel||"my"==h.pzaChannel.instance().channel?h.pzaChannel.instance().showVideo({sucCall:r,failCall:function(){p()},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):h.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"27"},function(){r()},function(){p()}):r()},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,o)})},a.prototype.guide=function(){},a.prototype.showPassUiNoStar=function(){D.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.PART_SELECT_VIEW,function(){D.pzaUIManager.baseShowBoardUI(p.pzaResourceUrl.HOME_SELECT_VIEW,null)})},a.prototype.winDrop=function(){return"my"===h.pzaChannel.instance().channel&&h.pzaChannel.instance().getChannel().actSubmit(),o.pzaDropType.COIN_PACKAGE},a.prototype.partWin=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null),M.pzaUtil.changeGameSpeed(1),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_PAUSE,null),i.pzaGameState.gamePause=!0,m.default.eventReport(i.pzaGameState.curChapter+"-"+i.pzaGameState.curPart+"\u6210\u529f");var o=0;v.pzaLocalData.hasUseProp&&(o=1);var n=Date.now()-v.pzaLocalData.gameStartTimeStamp;n=Math.ceil(n/1e3),P.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt(i.pzaGameState.curChapter+""+i.pzaGameState.curPart)},{name:"is_Win",value:1},{name:"Use",value:o},{name:"time",value:n}),v.pzaLocalData.hasUseProp=!1;var r=function(){var a=0;e.skipPartStar()||(a=z.pzaGameConfig.getPartStar(i.pzaGameState.curChapter,i.pzaGameState.curPart)),a<=0?(E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_OVER,null),y.pzaGameManager.removeBattleUI(),e.showPassUiNoStar()):D.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.GAME_WIN_VIEW,null)};null!=i.pzaGameState.achieveArr&&i.pzaGameState.achieveArr.length>0?D.pzaUIManager.baseShowPopUI(p.pzaResourceUrl.GET_ACHIEVE_VIEW,function(a){var t=a&&a.getComponent(s.pzaGetAchieveView);t&&t.init(i.pzaGameState.achieveArr,r)}):r()},a.prototype.partFail=function(){S.pzaSoundManager.playAudio("losemusic"),S.pzaSoundManager.stopBgm(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_PAUSE,null),i.pzaGameState.gamePause=!0,window.pzaMapManager.closeBattleUI(),window.pzaMapManager.openDoor(),y.pzaGameManager.removeBattleUI(),v.pzaLocalData.data.autoPickLeft=i.pzaGameState.autoPickLeft,v.pzaLocalData.addDirty("autoPickLeft")},a.prototype.nextPart=function(a,t){void 0===a&&(a=!1),void 0===t&&(t=null)},a.prototype.checkAchieve=function(){},a}();e.pzaGameBase=O,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaDaveTreasureView":"pzaDaveTreasureView","../View/Battle/pzaGetAchieveView":"pzaGetAchieveView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaCollisionManager":"pzaCollisionManager","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaGameZJ":"pzaGameZJ","./pzaLocalData":"pzaLocalData","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameBelt:[function(a,t,e){"use strict";cc._RF.push(t,"40c26ZTwkxDsaPtR7venpN4","pzaGameBelt");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameBelt=void 0;var i=a("../Battle/pzaGameState"),r=a("./pzaBeltConfig"),p=a("./pzaGameNormal"),l=a("./pzaSoundManager"),s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=i.pzaGameMode.BELT,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u4f20\u9001\u5e26\u6a21\u5f0f-"},t.prototype.isAutoCreateSun=function(){return!1},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1},t.prototype.playBgm=function(){var t=i.pzaGameState.curChapter,e=i.pzaGameState.curPart;if((4==t||9==t)&&10==e)return l.pzaSoundManager.playBgm(l.pzaBGMName.BELT_BGM),void l.pzaSoundManager.playLoopAudio("rain",!0);10!=e||1!=t&&2!=t&&3!=t?a.prototype.playBgm.call(this):l.pzaSoundManager.playBgm(l.pzaBGMName.BELT_BGM)},t.prototype.getPlantArr=function(a,t){return r.pzaBeltConfig.getBeltPlants(a,t)},t.prototype.showBattlePropButtons=function(t){5==i.pzaGameState.curPart||10==i.pzaGameState.curPart?(t.freeSunNode.active=!1,t.cherryBombNode.active=!1,t.autoPickNode.active=!0,t.clearCDNode.active=!1):a.prototype.showBattlePropButtons.call(this,t)},t}(p.pzaGameNormal);e.pzaGameBelt=s,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","./pzaBeltConfig":"pzaBeltConfig","./pzaGameNormal":"pzaGameNormal","./pzaSoundManager":"pzaSoundManager"}],pzaGameBoss:[function(a,t,e){"use strict";cc._RF.push(t,"a3942RVNM9J56CNGXZCTBw9","pzaGameBoss");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameBoss=void 0;var i=a("../Battle/pzaGameState"),r=a("../utils/pzaChannel"),p=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=i.pzaGameMode.ZOM_BOSS,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u50f5\u738b\u6a21\u5f0f-"},t.prototype.isAutoCreateSun=function(){return!1},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1},t.prototype.refreshNextWave=function(){},t.prototype.isLastWave=function(){return!1},t.prototype.checkAllZombieDeath=function(){return!1},t.prototype.showBattlePropButtons=function(t){5==i.pzaGameState.curPart||10==i.pzaGameState.curPart?(t.freeSunNode.active=!1,t.cherryBombNode.active=!1,r.pzaChannel.isConfRemote&&(t.cherryBombNode.active=!0),t.autoPickNode.active=!0,t.clearCDNode.active=!1):a.prototype.showBattlePropButtons.call(this,t)},t}(a("./pzaGameNormal").pzaGameNormal);e.pzaGameBoss=p,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../utils/pzaChannel":"pzaChannel","./pzaGameNormal":"pzaGameNormal"}],pzaGameClubView:[function(a,t,e){"use strict";cc._RF.push(t,"cb141MHFNZKjb7n+VRSGur9","pzaGameClubView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameClubView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaRewardManager"),c=a("../Common/pzaUtil"),u=a("../utils/pzaChannel"),d=a("./pzaCommonMask"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.curSelectPage=null,t.curPageLabel=null,t.clubPage=null,t.officialPage=null,t.recBtn=[],t.recBtnSprite=[],t.recBtnTxt=[],t.taskProBar=[],t.taskProValue=[],t.clubEnterBtn=null,t.tip1=null,t.tip2=null,t.gameClubBoard=null,t.clubLimitBoard=null,t.curPage=0,t.gameClubBtn=null,t}return n(t,a),t.prototype.onLoad=function(){this.node.getComponent(cc.Widget).updateAlignment(),this.tip1.active=!1},t.prototype.onDisable=function(){this.hideWxClub()},t.prototype.init=function(a,t,e){this.curPage=0,this.refreshCurPage(),this.refrshGameClub(a,t,e)},t.prototype.clickGameClub=function(){0!=this.curPage&&(this.curPage=0,this.refreshCurPage())},t.prototype.clickOfficial=function(){1!=this.curPage&&(this.curPage=1,this.refreshCurPage())},t.prototype.refreshCurPage=function(){this.curPageLabel.string=0==this.curPage?"\u6e38\u620f\u5708":"\u516c\u4f17\u53f7",this.curSelectPage.y=0==this.curPage?191:109,this.clubPage.active=0==this.curPage,this.officialPage.active=1==this.curPage,0==this.curPage?this.showWxClub():this.hideWxClub()},t.prototype.refrshGameClub=function(a,t,e){this.tip2.active=0==a&&0==t&&0==e;for(var o=[1,1,3],n=[a,e,t],i=0;i<3;i++)1==l.pzaLocalData.data.gameClubTask[i]?(this.recBtn[i].interactable=!1,c.pzaUtil.switchGraySprite(this.recBtnSprite[i],!0),this.recBtnTxt[i].string="\u5df2\u9886\u53d6",this.taskProBar[i].fillRange=1,this.taskProValue[i].string=Math.max(o[i],n[i])+"/"+o[i],l.pzaLocalData.data.gameClubState[i]=2):n[i]>=o[i]?(this.recBtn[i].interactable=!0,c.pzaUtil.switchGraySprite(this.recBtnSprite[i],!1),this.recBtnTxt[i].string="\u9886\u53d6",this.taskProBar[i].fillRange=1,this.taskProValue[i].string=n[i]+"/"+o[i],l.pzaLocalData.data.gameClubState[i]=1):(this.recBtn[i].interactable=!1,c.pzaUtil.switchGraySprite(this.recBtnSprite[i],!0),this.recBtnTxt[i].string="\u672a\u5b8c\u6210",this.taskProBar[i].fillRange=n[i]/o[i],this.taskProValue[i].string=n[i]+"/"+o[i],l.pzaLocalData.data.gameClubState[i]=0);l.pzaLocalData.addDirty("gameClubState")},t.prototype.clickRecTask1=function(){this.recBtn[0].interactable=!1,c.pzaUtil.switchGraySprite(this.recBtnSprite[0],!0),this.recBtnTxt[0].string="\u5df2\u9886\u53d6",l.pzaLocalData.data.gameClubTask[0]=1,l.pzaLocalData.data.gameClubState[0]=2,l.pzaLocalData.addDirty("gameClubTask","gameClubState");var a=new p.pzaRewardPropData(p.pzaGamePropEnum.PROP_COIN,500);s.pzaRewardManager.recieveRewards([a])},t.prototype.clickRecTask2=function(){this.recBtn[1].interactable=!1,c.pzaUtil.switchGraySprite(this.recBtnSprite[1],!0),this.recBtnTxt[1].string="\u5df2\u9886\u53d6",l.pzaLocalData.data.gameClubTask[1]=1,l.pzaLocalData.data.gameClubState[2]=2,l.pzaLocalData.addDirty("gameClubTask","gameClubState");var a=new p.pzaRewardPropData(p.pzaGamePropEnum.PROP_COIN,200);s.pzaRewardManager.recieveRewards([a])},t.prototype.clickRecTask3=function(){this.recBtn[2].interactable=!1,c.pzaUtil.switchGraySprite(this.recBtnSprite[2],!0),this.recBtnTxt[2].string="\u5df2\u9886\u53d6",l.pzaLocalData.data.gameClubTask[2]=1,l.pzaLocalData.data.gameClubState[2]=2,l.pzaLocalData.addDirty("gameClubTask","gameClubState");var a=new p.pzaRewardPropData(p.pzaGamePropEnum.PROP_COIN,200);s.pzaRewardManager.recieveRewards([a])},t.prototype.createWxClub=function(){var a=this;console.log("create wx club");var t=u.pzaChannel.instance().getChannel();if("wx"==t.channel){var e=this.clubEnterBtn.width,o=this.clubEnterBtn.height,n=this.clubEnterBtn.convertToWorldSpaceAR(cc.v2(0,0)),i=n.x-.5*e,r=720-n.y-.5*o,p=t;this.gameClubBtn=p.createGameClubButton(i,r,e,o),this.gameClubBtn&&this.gameClubBtn.show(),this.gameClubBtn&&this.gameClubBtn.onTap(function(){p.registerOnshow(a.wxOnShow.bind(a))})}},t.prototype.wxOnShow=function(){var a=this;console.log("wxonshow"),d.pzaCommonMask.showMask();var t=u.pzaChannel.instance().getChannel();"wx"==t.channel&&t.getGameClubData(function(e){null!=e?u.pzaChannel.decodeWxData(t.getPara("appId"),e.encryptedData,e.iv,e.authCode,e.signature,function(t){d.pzaCommonMask.hideMask();var e=0,o=0,n=0;null!=t&&(t.forEach(function(a){null!=a&&null!=a.dataType&&(1==a.dataType.type?e=0==a.value?0:1:4==a.dataType.type?o=a.value:5==a.dataType.type&&(n=a.value))}),a.refrshGameClub(e,o,n))}):d.pzaCommonMask.hideMask()})},t.prototype.showWxClub=function(){null!=this.gameClubBtn?this.gameClubBtn.show():this.createWxClub()},t.prototype.hideWxClub=function(){null!=this.gameClubBtn&&this.gameClubBtn.hide()},t.prototype.clickHelp=function(){this.gameClubBoard.active=!1,this.clubLimitBoard.active=!0,this.hideWxClub()},t.prototype.closeLimitBoard=function(){this.gameClubBoard.active=!0,this.clubLimitBoard.active=!1,this.showWxClub()},t.prototype.clickClose=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([f({displayName:"\u5f53\u524d\u9009\u4e2d\u9875\u9762\u663e\u793a",type:cc.Node})],t.prototype,"curSelectPage",void 0),i([f({displayName:"\u5f53\u524d\u9009\u4e2d\u9875\u9762\u540d\u79f0",type:cc.Label})],t.prototype,"curPageLabel",void 0),i([f({displayName:"\u6e38\u620f\u5708\u9875\u9762",type:cc.Node})],t.prototype,"clubPage",void 0),i([f({displayName:"\u516c\u4f17\u53f7\u9875\u9762",type:cc.Node})],t.prototype,"officialPage",void 0),i([f({displayName:"\u5956\u52b1\u9886\u53d6\u6309\u94ae",type:[cc.Button]})],t.prototype,"recBtn",void 0),i([f({displayName:"\u5956\u52b1\u9886\u53d6\u6309\u94ae\u56fe",type:[cc.Sprite]})],t.prototype,"recBtnSprite",void 0),i([f({displayName:"\u5956\u52b1\u9886\u53d6\u6309\u94ae\u6587\u5b57",type:[cc.Label]})],t.prototype,"recBtnTxt",void 0),i([f({displayName:"\u4efb\u52a1\u8fdb\u5ea6\u6761",type:[cc.Sprite]})],t.prototype,"taskProBar",void 0),i([f({displayName:"\u4efb\u52a1\u8fdb\u5ea6\u6570\u503c",type:[cc.Label]})],t.prototype,"taskProValue",void 0),i([f({displayName:"\u6e38\u620f\u5708\u6309\u94ae",type:cc.Node})],t.prototype,"clubEnterBtn",void 0),i([f({displayName:"\u6c14\u6ce1\u63d0\u793a1",type:cc.Node})],t.prototype,"tip1",void 0),i([f({displayName:"\u6c14\u6ce1\u63d0\u793a2",type:cc.Node})],t.prototype,"tip2",void 0),i([f({displayName:"\u6e38\u620f\u5708\u9762\u677f",type:cc.Node})],t.prototype,"gameClubBoard",void 0),i([f({displayName:"\u6e38\u620f\u5708\u6743\u9650\u9762\u677f",type:cc.Node})],t.prototype,"clubLimitBoard",void 0),i([m],t)}(cc.Component);e.pzaGameClubView=z,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaUtil":"pzaUtil","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask"}],pzaGameCommonPool:[function(a,t,e){"use strict";cc._RF.push(t,"9a66aQkbvNLt4aUJDAQRYyG","pzaGameCommonPool"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameCommonPool=void 0;var o=function(){function a(){}return a.addUrlToPrefab=function(a,t){a&&t&&this.urlToPrefab.set(a,t)},a.getPrefabList=function(a){var t=this.currentPool.get(a);return t||(t=[],this.currentPool.set(a,t)),t},a.requestInstant2=function(a){var t=this.getPrefabList(a._uuid).pop();return t&&t.isValid?t.active=!0:t=cc.instantiate(a),t},a.requestInstant=function(a,t){return void 0===t&&(t=!1),cc.instantiate(a)},a.returnInstant2=function(t,e){t&&t.isValid&&(t.active=!1,t.removeFromParent(),e?this.addToCurrentPool(t,e):a.returnInstant(t))},a.returnInstant=function(a){a&&a.isValid&&a.destroy()},a.addToCurrentPool=function(a,t){if(a&&t){var e=this.currentPool.get(t);e?-1===e.indexOf(a)&&e.push(a):this.currentPool.set(t,[a])}},a.clear=function(){a.currentPool.forEach(function(a){var t=a.length;if(!(t<=20))for(var e=20;e<t;e++){var o=a.pop();o&&o.isValid&&o.destroy()}})},a.currentPool=new Map,a.urlToPrefab=new Map,a.urlToSpriteFame=new Map,a.urlToJson=new Map,a}();e.pzaGameCommonPool=o,cc._RF.pop()},{}],pzaGameConfig:[function(a,t,e){"use strict";cc._RF.push(t,"324edpOc/VIO7o/KS+DqQdc","pzaGameConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameConfig=e.pzaMapConifg=e.pzaZjZombieBookConfig=e.pzaZombieBookConfig=e.pzaZombieConfigData=e.pzaZjPlantBookConfig=e.pzaPlantBookConfig=e.pzaPlantConfigData=void 0;var o=a("../Battle/Data/pzaDropType"),n=a("../Battle/Data/pzaJarData"),i=a("../Battle/Data/pzaPlantEnum"),r=a("../Battle/Data/pzaZombieEnum"),p=a("../Battle/pzaGameState"),l=a("./pzaLocalData"),s=a("./pzaUtil"),c=function(){function a(a,t,e,o,n,r,p,l,s,c){void 0===c&&(c=!1),this.plantType=null,this.name=null,this.env=i.pzaPlantEnvEnum.NORMAL,this.hp=0,this.atk=0,this.atkInterval=0,this.price=0,this.createCD=0,this.initCD=0,this.rareLevel=0,this.isNight=!1,this.plantType=a,this.name=t,this.env=e,this.hp=o,this.atk=n,this.atkInterval=r,this.price=p,this.createCD=l,this.initCD=s,this.isNight=c}return a.isEnvPlant=function(a){return a==i.pzaPlantEnum.LILY_PAD||a==i.pzaPlantEnum.FLOWER_POT||a==i.pzaPlantEnum.SunPot||a==i.pzaPlantEnum.CATLITTERPOT},a.isPotPlant=function(a){return a==i.pzaPlantEnum.FLOWER_POT||a==i.pzaPlantEnum.SunPot||a==i.pzaPlantEnum.CATLITTERPOT},a.isPumPkin=function(a){return a==i.pzaPlantEnum.PUMPKIN||a==i.pzaPlantEnum.PumpkinPurple||a==i.pzaPlantEnum.PumpkinPurpleFire},a}();e.pzaPlantConfigData=c;var u=function(a,t,e,o,n,i,r){this.plantType=null,this.desc=null,this.prop=null,this.special=null,this.bg1=null,this.bg2=null,this.cd=null,this.plantType=a,this.desc=t,this.prop=e,this.special=o,this.bg1=n,this.bg2=i,this.cd=r};e.pzaPlantBookConfig=u;var d=function(a,t,e,o,n,i,r,p,l,s,c){this.plantType=null,this.prop=null,this.tenacty=null,this.power=null,this.area=null,this.special=null,this.deathWord=null,this.desc=null,this.cost=null,this.speed=null,this.name=null,this.plantType=a,this.prop=t,this.tenacty=e,this.power=o,this.area=n,this.special=i,this.deathWord=r,this.desc=p,this.cost=l,this.speed=s,this.name=c};e.pzaZjPlantBookConfig=d;var h=function(){function a(a,t,e,o,n,i,r,p,l,s,c,u){this.zombieType=null,this.name=null,this.hp=0,this.equipHp=0,this.equipType=0,this.toolType=0,this.atk=0,this.atkInterval=0,this.minSpeed=0,this.maxSpeed=0,this.specialMinSpeed=0,this.specialMaxSpeed=0,this.refreshLevel=1,this.refrshWeight=0,this.refrshMinWave=1,this.unlockChapter=1,this.unlockPart=1,this.price=0,this.zombieType=a,this.name=t,this.hp=e,this.equipHp=o,this.atk=r,this.atkInterval=p,this.equipType=n,this.toolType=i,this.refreshLevel=s,this.refrshWeight=c,this.refrshMinWave=u,this.minSpeed=this.maxSpeed=l,this.specialMinSpeed=this.specialMaxSpeed=l}return Object.defineProperty(a.prototype,"speed",{get:function(){return s.pzaUtil.getRandomFloatNum(this.minSpeed,this.maxSpeed)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"specialSpeed",{get:function(){return s.pzaUtil.getRandomFloatNum(this.specialMinSpeed,this.specialMaxSpeed)},enumerable:!1,configurable:!0}),a}();e.pzaZombieConfigData=h;var m=function(a,t,e,o,n,i){void 0===i&&(i=null),this.zombieType=null,this.desc=null,this.prop=null,this.special=!1,this.bg=null,this.bg2=null,this.zombieType=a,this.desc=t,this.prop=e,this.special=o,this.bg=n,this.bg2=i};e.pzaZombieBookConfig=m;var f=function(a,t,e,o,n,i,r,p,l){void 0===l&&(l=null),this.zombieType=null,this.name=null,this.desc=null,this.tenacty=null,this.wear=null,this.dmage=null,this.speed=null,this.special=null,this.bg=null,this.zombieType=a,this.name=t,this.desc=e,this.tenacty=o,this.wear=n,this.dmage=i,this.speed=r,this.special=p,this.bg=l};e.pzaZjZombieBookConfig=f;var z=function(){function a(a,t,e,o,n,i,r,p,l,s,c){this.xInterval=[97,97,94,97,97,94,97,97,117],this.xPos=[0,97,194,288,385,482,576,673,770],this.yInterval=[125,102,124,115,148],this.yPos=[0,125,227,351,466],this.mapOriPos=cc.v2(-380,-326),this.blockWidth=97,this.mapHeight=614,this.mapWidth=887,this.mapRow=5,this.skewAngel=12,this.skewColumn=5,this.mapHeight=a,this.mapWidth=t,this.blockWidth=e,this.mapOriPos=o,this.xPos=n,this.xInterval=i,this.yPos=r,this.yInterval=p,this.mapRow=l,this.skewAngel=s,this.skewColumn=c}return a.prototype.getMapSkewRadion=function(){return this.skewAngel/180*Math.PI},a.prototype.getMapSkewColumn=function(){return this.skewColumn},a.prototype.getXInterval=function(a){return this.xInterval[a]},a.prototype.getXPos=function(a){return this.xPos[a]},a.prototype.getYInterval=function(a){return this.yInterval[a]},a.prototype.getYPos=function(a){return this.yPos[a]},a.prototype.getBlockAllPos=function(a,t,e){var o=this.skewAngel/180*Math.PI;if(0==e){var n=Math.min(this.skewColumn,a),i=Math.tan(o)*this.xPos[n];return cc.v2(this.xPos[a],this.yPos[t]+i)}return 1==e?(n=Math.min(this.skewColumn,a+1),i=Math.tan(o)*this.xPos[n],cc.v2(this.xPos[a+1],this.yPos[t]+i)):2==e?(n=Math.min(this.skewColumn,a+1),i=Math.tan(o)*this.xPos[n],cc.v2(this.xPos[a+1],this.yPos[t+1]+i)):3==e?(n=Math.min(this.skewColumn,a),i=Math.tan(o)*this.xPos[n],cc.v2(this.xPos[a],this.yPos[t+1]+i)):void 0},a.prototype.getMapOriPos=function(){return this.mapOriPos},a.prototype.getMapWidth=function(){return this.mapWidth},a.prototype.getBlockWidth=function(){return this.blockWidth},a.prototype.getMapColumn=function(){return 9},a.prototype.getMapRow=function(){return this.mapRow},a.prototype.getMapXIndex=function(a,t){if(void 0===t&&(t=null),null==a&&null==t)return-1;var e;if((e=null!=t?t.x:a.x-this.getMapOriPos().x)<0)return-1;for(var o=0,n=this.getMapColumn(),i=0;i<n;i++)if((o+=this.getXInterval(i))>e)return i;return-1},a.prototype.getMapYIndex=function(a,t){if(void 0===t&&(t=null),null==a&&null==t)return-1;var e=-1,o=-1;if(null!=t)e=t.x,o=t.y;else{var n=this.getMapOriPos();e=a.x-n.x,o=a.y-n.y}var i=this.getMapSkewRadion(),r=this.getMapSkewColumn();if(e=Math.min(e,this.getXPos(r)),(o-=Math.tan(i)*e)<0)return-1;for(var p=this.getMapRow(),l=0,s=0;s<p;s++)if((l+=this.getYInterval(s))>o)return s;return-1},a.prototype.getBlockLogicPos=function(a,t,e,o){void 0===e&&(e=0);var n=this.xPos[a]+e,i=this.yPos[t]+o,r=this.getMapSkewRadion(),p=this.skewColumn,l=Math.min(n,this.xPos[p]),s=Math.tan(r)*l;return cc.v2(n+this.mapOriPos.x,i+s+this.mapOriPos.y)},a.prototype.fixMapYOffset=function(a,t,e){if(null!=t){var o=this.yPos[a]+e;if(this.skewAngel<=0||this.skewColumn<=0)t.y=o+this.mapOriPos.y;else{var n=this.skewColumn,i=this.xPos[n],r=t.x-this.mapOriPos.x;r>=i&&(r=i);var p=this.getMapSkewRadion(),l=r*Math.tan(p);t.y=o+l+this.mapOriPos.y}}},a}();e.pzaMapConifg=z;var y=function(){function a(){}return a.initPlantConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var e=1==a.hy,o=new c(parseInt(a.id),a.name,parseInt(a.lx),parseInt(a.hp),parseInt(a.atk),0,parseInt(a.gold),0,parseInt(a.openingcd),e);null!=a.cd&&(o.atkInterval=parseFloat(a.cd)),null!=a.plantcd&&(o.createCD=parseFloat(a.plantcd)),null!=a.senior&&(o.rareLevel=parseInt(a.senior)),t.PlantConfigMap.set(a.id,o)}})},a.initZombieConfig=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var e,o=new h(parseInt(a.id),a.name,parseInt(a.hp),parseInt(a.armorhp),parseInt(a.armor),parseInt(a.tool),parseInt(a.atk),parseFloat(a.cd),0,parseInt(a.level),parseInt(a.weight),parseInt(a.mini));if(null!=a.speed)if((e=a.speed.split(",")).length>1){var n=parseFloat(e[0]),i=parseFloat(e[1]);o.minSpeed=Math.min(n,i),o.maxSpeed=Math.max(n,i)}else o.minSpeed=o.maxSpeed=parseFloat(e[0]);if(null!=a.bspeed&&((e=a.bspeed.split(",")).length>1?(n=parseFloat(e[0]),i=parseFloat(e[1]),o.specialMinSpeed=Math.min(n,i),o.specialMaxSpeed=Math.max(n,i)):o.specialMinSpeed=o.specialMaxSpeed=parseFloat(e[0])),null!=a.unlock){var r=a.unlock.split("-");o.unlockChapter=parseFloat(r[0])||1,o.unlockPart=parseFloat(r[1])||1}null!=a.gold&&(o.price=parseInt(a.gold)),t.ZombieConfigMap.set(a.id,o)}})},a.getPartDrop=function(a,t){if(4==t){if(1==a)return o.pzaDropType.SHOVEL;if(2==a)return o.pzaDropType.HAND_BOOK;if(3==a)return o.pzaDropType.BACONIC;if(4==a)return o.pzaDropType.TACO;if(5==a)return o.pzaDropType.SPRINKLER}if(9==t||5==a&&10==t||10==a&&10==t)return o.pzaDropType.CG_PAPER;var e=a+"-"+t;return this.newPlantDropMap.has(e)?o.pzaDropType.PLANT_CARD:a>5?o.pzaDropType.COIN_PACKAGE:null},a.getPartStar=function(a,t){return this.AllPartStar[a-1][t-1]},a.getAllPartStar=function(a,t){void 0===a&&(a=!1),void 0===t&&(t=!1);var e=0,o=0,n=this.AllPartStar.length;a&&(e=5),t&&(e=0,n=5);for(var i=e;i<n;i++)for(var r=this.AllPartStar[i],p=0;p<r.length;p++)o+=r[p];return o},a.isWaterZombie=function(a){return this.waterWayZombies.has(a)},a.isFlyZombie=function(a){return a==r.pzaZombieEnum.BALLOON_ZOMBIE},a.isAdvancePlant=function(a){return!(a<=i.pzaPlantEnum.MELON_PULT||a>=i.pzaPlantEnum.IMITATER)},a.getPlantConfig=function(a){return this.PlantConfigMap.get(a)},a.getZombieConfig=function(a){return this.ZombieConfigMap.get(a)},a.getZombieSpecialSpeed=function(a){var t=this.ZombieConfigMap.get(a);return null==t?0:t.specialSpeed},a.getZombieSpeed=function(a){var t=this.ZombieConfigMap.get(a);return null==t?0:t.speed},a.getRandomSunPos=function(){var a=s.pzaUtil.getRandomFloatNum(this.autoSunMinX,this.autoSunMaxX);return cc.v2(a,this.autoSunY)},a.getRandomSunDis=function(){return s.pzaUtil.getRandomFloatNum(this.autoSunMaxDis/2,this.autoSunMaxDis)},a.getZombieLevel=function(a){var t=this.ZombieConfigMap.get(a);return null==t?1:t.refreshLevel},a.get45JarData=function(a){var t=[],e=6,o=0,i=null,r=null;if(1==a){e=6,i=[1,1,1,1,5],r=[];for(var l=0;l<5;l++)r.push(1);for(l=0;l<5;l++)r.push(18);o=0}else if(2==a){for(e=5,i=[1,1,1,1,1,5,8],r=[],l=0;l<4;l++)r.push(1);for(l=0;l<4;l++)r.push(18);for(l=0;l<5;l++)r.push(6);o=2}else if(3==a){for(e=4,i=[1,1,1,1,1,1,5,5,9,18],r=[],l=0;l<5;l++)r.push(1);for(l=0;l<5;l++)r.push(6);for(l=0;l<5;l++)9==p.pzaGameState.curChapter&&5==p.pzaGameState.curPart?r.push(13):r.push(18);o=3}r.sort(function(){return Math.random()-.5});for(var c=e;c<9;c++)for(var u=0;u<5;u++){var d=new n.pzaJarData(c,u);t.push(d)}var h=s.pzaUtil.getRandomArrayValue(t,i.length);for(l=0;l<i.length;l++){var m=h[l];null!=m&&(m.zombieType=i[l])}var f=[];if(t.forEach(function(a){h.indexOf(a)>=0||(a.plantType=r.shift(),f.push(a))}),o>0){var z=s.pzaUtil.getRandomArrayValue(f,o);for(l=0;l<o;l++){var y=z[l];null!=y&&(y.jarType=n.pzaJarType.GREEN_JAR)}}return t},a.canChoosePlants=function(a){var t=this.NO_RECOMMEND_PLANT.get(a),e=l.pzaLocalData.data.ownPlants;if(t){for(var o=Array.from(t),n=i.pzaPlantEnum.GATLING_PEA;n<=i.pzaPlantEnum.IMITATER;n++)o.push(n);o.push(51),o.push(36),e=e.filter(function(a){return!o.includes(a)})}return i.pzaPlantEnum.COB_CANNON,e},a.isNoRecommendPlant=function(a,t){var e=this.NO_RECOMMEND_PLANT.get(t);return null!=e&&e.has(a)},a.isNoRecommendPlantInMini=function(a,t){var e=this.MINI_NO_RECOMMEND_PLANT.get(t);return null!=e&&e.has(a)},a.chapterMapConfig=new Map([[1,new z(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[2,new z(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[3,new z(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[0,100,215,305,415,515,610],[100,115,90,110,100,105],6,0,0)],[4,new z(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[0,100,215,305,415,515,610],[100,115,90,110,100,105],6,0,0)],[5,new z(619,1020,120,cc.v2(-425,-378),[0,115,230,345,460,575,690,800,910,1020],[115,115,115,115,115,115,110,110,110],[0,90,190,293,396,499],[90,100,103,103,103],5,13,5)],[6,new z(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[7,new z(610,1060,120,cc.v2(-450,-326),[0,115,230,350,470,585,700,815,930,1060],[115,115,120,120,115,115,115,115,130],[0,125,227,351,466,610],[125,102,124,115,144],5,0,0)],[8,new z(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[0,100,215,305,415,515,610],[100,115,90,110,100,105],6,0,0)],[9,new z(610,1040,120,cc.v2(-450,-340),[0,115,230,350,470,585,700,815,930,1040],[115,115,120,120,115,115,115,115,110],[0,100,215,305,415,515,610],[100,115,90,110,100,105],6,0,0)],[10,new z(619,1020,120,cc.v2(-425,-378),[0,115,230,345,460,575,690,800,910,1020],[115,115,115,115,115,115,110,110,110],[0,90,190,293,396,499],[90,100,103,103,103],5,13,5)]]),a.sunLiveTime=15,a.autoSunY=280,a.autoSunMaxDis=600,a.autoSunMinX=-450,a.autoSunMaxX=390,a.autoSunSpeed=80,a.bigSunValue=25,a.smallSunValue=15,a.DIAMOND_CHANCE=.005,a.GOLD_CHANCE=.02,a.SILVER_CHANCE=.08,a.PLANT_CHANCE=.004,a.CHOCOLATE_CHANCE=.01,a.miniZombieScale=.55,a.miniZombieHp=.2,a.miniZombieWaveInterval=8,a.PlantConfigMap=new Map,a.ZombieConfigMap=new Map,a.ZombieDescMap=new Map([[r.pzaZombieEnum.ZOMBIE,"\u6700\u666e\u901a\u6700\u5e38\u89c1\u7684\u50f5\u5c38\uff0c\u751f\u547d\u529b\u4f4e\uff0c\u79fb\u52a8\u901f\u5ea6\u6162"],[r.pzaZombieEnum.FLAG_ZOMBIE,"\u9664\u4e86\u62ff\u7740\u65d7\u5b50\uff0c\u901f\u5ea6\u6bd4\u666e\u901a\u50f5\u5c38\u7565\u5feb\uff0c\u65d7\u5b50\u6389\u65f6\u50f5\u5c38\u6b7b\u4ea1"],[r.pzaZombieEnum.CONE_HEAD_ZOMBIE,"\u8def\u969c\u5177\u5907\u66f4\u9ad8\u9632\u5fa1\uff0c\u591a\u79cd\u4e2a\u8c4c\u8c46\u6216\u575a\u679c\u5427\uff01"],[r.pzaZombieEnum.POLEVAULTING_ZOMBIE,"\u5b83\u80fd\u8df3\u8fc7\u4e00\u4e2a\u690d\u7269\uff0c\u591a\u79cd\u4e2a\u8c4c\u8c46\uff0c\u5feb\u901f\u89e3\u51b3\u5b83\uff01"],[r.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,"\u94c1\u6876\u9632\u5fa1\u6781\u9ad8\uff0c\u63d0\u524d\u79cd\u4e2a\u571f\u8c46\u96f7\u79d2\u6740\u5b83\uff01"],[r.pzaZombieEnum.NEWSPAPER_ZOMBIE,"\u5b83\u624b\u91cc\u7684\u62a5\u7eb8\u80fd\u62b5\u6321\u4e00\u5b9a\u4f24\u5bb3\uff0c\u591a\u79cd\u70b9\u5c0f\u8611\u83c7"],[r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,"\u94c1\u95e8\u5177\u5907\u9ad8\u9632\u5fa1\uff0c\u5927\u55b7\u83c7\u7684\u653b\u51fb\u80fd\u7a7f\u900f\u94c1\u95e8"],[r.pzaZombieEnum.FOOTBALL_ZOMBIE,"\u8fd9\u5bb6\u4f19\u8d85\u5389\u5bb3\uff0c\u79cd\u4e2a\u8ff7\u7cca\u83c7\u8ff7\u60d1\u5b83!"],[r.pzaZombieEnum.DANCING_ZOMBIE,"\u4f1a\u53ec\u5524\u4f34\u821e\u50f5\u5c38\uff0c\u7528\u5bd2\u51b0\u83c7\u51bb\u4f4f\u5b83\u4eec\u5427!"],[r.pzaZombieEnum.SNORKEL_ZOMBIE,"\u85cf\u5728\u6c34\u91cc\u65f6\u8c4c\u8c46\u6253\u4e0d\u5230\uff0c\u79cd\u4e2a\u575a\u679c\u8ba9\u5b83\u54ac\u5c31\u80fd\u6253\u5230\u4e86"],[r.pzaZombieEnum.ZOMBONI,"\u80fd\u538b\u6241\u9047\u5230\u7684\u690d\u7269\uff0c\u79cd\u4e2a\u706b\u7206\u8fa3\u6912\uff01"],[r.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,"\u80fd\u8df3\u8fc7\u4e00\u4e2a\u690d\u7269\uff0c\u52a0\u5927\u706b\u529b\u6d88\u706d\u5b83!"],[r.pzaZombieEnum.JACK_ZOMBIE,"\u5c0f\u5fc3\uff0c\u8fd9\u4e2a\u5bb6\u4f19\u4f1a\u81ea\u7206\uff01"],[r.pzaZombieEnum.BALLOON_ZOMBIE,"\u98de\u5728\u5929\u4e0a\uff0c\u79cd\u4e2a\u4ed9\u4eba\u638c\u5c31\u80fd\u6253\u5230\u5b83\uff01"],[r.pzaZombieEnum.DIGGER_ZOMBIE,"\u80fd\u94bb\u5230\u573a\u5730\u540e\u65b9\uff0c\u79cd\u4e2a\u53cc\u5411\u5c04\u624b\u5427\uff01"],[r.pzaZombieEnum.POGO_ZOMBIE,"\u76f4\u63a5\u8df3\u8fc7\u6240\u6709\u690d\u7269\uff0c\u52a0\u5927\u706b\u529b\u89e3\u51b3\u5b83!"],[r.pzaZombieEnum.LADDER_ZOMBIE,"\u68af\u5b50\u80fd\u67b6\u5728\u575a\u679c\u4e0a\uff0c\u7528\u6295\u63b7\u7c7b\u690d\u7269\u80fd\u76f4\u63a5\u6253\u5230\u5b83"],[r.pzaZombieEnum.CATAPULT_ZOMBIE,"\u6295\u51fa\u7684\u7bee\u7403\u80fd\u76f4\u63a5\u4f24\u5bb3\u5e95\u7ebf\u690d\u7269\uff0c\u52a0\u5927\u706b\u529b\u5427\uff01"],[r.pzaZombieEnum.GARGANTUAR,"\u8fd9\u5bb6\u4f19\u5341\u5206\u53d8\u6001\uff0c\u7528\u70b8\u5f39\u5427\uff01\u5c0f\u5fc3\u5b83\u4f1a\u4e22\u51fa\u5c0f\u9b3c\uff01"]]),a.PlantDescMap=new Map([[i.pzaPlantEnum.SUN_FLOWER,"\u4e3a\u4f60\u63d0\u4f9b\u66f4\u591a\u9633\u5149"],[i.pzaPlantEnum.CHERRY_BOMB,"\u70b8\u5149\u4e00\u5b9a\u533a\u57df\u5185\u7684\u5168\u90e8\u50f5\u5c38"],[i.pzaPlantEnum.WALL_NUT,"\u6321\u4f4f\u50f5\u5c38\uff0c\u4fdd\u62a4\u5b83\u80cc\u540e\u7684\u690d\u7269"],[i.pzaPlantEnum.POTATO_MINE,"\u70b8\u98de\u78b0\u5230\u5b83\u7684\u654c\u4eba\uff0c\u4f46\u5b89\u653e\u540e\u9700\u8981\u4e00\u5b9a\u65f6\u95f4\u542f\u52a8"],[i.pzaPlantEnum.SNOW_PEA,"\u5c04\u51fa\u5bd2\u51b0\u8c4c\u8c46\uff0c\u4f24\u5bb3\u654c\u4eba\u7684\u540c\u65f6\u51cf\u6162\u654c\u4eba\u901f\u5ea6"],[i.pzaPlantEnum.CHOMPER,"\u4e00\u53e3\u541e\u4e0b\u4e00\u4e2a\u50f5\u5c38\uff0c\u4f46\u5728\u5480\u56bc\u50f5\u5c38\u7684\u65f6\u5019\u975e\u5e38\u8106\u5f31"],[i.pzaPlantEnum.REPEATER,"\u4e00\u6b21\u53d1\u5c04\u4e24\u9897\u8c4c\u8c46"],[i.pzaPlantEnum.PUFF_SHROOM,"\u5728\u77ed\u8ddd\u79bb\u5185\u5411\u654c\u4eba\u53d1\u5c04\u5b62\u5b50"],[i.pzaPlantEnum.SUN_SHROOM,"\u5f00\u59cb\u65f6\u63d0\u4f9b\u5c11\u91cf\u9633\u5149\uff0c\u4e00\u6bb5\u65f6\u95f4\u540e\u4ea7\u91cf\u5c06\u548c\u5411\u65e5\u8475\u76f8\u540c"],[i.pzaPlantEnum.FUME_SHROOM,"\u55b7\u5c04\u80fd\u7a7f\u8fc7\u94c1\u4e1d\u7f51\u95e8\u7684\u6c14\u6ce1"],[i.pzaPlantEnum.GRAVE_BUSTER,"\u628a\u5b83\u79cd\u690d\u5728\u5893\u7891\u4e0a\uff0c\u5b83\u5c31\u80fd\u54ac\u6389\u5893\u7891"],[i.pzaPlantEnum.HYPNO_SHROOM,"\u8ba9\u4e00\u53ea\u50f5\u5c38\u4e3a\u4f60\u4f5c\u6218"],[i.pzaPlantEnum.SCAREDY_SHROOM,"\u53d1\u5c04\u8fdc\u7a0b\u5b62\u5b50\uff0c\u4f46\u654c\u4eba\u9760\u8fd1\u65f6\u4f1a\u80c6\u5c0f\u5730\u7f29\u8fdb\u5730\u91cc"],[i.pzaPlantEnum.ICE_SHROOM,"\u6682\u65f6\u4f7f\u753b\u9762\u4e2d\u7684\u5168\u90e8\u50f5\u5c38\u90fd\u65e0\u6cd5\u52a8\u5f39"],[i.pzaPlantEnum.DOOM_SHROOM,"\u9020\u6210\u5927\u8303\u56f4\u6bc1\u706d\u6548\u679c\uff0c\u4f46\u4f1a\u5728\u539f\u5730\u7559\u4e0b\u65e0\u6cd5\u8fdb\u884c\u79cd\u690d\u7684\u5f39\u5751"],[i.pzaPlantEnum.LILY_PAD,"\u53ef\u4ee5\u5728\u6c34\u6c60\u79cd\u690d\u975e\u6c34\u751f\u690d\u7269"],[i.pzaPlantEnum.SQUASH,"\u538b\u6241\u8eab\u65c1\u7684\u50f5\u5c38"],[i.pzaPlantEnum.THREE_PEATER,"\u4e00\u6b21\u5c04\u51fa\u4e09\u884c\u8c4c\u8c46"],[i.pzaPlantEnum.TANGLE_KELP,"\u80fd\u591f\u628a\u4e00\u53ea\u50f5\u5c38\u62d6\u8fdb\u6c34\u91cc\u7684\u6c34\u751f\u690d\u7269"],[i.pzaPlantEnum.JALAPENO,"\u70e7\u5149\u4e00\u6574\u884c\u7684\u50f5\u5c38"],[i.pzaPlantEnum.SPIKEWEED,"\u80fd\u624e\u7834\u8f6e\u80ce\uff0c\u4e5f\u80fd\u523a\u4f24\u8e0f\u5728\u4e0a\u9762\u7684\u50f5\u5c38"],[i.pzaPlantEnum.TORCHWOOD,"\u7a7f\u8fc7\u706b\u70ac\u6811\u6869\u7684\u8c4c\u8c46\u4f1a\u53d8\u6210\u706b\u5f39"],[i.pzaPlantEnum.TALL_NUT,"\u65e0\u6cd5\u8df3\u8fc7\u7684\u539a\u5b9e\u575a\u679c\u5899"],[i.pzaPlantEnum.SEA_SHROOM,"\u53d1\u5c04\u77ed\u7a0b\u5b62\u5b50\u7684\u6c34\u751f\u8611\u83c7"],[i.pzaPlantEnum.PLANTERN,"\u7167\u4eae\u4e00\u7247\u533a\u57df\uff0c\u9a71\u6563\u8ff7\u96fe"],[i.pzaPlantEnum.CACTUS,"\u53d1\u5c04\u80fd\u591f\u523a\u7834\u6c14\u7403\u7684\u5c16\u523a"],[i.pzaPlantEnum.BLOVER,"\u5439\u8d70\u6240\u6709\u6c14\u7403\u50f5\u5c38\u548c\u8ff7\u96fe"],[i.pzaPlantEnum.SPLIT_PEA,"\u540c\u65f6\u5411\u524d\u540e\u53d1\u5c04\u8c4c\u8c46"],[i.pzaPlantEnum.STAR_FRUIT,"\u5411\u4e94\u4e2a\u65b9\u5411\u53d1\u5c04\u5c0f\u661f\u661f"],[i.pzaPlantEnum.PUMPKIN,"\u4fdd\u62a4\u88ab\u5957\u5728\u91cc\u9762\u7684\u690d\u7269"],[i.pzaPlantEnum.MAGNET_SHROOM,"\u5438\u8d70\u94c1\u6876\u3001\u5934\u76d4\u6216\u8005\u5176\u5b83\u91d1\u5c5e\u7269\u54c1"],[i.pzaPlantEnum.CABBAGE_PULT,"\u5411\u654c\u4eba\u6295\u63b7\u5c0f\u5377\u5fc3\u83dc"],[i.pzaPlantEnum.FLOWER_POT,"\u8ba9\u690d\u7269\u53ef\u4ee5\u79cd\u690d\u5728\u623f\u9876\u4e0a"],[i.pzaPlantEnum.KERNEL_PULT,"\u5411\u50f5\u5c38\u6295\u63b7\u7389\u7c73\u7c92\u548c\u9ec4\u6cb9\u5757"],[i.pzaPlantEnum.COFFEE_BEAN,"\u653e\u5728\u8611\u83c7\u5934\u4e0a\uff0c\u5c31\u80fd\u628a\u767d\u5929\u7761\u89c9\u7684\u8611\u83c7\u53eb\u9192"],[i.pzaPlantEnum.GARLIC,"\u628a\u50f5\u5c38\u8d76\u5230\u5176\u5b83\u524d\u8fdb\u8def\u7ebf\u4e0a"],[i.pzaPlantEnum.UMBRELLA_LEAF,"\u4fdd\u62a4\u5468\u56f4\u7684\u690d\u7269\uff0c\u514d\u53d7\u98de\u8d3c\u50f5\u5c38\u548c\u6295\u77f3\u8f66\u50f5\u5c38\u7684\u4f24\u5bb3"],[i.pzaPlantEnum.MARIGOLD,"\u63d0\u4f9b\u91d1\u5e01\u548c\u94f6\u5e01"],[i.pzaPlantEnum.MELON_PULT,"\u6295\u51fa\u897f\u74dc\uff0c\u91cd\u91cd\u6253\u51fb\u6210\u7fa4\u7684\u50f5\u5c38"]]),a.newPlantDropMap=new Map([["1-1",i.pzaPlantEnum.SUN_FLOWER],["1-2",i.pzaPlantEnum.CHERRY_BOMB],["1-3",i.pzaPlantEnum.WALL_NUT],["1-5",i.pzaPlantEnum.POTATO_MINE],["1-6",i.pzaPlantEnum.SNOW_PEA],["1-7",i.pzaPlantEnum.CHOMPER],["1-8",i.pzaPlantEnum.REPEATER],["1-10",i.pzaPlantEnum.PUFF_SHROOM],["2-1",i.pzaPlantEnum.SUN_SHROOM],["2-2",i.pzaPlantEnum.FUME_SHROOM],["2-3",i.pzaPlantEnum.GRAVE_BUSTER],["2-5",i.pzaPlantEnum.HYPNO_SHROOM],["2-6",i.pzaPlantEnum.SCAREDY_SHROOM],["2-7",i.pzaPlantEnum.ICE_SHROOM],["2-8",i.pzaPlantEnum.DOOM_SHROOM],["2-10",i.pzaPlantEnum.LILY_PAD],["3-1",i.pzaPlantEnum.SQUASH],["3-2",i.pzaPlantEnum.THREE_PEATER],["3-3",i.pzaPlantEnum.TANGLE_KELP],["3-5",i.pzaPlantEnum.JALAPENO],["3-6",i.pzaPlantEnum.SPIKEWEED],["3-7",i.pzaPlantEnum.TORCHWOOD],["3-8",i.pzaPlantEnum.TALL_NUT],["3-10",i.pzaPlantEnum.SEA_SHROOM],["4-1",i.pzaPlantEnum.PLANTERN],["4-2",i.pzaPlantEnum.CACTUS],["4-3",i.pzaPlantEnum.BLOVER],["4-5",i.pzaPlantEnum.SPLIT_PEA],["4-6",i.pzaPlantEnum.STAR_FRUIT],["4-7",i.pzaPlantEnum.PUMPKIN],["4-8",i.pzaPlantEnum.MAGNET_SHROOM],["4-10",i.pzaPlantEnum.CABBAGE_PULT],["5-1",i.pzaPlantEnum.FLOWER_POT],["5-2",i.pzaPlantEnum.KERNEL_PULT],["5-3",i.pzaPlantEnum.COFFEE_BEAN],["5-5",i.pzaPlantEnum.GARLIC],["5-6",i.pzaPlantEnum.UMBRELLA_LEAF],["5-7",i.pzaPlantEnum.MARIGOLD],["5-8",i.pzaPlantEnum.MELON_PULT]]),a.AllPartStar=[[0,0,0,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0],[3,3,3,3,0,3,3,3,3,0]],a.waterWayZombies=new Set([r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,r.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE,r.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE,r.pzaZombieEnum.SNORKEL_ZOMBIE,r.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE]),a.PlantBookMap=new Map([[i.pzaPlantEnum.PEA_SHOOTER,new u(i.pzaPlantEnum.PEA_SHOOTER,"\u8c4c\u8c46\u5c04\u624b\u662f\u4f60\u7b2c\u4e00\u9053\u9632\u7ebf\u53d1\u5c04\u8c4c\u8c46\u653b\u51fb\u50f5\u5c38\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color>",null,"\u4e00\u68f5\u690d\u7269\uff0c\u600e\u4e48\u80fd\u5982\u6b64\u5feb\u5730\u751f\u957f\uff0c\u5e76\u53d1\u5c04\u5982\u6b64\u591a\u7684\u8c4c\u8c46\u5462?\u8c4c\u8c46\u5c04\u624b\u8bf4:","\u52aa\u529b\u5de5\u4f5c\uff0c\u5949\u732e\u81ea\u5df1\uff0c\u52a0\u4e0a\u4e00\u4efd\u9633\u5149\uff0c\u9ad8\u7ea4\u7ef4\u548c\u4e8c\u6c27\u5316\u78b3\u5747\u8861\u642d\u914d\uff0c\u8fd9\u79cd\u5065\u5eb7\u65e9\u9910\u8ba9\u4e00\u5207\u7686\u6210\u53ef\u80fd\u3002","<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.SUN_FLOWER,new u(i.pzaPlantEnum.SUN_FLOWER,"\u5411\u65e5\u8475\uff0c\u4e3a\u4f60\u751f\u4ea7\u66f4\u591a\u9633\u5149\u7684\u57fa\u7840\u4f5c\u7269\u3002\u5c3d\u53ef\u80fd\u591a\u5730\u79cd\u690d\u4e00\u4e9b\u5427!","<color=#aa582b>\u9633\u5149\u4ea7\u91cf\uff1a</c><color=#e6300d>\u4e2d\u7b49</color>",null,"\u5411\u65e5\u8475\u60c5\u4e0d\u81ea\u7981\u5730\u548c\u7740\u8282\u62cd\u8d77\u821e\u3002\u662f\u4ec0\u4e48\u8282\u62cd\u5462?\u55e8\uff0c\u662f\u5927\u5730\u81ea\u5df1\u7528\u6765\u63d0\u795e\u7684\u7235\u58eb\u8282\u62cd\uff0c\u8fd9\u79cd\u8282\u62cd\u53ea\u6709\u5411\u65e5\u8475\u624d\u80fd\u542c\u5230\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.CHERRY_BOMB,new u(i.pzaPlantEnum.CHERRY_BOMB,"\u6a31\u6843\u70b8\u5f39\uff0c\u53ef\u4ee5\u70b8\u6389\u4e00\u5b9a\u8303\u4ed6\u4eec\u56f4\u5185\u7684\u5168\u90e8\u50f5\u5c38\u3002\u4ed6\u4eec\u53ea\u6709\u5f88\u77ed\u7684\u5f15\u7ebf\uff0c\u53ea\u8981\u4e00\u79cd\u4e0b\u5c31\u4f1a\u7acb\u523b\u5f15\u7206\uff0c\u6240\u4ee5\u8bf7\u628a\u4ed6\u4eec\u79cd\u5728\u50f5\u5c38\u8eab\u8fb9\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e2d\u7b49\u8303\u56f4\u5185\u7684\u5168\u90e8\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color>",null,"\u201c\u6211\u8981'\u7206'\u5f00\u4e86\u201d\u6a31\u6843\u4e00\u53f7\u8bf4\u3002\u201c\u4e0d\uff0c\u6211\u4eec\u662f\u8981'\u70b8'\u5f00\u4e86\u201d\u5b83\u5f1f\u5f1f\u6a31\u6843\u4e8c\u53f7\u8bf4\u3002\u7ecf\u8fc7\u6fc0\u70c8\u7684\u5546\u8bae\u4e4b\u540e\uff0c\u4ed6\u4eec\u624d\u7edf\u4e00\u201c\u7206\u70b8\u201d\u8fd9\u4e2a\u8bf4\u6cd5",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.WALL_NUT,new u(i.pzaPlantEnum.WALL_NUT,"\u575a\u679c\u62e5\u6709\u8db3\u4ee5\u4fdd\u62a4\u5176\u4ed6\u690d\u7269\u7684\u575a\u786c\u5916\u58f3\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color>",null,"\u575a\u679c\u8bf4\uff1a\u201c\u4eba\u4eec\u60f3\u77e5\u9053\uff0c\u7ecf\u5e38\u88ab\u50f5\u5c38\u5543\u7684\u611f\u89c9\u600e\u6837\u4e86\uff1f\u201d\n\u4ed6\u4eec\u4e0d\u77e5\u9053\uff0c\u6211\u6709\u9650\u7684\u611f\u5b98\u4f7f\u6211\u53ea\u80fd\u611f\u53d7\u5230\u4e00\u79cd\u9ebb\u9ebb\u7684\u611f\u89c9\uff0c\u5c31\u50cf\u662f\u4ee4\u4eba\u653e\u677e\u7684\u80cc\u90e8\u6309\u6469\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.POTATO_MINE,new u(i.pzaPlantEnum.POTATO_MINE,"\u571f\u8c46\u5730\u96f7\u5177\u6709\u5f3a\u5927\u7684\u5a01\u529b\uff0c\u4f46\u4ed6\u4eec\u9700\u8981\u70b9\u65f6\u95f4\u6765\u542f\u52a8\u81ea\u5df1\u3002\u4f60\u5e94\u628a\u4ed6\u4eec\u79cd\u5728\u50f5\u5c38\u524d\u8fdb\u7684\u8def\u4e0a\uff0c\u5f53\u4ed6\u4eec\u4e00\u88ab\u78b0\u5230\u5c31\u4f1a\u7acb\u523b\u7206\u70b8\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5c0f\u8303\u56f4\u5185\u7684\u5168\u90e8\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u9700\u8981\u4e00\u5b9a\u65f6\u95f4\u51c6\u5907\u624d\u80fd\u542f\u52a8\u3002</color>",null,"\u4e00\u4e9b\u4eba\u8bf4\u571f\u8c46\u5730\u96f7\u5f88\u61d2\uff0c\u56e0\u4e3a\u4ed6\u603b\u662f\u628a\u6240\u6709\u4e8b\u60c5\u7559\u5230 \u6700\u540e\u3002\u571f\u8c46\u96f7\u624d\u6ca1\u7a7a\u7406\u4ed6\u4eec\u4ed6\u6b63\u5728\u5fd9\u7740\u8003\u8651\u81ea\u5df1\u7684\u6295\u8d44\u6218\u7565\u5462\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.SNOW_PEA,new u(i.pzaPlantEnum.SNOW_PEA,"\u5bd2\u51b0\u5c04\u624b\u4f1a\u53d1\u5c04\u5bd2\u51b0\u8c4c\u8c46\u653b\u51fb\u654c\u4eba\uff0c\u5e76\u5177\u6709\u51cf\u901f\u6548\u679c\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49\uff0c\u5177\u6709\u51cf\u901f\u6548\u679c</color>",null,"\u4eba\u4eec\u7ecf\u5e38\u544a\u8bc9\u5bd2\u51b0\u5c04\u624b\u4ed6\u662f\u591a\u4e48\u201c\u51b7\u9177\u201d\u6216\u8005\u544a\u8beb\u4ed6\u8981\u65f6\u523b\u201c\u51b7\u9759\u201d\u3002\n\u4ed6\u4eec\u53eb\u4ed6\u8981\u201c\u4fdd\u6301\u9547\u9759\u201d\u3002\n\u5bd2\u51b0\u5c04\u624b\u53ea\u662f\u8f6c\u8f6c\u773c\u775b\uff0c\u5176\u5b9e\u4ed6\u90fd\u542c\u89c1\u4e86\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.CHOMPER,new u(i.pzaPlantEnum.CHOMPER,"\u5927\u5634\u82b1\u53ef\u4ee5\u4e00\u53e3\u541e\u6389\u4e00\u6574\u53ea\u50f5\u5c38\uff0c\u4f46\u5728\u4ed6\u4eec\u5480\u56bc\u50f5\u5c38\u7684\u65f6\u5019\u5f88\u8106\u5f31\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u975e\u5e38\u8fd1</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u5480\u56bc\u65f6\u95f4\u957f</color>",null,"\u5927\u5634\u82b1\u5dee\u4e00\u70b9\u5c31\u8981\u53bb\u201c\u6050\u6016\u5c0f\u5e97\u201d\u8868\u6f14\u5b83\u7684\u7edd\u6280\u4e86\uff01\n\u4e0d\u8fc7\uff0c\u4ed6\u7684\u7ecf\u7eaa\u4eba\u69a8\u53d6\u4e86\u4ed6\u592a\u591a\u592a\u591a\u7684\u94b1\uff0c\u6240\u4ee5\u4ed6\u6ca1\u53bb\u6210\u3002\u5c3d\u7ba1\u5982\u6b64\uff0c\u5927\u5634\u82b1\u6ca1\u6709\u6028\u8a00\uff0c\u53ea\u8bf4\u4e86\u53e5\uff1a\u201d\u8fd9\u53ea\u662f\u4ea4\u6613\u7684\u4e00\u90e8\u5206\u3002\u201c",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.REPEATER,new u(i.pzaPlantEnum.REPEATER,"\u53cc\u91cd\u5c04\u624b\u80fd\u4e00\u6b21\u53d1\u5c04\u4e24\u9897\u8c4c\u8c46","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49\uff08\u6bcf\u9897\uff09</color><br/><color=#aa582b>\u53d1\u5c04\u901f\u5ea6\uff1a</c><color=#e6300d>\u4e24\u500d</color>",null,"\u53cc\u91cd\u5c04\u624b\u5f88\u51f6\u608d\uff0c\u4ed6\u662f\u5728\u8857\u5934\u6df7\u5927\u7684\u3002\u4ed6\u4e0d\u5728\u4e4e\u4efb\u4f55\u4eba\u7684\u770b\u6cd5\uff0c\u65e0\u8bba\u662f\u690d\u7269\u8fd8\u662f\u50f5\u5c38\u3002\u4ed6\u6253\u51fa\u8c4c\u8c46\uff0c\u662f\u4e3a\u4e86\u80fd\u591f\u8ba9\u522b\u4eba\u79bb\u4ed6\u8fdc\u4e00\u70b9\u3002\u5176\u5b9e\u5462\uff0c\u53cc\u91cd\u5c04\u624b\u4e00\u76f4\u6697\u6697\u7684\u6e34\u671b\u7740\u7231\u60c5",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.PUFF_SHROOM,new u(i.pzaPlantEnum.PUFF_SHROOM,"\u5c0f\u55b7\u83c7\u662f\u514d\u8d39\u7684\uff0c\u4e0d\u8fc7\u5b83\u7684\u5c04\u7a0b\u5374\u5f88\u8fd1\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u8fd1</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>","\u5c0f\u55b7\u83c7\u8bf4:\u201c\u6211\u4e5f\u662f\u6700\u8fd1\u624d\u77e5\u9053\u50f5\u5c38\u7684\u5b58\u5728\u7684\uff0c\u8001\u5f88\u591a\u8611\u83c7\u4e00\u6837\uff0c\u6211\u53ea\u662f\u628a\u4ed6\u4eec\u60f3\u8c61\u6210\u7ae5\u8bdd\u548c\u7535\u5f71\u91cc\u7684\u602a\u7269\u3002\u73b0\u5728\u7684\u7ecf\u5386\u624d\u8ba9\u6211\u5927\u5f00\u4e86\u773c\u754c\u3002\u201d",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.SUN_SHROOM,new u(i.pzaPlantEnum.SUN_SHROOM,"\u9633\u5149\u83c7\u5f00\u59cb\u63d0\u4f9b\u5c11\u91cf\u9633\u5149\uff0c\u7a0d\u540e\u63d0\u4f9b\u6b63\u5e38\u6570\u91cf\u9633\u5149\u3002","<color=#aa582b>\u9633\u5149\u4ea7\u91cf\uff1a</c><color=#e6300d>\u5f00\u59cb\u4f4e\uff0c\u4e4b\u540e\u6b63\u5e38</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>","\u9633\u5149\u83c7\u8ba8\u538c\u9633\u5149\n\u6068\u5230\u5f53\u5b83\u53ea\u8981\u5185\u90e8\u4ea7\u751f\u70b9\u9633\u5149\uff0c\u5c31\u5c3d\u53ef\u80fd\u5feb\u7684\u5410\u51fa\u6765\u3002\n\u5b83\u5c31\u662f\u4e0d\u80fd\u5fcd\u53d7\u8fd9\u4e2a\u3002\n\u5bf9\u5b83\u6765\u8bf4\uff0c\u9633\u5149\u4ee4\u4eba\u538c\u6076\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.FUME_SHROOM,new u(i.pzaPlantEnum.FUME_SHROOM,"\u5927\u55b7\u83c7\u55b7\u51fa\u7684\u6c14\u6ce1\u53ef\u4ee5\u7a7f\u900f\u94c1\u4e1d\u7f51\u95e8\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u666e\u901a\uff0c\u80fd\u7a7f\u900f\u94c1\u7f51\u95e8</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u88ab\u6c14\u6ce1\u55b7\u4e2d\u7684\u50f5\u5c38</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>","\u201c\u6211\u4ee5\u524d\u90a3\u4e00\u4efd\u6ca1\u524d\u9014\u7684\u5de5\u4f5c\uff0c\u662f\u4e3a\u4e00\u4e2a\u9762\u5305\u623f\u751f\u4ea7\u9175\u6bcd\u5b62\u201d\u5927\u55b7\u83c7\u8bf4\uff0c\u201c\u7136\u540e\u5c0f\u55b7\u83c7\uff0c\u4e0a\u5e1d\u4fdd\u4f51\u5b83\uff0c\u8ba9\u6211\u77e5\u9053\u4e86\u8fd9\u4e2a\u55b7\u6740\u50f5\u5c38\u7684\u673a\u4f1a\u3002\u73b0\u5728\u6211\u771f\u89c9\u5f97\u81ea\u5df1\u5b8c\u5168\u4e0d\u540c\u4e86\u3002\u201d",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.GRAVE_BUSTER,new u(i.pzaPlantEnum.GRAVE_BUSTER,"\u54ac\u54ac\u7891\u4f1a\u5403\u6389\u5893\u7891","<color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u53ea\u5bf9\u5893\u7891\u6709\u6548</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5403\u6389\u5893\u7891</color>",null,"\u5c3d\u7ba1\u54ac\u54ac\u7891\u5916\u8868\u5341\u5206\u5413\u4eba\uff0c\u4f46\u4ed6\u60f3\u8981\u6240\u6709\u4eba\u90fd\u77e5\u9053\uff0c\u5176\u5b9e\u4ed6\u559c\u6b22\u5c0f\u732b\u54aa\u3002\u800c\u4e14\u4ed6\u5229\u7528\u4ed6\u7684\u4e1a\u4f59\u65f6\u95f4\u5728\u4e00\u5bb6\u50f5\u5c38\u5eb7\u590d\u4e2d\u5fc3\u505a\u5fd7\u613f\u8005\u3002\u201c\u6211\u53ea\u662f\u5728\u505a\u6b63\u786e\u7684\u4e8b\u60c5\uff0c\u201d\u4ed6\u8bf4\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.HYPNO_SHROOM,new u(i.pzaPlantEnum.HYPNO_SHROOM,"\u5f53\u50f5\u5c38\u5403\u4e0b\u9b45\u60d1\u83c7\u540e\uff0c\u4ed6\u5c06\u4f1a\u6389\u8f6c\u65b9\u5411\u4e3a\u4f60\u4f5c\u6218\u3002","<color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u63a5\u89e6\u751f\u6548</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u8ba9\u4e00\u53ea\u50f5\u5c38\u4e3a\u4f60\u4f5c\u6218</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>","\u9b45\u60d1\u83c7\u8fd9\u6837\u8bf4\u9053\uff1a\u201c\u50f5\u5c38\u662f\u6211\u4eec\u7684\u670b\u53cb\uff0c\u4ed6\u4eec\u88ab\u4e25\u91cd\u8bef\u89e3\u4e86\uff0c\u50f5\u5c38\u4eec\u5728\u6211\u4eec\u7684\u751f\u6001\u73af\u5883\u91cc\u626e\u6f14\u7740\u91cd\u8981\u89d2\u8272\u3002\n\u6211\u4eec\u53ef\u4ee5\uff0c\u4e5f\u5e94\u5f53\u66f4\u52a0\u52aa\u529b\u5730\u53bb\u8ba9\u4ed6\u4eec\u5b66\u4f1a\u7528\u6211\u4eec\u7684\u65b9\u5f0f\u6765\u601d\u8003\u3002\u201d",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.SCAREDY_SHROOM,new u(i.pzaPlantEnum.SCAREDY_SHROOM,"\u80c6\u5c0f\u83c7\u662f\u4e00\u79cd\u8fdc\u7a0b\u5c04\u624b\uff0c\u654c\u4eba\u63a5\u8fd1\u540e\u4f1a\u8eb2\u8d77\u6765\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u654c\u4eba\u63a5\u8fd1\u540e\u505c\u6b62\u653b\u51fb</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>","\u201c\u8c01\u5728\u90a3\uff1f\u201d \u80c6\u5c0f\u83c7\u4f4e\u58f0\u8bf4\uff0c \u58f0\u97f3\u7ec6\u5fae\u96be\u8fa8\u3002 \u201c\u8d70\u5f00\uff01\u6211\u4e0d\u60f3\u89c1\u4efb\u4f55\u4eba\u3002 \u9664\u975e\u2026\u2026\u9664\u975e\u4f60\u662f\u4ece\u9a6c\u620f\u56e2\u6765\u7684\u4eba\u3002\u201d \u201d ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.ICE_SHROOM,new u(i.pzaPlantEnum.ICE_SHROOM,"\u51b0\u5ddd\u83c7\uff0c\u77ed\u6682\u7684\u51bb\u7ed3\u5c4f\u5e55\u4e0a\u6240\u6709\u50f5\u5c38\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u975e\u5e38\u4f4e\uff0c\u51bb\u7ed3\u50f5\u5c38</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5c4f\u5e55\u4e0a\u7684\u6240\u6709\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>","\u51b0\u5ddd\u83c7\u76b1\u7740\u7709\u5934\uff0c\u5012\u4e0d\u662f\u56e0\u4e3a\u5b83\u4e0d\u9ad8\u5174\u6216\u4e0d\u6ee1\u610f\uff0c\u53ea\u662f\u56e0\u4e3a\uff0c\u5b83\u513f\u65f6\u56e0\u53d7\u521b\u4f24\u800c\u9057\u7559\u4e0b\u4e86\u9762\u762b\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.DOOM_SHROOM,new u(i.pzaPlantEnum.DOOM_SHROOM,"\u6bc1\u706d\u83c7\u53ef\u4ee5\u6467\u6bc1\u5927\u8303\u56f4\u7684\u50f5\u5c38\uff0c\u5e76\u7559\u4e0b\u4e00\u4e2a\u4e0d\u80fd\u79cd\u690d\u7269\u7684\u5927\u5f39\u5751\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5927\u8303\u56f4\u5185\u7684\u6240\u6709\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u7559\u4e0b\u4e00\u4e2a\u5f39\u5751</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>","\u201c\u4f60\u771f\u7684\u5f88\u5e78\u8fd0\uff0c\u56e0\u4e3a\u6211\u662f\u548c\u4f60\u4e00\u4f19\u7684\uff0c\u201d\u6bc1\u706d\u83c7\u8bf4\uff0c\u201c\u6211\u80fd\u6467\u6bc1\u4efb\u4f55\u4f60\u6240\u73cd\u89c6\u7684\u4e1c\u897f\uff0c\u5c0f\u83dc\u4e00\u789f\u3002\u201d",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.LILY_PAD,new u(i.pzaPlantEnum.LILY_PAD,"\u83b2\u53f6\u53ef\u4ee5\u8ba9\u4f60\u5728\u5b83\u4e0a\u9762\u79cd\u690d\u975e\u6c34\u751f\u690d\u7269\u3002","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u53ef\u4ee5\u5728\u4e0a\u9762\u79cd\u690d\u975e\u6c34\u751f\u690d\u7269</color>","<color=#30a7db>\u5fc5\u987b\u79cd\u690d\u5728\u6c34\u9762</c>","\u83b2\u53f6\u4ece\u4e0d\u62b1\u6028\uff0c\u5b83\u4e5f\u4ece\u6765\u4e0d\u60f3\u77e5\u9053\u53d1\u751f\u4e86\u4ec0\u4e48\u4e8b\u3002\u5728\u4ed6\u8eab\u4e0a\u79cd\u690d\u7269\uff0c\u4ed6\u4e5f\u4e0d\u4f1a\u8bf4\u4ec0\u4e48\u3002\u96be\u9053\u4ed6\u6709\u4ec0\u4e48\u60ca\u4eba\u7684\u60f3\u6cd5\u6216\u53ef\u6015\u7684\u79d8\u5bc6\uff1f\u65e0\u4eba\u77e5\u6653\u3002\u83b2\u53f6\u628a\u8fd9\u4e9b\u90fd\u57cb\u85cf\u5728\u5fc3\u5e95\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.SQUASH,new u(i.pzaPlantEnum.SQUASH,"\u7a9d\u74dc\u4f1a\u538b\u6241\u7b2c\u4e00\u53ea\u63a5\u8fd1\u4ed6\u7684\u50f5\u5c38\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u538b\u6241\u63a5\u8fd1\u5b83\u7684\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528</color>",null,"\u201c\u6211\u51c6\u5907\u597d\u4e86\uff01\u201d\u7a9d\u74dc\u5927\u543c\u9053\uff0c\u201c\u5e72\u5427\uff01\u7b97\u6211\u4e00\u4efd\uff01\u6ca1\u4eba\u6bd4\u6211\u5389\u5bb3\uff01\u6211\u5c31\u662f\u4f60\u8981\u7684\u4eba\uff01\u6765\u554a\uff01\u7b49\u5565\u554a\uff1f\u8981\u7684\u5c31\u662f\u8fd9\u4e2a\uff01 ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.THREE_PEATER,new u(i.pzaPlantEnum.THREE_PEATER,"\u4e09\u91cd\u5c04\u624b\u80fd\u5728\u4e09\u6761\u8def\u4e0a\u53d1\u5c04\u8c4c\u8c46\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49\uff08\u6bcf\u9897\uff09</color><br/><color=#aa582b>\u53d1\u5c04\u901f\u5ea6\uff1a</c><color=#e6300d>\u4e09\u7ebf</color>",null,"\u4e09\u91cd\u5c04\u624b\u559c\u6b22\u8bfb\u4e66\u3001\u4e0b\u68cb\u3001\u5728\u516c\u56ed\u91cc\u50bb\u5750\u7740\u3002\u4ed6\u4e5f\u559c\u6b22\u53bb\u770b\u6f14\u51fa\uff0c\u7279\u522b\u662f\u73b0\u4ee3\u7235\u58eb\u4e50\u3002\u201c\u773c\u4e0b\u6211\u5728\u5bfb\u627e\u90a3\u4f4d\u7279\u522b\u7684\u4eba\uff0c\u201d\u4ed6\u8bf4\u3002\u4e09\u7ebf\u8c4c\u8c46\u6700\u559c\u6b22\u7684\u6570\u5b57\u662f\u4e94\u3002 ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.TANGLE_KELP,new u(i.pzaPlantEnum.TANGLE_KELP,"\u7f20\u7ed5\u6c34\u8349\u662f\u4e00\u79cd\u53ef\u4ee5\u628a\u63a5\u8fd1\u4ed6\u7684\u50f5\u5c38\u62c9\u8fdb\u6c34\u4e2d\u7684\u6c34\u751f\u690d\u7269\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u63a5\u89e6\u751f\u6548</color>","<color=#30a7db>\u5fc5\u987b\u79cd\u690d\u5728\u6c34\u9762</c>","\u201c\u6211\u662f\u5b8c\u5168\u9690\u5f62\u7684\uff0c\u201d\u7f20\u7ed5\u6c34\u8349\u81ea\u5df1\u60f3\uff0c\u201c\u6211\u85cf\u5728\u6c34\u9762\u4e0b\uff0c\u6ca1\u4eba\u4f1a\u770b\u5230\u6211\u3002\u201d\u4ed6\u7684\u670b\u53cb\u544a\u8bc9\u4ed6\uff0c\u4ed6\u4eec\u53ef\u4ee5\u975e\u5e38\u6e05\u695a\u5730\u770b\u5230\u4ed6\u3002\u4e0d\u8fc7\u7f20\u7ed5\u6c34\u8349\u4f3c\u4e4e\u4e0d\u60f3\u6539\u53d8\u81ea\u5df1\u7684\u770b\u6cd5\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.JALAPENO,new u(i.pzaPlantEnum.JALAPENO,"\u706b\u7206\u8fa3\u6912\u53ef\u4ee5\u6467\u6bc1\u4e00\u6574\u6761\u7ebf\u4e0a\u7684\u50f5\u5c38\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u6574\u6761\u7ebf\u4e0a\u7684\u50f5\u5c38</color><br/><color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color>",null,"\u201c\u560e\u560e\u560e\u560e\u560e\u560e\u560e\uff01\uff01\uff01\uff01\uff01\uff01\uff01\uff01\u201d\u706b\u7206\u8fa3\u6912\u8bf4\u3002\u4ed6\u73b0\u5728\u4e0d\u4f1a\u7206\u70b8\uff0c\u56e0\u4e3a\u8fd8\u4e0d\u5230\u65f6\u5019\u3002\u4e0d\u8fc7\u5feb\u4e86\u3002\u5594\uff0c\u5feb\u4e86\u5feb\u4e86\uff0c\u5feb\u5230\u4e86\u3002\u662f\u7684\uff0c\u4ed6\u611f\u53d7\u5230\u4e86\u3002\u4ed6\u4e00\u751f\u90fd\u5728\u7b49\u5f85\u8fd9\u4e2a\u65f6\u523b\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.SPIKEWEED,new u(i.pzaPlantEnum.SPIKEWEED,"\u5730\u523a\u53ef\u4ee5\u624e\u7834\u8f6e\u80ce\uff0c\u5e76\u5bf9\u8e29\u5230\u5b83\u7684\u50f5\u5c38\u9020\u6210\u4f24\u5bb3\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u6240\u6709\u8e29\u5230\u5b83\u7684\u50f5\u5c38</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4e0d\u4f1a\u88ab\u50f5\u5c38\u5403\u6389</color>",null,"\u5730\u523a\u75f4\u8ff7\u51b0\u7403\u8fd0\u52a8\uff0c\u4ed6\u4e70\u4e86\u5305\u53a2\u7684\u5b63\u7968\u3002\u4ed6\u4e00\u76f4\u5173\u6ce8\u7740\u4ed6\u559c\u6b22\u7684\u7403\u5458\uff0c\u4ed6\u4e5f\u59cb\u7ec8\u5982\u4e00\u7684\u5728\u8d5b\u540e\u6e05\u7406\u51b0\u7403\u573a\u3002\u4f46\u6709\u4e2a\u95ee\u9898\uff1a\u4ed6\u5bb3\u6015\u51b0\u7403\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.TORCHWOOD,new u(i.pzaPlantEnum.TORCHWOOD,"\u706b\u70ac\u6811\u6869\u53ef\u4ee5\u628a\u7a7f\u8fc7\u4ed6\u7684\u8c4c\u8c46\u8f6c\u53d8\u6210\u706b\u7403\uff0c\u9020\u6210\u4e24\u500d\u4f24\u5bb3","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u8ba9\u7a7f\u8fc7\u4ed6\u7684\u8c4c\u8c46\u53d8\u6210\u706b\u7403\u9020\u6210\u4e24\u500d\u4f24\u5bb3\u3002\u706b\u7403\u5bf9\u9644\u8fd1\u50f5\u5c38\u9020\u6210\u6e85\u5c04\u4f24\u5bb3\u3002</color>",null,"\u6bcf\u4e2a\u4eba\u90fd\u559c\u6b22\u5e76\u4e14\u656c\u91cd\u706b\u70ac\u6811\u6869\uff0c\u4ed6\u4eec\u559c\u6b22\u4ed6\u7684\u8bda\u5b9e\u548c\u575a\u8d1e\u7684\u53cb\u8c0a\uff0c\u4ee5\u53ca\u589e\u5f3a\u8c4c\u8c46\u4f24\u5bb3\u7684\u80fd\u529b\u3002\u4f46\u4ed6\u4e5f\u6709\u4e2a\u79d8\u5bc6\uff1a\u4ed6\u4e0d\u8bc6\u5b57\uff01",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.TALL_NUT,new u(i.pzaPlantEnum.TALL_NUT,"\u9ad8\u575a\u679c\u662f\u91cd\u578b\u58c1\u5792\u690d\u7269\uff0c\u5b83\u4e0d\u4f1a\u88ab\u50f5\u5c38\u4ece\u5934\u4e0a\u8df3\u8fc7\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u975e\u5e38\u9ad8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4e0d\u4f1a\u88ab\u8de8\u8fc7\u6216\u8df3\u8fc7</color>",null,"\u4eba\u4eec\u60f3\u77e5\u9053\uff0c\u575a\u679c\u548c\u9ad8\u575a\u679c\u4e4b\u95f4\u662f\u5426\u5b58\u5728\u7ade\u4e89\u3002\u9ad8\u575a\u679c\u4ee5\u7537\u4e2d\u97f3\u7684\u58f0\u8c03\u5927\u58f0\u7b11\u4e86\u3002\u201c\u6211\u4eec\u4e4b\u95f4\u600e\u4e48\u4f1a\u5b58\u5728\u7ade\u4e89\u5173\u7cfb\uff1f\u6211\u4eec\u662f\u5144\u5f1f\u3002\u5982\u679c\u4f60\u77e5\u9053\u575a\u679c\u4e3a\u6211\u505a\u4e86\u4ec0\u4e48\u5417\u2026\u2026\u201d\u9ad8\u575a\u679c\u7684\u58f0\u97f3\u8d8a\u6765\u8d8a\u5c0f\uff0c\u4ed6\u72e1\u9ee0\u5730\u7b11\u7740\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.SEA_SHROOM,new u(i.pzaPlantEnum.SEA_SHROOM,"\u6c34\u5175\u83c7\uff0c\u80fd\u591f\u53d1\u5c04\u77ed\u7a0b\u5b62\u5b50\u7684\u6c34\u751f\u690d\u7269\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u8fd1</color>","<color=#30a7db>\u5fc5\u987b\u79cd\u690d\u5728\u6c34\u9762</c><br/><color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>","\u6c34\u5175\u83c7\u4ece\u6765\u6ca1\u6709\u770b\u5230\u8fc7\u5927\u6d77\u3002\u867d\u7136\u4ed6\u540d\u5b57\u53eb\u6c34\u5175\uff0c\u4ed6\u7ecf\u5e38\u542c\u5230\u5173\u4e8e\u5927\u6d77\u7684\u4e8b\u3002\u4ed6\u53ea\u662f\u6ca1\u627e\u5230\u5408\u9002\u7684\u65f6\u95f4\uff0c\u603b\u6709\u4e00\u5929\xb7\xb7\xb7\xb7\xb7\xb7\u662f\u7684\uff0c\u4ed6\u4f1a\u89c1\u5230\u6d77\u7684\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.PLANTERN,new u(i.pzaPlantEnum.PLANTERN,"\u8def\u706f\u82b1\uff0c\u80fd\u7167\u4eae\u4e00\u7247\u533a\u57df\uff0c\u4e3a\u4f60\u9a71\u6563\u6218\u573a\u8ff7\u96fe\u3002 ","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e00\u7247\u5706\u5f62\u533a\u57df</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u9a71\u6563\u6218\u573a\u8ff7\u96fe</color>",null,"\u8def\u706f\u82b1\u62d2\u7edd\u79d1\u5b66\uff0c\u53ea\u4f1a\u57cb\u5934\u82e6\u5e72\u3002\u5176\u4ed6\u690d\u7269\u5403\u7684\u662f\u5149\uff0c\u6324\u51fa\u7684\u662f\u6c27\u6c14\uff1b\u8def\u706f\u82b1\u5403\u7684\u662f\u9ed1\u6697\uff0c\u6324\u51fa\u5374\u7684\u662f\u5149\u3002\u5bf9\u4e8e\u4ed6\u662f\u5982\u4f55\u80fd\u4ea7\u751f\u5149\u8fd9\u4ef6\u4e8b\uff0c\u8def\u706f\u82b1\u6301\u8c28\u614e\u6001\u5ea6\u3002\u201c\u6211\u4e0d\u4f1a\u8bf4\u8fd9\u662f\u2018\u5deb\u672f\u2019\uff0c\u6211\u4e5f\u4e0d\u4f1a\u4f7f\u7528\u2018\u539f\u529b\u7684\u9ed1\u6697\u9762\u2019\uff0c\u6211\u53ea\u662f\u2026\u2026\u6211\u60f3\u6211\u8bf4\u5f97\u591f\u591a\u7684\u4e86\u3002\u201d",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.CACTUS,new u(i.pzaPlantEnum.CACTUS,"\u4ed9\u4eba\u638c\u80fd\u53d1\u5c04\u7684\u7a7f\u523a\u5f39\u53ef\u4ee5\u7528\u6765\u6253\u51fb\u5730\u9762\u548c\u7a7a\u4e2d\u76ee\u6807\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5730\u9762\u548c\u7a7a\u4e2d</color>",null,"\u786e\u5b9e\uff0c\u4ed9\u4eba\u638c\u5f88\u201c\u523a\u513f\u201d\uff0c\u4f46\u662f\u5979\u7684\u523a\u4e0b\u9690\u85cf\u7740\u9897\u6e29\u67d4\u7684\u5fc3\uff0c\u5145\u6ee1\u7740\u7231\u548c\u5584\u826f\u3002\u5979\u53ea\u662f\u60f3\u62e5\u62b1\u522b\u4eba\u3002\u5927\u591a\u6570\u4eba\u90fd\u65e0\u6cd5\u505a\u5230\u8fd9\u70b9\uff0c\u4f46\u4ed9\u4eba\u638c\u5979\u5e76\u4e0d\u4ecb\u610f\u3002\u4ed6\u7559\u610f\u7740\u4e00\u53ea\u94e0\u7532\u9f20\u597d\u4e45\u4e86\uff0c\u8fd9\u6b21\u597d\u50cf\u771f\u7684\u53ef\u4ee5\u62b1\u62b1\u4e86\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.BLOVER,new u(i.pzaPlantEnum.BLOVER,"\u4e09\u53f6\u8349\uff0c\u80fd\u5439\u8d70\u6240\u6709\u7684\u6c14\u7403\u50f5\u5c38\uff0c\u4e5f\u53ef\u4ee5\u628a\u96fe\u5439\u6563\u3002","<color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5439\u8d70\u5c4f\u5e55\u4e0a\u6240\u6709\u7684\u6c14\u7403\u50f5\u5c38</color>",null,"\u5728\u4e09\u53f6\u8349\u4e94\u5c81\u751f\u65e5\u7684\u65f6\u5019\uff0c\u4ed6\u5f97\u5230\u4e86\u4e00\u4e2a\u95ea\u4eae\u7684\u751f\u65e5\u86cb\u7cd5\u3002\u4ed6\u8bb8\u597d\u613f\uff0c\u7136\u540e\u6df1\u5438\u4e00\u53e3\u6c14\u5374\u53ea\u5439\u706d\u4e8660%\u7684\u8721\u70db\u3002\u7136\u800c\u4ed6\u6ca1\u6709\u653e\u5f03\uff0c\u5c0f\u65f6\u5019\u7684\u90a3\u6b21\u5931\u8d25\u4fc3\u4f7f\u4ed6\u66f4\u52a0\u52aa\u529b\uff0c\u76f4\u5230\u73b0\u5728\u3002 ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.SPLIT_PEA,new u(i.pzaPlantEnum.SPLIT_PEA,"\u53cc\u5411\u5c04\u624b\u80fd\u5411\u524d\u540e\u53cc\u5411\u53d1\u5c04\u8c4c\u8c46\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u524d\u9762\u548c\u540e\u9762</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5411\u524d\u4e3a\u6b63\u5e38\u901f\u5ea6\uff0c\u5411\u540e\u4e3a\u4e24\u500d\u901f\u5ea6</color>",null,"\u53cc\u5411\u5c04\u624b\uff1a\u201c\u6ca1\u9519\uff0c\u6211\u5c31\u662f\u53cc\u5b50\u5ea7\u3002\u6211\u77e5\u9053\uff0c\u8fd9\u7684\u786e\u5f88\u4ee4\u4eba\u60ca\u5947\u201d\u3002\u4e0d\u8fc7\u6709\u4e24\u4e2a\u5934\uff0c\u6216\u8005\u5b9e\u9645\u4e0a\u957f\u7740\u4e00\u4e2a\u5934\u548c\u4e00\u4e2a\u7c7b\u4f3c\u5934\u7684\u4e1c\u897f\uff0c\u5728\u80cc\u4e0a\uff0c\u5bf9\u6211\u8fd9\u6761\u7ebf\u4e0a\u7684\u9632\u5b88\u5e2e\u52a9\u5f88\u5927\u3002\u201d  ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.STAR_FRUIT,new u(i.pzaPlantEnum.STAR_FRUIT,"\u53ef\u4ee5\u5411\u4e94\u4e2a\u65b9\u5411\u53d1\u5c04\u5c0f\u661f\u661f\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e94\u4e2a\u65b9\u5411</color>",null,"\u661f\u661f\u679c\uff1a\u201c\u563f\uff0c\u54e5\u4eec\u513f\uff0c\u6709\u4e00\u5929\u6211\u53bb\u770b\u7259\u533b\uff0c\u4ed6\u8bf4\u6211\u6709\u56db\u4e2a\u7259\u6d1e\u3002\u6211\u4e00\u6570\uff0c\u6211\u5c31\u53ea\u6709\u4e00\u9897\u7259\u9f7f\uff01\u4e00\u9897\u7259\u957f\u4e86\u56db\u4e2a\u7259\u6d1e\uff1f\u600e\u4e48\u4f1a\u8fd9\u6837\u554a\uff1f\u201d",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.PUMPKIN,new u(i.pzaPlantEnum.PUMPKIN,"\u5357\u74dc\u5934\uff0c\u53ef\u4ee5\u7528\u4ed6\u7684\u5916\u58f3\u4fdd\u62a4\u5176\u4ed6\u690d\u7269\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u53ef\u4ee5\u79cd\u690d\u5728\u5176\u4ed6\u690d\u7269\u4e0a</color>",null,"\u5357\u74dc\u5934\u6700\u8fd1\u4e00\u76f4\u90fd\u6ca1\u6536\u5230\u4ed6\u8868\u54e5\u4f26\u83f2\u5c14\u5fb7\u7684\u6d88\u606f\u4e86\u3002\u5f88\u660e\u663e\uff0c\u4f26\u83f2\u5c14\u5fb7\u662f\u4e2a\u5927\u660e\u661f\uff0c\u662f\u4e00\u79cd\u2026\u2026\u53eb\u4ec0\u4e48\u8fd0\u52a8\u6765\u7740\u2026\u2026\u7684\u4f53\u80b2\u660e\u661f\uff1f\u5e7b\u5e7b\u7403\u5927\u5e08\uff1f\u5357\u74dc\u5934\u53cd\u6b63\u641e\u4e0d\u61c2\u662f\u4ec0\u4e48\u8fd0\u52a8\u3002\u4ed6\u53ea\u60f3\u505a\u597d\u4ed6\u81ea\u5df1\u7684\u5de5\u804c\u5de5\u4f5c\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.MAGNET_SHROOM,new u(i.pzaPlantEnum.MAGNET_SHROOM,"\u78c1\u529b\u83c7\u53ef\u4ee5\u7528\u78c1\u529b\u5438\u53d6\u50f5\u5c38\u7684\u5934\u76d4\u7b49\u5176\u5b83\u91d1\u5c5e\u7269\u54c1\u3002","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u9760\u8fd1\u7684\u50f5\u5c38</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u79fb\u9664\u50f5\u5c38\u4eec\u8eab\u4e0a\u6240\u6709\u7684\u91d1\u5c5e\u7269\u54c1</color>","<color=#953C9F>\u767d\u5929\u8981\u7761\u89c9</c>","\u78c1\u529b\u662f\u4e00\u79cd\u5f3a\u5927\u7684\u529b\u91cf\uff1b\u975e\u5e38\u5f3a\u5927\uff0c\u5f3a\u5927\u5230\u6709\u65f6\u90fd\u5413\u5230\u78c1\u529b\u83c7\u81ea\u5df1\u4e86\u3002\u80fd\u529b\u8d8a\u5927\uff0c\u8d23\u4efb\u8d8a\u5927\uff0c\u4ed6\u4e0d\u77e5\u9053\u81ea\u5df1\u80fd\u5426\u80a9\u8d1f\u5f97\u8d77\u8fd9\u8d23\u4efb\u3002  ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.CABBAGE_PULT,new u(i.pzaPlantEnum.CABBAGE_PULT,"\u5377\u5fc3\u83dc\u6295\u624b\u80fd\u5411\u50f5\u5c38\u6295\u63b7\u5377\u5fc3\u83dc\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u629b\u63b7</color>",null,"\u5377\u5fc3\u83dc\u6295\u624b\u7528\u5377\u5fc3\u83dc\u7838\u50f5\u5c38\u6709\u4e00\u624b\uff0c\u6bd5\u7adf\u8fd9\u662f\u4ed6\u8d5a\u94b1\u7684\u65b9\u5f0f\uff0c\u800c\u4e14\u4ed6\u4e5f\u64c5\u957f\u8fd9\u4e2a\u3002\u4ed6\u53ea\u662f\u4e0d\u660e\u767d\u50f5\u5c38\u4e00\u5f00\u59cb\u662f\u600e\u4e48\u5230\u5c4b\u9876\u4e0a\u6765\u7684\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.FLOWER_POT,new u(i.pzaPlantEnum.FLOWER_POT,"\u82b1\u76c6\u53ef\u4ee5\u8ba9\u4f60\u5728\u5c4b\u9876\u4e0a\u79cd\u690d\u3002","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u53ef\u4ee5\u8ba9\u4f60\u5728\u5c4b\u9876\u79cd\u690d</color>",null,"\u6211\u662f\u4e00\u4e2a\u8ba9\u690d\u7269\u683d\u79cd\u7684\u82b1\u76c6\uff0c\u4f46\u6211\u4e5f\u662f\u4e00\u68f5\u690d\u7269\u3002\u662f\u4e0d\u662f\u5f88\u610f\u5916?",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.KERNEL_PULT,new u(i.pzaPlantEnum.KERNEL_PULT,"\u53ef\u4ee5\u6295\u63b7\u7389\u7c73\u7c92\u548c\u9ec4\u6cb9\u3002  ","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u8f7b\u5fae\uff08\u7389\u7c73\u7c92\uff09\uff0c\u4e2d\u7b49\uff08\u9ec4\u6cb9\uff09</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u629b\u63b7</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u9ec4\u6cb9\u53ef\u4ee5\u6682\u65f6\u56fa\u5b9a\u50f5\u5c38</color>",null,"\u7389\u7c73\u6295\u624b\u662f\u5144\u5f1f\u4e2d\u7684\u8001\u5927\uff0c\u4ed6\u4eec\u4e09\u5144\u5f1f\u5f53\u4e2d\uff0c\u53ea\u6709\u7389\u7c73\u6295\u624b\u8bb0\u5f97\u5176\u4ed6\u4eba\u7684\u751f\u65e5\uff0c\u53ea\u662f\u4ed6\u8bb0\u5f97\u4e0d\u592a\u51c6\u3002  ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.COFFEE_BEAN,new u(i.pzaPlantEnum.COFFEE_BEAN,"\u53ef\u4ee5\u5524\u9192\u7761\u7720\u4e2d\u7684\u8611\u83c7\u4eec\u3002","<color=#aa582b>\u7528\u6cd5\uff1a</c><color=#e6300d>\u4e00\u6b21\u6027\u4f7f\u7528\uff0c\u7acb\u5373\u7206\u70b8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u79cd\u690d\u5728\u5176\u5b83\u690d\u7269\u4e0a\uff0c\u7528\u6765\u5728\u767d\u5929\u5524\u9192\u8611\u83c7</color>",null,"\u5496\u5561\u8c46:\u201c\u563f\uff0c\u4f19\u8ba1!\u563f\uff0c\u600e\u4e48\u56de\u4e8b?\u662f\u8c01?\u563f!\u4f60\u77a7\u89c1\u4e86\u90a3\u4e2a\u4e1c\u897f\u6ca1\u6709?\u4ec0\u4e48\u4e1c\u897f?\u54c7!\u662f\u72ee\u5b50\u8036\uff01\u201d\u55ef\uff0c\u5496\u5561\u8c46\u786e\u5b9a\uff0c\u8fd9\u6837\u80fd\u8ba9\u81ea\u5df1\u5f88\u5174\u594b\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.GARLIC,new u(i.pzaPlantEnum.GARLIC,"\u53ef\u4ee5\u8ba9\u50f5\u5c38\u6539\u53d8\u524d\u8fdb\u7684\u8def\u7ebf\u3002","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u8fd1\u8ddd\u79bb\u63a5\u89e6</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6539\u53d8\u50f5\u5c38\u7684\u524d\u8fdb\u8def\u7ebf</color>",null,"\u8def\u7ebf\u8f6c\u5411\uff0c\u8fd9\u4e0d\u4ec5\u4ec5\u662f\u5927\u849c\u7684\u4e13\u4e1a\uff0c\u66f4\u662f\u4ed6\u70ed\u60c5\u6240\u5728\u3002\u4ed6\u5728\u5e03\u9c81\u585e\u5c14\u5927\u5b66\u91cc\u83b7\u5f97\u4e86\u8f6c\u5411\u5b66\u7684\u535a\u58eb\u5b66\u4f4d\u3002\u4ed6\u80fd\u628a\u8def\u7ebf\u5411\u91cf\u548c\u53cd\u51fb\u9635\u5217\uff0c\u8bb2\u4e0a\u51e0\u5929\u3002\u4ed6\u751a\u81f3\u4f1a\u628a\u5bb6\u91cc\u7684\u4e1c\u897f\u63a8\u5230\u8857\u4e0a\u53bb\u3002\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff0c\u4ed6\u8001\u5a46\u8fd8\u53ef\u4ee5\u5fcd\u53d7\u8fd9\u4e9b\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.UMBRELLA_LEAF,new u(i.pzaPlantEnum.UMBRELLA_LEAF,"\u53f6\u5b50\u4fdd\u62a4\u4f1e\u4fdd\u62a4\u4e34\u8fd1\u7684\u690d\u7269\u4e0d\u88ab\u98de\u8d3c\u50f5\u5c38\u548c\u6295\u77f3\u8f66\u50f5\u5c38\u6240\u4f24\u5bb3\u3002","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4fdd\u62a4\u9644\u4ef6\u7684\u690d\u7269\uff0c\u4e0d\u88ab\u98de\u8d3c\u50f5\u5c38\u548c\u6295\u77f3\u8f66\u50f5\u5c38\u6240\u4f24\u5bb3</color>",null,"\u53f6\u5b50\u4fdd\u62a4\u4f1e\uff1a\u201c\u7830\uff01\u4f60\u559c\u6b22\u8fd9\u6837\u662f\u4e48\uff0c\u6211\u8fd8\u53ef\u4ee5\u505a\u7ed9\u4f60\u77a7\u3002\u7830\uff01\u54c7\uff01\u6211\u5feb\u901f\u5411\u5f20\u5f00\u6211\u7684\u53f6\u5b50\uff0c\u6765\u4fdd\u62a4\u6211\u7684\u90bb\u5c45\u3002\u8036\uff01\u5c31\u662f\u8fd9\u6837\u3002\u6ca1\u9519\uff0c\u5c31\u662f\u8fd9\u6837\uff0c\u76f8\u4fe1\u6211\u3002\u201d",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.MARIGOLD,new u(i.pzaPlantEnum.MARIGOLD,"\u91d1\u76cf\u82b1\u53ef\u4ee5\u63d0\u4f9b\u91d1\u5e01\u548c\u94f6\u5e01\u3002","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u63d0\u4f9b\u91d1\u5e01\u548c\u94f6\u5e01</color>",null,"\u91d1\u76cf\u82b1\u82b1\u4e86\u8bb8\u591a\u65f6\u95f4\uff0c\u6765\u8003\u8651\u662f\u5410\u51fa\u4e00\u679a\u91d1\u5e01\uff0c\u8fd8\u662f\u5410\u51fa\u4e00\u679a\u94f6\u5e01\u3002\u5979\u6743\u8861\u7740\u5404\u4e2a\u89d2\u5ea6\uff0c\u4e0d\u505c\u5730\u601d\u7d22\u7740\u3002\u5979\u505a\u4e86\u76f8\u5f53\u5145\u8db3\u7684\u7814\u7a76\uff0c\u5e76\u4e14\uff0c\u65f6\u523b\u6ce8\u610f\u6700\u65b0\u51fa\u7248\u8d44\u6599\u3002\u8fd9\u5c31\u662f\u6210\u529f\u8005\u4eec\u603b\u662f\u6700\u5148\u8fdb\u7684\u539f\u56e0\u3002 ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u957f</color>")],[i.pzaPlantEnum.MELON_PULT,new u(i.pzaPlantEnum.MELON_PULT,"\u897f\u74dc\u6295\u624b\u80fd\u5bf9\u6210\u7fa4\u50f5\u5c38\u9020\u6210\u5de8\u5927\u4f24\u5bb3\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5927</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u629b\u63b7</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u897f\u74dc\u80fd\u5bf9\u76ee\u6807\u9644\u8fd1\u7684\u50f5\u5c38\u9020\u6210\u4f24\u5bb3</color>",null,"\u4f4e\u8c03\u4ece\u4e0d\u662f\u897f\u74dc\u6295\u624b\u7684\u98ce\u683c\uff0c\u201c\u592a\u9633\u2014\u2014\u8d50\u4e88\u6211\u2014\u2014\u529b\u91cf\uff0c\u6211\u53ef\u662f\u8349\u5730\u4e0a\u6700\u80fd\u6253\u7684\u4eba\u201d\uff0c\u4ed6\u8bf4\uff0c\u201c\u6211\u4e0d\u662f\u5439\u725b\uff0c\u7785\u7785\u90a3\u4e9b\u7edf\u8ba1\u6570\u5b57\uff0c\u4f60\u5c31\u660e\u767d\u4e86\u3002\u201d ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u77ed</color>")],[i.pzaPlantEnum.GATLING_PEA,new u(i.pzaPlantEnum.GATLING_PEA,"\u673a\u67aa\u5c04\u624b\u4e00\u6b21\u53d1\u5c04\u56db\u9897\u8c4c\u8c46\u3002","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u53d1\u5c04\u901f\u5ea6\uff1a</c><color=#e6300d>\u56db\u500d</color><br/><color=#aa582b>\u53ea\u80fd\u79cd\u690d\u5728\u53cc\u91cd\u5c04\u624b\u4e0a</c>",null,"\u673a\u67aa\u5c04\u624b\u5ba3\u5e03\u4ed6\u8981\u53c2\u519b\u7684\u65f6\u5019\uff0c\u4ed6\u7684\u7236\u6bcd\u5f88\u4e3a\u4ed6\u62c5\u5fc3\uff0c\u4ed6\u4eec\u5f02\u53e3\u540c\u58f0\u5730\u5bf9\u4ed6\u8bf4\uff1a\u201c\u4eb2\u7231\u7684\uff0c\u8fd9\u592a\u5371\u9669\u4e86\u3002\u201d\u673a\u67aa\u8c4c\u8c46\u62d2\u7edd\u8ba9\u6b65\u3002\u201c\u751f\u6d3b\u672c\u5c31\u5371\u9669\u201d\u4ed6\u56de\u7b54\uff0c\u6b64\u65f6\u4ed6\u7684\u773c\u775b\u91cc\uff0c\u6b63\u95ea\u70c1\u7740\u94a2\u94c1\u822c\u7684\u4fe1\u5ff5\u3002 ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.TWIN_SUNFLOWER,new u(i.pzaPlantEnum.TWIN_SUNFLOWER,"\u63d0\u4f9b\u4e24\u500d\u7684\u9633\u5149\u4ea7\u91cf","<color=#aa582b>\u9633\u5149\u4ea7\u91cf\uff1a</c><color=#e6300d>\u53cc\u500d</color><br/><color=#aa582b>\u53ea\u80fd\u79cd\u690d\u5728\u5411\u65e5\u8475\u4e0a</c>",null,"\u90a3\u662f\u4e00\u4e2a\u75af\u72c2\u7684\u591c\u665a\uff0c\u7981\u5fcc\u7684\u79d1\u5b66\u6280\u672f\uff0c\u8ba9\u53cc\u80de\u5411\u65e5\u8475\u6765\u5230\u8fd9\u4e2a\u4e16\u754c\u3002\u7535\u95ea\u96f7\u9e23\uff0c\u72c2\u98ce\u6012\u543c\uff0c\u90fd\u5728\u8868\u793a\u7740\u8fd9\u4e2a\u4e16\u754c\u5bf9\u4ed6\u7684\u62d2\u7edd\u3002\u4f46\u662f\u8fd9\u4e00\u5207\u90fd\u65e0\u6d4e\u4e8e\u4e8b\uff0c\u53cc\u80de\u5411\u65e5\u8475\u4ecd\u7136\u6d3b\u7740\uff01 ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.GLOOM_SHROOM,new u(i.pzaPlantEnum.GLOOM_SHROOM,"\u5fe7\u90c1\u83c7\u56f4\u7ed5\u81ea\u8eab\u91ca\u653e\u5927\u91cf\u70df\u96fe\uff0c\u653b\u51fb\u50f5\u5c38","<color=#aa582b>\u5fc5\u987b\u79cd\u690d\u5728\u5927\u55b7\u83c7\u4e0a</c>",null,"\u201d\u6211\u559c\u6b22\u91ca\u653e\u5927\u91cf\u70df\u96fe\uff0c\u201c\u5fe7\u90c1\u83c7\u8bf4\uff0c\u201d\u6211\u77e5\u9053\u5f88\u591a\u4eba\u53d7\u4e0d\u4e86\u8fd9\u6837\uff0c\u4ed6\u4eec\u8bf4\u8fd9\u53c8\u7c97\u9c81\u53c8\u6076\u81ed\u3002\u6211\u53ea\u80fd\u8bf4\uff0c\u4f60\u4eec\u66f4\u60f3\u88ab\u50f5\u5c38\u5403\u6389\u5927\u8111\u4e48\uff1f\u201d ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.CATTAIL,new u(i.pzaPlantEnum.CATTAIL,"\u653b\u51fb\u4efb\u4f55\u7ebf\u4e0a\u7684\u50f5\u5c38\u4ee5\u53ca\u6c14\u7403\u50f5\u5c38\u3002","<color=#aa582b>\u5fc5\u987b\u79cd\u690d\u5728\u83b2\u53f6\u4e0a</c>",null,"\u201c\u55f7!\u201d\u732b\u5c3e\u8349\u8bf4\u3002\u201d\u55f7!\u55f7!\u55f7!\u8fd9\u4f1a\u8ba9\u4f60\u56f0\u60d1\u4e48?\u4f60\u4e0d\u4f1a\u5c31\u56e0\u4e3a\u6211\u540d\u5b57\u91cc\u6709\u732b\u8fd8\u6709\u6211\u770b\u7740\u50cf\u53ea\u732b\u5c31\u671f\u5f85\u6211\u55b5\u55b5\u55b5\u7684\u53eb\uff1f\u8fd9\u91cc\u53ef\u4e0d\u662f\u8fd9\u6837\u6ef4\uff0c\u6211\u53ef\u62d2\u7edd\u88ab\u968f\u4fbf\u5f52\u7c7b\u3002\u4eba\u5bb6\u624d\u4e0d\u662f\u50b2\u5a07\u5356\u840c\u5462\uff01",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.WINTER_MELON,new u(i.pzaPlantEnum.WINTER_MELON,"\u51b0\u897f\u74dc\u80fd\u9020\u6210\u8303\u56f4\u6027\u7684\u4f24\u5bb3\u5e76\u8ba9\u50f5\u5c38\u51cf\u901f","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u975e\u5e38\u9ad8</color><br/><color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u629b\u63b7</color><br/><color=#aa582b>\u53d1\u5c04\u901f\u5ea6\uff1a</c><color=#e6300d>1/2\u500d\u6570</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u51fb\u4e2d\u540e\u7167\u6210\u8303\u56f4\u4f24\u5bb3\u5e76\u51cf\u901f</color><br/><color=#aa582b>\u5fc5\u987b\u88ab\u79cd\u690d\u5728\u897f\u74dc\u6295\u624b\u4e0a</c>",null,"\u51b0\u897f\u74dc\u8bd5\u7740\u8ba9\u81ea\u5df1\u7d27\u7ef7\u7684\u795e\u7ecf\u51b7\u9759\u4e0b\u6765\uff0c\u4ed6\u542c\u5230\u50f5\u5c38\u63a5\u8fd1\u3002\u4ed6\u80fd\u505a\u5230\u5417\uff1f\u6709\u4eba\u80fd\u505a\u5230\u5417\uff1f ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.GOLD_MAGNET,new u(i.pzaPlantEnum.GOLD_MAGNET,"\u53ef\u4ee5\u4e3a\u4f60\u6536\u96c6\u786c\u5e01\u548c\u94bb\u77f3\u3002","<color=#aa582b>\u5fc5\u987b\u79cd\u690d\u5728\u78c1\u529b\u83c7\u4e0a</c>",null,"\u201c\u6211\u600e\u4e48\u5728\u8fd9\u7ec8\u8001\u4e00\u751f\u201d\u5438\u91d1\u78c1\u95ee\uff0c\u201c\u6211\u66fe\u7ecf\u4e5f\u6709\u5e73\u6b65\u9752\u4e91\u2014\u2014\u5750\u5728\u529e\u516c\u5ba4\u7684\u4e00\u89d2\uff0c\u5b8c\u5168\u6c89\u6d78\u5728\u798f\u5229\u554a\uff0c\u80a1\u7968\u671f\u6743\u554a\u3002\u600e\u4e48\u8bf4\u6211\u4e5f\u66fe\u662f\u4e2d\u7f8e\u516c\u53f8\u526f\u603b\u88c1\u554a\uff01\u73b0\u5728\u5462\uff1f\u6211\u5374\u5728\u8fd9\uff0c\u5728\u8fd9\u4e2a\u7834\u8349\u5730\u4e0a\uff0c\u65f6\u523b\u62c5\u5fc3\u4f1a\u88ab\u50f5\u5c38\u5403\u6389\uff01\u5594\uff01\u7b49\u7b49\uff0c\u6709\u679a\u786c\u5e01!\u201d ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.SPIKEROCK,new u(i.pzaPlantEnum.SPIKEROCK,"\u94a2\u5730\u523a\u53ef\u4ee5\u624e\u7834\u591a\u4e2a\u8f6e\u80ce\uff0c\u5e76\u5bf9\u8e29\u5230\u4ed6\u7684\u50f5\u5c38\u9020\u6210\u4f24\u5bb3","<color=#aa582b>\u5fc5\u987b\u79cd\u690d\u5728\u5730\u523a\u4e0a</c>",null,"\u94a2\u5730\u523a\u521a\u4ece\u6b27\u6d32\u65c5\u884c\u56de\u6765\u3002\u4ed6\u73a9\u7684\u5f88\u9ad8\u5174\uff0c\u4e5f\u8ba4\u8bc6\u4e86\u5f88\u591a\u6709\u8da3\u7684\u4eba\u3002\u8fd9\u4e9b\u90fd\u771f\u7684\u62d3\u5c55\u4e86\u4ed6\u7684\u89c6\u91ce\u2014\u2014\u4ed6\u4ece\u6765\u4e0d\u77e5\u9053\uff0c\u4ed6\u4eec\u5efa\u9020\u4e86\u8fd9\u4e48\u5927\u7684\u535a\u7269\u9986\uff0c\u6709\u8fd9\u4e48\u591a\u7684\u753b\u4f5c\u3002\u8fd9\u5bf9\u4ed6\u6765\u8bf4\u592a\u60ca\u5947\u4e86\u3002 ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.COB_CANNON,new u(i.pzaPlantEnum.COB_CANNON,"\u70b9\u51fb\u7389\u7c73\u52a0\u519c\u70ae\uff0c\u53d1\u5c04\u81f4\u547d\u7684\u7389\u7c73\u70ae\u5f39","<color=#aa582b>\u5fc5\u987b\u88ab\u79cd\u690d\u5728\u4e00\u884c\u4e24\u4e2a\u76f8\u90bb\u7684\u7389\u7c73\u6295\u624b\u4e0a</c>",null,"\u7389\u7c73\u52a0\u519c\u70ae\u5230\u5e95\u662f\u600e\u6837?\u55ef\uff0c\u4ed6\u66fe\u7ecf\u5728\u54c8\u4f5b\u5b66\u4e60\uff0c\u5e76\u5c31\u804c\u4e8e\u4e00\u5bb6\u8457\u540d\u7684\u7ebd\u7ea6\u6cd5\u5f8b\u4e8b\u52a1\u6240\u3002\u4ed6\u53d1\u5c04\u4e00\u6b21\u5c31\u80fd\u70b8\u70c2\u5927\u8303\u76ee\u7684\u50f5\u5c38\u3002\u8fd9\u662f\u5927\u5bb6\u90fd\u77e5\u9053\u7684\u4e8b\u3002\u4e0d\u8fc7\u5f80\u6df1\u4e86\u60f3\uff0c\u5230\u5e95\u662f\u4ec0\u4e48\u6fc0\u53d1\u4e86\u4ed6\uff1f",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.IMITATER,new u(i.pzaPlantEnum.IMITATER,"\u53d8\u8eab\u8304\u5b50\u53ef\u4ee5\u8ba9\u4f60\u5728\u540c\u4e00\u5173\u5361\u5185\u4f7f\u7528\u4e24\u4efd\u76f8\u540c\u690d\u7269\uff01 ",null,null,"\u201c\u6211\u8fd8\u8bb0\u5f97\u4e03\u516d\u5e74\u7684\u90a3\u6b21\u50f5\u5c38\u6218\u4e89\uff0c\u201d\u53d8\u8eab\u8304\u5b50\u7528\u6c99\u54d1\u82cd\u8001\u7684\u58f0\u97f3\u8bf4\uff0c\u201c\u90a3\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u6ca1\u6709\u8fd9\u4e9b\u82b1\u91cc\u80e1\u54e8\u7684\u8c4c\u8c46\u5c04\u624b\u548c\u706b\u7206\u8fa3\u6912\u3002\u6211\u4eec\u53ea\u6709\u52c7\u6c14\uff0c\u52c7\u6c14\u548c\u52fa\u5b50\u3002\u201d \n\u201c\u554a\uff0c\u8fd8\u6709\u201d\u53d8\u8eab\u8304\u5b50\u7ee7\u7eed\u8865\u5145\u9053\uff0c\u201c\u6211\u5176\u5b9e\u662f\u6d0b\u828b\u3002\u201d ",null,null)],[i.pzaPlantEnum.SUPER_CHOMPER,new u(i.pzaPlantEnum.SUPER_CHOMPER,"\u8d85\u7ea7\u5927\u5634\u82b1\u6bcf\u6b21\u653b\u51fb\u670920%\u6982\u7387\u89e6\u53d1\u7279\u6b8a\u653b\u51fb\uff0c\u53ef\u4ee5\u541e\u566c\u524d\u65b93\u683c\u6240\u6709\u50f5\u5c38\u3002 ","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u975e\u5e38\u8fd1</color>","\u6bcf\u4e2a\u4eba\u90fd\u5f88\u6b23\u8d4f\u8d85\u7ea7\u5927\u5634\u82b1\u7684\u6240\u4f5c\u6240\u4e3a\uff0c\u56e0\u4e3a\u4ed6\u7684\u5927\u80c3\u53e3\u5728\u5f88\u591a\u573a\u5408\u90fd\u66fe\u62ef\u6551\u8fc7\u4ed6\u4eec\u3002\u4f46\u8bf4\u53e5\u771f\u5fc3\u8bdd\uff0c\u8d85\u7ea7\u5927\u5634\u82b1\u7684\u670b\u53cb\u4eec\u8ba4\u4e3a\u4ed6\u5403\u50f5\u5c38\u662f\u4ef6\u5f88\u7c97\u9119\u7684\u4e8b\u60c5\u3002\u66f4\u4f55\u51b5\u4ed6\u7684\u53e3\u6c14\uff01\u5f53\u4ed6\u4e0d\u7406\u89e3\u522b\u4eba\u4e3a\u4ec0\u4e48\u4f1a\u9001\u4ed6\u8584\u8377\u7684\u65f6\u5019\uff0c\u5b9e\u5728\u6ca1\u6709\u4eba\u5fcd\u5fc3\u544a\u8bc9\u4ed6\u771f\u76f8\u3002 ",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u975e\u5e38\u957f</color>")],[i.pzaPlantEnum.BOOM_NUT,new u(i.pzaPlantEnum.BOOM_NUT,"\u7206\u70b8\u575a\u679c\u53ef\u70b8\u6b7b3X3\u8303\u56f4\u5185\u7684\u50f5\u5c38\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color>","<color=#aa582b>\u4f24\u5bb3\uff1a</c><color=#e6300d>\u5de8\u5927\n</color><color=#aa582b>\u8303\u56f4: </c><color=#e6300d>3X3\u8303\u56f4\u5185\u7684\u5168\u90e8\u50f5\u5c38</color>","\u201c\u6211\u552f\u4e00\u7684\u9057\u61be\uff0c\u5c31\u662f\u53ea\u6709\u4e00\u9897\u88c5\u6ee1\u4e86\u785d\u5316\u7518\u6cb9\u7684\u5185\u5fc3\uff0c\u8fd9\u5bf9\u8349\u576a\u7684\u4fdd\u62a4\u8fdc\u8fdc\u4e0d\u591f\u3002\u201d\u7206\u70b8\u575a\u679c\u5982\u6b64\u8bf4\u3002",null,"<color=#aa582b>\u6062\u590d\u65f6\u95f4\uff1a</c><color=#e6300d>\u4e2d\u7b49</color>")]]),a.ZjPlantBookMap=new Map([[i.pzaPlantEnum.ICE_NUT,new d(i.pzaPlantEnum.ICE_NUT,"\u51b0\u51bb\u575a\u679c\u80fd\u53d1\u5c04\u5b50\u5f39\uff0c\u8fd8\u80fd\u51bb\u7ed3\u50f5\u5c38\u3002",null,"<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>20X2/1.5\u79d2</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u524d\u65b9\u4e00\u884c</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u6bcf1.5\u79d2\u53d1\u5c042\u679a\u5bd2\u51b0\u5b50\u5f39\u3002\u5bf9\u5543\u54ac\u4ed6\u7684\u50f5\u5c38\u9020\u6210\u51cf\u901f\u548c\u6bcf\u79d220\u4f24\u5bb3</color>","<color=#e6300d>\u4ea1\u8bed: </c><color=#e6300d>\u51bb\u7ed33*3\u8303\u56f4\u5185\u7684\u6240\u6709\u50f5\u5c383\u79d2\u548c20\u79d2\u51cf\u901f\u3002</color>","\u575a\u679c\u5728\u51b0\u7bb1\u51fa\u6765\u540e\uff0c\u8d76\u7d27\u591a\u7a7f\u4e86\u51e0\u4ef6\u8863\u670d\uff0c\u4f46\u8ba9\u4ed6\u6ca1\u60f3\u5230\u7684\u662f\uff1a\u8863\u670d\u4e5f\u88ab\u51bb\u4f4f\u4e86\u2026\u2026","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>150</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u51b0\u51bb\u575a\u679c")],[i.pzaPlantEnum.TreasureBuster,new d(i.pzaPlantEnum.TreasureBuster,"\u5b9d\u85cf\u541e\u566c\u8005\u80fd\u5236\u9020\u4e00\u4e2a\u80fd\u5236\u9020\u8d22\u5b9d\u7684\u5751\u3002",null,null,null,"<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u5751\u6d1e\u4f4d\u7f6e\u6bcf3\u79d2\u751f\u4ea7\u4e00\u4e2a\u7269\u54c1\u3002\uff08\u5c0f\u9633\u514960%\uff0c\u666e\u901a\u9633\u514930%\uff0c\u5927\u9633\u514910%\uff09\u5f53\u5751\u6d1e\u6d88\u5931\u65f6\uff0c\u751f\u4ea7\u4e00\u5f20\u5361\u7247\uff08\u9633\u5149\u70b8\u5f3980%\uff0c\u968f\u673a\u91d1\u536120%\uff09</color>",null,"\u201c\u541b\u5b50\u7231\u8d22\uff0c\u53d6\u4e4b\u6709\u9053\u3002\u201d\u5b9d\u85cf\u541e\u566c\u8005\u6307\u7740\u90a3\u91d1\u9ec4\u8272\u7684\u5751\u201c\u9053\u201d\u8bf4\uff0c\u201c\u81f3\u4e8e\u2018\u9053\u2019\u5728\u4f55\u65b9\uff0c\u6211\u5df2\u7ecf\u6307\u660e\u4e86\u65b9\u5411\u3002\u201d","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>88</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u5b9d\u85cf\u541e\u566c\u8005")],[i.pzaPlantEnum.SunBomb,new d(i.pzaPlantEnum.SunBomb,"\u80fd\u5c06\u50f5\u5c38\u8f6c\u5316\u4e3a\u9633\u5149\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>1800</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u81ea\u8eab\u4e3a\u4e2d\u5fc3\u5468\u56f41.5\u683c\u7684\u5706</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u80fd\u5c06\u50f5\u5c38\u8f6c\u5316\u4e3a\u9633\u5149\u3002</color>",null,"\u5728\u662f\u5426\u8981\u4ece\u50f5\u5c38\u8eab\u4e0a\u83b7\u53d6\u9633\u5149\u7684\u95ee\u9898\u4e0a\uff0c\u9633\u5149\u70b8\u5f39\u548c\u5411\u65e5\u8475\u6709\u8fc7\u6fc0\u70c8\u7684\u4e89\u6267\uff0c\u4f46\u662f\u8fd9\u5e76\u4e0d\u59a8\u788d\u5979\u5728\u6bcf\u5468\u56db\u7684\u4e0b\u5348\u51c6\u65f6\u53c2\u52a0\u9633\u5149\u7231\u597d\u8005\u4ff1\u4e50\u90e8\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>200</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u9633\u5149\u70b8\u5f39")],[i.pzaPlantEnum.MelonNut,new d(i.pzaPlantEnum.MelonNut,"\u897f\u74dc\u575a\u679c\u53ef\u4ee5\u5bf9\u6210\u7fa4\u7684\u50f5\u5c38\u9020\u6210\u5de8\u5927\u4f24\u5bb3\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>4000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>80/1.5s\uff0c\u5bf9\u5468\u56f4\u7684\u50f5\u5c38\u9644\u5e26\u6e85\u5c04\u4f24\u5bb326</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u6b63\u524d\u65b9\u6574\u884c</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u653b\u9632\u4e00\u4f53</color>",null,"\u6bcf\u4e2a\u4eba\u7b2c\u4e00\u6b21\u89c1\u5230\u4ed6\u90fd\u4f1a\u7591\u60d1\u4ed6\u5230\u5e95\u662f\u897f\u74dc\u8fd8\u662f\u575a\u679c\uff0c\u4f46\u662f\u4ed6\u575a\u5b9a\u8ba4\u4e3a\u81ea\u5df1\u662f\u897f\u74dc\uff1a\u201c\u4f60\u770b\u770b\u6211\uff0c\u6211\u80af\u5b9a\u662f\u897f\u74dc\u4e0d\u662f\u575a\u679c\uff0c\u8fd9\u6709\u4ec0\u4e48\u53ef\u4ee5\u7591\u60d1\u7684\uff1f\u201d\u4f46\u662f\u4e00\u5230\u590f\u5929\u4ed6\u53c8\u4f1a\u8ba4\u4e3a\u81ea\u5df1\u662f\u575a\u679c\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>150</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u897f\u74dc\u575a\u679c")],[i.pzaPlantEnum.HoleNut,new d(i.pzaPlantEnum.HoleNut,"\u4ed6\u80fd\u963b\u6321\u77ff\u5de5\u54e6\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>4000</color>",null,null,"<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u8ba9\u77ff\u5de5\u63d0\u524d\u51fa\u571f</color>","<color=#e6300d>\u4ea1\u8bed. \u88ab\u94f2\u6389: </c><color=#e6300d>\u7559\u4e0b\u4e00\u4e2a\u5751</color>","\u5982\u4f55\u5236\u4f5c\u5751\u6d1e\u575a\u679c\u7684\u65b0\u5e3d\u5b50\uff0c\u4e00\u53ea\u662f\u690d\u7269\u4eec\u6d25\u6d25\u4e50\u9053\u7684\u8bdd\u9898\u3002\u201c\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u4e00\u70b9\u571f\u58e4\uff0c9.55\u76ce\u53f8\u5316\u80a5\uff0c\u4ee5\u53ca\u4e00\u70b9\u56db\u7ef4\u788e\u7247\uff0c\u5c31\u53ef\u4ee5\u5236\u4f5c\u5b8c\u6210\u4e86\u3002\u201d\u5bf9\u4e8e\u8fd9\u5957\u8bf4\u8f9e\uff0c\u6bc1\u706d\u83c7\u55e4\u4e4b\u4ee5\u9f3b\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>0</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u5751\u6d1e\u575a\u679c")],[i.pzaPlantEnum.MagnetNut,new d(i.pzaPlantEnum.MagnetNut,"\u78c1\u529b\u575a\u679c\u53ef\u4ee5\u7528\u78c1\u529b\u5438\u53d6\u50f5\u5c38\u7684\u5934\u76d4\u7b49\u5176\u4ed6\u91d1\u5c5e\u7269\u54c1\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>4000</color>",null,"<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u81ea\u8eab\u4e3a\u4e2d\u5fc3\u5468\u56f4\u4e09\u683c\u7684\u5706\u3002</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u79fb\u9664\u50f5\u5c38\u8eab\u4e0a\u7684\u91d1\u5c5e</color>",null,"\u201c\u7269\u7406\u5b66\u5bb6\u4e89\u8bba\u7684\u7126\u70b9\u4ece\u6765\u4e0d\u5728\u4e8e\u4e3a\u4ec0\u4e48\u4e00\u66f4\u575a\u679c\u5c31\u80fd\u4ea7\u751f\u91d1\u5c5e\u4f5c\u7528\u529b\u3002\u201d\u78c1\u529b\u575a\u679c\u8c08\u5230\uff0c\u201c\u5176\u5b9e\u5728\u54f2\u5b66\u5c42\u9762\u5c31\u5f88\u597d\u89e3\u91ca\u4e86\uff0c\u6211\u601d\u6545\u6211\u5728\u3002\u201d\u78c1\u529b\u575a\u679c\u575a\u4fe1\u81ea\u5df1\u8bfb\u5b8c\u738b\u9633\u660e\u5fc3\u5b66\u4f1a\u66f4\u6709\u6240\u6536\u83b7\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>150</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u78c1\u529b\u575a\u679c")],[i.pzaPlantEnum.ZombieNut,new d(i.pzaPlantEnum.ZombieNut,"\u600e\u4e48\u6df7\u8fdb\u6765\u4e86\u4e00\u53ea\u50f5\u5c38\uff1f","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>4000</color>",null,null,"<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u6bcf30\u79d2\u53ec\u5524\u4e00\u4e2a\u9b45\u60d1\u575a\u679c\u50f5\u5c38</color>",null,"\u201c\u5f88\u591a\u4eba\u7591\u60d1\u6211\u4eec\u9762\u5bf9\u7684\u50f5\u5c38\u4e3a\u4ec0\u4e48\u6ca1\u6709\u611f\u67d3\u80fd\u529b\uff0c\u73b0\u5728\u6211\u6765\u6f84\u6e05\u4e00\u4e0b\u3002\u201d\u6709\u7684\u575a\u679c\u5899\u53c8\u56de\u5fc6\u8d77\u4e86\u66fe\u7ecf\u7684\u6838\u6843\u76ae\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>200</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u50f5\u5c38\u575a\u679c\u5899")],[i.pzaPlantEnum.VipNut,new d(i.pzaPlantEnum.VipNut,"\u81f3\u5c0aVIP\uff0c\u53ea\u9700\u8981\u6700\u4fbf\u5b9c\u7684\u4ef7\u683c\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>4000</color>",null,null,"<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u6bcf25\u79d2\u751f\u4ea725\u9633\u5149</color>","<color=#e6300d>\u4ea1\u8bed: </c><color=#e6300d>\u751f\u4ea7300\u9633\u5149\uff1b100\u79d2\u540e\u957f\u5927\uff0c\u957f\u5927\u540e\u589e\u52a04000\u8840\n\u4ea1\u8bed: \u751f\u4ea7600\u9633\u5149</color>","\u4f17\u591a\u575a\u679c\u4e2d\u6700\u6562\u4e8e\u5949\u732e\u81ea\u5df1\u7684\u575a\u679c\uff0c\u5728\u627f\u53d7\u4e86\u5f88\u591a\u575a\u679c\u5305\u624e\u672f\u540e\uff0c\u88ab\u8d4b\u4e88\u4e86\u7687\u51a0\u3002\u201c\u54e6\u5929\u5450\uff0c\u73b0\u5728\u6211\u611f\u89c9\u6bd4\u4efb\u4f55\u7684\u575a\u679c\u90fd\u5389\u5bb3\uff01\u201dVIP\u575a\u679c\u8bf4\u3002\u201c\u5c0f\u5fc3\u70b9\uff0c\u522b\u628a\u5a01\u4e9a\u5f04\u65ad\u4e86\uff01\u201d\u4ed6\u6b63\u5728\u4e00\u4e2a\u5267\u573a\u91cc\u626e\u6f14\u592a\u9633\u7684\u89d2\u8272\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>100</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u81f3\u5c0aVIP\u575a\u679c")],[i.pzaPlantEnum.HeighIceNut,new d(i.pzaPlantEnum.HeighIceNut,"\u9ad8\u51b0\u679c\u5177\u6709\u5f3a\u5927\u7684\u9632\u5b88\u80fd\u529b\uff01\u8fd8\u80fd\u53d1\u5c04\u5b50\u5f39\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>8000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>20*6/1.5s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u524d\u65b9\u4e00\u884c</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u53d1\u5c046\u679a\u51b0\u8c46\uff0c\u53cd\u4f24\u51cf\u901f1/\u5e27.\u53cd\u4f24\u6982\u7387\u51bb\u7ed3\u654c\u4eba\uff0c\u62b5\u5fa18\u6b21\u9524\u51fb/\u78be\u538b</color>",null,"\u4ece\u5c0f\u65f6\u5019\u8d77\u5927\u5bb6\u5c31\u56e0\u4e3a\u77ee\u5c0f\u4e0d\u559c\u6b22\u6211\uff0c\u6240\u4ee5\u6211\u4e0b\u5b9a\u51b3\u5fc3\u8981\u53d8\u5f3a\uff0c\u6b63\u662f\u8fd9\u6837\u6211\u624d\u6709\u4e86\u6a2a\u63a8\u4e00\u8def\u7684\u5f3a\u5927\u529b\u91cf\u3002\u4f46\u5b64\u72ec\u611f\u4f9d\u65e7\u4e0d\u51cf\uff0c\u5bfc\u81f4\u5916\u8868\u9010\u6e10\u53d8\u5f97\u548c\u5185\u5fc3\u4e00\u6837\u51b0\u51b7\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>500</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u9ad8\u51b0\u679c")],[i.pzaPlantEnum.PumpkinPurple,new d(i.pzaPlantEnum.PumpkinPurple,"\u5fe7\u90c1\u5357\u74dc\u5934\uff0c\u4fdd\u62a4\u5176\u4ed6\u690d\u7269\uff0c\u540c\u65f6\u5411\u56db\u5468\u55b7\u5c04\u5b62\u5b50\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>4000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>\uff0820*4\uff09/2s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>3*3</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u81f3\u5c0a\u91d1\u5361\u573a\u4e0a\u6bcf\u6709\u4e00\u682a\u76f8\u540c\u690d\u7269\uff0c\u5361\u7247\u4ef7\u683c\u589e\u52a0100</color>",null,"\u6b63\u5982\u5927\u5634\u82b1\u548c\u575a\u679c\u5899\u4e00\u6837\uff0c\u8bb8\u591a\u690d\u7269\u90fd\u66fe\u662f\u5927\u5b66\u820d\u53cb\u3002\u201c\u6211\u548c\u5fe7\u90c1\u83c7\u7b80\u76f4\u60c5\u540c\u624b\u8db3\u3002\u201d\u5357\u74dc\u5934\u8bf4\u9053\u3002\u662f\u54ce\uff0c\u4ed6\u5df2\u7ecf\u628a\u5fe7\u90c1\u83c7\u5f53\u4f5c\u4e86\u4ed6\u7684\u201c\u624b\u8db3\u201d\u3002\u4e0d\u8fc7\uff0c\u5411\u65e5\u8475\u548c\u8c4c\u8c46\u5c04\u624b\u4f3c\u4e4e\u4e0d\u592a\u4eb2\u8fd1\u2014\u2014\u5b83\u4eec\u603b\u662f\u80cc\u5bf9\u80cc\u9760\u7740\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>300</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u5fe7\u90c1\u5357\u74dc\u5934")],[i.pzaPlantEnum.TorchNut,new d(i.pzaPlantEnum.TorchNut,"\u9632\u5b88\u6574\u6d3b\u4e24\u4e0d\u8bef\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>4000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>1/\u5e27</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u81ea\u8eab\u6240\u5728\u683c</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u70b9\u71c3\u8c4c\u8c46</color>",null,"\u575a\u679c\u70ed\u7231\u70df\u706b\uff0c\u5bf9\u4ed6\u800c\u8a00\uff0c\u5404\u7c7b\u70df\u706b\u767e\u73a9\u4e0d\u538c\u3002\u201c\u4e00\u63d0\u5230\u70df\u82b1\uff0c\u6211\u4fbf\u8111\u888b\u53d1\u70ed\uff0c\u8fde\u8eab\u4f53\u4e5f\u53d8\u5f97\u71e5\u70ed\u8d77\u6765\uff01\u201d\u4e5f\u8bb8\u53d1\u70ed\u7684\u4e0d\u53ea\u662f\u8111\u888b\u2014\u2014\u770b\u6765\u4ed6\u5e76\u6ca1\u6709\u610f\u8bc6\u5230\u575a\u679c\u58f3\u5c5e\u4e8e\u6613\u71c3\u7269\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>100</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u706b\u70ac\u575a\u679c")],[i.pzaPlantEnum.FireNut,new d(i.pzaPlantEnum.FireNut,"\u90a3\u5929\u575a\u679c\u5899\u5c45\u7136\u4e5f\u5728\u573a\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>4000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>\u7206\u70b81800\uff0c\u53cd\u4f2420/s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e00\u884c</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u6e05\u9664\u51b0\u9053\u3002\u5543\u54ac\u4ed6\u7684\u50f5\u5c38\u53d8\u7ea2\uff0c\u6bcf\u79d2\u53d7\u523020\u4f24\u5bb3\uff0c\u6301\u7eed3\u79d2\u3002</color>",null,"\u706b\u7206\u575a\u679c\u5899\u603b\u662f\u628a\u8fa3\u6912\u80cc\u5728\u8eab\u4e0a\uff0c\u4eff\u4f5b\u8fd9\u662f\u975e\u5e38\u5b9d\u8d35\u7684\u4e1c\u897f\u3002\u201c\u8fd9\u662f\u6211\u73cd\u8d35\u7684\u6218\u53cb\uff01\u201d\u706b\u7206\u575a\u679c\u5899\u8fd9\u4e48\u8bf4\uff0c\u4f46\u5b9e\u9645\u4e0a\u90a3\u53ea\u662f\u666e\u901a\u7684\u8fa3\u6912\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>150</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u706b\u7206\u575a\u679c\u5899")],[i.pzaPlantEnum.IceCat,new d(i.pzaPlantEnum.IceCat,"\u6700\u5f3a\u5927\u7684\u732b\u5c3e\u8349\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>80*2/1.5s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5168\u5c4f\u8ffd\u8e2a</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u8303\u56f4\u51cf\u901f</color>",null,"\u51b0\u74dc\u732b\u5c3e\u8349\u6e34\u671b\u6210\u4e3a\u51b0\u96ea\u5947\u7f18\u7684\u4e3b\u89d2\uff0c\u51b0\u96ea\u738b\u56fd\u7684\u516c\u4e3b\u3002\u5979\u51e0\u4e4e\u6210\u529f\u4e86\uff0c\u76f4\u5230\u5979\u4ed4\u7a7f\u5c71\u51b0\u96ea\u505a\u6210\u7684\u793c\u670d\u65f6\uff0c\u6fc0\u52a8\u5730\u53d1\u51fa\u4e86\u201c\u6c6a\u6c6a\u201d\u7684\u53eb\u58f0\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>700</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u51b0\u74dc\u732b\u5c3e\u8349")],[i.pzaPlantEnum.HamburgShooter,new d(i.pzaPlantEnum.HamburgShooter,"\u6c49\u5821\u5c04\u624b\u4e00\u6b21\u5c04\u51fa8\u679a\u968f\u673a\u5b50\u5f39\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>4000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>\uff08160~640\uff09/2.5s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u6b63\u524d\u65b9\u6574\u884c</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u751f\u4ea7\u9633\u5149\uff0c\u8840\u91cf\u539a</color>",null,"\u6c49\u5821\u5c04\u624b\u6700\u8ba8\u538c\u522b\u4eba\u8bf4\u4ec0\u4e48\u201c\u9ea6\u95e8\u201d\u201c\u80af\u95e8\u201d\u7684\uff0c\u4ed6\u53ea\u60f3\u4fdd\u6301\u521d\u5fc3\u2014\u2014\u201c\u6253\u51fb\u50f5\u5c38\u662f\u6211\u7684\u804c\u8d23\uff0c\u800c\u6c49\u5821\u738b\u662f\u6211\u6c38\u8fdc\u7684\u4fe1\u4ef0\u201d\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>600</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u6c49\u5821\u5c04\u624b")],[i.pzaPlantEnum.HotDog,new d(i.pzaPlantEnum.HotDog,"\u975e\u5e38\u597d\u5403\u7684\u70ed\u72d7\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>6000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>40*8/2s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e24\u8fb9</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u706b\u7403\uff0c\u9ec4\u6cb9\uff0c\u5377\u5fc3\u83dc</color>",null,"\u201c\u9ec4\u6cb9\uff0c\u7389\u7c73\uff0c\u8c4c\u8c46\u2026\u2026\u201d\u70ed\u72d7\u5c04\u624b\u5ff5\u5ff5\u6709\u8bcd\u3002\u8bf7\u522b\u8bef\u4f1a\uff0c\u8fd9\u4e0d\u662f\u70ed\u72d7\u5c04\u624b\u7684\u5e74\u7ec8\u603b\u7ed3\uff0c\u8fd9\u662f\u7389\u7c73\u5377\u7684\u914d\u65b9\u2014\u2014\u4e3a\u623f\u5b50\u91cc\u7684\u6234\u592b\u63d0\u4f9b\u7389\u7c73\u5377\uff0c\u662f\u5411\u5de6\u7684\u5c04\u624b\u7684\u4e3b\u8981\u804c\u8d23\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>500</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u70ed\u72d7\u5c04\u624b")],[i.pzaPlantEnum.ShiftNut,new d(i.pzaPlantEnum.ShiftNut,"\u575a\u679c\u6a21\u4eff\u8005\u80fd\u968f\u673a\u53d8\u6210\u4e00\u79cd\u5c0f\u575a\u679c\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>",null,null,null,null,"\u575a\u679c\u6a21\u4eff\u8005\u4e00\u76f4\u5f88\u7fa1\u6155\u5176\u4ed6\u575a\u679c\uff0c\u201c\u5982\u679c\u6211\u80fd\u50cf\u4ed6\u4eec\u4e00\u6837\u9177\u5c31\u597d\u4e86\u3002\u201d\u4e8e\u662f\u4ed6\u501f\u6765\u4e86\u5176\u4ed6\u575a\u679c\u7684\u8863\u670d\u7528\u6765\u88c5\u626e\u81ea\u5df1\u3002\u4f46\u662f\u4e8b\u5b9e\u8bc1\u660e\u65e0\u8bba\u53d8\u6210\u4ec0\u4e48\u6837\u7684\u575a\u679c\u90fd\u662f\u4e00\u6837\u7684\u3002\u56e0\u4e3a\u50f5\u5c38\u4ece\u4e0d\u7ba1\u81ea\u5df1\u5403\u7684\u662f\u4ec0\u4e48\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>100</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u575a\u679c\u6a21\u4eff\u8005")],[i.pzaPlantEnum.DoomCannon,new d(i.pzaPlantEnum.DoomCannon,"\u70b9\u51fb\u6bc1\u706d\u52a0\u519c\u70ae\u53d1\u5c04\u81f4\u547d\u7684\u6bc1\u706d\u70ae\u5f39\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>1000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>1800</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u624b\u52a8\u53d1\u5c04\uff0c\u6467\u6bc1\u70b9\u51fb\u533a\u57df\u7684\u50f5\u5c38</color>","<color=#aa582b>\u7206\u70b8\uff1a</c><color=#e6300d>\u51c6\u5fc3\u4e3a\u4e2d\u5fc3\u5468\u56f43.5\u683c\u7684\u5706</color>",null,"\u4e0d\u662f\u7389\u7c73\u70ae\u800c\u662f\u6bc1\u706d\u83c7\uff0c\u4e0d\u662f\u7206\u7c73\u82b1\u800c\u662f\u8611\u83c7\u4e91\uff0c\u6bc1\u706d\u52a0\u519c\u70ae\u603b\u662f\u641e\u4e0d\u61c2\u81ea\u5df1\u5230\u5e95\u662f\u54ea\u4e2a\u5bb6\u65cf\u7684\u3002\u201c\u6211\u77e5\u9053\uff0c\u8611\u83c7\u7389\u7c73\u6c64\uff01\u201d\u4e00\u4e2a\u5c0f\u8c4c\u8c46\u5c04\u624b\u8bf4\u3002\u96be\u9053\u6234\u592b\u524d\u5929\u5403\u7684\u662f\u8fd9\u4e2a\uff1f","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>1000</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u6bc1\u706d\u52a0\u519c\u70ae")],[i.pzaPlantEnum.SunFlowerPlus,new d(i.pzaPlantEnum.SunFlowerPlus,"\u4f1a\u957f\u5927\u7684\u5411\u65e5\u8475\uff0c\u9633\u5149\u4ea7\u91cfNO.2","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>",null,null,"<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6bcf25s\u751f\u4ea740\u70b9\u9633\u5149\uff1b120s\u957f\u5927\u540e\uff0c\u6bcf25s\u751f\u4ea775\u70b9\u9633\u5149</color>",null,"\u7eda\u4e3d\u7684\u5e3d\u5b50\u7ed9\u4e86\u5411\u65e5\u8475\u66f4\u9ad8\u7684\u989c\u503c\uff0c\u5728\u690d\u7269\u754c\u548c\u670d\u88c5\u8282\u4e00\u70ae\u8d70\u7ea2\u3002\u5f53\u7136\uff0c\u4ed6\u4e5f\u8981\u56de\u5f52\u672c\u8d28\uff0c\u7ed9\u690d\u7269\u63d0\u4f9b\u9633\u5149\uff0c\u8ba9\u4ed6\u4eec\u4f5c\u6218\u3002\u9633\u5149\u5411\u65e5\u8475\u8fd9\u4e48\u60f3\u7740\uff0c\u5b8c\u5168\u6ca1\u6709\u542c\u5230\u4ed6\u8eab\u540e\u7684\u690d\u7269\u8bf4\uff1a\u201c\u4f60\u6321\u6211\u4eec\u89c6\u7ebf\u4e86\uff0c\u8d70\u5f00\u5566\uff01\u201d","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>100</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u5feb</color>","\u9633\u5149\u5411\u65e5\u8475")],[i.pzaPlantEnum.SunBean,new d(i.pzaPlantEnum.SunBean,"\u9633\u5149\u8c46\uff0c\u4e0d\u5360\u4f4d\u7f6e\u7684\u9633\u5149\u4f5c\u7269\uff0c\u8fd8\u4f1a\u957f\u5927\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>",null,null,"<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6bcf25\u79d2\u751f\u4ea715\u70b9\u9633\u5149\uff1b90\u79d2\u540e\u957f\u5927\uff0c\u6bcf25\u79d2\u751f\u4ea725\u70b9\u9633\u5149</color>",null,"\u9633\u5149\u8c46\u662f\u575a\u5b9a\u7684\u6e05\u6d01\u80fd\u6e90\u652f\u6301\u8005\u3002\u201c\u4e5f\u8bb8\u4f60\u4f1a\u60f3\u8bf4\uff0c\u592a\u9633\u80fd\u672c\u8eab\u4e0d\u5c31\u662f\u6e05\u6d01\u80fd\u6e90\u5417\uff1f\u201d\u9633\u5149\u8c46\u8bf4\uff0c\u201c\u4f46\u8fd9\u4e0d\u662f\u91cd\u70b9\uff01\u91cd\u70b9\u5728\u4e8e\u5229\u7528\u7387\uff0c\u6211\u4eec\u81f4\u529b\u4e8e\u8986\u76d6\u6bcf\u4e00\u5bf8\u53ef\u5229\u7528\u7684\u8349\u576a\uff01\u201d","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>50</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u9633\u5149\u8c46")],[i.pzaPlantEnum.SunMine,new d(i.pzaPlantEnum.SunMine,"\u571f\u8c46\u96f7\u5177\u6709\u5f3a\u5927\u7684\u5a01\u529b\uff1a\u4f46\u662f\u4ed6\u4eec\u9700\u8981\u70b9\u65f6\u95f4\u6765\u6b66\u88c5\u81ea\u5df1\u3002\u4f60\u5e94\u628a\u4ed6\u4eec\u79cd\u5728\u50f5\u5c38\u524d\u8fdb\u7684\u8def\u4e0a\uff0c\u5f53\u4ed6\u4eec\u4e00\u88ab\u63a5\u89e6\u5c31\u4f1a\u7206\u70b8\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>1800</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u81ea\u8eab\u6240\u5728\u683c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5355\u72ec\u4f7f\u7528\uff0c\u9700\u898115\u79d2\u7684\u88c5\u5907\u65f6\u95f4\u3002\u7206\u51fa\u4e00\u4e2a\u5927\u9633\u5149\u3002</color>",null,"\u4ece\u50f5\u5c38\u8eab\u4e0a\u83b7\u53d6\u9633\u5149\uff0c\u4e0d\u53ea\u662f\u9633\u5149\u70b8\u5f39\u7684\u60f3\u6cd5\u2014\u2014\u9633\u5149\u571f\u8c46\u4ea6\u6709\u3002\u201c\u6211\u4eec\u4e4b\u95f4\u4e0d\u5b58\u5728\u6284\u88ad\u5173\u7cfb\u2014\u2014\u4e8b\u5b9e\u4e0a\uff0c\u9633\u5149\u4ff1\u4e50\u90e8\u662f\u6211\u5f00\u521b\u7684\uff0c\u4ed6\u662f\u6211\u7684\u6210\u5458\u3002\u201d\u9633\u5149\u571f\u8c46\u5982\u662f\u8bf4\u9053\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>0</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u9633\u5149\u571f\u8c46\u96f7")],[i.pzaPlantEnum.FireMine,new d(i.pzaPlantEnum.FireMine,"\u90a3\u5929\u571f\u8c46\u96f7\u548c\u706b\u7206\u8fa3\u6912\u90fd\u559d\u591a\u4e86\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>1800</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e00\u884c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6e05\u9664\u51b0\u9053</color>",null,"\u706b\u7206\u5730\u96f7\u7684\u813e\u6c14\u4e00\u76f4\u5f88\u66b4\u8e81\uff0c\u5979\u975e\u5e38\u8ba8\u538c\u522b\u4eba\u8e29\u5728\u5979\u5934\u4e0a\u3002\u201c\u90a3\u4f1a\u7834\u574f\u6211\u7684\u5934\u9970\uff01\u201d\u706b\u7206\u5730\u96f7\u8fd9\u4e48\u8bf4\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>25</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u706b\u7206\u5730\u96f7")],[i.pzaPlantEnum.SquashNut,new d(i.pzaPlantEnum.SquashNut,"\u7a9d\u74dc\u575a\u679c\u80fd\u7ed9\u4e88\u654c\u4eba\u81f4\u547d\u4e00\u51fb\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>2000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>1800</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e00\u683c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4ea1\u8bed\uff1a\u538b\u6241\u4e00\u683c\u5185\u7684\u6240\u6709\u50f5\u5c38\u3002</color>",null,"\u7a9d\u74dc\u575a\u679c\u548c\u571f\u8c46\u5730\u96f7\u662f\u9752\u6885\u7af9\u9a6c\uff0c\u4ed6\u4eec\u603b\u6709\u804a\u4e0d\u5b8c\u7684\u5929\u3002\u201c\u6211\u559c\u6b22\u505a\u597d\u5b8c\u5168\u7684\u51c6\u5907\uff0c\u5230\u6700\u540e\u4e00\u523b\u518d\u52a8\u624b\uff01\u201d\u7a9d\u74dc\u575a\u679c\u8bf4\u9053\u3002\u571f\u8c46\u5730\u96f7\u8d5e\u540c\u4ed6\u7684\u60f3\u6cd5\uff0c\u53ea\u4e0d\u8fc7\u4ed6\u5e76\u4e0d\u559c\u6b22\u9165\u9165\u9ebb\u9ebb\u7684\u80cc\u90e8\u6309\u6469\u2014\u2014\u6765\u81ea\u50f5\u5c38\u7684\u6309\u6469\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>50</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u7a9d\u74dc\u575a\u679c")],[i.pzaPlantEnum.IceSquash,new d(i.pzaPlantEnum.IceSquash,"\u51b0\u83c7\u7a9d\u74dc\u4f1a\u538b\u6241\u7b2c\u4e00\u4e2a\u63a5\u8fd1\u5b83\u7684\u50f5\u5c38\uff0c\u5e76\u51bb\u7ed3\u5168\u573a\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>1800</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u8eab\u540e\u6781\u5c0f\u8303\u56f4\u53ca\u6b63\u524d\u65b9\u7ea61.5\u683c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u51bb\u7ed3\u5168\u573a3\u79d2\uff0c\u51cf\u901f15\u79d2</color>",null,"\u8fd9\u662f\u7a9d\u74dc\u56f0\u5728\u51b0\u7bb12000\u5e74\u540e\u53d8\u6210\u7684\u6837\u5b50\uff0c\u4f60\u8bf4\u4ed6\u600e\u4e48\u56de\u5230\u73b0\u5728\u7684\uff1f\u6211\u4eec\u53d1\u73b0\u51b0\u51bb\u7a9d\u74dc\u65f6\u53ea\u53d1\u73b0\u4e86\u4f20\u9001\u673a\u7684\u4e00\u5c0f\u5757\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>125</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u51b0\u83c7\u7a9d\u74dc")],[i.pzaPlantEnum.SquashKing,new d(i.pzaPlantEnum.SquashKing,"\u5f71\u6d41\u4e4b\u4e3b\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>1800*3</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>3\u683c</color>",null,null,"\u5176\u5b9e\u7a9d\u74dc\u66f4\u559c\u6b22\u90a3\u4ef6\u6597\u7bf7\u800c\u4e0d\u662f\u738b\u51a0\uff0c\u6bcf\u6b21\u738b\u51a0\u90fd\u5f04\u5f97\u4ed6\u5934\u76ae\u53d1\u75d2\u3002\u201c\u8981\u4e0d\u662f\u53ef\u4ee5\u5206\u8eab\u8c01\u8fd8\u5e26\u8fd9\u738b\u51a0\u554a\uff01\u201d","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>100</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u5f71\u6d41\u7a9d\u74dc\u738b")],[i.pzaPlantEnum.ButterJoker,new d(i.pzaPlantEnum.ButterJoker,"\u71c3\u70e7\u4e00\u884c\u548c\u4e00\u5217\u7684\u50f5\u5c38\u5e76\u8d4b\u4e88\u9ec4\u6cb9\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>1800</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e00\u884c\u548c\u4e00\u5217</color>",null,null,"\u201c\u542c\u8bf4\u5fe7\u90c1\u83c7\u5f00\u59cb\u5356\u9ec4\u6cb9\u5566\uff0c\u6211\u8bd5\u7740\u4e70\u56de\u6765\u4e86\u4e00\u4e9b\u6d82\u5728\u8eab\u4e0a\u3002\u201d\u9ec4\u6cb9JOKER\u8fd9\u4e48\u8bf4\uff0c\u5f53\u5176\u4ed6\u690d\u7269\u95ee\u8d77\u4ed6\u7684\u5c0f\u4e11\u88c5\u626e\u65f6\uff0c\u5b83\u53c8\u8bf4\u201c\u60f3\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u6539\u6389\u8fa3\u6761\u5bb6\u65cf\u90a3\u5947\u7279\u7684\u66b4\u813e\u6c14\u201d\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>175</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u9ec4\u6cb9JOKER")],[i.pzaPlantEnum.GarlicJalapeno,new d(i.pzaPlantEnum.GarlicJalapeno,"\u4f7f\u50f5\u5c38\u6362\u884c\uff0c\u5e76\u9020\u6210\u90e8\u5206\u4f24\u5bb3\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>500</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u4e00\u884c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4f7f\u50f5\u5c38\u6362\u884c</color>",null,"\u201c\u4f60\u6562\u60f3\u5417\uff0c\u4e0d\u4ec5\u6211\u5403\u8d77\u6765\u662f\u81ed\u7684\uff0c\u5c31\u8fde\u70e7\u51fa\u53bb\u7684\u706b\u7130\u4e5f\u662f\u81ed\u7684\uff0c\u8fde\u50f5\u5c38\u90fd\u53d7\u4e0d\u4e86\u4e8e\u662f\u8fdc\u79bb\u4e86\u6211\u3002\u201d\u5927\u849c\u8fa3\u6912\u8bf4\u9053\u3002\u4e0d\u8fc7\u597d\u5728\u690d\u7269\u4eec\u4e0d\u5acc\u5f03\u4ed6\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>50</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u5927\u849c\u8fa3\u6912")],[i.pzaPlantEnum.CherryJalapeno,new d(i.pzaPlantEnum.CherryJalapeno,"\u6a31\u6843\u8fa3\u6912\u53ef\u4ee5\u6467\u6bc1\u4e09\u6761\u7ebf\u4e0a\u7684\u654c\u4eba\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>1800</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u81ea\u8eab\u6240\u5728\u4e00\u6574\u884c\u548c\u76f8\u90bb\u4e24\u884c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6467\u6bc1\u51b0\u9053\uff0c\u62b5\u6d88\u51b0\u51cf\u901f</color>",null,"\u6a31\u6843\u8fa3\u6912\uff1a\u201c\u6211\u8981\u7206\u4e86\u201d\uff0c\u201c\u4e0d\uff0c\u5e94\u8be5\u662f\u6211\u8981\u70b8\u4e86\uff01\u201d\u3002\u6a31\u6843\u70b8\u5f39\u4e24\u5144\u5f1f\u5728\u201c\u7206\u70b8\u201d\u8fd9\u4e2a\u8bcd\u4e0a\u4e89\u8bba\u8bb8\u4e45\u2014\u2014\u4e0d\u8fc7\u706b\u201c\u7206\u201d\u8fa3\u6912\u7684\u51fa\u73b0\u5e73\u606f\u4e86\u8fd9\u573a\u4e89\u8bba\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>275</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u6a31\u6843\u8fa3\u6912")],[i.pzaPlantEnum.IceBlover,new d(i.pzaPlantEnum.IceBlover,"\u5439\u9000\u5168\u5c4f\u654c\u4eba\uff0c\u540c\u65f6\u5177\u6709\u51cf\u901f\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>20*11/\u884c</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5168\u5c4f</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5439\u9000\u654c\u4eba\uff0c\u91ca\u653e\u51b0\u5f39</color>",null,"\u201c\u563f\uff0c\u4f19\u8ba1\uff0c\u6765\u611f\u53d7\u98ce\u66b4\u5427\uff01\u201d\u5bd2\u51b0\u4e09\u53f6\u8349\u7684\u6c14\u573a\u5e2d\u5377\u4e86\u5168\u573a\u3002\u4f46\u662f\u53c8\u6709\u8c01\u77e5\u9053\uff0c\u4ed6\u8bf4\u7684\u98ce\u66b4\u662f\u98d3\u98ce\u548c\u51b0\u96f9\u5462\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>150</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u5bd2\u51b0\u4e09\u53f6\u8349")],[i.pzaPlantEnum.PeaCannon,new d(i.pzaPlantEnum.PeaCannon,"\u8c4c\u8c46\u5927\u70ae\u80fd\u53d1\u5c04\u4e00\u679a\u5177\u6709\u51fb\u9000\u6548\u679c\u7684\u5927\u8c4c\u8c46\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>1000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>500/4s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u524d\u65b9\u4e00\u683c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4f24\u5bb3\u5de8\u5927\uff0c\u51fb\u9000\u50f5\u5c38</color>",null,"\u628a\u8c4c\u8c46\u5c04\u624b\u5934\u7684\u5927\u6a21\u578b\u642c\u5230\u8f66\u4e0a\u9887\u8d39\u529b\u6c14\uff0c\u6234\u592b\u5f53\u65f6\u8fd8\u95ea\u4e86\u8170\u3002\u7136\u540e\uff0c\u4ed6\u628a\u4e00\u4e2a\u8c4c\u8c46\u835a\u653e\u4e86\u8fdb\u53bb\u2026\u2026","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>500</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u8c4c\u8c46\u5927\u70ae")],[i.pzaPlantEnum.ButterGloomShroom,new d(i.pzaPlantEnum.ButterGloomShroom,"\u9ec4\u6cb9\u5fe7\u90c1\u83c7\u56f4\u7ed5\u81ea\u8eab\u91ca\u653e\u5927\u91cf\u70df\u96fe\u3001\u7389\u7c73\u7c92\u548c\u9ec4\u6cb9\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>\uff0820+20\uff09*4/2s\u6216\uff0820+40\uff09*4/2s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u81ea\u8eab\u4e3a\u4e2d\u5fc3\u5468\u56f48\u683c</color>",null,null,"\u9ec4\u6cb9\u5fe7\u90c1\u83c7\u7684\u9ec4\u6cb9\u5b9e\u9645\u4e0a\u6765\u81ea\u4e00\u6b21\u610f\u5916\u2014\u2014\u4ed6\u4e0d\u5c0f\u5fc3\u6389\u8fdb\u4e86\u4e00\u4e2a\u9ec4\u6cb9\u6876\u3002\u4e0d\u8fc7\u4ed6\u53d1\u73b0\u5927\u5bb6\u53d8\u5f97\u975e\u5e38\u559c\u6b22\u4ed6\uff0c\u4e8e\u662f\u4ed6\u53d8\u5f97\u4e0d\u662f\u5f88\u5fe7\u90c1\u4e86\u3002\u201c\u4f60\u8981\u6765\u70b9\u9ec4\u6cb9\u5417\uff1f\u201d\u9ec4\u6cb9\u5fe7\u90c1\u83c7\u5bf9\u7740\u4ed6\u7684\u987e\u5ba2\u8fd9\u4e48\u8bf4\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>600</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u9ec4\u6cb9\u5fe7\u90c1\u83c7")],[i.pzaPlantEnum.RandomPlantBox,new d(i.pzaPlantEnum.RandomPlantBox,"\u4e0b\u4e00\u4e2a\u60ca\u559c\u662f\uff1f",null,null,null,"<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u968f\u673a\u5f00\u51fa\u4e00\u682a\u690d\u7269</color>",null,"\u201c\u5982\u4f60\u6240\u89c1\uff0c\u6211\u662f\u4e00\u4e2a\u76d2\u5b50\u3002\u201d\u968f\u673a\u690d\u7269\u76d2\u5b50\u8bf4\u3002\u201c\u6211\u91cc\u9762\u6709\u4e9b\u79cd\u5b50\uff0c\u4f60\u53ef\u80fd\u4f1a\u627e\u5230\u6742\u4ea4\u79cd\u5b50\uff0c\u56e0\u4e3a\u5b83\u4eec\u5728\u91cc\u9762\u6253\u62f3\u51fb\uff08boxing\uff09\u3002\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u80fd\u5f00\u51fa\u7389\u7c73\u52a0\u519c\u70ae\u2026\u2026\u201d\u76d2\u5b50\u8fdf\u7591\u4e86\u4e00\u4e0b\u3002\u201c\u56e0\u4e3a\u4ed6\u662f\u88ab\u6324\u51fa\u6765\u7684\u3002\u201d","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>200</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u968f\u673a\u690d\u7269\u76d2\u5b50")],[i.pzaPlantEnum.PeaPool,new d(i.pzaPlantEnum.PeaPool,"\u8c4c\u8c46\u55b7\u6cc9\u53ef\u4ee5\u53d1\u5c04\u4e00\u5708\u8c4c\u8c46\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>1500</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>20*36/3s</color>","<color=#aa582b>\u8303\u56f4: </c><color=#e6300d>\u5168\u5c4f</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>360\u5ea6\u65e0\u6b7b\u89d2\u653b\u51fb</color>",null,"\u201c\u6295\u4e0b\u4e00\u4e2a\u8c4c\u8c46\uff0c\u8bb8\u4e00\u6b21\u613f\u671b\u3002\u201d\u8fd9\u662f\u8c4c\u8c46\u8bb8\u613f\u6c60\u7684\u6807\u8bed\u3002\u201c\u5582\uff0c\u4e0d\u8981\u6295\u522b\u7684\u4e1c\u897f\u8fdb\u53bb\uff01\u4e0d\u8981\u6295\u8fa3\u6912\u6c34\u554a\uff01\u201d\u6234\u592b\u6b63\u5728\u62e6\u4f4f\u4e00\u53ea\u706b\u7206\u8fa3\u6912\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>500</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u8c4c\u8c46\u8bb8\u613f\u6c60")],[i.pzaPlantEnum.SpikeRockNut,new d(i.pzaPlantEnum.SpikeRockNut,"\u94a2\u523a\u575a\u679c\u738b\u53ef\u4ee5\u624e\u7834\u591a\u4e2a\u8f6e\u80ce\uff0c\u963b\u6321\u50f5\u5c38\u8fdb\u653b\uff0c\u5e76\u5bf9\u9644\u8fd1\u7684\u50f5\u5c38\u9020\u6210\u4f24\u5bb3\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>8000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>20*2\u70b9/1s</color>","<color=#aa582b>\u8303\u56f4: </c><color=#e6300d>1*3</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u81f3\u5c0a\u91d1\u5361\n\u573a\u4e0a\u6bcf\u6709\u4e00\u682a\u76f8\u540c\u690d\u7269\uff0c\u5361\u7247\u4ef7\u683c\u589e\u52a0100</color>",null,"\u7531\u4e8e\u957f\u671f\u4e0d\u6d17\u6fa1\uff0c\u9ad8\u575a\u679c\u7684\u8eab\u4e0a\u957f\u6ee1\u4e86\u5730\u523a\uff0c\u4f46\u4ed6\u5374\u4e50\u5728\u5176\u4e2d\u3002\u201c\u8001\u5144\uff01\u4ed6\u4eec\u662f\u6211\u7684\u6218\u53cb\uff0c\u4f60\u600e\u4e48\u80fd\u8ba9\u6211\u629b\u5f03\u4ed6\u4eec\uff1f\u201d\u5f53\u6709\u4eba\u5efa\u8bae\u9ad8\u575a\u679c\u6e05\u6d01\u4e00\u4e0b\u81ea\u5df1\u65f6\uff0c\u9ad8\u575a\u679c\u5982\u6b64\u56de\u7b54\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>300</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u94a2\u523a\u575a\u679c\u738b")],[i.pzaPlantEnum.SunQueen,new d(i.pzaPlantEnum.SunQueen,"\u53d1\u5c04\u8ffd\u8e2a\u706b\u7403\uff0c\u751f\u4ea7\u5927\u91cf\u9633\u5149\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>1000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>40*6/1.5s</color>","<color=#aa582b>\u8303\u56f4: </c><color=#e6300d>\u5168\u5c4f\u8ffd\u8e2a</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6bcf25\u79d2\u751f\u4ea7150\u9633\u5149</color>",null,"\u8fd9\u662f\u5411\u65e5\u8475\u4e2d\u6700\u7231\u6652\u592a\u9633\u7684\u4e00\u53ea\uff0c\u88ab\u7ed9\u4e88\u4e86\u738b\u51a0\uff0c\u6210\u4e3a\u4e86\u5411\u65e5\u8475\u5973\u738b\u3002\u201c\u73b0\u5728\u6211\u53ef\u4ee5\u968f\u65f6\u5403\u514d\u8d39\u7684\u5976\u916a\u70e7\u70e4\u4e09\u660e\u6cbb\u4e86\u3002\u201d\u5411\u65e5\u8475\u5973\u738b\u8bf4\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>500</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u5411\u65e5\u8475\u5973\u738b")],[i.pzaPlantEnum.PeaSun,new d(i.pzaPlantEnum.PeaSun,"\u653b\u5b88\u517c\u5907\u7684\u57fa\u7840\u690d\u7269\uff0c\u68a6\u5f00\u59cb\u7684\u5730\u65b9\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>20/\u79d2</color>","<color=#aa582b>\u8303\u56f4</c><color=#e6300d>\u524d\u65b9\u4e00\u884c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6bcf25\u79d2\u751f\u4ea725\u70b9\u9633\u5149</color>",null,"\u6742\u4ea4\u690d\u7269\u4eec\u6765\u81ea\u4e8e\u548c\u53cc\u5b50\u5411\u65e5\u8475\u6240\u8bde\u751f\u7684\u540c\u4e00\u4e2a\u5b9e\u9a8c\u5ba4\u3002\u201c\u4f46\u8fd9\u4e0d\u4ee3\u8868\u6211\u4eec\u5c31\u662f\u5144\u5f1f\u4e86\u3002\u201d\u53cc\u5b50\u5411\u65e5\u8475\u8bf4\uff0c\u201c\u4ed6\u4eec\u7684\u8bde\u751f\u7b80\u76f4\u5c31\u662f\u4e00\u573a\u6050\u6016\u7684\u60b2\u5267\u3002\u201d","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>125</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u5feb</color>","\u8c4c\u8c46\u5411\u65e5\u8475")],[i.pzaPlantEnum.SunPot,new d(i.pzaPlantEnum.SunPot,"\u8475\u82b1\u76c6\u53ef\u4ee5\u8ba9\u4f60\u5728\u88f8\u5730\u4e0a\u79cd\u690d\u690d\u7269\uff0c\u5e76\u751f\u4ea7\u9633\u5149\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>",null,null,"<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u53ef\u4ee5\u8ba9\u4f60\u5728\u88f8\u5730\u4e0a\u79cd\u690d\u690d\u7269\u3002</color>",null,"\u6742\u4ea4\u690d\u7269\u4eec\u6765\u81ea\u4e8e\u548c\u53cc\u5b50\u5411\u65e5\u8475\u6240\u8bde\u751f\u7684\u540c\u4e00\u4e2a\u5b9e\u9a8c\u5ba4\u3002\u201c\u4f46\u8fd9\u4e0d\u4ee3\u8868\u6211\u4eec\u5c31\u662f\u5144\u5f1f\u4e86\u3002\u201d\u53cc\u5b50\u5411\u65e5\u8475\u8bf4\uff0c\u201c\u4ed6\u4eec\u7684\u8bde\u751f\u7b80\u76f4\u5c31\u662f\u4e00\u573a\u6050\u6016\u7684\u60b2\u5267\u3002\u201d","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>125</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u5feb</color>","\u9633\u5149\u82b1\u76c6")],[i.pzaPlantEnum.WildPea,new d(i.pzaPlantEnum.WildPea,"\u72c2\u91ce\u673a\u67aa\u5c04\u624b\u53ef\u4ee5\u671d\u524d\u65b9\u53d1\u5c04\u9730\u5f39\u8c4c\u8c46\u3002","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>20*4*5/2s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u524d\u65b9\u4e09\u884c</color>",null,null,null,"\u4f5c\u4e3a\u673a\u67aa\u5c04\u624b\u4e2d\u6700\u52c7\u731b\u7684\u673a\u67aa\uff0c\u5728\u6218\u573a\u4e0a\u7684\u706b\u529b\u5982\u540c\u5929\u4e0a\u4e0b\u9668\u77f3\u4e00\u6837\u6050\u6016\u3002\u54e6\u5bf9\u4e86\uff0c\u4ed6\u7684\u5e3d\u5b50\u5176\u5b9e\u662f\u4ece\u9694\u58c1\u5bb6\u524d\u9662\u62ff\u6765\u7684\u704c\u6728\u4e1b\uff0c\u62ab\u98ce\u4e5f\u662f\u9694\u58c1\u5bb6\u7684\u5e8a\u5355\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>500</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u72c2\u91ce\u673a\u67aa\u5c04\u624b")],[i.pzaPlantEnum.CupidShooter,new d(i.pzaPlantEnum.CupidShooter,"\u534e\u4e3d\u4e07\u5343\u7684\u5973\u5927\u5b66\u751f\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>1000</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6bcf2\u79d2\u53d1\u5c04\u4e09\u679a\u9b45\u60d1\u5b50\u5f39,\u9b45\u60d1\u51fb\u4e2d\u7684\u50f5\u5c38\u3002\u5728\u573a15\u79d2\u540e\u4f1a\u6d88\u5931\u3002</color>",null,null,null,"\u9b45\u60d1\u83c7\u4e00\u76f4\u5f88\u5411\u5f80\u81ea\u5df1\u80fd\u6210\u4e3a\u4f20\u64ad\u7231\u7684\u4f7f\u8005\uff0c\u6240\u4ee5\u5979cos\u6210\u4e86\u81ea\u5df1\u7684\u5076\u50cf\u2014\u2014\u7231\u795e\u4e18\u6bd4\u7279\uff0c\u5e76\u8a93\u8981\u4e3a\u6240\u6709\u50f5\u5c38\u5e26\u53bb\u7231\u4e0e\u7f8e\u597d\uff01\u5f53\u7136\uff0c\u5de8\u4eba\u4e5f\u4e0d\u4f8b\u5916\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>520</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","Cupid\u9b45\u60d1\u83c7\u5c04\u624b")],[i.pzaPlantEnum.QQFUME_SHROOM,new d(i.pzaPlantEnum.QQFUME_SHROOM,"\u603b\u6709\u4e00\u5929\u2026\u2026","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u81ea\u8eab\u6240\u5728\u683c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u65e0\u6cd5\u653b\u51fb\uff0c\u88ab\u5543\u98df/\u78be\u538b/\u9524\u51fb\uff0c\u4f1a\u4f7f\u76ee\u6807\u540e\u90002\u683c\uff0c\u53ef\u62b5\u5fa13\u6b21\u9524\u51fb/\u78be\u538b</color>",null,null,"\u5438\u6536\u4e86\u8fc7\u591a\u86cb\u767d\u7684\u5927\u55b7\u83c7\uff0c\u53d8\u5f97\u5982\u540c\u8e66\u5e8a\u4e00\u6837Q\u5f39\u3002\u88ab\u4ed6\u5438\u5f15\u6765\u7684\u4e0d\u53ea\u6709\u7231\u8e66\u5e8a\u7684\u5c0f\u5b69\u5b50\uff0c\u8fd8\u6709\u4ed6\u7684\u7c89\u4e1d\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>50</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","QQ\u5f39\u5f39\u5927\u55b7\u83c7")],[i.pzaPlantEnum.ICEFUME_SHROOM,new d(i.pzaPlantEnum.ICEFUME_SHROOM,"\u51b0\u74dc\u5927\u55b7\u83c7\u55b7\u51fa\u7684\u6c14\u6db2\u53ef\u4ee5\u7a7f\u900f\u94c1\u4e1d\u7f51\u95e8\uff0c\u540c\u65f6\u53d1\u5c04\u4e00\u679a\u51b0\u74dc\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>\uff0820+80\uff09/1.5s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u6574\u884c\u653b\u51fb</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u7a7f\u900f\u653b\u51fb</color>",null,"\u5438\u6536\u4e86\u8fc7\u591a\u86cb\u767d\u7684\u5927\u55b7\u83c7\uff0c\u53d8\u5f97\u5982\u540c\u8e66\u5e8a\u4e00\u6837Q\u5f39\u3002\u88ab\u4ed6\u5438\u5f15\u6765\u7684\u4e0d\u53ea\u6709\u7231\u8e66\u5e8a\u7684\u5c0f\u5b69\u5b50\uff0c\u8fd8\u6709\u4ed6\u7684\u7c89\u4e1d\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>400</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u51b0\u74dc\u5927\u55b7\u83c7")],[i.pzaPlantEnum.IceSpike,new d(i.pzaPlantEnum.IceSpike,"\u522b\u5fd8\u4e86\u6218\u543c\u4e5f\u80fd\u51bb\u7ed3~","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>40/1.5s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u81ea\u8eab\u6240\u5728\u683c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6218\u543c\uff1a\u51bb\u7ed3\u672c\u683c\u5185\u7684\u6240\u6709\u50f5\u5c385\u79d2\uff1b\n\u51cf\u901f\u50f5\u5c38\uff0c\u7206\u80ce\uff1b</color>","<color=#aa582b>\u4ea1\u8bed\uff1a</c><color=#e6300d>\u51bb\u7ed3\u5168\u573a\u50f5\u5c383\u79d2+\u51cf\u901f20\u79d2\u3002</color>","\u5730\u523a\u4e0d\u77e5\u9053\u4ece\u54ea\u91cc\u770b\u5230\u4e86\u4e00\u53e5\u8bdd\uff1a\u201c\u6211\u8fd9\u4e00\u8f88\u5b50\u5982\u5c65\u8584\u51b0\uff0c\u4f60\u8bf4\u6211\u80fd\u8d70\u5230\u5bf9\u5cb8\u5417\uff1f\u201d\u5b83\u5f88\u559c\u6b22\u8fd9\u53e5\u8bdd\uff0c\u751a\u81f3\u4e3a\u6b64\u53bb\u4e86\u8d9f\u5357\u6781\uff0c\u7ec8\u4e8e\u8ba9\u50f5\u5c38\u4eec\u4f53\u4f1a\u5230\u4e86\u201c\u5982\u5c65\u8584\u51b0\u201d\u7684\u611f\u53d7\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>50</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u5bd2\u51b0\u5730\u523a")],[i.pzaPlantEnum.CATLITTERPOT,new d(i.pzaPlantEnum.CATLITTERPOT,"\u8fd9\u53ef\u4e0d\u662f\u7ed9\u732b\u5c3e\u8349\u7528\u7684\uff1f","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>30*2/1.5s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5168\u5c4f\u8ffd\u8e2a</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u627f\u8f7d\u690d\u7269\uff0c\u6bcf2\u79d2\u53d1\u5c042\u679a\u5c16\u523a</color>",null,"\u201c\u4f60\u4e5f\u8bb8\u4e0d\u77e5\u9053\u3002\u201d\u732b\u5c3e\u8349\u8bf4\uff0c\u201c\u6211\u7684\u5c3e\u5df4\u624d\u662f\u672c\u4f53\u3002\u201d\u5979\u6458\u6389\u5e3d\u5b50\uff0c\u91cc\u9762\u662f\u7a7a\u7684\u3002\u4e8e\u662f\u6234\u592b\u5f80\u91cc\u9762\u586b\u4e0a\u4e86\u571f\u3002\u201c\u53eb\u732b\u76c6\u5c31\u5f97\u4e86\uff0c\u8c01\u518d\u53eb\u732b\u7802\u76c6\u6211\u5c31\u8ddf\u8c01\u6025\uff01\u201d","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>170</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u732b\u7802\u76c6")],[i.pzaPlantEnum.SpikeChomper,new d(i.pzaPlantEnum.SpikeChomper,"\u5730\u523a\u5927\u5634\u82b1\u53ef\u4ee5\u541e\u566c\u50f5\u5c38\uff0c\u514d\u53d7\u50f5\u5c38\u5543\u54ac\u4ee5\u53ca\u7206\u80ce\u3002","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u541e\u566c\u4e00\u4e2a\u50f5\u5c38\uff08\u5de8\u4eba\u548c\u51b0\u8f66\u9664\u5916\uff0c\u6539\u4e3a100\u4f24\u5bb3/1.5\u79d2\uff09\u3002\u5480\u56bc\u65f6\u95f440\u79d2\uff0c\u5480\u56bc\u72b6\u6001\u4e0b\u4e0d\u53d7\u50f5\u5c38\u5543\u98df\uff08\u4f46\u4f1a\u88ab\u78be\u538b/\u9524\u51fb\uff09\uff0c\u5bf9\u8def\u8fc7\u7684\u50f5\u5c38\u9020\u621050\u4f24\u5bb3/1.5\u79d2\u3002\u53ef\u4ee5\u7206\u80ce\u3002</color>","<color=#aa582b>\u4ea1\u8bed\uff1a</c><color=#e6300d>\u5bf9\u672c\u683c\u5185\u7684\u50f5\u5c38\u9020\u62101800\u4f24\u5bb3\uff08\u5de8\u578b\u51b0\u8f66\u6539\u4e3a3000\u4f24\u5bb3\uff09</color>",null,null,null,"\u5730\u523a\u5927\u5634\u82b1\u6f5c\u4f0f\u7740\u3002\u4ed6\u5df2\u7ecf\u6f5c\u4f0f\u4e86\u4e00\u665a\u4e0a\uff0c\u5982\u679c\u5c06\u79ef\u84c4\u7684\u9634\u90c1\u6076\u610f\u6574\u5408\u6574\u5408\uff0c\u6216\u8bb8\u8fd8\u80fd\u6f5c\u4f0f\u8fc7\u6574\u4e2a\u9ece\u660e\u3002\u201c\u6211\u7684\u65b0\u4e13\u8f91\u300a\u4e3a\u6f5c\u4f0f\u800c\u751f\u300b\u6b63\u5728\u53d1\u552e\u3002\u201d\u5730\u523a\u5927\u5634\u82b1\u5982\u662f\u8bf4\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>150</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u5730\u523a\u5927\u5634\u82b1")],[i.pzaPlantEnum.PumpkinPurpleFire,new d(i.pzaPlantEnum.PumpkinPurpleFire,"\u706b\u70ac\u6811\u6869\u559d\u4e86\u9152\uff0c\u706b\u52bf\u4e00\u53d1\u4e0d\u53ef\u6536\u62fe\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>4000</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>40/s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5de6\u4e2d\u53f3\u4e09\u683c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u70b9\u71c3\u8c4c\u8c46</color>",null,"\u5357\u74dc\u5934\u6700\u8fd1\u8ff7\u4e0a\u4e86\u6076\u7075\u9a91\u58eb\uff0c\u4ed6\u51c6\u5907\u5728\u4e07\u5723\u8282\u88c5\u626e\u6210\u4ed6\u7684\u5076\u50cf\uff0c\u201c\u6211\u611f\u89c9\u6211\u70e7\u8d77\u6765\u4e86\u201d\uff0c\u5357\u74dc\u5934\u8bf4\u9053\u3002\u5176\u5b9e\u4ed6\u4e0d\u77e5\u9053\uff0c\u5357\u74dc\u5934\u672c\u8eab\u5c31\u662f\u4e07\u5723\u8282\u7684\u88c5\u9970\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>175</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u70c8\u706b\u5357\u74dc\u5934")],[i.pzaPlantEnum.MarigoldMammon,new d(i.pzaPlantEnum.MarigoldMammon,"\u8d22\u795e\u62e5\u6709\u6570\u4e0d\u5b8c\u7684\u91d1\u5e01\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>1000</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6bcf5\u79d2\u53d1\u5c0410\u679a\u94f6\u5e01\uff0860%\uff09\u62164\u679a\u91d1\u5e01\uff0830%\uff09\u62163\u679a\u94bb\u77f3\uff0810%\uff09\u94f6\u5e01\u4f24\u5bb3100\uff0c\u91d1\u5e01\u4f24\u5bb3500\uff0c\u94bb\u77f3\u4f24\u5bb31000</color>",null,null,null,"\u8d22\u795e\u91d1\u76cf\u82b1\u4e00\u76f4\u5728\u519b\u961f\u540e\u65b9\u505a\u7740\u540e\u52e4\u4fdd\u969c\u7684\u5de5\u4f5c\u3002\u76f4\u5230\u6709\u4e00\u5929\uff0c\u4ed6\u5ffd\u7136\u610f\u8bc6\u5230\u4e86\u91d1\u5e01\u7684\u53e6\u4e00\u79cd\u7528\u6cd5\u2026\u2026\u4ed6\u7684\u884c\u4e3a\u906d\u53d7\u5230\u4e86\u5b9d\u5f00\u8d22\u52a1\u90e8\u7684\u5f3a\u529b\u8c34\u8d23\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>888</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u8d22\u795e\u91d1\u76cf\u82b1")],[i.pzaPlantEnum.CatSun,new d(i.pzaPlantEnum.CatSun,"\u5c0f\u732b\u6700\u559c\u6b22\u6652\u592a\u9633\u4e86\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>200/10s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5168\u5c4f\u8ffd\u8e2a</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6bcf25\u79d2\u751f\u4ea725\u9633\u5149\uff1b\u6bcf\u5341\u79d2\u53d1\u5c04\u4e00\u9897\u5c0f\u9633\u5149\u5b50\u5f39\uff0c\u51fb\u4e2d\u50f5\u5c38\u6389\u843d15\u9633\u5149\u3002</color>",null,"\u201c\u8fd9\u662f\u8c4c\u8c46\u5c04\u624b\u7ed9\u6211\u7684\u732b\u732b\u88c5\u626e\u3002\u201d\u5411\u65e5\u8475\u8bf4\uff0c\u201c\u4ed6\u89c9\u5f97\u6211\u6234\u4e0a\u633a\u597d\u770b\u7684\u3002\u201d\u4e0d\u8fc7\u526f\u4f5c\u7528\u5c31\u662f\u5979\u4e0d\u65f6\u4f1a\u53d1\u51fa\u6c6a\u6c6a\u7684\u53eb\u58f0\uff0c\u6f14\u5531\u4f1a\u4e5f\u53d8\u5f97\u4e00\u56e2\u7cdf\u3002\u201c\u90a3\u672c\u5e94\u662f\u6211\u4eec\u53d1\u51fa\u7684\u53eb\u58f0\uff01\u201d\u4e00\u4f4d\u7c89\u4e1d\u8bf4\u9053\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>150</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u5c0f\u732b\u5411\u65e5\u8475")],[i.pzaPlantEnum.SunShroomShooter,new d(i.pzaPlantEnum.SunShroomShooter,"\u9633\u5149\u83c7\u6295\u624b\u53ef\u4ee5\u6295\u63b7\u9633\u5149\u83c7\u8fdb\u884c\u653b\u51fb\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>40/1.5s\uff0c\u957f\u5927\u540e80/1.5s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u6b63\u524d\u65b9\u6574\u884c</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6bcf25\u79d2\u751f\u4ea725\u9633\u5149\uff0c120\u79d2\u540e\u957f\u5927\uff1b\u957f\u5927\u540e\uff0c\u6bcf25\u79d2\u751f\u4ea750\u9633\u5149\u3002</color>",null,"\u6295\u51fa\u81ea\u5df1\u7684\u5144\u5f1f\uff0c\u8fd9\u5728\u522b\u7684\u690d\u7269\u773c\u91cc\u7279\u522b\u5947\u602a\u3002\u5c3d\u7ba1\u5df2\u7ecf\u6709\u897f\u74dc\u6295\u624b\u6295\u897f\u74dc\u8fd9\u79cd\u4f8b\u5b50\uff0c\u4f46\u8611\u83c7\u6295\u624b\uff0c\u5927\u5bb6\u8fd8\u662f\u7b2c\u4e00\u6b21\u89c1\u3002\u201c\u90a3\u53ea\u662f\u4e00\u4e2a\u5851\u6599\u4eff\u5236\u54c1\u800c\u5df2\u5566\u2026\u2026\u201d\u9633\u5149\u83c7\u6295\u624b\u8bf4\uff0c\u4ed6\u7684\u6295\u7bee\u4e5f\u662f\u4ece\u5377\u5fc3\u83dc\u6295\u624b\u90a3\u4e70\u7684\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>100</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u5feb</color>","\u9633\u5149\u83c7\u6295\u624b")],[i.pzaPlantEnum.IceCat2,new d(i.pzaPlantEnum.IceCat2,"\u5177\u6709\u51cf\u901f\u7684\u732b\u5c3e\u8349\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>300</color>","<color=#aa582b>\u5a01\u529b\uff1a</c><color=#e6300d>20*2/s</color>","<color=#aa582b>\u8303\u56f4\uff1a</c><color=#e6300d>\u5168\u5c4f\u8ffd\u8e2a</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5355\u4f53\u51cf\u901f1/2\uff0c\u7ef4\u630115s</color>",null,"\u8fd9\u6b3e\u732b\u732b\u88c5\u626e\u5728\u690d\u7269\u754c\u7a81\u7136\u76db\u884c\u8d77\u6765\uff0c\u5176\u4e2d\u8c4c\u8c46\u5bb6\u65cf\u8d2d\u4e70\u7684\u6700\u591a\uff0c\u5bd2\u51b0\u5c04\u624b\u62a2\u8d2d\u5230\u8fd9\u8eab\u88c5\u5907\u65f6\uff0c\u5e3d\u5b50\u5df2\u7ecf\u552e\u7a7a\u4e86\u3002","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>250</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u4e2d\u7b49</color>","\u5bd2\u51b0\u732b\u5c3e\u8349")],[i.pzaPlantEnum.HoloCards,new d(i.pzaPlantEnum.HoloCards,"\u5168\u606f\u5361\u724c\u6295\u5f71\u80fd\u51cf\u5c11\u4f60\u7684\u5361\u7247\u9633\u5149\u6d88\u8017\u3002","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5149\u73af\u6548\u679c\uff1a\u4f60\u7684\u975e\u94bb\u77f3\u5361\u724c\u4ef7\u683c\u51cf\u5c1125\uff08\u4e0d\u4f1a\u4f4e\u4e8e0\uff09\u4e0d\u4f1a\u88ab\u50f5\u5c38\u7d22\u654c\u573a\u4e0a\u6bcf\u6709\u4e00\u4e2a\u8be5\u690d\u7269\uff0c\u8be5\u5361\u7247\u4ef7\u683c\u589e\u52a0\u7ffb\u500d</color>",null,null,null,null,"\u5173\u4e8e\u5168\u606f\u6295\u5f71\u662f\u5982\u4f55\u538b\u4f4e\u79cd\u5b50\u5305\u4ef7\u683c\u7684\uff0c\u690d\u7269\u4eec\u4f17\u8bf4\u7eb7\u575b\u3002\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u6295\u5f71\u51fa\u51e0\u4efd\u79cd\u5b50\u5305\uff0c\u518d\u5438\u7eb3\u4f4e\u4e8e\u539f\u4ef7\u7684\u9633\u5149\uff0c\u5c31\u53ef\u4ee5\u8ba9\u6295\u5f71\u53d8\u4e3a\u771f\u6b63\u7684\u79cd\u5b50\u3002\u201c\u6211\u6765\u81ea\u672a\u6765\u4e16\u754c\uff0c\u5c0f\u5b50\uff01\u201d","<color=#aa582b>\u6d88\u8017\u9633\u5149: </c><color=#e6300d>200</color>","<color=#aa582b>\u51b7\u5374\u901f\u5ea6: </c><color=#e6300d>\u975e\u5e38\u6162</color>","\u5168\u606f\u5361\u724c\u6295\u5f71")]]),a.ZjZombieBookMap=new Map([[r.pzaZombieEnum.CONE_HEAD_ZOMBIE2,new f(r.pzaZombieEnum.CONE_HEAD_ZOMBIE2,"\u8def\u969c\u50f5\u5c38","\u4ed6\u7684\u8def\u969c\u5934\u76d4,\u4f7f\u4ed6\u6bd4\u666e\u901a\u50f5\u5c38\u66f4\u80fd\u627f\u53d7\u4f24\u5bb3","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>(370\u6216500) + 270</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u8def\u969c(1\u7c7b)\uff0c\u7eff\u8272\u8def\u969c(\u52a0\u901f)</color>","<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>100\u70b9/s</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u7ea64-7s/\u683c</color>",null,"\u548c\u5176\u4ed6\u50f5\u5c38\u4e00\u6837\uff0c\u8def\u969c\u5934\u50f5\u5c38\u76f2\u76ee\u5730\u5411\u524d\u3002\u4f46\u67d0\u4e9b\u4e8b\u7269\u5374\u4f7f\u4ed6\u505c\u4e0b\u811a\u6b65\uff0c\u6361\u8d77\u4e00\u4e2a\u4ea4\u901a\u8def\u969c\uff0c\u5e76\u56fa\u5b9e\u5728\u81ea\u5df1\u7684\u8111\u888b\u4e0a\u3002\u662f\u7684\uff0c\u4ed6\u5f88\u559c\u6b22\u53c2\u52a0\u805a\u4f1a\u3002")],[r.pzaZombieEnum.POLEVAULTING_ZOMBIE2,new f(r.pzaZombieEnum.POLEVAULTING_ZOMBIE2,"\u6491\u6746\u50f5\u5c38","\u4ed6\u7684\u8def\u969c\u5934\u76d4,\u4f7f\u4ed6\u6bd4\u666e\u901a\u50f5\u5c38\u66f4\u80fd\u627f\u53d7\u4f24\u5bb3","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>500\u6216\uff081100+500\uff09</color>",null,"<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>100\u70b9/s</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u8df3\u8dc3\u524d\u7ea62.5s/\u683c\uff0c\u8df3\u8dc3\u540e\u7ea64-7s/\u683c</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u8d8a\u8fc7\u4ed6\u6240\u78b0\u5230\u7684\u7b2c\u4e00\u682a\u690d\u7269</color>","\u4e00\u4e9b\u50f5\u5c38\u6e34\u671b\u8d70\u5f97\u66f4\u8fdc\u3001\u5f97\u5230\u66f4\u591a\uff0c\u8fd9\u4e5f\u4fc3\u4f7f\u4ed6\u4eec\u7531\u666e\u901a\u6210\u4e3a\u975e\u51e1\u3002\u90a3\u5c31\u662f\u6491\u6746\u50f5\u5c38\u3002")],[r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2,new f(r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2,"\u94c1\u6805\u95e8\u50f5\u5c38","\u4ed6\u7684\u94c1\u6805\u95e8\u662f\u6709\u6548\u7684\u76fe\u724c\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>1100+270\uff08\u6216+370\uff0c+1100\uff09</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u94c1\u6805\u95e8(2\u7c7b)</color>","<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>100\u70b9/s</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u7ea64-7s/\u683c</color>","<color=#aa582b>\u5f31\u70b9: </c><color=#e6300d>\u5927\u55b7\u83c7\u548c\u78c1\u529b\u83c7</color>","\u94c1\u6805\u95e8\u50f5\u5c38\u4e0a\u6b21\u62dc\u8bbf\u8fc7\u7684\u623f\u4e3b\u9632\u5b88\u5e76\u4e0d\u4e13\u4e1a\uff0c\u5728\u5403\u6389\u90a3\u623f\u4e3b\u7684\u8111\u5b50\u540e\u62ff\u8d70\u4e86\u4ed6\u5bb6\u7684\u94c1\u6805\u95e8\u3002")],[r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3,new f(r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3,"\u94c1\u6805\u95e8\u50f5\u5c38","\u4ed6\u7684\u94c1\u6805\u95e8\u662f\u6709\u6548\u7684\u76fe\u724c\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>1100+270\uff08\u6216+370\uff0c+1100\uff09</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u94c1\u6805\u95e8(2\u7c7b)</color>","<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>100\u70b9/s</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u7ea64-7s/\u683c</color>","<color=#aa582b>\u5f31\u70b9: </c><color=#e6300d>\u5927\u55b7\u83c7\u548c\u78c1\u529b\u83c7</color>","\u94c1\u6805\u95e8\u50f5\u5c38\u4e0a\u6b21\u62dc\u8bbf\u8fc7\u7684\u623f\u4e3b\u9632\u5b88\u5e76\u4e0d\u4e13\u4e1a\uff0c\u5728\u5403\u6389\u90a3\u623f\u4e3b\u7684\u8111\u5b50\u540e\u62ff\u8d70\u4e86\u4ed6\u5bb6\u7684\u94c1\u6805\u95e8\u3002")],[r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE4,new f(r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE4,"\u575a\u679c\u50f5\u5c38",null,"<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>\uff08370\u62161100\uff09+1100+270</color>",null,"<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>100\u70b9/s</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u7ea64-7s/\u683c</color>",null,"\u8fd9\u79cd\u50f5\u5c38\u9177\u7231\u8111\u5b50\uff0c\u8d2a\u5a6a\u800c\u4e0d\u77e5\u8db3\u3002\u8111\u5b50\u3001\u8111\u5b50\u3001\u8111\u5b50\u2014\u2014\u591c\u4ee5\u7ee7\u65e5\u5730\u8ffd\u6c42\u7740\u3002\u6076\u81ed\u96be\u95fb\u7684\u8111\u5b50\uff1f\u8150\u70c2\u7684\u8111\u5b50\uff1f\u6211\u60f3\u8fd9\u90fd\u6ca1\u5173\u7cfb\uff0c\u50f5\u5c38\u4e0d\u4ecb\u610f\u3002")],[r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE5,new f(r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE5,"\u575a\u679c\u50f5\u5c38",null,"<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>\uff08370\u62161100\uff09+1100+270</color>",null,"<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>100\u70b9/s</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u7ea64-7s/\u683c</color>",null,"\u8fd9\u79cd\u50f5\u5c38\u9177\u7231\u8111\u5b50\uff0c\u8d2a\u5a6a\u800c\u4e0d\u77e5\u8db3\u3002\u8111\u5b50\u3001\u8111\u5b50\u3001\u8111\u5b50\u2014\u2014\u591c\u4ee5\u7ee7\u65e5\u5730\u8ffd\u6c42\u7740\u3002\u6076\u81ed\u96be\u95fb\u7684\u8111\u5b50\uff1f\u8150\u70c2\u7684\u8111\u5b50\uff1f\u6211\u60f3\u8fd9\u90fd\u6ca1\u5173\u7cfb\uff0c\u50f5\u5c38\u4e0d\u4ecb\u610f\u3002")],[r.pzaZombieEnum.DANCING_ZOMBIE2,new f(r.pzaZombieEnum.DANCING_ZOMBIE2,"\u6b66\u88c5\u821e\u738b\u50f5\u5c38","\u821e\u738b\u50f5\u5c38\u548c\u4eba\u7c7b(\u5728\u4e16\u6216\u8005\u6b7b\u53bb\u7684)\u5982\u6709\u96f7\u540c\u7eaf\u5c5e\u5de7\u5408","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>3000+500</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u6a44\u6984\u5e3d(1\u7c7b), \u5e9f\u7a3f\u5934\u76d4(\u514d\u63a7)</color>","<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>200\u70b9/s</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u51fa\u573a\u6ed1\u6b65\u7ea61.2s/\u683c.\u53ec\u5524\u540e\u7ea65.5s/\u683c</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u53ec\u5524\u8fea\u65af\u79d1\u50f5\u5c38\u548c\u6b66\u88c5\u4f34\u821e\u50f5\u5c38</color>","\u821e\u738b\u50f5\u5c38\u7684\u6700\u65b0\u5531\u7247\u201c\u54c7\u8111\u4e73\u963f\u535c\u963f\u535c\u201d\u5728\u50f5\u5c38\u754c\u7684\u4eba\u6c14\u6b63\u6025\u901f\u98d9\u5347\u3002")],[r.pzaZombieEnum.DANCING_ZOMBIE3,new f(r.pzaZombieEnum.DANCING_ZOMBIE3,"\u6b66\u88c5\u821e\u738b\u50f5\u5c38","\u821e\u738b\u50f5\u5c38\u548c\u4eba\u7c7b(\u5728\u4e16\u6216\u8005\u6b7b\u53bb\u7684)\u5982\u6709\u96f7\u540c\u7eaf\u5c5e\u5de7\u5408","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>3000+500</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u6a44\u6984\u5e3d(1\u7c7b), \u5e9f\u7a3f\u5934\u76d4(\u514d\u63a7)</color>","<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>200\u70b9/s</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u51fa\u573a\u6ed1\u6b65\u7ea61.2s/\u683c.\u53ec\u5524\u540e\u7ea65.5s/\u683c</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u53ec\u5524\u8fea\u65af\u79d1\u50f5\u5c38\u548c\u6b66\u88c5\u4f34\u821e\u50f5\u5c38</color>","\u821e\u738b\u50f5\u5c38\u7684\u6700\u65b0\u5531\u7247\u201c\u54c7\u8111\u4e73\u963f\u535c\u963f\u535c\u201d\u5728\u50f5\u5c38\u754c\u7684\u4eba\u6c14\u6b63\u6025\u901f\u98d9\u5347\u3002")],[r.pzaZombieEnum.BACKUP_DANCER2,new f(r.pzaZombieEnum.BACKUP_DANCER2,"\u6b66\u88c5\u4f34\u821e\u50f5\u5c38","\u5f53\u6b66\u88c5\u821e\u738b\u50f5\u5c38\u6447\u6446\u65f6\uff0c\u8fd9\u79cd\u50f5\u5c38\u56db\u4e2a\u7ed3\u4f19\u51fa\u73b0\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>370+270</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u8def\u969c(1\u7c7b)</color>","<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>100\u70b9/s</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u7ea65.5s/\u683c</color>",null,"\u4f34\u821e\u50f5\u5c38\u66fe\u5728\u4f4d\u4e8e\u50f5\u5c38\u7ebd\u7ea6\u57ce\u7684\u201c\u5480\u5229\u7259\u201d\u8868\u6f14\u827a\u672f\u5b66\u9662\u94bb\u7814\u8fc7\u516d\u5e74\u7684\u821e\u6280\uff0c\u8fd8\u88ab\u7279\u9080\u53c2\u52a0\u8fc7\u201c\u821e\u6797\u5927\u4f1a\u201d\u3002")],[r.pzaZombieEnum.JACK_ZOMBIE2,new f(r.pzaZombieEnum.JACK_ZOMBIE2,"\u73a9\u5076\u5323\u50f5\u5c38","\u8fd9\u79cd\u50f5\u5c38\u5e26\u7740\u4e2a\u4f1a\u7206\u70b8\u7684\u6f58\u591a\u62c9\u76d2\u5b50\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>370+500</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u8def\u969c</color>","<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>100\u70b9/s</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u6253\u5f00\u73a9\u5076\u5323\u4f1a\u7206\u70b8\n</color><color=#aa582b>\u4f24\u5bb3: </c><color=#e6300d>1800(\u5373\u6b7b)\n</color><color=#aa582b>\u8303\u56f4: </c><color=#e6300d>\u81ea\u8eab\u4e2d\u5fc31.5\u683c\u7684\u5706</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u7ea62.2s/\u683c</color>","\u8fd9\u79cd\u50f5\u5c38\u4ee4\u4eba\u4e0d\u5bd2\u800c\u6817\uff0c\u4e0d\u662f\u56e0\u4e3a\u4ed6\u7684\u51b0\u51b7\u8eab\u8eaf\u800c\u662f\u56e0\u4e3a\u4ed6\u7684\u75af\u72c2\u3002")],[r.pzaZombieEnum.GARGANTUAR2,new f(r.pzaZombieEnum.GARGANTUAR2,"\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38","\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38\u662f\u4e00\u79cd\u5de8\u578b\u50f5\u5c38","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>3000 + (1100\u62163000) + 1100</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u94c1\u6876\u7c7b(1\u7c7b), \u94c1\u6805\u95e8(2\u7c7b),\u6216\u6a44\u6984\u7403\u5e3d(1\u7c7b),\u6216\u5e9f\u7a3f\u5934\u76d4(\u514d\u63a7)</color>","<color=#aa582b>\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#e6300d>\u6b63\u5e38\u5373\u6b7b.\u9ad8\u51b0\u679c\u548c\u94a2\u523a\u738b1001,QQ\u8c08\u8c08\u5927\u55b7\u83c7100.</color>",null,null,"\u5f53\u4f3d\u521a\u7279\u5c14\u8d70\u52a8\u7684\u65f6\u5019,\u5927\u5730\u5728\u9707\u98a4.\u5f53\u4ed6\u60b2\u53f9\u7684\u65f6\u5019,\u6240\u6709\u7684\u50f5\u5c38\u90fd\u6c89\u5bc2\u4e86.\u4ed6\u662f\u50f5\u5c38\u95e8\u68a6\u60f3\u6210\u4e3a\u7684\u5076\u50cf.\u4e0d\u8fc7\u5462,\u4ed6\u5230\u73b0\u5728\u8fd8\u6ca1\u4ea4\u5230\u5973\u670b\u53cb")],[r.pzaZombieEnum.GARGANTUAR3,new f(r.pzaZombieEnum.GARGANTUAR3,"\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38","\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38\u662f\u4e00\u79cd\u5de8\u578b\u50f5\u5c38","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>3000 + (1100\u62163000) + 1100</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u94c1\u6876\u7c7b(1\u7c7b), \u94c1\u6805\u95e8(2\u7c7b),\u6216\u6a44\u6984\u7403\u5e3d(1\u7c7b),\u6216\u5e9f\u7a3f\u5934\u76d4(\u514d\u63a7)</color>","<color=#aa582b>\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#e6300d>\u6b63\u5e38\u5373\u6b7b.\u9ad8\u51b0\u679c\u548c\u94a2\u523a\u738b1001,QQ\u8c08\u8c08\u5927\u55b7\u83c7100.</color>",null,null,"\u5f53\u5de8\u4eba\u50f5\u5c38\u8d70\u52a8\u7684\u65f6\u5019\uff0c\u5927\u5730\u5728\u9707\u98a4\u3002\u5f53\u4ed6\u60b2\u53f9\u7684\u65f6\u5019\uff0c\u6240\u6709\u7684\u50f5\u5c38\u90fd\u6c89\u5bc2\u4e86\u3002\u4ed6\u662f\u50f5\u5c38\u4eec\u7684\u5076\u50cf\u3002\u4e0d\u8fc7\u5462\uff0c\u4ed6\u5230\u73b0\u5728\u8fd8\u6ca1\u4ea4\u5230\u5973\u670b\u53cb\u3002")],[r.pzaZombieEnum.GARGANTUAR4,new f(r.pzaZombieEnum.GARGANTUAR4,"\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38","\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38\u662f\u4e00\u79cd\u5de8\u578b\u50f5\u5c38","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>3000 + (1100\u62163000) + 1100</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u94c1\u6876\u7c7b(1\u7c7b), \u94c1\u6805\u95e8(2\u7c7b),\u6216\u6a44\u6984\u7403\u5e3d(1\u7c7b),\u6216\u5e9f\u7a3f\u5934\u76d4(\u514d\u63a7)</color>","<color=#aa582b>\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#e6300d>\u6b63\u5e38\u5373\u6b7b.\u9ad8\u51b0\u679c\u548c\u94a2\u523a\u738b1001,QQ\u8c08\u8c08\u5927\u55b7\u83c7100.</color>",null,null,"\u5f53\u5de8\u4eba\u50f5\u5c38\u8d70\u52a8\u7684\u65f6\u5019\uff0c\u5927\u5730\u5728\u9707\u98a4\u3002\u5f53\u4ed6\u60b2\u53f9\u7684\u65f6\u5019\uff0c\u6240\u6709\u7684\u50f5\u5c38\u90fd\u6c89\u5bc2\u4e86\u3002\u4ed6\u662f\u50f5\u5c38\u4eec\u7684\u5076\u50cf\u3002\u4e0d\u8fc7\u5462\uff0c\u4ed6\u5230\u73b0\u5728\u8fd8\u6ca1\u4ea4\u5230\u5973\u670b\u53cb\u3002")],[r.pzaZombieEnum.RED_GARGANTUAR2,new f(r.pzaZombieEnum.RED_GARGANTUAR2,"\u7ea2\u773c\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38","\u7ea2\u773c\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38\u662f\u5347\u7ea7\u7248\u7684\u5de8\u578b\u50f5\u5c38","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>6000 + (1100\u62163000) + 1100</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u94c1\u6876\u7c7b(1\u7c7b), \u94c1\u6805\u95e8(2\u7c7b),\u6216\u6a44\u6984\u7403\u5e3d(1\u7c7b),\u6216\u5e9f\u7a3f\u5934\u76d4(\u514d\u63a7)</color>","<color=#aa582b>\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#e6300d>\u6b63\u5e38\u5373\u6b7b.\u9ad8\u51b0\u679c\u548c\u94a2\u523a\u738b1001,QQ\u8c08\u8c08\u5927\u55b7\u83c7100.</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5f53\u672c\u4f53\u751f\u547d\u4f4e\u4e8e\u4e00\u534a\u65f6\u6295\u63b7\u5c0f\u9b3c</color>",null,"\u7ea2\u773c\u5de8\u4eba\u50f5\u5c38\u8eab\u4e3a\u50f5\u5c38\u754c\u7684\u5927\u9738\u738b\uff0c\u4f46\u8fd9\u4e2a\u5bb6\u4f19\u6ca1\u6709\u591a\u5c11\u5934\u8111\u3002\u5f80\u5f80\u5f88\u5bb9\u6613\u9677\u5165\u9677\u9631\u3002\u8fd8\u9700\u8981\u5176\u4ed6\u50f5\u5c38\u7684\u914d\u5408\u3002")],[r.pzaZombieEnum.RED_GARGANTUAR3,new f(r.pzaZombieEnum.RED_GARGANTUAR3,"\u7ea2\u773c\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38","\u7ea2\u773c\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38\u662f\u5347\u7ea7\u7248\u7684\u5de8\u578b\u50f5\u5c38","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>6000 + (1100\u62163000) + 1100</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u94c1\u6876\u7c7b(1\u7c7b), \u94c1\u6805\u95e8(2\u7c7b),\u6216\u6a44\u6984\u7403\u5e3d(1\u7c7b),\u6216\u5e9f\u7a3f\u5934\u76d4(\u514d\u63a7)</color>","<color=#aa582b>\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#e6300d>\u6b63\u5e38\u5373\u6b7b.\u9ad8\u51b0\u679c\u548c\u94a2\u523a\u738b1001,QQ\u8c08\u8c08\u5927\u55b7\u83c7100.</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5f53\u672c\u4f53\u751f\u547d\u4f4e\u4e8e\u4e00\u534a\u65f6\u6295\u63b7\u5c0f\u9b3c</color>",null,"\u7ea2\u773c\u5de8\u4eba\u50f5\u5c38\u8eab\u4e3a\u50f5\u5c38\u754c\u7684\u5927\u9738\u738b\uff0c\u4f46\u8fd9\u4e2a\u5bb6\u4f19\u6ca1\u6709\u591a\u5c11\u5934\u8111\u3002\u5f80\u5f80\u5f88\u5bb9\u6613\u9677\u5165\u9677\u9631\u3002\u8fd8\u9700\u8981\u5176\u4ed6\u50f5\u5c38\u7684\u914d\u5408\u3002")],[r.pzaZombieEnum.RED_GARGANTUAR4,new f(r.pzaZombieEnum.RED_GARGANTUAR4,"\u7ea2\u773c\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38","\u7ea2\u773c\u6b66\u88c5\u5de8\u4eba\u50f5\u5c38\u662f\u5347\u7ea7\u7248\u7684\u5de8\u578b\u50f5\u5c38","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>6000 + (1100\u62163000) + 1100</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u94c1\u6876\u7c7b(1\u7c7b), \u94c1\u6805\u95e8(2\u7c7b),\u6216\u6a44\u6984\u7403\u5e3d(1\u7c7b),\u6216\u5e9f\u7a3f\u5934\u76d4(\u514d\u63a7)</color>","<color=#aa582b>\u653b\u51fb\u4f24\u5bb3\uff1a</c><color=#e6300d>\u6b63\u5e38\u5373\u6b7b.\u9ad8\u51b0\u679c\u548c\u94a2\u523a\u738b1001,QQ\u8c08\u8c08\u5927\u55b7\u83c7100.</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5f53\u672c\u4f53\u751f\u547d\u4f4e\u4e8e\u4e00\u534a\u65f6\u6295\u63b7\u5c0f\u9b3c</color>",null,"\u7ea2\u773c\u5de8\u4eba\u50f5\u5c38\u8eab\u4e3a\u50f5\u5c38\u754c\u7684\u5927\u9738\u738b\uff0c\u4f46\u8fd9\u4e2a\u5bb6\u4f19\u6ca1\u6709\u591a\u5c11\u5934\u8111\u3002\u5f80\u5f80\u5f88\u5bb9\u6613\u9677\u5165\u9677\u9631\u3002\u8fd8\u9700\u8981\u5176\u4ed6\u50f5\u5c38\u7684\u914d\u5408\u3002")],[r.pzaZombieEnum.ZOMBONI2,new f(r.pzaZombieEnum.ZOMBONI2,"\u8bfb\u62a5\u51b0\u8f66\u50f5\u5c38","\u4e8c\u7237\u521a\u63d0\u7684\u65b0\u8f66","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>500+1350</color>","<color=#aa582b>\u4f69\u6234\uff1a</c><color=#e6300d>\u62a5\u7eb8(2\u7c7b)</color>","<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>\u78be\u538b</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u7ea64-7s/\u683c. \u5931\u53bb\u62a5\u7eb8\u540e1.8s/\u683c</color>",null,"\u66fe\u7ecf\u906d\u9047\u8fc7\u7684\u50f5\u5c38.\u4f7f\u7528\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u7684\u7099\u70ed\u6012\u706b\u8fdb\u884c\u653b\u51fb.\u90a3\u4e2a\u66fe\u5728\u539f\u7248\u9ed1\u591c\u8349\u576a\u88ab\u4f60\u7528\u51e0\u4e2a\u5c0f\u55b7\u83c7\u51fb\u8d25\u7684\u52b2\u654c.\u5c06\u91cd\u65b0\u51fa\u73b0\u5728\u4f60\u9762\u524d.\u5212\u51fa\u590d\u4ec7\u7684\u70c8\u7130.\u52bf\u5fc5\u593a\u5f97\u5927\u8111")],[r.pzaZombieEnum.ZOMBONI3,new f(r.pzaZombieEnum.ZOMBONI3,"\u96ea\u6a47\u8f66\u50f5\u5c38","\u51b0\u8f66\u5de8\u4eba\u50f5\u5c38\u78be\u8fc7\u4f60\u7684\u690d\u7269\uff0c\u5e76\u7559\u4e0b\u4e00\u6761\u51b0\u9053\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>3000</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u78be\u538b\u690d\u7269\uff0c\u7559\u4e0b\u6761\u51b0\u9053</color>","<color=#aa582b>\u4ea1\u8bed\uff1a</c><color=#e6300d>\u53ec\u5524\u4e00\u4e2a\u94c1\u6876\u94c1\u95e8\u767d\u773c\u5de8\u4eba</color>","<color=#aa582b>\u78be\u538b\u4f24\u5bb3: </c><color=#e6300d>\u6b63\u5e38\u5373\u6b7b\uff0c\u9ad8\u51b0\u679c\u548c\u94a2\u523a\u738b1001\uff0cQQ\u5f39\u5f39\u5927\u55b7\u83c7100\u3002</color>","<color=#aa582b>\u901f\u5ea6: </c><color=#e6300d>\u7ea63-8s/\u683c</color>","\u9000\u4f11\u7684\u51b0\u8f66\u50f5\u5c38\u7528\u6bd5\u751f\u6240\u5b66\u4f20\u6559\u5de8\u4eba\u50f5\u5c38\uff0c\u5e76\u4e3a\u4ed6\u5b9a\u5236\u4e86\u4e00\u8f86\u5de8\u578b\u51b0\u8f66\u3002")],[r.pzaZombieEnum.DIGGERFOOTBALL_ZOMBIE2,new f(r.pzaZombieEnum.DIGGERFOOTBALL_ZOMBIE2,"\u9ed1\u6a44\u6984\u77ff\u5de5\u50f5\u5c38","\u8fd9\u79cd\u50f5\u5c38\u901a\u8fc7\u6316\u96a7\u9053\u6765\u7a7f\u8fc7\u4f60\u7684\u9632\u5fa1\u3002","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>270</color>","<color=#aa582b>\u5543\u98df\u4f24\u5bb3\uff1a</c><color=#e6300d>200\u70b9/s</color>","<color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u6316\u5730\u65f6\u7ea61.2s/\u683c\uff0c\u51fa\u571f\u540e\u7ea67s/\u683c</color>","<color=#aa582b>\u7279\u70b9: </c><color=#e6300d>\u7a7f\u8fc7\u5730\u4e0b\u96a7\u9053\u5e76\u51fa\u73b0\u5728\u8349\u576a\u7684\u5de6\u4fa7</color>",null,"\u77ff\u5de5\u50f5\u5c38\u6bcf\u5468\u82b1\u8d39\u4e09\u5929\u65f6\u95f4\u6765\u7533\u8bf7\u4ed6\u7684\u6316\u6398\u8bb8\u53ef\u8bc1\u3002")],[r.pzaZombieEnum.BedCar,new f(r.pzaZombieEnum.BedCar,"\u5e8a\u8f66\u50f5\u5c38","\u6709\u65f6\u5019\u50f5\u5c38\u53ea\u662f\u4e0d\u60f3\u8d77\u5e8a\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>2000</color>","<color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u78be\u538b\u690d\u7269\uff0c\u514d\u75ab\u63a7\u5236\uff0c\u53602\u683c\u3002</color>","<color=#aa582b>\u4ea1\u8bed: </c><color=#e6300d>\u53ec\u5524\u4e00\u4e2a\u5c0f\u6454\u54e5\u50f5\u5c38\u3002</color>",null,"\u8c8c\u4f3c\u6234\u592b\u535a\u58eb\u6700\u8fd1\u4ece\u6e38\u620f\u91cc\u5f97\u5230\u4e86\u542f\u53d1\uff0c\u4ed6\u628a\u4e00\u4e2a\u50f5\u5c38\u6d17\u8111\uff0c\u6210\u529f\u8ba9\u4ed6\u8ff7\u604b\u4e0a\u4e86\u7761\u89c9\u548c\u6ed1\u96ea\u3002\u5c3d\u7ba1\u8fd9\u91cc\u6839\u672c\u5c31\u6ca1\u6709\u96ea\u3002")],[r.pzaZombieEnum.NightWear,new f(r.pzaZombieEnum.NightWear,"\u5c0f\u6454\u54e5\u50f5\u5c38","\u5c0f\u6454\u54e5\u50f5\u5c38\u8ba8\u538c\u65e9\u516b\uff01","<color=#aa582b>\u97e7\u6027\uff1a</c><color=#e6300d>500+270</color>","<color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb</color>","<color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u514d\u75ab\u51cf\u901f\u548c\u51bb\u7ed3\u3002</color>",null,null,"\u201c\u6211\u7684\u96ea\u6a47\u5728\u54ea\u91cc\uff1f\u5c31\u6ca1\u6709\u4f01\u9e45\u548c\u6469\u6258\u8f66\u5e2e\u6211\u5417\uff1f\u201d\u201c\u54e6\uff0c\u81f3\u5c11\u96ea\u602a\u8fd8\u662f\u6709\u7684\u3002\u201d\u5c0f\u6454\u54e5\u50f5\u5c38\u8bf4\u5b8c\uff0c\u5c31\u7ee7\u7eed\u6c89\u6d78\u5728\u68a6\u4e61\u91cc\uff0c\u6b8a\u4e0d\u77e5\u4ed6\u7684\u5e8a\u4e0b\u4e00\u79d2\u5c31\u8981\u88ab\u6253\u7834\u4e86\u3002")]]),a.ZombieBookMap=new Map([[r.pzaZombieEnum.ZOMBIE,new m(r.pzaZombieEnum.ZOMBIE,"\u666e\u901a\u50f5\u5c38","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color>",!1,"\u8fd9\u79cd\u50f5\u5c38\u559c\u7231\u8111\u9ad3\uff0c\u8d2a\u5a6a\u800c\u4e0d\u77e5\u8db3\u3002\u8111\u9ad3\uff0c\u8111\u9ad3\uff0c\u8111\u9ad3\uff0c\u591c\u4ee5\u7ee7\u65e5\u5730\u8ffd\u6c42\u7740\u3002\u8001\u800c\u81ed\u7684\u8111\u9ad3?\u8150\u70c2\u7684\u8111\u9ad3?\u90fd\u6ca1\u5173\u7cfb\u3002\u50f5\u5c38\u9700\u8981\u5b83\u4eec\u3002")],[r.pzaZombieEnum.FLAG_ZOMBIE,new m(r.pzaZombieEnum.FLAG_ZOMBIE,"\u65d7\u5e1c\u50f5\u5c38\u6807\u5fd7\u7740\u5373\u5c06\u6765\u88ad\u7684\u4e00\u201c\u6ce2\u201d\u5927\u89c4\u6a21\u50f5\u5c38\u7fa4\u3002 ","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color>",!1,"\u6beb\u65e0\u7591\u95ee\uff0c\u65d7\u5e1c\u50f5\u5c38\u867d\u7136\u559c\u7231\u8111\u9ad3\u3002\u4f46\u5728\u79c1\u4e0b\u91cc\u4ed6\u4e5f\u8ff7\u604b\u65d7\u5e1c\u3002\u4e5f\u8bb8\u662f\u56e0\u4e3a\u65d7\u5e1c\u4e0a\u4e5f\u753b\u6709\u8111\u5b50\u5427\uff0c\u8fd9\u5f88\u96be\u8bf4\u3002")],[r.pzaZombieEnum.CONE_HEAD_ZOMBIE,new m(r.pzaZombieEnum.CONE_HEAD_ZOMBIE,"\u4ed6\u7684\u8def\u969c\u5934\u76d4\uff0c\u4f7f\u4ed6\u4e24\u500d\u575a\u97e7\u4e8e\u666e\u901a\u50f5\u5c38\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color>",!1,"\u548c\u5176\u4ed6\u50f5\u5c38\u4e00\u6837\uff0c\u8def\u969c\u5934\u50f5\u5c38\u76f2\u76ee\u5730\u5411\u524d\u3002\u4f46\u67d0\u4e9b\u4e8b\u7269\u5374\u4f7f\u4ed6\u505c\u4e0b\u811a\u6b65\uff0c\u6361\u8d77\u4e00\u4e2a\u4ea4\u901a\u8def\u969c\uff0c\u5e76\u56fa\u5b9e\u5728\u81ea\u5df1\u7684\u8111\u888b\u4e0a\u3002\u662f\u7684\uff0c\u4ed6\u5f88\u559c\u6b22\u53c2\u52a0\u805a\u4f1a\u3002")],[r.pzaZombieEnum.POLEVAULTING_ZOMBIE,new m(r.pzaZombieEnum.POLEVAULTING_ZOMBIE,"\u6491\u6746\u50f5\u5c38\u8fd0\u7528\u6491\u6746\u8dc3\u8fc7\u969c\u788d\u7269\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb\u800c\u540e\u6162\uff08\u8df3\u8dc3\u540e\uff09</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u8dc3\u8fc7\u4ed6\u6240\u78b0\u5230\u7684\u7b2c\u4e00\u682a\u690d\u7269</color>",!1,"\u4e00\u4e9b\u50f5\u5c38\u6e34\u671b\u8d70\u5f97\u66f4\u8fdc\u3001\u5f97\u5230\u66f4\u591a\uff0c\u8fd9\u4e5f\u4fc3\u4f7f\u4ed6\u4eec\u7531\u666e\u901a\u6210\u4e3a\u975e\u51e1\u3002\u90a3\u5c31\u662f\u6491\u6746\u50f5\u5c38\u3002")],[r.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,new m(r.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,"\u4ed6\u7684\u94c1\u6876\u5934\u76d4\uff0c\u80fd\u6781\u5927\u7a0b\u5ea6\u7684\u627f\u53d7\u4f24\u5bb3\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u78c1\u529b\u83c7</color>",!1,"\u94c1\u6876\u5934\u50f5\u5c38\u7ecf\u5e38\u6234\u7740\u6c34\u6876\uff0c\u90e8\u5206\u539f\u56e0\u662f\u60f3\u8ba9\u81ea\u5df1\u5728\u8fd9\u51b7\u6f20\u7684\u4e16\u754c\u91cc\u663e\u5f97\u72ec\u4e00\u65e0\u4e8c\u3002\u4f46\u5b9e\u9645\u4e0a\uff0c\u4ed6\u7ecf\u5e38\u53ea\u662f\u5fd8\u8bb0\u4e86\u90a3\u94c1\u6876\u6263\u5728\u4ed6\u5934\u4e0a\u800c\u5df2\u3002")],[r.pzaZombieEnum.NEWSPAPER_ZOMBIE,new m(r.pzaZombieEnum.NEWSPAPER_ZOMBIE,"\u4ed6\u7684\u62a5\u7eb8\u53ea\u80fd\u63d0\u4f9b\u975e\u5e38\u6709\u9650\u7684\u9632\u5fa1\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u62a5\u7eb8\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u6b63\u5e38\uff0c\u800c\u540e\u5feb(\u5931\u53bb\u62a5\u7eb8\u540e)</color>",!1,"\u8bfb\u62a5\u50f5\u5c38\uff0c\u4ed6\u6b63\u75f4\u8ff7\u4e8e\u5b8c\u6210\u4ed6\u7684\u6570\u72ec\u96be\u9898\u3002\u96be\u602a\u4ed6\u8fd9\u4e48\u53cd\u5e38\u3002")],[r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,new m(r.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,"\u4ed6\u7684\u94c1\u6805\u95e8\u662f\u6709\u6548\u7684\u76fe\u724c\u3002 ","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u94c1\u7f51\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u5927\u55b7\u83c7\u548c\u78c1\u529b\u83c7</color>",!1,"\u94c1\u6805\u95e8\u50f5\u5c38\u4e0a\u6b21\u62dc\u8bbf\u8fc7\u7684\u623f\u4e3b\u9632\u5b88\u5e76\u4e0d\u4e13\u4e1a\uff0c\u5728\u5403\u6389\u90a3\u623f\u4e3b\u7684\u8111\u5b50\u540e\u62ff\u8d70\u4e86\u4ed6\u5bb6\u7684\u94c1\u6805\u95e8\u3002")],[r.pzaZombieEnum.FOOTBALL_ZOMBIE,new m(r.pzaZombieEnum.FOOTBALL_ZOMBIE,"\u6a44\u6984\u7403\u50f5\u5c38\u7684\u8868\u6f14\u79c0\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u5f88\u9ad8</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u78c1\u529b\u83c7</color>",!1,"\u5728\u7403\u573a\u4e0a\uff0c\u6a44\u6984\u7403\u50f5\u5c38\u8868\u73b0\u51fa110%\u7684\u6fc0\u60c5\uff0c\u4f5c\u4e3a\u4e00\u540d\u961f\u5458\u4ed6\u8fdb\u653b\u9632\u5b88\u6837\u6837\u5728\u884c\u3002\u867d\u7136\u4ed6\u5b8c\u5168\u4e0d\u77e5\u9053\u6a44\u6984\u7403\u662f\u4ec0\u4e48\u3002")],[r.pzaZombieEnum.DANCING_ZOMBIE,new m(r.pzaZombieEnum.DANCING_ZOMBIE,"\u8fea\u65af\u79d1\u50f5\u5c38\u548c\u4eba\u7c7b(\u5728\u4e16\u6216\u8005\u6b7b\u53bb\u7684)\u5982\u6709\u96f7\u540c,\u7eaf\u5c5e\u5de7\u5408\u3002 ","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u53ec\u5524\u4f34\u821e\u50f5\u5c38</color>",!1,"\u8fea\u65af\u79d1\u50f5\u5c38\u7684\u6700\u65b0\u5531\u7247\u201c\u54c7\u8111\u4e73\u963f\u535c\u963f\u535c\u201d\u5728\u50f5\u5c38\u754c\u7684\u4eba\u6c14\u6b63\u6025\u901f\u98d9\u5347\u3002 ")],[r.pzaZombieEnum.BACKUP_DANCER,new m(r.pzaZombieEnum.BACKUP_DANCER,"\u5f53\u8fea\u65af\u79d1\u50f5\u5c38\u6447\u6446\u65f6\uff0c\u8fd9\u79cd\u50f5\u5c38\u56db\u4e2a\u7ed3\u4f19\u51fa\u73b0\u3002 ","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color>",!1,"\u4f34\u821e\u50f5\u5c38\u66fe\u5728\u4f4d\u4e8e\u50f5\u5c38\u7ebd\u7ea6\u57ce\u7684\u201c\u5480\u5229\u7259\u201d\u8868\u6f14\u827a\u672f\u5b66\u9662\u94bb\u7814\u8fc7\u516d\u5e74\u7684\u821e\u6280\u3002")],[r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,new m(r.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,"\u9e2d\u5b50\u6551\u751f\u5708\u80fd\u8ba9\u50f5\u5c38\u80fd\u6d6e\u5728\u6c34\u9762\u4e0a\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color>",!0,"\u53ea\u6709\u7279\u5b9a\u7684\u50f5\u5c38\u624d\u80fd\u6210\u4e3a\u6551\u751f\u5708\u50f5\u5c38\u3002\u5e76\u4e0d\u662f\u6bcf\u4e2a\u50f5\u5c38\u90fd\u80fd\u80dc\u4efb\u7684\u3002\u6709\u4e9b\u6551\u751f\u5708\u6709\u70b9\u6f0f\u6c14\uff0c\u4f46\u4ed6\u4eec\u6ca1\u80fd\u6ce8\u610f\u5230\uff0c\u6240\u4ee5\u4ed6\u4eec\u4e0d\u5f97\u4e0d\u653e\u5f03\u4e86\u5bf9\u8111\u5b50\u7684\u6e34\u6c42\u3002")],[r.pzaZombieEnum.SNORKEL_ZOMBIE,new m(r.pzaZombieEnum.SNORKEL_ZOMBIE,"\u6f5c\u6c34\u50f5\u5c38\u53ef\u4ee5\u5728\u6c34\u4e0b\u524d\u884c\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6f5c\u6cf3\u4ee5\u907f\u514d\u906d\u5230\u653b\u51fb</color>",!0,"\u50f5\u5c38\u4e0d\u547c\u5438\u3002\u4ed6\u4eec\u4e0d\u9700\u8981\u7a7a\u6c14\u3002\u90a3\u4e48\u4e3a\u4ec0\u4e48\u6f5c\u6c34\u50f5\u5c38\u9700\u8981\u4e00\u5957\u6f5c\u6c34\u88c5\u7f6e\u6765\u6f5c\u6c34\u5462?\u7b54\u6848\uff1a","\u540c\u884c\u7684\u538b\u529b")],[r.pzaZombieEnum.ZOMBONI,new m(r.pzaZombieEnum.ZOMBONI,"\u96ea\u6a47\u8f66\u50f5\u5c38\u8fd0\u7528\u51b0\u96ea\uff0c\u78be\u8fc7\u4f60\u7684\u690d\u7269\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u78be\u538b\u690d\u7269\uff0c\u7559\u4e0b\u6761\u51b0\u9053</color>",!1,"\u4e0d\u8981\u8bef\u4f1a\uff0c\u8fd9\u4e0d\u662fZAMBONI\u724c\u6d47\u51b0\u673a\u3002ZAMBONI\u4ee5\u53ca\u5176\u6d47\u51b0\u673a\u56fe\u6848\u90fd\u662fFRANKJ,ZAMBONI&CO,INC.\u7684\u6ce8\u518c\u5546\u6807\uff0c\u96ea\u6a47\u8f66\u50f5\u5c38\u4eec\u5df2\u53d6\u5f97\u6388\u6743\u3002\u5982\u679c\u4f60\u6709\u4efb\u4f55\u4e0e\u50f5\u5c38\u65e0\u5173\u7684\u6d47\u51b0\u9700\u6c42\uff0c\u8bf7\u6d4f\u89c8WWW.ZAMBONI.COM1")],[r.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM,new m(r.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM,"\u4ee5\u56db\u4eba\u5c0f\u961f\u5f62\u5f0f\u51fa\u73b0\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e(\u6bcf\u4e2a\u50f5\u5c38)</color><br/><color=#aa582b>\u51b0\u8f66\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u53ea\u5728\u96ea\u5730\u91cc\u51fa\u73b0</color>",!1,"\u96ea\u6a47\u50f5\u5c38\u5c0f\u961f\u5c3d\u529b\u5230\u8fbe\u4ed6\u4eec\u6240\u8981\u53bb\u7684\u5730\u65b9\u3002\u4ed6\u4eec\u4e92\u76f8\u4f9d\u8d56\u3001\u5206\u4eab\u8111\u5b50\u5e76\u5171\u540c\u8bad\u7ec3\u6210\u4e3a\u4e00\u4e2a\u5408\u4f5c\u65e0\u95f4\u7684\u50f5\u5c38\u5c0f\u961f\u3002")],[r.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,new m(r.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,"\u6d77\u8c5a\u9a91\u58eb\u50f5\u5c38\u5584\u4e8e\u5229\u7528\u4f60\u6c34\u6c60\u9632\u5fa1\u7684\u5f31\u70b9\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb\u800c\u540e\u6162(\u8df3\u8dc3\u540e)</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u8dc3\u8fc7\u4ed6\u6240\u78b0\u5230\u7684\u7b2c\u4e00\u682a\u690d\u7269</color>",!0,"\u90a3\u6d77\u8c5a\u5176\u5b9e\u4e5f\u662f\u4e2a\u50f5\u5c38\u3002")],[r.pzaZombieEnum.JACK_ZOMBIE,new m(r.pzaZombieEnum.JACK_ZOMBIE,"\u8fd9\u79cd\u50f5\u5c38\u5e26\u7740\u4e2a\u4f1a\u7206\u70b8\u7684\u6f58\u591a\u62c9\u76d2\u5b50\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u6253\u5f00\u73a9\u5076\u5323\u4f1a\u7206\u70b8</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u78c1\u529b\u83c7</color>",!1,"\u8fd9\u79cd\u50f5\u5c38\u4ee4\u4eba\u4e0d\u5bd2\u800c\u6817\uff0c\u4e0d\u662f\u56e0\u4e3a\u4ed6\u7684\u51b0\u51b7\u8eab\u8eaf\u800c\u662f\u56e0\u4e3a\u4ed6\u7684\u75af\u72c2\u3002")],[r.pzaZombieEnum.BALLOON_ZOMBIE,new m(r.pzaZombieEnum.BALLOON_ZOMBIE,"\u6c14\u7403\u50f5\u5c38\u6f02\u6d6e\u5728\u7a7a\u4e2d\uff0c\u8eb2\u8fc7\u5927\u591a\u6570\u653b\u51fb\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u98de\u884c</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u4ed9\u4eba\u638c\u548c\u4e09\u53f6\u8349</color>",!1,"\u6c14\u7403\u50f5\u5c38\u771f\u5e78\u8fd0\u3002\u6c14\u7403\u6709\u5f88\u591a\u529f\u6548\uff0c\u800c\u5176\u4ed6\u50f5\u5c38\u90fd\u4e0d\u66fe\u6361\u5230\u8fc7\u3002")],[r.pzaZombieEnum.DIGGER_ZOMBIE,new m(r.pzaZombieEnum.DIGGER_ZOMBIE,"\u8fd9\u79cd\u50f5\u5c38\u901a\u8fc7\u6316\u96a7\u9053\u6765\u7a7f\u8fc7\u4f60\u7684\u9632\u5fa1\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb\uff0c\u800c\u540e\u6162</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u7a7f\u8fc7\u5730\u4e0b\u96a7\u9053\u5e76\u51fa\u73b0\u5728\u8349\u576a\u7684\u5de6\u4fa7</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u53cc\u5411\u5c04\u624b\u548c\u78c1\u529b\u83c7</color>",!1,"\u77ff\u5de5\u50f5\u5c38\u6bcf\u5468\u82b1\u8d39\u4e09\u5929\u65f6\u95f4\u6765\u7533\u8bf7\u4ed6\u7684\u6316\u6398\u8bb8\u53ef\u8bc1\u3002")],[r.pzaZombieEnum.POGO_ZOMBIE,new m(r.pzaZombieEnum.POGO_ZOMBIE,"\u8e66\u8e66\u50f5\u5c38\u80fd\u8df3\u8dc3\u8fc7\u4f60\u7684\u9632\u5b88\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u8dc3\u8fc7\u690d\u7269</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u78c1\u529b\u83c7</color>",!1,"\u8e66!\u8e66!\u8e66!\u90a3\u662f\u8e66\u8e66\u50f5\u5c38\u53d1\u51fa\u7684\u6709\u529b\u4e14\u6709\u6548\u5730\u58f0\u97f3\u3002")],[r.pzaZombieEnum.YETI_ZOMBIE,new m(r.pzaZombieEnum.YETI_ZOMBIE,"\u4e00\u79cd\u7f55\u89c1\u800c\u53e4\u602a\u7684\u751f\u7269\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u9ad8</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4e00\u5c0f\u4f1a\u513f\u540e\u4f1a\u9003\u8dd1</color>",!1,"\u5173\u4e8e\u50f5\u5c38\u96ea\u4eba\u7684\u8d44\u6599\u5f88\u5c11\uff0c\u9664\u4e86\u4ed6\u7684\u540d\u5b57\u3001\u51fa\u751f\u65e5\u671f\u3001\u793e\u4fdd\u53f7\u3001\u53d7\u6559\u80b2\u7a0b\u5ea6\u3001\u5de5\u4f5c\u5c65\u5386\u4ee5\u53ca\u559c\u7231\u5939\u5fc3\u4e09\u660e\u6cbb(\u70e4\u725b\u8089\u53ca\u745e\u58eb\u4eba\u8089\u53e3\u5473)\u3002 ")],[r.pzaZombieEnum.BUNGEE_ZOMBIE,new m(r.pzaZombieEnum.BUNGEE_ZOMBIE,"\u8e66\u6781\u50f5\u5c38\u4ece\u5929\u4e0a\u653b\u51fb\u3002 ","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u4ece\u5929\u800c\u964d\u5e76\u7a83\u53d6\u4f60\u7684\u690d\u7269</color>",!1,"\u8e66\u6781\u50f5\u5c38\u6700\u7231\u5192\u9669\u3002\u6bd5\u7adf\uff0c\u5982\u679c\u4f60\u4e0d\u518d\u6d3b\u7740\uff0c\u90a3\u518d\u4f53\u9a8c\u6b21\u6b7b\u4ea1\u53c8\u6709\u4f55\u59a8\u5462? ")],[r.pzaZombieEnum.LADDER_ZOMBIE,new m(r.pzaZombieEnum.LADDER_ZOMBIE,"\u68af\u5b50\u50f5\u5c38\u80fd\u722c\u8fc7\u969c\u788d\u7269\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d\u7b49</color><br/><color=#aa582b>\u68af\u5b50\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d</color><br/><color=#aa582b>\u901f\u5ea6\uff1a</c><color=#e6300d>\u5feb\uff0c\u800c\u540e\u6162(\u653e\u7f6e\u68af\u5b50\u540e)</color><br/><color=#aa582b>\u5f31\u70b9\uff1a</c><color=#e6300d>\u5927\u55b7\u83c7\u548c\u78c1\u529b\u83c7</color>",!1,"\u8fd9\u67b6\u68af\u5b50\u82b1\u4e86\u4ed6$8.99\u3002")],[r.pzaZombieEnum.CATAPULT_ZOMBIE,new m(r.pzaZombieEnum.CATAPULT_ZOMBIE,"\u6295\u77f3\u8f66\u50f5\u5c38\u64cd\u4f5c\u7740\u91cd\u578b\u673a\u5668\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4e2d</color><br/><color=#aa582b>\u7279\u70b9\uff1a</c><color=#e6300d>\u5bf9\u4f60\u7684\u690d\u7269\u6295\u63b7\u7bee\u7403</color>",!1,"\u6295\u77f3\u8f66\u50f5\u5c38\u53ef\u4ee5\u5229\u7528\u5f39\u5c04\u5668\u6765\u53d1\u5c04\u4efb\u4f55\u4e1c\u897f\uff0c\u4f46\u7bee\u7403\u4f3c\u4e4e\u662f\u7edd\u4f73\u9009\u62e9\u3002")],[r.pzaZombieEnum.GARGANTUAR,new m(r.pzaZombieEnum.GARGANTUAR,"\u5de8\u4eba\u50f5\u5c38\u662f\u4e00\u79cd\u5de8\u578b\u50f5\u5c38","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u6781\u9ad8</color>",!1,"\u5f53\u5de8\u4eba\u50f5\u5c38\u8d70\u52a8\u7684\u65f6\u5019\uff0c\u5927\u5730\u5728\u9707\u98a4\u3002\u5f53\u4ed6\u60b2\u53f9\u7684\u65f6\u5019\uff0c\u6240\u6709\u7684\u50f5\u5c38\u90fd\u6c89\u5bc2\u4e86\u3002\u4ed6\u662f\u50f5\u5c38\u4eec\u7684\u5076\u50cf\u3002\u4e0d\u8fc7\u5462\uff0c\u4ed6\u5230\u73b0\u5728\u8fd8\u6ca1\u4ea4\u5230\u5973\u670b\u53cb\u3002")],[r.pzaZombieEnum.IMP,new m(r.pzaZombieEnum.IMP,"\u5c0f\u9b3c\u50f5\u5c38\u662f\u4e00\u7fa4\u5c0f\u578b\u50f5\u5c38\uff0c\u88ab\u5de8\u4eba\u50f5\u5c38\u7528\u6765\u6295\u63b7\u8fdb\u4f60\u7684\u9632\u5fa1\u4f53\u7cfb\u3002","<color=#aa582b>\u5f3a\u5ea6\uff1a</c><color=#e6300d>\u4f4e</color>",!1,"\u5c0f\u6dd8\u6c14\u867d\u7136\u7626\u5c0f\uff0c\u5374\u5f88\u7ed3\u5b9e\u3002\u4ed6\u7cbe\u901a\u50f5\u5c38\u67d4\u9053\uff0c\u50f5\u5c38\u7a7a\u624b\u9053\u548c\u50f5\u5c38\u5173\u8282\u6280\u3002\u53e6\u5916\uff0c\u4ed6\u8fd8\u4f1a\u5439\u53e3\u7434\u3002")],[r.pzaZombieEnum.DR_ZOMBOSS,new m(r.pzaZombieEnum.DR_ZOMBOSS,"\u50f5\u5c38\u535a\u58eb\u7edf\u6cbb\u6240\u6709\u7684\u50f5\u5c38","<color=#aa582b>\u5f3a\u5ea6(\u53d7\u50f5\u5c38\u673a\u5668\u4eba\u4fdd\u62a4)\uff1a</c><color=#e6300d>\u6781\u9ad8</color>",!1,"\u50f5\u5c38\u535a\u58eb\u4e54\u6cbb-\u57c3\u5fb7\u52a0\u53ea\u82b1\u4e86\u4e24\u5e74\u5c31\u83b7\u5f97\u4e86\u6b7b\u4ea1\u5b66\u7684\u535a\u58eb\u5b66\u4f4d\u3002\u5f88\u5feb\u5c31\u638c\u63e1\u4e86\u6b7b\u4ea1\u5b66\u7684\u6280\u672f\uff0c\u5e76\u5236\u9020\u4e86\u4e00\u53ea\u6050\u6016\u7684\u5de8\u578b\u50f5\u5c38\u673a\u5668\u4eba\uff0c\u7740\u624b\u5efa\u7acb\u8d77\u4e00\u4e2a\u72ec\u88c1\u7684\u5730\u65b9\u52bf\u529b\u3002 ")]]),a.NO_RECOMMEND_PLANT=new Map([[1,new Set([9,10,11,12,13,14,15,16,17,20,25,26,32,34,43,44])],[2,new Set([17,20,25,26,34,36,44])],[3,new Set([9,10,11,12,13,14,15,16,25,26,32,34,43])],[4,new Set([12,34,36])],[5,new Set([9,10,11,12,13,14,15,16,17,20,22,25,26,32,43,44,47])],[6,new Set([9,10,11,12,13,14,15,16,17,20,25,26,32,34,43,44])],[7,new Set([17,20,25,26,34,36,44])],[8,new Set([9,10,11,12,13,14,15,16,25,26,32,34,43])],[9,new Set([12,34,36])],[10,new Set([9,10,11,12,13,14,15,16,17,20,22,25,26,32,43,44,47])]]),a.MINI_NO_RECOMMEND_PLANT=new Map([[1,new Set([12,17,20,22,25,26,44,47])]]),a}();e.pzaGameConfig=y,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaJarData":"pzaJarData","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","./pzaLocalData":"pzaLocalData","./pzaUtil":"pzaUtil"}],pzaGameCreativeTrad:[function(a,t,e){"use strict";cc._RF.push(t,"f66deJ8j2tCpaGDVmT6zROP","pzaGameCreativeTrad");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameCreativeTrad=void 0;var i=a("../Battle/Data/pzaBaseData"),r=a("../Battle/Data/pzaDropType"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Battle/Data/pzaZombieEnum"),s=a("../Battle/Zombie/pzaBaseZombie"),c=a("../Battle/pzaEffectManager"),u=a("../Battle/pzaGameState"),d=a("../Common/pzaBeltConfig"),h=a("../Common/pzaCollisionManager"),m=a("../Common/pzaGameBase"),f=a("../Common/pzaGameConfig"),z=a("../Common/pzaGameManager"),y=a("../Common/pzaGamePartConfig"),g=a("../Common/pzaGameZJ"),v=a("../Common/pzaLocalData"),b=a("../Common/pzaSoundManager"),S=a("../Common/pzaStatisticsMgr"),P=a("../Common/pzaUIManager"),C=a("../Common/pzaUtil"),D=a("../Common/pzaWorldEventManager"),M=a("../Load/pzaBundleObjectPool"),E=a("../Load/pzaPreLoadManager"),_=a("../View/Battle/pzaGetAchieveView"),T=a("../View/Battle/pzaPlantBeltView"),w=a("../View/pzaCommonMask"),A=a("../View/pzaWarningView"),B=a("../utils/pzaChannel"),G=a("../utils/pzaResMgr"),O=a("../utils/pzakc"),I=a("./pzaCreativeTradConf"),N=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=u.pzaGameMode.CREATIVE_TRAD,t.confMap=null,t.waveZombieDensity=null,t.randomZombies=[],t}return n(t,a),t.prototype.init=function(){var a=this;if(null!=this.confMap)return this;this.confMap=new Map,G.pzaResMgr.instance().getConf("a25").forEach(function(t){if(null!=t){var e=null;null!=t.density&&(e=t.density.split(",")).forEach(function(a,t){e[t]=parseInt(a)});var o=null;null!=t.zombie&&(o=t.zombie.split(",")).forEach(function(a,t){o[t]=parseInt(a)});var n=null;null!=t.initcards&&(n=t.initcards.split(",")).forEach(function(a,t){n[t]=parseInt(a)});var i=null;null!=t.plant&&(i=t.plant.split(",")).forEach(function(a,t){i[t]=parseInt(a)});var r=null;null!=t.plantweight&&(r=t.plantweight.split(",")).forEach(function(a,t){r[t]=parseInt(a)});var p=0,l=0;if(null!=t.fall){var s=t.fall.split(",");p=parseInt(s[0]),l=parseInt(s[1])}var c=new I.pzaCreativeTradConf(parseInt(t.id),t.name,parseInt(t.wave),e,o,parseInt(t.multiple),parseInt(t.flowerpot),n,i,r,p,l,parseInt(t.fog),parseInt(t.atlas),t.creator,t.isnew,t.trophyid);a.confMap.set(t.id+"",c)}})},t.prototype.getConf=function(a){var t=this.confMap.get(a+"");return null==t?(console.log("\u8ff7\u4f60\u6e38\u620f\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u5173\u5361\u914d\u7f6e"),null):t},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=this.getConf(u.pzaGameState.curPart);a.maxWave=t.maxWave;for(var e=Math.floor(a.maxWave/10),o=0;o<a.partFlags.length;o++){var n=a.partFlags[o];o+1>e?n.active=!1:(n.active=!0,n.setPosition(-315*(o+1)/e-30,42))}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0;var i=this.getConf(u.pzaGameState.curPart).name;a.partLabel.string=i},t.prototype.updatePartProcess=function(t){a.prototype.updatePartProcess.call(this,t);var e=Math.floor(window.pzazombieManager.wave/10)-1;if(!(e<0||e>2)){var o=t.partFlags[e];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=4==u.pzaGameState.curPart,t.skipPartBtn.active=!1,t.freePlantNode.active=!0,t.speedBtn.active=!0},t.prototype.refreshNextWave=function(t,e){if(a.prototype.refreshNextWave.call(this,t,e),!t.lastWave){var o=!1;if(this.getConf(u.pzaGameState.curPart).maxWave==t.wave+1&&(o=!0),(t.wave+1)%10==0||o){if(!t.hasShowRedTip)return void((t.zombieMap.size<=0||t.curWaveTime>=y.pzaWaveConfig.activeRedTipTime)&&t.showBigWaveTip(o,!1))}else if(0!=t.wave&&t.nextWaveTime>y.pzaWaveConfig.preRefreshTime&&t.getCurWaveLeftHp()<=t.preRefreshHp)return void(t.nextWaveTime=y.pzaWaveConfig.preRefreshTime);t.curWaveTime<y.pzaWaveConfig.minRefreshTime||t.nextWaveTime>0||this.createWave(t)}},t.prototype.createWave=function(t){a.prototype.createWave.call(this,t),t.nextWaveTime=C.pzaUtil.getRandomFloatNum(8,10);var e=this.getConf(u.pzaGameState.curPart);if(!(null==e||e.maxWave<t.wave)){e.maxWave==t.wave&&(t.lastWave=!0);var o=this.getRandomWaveZombie(t.wave,!0,window.pzaMapManager.getIceYCount(),0,u.pzaGameState.redLeft);if(null==o)return t.nextWaveTime=0,void(t.curWaveTime=6);var n=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||n.indexOf(a.yIndex)>=0||n.push(a.yIndex)});for(var i=u.pzaGameState.map.getMapRow(),r=!0,p=[],s=[],c=0;c<i;c++)s.push(c);s.sort(function(){return Math.random()-.5});var d=0;o.forEach(function(a){var e=window.pzaMapManager.getRandomWayIndex(d,a,s);if(d++,a==l.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,p);if(null==o)return;p.push(o);var i=o.split("-"),c=t.createFixBlockZombieData(a,parseInt(i[0]),parseInt(i[1]));return t.createZombie(c),void t.curWaveZombieDatas.add(c)}a==l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&n.length>0&&(e=n.shift());var h=t.createZombieData(a,e);!r&&h.logicPos&&(h.logicPos.x+=C.pzaUtil.getRandomFloatNum(.2,1)*u.pzaGameState.map.getBlockWidth()),t.createZombie(h),t.curWaveZombieDatas.add(h),r=!1}),t.lastWave&&(t.lastWayZombieTime=2)}},t.prototype.lastTombWaterZombie=function(a){var t=y.pzaGamePartConfig.getPartConfig(u.pzaGameState.curChapter,u.pzaGameState.curPart);if(null!=t){if(window.pzaMapManager.TombMap.forEach(function(e){if(null!=e&&null!=e.xIndex&&null!=e.yIndex&&!window.pzaplantManager.hasPlant(e.xIndex,e.yIndex)){var o=t.getRandomTombZombie(),n=a.createFixBlockZombieData(o,e.xIndex,e.yIndex);a.createZombie(n,!1,!0),a.curWaveZombieDatas.add(n)}}),t.lastWaterWaveZombie>0){for(var e=[],o=t.lastWaterWaveMinColumn-1;o<9;o++)e.push([o,2]),e.push([o,3]);e.sort(function(){return Math.random()-.5});for(var n=0;n<t.lastWaterWaveZombie;n++)if(null!=(p=e[n])){var i=t.getRandomDiveZombie(),r=a.createFixBlockZombieData(i,p[0],p[1]);a.createZombie(r,!1,!1,!0),a.curWaveZombieDatas.add(r)}}if(t.lastBungeeZombie>0){for(e=[],o=t.lastBungeeMinColumn-1;o<9;o++)e.push([o,0]),e.push([o,1]),e.push([o,2]),e.push([o,3]),e.push([o,4]);for(e.sort(function(){return Math.random()-.5}),n=0;n<t.lastBungeeZombie;n++){var p;if(null!=(p=e[n])){var l=t.getRandomTombZombie();r=window.pzazombieManager.createFixBlockZombieData(l,p[0],p[1]),a.zombieDatas[p[1]].delete(r),c.pzaEffectManager.createBungeeZombieEffect(r),a.curWaveZombieDatas.add(r)}}}}},t.prototype.isLastWave=function(a){var t=this.getConf(u.pzaGameState.curPart);return a.wave==t.maxWave},t.prototype.checkAllZombieDeath=function(a){var t=0;return a.zombieDatas.forEach(function(a){t+=a.size}),!(t>0)},t.prototype.onZombieDeath=function(a,t,e,o){void 0===e&&(e=!0),void 0===o&&(o=null),e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)&&(console.log("\u6700\u540e\u4e00\u4e2a\u50f5\u5c38\u6b7b\u4ea1",u.pzaGameState.gameMode,"\u7f50\u5b50\u6570",window.pzaplantManager.pzaJarMap.size),z.pzaGameManager.passPart(t.logicPos))},t.prototype.createPreviewZombie=function(a,t,e){var o=1==e?C.pzaUtil.getRandomNum(6,7):C.pzaUtil.getRandomNum(8,9),n=this.getPreviewZombies(o);if(null!=n){var r=[];5==t?(r.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),75)),r.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),75)),r.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),125)),r.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),125)),r.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),175)),r.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),175)),r.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),225)),r.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),225)),r.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),275)),r.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),275)),r.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),325)),r.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),325)),r.push(cc.v2(1450+C.pzaUtil.getRandomFloatNum(-25,25),375)),r.push(cc.v2(1550+C.pzaUtil.getRandomFloatNum(-25,25),375)),r.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),75)),r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),75)),r.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),125)),r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),125)),r.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),175)),r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),175)),r.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),225)),r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),225)),r.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),275)),r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),275)),r.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),325)),r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),325)),r.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),375)),r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),375)),r.push(cc.v2(1650+C.pzaUtil.getRandomFloatNum(-25,25),410)),r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),410))):(r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),40)),r.push(cc.v2(1925+C.pzaUtil.getRandomFloatNum(-25,25),40)),r.push(cc.v2(2025+C.pzaUtil.getRandomFloatNum(-25,25),40)),r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),90)),r.push(cc.v2(1925+C.pzaUtil.getRandomFloatNum(-25,25),90)),r.push(cc.v2(2025+C.pzaUtil.getRandomFloatNum(-25,25),90)),r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),140)),r.push(cc.v2(1925+C.pzaUtil.getRandomFloatNum(-25,25),140)),r.push(cc.v2(2025+C.pzaUtil.getRandomFloatNum(-25,25),140)),r.push(cc.v2(1750+C.pzaUtil.getRandomFloatNum(-25,25),190)),r.push(cc.v2(1925+C.pzaUtil.getRandomFloatNum(-25,25),190)),r.push(cc.v2(2025+C.pzaUtil.getRandomFloatNum(-25,25),190)),r.push(cc.v2(1680+C.pzaUtil.getRandomFloatNum(-20,20),240)),r.push(cc.v2(1780+C.pzaUtil.getRandomFloatNum(-20,20),240)),r.push(cc.v2(1880+C.pzaUtil.getRandomFloatNum(-20,20),240)),r.push(cc.v2(1680+C.pzaUtil.getRandomFloatNum(-20,20),290)),r.push(cc.v2(1780+C.pzaUtil.getRandomFloatNum(-20,20),290)),r.push(cc.v2(1880+C.pzaUtil.getRandomFloatNum(-20,20),290)),r.push(cc.v2(1680+C.pzaUtil.getRandomFloatNum(-20,20),340)),r.push(cc.v2(1780+C.pzaUtil.getRandomFloatNum(-20,20),340)),r.push(cc.v2(1880+C.pzaUtil.getRandomFloatNum(-20,20),340)),r.push(cc.v2(1670+C.pzaUtil.getRandomFloatNum(-30,30),390)),r.push(cc.v2(1770+C.pzaUtil.getRandomFloatNum(-30,30),390)),r.push(cc.v2(1670+C.pzaUtil.getRandomFloatNum(-30,30),440)),r.push(cc.v2(1770+C.pzaUtil.getRandomFloatNum(-30,30),440)),r.push(cc.v2(1670+C.pzaUtil.getRandomFloatNum(-30,30),490)),r.push(cc.v2(1770+C.pzaUtil.getRandomFloatNum(-30,30),490)),r.push(cc.v2(1660+C.pzaUtil.getRandomFloatNum(-20,20),540)),r.push(cc.v2(1700+C.pzaUtil.getRandomFloatNum(-20,20),540))),r.sort(function(){return Math.random()-.5});for(var p=function(t,e){var o=E.pzaPreLoadManager.getZombieUrl(t);M.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(o,n){if(null==o&&null!=n){n.setParent(a.previewZombieNode),n.setPosition(e),n.zIndex=-e.y;var r=n.getComponent(s.pzaBaseZombie),p=new i.pzaBaseData(null,t);p.hp=1,p.logicPos=e,r&&r.preview(p,a.previewShadowNode,1),a.PreviewZombies.add(r)}else console.error(o)})},c=0;c<n.length;c++){var d=n[c],h=r[c];d==l.pzaZombieEnum.BUNGEE_ZOMBIE&&(h=5==t?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),p(d,h)}if(5==t&&5==e&&!u.pzaGameState.isSurvival()){var m=[cc.v2(1400,550+100*Math.random()),cc.v2(1500,550+100*Math.random()),cc.v2(1600,550+100*Math.random())];for(c=0;c<3;c++)h=m[c],p(l.pzaZombieEnum.BUNGEE_ZOMBIE,h)}b.pzaSoundManager.playBgm(b.pzaBGMName.PRE_BGM)}},t.prototype.showPreviewTip=function(a){a.word.string=this.getConf(u.pzaGameState.curPart).name+"",a.flagWord.node.active=!1},t.prototype.getAllZombies=function(a){var t=[];return this.confMap.get(a+"").zombieTypes.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),t},t.prototype.getBeltPlantArr=function(a){var t=[];return this.confMap.get(a+"").plantCardsId.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),t},t.prototype.getBeltPlantWeightArr=function(a){var t=[];return this.confMap.get(a+"").plantCardsWeight.forEach(function(a){t.push(a)}),t},t.prototype.getAllPlantArr=function(a){var t=[],e=this.confMap.get(a+"");return e.initialCards.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),e.plantCardsId.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),t},t.prototype.getInitPlantArr=function(a){var t=[];return this.confMap.get(a+"").initialCards.forEach(function(a){t.push(a)}),t},t.prototype.getPreviewZombies=function(a){var t=[],e=this.getAllZombies(u.pzaGameState.curPart);if(null==e||e.length<=1){for(var o=0;o<a;o++)t.push(l.pzaZombieEnum.ZOMBIE);return t}for(o=0;o<e.length;o++)t.push(e[o]);if(t.length>=a)return t;var n=[],i=[];e.forEach(function(a){if(null!=a&&a!=l.pzaZombieEnum.BUNGEE_ZOMBIE){var t=f.pzaGameConfig.getZombieConfig(a);null!=t&&0!=t.refrshWeight&&(n.push(a),i.push(t.refrshWeight))}});var r=t.length;for(o=0;o<a-r;o++){var p=C.pzaUtil.getRandomIndexByWeight(i);t.push(n[p])}return t},t.prototype.getRandomWaveZombie=function(a,t,e,o,n){var i=this;if(void 0===o&&(o=0),void 0===n&&(n=0),this.randomZombies=[],this.waveZombieDensity=this.getConf(u.pzaGameState.curPart).waveZombieDensity,null==this.waveZombieDensity||a-1<0)return[l.pzaZombieEnum.ZOMBIE];var r=this.waveZombieDensity[a-1];if(0==r)return null;if(null==r||r<=1)return[l.pzaZombieEnum.ZOMBIE];var p=this.getConf(u.pzaGameState.curPart),s=p.maxWave,c=p.zombieTypes;if(r=this.fixedZombie(r,a),a==s&&c.forEach(function(a){a!=l.pzaZombieEnum.ZOMBIE&&(i.randomZombies.push(a),r-=f.pzaGameConfig.getZombieLevel(a))}),a%10==0)for(var d=Math.min(Math.floor(r/2),8),h=0;h<d;h++)this.randomZombies.push(l.pzaZombieEnum.ZOMBIE),r-=f.pzaGameConfig.getZombieLevel(l.pzaZombieEnum.ZOMBIE);for(;r>0;){var m=this.getRandomZombie(r,a,e,o,n);if(null==m)break;if(m==l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?e--:m==l.pzaZombieEnum.RED_GARGANTUAR&&a%10!=0&&n--,this.randomZombies.push(m),this.randomZombies.length>=50)break;r-=f.pzaGameConfig.getZombieLevel(m)}return this.randomZombies},t.prototype.fixedZombie=function(a,t){if(20==t&&3==u.pzaGameState.curPart)for(var e=0;e<3;e++)this.randomZombies.push(l.pzaZombieEnum.GARGANTUAR),a-=f.pzaGameConfig.getZombieLevel(l.pzaZombieEnum.GARGANTUAR);if(30==t&&3==u.pzaGameState.curPart)for(e=0;e<5;e++)this.randomZombies.push(l.pzaZombieEnum.GARGANTUAR),a-=f.pzaGameConfig.getZombieLevel(l.pzaZombieEnum.GARGANTUAR);return a},t.prototype.getRandomTombZombie=function(){return[l.pzaZombieEnum.ZOMBIE,l.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,l.pzaZombieEnum.CONE_HEAD_ZOMBIE][Math.floor(3*Math.random())]},t.prototype.getRandomZombie=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[],r=[],p=this.getConf(u.pzaGameState.curPart).zombieTypes,s=0;if(t>=10&&t<15?s=3:t>=15&&(s=4),p.forEach(function(e){if(null!=e){var p=f.pzaGameConfig.getZombieConfig(e);null==p||0==p.refrshWeight||p.refreshLevel>a||p.refrshMinWave>s||e==l.pzaZombieEnum.GARGANTUAR&&3==u.pzaGameState.curPart||o>0&&e==l.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&t%10!=0||(1!=u.pzaGameState.curPart||e!=l.pzaZombieEnum.JACK_ZOMBIE&&e!=l.pzaZombieEnum.LADDER_ZOMBIE&&e!=l.pzaZombieEnum.GARGANTUAR)&&(2!=u.pzaGameState.curPart||e!=l.pzaZombieEnum.DIGGER_ZOMBIE&&e!=l.pzaZombieEnum.POGO_ZOMBIE&&e!=l.pzaZombieEnum.GARGANTUAR)&&e!=l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&(i.push(e),o>0||r.push(p.refrshWeight))}}),e>0){var c=f.pzaGameConfig.getZombieConfig(l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM);null!=c&&c.refreshLevel<=a&&(i.push(l.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),r.push(c.refrshWeight))}var d=C.pzaUtil.getRandomIndexByWeight(r);return i[d]},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=4==u.pzaGameState.curPart,a.cherryBombNode.active=!0,a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.clickSelectPartInFailView=function(){P.pzaUIManager.baseShowPopUI(E.pzaResourceUrl.CREATIVE_VIEW,function(){P.pzaUIManager.baseShowBoardUI(E.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.getAdPlantArr=function(){return 1==u.pzaGameState.curPart?[p.pzaPlantEnum.GATLING_PEA,p.pzaPlantEnum.WINTER_MELON,p.pzaPlantEnum.GOLD_MAGNET,p.pzaPlantEnum.SPIKEROCK,p.pzaPlantEnum.COB_CANNON]:2==u.pzaGameState.curPart?[p.pzaPlantEnum.GATLING_PEA,p.pzaPlantEnum.CATTAIL,p.pzaPlantEnum.WINTER_MELON,p.pzaPlantEnum.GOLD_MAGNET,p.pzaPlantEnum.SPIKEROCK,p.pzaPlantEnum.COB_CANNON]:3==u.pzaGameState.curPart?[p.pzaPlantEnum.GATLING_PEA,p.pzaPlantEnum.GLOOM_SHROOM,p.pzaPlantEnum.CATTAIL,p.pzaPlantEnum.WINTER_MELON,p.pzaPlantEnum.GOLD_MAGNET,p.pzaPlantEnum.SPIKEROCK,p.pzaPlantEnum.COB_CANNON]:void 0},t.prototype.getGameModeName=function(){return"\u521b\u610f\u6a21\u5f0f-"},t.prototype.getZombieTypeArr=function(a,t){return this.getAllZombies(t)},t.prototype.getPlantArr=function(a,t){return this.getAllPlantArr(t)},t.prototype.isAutoCreateSun=function(){return 4==u.pzaGameState.curPart},t.prototype.beforeLoad=function(){u.pzaGameState.partStar=0,this.init()},t.prototype.readData=function(){},t.prototype.winDrop=function(){var a=r.pzaDropType.COIN_PACKAGE,t=this.getConf(u.pzaGameState.curPart).trophyid;return v.pzaLocalData.passCreativeMode(t)&&(a=r.pzaDropType.CREATIVE_TRAD_TROPHY),"my"===B.pzaChannel.instance().channel&&B.pzaChannel.instance().getChannel().actSubmit(),a},t.prototype.showPassUiNoStar=function(){P.pzaUIManager.baseShowPopUI(E.pzaResourceUrl.CREATIVE_VIEW,function(){P.pzaUIManager.baseShowBoardUI(E.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.beforeGameStart=function(){w.pzaCommonMask.showMask(),c.pzaEffectManager.createGroveEffect()},t.prototype.gameStart=function(a,t){var e=z.pzaGameManager.getGame(u.pzaGameMode.ZaJiao,g.pzaGameZJ).rankCount,o=G.pzaResMgr.instance().getConf("a24").length,n=u.pzaGameState.curPart+e+o;v.pzaLocalData.gameStartTimeStamp=Date.now(),S.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt("300"+n)}),this.beforeGameStart(a,t),this.normalStartGameCall(a,t)},t.prototype.loadAndStart=function(a,t){var e=this;this.preLoad(a,t,function(){e.gameStart(a,t)})},t.prototype.preLoad=function(a,t,e){u.pzaGameState.autoPickLock=!1,this.init(),a=this.getConf(t).atlas,u.pzaGameState.init(a,t,this.gameMode,this.skipPartStar()),this.beforeLoad(a,t),u.pzaGameState.isGameEnd=!1,h.pzaCollisionManager.getInstance.setOn();var o=this.getResArr(a,t);P.pzaUIManager.showLoading(),1==a&&1==t?this.initMapPlantZombie(a,10):this.initMapPlantZombie(a,t),b.pzaSoundManager.clearAllLoopAudio(),this.readData(a,t),M.pzaBundleObjectPool.preLoadSubResource(o,function(){P.pzaUIManager.hideLoading(e)},function(a){P.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*a)))}),b.pzaSoundManager.playAudio("loadingbar_zombie")},t.prototype.playGameBgm=function(){b.pzaSoundManager.playBgm(b.pzaBGMName.BELT_BGM)},t.prototype.normalStartGameCall=function(a,t){var e=this;window.pzaMapManager.previewMap(function(){w.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){z.pzaGameManager.showBattleUI(E.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var o=a&&a.getComponent(T.pzaPlantBeltView);o&&o.showView(function(){window.pzaMapManager.initCleanCar(),window.pzaMapManager.fogEnter(function(){c.pzaEffectManager.createReadyWord(function(){w.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),u.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=25,d.pzaBeltConfig.initTradPlants(t),D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_RESUME,null),e.playGameBgm()})})})})})},!0)},t.prototype.initFlowerPot=function(a){var t=this.getConf(a);if(!(null==t||t.flowerPotColumn<=0))for(var e=u.pzaGameState.map.getMapRow(),o=0;o<t.flowerPotColumn;o++)for(var n=0;n<e;n++)window.pzaplantManager.createPlant(p.pzaPlantEnum.FLOWER_POT,o,n,!0)},t.prototype.checkAchieve=function(){},t.prototype.gameRecover=function(a,t){var e=this;P.pzaUIManager.removeBoardUI(),u.pzaGameState.midOut=!1,P.pzaUIManager.baseShowPopUI(E.pzaResourceUrl.WARNING_VIEW,function(o){var n=o&&o.getComponent(A.pzaWarningView);n&&n.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){u.pzaGameState.gamePause=!1,D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_RESUME,null),C.pzaUtil.changeGameSpeed(u.pzaGameState.gameSpeed),b.pzaSoundManager.playBgm(b.pzaBGMName.BELT_BGM),b.pzaSoundManager.clearAllLoopAudio(),window.pzazombieManager.getZombieMapData()>0&&b.pzaSoundManager.playLoopAudio("jack_enter",!0),4!=a&&9!=a||10!=t||b.pzaSoundManager.playLoopAudio("rain",!0)},function(){z.pzaGameManager.removeBattleUI(),D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_OVER,null),e.firstStart(a,t)},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f")})},t.prototype.partFail=function(){var t=z.pzaGameManager.getGame(u.pzaGameMode.ZaJiao,g.pzaGameZJ).rankCount,e=G.pzaResMgr.instance().getConf("a24").length,o=(G.pzaResMgr.instance().getConf("a25").length,u.pzaGameState.curPart+t+e),n=0;v.pzaLocalData.hasUseProp&&(n=1);var i=Date.now()-v.pzaLocalData.gameStartTimeStamp;i=Math.ceil(i/1e3),S.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("300"+o)},{name:"is_Win",value:0},{name:"Use",value:n},{name:"time",value:i}),v.pzaLocalData.hasUseProp=!1,a.prototype.partFail.call(this)},t.prototype.partWin=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null);var o=z.pzaGameManager.getGame(u.pzaGameMode.ZaJiao,g.pzaGameZJ).rankCount,n=G.pzaResMgr.instance().getConf("a24").length,i=(G.pzaResMgr.instance().getConf("a25").length,u.pzaGameState.curPart+o+n),r=0;v.pzaLocalData.hasUseProp&&(r=1);var p=Date.now()-v.pzaLocalData.gameStartTimeStamp;p=Math.ceil(p/1e3),S.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("300"+i)},{name:"is_Win",value:1},{name:"Use",value:r},{name:"time",value:p}),v.pzaLocalData.hasUseProp=!1,D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_OVER,null),z.pzaGameManager.removeBattleUI(),this.showPassUiNoStar(),O.default.eventReport("\u8ff7\u4f60\u6e38\u620f\u6a21\u5f0f-"+u.pzaGameState.curChapter+"\u6210\u529f");var l=function(){var a=0;e.skipPartStar()||(a=f.pzaGameConfig.getPartStar(u.pzaGameState.curChapter,u.pzaGameState.curPart)),a<=0?(D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_OVER,null),z.pzaGameManager.removeBattleUI(),e.showPassUiNoStar()):P.pzaUIManager.baseShowPopUI(E.pzaResourceUrl.GAME_WIN_VIEW,null)};null!=u.pzaGameState.achieveArr&&u.pzaGameState.achieveArr.length>0?P.pzaUIManager.baseShowPopUI(E.pzaResourceUrl.GET_ACHIEVE_VIEW,function(a){var t=a&&a.getComponent(_.pzaGetAchieveView);t&&t.init(u.pzaGameState.achieveArr,l)}):l()},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u521b\u610f\u6a21\u5f0f\u201d\uff0c"+this.getConf(u.pzaGameState.curPart).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t}(m.pzaGameBase);e.pzaGameCreativeTrad=N,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Common/pzaBeltConfig":"pzaBeltConfig","../Common/pzaCollisionManager":"pzaCollisionManager","../Common/pzaGameBase":"pzaGameBase","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaGameZJ":"pzaGameZJ","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaGetAchieveView":"pzaGetAchieveView","../View/Battle/pzaPlantBeltView":"pzaPlantBeltView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaCreativeTradConf":"pzaCreativeTradConf"}],pzaGameCreativeVase:[function(a,t,e){"use strict";cc._RF.push(t,"4f53dkdKnRIZq2UUpwyDsEg","pzaGameCreativeVase");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameCreativeVase=void 0;var r=a("../Battle/Data/pzaDropType"),p=a("../Battle/Data/pzaJarData"),l=a("../Battle/Data/pzaPlantEnum"),s=a("../Battle/pzaEffectManager"),c=a("../Battle/pzaGameState"),u=a("../Common/pzaCollisionManager"),d=a("../Common/pzaGameBase"),h=a("../Common/pzaGameManager"),m=a("../Common/pzaGameZJ"),f=a("../Common/pzaLocalData"),z=a("../Common/pzaSoundManager"),y=a("../Common/pzaStatisticsMgr"),g=a("../Common/pzaUIManager"),v=a("../Common/pzaWorldEventManager"),b=a("../Load/pzaBundleObjectPool"),S=a("../Load/pzaPreLoadManager"),P=a("../View/pzaCommonMask"),C=a("../utils/pzaChannel"),D=a("../utils/pzaResMgr"),M=a("../utils/pzakc"),E=a("./pzaCreativeVaseConf"),_=cc._decorator,T=_.ccclass,w=(_.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=c.pzaGameMode.CREATIVE_VASE,t.confMap=null,t.endLessId=0,t}return n(t,a),t.prototype.init=function(){if(null!=this.confMap)return this;var a=D.pzaResMgr.instance().getConf("a24");this.confMap=new Map;for(var t=0;t<a.length;t++){var e=new E.pzaCreativeVaseConf(a[t]);this.confMap.set(e.id,e),e.endless&&(this.endLessId=e.id)}return this},t.prototype.getConf=function(a){return this.confMap.get(a)},t.prototype.getGameModeName=function(){return"\u521b\u610f\u6a21\u5f0f\u7834\u7f50\u8005-"},t.prototype.playBgm=function(){z.pzaSoundManager.playBgm(z.pzaBGMName.PUZZLE_BGM)},t.prototype.initPartProcess=function(a){a.partLabel.string=this.getConf(c.pzaGameState.curPart).name,a.partProNode.active=!1,a.zombieHeadNode.active=!1},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=c.pzaGameState.gameMode===c.pzaGameMode.VASE_ENDLESS,a.cherryBombNode.active=!1,C.pzaChannel.isConfRemote&&(a.cherryBombNode.active=!0),a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.clickSelectPartInFailView=function(){g.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.CREATIVE_VIEW,function(){g.pzaUIManager.baseShowBoardUI(S.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.getAdPlantArr=function(){return[l.pzaPlantEnum.PLANTERN,l.pzaPlantEnum.SQUASH,l.pzaPlantEnum.ICE_SHROOM]},t.prototype.updatePartProcess=function(){},t.prototype.refreshNextWave=function(){},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.speedBtn.active=!0,t.shovelShowNode.active=!0,t.sunUIShowNode.active=!1,t.freePlantNode.active=!0,t.pauseBtn.active=!0,t.gameProp.node.active=!0,t.skipPartBtn.active=!1},t.prototype.gameInit=function(a,t,e){f.pzaLocalData.testMode=!1,window.pzaMapManager.initMapPos(!1),window.pzazombieManager.wave=1;for(var o=[],n=0;n<e.length;n++)if(2===(c=e[n].split("-")).length){var i=parseInt(c[0]);50===i&&(i=8);for(var r=parseInt(c[1]),l=0;l<r;l++)(d=new p.pzaJarData(0,0)).plantType=i,o.push(d)}else M.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef3",a.id);var s=M.default.randomChooseIndex(o,a.green);for(n=0;n<a.green;n++)o[s[n]].jarType=p.pzaJarType.GREEN_JAR;for(o.length,n=0;n<t.length;n++){var c;if(2===(c=t[n].split("-")).length){var u=parseInt(c[0]);for(r=parseInt(c[1]),l=0;l<r;l++){var d;(d=new p.pzaJarData(0,0)).zombieType=u,o.push(d)}}else M.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef2",a.id)}M.default.shuffle(o);for(var h=a.min-1;h<a.max;h++)for(var m=0;m<5;m++){var z=o.shift();if(!z)return;z.xIndex=h,z.yIndex=m,z.hasColli=!0,window.pzaplantManager.createJar(z)}},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u521b\u610f\u6a21\u5f0f\u201d\uff0c"+this.getConf(c.pzaGameState.curPart).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t.prototype.preLoad=function(a,t,e){this.init(),c.pzaGameState.init(2,t,this.gameMode,this.skipPartStar()),c.pzaGameState.partStar=0,c.pzaGameState.autoPickLock=!1,c.pzaGameState.isGameEnd=!1;var o=[new S.pzaResourceDetail(S.pzaResourceUrl.SUN),new S.pzaResourceDetail(S.pzaResourceUrl.CLEANER_CAR),new S.pzaResourceDetail(S.pzaResourceUrl.WORD_EFFECT),new S.pzaResourceDetail(S.pzaResourceUrl.SHADOW),new S.pzaResourceDetail(S.pzaResourceUrl.SHOVEL_EFFECT),new S.pzaResourceDetail(S.pzaResourceUrl.PLANT_EFFECT),new S.pzaResourceDetail(S.pzaResourceUrl.DROP_COIN),new S.pzaResourceDetail(S.pzaResourceUrl.DROP_CARD),new S.pzaResourceDetail(S.pzaResourceUrl.DROP_PLANT_CARD),new S.pzaResourceDetail(S.pzaResourceUrl.ZOMBIE_CLOTHER_FALL_EFFECT),new S.pzaResourceDetail(S.pzaResourceUrl.NORMAL_ASHES_EFFECT),new S.pzaResourceDetail(S.pzaResourceUrl.SMOKE_EFFECT),new S.pzaResourceDetail(S.pzaResourceUrl.JAR),new S.pzaResourceDetail(S.pzaResourceUrl.HAMMER_EFFECT),new S.pzaResourceDetail(S.pzaResourceUrl.FOG_EFFECT),new S.pzaResourceDetail(S.pzaResourceUrl.TOMB),new S.pzaResourceDetail(S.pzaResourceUrl.DIRT_EFFECT),new S.pzaResourceDetail(S.pzaResourceUrl.TOMB),new S.pzaResourceDetail(S.pzaResourceUrl.PLANT_ICON,S.pzaResourceType.SpriteFrameDir),new S.pzaResourceDetail(S.pzaResourceUrl.ZOMBIE_ICON,S.pzaResourceType.SpriteFrameDir)],n=this.getConf(t);if(n){var i=M.default.strArr(n.zombie),r=M.default.strArr(n.plant);if(i&&r){for(var p=0;p<i.length;p++)if(2===(u=i[p].split("-")).length){var l=S.pzaPreLoadManager.getZombieUrl(parseInt(u[0]));null!=l?(o.push(new S.pzaResourceDetail(l)),null!=(h=S.pzaPreLoadManager.getSubResources(l))&&o.concat(h)):console.error("zombieUrl",u[0])}else M.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef1",t,i[p]);for(p=0;p<r.length;p++){var u;if(2===(u=r[p].split("-")).length){var d=parseInt(u[0]);50===d&&(d=8);var h,m=S.pzaPreLoadManager.getPlantUrl(d);null!=m?(o.push(new S.pzaResourceDetail(m)),null!=(h=S.pzaPreLoadManager.getSubResources(m))&&o.concat(h)):console.error("theur",d)}else M.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef1",t,r[p])}g.pzaUIManager.showLoading(),s.pzaEffectManager.createGroveEffect(),window.pzaplantManager.init(),window.pzazombieManager.init(),window.pzaMapManager.init(2,t),z.pzaSoundManager.clearAllLoopAudio(),this.gameInit(n,i,r),b.pzaBundleObjectPool.preLoadSubResource(o,function(){g.pzaUIManager.hideLoading(e)},function(a){g.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*a)))})}else M.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef",t)}else M.default.err("\u7834\u7f50\u8005id\u9519\u8bef",t)},t.prototype.startCall=function(){z.pzaSoundManager.playBgm(z.pzaBGMName.PUZZLE_BGM),window.pzaMapManager.openBattleUI(),c.pzaGameState.gamePause=!1,u.pzaCollisionManager.getInstance.setOn()},t.prototype.gameStart=function(){var a=h.pzaGameManager.getGame(c.pzaGameMode.ZaJiao,m.pzaGameZJ).rankCount,t=c.pzaGameState.curPart+a;f.pzaLocalData.gameStartTimeStamp=Date.now(),y.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt("300"+t)}),P.pzaCommonMask.hideMask(),window.pzaGuideManager.guideStart(this.startCall.bind(this)),window.pzaGuideManager.guideShow(this.startCall.bind(this)),c.pzaGameState.hadRevived=!0},t.prototype.showPassUiNoStar=function(){g.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.CREATIVE_VIEW,function(){g.pzaUIManager.baseShowBoardUI(S.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.winDrop=function(){var a=r.pzaDropType.COIN_PACKAGE,t=this.getConf(c.pzaGameState.curPart).trophyid;return f.pzaLocalData.passCreativeMode(t)&&(a=r.pzaDropType.CREATIVE_VASE_TROPHY),"my"===C.pzaChannel.instance().channel&&C.pzaChannel.instance().getChannel().actSubmit(),a},t.prototype.partWin=function(){v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GAME_OVER,null),h.pzaGameManager.removeBattleUI(),this.showPassUiNoStar(),M.default.eventReport("\u7834\u7f50\u8005\u6a21\u5f0f-"+c.pzaGameState.curPart+"\u6210\u529f");var a=h.pzaGameManager.getGame(c.pzaGameMode.ZaJiao,m.pzaGameZJ).rankCount,t=c.pzaGameState.curPart+a,e=0;f.pzaLocalData.hasUseProp&&(e=1);var o=Date.now()-f.pzaLocalData.gameStartTimeStamp;o=Math.ceil(o/1e3),y.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("300"+t)},{name:"is_Win",value:1},{name:"Use",value:e},{name:"time",value:o}),f.pzaLocalData.hasUseProp=!1},t.prototype.partFail=function(){a.prototype.partFail.call(this),M.default.eventReport("\u7834\u7f50\u8005\u6a21\u5f0f-"+c.pzaGameState.curPart+"\u5931\u8d25");var t=h.pzaGameManager.getGame(c.pzaGameMode.ZaJiao,m.pzaGameZJ).rankCount,e=c.pzaGameState.curPart+t,o=0;f.pzaLocalData.hasUseProp&&(o=1);var n=Date.now()-f.pzaLocalData.gameStartTimeStamp;n=Math.ceil(n/1e3),y.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("300"+e)},{name:"is_Win",value:0},{name:"Use",value:o},{name:"time",value:n}),f.pzaLocalData.hasUseProp=!1},t.prototype.onZombieDeath=function(a,t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o=null),e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.checkAllZombieDeath(a))if(a.lastWave){var n=!1;window.pzaplantManager.pzaJarMap.forEach(function(a){null!=a&&null!=a.jarData&&null!=a.jarData.zombieType&&(n=!0)}),n||h.pzaGameManager.passPart(t.logicPos)}else if(window.pzaplantManager.pzaJarMap.size<=0){if(c.pzaGameState.gameMode===c.pzaGameMode.CREATIVE_VASE)return void h.pzaGameManager.passPart(t.logicPos);a.specialNextWaveTime=1}},i([T],t)}(d.pzaGameBase));e.pzaGameCreativeVase=w,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaJarData":"pzaJarData","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Common/pzaCollisionManager":"pzaCollisionManager","../Common/pzaGameBase":"pzaGameBase","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameZJ":"pzaGameZJ","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaCreativeVaseConf":"pzaCreativeVaseConf"}],pzaGameFailView:[function(a,t,e){"use strict";cc._RF.push(t,"67529Lq27tAbLepZ8j8zGaa","pzaGameFailView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameFailView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameManager"),s=a("../../Common/pzaGameVaseEndless"),c=a("../../Common/pzaGameZJ"),u=a("../../Common/pzaLocalData"),d=a("../../Common/pzaSoundManager"),h=a("../../Common/pzaUIManager"),m=a("../../Common/pzaWorldEventManager"),f=a("../../Load/pzaPreLoadManager"),z=a("../../utils/pzaChannel"),y=a("../../utils/pzaResMgr"),g=cc._decorator,v=g.ccclass,b=g.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.failWord=null,t.mask=null,t.board=null,t.tittle=null,t.txt=null,t.rankBtn=null,t.adIcon=null,t.shareIcon=null,t.expandShareNode=null,t.adFlag=!1,t.shareFlag=!1,t.tmpPart=0,t}return n(t,a),t.prototype.onEnable=function(){var a=this;if(this.adFlag=!1,this.shareFlag=!1,d.pzaSoundManager.clearAllLoopAudio(),r.pzaGameState.isCreativeVaseMode()||r.pzaGameState.isCreativeTrad()||r.pzaGameState.isZjMode()){var t=l.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,c.pzaGameZJ).rankCount,e=y.pzaResMgr.instance().getConf("a24").length;y.pzaResMgr.instance().getConf("a25").length,r.pzaGameState.isZjMode()?this.tmpPart=r.pzaGameState.curPart:r.pzaGameState.isCreativeVaseMode()?this.tmpPart=r.pzaGameState.curPart+t:r.pzaGameState.isCreativeTrad()&&(this.tmpPart=r.pzaGameState.curPart+t+e),u.pzaLocalData.data.creativeItemState[this.tmpPart]<3||(u.pzaLocalData.data.creativeItemState[this.tmpPart]%2==1?(this.adFlag=!1,this.shareFlag=!0,"ks"!=z.pzaChannel.instance().channel&&"tt"!=z.pzaChannel.instance().channel&&"my"!=z.pzaChannel.instance().channel||(this.adFlag=!0,this.shareFlag=!1)):(this.adFlag=!0,this.shareFlag=!1))}if(this.expandShareNode.active=!1,this.adIcon.active=this.adFlag,this.shareIcon.active=this.shareFlag,r.pzaGameState.isZombieMode())return this.failWord.active=!1,this.mask.active=!0,this.board.active=!0,this.tittle.y=80,this.txt.node.active=!0,this.rankBtn.active=!1,this.txt.string=r.pzaGameState.gameMode==r.pzaGameMode.ZOMBIE_ENERMY?"\u4f60\u5931\u53bb\u4e86\u6240\u6709\u7684\u50f5\u5c38\uff01":"\u4f60\u5df2\u7ecf\u8fde\u7eed\u901a\u8fc7"+(r.pzaGameState.curPart-1)+"\u5173",void(r.pzaGameState.gameMode==r.pzaGameMode.ZOMBIE_ENDLESS&&(this.expandShareNode.active=!0));if(r.pzaGameState.gameMode===r.pzaGameMode.VASE_ENDLESS)return this.failWord.active=!1,this.mask.active=!0,this.board.active=!0,this.tittle.y=80,this.txt.node.active=!0,this.rankBtn.active=!1,this.txt.string="\u4f60\u5df2\u7ecf\u8fde\u7eed\u901a\u8fc7"+(l.pzaGameManager.getGame(r.pzaGameMode.VASE_ENDLESS,s.pzaGameVaseEndless).endLessRound||0)+"\u5173",void(this.expandShareNode.active=!0);if(r.pzaGameState.starWaveOverFail)return this.failWord.active=!1,this.mask.active=!0,this.board.active=!0,this.tittle.y=80,this.txt.node.active=!0,this.rankBtn.active=!1,void(this.txt.string="\u6e38\u620f\u7ed3\u675f");if(this.failWord.active=!0,this.mask.active=!1,this.board.active=!1,d.pzaSoundManager.playAudio("eatmind"),this.failWord.stopAllActions(),this.failWord.scale=.01,this.failWord.runAction(cc.sequence(cc.scaleTo(1.2,1),cc.callFunc(function(){d.pzaSoundManager.playAudio("scream")}),cc.repeat(cc.sequence(cc.moveTo(.05,cc.v2(-5,0)),cc.moveTo(.05,cc.v2()),cc.moveTo(.05,cc.v2(0,-5)),cc.moveTo(.05,cc.v2())),6),cc.delayTime(2),cc.callFunc(function(){a.failWord.active=!1,a.mask.active=!0,a.board.active=!0}))),r.pzaGameState.gameMode==r.pzaGameMode.SUR_ENDLESS)return this.tittle.y=80,this.txt.node.active=!0,this.rankBtn.active=!0,this.txt.string="\u5728\u88ab\u6050\u6016\u7684\u50f5\u5c38\u6d6a\u6f6e\u6df9\u6ca1\u4e4b\u524d\uff0c\u4f60\u575a\u6301\u5230\u4e86\u7b2c"+(r.pzaGameState.curPart-1)+"\u9762\u65d7\u5e1c\uff01\uff01\uff01",this.expandShareNode.active=!0,void this.createWxUserInfoButton(!1,null);if(r.pzaGameState.gameMode==r.pzaGameMode.ZaJiao){var o=l.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,c.pzaGameZJ);if(o.isEndless())return this.tittle.y=80,this.txt.node.active=!0,this.rankBtn.active=!0,this.txt.string="\u5728\u88ab\u6050\u6016\u7684\u50f5\u5c38\u6d6a\u6f6e\u6df9\u6ca1\u4e4b\u524d\uff0c\u4f60\u575a\u6301\u5230\u4e86\u7b2c"+o.endLessRound+"\u9762\u65d7\u5e1c\uff01\uff01\uff01",this.expandShareNode.active=!0,void this.createWxUserInfoButton(!1,null)}this.tittle.y=0,this.txt.node.active=!1,this.rankBtn.active=!1},t.prototype.clickRestart=function(){var a=this,t=function(){a.close(),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_OVER,null),l.pzaGameManager.getCurrentGame().gameRestart(),(r.pzaGameState.isCreativeVaseMode()||r.pzaGameState.isCreativeTrad()||r.pzaGameState.isZjMode())&&(u.pzaLocalData.data.creativeItemState[a.tmpPart]++,u.pzaLocalData.addDirty("creativeItemState"))};this.adFlag?z.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):this.shareFlag?"ks"==z.pzaChannel.instance().channel||"tt"==z.pzaChannel.instance().channel||"my"==z.pzaChannel.instance().channel?z.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):z.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"27"},function(){t()}):t()},t.prototype.clickMainView=function(){this.close(),r.pzaGameState.gameMode!==r.pzaGameMode.BANG_JAR&&r.pzaGameState.gameMode!==r.pzaGameMode.VASE&&r.pzaGameState.gameMode!==r.pzaGameMode.VASE_ENDLESS&&r.pzaGameState.gameMode!==r.pzaGameMode.CREATIVE_VASE||(r.pzaGameState.isGameEnd=!1,r.pzaGameState.isMenuShow=!1),r.pzaGameState.isZjMode()&&l.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,c.pzaGameZJ).getRankConf(r.pzaGameState.curPart).endLess&&(u.pzaLocalData.data.zaJiaoRound=0,l.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,c.pzaGameZJ).endLessRound=0,u.pzaLocalBattleData.clearZjEndlessBattleData(r.pzaGameState.curPart)),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_OVER,null),l.pzaGameManager.removeBattleUI(),h.pzaUIManager.baseShowBoardUI(f.pzaResourceUrl.HOME_SELECT_VIEW,null)},t.prototype.clickSelectPart=function(){this.close(),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_OVER,null),l.pzaGameManager.removeBattleUI(),r.pzaGameState.gameMode!==r.pzaGameMode.BANG_JAR&&r.pzaGameState.gameMode!==r.pzaGameMode.VASE&&r.pzaGameState.gameMode!==r.pzaGameMode.VASE_ENDLESS&&r.pzaGameState.gameMode!==r.pzaGameMode.CREATIVE_VASE||(r.pzaGameState.isGameEnd=!1,r.pzaGameState.isMenuShow=!1),r.pzaGameState.isZjMode()&&l.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,c.pzaGameZJ).getRankConf(r.pzaGameState.curPart).endLess&&(u.pzaLocalData.data.zaJiaoRound=0,l.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,c.pzaGameZJ).endLessRound=0,u.pzaLocalBattleData.clearZjEndlessBattleData(r.pzaGameState.curPart)),l.pzaGameManager.getCurrentGame().clickSelectPartInFailView()},t.prototype.clickShare=function(){z.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){console.log("gameFailView share sucess")})},t.prototype.clickRankBtn=function(){this.createWxUserInfoButton(!0,function(){h.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.RANK_VIEW,null)})},t.prototype.createWxUserInfoButton=function(a,t){var e=this,o=z.pzaChannel.instance().getChannel();"wx"!==o.channel||null!=u.pzaLocalData.data.playerNick&&null!=u.pzaLocalData.data.playerAvatar?t&&t():o.wxCheckPrivacySetting(function(n){var i=function(){var a=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width-e.rankBtn.x-60)/n.width*a.width,top:(.5*n.height-e.rankBtn.y-60)/n.height*a.height,width:120/n.width*a.width,height:120/n.height*a.height};o.getUserInfo(function(){null!=u.pzaLocalData.data.playerNick&&null!=u.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),t&&t())},i,!1)};if(n)return a?void o.wxPrivacyAuthorize(i,null):void(t&&t());i()},null)},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node);var a=z.pzaChannel.instance().getChannel();"wx"==a.channel&&a.destroyAuthorizationButton()},i([b({displayName:"\u5931\u8d25\u6587\u5b57",type:cc.Node})],t.prototype,"failWord",void 0),i([b({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([b({displayName:"\u5931\u8d25\u754c\u9762",type:cc.Node})],t.prototype,"board",void 0),i([b({displayName:"\u5931\u8d25\u6807\u9898",type:cc.Node})],t.prototype,"tittle",void 0),i([b({displayName:"\u5931\u8d25\u6587\u6848",type:cc.Label})],t.prototype,"txt",void 0),i([b({displayName:"\u6392\u884c\u699c",type:cc.Node})],t.prototype,"rankBtn",void 0),i([b({displayName:"\u5e7f\u544a\u6807\u5fd7",type:cc.Node})],t.prototype,"adIcon",void 0),i([b({displayName:"\u5206\u4eab\u6807\u5fd7",type:cc.Node})],t.prototype,"shareIcon",void 0),i([b({displayName:"\u62d3\u5c55\u5206\u4eab\u6309\u94ae",type:cc.Node})],t.prototype,"expandShareNode",void 0),i([v],t)}(cc.Component);e.pzaGameFailView=S,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameVaseEndless":"pzaGameVaseEndless","../../Common/pzaGameZJ":"pzaGameZJ","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzaResMgr":"pzaResMgr"}],pzaGameJar:[function(a,t,e){"use strict";cc._RF.push(t,"afeaeDHx7BNxpxWAQ8LqAI5","pzaGameJar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameJar=void 0;var i=a("../Battle/pzaGameState"),r=a("./pzaGameConfig"),p=a("./pzaGameManager"),l=a("./pzaGameNormal"),s=a("./pzaWorldEventManager"),c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=i.pzaGameMode.BANG_JAR,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u7838\u7f50\u5b50-"},t.prototype.initPartProcess=function(a){a.partProNode.active=!1,a.partLabel.string=i.pzaGameState.curChapter+"-"+i.pzaGameState.curPart},t.prototype.updatePartProcess=function(){},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1},t.prototype.refreshNextWave=function(a,t){if(!(a.specialNextWaveTime<=0||(a.specialNextWaveTime-=t,a.specialNextWaveTime>0))){i.pzaGameState.selectCard=null,i.pzaGameState.selectPlant=null,s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.SELECT_CARD,null),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.CLEAR_SCREEN,null),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.wave++,3==window.pzazombieManager.wave&&(window.pzazombieManager.lastWave=!0);var e=r.pzaGameConfig.get45JarData(window.pzazombieManager.wave);null!=e&&e.forEach(function(a){window.pzaplantManager.createJar(a)}),i.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,window.pzaGuideManager.guideShow(function(){i.pzaGameState.gamePause=!1})}},t.prototype.onZombieDeath=function(a,t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o=null),e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.checkAllZombieDeath(a))if(a.lastWave){var n=!1;window.pzaplantManager.pzaJarMap.forEach(function(a){null!=a&&null!=a.jarData&&null!=a.jarData.zombieType&&(n=!0)}),n||p.pzaGameManager.passPart(t.logicPos)}else if(window.pzaplantManager.pzaJarMap.size<=0){if(i.pzaGameState.gameMode===i.pzaGameMode.VASE||i.pzaGameState.gameMode===i.pzaGameMode.CREATIVE_VASE)return void p.pzaGameManager.passPart(t.logicPos);if(i.pzaGameState.gameMode===i.pzaGameMode.VASE_ENDLESS)return void p.pzaGameManager.getCurrentGame().partWin();a.specialNextWaveTime=1}},t.prototype.showBattlePropButtons=function(t){5==i.pzaGameState.curPart||10==i.pzaGameState.curPart?(t.freeSunNode.active=!1,t.cherryBombNode.active=!1,t.autoPickNode.active=!0,t.clearCDNode.active=!1):a.prototype.showBattlePropButtons.call(this,t)},t}(l.pzaGameNormal);e.pzaGameJar=c,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGameNormal":"pzaGameNormal","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameKnock:[function(a,t,e){"use strict";cc._RF.push(t,"18dd45jI79JLaKO2BhiuGH2","pzaGameKnock");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameKnock=void 0;var i=a("../Achieve/pzaAchieve"),r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaBuffData"),l=a("../Battle/Plant/pzaAttackType"),s=a("../Battle/pzaGameState"),c=a("./pzaGameManager"),u=a("./pzaGameNormal"),d=a("./pzaGamePartConfig"),h=a("./pzaLocalData"),m=a("./pzaSoundManager"),f=a("./pzaStatisticsMgr"),z=a("./pzaUtil"),y=a("./pzaWorldEventManager"),g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=s.pzaGameMode.KNOCK_ZOMBIE,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u6253\u50f5\u5c38-"},t.prototype.isAutoCreateSun=function(){return!1},t.prototype.refreshNextWave=function(a,t){if(a.curWaveTime+=t,a.nextWaveTime-=t,!(a.lastWave||a.nextWaveTime>0)){a.wave++,console.log("wave:",a.wave),y.pzaWorldEventManager.triggerEvent(y.pzaWorldEventType.UPDATE_PART_PRO,null),1==a.wave&&m.pzaSoundManager.playAudio("awooga"),a.curWaveTime=0,a.preRefreshHp=0,a.hasShowRedTip=!1;var e=d.pzaGamePartConfig.getPartConfig(s.pzaGameState.curChapter,s.pzaGameState.curPart);if(!(null==e||e.maxWave<a.wave)){e.maxWave==a.wave&&(a.lastWave=!0);var o=window.pzaMapManager.TombSet.size;if(0==e.getWaveZombieDensity()[a.wave]){a.nextWaveTime=2;var n=1;return o<5&&(n=5-o),window.pzaMapManager.randomCreateTomb(n),void(e.maxWave==a.wave+1&&a.showBigWaveTip(!0,!0))}if(a.nextWaveTime=1.4,0==o)return a.wave--,void window.pzaMapManager.randomCreateTomb(5);var i=e.getRandomWaveZombie(a.wave,!1,window.pzaMapManager.getIceYCount());if(null!=i){var r=Math.min(.4,.05*a.wave);if(a.lastWave)window.pzaMapManager.TombMap.forEach(function(t){if(null!=t&&null!=t.xIndex&&null!=t.yIndex&&!window.pzaplantManager.hasPlant(t.xIndex,t.yIndex)){var o=e.getRandomTombZombie(),n=a.createFixBlockZombieData(o,t.xIndex,t.yIndex);Math.random()<=r&&n.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.SPEED_UP,-1,3)),a.createZombie(n,!1,!0)}});else{var l=[];window.pzaMapManager.TombMap.forEach(function(a){null!=a&&null!=a.xIndex&&null!=a.yIndex&&(window.pzaplantManager.hasPlant(a.xIndex,a.yIndex)||l.push(a))});for(var c=z.pzaUtil.getRandomArrayValue(l,i.length),u=0;u<i.length;u++){var h=c[u];if(null!=h&&null!=h.xIndex&&null!=h.yIndex){var f=a.createFixBlockZombieData(i[u],h.xIndex,h.yIndex);Math.random()<=r&&f.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.SPEED_UP,-1,3)),a.createZombie(f,!1,!0)}}}}}}},t.prototype.onZombieDeath=function(a,t,e,o){if(Math.random()<=.1)for(var n=0;n<3;n++)window.pzaplantManager.plantCreateSun(cc.v2(t.logicPos.x+30*(n-1),t.logicPos.y),!0,!0);if(e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)){o==l.pzaAttackType.CLEAN_CAR&&r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_13);var p=0;h.pzaLocalData.hasUseProp&&(p=1);var u=Date.now()-h.pzaLocalData.gameStartTimeStamp;u=Math.ceil(u/1e3),f.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt(s.pzaGameState.curChapter+""+s.pzaGameState.curPart)},{name:"is_Win",value:1},{name:"Use",value:p},{name:"time",value:u}),c.pzaGameManager.passPart(t.logicPos),h.pzaLocalData.hasUseProp=!1}},t.prototype.showBattlePropButtons=function(t){5==s.pzaGameState.curPart||10==s.pzaGameState.curPart?(t.freeSunNode.active=!1,t.cherryBombNode.active=!1,t.autoPickNode.active=!0,t.clearCDNode.active=!1):a.prototype.showBattlePropButtons.call(this,t)},t}(u.pzaGameNormal);e.pzaGameKnock=g,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaBuffData":"pzaBuffData","../Battle/Plant/pzaAttackType":"pzaAttackType","../Battle/pzaGameState":"pzaGameState","./pzaGameManager":"pzaGameManager","./pzaGameNormal":"pzaGameNormal","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameManager:[function(a,t,e){"use strict";cc._RF.push(t,"dbef5/qfMpJKpk2vS74YyJq","pzaGameManager"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameManager=void 0;var o=a("../Achieve/pzaAchieve"),n=a("../Achieve/pzaAchieveMgr"),i=a("../Battle/Data/pzaDropType"),r=a("../Battle/Plant/pzaBowlingWallBody"),p=a("../Battle/pzaEffectManager"),l=a("../Battle/pzaGameState"),s=a("../CreativeMode/pzaGameCreativeTrad"),c=a("../CreativeMode/pzaGameCreativeVase"),u=a("../Garden/pzaGardenMgr"),d=a("../Load/pzaBundleObjectPool"),h=a("../Load/pzaPreLoadManager"),m=a("../View/pzaCommonMask"),f=a("./pzaCollisionManager"),z=a("./pzaGameBelt"),y=a("./pzaGameBoss"),g=a("./pzaGameCommonPool"),v=a("./pzaGameConfig"),b=a("./pzaGameJar"),S=a("./pzaGameKnock"),P=a("./pzaGameMiniGame"),C=a("./pzaGameNormal"),D=a("./pzaGameSmall"),M=a("./pzaGameSurEndless"),E=a("./pzaGameSurvival"),_=a("./pzaGameVase"),T=a("./pzaGameVaseEndless"),w=a("./pzaGameZJ"),A=a("./pzaGameZombieEnemy"),B=a("./pzaGameZombieEnemyEndless"),G=a("./pzaKnockMiniGame"),O=a("./pzaLocalData"),I=a("./pzaNodeManager"),N=a("./pzaSmallMiniGame"),R=a("./pzaSoundManager"),L=a("./pzaStatisticsMgr"),k=a("./pzaUIManager"),Z=a("./pzaUtil"),U=a("./pzaWorldEventManager"),F=function(){function a(){}return a.getGame=function(t){return a.gameMap.get(t).init()},a.getCurrentGame=function(){return a.gameMap.get(l.pzaGameState.gameMode)},a.getGameMode=function(t,e){return a.normalGameModeMap.get(t+"-"+e)||(O.pzaLocalData.isWeekTwo?l.pzaGameMode.NORMAL_WEEKTWO:l.pzaGameMode.NORMAL)},a.preLoadAndStart=function(t,e,o){l.pzaGameState.gameMode=t;var n=a.gameMap.get(t);n?(n.firstStart(e,o),this.sendEvent(e,o)):console.error("\u65e0\u6b64\u6e38\u620f\u6a21\u5f0f",t)},a.sendEvent=function(a,t){l.pzaGameState.isSurvival()||l.pzaGameState.isZombieMode()||l.pzaGameState.isVaseMode()||l.pzaGameState.isMiniMode()||l.pzaGameState.isZjMode()||l.pzaGameState.isCreativeTrad()||l.pzaGameState.isCreativeVaseMode()||(O.pzaLocalData.gameStartTimeStamp=Date.now(),a>5?L.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt(a+10+""+t)}):L.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt(a+""+t)}))},a.midOutStart=function(t,e,o,n){var i=a.getCurrentGame(),r=i.isEndless()?null:i.getMidOutTip();a.gameMap.get(t).midOutAndStart(r,e,o,n,t)},a.passPart=function(t){O.pzaLocalData.data.autoPickLeft=l.pzaGameState.autoPickLeft,O.pzaLocalData.addDirty("autoPickLeft"),Z.pzaUtil.changeGameSpeed(1);var e=a.getCurrentGame();e.checkAchieve(!0),l.pzaGameState.gameWin=!0;var r=e.winDrop();if(null==r)return R.pzaSoundManager.stopBgm(),void e.partWin();switch(r){case i.pzaDropType.PLANT_CARD:var s=l.pzaGameState.curChapter+"-"+l.pzaGameState.curPart,c=v.pzaGameConfig.newPlantDropMap.get(s);O.pzaLocalData.data.ownPlants.push(c),O.pzaLocalData.addDirty("ownPlants"),p.pzaEffectManager.createDropCard(i.pzaDropType.PLANT_CARD,c,t),n.default.instance().checkAddAchieve(o.pzaAchieveType.ACH_4,O.pzaLocalData.data.ownPlants.length,!1);break;case i.pzaDropType.HAND_BOOK:O.pzaLocalData.data.unlockBook=!0,O.pzaLocalData.addDirty("unlockBook"),p.pzaEffectManager.createDropCard(r,null,t);break;case i.pzaDropType.SHOVEL:case i.pzaDropType.CG_PAPER:case i.pzaDropType.BACONIC:case i.pzaDropType.TACO:case i.pzaDropType.COIN_PACKAGE:case i.pzaDropType.SURVIVAL_TROPHY:case i.pzaDropType.ZOMBIE_TROPHY:case i.pzaDropType.VASE_TROPHY:case i.pzaDropType.MINIGAME_TROPHY:case i.pzaDropType.ZAJIAO_TROPHY:case i.pzaDropType.CREATIVE_VASE_TROPHY:case i.pzaDropType.CREATIVE_TRAD_TROPHY:p.pzaEffectManager.createDropCard(r,null,t);break;case i.pzaDropType.SPRINKLER:p.pzaEffectManager.createDropCard(r,null,t),u.default.instance().addGardenTool(u.pzaGardenToolType.waterPot,1);break;default:e.partWin()}},a.bangJarNextWave=function(){l.pzaGameState.selectCard=null,l.pzaGameState.selectPlant=null,U.pzaWorldEventManager.triggerEvent(U.pzaWorldEventType.SELECT_CARD,null),U.pzaWorldEventManager.triggerEvent(U.pzaWorldEventType.CLEAR_SCREEN,null),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.wave++,3==window.pzazombieManager.wave&&(window.pzazombieManager.lastWave=!0);var a=v.pzaGameConfig.get45JarData(window.pzazombieManager.wave);null!=a&&a.forEach(function(a){window.pzaplantManager.createJar(a)}),l.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,window.pzaGuideManager.guideShow(function(){l.pzaGameState.gamePause=!1})},a.showGameFail=function(){Z.pzaUtil.changeGameSpeed(1),k.pzaUIManager.baseShowPopUI(h.pzaResourceUrl.GAME_FAIL_VIEW,null)},a.showBattleUI=function(t,e){var o=this;this.removeBattleUI();var n=I.pzaNodeManager.getBattleUINode();if(null!=n){m.pzaCommonMask.showMask(!0);var i=function(){d.pzaBundleObjectPool.requestInstantByUrl(t,!1,function(t,i){if(null==t&&null!=i){o.battleUINode=i,i.setParent(n),m.pzaCommonMask.hideMask(),e&&e(i);var p=l.pzaGameState.curPart,s=l.pzaGameState.curChapter,c=I.pzaNodeManager.getGrassNode().parent,u=c.getChildByName("wall_up").getComponent(r.pzaBowlingBodyWall),d=c.getChildByName("wall_down").getComponent(r.pzaBowlingBodyWall);5==p&&1==s||5==p&&6==s&&a.getCurrentGame().isMainMode()?(f.pzaCollisionManager.getInstance.addZombieOther(u),f.pzaCollisionManager.getInstance.addZombieOther(d)):!l.pzaGameState.isMiniMode()||5!=l.pzaGameState.curPart&&6!=l.pzaGameState.curPart?(f.pzaCollisionManager.getInstance.delZombieOther(u),f.pzaCollisionManager.getInstance.delZombieOther(d)):(f.pzaCollisionManager.getInstance.addZombieOther(u),f.pzaCollisionManager.getInstance.addZombieOther(d))}else console.error(t)})},p=h.pzaPreLoadManager.getSubResources(t);null!=p?d.pzaBundleObjectPool.preLoadSubResource(p,function(){i()}):i()}},a.removeBattleUI=function(){if(null==this.battleUINode)return null;g.pzaGameCommonPool.returnInstant(this.battleUINode),this.battleUINode=null},a.battleUINode=null,a.gameMap=new Map([[l.pzaGameMode.NORMAL,new C.pzaGameNormal],[l.pzaGameMode.BELT,new z.pzaGameBelt],[l.pzaGameMode.KNOCK_ZOMBIE,new S.pzaGameKnock],[l.pzaGameMode.SMALL_ZOMBIE,new D.pzaGameSmall],[l.pzaGameMode.BANG_JAR,new b.pzaGameJar],[l.pzaGameMode.ZOM_BOSS,new y.pzaGameBoss],[l.pzaGameMode.SURVIVAL,new E.pzaGameSurvival],[l.pzaGameMode.SUR_ENDLESS,new M.pzaGameSurEndless],[l.pzaGameMode.ZOMBIE_ENERMY,new A.pzaGameZombieEnemy],[l.pzaGameMode.ZOMBIE_ENDLESS,new B.pzaGameZombieEnemyEndless],[l.pzaGameMode.VASE,new _.pzaGameVase],[l.pzaGameMode.VASE_ENDLESS,new T.pzaGameVaseEndless],[l.pzaGameMode.MINIGAME,new P.pzaGameMiniGame],[l.pzaGameMode.ZaJiao,new w.pzaGameZJ],[l.pzaGameMode.CREATIVE_VASE,new c.pzaGameCreativeVase],[l.pzaGameMode.CREATIVE_TRAD,new s.pzaGameCreativeTrad],[l.pzaGameMode.MINIGAME_KNOCK,new G.pzaKnockMiniGame],[l.pzaGameMode.MINIGAME_SMALL,new N.pzaSmallMiniGame],[l.pzaGameMode.NORMAL_WEEKTWO,new C.pzaGameNormal]]),a.normalGameModeMap=new Map([["1-10",l.pzaGameMode.BELT],["2-10",l.pzaGameMode.BELT],["3-10",l.pzaGameMode.BELT],["2-5",l.pzaGameMode.KNOCK_ZOMBIE],["3-5",l.pzaGameMode.SMALL_ZOMBIE],["4-5",l.pzaGameMode.BANG_JAR],["5-10",l.pzaGameMode.ZOM_BOSS],["6-10",l.pzaGameMode.BELT],["7-10",l.pzaGameMode.BELT],["8-10",l.pzaGameMode.BELT],["7-5",l.pzaGameMode.KNOCK_ZOMBIE],["8-5",l.pzaGameMode.SMALL_ZOMBIE],["9-5",l.pzaGameMode.BANG_JAR],["10-10",l.pzaGameMode.ZOM_BOSS]]),a}();e.pzaGameManager=F,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Plant/pzaBowlingWallBody":"pzaBowlingWallBody","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../CreativeMode/pzaGameCreativeTrad":"pzaGameCreativeTrad","../CreativeMode/pzaGameCreativeVase":"pzaGameCreativeVase","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaCommonMask":"pzaCommonMask","./pzaCollisionManager":"pzaCollisionManager","./pzaGameBelt":"pzaGameBelt","./pzaGameBoss":"pzaGameBoss","./pzaGameCommonPool":"pzaGameCommonPool","./pzaGameConfig":"pzaGameConfig","./pzaGameJar":"pzaGameJar","./pzaGameKnock":"pzaGameKnock","./pzaGameMiniGame":"pzaGameMiniGame","./pzaGameNormal":"pzaGameNormal","./pzaGameSmall":"pzaGameSmall","./pzaGameSurEndless":"pzaGameSurEndless","./pzaGameSurvival":"pzaGameSurvival","./pzaGameVase":"pzaGameVase","./pzaGameVaseEndless":"pzaGameVaseEndless","./pzaGameZJ":"pzaGameZJ","./pzaGameZombieEnemy":"pzaGameZombieEnemy","./pzaGameZombieEnemyEndless":"pzaGameZombieEnemyEndless","./pzaKnockMiniGame":"pzaKnockMiniGame","./pzaLocalData":"pzaLocalData","./pzaNodeManager":"pzaNodeManager","./pzaSmallMiniGame":"pzaSmallMiniGame","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameMiniGame:[function(a,t,e){"use strict";cc._RF.push(t,"8a4a6GFcAlF7bID9Vfm8HRH","pzaGameMiniGame");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameMiniGame=void 0;var i=a("../Battle/Data/pzaDropType"),r=a("../Battle/Data/pzaPlantEnum"),p=a("../Battle/Data/pzaZombieEnum"),l=a("../Battle/pzaEffectManager"),s=a("../Battle/pzaGameState"),c=a("../Load/pzaPreLoadManager"),u=a("../MiniGame/pzaMiniGameConf"),d=a("../View/Battle/pzaPlantBeltView"),h=a("../View/pzaCommonMask"),m=a("../utils/pzaResMgr"),f=a("../utils/pzakc"),z=a("./pzaBeltConfig"),y=a("./pzaGameBase"),g=a("./pzaGameConfig"),v=a("./pzaGameManager"),b=a("./pzaGamePartConfig"),S=a("./pzaLocalData"),P=a("./pzaSoundManager"),C=a("./pzaUIManager"),D=a("./pzaUtil"),M=a("./pzaWorldEventManager"),E=a("../View/Battle/pzaGetAchieveView"),_=a("../View/pzaWarningView"),T=a("./pzaStatisticsMgr"),w=a("../Battle/Data/pzaBaseData"),A=a("../Load/pzaBundleObjectPool"),B=a("../Battle/Zombie/pzaBaseZombie"),G=a("./pzaCollisionManager"),O=a("../View/Battle/pzaPlantSelectView"),I=a("../View/Battle/pzaDaveTreasureView"),N=a("../utils/pzaChannel"),R=a("./pzaTipManager"),L=a("../Battle/Data/pzaGuideType"),k=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=s.pzaGameMode.MINIGAME,t.confMap=null,t.confArr=[],t.waveZombieDensity=null,t.randomZombies=[],t.createCardTime=0,t}return n(t,a),t.prototype.init=function(){var a=this;if(null!==this.confMap)return this;this.confMap=new Map,m.pzaResMgr.instance().getConf("a19").forEach(function(t){if(null!=t){var e=null;null!=t.density&&(e=t.density.split(",")).forEach(function(a,t){e[t]=parseInt(a)});var o=null;null!=t.zombie&&(o=t.zombie.split(",")).forEach(function(a,t){o[t]=parseInt(a)});var n=null;null!=t.initcards&&(n=t.initcards.split(",")).forEach(function(a,t){n[t]=parseInt(a)});var i=null;null!=t.plant&&((i=t.plant.split(",")).forEach(function(a,t){i[t]=parseInt(a)}),2==i.length?10==i[0]&&11==i[1]&&(i[0]=1e3,i[1]=1001):3==i.length&&10==i[0]&&11==i[1]&&12==i[2]&&(i[0]=1e3,i[1]=1001,i[2]=1002));var r=null;null!=t.plantweight&&(r=t.plantweight.split(",")).forEach(function(a,t){r[t]=parseInt(a)});var p=0,l=0;if(null!=t.fall){var s=t.fall.split(",");p=parseInt(s[0]),l=parseInt(s[1])}var c=0,d=0;if(null!=t.waterend){var h=t.waterend.split(",");null!=h&&(c=parseInt(h[0]),d=parseInt(h[1]))}var m=0;null!=t.waterexit&&(m=parseInt(t.waterexit));var f=0;null!=t.fog&&(f=parseInt(t.fog));var z=new u.pzaMiniGameConf(parseInt(t.id),t.name,parseInt(t.wave),e,o,parseInt(t.multiple),parseInt(t.flowerpot),n,i,r,p,l,parseInt(t.initsun),parseInt(t.bosshp),parseInt(t.tombstone),parseInt(t.tombstonemini),c,d,m,f);a.confMap.set(t.id+"",z),a.confArr.push(z)}})},t.prototype.getConf=function(a){var t=this.confMap.get(a+"");return null==t?(console.log("\u8ff7\u4f60\u6e38\u620f\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u5173\u5361\u914d\u7f6e"),null):t},t.prototype.getConfById=function(a){var t=this.confArr[a];if(null!=t)return t;console.error("\u8ff7\u4f60\u6e38\u620f\u6ca1\u6709\u627e\u5230\u5bf9\u5e94\u5173\u5361\u6570\u636e")},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var e=v.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,t).getConf(s.pzaGameState.curPart);a.maxWave=e.maxWave;for(var o=Math.floor(a.maxWave/10),n=0;n<a.partFlags.length;n++){var i=a.partFlags[n];n+1>o?i.active=!1:(i.active=!0,i.setPosition(-315*(n+1)/o-30,42))}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0,a.partLabel.string=this.getConf(s.pzaGameState.curPart).name},t.prototype.updatePartProcess=function(t){a.prototype.updatePartProcess.call(this,t);var e=Math.floor(window.pzazombieManager.wave/10)-1;if(!(e<0||e>3)){var o=t.partFlags[e];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=4==s.pzaGameState.curPart||s.pzaGameState.curPart>=10&&s.pzaGameState.curPart<=12||14==s.pzaGameState.curPart||15==s.pzaGameState.curPart,t.skipPartBtn.active=!1,t.freePlantNode.active=!0,t.speedBtn.active=!0,5!=s.pzaGameState.curPart&&6!=s.pzaGameState.curPart||(t.freePlantNode.active=!1)},t.prototype.refreshNextWave=function(e,o){if(3!=s.pzaGameState.curPart&&4!=s.pzaGameState.curPart){a.prototype.refreshNextWave.call(this,e,o);var n=v.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,t);if(null!=n&&(13!=s.pzaGameState.curPart||s.pzaGameState.gameWin||(this.createCardTime-=o,this.createCardTime<=0&&this.createPlantCard()),!e.lastWave)){var i=!1;if(n.getConf(s.pzaGameState.curPart).maxWave==e.wave+1&&(i=!0),(e.wave+1)%10==0||i){if(!e.hasShowRedTip)return void((e.zombieMap.size<=0||e.curWaveTime>=b.pzaWaveConfig.activeRedTipTime)&&e.showBigWaveTip(i,!1))}else if(0!=e.wave&&e.nextWaveTime>b.pzaWaveConfig.preRefreshTime)if(10==s.pzaGameState.curPart){if(e.zombieMap.size<=0)return void(e.nextWaveTime=1)}else if(e.getCurWaveLeftHp()<=e.preRefreshHp)return void(e.nextWaveTime=b.pzaWaveConfig.preRefreshTime);e.curWaveTime<b.pzaWaveConfig.minRefreshTime||e.nextWaveTime>0||this.createWave(e)}}},t.prototype.createWave=function(e){a.prototype.createWave.call(this,e),5==s.pzaGameState.curPart||6==s.pzaGameState.curPart||s.pzaGameState.curPart>=9?e.nextWaveTime=b.pzaWaveConfig.getWaveRandomTime():e.nextWaveTime=D.pzaUtil.getRandomFloatNum(8,10);var o=v.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,t);if(null!=o){var n=o.getConf(s.pzaGameState.curPart);if(!(null==n||n.maxWave<e.wave)){n.maxWave==e.wave&&(e.lastWave=!0);var i=o.getRandomWaveZombie(e.wave,!0,window.pzaMapManager.getIceYCount(),0,s.pzaGameState.redLeft);if(null==i&&!(s.pzaGameState.curPart>=9))return e.nextWaveTime=0,void(e.curWaveTime=6);if(9!=s.pzaGameState.curPart){var r=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||r.indexOf(a.yIndex)>=0||r.push(a.yIndex)});var l=s.pzaGameState.map.getMapRow(),c=!0,u=[],d=[];for(f=0;f<l;f++)d.push(f);d.sort(function(){return Math.random()-.5});var h=0;i.forEach(function(a){var t=window.pzaMapManager.getRandomWayIndex(h,a,d);if(h++,a==p.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,u);if(null==o)return;u.push(o);var n=o.split("-"),i=e.createFixBlockZombieData(a,parseInt(n[0]),parseInt(n[1]));return e.createZombie(i),void e.curWaveZombieDatas.add(i)}a==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&r.length>0&&(t=r.shift());var l=e.createZombieData(a,t);!c&&l.logicPos&&(l.logicPos.x+=D.pzaUtil.getRandomFloatNum(.2,1)*s.pzaGameState.map.getBlockWidth()),e.createZombie(l),e.curWaveZombieDatas.add(l),c=!1}),e.lastWave&&(e.lastWayZombieTime=2)}else if(10!=e.wave&&e.createBungeePutZombie([7,5,6,5,5,8,7,6,5,1,5,6,5,5,5,5,5,5,5,5,6,5,5,5,5,5,5,5,5,5][e.wave-1]-1,i),e.wave%10==0)for(var m=[],f=0;f<5;f++){var z=window.pzaplantManager.getRandomBlock(!0,m);if(null==z)return;m.push(z);var y=z.split("-"),g=e.createFixBlockZombieData(p.pzaZombieEnum.BUNGEE_ZOMBIE,parseInt(y[0]),parseInt(y[1]));e.createZombie(g),e.curWaveZombieDatas.add(g)}}}},t.prototype.lastTombWaterZombie=function(a){var t=this,e=this.getConf(s.pzaGameState.curPart);if(window.pzaMapManager.TombMap.forEach(function(e){if(null!=e&&null!=e.xIndex&&null!=e.yIndex&&!window.pzaplantManager.hasPlant(e.xIndex,e.yIndex)){var o=t.getRandomTombZombie(),n=a.createFixBlockZombieData(o,e.xIndex,e.yIndex);a.createZombie(n,!1,!0),a.curWaveZombieDatas.add(n)}}),e.lastWaterWaveZombie>0){for(var o=[],n=e.lastWaterWaveMinColumn-1;n<9;n++)o.push([n,2]),o.push([n,3]);o.sort(function(){return Math.random()-.5});for(var i=0;i<e.lastWaterWaveZombie;i++)if(null!=(c=o[i])){var r=this.getRandomDiveZombie(),p=a.createFixBlockZombieData(r,c[0],c[1]);a.createZombie(p,!1,!1,!0),a.curWaveZombieDatas.add(p)}}if(e.lastBungeeZombie>0){for(o=[],n=e.lastBungeeMinColumn-1;n<9;n++)o.push([n,0]),o.push([n,1]),o.push([n,2]),o.push([n,3]),o.push([n,4]);for(o.sort(function(){return Math.random()-.5}),i=0;i<e.lastBungeeZombie;i++){var c;if(null!=(c=o[i])){var u=this.getRandomTombZombie();p=window.pzazombieManager.createFixBlockZombieData(u,c[0],c[1]),a.zombieDatas[c[1]].delete(p),l.pzaEffectManager.createBungeeZombieEffect(p),a.curWaveZombieDatas.add(p)}}}},t.prototype.isLastWave=function(a){var e=v.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,t).getConf(s.pzaGameState.curPart);return a.wave==e.maxWave},t.prototype.checkAllZombieDeath=function(a){if(3==s.pzaGameState.curPart||4==s.pzaGameState.curPart)return!1;var t=0;return a.zombieDatas.forEach(function(a){t+=a.size}),!(t>0)},t.prototype.onZombieDeath=function(a,t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o=null),e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)&&!s.pzaGameState.starModeGameOver)return 14==s.pzaGameState.curPart?(s.pzaGameState.starWaveOverFail=!0,v.pzaGameManager.getCurrentGame().partFail(),void v.pzaGameManager.showGameFail()):void v.pzaGameManager.passPart(t.logicPos)},t.prototype.createPreviewZombie=function(a,e,o){if(3!==o&&4!=o){var n=1==o?D.pzaUtil.getRandomNum(6,7):D.pzaUtil.getRandomNum(8,9),i=v.pzaGameManager.getGame(s.pzaGameMode.MINIGAME,t);if(null!=i){var r=i.getPreviewZombies(n);if(null!=r){var l=[];5==e?(l.push(cc.v2(1450+D.pzaUtil.getRandomFloatNum(-25,25),75)),l.push(cc.v2(1550+D.pzaUtil.getRandomFloatNum(-25,25),75)),l.push(cc.v2(1450+D.pzaUtil.getRandomFloatNum(-25,25),125)),l.push(cc.v2(1550+D.pzaUtil.getRandomFloatNum(-25,25),125)),l.push(cc.v2(1450+D.pzaUtil.getRandomFloatNum(-25,25),175)),l.push(cc.v2(1550+D.pzaUtil.getRandomFloatNum(-25,25),175)),l.push(cc.v2(1450+D.pzaUtil.getRandomFloatNum(-25,25),225)),l.push(cc.v2(1550+D.pzaUtil.getRandomFloatNum(-25,25),225)),l.push(cc.v2(1450+D.pzaUtil.getRandomFloatNum(-25,25),275)),l.push(cc.v2(1550+D.pzaUtil.getRandomFloatNum(-25,25),275)),l.push(cc.v2(1450+D.pzaUtil.getRandomFloatNum(-25,25),325)),l.push(cc.v2(1550+D.pzaUtil.getRandomFloatNum(-25,25),325)),l.push(cc.v2(1450+D.pzaUtil.getRandomFloatNum(-25,25),375)),l.push(cc.v2(1550+D.pzaUtil.getRandomFloatNum(-25,25),375)),l.push(cc.v2(1650+D.pzaUtil.getRandomFloatNum(-25,25),75)),l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),75)),l.push(cc.v2(1650+D.pzaUtil.getRandomFloatNum(-25,25),125)),l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),125)),l.push(cc.v2(1650+D.pzaUtil.getRandomFloatNum(-25,25),175)),l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),175)),l.push(cc.v2(1650+D.pzaUtil.getRandomFloatNum(-25,25),225)),l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),225)),l.push(cc.v2(1650+D.pzaUtil.getRandomFloatNum(-25,25),275)),l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),275)),l.push(cc.v2(1650+D.pzaUtil.getRandomFloatNum(-25,25),325)),l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),325)),l.push(cc.v2(1650+D.pzaUtil.getRandomFloatNum(-25,25),375)),l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),375)),l.push(cc.v2(1650+D.pzaUtil.getRandomFloatNum(-25,25),410)),l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),410))):(l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),40)),l.push(cc.v2(1925+D.pzaUtil.getRandomFloatNum(-25,25),40)),l.push(cc.v2(2025+D.pzaUtil.getRandomFloatNum(-25,25),40)),l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),90)),l.push(cc.v2(1925+D.pzaUtil.getRandomFloatNum(-25,25),90)),l.push(cc.v2(2025+D.pzaUtil.getRandomFloatNum(-25,25),90)),l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),140)),l.push(cc.v2(1925+D.pzaUtil.getRandomFloatNum(-25,25),140)),l.push(cc.v2(2025+D.pzaUtil.getRandomFloatNum(-25,25),140)),l.push(cc.v2(1750+D.pzaUtil.getRandomFloatNum(-25,25),190)),l.push(cc.v2(1925+D.pzaUtil.getRandomFloatNum(-25,25),190)),l.push(cc.v2(2025+D.pzaUtil.getRandomFloatNum(-25,25),190)),l.push(cc.v2(1680+D.pzaUtil.getRandomFloatNum(-20,20),240)),l.push(cc.v2(1780+D.pzaUtil.getRandomFloatNum(-20,20),240)),l.push(cc.v2(1880+D.pzaUtil.getRandomFloatNum(-20,20),240)),l.push(cc.v2(1680+D.pzaUtil.getRandomFloatNum(-20,20),290)),l.push(cc.v2(1780+D.pzaUtil.getRandomFloatNum(-20,20),290)),l.push(cc.v2(1880+D.pzaUtil.getRandomFloatNum(-20,20),290)),l.push(cc.v2(1680+D.pzaUtil.getRandomFloatNum(-20,20),340)),l.push(cc.v2(1780+D.pzaUtil.getRandomFloatNum(-20,20),340)),l.push(cc.v2(1880+D.pzaUtil.getRandomFloatNum(-20,20),340)),l.push(cc.v2(1670+D.pzaUtil.getRandomFloatNum(-30,30),390)),l.push(cc.v2(1770+D.pzaUtil.getRandomFloatNum(-30,30),390)),l.push(cc.v2(1670+D.pzaUtil.getRandomFloatNum(-30,30),440)),l.push(cc.v2(1770+D.pzaUtil.getRandomFloatNum(-30,30),440)),l.push(cc.v2(1670+D.pzaUtil.getRandomFloatNum(-30,30),490)),l.push(cc.v2(1770+D.pzaUtil.getRandomFloatNum(-30,30),490)),l.push(cc.v2(1660+D.pzaUtil.getRandomFloatNum(-20,20),540)),l.push(cc.v2(1700+D.pzaUtil.getRandomFloatNum(-20,20),540))),l.sort(function(){return Math.random()-.5});for(var u=function(t,e){var o=c.pzaPreLoadManager.getZombieUrl(t);A.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(o,n){if(null==o&&null!=n){n.setParent(a.previewZombieNode),n.setPosition(e),n.zIndex=-e.y;var i=n.getComponent(B.pzaBaseZombie),r=new w.pzaBaseData(null,t);r.hp=1,r.logicPos=e,i&&i.preview(r,a.previewShadowNode,1),a.PreviewZombies.add(i)}else console.error(o)})},d=0;d<r.length;d++){var h=r[d],m=l[d];h==p.pzaZombieEnum.BUNGEE_ZOMBIE&&(m=5==e?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),u(h,m)}if(9==s.pzaGameState.curPart){var f=[cc.v2(1400,550+100*Math.random()),cc.v2(1500,550+100*Math.random()),cc.v2(1600,550+100*Math.random())];for(d=0;d<3;d++)m=f[d],u(p.pzaZombieEnum.BUNGEE_ZOMBIE,m)}13!=o&&(3==o?P.pzaSoundManager.playBgm(P.pzaBGMName.LOADING):P.pzaSoundManager.playBgm(P.pzaBGMName.PRE_BGM))}}}else 3==o&&P.pzaSoundManager.stopBgm()},t.prototype.showPreviewTip=function(a){a.word.string=this.getConf(s.pzaGameState.curPart).name,a.flagWord.node.active=!1},t.prototype.getAllZombies=function(a){var t=[];return this.confMap.get(a+"").zombieTypes.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),t},t.prototype.getBeltPlantArr=function(a){var t=[];return this.confMap.get(a+"").plantCardsId.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),t},t.prototype.getBeltPlantWeightArr=function(a){var t=[];return this.confMap.get(a+"").plantCardsWeight.forEach(function(a){t.push(a)}),t},t.prototype.getAllPlantArr=function(a){var t=[],e=this.confMap.get(a+"");return e.initialCards.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),e.plantCardsId.forEach(function(a){t.indexOf(a)<0&&t.push(a)}),t},t.prototype.getInitPlantArr=function(a){var t=[];return this.confMap.get(a+"").initialCards.forEach(function(a){t.push(a)}),t},t.prototype.getPreviewZombies=function(a){var t=[],e=this.getAllZombies(s.pzaGameState.curPart);if(null==e||e.length<=1){for(var o=0;o<a;o++)t.push(p.pzaZombieEnum.ZOMBIE);return t}for(o=0;o<e.length;o++)t.push(e[o]);if(t.length>=a)return t;var n=[],i=[];e.forEach(function(a){if(null!=a&&a!=p.pzaZombieEnum.BUNGEE_ZOMBIE&&null!=a&&a!=p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM){var t=g.pzaGameConfig.getZombieConfig(a);null!=t&&0!=t.refrshWeight&&(12==s.pzaGameState.curPart&&a==p.pzaZombieEnum.ZOMBIE&&(t.refrshWeight=200),n.push(a),i.push(t.refrshWeight))}});var r=t.length;for(o=0;o<a-r;o++){var l=D.pzaUtil.getRandomIndexByWeight(i);t.push(n[l])}return t},t.prototype.getRandomWaveZombie=function(a,t,e,o,n){var i=this;if(void 0===o&&(o=0),void 0===n&&(n=0),this.randomZombies=[],this.waveZombieDensity=this.getConf(s.pzaGameState.curPart).waveZombieDensity,null==this.waveZombieDensity||a-1<0)return[p.pzaZombieEnum.ZOMBIE];var r=this.waveZombieDensity[a-1];if(0==r)return null;if(null==r||r<=1)return 15==s.pzaGameState.curPart?[p.pzaZombieEnum.NormalPeaZombie]:[p.pzaZombieEnum.ZOMBIE];var l=this.getConf(s.pzaGameState.curPart),c=l.maxWave,u=l.zombieTypes;if(r=this.fixedZombie(r,a),a==c&&u.forEach(function(a){a!=p.pzaZombieEnum.ZOMBIE&&(i.randomZombies.push(a),r-=g.pzaGameConfig.getZombieLevel(a))}),a%10==0&&15!=s.pzaGameState.curPart)for(var d=Math.min(Math.floor(r/2),8),h=0;h<d;h++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),r-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(;r>0;){var m=this.getRandomZombie(r,a,e,o,n);if(null==m)break;if(m==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?e--:m==p.pzaZombieEnum.RED_GARGANTUAR&&a%10!=0&&n--,this.randomZombies.push(m),this.randomZombies.length>=50)break;r-=g.pzaGameConfig.getZombieLevel(m)}return this.randomZombies},t.prototype.fixedZombie=function(a,t){if((16==t||26==t)&&1==s.pzaGameState.curPart)for(var e=0;e<10;e++)this.randomZombies.push(p.pzaZombieEnum.LADDER_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.LADDER_ZOMBIE);if((19==t||29==t)&&1==s.pzaGameState.curPart)for(e=0;e<10;e++)this.randomZombies.push(p.pzaZombieEnum.JACK_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.JACK_ZOMBIE);if(10==t&&1==s.pzaGameState.curPart){for(e=0;e<4;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE)}if(20==t&&1==s.pzaGameState.curPart){for(e=0;e<7;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),e=0;e<3;e++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}if(30==t&&1==s.pzaGameState.curPart){for(e=0;e<8;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),e=0;e<5;e++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}if((16==t||26==t)&&2==s.pzaGameState.curPart)for(e=0;e<10;e++)this.randomZombies.push(p.pzaZombieEnum.DIGGER_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.DIGGER_ZOMBIE);if((19==t||29==t)&&2==s.pzaGameState.curPart)for(e=0;e<10;e++)this.randomZombies.push(p.pzaZombieEnum.POGO_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.POGO_ZOMBIE);if(10==t&&2==s.pzaGameState.curPart){for(e=0;e<4;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE)}if(20==t&&2==s.pzaGameState.curPart){for(e=0;e<7;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),e=0;e<3;e++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}if(30==t&&2==s.pzaGameState.curPart){for(e=0;e<8;e++)this.randomZombies.push(p.pzaZombieEnum.ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE);for(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE),e=0;e<5;e++)this.randomZombies.push(p.pzaZombieEnum.GARGANTUAR),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.GARGANTUAR)}return t%10==0&&s.pzaGameState.curPart>=10&&15!=s.pzaGameState.curPart&&(this.randomZombies.push(p.pzaZombieEnum.FLAG_ZOMBIE),a-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE)),a},t.prototype.getRandomTombZombie=function(){return[p.pzaZombieEnum.ZOMBIE,p.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,p.pzaZombieEnum.CONE_HEAD_ZOMBIE][Math.floor(3*Math.random())]},t.prototype.getRandomDiveZombie=function(){var a=[p.pzaZombieEnum.DUCKY_TUBE_ZOMBIE];a.push(p.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE);var t=[];return a.forEach(function(a){var e=g.pzaGameConfig.getZombieConfig(a);t.push(e.refrshWeight)}),a[D.pzaUtil.getRandomIndexByWeight(t)]},t.prototype.getRandomZombie=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[],r=[],l=this.getConf(s.pzaGameState.curPart).zombieTypes,c=1;if(t>=5&&t<10&&(c=2),t>=10&&t<15?c=3:t>=15&&(c=4),l.forEach(function(e){if(null!=e){var l=g.pzaGameConfig.getZombieConfig(e);if(12==s.pzaGameState.curPart&&l&&(l.refrshMinWave=1),10==s.pzaGameState.curPart){if(e==p.pzaZombieEnum.ZOMBONI&&l&&(l.refrshMinWave=1),t%10!=0&&(e==p.pzaZombieEnum.ZOMBIE||e==p.pzaZombieEnum.DUCKY_TUBE_ZOMBIE))return;if(e==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM)return}15==s.pzaGameState.curPart&&(l.refrshMinWave=1),null==l||0==l.refrshWeight||l.refreshLevel>a||l.refrshMinWave>c||o>0&&e==p.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&t%10!=0||(12!=s.pzaGameState.curPart&&10!=s.pzaGameState.curPart||e!=p.pzaZombieEnum.ZOMBIE)&&(1!=s.pzaGameState.curPart||e!=p.pzaZombieEnum.JACK_ZOMBIE&&e!=p.pzaZombieEnum.LADDER_ZOMBIE&&e!=p.pzaZombieEnum.GARGANTUAR)&&(2!=s.pzaGameState.curPart||e!=p.pzaZombieEnum.DIGGER_ZOMBIE&&e!=p.pzaZombieEnum.POGO_ZOMBIE&&e!=p.pzaZombieEnum.GARGANTUAR)&&(i.push(e),o>0||r.push(l.refrshWeight))}}),e>0){var u=g.pzaGameConfig.getZombieConfig(p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM);null!=u&&u.refreshLevel<=a&&(i.push(p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),r.push(u.refrshWeight))}var d=D.pzaUtil.getRandomIndexByWeight(r);return i[d]},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=4==s.pzaGameState.curPart||s.pzaGameState.curPart>=10&&s.pzaGameState.curPart<=12||14==s.pzaGameState.curPart||15==s.pzaGameState.curPart,N.pzaChannel.isConfRemote?a.cherryBombNode.active=!0:a.cherryBombNode.active=3!=s.pzaGameState.curPart&&4!=s.pzaGameState.curPart,a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.clickSelectPartInFailView=function(){C.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.MINIGAME_VIEW,function(){C.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.getAdPlantArr=function(){return 1==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.COB_CANNON]:2==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.SPIKEROCK]:3==s.pzaGameState.curPart?[r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.COB_CANNON,r.pzaPlantEnum.JALAPENO,r.pzaPlantEnum.ICE_SHROOM]:4==s.pzaGameState.curPart?[r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.COB_CANNON,r.pzaPlantEnum.JALAPENO,r.pzaPlantEnum.ICE_SHROOM]:9==s.pzaGameState.curPart?[r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.COB_CANNON]:13==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.CATTAIL,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.SPIKEROCK,r.pzaPlantEnum.COB_CANNON]:14==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.TWIN_SUNFLOWER,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.SPIKEROCK]:15==s.pzaGameState.curPart?[r.pzaPlantEnum.GATLING_PEA,r.pzaPlantEnum.TWIN_SUNFLOWER,r.pzaPlantEnum.GLOOM_SHROOM,r.pzaPlantEnum.WINTER_MELON,r.pzaPlantEnum.GOLD_MAGNET,r.pzaPlantEnum.SPIKEROCK,r.pzaPlantEnum.COB_CANNON]:void 0},t.prototype.getGameModeName=function(){return"\u8ff7\u4f60\u6e38\u620f-"},t.prototype.getZombieTypeArr=function(a,t){return this.getAllZombies(t)},t.prototype.getPlantArr=function(a,t){return this.getAllPlantArr(t)},t.prototype.isAutoCreateSun=function(){return 4==s.pzaGameState.curPart||s.pzaGameState.curPart>=10&&s.pzaGameState.curPart<=12||14==s.pzaGameState.curPart||15==s.pzaGameState.curPart},t.prototype.beforeLoad=function(){s.pzaGameState.partStar=0,this.init()},t.prototype.readData=function(){},t.prototype.winDrop=function(){var a=i.pzaDropType.COIN_PACKAGE;return!S.pzaLocalData.passMiniGame(s.pzaGameState.curPart-1)&&(a=i.pzaDropType.MINIGAME_TROPHY),S.pzaLocalData.data.miniFirstPassArr[s.pzaGameState.curPart-1]||(S.pzaLocalData.data.miniFirstPassArr[s.pzaGameState.curPart-1]=1),S.pzaLocalData.addDirty("miniFirstPassArr"),"my"===N.pzaChannel.instance().channel&&N.pzaChannel.instance().getChannel().actSubmit(),9==s.pzaGameState.curPart&&(a=i.pzaDropType.COIN_PACKAGE,S.pzaLocalData.data.getTokenCntByAd&&(S.pzaLocalData.data.getTokenCoinCnt++,S.pzaLocalData.data.getTokenCntByAd=!1,s.pzaGameState.isToken=!0,S.pzaLocalData.addDirty("getTokenCoinCnt","getTokenCntByAd"))),a},t.prototype.showPassUiNoStar=function(){C.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.MINIGAME_VIEW,function(){C.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.beforeGameStart=function(a,t){8==t?T.pzaStatisticsMgr.sendEvent("System",{name:"system",value:18}):7==t?T.pzaStatisticsMgr.sendEvent("System",{name:"system",value:17}):t>=5?T.pzaStatisticsMgr.sendEvent("System",{name:"system",value:16}):t<3?T.pzaStatisticsMgr.sendEvent("System",{name:"system",value:12}):T.pzaStatisticsMgr.sendEvent("System",{name:"system",value:13}),h.pzaCommonMask.showMask(),2!=t&&5!=t&&6!=t&&7!=t&&10!=t&&11!=t&&13!=t&&14!=t&&15!=t||l.pzaEffectManager.createGroveEffect()},t.prototype.gameStart=function(a,t){S.pzaLocalData.gameStartTimeStamp=Date.now(),T.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt("200"+s.pzaGameState.curPart)}),this.beforeGameStart(a,t),this.normalStartGameCall(a,t)},t.prototype.loadAndStart=function(a,t){var e=this;this.preLoad(a,t,function(){e.gameStart(a,t)})},t.prototype.preLoad=function(a,t,e){this.init();var o=0;4==t&&(o=this.getConf(t).initSun),s.pzaGameState.init(a,t,this.gameMode,this.skipPartStar(),o),this.beforeLoad(a,t),s.pzaGameState.isGameEnd=!1,G.pzaCollisionManager.getInstance.setOn();var n=this.getResArr(a,t);C.pzaUIManager.showLoading(),this.initMapPlantZombie(a,t),P.pzaSoundManager.clearAllLoopAudio(),this.readData(a,t),A.pzaBundleObjectPool.preLoadSubResource(n,function(){C.pzaUIManager.hideLoading(e)},function(a){C.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*a)))}),P.pzaSoundManager.playAudio("loadingbar_zombie"),s.pzaGameState.autoPickLock=!1},t.prototype.playGameBgm=function(){13!=s.pzaGameState.curPart&&(5==s.pzaGameState.curPart||6==s.pzaGameState.curPart?P.pzaSoundManager.playBgm(P.pzaBGMName.BOWLING_BGM):P.pzaSoundManager.playBgm(P.pzaBGMName.BELT_BGM))},t.prototype.normalStartGameCall=function(a,t){var e=this;if(5==a&&this.initFlowerPot(t),14==t&&this.initStarFruitShadow(),3!=t&&13!=t&&P.pzaSoundManager.playBgm(P.pzaBGMName.PRE_BGM),3==t)this.createDrZomBoss(t);else if(4==t)this.createDrZomBossNormal(t);else if(10==t||11==t||12==t||14==t||15==t)this.createPlantSelectNormal(t);else if(13==t)l.pzaEffectManager.createRainNightEffect(),P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_4),P.pzaSoundManager.playLoopAudio("rain",!0),this.createChapterFour(t);else{var o=function(){window.pzaMapManager.previewMap(function(){h.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){v.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var o=a&&a.getComponent(d.pzaPlantBeltView);o&&o.showView(function(){window.pzaMapManager.initCleanCar(),l.pzaEffectManager.createReadyWord(function(){h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,5==s.pzaGameState.curPart||6==s.pzaGameState.curPart?(window.pzazombieManager.nextWaveTime=2,window.pzaMapManager.showRedLine(3)):9==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=2:12==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=55:window.pzazombieManager.nextWaveTime=25,z.pzaBeltConfig.initMiniPlants(t),M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_RESUME,null),e.playGameBgm()})})})})},!0)};9==t&&S.pzaLocalData.data.superChomperSwFirstIn?(window.pzaGuideManager.guideStart(function(){},L.pzaGuideType.SUPER_CHOMPER_ENTER),h.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){o()}),S.pzaLocalData.data.superChomperSwFirstIn=!1,S.pzaLocalData.addDirty("superChomperSwFirstIn")):o()}},t.prototype.createDrZomBoss=function(a){var t=this.getConf(a).bossHp;window.pzaMapManager.previewMap(function(){h.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){v.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_BELT_VIEW,function(e){var o=e&&e.getComponent(d.pzaPlantBeltView);o&&o.showView(function(){window.pzaMapManager.initCleanCar(),window.pzazombieManager.createDrZomBoss(function(){l.pzaEffectManager.createReadyWord(function(){h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,z.pzaBeltConfig.initMiniPlants(a),M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_RESUME,null),P.pzaSoundManager.playBgm(P.pzaBGMName.ZOMBIEBOSS_BGM)})},t)})})})},!0)},t.prototype.createDrZomBossNormal=function(a){var t=this.getConf(a).bossHp;window.pzaMapManager.previewMap(function(){v.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){h.pzaCommonMask.hideMask();var e=a&&a.getComponent(O.pzaPlantSelectView);e&&e.miniGameInit(null,function(){h.pzaCommonMask.showMask(),e&&e.initPlant();var a=function(){window.pzazombieManager.createDrZomBoss(function(){l.pzaEffectManager.createReadyWord(function(){e&&e.initPlant(),h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_RESUME,null),P.pzaSoundManager.playBgm(P.pzaBGMName.ZOMBIEBOSS_BGM)})},t)};window.pzaMapManager.cancelPreviewMap(0,function(){var t=N.pzaChannel.instance().getChannel();("wx"!==t.channel||null!=t.ctrl&&"1"===t.ctrl.p1)&&("ks"!==t.channel||null!=t.ctrl&&"1"===t.ctrl.p1)&&("tt"!==t.channel||null!=t.ctrl&&"1"===t.ctrl.p1)&&("my"!==t.channel||null!=t.ctrl&&"1"===t.ctrl.p1)?C.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.DAVE_TREASURE_VIEW,function(t){var e=t&&t.getComponent(I.pzaDaveTreasureView);e&&e.init(function(){a()})}):a()})})})},!0)},t.prototype.createPlantSelectNormal=function(a){var t=this;window.pzaMapManager.previewMap(function(){v.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_SELECT_VIEW,function(e){h.pzaCommonMask.hideMask();var o=e&&e.getComponent(O.pzaPlantSelectView);o&&o.miniGameInit(null,function(){h.pzaCommonMask.showMask(),window.pzaMapManager.initCleanCar(),o&&o.initPlant();var e=function(){l.pzaEffectManager.createReadyWord(function(){o&&o.initPlant(),t.playBgm(),h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_RESUME,null),D.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed),10==a&&t.createIceGround(),12==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=55:10==s.pzaGameState.curPart?window.pzazombieManager.nextWaveTime=45:window.pzazombieManager.nextWaveTime=18,14==a&&R.pzaTipManager.showGameTip("\u7528\u661f\u661f\u679c\u585e\u6ee1\u8fd9\u4e2a\u88ab\u56f4\u51fa\u7684\u7a7a\u95f4\u5427!")})};window.pzaMapManager.cancelPreviewMap(0,function(){var a=N.pzaChannel.instance().getChannel();("wx"!==a.channel||null!=a.ctrl&&"1"===a.ctrl.p1)&&("ks"!==a.channel||null!=a.ctrl&&"1"===a.ctrl.p1)&&("tt"!==a.channel||null!=a.ctrl&&"1"===a.ctrl.p1)&&("my"!==a.channel||null!=a.ctrl&&"1"===a.ctrl.p1)?C.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.DAVE_TREASURE_VIEW,function(a){var t=a&&a.getComponent(I.pzaDaveTreasureView);t&&t.init(function(){e()})}):e()})})})},!0)},t.prototype.createChapterFour=function(){var a=this;window.pzaMapManager.previewMap(function(){h.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.initCleanCar(),window.pzaMapManager.fogEnter(function(){l.pzaEffectManager.createReadyWord(function(){h.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=25,M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_RESUME,null),a.playGameBgm(),a.createCardTime=10})})})},!0)},t.prototype.initFlowerPot=function(a){var t=this.getConf(a);if(!(null==t||t.flowerPotColumn<=0))for(var e=s.pzaGameState.map.getMapRow(),o=0;o<t.flowerPotColumn;o++)for(var n=0;n<e;n++)window.pzaplantManager.createPlant(r.pzaPlantEnum.FLOWER_POT,o,n,!0)},t.prototype.initStarFruitShadow=function(){for(var a=[[3,0],[6,0],[3,1],[4,1],[5,1],[1,2],[2,2],[3,2],[4,2],[5,2],[6,2],[3,3],[4,3],[3,4]],t=0;t<a.length;t++)window.pzaplantManager.createStarFruitShadow(a[t][0],a[t][1])},t.prototype.createIceGround=function(){for(var a=[0,1,4,5],t=0;t<a.length;t++){var e=.1*s.pzaGameState.map.getYInterval(1),o=s.pzaGameState.map.getBlockLogicPos(4,a[t],50,e),n=a[t];l.pzaEffectManager.createIceGroundStart(o.x,o.y,4,n)}},t.prototype.gameRecover=function(a,t){var e=this;C.pzaUIManager.removeBoardUI(),s.pzaGameState.midOut=!1,C.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.WARNING_VIEW,function(o){var n=o&&o.getComponent(_.pzaWarningView);n&&n.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){s.pzaGameState.gamePause=!1,M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_RESUME,null),D.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed),s.pzaGameState.curPart>=5&&s.pzaGameState.curPart<=8?P.pzaSoundManager.playBgm(P.pzaBGMName.BOWLING_BGM):s.pzaGameState.curPart>=10?e.playBgm():P.pzaSoundManager.playBgm(P.pzaBGMName.BELT_BGM),P.pzaSoundManager.clearAllLoopAudio(),window.pzazombieManager.getZombieMapData()>0&&P.pzaSoundManager.playLoopAudio("jack_enter",!0),13==t&&(P.pzaSoundManager.playBgm(P.pzaBGMName.CHAPTER_4),P.pzaSoundManager.playLoopAudio("rain",!0))},function(){v.pzaGameManager.removeBattleUI(),M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_OVER,null),e.firstStart(a,t)},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f")})},t.prototype.createPlantCard=function(){for(var a=[],t=r.pzaPlantEnum.PEA_SHOOTER;t<=r.pzaPlantEnum.MELON_PULT;t++)a.push(t);var e=[r.pzaPlantEnum.GRAVE_BUSTER,r.pzaPlantEnum.FLOWER_POT,r.pzaPlantEnum.COFFEE_BEAN,r.pzaPlantEnum.SUN_FLOWER,r.pzaPlantEnum.TWIN_SUNFLOWER,r.pzaPlantEnum.SUN_SHROOM,r.pzaPlantEnum.IMITATER,r.pzaPlantEnum.UMBRELLA_LEAF];a=a.filter(function(a){return!e.includes(a)});var o=D.pzaUtil.getRandomValueFromArray(a),n=0;window.pzaplantManager.plantEnvDataMap.forEach(function(a){a.plantData.plantType==r.pzaPlantEnum.LILY_PAD&&n++});var i=30-29*(n=n>=18?18:n)/18,p=!1;100*Math.random()<i&&(p=!0),p&&(o=r.pzaPlantEnum.LILY_PAD),l.pzaEffectManager.createAutoCard(o),this.createCardTime=D.pzaUtil.getRandomFloatNum(5,9.9)},t.prototype.partFail=function(){var t=0;S.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-S.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3),T.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("200"+s.pzaGameState.curPart)},{name:"is_Win",value:0},{name:"Use",value:t},{name:"time",value:e}),S.pzaLocalData.hasUseProp=!1,a.prototype.partFail.call(this)},t.prototype.partWin=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null);var o=0;S.pzaLocalData.hasUseProp&&(o=1);var n=Date.now()-S.pzaLocalData.gameStartTimeStamp;n=Math.ceil(n/1e3),T.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("200"+s.pzaGameState.curPart)},{name:"is_Win",value:1},{name:"Use",value:o},{name:"time",value:n}),S.pzaLocalData.hasUseProp=!1,M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_OVER,null),v.pzaGameManager.removeBattleUI(),this.showPassUiNoStar(),f.default.eventReport("\u8ff7\u4f60\u6e38\u620f\u6a21\u5f0f-"+s.pzaGameState.curChapter+"\u6210\u529f");var i=function(){var a=0;e.skipPartStar()||(a=g.pzaGameConfig.getPartStar(s.pzaGameState.curChapter,s.pzaGameState.curPart)),a<=0?(M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_OVER,null),v.pzaGameManager.removeBattleUI(),e.showPassUiNoStar()):C.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.GAME_WIN_VIEW,null)};null!=s.pzaGameState.achieveArr&&s.pzaGameState.achieveArr.length>0?C.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.GET_ACHIEVE_VIEW,function(a){var t=a&&a.getComponent(E.pzaGetAchieveView);t&&t.init(s.pzaGameState.achieveArr,i)}):i()},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u8ff7\u4f60\u6e38\u620f\u201d\uff0c"+this.getConf(s.pzaGameState.curPart).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t}(y.pzaGameBase);e.pzaGameMiniGame=k,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../MiniGame/pzaMiniGameConf":"pzaMiniGameConf","../View/Battle/pzaDaveTreasureView":"pzaDaveTreasureView","../View/Battle/pzaGetAchieveView":"pzaGetAchieveView","../View/Battle/pzaPlantBeltView":"pzaPlantBeltView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaBeltConfig":"pzaBeltConfig","./pzaCollisionManager":"pzaCollisionManager","./pzaGameBase":"pzaGameBase","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameNormal:[function(a,t,e){"use strict";cc._RF.push(t,"0e86aspu6xM+p2NF6QIxdIG","pzaGameNormal");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameNormal=void 0;var i=a("../Achieve/pzaAchieve"),r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaDropType"),l=a("../Battle/Data/pzaGuideType"),s=a("../Battle/Data/pzaPlantEnum"),c=a("../Battle/Data/pzaZombieEnum"),u=a("../Battle/Plant/pzaAttackType"),d=a("../Battle/pzaEffectManager"),h=a("../Battle/pzaGameState"),m=a("../Load/pzaPreLoadManager"),f=a("../View/Battle/pzaAssessView"),z=a("../View/Battle/pzaPlantBeltView"),y=a("../View/Battle/pzaPlantSelectView"),g=a("../View/pzaCommonMask"),v=a("../utils/pzaChannel"),b=a("../utils/pzaChannelTT"),S=a("../utils/pzakc"),P=a("./pzaGameBase"),C=a("./pzaGameConfig"),D=a("./pzaGameManager"),M=a("./pzaGamePartConfig"),E=a("./pzaLocalData"),_=a("./pzaSoundManager"),T=a("./pzaStatisticsMgr"),w=a("./pzaTipManager"),A=a("./pzaUIManager"),B=a("./pzaUtil"),G=a("./pzaWorldEventManager"),O=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=h.pzaGameMode.NORMAL,t.guideMap=new Map([[l.pzaGuideType.GUIDE_PLANT_1_1,t.guidePlant11.bind(t)],[l.pzaGuideType.GUIDE_NEW_PLANT_1_2,t.guidePlant12.bind(t)],[l.pzaGuideType.GUIDE_PROP_1_4,t.guidePlant14.bind(t)],[l.pzaGuideType.GUIDE_SHOVEL_1_5,t.guidePlant15.bind(t)],[l.pzaGuideType.GUIDE_BELT_MODE,t.guideBletMode.bind(t)],[l.pzaGuideType.GUIDE_NINGHT_4_10,t.guide_night_4_10.bind(t)],[l.pzaGuideType.GUIDE_5_5,t.guide_night_4_10.bind(t)],[l.pzaGuideType.GUIDE_NINGHT_2_1,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_CARD_SLOT_2_2,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_CARD_SLOT_2_3,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_CARD_SLOT_2_6,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_POOL_3_1,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_4_1,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_5_1,t.guide_night_2_1.bind(t)],[l.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5,t.guidePlant25.bind(t)],[l.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5,t.guidePlant35.bind(t)],[l.pzaGuideType.GUIDE_BANG_JAR_4_5,t.guidePlant45.bind(t)],[l.pzaGuideType.GUIDE_BOSS_5_10,t.guidePlant510.bind(t)],[l.pzaGuideType.GUIDE_6_1,t.guide6_1.bind(t)],[l.pzaGuideType.GUIDE_6_5,t.guidePlant65.bind(t)],[l.pzaGuideType.GUIDE_10_5,t.guide_night_4_10.bind(t)]]),t}return n(t,a),t.prototype.isMainMode=function(){return!0},t.prototype.getPlantArr=function(a,t){var e=M.pzaGamePartConfig.getPartDefaultPlant(a,t);return null==e&&(e=E.pzaLocalData.data.ownPlants),e},t.prototype.getZombieTypeArr=function(a,t){var e=M.pzaGamePartConfig.getPartConfig(a,t);return e&&e.zombieTypes},t.prototype.skipPartStar=function(){return!1},t.prototype.winDrop=function(){var a=p.pzaDropType.COIN_PACKAGE;return E.pzaLocalData.passPart(h.pzaGameState.curChapter,h.pzaGameState.curPart,h.pzaGameState.partStar)&&(5==h.pzaGameState.curChapter&&10==h.pzaGameState.curPart&&r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_1),a=C.pzaGameConfig.getPartDrop(h.pzaGameState.curChapter,h.pzaGameState.curPart),3==h.pzaGameState.curChapter&&4==h.pzaGameState.curPart?(E.pzaLocalData.data.curGuideType=l.pzaGuideType.GUIDE_SHOP_3_4,E.pzaLocalData.data.unlockShop=!0,E.pzaLocalData.addDirty("curGuideType","unlockShop")):4==h.pzaGameState.curChapter&&4==h.pzaGameState.curPart?(E.pzaLocalData.data.curGuideType=l.pzaGuideType.GUIDE_SHOP_4_4,E.pzaLocalData.addDirty("curGuideType")):5==h.pzaGameState.curChapter&&1==h.pzaGameState.curPart?(E.pzaLocalData.data.curGuideType=l.pzaGuideType.GUIDE_SHOP_5_1,E.pzaLocalData.addDirty("curGuideType")):5==h.pzaGameState.curChapter&&4==h.pzaGameState.curPart&&(E.pzaLocalData.data.curGuideType=l.pzaGuideType.GUIDE_GARDEN_5_4,E.pzaLocalData.data.unlockGarden=!0,E.pzaLocalData.addDirty("curGuideType","unlockGarden"))),"my"===v.pzaChannel.instance().channel&&v.pzaChannel.instance().getChannel().actSubmit(),a},t.prototype.partFail=function(){a.prototype.partFail.call(this),S.default.eventReport(h.pzaGameState.curChapter+"-"+h.pzaGameState.curPart+"\u5931\u8d25");var t=0;E.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-E.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3),T.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt(h.pzaGameState.curChapter+""+h.pzaGameState.curPart)},{name:"is_Win",value:0},{name:"Use",value:t},{name:"time",value:e}),E.pzaLocalData.hasUseProp=!1},t.prototype.beforeLoad=function(a,t){h.pzaGameState.sunLightCount=M.pzaWaveConfig.initSunCount,h.pzaGameState.map=4!=a&&9!=a||5!=t?C.pzaGameConfig.chapterMapConfig.get(a):C.pzaGameConfig.chapterMapConfig.get(2),h.pzaGameState.gameTimeType=2==a||4==a||7==a||9==a||(5==a||10==a)&&10==t?h.pzaGameTimeType.NIGHT:h.pzaGameTimeType.DAY,h.pzaGameState.newZombie=null;var e=M.pzaGamePartConfig.getPartConfig(a,t);null==e||null==e.newZombieType||E.pzaLocalData.hasUnlockZombie(e.newZombieType)||(h.pzaGameState.newZombie=e.newZombieType),h.pzaGameState.partStar=C.pzaGameConfig.getPartStar(a,t)},t.prototype.beforeGameStart=function(a){_.pzaSoundManager.playBgm(_.pzaBGMName.LOADING),g.pzaCommonMask.showMask(),(a<=4||E.pzaLocalData.isWeekTwo&&a<=9)&&d.pzaEffectManager.createGroveEffect()},t.prototype.gameStart=function(a,t){var e=this;if(this.beforeGameStart(a,t),4!=a&&9!=a||10!=t||(d.pzaEffectManager.createRainNightEffect(),_.pzaSoundManager.playBgm(_.pzaBGMName.RAIN_BGM)),window.pzaGuideManager.guideStart(function(){e.normalStartGameCall(a,t)}),null!==window.pzaGuideManager.guideType){var o=this.guideMap.get(window.pzaGuideManager.guideType);o&&o(a,t)}"tt"==v.pzaChannel.instance().channel&&"idle"==b.pzaChannelTT.rState&&v.pzaChannel.instance().recorderStart()},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=M.pzaGamePartConfig.getPartConfig(h.pzaGameState.curChapter,h.pzaGameState.curPart);if(null!=t){if(a.maxWave=t.maxWave,(2==h.pzaGameState.curChapter||7==h.pzaGameState.curChapter)&&5==h.pzaGameState.curPart||(5==h.pzaGameState.curChapter||10==h.pzaGameState.curChapter)&&10==h.pzaGameState.curPart)for(var e=0;e<a.partFlags.length;e++)(n=a.partFlags[e]).active=!1;else{var o=Math.floor(a.maxWave/10);for(h.pzaGameState.isSurvival()||1!=h.pzaGameState.curChapter||2!=h.pzaGameState.curPart&&3!=h.pzaGameState.curPart&&5!=h.pzaGameState.curPart||(o=1),e=0;e<a.partFlags.length;e++){var n=a.partFlags[e];e+1>o?n.active=!1:(n.active=!0,n.setPosition(-315*(e+1)/o-30,42))}}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0,a.partLabel.string=(h.pzaGameState.curChapter>5?h.pzaGameState.curChapter-5:h.pzaGameState.curChapter)+"-"+h.pzaGameState.curPart}},t.prototype.updatePartProcess=function(t){if(a.prototype.updatePartProcess.call(this,t),1!=h.pzaGameState.curChapter||2!=h.pzaGameState.curPart&&3!=h.pzaGameState.curPart&&5!=h.pzaGameState.curPart){var e=Math.floor(window.pzazombieManager.wave/10)-1;if(!(e<0||e>3)){var o=t.partFlags[e];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}}else if(t.maxWave==window.pzazombieManager.wave){var n=t.partFlags[0];cc.Tween.stopAllByTarget(n),cc.tween(n).to(.2,{y:72}).start()}},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.gameProp.node.active=h.pzaGameState.curChapter>1||1==h.pzaGameState.curChapter&&h.pzaGameState.curPart>=4,t.freePlantNode.active=(h.pzaGameState.curChapter>1||1==h.pzaGameState.curChapter&&h.pzaGameState.curPart>=4)&&5!=h.pzaGameState.curPart&&10!=h.pzaGameState.curPart,t.shovelShowNode.active=h.pzaGameState.curChapter>1||h.pzaGameState.curPart>4,E.pzaLocalData.hasPass12()?(T.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"18"},{name:"adname",value:"\u89e3\u9501\u52a0\u901f\u529f\u80fd"}),t.speedBtn.active=!0):t.speedBtn.active=!1,t.sunUIShowNode.active=!0,5!=h.pzaGameState.curChapter&&10!=h.pzaGameState.curChapter||10!=h.pzaGameState.curPart||!v.pzaChannel.isConfRemote||(t.freePlantNode.active=!0),window.pzaGuideManager.guideType==l.pzaGuideType.GUIDE_PROP_1_4?(t.freePlantNode.active=!1,t.gameProp.hideAllProp()):(T.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"3"},{name:"adname",value:"\u5c40\u5185\u6a31\u6843\u70b8\u5f39"}),T.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"4"},{name:"adname",value:"\u5c40\u5185\u81ea\u52a8\u62fe\u53d6"}),T.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"5"},{name:"adname",value:"\u5c40\u5185\u989d\u5916\u9633\u5149"})),1==h.pzaGameState.curChapter&&5==h.pzaGameState.curPart&&(t.pauseBtn.active=!1,t.speedBtn.active=!1)},t.prototype.refreshNextWave=function(t,e){if(a.prototype.refreshNextWave.call(this,t,e),window.pzaGuideManager.guideType==l.pzaGuideType.GUIDE_PROP_1_4)if(0==window.pzaGuideManager.guideStep&&1==t.wave&&t.curWaveTime>=10)G.pzaWorldEventManager.triggerEvent(G.pzaWorldEventType.GUIDE_REFRESH_PROP,null),h.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,G.pzaWorldEventManager.triggerEvent(G.pzaWorldEventType.GAME_PAUSE,null),window.pzaGuideManager.guideShow(function(){h.pzaGameState.gamePause=!1,G.pzaWorldEventManager.triggerEvent(G.pzaWorldEventType.GAME_RESUME,null)});else{if(1==window.pzaGuideManager.guideStep&&2==t.wave&&(t.curWaveTime>=10||t.nextWaveTime<=0))return h.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,G.pzaWorldEventManager.triggerEvent(G.pzaWorldEventType.GAME_PAUSE,null),void window.pzaGuideManager.guideShow(function(){h.pzaGameState.gamePause=!1,G.pzaWorldEventManager.triggerEvent(G.pzaWorldEventType.GAME_RESUME,null)});2==window.pzaGuideManager.guideStep&&3==t.wave&&t.curWaveTime>=10&&(h.pzaGameState.gamePause=!0,window.pzaGuideManager.guideStep++,G.pzaWorldEventManager.triggerEvent(G.pzaWorldEventType.GAME_PAUSE,null),window.pzaGuideManager.guideShow(function(){h.pzaGameState.gamePause=!1,G.pzaWorldEventManager.triggerEvent(G.pzaWorldEventType.GAME_RESUME,null)}))}if(!t.lastWave){var o=!1;if(1!=h.pzaGameState.curChapter||1!=h.pzaGameState.curPart&&2!=h.pzaGameState.curPart&&3!=h.pzaGameState.curPart&&5!=h.pzaGameState.curPart||null!=(n=M.pzaGamePartConfig.getPartConfig(h.pzaGameState.curChapter,h.pzaGameState.curPart))&&n.maxWave==t.wave+1&&(o=!0),(t.wave+1)%10==0||o){if(!t.hasShowRedTip){if(t.zombieMap.size<=0||t.curWaveTime>=M.pzaWaveConfig.activeRedTipTime){var n;null!=(n=M.pzaGamePartConfig.getPartConfig(h.pzaGameState.curChapter,h.pzaGameState.curPart))&&n.maxWave==t.wave+1&&(o=!0);var i=1==h.pzaGameState.curChapter&&1==h.pzaGameState.curPart||2==h.pzaGameState.curChapter&&5==h.pzaGameState.curPart;t.showBigWaveTip(o,i)}return}}else if(0!=t.wave&&t.nextWaveTime>M.pzaWaveConfig.preRefreshTime&&t.getCurWaveLeftHp()<=t.preRefreshHp)return void(t.nextWaveTime=M.pzaWaveConfig.preRefreshTime);t.curWaveTime<M.pzaWaveConfig.minRefreshTime||t.nextWaveTime>0||(this.createWave(t),2!=t.wave||1!=h.pzaGameState.curChapter||2!=h.pzaGameState.curPart||E.pzaLocalData.hasPass12()||(h.pzaGameState.gamePause=!0,G.pzaWorldEventManager.triggerEvent(G.pzaWorldEventType.GAME_PAUSE,null),window.pzaGuideManager.guideShowSpeedBtn(function(){h.pzaGameState.gamePause=!1,G.pzaWorldEventManager.triggerEvent(G.pzaWorldEventType.GAME_RESUME,null)})))}},t.prototype.createWave=function(t){a.prototype.createWave.call(this,t),1==t.wave&&_.pzaSoundManager.playAudio("awooga"),t.nextWaveTime=M.pzaWaveConfig.getWaveRandomTime();var e=M.pzaGamePartConfig.getPartConfig(h.pzaGameState.curChapter,h.pzaGameState.curPart);if(!(null==e||e.maxWave<t.wave)){e.maxWave==t.wave&&(t.lastWave=!0);var o=e.getRandomWaveZombie(t.wave,!0,window.pzaMapManager.getIceYCount(),0,h.pzaGameState.redLeft);if(null!=o)if(5!=h.pzaGameState.curChapter&&10!=h.pzaGameState.curChapter||5!=h.pzaGameState.curPart){window.pzaGuideManager.guideType==l.pzaGuideType.GUIDE_PROP_1_4&&1==t.wave&&(o=[1,1,1,1,1]);var n=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||n.indexOf(a.yIndex)>=0||n.push(a.yIndex)});var i=h.pzaGameState.map.getMapRow(),r=!0,p=[],s=[];if(1==h.pzaGameState.curChapter&&1==h.pzaGameState.curPart)s=[2];else if(1!=h.pzaGameState.curChapter||2!=h.pzaGameState.curPart&&3!=h.pzaGameState.curPart){for(f=0;f<i;f++)s.push(f);s.sort(function(){return Math.random()-.5})}else(s=[1,2,3]).sort(function(){return Math.random()-.5});var u=0;o.forEach(function(a){var e=window.pzaMapManager.getRandomWayIndex(u,a,s);if(u++,a==c.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,p);if(null==o)return;p.push(o);var i=o.split("-"),l=t.createFixBlockZombieData(a,parseInt(i[0]),parseInt(i[1]));return t.createZombie(l),void t.curWaveZombieDatas.add(l)}a==c.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&n.length>0&&(e=n.shift());var d=t.createZombieData(a,e);!r&&d.logicPos&&(d.logicPos.x+=B.pzaUtil.getRandomFloatNum(.2,1)*h.pzaGameState.map.getBlockWidth()),t.createZombie(d),t.curWaveZombieDatas.add(d),r=!1}),t.lastWave&&(t.lastWayZombieTime=2)}else{var d;if(d=5==h.pzaGameState.curChapter?[7,5,6,5,5,8,7,6,5,1,5,6,5,5,5,5,5,5,5,5]:[7,5,6,5,5,8,7,6,5,1,5,6,5,5,5,5,5,5,5,5,6,5,5,5,5,5,5,5,5,5],10!=t.wave&&t.createBungeePutZombie(d[t.wave-1]-1,o),t.wave%10==0){for(var m=[],f=0;f<5;f++){var z=window.pzaplantManager.getRandomBlock(!0,m);if(null==z)return;m.push(z);var y=z.split("-"),g=t.createFixBlockZombieData(c.pzaZombieEnum.BUNGEE_ZOMBIE,parseInt(y[0]),parseInt(y[1]));t.createZombie(g),t.curWaveZombieDatas.add(g)}w.pzaTipManager.showGameTip("\u8e66\u6781\u50f5\u5c38\u6765\u5566\uff01")}}}},t.prototype.lastTombWaterZombie=function(a){var t=M.pzaGamePartConfig.getPartConfig(h.pzaGameState.curChapter,h.pzaGameState.curPart);if(null!=t){if(window.pzaMapManager.TombMap.forEach(function(e){if(null!=e&&null!=e.xIndex&&null!=e.yIndex&&!window.pzaplantManager.hasPlant(e.xIndex,e.yIndex)){var o=t.getRandomTombZombie(),n=a.createFixBlockZombieData(o,e.xIndex,e.yIndex);a.createZombie(n,!1,!0),a.curWaveZombieDatas.add(n)}}),t.lastWaterWaveZombie>0){for(var e=[],o=t.lastWaterWaveMinColumn-1;o<9;o++)e.push([o,2]),e.push([o,3]);e.sort(function(){return Math.random()-.5});for(var n=0;n<t.lastWaterWaveZombie;n++)if(null!=(p=e[n])){var i=t.getRandomDiveZombie(),r=a.createFixBlockZombieData(i,p[0],p[1]);a.createZombie(r,!1,!1,!0),a.curWaveZombieDatas.add(r)}}if(t.lastBungeeZombie>0){for(e=[],o=t.lastBungeeMinColumn-1;o<9;o++)e.push([o,0]),e.push([o,1]),e.push([o,2]),e.push([o,3]),e.push([o,4]);for(e.sort(function(){return Math.random()-.5}),n=0;n<t.lastBungeeZombie;n++){var p;if(null!=(p=e[n])){var l=t.getRandomTombZombie();r=window.pzazombieManager.createFixBlockZombieData(l,p[0],p[1]),a.zombieDatas[p[1]].delete(r),d.pzaEffectManager.createBungeeZombieEffect(r),a.curWaveZombieDatas.add(r)}}}}},t.prototype.zombieDeathDrop=function(t){h.pzaGameState.curChapter<=1||a.prototype.zombieDeathDrop.call(this,t)},t.prototype.createPreviewZombie=function(t,e,o){(5!==h.pzaGameState.curChapter&&10!=h.pzaGameState.curChapter||10!==h.pzaGameState.curPart)&&a.prototype.createPreviewZombie.call(this,t,e,o)},t.prototype.onZombieDeath=function(a,t,e,o){e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)&&(o==u.pzaAttackType.CLEAN_CAR&&r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_13),D.pzaGameManager.passPart(t.logicPos))},t.prototype.checkAchieve=function(a){h.pzaGameState.onlyBoomPlant&&r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_16,1,a),h.pzaGameState.gameMode!=h.pzaGameMode.NORMAL&&h.pzaGameState.gameMode!=h.pzaGameMode.SURVIVAL&&h.pzaGameState.gameMode!=h.pzaGameMode.NORMAL_WEEKTWO||(3!=h.pzaGameState.curChapter||h.pzaGameState.usePeaPlant||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_5,1,a),5!=h.pzaGameState.curChapter||h.pzaGameState.useThrowPlant||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_7,1,a),1!=h.pzaGameState.curChapter&&3!=h.pzaGameState.curChapter&&5!=h.pzaGameState.curChapter||!h.pzaGameState.onlyShroomCofee||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_11,1,a),2!=h.pzaGameState.curChapter&&4!=h.pzaGameState.curChapter||h.pzaGameState.useShroom||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_12,1,a),4!=h.pzaGameState.curChapter||5==h.pzaGameState.curPart||h.pzaGameState.usePlanternBlover||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_21,1,a),3!=h.pzaGameState.curChapter&&(4!=h.pzaGameState.curChapter||5==h.pzaGameState.curPart)||h.pzaGameState.usePondPlant||r.default.instance().checkAddAchieve(i.pzaAchieveType.ACH_22,1,a))},t.prototype.playBgm=function(){var t=h.pzaGameState.curChapter,e=h.pzaGameState.curPart;if(4!=t&&9!=t||5!=e)return 4!=t&&9!=t||10!=e?void(5!=e||1!=t&&2!=t&&3!=t&&5!=t&&6!=t&&7!=t&&8!=t&&10!=t?(5!=t&&10!=t||10!=e)&&(10!=e||1!=t&&2!=t&&3!=t&&6!=t&&7!=t&&8!=t?a.prototype.playBgm.call(this):_.pzaSoundManager.playBgm(_.pzaBGMName.BELT_BGM)):_.pzaSoundManager.playBgm(_.pzaBGMName.BOWLING_BGM)):(_.pzaSoundManager.playBgm(_.pzaBGMName.BELT_BGM),void _.pzaSoundManager.playLoopAudio("rain",!0));_.pzaSoundManager.playBgm(_.pzaBGMName.PUZZLE_BGM)},t.prototype.guidePlant11=function(){var a=this;window.pzaMapManager.previewMap(function(){g.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){a.playBgm(),d.pzaEffectManager.createShowGrassEffect(1,function(){window.pzaMapManager.initCleanCar(),D.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(y.pzaPlantSelectView),e=M.pzaGamePartConfig.getPartDefaultPlant(1,1);t&&t.init(e),t&&t.initPlant(),g.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1,h.pzaGameState.guideSunPause=!0,h.pzaGameState.guideZombiePause=!0,window.pzaGuideManager.guideShow()})})})},!0)},t.prototype.guidePlant12=function(){var a=this;d.pzaEffectManager.createShowGrassEffect(1,null,!0),window.pzaMapManager.previewMap(function(){g.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){a.playBgm(),d.pzaEffectManager.createShowGrassEffect(2,function(){window.pzaMapManager.initCleanCar(),D.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(y.pzaPlantSelectView),e=M.pzaGamePartConfig.getPartDefaultPlant(1,2);t&&t.init(e),t&&t.initPlant(),g.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1,h.pzaGameState.guideZombiePause=!0,window.pzaGuideManager.guideShow(),window.pzazombieManager.nextWaveTime=50})})})},!0)},t.prototype.guidePlant14=function(){var a=this;d.pzaEffectManager.createShowGrassEffect(2,null,!0);var t=function(){window.pzaMapManager.previewMap(function(){g.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){a.playBgm(),d.pzaEffectManager.createShowGrassEffect(3,function(){window.pzaMapManager.initCleanCar(),D.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(y.pzaPlantSelectView),e=M.pzaGamePartConfig.getPartDefaultPlant(1,4);t&&t.init(e),d.pzaEffectManager.createReadyWord(function(){g.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),t&&t.initPlant(),h.pzaGameState.gamePause=!1,G.pzaWorldEventManager.triggerEvent(G.pzaWorldEventType.GAME_RESUME,null)})})})})},!0)};A.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.GAME_ASSESS_VIEW,function(a){var e=a&&a.getComponent(f.pzaAssessView);e&&e.bindBackGameCall(t,!0)})},t.prototype.guidePlant15=function(){var a=this;h.pzaGameState.gameMode=h.pzaGameMode.BELT,window.pzaplantManager.createPlant(s.pzaPlantEnum.PEA_SHOOTER,6,1,!0),window.pzaplantManager.createPlant(s.pzaPlantEnum.PEA_SHOOTER,7,2,!0),window.pzaplantManager.createPlant(s.pzaPlantEnum.PEA_SHOOTER,5,3,!0),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.createPitchFork(),g.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){window.pzaMapManager.openBattleUI(),window.pzaGuideManager.guideStepNext()},function(){a.playBgm(),g.pzaCommonMask.showMask(),window.pzaMapManager.initCleanCar(),D.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var t=a&&a.getComponent(z.pzaPlantBeltView);t&&t.showView(function(){g.pzaCommonMask.hideMask(),h.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})},t.prototype.guidePlant65=function(){var a=this;h.pzaGameState.gameMode=h.pzaGameMode.BELT,window.pzaMapManager.initMapPos(!1),window.pzaMapManager.createPitchFork(),window.pzaMapManager.showRedLine(3),g.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){a.playBgm(),g.pzaCommonMask.showMask(),window.pzaMapManager.initCleanCar(),window.pzaMapManager.openBattleUI(),D.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var t=a&&a.getComponent(z.pzaPlantBeltView);t&&t.showView(function(){g.pzaCommonMask.hideMask(),h.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})},t.prototype.guideBletMode=function(){var a=this;h.pzaGameState.gameMode=h.pzaGameMode.BELT,window.pzaMapManager.previewMap(function(){g.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.initMapTomb(h.pzaGameState.curChapter,h.pzaGameState.curPart,function(){window.pzaMapManager.initCleanCar(),D.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_BELT_VIEW,function(t){var e=t&&t.getComponent(z.pzaPlantBeltView);e&&e.showView(function(){d.pzaEffectManager.createReadyWord(function(){a.playBgm(),g.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})})})},!0)},t.prototype.guidePlant25=function(){var a=this;h.pzaGameState.sunLightCount=0,window.pzaMapManager.initMapPos(!1),h.pzaGameState.gameMode=h.pzaGameMode.KNOCK_ZOMBIE,g.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){a.playBgm(),window.pzaMapManager.initCleanCar(),window.pzaMapManager.openBattleUI(),window.pzaMapManager.hideSunUI(),h.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})},t.prototype.guidePlant35=function(){var a=this;h.pzaGameState.gameMode=h.pzaGameMode.SMALL_ZOMBIE,g.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){window.pzaMapManager.previewMap(function(){g.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){D.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_BELT_VIEW,function(t){var e=t&&t.getComponent(z.pzaPlantBeltView);e&&e.showView(function(){window.pzaMapManager.initCleanCar(),d.pzaEffectManager.createReadyWord(function(){a.playBgm(),g.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2})})})})},!1)})},t.prototype.guidePlant45=function(){var a=this;window.pzaMapManager.initMapPos(!1),window.pzaMapManager.initCleanCar(),window.pzaMapManager.createPitchFork(),window.pzazombieManager.wave=1;var t=C.pzaGameConfig.get45JarData(window.pzazombieManager.wave);null!=t&&t.forEach(function(a){window.pzaplantManager.createJar(a)}),h.pzaGameState.gameMode=h.pzaGameMode.BANG_JAR,g.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){a.playBgm(),window.pzaGuideManager.guideStepNext(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1})},t.prototype.guidePlant510=function(){var a=this;h.pzaGameState.gameMode=h.pzaGameMode.ZOM_BOSS,g.pzaCommonMask.hideMask(),window.pzaplantManager.initFlowerPot(),window.pzaGuideManager.guideShow(function(){_.pzaSoundManager.stopBgm(),window.pzaMapManager.previewMap(function(){g.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.initCleanCar();var t=0;10==h.pzaGameState.curChapter&&10==h.pzaGameState.curPart&&(t=6e4),window.pzazombieManager.createDrZomBoss(function(){D.pzaGameManager.showBattleUI(m.pzaResourceUrl.PLANT_BELT_VIEW,function(t){var e=t&&t.getComponent(z.pzaPlantBeltView);e&&e.showView(function(){d.pzaEffectManager.createReadyWord(function(){a.playBgm(),g.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),h.pzaGameState.gamePause=!1,G.pzaWorldEventManager.triggerEvent(G.pzaWorldEventType.GAME_RESUME,null)})})})},t)})},!1)})},t.prototype.guide_night_4_10=function(){var a=this;g.pzaCommonMask.hideMask(),window.pzaplantManager.initFlowerPot(),window.pzaGuideManager.guideShow(function(){a.guideBletMode()})},t.prototype.guide_night_2_1=function(a,t){var e=this;g.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){e.normalStartGameCall(a,t,!1)})},t.prototype.guide6_1=function(a,t){var e=this;g.pzaCommonMask.hideMask(),window.pzaGuideManager.guideShow(function(){e.normalStartGameCall(a,t,!1)})},t}(P.pzaGameBase);e.pzaGameNormal=O,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Plant/pzaAttackType":"pzaAttackType","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaAssessView":"pzaAssessView","../View/Battle/pzaPlantBeltView":"pzaPlantBeltView","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzaChannelTT":"pzaChannelTT","../utils/pzakc":"pzakc","./pzaGameBase":"pzaGameBase","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGamePartConfig:[function(a,t,e){"use strict";cc._RF.push(t,"1da54Pqt3NJaJJrwLTjkbmX","pzaGamePartConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWaveConfig=e.pzaGamePartConfig=void 0;var o=a("../Battle/Data/pzaGuideType"),n=a("../Battle/Data/pzaPlantEnum"),i=a("../Battle/Data/pzaZombieEnum"),r=a("../Battle/pzaGameState"),p=a("./pzaGameConfig"),l=a("./pzaLocalData"),s=a("./pzaUtil"),c=function(){function a(a,t,e,o,n,i,r,p,l){void 0===i&&(i=1),void 0===r&&(r=0),void 0===p&&(p=0),void 0===l&&(l=0),this.part=null,this.maxWave=0,this.waveZombieDensity=null,this.zombieTypes=null,this.newZombieType=null,this.newZombieWave=0,this.magnification=1,this.tombCount=0,this.tombMinRow=0,this.flowerPotColumn=0,this.minWaterWave=0,this.lastWaterWaveMinColumn=0,this.lastWaterWaveZombie=0,this.lastBungeeMinColumn=0,this.lastBungeeZombie=0,this.minFogColumn=0,this.redLimit=0,this.part=a,this.maxWave=t,this.waveZombieDensity=e,this.zombieTypes=o,0!=n&&(this.newZombieType=n),this.magnification=i,this.tombCount=r,this.tombMinRow=p,this.flowerPotColumn=l}return a.initPartConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=null;null!=t.density&&(o=t.density.split(",")).forEach(function(a,t){o[t]=parseInt(a)});var n=null;null!=t.type&&(n=t.type.split(",")).forEach(function(a,t){n[t]=parseInt(a)});var i=null,r=0;if(null!=t.new){var p=t.new.split(",");null!=p&&(i=parseInt(p[0]),r=parseInt(p[1]))}var l=new a(t.Level,parseInt(t.wave),o,n,i,parseInt(t.multiple),parseInt(t.tombstone),parseInt(t.tombstonemini),parseInt(t.flowerpot));if(l.newZombieWave=r,null!=t.waterexit&&(l.minWaterWave=parseInt(t.waterexit)),null!=t.waterend){var s=t.waterend.split(",");null!=s&&(l.lastWaterWaveMinColumn=parseInt(s[0]),l.lastWaterWaveZombie=parseInt(s[1]))}if(null!=t.fall){var c=t.fall.split(",");null!=c&&(l.lastBungeeMinColumn=parseInt(c[0]),l.lastBungeeZombie=parseInt(c[1]))}null!=t.fog&&(l.minFogColumn=parseInt(t.fog)),e.partConfigMap.set(t.Level,l)}})},a.getPartConfig=function(a,t){var e=this.partConfigMap.get(a+"-"+t);if(null==e)return console.error("\u672a\u627e\u5230\u5bf9\u5e94\u5173\u5361\u914d\u7f6e"),null;if(window.pzaGuideManager.guideType==o.pzaGuideType.GUIDE_PROP_1_4){var n=e.clone();return n.maxWave=5,n.waveZombieDensity=[5,1,30,1,5],n}return e},a.getPartDefaultPlant=function(a,t){var e=a+"-"+t;return this.PartDefaultPlantMap.get(e)},a.prototype.clone=function(){var t=new a(this.part,this.maxWave,this.waveZombieDensity,this.zombieTypes,this.newZombieType,this.magnification,this.tombCount,this.tombMinRow,this.flowerPotColumn);return t.minWaterWave=this.minWaterWave,t.lastWaterWaveMinColumn=this.lastWaterWaveMinColumn,t.lastWaterWaveZombie=this.lastWaterWaveZombie,t.lastBungeeMinColumn=this.lastBungeeMinColumn,t.lastBungeeZombie=this.lastBungeeZombie,t},a.prototype.getWaveZombieDensity=function(){return null==this.waveZombieDensity&&this.createZombieDensity(),this.waveZombieDensity},a.prototype.createZombieDensity=function(){this.waveZombieDensity=[];for(var a=1;a<=this.maxWave;a++){var t=Math.floor(Math.floor(.8*(a-1))/2)+1;t=a%10==0?Math.floor(2.5*t):Math.floor(t*this.magnification),this.waveZombieDensity.push(t)}},a.prototype.getRandomWaveZombie=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0),this.getWaveZombieDensity();var r=[];if(null==this.waveZombieDensity||a-1<0)return[i.pzaZombieEnum.ZOMBIE];var l=this.waveZombieDensity[a-1];if(null==l||l<=1)return[i.pzaZombieEnum.ZOMBIE];if(null!=this.newZombieType&&this.newZombieWave==a&&(r.push(this.newZombieType),l-=p.pzaGameConfig.getZombieLevel(this.newZombieType)),t&&a%10==0){r.push(i.pzaZombieEnum.FLAG_ZOMBIE),l-=p.pzaGameConfig.getZombieLevel(i.pzaZombieEnum.FLAG_ZOMBIE);for(var s=Math.min(Math.floor(l/2),8),c=0;c<s;c++)r.push(i.pzaZombieEnum.ZOMBIE),l-=p.pzaGameConfig.getZombieLevel(i.pzaZombieEnum.ZOMBIE)}for(a==this.maxWave&&a>=10&&this.zombieTypes.forEach(function(a){a!=i.pzaZombieEnum.ZOMBIE&&a!=i.pzaZombieEnum.YETI_ZOMBIE&&(r.push(a),l-=p.pzaGameConfig.getZombieLevel(a))});l>0;){var u=this.getRandomZombie(l,a,e,o,n);if(null==u)break;if(u==i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?e--:u==i.pzaZombieEnum.RED_GARGANTUAR&&a%10!=0&&n--,r.push(u),r.length>=50)break;l-=p.pzaGameConfig.getZombieLevel(u)}return r},a.prototype.getRandomZombie=function(a,t,e,o,n){var c=this;void 0===o&&(o=0),void 0===n&&(n=0);var u,d=[],h=[];this.zombieTypes.forEach(function(e){if(null!=e&&!(p.pzaGameConfig.isWaterZombie(e)&&t<c.minWaterWave)){var r=p.pzaGameConfig.getZombieConfig(e);if(!(null==r||0==r.refrshWeight||r.refreshLevel>a||r.refrshMinWave>t||o>0&&e==i.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&t%10!=0))if(d.push(e),o>0)if(e==i.pzaZombieEnum.RED_GARGANTUAR)h.push(t%10==0?6e3:1e3);else if(e==i.pzaZombieEnum.ZOMBIE){var l=r.refrshWeight;o>5&&(l=Math.max(l-180*(o-5),400)),h.push(l)}else e==i.pzaZombieEnum.ZOMBIE?(l=r.refrshWeight,o>5&&(l=Math.max(l-150*(o-5),1e3)),h.push(l)):h.push(r.refrshWeight);else h.push(r.refrshWeight)}}),e>0&&null!=(u=p.pzaGameConfig.getZombieConfig(i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM))&&u.refreshLevel<=a&&(d.push(i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),h.push(u.refrshWeight)),l.pzaLocalData.data.hasKillYeti&&r.pzaGameState.isSelectPlant&&null!=(u=p.pzaGameConfig.getZombieConfig(i.pzaZombieEnum.YETI_ZOMBIE))&&u.refreshLevel<=a&&(d.push(i.pzaZombieEnum.YETI_ZOMBIE),h.push(u.refrshWeight));var m=s.pzaUtil.getRandomIndexByWeight(h);return d[m]},a.prototype.getPreviewZombies=function(a){var t=[];if(null==this.zombieTypes||this.zombieTypes.length<=1){for(var e=0;e<a;e++)t.push(i.pzaZombieEnum.ZOMBIE);return t}for(e=0;e<this.zombieTypes.length;e++)t.push(this.zombieTypes[e]);if(t.length>=a)return t;var o=[],n=[];this.zombieTypes.forEach(function(a){if(null!=a&&a!=i.pzaZombieEnum.BUNGEE_ZOMBIE){var t=p.pzaGameConfig.getZombieConfig(a);null!=t&&0!=t.refrshWeight&&(o.push(a),n.push(t.refrshWeight))}});var r=t.length;for(e=0;e<a-r;e++){var l=s.pzaUtil.getRandomIndexByWeight(n);t.push(o[l])}return t},a.prototype.getRandomTombZombie=function(){var a=this,t=[i.pzaZombieEnum.ZOMBIE,i.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,i.pzaZombieEnum.CONE_HEAD_ZOMBIE],e=[];return t.forEach(function(t){if(a.zombieTypes.includes(t)){var o=p.pzaGameConfig.getZombieConfig(t);e.push(o.refrshWeight)}}),t[s.pzaUtil.getRandomIndexByWeight(e)]},a.prototype.getRandomDiveZombie=function(){var a=[i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE];null!=this.zombieTypes&&(this.zombieTypes.indexOf(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE)>=0&&a.push(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),this.zombieTypes.indexOf(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE)>=0&&a.push(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE));var t=[];return a.forEach(function(a){var e=p.pzaGameConfig.getZombieConfig(a);t.push(e.refrshWeight)}),a[s.pzaUtil.getRandomIndexByWeight(t)]},a.partConfigMap=new Map,a.PartDefaultPlantMap=new Map([["1-1",[n.pzaPlantEnum.PEA_SHOOTER]],["1-2",[n.pzaPlantEnum.PEA_SHOOTER,n.pzaPlantEnum.SUN_FLOWER]],["1-3",[n.pzaPlantEnum.PEA_SHOOTER,n.pzaPlantEnum.SUN_FLOWER,n.pzaPlantEnum.CHERRY_BOMB]],["1-4",[n.pzaPlantEnum.PEA_SHOOTER,n.pzaPlantEnum.SUN_FLOWER,n.pzaPlantEnum.CHERRY_BOMB,n.pzaPlantEnum.WALL_NUT]],["1-6",[n.pzaPlantEnum.PEA_SHOOTER,n.pzaPlantEnum.SUN_FLOWER,n.pzaPlantEnum.CHERRY_BOMB,n.pzaPlantEnum.WALL_NUT,n.pzaPlantEnum.POTATO_MINE]],["1-7",[n.pzaPlantEnum.PEA_SHOOTER,n.pzaPlantEnum.SUN_FLOWER,n.pzaPlantEnum.CHERRY_BOMB,n.pzaPlantEnum.WALL_NUT,n.pzaPlantEnum.POTATO_MINE,n.pzaPlantEnum.SNOW_PEA]],["2-5",[n.pzaPlantEnum.POTATO_MINE,n.pzaPlantEnum.GRAVE_BUSTER,n.pzaPlantEnum.CHERRY_BOMB]],["7-5",[n.pzaPlantEnum.POTATO_MINE,n.pzaPlantEnum.GRAVE_BUSTER,n.pzaPlantEnum.CHERRY_BOMB]]]),a}();e.pzaGamePartConfig=c;var u=function(){function a(){}return a.getWaveRandomTime=function(){return s.pzaUtil.getRandomFloatNum(this.minWaveRandomTime,this.maxWaveRandomTime)},a.getPreRefreshHp=function(){return s.pzaUtil.getRandomFloatNum(this.preRefreshMinHp,this.preRefreshMaxHp)},a.initBaseWaveConfig=function(a){var t=a&&a[0];null!=t&&(this.firstWaveTime=parseFloat(t.first),this.initSunCount=parseInt(t.lnitial),this.minRefreshTime=parseFloat(t.interval),this.minWaveRandomTime=parseFloat(t.randommini),this.maxWaveRandomTime=parseFloat(t.randommax),this.preRefreshMinHp=parseFloat(t.advancemini),this.preRefreshMaxHp=parseFloat(t.advancemax),this.preRefreshTime=parseFloat(t.advance),this.activeRedTipTime=parseFloat(t.delay),this.redTipNextWaveTime=parseFloat(t.cd))},a.firstWaveTime=18,a.minRefreshTime=6,a.minWaveRandomTime=25,a.maxWaveRandomTime=31,a.preRefreshMinHp=.5,a.preRefreshMaxHp=.67,a.preRefreshTime=2,a.activeRedTipTime=45,a.redTipNextWaveTime=7.2,a.initSunCount=50,a}();e.pzaWaveConfig=u,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameConfig":"pzaGameConfig","./pzaLocalData":"pzaLocalData","./pzaUtil":"pzaUtil"}],pzaGamePropConfig:[function(a,t,e){"use strict";var o;cc._RF.push(t,"41a32ESnYpIMY3MttEXjBfJ","pzaGamePropConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRewardPropData=e.pzaGamePropConfig=e.pzaGamePropEnum=void 0,function(a){a[a.PROP_CHERRY_BOMB=1]="PROP_CHERRY_BOMB",a[a.PROP_FREE_SUN=2]="PROP_FREE_SUN",a[a.PROP_AUTO_PICK=3]="PROP_AUTO_PICK",a[a.PROP_COIN=4]="PROP_COIN",a[a.PROP_PLANTE=5]="PROP_PLANTE",a[a.PROP_FERTILIZER=6]="PROP_FERTILIZER",a[a.PROP_PESTICIDE=7]="PROP_PESTICIDE",a[a.PROP_CLEAR_CD=7]="PROP_CLEAR_CD",a[a.PROP_CHOCOLATES=8]="PROP_CHOCOLATES",a[a.PROP_GOLD_FLOWER=9]="PROP_GOLD_FLOWER",a[a.PROP_TOKEN_COIN=10]="PROP_TOKEN_COIN",a[a.PROP_SECRET_FLOWER=12]="PROP_SECRET_FLOWER",a[a.PROP_BRONZE_FLOWE=13]="PROP_BRONZE_FLOWE",a[a.PROP_SILVER_FLOWE=14]="PROP_SILVER_FLOWE",a[a.PROP_ACHIEVE=15]="PROP_ACHIEVE"}(o=e.pzaGamePropEnum||(e.pzaGamePropEnum={}));var n=function(){function a(a,t,e){this.propType=o.PROP_FREE_SUN,this.propName=null,this.propDesc=null,this.propType=a,this.propName=t,this.propDesc=e}return a.initPropConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=parseInt(t.id),n=new a(o,t.name,t.txt);e.PorpConfigMap.set(o,n)}})},a.PorpConfigMap=new Map,a}();e.pzaGamePropConfig=n;e.pzaRewardPropData=function(a,t){this.propType=o.PROP_FREE_SUN,this.propCount=0,this.limitGet=0,this.trunToCoin=0,this.propType=a,this.propCount=t},cc._RF.pop()},{}],pzaGameRecruitMgr:[function(a,t,e){"use strict";cc._RF.push(t,"573a35om6pC5aCoy8P4aKeD","pzaGameRecruitMgr"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameRecruitMgr=void 0;var o=a("./pzaRecruitDrawConf"),n=a("./pzaRecruitTaskConf"),i=function(){function a(){this.recruitTaskMap=new Map,this.recruitDrawMap=new Map}return a.instance=function(){return a._me||(a._me=new a),a._me},a.prototype.initRecruitTaskMap=function(a){for(var t=0;t<a.length;t++){var e=new n.pzaRecruitTaskConf(a[t]);this.recruitTaskMap.set(e.id,e)}},a.prototype.initRecruitDrawMap=function(a){for(var t=0;t<a.length;t++){var e=new o.pzaRecruitDrawConf(a[t]);this.recruitDrawMap.set(e.id,e)}},a._me=null,a}();e.pzaGameRecruitMgr=i,cc._RF.pop()},{"./pzaRecruitDrawConf":"pzaRecruitDrawConf","./pzaRecruitTaskConf":"pzaRecruitTaskConf"}],pzaGameSmall:[function(a,t,e){"use strict";cc._RF.push(t,"d6478vg2ZdNxIDU+EJlpdbm","pzaGameSmall");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameSmall=void 0;var i=a("../Battle/Data/pzaZombieEnum"),r=a("../Battle/pzaGameState"),p=a("./pzaGameConfig"),l=a("./pzaGameNormal"),s=a("./pzaGamePartConfig"),c=a("./pzaUtil"),u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=r.pzaGameMode.SMALL_ZOMBIE,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u5c0f\u50f5\u5c38-"},t.prototype.isAutoCreateSun=function(){return!1},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1},t.prototype.createWave=function(t){a.prototype.createWave.call(this,t),t.nextWaveTime=p.pzaGameConfig.miniZombieWaveInterval;var e=s.pzaGamePartConfig.getPartConfig(r.pzaGameState.curChapter,r.pzaGameState.curPart);if(!(null==e||e.maxWave<t.wave)){e.maxWave==t.wave&&(t.lastWave=!0);var o=e.getRandomWaveZombie(t.wave,!0,window.pzaMapManager.getIceYCount(),0,r.pzaGameState.redLeft);if(null!=o){var n=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||n.indexOf(a.yIndex)>=0||n.push(a.yIndex)});for(var l=r.pzaGameState.map.getMapRow(),u=!0,d=[],h=[],m=0;m<l;m++)h.push(m);h.sort(function(){return Math.random()-.5});var f=0;o.forEach(function(a){var e=window.pzaMapManager.getRandomWayIndex(f,a,h);if(f++,a==i.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,d);if(null==o)return;d.push(o);var p=o.split("-"),l=t.createFixBlockZombieData(a,parseInt(p[0]),parseInt(p[1]));return t.createZombie(l),void t.curWaveZombieDatas.add(l)}a==i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&n.length>0&&(e=n.shift());var s=t.createZombieData(a,e);!u&&s.logicPos&&(s.logicPos.x+=c.pzaUtil.getRandomFloatNum(.2,1)*r.pzaGameState.map.getBlockWidth()),t.createZombie(s),t.curWaveZombieDatas.add(s),u=!1}),t.lastWave&&(t.lastWayZombieTime=2)}}},t.prototype.showBattlePropButtons=function(t){5==r.pzaGameState.curPart||10==r.pzaGameState.curPart?(t.freeSunNode.active=!1,t.cherryBombNode.active=!1,t.autoPickNode.active=!0,t.clearCDNode.active=!1):a.prototype.showBattlePropButtons.call(this,t)},t}(l.pzaGameNormal);e.pzaGameSmall=u,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameConfig":"pzaGameConfig","./pzaGameNormal":"pzaGameNormal","./pzaGamePartConfig":"pzaGamePartConfig","./pzaUtil":"pzaUtil"}],pzaGameState:[function(a,t,e){"use strict";cc._RF.push(t,"ec118RIzbVBC4zMJO2TojyG","pzaGameState"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameState=e.pzaSelectCardType=e.pzaGameMode=e.pzaGameTimeType=void 0;var o,n,i=a("../Common/pzaGameConfig"),r=a("../Common/pzaGamePartConfig"),p=a("../Common/pzaLocalData"),l=a("./Data/pzaPlantEnum");(function(a){a[a.DAY=1]="DAY",a[a.NIGHT=2]="NIGHT"})(o=e.pzaGameTimeType||(e.pzaGameTimeType={})),function(a){a[a.NORMAL=0]="NORMAL",a[a.BELT=1]="BELT",a[a.KNOCK_ZOMBIE=2]="KNOCK_ZOMBIE",a[a.SMALL_ZOMBIE=3]="SMALL_ZOMBIE",a[a.BANG_JAR=4]="BANG_JAR",a[a.ZOM_BOSS=5]="ZOM_BOSS",a[a.SURVIVAL=6]="SURVIVAL",a[a.SUR_ENDLESS=7]="SUR_ENDLESS",a[a.ZOMBIE_ENERMY=8]="ZOMBIE_ENERMY",a[a.ZOMBIE_ENDLESS=9]="ZOMBIE_ENDLESS",a[a.VASE=10]="VASE",a[a.VASE_ENDLESS=11]="VASE_ENDLESS",a[a.MINIGAME=12]="MINIGAME",a[a.ZaJiao=13]="ZaJiao",a[a.CREATIVE_VASE=14]="CREATIVE_VASE",a[a.CREATIVE_TRAD=15]="CREATIVE_TRAD",a[a.MINIGAME_KNOCK=16]="MINIGAME_KNOCK",a[a.MINIGAME_SMALL=17]="MINIGAME_SMALL",a[a.NORMAL_WEEKTWO=18]="NORMAL_WEEKTWO"}(n=e.pzaGameMode||(e.pzaGameMode={})),function(a){a[a.SLOT_CARD=0]="SLOT_CARD",a[a.BELT_CARD=1]="BELT_CARD",a[a.DROP_CARD=2]="DROP_CARD",a[a.AD_CARD=3]="AD_CARD",a[a.SHOVE_CARD=4]="SHOVE_CARD"}(e.pzaSelectCardType||(e.pzaSelectCardType={}));var s=function(){function a(){}return Object.defineProperty(a,"curPart",{get:function(){return a._curPart},set:function(t){a._curPart=t},enumerable:!1,configurable:!0}),a.init=function(t,e,l,s,c){if(void 0===l&&(l=n.NORMAL),void 0===s&&(s=!1),void 0===c&&(c=0),this.gameMode=l,this.curChapter=t,this.curPart=e,this.midOut=!1,this.gamePause=!0,this.guideSunPause=!1,this.guideZombiePause=!1,this.selectCard=null,this.selectPlant=null,this.selectZombie=null,this.curImitaterPlant=null,this.cobCannon=null,this.adFreePlant=null,this.zombieWinShowMap=!1,this.finishShowWinShowMap=!1,this.zombieWinShowUI=!1,this.zombieWinInVase=!1,this.envPlantTip.clear(),this.pondPlantTip.clear(),this.specialPlantTip.clear(),this.gameSpecialTip.clear(),this.advancePlantMap.clear(),this.tombTip=!1,this.cantPlantTip=!1,this.putZombieTipLeft=!1,this.putZombieTipRight=!1,this.sunLightCount=r.pzaWaveConfig.initSunCount,this.lossCar=!1,this.lossPlantCount=0,this.showSunUI=!0,this.grayPlantWarning=!1,this.cardIsMove=!1,this.bangCaring=!1,this.gameWin=!1,this.achieveArr=[],this.pickCoinCount=0,this.twinFlowerCount=0,this.killZombieTeam=0,this.cobCannonCount=0,this.winterMelon=[],this.usePeaPlant=!1,this.useThrowPlant=!1,this.onlyShroomCofee=!0,this.useShroom=!1,this.onlyBoomPlant=!0,this.usePlanternBlover=!1,this.usePondPlant=!1,this.gameSpeed=1,this.redLeft=0,this.autoPickLeft=p.pzaLocalData.data.autoPickLeft,this.cdReduceValue=0,this.sunReduceValue=0,this.critValue=0,this.maxMarigold=5e3,this.isToken=!1,this.starModeGameOver=!1,this.starWaveOverFail=!1,this.map=i.pzaGameConfig.chapterMapConfig.get(t),this.isSelectPlant=!1,2==t||4==t||7==t||9==t||(5==t||10==t)&&10==e||a.isMiniMode()&&3==e||a.isMiniMode()&&4==e?this.gameTimeType=o.NIGHT:this.gameTimeType=o.DAY,a.isMiniMode()&&4==e&&(this.sunLightCount=c),a.isMiniMode()&&11==e&&(this.gameSpeed=2),a.isZjMode()&&(this.sunLightCount=c),!s){4!=t&&9!=t||5!=e||(this.map=i.pzaGameConfig.chapterMapConfig.get(2)),this.newZombie=null;var u=r.pzaGamePartConfig.getPartConfig(t,e);null==u||null==u.newZombieType||p.pzaLocalData.hasUnlockZombie(u.newZombieType)||(this.newZombie=u.newZombieType),this.partStar=i.pzaGameConfig.getPartStar(t,e)}},a.getStorageSun=function(a){this.sunLightCount=a},a.endLessWin=function(){this.selectCard=null,this.selectPlant=null,this.selectZombie=null,this.cobCannon=null,this.pickCoinCount=0,this.lossCar=!1,this.lossPlantCount=0,this.gameWin=!1,this.usePeaPlant=!1,this.useThrowPlant=!1,this.onlyShroomCofee=!0,this.useShroom=!1,this.onlyBoomPlant=!0,this.usePlanternBlover=!1,this.usePondPlant=!1,this.maxMarigold=5e3},a.survivalPartWin=function(){this.gamePause=!0,this.curPart++,a.endLessWin()},a.resetCardState=function(){},a.isSurvival=function(){return this.gameMode==n.SURVIVAL||this.gameMode==n.SUR_ENDLESS},a.isZombieMode=function(){return this.gameMode==n.ZOMBIE_ENERMY||this.gameMode==n.ZOMBIE_ENDLESS},a.isVaseMode=function(){return this.gameMode===n.VASE||this.gameMode===n.VASE_ENDLESS},a.isMiniMode=function(){return this.gameMode==n.MINIGAME||this.gameMode==n.MINIGAME_KNOCK||this.gameMode==n.MINIGAME_SMALL},a.isCreativeVaseMode=function(){return this.gameMode==n.CREATIVE_VASE},a.isZjMode=function(){return this.gameMode==n.ZaJiao},a.isCreativeTrad=function(){return this.gameMode==n.CREATIVE_TRAD},a.showUnlockZombie=function(){this.newZombie=null},a.addPlant=function(a){if(i.pzaGameConfig.isAdvancePlant(a)){var t=0;this.advancePlantMap.has(a)&&(t=this.advancePlantMap.get(a)),this.advancePlantMap.set(a,t+1)}},a.deletPlant=function(a){if(!this.advancePlantMap.has(a))return!1;var t=this.advancePlantMap.get(a);return this.advancePlantMap.set(a,Math.max(t-1,0)),!0},a.getPlantPrice=function(t,e){void 0===e&&(e=!1),t==l.pzaPlantEnum.IMITATER&&(t=a.curImitaterPlant);var o=i.pzaGameConfig.getPlantConfig(t),r=0;return null==o?r:(r=this.gameMode==n.SUR_ENDLESS&&i.pzaGameConfig.isAdvancePlant(t)&&this.advancePlantMap.has(t)?e?o.price+50*this.advancePlantMap.get(t):Math.round((o.price+50*this.advancePlantMap.get(t))*(1-this.sunReduceValue)):e?o.price:Math.round(o.price*(1-this.sunReduceValue)),this.sunDecreaseValue&&i.pzaGameConfig.getPlantConfig(t).rareLevel<4&&(r-=this.sunDecreaseValue)<0&&(r=0),r)},a.curChapter=1,a._curPart=1,a.isGameEnd=!1,a.isMenuShow=!1,a.midOut=!1,a.hasPlantSelect=!1,a.gamePause=!0,a.guideSunPause=!1,a.guideZombiePause=!1,a.selectCard=null,a.selectPlant=null,a.selectIdx=0,a.selectZombie=null,a.curImitaterPlant=null,a.cobCannon=null,a.adFreePlant=null,a.sunLightCount=50,a.pickSunCount=0,a.sunMoveUIPos=null,a.coinMoveUIPos=null,a.tokenCoinMoveUIPos=null,a.gameTimeType=o.DAY,a.gameMode=n.NORMAL,a.newZombie=null,a.zombieWinShowMap=!1,a.finishShowWinShowMap=!1,a.zombieWinShowUI=!1,a.zombieWinInVase=!1,a.partStar=3,a.lossCar=!1,a.lossPlantCount=0,a.showSunUI=!0,a.envPlantTip=new Set,a.pondPlantTip=new Set,a.specialPlantTip=new Set,a.gameSpecialTip=new Set,a.tombTip=!1,a.cantPlantTip=!1,a.grayPlantWarning=!1,a.cardIsMove=!1,a.putZombieTipLeft=!1,a.putZombieTipRight=!1,a.bangCaring=!1,a.gameWin=!1,a.autoPickLeft=0,a.autoPickLock=!1,a.hadRevived=!1,a.achieveArr=[],a.pickCoinCount=0,a.twinFlowerCount=0,a.killZombieTeam=0,a.cobCannonCount=0,a.winterMelon=[],a.usePeaPlant=!1,a.useThrowPlant=!1,a.onlyShroomCofee=!0,a.useShroom=!1,a.onlyBoomPlant=!0,a.usePlanternBlover=!1,a.usePondPlant=!1,a.gameSpeed=1,a.survivalConfig=null,a.zombieEndlessPart=1,a.zombiePuffCount=0,a.map=null,a.redLeft=0,a.advancePlantMap=new Map,a.cdReduceValue=0,a.sunReduceValue=0,a.sunDecreaseValue=0,a.critValue=0,a.maxMarigold=5e3,a.isInHandBookView=!1,a.isToken=!1,a.starModeGameOver=!1,a.starWaveOverFail=!1,a.reviveViewBtnState=1,a.weekTwoInitPlants=[],a.miniGameIsClickBack=!1,a.isSelectPlant=!1,a}();e.pzaGameState=s,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaLocalData":"pzaLocalData","./Data/pzaPlantEnum":"pzaPlantEnum"}],pzaGameSurEndless:[function(a,t,e){"use strict";cc._RF.push(t,"3a13fbeYHtM9JhoujbIjtUz","pzaGameSurEndless");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameSurEndless=void 0;var i=a("../Battle/Data/pzaBattleData"),r=a("../Battle/pzaGameState"),p=a("../View/pzaCommonMask"),l=a("../utils/pzaChannel"),s=a("../utils/pzakc"),c=a("./pzaGameManager"),u=a("./pzaGameSurvival"),d=a("./pzaLocalData"),h=a("./pzaRankMgr"),m=a("./pzaStatisticsMgr"),f=a("./pzaSurvivalConfig"),z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=r.pzaGameMode.SUR_ENDLESS,t}return n(t,a),t.prototype.isEndless=function(){return!0},t.prototype.getRankKey=function(){var a=l.pzaChannel.instance().channel;return"wx"!==a?a+"endless_rank_":"endless_rank_"},t.prototype.getGameModeName=function(){return"\u751f\u5b58\u65e0\u5c3d-"},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u751f\u5b58\u6a21\u5f0f\u201d\uff0c"+["\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876"][r.pzaGameState.curChapter-1]+"(\u65e0\u5c3d)\u7b2c"+(r.pzaGameState.curPart-1)+"\u9762\u65d7\u5e1c\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=r.pzaGameState.survivalConfig;if(null!=t){a.maxWave=t.maxWave;for(var e=Math.floor(a.maxWave/10),o=0;o<a.partFlags.length;o++){var n=a.partFlags[o];o+1>e?n.active=!1:(n.active=!0,n.setPosition(-315*(o+1)/e-30,42))}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0;var i="\u751f\u5b58\u6a21\u5f0f\uff1a"+["\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876"][r.pzaGameState.curChapter-1]+"(\u65e0\u5c3d)";r.pzaGameState.curPart>1&&(i+="-\u5b8c\u6210"+(r.pzaGameState.curPart-1)+"\u9762\u65d7\u5e1c"),a.partLabel.string=i}},t.prototype.beforeLoad=function(a,t){r.pzaGameState.partStar=0,r.pzaGameState.survivalConfig=f.pzaSurvivalConfig.createEndlessConfig(a,t),r.pzaGameState.redLeft=r.pzaGameState.survivalConfig.redLimit,d.pzaLocalData.gameStartTimeStamp=Date.now(),m.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt(r.pzaGameState.curChapter+10+""+r.pzaGameState.curPart)})},t.prototype.getZombieTypeArr=function(a){return f.pzaSurvivalConfig.getAllEndlessZombies(a)},t.prototype.readData=function(a){var t=d.pzaLocalBattleData.data.endlessBattleData[a-1];i.pzaBattleData.readData(t)},t.prototype.gameRestart=function(){r.pzaGameState.hadRevived=!1,d.pzaLocalBattleData.clearEndlessBattleData(r.pzaGameState.curChapter),this.loadAndStart(r.pzaGameState.curChapter,1)},t.prototype.updatePartProcess=function(t){a.prototype.updatePartProcess.call(this,t);var e=Math.floor(window.pzazombieManager.wave/10)-1;if(!(e<0||e>2)){var o=t.partFlags[e];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}},t.prototype.partFail=function(){a.prototype.partFail.call(this),d.pzaLocalData.passSurvivalEndless(r.pzaGameState.curChapter,r.pzaGameState.curPart-1),d.pzaLocalBattleData.clearEndlessBattleData(r.pzaGameState.curChapter),s.default.eventReport("\u751f\u5b58\u6a21\u5f0f-\u65e0\u5c3d-"+r.pzaGameState.curChapter+"-"+r.pzaGameState.curPart+"\u5931\u8d25");var t=0;d.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-d.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3),m.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt(r.pzaGameState.curChapter+10+""+r.pzaGameState.curPart)},{name:"is_Win",value:0},{name:"Use",value:t},{name:"time",value:e}),d.pzaLocalData.hasUseProp=!1},t.prototype.onZombieDeath=function(a,t,e){var o=this;if(e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)){var n=0;d.pzaLocalData.hasUseProp&&(n=1);var i=Date.now()-d.pzaLocalData.gameStartTimeStamp;i=Math.ceil(i/1e3),m.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt(r.pzaGameState.curChapter+10+""+r.pzaGameState.curPart)},{name:"is_Win",value:1},{name:"Use",value:n},{name:"time",value:i}),d.pzaLocalData.hasUseProp=!1,c.pzaGameManager.getCurrentGame().checkAchieve(!1),p.pzaCommonMask.showMask(),h.pzaRankMgr.uploadEndlssScore(r.pzaGameState.curChapter,r.pzaGameState.curPart,function(a){p.pzaCommonMask.hideMask(),d.pzaLocalData.passSurvivalEndless(r.pzaGameState.curChapter,r.pzaGameState.curPart),o.nextPart(!1,a)})}},t.prototype.showPreviewTip=function(a,t,e){a.word.string="\u751f\u5b58\u6a21\u5f0f\uff1a"+a.survivalPreviewTips[t-1]+"(\u65e0\u5c3d)",e>1?(a.flagWord.node.active=!0,a.flagWord.string=e-1+"\u9762\u65d7\u5e1c\u5b8c\u6210"):a.flagWord.node.active=!1},t}(u.pzaGameSurvival);e.pzaGameSurEndless=z,cc._RF.pop()},{"../Battle/Data/pzaBattleData":"pzaBattleData","../Battle/pzaGameState":"pzaGameState","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameManager":"pzaGameManager","./pzaGameSurvival":"pzaGameSurvival","./pzaLocalData":"pzaLocalData","./pzaRankMgr":"pzaRankMgr","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaSurvivalConfig":"pzaSurvivalConfig"}],pzaGameSurvival:[function(a,t,e){"use strict";cc._RF.push(t,"25b1fp6ux1Drb6N1Vwwqh7X","pzaGameSurvival");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameSurvival=void 0;var i=a("../Battle/Data/pzaBattleData"),r=a("../Battle/Data/pzaDropType"),p=a("../Battle/Data/pzaZombieEnum"),l=a("../Battle/pzaEffectManager"),s=a("../Battle/pzaGameState"),c=a("../Load/pzaPreLoadManager"),u=a("../View/Battle/pzaPlantSelectView"),d=a("../View/pzaCommonMask"),h=a("../View/pzaWarningView"),m=a("../utils/pzaChannel"),f=a("../utils/pzakc"),z=a("./pzaGameBase"),y=a("./pzaGameManager"),g=a("./pzaGamePartConfig"),v=a("./pzaLocalData"),b=a("./pzaRankMgr"),S=a("./pzaSoundManager"),P=a("./pzaStatisticsMgr"),C=a("./pzaSurvivalConfig"),D=a("./pzaTipManager"),M=a("./pzaUIManager"),E=a("./pzaUtil"),_=a("./pzaWorldEventManager"),T=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=s.pzaGameMode.SURVIVAL,t.isStopCreateSun=!1,t.stopCreateSunTime=0,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u751f\u5b58\u6a21\u5f0f-"},t.prototype.getZombieTypeArr=function(a){return C.pzaSurvivalConfig.getAllZombies(a)},t.prototype.beforeLoad=function(a,t){s.pzaGameState.partStar=0,s.pzaGameState.survivalConfig=C.pzaSurvivalConfig.getSurvivaliConfig(a,t)},t.prototype.readData=function(a){var t=v.pzaLocalBattleData.data.survivalBattleData[a-1];i.pzaBattleData.readData(t)},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=s.pzaGameState.survivalConfig;if(null!=t){a.maxWave=t.maxWave;for(var e=Math.floor(a.maxWave/10),o=0;o<a.partFlags.length;o++){var n=a.partFlags[o];o+1>e?n.active=!1:(n.active=!0,n.setPosition(-315*(o+1)/e-30,42))}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0;var i="\u751f\u5b58\u6a21\u5f0f\uff1a"+["\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876"][s.pzaGameState.curChapter-1];s.pzaGameState.curPart>1&&(i+="-\u5b8c\u6210"+(s.pzaGameState.curPart-1)+"\u9762\u65d7\u5e1c"),a.partLabel.string=i}},t.prototype.updatePartProcess=function(t){if(a.prototype.updatePartProcess.call(this,t),1!=s.pzaGameState.curChapter||2!=s.pzaGameState.curPart&&3!=s.pzaGameState.curPart&&5!=s.pzaGameState.curPart){var e=Math.floor(window.pzazombieManager.wave/10)-1;if(!(e<0||e>2)){var o=t.partFlags[e];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}}else if(t.maxWave==window.pzazombieManager.wave){var n=t.partFlags[0];cc.Tween.stopAllByTarget(n),cc.tween(n).to(.2,{y:72}).start()}},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.gameProp.node.active=!0,t.freePlantNode.active=!0,t.shovelShowNode.active=!0,t.speedBtn.active=!0,t.sunUIShowNode.active=!0},t.prototype.getSurvivalSunState=function(){return this.isStopCreateSun},t.prototype.refreshNextWave=function(t,e){if(a.prototype.refreshNextWave.call(this,t,e),t.lastWave)return this.stopCreateSunTime+=e,void(this.stopCreateSunTime>=60&&(this.isStopCreateSun=!0));this.stopCreateSunTime=0,this.isStopCreateSun=!1;var o=!1;if(s.pzaGameState.gameMode==s.pzaGameMode.SUR_ENDLESS&&(o=!1),(t.wave+1)%10==0||o){if(!t.hasShowRedTip){if(t.zombieMap.size<=0||t.curWaveTime>=g.pzaWaveConfig.activeRedTipTime){var n=s.pzaGameState.survivalConfig;null!=n&&n.maxWave==t.wave+1&&s.pzaGameState.gameMode==s.pzaGameMode.SURVIVAL&&5==s.pzaGameState.curPart&&(o=!0),t.showBigWaveTip(o,!1)}return}}else if(0!=t.wave&&t.nextWaveTime>g.pzaWaveConfig.preRefreshTime&&t.getCurWaveLeftHp()<=t.preRefreshHp)return void(t.nextWaveTime=g.pzaWaveConfig.preRefreshTime);t.curWaveTime<g.pzaWaveConfig.minRefreshTime||t.nextWaveTime>0||this.createWave(t)},t.prototype.createWave=function(t){a.prototype.createWave.call(this,t),1==t.wave&&S.pzaSoundManager.playAudio("awooga"),t.nextWaveTime=g.pzaWaveConfig.getWaveRandomTime();var e=s.pzaGameState.survivalConfig;if(!(null==e||e.maxWave<t.wave)){e.maxWave==t.wave&&(t.lastWave=!0);var o=s.pzaGameState.curPart,n=e.getRandomWaveZombie(t.wave,!0,window.pzaMapManager.getIceYCount(),o,s.pzaGameState.redLeft);if(null!=n){var i=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||i.indexOf(a.yIndex)>=0||i.push(a.yIndex)});for(var r=s.pzaGameState.map.getMapRow(),l=!0,c=[],u=[],d=0;d<r;d++)u.push(d);u.sort(function(){return Math.random()-.5});var h=0;n.forEach(function(a){var e=window.pzaMapManager.getRandomWayIndex(h,a,u);if(h++,a==p.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,c);if(null==o)return;c.push(o);var n=o.split("-"),r=t.createFixBlockZombieData(a,parseInt(n[0]),parseInt(n[1]));return t.createZombie(r),void t.curWaveZombieDatas.add(r)}a==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&i.length>0&&(e=i.shift());var d=t.createZombieData(a,e);!l&&d.logicPos&&(d.logicPos.x+=E.pzaUtil.getRandomFloatNum(.2,1)*s.pzaGameState.map.getBlockWidth()),t.createZombie(d),t.curWaveZombieDatas.add(d),l=!1}),t.lastWave&&(t.lastWayZombieTime=2,2==s.pzaGameState.curChapter&&window.pzaMapManager.randomCreateTomb(1))}}},t.prototype.lastTombWaterZombie=function(a){var t=s.pzaGameState.survivalConfig;if(null!=t){if(window.pzaMapManager.TombMap.forEach(function(e){if(null!=e&&null!=e.xIndex&&null!=e.yIndex&&!window.pzaplantManager.hasPlant(e.xIndex,e.yIndex)){var o=t.getRandomTombZombie(),n=a.createFixBlockZombieData(o,e.xIndex,e.yIndex);a.createZombie(n,!1,!0),a.curWaveZombieDatas.add(n)}}),t.lastWaterWaveZombie>0){for(var e=[],o=t.lastWaterWaveMinColumn-1;o<9;o++)e.push([o,2]),e.push([o,3]);e.sort(function(){return Math.random()-.5});for(var n=0;n<t.lastWaterWaveZombie;n++)if(null!=(p=e[n])){var i=t.getRandomDiveZombie(),r=a.createFixBlockZombieData(i,p[0],p[1]);a.createZombie(r,!1,!1,!0),a.curWaveZombieDatas.add(r)}}if(t.lastBungeeZombie>0){for(e=[],o=t.lastBungeeMinColumn-1;o<9;o++)e.push([o,0]),e.push([o,1]),e.push([o,2]),e.push([o,3]),e.push([o,4]);for(e.sort(function(){return Math.random()-.5}),n=0;n<t.lastBungeeZombie;n++){var p;if(null!=(p=e[n])){var c=t.getRandomTombZombie();r=window.pzazombieManager.createFixBlockZombieData(c,p[0],p[1]),a.zombieDatas[p[1]].delete(r),l.pzaEffectManager.createBungeeZombieEffect(r),a.curWaveZombieDatas.add(r)}}}}},t.prototype.isLastWave=function(a){return a.wave===s.pzaGameState.survivalConfig.maxWave},t.prototype.onZombieDeath=function(a,t,e){if(e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)){var o=0;v.pzaLocalData.hasUseProp&&(o=1);var n=Date.now()-v.pzaLocalData.gameStartTimeStamp;n=Math.ceil(n/1e3),P.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt(s.pzaGameState.curChapter+5+""+s.pzaGameState.curPart)},{name:"is_Win",value:1},{name:"Use",value:o},{name:"time",value:n}),v.pzaLocalData.hasUseProp=!1,5==s.pzaGameState.curPart?(y.pzaGameManager.passPart(t.logicPos),v.pzaLocalBattleData.clearSurvivalBattleData(s.pzaGameState.curChapter)):(y.pzaGameManager.getCurrentGame().checkAchieve(!1),this.nextPart())}},t.prototype.showPreviewTip=function(a,t,e){a.word.string="\u751f\u5b58\u6a21\u5f0f\uff1a"+a.survivalPreviewTips[t-1],e>1?(a.flagWord.node.active=!0,a.flagWord.string=e-1+"\u9762\u65d7\u5e1c\u5b8c\u6210"):a.flagWord.node.active=!1},t.prototype.clickSelectPartInFailView=function(){if(v.pzaLocalData.data.preOpenSurvival)return v.pzaLocalData.data.preOpenSurvival=!1,v.pzaLocalData.addDirty("preOpenSurvival"),void M.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null);M.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.SURVIVAL_VIEW,function(){M.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.winDrop=function(){var a=r.pzaDropType.COIN_PACKAGE;return!v.pzaLocalData.data.preOpenSurvival&&v.pzaLocalData.passSurvival(s.pzaGameState.curChapter)&&(a=r.pzaDropType.SURVIVAL_TROPHY),"my"===m.pzaChannel.instance().channel&&m.pzaChannel.instance().getChannel().actSubmit(),a},t.prototype.showPassUiNoStar=function(){v.pzaLocalData.data.preOpenSurvival?(v.pzaLocalData.data.preOpenSurvival=!1,v.pzaLocalData.addDirty("preOpenSurvival"),M.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null)):M.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.SURVIVAL_VIEW,function(){M.pzaUIManager.baseShowBoardUI(c.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.beforeGameStart=function(a){S.pzaSoundManager.playBgm(S.pzaBGMName.LOADING),d.pzaCommonMask.showMask(),5!==a&&10!==a&&l.pzaEffectManager.createGroveEffect()},t.prototype.gameStart=function(a,t){var e=this;v.pzaLocalData.gameStartTimeStamp=Date.now(),P.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt(s.pzaGameState.curChapter+5+""+s.pzaGameState.curPart)}),this.beforeGameStart(a,t);var o=this.gameMode===s.pzaGameMode.SURVIVAL?v.pzaLocalBattleData.data.survivalBattleData[a-1]:v.pzaLocalBattleData.data.endlessBattleData[a-1];if(o)return window.pzaMapManager.initMapPos(!1),window.pzaplantManager.recoverSurvivalPlant(o),window.pzaMapManager.recoverMap(o),0==o.state?(y.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(u.pzaPlantSelectView);t&&t.survivalInit(o.selectPlants,null)}),window.pzaMapManager.openBattleUI()):1==o.state&&D.pzaTipManager.showPreviewTip(s.pzaGameState.curChapter,s.pzaGameState.curPart+1,s.pzaGameState.gameMode,null),void M.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.WARNING_VIEW,function(n){var i=n&&n.getComponent(h.pzaWarningView);i&&i.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){0==o.state&&(window.pzaMapManager.closeBattleUI(),window.pzaMapManager.fogEnter(function(){l.pzaEffectManager.createReadyWord(function(){e.playBgm(),d.pzaCommonMask.hideMask(),s.pzaGameState.gamePause=!1,window.pzaMapManager.openBattleUI(),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null)})})),1==o.state&&e.nextPart(!0)},function(){o.gameMode==s.pzaGameMode.SURVIVAL?v.pzaLocalBattleData.clearSurvivalBattleData(o.chapter):o.gameMode==s.pzaGameMode.SUR_ENDLESS&&v.pzaLocalBattleData.clearEndlessBattleData(o.chapter),y.pzaGameManager.removeBattleUI(),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_OVER,null),e.firstStart(a,t)},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f")});this.normalStartGameCall(a,t)},t.prototype.gameRestart=function(){s.pzaGameState.hadRevived=!1,v.pzaLocalBattleData.clearSurvivalBattleData(s.pzaGameState.curChapter),this.loadAndStart(s.pzaGameState.curChapter,1)},t.prototype.gameRecover=function(a,t){var e=this;M.pzaUIManager.removeBoardUI(),s.pzaGameState.midOut=!1,M.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.WARNING_VIEW,function(o){var n=o&&o.getComponent(h.pzaWarningView);n&&n.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){s.pzaGameState.hasPlantSelect?S.pzaSoundManager.playBgm(S.pzaBGMName.PRE_BGM):(s.pzaGameState.gamePause=!1,E.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),e.playBgm())},function(){var o=function(){y.pzaGameManager.removeBattleUI(),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_OVER,null),e.firstStart(a,t)};e.gameMode==s.pzaGameMode.SURVIVAL?v.pzaLocalBattleData.clearSurvivalBattleData(s.pzaGameState.curChapter):e.gameMode==s.pzaGameMode.SUR_ENDLESS&&v.pzaLocalBattleData.clearEndlessBattleData(s.pzaGameState.curChapter),s.pzaGameState.gameMode==s.pzaGameMode.SUR_ENDLESS?b.pzaRankMgr.queryMyRank(s.pzaGameState.curChapter,o):o()},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f")})},t.prototype.partFail=function(){a.prototype.partFail.call(this),v.pzaLocalBattleData.clearSurvivalBattleData(s.pzaGameState.curChapter),f.default.eventReport("\u751f\u5b58\u6a21\u5f0f-"+s.pzaGameState.curChapter+"-"+s.pzaGameState.curPart+"\u5931\u8d25");var t=0;v.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-v.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3),P.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt(s.pzaGameState.curChapter+5+""+s.pzaGameState.curPart)},{name:"is_Win",value:0},{name:"Use",value:t},{name:"time",value:e}),v.pzaLocalData.hasUseProp=!1},t.prototype.nextPart=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null),E.pzaUtil.changeGameSpeed(1),s.pzaGameState.gameWin=!0;var o=function(){s.pzaGameState.survivalPartWin(),e.gameMode===s.pzaGameMode.SURVIVAL?s.pzaGameState.survivalConfig=C.pzaSurvivalConfig.getSurvivaliConfig(s.pzaGameState.curChapter,s.pzaGameState.curPart):s.pzaGameState.survivalConfig=C.pzaSurvivalConfig.createEndlessConfig(s.pzaGameState.curChapter,s.pzaGameState.curPart),window.pzaMapManager.previewMap(function(){y.pzaGameManager.showBattleUI(c.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){d.pzaCommonMask.hideMask();var t=a&&a.getComponent(u.pzaPlantSelectView);s.pzaGameState.cardIsMove=!1,t&&t.survivalInit(null,function(){var a=i.pzaBattleData.saveData(0);s.pzaGameState.gameMode==s.pzaGameMode.SURVIVAL?v.pzaLocalBattleData.saveSurvivalBattleData(a):s.pzaGameState.gameMode==s.pzaGameMode.SUR_ENDLESS&&v.pzaLocalBattleData.saveEndlessBattleData(a),d.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){window.pzaMapManager.fogEnter(function(){l.pzaEffectManager.createReadyWord(function(){e.playBgm(),d.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),t&&t.initPlant(),s.pzaGameState.gamePause=!1,_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_RESUME,null),E.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed)})})})})})},!0)};if(a)o();else{var n=i.pzaBattleData.saveData(1);s.pzaGameState.gameMode==s.pzaGameMode.SURVIVAL?v.pzaLocalBattleData.saveSurvivalBattleData(n):s.pzaGameState.gameMode==s.pzaGameMode.SUR_ENDLESS&&v.pzaLocalBattleData.saveEndlessBattleData(n);var r="\u66f4\u591a\u50f5\u5c38\u6765\u88ad\uff01";null!=t&&(r+="\n"+t),"my"===m.pzaChannel.instance().channel&&m.pzaChannel.instance().getChannel().actSubmit();var p=!1;D.pzaTipManager.showGameTip(r,function(){p=!0,e.showGameTipNext(),o()}),setTimeout(function(){p||(p=!0,e.showGameTipNext(),o(),D.pzaTipManager.hideGuideTip())},6e3)}},t.prototype.showGameTipNext=function(){_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.CLOSE_REDTIP,null),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_PAUSE,null),window.pzaMapManager.closeBattleUI(),window.pzaMapManager.removeFog(),window.pzaMapManager.removeAllIceGround(),y.pzaGameManager.removeBattleUI(),d.pzaCommonMask.showMask(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.init(),S.pzaSoundManager.clearAllLoopAudio()},t.prototype.partWin=function(a,t){void 0===a&&(a=!1),void 0===t&&(t=null),_.pzaWorldEventManager.triggerEvent(_.pzaWorldEventType.GAME_OVER,null),y.pzaGameManager.removeBattleUI(),this.showPassUiNoStar(),f.default.eventReport("\u751f\u5b58\u6a21\u5f0f-"+s.pzaGameState.curChapter+"\u6210\u529f")},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u751f\u5b58\u6a21\u5f0f\u201d\uff0c"+["\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876"][s.pzaGameState.curChapter-1]+"\u7b2c"+s.pzaGameState.curPart+"\u9762\u65d7\u5e1c\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t}(z.pzaGameBase);e.pzaGameSurvival=T,cc._RF.pop()},{"../Battle/Data/pzaBattleData":"pzaBattleData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameBase":"pzaGameBase","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaSurvivalConfig":"pzaSurvivalConfig","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameTime:[function(a,t,e){"use strict";cc._RF.push(t,"6596eId2FRLVqFNHXeYVQ+4","pzaGameTime");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameTime=void 0;var r=a("../utils/pzaChannel"),p=a("./pzaLocalData"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.saveRemoteInterval=0,t}return n(t,a),t.prototype.update=function(a){if(this.saveRemoteInterval+=a,!p.pzaLocalData.gardenGuiding&&p.pzaLocalData.hasDirty&&p.pzaLocalData.localSaveData(),!r.pzaChannel.isConfRemote&&this.saveRemoteInterval>600){var t=r.pzaChannel.instance().getChannel();r.pzaChannel.saveToRemote(t.channelUserId,p.pzaLocalData.data),this.saveRemoteInterval=0}},i([s],t)}(cc.Component));e.pzaGameTime=c,cc._RF.pop()},{"../utils/pzaChannel":"pzaChannel","./pzaLocalData":"pzaLocalData"}],pzaGameTouch:[function(a,t,e){"use strict";cc._RF.push(t,"ac5c4atzNFKvqhf2EX+LIiv","pzaGameTouch");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameTouch=void 0;var r=cc._decorator,p=r.ccclass,l=(r.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node._touchListener.setSwallowTouches(!1)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this)},t.prototype.touchStart=function(a){this.touch(a,!0)},t.prototype.touchMove=function(a){this.touch(a,!1)},t.prototype.touch=function(a,t){var e=a&&a.getLocation();if(null!=e){var o=this.node.convertToNodeSpaceAR(e),n=!1;window.pzaplantManager.AllSunLight.forEach(function(a){a&&a.node&&(Math.abs(a.node.x-o.x)>50||Math.abs(a.node.y-o.y)>50||(a.clickSun(),n=!0))}),window.pzaMapManager.DropCoinSet.forEach(function(a){a&&a.node&&(Math.abs(a.node.x-o.x)>35||Math.abs(a.node.y-o.y)>35||(a.clickCoin(),n=!0))}),t&&n&&this.node._touchListener.setSwallowTouches(!0)}},t.prototype.touchEnd=function(){this.node._touchListener.setSwallowTouches(!1)},t.prototype.setSwllowTouch=function(){null!=this.node._touchListener&&this.node._touchListener.setSwallowTouches(!1)},i([p],t)}(cc.Component));e.pzaGameTouch=l,cc._RF.pop()},{}],pzaGameVaseEndless:[function(a,t,e){"use strict";cc._RF.push(t,"47c3chsWYZLA6hDmnpsTMNx","pzaGameVaseEndless");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameVaseEndless=void 0;var i=a("../Battle/Data/pzaDropType"),r=a("../Battle/pzaEffectManager"),p=a("../Battle/pzaGameState"),l=a("../View/Battle/pzaBattleUpView"),s=a("../View/pzaCommonMask"),c=a("../utils/pzaChannel"),u=a("../utils/pzakc"),d=a("./pzaCollisionManager"),h=a("./pzaGameVase"),m=a("./pzaLocalData"),f=a("./pzaNodeManager"),z=a("./pzaRankMgr"),y=a("./pzaSoundManager"),g=a("./pzaStatisticsMgr"),v=a("./pzaTipManager"),b=a("./pzaUtil"),S=a("./pzaWorldEventManager"),P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.endLessRound=0,t.changeRound=10,t.gameMode=p.pzaGameMode.VASE_ENDLESS,t.myRank=0,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u7834\u7f50\u8005\u65e0\u5c3d-"},t.prototype.getRankKey=function(){return"vase_endless_rank"},t.prototype.isEndless=function(){return!0},t.prototype.initPartProcess=function(a){a.partLabel.string=this.getConf(p.pzaGameState.curPart).name+(this.endLessRound>1?"-\u8bb0\u5f55\uff1a"+this.endLessRound:""),a.partProNode.active=!1,a.zombieHeadNode.active=!1},t.prototype.gameStart=function(){var a=this;m.pzaLocalData.gameStartTimeStamp=Date.now(),g.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt("10"+p.pzaGameState.curPart)}),s.pzaCommonMask.hideMask(),p.pzaGameState.hadRevived=!1,z.pzaRankMgr.queryLeaderBoardRank(z.pzaRankMgr.Vase_Rank_Key,function(t){a.endLessRound=0,p.pzaGameState.showSunUI=!1,a.myRank=t,a.startCall()})},t.prototype.showTip=function(a,t){void 0===a&&(a=null),b.pzaUtil.changeGameSpeed(1),p.pzaGameState.gameWin=!0;var e="\u6311\u6218\u66f4\u591a\u82b1\u74f6\uff01\n\u5df2\u5b8c\u6210"+this.endLessRound+"\u5173",o=m.pzaLocalData.data.vaseFlagCount;o&&(e+="\n\u5386\u53f2\u6700\u9ad8\u8bb0\u5f55\uff1a"+o,this.myRank&&this.myRank>0&&(e+=" \u5168\u670d\u6392\u540d"+this.myRank)),null!=a&&(e+="\n"+a),v.pzaTipManager.showGameTip(e,t.bind(this))},t.prototype.winDrop=function(){return null},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u76ca\u667a\u6a21\u5f0f\u201d\uff0c"+this.getConf(this.endLessId).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t.prototype.partWin=function(a,t){this.nextPart(a,t),"my"===c.pzaChannel.instance().channel&&c.pzaChannel.instance().getChannel().actSubmit()},t.prototype.doNextPart=function(){console.log("\u7834\u7f50\u8005\u4e0b\u4e00\u6ce2",this.endLessRound),this.endLessRound%this.changeRound==0&&console.log("\u8fc7\u4e86"+this.changeRound+"\u6ce2\u4e86,\u6389\u5de7\u514b\u529b\u5e76\u591a\u4e00\u4e2a\u5de8\u4eba"),y.pzaSoundManager.playBgm(y.pzaBGMName.PUZZLE_BGM),f.pzaNodeManager.getBattleUINode().getChildByName("BattleUpUI").getComponent(l.pzaBattleUpView).partLabel.string=this.getConf(p.pzaGameState.curPart).name+(this.endLessRound>0?"-\u8bb0\u5f55\uff1a"+this.endLessRound:""),p.pzaGameState.selectCard=null,p.pzaGameState.selectPlant=null,S.pzaWorldEventManager.triggerEvent(S.pzaWorldEventType.SELECT_CARD,null),S.pzaWorldEventManager.triggerEvent(S.pzaWorldEventType.CLEAR_SCREEN,null),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),u.default.removeNodeChildren(f.pzaNodeManager.getCardsNode()),window.pzazombieManager.lastWave=!1;for(var a=this.getConf(this.endLessId),t=u.default.strArr(a.zombie),e=u.default.strArr(a.plant),o=Math.floor((this.endLessRound+1)/this.changeRound);o>0;){o--;for(var n=0,i=0;i<t.length&&!(n>=2);i++){var r=t[i];if(r.startsWith("1-")){if((s=parseInt(r.substring(2)))>1){t[i]="1-"+(s-1),n++;continue}if(1===s){t.splice(i,1),i--,n++;continue}}else if(r.startsWith("26-")){var s=parseInt(r.substring(3));t[i]="26-"+(s+1),n++;continue}}}this.gameInit(a,t,e),p.pzaGameState.gamePause=!1,d.pzaCollisionManager.getInstance.setOn()},t.prototype.nextPart=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null),this.endLessRound++,s.pzaCommonMask.showMask(),z.pzaRankMgr.uploadLeaderboardScore(z.pzaRankMgr.Vase_Rank_Key,this.endLessRound,m.pzaLocalData.data.vaseFlagCount,function(){s.pzaCommonMask.hideMask(),e.endLessRound>m.pzaLocalData.data.vaseFlagCount&&(m.pzaLocalData.data.vaseFlagCount=e.endLessRound,m.pzaLocalData.addDirty("vaseFlagCount")),e.endLessRound%3!=0?e.showTip(null,e.doNextPart):r.pzaEffectManager.createDropCard(i.pzaDropType.COIN_PACKAGE,null,cc.v2(),function(){e.showTip(null,e.doNextPart)})})},t.prototype.partFail=function(){a.prototype.partFail.call(this),u.default.eventReport("\u7834\u7f50\u8005-\u65e0\u5c3d-"+p.pzaGameState.curPart+"\u5931\u8d25");var t=0;m.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-m.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3),g.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("10"+p.pzaGameState.curPart)},{name:"is_Win",value:0},{name:"Use",value:t},{name:"time",value:e}),m.pzaLocalData.hasUseProp=!1},t}(h.pzaGameVase);e.pzaGameVaseEndless=P,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../View/Battle/pzaBattleUpView":"pzaBattleUpView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCollisionManager":"pzaCollisionManager","./pzaGameVase":"pzaGameVase","./pzaLocalData":"pzaLocalData","./pzaNodeManager":"pzaNodeManager","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameVase:[function(a,t,e){"use strict";cc._RF.push(t,"ff73fmGXbpGz5Qjre4T4OU8","pzaGameVase");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameVase=void 0;var i=a("../Battle/Data/pzaDropType"),r=a("../Battle/Data/pzaJarData"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Battle/pzaEffectManager"),s=a("../Battle/pzaGameState"),c=a("../Load/pzaBundleObjectPool"),u=a("../Load/pzaPreLoadManager"),d=a("../MiniVase/pzaMiniVaseConf"),h=a("../View/pzaCommonMask"),m=a("../utils/pzaChannel"),f=a("../utils/pzaResMgr"),z=a("../utils/pzakc"),y=a("./pzaCollisionManager"),g=a("./pzaGameBase"),v=a("./pzaGameManager"),b=a("./pzaLocalData"),S=a("./pzaSoundManager"),P=a("./pzaStatisticsMgr"),C=a("./pzaUIManager"),D=a("./pzaWorldEventManager"),M=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=s.pzaGameMode.VASE,t.confMap=null,t.endLessId=0,t}return n(t,a),t.prototype.init=function(){if(null!==this.confMap)return this;var a=f.pzaResMgr.instance().getConf("a17");this.confMap=new Map;for(var t=0;t<a.length;t++){var e=new d.pzaMiniVaseConf(a[t]);this.confMap.set(e.id,e),e.endless&&(this.endLessId=e.id)}return this},t.prototype.getConf=function(a){return this.confMap.get(a)},t.prototype.getGameModeName=function(){return"\u7834\u7f50\u8005-"},t.prototype.playBgm=function(){S.pzaSoundManager.playBgm(S.pzaBGMName.PUZZLE_BGM)},t.prototype.initPartProcess=function(a){a.partLabel.string=this.getConf(s.pzaGameState.curPart).name,a.partProNode.active=!1,a.zombieHeadNode.active=!1},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS,a.cherryBombNode.active=!1,a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.clickSelectPartInFailView=function(){C.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PUZZLE_VIEW,function(){C.pzaUIManager.baseShowBoardUI(u.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.getAdPlantArr=function(){return[p.pzaPlantEnum.PLANTERN,p.pzaPlantEnum.SQUASH,p.pzaPlantEnum.ICE_SHROOM]},t.prototype.updatePartProcess=function(){},t.prototype.refreshNextWave=function(){},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.speedBtn.active=!0,t.shovelShowNode.active=!0,t.sunUIShowNode.active=!1,t.freePlantNode.active=!0,t.pauseBtn.active=!0,t.skipPartBtn.active=!1},t.prototype.gameInit=function(a,t,e){b.pzaLocalData.testMode=!1,window.pzaMapManager.initMapPos(!1),window.pzazombieManager.wave=1;for(var o=[],n=0;n<e.length;n++)if(2===(d=e[n].split("-")).length){var i=parseInt(d[0]);50===i&&(i=8);for(var p=parseInt(d[1]),l=0;l<p;l++)(m=new r.pzaJarData(0,0)).plantType=i,o.push(m)}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef3",a.id);var c=z.default.randomChooseIndex(o,a.green);for(n=0;n<a.green;n++)o[c[n]].jarType=r.pzaJarType.GREEN_JAR;var u=o.length;for(n=0;n<t.length;n++){var d;if(2===(d=t[n].split("-")).length){var h=parseInt(d[0]);for(p=parseInt(d[1]),l=0;l<p;l++){var m;(m=new r.pzaJarData(0,0)).zombieType=h,o.push(m)}}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef2",a.id)}if(s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS){var f=z.default.randomInt(1,3);for(n=u;n<u+f;n++)o[n].jarType=r.pzaJarType.ZOMBIE_JAR}if(s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS){var y=o[u-1];y.isSunLight=!0,y.plantType=null,y.zombieType=null,y.jarType=r.pzaJarType.BRONZE_JAR}z.default.shuffle(o);for(var g=a.min-1;g<a.max;g++)for(var v=0;v<5;v++){var S=o.shift();if(!S)return;S.xIndex=g,S.yIndex=v,S.hasColli=!0,window.pzaplantManager.createJar(S)}},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u76ca\u667a\u6a21\u5f0f\u201d\uff0c"+this.getConf(s.pzaGameState.curPart).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t.prototype.preLoad=function(a,t,e){this.init(),s.pzaGameState.init(2,t,this.gameMode,this.skipPartStar()),s.pzaGameState.partStar=0,s.pzaGameState.autoPickLock=!1,s.pzaGameState.isGameEnd=!1;var o=[new u.pzaResourceDetail(u.pzaResourceUrl.SUN),new u.pzaResourceDetail(u.pzaResourceUrl.CLEANER_CAR),new u.pzaResourceDetail(u.pzaResourceUrl.WORD_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.SHADOW),new u.pzaResourceDetail(u.pzaResourceUrl.SHOVEL_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.PLANT_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.DROP_COIN),new u.pzaResourceDetail(u.pzaResourceUrl.DROP_CARD),new u.pzaResourceDetail(u.pzaResourceUrl.DROP_PLANT_CARD),new u.pzaResourceDetail(u.pzaResourceUrl.ZOMBIE_CLOTHER_FALL_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.NORMAL_ASHES_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.SMOKE_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.JAR),new u.pzaResourceDetail(u.pzaResourceUrl.HAMMER_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.FOG_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.TOMB),new u.pzaResourceDetail(u.pzaResourceUrl.DIRT_EFFECT),new u.pzaResourceDetail(u.pzaResourceUrl.TOMB),new u.pzaResourceDetail(u.pzaResourceUrl.PLANT_ICON,u.pzaResourceType.SpriteFrameDir),new u.pzaResourceDetail(u.pzaResourceUrl.ZOMBIE_ICON,u.pzaResourceType.SpriteFrameDir)],n=this.getConf(t);if(n){var i=z.default.strArr(n.zombie),r=z.default.strArr(n.plant);if(i&&r){for(var p=0;p<i.length;p++)if(2===(h=i[p].split("-")).length){var d=u.pzaPreLoadManager.getZombieUrl(parseInt(h[0]));null!=d?(o.push(new u.pzaResourceDetail(d)),null!=(f=u.pzaPreLoadManager.getSubResources(d))&&o.concat(f)):console.error("zombieUrl",h[0])}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef1",t,i[p]);for(p=0;p<r.length;p++){var h;if(2===(h=r[p].split("-")).length){var m=parseInt(h[0]);50===m&&(m=8);var f,y=u.pzaPreLoadManager.getPlantUrl(m);null!=y?(o.push(new u.pzaResourceDetail(y)),null!=(f=u.pzaPreLoadManager.getSubResources(y))&&o.concat(f)):console.error("theur",m)}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef1",t,r[p])}C.pzaUIManager.showLoading(),l.pzaEffectManager.createGroveEffect(),window.pzaplantManager.init(),window.pzazombieManager.init(),window.pzaMapManager.init(2,t),S.pzaSoundManager.clearAllLoopAudio(),this.gameInit(n,i,r),c.pzaBundleObjectPool.preLoadSubResource(o,function(){C.pzaUIManager.hideLoading(e)},function(a){C.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*a)))})}else z.default.err("\u7834\u7f50\u8005\u914d\u7f6e\u9519\u8bef",t)}else z.default.err("\u7834\u7f50\u8005id\u9519\u8bef",t)},t.prototype.startCall=function(){S.pzaSoundManager.playBgm(S.pzaBGMName.PUZZLE_BGM),window.pzaMapManager.openBattleUI(),s.pzaGameState.gamePause=!1,y.pzaCollisionManager.getInstance.setOn()},t.prototype.gameStart=function(){b.pzaLocalData.gameStartTimeStamp=Date.now(),P.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt("11"+s.pzaGameState.curPart)}),h.pzaCommonMask.hideMask(),window.pzaGuideManager.guideStart(this.startCall.bind(this)),window.pzaGuideManager.guideShow(this.startCall.bind(this)),s.pzaGameState.hadRevived=!0},t.prototype.showPassUiNoStar=function(){C.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.PUZZLE_VIEW,function(){C.pzaUIManager.baseShowBoardUI(u.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.winDrop=function(){var a=i.pzaDropType.COIN_PACKAGE;return b.pzaLocalData.passVaseMode(s.pzaGameState.curPart)&&(a=i.pzaDropType.VASE_TROPHY),"my"===m.pzaChannel.instance().channel&&m.pzaChannel.instance().getChannel().actSubmit(),a},t.prototype.partWin=function(){D.pzaWorldEventManager.triggerEvent(D.pzaWorldEventType.GAME_OVER,null),v.pzaGameManager.removeBattleUI(),this.showPassUiNoStar(),z.default.eventReport("\u7834\u7f50\u8005\u6a21\u5f0f-"+s.pzaGameState.curPart+"\u6210\u529f");var a=0;b.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-b.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3),P.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("11"+s.pzaGameState.curPart)},{name:"is_Win",value:1},{name:"Use",value:a},{name:"time",value:t}),b.pzaLocalData.hasUseProp=!1},t.prototype.partFail=function(){a.prototype.partFail.call(this),z.default.eventReport("\u7834\u7f50\u8005\u6a21\u5f0f-"+s.pzaGameState.curPart+"\u5931\u8d25");var t=0;b.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-b.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3),P.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("11"+s.pzaGameState.curPart)},{name:"is_Win",value:0},{name:"Use",value:t},{name:"time",value:e}),b.pzaLocalData.hasUseProp=!1},t.prototype.onZombieDeath=function(a,t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o=null),e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.checkAllZombieDeath(a))if(a.lastWave){var n=!1;window.pzaplantManager.pzaJarMap.forEach(function(a){null!=a&&null!=a.jarData&&null!=a.jarData.zombieType&&(n=!0)}),n||v.pzaGameManager.passPart(t.logicPos)}else if(window.pzaplantManager.pzaJarMap.size<=0){if(s.pzaGameState.gameMode===s.pzaGameMode.VASE)return void v.pzaGameManager.passPart(t.logicPos);if(s.pzaGameState.gameMode===s.pzaGameMode.VASE_ENDLESS)return void v.pzaGameManager.getCurrentGame().partWin();a.specialNextWaveTime=1}},t}(g.pzaGameBase);e.pzaGameVase=M,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaJarData":"pzaJarData","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../MiniVase/pzaMiniVaseConf":"pzaMiniVaseConf","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaCollisionManager":"pzaCollisionManager","./pzaGameBase":"pzaGameBase","./pzaGameManager":"pzaGameManager","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUIManager":"pzaUIManager","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGameWinView:[function(a,t,e){"use strict";cc._RF.push(t,"f02d8BZIw9Bu48fazOB3R6s","pzaGameWinView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameWinView=void 0;var r=a("../../Battle/Data/pzaGuideType"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaLocalData"),u=a("../../Common/pzaSoundManager"),d=a("../../Common/pzaSpineController"),h=a("../../Common/pzaUIManager"),m=a("../../Common/pzaUtil"),f=a("../../Common/pzaWorldEventManager"),z=a("../../Garden/pzaGardenView"),y=a("../../Load/pzaPreLoadManager"),g=a("../../utils/pzaChannel"),v=cc._decorator,b=v.ccclass,S=v.property,P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.stars=[],t.mainViewBtn=null,t.nextBtn=null,t.nextTxt=null,t.plantTarget=null,t.carTarget=null,t}return n(t,a),t.prototype.onEnable=function(){var a=this;this.stars.forEach(function(a){null!=a&&(a.node.active=!1)});var t=p.pzaGameState.partStar;t>0&&this.showStarAni(0,function(){t>1&&a.showStarAni(1,function(){t>2&&a.showStarAni(2,null)})}),c.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_3_4||c.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_4_4||c.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_5_1||c.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_GARDEN_5_4?(this.mainViewBtn.active=!1,this.nextBtn.x=0,this.nextTxt.string="\u7ee7\u7eed"):(this.mainViewBtn.active=!0,this.nextBtn.x=211,this.nextTxt.string="\u4e0b\u4e00\u5173");var e;e=1==p.pzaGameState.curChapter||3==p.pzaGameState.curChapter||5==p.pzaGameState.curChapter||6==p.pzaGameState.curChapter||8==p.pzaGameState.curChapter||10==p.pzaGameState.curChapter?p.pzaGameState.lossPlantCount>=4:p.pzaGameState.lossPlantCount>=6,m.pzaUtil.switchGraySprite(this.plantTarget,e),m.pzaUtil.switchGraySprite(this.carTarget,p.pzaGameState.lossCar)},t.prototype.showStarAni=function(a,t){var e=this.stars[a];null!=e?(e.node.active=!0,e.playAnimation("idle",!1,null,t),u.pzaSoundManager.playAudio("getstar")):t&&t()},t.prototype.clickMainView=function(){this.close(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),s.pzaGameManager.removeBattleUI(),h.pzaUIManager.baseShowBoardUI(y.pzaResourceUrl.HOME_SELECT_VIEW,null)},t.prototype.clickShare=function(){g.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){console.log("gamewinView share sucess")})},t.prototype.clickNext=function(){this.close(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),s.pzaGameManager.removeBattleUI(),c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_3_4&&c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_4_4&&c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_5_1?c.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_GARDEN_5_4?h.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.PART_SELECT_VIEW,function(){h.pzaUIManager.baseShowBoardUI(y.pzaResourceUrl.HOME_SELECT_VIEW,null)}):h.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.GARDEN_VIEW,function(a){var t=a&&a.getComponent(z.pzaGardenView);t&&t.init(),h.pzaUIManager.baseShowBoardUI(y.pzaResourceUrl.HOME_SELECT_VIEW,null),u.pzaSoundManager.playBgm(u.pzaBGMName.GARDEN)}):h.pzaUIManager.baseShowPopUI(y.pzaResourceUrl.SHOP_VIEW,function(){h.pzaUIManager.baseShowBoardUI(y.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([S({displayName:"\u661f\u661f",type:[d.pzaSpineController]})],t.prototype,"stars",void 0),i([S({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae",type:cc.Node})],t.prototype,"mainViewBtn",void 0),i([S({displayName:"\u4e0b\u4e00\u5173\u6309\u94ae",type:cc.Node})],t.prototype,"nextBtn",void 0),i([S({displayName:"\u4e0b\u4e00\u5173\u6587\u6848",type:cc.Label})],t.prototype,"nextTxt",void 0),i([S({displayName:"\u690d\u7269\u76ee\u6807",type:cc.Sprite})],t.prototype,"plantTarget",void 0),i([S({displayName:"\u63a8\u8f66\u76ee\u6807",type:cc.Sprite})],t.prototype,"carTarget",void 0),i([b],t)}(cc.Component);e.pzaGameWinView=P,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Garden/pzaGardenView":"pzaGardenView","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel"}],pzaGameZJ:[function(a,t,e){"use strict";cc._RF.push(t,"15832eoQl1B6591qjfBFLwF","pzaGameZJ");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameZJ=void 0;var i=a("../Battle/Data/pzaBaseData"),r=a("../Battle/Data/pzaBattleData"),p=a("../Battle/Data/pzaDropType"),l=a("../Battle/Data/pzaPlantEnum"),s=a("../Battle/Data/pzaZombieEnum"),c=a("../Battle/Zombie/pzaBaseZombie"),u=a("../Battle/pzaEffectManager"),d=a("../Battle/pzaGameState"),h=a("../Battle/pzaSunLight"),m=a("../Load/pzaBundleObjectPool"),f=a("../Load/pzaPreLoadManager"),z=a("../View/Battle/pzaPlantSelectView"),y=a("../View/pzaCommonMask"),g=a("../View/pzaWarningView"),v=a("../utils/pzaChannel"),b=a("../utils/pzaResMgr"),S=a("../utils/pzakc"),P=a("./pzaGameBase"),C=a("./pzaGameCommonPool"),D=a("./pzaGameConfig"),M=a("./pzaGameManager"),E=a("./pzaGamePartConfig"),_=a("./pzaLocalData"),T=a("./pzaNodeManager"),w=a("./pzaRankMgr"),A=a("./pzaSoundManager"),B=a("./pzaStatisticsMgr"),G=a("./pzaTipManager"),O=a("./pzaUIManager"),I=a("./pzaUtil"),N=a("./pzaWorldEventManager"),R=a("./pzaZJPlantConf"),L=a("./pzaZJRankConf"),k=a("./pzaZJZombieConf"),Z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.endLessRound=0,t.gameMode=d.pzaGameMode.ZaJiao,t.toolButtonUseTimes=1,t.confMap=null,t.normalPlantArr=[],t.goldPlantArr=[],t.diamodPlantArr=[],t.adPlantTimes=1,t.rankCount=0,t.plantIdx=0,t.autoSunCreate=function(a){m.pzaBundleObjectPool.requestInstantByUrl2(f.pzaResourceUrl.SUN,function(t,e){if(null==t&&null!=e){e.setParent(T.pzaNodeManager.getUpBgNode());var o=e.getComponent(h.pzaSunLight);o&&o.init2(a,2,50,!0),window.pzaplantManager.AllSunLight.add(o)}else console.error(t)})},t}return n(t,a),t.prototype.init=function(){if(null!==this.confMap)return this;var a=b.pzaResMgr.instance().getConf("a23");this.rankCount=a.length,_.pzaLocalData.isNoZj&&(this.rankCount=0),this.confMap=new Map;for(var t=0;t<a.length;t++){var e=new L.pzaZJRankConf(a[t]);this.confMap.set(e.id,e)}return this.initZombieConf(),this.initPlantConf(),this},t.prototype.isEndless=function(){return!!d.pzaGameState.isZjMode()&&!!this.getRankConf(d.pzaGameState.curPart).endLess},t.prototype.initZombieConf=function(){for(var a=b.pzaResMgr.instance().getConf("a22"),t=0;t<a.length;t++){var e=new k.pzaZJZombieConf(a[t]);D.pzaGameConfig.ZombieConfigMap.set(e.zombieType,e)}},t.prototype.initPlantConf=function(){for(var a=b.pzaResMgr.instance().getConf("a21"),t=0;t<a.length;t++){var e=new R.pzaZJPlantConf(a[t]);e.completed&&(D.pzaGameConfig.PlantConfigMap.set(e.plantType,e),3===e.senior?this.goldPlantArr.push(e.plantType):4===e.senior?this.diamodPlantArr.push(e.plantType):e.plantType!==l.pzaPlantEnum.RandomPlantBox&&this.normalPlantArr.push(e.plantType))}},t.prototype.getRankConf=function(a){return this.confMap.get(a)},t.prototype.getAdPlantArr=function(){return this.adPlantTimes>0?S.default.clone(this.goldPlantArr):[]},t.prototype.getRandomBoxCard=function(a,t){var e=[];e=Math.random()<.9?S.default.randomChoose(this.normalPlantArr,this.normalPlantArr.length-1):S.default.randomChoose(this.goldPlantArr.concat(this.diamodPlantArr),this.goldPlantArr.length+this.diamodPlantArr.length-1);var o=""+a+t;if(window.pzaplantManager.plantEnvDataMap.has(o)){var n=[l.pzaPlantEnum.FLOWER_POT,l.pzaPlantEnum.SunPot,l.pzaPlantEnum.CATLITTERPOT,l.pzaPlantEnum.SpikeChomper,l.pzaPlantEnum.IceSpike,l.pzaPlantEnum.SPIKEROCK,l.pzaPlantEnum.SPIKEWEED];e=e.filter(function(a){return!n.includes(a)})}if(window.pzaplantManager.pumpkinDataMap.has(o)){var i=[l.pzaPlantEnum.PUMPKIN,l.pzaPlantEnum.PumpkinPurple,l.pzaPlantEnum.PumpkinPurpleFire];e=e.filter(function(a){return!i.includes(a)})}if(window.pzaplantManager.notTargetMap.has(o)){var r=[l.pzaPlantEnum.SunBean];e=e.filter(function(a){return!r.includes(a)})}var p=[l.pzaPlantEnum.COB_CANNON,l.pzaPlantEnum.HotDog,l.pzaPlantEnum.DoomCannon,l.pzaPlantEnum.PeaCannon],s=!0;if(window.pzaplantManager.plantDataMap.get(o)&&(s=!1),s){var c=""+(a+1)+t;if(window.pzaplantManager.plantDataMap.get(c)||a>=8){var u=""+(a-1)+t,d=window.pzaplantManager.plantDataMap.get(u);(0==a||d)&&(s=!1)}}return s||(e=e.filter(function(a){return!p.includes(a)})),e[0]},t.prototype.createAdBomb=function(){window.pzaplantManager.createAdJalapeno()},t.prototype.getPlantArr=function(a,t){var e=this.getRankConf(t),o=[];return null!=e.plant&&(o=e.plant.split(",")).forEach(function(a,t){o[t]=parseInt(a)}),v.pzaChannel.isConfRemote,o},t.prototype.getZombieTypeArr=function(a,t){var e=this.getRankConf(t),o=[];return null!=e.type&&(o=e.type.split(",")).forEach(function(a,t){o[t]=parseInt(a)}),o},t.prototype.winDrop=function(){"my"===v.pzaChannel.instance().channel&&v.pzaChannel.instance().getChannel().actSubmit();var a=this.getRankConf(d.pzaGameState.curPart);if(a.endLess)return this.endLessRound>_.pzaLocalData.data.zaJiaoPassPart&&(_.pzaLocalData.data.zaJiaoPassPart=this.endLessRound),_.pzaLocalData.data.zaJiaoRound=this.endLessRound,_.pzaLocalData.addDirty("zaJiaoRound"),null;var t=p.pzaDropType.COIN_PACKAGE,e=a.trophyid;return _.pzaLocalData.passCreativeMode(e)&&(t=p.pzaDropType.ZAJIAO_TROPHY),t},t.prototype.partFail=function(){a.prototype.partFail.call(this),S.default.eventReport("\u6742\u4ea4\u6a21\u5f0f-"+d.pzaGameState.curChapter+"-"+d.pzaGameState.curPart+"\u5931\u8d25");var t=0;_.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-_.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3),B.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("300"+d.pzaGameState.curPart)},{name:"is_Win",value:0},{name:"Use",value:t},{name:"time",value:e}),_.pzaLocalData.hasUseProp=!1,C.pzaGameCommonPool.clear()},t.prototype.partWin=function(){N.pzaWorldEventManager.triggerEvent(N.pzaWorldEventType.GAME_OVER,null),M.pzaGameManager.removeBattleUI(),this.showPassUiNoStar(),S.default.eventReport("\u6742\u4ea4\u6a21\u5f0f-"+d.pzaGameState.curChapter+"-"+d.pzaGameState.curPart+"\u6210\u529f");var a=0;_.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-_.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3),B.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("300"+d.pzaGameState.curPart)},{name:"is_Win",value:1},{name:"Use",value:a},{name:"time",value:t}),_.pzaLocalData.hasUseProp=!1,C.pzaGameCommonPool.clear()},t.prototype.showPassUiNoStar=function(){O.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.CREATIVE_VIEW,function(){O.pzaUIManager.baseShowBoardUI(f.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.clickSelectPartInFailView=function(){O.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.CREATIVE_VIEW,function(){O.pzaUIManager.baseShowBoardUI(f.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.beforeLoad=function(a,t){d.pzaGameState.partStar=0,this.adPlantTimes=1;var e=this.getRankConf(t);e.endLess?(this.toolButtonUseTimes=3,this.adPlantTimes=2,e.density=L.pzaZJRankConf.createZombieDensity(this.endLessRound+1).toString(),console.log("\u5bc6\u5ea6",e.density)):this.toolButtonUseTimes=1,v.pzaChannel.isConfRemote&&(this.toolButtonUseTimes=0)},t.prototype.gameRestart=function(){this.getRankConf(d.pzaGameState.curPart).endLess&&(this.endLessRound=0,_.pzaLocalData.data.zaJiaoRound=0,_.pzaLocalBattleData.clearZjEndlessBattleData(d.pzaGameState.curPart)),a.prototype.gameRestart.call(this),_.pzaLocalData.data.zaJiaoRestartTimes++,_.pzaLocalData.addDirty("zaJiaoRestartTimes")},t.prototype.beforeGameStart=function(){A.pzaSoundManager.playBgm(A.pzaBGMName.LOADING),y.pzaCommonMask.showMask(),u.pzaEffectManager.createGroveEffect()},t.prototype.initMapPlantZombie=function(a,t){window.pzaMapManager.init_zajiao(!1,a,t),window.pzaplantManager.init(),window.pzazombieManager.init()},t.prototype.zombieDeathDrop=function(){},t.prototype.showPreviewTip=function(a,t,e){var o=this.getRankConf(e).name;a.word.string=o,a.flagWord.node.active=!1,this.isEndless()&&this.endLessRound>=1&&(a.flagWord.node.active=!0,a.flagWord.string=this.endLessRound+"\u9762\u65d7\u5e1c\u5b8c\u6210")},t.prototype.firstStart=function(t,e,o){void 0===o&&(o=!1),o&&(_.pzaLocalData.data.zaJiaoRound=0,this.endLessRound=0,_.pzaLocalData.addDirty("zaJiaoRound"),_.pzaLocalBattleData.clearZjEndlessBattleData(e)),a.prototype.firstStart.call(this,t,e)},t.prototype.gameStart=function(a,t){var e=this;B.pzaStatisticsMgr.sendEvent("System",{name:"system",value:15}),B.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("300"+d.pzaGameState.curPart)},{name:"is_Win",value:2},{name:"Use",value:2}),this.beforeGameStart(a,t);var o=this.getRankConf(t);o.endLess&&_.pzaLocalBattleData.data.zjEndlessBattleData[t-1]?(this.endLessRound=_.pzaLocalData.data.zaJiaoRound,o.density=L.pzaZJRankConf.createZombieDensity(this.endLessRound+1).toString(),console.log("\u5bc6\u5ea61",o.density)):this.endLessRound=0;var n=function(){window.pzaMapManager.previewMap(function(){M.pzaGameManager.showBattleUI(f.pzaResourceUrl.PLANT_SELECT_VIEW,function(o){y.pzaCommonMask.hideMask();var n=o&&o.getComponent(z.pzaPlantSelectView);n.zjGameInit(e.getPlantArr(a,t),function(){y.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){u.pzaEffectManager.createReadyWord(function(){y.pzaCommonMask.hideMask(),window.pzaMapManager.closeBattleUI(),window.pzaMapManager.openBattleUI(),n.initPlant(),d.pzaGameState.gamePause=!1,N.pzaWorldEventManager.triggerEvent(N.pzaWorldEventType.GAME_RESUME,null),e.playBgm(),d.pzaGameState.autoPickLock=!0,e.isEndless()&&w.pzaRankMgr.queryLeaderBoardRank(w.pzaRankMgr.zj_Rank_Key,function(a){var t="\u4f60\u80fd\u575a\u6301\u5230\u7b2c\u51e0\u6ce2\u653b\u51fb\u5462\uff1f";_.pzaLocalData.data.zaJiaoPassPart>0&&(t+="\n\u5386\u53f2\u6700\u9ad8\u65d7\u5e1c\uff1a"+_.pzaLocalData.data.zaJiaoPassPart),null!=a&&a>0&&(t+=" \u5168\u670d\u6392\u540d\uff1a"+a),G.pzaTipManager.showGameTip(t)})})})})})},!0)};if(this.endLessRound>0){var i=_.pzaLocalBattleData.data.zjEndlessBattleData[t-1];window.pzaplantManager.recoverSurvivalPlant(i),this.adPlantTimes=i.adPlantTimes,this.toolButtonLeftArr=i.toolButtonLeftArr,d.pzaGameState.hadRevived=i.hasRevive,i.sunLightCount&&d.pzaGameState.getStorageSun(i.sunLightCount),window.pzaMapManager.recoverMap(i),0==i.state?(M.pzaGameManager.showBattleUI(f.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(z.pzaPlantSelectView);t&&t.survivalInit(i.selectPlants,null)}),window.pzaMapManager.openBattleUI()):1==i.state&&G.pzaTipManager.showPreviewTip(d.pzaGameState.curChapter,d.pzaGameState.curPart,d.pzaGameState.gameMode,null);var r=0,p=0;(d.pzaGameState.isCreativeVaseMode()||d.pzaGameState.isCreativeTrad()||d.pzaGameState.isZjMode())&&(p=t,r=_.pzaLocalData.data.creativeItemState[p]<3?0:_.pzaLocalData.data.creativeItemState[p]%2==1?2:1),O.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.WARNING_VIEW,function(a){y.pzaCommonMask.hideMask();var t=function(){window.pzaplantManager.clearAllPlant(),_.pzaLocalData.data.autoPickLeft=d.pzaGameState.autoPickLeft,_.pzaLocalData.addDirty("autoPickLeft"),M.pzaGameManager.removeBattleUI(),N.pzaWorldEventManager.triggerEvent(N.pzaWorldEventType.GAME_OVER,null),I.pzaUtil.changeGameSpeed(1),M.pzaGameManager.getCurrentGame().gameRestart(),_.pzaLocalData.data.creativeItemState[p]++,_.pzaLocalData.addDirty("creativeItemState")},e=a&&a.getComponent(g.pzaWarningView);e&&e.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){n()},function(){1==r?v.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){n()},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):2==r?"ks"==v.pzaChannel.instance().channel||"tt"==v.pzaChannel.instance().channel||"my"==v.pzaChannel.instance().channel?v.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){n()},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):v.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"27"},function(){t()},function(){n()}):t()},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f",!1,!1,r)})}else n()},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=this.getRankConf(d.pzaGameState.curPart);if(null!=t){a.maxWave=t.wave;for(var e=Math.floor(a.maxWave/10),o=0;o<a.partFlags.length;o++){var n=a.partFlags[o];o+1>e?n.active=!1:(n.active=!0,n.setPosition(-315*(o+1)/e-30,42))}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0,t.endLess?a.partLabel.string=t.name+(this.endLessRound?" \u5b8c\u6210\u7b2c"+this.endLessRound+"\u9762\u65d7\u5e1c":""):a.partLabel.string=t.name}},t.prototype.updatePartProcess=function(t){a.prototype.updatePartProcess.call(this,t);var e=Math.floor(window.pzazombieManager.wave/10)-1;if(!(e<0||e>3)){var o=t.partFlags[e];cc.Tween.stopAllByTarget(o),cc.tween(o).to(.2,{y:72}).start()}},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=0==this.toolButtonUseTimes||!(!this.toolButtonLeftArr||!this.toolButtonLeftArr[0]),a.cherryBombNode.active=0==this.toolButtonUseTimes||!(!this.toolButtonLeftArr||!this.toolButtonLeftArr[3]),a.autoPickNode.active=!1,a.clearCDNode.active=0==this.toolButtonUseTimes||!(!this.toolButtonLeftArr||!this.toolButtonLeftArr[2])},t.prototype.showBattleDown=function(a){a.gameProp.bombAni_1="4idle1",a.gameProp.bombAni_2="4idle2",a.pauseBtn.active=!0,a.shovelShowNode.active=!0,a.guideArrow.active=!1,a.speedBtn.active=!0,a.sunUIShowNode.active=!0,a.freePlantNode.active=this.getAdPlantArr().length>0,a.skipPartBtn.active=!1,a.gameProp.node.active=!0},t.prototype.refreshNextWave=function(t,e){if(a.prototype.refreshNextWave.call(this,t,e),!t.lastWave){var o=this.getRankConf(d.pzaGameState.curPart),n=o.wave==t.wave+1;if((t.wave+1)%10==0||n){if(!t.hasShowRedTip)return void((t.zombieMap.size<=0||t.curWaveTime>=E.pzaWaveConfig.activeRedTipTime)&&(null!=o&&o.wave==t.wave+1&&(n=!0),t.showBigWaveTip(n,!1)))}else if(0!=t.wave&&t.nextWaveTime>E.pzaWaveConfig.preRefreshTime&&t.getCurWaveLeftHp()<=t.preRefreshHp)return void(t.nextWaveTime=E.pzaWaveConfig.preRefreshTime);t.curWaveTime<E.pzaWaveConfig.minRefreshTime||t.nextWaveTime>0||this.createWave(t)}},t.prototype.createWave=function(t){a.prototype.createWave.call(this,t),1==t.wave&&A.pzaSoundManager.playAudio("awooga"),t.nextWaveTime=E.pzaWaveConfig.getWaveRandomTime();var e=this.getRankConf(d.pzaGameState.curPart);if(!(null==e||e.wave<t.wave)){e.wave==t.wave&&(t.lastWave=!0);var o=0;e.endLess&&(o=1);var n=L.pzaZJRankConf.getRandomWaveZombies(d.pzaGameState.curPart,t.wave,!0,window.pzaMapManager.getIceYCount(),o,d.pzaGameState.redLeft,e,this.endLessRound);if(null!=n){var i=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||i.indexOf(a.yIndex)>=0||i.push(a.yIndex)});for(var r=d.pzaGameState.map.getMapRow(),p=!0,l=[],c=[],u=0;u<r;u++)c.push(u);c.sort(function(){return Math.random()-.5});var h=0;n.forEach(function(a){var e=window.pzaMapManager.getRandomWayIndex(h,a,c);if(h++,a==s.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,l);if(null==o)return;l.push(o);var n=o.split("-"),r=t.createFixBlockZombieData(a,parseInt(n[0]),parseInt(n[1]));return t.createZombie(r),void t.curWaveZombieDatas.add(r)}a==s.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&i.length>0&&(e=i.shift());var u=t.createZombieData(a,e);!p&&u.logicPos&&(u.logicPos.x+=I.pzaUtil.getRandomFloatNum(.2,1)*d.pzaGameState.map.getBlockWidth()),t.createZombie(u),t.curWaveZombieDatas.add(u),p=!1})}}},t.prototype.lastTombWaterZombie=function(){},t.prototype.createPreviewZombie=function(a,t,e){var o=S.default.randomInt(9,10),n=this.getRankConf(e);if(null!=n){var r=L.pzaZJRankConf.getPrevewZombies(e,o,n);if(null!=r){var p=[];p.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),40)),p.push(cc.v2(1925+I.pzaUtil.getRandomFloatNum(-25,25),40)),p.push(cc.v2(2025+I.pzaUtil.getRandomFloatNum(-25,25),40)),p.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),90)),p.push(cc.v2(1925+I.pzaUtil.getRandomFloatNum(-25,25),90)),p.push(cc.v2(2025+I.pzaUtil.getRandomFloatNum(-25,25),90)),p.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),140)),p.push(cc.v2(1925+I.pzaUtil.getRandomFloatNum(-25,25),140)),p.push(cc.v2(2025+I.pzaUtil.getRandomFloatNum(-25,25),140)),p.push(cc.v2(1750+I.pzaUtil.getRandomFloatNum(-25,25),190)),p.push(cc.v2(1925+I.pzaUtil.getRandomFloatNum(-25,25),190)),p.push(cc.v2(2025+I.pzaUtil.getRandomFloatNum(-25,25),190)),p.push(cc.v2(1680+I.pzaUtil.getRandomFloatNum(-20,20),240)),p.push(cc.v2(1780+I.pzaUtil.getRandomFloatNum(-20,20),240)),p.push(cc.v2(1880+I.pzaUtil.getRandomFloatNum(-20,20),240)),p.push(cc.v2(1680+I.pzaUtil.getRandomFloatNum(-20,20),290)),p.push(cc.v2(1780+I.pzaUtil.getRandomFloatNum(-20,20),290)),p.push(cc.v2(1880+I.pzaUtil.getRandomFloatNum(-20,20),290)),p.push(cc.v2(1680+I.pzaUtil.getRandomFloatNum(-20,20),340)),p.push(cc.v2(1780+I.pzaUtil.getRandomFloatNum(-20,20),340)),p.push(cc.v2(1880+I.pzaUtil.getRandomFloatNum(-20,20),340)),p.push(cc.v2(1670+I.pzaUtil.getRandomFloatNum(-30,30),390)),p.push(cc.v2(1770+I.pzaUtil.getRandomFloatNum(-30,30),390)),p.push(cc.v2(1670+I.pzaUtil.getRandomFloatNum(-30,30),440)),p.push(cc.v2(1770+I.pzaUtil.getRandomFloatNum(-30,30),440)),p.push(cc.v2(1670+I.pzaUtil.getRandomFloatNum(-30,30),490)),p.push(cc.v2(1770+I.pzaUtil.getRandomFloatNum(-30,30),490)),p.push(cc.v2(1660+I.pzaUtil.getRandomFloatNum(-20,20),540)),p.push(cc.v2(1700+I.pzaUtil.getRandomFloatNum(-20,20),540)),p.sort(function(){return Math.random()-.5}),d.pzaGameState.gamePause=!0;for(var l=function(t,e){var o=f.pzaPreLoadManager.getZombieUrl(t);m.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(o,n){if(null==o&&null!=n){n.setParent(a.previewZombieNode),n.setPosition(e),n.zIndex=-e.y;var r=n.getComponent(c.pzaBaseZombie),p=new i.pzaBaseData(null,t);p.hp=1,p.logicPos=e,r&&r.preview(p,a.previewShadowNode,1),a.PreviewZombies.add(r)}else console.error(o,"\u50f5\u5c38\u4e0d\u5b58\u5728",t)})},u=0;u<r.length;u++){var h=r[u],z=p[u>=p.length?Math.floor(Math.random()*p.length):u];h==s.pzaZombieEnum.BUNGEE_ZOMBIE&&(z=5==t?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),l(h,z)}A.pzaSoundManager.playBgm(A.pzaBGMName.PRE_BGM)}}},t.prototype.playBgm=function(){A.pzaSoundManager.playBgm(A.pzaBGMName.CHAPTER_1)},t.prototype.isLastWave=function(a){return a.wave>=this.getRankConf(d.pzaGameState.curPart).wave},t.prototype.doNextRound=function(a){var t=this,e=function(){t.beforeGameStart(1,d.pzaGameState.curPart),window.pzaMapManager.previewMap(function(){M.pzaGameManager.showBattleUI(f.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){y.pzaCommonMask.hideMask();var e=a&&a.getComponent(z.pzaPlantSelectView);e.zjGameInit(t.getPlantArr(1,d.pzaGameState.curPart),function(){y.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){u.pzaEffectManager.createReadyWord(function(){y.pzaCommonMask.hideMask(),window.pzaMapManager.closeBattleUI(),window.pzaMapManager.openBattleUI(),e.initPlant(),d.pzaGameState.gamePause=!1,N.pzaWorldEventManager.triggerEvent(N.pzaWorldEventType.GAME_RESUME,null),t.playBgm(),d.pzaGameState.autoPickLock=!0,I.pzaUtil.changeGameSpeed(d.pzaGameState.gameSpeed)})})})})},!0)};d.pzaGameState.endLessWin();var o="\u66f4\u591a\u50f5\u5c38\u6765\u88ad! ";null!=a&&(o+="\n"+a);var n=!1;G.pzaTipManager.showGameTip(o,function(){n=!0,t.showGameTipNext(),e()}),setTimeout(function(){n||(n=!0,t.showGameTipNext(),e(),G.pzaTipManager.hideGuideTip())},6e3)},t.prototype.showGameTipNext=function(){N.pzaWorldEventManager.triggerEvent(N.pzaWorldEventType.CLOSE_REDTIP,null),window.pzaMapManager.closeBattleUI(),window.pzaMapManager.removeFog(),window.pzaMapManager.removeAllIceGround(),M.pzaGameManager.removeBattleUI(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.init(),A.pzaSoundManager.clearAllLoopAudio()},t.prototype.nextPart=function(){var a=this;I.pzaUtil.changeGameSpeed(1),d.pzaGameState.gameWin=!0,this.endLessRound++,_.pzaLocalData.data.zaJiaoRound=this.endLessRound,_.pzaLocalData.addDirty("zaJiaoRound");var t=r.pzaBattleData.saveData(1);_.pzaLocalBattleData.saveZjEndlessData(t);var e=this.getRankConf(d.pzaGameState.curPart);e.density=L.pzaZJRankConf.createZombieDensity(this.endLessRound+1).toString(),console.log("\u5bc6\u5ea62",e.density),C.pzaGameCommonPool.clear(),y.pzaCommonMask.showMask(),w.pzaRankMgr.uploadLeaderboardScore(w.pzaRankMgr.zj_Rank_Key,_.pzaLocalData.data.zaJiaoPassPart,_.pzaLocalData.data.zaJiaoRound,function(t){y.pzaCommonMask.hideMask(),a.endLessRound>_.pzaLocalData.data.zjPassCount&&(_.pzaLocalData.data.zjPassCount=a.endLessRound,_.pzaLocalData.addDirty("zjPassCount")),a.doNextRound(t)}),this.winDrop(),"my"===v.pzaChannel.instance().channel&&v.pzaChannel.instance().getChannel().actSubmit()},t.prototype.onZombieDeath=function(a,t,e,o){void 0===e&&(e=!0),void 0===o&&(o=null),e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)&&(this.isEndless()?this.nextPart():M.pzaGameManager.passPart(t.logicPos))},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u521b\u610f\u6a21\u5f0f\u201d\uff0c"+this.getRankConf(d.pzaGameState.curPart).name+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t}(P.pzaGameBase);e.pzaGameZJ=Z,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaBattleData":"pzaBattleData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Battle/pzaSunLight":"pzaSunLight","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaGameBase":"pzaGameBase","./pzaGameCommonPool":"pzaGameCommonPool","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGamePartConfig":"pzaGamePartConfig","./pzaLocalData":"pzaLocalData","./pzaNodeManager":"pzaNodeManager","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager","./pzaZJPlantConf":"pzaZJPlantConf","./pzaZJRankConf":"pzaZJRankConf","./pzaZJZombieConf":"pzaZJZombieConf"}],pzaGameZombieEnemyEndless:[function(a,t,e){"use strict";cc._RF.push(t,"6b8bcwDBmlBOqZEjxzb3suT","pzaGameZombieEnemyEndless");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameZombieEnemyEndless=void 0;var i=a("../Battle/Data/pzaBattleData"),r=a("../Battle/Data/pzaDropType"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Battle/pzaEffectManager"),s=a("../Battle/pzaGameState"),c=a("../Load/pzaPreLoadManager"),u=a("../View/Battle/pzaZombieSelectView"),d=a("../View/pzaCommonMask"),h=a("../View/pzaWarningView"),m=a("../utils/pzaChannel"),f=a("../utils/pzakc"),z=a("./pzaGameManager"),y=a("./pzaGameZombieEnemy"),g=a("./pzaLocalData"),v=a("./pzaRankMgr"),b=a("./pzaSoundManager"),S=a("./pzaStatisticsMgr"),P=a("./pzaTipManager"),C=a("./pzaUIManager"),D=a("./pzaUtil"),M=a("./pzaWorldEventManager"),E=a("./pzaZombieEnermyPartCfg"),_=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=s.pzaGameMode.ZOMBIE_ENDLESS,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u50f5\u5c38\u516c\u654c\u65e0\u5c3d-"},t.prototype.isEndless=function(){return!0},t.prototype.getRankKey=function(){return"zombie_endless_rank"},t.prototype.getPlantArr=function(){var a=E.pzaZombieEnermyPartCfg.getPlantType(s.pzaGameState.zombieEndlessPart);return a.push(p.pzaPlantEnum.PUFF_SHROOM),a},t.prototype.getZombieTypeArr=function(){return E.pzaZombieEnermyPartCfg.getZombiePool(s.pzaGameState.zombieEndlessPart)},t.prototype.addOtherRes=function(a){a.push(new c.pzaResourceDetail(c.pzaResourceUrl.BRAIN))},t.prototype.initPartProcess=function(a){a.partLabel.string="\u50f5\u5c38\u516c\u654c(\u65e0\u5c3d)"+(s.pzaGameState.curPart>=1?"-\u8bb0\u5f55\uff1a"+s.pzaGameState.curPart:""),a.zombieHeadNode.active=!1;for(var t=0;t<a.partFlags.length;t++)a.partFlags[t].active=!1;a.proLabel.node.active=!0,a.proLabel.string="0/5 \u5403\u6389\u7684\u8111\u5b50",a.partProgress.fillRange=0},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u76ca\u667a\u6a21\u5f0f\u201d\uff0c\u201c\u50f5\u5c38\u516c\u654c(\u65e0\u5c3d)\u201d\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t.prototype.readData=function(){var a=g.pzaLocalBattleData.data.zombieEndlessData;i.pzaBattleData.readData(a)},t.prototype.beforeLoad=function(){s.pzaGameState.partStar=0,s.pzaGameState.sunLightCount=150,s.pzaGameState.zombiePuffCount=E.pzaZombieEnermyPartCfg.getRandomPuff(1),s.pzaGameState.zombieEndlessPart=E.pzaZombieEnermyPartCfg.getEndlessCfgLevel(1)},t.prototype.preLoad=function(t,e,o){a.prototype.preLoad.call(this,2,1,o)},t.prototype.gameRestart=function(){s.pzaGameState.hadRevived=!1,g.pzaLocalBattleData.data.zombieEndlessData=null,g.pzaLocalBattleData.localSaveData(),this.loadAndStart(2,1)},t.prototype.gameStart=function(a,t){var e=this;g.pzaLocalData.gameStartTimeStamp=Date.now(),S.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt("10"+s.pzaGameState.curPart)}),this.beforeGameStart(a,t);var o=g.pzaLocalBattleData.data.zombieEndlessData;if(s.pzaGameState.isGameEnd=!1,o)return window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.init(),b.pzaSoundManager.clearAllLoopAudio(),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(E.pzaZombieEnermyPartCfg.getPlantColumn(s.pzaGameState.zombieEndlessPart)),window.pzaplantManager.initSimulatePlant(o.zombiePlantList),window.pzaplantManager.initBrain(),window.pzaMapManager.openBattleUI(),z.pzaGameManager.showBattleUI(c.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(a){var t=a&&a.getComponent(u.pzaZombieSelectView);t&&t.init(E.pzaZombieEnermyPartCfg.getZombiePool(s.pzaGameState.zombieEndlessPart))}),void this.gameRecover(a,t,o);v.pzaRankMgr.queryLeaderBoardRank(v.pzaRankMgr.Zombie_Rank_Key,function(a){d.pzaCommonMask.hideMask(),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(E.pzaZombieEnermyPartCfg.getPlantColumn(s.pzaGameState.zombieEndlessPart)),window.pzaplantManager.initSimulatePlant(E.pzaZombieEnermyPartCfg.getPlantList(s.pzaGameState.zombieEndlessPart,s.pzaGameState.zombiePuffCount)),window.pzaplantManager.initBrain();var t="\u83b7\u5f97\u5168\u90e8\u5927\u8111\uff0c\u901a\u8fc7\u8fd9\u4e00\u5173\u5361\uff01",o=g.pzaLocalData.data.zombieFlagCount;null!=o&&o>0&&(t+="\n\u5386\u53f2\u6700\u9ad8\u8bb0\u5f55\uff1a"+o,null!=a&&a>0&&(t+=" \u5168\u670d\u6392\u540d\uff1a"+a)),P.pzaTipManager.showGameTip(t,function(){P.pzaTipManager.showGameTip("\u9633\u5149\u53ef\u4ee5\u5e26\u5230\u4e0b\u4e00\u5173\uff0c\u4f60\u5fc5\u987b\u5e26\u8d85\u8fc750\u4e2a\u9633\u5149\uff0c\u5426\u5219\u4f60\u5c06\u8fc7\u5173\u5931\u8d25\uff01")}),window.pzaplantManager.blinkBrain(),window.pzaMapManager.openBattleUI(),z.pzaGameManager.showBattleUI(c.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(a){var t=a&&a.getComponent(u.pzaZombieSelectView);t&&t.init(E.pzaZombieEnermyPartCfg.getZombiePool(s.pzaGameState.zombieEndlessPart))}),e.playBgm(),s.pzaGameState.gamePause=!1})},t.prototype.gameRecover=function(){var a=this;C.pzaUIManager.removeBoardUI(),s.pzaGameState.midOut=!1,C.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(h.pzaWarningView);e&&e.show("\u4f60\u60f3\u8981\u7ee7\u7eed\u73b0\u5728\u6e38\u620f\uff0c\n\u8fd8\u662f\u5f00\u542f\u4e00\u4e2a\u65b0\u7684\u6e38\u620f\uff1f","\u7ee7\u7eed","\u65b0\u6e38\u620f",function(){a.playBgm(),window.pzazombieManager.zombieModeCheckTime=2,s.pzaGameState.gamePause=!1,M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_RESUME,null),D.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed),a.playBgm()},function(){g.pzaLocalBattleData.data.zombieEndlessData=null,g.pzaLocalBattleData.localSaveData(),z.pzaGameManager.removeBattleUI(),M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.GAME_OVER,null),v.pzaRankMgr.queryLeaderBoardRank(v.pzaRankMgr.Zombie_Rank_Key,function(){a.firstStart(s.pzaGameState.curChapter,1)})},"\u7ee7\u7eed\u8fdb\u884c\u672c\u6b21\u6e38\u620f\uff1f")})},t.prototype.winDrop=function(){return null},t.prototype.partFail=function(){a.prototype.partFail.call(this),g.pzaLocalBattleData.data.zombieEndlessData=null,g.pzaLocalBattleData.localSaveData(),f.default.eventReport("\u50f5\u5c38\u6a21\u5f0f-\u65e0\u5c3d-"+s.pzaGameState.curPart+"\u5931\u8d25");var t=0;g.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-g.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3),S.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("10"+s.pzaGameState.curPart)},{name:"is_Win",value:0},{name:"Use",value:t},{name:"time",value:e}),g.pzaLocalData.hasUseProp=!1},t.prototype.partWin=function(a,t){this.nextPart(a,t)},t.prototype.doNextPart=function(){window.pzaMapManager.blink(2),window.pzaplantManager.clearAllPlant(),window.pzazombieManager.clearAllZombie(),window.pzazombieManager.init(),b.pzaSoundManager.clearAllLoopAudio(),s.pzaGameState.survivalPartWin(),s.pzaGameState.zombiePuffCount=E.pzaZombieEnermyPartCfg.getRandomPuff(s.pzaGameState.curPart),s.pzaGameState.zombieEndlessPart=E.pzaZombieEnermyPartCfg.getEndlessCfgLevel(s.pzaGameState.curPart),window.pzaMapManager.clearLadder(),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(E.pzaZombieEnermyPartCfg.getPlantColumn(s.pzaGameState.zombieEndlessPart));var a=E.pzaZombieEnermyPartCfg.getPlantList(s.pzaGameState.zombieEndlessPart,s.pzaGameState.zombiePuffCount);window.pzaplantManager.initSimulatePlant(a),window.pzaplantManager.initBrain(),window.pzaMapManager.openBattleUI(),z.pzaGameManager.showBattleUI(c.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(a){var t=a&&a.getComponent(u.pzaZombieSelectView);t&&t.init(E.pzaZombieEnermyPartCfg.getZombiePool(s.pzaGameState.zombieEndlessPart))}),this.playBgm(),s.pzaGameState.gamePause=!1,window.pzazombieManager.zombieModeCheckTime=2,M.pzaWorldEventManager.triggerEvent(M.pzaWorldEventType.PASS_PICK,null),D.pzaUtil.changeGameSpeed(s.pzaGameState.gameSpeed),g.pzaLocalBattleData.data.zombieEndlessData=i.pzaBattleData.saveData(0,a),g.pzaLocalBattleData.localSaveData(),s.pzaGameState.isGameEnd=!1},t.prototype.nextPart=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null),s.pzaGameState.isGameEnd=!0;var o=function(){D.pzaUtil.changeGameSpeed(1),window.pzaMapManager.closeBattleUI(),z.pzaGameManager.removeBattleUI();var a="\u5e72\u5f97\u597d\uff01\u5df2\u5b8c\u6210"+s.pzaGameState.curPart+"\u5173";null!=t&&(a+="\n"+t),P.pzaTipManager.showGameTip(a,function(){d.pzaCommonMask.showMask(),v.pzaRankMgr.uploadLeaderboardScore(v.pzaRankMgr.Zombie_Rank_Key,g.pzaLocalData.data.zombieFlagCount,s.pzaGameState.curPart-1,function(){d.pzaCommonMask.hideMask(),s.pzaGameState.curPart>g.pzaLocalData.data.zombieFlagCount&&(g.pzaLocalData.data.zombieFlagCount=s.pzaGameState.curPart,g.pzaLocalData.addDirty("zombieFlagCount")),e.doNextPart()})})};s.pzaGameState.curPart%3==0?l.pzaEffectManager.createDropCard(r.pzaDropType.COIN_PACKAGE,null,cc.v2(),o):o(),"my"===m.pzaChannel.instance().channel&&m.pzaChannel.instance().getChannel().actSubmit()},t}(y.pzaGameZombieEnemy);e.pzaGameZombieEnemyEndless=_,cc._RF.pop()},{"../Battle/Data/pzaBattleData":"pzaBattleData","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaZombieSelectView":"pzaZombieSelectView","../View/pzaCommonMask":"pzaCommonMask","../View/pzaWarningView":"pzaWarningView","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameManager":"pzaGameManager","./pzaGameZombieEnemy":"pzaGameZombieEnemy","./pzaLocalData":"pzaLocalData","./pzaRankMgr":"pzaRankMgr","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager","./pzaZombieEnermyPartCfg":"pzaZombieEnermyPartCfg"}],pzaGameZombieEnemy:[function(a,t,e){"use strict";cc._RF.push(t,"4ce2aoYXkZA5IeWQ//Zc2vL","pzaGameZombieEnemy");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGameZombieEnemy=void 0;var i=a("../Battle/Data/pzaDropType"),r=a("../Battle/Data/pzaGuideType"),p=a("../Battle/pzaGameState"),l=a("../Load/pzaPreLoadManager"),s=a("../View/Battle/pzaZombieSelectView"),c=a("../View/pzaCommonMask"),u=a("../utils/pzaChannel"),d=a("../utils/pzakc"),h=a("./pzaGameBase"),m=a("./pzaGameManager"),f=a("./pzaLocalData"),z=a("./pzaSoundManager"),y=a("./pzaStatisticsMgr"),g=a("./pzaTipManager"),v=a("./pzaUIManager"),b=a("./pzaWorldEventManager"),S=a("./pzaZombieEnermyPartCfg"),P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gameMode=p.pzaGameMode.ZOMBIE_ENERMY,t}return n(t,a),t.prototype.getGameModeName=function(){return"\u50f5\u5c38\u516c\u654c-"},t.prototype.playBgm=function(){z.pzaSoundManager.playBgm(z.pzaBGMName.PUZZLE_BGM)},t.prototype.winDrop=function(){var a=i.pzaDropType.COIN_PACKAGE;return f.pzaLocalData.passZombieMode(p.pzaGameState.curPart)&&(a=i.pzaDropType.ZOMBIE_TROPHY),"my"===u.pzaChannel.instance().channel&&u.pzaChannel.instance().getChannel().actSubmit(),a},t.prototype.showPassUiNoStar=function(){v.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.PUZZLE_VIEW,function(){v.pzaUIManager.baseShowBoardUI(l.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=!0,a.cherryBombNode.active=!1,a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.clickSelectPartInFailView=function(){v.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.PUZZLE_VIEW,function(){v.pzaUIManager.baseShowBoardUI(l.pzaResourceUrl.HOME_SELECT_VIEW,null)})},t.prototype.getPlantArr=function(a,t){return S.pzaZombieEnermyPartCfg.getPlantType(t)},t.prototype.getZombieTypeArr=function(a,t){return S.pzaZombieEnermyPartCfg.getZombiePool(t)},t.prototype.addOtherRes=function(a){a.push(new l.pzaResourceDetail(l.pzaResourceUrl.BRAIN))},t.prototype.beforeLoad=function(){p.pzaGameState.partStar=0,p.pzaGameState.sunLightCount=150},t.prototype.partFail=function(){a.prototype.partFail.call(this),d.default.eventReport("\u50f5\u5c38\u6a21\u5f0f-"+p.pzaGameState.curPart+"\u5931\u8d25");var t=0;f.pzaLocalData.hasUseProp&&(t=1);var e=Date.now()-f.pzaLocalData.gameStartTimeStamp;e=Math.ceil(e/1e3),y.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("10"+p.pzaGameState.curPart)},{name:"is_Win",value:0},{name:"Use",value:t},{name:"time",value:e}),f.pzaLocalData.hasUseProp=!1},t.prototype.partWin=function(){b.pzaWorldEventManager.triggerEvent(b.pzaWorldEventType.GAME_OVER,null),m.pzaGameManager.removeBattleUI(),this.showPassUiNoStar(),d.default.eventReport("\u50f5\u5c38\u6a21\u5f0f-"+p.pzaGameState.curPart+"\u6210\u529f");var a=0;f.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-f.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3),y.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt("10"+p.pzaGameState.curPart)},{name:"is_Win",value:1},{name:"Use",value:a},{name:"time",value:t}),f.pzaLocalData.hasUseProp=!1},t.prototype.preLoad=function(t,e,o){a.prototype.preLoad.call(this,2,e,o)},t.prototype.initPartProcess=function(a){a.partLabel.string=S.pzaZombieEnermyPartCfg.getName(p.pzaGameState.curPart),a.zombieHeadNode.active=!1;for(var t=0;t<a.partFlags.length;t++)a.partFlags[t].active=!1;a.proLabel.node.active=!0,a.proLabel.string="0/5 \u5403\u6389\u7684\u8111\u5b50",a.partProgress.fillRange=0},t.prototype.updatePartProcess=function(a){var t=5-window.pzaplantManager.brainMap.size,e=t/5,o=a.partProgress.fillRange+e,n=Math.max(.05,3*o);cc.Tween.stopAllByTarget(a.partProgress),cc.tween(a.partProgress).to(n,{fillRange:-e}).start(),a.proLabel.string=t+"/5 \u5403\u6389\u7684\u8111\u5b50"},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.freePlantNode.active=!1,t.shovelShowNode.active=!1,t.sunUIShowNode.active=!0,t.speedBtn.active=!0},t.prototype.refreshNextWave=function(){},t.prototype.onZombieDeath=function(){window.pzazombieManager.zombieModeCheckTime=2},t.prototype.gameStart=function(a,t){var e=this;f.pzaLocalData.gameStartTimeStamp=Date.now(),y.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt("10"+p.pzaGameState.curPart)}),this.beforeGameStart(a,t),window.pzaMapManager.initMapPos(!1),window.pzaMapManager.showRedLine(S.pzaZombieEnermyPartCfg.getPlantColumn(t)),window.pzaplantManager.initSimulatePlant(S.pzaZombieEnermyPartCfg.getPlantList(t,0)),window.pzaplantManager.initBrain();var o=function(){g.pzaTipManager.showGameTip("\u83b7\u5f97\u5168\u90e8\u5927\u8111\uff0c\u901a\u8fc7\u8fd9\u4e00\u5173\u5361\uff01"),window.pzaplantManager.blinkBrain(),window.pzaMapManager.openBattleUI(),m.pzaGameManager.showBattleUI(l.pzaResourceUrl.ZOMBIE_SELECT_VIEW,function(a){var t=a&&a.getComponent(s.pzaZombieSelectView);t&&t.init(S.pzaZombieEnermyPartCfg.getZombiePool(p.pzaGameState.curPart))}),e.playBgm(),p.pzaGameState.gamePause=!1};if(window.pzaGuideManager.guideStart(o),window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_ZOMBIE_ENERMY_1)return c.pzaCommonMask.hideMask(),void window.pzaGuideManager.guideShow(o)},t.prototype.getMidOutTip=function(){return"\u5f00\u542f\u4e00\u4e2a\u65b0\u5173\u5361\u5c06\u4f1a\u4e22\u5931\u60a8\u4e4b\u524d\u201c\u76ca\u667a\u6a21\u5f0f\u201d\uff0c"+S.pzaZombieEnermyPartCfg.getName(p.pzaGameState.curPart)+"\u7684\u8fdb\u5ea6\uff0c\u662f\u5426\u5f00\u542f\u65b0\u5173\u5361\uff1f"},t}(h.pzaGameBase);e.pzaGameZombieEnemy=P,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaZombieSelectView":"pzaZombieSelectView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaGameBase":"pzaGameBase","./pzaGameManager":"pzaGameManager","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaWorldEventManager":"pzaWorldEventManager","./pzaZombieEnermyPartCfg":"pzaZombieEnermyPartCfg"}],pzaGardenDave:[function(a,t,e){"use strict";cc._RF.push(t,"94090H3UhRGB5UEMEdqCS5D","pzaGardenDave");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenDave=void 0;var r=a("../Common/pzaSoundManager"),p=a("../Common/pzaSpineController"),l=a("../Common/pzaUtil"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.daveAni=null,t.sell_yes=null,t.sell_no=null,t.continueTxt=null,t.dialogTxt=null,t.dialogNode=null,t.canContinue=!1,t.words=null,t.sellCall=null,t.guideEndCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.sell_yes.on(cc.Node.EventType.TOUCH_END,this.onSellYes,this),this.sell_no.on(cc.Node.EventType.TOUCH_END,this.onSellNo,this),this.node.on(cc.Node.EventType.TOUCH_END,this.clickContinue,this)},t.prototype.onDisable=function(){this.sell_yes.off(cc.Node.EventType.TOUCH_END,this.onSellYes,this),this.sell_no.off(cc.Node.EventType.TOUCH_END,this.onSellNo,this),this.node.off(cc.Node.EventType.TOUCH_END,this.clickContinue,this)},t.prototype.showSell=function(a,t){var e=this;this.node.active=!0,this.canContinue=!1,this.dialogNode.active=!1,this.continueTxt.active=!1,this.sell_yes.active=!0,this.sell_no.active=!0,this.dialogTxt.string=a,this.sellCall=t,this.daveAni.playAnimation("1enter1",!1,function(){e.dialogNode.active=!0,e.daveAni.playAnimation("1idle1",!0)})},t.prototype.showGuide=function(a,t){var e=this;this.node.active=!0,this.canContinue=!1,this.dialogNode.active=!1,this.continueTxt.active=!0,this.sell_yes.active=!1,this.sell_no.active=!1,this.words=a,this.guideEndCall=t,this.daveAni.playAnimation("1enter1",!1,function(){e.dialogNode.active=!0,e.canContinue=!0,e.daveAni.playAnimation("1idle1",!0),e.showNextWord()})},t.prototype.onSellYes=function(){var a=this;this.sellCall&&this.sellCall(),this.dialogNode.active=!1,this.daveAni.playAnimation("leave",!1,function(){a.node.active=!1})},t.prototype.onSellNo=function(){var a=this;this.dialogNode.active=!1,this.daveAni.playAnimation("leave",!1,function(){a.node.active=!1})},t.prototype.clickContinue=function(){this.canContinue&&this.showNextWord()},t.prototype.showNextWord=function(){var a=this;if(null!=this.words){var t=this.words.shift();if(null==t)return this.canContinue=!1,this.dialogNode.active=!1,void this.daveAni.playAnimation("leave",!1,function(){a.node.active=!1,a.guideEndCall&&a.guideEndCall()});this.playShortSound(),this.daveAni.playAnimation("1talk3",!1,function(){a.daveAni.playAnimation("1idle1",!0)}),this.dialogTxt.string=t.word,t.event&&t.event()}else this.node.active=!1},t.prototype.playShortSound=function(){var a=l.pzaUtil.getRandomNum(1,3);r.pzaSoundManager.playAudio("crazydaveshort"+a)},i([u({displayName:"\u6234\u592b\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"daveAni",void 0),i([u({displayName:"\u552e\u5356_\u662f",type:cc.Node})],t.prototype,"sell_yes",void 0),i([u({displayName:"\u552e\u5356_\u5426",type:cc.Node})],t.prototype,"sell_no",void 0),i([u({displayName:"\u70b9\u51fb\u7ee7\u7eed",type:cc.Node})],t.prototype,"continueTxt",void 0),i([u({displayName:"\u5bf9\u8bdd\u6587\u672c",type:cc.Label})],t.prototype,"dialogTxt",void 0),i([u({displayName:"\u5bf9\u8bdd\u6846\u8282\u70b9",type:cc.Node})],t.prototype,"dialogNode",void 0),i([c],t)}(cc.Component);e.pzaGardenDave=d,cc._RF.pop()},{"../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaUtil":"pzaUtil"}],pzaGardenDropCoin:[function(a,t,e){"use strict";cc._RF.push(t,"030adx5J0RGg7CKdbyuWmfs","pzaGardenDropCoin");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenDropCoin=void 0;var r=a("../Battle/Data/pzaDropType"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Load/pzaBundleObjectPool"),c=a("../utils/pzakc"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine_coin=null,t.curDropType=null,t.priceMap=new Map([[r.pzaDropType.SILVER_COIN,10],[r.pzaDropType.GOLD_COIN,50],[r.pzaDropType.DIAMOND,1e3]]),t.canPick=!0,t.pickTargetPos=null,t.pickCall=null,t.price=0,t}var e;return n(t,a),e=t,t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.pickUp,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.pickUp,this)},t.prototype.pickUp=function(){var a=this;this.canPick&&(this.canPick=!1,cc.Tween.stopAllByTarget(this.node),cc.tween(this.node).to(.3,{position:this.pickTargetPos},{easing:"cubicOut"}).call(function(){p.pzaLocalData.data.coin+=a.price,p.pzaLocalData.addDirty("coin"),a.close()}).start(),l.pzaSoundManager.playAudio("pickCoin"),this.pickCall&&this.pickCall())},t.prototype.init=function(a,t,e,o){var n=this;this.curDropType=a,this.pickTargetPos=cc.v3(e.x,e.y),this.pickCall=o,this.price=this.priceMap.get(this.curDropType);var i="pr3";a==r.pzaDropType.SILVER_COIN?(l.pzaSoundManager.playAudio("pickSilver"),i="pr3"):a==r.pzaDropType.GOLD_COIN?(l.pzaSoundManager.playAudio("pickGold"),i="pr2"):(l.pzaSoundManager.playAudio("pickDiamond"),i="pr1_2"),this.spine_coin.setAnimation(0,i,!0),this.node.setPosition(t);var p=t.clone();p.x+=c.default.randomInt(-100,100),p.y+=c.default.randomInt(-100,100),cc.tween(this.node).bezierTo(.3,cc.v2(t.x,p.y+100),cc.v2(t.x,p.y+300),p).start(),this.scheduleOnce(function(){n.close()},60)},t.show=function(a,t,o,n,i){s.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Effect/GardenDropCoin",!1,function(r,p){if(null==r&&null!=p){p.setParent(a);var l=p.getComponent(e);l&&l.init(t,o,n,i)}else console.error(r)})},t.prototype.close=function(){this.node&&this.node.isValid&&this.node.destroy()},i([h({displayName:"\u52a8\u753b",type:sp.Skeleton})],t.prototype,"spine_coin",void 0),e=i([d],t)}(cc.Component);e.pzaGardenDropCoin=m,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../utils/pzakc":"pzakc"}],pzaGardenMgr:[function(a,t,e){"use strict";cc._RF.push(t,"5ab27xFOGlJ7ocM9eNExUUr","pzaGardenMgr"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenToolType=e.pzaGardenOpType=e.pzaGardenEnv=e.pzaGardenOpResult=void 0;var o,n,i,r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaDropType"),l=a("../Battle/Data/pzaPlantEnum"),s=a("../Battle/pzaGameState"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaUtil"),d=a("../utils/pzaResMgr"),h=a("../utils/pzakc"),m=a("./pzaGardenPlant"),f=a("./pzaGardenPlantConfig");e.pzaGardenOpResult=function(a,t,e,o,n,i){void 0===a&&(a=0),void 0===t&&(t=p.pzaDropType.SILVER_COIN),void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===i&&(i=!1),this.dropNum=0,this.dropType=p.pzaDropType.SILVER_COIN,this.isLight=!1,this.isWet=!1,this.isLevelUp=!1,this.offLight=!1,this.dropNum=a,this.dropType=t,this.isLight=n,this.isLevelUp=o,this.isWet=e,this.offLight=i},function(a){a[a.normal=0]="normal",a[a.night=1]="night",a[a.water=2]="water"}(o=e.pzaGardenEnv||(e.pzaGardenEnv={})),function(a){a[a.water=0]="water",a[a.manure=1]="manure",a[a.pesticide=2]="pesticide",a[a.phonograph=3]="phonograph",a[a.chocolate=4]="chocolate",a[a.income=5]="income",a[a.null=-1]="null"}(n=e.pzaGardenOpType||(e.pzaGardenOpType={})),function(a){a[a.null=-1]="null",a[a.waterPot=0]="waterPot",a[a.goldWaterPot=1]="goldWaterPot",a[a.manure=2]="manure",a[a.pesticide=3]="pesticide",a[a.phonograph=4]="phonograph",a[a.chocolate=5]="chocolate",a[a.glove=6]="glove",a[a.sell=7]="sell",a[a.cart=8]="cart",a[a.nextEnv=9]="nextEnv",a[a.snail=10]="snail"}(i=e.pzaGardenToolType||(e.pzaGardenToolType={}));var z=function(){function a(){this.gardenPlantConfMap=null,this.curGardenPlantMap=null,this.addPlantArr=[],this.envMaxMap=new Map([[o.normal,32],[o.water,8],[o.night,8]]),this.opPicMap=new Map([[n.water,"Texture/MainView/GardenView/garden_drop"],[n.manure,"resources/Texture/ShopItemIcon/22"],[n.pesticide,"resources/Texture/ShopItemIcon/23"],[n.phonograph,"resources/Texture/ShopItemIcon/24"]]),this.toolPicMap=new Map([[i.waterPot,"Texture/Effect/drop_sprinkler"],[i.goldWaterPot,"resources/Texture/ShopItemIcon/21"],[i.manure,"resources/Texture/ShopItemIcon/22"],[i.pesticide,"resources/Texture/ShopItemIcon/23"],[i.phonograph,"resources/Texture/ShopItemIcon/24"],[i.glove,"resources/Texture/ShopItemIcon/25"],[i.sell,"Texture/MainView/GardenView/garden_dollar"],[i.cart,"resources/Texture/ShopItemIcon/28"],[i.chocolate,"Texture/MainView/GardenView/chocolate"],[i.nextEnv,"Texture/MainView/GardenView/garden_arrow1"]]),this.toolSpineMap=new Map([[i.waterPot,"Garden/28FX_pr4"],[i.goldWaterPot,"Garden/28FX_pr4"],[i.manure,"Garden/28FX_pr2"],[i.pesticide,"Garden/28FX_pr3"],[i.phonograph,"Garden/28FX_pr5"],[i.chocolate,"Effect/DropEffect/05_light"]])}return a.instance=function(){return a._me||(a._me=new a),a._me},a.prototype.init=function(){if(!this.gardenPlantConfMap){var a=d.pzaResMgr.instance().getConf("a12");this.gardenPlantConfMap=new Map;for(var t=0;t<a.length;t++){var e=new f.pzaGardenPlantConfig(a[t]);this.gardenPlantConfMap.set(e.plantId,e)}}this.loadPlantsFromSave()},a.prototype.addPlantByOther=function(a){this.addPlantArr.push(a)},a.prototype.getPriceFromLevel=function(a){if(0===a.level)return 1500;var t=this.getGardenPlantConf(a.plantId);return 1===a.level?t.price1:2===a.level?t.price2:t.price3},a.prototype.loadPlantsFromSave=function(){var a=h.default.isNewDay(c.pzaLocalData.data.gardenLastTime),t=c.pzaLocalData.data.gardenPlants||[];this.curGardenPlantMap=new Map,Date.now();for(var e=0;e<t.length;e++){var o=m.pzaGardenPlant.create(t[e]);this.curGardenPlantMap.has(o.env)||this.curGardenPlantMap.set(o.env,[]),a&&(4===o.level&&(o.level=3),o.cdCount=0),this.curGardenPlantMap.get(o.env).push(o)}},a.prototype.getOffLineReward=function(){var a=c.pzaLocalData.data.gardenLastTime;if(!a)return 0;var t=Date.now(),e=Math.floor((t-a)/1e3);e>3600&&(e=3600);for(var n=this.curGardenPlantMap.get(o.normal),i=0;i<n.length;i++){var r=n[i];4===r.level&&this.getPriceFromLevel(r)}return 0},a.prototype.getCurPlants=function(a){return this.curGardenPlantMap.get(a)||(this.curGardenPlantMap.set(a,[]),[])},a.prototype.canOperate=function(){if(!this.curGardenPlantMap)return!1;var a=Date.now(),t=!1;return this.curGardenPlantMap.forEach(function(e){if(e&&!t)for(var o=0;o<e.length;o++){var n=e[o];if(n&&n.opLeft>0&&n.opTime>0&&n.opTime<a)return void(t=!0)}}),t},a.prototype.getGardenPlantConf=function(a){return this.gardenPlantConfMap.get(a)},a.prototype.getEmptyPos=function(a){for(var t=this.envMaxMap.get(a),e=[],n=[],i=c.pzaLocalData.data.gardenPlants||[],r=0;r<i.length;r++){var p=i[r];p.env===o.normal&&(e[p.pos]=1)}for(r=0;r<t;r++)void 0===e[r]&&n.push(r);return n.length<=0?-1:h.default.randomChoose(n,1)[0]},a.prototype.hasEmptyPos=function(a){void 0===a&&(a=o.normal);var t=this.envMaxMap.get(a);return this.getCurPlants(a).length<t},a.prototype.addGardenEnv=function(a){var t=c.pzaLocalData.data.gardenEnv||{};t[""+a]=1,c.pzaLocalData.data.gardenEnv=t,c.pzaLocalData.addDirty("gardenEnv"),h.default.sendMsg("addNewGardenTool")},a.prototype.addGardenPlant=function(t,e){void 0===e&&(e=o.normal);var i=this.getEmptyPos(e);if(i<0)return null;var p=new m.pzaGardenPlant(null,t,i,e);return p.opLeft=p.getLeftTimes(),p.opType=n.water,p.opTime=a.opGapTime+Date.now(),p.towards=Math.random()<.5?-1:1,this.getCurPlants(e).push(p),c.pzaLocalData.data.gardenPlants.push(p.toJson()),c.pzaLocalData.addDirty("gardenPlants"),console.log("\u82b1\u56ed\u52a0\u5165\u65b0\u690d\u7269",t,e,"pos",i),h.default.sendMsg("addNewGardenPlant"),r.default.instance().addGardenPlant(t),p},a.prototype.addGuidePlant=function(a){var t=new m.pzaGardenPlant(null,39,a,o.normal);return t.opLeft=3,t.opType=n.water,t.opTime=6e3+Date.now(),t.opGapTime=6e3,this.getCurPlants(o.normal).push(t),c.pzaLocalData.data.gardenPlants.push(t.toJson()),c.pzaLocalData.addDirty("gardenPlants"),console.log("\u82b1\u56ed\u52a0\u5165\u5f15\u5bfc\u690d\u7269",39,"pos",a),h.default.sendMsg("addNewGardenPlant"),r.default.instance().addGardenPlant(39),t},a.prototype.addGardenTool=function(a,t,e){void 0===t&&(t=1),void 0===e&&(e=!0);var o=c.pzaLocalData.data.gardenToolNum;o[""+a]||(o[""+a]=0),o[""+a]+=t,c.pzaLocalData.addDirty("gardenToolNum"),console.log("\u82b1\u56ed\u52a0\u5165\u65b0\u5de5\u5177",a,t),e&&h.default.sendMsg("addNewGardenTool")},a.prototype.useGardenTool=function(t,e){if(void 0===e&&(e=1),a.numToolMap.has(t)){var o=c.pzaLocalData.data.gardenToolNum;o[""+t]&&(o[""+t]-=e,o[""+t]<0&&(o[""+t]=0),c.pzaLocalData.addDirty("gardenToolNum"))}},a.prototype.savePlant=function(a){for(var t=c.pzaLocalData.data.gardenPlants,e=0;e<t.length;e++)if(t[e].id===a.id)return c.pzaLocalData.data.gardenPlants[e]=a.toJson(),void c.pzaLocalData.addDirty("gardenPlants")},a.prototype.removePlant=function(a){for(var t=this,e=c.pzaLocalData.data.gardenPlants,o=0;o<e.length;o++)if(e[o].id===a.id)return c.pzaLocalData.data.gardenPlants.splice(o,1),c.pzaLocalData.addDirty("gardenPlants"),void this.curGardenPlantMap.get(a.env).forEach(function(e,o){e.id===a.id&&t.curGardenPlantMap.get(a.env).splice(o,1)})},a.prototype.changeEnv=function(a,t){var e=this;a.env!==t&&(this.curGardenPlantMap.get(a.env).forEach(function(t,o){t.id!==a.id||e.curGardenPlantMap.get(a.env).splice(o,1)}),a.env=t,this.curGardenPlantMap.has(t)||this.curGardenPlantMap.set(t,[]),this.curGardenPlantMap.get(t).push(a))},a.prototype.saveAllPlants=function(){var a=[];this.curGardenPlantMap.forEach(function(t){for(var e=0;e<t.length;e++)a.push(t[e].toJson())}),c.pzaLocalData.data.gardenPlants=a,c.pzaLocalData.addDirty("gardenPlants")},a.prototype.checkPlantState=function(a){var t=!1,e=Date.now();return this.curGardenPlantMap.forEach(function(o){null!=o&&o.forEach(function(o){null!=o&&o.opType==a&&o.opTime>0&&o.opTime<e&&(t=!0)})}),t},a.prototype.randomGardenPlant=function(a){var t=[];if(a<=0||Math.random()>a){for(var e=l.pzaPlantEnum.PEA_SHOOTER;e<=l.pzaPlantEnum.MELON_PULT;e++)e!=l.pzaPlantEnum.FLOWER_POT&&t.push(e);return u.pzaUtil.getRandomValueFromArray(t)}var o=new Set,n=c.pzaLocalData.data.gardenPlants;for(e=0;e<n.length;e++){var i=n[e];null!=i&&o.add(i.plantId)}for(e=l.pzaPlantEnum.PEA_SHOOTER;e<=l.pzaPlantEnum.MELON_PULT;e++)e!=l.pzaPlantEnum.FLOWER_POT&&(o.has(e)||t.push(e));if(t.length<=0)for(e=l.pzaPlantEnum.PEA_SHOOTER;e<=l.pzaPlantEnum.MELON_PULT;e++)e!=l.pzaPlantEnum.FLOWER_POT&&t.push(e);return u.pzaUtil.getRandomValueFromArray(t)},a.prototype.dropGardenPlant=function(){var a=0;switch(s.pzaGameState.curChapter>5?s.pzaGameState.curChapter-5:s.pzaGameState.curChapter){case 1:a=this.chapter1Drop();break;case 2:a=this.chapter2Drop();break;case 3:a=this.chapter3Drop();break;case 4:a=this.chapter4Drop();break;case 5:a=this.chapter5Drop()}c.pzaLocalData.data.dropPlantArr.push(a),c.pzaLocalData.addDirty("dropPlantArr")},a.prototype.chapter1Drop=function(){var a=[l.pzaPlantEnum.PEA_SHOOTER,l.pzaPlantEnum.SUN_FLOWER,l.pzaPlantEnum.CHERRY_BOMB,l.pzaPlantEnum.WALL_NUT,l.pzaPlantEnum.POTATO_MINE,l.pzaPlantEnum.SNOW_PEA,l.pzaPlantEnum.CHOMPER,l.pzaPlantEnum.REPEATER];return u.pzaUtil.getRandomValueFromArray(a)},a.prototype.chapter2Drop=function(){var a=[l.pzaPlantEnum.PUFF_SHROOM,l.pzaPlantEnum.SUN_SHROOM,l.pzaPlantEnum.FUME_SHROOM,l.pzaPlantEnum.GRAVE_BUSTER,l.pzaPlantEnum.HYPNO_SHROOM,l.pzaPlantEnum.SCAREDY_SHROOM,l.pzaPlantEnum.ICE_SHROOM,l.pzaPlantEnum.DOOM_SHROOM];return u.pzaUtil.getRandomValueFromArray(a)},a.prototype.chapter3Drop=function(){var a=[l.pzaPlantEnum.LILY_PAD,l.pzaPlantEnum.SQUASH,l.pzaPlantEnum.THREE_PEATER,l.pzaPlantEnum.TANGLE_KELP,l.pzaPlantEnum.JALAPENO,l.pzaPlantEnum.SPIKEWEED,l.pzaPlantEnum.TORCHWOOD,l.pzaPlantEnum.TALL_NUT];return u.pzaUtil.getRandomValueFromArray(a)},a.prototype.chapter4Drop=function(){var a=[l.pzaPlantEnum.SEA_SHROOM,l.pzaPlantEnum.PLANTERN,l.pzaPlantEnum.CACTUS,l.pzaPlantEnum.BLOVER,l.pzaPlantEnum.SPLIT_PEA,l.pzaPlantEnum.STAR_FRUIT,l.pzaPlantEnum.PUMPKIN,l.pzaPlantEnum.MAGNET_SHROOM];return u.pzaUtil.getRandomValueFromArray(a)},a.prototype.chapter5Drop=function(){var a=[l.pzaPlantEnum.CABBAGE_PULT,l.pzaPlantEnum.KERNEL_PULT,l.pzaPlantEnum.COFFEE_BEAN,l.pzaPlantEnum.GARLIC,l.pzaPlantEnum.UMBRELLA_LEAF,l.pzaPlantEnum.MELON_PULT];return u.pzaUtil.getRandomValueFromArray(a)},a._me=null,a.opGapTime=1e4,a.numToolMap=new Map([[i.manure,1],[i.pesticide,1],[i.chocolate,1]]),a}();e.default=z,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../Common/pzaLocalData":"pzaLocalData","../Common/pzaUtil":"pzaUtil","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaGardenPlant":"pzaGardenPlant","./pzaGardenPlantConfig":"pzaGardenPlantConfig"}],pzaGardenPlantConfig:[function(a,t,e){"use strict";cc._RF.push(t,"57b1bqRI45FSKvH8QOofR3i","pzaGardenPlantConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenPlantConfig=void 0;var o=function(){function a(a){this.id=0,this.plantId=0,this.name="",this.plantSpine="",this.skin="",this.ani="",this.from="",this.price1=0,this.price2=0,this.price3=0,this.env=0,this.id=a.id,this.plantId=a.plantId,this.name=a.name||"",this.plantSpine=a.plantSpine||"",this.skin=a.skin||"",this.ani=a.ani||"",this.from=a.from||"",this.price1=a.price1||0,this.price2=a.price2||0,this.price3=a.price3||0,this.env=a.env||0}return a.prototype.isFromShop=function(){return"shop"===this.from},a}();e.pzaGardenPlantConfig=o,cc._RF.pop()},{}],pzaGardenPlant:[function(a,t,e){"use strict";cc._RF.push(t,"49310gXvulP3rT+g9EkECHt","pzaGardenPlant"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenPlant=void 0;var o=a("../utils/pzakc"),n=a("./pzaGardenMgr"),i=a("../Battle/Data/pzaDropType"),r=a("../Achieve/pzaAchieveMgr"),p=function(){function a(a,t,e,o){this.id=null,this.plantId=0,this.level=0,this.pos=0,this.env=n.pzaGardenEnv.normal,this.opTime=0,this.opType=0,this.opLeft=0,this.lightGoneTime=0,this.cdCount=0,this.opGapTime=1e4,this.pot=null,this.towards=1,this.plantId=t,this.pos=e,this.env=o,this.id=a||""+e+o+Date.now()}return a.create=function(t){var e=new a(t.id,t.plantId,t.pos,t.env);return e.level=t.level||0,void 0===t.opLeft?(e.opType=n.pzaGardenOpType.water,e.opTime=Date.now()+n.default.opGapTime,e.opLeft=e.getLeftTimes()):(e.opType=t.opType||n.pzaGardenOpType.water,e.opTime=t.opTime||Date.now()+n.default.opGapTime,e.opLeft=t.opLeft),e.towards=t.towards||(Math.random()<.5?-1:1),e.cdCount=t.cdCount=0,e.lightGoneTime=t.lightGoneTime||0,e},a.prototype.getLeftTimes=function(){var a=o.default.randomDraw({3:.3333,4:.3333,5:.3333});return parseInt(a)},a.prototype.goNextOp=function(a,t,e){void 0===t&&(t=Date.now()),void 0===e&&(e=this.getLeftTimes()),this.opType=a,this.opLeft=e,this.opTime=t+this.opGapTime,this.cdCount++,this.cdCount>5&&(this.opTime=t+36e5)},a.prototype.goLight=function(a,t){void 0===a&&(a=Date.now()),void 0===t&&(t=!1),this.opType=n.pzaGardenOpType.income,this.opLeft=1,this.level=4,(this.lightGoneTime<=0||t)&&(this.lightGoneTime=a+36e6);var e=this.lightGoneTime-a;if(e<=0)return this.level=3,void this.goNextOp(n.pzaGardenOpType.water,a);var i=36e6-e,r=0;if(i<9e5)r=o.default.randomInt(20,30);else if(i<18e6){var p=Math.ceil(i/9e5);r=o.default.randomInt(30*p,30*(p+1))}else r=o.default.randomInt(900,1200);this.pot.isSpeedUp&&(r/=2),this.opTime=1e3*r+a},a.prototype.doOperation=function(){if(this.opLeft>0){var a=Date.now();if(this.canLight()){if(this.lightGoneTime<=0||a>this.lightGoneTime)return this.level=3,this.goNextOp(n.pzaGardenOpType.water,a),new n.pzaGardenOpResult(0,null,!1,!1,!1,!0);if(this.opType===n.pzaGardenOpType.water){var t=Math.random()<.3?n.pzaGardenOpType.phonograph:n.pzaGardenOpType.pesticide;return this.goNextOp(t,a,1),new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0)}return this.goLight(a),null}if(this.opTime<a)if(this.opLeft--,this.opLeft<=0){if(this.opGapTime=n.default.opGapTime,this.opType===n.pzaGardenOpType.water)return 3===this.level?(this.goNextOp(n.pzaGardenOpType.pesticide,a,1),new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0)):(this.goNextOp(n.pzaGardenOpType.manure,a,1),new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0));if(this.opType===n.pzaGardenOpType.pesticide)return this.goLight(a,!0),this.env===n.pzaGardenEnv.water?new n.pzaGardenOpResult(3,i.pzaDropType.GOLD_COIN,!1,!1,!0):new n.pzaGardenOpResult(1,i.pzaDropType.GOLD_COIN,!1,!1,!0);if(this.opType===n.pzaGardenOpType.phonograph)return this.goLight(a,!0),this.env===n.pzaGardenEnv.water?new n.pzaGardenOpResult(3,i.pzaDropType.GOLD_COIN,!1,!1,!0):new n.pzaGardenOpResult(1,i.pzaDropType.GOLD_COIN,!1,!1,!0);if(this.opType===n.pzaGardenOpType.manure)return this.goNextOp(n.pzaGardenOpType.water,a),this.level<4&&this.level++,3===this.level&&r.default.instance().addMature(),1===this.level?new n.pzaGardenOpResult(1,i.pzaDropType.GOLD_COIN,!1,!0):2===this.level?new n.pzaGardenOpResult(2,i.pzaDropType.GOLD_COIN,!1,!0):this.env===n.pzaGardenEnv.water?new n.pzaGardenOpResult(2,i.pzaDropType.DIAMOND,!1,!0):new n.pzaGardenOpResult(1,i.pzaDropType.DIAMOND,!1,!0)}else{if(this.opType===n.pzaGardenOpType.water)return this.goNextOp(n.pzaGardenOpType.water,a,this.opLeft),this.env===n.pzaGardenEnv.water?null:new n.pzaGardenOpResult(1,i.pzaDropType.SILVER_COIN,!0);this.opLeft=1}}return null},a.prototype.canLight=function(){return 4===this.level},a.prototype.toJson=function(){return{id:this.id,plantId:this.plantId,towards:this.towards,level:this.level,pos:this.pos,env:this.env,opTime:this.opTime,opType:this.opType,opLeft:this.opLeft,lightGoneTime:this.lightGoneTime}},a}();e.pzaGardenPlant=p,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaDropType":"pzaDropType","../utils/pzakc":"pzakc","./pzaGardenMgr":"pzaGardenMgr"}],pzaGardenPot:[function(a,t,e){"use strict";cc._RF.push(t,"f845cbgBS1KiZFxOIwQn3cR","pzaGardenPot");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenPot=void 0;var r=a("../Battle/Data/pzaDropType"),p=a("./pzaGardenMgr"),l=a("../Load/pzaBundleObjectPool"),s=a("../utils/pzaResMgr"),c=a("../utils/pzakc"),u=a("./pzaGardenShadow"),d=a("../Common/pzaSoundManager"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.water_shadow=null,t.pic_pot=null,t.pic_op=null,t.spine_plant=null,t.spine_light=null,t.spine_sleep=null,t.plant=null,t.plantConf=null,t.view=null,t.isLock=!1,t.isForShow=!1,t.isSpeedUp=!1,t.color_gray=(new cc.Color).fromHEX("#747474"),t.choosingTW=null,t}return n(t,a),t.prototype.onTouchStart=function(){if(!this.isForShow&&this.view&&this.view.curTool&&this.view.curTool.isChoosing){var a=this.view.curTool.getOpType();if(a!==p.pzaGardenOpType.null)a===this.plant.opType&&this.choosing();else{if(this.view.glovePot)return;this.view.curTool.exec(null,!1,this.node)}}},t.prototype.onTouchEnd=function(){var a=this;if(!this.isForShow&&this.view&&this.view.curTool&&this.view.curTool.isChoosing){var t=this.view.curTool.getOpType();t!==p.pzaGardenOpType.null&&this.view.curTool.exec(this.node.getPosition(),!0,this.node,function(){a.doOperation(t),a.isLock=!1,a.view.curTool.updateToolNum()},this)}},t.prototype.init=function(a,t){if(this.plant=a,this.view=t,this.plant.pot=this,this.node.parent=this.view.pots_container,a.pos<0){t.cartPot=this;var e=t.toolMap.get(p.pzaGardenToolType.cart);e&&e.putInCart(this)}else{var o=this.view.curShadowArr[a.pos];this.node.setPosition(o.getPosition()),o.getComponent(u.pzaGardenShadow).pot=this}return this.plantConf=p.default.instance().getGardenPlantConf(a.plantId),this.show(),this},t.prototype.getPrice=function(){var a=1500;return 1===this.plant.level?a=this.plantConf.price1:2===this.plant.level?a=this.plantConf.price2:this.plant.level>=3&&(a=this.plantConf.price3),a},t.prototype.remove=function(){p.default.instance().removePlant(this.plant),this.node.removeFromParent(!0),this.node.destroy()},t.prototype.speedUp=function(){var a=this;if(4===this.plant.level){this.isSpeedUp=!0,this.spine_plant.timeScale=2;var t=Date.now();this.plant.opTime>t&&(this.plant.opTime=(this.plant.opTime-t)/2+t),this.scheduleOnce(function(){a.spine_plant.timeScale=1,a.isSpeedUp=!1},60)}},t.prototype.canBeChoosed=function(a){return a<0||!(this.plant.opType!==a||!this.pic_op.node.active)},t.prototype.willBeChoosed=function(a,t){void 0===t&&(t=!1),!t&&this.canBeChoosed(a)||(this.spine_plant.node.color=this.color_gray,this.pic_pot.node.color=this.color_gray,this.hideChoosingEffect())},t.prototype.unChoosed=function(){this.unChoosing(),this.node.opacity=255},t.prototype.reShow=function(a){var t=this;this.node.parent=this.view.pots_container,this.changePos(a),this.isForShow=!1,this.isLock=!1,this.pic_op=this.node.getChildByName("pic_op").getComponent(cc.Sprite),this.node.scale=1,this.show();var e="garden_move_normal",o=null;this.view.curEnv===p.pzaGardenEnv.night?(e="garden_move_night",o="Effect/PlantEffect/05_plant"):this.view.curEnv===p.pzaGardenEnv.water&&(e="garden_move_water",o="Effect/PlantEffect/13_water"),d.pzaSoundManager.playAudio(e),o&&s.pzaResMgr.instance().getSpineSync(o,function(e,o){if(e)console.error(e);else{var n=new cc.Node,i=n.addComponent(sp.Skeleton);i.skeletonData=o,n.setPosition(a.node.getPosition()),n.parent=t.view.layer_tip,i.setCompleteListener(function(){n.destroy()}),i.setAnimation(0,"idle",!1)}})},t.prototype.showChoosingEffect=function(){var a=this;if(!this.choosingTW){var t=function(t,e,o,n){var i=t+(e-t)*n;return a.pic_pot.getMaterial(0).setProperty("brightness",i),a.spine_plant.getMaterial(0).setProperty("brightness",i),i};this.choosingTW=cc.tween({c:1}).repeatForever(cc.tween().to(.5,{c:3},{progress:t}).to(.5,{c:1},{progress:t})),this.choosingTW.start()}},t.prototype.choosing=function(){this.isLock=!0,this.showChoosingEffect()},t.prototype.onlyForShow=function(){this.isForShow=!0,this.unChoosed()},t.prototype.hideChoosingEffect=function(){this.choosingTW&&(this.choosingTW.stop(),this.choosingTW=null,this.pic_pot.getMaterial(0).setProperty("brightness",1),this.spine_plant.getMaterial(0).setProperty("brightness",1))},t.prototype.unChoosing=function(){this.isLock=!1,this.spine_plant.node&&(this.spine_plant.node.color=cc.Color.WHITE),this.pic_pot.node&&(this.pic_pot.node.color=cc.Color.WHITE),this.hideChoosingEffect()},t.prototype.watered=function(){var a=this;"Texture/MainView/GardenView/garden_pot"===this.pic_pot.spriteFrame.name&&l.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_pot_wet",function(t,e){null==t?e?a.pic_pot.spriteFrame=e:c.default.err("\u65e0pot\u56fe"):console.error(t)})},t.prototype.unwatered=function(){var a=this;"Texture/MainView/GardenView/garden_pot_wet"===this.pic_pot.spriteFrame.name&&l.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_pot",function(t,e){null==t?e?a.pic_pot.spriteFrame=e:c.default.err("\u65e0pot\u56feunwatered"):console.error(t)})},t.prototype.isSleep=function(){return this.plantConf.env===p.pzaGardenEnv.night&&this.view.curEnv!==p.pzaGardenEnv.night&&this.plant.level<4},t.prototype.getLevelScale=function(){return this.plant.env!==this.view.curEnv&&this.view.curEnv===p.pzaGardenEnv.normal?.6:1===this.plant.level?.5:2===this.plant.level?.7:.9},t.prototype.fixSpineY=function(){17===this.plant.plantId?this.spine_plant.node.y=15:this.spine_plant.node.y=0},t.prototype.updatePlantAni=function(){var a=this;if(39===this.plant.plantId&&this.plant.level>0&&this.spine_plant.setSkin("skin1"),this.water_shadow.active=!1,0===this.plant.level){var t=39===this.plant.plantId?"idle3":"idle4";this.spine_plant.setAnimation(0,t,!0),this.view.curEnv!==p.pzaGardenEnv.normal&&(this.pic_pot.node.active=!1,this.water_shadow.active=!0)}else t=this.spine_plant.findAnimation("idle")?"idle":"idle1",this.isSleep()?(this.spine_sleep.node.active=!0,this.spine_sleep.setAnimation(0,"idle",!0),t=this.plantConf.ani?this.plantConf.ani:"idle2"):this.plantConf.ani&&(t=this.plantConf.ani),this.spine_plant.setAnimation(0,t,!0),this.spine_plant.paused=!1,this.view.curEnv===p.pzaGardenEnv.normal?this.pic_pot.node.active=!0:(this.pic_pot.node.active=!1,this.view.curEnv===p.pzaGardenEnv.water&&(this.water_shadow.active=!0)),this.plantConf.env===p.pzaGardenEnv.water&&this.view.curEnv!==p.pzaGardenEnv.water?(l.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_pot_water",function(t,e){null==t?e?(a.pic_pot.spriteFrame=e,a.pic_pot.node.active=!0):c.default.err("\u65e0\u6c34\u76c6\u56fe"):console.error(t)}),this.pic_op.node.active=!1):this.plantConf.env===p.pzaGardenEnv.night&&this.view.curEnv!==p.pzaGardenEnv.night&&(this.pic_op.node.active=!1),this.spine_plant.node.scale=this.getLevelScale(this.plant),this.spine_plant.node.scaleX*=this.plant.towards,this.plant.canLight()&&this.showLight(),this.fixSpineY();this.spine_plant.paused=!1},t.prototype.changePos=function(a){var t=this.plant.pos;this.plant.pos=a.posId,a.pot=null,this.plant.env!==this.view.curEnv?p.default.instance().changeEnv(this.plant,this.view.curEnv):t>=0&&t!==this.plant.pos&&(this.view.curShadowArr[t].getComponent(u.pzaGardenShadow).pot=null),this.node.setPosition(a.node.getPosition()),this.view.curShadowArr[this.plant.pos].getComponent(u.pzaGardenShadow).pot=this,p.default.instance().savePlant(this.plant),d.pzaSoundManager.playAudio("garden_move_normal"),this.view.curEnv!==p.pzaGardenEnv.normal||this.pic_pot.node.active||(this.pic_pot.node.active=!0)},t.prototype.show=function(a,t){var e=this;void 0===a&&(a=!1),void 0===t&&(t=null),this.unChoosed(),this.spine_sleep.node.active=!1,this.spine_light.node.active=!1,this.pic_op.node.active=!1;var o=0===this.plant.level?"Plant/50_plant":this.plantConf.plantSpine;s.pzaResMgr.instance().getSpineSync(o,function(a,o){a?console.error(a):e.spine_plant&&(e.spine_plant.skeletonData=o,e.plantConf.skin&&e.plant.level>0&&e.spine_plant.setSkin(e.plantConf.skin),e.updatePlantAni(),t&&t.call(e))}),this.updateState()},t.prototype.showLight=function(){this.spine_light.node.active=!0;var a="idle1";this.view.curEnv===p.pzaGardenEnv.normal?"Texture/MainView/GardenView/garden_pot_water"===this.pic_pot.spriteFrame.name&&(a="idle3"):a="idle2",this.spine_light.setAnimation(0,a,!0)},t.prototype.doOperation=function(a){var t=this;if(this.plant&&this.canBeChoosed(a)){var e=this.plant.doOperation();if(p.default.instance().savePlant(this.plant),e){if(this.spine_light.node.active=!1,e.isLight&&this.showLight(),e.dropNum>0)for(var o=0;o<e.dropNum;o++)this.view.dropCoin(this.node.getPosition(),e.dropType);if(e.isWet&&this.watered(),e.isLevelUp){var n=this.getLevelScale(this.plant);1===this.plant.level?this.show(!1,function(){cc.tween(t.spine_plant.node).to(1,{scaleX:n*t.plant.towards,scaleY:n}).start()}):cc.tween(this.spine_plant.node).to(1,{scaleX:n*this.plant.towards,scaleY:n}).start(),d.pzaSoundManager.playAudio("garden_plantgrow")}this.pic_op.node.active=!1}}},t.prototype.updateState=function(){var a=this;if(!this.spine_sleep.node.active&&this.plant){var t=Date.now();if(this.plant.canLight()&&this.plant.lightGoneTime<t)return this.plant.doOperation(),p.default.instance().savePlant(this.plant),void(this.spine_light.node.active=!1);if(this.plant.opLeft>0&&this.plant.opTime>0&&this.plant.opTime<t){if(this.pic_op.node.active)return;if(this.pic_op.node.active=!1,this.plant.opType===p.pzaGardenOpType.income){var e=Math.random()<.025?r.pzaDropType.GOLD_COIN:r.pzaDropType.SILVER_COIN;this.view.dropCoin(this.node.getPosition(),e);var o=this.plant.doOperation();p.default.instance().savePlant(this.plant),o&&o.offLight&&(this.spine_light.node.active=!1)}else{if(this.pic_op.node.active=!0,this.plantConf.env===p.pzaGardenEnv.water&&(this.view.curEnv!==p.pzaGardenEnv.water&&this.plant.level>0&&(this.pic_op.node.active=!1),this.plant.opType===p.pzaGardenOpType.water))return console.log("\u6c34\u751f\u8df3\u8fc7\u6d47\u6c34"),this.pic_op.spriteFrame=null,this.plant.doOperation(),void p.default.instance().savePlant(this.plant);var n=p.default.instance().opPicMap.get(this.plant.opType);l.pzaBundleObjectPool.requestSpriteFrameByUrl(n,function(t,e){null==t?e?a.pic_op&&(a.pic_op.spriteFrame=e,a.plant.opType===p.pzaGardenOpType.water?(a.pic_op.node.scale=1,a.unwatered()):a.pic_op.node.scale=.6):c.default.err("\u82b1\u56ed\u65e0op\u56fe"):console.error(t)})}}}},t.prototype.update=function(){this.isLock||this.updateState()},i([f({displayName:"\u6c34\u751f\u5e7c\u82d7\u9634\u5f71",type:cc.Node})],t.prototype,"water_shadow",void 0),i([f({displayName:"\u82b1\u76c6\u56fe",type:cc.Sprite})],t.prototype,"pic_pot",void 0),i([f({displayName:"\u64cd\u4f5c\u7c7b\u578b\u56fe",type:cc.Sprite})],t.prototype,"pic_op",void 0),i([f({displayName:"\u690d\u7269spine",type:sp.Skeleton})],t.prototype,"spine_plant",void 0),i([f({displayName:"\u53d1\u5149",type:sp.Skeleton})],t.prototype,"spine_light",void 0),i([f({displayName:"\u7761\u89c9",type:sp.Skeleton})],t.prototype,"spine_sleep",void 0),i([m],t)}(cc.Component);e.pzaGardenPot=z,cc._RF.pop()},{"../Battle/Data/pzaDropType":"pzaDropType","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaGardenMgr":"pzaGardenMgr","./pzaGardenShadow":"pzaGardenShadow"}],pzaGardenShadow:[function(a,t,e){"use strict";cc._RF.push(t,"1c55ehgrAxMcK6K+8S4IhPN","pzaGardenShadow");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenShadow=void 0;var r=a("./pzaGardenMgr"),p=a("./pzaGardenView"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.view=null,t.posId=0,t.pot=null,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.view=this.node.parent.parent.parent.parent.getComponent(p.pzaGardenView),this.view||(this.view=this.node.parent.parent.parent.getComponent(p.pzaGardenView))},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchStart=function(){if(this.view&&(!this.view.curTool||this.view.curTool.type!==r.pzaGardenToolType.goldWaterPot))if(this.pot)this.pot.onTouchStart();else if(this.view.cartPot&&this.view.curTool&&this.view.curTool.type===r.pzaGardenToolType.cart)(a=this.view.toolMap.get(r.pzaGardenToolType.cart))&&a.execTarget(this);else if(this.view.glovePot&&this.view.curTool&&this.view.curTool.type===r.pzaGardenToolType.glove){var a;(a=this.view.toolMap.get(r.pzaGardenToolType.glove))&&a.execTarget(this)}},t.prototype.onTouchEnd=function(){this.pot&&this.view&&this.view.curTool&&this.view.curTool.type!==r.pzaGardenToolType.goldWaterPot&&this.view.curTool.type!==r.pzaGardenToolType.goldWaterPot&&this.pot.onTouchEnd()},i([s],t)}(cc.Component));e.pzaGardenShadow=c,cc._RF.pop()},{"./pzaGardenMgr":"pzaGardenMgr","./pzaGardenView":"pzaGardenView"}],pzaGardenSnail:[function(a,t,e){"use strict";cc._RF.push(t,"21d1eYCqihAeaMR/47RoFBe","pzaGardenSnail");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenSnail=e.pzaGardenSnailState=void 0;var r,p=a("../Common/pzaSoundManager"),l=a("../utils/pzakc"),s=a("./pzaGardenDropCoin"),c=a("./pzaGardenMgr"),u=cc._decorator,d=u.ccclass,h=u.property;(function(a){a.collect="collect",a.sleep="sleep"})(r=e.pzaGardenSnailState||(e.pzaGardenSnailState={}));var m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine_snail=null,t.spine_sleep=null,t.sleep_arrow=null,t.view=null,t.state=r.collect,t.targetNode=null,t.maxActiveTime=60,t.activeTime=0,t.speedX=50,t.speedXSwitchTime=1,t.speedY=50,t.isLock=!0,t.speedUp=1,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.init=function(a){var t=this;return this.view=a,this.node.parent=a.layer_snail,this.node.active=!0,this.node.setPosition(cc.v2(-10,-10)),this.scheduleOnce(function(){t.changeTarget(null,!0)}),this.stateCollect(),this},t.prototype.onTouchStart=function(a){this.state!==r.sleep?this.view.curTool&&this.view.curTool.type===c.pzaGardenToolType.chocolate&&this.view.curTool.isChoosing&&(this.eatChocolate(),this.view.curTool.updateToolNum(),this.view.curTool.playAni(this.view.layer_tool_drag.convertToNodeSpaceAR(a.getLocation()),null,null)):this.wakeUp()},t.prototype.eatChocolate=function(){var a=this;this.speedUp=2,this.scheduleOnce(function(){a.speedUp=1},3600),p.pzaSoundManager.playAudio("garden_speedup")},t.prototype.hide=function(){this.isLock=!0,this.node.active=!1},t.prototype.show=function(){this.isLock=!1,this.node.active=!0},t.prototype.wakeUp=function(){var a=this;this.isLock=!0,this.spine_snail.setCompleteListener(null),this.spine_snail.setCompleteListener(function(){a.isLock=!1,a.spine_snail.setCompleteListener(null),a.spine_snail.setAnimation(0,"move",!0),a.stateCollect()}),this.spine_snail.setAnimation(0,"out",!1)},t.prototype.toSleep=function(){var a=this;this.isLock=!0,this.spine_snail.setCompleteListener(null),this.spine_snail.setCompleteListener(function(){a.isLock=!1,a.stateSleep()}),this.spine_snail.setAnimation(0,"in",!1)},t.prototype.findTarget=function(a){void 0===a&&(a=null);for(var t=this.view.layer_coin.children,e=this.node.getPosition(),o=null,n=1280,i=0;i<t.length;i++){var r=t[i];if(r.getComponent(s.pzaGardenDropCoin).canPick){var p=e.sub(r.getPosition()).mag();p<n&&(n=p,o=r)}}if(o)n<10&&(o.getComponent(s.pzaGardenDropCoin).pickUp(),this.changeTarget());else{if(t=this.view.pots_container.children,a){var c=[];for(i=0;i<t.length;i++)t[i].uuid!==a.uuid&&c.push(t[i]);t=c}o=l.default.randomChoose(t,1)[0]}return o},t.prototype.changeTarget=function(a,t){var e=this;if(void 0===a&&(a=null),void 0===t&&(t=!1),this.targetNode=this.findTarget(a),this.targetNode){var o=this.node.x;this.targetNode.x>o&&this.node.scaleX<0||this.targetNode.x<o&&this.node.scaleX>0?(this.isLock=!0,this.spine_snail.setCompleteListener(null),this.spine_snail.setCompleteListener(function(){e.node.scaleX=-e.node.scaleX,e.isLock=!1,e.spine_snail.setCompleteListener(null),e.spine_snail.setAnimation(0,"move",!0)}),this.spine_snail.setAnimation(0,"turn",!1)):t&&(this.isLock=!1,this.spine_snail.setCompleteListener(null),this.spine_snail.setAnimation(0,"move",!0))}else console.error("\u8717\u725b\u65e0\u76ee\u6807")},t.prototype.stateCollect=function(){this.activeTime=0,this.state=r.collect,cc.Tween.stopAllByTarget(this.sleep_arrow),this.spine_sleep.node.active=!1,this.sleep_arrow.active=!1,this.spine_sleep.paused=!0},t.prototype.stateSleep=function(){this.activeTime=this.maxActiveTime,this.state=r.sleep,this.spine_sleep.node.active=!0,this.sleep_arrow.active=!0,cc.Tween.stopAllByTarget(this.sleep_arrow),cc.tween(this.sleep_arrow).repeatForever(cc.tween().to(.2,{y:85}).to(.2,{y:50})).start(),this.spine_sleep.setAnimation(0,"idle",!0),this.spine_sleep.paused=!1,this.spine_snail.setCompleteListener(null),this.spine_snail.setAnimation(0,"idle1",!1)},t.prototype.update=function(a){if(!this.isLock&&this.state!==r.sleep)if(this.activeTime+=a,this.activeTime>=(this.speedUp>1?3600:this.maxActiveTime))this.toSleep();else{var t=this.node.getPosition();this.targetNode&&this.targetNode.isValid||this.changeTarget(),!this.targetNode.getComponent(s.pzaGardenDropCoin)&&this.view.layer_coin.children.length>0&&this.changeTarget();var e=this.targetNode.getPosition();t.fuzzyEquals(e,10)&&(this.targetNode.getComponent(s.pzaGardenDropCoin)?(this.targetNode.getComponent(s.pzaGardenDropCoin).pickUp(),this.changeTarget()):this.changeTarget(this.targetNode)),this.speedXSwitchTime-=a,this.speedXSwitchTime<=0&&(50===this.speedX?(this.speedX=120,this.speedXSwitchTime=.6):(this.speedX=50,this.speedXSwitchTime=1));var o=e.sub(t),n=o.mag(),i=this.speedX*a*this.speedUp/n*o.x,p=this.speedY*a*this.speedUp/n*o.y;this.node.x+=i,this.node.y+=p}},i([h({displayName:"\u8717\u725bspine",type:sp.Skeleton})],t.prototype,"spine_snail",void 0),i([h({displayName:"\u7761\u89c9spine",type:sp.Skeleton})],t.prototype,"spine_sleep",void 0),i([h({displayName:"\u7761\u89c9\u7bad\u5934",type:cc.Node})],t.prototype,"sleep_arrow",void 0),i([d],t)}(cc.Component);e.pzaGardenSnail=m,cc._RF.pop()},{"../Common/pzaSoundManager":"pzaSoundManager","../utils/pzakc":"pzakc","./pzaGardenDropCoin":"pzaGardenDropCoin","./pzaGardenMgr":"pzaGardenMgr"}],pzaGardenTool:[function(a,t,e){"use strict";cc._RF.push(t,"9d63ec3acNAlLxgE9iS6YIg","pzaGardenTool");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenTool=void 0;var r=a("./pzaGardenMgr"),p=a("../Load/pzaBundleObjectPool"),l=a("../utils/pzaResMgr"),s=a("../utils/pzakc"),c=a("./pzaGardenView"),u=a("./pzaGardenPot"),d=a("./pzaGardenShadow"),h=a("../Common/pzaLocalData"),m=a("../Common/pzaSoundManager"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.pic_tool=null,t.plant_cart=null,t.pic_plant_op=null,t.t_num=null,t.spine_tool=null,t.guide_arrow=null,t.type=r.pzaGardenToolType.waterPot,t.num=0,t.view=null,t.isDrag=!1,t.isChoosing=!1,t.isDoing=!1,t.dragNode=null,t.moveMinDist=50,t.moveStartPos=null,t.guideClickCall=null,t.guideUseCall=null,t.toolAudioMap=new Map([[r.pzaGardenToolType.manure,"garden_manure"],[r.pzaGardenToolType.phonograph,"garden_phonograph"],[r.pzaGardenToolType.waterPot,"garden_water"],[r.pzaGardenToolType.goldWaterPot,"garden_water"],[r.pzaGardenToolType.pesticide,"garden_pesticide"],[r.pzaGardenToolType.chocolate,"garden_wakeup"]]),t}var e;return n(t,a),e=t,t.prototype.getOpType=function(){return this.type===r.pzaGardenToolType.waterPot||this.type===r.pzaGardenToolType.goldWaterPot?r.pzaGardenOpType.water:this.type===r.pzaGardenToolType.manure?r.pzaGardenOpType.manure:this.type===r.pzaGardenToolType.pesticide?r.pzaGardenOpType.pesticide:this.type===r.pzaGardenToolType.phonograph?r.pzaGardenOpType.phonograph:this.type===r.pzaGardenToolType.chocolate?r.pzaGardenOpType.chocolate:r.pzaGardenOpType.null},t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.plant_cart.removeAllChildren(),this.plant_cart.active=!1},t.prototype.onDisable=function(){this.unChoosed(!0),this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.init=function(a,t){var e=this;this.type=a,this.view=t,this.node.parent=t.layer_tool,this.view.toolMap.set(this.type,this),this.plant_cart.active=!1,this.guide_arrow.active=!1,this.guideClickCall=null,r.default.numToolMap.has(this.type)?(this.t_num.node.active=!0,this.t_num.string="x"+(h.pzaLocalData.data.gardenToolNum[""+a]||0)):this.t_num.node.active=!1,this.type===r.pzaGardenToolType.cart&&t.cartPot&&this.putInCart(t.cartPot),p.pzaBundleObjectPool.requestSpriteFrameByUrl(r.default.instance().toolPicMap.get(this.type),function(a,t){null==a?t?e.pic_tool.spriteFrame=t:s.default.err("\u65e0tool\u56fe"):console.error(a)});var o=r.default.instance().toolSpineMap.get(this.type);return o&&l.pzaResMgr.instance().getSpineSync(o,function(a,t){a?console.error(a):e.spine_tool.skeletonData=t}),this},t.prototype.setTouchStart=function(a){this.moveStartPos=this.view.layer_tool_drag.convertToNodeSpaceAR(a.getLocation())},t.prototype.onTouchStart=function(a){c.pzaGardenView.toolInUse!=r.pzaGardenToolType.null&&c.pzaGardenView.toolInUse!==this.type||(this.isChoosing?this.unChoosed(!0):(c.pzaGardenView.toolInUse=this.type,this.view.curTool=this,m.pzaSoundManager.playAudio("garden_tool_click"),this.type!==r.pzaGardenToolType.nextEnv?(this.setTouchStart(a),this.choosed(),null!=this.guideClickCall&&(this.guideClickCall(),this.guideClickCall=null)):this.exec(null,!1,null)))},t.prototype.onTouchEnd=function(a){var t=this;if(this.isDrag){var e=null;if(this.dragNode&&(this.dragNode.isValid&&(e=this.view.dragPoint.getPosition(),this.dragNode.destroy()),this.dragNode=null),this.isChoosing&&e){if(this.type===r.pzaGardenToolType.glove&&this.view.glovePot)return void this.execTarget(this.view.curShadow);if(this.type===r.pzaGardenToolType.cart&&this.view.cartPot)return void this.unChoosed(!1);var o=this.getOpType(),n=this.view.choosedPots.slice();n.length>0?this.exec(e,!1,n[0].node,function(){for(var a=0;a<n.length;a++){var e=n[a];e.doOperation(o),e.unChoosing()}t.view.curTool.updateToolNum()},this):this.type===r.pzaGardenToolType.goldWaterPot&&this.playAni(this.view.layer_tool_drag.convertToNodeSpaceAR(a.getLocation()),null,null)}}else this.moveStartPos=null,this.isDrag=!1},t.prototype.onTouchMove=function(a){var t=this;if(this.isChoosing&&this.moveStartPos&&this.type!==r.pzaGardenToolType.nextEnv){var e=this.view.layer_tool_drag.convertToNodeSpaceAR(a.getLocation());if(!(e.sub(this.moveStartPos).mag()<this.moveMinDist)){if(this.type===r.pzaGardenToolType.glove&&this.view.glovePot)return this.dragNode?void this.view.dragPoint.setPosition(e):(this.isDrag=!0,this.dragNode=cc.instantiate(this.view.glovePot.node),this.dragNode.getComponent(u.pzaGardenPot).onlyForShow(),this.dragNode.scale=1.5,this.dragNode.parent=this.view.dragPoint,this.dragNode.setPosition(60,60),this.view.dragPoint.setPosition(e),void(this.view.glovePot.node.opacity=0));if(this.isDrag=!0,this.dragNode)this.view.dragPoint.setPosition(e);else{if(this.dragNode=cc.instantiate(this.pic_tool.node),this.dragNode.color=cc.Color.WHITE,this.type===r.pzaGardenToolType.goldWaterPot){if(this.isDoing)return;if(!this.dragNode.children[0]||"waterBall"!==this.dragNode.children[0].name)return void p.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_water_ball",function(a,o){if(null==a)if(o){var n=new cc.Node("waterBall");n.addComponent(cc.Sprite).spriteFrame=o,t.dragNode.parent=n,t.dragNode.setPosition(150,30),t.dragNode=n,t.dragNode.parent=t.view.dragPoint,t.view.dragPoint.setPosition(e)}else s.default.err("\u65e0\u6c34\u5708");else console.error(a)})}this.dragNode.setPosition(150,30),this.dragNode.parent=this.view.dragPoint,this.view.dragPoint.setPosition(e)}}}},t.prototype.putInCart=function(a){this.view.cartPot=a,a.isForShow=!0,a.unChoosed(),a.spine_plant.paused=!0,a.node.scale=.5,a.pic_op.node.active&&(this.pic_plant_op.spriteFrame=a.pic_op.spriteFrame),a.pic_op.node.active=!1,s.default.removeNodeChildren(this.plant_cart),a.node.parent=this.plant_cart,a.node.setPosition(0,0),a.plant.pos>=0&&(this.view.curShadowArr[a.plant.pos].getComponent(d.pzaGardenShadow).pot=null),a.pic_op=this.pic_plant_op,a.plant.opType===r.pzaGardenOpType.water?this.pic_plant_op.node.scale=1:this.pic_plant_op.node.scale=.6,a.plant.pos=-1,a.water_shadow.active=!1,r.default.instance().savePlant(a.plant),this.plant_cart.active=!0,this.unChoosed(!1),m.pzaSoundManager.playAudio("garden_cart")},t.prototype.choosed=function(){if(r.default.numToolMap.has(this.type)&&!h.pzaLocalData.data.gardenToolNum[""+this.type])return this.view.showTip("\u6570\u91cf\u4e0d\u8db3!"),void this.unChoosed(!1);this.isChoosing=!0,this.view.chooseTool(this),this.choosedAni(this.pic_tool.node),this.type!==r.pzaGardenToolType.cart&&this.type!==r.pzaGardenToolType.glove||this.view.curEnv!==r.pzaGardenEnv.normal&&this.view.showShadows()},t.prototype.choosedAni=function(a,t){if(void 0===t&&(t=!1),t){var e=a.tw;return e&&e.stop(),void(a.color=cc.Color.WHITE)}var o=function(t,e,o,n){var i=t+(e-t)*n,r=new cc.Color(i,i,i);return a&&(a.color=r),i},n=cc.tween({c:255}).repeatForever(cc.tween().to(.5,{c:40},{progress:o}).to(.5,{c:255},{progress:o}));a.tw=n,n.start()},t.prototype.unChoosed=function(a){this.node?(this.isDrag=!1,this.pic_tool.node.color=cc.Color.WHITE,this.isChoosing=!1,this.isDoing=!1,this.dragNode=null,a&&this.view.unchooseTool(),this.choosedAni(this.pic_tool.node,!0),!1===this.pic_tool.node.active&&(this.pic_tool.node.active=!0,this.view.glovePot=null,this.view.hideShadows()),this.view.cartPot||(this.plant_cart.active=!1),this.type===r.pzaGardenToolType.sell?this.view.sellPot=null:this.type===r.pzaGardenToolType.cart&&(this.view.hideShadows(),this.view.unchooseTool()),c.pzaGardenView.toolInUse=r.pzaGardenToolType.null):c.pzaGardenView.toolInUse=r.pzaGardenToolType.null},t.prototype.playAni=function(a,t,e){if(void 0===e&&(e=null),!this.isDoing){this.isDoing=!0;var o=this.spine_tool.node;o.parent=this.view.layer_tool_drag,o.setPosition(a),o.active=!0,this.spine_tool.setCompleteListener(null);var n=this,i=!1,p=function(){i||(i=!0,o.active=!1,o.parent=n.node,t&&t.call(e),n.unChoosed(!0))},l="idle";this.type!==r.pzaGardenToolType.goldWaterPot&&this.type!==r.pzaGardenToolType.chocolate||(l="idle2");var s=this.spine_tool.findAnimation(l);s||(l="idle1",s=this.spine_tool.findAnimation(l)),this.scheduleOnce(p,s.duration+.1),this.spine_tool.setCompleteListener(p),this.type===r.pzaGardenToolType.chocolate?this.spine_tool.node.scale=.5:this.spine_tool.node.scale=1,this.spine_tool.setAnimation(0,l,!1);var c=this.toolAudioMap.get(this.type);if(c&&m.pzaSoundManager.playAudio(c),null!=this.guideUseCall){var u=this.guideUseCall;this.guideUseCall=null,u()}}},t.prototype.updateToolNum=function(a){void 0===a&&(a=1),r.default.numToolMap.has(this.type)&&(r.default.instance().useGardenTool(this.type,a),this.t_num.node.active=!0,this.t_num.string="x"+(h.pzaLocalData.data.gardenToolNum[""+this.type]||0))},t.prototype.exec=function(a,t,e,o,n){var i=this;if(void 0===o&&(o=null),void 0===n&&(n=null),this.type===r.pzaGardenToolType.nextEnv)return this.unChoosed(!0),this.view.nextEnv(),void(o&&o.call(n));if(this.type===r.pzaGardenToolType.glove)return!e||this.view.glovePot?void this.unChoosed(!0):(this.view.glovePot=e.getComponent(u.pzaGardenPot),this.view.glovePot.isLock=!0,this.view.glovePot.willBeChoosed(null,!0),this.isDoing=!0,void(this.pic_tool.node.active=!1));if(this.type===r.pzaGardenToolType.cart){if(!e||this.view.cartPot)return void this.unChoosed(!0);var p=e.getComponent(u.pzaGardenPot);return this.putInCart(p),void this.choosedAni(this.pic_tool.node,!0)}return this.type===r.pzaGardenToolType.sell?e?(this.unChoosed(!0),this.view.sellPot=e.getComponent(u.pzaGardenPot),void this.view.showSell()):void this.unChoosed(!0):this.type===r.pzaGardenToolType.chocolate?e?h.pzaLocalData.data.gardenToolNum[""+r.pzaGardenToolType.chocolate]?(e.getComponent(u.pzaGardenPot).speedUp(),this.updateToolNum(),void this.playAni(a,o,n)):(this.unChoosed(!0),console.error("\u5de7\u514b\u529b\u6570\u91cf\u4e0d\u8db3!"),void this.view.showTip("\u5de7\u514b\u529b\u6570\u91cf\u4e0d\u8db3!")):void this.unChoosed(!0):this.type===r.pzaGardenToolType.goldWaterPot?(this.playAni(a,function(){var a=i.view.choosedPots.slice();if(a.length>0)for(var t=0;t<a.length;t++){var e=a[t];e.doOperation(r.pzaGardenOpType.water),e.unChoosing()}},this),void this.view.curTool.updateToolNum()):void(!t&&this.view.choosedPots.length<=0?this.isDrag=!1:this.spine_tool.skeletonData&&a?this.playAni(a,o,n):this.unChoosed(!0))},t.prototype.execTarget=function(a){if(this.type!==r.pzaGardenToolType.sell){if(!a)return s.default.err("\u672a\u9009\u62e9\u76ee\u6807\u6216\u76ee\u6807\u4f4d\u7f6e"),void(this.view.glovePot&&(this.view.curShadowArr[this.view.glovePot.plant.pos].getComponent(d.pzaGardenShadow).pot=this.view.glovePot,this.view.glovePot.unChoosed(),this.unChoosed(!1)));if(this.type===r.pzaGardenToolType.glove){if(!this.view.glovePot)return;return this.view.glovePot.changePos(a),this.view.glovePot.unChoosed(),this.view.glovePot=null,void this.unChoosed(!1)}if(this.type===r.pzaGardenToolType.cart){var t=this.view.cartPot;if(!t)return void this.unChoosed(!1);var e=this.putEnvMsg(t);if(e)return console.error(e),void this.view.showTip(e);this.pic_plant_op.spriteFrame=null,t.reShow(a),this.view.cartPot=null,this.unChoosed(!1)}}},t.prototype.putEnvMsg=function(a){var t=this.view.curEnv;return t===a.plantConf.env?null:t===r.pzaGardenEnv.water&&a.plantConf.env!==r.pzaGardenEnv.water?"\u4f60\u53ea\u80fd\u79cd\u690d\u6c34\u751f\u690d\u7269\uff0c\u8fd9\u53ef\u662f\u5728\u6c34\u4e0b\uff01":null},t.prototype.showGuideArrow=function(a,t){this.guide_arrow.active=!0,this.guideClickCall=a,this.guideUseCall=t,cc.Tween.stopAllByTarget(this.guide_arrow),cc.tween(this.guide_arrow).repeatForever(cc.tween().to(.3,{y:-110}).to(.3,{y:-85})).start()},t.prototype.hideGuideArrow=function(){this.guide_arrow.active=!1},t.show=function(a,t){p.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Garden/garden_tool",!1,function(o,n){if(null==o&&null!=n){var i=n.getComponent(e);i&&i.init(a,t)}else console.error(o)})},i([y({displayName:"\u5de5\u5177\u56fe",type:cc.Sprite})],t.prototype,"pic_tool",void 0),i([y({displayName:"\u63a8\u8f66\u653e\u7684\u690d\u7269",type:cc.Node})],t.prototype,"plant_cart",void 0),i([y({displayName:"\u63a8\u8f66\u690d\u7269\u72b6\u6001\u56fe",type:cc.Sprite})],t.prototype,"pic_plant_op",void 0),i([y({displayName:"\u6570\u91cf",type:cc.Label})],t.prototype,"t_num",void 0),i([y({displayName:"\u5bf9\u5e94spine",type:sp.Skeleton})],t.prototype,"spine_tool",void 0),i([y({displayName:"\u5f15\u5bfc\u7bad\u5934",type:cc.Node})],t.prototype,"guide_arrow",void 0),e=i([z],t)}(cc.Component);e.pzaGardenTool=g,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaGardenMgr":"pzaGardenMgr","./pzaGardenPot":"pzaGardenPot","./pzaGardenShadow":"pzaGardenShadow","./pzaGardenView":"pzaGardenView"}],pzaGardenView:[function(a,t,e){"use strict";cc._RF.push(t,"dbaecoUK+pJfZ+nZqv2jsG2","pzaGardenView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGardenView=void 0;var r=a("./pzaGardenDropCoin"),p=a("../Common/pzaGameCommonPool"),l=a("./pzaGardenMgr"),s=a("../Common/pzaUIManager"),c=a("../Load/pzaPreLoadManager"),u=a("../utils/pzakc"),d=a("./pzaGardenPot"),h=a("./pzaGardenTool"),m=a("./pzaGardenShadow"),f=a("../Common/pzaGameConfig"),z=a("../Common/pzaLocalData"),y=a("../Common/pzaTipManager"),g=a("../Load/pzaBundleObjectPool"),v=a("./pzaGardenSnail"),b=a("../Common/pzaSoundManager"),S=a("../Battle/Data/pzaGuideType"),P=a("./pzaGardenDave"),C=a("../View/pzaShopView"),D=a("../Common/pzaUtil"),M=a("../Common/pzaStatisticsMgr"),E=cc._decorator,_=E.ccclass,T=E.property,w=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.dragPoint=null,t.layer_snail=null,t.layer_tip=null,t.layer_board=null,t.layer_coin=null,t.layer_tool_drag=null,t.layer_tool=null,t.pots_container=null,t.pic_bg=null,t.pots_normal_shadow=null,t.pots_night_shadow=null,t.pots_water_shadow=null,t.bt_shop=null,t.bt_home=null,t.moneyCount=null,t.moneyShowNode=null,t.moneyTarget=null,t.dave=null,t.prefab_pot=null,t.prefab_snail=null,t.shadows_normal=[],t.shadows_night=[],t.shadows_water=[],t.toolMap=new Map,t.curEnv=l.pzaGardenEnv.normal,t.curShadowContainer=null,t.curShadowArr=null,t.curTool=null,t.glovePot=null,t.sellPot=null,t.cartPot=null,t.snail=null,t.curShadow=null,t.choosedPots=[],t.lastShowCoinCount=null,t.hideMoneyNodeTime=0,t.guideManureCheck=!1,t.isNeedRefreshPlants=!1,t.isNeedRefreshTools=!1,t.unPickCoin=0,t}var e;return n(t,a),e=t,t.prototype.onEnable=function(){var a=this;M.pzaStatisticsMgr.sendEvent("System",{name:"system",value:5}),this.curShadowContainer=this.pots_normal_shadow,this.bt_home.on(cc.Node.EventType.TOUCH_END,function(){b.pzaSoundManager.playSFX(),y.pzaTipManager.hideHomeTip(),p.pzaGameCommonPool.returnInstant(a.node)},this),this.bt_shop.on(cc.Node.EventType.TOUCH_END,this.clickShop,this),D.pzaUtil.blinkAni(this.bt_shop,!0),D.pzaUtil.blinkAni(this.bt_home,!0),this.layer_board.on(cc.Node.EventType.TOUCH_START,this.onToolTouchStart,this),this.layer_board.on(cc.Node.EventType.TOUCH_MOVE,this.onToolTouchMove,this),this.layer_board.on(cc.Node.EventType.TOUCH_CANCEL,this.onToolTouchEnd,this),this.layer_board.on(cc.Node.EventType.TOUCH_END,this.onToolTouchEnd,this),this.dave.node.active=!1,this.isNeedRefreshPlants=!1,u.default.delMsgReciever("addNewGardenPlant"),u.default.regMsgReciever("addNewGardenPlant",function(){return a.isNeedRefreshPlants=!0,!1}),this.isNeedRefreshTools=!1,u.default.delMsgReciever("addNewGardenTool"),u.default.regMsgReciever("addNewGardenTool",function(){return a.isNeedRefreshTools=!0,!1}),this.moneyShowNode.active=!1,this.lastShowCoinCount=null,this.hideMoneyNodeTime=0,this.guideManureCheck=!1,z.pzaLocalData.data.curGuideType==S.pzaGuideType.GUIDE_GARDEN_5_4&&(z.pzaLocalData.gardenGuiding=!0,this.showGardenGuide()),this.cartPot=null,this.curTool=null,e.toolInUse=l.pzaGardenToolType.null;for(var t=0;t<l.default.instance().addPlantArr.length;t++)l.default.instance().addGardenPlant(l.default.instance().addPlantArr[t]);for(l.default.instance().addPlantArr=[],t=0;t<z.pzaLocalData.data.dropPlantArr.length;t++)l.default.instance().addGardenPlant(z.pzaLocalData.data.dropPlantArr[t]);z.pzaLocalData.data.dropPlantArr=[],z.pzaLocalData.addDirty("dropPlantArr")},t.prototype.onDisable=function(){this.unschedule(this.saveLastTime),this.removeUnPickCoin(),this.bt_home.off(cc.Node.EventType.TOUCH_END),this.bt_shop.off(cc.Node.EventType.TOUCH_END),this.layer_board.off(cc.Node.EventType.TOUCH_START,this.onToolTouchStart,this),this.layer_board.off(cc.Node.EventType.TOUCH_MOVE,this.onToolTouchMove,this),this.layer_board.off(cc.Node.EventType.TOUCH_CANCEL,this.onToolTouchEnd,this),this.layer_board.off(cc.Node.EventType.TOUCH_END,this.onToolTouchEnd,this),b.pzaSoundManager.playBgm(b.pzaBGMName.LOADING)},t.prototype.removeUnPickCoin=function(){var a=this;z.pzaLocalData.data.gardenToolNum[""+l.pzaGardenToolType.snail]&&this.layer_coin.children.forEach(function(t){var e=t.getComponent(r.pzaGardenDropCoin);e.canPick&&(a.unPickCoin+=e.price),t.isValid&&t.destroy()})},t.prototype.onToolTouchStart=function(a){this.curTool&&this.curTool.isChoosing&&this.curTool.setTouchStart(a)},t.prototype.onToolTouchMove=function(a){this.curTool&&this.curTool.onTouchMove(a)},t.prototype.onToolTouchEnd=function(a){var t=this;if(this.curTool&&this.curTool.isChoosing)if(this.curTool.isDrag)this.curTool.onTouchEnd(a);else if(this.curTool.type===l.pzaGardenToolType.goldWaterPot){if(this.curTool.isDoing)return;var e=this.layer_tool_drag.convertToNodeSpaceAR(a.getLocation());if(g.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_water_ball",function(a,o){if(null==a)if(o){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=o,n.parent=t.layer_tool_drag,n.setPosition(e),t.scheduleOnce(function(){n.destroy()},.3)}else u.default.err("\u65e0\u6c34\u5708");else console.error(a)}),this.dragChoose(e)){var o=this.choosedPots.slice();o.length>0&&this.curTool.exec(e,!1,o[0].node,null,null)}else this.curTool.playAni(e,null,null)}else this.curTool.isDoing||this.curTool.unChoosed(!0)},t.prototype.init=function(){this.shadows_normal=[];for(var a=0;a<this.pots_normal_shadow.children.length;a++)this.shadows_normal[a]=this.pots_normal_shadow.children[a],this.shadows_normal[a].getComponent(m.pzaGardenShadow).posId=a;for(this.shadows_night=[],a=0;a<this.pots_night_shadow.children.length;a++)this.shadows_night[a]=this.pots_night_shadow.children[a],this.shadows_night[a].getComponent(m.pzaGardenShadow).posId=a;for(this.shadows_water=[],a=0;a<this.pots_water_shadow.children.length;a++)this.shadows_water[a]=this.pots_water_shadow.children[a],this.shadows_water[a].getComponent(m.pzaGardenShadow).posId=a;this.curShadowArr=this.shadows_normal,this.showTools(),this.showOffLineReward(),this.unschedule(this.saveLastTime),this.schedule(this.saveLastTime,1,cc.macro.REPEAT_FOREVER),this.changeEnv(this.curEnv),b.pzaSoundManager.playBgm(b.pzaBGMName.GARDEN)},t.prototype.showOffLineReward=function(){if(z.pzaLocalData.data.gardenToolNum[""+l.pzaGardenToolType.snail]){var a=this.unPickCoin+l.default.instance().getOffLineReward();a&&(z.pzaLocalData.data.coin+=a,z.pzaLocalData.addDirty("coin"),this.showTip("\u5f53\u4f60\u4e0d\u5728\u7684\u65f6\u5019\uff0c\u8717\u725b\u4e3a\u4f60\u6536\u96c6\u4e86"+a+"!")),this.unPickCoin=0}},t.prototype.saveLastTime=function(){z.pzaLocalData.data.gardenLastTime=Date.now(),z.pzaLocalData.addDirty("gardenLastTime")},t.prototype.showTip=function(a,t){void 0===t&&(t=3),y.pzaTipManager.showHomeTip(a,this.layer_tip,t)},t.prototype.showSell=function(){var a=this;if(!this.sellPot)return this.showTip("\u65e0\u53ef\u552e\u5356\u690d\u7269"),!1;var t="\u6211\u7ed9\u4f60$"+this.sellPot.getPrice()+"\u6765\u6362 "+f.pzaGameConfig.getPlantConfig(this.sellPot.plant.plantId).name+"!";return this.dave.showSell(t,function(){if(a.sellPot){var t=a.sellPot.getPrice();z.pzaLocalData.data.coin+=t,z.pzaLocalData.addDirty("coin"),b.pzaSoundManager.playAudio("garden_sell"),a.sellPot.remove(),a.sellPot=null,a.moneyShowNode.active=!0,a.hideMoneyNodeTime=8}}),this.moneyShowNode.active=!0,this.hideMoneyNodeTime=8,!0},t.prototype.chooseTool=function(a){if(e.toolInUse==l.pzaGardenToolType.null||e.toolInUse===a.type){this.curTool&&this.curTool!==a&&this.curTool.unChoosed(!1),this.curTool=a;for(var t=this.pots_container.children,o=0;o<t.length;o++)t[o].getComponent(d.pzaGardenPot).willBeChoosed(this.curTool.getOpType())}},t.prototype.unchooseTool=function(){for(var a=this.pots_container.children,t=0;t<a.length;t++)a[t].getComponent(d.pzaGardenPot).unChoosed();this.choosedPots.length=0},t.prototype.hideShadows=function(){this.curEnv!==l.pzaGardenEnv.normal&&(this.curShadowContainer.opacity=0)},t.prototype.showShadows=function(){if(this.curEnv!==l.pzaGardenEnv.normal){var a=new Map;this.pots_container.children.forEach(function(t){var e=t.getComponent(d.pzaGardenPot).plant.pos;a.set(e,1)}),this.curShadowContainer.opacity=255;for(var t=0;t<this.curShadowArr.length;t++){var e=this.curShadowArr[t];a.has(e.getComponent(m.pzaGardenShadow).posId)?e.opacity=0:e.opacity=255}}},t.prototype.getNextEnv=function(a){var t=a+1;return t>l.pzaGardenEnv.water&&(t=l.pzaGardenEnv.normal),t},t.prototype.changeEnv=function(a){var t=this;this.curEnv=a,this.curEnv===l.pzaGardenEnv.normal?(this.curShadowContainer=this.pots_normal_shadow,this.curShadowArr=this.shadows_normal,this.pots_night_shadow.active=!1,this.pots_water_shadow.active=!1):this.curEnv===l.pzaGardenEnv.night?(this.curShadowContainer=this.pots_night_shadow,this.curShadowArr=this.shadows_night,this.pots_normal_shadow.active=!1,this.pots_water_shadow.active=!1,this.curShadowContainer.opacity=0):(this.curShadowContainer=this.pots_water_shadow,this.curShadowArr=this.shadows_water,this.pots_night_shadow.active=!1,this.pots_normal_shadow.active=!1,this.curShadowContainer.opacity=0),this.curShadowContainer.active=!0,this.removeUnPickCoin(),this.curTool&&(this.curTool.unChoosed(!0),this.curTool=null),g.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/garden_bg"+this.curEnv,function(a,e){null==a?e?t.pic_bg.spriteFrame=e:u.default.err("\u65e0\u80cc\u666f\u56fe"):console.error(a)}),this.showPlants(),this.snail&&(this.curEnv===l.pzaGardenEnv.normal?this.snail.show():this.snail.hide())},t.prototype.nextEnv=function(){for(var a=this.getNextEnv(this.curEnv);a!==l.pzaGardenEnv.normal&&!z.pzaLocalData.data.gardenEnv[""+a];)a=this.getNextEnv(a);this.changeEnv(a)},t.prototype.showPlants=function(){u.default.removeNodeChildren(this.pots_container);for(var a=l.default.instance().getCurPlants(this.curEnv),t=0;t<a.length;t++){var e=a[t];cc.instantiate(this.prefab_pot).getComponent(d.pzaGardenPot).init(e,this)}},t.prototype.showTools=function(){u.default.removeNodeChildren(this.layer_tool),null!=z.pzaLocalData.data.gardenToolNum[""+l.pzaGardenToolType.goldWaterPot]?h.pzaGardenTool.show(l.pzaGardenToolType.goldWaterPot,this):h.pzaGardenTool.show(l.pzaGardenToolType.waterPot,this);for(var a=l.pzaGardenToolType.manure;a<=l.pzaGardenToolType.cart;a++)null!=z.pzaLocalData.data.gardenToolNum[""+a]&&h.pzaGardenTool.show(a,this);(z.pzaLocalData.data.gardenEnv[""+l.pzaGardenEnv.night]||z.pzaLocalData.data.gardenEnv[""+l.pzaGardenEnv.water])&&h.pzaGardenTool.show(l.pzaGardenToolType.nextEnv,this),this.curEnv===l.pzaGardenEnv.normal&&z.pzaLocalData.data.gardenToolNum[""+l.pzaGardenToolType.snail]&&(u.default.removeNodeChildren(this.layer_snail),this.snail=cc.instantiate(this.prefab_snail).getComponent(v.pzaGardenSnail).init(this))},t.prototype.dropCoin=function(a,t){var e=this,o=this.moneyTarget.convertToWorldSpaceAR(cc.v2()),n=this.layer_coin.convertToNodeSpaceAR(o);r.pzaGardenDropCoin.show(this.layer_coin,t,a,n,function(){e.moneyShowNode.active=!0,e.hideMoneyNodeTime=8,e.updateMoney(0)})},t.prototype.dragChoose=function(a){var t=1;if(this.curTool.type!==l.pzaGardenToolType.goldWaterPot||(t=4,!this.curTool.isDoing)){this.choosedPots.length=0;for(var e=this.pots_container.children,o=[],n=0;n<e.length;n++){var i=(p=e[n]).getComponent(d.pzaGardenPot),r=p.getPosition().sub(a).mag();r>120?i.unChoosing():o.push({pot:i,dist:r})}if(o.length<=0)return!1;for(o.sort(function(a,t){return a.dist-t.dist}),n=0;n<o.length;n++){var p=o[n];n>=t?p.pot.unChoosing():(p.pot.choosing(),this.choosedPots.push(p.pot))}return this.choosedPots.length>0}},t.prototype.dragForGlove=function(){if(this.glovePot){for(var a=this.curShadowContainer.children,t=this.dragPoint.getPosition(),e=0;e<a.length;e++){var o=a[e];if(o.getPosition().sub(t).mag()<40){if(o.getComponent(m.pzaGardenShadow).pot)continue;return this.curTool.dragNode.setPosition(0,0),this.dragPoint.setPosition(o.getPosition()),this.curTool.dragNode.scale=1,void(this.curShadow=o.getComponent(m.pzaGardenShadow))}}this.curTool.dragNode.setPosition(60,60),this.curTool.dragNode.scale=1.2,this.curShadow=null}},t.prototype.clickShop=function(){var a=this;b.pzaSoundManager.playSFX(),s.pzaUIManager.baseShowPopUI(c.pzaResourceUrl.SHOP_VIEW,function(t){var e=t&&t.getComponent(C.pzaShopView);a.curTool&&a.curTool.unChoosed(!0),z.pzaLocalData.gardenGuiding?(e&&e.bindCloseCall(!1,function(){var t=a.toolMap.get(l.pzaGardenToolType.manure);null!=t&&t.showGuideArrow(null,function(){t.showGuideArrow(null,function(){t.hideGuideArrow(),a.showTip("\u73b0\u5728\u4f60\u53ea\u80fd\u505a\u8fd9\u4e9b\u4e86\uff01\n\u5f53\u4f60\u7684\u690d\u7269\u9700\u8981\u66f4\u591a\u5475\u62a4\u7684\u65f6\u5019\u5728\u56de\u6765\u5427\uff01",10),a.bt_home.active=!0,D.pzaUtil.blinkAni(a.bt_home),l.default.instance().addGardenTool(l.pzaGardenToolType.sell,1,!1),z.pzaLocalData.gardenGuiding=!1,z.pzaLocalData.data.curGuideType=null,z.pzaLocalData.addDirty("curGuideType")})}),a.showTip("\u73b0\u5728\uff0c\u7ed9\u4f60\u7684\u690d\u7269\u65bd\u80a5\uff0c\u770b\u5b83\u4eec\u957f\u5927\u5427\uff01",0)}),D.pzaUtil.blinkAni(a.bt_shop,!0)):e&&e.showShopItem(3)})},t.prototype.update=function(a){this.guideManureCheck&&l.default.instance().checkPlantState(l.pzaGardenOpType.manure)&&(this.bt_shop.active=!0,this.showTip("\u4f60\u7684\u690d\u7269\u9700\u8981\u80a5\u6599\u624d\u80fd\u751f\u957f\uff01\n\u8bbf\u95ee\u5546\u5e97\uff0c\u53bb\u641e\u4e9b\u80a5\u6599\u6765\u628a\uff01",0),this.guideManureCheck=!1,D.pzaUtil.blinkAni(this.bt_shop)),this.updateMoney(a),this.curTool&&this.curTool.isDrag&&this.curTool.dragNode&&(this.curTool.type===l.pzaGardenToolType.glove&&this.glovePot?this.dragForGlove():this.dragChoose(this.dragPoint.getPosition()))},t.prototype.lateUpdate=function(){this.isNeedRefreshPlants&&(this.isNeedRefreshPlants=!1,this.showPlants()),this.isNeedRefreshTools&&(this.isNeedRefreshTools=!1,this.showTools())},t.prototype.updateMoney=function(a){this.moneyShowNode.active&&(this.lastShowCoinCount!=z.pzaLocalData.data.coin&&(this.lastShowCoinCount=z.pzaLocalData.data.coin,this.moneyCount.string=D.pzaUtil.getCurrencyStr(this.lastShowCoinCount)),this.hideMoneyNodeTime-=a,this.hideMoneyNodeTime<=0&&(this.moneyShowNode.active=!1))},t.prototype.showGardenGuide=function(){var a=this;this.bt_shop.active=!1,this.bt_home.active=!1,this.dave.showGuide([new S.pzaDialog("\u563f\uff01\u5feb\u6765\u770b\uff0c\n\u4f60\u627e\u5230\u4e86\u4e00\u4e2a\u6d12\u6c34\u58f6\uff01"),new S.pzaDialog("\u4e3a\u4e86\u7eaa\u5ff5\u8fd9\u4e00\u523b\n\u6211\u5ba3\u5e03\uff1a\n\u4f60\u6b63\u5f0f\u62e5\u6709\u4e86\u4f11\u95f2\u82b1\u56ed\uff01"),new S.pzaDialog("\u563f\uff0c\u4e3a\u4e86\u6709\u4e2a\u597d\u7684\u5f00\u59cb\uff0c\n\u6211\u51b3\u5b9a\u9001\u4f60\u4e00\u4e9b\u82b1\u82d7\uff01",function(){l.default.instance().addGuidePlant(13),l.default.instance().addGuidePlant(14)}),new S.pzaDialog("\u597d\u597d\u7167\u987e\u5b83\u4eec\uff0c\u6211\u4fdd\u8bc1\n\u4f60\u4f1a\u6709\u5f88\u5927\u6536\u83b7\uff01"),new S.pzaDialog("\u73a9\u7684\u5f00\u5fc3\uff01")],function(){var t=a.toolMap.get(l.pzaGardenToolType.waterPot);null!=t&&t.showGuideArrow(function(){t.hideGuideArrow(),a.showTip("\u70b9\u51fb\u4e00\u682a\u5e7c\u82d7\uff0c\u7ed9\u5b83\u6d47\u6c34\uff01",0)},function(){a.showTip("\u4e00\u5b9a\u8981\u7ed9\u5e72\u6e34\u7684\u690d\u7269\u6d47\u6c34\uff01",0),a.guideManureCheck=!0}),a.showTip("\u70b9\u51fb\u55b7\u58f6\uff0c\u5c31\u80fd\u628a\u5b83\u62fe\u8d77\u4e86\uff01",0)})},t.prototype.close=function(){D.pzaUtil.blinkAni(this.bt_home,!0),D.pzaUtil.blinkAni(this.bt_shop,!0),this.curTool&&this.curTool.unChoosed(!0),p.pzaGameCommonPool.returnInstant(this.node)},t.toolInUse=l.pzaGardenToolType.null,i([T({displayName:"\u62d6\u52a8\u70b9",type:cc.Node})],t.prototype,"dragPoint",void 0),i([T({displayName:"\u8717\u725b\u5c42",type:cc.Node})],t.prototype,"layer_snail",void 0),i([T({displayName:"tip\u5c42",type:cc.Node})],t.prototype,"layer_tip",void 0),i([T({displayName:"\u690d\u7269\u5e95\u5c42",type:cc.Node})],t.prototype,"layer_board",void 0),i([T({displayName:"\u91d1\u5e01\u5c42",type:cc.Node})],t.prototype,"layer_coin",void 0),i([T({displayName:"\u5de5\u5177\u62d6\u52a8\u5c42",type:cc.Node})],t.prototype,"layer_tool_drag",void 0),i([T({displayName:"\u5de5\u5177\u5c42",type:cc.Node})],t.prototype,"layer_tool",void 0),i([T({displayName:"pots\u5bb9\u5668",type:cc.Node})],t.prototype,"pots_container",void 0),i([T({displayName:"\u80cc\u666f\u56fe",type:cc.Sprite})],t.prototype,"pic_bg",void 0),i([T({displayName:"\u6e29\u5ba4\u5f71\u5b50",type:cc.Node})],t.prototype,"pots_normal_shadow",void 0),i([T({displayName:"\u591c\u665a\u5f71\u5b50",type:cc.Node})],t.prototype,"pots_night_shadow",void 0),i([T({displayName:"\u6c34\u65cf\u9986\u5f71\u5b50",type:cc.Node})],t.prototype,"pots_water_shadow",void 0),i([T({displayName:"\u5546\u5e97",type:cc.Node})],t.prototype,"bt_shop",void 0),i([T({displayName:"\u4e3b\u83dc\u5355",type:cc.Node})],t.prototype,"bt_home",void 0),i([T({displayName:"\u91d1\u94b1\u6570\u91cf",type:cc.Label})],t.prototype,"moneyCount",void 0),i([T({displayName:"\u91d1\u94b1\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"moneyShowNode",void 0),i([T({displayName:"\u91d1\u94b1\u98de\u884c\u76ee\u6807",type:cc.Node})],t.prototype,"moneyTarget",void 0),i([T({displayName:"\u6234\u592b",type:P.pzaGardenDave})],t.prototype,"dave",void 0),i([T(cc.Prefab)],t.prototype,"prefab_pot",void 0),i([T(cc.Prefab)],t.prototype,"prefab_snail",void 0),e=i([_],t)}(cc.Component);e.pzaGardenView=w,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaShopView":"pzaShopView","../utils/pzakc":"pzakc","./pzaGardenDave":"pzaGardenDave","./pzaGardenDropCoin":"pzaGardenDropCoin","./pzaGardenMgr":"pzaGardenMgr","./pzaGardenPot":"pzaGardenPot","./pzaGardenShadow":"pzaGardenShadow","./pzaGardenSnail":"pzaGardenSnail","./pzaGardenTool":"pzaGardenTool"}],pzaGargantuar2:[function(a,t,e){"use strict";cc._RF.push(t,"38cc8ENFo9HYJTrUp6iNgHL","pzaGargantuar2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGargantuar2=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaZombieEnum"),l=a("./pzaGargantuar"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.directThrowHurt=!0,t.equip1Slot=s.pzaZombieSlotType.hat_iron,t.equip2Slot=s.pzaZombieSlotType.door,t.isFei=!1,t.hatSlotMap=new Map([[p.pzaZombieEnum.GARGANTUAR2,{slotName:s.pzaZombieSlotType.hat_iron,attNameArr:[s.pzaZombieSlotType.hat_iron+"1",s.pzaZombieSlotType.hat_iron+"2",s.pzaZombieSlotType.hat_iron+"3"],arr1:[17.82,-26.18,-168.6],arr2:[17.53,-27.26,-168.6],arr3:[3.7,-30.05,-168.6],isFei:!1}],[p.pzaZombieEnum.GARGANTUAR3,{slotName:s.pzaZombieSlotType.helmet_black,attNameArr:[s.pzaZombieSlotType.helmet_black+"1",s.pzaZombieSlotType.helmet_black+"2",s.pzaZombieSlotType.helmet_black+"3"],arr1:[4.73,5.86,-168.6],arr2:[7.23,-9.08,-168.6],arr3:[4.92,2.37,-168.6],isFei:!1}],[p.pzaZombieEnum.GARGANTUAR4,{slotName:s.pzaZombieSlotType.helmet_fei,attNameArr:[s.pzaZombieSlotType.helmet_fei+"1",s.pzaZombieSlotType.helmet_fei+"2",s.pzaZombieSlotType.helmet_fei+"3"],arr1:[8.14,19.3,-168.6],arr2:[8.14,19.3,-168.6],arr3:[8.14,19.3,-168.6],isFei:!0}],[p.pzaZombieEnum.RED_GARGANTUAR2,{slotName:s.pzaZombieSlotType.hat_iron,attNameArr:[s.pzaZombieSlotType.hat_iron+"1",s.pzaZombieSlotType.hat_iron+"2",s.pzaZombieSlotType.hat_iron+"3"],arr1:[17.82,-26.18,-168.6],arr2:[17.53,-27.26,-168.6],arr3:[3.7,-30.05,-168.6],isFei:!1}],[p.pzaZombieEnum.RED_GARGANTUAR3,{slotName:s.pzaZombieSlotType.helmet_black,attNameArr:[s.pzaZombieSlotType.helmet_black+"1",s.pzaZombieSlotType.helmet_black+"2",s.pzaZombieSlotType.helmet_black+"3"],arr1:[4.73,5.86,-168.6],arr2:[7.23,-9.08,-168.6],arr3:[4.92,2.37,-168.6],isFei:!1}],[p.pzaZombieEnum.RED_GARGANTUAR4,{slotName:s.pzaZombieSlotType.helmet_fei,attNameArr:[s.pzaZombieSlotType.helmet_fei+"1",s.pzaZombieSlotType.helmet_fei+"2",s.pzaZombieSlotType.helmet_fei+"3"],arr1:[8.14,19.3,-168.6],arr2:[8.14,19.3,-168.6],arr3:[8.14,19.3,-168.6],isFei:!0}]]),t}return n(t,a),t.prototype.initEquips=function(){if(this.baseData&&this.baseData.zombieData){var a=this.hatSlotMap.get(this.baseData.zombieData.zombieType);this.isFei=a.isFei,this.equip1Slot=a.slotName,this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,-34.23,90.46,0))],[s.pzaZombieSlotType.gar_hand,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.gar_hand).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.gar_hand+"1",197.63,8.23,-178.86)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.gar_hand+"2",229.25,10.5,-178.86)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.gar_hand+"3",234.6,6.35,-178.86))],[s.pzaZombieSlotType.door,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.door).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.door+"1",-17.85,-9.47,92.34)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.door+"2",-17.58,-23.83,92.34)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.door+"3",-22.36,-23.49,92.34))]]),this.slotMap.set(a.slotName,new s.pzaZombieSlot(this.animation.spineAnimation,a.slotName).addState(new s.pzaZombieSlotAtt(1,a.attNameArr[0],a.arr1[0],a.arr1[1],a.arr1[2])).addState(new s.pzaZombieSlotAtt(2,a.attNameArr[1],a.arr2[0],a.arr2[1],a.arr2[2])).addState(new s.pzaZombieSlotAtt(3,a.attNameArr[2],a.arr3[0],a.arr3[1],a.arr3[2])))}},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.isFei&&(t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_CONTROL,-1)),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_ICE,-1))),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_ICE_PEA,-1))},t.prototype.handBookPreview=function(t){a.prototype.handBookPreview.call(this,t),this.skinPre=this.skinPreMap.get(t),this.equipIntact(),this.equipIntact2(),this.playStayAnimation()},i([u],t)}(l.pzaGargantuar));e.pzaGargantuar2=d,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaGargantuar":"pzaGargantuar","./pzaZombieSlot":"pzaZombieSlot"}],pzaGargantuar:[function(a,t,e){"use strict";cc._RF.push(t,"48badpbNY1B5Ll+3N5c+E3c","pzaGargantuar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGargantuar=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBaseData"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaZombieEnum"),d=a("../Data/pzaPlantEnum"),h=a("../Plant/pzaAttackType"),m=a("../pzaGameState"),f=a("./pzaBaseZombie"),z=a("./pzaZombieState"),y=a("./pzaZombieSlot"),g=a("../pzaSpineTool"),v=cc._decorator,b=v.ccclass,S=(v.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName=null,t.weaponIndex=1,t.throwImping=!1,t.hasImp=!0,t.hasThrowImp=!1,t.attacking=!1,t.skinPre="baiyan",t.skinPreMap=new Map([[u.pzaZombieEnum.GARGANTUAR,"baiyan"],[u.pzaZombieEnum.GARGANTUAR2,"baiyan"],[u.pzaZombieEnum.GARGANTUAR3,"baiyan"],[u.pzaZombieEnum.GARGANTUAR4,"baiyan"],[u.pzaZombieEnum.RED_GARGANTUAR,"hongyan"],[u.pzaZombieEnum.RED_GARGANTUAR2,"hongyan"],[u.pzaZombieEnum.RED_GARGANTUAR3,"hongyan"],[u.pzaZombieEnum.RED_GARGANTUAR4,"hongyan"]]),t.deathPlayingOver=!1,t.deathCallBack=null,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[y.pzaZombieSlotType.butter,new y.pzaZombieSlot(this.animation.spineAnimation,y.pzaZombieSlotType.butter).addState(new y.pzaZombieSlotAtt(1,y.pzaZombieSlotType.butter,-34.23,90.46))],[y.pzaZombieSlotType.gar_hand,new y.pzaZombieSlot(this.animation.spineAnimation,y.pzaZombieSlotType.gar_hand).addState(new y.pzaZombieSlotAtt(1,y.pzaZombieSlotType.gar_hand+"1",197.63,8.23,-178.86)).addState(new y.pzaZombieSlotAtt(2,y.pzaZombieSlotType.gar_hand+"2",229.25,10.5,-178.86)).addState(new y.pzaZombieSlotAtt(3,y.pzaZombieSlotType.gar_hand+"3",234.6,6.35,-178.86))]])},t.prototype.preview=function(t,e,o){this.skinPre=this.skinPreMap.get(t.zombieData.zombieType),a.prototype.preview.call(this,t,e,o)},t.prototype.bindData=function(t){this.skinPre=this.skinPreMap.get(t.zombieData.zombieType),a.prototype.bindData.call(this,t),this.throwImping=!1,this.hasImp=!0,this.attacking=!1,this.hasThrowImp=!1,window.pzazombieManager.wave%10!=0&&m.pzaGameState.redLeft--,t.zombieData.cate=u.pzaZombieCate.Gargantuar},t.prototype.randomZombieSkin=function(){this.changeSkin(this.skinPre+"1_1w1"),this.weaponIndex=l.pzaUtil.getRandomNum(1,3),this.updateEquipState(y.pzaZombieSlotType.gar_hand,this.weaponIndex)},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),!this.baseData.isBeControlled()&&(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),!this.throwImping))if(-1==this.changeTargetRow){if(this.pushBackTime>0)this.pushBackMove(a);else if(!this.attacking){var t=this.findTarget();null==t||t.isDead?this.updateMove(a):this.attack(a,t)}}else this.changeRowMove(a)}},t.prototype.attackJar=function(a){var t=this,e=this.baseData.buffData.releaseBuff(c.pzaBuffType.FROST);this.zombieState=z.pzaZombieState.EAT_ATK;var o="attack";this.hasImp||(o="attack3"),this.attacking=!0,this.animation.playAnimation(o,!1,function(){t.attacking=!1},function(){a.bang(),p.pzaSoundManager.playAudio("gargantuar_thump")},null!=e?e.buffValue:1)},t.prototype.attack=function(a,t){var e=this,o=this.baseData.buffData.releaseBuff(c.pzaBuffType.FROST);this.zombieState=z.pzaZombieState.EAT_ATK;var n="attack";this.hasImp||(n="attack3"),p.pzaSoundManager.playAudio("lowgroan"),this.attacking=!0,this.animation.playAnimation(n,!1,function(){e.attacking=!1},function(){e.damage(t),p.pzaSoundManager.playAudio("gargantuar_thump")},null!=o?o.buffValue:1)},t.prototype.damage=function(a){var t=this;if(null!=a&&null!=this.baseData&&null!=this.baseData.zombieData)if(a.isBrain){var e=window.pzaplantManager.brainMap.get(a);e&&e.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG)}else if(this.baseData.zombieData.hypnosis)window.pzazombieManager.zombieMap.forEach(function(e,o){null!=o&&o.xIndex==a.xIndex&&o.yIndex==a.yIndex&&e.hurt(1800,t.baseData,h.pzaAttackType.BANG)});else{var o=""+a.xIndex+a.yIndex,n=window.pzaplantManager.pumpkinDataMap.get(o);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG)}var r=window.pzaplantManager.plantDataMap.get(o);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);r.plantData.plantType==d.pzaPlantEnum.QQFUME_SHROOM?r.hp<=100?p&&p.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG):p&&p.hurt(100,this.baseData,h.pzaAttackType.FLOOR_ATK):p&&p.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG)}var l=window.pzaplantManager.plantEnvDataMap.get(o);if(null!=l){var s=window.pzaplantManager.getPlantByData(l);s&&s.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG)}var c=window.pzaplantManager.notTargetMap.get(o);if(null!=c){var u=window.pzaplantManager.getPlantByData(c);u&&u.hurt(this.baseData.atk,this.baseData,h.pzaAttackType.BANG)}m.pzaGameState.isZjMode()&&window.pzazombieManager.hypnoZombieMap.forEach(function(e,o){null!=o&&o.xIndex==a.xIndex&&o.yIndex==a.yIndex&&e.hurt(1800,t.baseData,h.pzaAttackType.BANG)})}},t.prototype.hurt=function(t,e,o){if(void 0===o&&(o=h.pzaAttackType.FLOOR_ATK),this.baseData){this.baseData.hp,this.baseData.maxHp,a.prototype.hurt.call(this,t,e,o);var n=this.baseData.hp/this.baseData.maxHp;!this.hasThrowImp&&n<=.5&&this.throwImp()}},t.prototype.throwImp=function(){var a=this;if(!this.isInButterState&&!(this.baseData.xIndex<=4||this.baseData.zombieData.hypnosis)){var t=this.baseData.buffData.releaseBuff(c.pzaBuffType.FROST);this.throwImping=!0,this.attacking=!1,this.hasThrowImp=!0;var e=this.animation.getAnimationDuration("attack2")/this.animation.spineAnimation.timeScale+.1,o=!1,n=function(){o||!a.baseData||a.isInButterState||(o=!0,a.baseData.hp<=0?a.death(!0):(a.hasImp=!0,a.throwImping=!1,a.playMoveAnimation()))};this.scheduleOnce(n.bind(this),e),this.animation.playAnimation("attack2",!1,function(){n()},function(){a.createImp(),p.pzaSoundManager.playAudio("gargantuar_fly")},null!=t?t.buffValue:1)}},t.prototype.createImp=function(){var a=g.pzaSpineTool.findBonePos(this.animation.spineAnimation,"xiaokua2",this.node);if(a){var t=r.pzaGameConfig.getZombieConfig(u.pzaZombieEnum.IMP),e=new s.pzaBaseData(null,u.pzaZombieEnum.IMP);e.hp=e.maxHp=t.hp,e.atk=t.atk,e.zombieData.equipHp=e.zombieData.maxEquipHp=t.equipHp,e.zombieData.direction=-1,e.zombieData.initMSpd=e.zombieData.moveSpd=m.pzaGameState.map.getBlockWidth()/t.speed,e.zombieData.equipType=t.equipType,e.zombieData.toolType=t.toolType,e.xIndex=this.baseData.xIndex-4,e.yIndex=this.baseData.yIndex;var o=this.node.parent.convertToNodeSpaceAR(a);o.x+=-5,o.y+=-5,e.logicPos=o,window.pzazombieManager.zombieDatas[e.yIndex].add(e),window.pzazombieManager.createZombie(e,!1,!1,!1,null,!1,!0)}},t.prototype.playAttakAnimation=function(){this.zombieState=z.pzaZombieState.EAT_ATK,this.hasImp?this.animation.playAnimation("attack",!0):this.animation.playAnimation("attack3",!0)},t.prototype.playMoveAnimation=function(){this.zombieState=z.pzaZombieState.MOVE,this.hasImp?this.animation.playAnimation("move",!0):this.animation.playAnimation("move2",!0)},t.prototype.playDeathAnimation=function(a){var t=this;this.zombieState=z.pzaZombieState.DEAD,this.zombieHurtState=u.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.deathCallBack=a;var e=!1,o=function(){e||(e=!0,t.deathCallBack())},n=this.hasImp?"die":"die2";this.scheduleOnce(o.bind(this),this.animation.getAnimationDuration(n)/this.animation.spineAnimation.timeScale+.1),this.animation.playAnimation(n,!1,null,function(){p.pzaSoundManager.playAudio("gargantuar_thump"),o()}),this.refreshFrostState(!1),this.zombieFallSound()},t.prototype.zombieDying=function(){a.prototype.zombieDying.call(this),this.changeSkin(this.skinPre+"1_3w1")},t.prototype.zombieHurt=function(){a.prototype.zombieHurt.call(this),this.changeSkin(this.skinPre+"1_2w1")},t.prototype.zombieIntact=function(){a.prototype.zombieIntact.call(this),this.changeSkin(this.skinPre+"1_1w1")},t.prototype.zombieScream=function(){p.pzaSoundManager.playAudio("GargantuarEnter")},t.prototype.death=function(t){t&&p.pzaSoundManager.playAudio("gargantudeath"),a.prototype.death.call(this,t)},t.prototype.zombieHurtSound=function(t){if(this.hasEquip){var e="shieldhit"+l.pzaUtil.getRandomNum(1,2);p.pzaSoundManager.playAudio(e)}else a.prototype.zombieHurtSound.call(this,t)},i([b],t)}(f.pzaBaseZombie));e.pzaGargantuar=S,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBaseData":"pzaBaseData","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaGarlicJalapeno:[function(a,t,e){"use strict";cc._RF.push(t,"b2205dmiOtLNaG0qJ47gfoR","pzaGarlicJalapeno");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGarlicJalapeno=void 0;var r=a("../../Common/pzaWorldEventManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaJalapeno"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.attack=function(){var a=this;window.pzaplantManager.removePlant(this.baseData),this.death(),window.pzaMapManager.shakeMap();for(var t=c.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),e=0;e<12;e++){var o=t.clone();o.x+=100*e,c.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,o,0);var n=.1*e+.5;e>=5&&(n=.05*e+.5),s.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,n,o,null)}window.pzaMapManager.removeRowIceGround(this.baseData.yIndex);for(var i=0;i<=8;i++)window.pzaMapManager.removeLadder(i,this.baseData.yIndex);r.pzaWorldEventManager.triggerEvent(r.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var d=window.pzazombieManager.zombieDatas[this.baseData.yIndex],h=Array.from(d);null!=window.pzazombieManager.drZomBoss&&h.push(window.pzazombieManager.drZomBoss.baseData),h.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(p.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,u.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==l.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(p.pzaBuffType.FROST),t.buffData.removeBuff(p.pzaBuffType.FROZEN)),e.baseData.isDead||e.changeMapRow()}})},i([m],t)}(d.pzaJalapeno));e.pzaGarlicJalapeno=f,cc._RF.pop()},{"../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaJalapeno":"pzaJalapeno"}],pzaGarlic:[function(a,t,e){"use strict";cc._RF.push(t,"794ccTUQuVEDYoMQO0xXY3e","pzaGarlic");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGarlic=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaZombieEnum"),l=a("../pzaGameState"),s=a("./pzaAttackType"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),l.pzaGameState.isZombieMode())this.animation.playAnimation("T_idle",!0);else{var o=function(){e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=r.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};this.blinkTime=r.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("idle",!1,o),l.pzaGameState.onlyShroomCofee=!1,l.pzaGameState.onlyBoomPlant=!1}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.hurt=function(t,e,o){if(void 0===o&&(o=null),null!=this.baseData&&!this.baseData.isDead)if(o!=s.pzaAttackType.ROLLING&&o!=s.pzaAttackType.BOOM&&o!=s.pzaAttackType.BANG){if(null!=e&&null!=e.zombieData&&null==o)switch(e.zombieData.zombieType){case p.pzaZombieEnum.FOOTBALL_ZOMBIE:case p.pzaZombieEnum.DANCING_ZOMBIE:case p.pzaZombieEnum.BACKUP_DANCER:t=18;break;case p.pzaZombieEnum.YETI_ZOMBIE:t=24;break;case p.pzaZombieEnum.DIGGER_ZOMBIE:t=28;break;case p.pzaZombieEnum.NEWSPAPER_ZOMBIE:case p.pzaZombieEnum.LADDER_ZOMBIE:t=32;break;case p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM:t=40;break;case p.pzaZombieEnum.JACK_ZOMBIE:t=44;break;case p.pzaZombieEnum.IMP:t=48;break;case p.pzaZombieEnum.POLEVAULTING_ZOMBIE:t=56;break;case p.pzaZombieEnum.SNORKEL_ZOMBIE:t=72;break;default:t=20}this.baseData.hurtPlanet(t),this.refreshHurtState(!1),(this.baseData.isDead||this.baseData.hp<=0)&&(window.pzaplantManager.removePlant(this.baseData),this.death(e))}else a.prototype.hurt.call(this,t,e,o)},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([d],t)}(c.pzaBasePlant));e.pzaGarlic=h,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaGatlingPea:[function(a,t,e){"use strict";cc._RF.push(t,"85b04FObQJJvL2iCWdgGt2g","pzaGatlingPea");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGatlingPea=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6);var o=function(){window.pzazombieManager.hasCanAttackZombie(e.baseData)?e.animation.playAnimation("attack",!1,o,function(){e.shoot(),l.pzaSoundManager.playAudio("PeashooterAtk")}):e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle2",!1,o))};o(),u.pzaGameState.usePeaPlant=!0,u.pzaGameState.onlyShroomCofee=!1,u.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t)},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1);var i=u.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaGatlingPea=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaGdyxIcon:[function(a,t,e){"use strict";cc._RF.push(t,"0ec51qLWwRBsKE3t3v0v3k9","pzaGdyxIcon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaChannel"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ball=null,t.txt=null,t.pic=null,t.appId=null,t.adList=null,t.curId=0,t}return n(t,a),t.prototype.onLoad=function(){var a=this;this.node.on(cc.Node.EventType.TOUCH_END,function(){r.pzaChannel.instance().jumpTo(a.appId),a.ball.active=!1})},t.prototype.show=function(a,t){var e=this;this.node.active=!0,this.node.parent=a,this.node.setPosition(t),hzzxsdk.getRecommedAdList(!1,0,0).then(function(a){console.log("\u63a8\u8350\u5217\u8868\u5e7f\u544a\uff1a",a),!a||a.length<=0||(e.adList=a,e.showOneIcon(),e.schedule(e.showOneIcon,3,cc.macro.REPEAT_FOREVER))})},t.prototype.showOneIcon=function(){var a=this,t=this.adList[this.curId];if(t||(this.curId=0,t=this.adList[this.curId])){this.shake(),this.appId=t.appid;var e=t.image;if(e){var o=".png";-1!=e.indexOf(".jpg")&&(o=".jpg"),cc.assetManager.loadRemote(e,{ext:o},function(e,o){if(e)console.log("err==",e);else{var n=new cc.SpriteFrame(o);a.pic.spriteFrame=n,a.txt.string=t.title||""}}),this.curId++,this.curId>=this.adList.length&&(this.curId=0)}}},t.prototype.shake=function(){cc.tween(this.node).repeat(5,cc.tween().to(.05,{angle:10}).to(.05,{angle:0}).to(.05,{angle:-10}).to(.05,{angle:0})).start()},i([s(cc.Node)],t.prototype,"ball",void 0),i([s(cc.Label)],t.prototype,"txt",void 0),i([s(cc.Sprite)],t.prototype,"pic",void 0),i([l],t)}(cc.Component);e.default=c,cc._RF.pop()},{"./pzaChannel":"pzaChannel"}],pzaGdyxItem:[function(a,t,e){"use strict";cc._RF.push(t,"fc0a6pFUMNChYfi/kNAhTFt","pzaGdyxItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaChannel"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.gdyx_img=null,t.appId=null,t.page=null,t}return n(t,a),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.on_tiaozhuan,this)},t.prototype.on_tiaozhuan=function(){r.pzaChannel.instance().jumpTo(this.appId)},t.prototype.init=function(a,t,e,o,n){var i=this;this.appId=o,this.page=n;var r=".png";-1!=a.indexOf(".jpg")&&(r=".jpg"),cc.assetManager.loadRemote(a,{ext:r},function(a,t){if(a)console.log("err==",a);else{var e=new cc.SpriteFrame(t);i.gdyx_img.getComponent(cc.Sprite).spriteFrame=e}})},i([s(cc.Node)],t.prototype,"gdyx_img",void 0),i([l],t)}(cc.Component);e.default=c,cc._RF.pop()},{"./pzaChannel":"pzaChannel"}],pzaGetAchieveItem:[function(a,t,e){"use strict";cc._RF.push(t,"0939c3i1qtHLZhK9czUVkIx","pzaGetAchieveItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGetAchieveItem=void 0;var r=a("../../Achieve/pzaAchieveMgr"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaSpriteFrameManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.achieveIcon=null,t.achieveName=null,t.achieveDesc=null,t}return n(t,a),t.prototype.bindData=function(a){l.pzaSpriteFrameManager.loadAchieveIcon(a,this.achieveIcon);var t=r.default.instance().getAchieve(a);null!=t&&(this.achieveName.string=t.name+" \u6210\u5c31\u8fbe\u6210\uff01",this.achieveDesc.string=t.desc)},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([u({displayName:"\u6210\u5c31\u56fe\u6807",type:cc.Sprite})],t.prototype,"achieveIcon",void 0),i([u({displayName:"\u6210\u5c31\u540d\u79f0",type:cc.Label})],t.prototype,"achieveName",void 0),i([u({displayName:"\u6210\u5c31\u63cf\u8ff0",type:cc.Label})],t.prototype,"achieveDesc",void 0),i([c],t)}(cc.Component);e.pzaGetAchieveItem=d,cc._RF.pop()},{"../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaGetAchieveView:[function(a,t,e){"use strict";cc._RF.push(t,"396c6mShGVOU7QCy1jO/9Ig","pzaGetAchieveView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGetAchieveView=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../utils/pzaChannel"),l=a("./pzaGetAchieveItem"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.itemPrefab=null,t.content=null,t.items=null,t.closeCall=null,t}return n(t,a),t.prototype.onDisable=function(){null!=this.items&&(this.items.forEach(function(a){a&&a.close()}),this.items=null)},t.prototype.init=function(a,t){var e=this;this.closeCall=t,this.items=[],a.forEach(function(a){var t=r.pzaGameCommonPool.requestInstant(e.itemPrefab);t.setParent(e.content);var o=t.getComponent(l.pzaGetAchieveItem);o&&o.bindData(a),e.items.push(o)})},t.prototype.clickClose=function(){this.close(),this.closeCall&&this.closeCall()},t.prototype.clickShare=function(){p.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){console.log("getAchieveView share sucess")})},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([u({displayName:"\u6210\u5c31item\u9884\u8bbe",type:cc.Prefab})],t.prototype,"itemPrefab",void 0),i([u({displayName:"\u6210\u5c31\u5bb9\u5668",type:cc.Node})],t.prototype,"content",void 0),i([c],t)}(cc.Component);e.pzaGetAchieveView=d,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../utils/pzaChannel":"pzaChannel","./pzaGetAchieveItem":"pzaGetAchieveItem"}],pzaGloomShroom:[function(a,t,e){"use strict";cc._RF.push(t,"f098cCRikVHVqfMmNScDg1G","pzaGloomShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGloomShroom=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.blinkTime=3,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()),u.pzaGameState.useShroom=!0,u.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.plantData.sleeping||(this.blinkTime-=t)},t.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=!1,o=1.7*u.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(t,n){null==t||null==n||n.isDead||null==n.logicPos||n.buffData.hasBuff(s.pzaBuffType.DIVE)||n.buffData.hasBuff(s.pzaBuffType.FLY)||n.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||l.pzaUtil.getDistance(a.baseData.logicPos,n.logicPos)<o&&(e=!0)}),e||a.canJoinDrZomBoss(a.baseData)&&(e=!0),e)return r.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(null!=a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x,a.baseData.logicPos.y+47);c.pzaEffectManager.createGloomShroomEffect(a.baseData.yIndex,t,null),a.hurtZombies()}});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};this.animation.playAnimation("idle1",!1,t)},t.prototype.canJoinDrZomBoss=function(a){if(a.xIndex<5)return null;var t=window.pzazombieManager.drZomBoss;return null==t||null==t.baseData||t.baseData.isDead||t.baseData.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)?null:t.baseData},t.prototype.hurtZombies=function(){var a=this,t=1.7*u.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(e,o){null==e||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(s.pzaBuffType.DIVE)||o.buffData.hasBuff(s.pzaBuffType.FLY)||o.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||l.pzaUtil.getDistance(a.baseData.logicPos,o.logicPos)<t&&e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.PENETRATE)}),this.canJoinDrZomBoss(this.baseData)){var e=this.canJoinDrZomBoss(this.baseData),o=window.pzazombieManager.getZombie(e);o&&o.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.PENETRATE)}},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([z({displayName:"\u7761\u89c9\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"sleepAni",void 0),i([f],t)}(h.pzaBasePlant);e.pzaGloomShroom=y,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaGoldBullet:[function(a,t,e){"use strict";cc._RF.push(t,"28697UgTxhFRIx+zLj2CcRt","pzaGoldBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGoldBullet=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaBuffData"),l=a("./pzaTrackBullet"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletFrameArr=[],t.bulletSpr=null,t.plantBaseData=null,t}return n(t,a),t.prototype.bulletInit=function(a,t){this.bulletSpr.spriteFrame=this.bulletFrameArr[t],this.plantBaseData=a},t.prototype.init=function(t,e,o,n){a.prototype.init.call(this,t,e,o,n)},t.prototype.logicUpdate=function(a){if(this.lifeTime+=a,this.lifeTime>=this.maxLifeTime)this.close();else{if(null==this.targetData||this.targetData.isDead||null==this.targetData.zombieData||this.targetData.zombieData.hypnosis){if(null==this.targetData||this.targetData.isDead||null==this.targetData.zombieData||this.targetData.zombieData.hypnosis){var t=this.findAttackTarget();null!=t&&(this.targetData=t,this.updateDirection(a))}}else this.updateDirection(a);this.updateMove(a)}},t.prototype.findAttackTarget=function(){var a=this,t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,l){if(null!=l&&null!=l.logicPos&&!l.buffData.hasBuff(p.pzaBuffType.DIVE)&&!l.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)){var s=r.pzaUtil.getDistance(a.logicPos,l.logicPos);l.buffData.hasBuff(p.pzaBuffType.FLY)?(-1==n||n>s)&&(n=s,o=l):(-1==e||e>s)&&(e=s,t=l)}}),null!=o?o:t},t.prototype.close=function(){a.prototype.close.call(this),this.plantBaseData=null,this.bulletSpr.spriteFrame=null},i([u({displayName:"\u5b50\u5f39\u56fe\u7247\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"bulletFrameArr",void 0),i([u({displayName:"\u5b50\u5f39\u7cbe\u7075",type:cc.Sprite})],t.prototype,"bulletSpr",void 0),i([c],t)}(l.pzaTrackBullet);e.pzaGoldBullet=d,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","./pzaTrackBullet":"pzaTrackBullet"}],pzaGoldHoleEffect:[function(a,t,e){"use strict";cc._RF.push(t,"793d73TCaNGDazKre3AVRaZ","pzaGoldHoleEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGoldHoleEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaGameZJ"),s=a("../../Common/pzaNodeManager"),c=a("../../Load/pzaBundleObjectPool"),u=a("../../Load/pzaPreLoadManager"),d=a("../../utils/pzakc"),h=a("../Data/pzaDropType"),m=a("../Data/pzaPlantEnum"),f=a("../pzaEffectManager"),z=a("../pzaGameState"),y=a("../pzaSunLight"),g=cc._decorator,v=g.ccclass,b=g.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hole=null,t.holeFrames=[],t.holeTime=0,t.dropTime=0,t.holeStep=1,t.mapXIndex=-1,t.mapYIndex=-1,t.dropMap={},t}return n(t,a),t.prototype.init=function(a,t){this.mapXIndex=a,this.mapYIndex=t,this.holeTime=0,this.holeStep=1,this.showHole(),window.pzaMapManager.GoldHoleSet.add(this),this.dropMap[""+h.pzaDropType.GOLD_COIN]=.15,this.dropMap[""+h.pzaDropType.SILVER_COIN]=.3,this.dropMap[""+h.pzaDropType.DIAMOND]=.05,this.dropMap.sun15=.3,this.dropMap.sun25=.15,this.dropMap.sun50=.05},t.prototype.recover=function(a,t,e,o){this.mapXIndex=a,this.mapYIndex=t,this.holeTime=e,this.holeStep=o,this.showHole(),window.pzaMapManager.GoldHoleSet.add(this)},t.prototype.dropSun=function(a,t){void 0===t&&(t=1);var e=this.node.getPosition();c.pzaBundleObjectPool.requestInstantByUrl2(u.pzaResourceUrl.SUN,function(o,n){if(null==o&&null!=n){n.setParent(s.pzaNodeManager.getUpBgNode());var i=n.getComponent(y.pzaSunLight);i&&i.init2(e,t,a),window.pzaplantManager.AllSunLight.add(i)}else console.error(o)})},t.prototype.logicUpdate=function(a){this.holeTime+=a,this.dropTime+=a;var t=this.node.getPosition();if(this.holeTime>=180)if(this.close(),window.pzaMapManager.GoldHoleSet.delete(this),Math.random()<=.8)f.pzaEffectManager.createDropPlantCard(m.pzaPlantEnum.SunBomb,t,function(){});else{var e=p.pzaGameManager.getGame(z.pzaGameMode.ZaJiao,l.pzaGameZJ).goldPlantArr,o=d.default.randomChoose(e,1)[0];f.pzaEffectManager.createDropPlantCard(o,t,function(){})}else if(this.holeTime>=90&&1==this.holeStep&&(this.holeStep=2,this.showHole()),this.dropTime>3){this.dropTime=0;var n=d.default.randomDraw(this.dropMap)||"sun15";if(n.startsWith("sun")){var i=parseInt(n.substring(3)),r=1;i<25?r=.7:i>25&&(r=2),this.dropSun(i,r)}}},t.prototype.showHole=function(){this.hole.spriteFrame=1==this.holeStep?this.holeFrames[0]:this.holeFrames[1],window.pzaplantManager.holeMap.set(""+this.mapXIndex+this.mapYIndex,1)},t.prototype.close=function(){a.prototype.close.call(this),window.pzaplantManager.holeMap.delete(""+this.mapXIndex+this.mapYIndex)},i([b({displayName:"\u6d1e",type:cc.Sprite})],t.prototype,"hole",void 0),i([b({displayName:"\u6d1e\u56fe",type:[cc.SpriteFrame]})],t.prototype,"holeFrames",void 0),i([v],t)}(r.pzaBaseComponent);e.pzaGoldHoleEffect=S,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameZJ":"pzaGameZJ","../../Common/pzaNodeManager":"pzaNodeManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzakc":"pzakc","../Data/pzaDropType":"pzaDropType","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","../pzaSunLight":"pzaSunLight"}],pzaGoldMagnet:[function(a,t,e){"use strict";cc._RF.push(t,"c5905QxdaNEapbfnmpbE9QQ","pzaGoldMagnet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGoldMagnet=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.restTime=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.sleeping=!1,this.restTime=0,this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),l.pzaGameState.onlyShroomCofee=!1,l.pzaGameState.onlyBoomPlant=!1},t.prototype.playNormalAni=function(){var a=this,t=function(){if(!l.pzaGameState.gameWin&&window.pzaMapManager.DropCoinSet.size>0)return a.restTime=6,r.pzaSoundManager.playAudio("MagnetShroom"),void a.animation.playAnimation("attack",!1,t,function(){a.absorbCoin()});a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};this.animation.playAnimation("idle",!1,t)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.restTime-=t},t.prototype.absorbCoin=function(){var a=this,t=Array.from(window.pzaMapManager.DropCoinSet);null!=t&&(t=t.slice(0,5)).forEach(function(t){t.absorbMove(a.baseData.logicPos)})},i([u],t)}(s.pzaBasePlant));e.pzaGoldMagnet=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaGraveBuster:[function(a,t,e){"use strict";cc._RF.push(t,"88b4f8lc7lKtpSRmJt/bXt1","pzaGraveBuster");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGraveBuster=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaDropType"),l=a("../pzaEffectManager"),s=a("../pzaGameState"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.swallTime=0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.swallTime=0,r.pzaSoundManager.playAudio("GraveBuster"),this.animation.playAnimation("idle1",!1,function(){r.pzaSoundManager.playAudio("gravebusterchomp"),e.animation.playAnimation("idle2",!0)}),this.atkInterval=4.5,s.pzaGameState.onlyShroomCofee=!1,s.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||(this.swallTime+=t,this.swallTime>=this.atkInterval?this.swallowEnd():null!=this.baseData.logicPos&&(this.baseData.logicPos.y-=t*(35/this.atkInterval)))},t.prototype.logicLateUpdate=function(){a.prototype.logicLateUpdate.call(this),null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos||this.node.setPosition(this.baseData.logicPos)},t.prototype.swallowEnd=function(){window.pzaplantManager.removePlant(this.baseData),this.death(),window.pzaMapManager.removeTomb(this.baseData.xIndex,this.baseData.yIndex),l.pzaEffectManager.createDirtEffect("idle2",this.baseData.yIndex,this.baseData.logicPos,null),2!=s.pzaGameState.curChapter||5!=s.pzaGameState.curPart&&10!=s.pzaGameState.curPart||(Math.random()<=.2?l.pzaEffectManager.createDropCoin(p.pzaDropType.GOLD_COIN,this.baseData.logicPos):l.pzaEffectManager.createDropCoin(p.pzaDropType.SILVER_COIN,this.baseData.logicPos))},i([d],t)}(c.pzaBasePlant));e.pzaGraveBuster=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaDropType":"pzaDropType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaGroupEnum:[function(a,t,e){"use strict";cc._RF.push(t,"3426cg49eVIiYOL6XQvZ3G4","pzaGroupEnum"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGroupEnum=void 0,function(a){a.PLANT_BULLET="PlantBullet",a.ZOMBIE="Zombie",a.TORCHWOOD="TorchWood",a.PLANT="Plant",a.BOWLING="Bowling",a.WALL="Wall",a.ZOMBIE_BULLET="ZombieBullet",a.BRAIN="Brain"}(e.pzaGroupEnum||(e.pzaGroupEnum={})),cc._RF.pop()},{}],pzaGroveEffect:[function(a,t,e){"use strict";cc._RF.push(t,"ca9a1YXYU5Lq6K1D3L5mq+/","pzaGroveEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGroveEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaWorldEventManager"),s=a("../pzaGameState"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.groveAnis=[],t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this);var t="skin1";2!=s.pzaGameState.curChapter&&4!=s.pzaGameState.curChapter&&7!=s.pzaGameState.curChapter&&9!=s.pzaGameState.curChapter||(t="skin2"),this.groveAnis.forEach(function(a){null!=a&&(a.setAnimationSkin(t),a.playAnimation("idle2",!0))}),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GROVE_SHAKE,this.groveShake,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GROVE_SHAKE,this.groveShake,this)},t.prototype.groveShake=function(a){a>=5&&(a=4);var t=this.groveAnis[a];t.playAnimation("idle1",!1,function(){t.playAnimation("idle2",!0)})},t.prototype.pauseSelf=function(){this.groveAnis.forEach(function(a){a.pauseAnimation()})},t.prototype.resumeSelf=function(){this.groveAnis.forEach(function(a){a.resumeAnimation()})},i([d({displayName:"\u6811\u6797\u52a8\u753b",type:[p.pzaSpineController]})],t.prototype,"groveAnis",void 0),i([u],t)}(r.pzaBaseComponent);e.pzaGroveEffect=h,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState"}],pzaGuanKaItemView:[function(a,t,e){"use strict";cc._RF.push(t,"94d58qmgwFH+bfrpPdKMuF1","pzaGuanKaItemView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameConfig"),l=a("../Common/pzaGameManager"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaSpriteFrameManager"),d=a("../Common/pzaUIManager"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.guankaImg=null,t.guanKaName=null,t.guanKaPlant=null,t.lockNode=null,t.passNode=null,t.guanKaMaskNode=null,t.startGameNode=null,t.loseStar=[],t.winStarArr=[],t.zombieImg=null,t.beltNode=null,t.curChapter=1,t.curPart=1,t.btZombiesArr=[2,1,3,1,-1,4,1,5,1,-2],t.btPlantArr=["zw002","zw003","zw004","zw040","zw006","zw005","zw007","zw008","zw040","zw009"],t.hyZombiesArr=[6,1,7,1,-3,8,1,9,1,-4],t.hyPlantArr=["zw010","zw011","zw012","zw040","zw013","zw014","zw015","zw016","zw040","zw017"],t.ycZombiesArr=[11,1,14,1,-5,15,1,17,1,-6],t.ycPlantArr=["zw018","zw019","zw020","zw040","zw021","zw022","zw023","zw024","zw040","zw025"],t.wyZombiesArr=[18,1,19,1,-7,20,1,21,1,-8],t.wyPlantArr=["zw026","zw027","zw028","zw040","zw029","zw030","zw031","zw032","zw040","zw033"],t.wdZombiesArr=[23,1,24,1,-9,25,1,26,1,-10],t.wdPlantArr=["zw041","zw034","zw035","zw040","zw036","zw037","zw038","zw039","zw040","zw040"],t.startGameCall=null,t.unlockPart=!1,t.passPart=!1,t}return n(t,a),t.prototype.bindStartGameCall=function(a){this.startGameCall=a},t.prototype.bindData=function(a,t,e){this.curChapter=a,this.curPart=t,this.unlockPart=this.curChapter<s.pzaLocalData.data.curChapter||this.curChapter==s.pzaLocalData.data.curChapter&&this.curPart<=s.pzaLocalData.data.curPart,this.passPart=this.curChapter<s.pzaLocalData.data.curChapter||this.curChapter==s.pzaLocalData.data.curChapter&&this.curPart<s.pzaLocalData.data.curPart,5==this.curChapter&&10==this.curPart&&(this.passPart=s.pzaLocalData.data.passLastPart),10==this.curChapter&&10==this.curPart&&(this.passPart=s.pzaLocalData.data.passWtLastPart),this.updateStar(),this.updateUI(e)},t.prototype.updateStartGameNode=function(a){this.curPart==a?(this.node.scale=1,this.unlockPart?(this.startGameNode.active=!0,this.startGameNode.opacity=255):this.startGameNode.active=!1):(this.node.scale=.65,this.startGameNode.active=!1)},t.prototype.scrollMove=function(a){var t=821.65-189.25*(this.curPart-1),e=Math.abs(a-t);e<=189.25?(this.node.scale=.65+.35*(189.25-e)/189.25,this.unlockPart&&(this.startGameNode.active=!0,this.startGameNode.opacity=(189.25-e)/189.25*255)):(this.node.scale=.65,this.startGameNode.active=!1)},t.prototype.updateUI=function(a){this.guanKaName.string="\u5173\u5361"+this.curPart,this.passPart?(this.lockNode.active=!1,this.guanKaMaskNode.active=!1,this.passNode.active=!0,this.zombieImg.node.color=cc.color(255,255,255,255),this.guanKaPlant.node.color=cc.color(255,255,255,255)):this.unlockPart?(this.lockNode.active=!1,this.guanKaMaskNode.active=!1,this.passNode.active=!1,this.zombieImg.node.color=cc.color(255,255,255,255),this.guanKaPlant.node.color=cc.color(255,255,255,255)):(this.lockNode.active=!0,this.guanKaMaskNode.active=!0,this.passNode.active=!1,s.pzaLocalData.isWeekTwo?(this.zombieImg.node.color=cc.color(255,255,255,255),this.guanKaPlant.node.color=cc.color(255,255,255,255)):(this.zombieImg.node.color=cc.color(0,0,0,255),this.guanKaPlant.node.color=cc.color(0,0,0,255))),this.updateStartGameNode(a),this.updateZombieImg(),this.updatePlantImg(),this.beltNode.active=10==this.curPart&&5!=this.curChapter&&10!=this.curChapter||(5==this.curChapter||10==this.curChapter)&&5==this.curPart},t.prototype.updateStar=function(){var a=p.pzaGameConfig.getPartStar(this.curChapter,this.curPart);if(null!=a&&a>0)if(this.curChapter<s.pzaLocalData.data.curChapter)this.showWinStar();else if(this.curChapter==s.pzaLocalData.data.curChapter)if(this.curPart<=s.pzaLocalData.data.curPart)this.showWinStar();else for(var t=0;t<3;t++)this.loseStar[t].node.active=!1,this.winStarArr[t].node.active=!1;else for(t=0;t<3;t++)this.loseStar[t].node.active=!1,this.winStarArr[t].node.active=!1;else for(t=0;t<3;t++)this.loseStar[t].node.active=!1,this.winStarArr[t].node.active=!1},t.prototype.showWinStar=function(){var a=s.pzaLocalData.getPartStar(this.curChapter,this.curPart);this.loseStar[0].node.active=!0,this.loseStar[1].node.active=!0,this.loseStar[2].node.active=!0;for(var t=0;t<3;t++)this.winStarArr[t].node.active=t<a},t.prototype.updateZombieImg=function(){var a=0,t=this.curChapter>5?this.curChapter-5:this.curChapter;if(1==t?a=this.btZombiesArr[this.curPart-1]:2==t?a=this.hyZombiesArr[this.curPart-1]:3==t?a=this.ycZombiesArr[this.curPart-1]:4==t?a=this.wyZombiesArr[this.curPart-1]:5==t&&(a=this.wdZombiesArr[this.curPart-1]),a>0)this.guankaImg.node.active=!1,this.zombieImg.node.opacity=255,u.pzaSpriteFrameManager.loadZombieCard(a,this.zombieImg),this.changePosByZombieId(a),2==t?(this.guankaImg.node.active=!0,u.pzaSpriteFrameManager.loadGuanKaImg("lv_img2",this.guankaImg)):3==t?(this.guankaImg.node.active=!0,u.pzaSpriteFrameManager.loadGuanKaImg("lv_img4",this.guankaImg)):4==t?(this.guankaImg.node.active=!0,u.pzaSpriteFrameManager.loadGuanKaImg("lv_img6",this.guankaImg)):5==t&&(this.guankaImg.node.active=!0,u.pzaSpriteFrameManager.loadGuanKaImg("lv_img8",this.guankaImg));else{this.guankaImg.node.active=!0,this.zombieImg.node.opacity=0;var e=null;-1==a?e="lv_img1":-2==a?this.guankaImg.node.active=!1:-3==a?e="lv_img3":-4==a?e="lv_img2":-5==a?e="lv_img5":-6==a?e="lv_img4":-7==a?e="lv_img7":-8==a?e="lv_img6":-9==a?e="lv_img8":-10==a&&(e="lv_img9"),e&&u.pzaSpriteFrameManager.loadGuanKaImg(e,this.guankaImg)}},t.prototype.updatePlantImg=function(){var a="",t=this.curChapter>5?this.curChapter-5:this.curChapter;1==t?a="LevelHandBook/"+this.btPlantArr[this.curPart-1]:2==t?a="LevelHandBook/"+this.hyPlantArr[this.curPart-1]:3==t?a="LevelHandBook/"+this.ycPlantArr[this.curPart-1]:4==t?a="LevelHandBook/"+this.wyPlantArr[this.curPart-1]:5==t&&(a="LevelHandBook/"+this.wdPlantArr[this.curPart-1]),u.pzaSpriteFrameManager.loadGuanKaImg(a,this.guanKaPlant)},t.prototype.changePosByZombieId=function(a){1==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=60):2==a?(this.zombieImg.node.x=15,this.zombieImg.node.y=65):3==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):4==a?(this.zombieImg.node.x=-10,this.zombieImg.node.y=55):5==a?(this.zombieImg.node.x=20,this.zombieImg.node.y=65):6==a?(this.zombieImg.node.x=15,this.zombieImg.node.y=65):7==a?(this.zombieImg.node.x=15,this.zombieImg.node.y=65):8==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):9==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):11==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):14==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):15==a?(this.zombieImg.node.x=40,this.zombieImg.node.y=65):17==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):18==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):19==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):20==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):21==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=65):23==a?(this.zombieImg.node.x=0,this.zombieImg.node.y=110):24==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=55):25==a?(this.zombieImg.node.x=25,this.zombieImg.node.y=55):26==a&&(this.zombieImg.node.x=25,this.zombieImg.node.y=65)},t.prototype.showLockTween=function(){for(var a=cc.tween(this.lockNode),t=10;t<=13;t++)a.to(.07,{angle:0+t}).to(.07,{angle:0-t});a.to(.07,{angle:0}).start()},t.prototype.clickStartBtn=function(){this.unlockPart?r.pzaGameState.midOut?r.pzaGameState.curChapter==this.curChapter&&r.pzaGameState.curPart==this.curPart&&l.pzaGameManager.getCurrentGame().isMainMode()?(this.startGameCall&&this.startGameCall(),l.pzaGameManager.getCurrentGame().gameRecover(this.curChapter,this.curPart,null)):l.pzaGameManager.midOutStart(l.pzaGameManager.getGameMode(this.curChapter,this.curPart),this.curChapter,this.curPart,this.startGameCall.bind(this)):(this.startGameCall&&this.startGameCall(),d.pzaUIManager.removeBoardUI(),l.pzaGameManager.preLoadAndStart(l.pzaGameManager.getGameMode(this.curChapter,this.curPart),this.curChapter,this.curPart),r.pzaGameState.weekTwoInitPlants=[]):(this.showLockTween(),c.pzaSoundManager.playAudio("unlockpart"))},i([f({displayName:"\u5f53\u524d\u5173\u5361\u56fe\u7247",type:cc.Sprite})],t.prototype,"guankaImg",void 0),i([f({displayName:"\u5f53\u524d\u5173\u5361\u540d\u79f0",type:cc.Label})],t.prototype,"guanKaName",void 0),i([f({displayName:"\u5f53\u524d\u5173\u5361\u690d\u7269",type:cc.Sprite})],t.prototype,"guanKaPlant",void 0),i([f({displayName:"\u9501\u8282\u70b9",type:cc.Node})],t.prototype,"lockNode",void 0),i([f({displayName:"\u901a\u8fc7\u8282\u70b9",type:cc.Node})],t.prototype,"passNode",void 0),i([f({displayName:"\u5173\u5361\u8499\u7248\u8282\u70b9",type:cc.Node})],t.prototype,"guanKaMaskNode",void 0),i([f({displayName:"\u5f00\u59cb\u6e38\u620f\u6309\u94ae",type:cc.Node})],t.prototype,"startGameNode",void 0),i([f({displayName:"\u661f\u661f",type:cc.Sprite})],t.prototype,"loseStar",void 0),i([f({displayName:"\u8d62\u7684\u661f\u661f",type:cc.Sprite})],t.prototype,"winStarArr",void 0),i([f({displayName:"\u50f5\u5c38\u56fe\u7247",type:cc.Sprite})],t.prototype,"zombieImg",void 0),i([f({displayName:"\u4f20\u9001\u5e26",type:cc.Node})],t.prototype,"beltNode",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaUIManager":"pzaUIManager"}],pzaGuideDialogView:[function(a,t,e){"use strict";cc._RF.push(t,"b41ebcZIqNOl6hK3wENh5Vn","pzaGuideDialogView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGuideDialogView=void 0;var r=a("../Battle/Data/pzaGuideType"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSoundManager"),c=a("../Common/pzaSpineController"),u=a("../Common/pzaUtil"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bgButton=null,t.dialogNode=null,t.word=null,t.continueNode=null,t.selectBoard=null,t.selectTittle=null,t.selectTxt=null,t.coinLabel=null,t.daveAni=null,t.words=null,t.confirmWords=null,t.cancelWords=null,t.dialogEndCall=null,t.firstClickCall=null,t.lastDialogCall=null,t.confirmCall=null,t.cancelCall=null,t.canContinue=!1,t.daveDeathAni=!1,t}return n(t,a),t.prototype.onEnable=function(){this.bgButton.on(cc.Node.EventType.TOUCH_START,this.clickNext,this),this.coinLabel.string=u.pzaUtil.getCurrencyStr(l.pzaLocalData.data.coin)},t.prototype.onDisable=function(){this.bgButton.off(cc.Node.EventType.TOUCH_START,this.clickNext,this)},t.prototype.showDialog=function(a,t,e,o,n){void 0===e&&(e=null),void 0===n&&(n=!1),this.words=a,this.continueNode.active=!0,this.selectBoard.active=!1,this.dialogNode.active=!1,this.canContinue=!1,this.daveDeathAni=n,this.dialogEndCall=t,this.firstClickCall=e,this.lastDialogCall=o,this.enterAnimation()},t.prototype.showSelectDialog=function(a,t,e,o,n,i,r,p,l){var s=this;void 0===l&&(l=null),this.words=a,this.continueNode.active=!0,this.selectBoard.active=!1,this.dialogNode.active=!1,this.confirmWords=n,this.cancelWords=r,this.dialogEndCall=p,this.lastDialogCall=function(){s.showSelectBoard(t,e,o,i)},this.firstClickCall=l,this.enterAnimation()},t.prototype.showSelectBoard=function(a,t,e,o){this.continueNode.active=!1,this.selectBoard.active=!0,this.selectTittle.string=a,this.selectTxt.string=t,this.confirmCall=e,this.cancelCall=o},t.prototype.showNextWord=function(){var a=this;if(null!=this.words){var t=this.words.shift();null!=t?(this.word.string=t.word,t.daveAni==r.pzaDaveAni.NUT?(this.playShortSound(),this.daveAni.playAnimation("2alk3",!1,function(){a.daveAni.playAnimation("2idle1",!0)})):(this.playShortSound(),this.daveAni.playAnimation("1talk3",!1,function(){a.daveAni.playAnimation("1idle1",!0)})),null!=this.lastDialogCall&&this.words.length<=0&&(this.lastDialogCall(),this.lastDialogCall=null)):this.outAnimation()}else this.outAnimation()},t.prototype.enterAnimation=function(){var a=this;this.daveAni.playAnimation("1enter1",!1,function(){a.dialogNode.active=!0,a.canContinue=!0,a.showNextWord()})},t.prototype.outAnimation=function(){var a=this;if(this.dialogNode.active=!1,this.canContinue=!1,this.daveDeathAni){var t="Bungee_fall",e=Math.ceil(3*Math.random());t=e>1?t+e:t,s.pzaSoundManager.playAudio(t)}this.daveAni.playAnimation(this.daveDeathAni?"death":"leave",!1,function(){a.close(),a.dialogEndCall&&a.dialogEndCall()})},t.prototype.clickNext=function(){this.canContinue&&(this.showNextWord(),this.firstClickCall&&this.firstClickCall(),this.firstClickCall=null)},t.prototype.clickConfirm=function(){this.confirmCall&&this.confirmCall(),this.selectBoard.active=!1,this.words=this.confirmWords,this.showNextWord()},t.prototype.clickCancel=function(){this.cancelCall&&this.cancelCall(),this.selectBoard.active=!1,this.words=this.cancelWords,this.showNextWord()},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},t.prototype.playShortSound=function(){var a=u.pzaUtil.getRandomNum(1,3);s.pzaSoundManager.playAudio("crazydaveshort"+a)},i([m({displayName:"\u80cc\u666f\u6309\u94ae",type:cc.Node})],t.prototype,"bgButton",void 0),i([m({displayName:"\u5bf9\u8bdd\u6846\u8282\u70b9",type:cc.Node})],t.prototype,"dialogNode",void 0),i([m({displayName:"\u6587\u5b57",type:cc.Label})],t.prototype,"word",void 0),i([m({displayName:"\u7ee7\u7eed",type:cc.Node})],t.prototype,"continueNode",void 0),i([m({displayName:"\u9009\u62e9\u5bf9\u8bdd\u6846\u8282\u70b9",type:cc.Node})],t.prototype,"selectBoard",void 0),i([m({displayName:"\u9009\u62e9\u6807\u9898",type:cc.Label})],t.prototype,"selectTittle",void 0),i([m({displayName:"\u9009\u62e9\u6587\u672c",type:cc.Label})],t.prototype,"selectTxt",void 0),i([m({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],t.prototype,"coinLabel",void 0),i([m({displayName:"\u6234\u592b\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"daveAni",void 0),i([h],t)}(cc.Component);e.pzaGuideDialogView=f,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaUtil":"pzaUtil"}],pzaGuideManager:[function(a,t,e){"use strict";cc._RF.push(t,"769a2uE36pNHoz5+DpNycx5","pzaGuideManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGuideManager=void 0;var r=a("../Battle/Data/pzaGuideType"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Battle/pzaGameState"),s=a("../Load/pzaPreLoadManager"),c=a("../View/Battle/pzaGuideView"),u=a("../View/pzaGuideDialogView"),d=a("./pzaGamePropConfig"),h=a("./pzaLocalData"),m=a("./pzaTipManager"),f=a("./pzaUIManager"),z=a("./pzaWorldEventManager"),y=cc._decorator,g=y.ccclass,v=(y.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.guideType=null,t.guideStep=0,t.autoHideTime=0,t.autoNextGuide=!1,t.guidePlant=null,t.triggerExtraGuide=!1,t.guideEndCall=null,t}return n(t,a),t.prototype.onLoad=function(){window.pzaGuideManager=this},t.prototype.update=function(a){l.pzaGameState.gamePause||this.autoHideTime>0&&(this.autoHideTime-=a,this.autoHideTime<=0&&(this.autoNextGuide?(this.autoNextGuide=!1,this.guideStepNext()):m.pzaTipManager.hideGuideTip()))},t.prototype.guideStart=function(a,t){if(this.guideType=null,this.guideStep=0,this.guidePlant=null,this.triggerExtraGuide=!1,this.autoHideTime=0,this.autoNextGuide=!1,this.guideEndCall=null,l.pzaGameState.gameMode==l.pzaGameMode.ZOMBIE_ENERMY)return 1==l.pzaGameState.curPart?void(this.guideType=r.pzaGuideType.GUIDE_ZOMBIE_ENERMY_1):void(a&&a());if(l.pzaGameState.gameMode==l.pzaGameMode.VASE)return 1==l.pzaGameState.curPart?void(this.guideType=r.pzaGuideType.GUIDE_VASE):void(a&&a());if(l.pzaGameState.gameMode!==l.pzaGameMode.CREATIVE_VASE)if(t&&t==r.pzaGuideType.GUIDE_ENTERZJ)this.guideType=r.pzaGuideType.GUIDE_ENTERZJ;else if(t&&t==r.pzaGuideType.SUPER_CHOMPER_ENTER)this.guideType=r.pzaGuideType.SUPER_CHOMPER_ENTER;else{if(1==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return this.guideType=r.pzaGuideType.GUIDE_PLANT_1_1,void(l.pzaGameState.sunLightCount=150);if(2==l.pzaGameState.curPart)return this.guideType=r.pzaGuideType.GUIDE_NEW_PLANT_1_2,void(this.guidePlant=p.pzaPlantEnum.SUN_FLOWER);if(4==l.pzaGameState.curPart)return h.pzaLocalData.data.curChapter>1||h.pzaLocalData.data.curPart>4?void(a&&a()):void(this.guideType=r.pzaGuideType.GUIDE_PROP_1_4);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_SHOVEL_1_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE)}else if(2==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_NINGHT_2_1);if(2==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_CARD_SLOT_2_2);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE);if(l.pzaGameState.curPart>=3&&h.pzaLocalData.data.coin>=750&&6==h.pzaLocalData.data.plantSlotCount&&!h.pzaLocalData.data.unlockShop)return void(this.guideType=r.pzaGuideType.GUIDE_CARD_SLOT_2_3);if(l.pzaGameState.curPart>=6&&h.pzaLocalData.data.coin>=5e3&&7==h.pzaLocalData.data.plantSlotCount&&!h.pzaLocalData.data.unlockShop)return void(this.guideType=r.pzaGuideType.GUIDE_CARD_SLOT_2_6)}else if(3==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_POOL_3_1);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE);if(!h.pzaLocalData.data.unlockShop){if(h.pzaLocalData.data.coin>=750&&6==h.pzaLocalData.data.plantSlotCount)return void(this.guideType=r.pzaGuideType.GUIDE_CARD_SLOT_2_3);if(h.pzaLocalData.data.coin>=5e3&&7==h.pzaLocalData.data.plantSlotCount)return void(this.guideType=r.pzaGuideType.GUIDE_CARD_SLOT_2_6)}}else if(4==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_4_1);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BANG_JAR_4_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_NINGHT_4_10)}else if(5==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_5_1);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_5_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BOSS_5_10)}else if(6==l.pzaGameState.curChapter){if(1==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_6_1);if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_6_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE)}else if(7==l.pzaGameState.curChapter){if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE)}else if(8==l.pzaGameState.curChapter){if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BELT_MODE)}else if(9==l.pzaGameState.curChapter){if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BANG_JAR_4_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_NINGHT_4_10)}else if(10==l.pzaGameState.curChapter){if(5==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_10_5);if(10==l.pzaGameState.curPart)return void(this.guideType=r.pzaGuideType.GUIDE_BOSS_5_10)}a&&a()}else a&&a()},t.prototype.guideStepPre=function(){this.guideStep--,this.guideShow()},t.prototype.guideStepNext=function(){this.guideStep++,this.guideShow()},t.prototype.guideStepTo=function(a){this.guideStep=a,this.guideShow()},t.prototype.guideShow=function(a,t){if(void 0===a&&(a=null),void 0===t&&(t=null),null!=t&&(this.guideEndCall=t),this.guideType==r.pzaGuideType.GUIDE_PLANT_1_1)switch(this.guideStep){case 0:return this.guidePlant=p.pzaPlantEnum.PEA_SHOOTER,void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u79cd\u5b50\u5305\uff0c\u628a\u5b83\u6361\u8d77\u6765\uff01");case 1:return this.guidePlant=null,void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u8349\u5730\u79cd\u4e0b\u4f60\u7684\u79cd\u5b50\uff01");case 2:return l.pzaGameState.guideSunPause=!1,void m.pzaTipManager.showGuideTip("\u5e72\u5f97\u6f02\u4eae\uff01\n\u4f60\u4e5f\u53ef\u4ee5\u62d6\u653e\u79cd\u5b50\u5305\uff01");case 3:return void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u6536\u96c6\u6389\u843d\u7684\u9633\u5149\uff01");case 4:return void m.pzaTipManager.showGuideTip("\u7ee7\u7eed\u6536\u96c6\u9633\u5149\uff01\n\u4f60\u9700\u8981\u5b83\u4eec\u6765\u79cd\u4e0b\u66f4\u591a\u7684\u690d\u7269\uff01");case 5:return this.autoHideTime=5,this.autoNextGuide=!0,this.guidePlant=null,void m.pzaTipManager.showGuideTip("\u592a\u597d\u4e86\uff0c\u4f60\u5df2\u7ecf\u6536\u96c6\u5230\u4e86\u8db3\u591f\n\u8fdb\u884c\u4e0b\u4e00\u6b21\u79cd\u690d\u7684\u9633\u5149\u4e86\uff01");case 6:return this.guidePlant=p.pzaPlantEnum.PEA_SHOOTER,void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u8c4c\u8c46\u5c04\u624b\uff0c\u518d\u79cd\u4e00\u9897\uff01");case 7:return this.guidePlant=null,l.pzaGameState.guideZombiePause=!1,window.pzazombieManager.nextWaveTime=0,this.autoHideTime=5,void m.pzaTipManager.showGuideTip("\u522b\u8ba9\u50f5\u5c38\u9760\u8fd1\u4f60\u7684\u623f\u5b50\uff01");default:return void this.guideEnd()}if(this.guideType==r.pzaGuideType.GUIDE_NEW_PLANT_1_2)switch(this.guideStep){case 0:return this.autoHideTime=5,this.autoNextGuide=!0,void m.pzaTipManager.showGuideTip("\u5411\u65e5\u8475\u662f\u975e\u5e38\u91cd\u8981\u7684\u690d\u7269\uff01");case 1:return this.autoHideTime=5,this.autoNextGuide=!0,void m.pzaTipManager.showGuideTip("\u81f3\u5c11\u8981\u79cd\u4e0b\u4e09\u9897\u5411\u65e5\u8475\uff01");case 2:return this.autoHideTime=5,void m.pzaTipManager.showGuideTip("\u79cd\u4e0b\u81f3\u5c11\u4e09\u9897\u5411\u65e5\u8475\uff0c\u8fd9\u6837\u4f60\u624d\u6709\u66f4\u591a\u7684\n\u673a\u4f1a\u80fd\u5728\u50f5\u5c38\u7684\u653b\u52bf\u4e2d\u6d3b\u4e0b\u6765\uff01");default:return void this.guideEnd()}if(this.guideType==r.pzaGuideType.GUIDE_PROP_1_4)switch(this.guideStep){case 1:return void this.showGuideView([new r.pzaDialog("\u770b\u6765\u50f5\u5c38\u4eec\u65e9\u6709\u51c6\u5907\uff01"),new r.pzaDialog("\u70b9\u51fb\u8fd9\u4e2a\u56fe\u6807\uff0c\u4f60\u5c31\u4f1a\u83b7\u5f97500\u9633\u5149\uff01",function(){h.pzaLocalData.obtainProp(d.pzaGamePropEnum.PROP_FREE_SUN,1,!1),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GUIDE_REFRESH_PROP,null)}),new r.pzaDialog("\u514d\u8d39\u9001\u4f60\u4e00\u6b21\uff0c\u4ee5\u540e\u53ef\u4ee5\u76f4\u63a5\u8d2d\u4e70\u3002")],a,cc.v2(74,304),function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.USE_GAME_PROP,d.pzaGamePropEnum.PROP_FREE_SUN),m.pzaTipManager.showGameTip("\u589e\u52a0\u4e86500\u70b9\u9633\u5149")});case 2:return void this.showGuideView([new r.pzaDialog("\u9633\u5149\u6e90\u6e90\u4e0d\u65ad\uff0c\u6211\u611f\u89c9\u6709\u70b9\u7d2f\u4e86\uff01"),new r.pzaDialog("\u70b9\u51fb\u8fd9\u4e2a\u56fe\u6807\uff0c\u4f1a\u4e3a\u4f60\u81ea\u52a8\u62fe\u53d6\u9633\u5149\uff01",function(){h.pzaLocalData.obtainProp(d.pzaGamePropEnum.PROP_AUTO_PICK,1,!1),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GUIDE_REFRESH_PROP,null)})],a,cc.v2(184,304),function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.USE_GAME_PROP,d.pzaGamePropEnum.PROP_AUTO_PICK);for(var a=0;a<5;a++)window.pzaplantManager.autoCreateSun()});case 3:return void this.showGuideView([new r.pzaDialog("\u5371\u9669\uff01\u5feb\u6234\u4e0a\u9505...\u5feb\u5403\u4e2a\u7389\u7c73\u5377...\u5feb\u7528\u8fd9\u4e2a\uff01",function(){h.pzaLocalData.obtainProp(d.pzaGamePropEnum.PROP_CHERRY_BOMB,1,!1),z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GUIDE_REFRESH_PROP,null)})],a,cc.v2(293,304),function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.USE_GAME_PROP,d.pzaGamePropEnum.PROP_CHERRY_BOMB)});default:return void this.guideEnd()}if(this.guideType==r.pzaGuideType.GUIDE_SHOVEL_1_5)switch(this.guideStep){case 0:return void this.showGuideDialogView([new r.pzaDialog("\u4f60\u597d\uff0c\u6211\u4eec\u53c8\u89c1\u9762\u4e86\uff0c"),new r.pzaDialog("\u76ee\u524d\u4e3a\u6b62\u4f60\u5e72\u5f97\u4e0d\u9519\uff0c"),new r.pzaDialog("\u56e0\u6b64\u6211\u8981\u5956\u52b1\u4f60\uff0c"),new r.pzaDialog("\u4f46\u662f\u9996\u5148\uff0c\u4f60\u5f97\u5e2e\u6211\u4e2a\u5fd9\uff0c"),new r.pzaDialog("\u628a\u8349\u576a\u6e05\u7406\u5e72\u51c0\u3002"),new r.pzaDialog("\u7528\u94f2\u5b50\u6316\u6389\u90a3\u4e9b\u690d\u7269\uff01"),new r.pzaDialog("\u5f00\u59cb\u6316\u5427\uff01")],a);case 1:return void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u62fe\u53d6\u94f2\u5b50\uff01");case 2:return void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u79fb\u9664\u4e00\u9897\u690d\u7269\uff01");case 3:return void m.pzaTipManager.showGuideTip("\u4e00\u76f4\u6316\u5427\uff0c\u76f4\u5230\u4f60\u7684\u8349\u576a\u4e0a\u6ca1\u6709\u690d\u7269\uff01");case 4:return m.pzaTipManager.hideGuideTip(),void this.showGuideDialogView([new r.pzaDialog("\u597d\u7684\uff0c\u5e72\u5f97\u4e0d\u9519\uff0c\n\u73b0\u5728\u7ed9\u4f60\u4e2a\u60ca\u559c\u2026\u2026"),new r.pzaDialog("\u6211\u4eec\u53bb\u73a9\u4fdd\u9f84\u7403\uff01"),new r.pzaDialog("\u563f\uff0c\u62ff\u597d\u8fd9\u4e2a\u575a\u679c\uff01",null,r.pzaDaveAni.NUT),new r.pzaDialog("\u4e3a\u4ec0\u4e48\u6211\u8981\u7ed9\u4f60\u575a\u679c\uff1f"),new r.pzaDialog("\u56e0\u4e3a\u6211\u75af\u4e86\uff01\uff01\uff01\uff01\uff01"),new r.pzaDialog("\u73b0\u5728\u51fa\u53d1\uff01\n\u7ed9\u6211\u8d62\u4e2a\u51a0\u519b\u56de\u6765\uff01\uff01\uff01")],this.guideStepNext.bind(this),function(){window.pzaMapManager.showRedLine(3)});default:return window.pzaMapManager.showPauseBtn(),void this.guideEnd()}if(this.guideType!=r.pzaGuideType.GUIDE_NINGHT_2_1)if(this.guideType!=r.pzaGuideType.GUIDE_CARD_SLOT_2_2)if(this.guideType!=r.pzaGuideType.GUIDE_CARD_SLOT_2_3)if(this.guideType!=r.pzaGuideType.GUIDE_KNOCK_ZOMBIE_2_5)if(this.guideType!=r.pzaGuideType.GUIDE_CARD_SLOT_2_6)if(this.guideType!=r.pzaGuideType.GUIDE_POOL_3_1)if(this.guideType!=r.pzaGuideType.GUIDE_SMALL_ZOMBIE_3_5)if(this.guideType!=r.pzaGuideType.GUIDE_4_1){if(this.guideType==r.pzaGuideType.GUIDE_BANG_JAR_4_5)switch(this.guideStep){case 0:return void this.showGuideDialogView([new r.pzaDialog("\u6211\u548c\u6211\u7684\u54e5\u4eec\uff0c\n\u5f17\u83b1\u79d1\u65af\u5361\u65af\u7279-\u54c8\u7ef4\uff0c\n\u4ee5\u524d\u5728\u65e0\u804a\u7684\u65f6\u5019\n\u5c31\u7838\u82b1\u74f6\u3002"),new r.pzaDialog("\u6b63\u5de7\u54c8\u7ef4\u4e0d\u5728\u9547\u4e0a\uff0c\u4f60\u6765\u548c\n\u6211\u4e00\u8d77\u5427\uff0c\u54c8\u7ef4\u4e8c\u53f7\uff01"),new r.pzaDialog("\u73b0\u5728\u5c31\u6309\u7167\u4f60\u7684\u610f\u613f\u53bb\u6253\u7834\n\u5b83\u4eec\u5427\uff0c\u54c8\u7ef4\uff01")],a);case 1:return void m.pzaTipManager.showGuideTip("\u70b9\u51fb\u4e00\u53ea\u82b1\u74f6\uff0c\u770b\u770b\u91cc\u9762\u6709\u4ec0\u4e48\uff01");case 2:return this.autoHideTime=5,void m.pzaTipManager.showGuideTip("\u6467\u6bc1\u5168\u90e8\u50f5\u5c38\u548c\u82b1\u74f6\uff0c\u7ed3\u675f\u8fd9\u4e00\u5173\u5361");case 3:return m.pzaTipManager.hideGuideTip(),void this.showGuideDialogView([new r.pzaDialog("\u54e5\u4eec\u513f\uff0c\u4f60\u628a\u8fd9\u4e9b\u82b1\u74f6\u90fd\u6253\n\u7834\u4e86\uff0c\u5e72\u7684\u6f02\u4eae\uff01"),new r.pzaDialog("\u5c31\u50cf\u6211\u6253\u788e\u6240\u6709\n\u5783\u573e\u6876\u65f6\u90a3\u6837\u6f02\u4eae\uff01"),new r.pzaDialog("\u6765\uff0c\u6211\u7ed9\u4f60\u66f4\u591a\u7684\u82b1\u74f6\uff01"),new r.pzaDialog("\u5c0f\u5fc3\u70b9\uff0c\n\u522b\u7838\u7684\n\u592a\u5feb\u4e86\u3002"),new r.pzaDialog("\u4f60\u4e0d\u60f3\u5192\u51fa\u4e00\u5927\u5806\u50f5\u5c38\uff0c\u8ba9\n\u4f60\u624b\u5fd9\u811a\u4e71\u5427\uff0c\u54c8\u54c8\u3002")],a);case 4:return m.pzaTipManager.hideGuideTip(),void this.showGuideDialogView([new r.pzaDialog("\u597d\u7684\uff01"),new r.pzaDialog("\u8fd9\u5e94\u8be5\u662f\u6700\u540e\u4e00\u6279\u4e86\u3002"),new r.pzaDialog("\u6253\u8d25\u4ed6\u4eec\uff0c\u4e4b\u540e\u4f60\u7684\u5de5\u4f5c\u5c31\n\u5b8c\u6210\u4e86\uff01")],a);default:return void this.guideEnd()}this.guideType!=r.pzaGuideType.GUIDE_NINGHT_4_10?this.guideType!=r.pzaGuideType.GUIDE_5_1?this.guideType!=r.pzaGuideType.GUIDE_5_5?this.guideType!=r.pzaGuideType.GUIDE_BOSS_5_10?this.guideType!=r.pzaGuideType.GUIDE_6_1?(this.guideType==r.pzaGuideType.GUIDE_6_5&&this.showGuideDialogView([new r.pzaDialog("\u6211\u4eec\u53bb\u73a9\u4fdd\u9f84\u7403\uff01"),new r.pzaDialog("\u563f\uff0c\u62ff\u597d\u8fd9\u4e2a\u575a\u679c\uff01",null,r.pzaDaveAni.NUT),new r.pzaDialog("\u4e3a\u4ec0\u4e48\u6211\u8981\u7ed9\u4f60\u575a\u679c\uff1f"),new r.pzaDialog("\u56e0\u4e3a\u6211\u75af\u4e86\uff01\uff01\uff01\uff01\uff01"),new r.pzaDialog("\u73b0\u5728\u51fa\u53d1\uff01\n\u7ed9\u6211\u8d62\u4e2a\u51a0\u519b\u56de\u6765\uff01\uff01\uff01")],a),this.guideType!=r.pzaGuideType.GUIDE_10_5?this.guideType!=r.pzaGuideType.GUIDE_ZOMBIE_ENERMY_1?this.guideType!=r.pzaGuideType.GUIDE_VASE?this.guideType!=r.pzaGuideType.GUIDE_ENTERZJ?this.guideType!=r.pzaGuideType.SUPER_CHOMPER_ENTER||this.showGuideDialogView([new r.pzaDialog("\u5443\uff0c\u4e00\u4e2a\u75af\u72c2\u65e0\u6bd4\u7684\u6d88\u606f"),new r.pzaDialog("\u5728\u8fd9\u91cc\u53ef\u4ee5\u76f4\u63a5\n\u79cd\u690d\u8d85\u7ea7\u5927\u5634\u82b1\uff01"),new r.pzaDialog("\u4ed6\u4eec\u770b\u8d77\u6765\u997f\u6781\u4e86\n\u5582\u9971\u4ed6\u4eec\u5427\uff01")],a,null,null):this.showGuideDialogView([new r.pzaDialog("\u563f\uff0c\u6211\u627e\u5230\u4e86\u4e00\u672c\u65b0\u7684\u56fe\u9274!"),new r.pzaDialog("\u56fe\u9274\u91cc\u7684\u5185\u5bb9\u770b\u8d77\u6765\u5f88\u7279\u522b\n\u6216\u8bb8\u4f60\u4f1a\u5728\u8fd9\u91cc\u7684\u5173\u5361\n\u4e2d\u9047\u5230\u4ed6\u4eec\u3002"),new r.pzaDialog("\u73b0\u5728\u8fd9\u672c\u56fe\u9274\u662f\u4f60\u7684\u4e86\uff0c\n\u56de\u89c1!")],a,null,null):this.showGuideDialogView([new r.pzaDialog("\u8fd9\u5c31\u662f\u82b1\u74f6\u7ec8\u7ed3\u8005\u3002"),new r.pzaDialog("\u8fd9\u4e9b\u5173\u5361\u771f\u7684\u5f88\u96be\u3002"),new r.pzaDialog("\u73a9\u7684\u5f00\u5fc3\u3002")],a,null,null):this.showGuideDialogView([new r.pzaDialog("\u50f5\u5c38\u4eec\u60f3\u8981\u6211\u5e2e\u4ed6\u4eec\u7ec3\u4e60\u5165\n\u4fb5\u623f\u5b50\u3002"),new r.pzaDialog("\u6211\u544a\u8bc9\u4ed6\u4eec\uff0c\u53ea\u8981\u690d\u7269\u4e0d\u88ab\n\u7834\u574f\u5c31\u6ca1\u95ee\u9898\u3002"),new r.pzaDialog("\u6240\u4ee5\uff0c\u6211\u7528\u786c\u7eb8\u677f\u628a\u4f60\u7684\u8349\n\u576a\u9694\u5f00\u4e86\u3002"),new r.pzaDialog("\u73a9\u7684\u5f00\u5fc3\u3002")],a,null,null):this.showGuideDialogView([new r.pzaDialog("\u6211\u4e0d\u5f97\u4e0d\u8b66\u544a\u4f60\xb7\xb7\xb7"),new r.pzaDialog("\u4f60\u4f1a\u8ba8\u538c\u4e0b\u4e00\u5173\u7684\u3002"),new r.pzaDialog("\u4e3a\u4ec0\u4e48\uff1f\n\u56e0\u4e3a\u63a5\u4e0b\u6765\u662f\u4e00\u4e2a\u63a5\u4e00\u4e2a\u7684\n\u8e66\u6781\u50f5\u5c38\u3002"),new r.pzaDialog("\u6211\u8ba8\u538c\u8fd9\u4e9b\u7cca\u6d82\u7684\u8e66\u6781\u50f5\u5c38\uff01\uff01"),new r.pzaDialog("\u6211\u6068\u4ed6\u4eec\uff01\uff01"),new r.pzaDialog("\u6068\u5b83\u4eec\u7684\n\u90a3\u79cd\u6267\u7740\u52b2\uff01"),new r.pzaDialog("\u8fd8\u6709\u90a3\u79cd\u62a5\u590d\u5fc3\uff01"),new r.pzaDialog("\u554a-\u554a-\u554a-\u90a3\u4e2a\u767d\u75f4\u6765\u5566\uff01")],a,null,null)):this.showGuideDialogView([new r.pzaDialog("\u4f19\u8ba1\uff0c\u90a3\u4e9b\u50f5\u5c38\u8fd8\u5728\u6e90\u6e90\u4e0d\n\u65ad\u7684\u6765\u88ad"),new r.pzaDialog("\u8fd9\u6b21\uff0c\u770b\u6211\u6765\u6311\u4e9b\u690d\u7269\uff01"),new r.pzaDialog("\u6211\u9009\xb7\xb7\xb7\xb7\xb7\xb7\u8fd9\u4e09\u79cd\uff01")],a):this.showGuideDialogView([new r.pzaDialog("\u54e6\u54e6\uff0c\u4ed6\u5728\u8fd9\u91cc\u3002"),new r.pzaDialog("\u4f60\u6700\u597d\u505a\u597d\u51c6\u5907\u3002"),new r.pzaDialog("\u8fd9\u5c06\u4f1a\u662f\u4e00\u573a\n\u5927\u6218\u5f79\uff01"),new r.pzaDialog("\u542c\u597d\uff0c\u90a3\u4e48\uff0c\n\u6211\u77e5\u9053\u4ed6\u7684\u5f31\u70b9\u662f\uff1a"),new r.pzaDialog("\u4f60\u5fc5\u987b\u653b\u51fb\u4ed6\u7684\u80f0\u817a\uff01"),new r.pzaDialog("\u5662\uff0c\u4e0d\uff0c\u90a3\u662f\n\u4e0d\u540c\u7684\u4e00\u53ea......"),new r.pzaDialog("\u4f60\u5fc5\u987b...\u5443...\u8e22\u4ed6\u7684..."),new r.pzaDialog("\u5514......"),new r.pzaDialog("\u4f60\u5fc5\u987b\u6309\u4e0a\u4e0a\u4e0b\u4e0b\u5de6\u53f3......"),new r.pzaDialog("\u5443......"),new r.pzaDialog("\u554a\uff0c\u6211\u60f3\u8d77\u6765\u4e86\uff01\u5b83\u662f...")],a,null,null,!0):this.showGuideDialogView([new r.pzaDialog("\u4f11\u95f2\u82b1\u56ed\u5f88\u4e0d\u9519\u5427\uff0c\u54c8\uff1f"),new r.pzaDialog("\u4efb\u4f55\u65f6\u5019\u4f60\u90fd\u80fd\u4ece\n\u4e3b\u83dc\u5355\u8fdb\u5165\u82b1\u56ed\u3002"),new r.pzaDialog("\u4f46\u591f\u4e86\uff01\u73b0\u5728\u662f\u65f6\u5019\u56de\u53bb\n\u7167\u770b\u597d\u4f60\u7684\u5c4b\u5b50\u4e86\uff01\u3002"),new r.pzaDialog("\u6211\u4e0d\u5f97\u4e0d\u8b66\u544a\u4f60\xb7\xb7\xb7"),new r.pzaDialog("\u4f60\u4f1a\u8ba8\u538c\u4e0b\u4e00\u5173\u7684\u3002"),new r.pzaDialog("\u4e3a\u4ec0\u4e48\uff1f\n\u56e0\u4e3a\u63a5\u4e0b\u6765\u662f\u4e00\u4e2a\u63a5\u4e00\u4e2a\u7684\n\u8e66\u6781\u50f5\u5c38\u3002"),new r.pzaDialog("\u6211\u8ba8\u538c\u8fd9\u4e9b\u7cca\u6d82\u7684\u8e66\u6781\u50f5\u5c38\uff01\uff01"),new r.pzaDialog("\u6211\u6068\u4ed6\u4eec\uff01\uff01"),new r.pzaDialog("\u6068\u5b83\u4eec\u7684\n\u90a3\u79cd\u6267\u7740\u52b2\uff01"),new r.pzaDialog("\u8fd8\u6709\u90a3\u79cd\u62a5\u590d\u5fc3\uff01"),new r.pzaDialog("\u554a-\u554a-\u554a-\u90a3\u4e2a\u767d\u75f4\u6765\u5566\uff01")],a,null,null):this.showGuideDialogView([new r.pzaDialog("\u54c7--\uff01\u4ed6\u4eec\u751a\u81f3\u5728\u4f60\u7684\u5c4b\n\u9876\u4e0a\u627e\u5230\u6761\u8def\uff01 "),new r.pzaDialog("\u771f\u662f\u4e9b\u6709\u6052\u5fc3\u7684\u50f5\u5c38"),new r.pzaDialog("\u8003\u8651\u5230\u4f60\u5c4b\u9876\u7684\u89d2\u5ea6\uff0c\n\u6211\u60f3\u4f60\u4f1a\u9700\u8981\u7528\u5230\n\u5377\u5fc3\u83dc\u6295\u624b\u7684\u3002"),new r.pzaDialog("\u8bb0\u4f4f\u8fd9\u70b9\uff0c\u4f60\u4f1a\u5e73\u5b89\u7684\uff01")],a,null,null):this.showGuideDialogView([new r.pzaDialog("\u600e\u4e48\u7a81\u7136\u53d8\u5f97\u8fd9\u4e48\u6697\u4e86\uff1f"),new r.pzaDialog("\u8fd9\u53ef\u771f\u4e0d\u662f\u4ec0\u4e48\u597d\u5146\u5934\uff1f"),new r.pzaDialog("\u55ef\uff0c\u597d\u5427\uff0c\n\u5e0c\u671b\u4f60\u80fd\u6d3b\u8fc7\u4eca\u665a\u54df\uff01")],a)}else this.showGuideDialogView([new r.pzaDialog("\u4f60\u77e5\u9053\uff0c\u4ed6\u4eec\u66fe\u53eb\u6211\n\u201c\u8ff7\u96fe\u7537\u201d\u3002"),new r.pzaDialog("\u56e0\u4e3a\u6211\u66fe\u505c\u7559\u5728\u96fe\u4e2d\u7136\u540e\u7a81\n\u7136\u8df3\u51fa\u6765\uff0c\u5413\u5446\u4e86\u6240\u6709\u4eba\uff01"),new r.pzaDialog("\u5662\uff0c\u90a3\u90fd\u662f\u8fc7\u53bb\u7684\u4e8b\u4e86\u3002")],a);else this.showGuideDialogView([new r.pzaDialog("\u50f5\u5c38\u7684\u8fdb\u653b\u8ba1\u5212\u5176\u5b9e\u662f\u4ef6\u6709\n\u8da3\u7684\u4e8b\u60c5\u3002\u6709\u65f6\u4ed6\u4eec\u7684\u6570\u91cf\n\u4f1a\u5f88\u5c11\u3002"),new r.pzaDialog("\u5f88\u5c0f\n\u4f46\u5f88\u5351\u9119\uff01"),new r.pzaDialog("\u9632\u5b88\u597d\u4f60\u7684\u5c0f\u817f\u5427\uff01")],a);else this.showGuideDialogView([new r.pzaDialog("\u770b\u6765\u50f5\u5c38\u4eec\u8981\u653e\u5f03\u8fdb\u653b\u4f60\u7684\n\u524d\u9662\u4e86\u3002"),new r.pzaDialog("\u73b0\u5728\u4ed6\u4eec\u60f3\u8bd5\u8bd5\n\u4f60\u7684\u540e\u9662\u3002"),new r.pzaDialog("\u4f46\u6700\u91cd\u8981\u7684\u662f\uff0c\n\u4f60\u4e0d\u80fd\u4f7f\u7528\n\u4f60\u7684\u8611\u83c7\u4e86\uff01"),new r.pzaDialog("\u56e0\u4e3a\u4ed6\u4eec\u767d\u5929\u8981\u7761\u89c9\uff01"),new r.pzaDialog("\u8fd9\u96be\u9053\u4e0d\u662f\n\u516c\u5b50\u54e5\u7684\u4f5c\u98ce\u5417\uff1f")],a);else this.showGuideSelectDialog([new r.pzaDialog("\u563f\uff01\u670b\u53cb\uff01\n\u60f3\u518d\u589e\u52a0\u4e00\u4e2a\u5361\u7247\u69fd\u5417\uff1f"),new r.pzaDialog("\u8fd9\u5c06\u82b1\u8d39\u4f60$5000\uff0c\u4e4b\u540e\u4f60\u6bcf\n\u5173\u80fd\u90098\u79cd\u690d\u7269\u800c\u4e0d\u662f7\u79cd\uff01"),new r.pzaDialog("\u542c\u8d77\u6765\u600e\u4e48\u6837\uff1f")],"$5000","\u5347\u7ea7\u52308\n\u4e2a\u5361\u7247\u69fd\uff1f",function(){h.pzaLocalData.data.coin-=5e3,h.pzaLocalData.data.plantSlotCount=8,h.pzaLocalData.addDirty("coin","plantSlotCount")},[new r.pzaDialog("\u56de\u89c1\uff01")],null,[new r.pzaDialog("\u771f\u626b\u5174\u554a\uff01")],a);else this.showGuideDialogView([new r.pzaDialog("\u73a9\u8fc7\u201c\u6253\u50f5\u5c38\u201d\u6e38\u620f\u5417\uff1f"),new r.pzaDialog("\u8fd9\u5c31\u50cf\u662f\n\u73a9\u6572\u5730\u9f20\u3002"),new r.pzaDialog("\u4f60\u770b\uff0c\u90a3\u4e9b\u6bdb\u8338\u8338\u7684\n\u5c0f\u8001\u9f20\u4e0d\u662f\u6b64\u523b\u6b63\u5728\u4f60\u7684\u8349\n\u576a\u91cc\u6253\u6d1e\u5417\uff1f"),new r.pzaDialog("\u8036\uff0c\u5c31\u50cf\u90a3\u6837\uff0c\n\u4f46\u5e76\u4e0d\u662f\u9f39\u9f20\uff0c\n\u800c\u662f\u50f5\u5c38\u3002"),new r.pzaDialog("\u5e76\u4e14\u4e0d\u662f\u94c1\u9539\uff0c\u662f\u9524\u5b50\u3002"),new r.pzaDialog("\u5f53\u7136\u4e0d\u662f\u6211\uff0c\n\u662f\u4f60\uff01")],a,null,function(){window.pzaMapManager.initMapTomb(l.pzaGameState.curChapter,l.pzaGameState.curPart,null)});else this.showGuideSelectDialog([new r.pzaDialog("\u563f\uff01\n\u60f3\u518d\u589e\u52a0\u4e00\u4e2a\u5361\u7247\u69fd\u5417\uff1f"),new r.pzaDialog("\u8fd9\u5c06\u82b1\u8d39\u4f60$750\uff0c\n\u4e4b\u540e\u4f60\u6bcf\u5173\u80fd\u9009\u62e97\u79cd\u690d\n\u7269\u800c\u4e0d\u662f6\u79cd\uff01"),new r.pzaDialog("\u542c\u8d77\u6765\u600e\u4e48\u6837\uff1f")],"$750","\u5347\u7ea7\u52307\n\u4e2a\u5361\u7247\u69fd\uff1f",function(){h.pzaLocalData.data.coin-=750,h.pzaLocalData.data.plantSlotCount=7,h.pzaLocalData.addDirty("coin","plantSlotCount")},[new r.pzaDialog("\u592a\u597d\u4e86\uff01\u5f53\u4f60\u6512\u5230$5000\uff0c\n\u6211\u5c06\u4f1a\u7ed9\u4f60\u5347\u7ea7\u5230\n8\u4e2a\u5361\u7247\u69fd\uff01"),new r.pzaDialog("\u56de\u89c1\uff01")],null,[new r.pzaDialog("\u771f\u626b\u5174\u554a\uff01")],a);else this.showGuideDialogView([new r.pzaDialog("\u563f\uff0c\u6211\u7684\u670b\u53cb\n\u4f60\u76ee\u524d\u5df2\u7ecf\u6536\u96c6\u4e86$"+h.pzaLocalData.data.coin),new r.pzaDialog("\u5f53\u4f60\u6536\u96c6\u5230$750\u65f6\uff0c\n\u6211\u4f1a\u5356\u7ed9\u4f60\u4e9b\u5b9e\u7528\u7684\u4e1c\u897f\uff01")],a);else this.showGuideDialogView([new r.pzaDialog("\u665a\u4e0a\u597d\u3002"),new r.pzaDialog("\u90a3\u4e9b\u50f5\u5c38\u4e0d\u4f1a\u90a3\u4e48\u5bb9\u6613\u5c31\n\u8f7b\u6613\u653e\u5f03\u5427\uff1f"),new r.pzaDialog("\u4f60\u4f1a\u6ce8\u610f\u5230\u591c\u95f4\u548c\u50f5\u5c38\u4f5c\u6218\n\u4e0d\u540c\u4e8e\u767d\u5929\u3002"),new r.pzaDialog("\u9996\u5148\uff0c\n\u4e0d\u80fd\u4ece\u5929\u4e0a\n\u5f97\u5230\u9633\u5149\u3002"),new r.pzaDialog("\u4f46\u4f60\u4ecd\u53ef\u4ee5\u901a\u8fc7\n\u5411\u65e5\u8475\u6765\u83b7\u5f97\u9633\u5149\u3002"),new r.pzaDialog("\u800c\u4e14\u4f60\u5f88\u5e78\u8fd0\uff0c\n\u4f60\u5f97\u5230\u4e86\u5c0f\u55b7\u83c7\u3002"),new r.pzaDialog("\u5c3d\u53ef\u80fd\u591a\u79cd\u690d\u4e9b\u8611\u83c7\u5427\uff0c\n\u4f60\u4f1a\u633a\u8fc7\u53bb\u7684\u3002")],a)},t.prototype.guideShowSpeedBtn=function(a){this.showGuideView([new r.pzaDialog("\u70b9\u51fb\u8fd9\u4e2a\u56fe\u6807\uff0c\u4f1a\u8ba9\u4f60\u7684\u6e38\u620f\u901f\u5ea6\u52a0\u5feb\uff01",function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GUIDE_SHOW_SPEED,null)})],a,cc.v2(390,320),function(){z.pzaWorldEventManager.triggerEvent(z.pzaWorldEventType.GUIDE_USE_SPEED,null)})},t.prototype.guideShowNeedMoreSun=function(){this.autoHideTime=5,this.triggerExtraGuide=!0,m.pzaTipManager.showGuideTip("\u4f60\u9700\u8981\u66f4\u591a\u7684\u5411\u65e5\u8475\n\u8fd9\u6837\u4f60\u624d\u80fd\u66f4\u5feb\u5730\u79cd\u690d\u7269\uff01")},t.prototype.guideEnd=function(){this.hideGuide(),this.guideEndCall&&this.guideEndCall()},t.prototype.hideGuide=function(){this.guidePlant=null,m.pzaTipManager.hideGuideTip()},t.prototype.showGuideDialogView=function(a,t,e,o,n){void 0===e&&(e=null),void 0===o&&(o=null),void 0===n&&(n=!1),f.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.GUIDE_DIALOG_VIEW,function(i){(i&&i.getComponent(u.pzaGuideDialogView)).showDialog(a,t,e,o,n)})},t.prototype.showGuideSelectDialog=function(a,t,e,o,n,i,r,p,l){void 0===l&&(l=null),f.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.GUIDE_DIALOG_VIEW,function(s){(s&&s.getComponent(u.pzaGuideDialogView)).showSelectDialog(a,t,e,o,n,i,r,p,l)})},t.prototype.showGuideView=function(a,t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),f.pzaUIManager.baseShowPopUI(s.pzaResourceUrl.GUIDE_VIEW,function(n){(n&&n.getComponent(c.pzaGuideView)).showGuide(a,t,e,o)})},i([g],t)}(cc.Component));e.pzaGuideManager=v,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaGuideView":"pzaGuideView","../View/pzaGuideDialogView":"pzaGuideDialogView","./pzaGamePropConfig":"pzaGamePropConfig","./pzaLocalData":"pzaLocalData","./pzaTipManager":"pzaTipManager","./pzaUIManager":"pzaUIManager","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaGuideTip:[function(a,t,e){"use strict";cc._RF.push(t,"8c8adtgMMlIxaYhA5UfNdVR","pzaGuideTip");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGuideTip=void 0;var r=a("../Battle/pzaGameState"),p=a("./pzaBaseComponent"),l=a("./pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.word=null,t.lossCarTip=null,t.lossPlantTip=null,t.closeTime=0,t.pasue=!1,t.closeCall=null,t}return n(t,a),t.prototype.onDisable=function(){a.prototype.onDisable.call(this),this.node.off(cc.Node.EventType.TOUCH_START,this.clcikTip,this)},t.prototype.showGuideTip=function(a,t){void 0===t&&(t=0),this.lossCarTip.active=!1,this.lossPlantTip.active=!1,this.word.node.active=!0,this.word.string=a,this.closeTime=t,this.pasue=!1,this.closeCall=null,this.word.node.stopAllActions(),this.word.node.opacity=255,this.word.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.3,177),cc.fadeTo(.3,255))))},t.prototype.showGameTip=function(a,t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),this.lossCarTip.active=!1,this.lossPlantTip.active=!1,this.word.node.active=!0,this.word.string=a,this.pasue=!1,t){if(this.closeCall){var o=this.closeCall;this.closeCall=function(){o(),t()}}this.closeCall=t}this.word.node.stopAllActions(),this.word.node.opacity=255,this.word.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.3,177),cc.fadeTo(.3,255)))),e?(this.closeTime=0,this.node.on(cc.Node.EventType.TOUCH_START,this.clcikTip,this)):this.closeTime=5},t.prototype.showStarLoseTip=function(a,t){1==r.pzaGameState.curChapter||3==r.pzaGameState.curChapter||5==r.pzaGameState.curChapter||6==r.pzaGameState.curChapter||8==r.pzaGameState.curChapter||10==r.pzaGameState.curChapter?this.lossPlantTip.getComponent(cc.Label).string="\u635f\u59315\u4e2a\u690d\u7269\uff0c-":this.lossPlantTip.getComponent(cc.Label).string="\u635f\u59317\u4e2a\u690d\u7269\uff0c-",this.word.node.active=!1,this.lossCarTip.active=a,this.lossPlantTip.active=t,this.closeTime=5,this.pasue=!1,this.closeCall=null},t.prototype.update=function(a){this.pasue||this.closeTime<=0||(this.closeTime-=a,this.closeTime<=0&&(this.close(),this.closeCall&&(this.closeCall(),this.closeCall=null)))},t.prototype.clcikTip=function(){this.close(),this.closeCall&&(this.closeCall(),this.closeCall=null)},t.prototype.pauseSelf=function(){this.pasue=!0,this.word.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.pasue=!1,this.word.node.resumeAllActions()},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([u({displayName:"\u6587\u5b57",type:cc.Label})],t.prototype,"word",void 0),i([u({displayName:"\u635f\u5931\u5c0f\u63a8\u8f66\u6587\u6848",type:cc.Node})],t.prototype,"lossCarTip",void 0),i([u({displayName:"\u635f\u5931\u690d\u7269\u6587\u6848",type:cc.Node})],t.prototype,"lossPlantTip",void 0),i([c],t)}(p.pzaBaseComponent);e.pzaGuideTip=d,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","./pzaBaseComponent":"pzaBaseComponent","./pzaGameCommonPool":"pzaGameCommonPool"}],pzaGuideType:[function(a,t,e){"use strict";cc._RF.push(t,"8420bdgYmdMUL+6b3c38Mgc","pzaGuideType"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaDialog=e.pzaDaveAni=e.pzaGuideType=void 0,function(a){a[a.GUIDE_PLANT_1_1=0]="GUIDE_PLANT_1_1",a[a.GUIDE_NEW_PLANT_1_2=1]="GUIDE_NEW_PLANT_1_2",a[a.GUIDE_SHOVEL_1_5=2]="GUIDE_SHOVEL_1_5",a[a.GUIDE_BELT_MODE=3]="GUIDE_BELT_MODE",a[a.GUIDE_NINGHT_2_1=4]="GUIDE_NINGHT_2_1",a[a.GUIDE_CARD_SLOT_2_2=5]="GUIDE_CARD_SLOT_2_2",a[a.GUIDE_CARD_SLOT_2_3=6]="GUIDE_CARD_SLOT_2_3",a[a.GUIDE_KNOCK_ZOMBIE_2_5=7]="GUIDE_KNOCK_ZOMBIE_2_5",a[a.GUIDE_CARD_SLOT_2_6=8]="GUIDE_CARD_SLOT_2_6",a[a.GUIDE_POOL_3_1=9]="GUIDE_POOL_3_1",a[a.GUIDE_SHOP_3_4=10]="GUIDE_SHOP_3_4",a[a.GUIDE_SMALL_ZOMBIE_3_5=11]="GUIDE_SMALL_ZOMBIE_3_5",a[a.GUIDE_SHOP_4_4=12]="GUIDE_SHOP_4_4",a[a.GUIDE_BANG_JAR_4_5=13]="GUIDE_BANG_JAR_4_5",a[a.GUIDE_NINGHT_4_10=14]="GUIDE_NINGHT_4_10",a[a.GUIDE_SHOP_5_1=15]="GUIDE_SHOP_5_1",a[a.GUIDE_GARDEN_5_4=16]="GUIDE_GARDEN_5_4",a[a.GUIDE_BOSS_5_10=17]="GUIDE_BOSS_5_10",a[a.GUIDE_PROP_1_4=18]="GUIDE_PROP_1_4",a[a.GUIDE_5_5=19]="GUIDE_5_5",a[a.GUIDE_5_1=20]="GUIDE_5_1",a[a.GUIDE_4_1=21]="GUIDE_4_1",a[a.GUIDE_ZOMBIE_ENERMY_1=22]="GUIDE_ZOMBIE_ENERMY_1",a[a.GUIDE_VASE=23]="GUIDE_VASE",a[a.GUIDE_ENTERZJ=24]="GUIDE_ENTERZJ",a[a.SUPER_CHOMPER_ENTER=25]="SUPER_CHOMPER_ENTER",a[a.GUIDE_6_1=26]="GUIDE_6_1",a[a.GUIDE_6_5=27]="GUIDE_6_5",a[a.GUIDE_10_5=28]="GUIDE_10_5"}(e.pzaGuideType||(e.pzaGuideType={})),function(a){a[a.NUT=1]="NUT"}(e.pzaDaveAni||(e.pzaDaveAni={}));e.pzaDialog=function(a,t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.event=null,this.daveAni=null,this.word=a,this.event=t,this.daveAni=e},cc._RF.pop()},{}],pzaGuideView:[function(a,t,e){"use strict";cc._RF.push(t,"bd58dbosIJJZLeFmDxI1kWU","pzaGuideView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaGuideView=void 0;var r=a("../../Common/pzaGameCommonPool"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.guideTxt=null,t.guideAniNode=null,t.fingerNode=null,t.circleNode=null,t.words=null,t.guideEndCall=null,t.canClick=!0,t.fingerPos=null,t.fingerEvent=null,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickNext,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickNext,this)},t.prototype.showGuide=function(a,t,e,o){void 0===e&&(e=null),void 0===o&&(o=null),this.canClick=!0,this.guideAniNode.active=!1,this.words=a,this.fingerPos=e,this.fingerEvent=o,this.guideEndCall=t,this.showNext()},t.prototype.clickNext=function(){this.canClick&&this.showNext()},t.prototype.showNext=function(){var a=this.words.shift();if(null==a)return this.close(),void(this.guideEndCall&&this.guideEndCall());this.guideTxt.string=a.word,a.event&&a.event(),this.words.length<=0&&null!=this.fingerPos&&this.showFingerAni()},t.prototype.showFingerAni=function(){var a=this;this.canClick=!1,this.guideAniNode.active=!0,this.guideAniNode.setPosition(this.fingerPos),this.circleNode.active=!1,this.fingerNode.stopAllActions(),this.fingerNode.setPosition(cc.v2(105,15)),this.fingerNode.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(110,35)),cc.moveTo(.3,cc.v2(90,-10)),cc.callFunc(function(){a.circleNode.active=!0,a.circleNode.stopAllActions(),a.circleNode.runAction(cc.sequence(cc.callFunc(function(){a.circleNode.opacity=255,a.circleNode.scale=.5}),cc.spawn(cc.scaleTo(.3,1.5),cc.sequence(cc.delayTime(.15),cc.fadeOut(.35)))))}),cc.delayTime(.1),cc.moveTo(.3,cc.v2(105,0)),cc.callFunc(function(){a.circleNode.stopAllActions(),a.circleNode.runAction(cc.sequence(cc.callFunc(function(){a.circleNode.opacity=255,a.circleNode.scale=.5}),cc.spawn(cc.scaleTo(.3,1.5),cc.sequence(cc.delayTime(.15),cc.fadeOut(.35)))))}),cc.delayTime(1))))},t.prototype.clickFinger=function(){this.close(),this.guideEndCall&&this.guideEndCall(),this.fingerEvent&&this.fingerEvent()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s({displayName:"\u5f15\u5bfc\u6587\u6848",type:cc.Label})],t.prototype,"guideTxt",void 0),i([s({displayName:"\u5f15\u5bfc\u52a8\u753b\u8282\u70b9",type:cc.Node})],t.prototype,"guideAniNode",void 0),i([s({displayName:"\u52a8\u753b\u624b\u6307",type:cc.Node})],t.prototype,"fingerNode",void 0),i([s({displayName:"\u52a8\u753b\u5149\u5708",type:cc.Node})],t.prototype,"circleNode",void 0),i([l],t)}(cc.Component);e.pzaGuideView=c,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaHamburgShooter:[function(a,t,e){"use strict";cc._RF.push(t,"088947ecItKYJMw8kSmnz8W","pzaHamburgShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHamburgShooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Load/pzaBundleObjectPool"),c=a("../../Load/pzaPreLoadManager"),u=a("../../utils/pzakc"),d=a("../Bullet/pzaBaseBullet"),h=a("../Bullet/pzaPeaBullet"),m=a("../pzaGameState"),f=a("../pzaSunLight"),z=a("./pzaBasePlant"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefabs=[],t.dropSunTime=25,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.dropSunTime=3;var o=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData))return l.pzaSoundManager.playAudio("PeashooterAtk"),void e.animation.playAnimation("attack",!1,function(){e.animation.playAnimation("idle",!1,o)},function(){e.shoot()});e.animation.playAnimation("idle",!1,o)};o()},t.prototype.shootOne=function(a,t,e){var o=r.pzaGameCommonPool.requestInstant2(a);if(null!=o){o.setParent(e),o.setPosition(t);var n=o.getComponent(d.pzaBaseBullet),i=1;n instanceof h.pzaPeaBullet&&Math.random()<.5&&(i=0),n.init(this.baseData.yIndex,this.baseData.atk,i);var p=m.pzaGameState.map.getMapSkewColumn();p>0&&this.baseData.xIndex<=p-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*m.pzaGameState.map.getBlockWidth())}},t.prototype.shoot=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=p.pzaNodeManager.getBulletNode();if(null!=t)for(var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=t.convertToNodeSpaceAR(e),n=u.default.randomChoose(this.bulletPrefabs,8),i=function(e){r.scheduleOnce(function(){a.shootOne(n[e],o,t)},.1*e)},r=this,l=0;l<n.length;l++)i(l)}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.dropSunTime-=t,this.dropSunTime<=0&&(this.dropSunTime=25,this.dropSun(25))},t.prototype.dropSun=function(a){var t=this.node.getPosition();s.pzaBundleObjectPool.requestInstantByUrl2(c.pzaResourceUrl.SUN,function(e,o){if(null==e&&null!=o){o.setParent(p.pzaNodeManager.getUpBgNode());var n=o.getComponent(f.pzaSunLight);n&&n.init2(t,1,a),window.pzaplantManager.AllSunLight.add(n)}else console.error(e)})},i([v({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([v(cc.Prefab)],t.prototype,"bulletPrefabs",void 0),i([g],t)}(z.pzaBasePlant);e.pzaHamburgShooter=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzakc":"pzakc","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Bullet/pzaPeaBullet":"pzaPeaBullet","../pzaGameState":"pzaGameState","../pzaSunLight":"pzaSunLight","./pzaBasePlant":"pzaBasePlant"}],pzaHammerEffect:[function(a,t,e){"use strict";cc._RF.push(t,"dedbdX7ZaBIZbSV49lpNH0w","pzaHammerEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHammerEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaSoundManager"),u=a("../Plant/pzaAttackType"),d=a("../pzaBaseBody"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hammer=null,t.collider=null,t.peng=null,t.poolPrefab=null,t.trigger=!1,t.hitZombie=!1,t}return n(t,a),t.prototype.showEffect=function(){var a=this;this.collider.enabled=!0,p.pzaCollisionManager.getInstance.addBulletOther(this),this.trigger=!1,this.hitZombie=!1,this.peng.active=!1,this.hammer.stopAllActions(),this.hammer.angle=40,this.hammer.opacity=255,this.hammer.runAction(cc.sequence(cc.rotateTo(.1,-60),cc.callFunc(function(){a.trigger=!0}),cc.fadeOut(.1),cc.callFunc(function(){a.hitZombie||(c.pzaSoundManager.playAudio("voidbang"),a.close())})))},t.prototype.onlyShowHammer=function(){var a=this;this.collider.enabled=!1,p.pzaCollisionManager.getInstance.delBulletOther(this),this.trigger=!1,this.hitZombie=!1,this.peng.active=!1,this.hammer.stopAllActions(),this.hammer.angle=40,this.hammer.opacity=255,this.hammer.runAction(cc.sequence(cc.rotateTo(.1,-60),cc.fadeOut(.1),cc.callFunc(function(){a.close()})))},t.prototype.showPeng=function(){var a=this;this.peng.active=!0,this.peng.stopAllActions(),this.peng.scale=.5,this.peng.opacity=122,this.peng.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.fadeIn(.1)),cc.delayTime(.4),cc.fadeOut(.1),cc.callFunc(function(){a.close()})))},t.prototype.pauseSelf=function(){this.hammer.pauseAllActions(),this.peng.pauseAllActions()},t.prototype.resumeSelf=function(){this.hammer.resumeAllActions(),this.peng.resumeAllActions()},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?(this.collider.poSource=this.node,this.collider):null},t.prototype.onCollision=function(a){if(!this.trigger&&a.node.group==s.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(d.pzaBaseBody);if(null==t||null==t.baseData||t.baseData.isDead)return;var e=window.pzazombieManager.getZombie(t.baseData);if(null==e)return;e.hurt(1e3,null,u.pzaAttackType.KNOCK),this.trigger=!0,this.hitZombie=!0,this.showPeng()}},t.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([f({displayName:"\u9524\u5b50",type:cc.Node})],t.prototype,"hammer",void 0),i([f({displayName:"\u78b0\u649e\u7ec4\u4ef6",type:cc.BoxCollider})],t.prototype,"collider",void 0),i([f({displayName:"\u562d",type:cc.Node})],t.prototype,"peng",void 0),i([f(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([m],t)}(r.pzaBaseComponent);e.pzaHammerEffect=z,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../Plant/pzaAttackType":"pzaAttackType","../pzaBaseBody":"pzaBaseBody"}],pzaHandbookCard:[function(a,t,e){"use strict";cc._RF.push(t,"90c044XkCxGMLQGNppnP0Zh","pzaHandbookCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHandbookCard=void 0;var r=a("../Battle/Data/pzaPlantEnum"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGameConfig"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardBoard=null,t.cardBoardFrames=[],t.cardIcon=null,t.priceLabel=null,t.priceNode=null,t.voidSlot=null,t.select=null,t.plantType=null,t.clickCall=null,t.hasPlant=!1,t}return n(t,a),t.prototype.bindData=function(a,t){if(this.select.active=!1,this.plantType=a,this.clickCall=t,this.hasPlant=s.pzaLocalData.data.ownPlants.includes(a),!this.hasPlant)return this.voidSlot.active=!0,void(this.cardBoard.node.active=!1);if(this.voidSlot.active=!1,this.cardBoard.node.active=!0,u.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),a==r.pzaPlantEnum.IMITATER)return this.priceNode.active=!1,void(this.cardBoard.spriteFrame=this.cardBoardFrames[0]);this.priceNode.active=!0;var e=l.pzaGameConfig.getPlantConfig(a);null!=e&&(this.priceLabel.string=""+e.price,this.cardBoard.spriteFrame=this.cardBoardFrames[e.rareLevel])},t.prototype.zjBindData=function(a,t){if(this.select.active=!1,this.plantType=a,this.clickCall=t,this.hasPlant=!0,this.voidSlot.active=!1,this.cardBoard.node.active=!0,u.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),a==r.pzaPlantEnum.IMITATER)return this.priceNode.active=!1,void(this.cardBoard.spriteFrame=this.cardBoardFrames[0]);this.priceNode.active=!0;var e=l.pzaGameConfig.getPlantConfig(a);null!=e&&(this.priceLabel.string=""+e.price,this.cardBoard.spriteFrame=this.cardBoardFrames[e.rareLevel])},t.prototype.clickCard=function(){this.hasPlant&&(c.pzaSoundManager.playSFX(),this.clickCall&&this.clickCall(this.plantType))},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([m({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([m({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([m({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([m({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],t.prototype,"priceLabel",void 0),i([m({displayName:"\u4ef7\u683c\u8282\u70b9",type:cc.Node})],t.prototype,"priceNode",void 0),i([m({displayName:"\u7a7a\u5361\u69fd",type:cc.Node})],t.prototype,"voidSlot",void 0),i([m({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"select",void 0),i([h],t)}(cc.Component);e.pzaHandbookCard=f,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaHandbookView:[function(a,t,e){"use strict";cc._RF.push(t,"3cd4cOQNe5AlKqqOM/396Us","pzaHandbookView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHandbookView=void 0;var r=a("../Battle/pzaGameState"),p=a("../Battle/pzaSpineTool"),l=a("../Battle/Zombie/pzaZombieSlot"),s=a("../Common/pzaGameCommonPool"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaSoundManager"),d=a("../Common/pzaStatisticsMgr"),h=a("../Common/pzaUIManager"),m=a("../Load/pzaPreLoadManager"),f=a("./pzaPlantHandbookView"),z=a("./pzaZombieHandbookView"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.plantNode=null,t.zjPlantNode=null,t.zombieNode=null,t.zjZombieNode1=null,t.jdNode=null,t.zjNode=null,t.lastBgm=null,t.closeCall=null,t}return n(t,a),t.prototype.onEnable=function(){c.pzaLocalData.isClickZj=!1,this.showAni(),d.pzaStatisticsMgr.sendEvent("System",{name:"system",value:4}),this.lastBgm=null,"fightbeforebgm"!=u.pzaSoundManager.lastbgmName&&(this.lastBgm=u.pzaSoundManager.lastbgmName,u.pzaSoundManager.playBgm(u.pzaBGMName.PRE_BGM)),r.pzaGameState.isInHandBookView=!0},t.prototype.bindCloseCall=function(a){this.closeCall=a},t.prototype.zjInit=function(){this.jdNode.active=!1,this.zjNode.active=!0,this.clickZjBtn()},t.prototype.jdInit=function(){this.jdNode.active=!1,this.zjNode.active=!1,this.clickJdBtn()},t.prototype.clickPlantBook=function(){var a=this;u.pzaSoundManager.playSFX(),h.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.PLANT_HANDBOOK_VIEW,function(t){var e=t&&t.getComponent(f.pzaPlantHandbookView);e&&e.bindCloseCall(function(){a.close(),a.closeCall&&a.closeCall(),a.closeCall=null})})},t.prototype.clickZombieBook=function(){var a=this;u.pzaSoundManager.playSFX(),h.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.ZOMBIE_HANDBOOK_VIEW,function(t){var e=t&&t.getComponent(z.pzaZombieHandbookView);e&&e.bindCloseCall(function(){a.close(),a.closeCall&&a.closeCall(),a.closeCall=null})})},t.prototype.clickClose=function(){u.pzaSoundManager.playSFX(),this.close(),this.closeCall&&this.closeCall(),this.closeCall=null},t.prototype.showAni=function(){c.pzaLocalData.isClickZj?(this.plantNode.active=!1,this.zombieNode.active=!1,this.zjPlantNode.active=!0,this.zjZombieNode1.active=!0,p.pzaSpineTool.instance().setSlotAtt(this.zjZombieNode1.getComponent(sp.Skeleton),l.pzaZombieSlotType.hat,l.pzaZombieSlotType.hat_green+"1",-5.4,81.02)):(this.plantNode.active=!0,this.zombieNode.active=!0,this.zjPlantNode.active=!1,this.zjZombieNode1.active=!1,p.pzaSpineTool.instance().setSlotAtt(this.zjZombieNode1.getComponent(sp.Skeleton),l.pzaZombieSlotType.hat,null,0,0))},t.prototype.clickZjBtn=function(){c.pzaLocalData.isClickZj=!0,this.showAni()},t.prototype.clickJdBtn=function(){c.pzaLocalData.isClickZj=!1,this.showAni()},t.prototype.close=function(){this.zjNode.active=!1,this.lastBgm&&u.pzaSoundManager.playBgm(this.lastBgm),s.pzaGameCommonPool.returnInstant(this.node),r.pzaGameState.isInHandBookView=!1},i([v({displayName:"\u7ecf\u5178\u7248\u690d\u7269",type:cc.Node})],t.prototype,"plantNode",void 0),i([v({displayName:"\u6742\u4ea4\u690d\u7269",type:cc.Node})],t.prototype,"zjPlantNode",void 0),i([v({displayName:"\u7ecf\u5178\u50f5\u5c38",type:cc.Node})],t.prototype,"zombieNode",void 0),i([v({displayName:"\u6742\u4ea4\u50f5\u5c381",type:cc.Node})],t.prototype,"zjZombieNode1",void 0),i([v({displayName:"\u7ecf\u5178\u6309\u94ae",type:cc.Node})],t.prototype,"jdNode",void 0),i([v({displayName:"\u6742\u4ea4\u6309\u94ae",type:cc.Node})],t.prototype,"zjNode",void 0),i([g],t)}(cc.Component);e.pzaHandbookView=b,cc._RF.pop()},{"../Battle/Zombie/pzaZombieSlot":"pzaZombieSlot","../Battle/pzaGameState":"pzaGameState","../Battle/pzaSpineTool":"pzaSpineTool","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaPlantHandbookView":"pzaPlantHandbookView","./pzaZombieHandbookView":"pzaZombieHandbookView"}],pzaHeighIceNut:[function(a,t,e){"use strict";cc._RF.push(t,"2558d3F2S9I/Yxla66aFzR1","pzaHeighIceNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHeighIceNut=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaTipManager"),c=a("../../Common/pzaUtil"),u=a("../Bullet/pzaBaseBullet"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaPlantEnum"),m=a("../Data/pzaZombieEnum"),f=a("../pzaEffectManager"),z=a("../pzaGameState"),y=a("./pzaAttackType"),g=a("./pzaBasePlant"),v=cc._decorator,b=v.ccclass,S=v.property,P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.antiBangTimes=8,t.canAntiBang=!0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=h.pzaPlantCate.Nut,this.antiBangTimes=8,this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData))return l.pzaSoundManager.playAudio("SnowPeaAtk"),void e.animation.playAnimation("attack",!1,o,function(){e.shoot()});e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye1",!1,o))};o()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t)},t.prototype.hurt=function(a,t,e){var o=this;if(null!=this.baseData&&!this.baseData.isDead){if(e==y.pzaAttackType.ROLLING||e==y.pzaAttackType.BOOM||e==y.pzaAttackType.BANG){if(this.antiBangTimes>0){if(!this.canAntiBang)return;if(this.canAntiBang=!1,this.antiBangTimes--,this.scheduleOnce(function(){o.canAntiBang=!0},1),t.zombieData&&t.zombieData.cate===m.pzaZombieCate.IceCar){var n=window.pzazombieManager.getZombie(t);n&&n.hurt(this.baseData.atk,this.baseData,y.pzaAttackType.SPIKE)}return}this.baseData.isDead=!0,this.baseData.hp=0,window.pzaplantManager.removePlant(this.baseData),e==y.pzaAttackType.BOOM?this.death(t):this.flaserDeath();var i;return i=1==z.pzaGameState.curChapter||3==z.pzaGameState.curChapter||5==z.pzaGameState.curChapter||6==z.pzaGameState.curChapter||8==z.pzaGameState.curChapter||10==z.pzaGameState.curChapter?4:6,z.pzaGameState.partStar>0&&z.pzaGameState.lossPlantCount==i&&(s.pzaTipManager.showLossStarTip(!1,!0),z.pzaGameState.partStar--),void z.pzaGameState.lossPlantCount++}if(this.baseData.hurtPlanet(a),this.refreshHurtState(!1),this.animation.showLight(),(this.baseData.isDead||this.baseData.hp<=0)&&(window.pzaplantManager.removePlant(this.baseData),this.death(t),z.pzaGameState.partStar>0&&2==z.pzaGameState.lossPlantCount&&(s.pzaTipManager.showLossStarTip(!1,!0),z.pzaGameState.partStar--),z.pzaGameState.lossPlantCount++,l.pzaSoundManager.playAudio("gulp")),e==y.pzaAttackType.THROW_ATK&&this.baseData.hp>0){var r="zombieHurt"+(Math.floor(2*Math.random())+1);l.pzaSoundManager.playAudio(r)}if(Math.random()<.5){var p=window.pzazombieManager.getZombie(t);if(!p)return;p.bePauseControl(),t.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROZEN,3,this.baseData.atk)),t.zombieData.zombieType!=m.pzaZombieEnum.DR_ZOMBOSS&&f.pzaEffectManager.createFrozenEffect(t)}}},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode(),t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(u.pzaBaseBullet);n.init(this.baseData.yIndex,this.baseData.atk);var i=z.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*z.pzaGameState.map.getBlockWidth())}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([S({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([S({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([b],t)}(g.pzaBasePlant);e.pzaHeighIceNut=P,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaHoleNut:[function(a,t,e){"use strict";cc._RF.push(t,"b3a2btp3OVG2YY1EKkRAGje","pzaHoleNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHoleNut=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaPlantEnum"),l=a("../pzaEffectManager"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=8,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,this.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=r.pzaUtil.getRandomFloatNum(8,10),e.animation.playAnimation("idle2",!1,o))};this.animation.playAnimation("idle1",!1,o),o()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.showHole=function(){l.pzaEffectManager.createDoomHoleEffect(this.baseData.logicPos,this.baseData.xIndex,this.baseData.yIndex)},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.showHole()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.showHole()},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+80),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow2",e)},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+80),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow1",e)},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([u],t)}(s.pzaBasePlant));e.pzaHoleNut=d,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","./pzaBasePlant":"pzaBasePlant"}],pzaHoloCards:[function(a,t,e){"use strict";cc._RF.push(t,"9e523jpRPdFZ5uyuIGo5xm8","pzaHoloCards");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHoloCards=void 0;var r=a("../../Common/pzaWorldEventManager"),p=a("../pzaGameState"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.updateVal=25,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.bodyBindData=!0,this.body.node.getComponent(cc.Collider).enabled=!1,this.animation.playAnimation("idle",!0),this.decreaseSunVal()},t.prototype.decreaseSunVal=function(){p.pzaGameState.sunDecreaseValue+=this.updateVal,r.pzaWorldEventManager.triggerEvent(r.pzaWorldEventType.UPDATE_ALL_PLANT_PRICE,null)},t.prototype.increaseSunVal=function(){p.pzaGameState.sunDecreaseValue-=this.updateVal,r.pzaWorldEventManager.triggerEvent(r.pzaWorldEventType.UPDATE_ALL_PLANT_PRICE,null)},t.prototype.close=function(){a.prototype.close.call(this),p.pzaGameState.isInHandBookView||this.increaseSunVal()},i([c],t)}(l.pzaBasePlant));e.pzaHoloCards=u,cc._RF.pop()},{"../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaHomeTip:[function(a,t,e){"use strict";cc._RF.push(t,"77c0b7ai01Ne4ZwCimBv8Xo","pzaHomeTip");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHomeTip=void 0;var r=a("./pzaGameCommonPool"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.word=null,t.closeTime=0,t}return n(t,a),t.prototype.showTip=function(a,t){void 0===t&&(t=0),this.word.node.active=!0,this.word.string=a,this.closeTime=t,this.word.node.stopAllActions(),this.word.node.opacity=255,this.word.node.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.3,177),cc.fadeTo(.3,255))))},t.prototype.update=function(a){this.closeTime<=0||(this.closeTime-=a,this.closeTime<=0&&this.close())},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s({displayName:"\u6587\u5b57",type:cc.Label})],t.prototype,"word",void 0),i([l],t)}(cc.Component);e.pzaHomeTip=c,cc._RF.pop()},{"./pzaGameCommonPool":"pzaGameCommonPool"}],pzaHomeView:[function(a,t,e){"use strict";cc._RF.push(t,"ca117f9f6FOXbZyu8xg7+mB","pzaHomeView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Achieve/pzaAchieveView"),p=a("../Battle/Data/pzaGuideType"),l=a("../Battle/Data/pzaPlantEnum"),s=a("../Common/pzaGamePropConfig"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaRecruitTaskConf"),d=a("../Common/pzaRewardManager"),h=a("../Common/pzaShareGiftConfig"),m=a("../Common/pzaSoundManager"),f=a("../Common/pzaStatisticsMgr"),z=a("../Common/pzaTipManager"),y=a("../Common/pzaUIManager"),g=a("../Common/pzaUtil"),v=a("../Garden/pzaGardenMgr"),b=a("../Garden/pzaGardenView"),S=a("../Load/pzaPreLoadManager"),P=a("../utils/pzaChannel"),C=a("../utils/pzaChannelMy"),D=a("../utils/pzakc"),M=a("./Battle/pzaOptionView"),E=a("./pzaCommonMask"),_=a("./pzaGameClubView"),T=a("./pzaRecruitView"),w=a("./pzaSaveView"),A=a("./pzaShareGiftView"),B=a("./pzaShopView"),G=a("./pzaTasksView"),O=a("./pzaWarningView"),I=cc._decorator,N=I.ccclass,R=I.property,L=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.adventureNode=null,t.adventureBtn=null,t.closeEyeNode=null,t.challengeNode=null,t.challengeBtn=null,t.leafNode=null,t.guanKaDescLab=null,t.gardenBtn=null,t.shopBtn=null,t.achBtn=null,t.signBtn=null,t.monthSignBtn=null,t.shareGiftBtn=null,t.gameClubBtn=null,t.achUI=null,t.sideBarNode=null,t.addToDeskNode=null,t.recordNode=null,t.gameClubNode=null,t.invivateNode=null,t.carouselImgArr=[],t.creativeTip=null,t.welfareMask=null,t.welfareArrow=null,t.weekTwoTipNode=null,t.creativeModeNode=null,t.weekTwoTaskNode=null,t.endTime=new Date("2024-08-25 00:00:00").getTime(),t.curTouchBt=null,t.closeEye=!1,t.eyeChangeTime=0,t.showLeafAniFlag=!0,t.carouseTime=3,t.isExpand=!1,t}return n(t,a),t.prototype.onLoad=function(){this.scheduleOnce(function(){C.pzaChannelMy.SOPReport(C.reportAct.reportGamePlay)},1)},t.prototype.onEnable=function(){var a=this;D.default.overRecruitTime(),m.pzaSoundManager.playBgm(m.pzaBGMName.LOADING),this.adventureBtn.on(cc.Node.EventType.TOUCH_START,this.touchAdventureBtn,this),this.adventureBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.clickAdventureBtn,this),this.adventureBtn.on(cc.Node.EventType.TOUCH_END,this.clickAdventureBtn,this),this.challengeBtn.on(cc.Node.EventType.TOUCH_START,this.touchChallengeBtn,this),this.challengeBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.clickChallengeBtn,this),this.challengeBtn.on(cc.Node.EventType.TOUCH_END,this.clickChallengeBtn,this),this.creativeModeNode.on(cc.Node.EventType.TOUCH_START,this.touchAuto,this),this.creativeModeNode.on(cc.Node.EventType.TOUCH_CANCEL,this.clickAuto,this),this.creativeModeNode.on(cc.Node.EventType.TOUCH_END,this.clickAuto,this),this.refreshHomeView(),D.default.regMsgReciever("unlockMonth",function(){return a.monthSignBtn.active=!0,a.signBtn.active=!1,!0}),D.default.regMsgReciever("closecreativetip",function(){return cc.Tween.stopAllByTarget(a.creativeTip),a.creativeTip.active=!1,!0}),D.default.regMsgReciever("readGameData",function(){return E.pzaCommonMask.showMask(!0),a.refreshHomeView(),v.default.instance().loadPlantsFromSave(),a.scheduleOnce(function(){E.pzaCommonMask.hideMask(),z.pzaTipManager.showHomeTip("\u6570\u636e\u8bfb\u53d6\u6210\u529f",null,2)},2),!0}),D.default.regMsgReciever("saveGameData",function(){return E.pzaCommonMask.showMask(!0),a.refreshHomeView(),v.default.instance().loadPlantsFromSave(),a.scheduleOnce(function(){E.pzaCommonMask.hideMask(),z.pzaTipManager.showHomeTip("\u6570\u636e\u4fdd\u5b58\u6210\u529f",null,2)},2),!0}),c.pzaLocalData.isShowSaveView&&(c.pzaLocalData.isShowSaveView=!1,y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.SAVE_VIEW,function(a){var t=a&&a.getComponent(w.pzaSaveView);t&&t.gameInit(null)})),this.welfareMask.width=0,this.welfareArrow.active=!1,c.pzaLocalData.isNewUser&&!c.pzaLocalData.holidayRecruitOver&&c.pzaLocalData.onlyPopOne?(c.pzaLocalData.onlyPopOne=!1,c.pzaLocalData.autoPopInvitateView=!1,this.clickInvitation()):c.pzaLocalData.autoPopInvitateView&&!c.pzaLocalData.holidayRecruitOver&&(c.pzaLocalData.autoPopInvitateView=!1,c.pzaLocalData.onlyPopOne=!1,this.clickInvitation()),c.pzaLocalData.data.hasInGame=!0,c.pzaLocalData.addDirty("hasInGame"),this.isExpand=!1,c.pzaLocalData.data.shareGiftRecIndex.indexOf(3)>=0&&c.pzaLocalData.data.ownPlants.indexOf(l.pzaPlantEnum.BOOM_NUT)<0&&(c.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.BOOM_NUT),c.pzaLocalData.addDirty("ownPlants")),c.pzaLocalData.loadingIsOver=!0},t.prototype.refreshHomeView=function(){this.challengeNode&&(this.challengeNode.active=!1),this.adventureNode&&(this.adventureNode.active=!1);var a="";switch(c.pzaLocalData.data.curChapter>5?c.pzaLocalData.data.curChapter-5:c.pzaLocalData.data.curChapter){case 1:a="\u767d\u5929";break;case 2:a="\u9ed1\u591c";break;case 3:a="\u6cf3\u6c60";break;case 4:a="\u96fe\u591c";break;case 5:a="\u5c4b\u9876"}a=a+"\n\u5173\u5361"+c.pzaLocalData.data.curPart,this.guanKaDescLab&&(this.guanKaDescLab.string=a),this.monthSignBtn&&(this.monthSignBtn.active=!1),this.closeEye=!0,this.refreshEye(),this.showLeafAni(),this.gardenBtn&&(this.gardenBtn.active=!0),this.shopBtn&&(this.shopBtn.active=!0),this.achBtn&&(this.achBtn.active=!0),this.signBtn&&(this.signBtn.active=this.shareGiftBtn.active=c.pzaLocalData.data.curChapter>1||1==c.pzaLocalData.data.curChapter&&c.pzaLocalData.data.curPart>=4),this.gameClubBtn&&(this.gameClubBtn.active="wx"==P.pzaChannel.instance().getChannel().channel),!c.pzaLocalData.data.openPuzzleTip&&(c.pzaLocalData.data.curChapter>1||c.pzaLocalData.data.curPart>4)&&(c.pzaLocalData.data.openPuzzleTip=!0,c.pzaLocalData.addDirty("openPuzzleTip"),y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(O.pzaWarningView);t&&t.show("\u76ca\u667a\u6a21\u5f0f\u5173\u5361\u5df2\u5f00\u653e","\u786e\u5b9a","\u7acb\u5373\u524d\u5f80",null,function(){y.pzaUIManager.removeAllPopUI(),y.pzaUIManager.aniShowPopUI(S.pzaResourceUrl.CHALLENGE_VIEW,null)},"\u89e3\u9501\u65b0\u6a21\u5f0f")}));var t=D.default.getData("sidebar",{today:"",canGet:"-1"});if(this.sideBarNode&&(this.sideBarNode.active=!1),P.pzaChannel.instance().channel.indexOf("tt")>=0){var e=window.tt;"-1"!=t.canGet?e.checkScene&&this.sideBarNode&&(this.sideBarNode.active=!0):this.sideBarNode&&(this.sideBarNode.active=!1)}if(this.addToDeskNode&&(this.addToDeskNode.active=!1),"tt"==P.pzaChannel.instance().channel&&(this.addToDeskNode&&(this.addToDeskNode.active=!0),D.default.getData("addToDesk",0)&&this.addToDeskNode&&(this.addToDeskNode.active=!1)),this.shopBtn&&this.shopBtn.active?this.sideBarNode&&this.sideBarNode.active?(this.sideBarNode.x=this.shopBtn.x+121,this.addToDeskNode&&(this.addToDeskNode.x=this.sideBarNode.x+121)):this.addToDeskNode&&(this.addToDeskNode.x=this.shopBtn.x+121):this.sideBarNode&&this.sideBarNode.active?(this.sideBarNode.x=this.shopBtn.x,this.addToDeskNode&&(this.addToDeskNode.x=this.sideBarNode.x+121)):this.addToDeskNode&&(this.addToDeskNode.x=this.shopBtn.x),"tt"!=P.pzaChannel.instance().channel&&this.sideBarNode&&this.addToDeskNode&&this.recordNode&&(this.sideBarNode.active=!1,this.addToDeskNode.active=!1,this.recordNode.active=!1),"wx"!=P.pzaChannel.instance().channel&&(this.gameClubNode.active=!1),c.pzaLocalData.data&&c.pzaLocalData.data.canMonthSign&&this.monthSignBtn&&this.signBtn&&(this.monthSignBtn.active=!0,this.signBtn.active=!1),c.pzaLocalData.holidayRecruitOver&&this.invivateNode&&(this.invivateNode.active=!1),this.carouselImgArr){this.carouseTime=3;for(var o=0;o<this.carouselImgArr.length;o++){if(!this.carouselImgArr[o])return;this.carouselImgArr[o].x=150*o,this.carouselImgArr[o].y=0}this.creativeTip&&this.monthSignBtn&&this.signBtn&&this.invivateNode&&this.shareGiftBtn&&(0==c.pzaLocalData.data.clickCreateModeTip?(this.creativeTip.active=!0,this.creativeTip.angle=0,cc.Tween.stopAllByTarget(this.creativeTip),D.default.ani_JitterNode(this.creativeTip,.4,15,3,!0)):this.creativeTip.active=!1,this.weekTwoTipNode.active=!1,c.pzaLocalData.data.passLastPart&&c.pzaLocalData.data.weekTwoOpenTip1&&(this.weekTwoTipNode.active=!0,this.weekTwoTipNode.angle=0,cc.Tween.stopAllByTarget(this.weekTwoTipNode),D.default.ani_JitterNode(this.weekTwoTipNode,.4,15,3,!0)),this.monthSignBtn.active||this.signBtn.active?this.shareGiftBtn.active?(this.shareGiftBtn.x=this.monthSignBtn.x+120,this.invivateNode.active&&(this.invivateNode.x=this.shareGiftBtn.x+120)):this.invivateNode.active&&(this.invivateNode.x=this.monthSignBtn.x+120):this.shareGiftBtn.active?(this.shareGiftBtn.x=this.monthSignBtn.x,this.invivateNode.active&&(this.invivateNode.x=this.shareGiftBtn.x+120)):this.invivateNode.active&&(this.invivateNode.x=this.monthSignBtn.x),this.weekTwoTaskNode.active=!0,c.pzaLocalData.serverTime>this.endTime&&(this.weekTwoTaskNode.active=!1))}},t.prototype.resetCarouseImgPos=function(){for(var a=0;a<this.carouselImgArr.length;a++)this.carouselImgArr[a].x<-290&&(this.carouselImgArr[a].x=150,this.carouselImgArr[a].y=0);this.carouseTime=3},t.prototype.playCarouseImg=function(){for(var a=this,t=0;t<3;t++){var e=cc.misc.degreesToRadians(180),o=this.carouselImgArr[t].x+150*Math.cos(e),n=this.carouselImgArr[t].y+150*Math.sin(e);cc.tween(this.carouselImgArr[t]).to(.5,{position:cc.v3(o,n)}).call(function(){a.resetCarouseImgPos()}).start()}},t.prototype.unlockMonthSign=function(){this.monthSignBtn.active=!0,this.signBtn.active=!1},t.prototype.onDisable=function(){D.default.delMsgReciever("unlockMonth"),D.default.delMsgReciever("closecreativetip"),D.default.delMsgReciever("readGameData"),D.default.delMsgReciever("saveGameData"),this.adventureBtn.off(cc.Node.EventType.TOUCH_START,this.touchAdventureBtn,this),this.adventureBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.clickAdventureBtn,this),this.adventureBtn.off(cc.Node.EventType.TOUCH_END,this.clickAdventureBtn,this),this.challengeBtn.off(cc.Node.EventType.TOUCH_START,this.touchChallengeBtn,this),this.challengeBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.clickChallengeBtn,this),this.challengeBtn.off(cc.Node.EventType.TOUCH_END,this.clickChallengeBtn,this);for(var a=0;a<this.carouselImgArr.length;a++)this.carouselImgArr[a].stopAllActions()},t.prototype.update=function(a){this.eyeChangeTime-=a,this.eyeChangeTime<=0&&(this.closeEye=!this.closeEye,this.refreshEye()),this.showLeafAniFlag&&this.showLeafAni(),this.carouseTime>0&&(this.carouseTime-=a,this.carouseTime<=0&&this.playCarouseImg())},t.prototype.refreshEye=function(){this.closeEyeNode&&(this.closeEyeNode.active=this.closeEye),this.eyeChangeTime=this.closeEye?.3:1},t.prototype.showLeafAni=function(){var a=this;if(this.leafNode){this.showLeafAniFlag=!1,this.leafNode.stopAllActions();var t=cc.winSize.width,e=-t/2+Math.random()*t/2,o=cc.winSize.height/2+100;this.leafNode.x=e,this.leafNode.y=o;var n=g.pzaUtil.getRandomFloatNum(-t/2,t/2),i=-cc.winSize.height/2-100,r=Math.random();this.leafNode.runAction(cc.sequence(cc.spawn(cc.rotateBy(2+8*r,1e3*r),cc.moveTo(10,cc.v2(n,i)).easing(cc.easeCubicActionOut())),cc.callFunc(function(){a.showLeafAniFlag=!0})))}},t.prototype.touchChallengeBtn=function(){this.curTouchBt||(this.curTouchBt=this.challengeNode.uuid,this.challengeNode.active=!0)},t.prototype.clickChallengeBtn=function(){this.curTouchBt===this.challengeNode.uuid&&(this.curTouchBt=null,m.pzaSoundManager.playAudio("gravebutton"),this.challengeNode.active=!1,y.pzaUIManager.aniShowPopUI(S.pzaResourceUrl.CHALLENGE_VIEW,null),f.pzaStatisticsMgr.sendEvent("System",{name:"system",value:7}))},t.prototype.touchAdventureBtn=function(){this.curTouchBt||(this.curTouchBt=this.adventureNode.uuid,this.adventureNode.active=!0)},t.prototype.clickAdventureBtn=function(){var a=this;if(this.curTouchBt===this.adventureNode.uuid)if(this.curTouchBt=null,m.pzaSoundManager.playAudio("gravebutton"),this.adventureNode.active=!1,c.pzaLocalData.data.curGuideType!=p.pzaGuideType.GUIDE_SHOP_3_4&&c.pzaLocalData.data.curGuideType!=p.pzaGuideType.GUIDE_SHOP_4_4&&c.pzaLocalData.data.curGuideType!=p.pzaGuideType.GUIDE_SHOP_5_1){if(c.pzaLocalData.data.curGuideType!=p.pzaGuideType.GUIDE_GARDEN_5_4)return c.pzaLocalData.data.newGuide||c.pzaLocalData.hasPass12()?(y.pzaUIManager.aniShowPopUI(S.pzaResourceUrl.PART_SELECT_VIEW,null),void this.closeHomeWeekTip()):void y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(O.pzaWarningView);e&&e.show("\u9009\u62e9\u6211\u662f\u8001\u73a9\u5bb6\u5c06\u4f1a\u8df3\u8fc7\u6559\u7a0b\u5173\uff0c\n\u6e38\u620f\u4ece1-3\u5f00\u59cb","\u6211\u662f\u8001\u73a9\u5bb6","\u6211\u662f\u65b0\u624b",function(){c.pzaLocalData.data.newGuide=!0,c.pzaLocalData.data.curPart=3,c.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.SUN_FLOWER)||c.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.SUN_FLOWER),c.pzaLocalData.data.ownPlants.includes(l.pzaPlantEnum.CHERRY_BOMB)||c.pzaLocalData.data.ownPlants.push(l.pzaPlantEnum.CHERRY_BOMB),c.pzaLocalData.addDirty("newGuide","curPart","ownPlants"),f.pzaStatisticsMgr.sendEvent("System",{name:"system",value:9}),y.pzaUIManager.aniShowPopUI(S.pzaResourceUrl.PART_SELECT_VIEW,null),a.closeHomeWeekTip()},function(){c.pzaLocalData.data.newGuide=!0,c.pzaLocalData.addDirty("newGuide"),y.pzaUIManager.aniShowPopUI(S.pzaResourceUrl.PART_SELECT_VIEW,null),a.closeHomeWeekTip()},"\u8df3\u8fc7\u65b0\u624b")});y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.GARDEN_VIEW,function(a){var t=a&&a.getComponent(b.pzaGardenView);t&&t.init()})}else y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.SHOP_VIEW,null)},t.prototype.closeHomeWeekTip=function(){c.pzaLocalData.data.passLastPart&&(cc.Tween.stopAllByTarget(this.weekTwoTipNode),this.weekTwoTipNode.active=!1,c.pzaLocalData.data.weekTwoOpenTip1=!1,c.pzaLocalData.addDirty("weekTwoOpenTip1"))},t.prototype.clickHelp=function(){this.curTouchBt||(m.pzaSoundManager.playSFX(),y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.GAME_OPTION_VIEW,function(a){var t=a&&a.getComponent(M.pzaOptionView);t&&t.init(!1,null,"\u786e\u5b9a")}))},t.prototype.clickShop=function(){this.curTouchBt||(c.pzaLocalData.data.unlockShop?(m.pzaSoundManager.playSFX(),y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.SHOP_VIEW,function(a){var t=a&&a.getComponent(B.pzaShopView);t&&t.bindCloseCall(!0,null)})):y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(O.pzaWarningView);t&&t.show("\u5192\u9669\u6a21\u5f0f\u901a\u51733-4\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")}))},t.prototype.clickGameClub=function(){if(!this.curTouchBt){m.pzaSoundManager.playSFX();var a=function(a,t,e){y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.GAME_CLUB_VIEW,function(o){var n=o&&o.getComponent(_.pzaGameClubView);n&&n.init(a,t,e)})};E.pzaCommonMask.showMask();var t=P.pzaChannel.instance().getChannel();"wx"==t.channel?t.getGameClubData(function(e){null!=e?P.pzaChannel.decodeWxData(t.getPara("appId"),e.encryptedData,e.iv,e.authCode,e.signature,function(t){var e=0,o=0,n=0;null!=t&&t.forEach(function(a){null!=a&&null!=a.dataType&&(1==a.dataType.type?e=0==a.value?0:1:4==a.dataType.type?o=a.value:5==a.dataType.type&&(n=a.value))}),a(e,o,n)}):a(0,0,0)}):a(0,0,0)}},t.prototype.clickAchieve=function(){this.curTouchBt||(m.pzaSoundManager.playSFX(),r.default.show(this))},t.prototype.clickSign=function(){this.curTouchBt||(m.pzaSoundManager.playSFX(),y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.DAY_SIGN_VIEW,null))},t.prototype.clickMonthSign=function(){this.curTouchBt||(m.pzaSoundManager.playSFX(),y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.MONTH_SIGN_VIEW,null))},t.prototype.touchAuto=function(){this.curTouchBt||(this.curTouchBt=this.creativeModeNode.uuid)},t.prototype.clickAuto=function(){var a=this;this.curTouchBt==this.creativeModeNode.uuid&&y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.CREATIVE_VIEW,function(){a.curTouchBt=null})},t.prototype.clickShareGift=function(){if(!this.curTouchBt){m.pzaSoundManager.playSFX();var a=P.pzaChannel.instance().getChannel();"noAD"!=a.channel?"wx"==a.channel?a.getShareResult(h.pzaShareGiftConfig.act,function(a){y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.SHARE_GIFT_VIEW,function(t){var e=t&&t.getComponent(A.pzaShareGiftView);e&&e.init(a)})}):"tt"==a.channel?a.getShareResult(h.pzaShareGiftConfig.act,function(a){y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.SHARE_GIFT_VIEW,function(t){var e=t&&t.getComponent(A.pzaShareGiftView);e&&e.init(a)})}):"my"==a.channel?a.getShareResult(h.pzaShareGiftConfig.act,function(a){y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.SHARE_GIFT_VIEW,function(t){var e=t&&t.getComponent(A.pzaShareGiftView);e&&e.init(a)})}):"ks"==a.channel&&a.getShareResult(h.pzaShareGiftConfig.act,function(a){y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.SHARE_GIFT_VIEW,function(t){var e=t&&t.getComponent(A.pzaShareGiftView);e&&e.init(a)})}):y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.SHARE_GIFT_VIEW,function(a){var t=a&&a.getComponent(A.pzaShareGiftView);t&&t.init([])})}},t.prototype.clickGarden=function(){this.curTouchBt||(m.pzaSoundManager.playSFX(),c.pzaLocalData.data.unlockGarden?y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.GARDEN_VIEW,function(a){var t=a&&a.getComponent(b.pzaGardenView);t&&t.init()}):y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(O.pzaWarningView);t&&t.show("\u5192\u9669\u6a21\u5f0f\u901a\u51735-4\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")}))},t.prototype.clickInvitation=function(){if(!this.curTouchBt)if(m.pzaSoundManager.playSFX(),P.pzaChannel.isConfRemote||"noAD"==P.pzaChannel.instance().channel)y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.RECRUIT_VIEW,function(a){var t=a&&a.getComponent(T.pzaRecruitView);t&&t.bindData([])});else{var a=P.pzaChannel.instance().getChannel();"wx"==a.channel?a.getShareResult(u.pzaRecruitTaskConf.act,function(a){y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.RECRUIT_VIEW,function(t){var e=t&&t.getComponent(T.pzaRecruitView);e&&e.bindData(a)})}):"tt"==a.channel?a.getShareResult(u.pzaRecruitTaskConf.act,function(a){y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.RECRUIT_VIEW,function(t){var e=t&&t.getComponent(T.pzaRecruitView);e&&e.bindData(a)})}):"my"==a.channel?a.getShareResult(u.pzaRecruitTaskConf.act,function(a){y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.RECRUIT_VIEW,function(t){var e=t&&t.getComponent(T.pzaRecruitView);e&&e.bindData(a)})}):"ks"==a.channel&&a.getShareResult(u.pzaRecruitTaskConf.act,function(a){y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.RECRUIT_VIEW,function(t){var e=t&&t.getComponent(T.pzaRecruitView);e&&e.bindData(a)})})}},t.prototype.clickWelfareBtn=function(){var a=this;this.curTouchBt||(m.pzaSoundManager.playSFX(),this.isExpand=!this.isExpand,this.isExpand?(this.welfareArrow.active=!0,cc.tween(this.welfareMask).to(.2,{width:430}).start()):cc.tween(this.welfareMask).to(.2,{width:0}).call(function(){a.welfareArrow.active=!1}).start())},t.prototype.clickWelfareArr=function(){var a=this;this.welfareArrow.active=!0,cc.tween(this.welfareMask).to(.2,{width:0}).call(function(){a.welfareArrow.active=!1,a.isExpand=!1}).start()},t.prototype.clickSave=function(){if(!this.curTouchBt){m.pzaSoundManager.playSFX();var a=P.pzaChannel.instance().getChannel();P.pzaChannel.loadFromRemote(a.channelUserId,function(a,t){y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.SAVE_VIEW,function(a){var e=a&&a.getComponent(w.pzaSaveView);e&&e.init(t)})})}},t.prototype.clickSidebar=function(){this.curTouchBt||y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.BYTE_SIDEBAR_VIEW,function(){})},t.prototype.clickAddToDesk=function(){var a=this;this.curTouchBt||(m.pzaSoundManager.playSFX(),P.pzaChannel.instance().addShortcut({sucCall:function(){a.addToDeskNode.active=!1,c.pzaLocalData.data.coin+=100,c.pzaLocalData.addDirty("coin");var t=[new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_COIN,100)];d.pzaRewardManager.recieveRewards(t,function(){}),D.default.saveData("addToDesk",1)},failCall:function(){console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25")}}))},t.prototype.clickTasks=function(){this.curTouchBt||(c.pzaLocalData.data.passLastPart?(m.pzaSoundManager.playSFX(),G.default.show(!0)):y.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(O.pzaWarningView);t&&t.show("\u5192\u9669\u6a21\u5f0f\u901a\u51735-10\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")}))},i([R({displayName:"\u5192\u9669\u6309\u94ae\u56fe\u8282\u70b9",type:cc.Node})],t.prototype,"adventureNode",void 0),i([R({displayName:"\u5192\u9669\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"adventureBtn",void 0),i([R({displayName:"\u95ed\u773c\u8282\u70b9",type:cc.Node})],t.prototype,"closeEyeNode",void 0),i([R({displayName:"\u6311\u6218\u56fe\u8282\u70b9",type:cc.Node})],t.prototype,"challengeNode",void 0),i([R({displayName:"\u6311\u6218\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"challengeBtn",void 0),i([R({displayName:"\u6811\u53f6\u8282\u70b9",type:cc.Node})],t.prototype,"leafNode",void 0),i([R({displayName:"\u5173\u5361\u63cf\u8ff0",type:cc.Label})],t.prototype,"guanKaDescLab",void 0),i([R({displayName:"\u82b1\u56ed\u6309\u94ae",type:cc.Node})],t.prototype,"gardenBtn",void 0),i([R({displayName:"\u5546\u5e97\u6309\u94ae",type:cc.Node})],t.prototype,"shopBtn",void 0),i([R({displayName:"\u6210\u5c31\u6309\u94ae",type:cc.Node})],t.prototype,"achBtn",void 0),i([R({displayName:"\u7b7e\u5230\u6309\u94ae",type:cc.Node})],t.prototype,"signBtn",void 0),i([R({displayName:"\u6708\u7b7e\u5230\u6309\u94ae",type:cc.Node})],t.prototype,"monthSignBtn",void 0),i([R({displayName:"\u5206\u4eab\u6709\u793c\u6309\u94ae",type:cc.Node})],t.prototype,"shareGiftBtn",void 0),i([R({displayName:"\u6e38\u620f\u5708\u6309\u94ae",type:cc.Node})],t.prototype,"gameClubBtn",void 0),i([R({displayName:"\u6210\u5c31UI",type:cc.Node})],t.prototype,"achUI",void 0),i([R({displayName:"\u4fa7\u8fb9\u680f",type:cc.Node})],t.prototype,"sideBarNode",void 0),i([R({displayName:"\u6dfb\u52a0\u684c\u9762",type:cc.Node})],t.prototype,"addToDeskNode",void 0),i([R({displayName:"\u5f55\u5c4f\u6309\u94ae",type:cc.Node})],t.prototype,"recordNode",void 0),i([R({displayName:"\u793e\u533a\u6309\u94ae",type:cc.Node})],t.prototype,"gameClubNode",void 0),i([R({displayName:"\u9080\u8bf7\u6709\u793c\u6309\u94ae",type:cc.Node})],t.prototype,"invivateNode",void 0),i([R({displayName:"\u8f6e\u64ad\u56fe",type:[cc.Node]})],t.prototype,"carouselImgArr",void 0),i([R({displayName:"\u521b\u610f\u6a21\u5f0f\u63d0\u793a",type:cc.Node})],t.prototype,"creativeTip",void 0),i([R({displayName:"\u798f\u5229Mask",type:cc.Node})],t.prototype,"welfareMask",void 0),i([R({displayName:"\u798f\u5229\u7bad\u5934",type:cc.Node})],t.prototype,"welfareArrow",void 0),i([R({displayName:"\u4e8c\u5468\u76ee\u63d0\u793a",type:cc.Node})],t.prototype,"weekTwoTipNode",void 0),i([R({displayName:"\u521b\u610f\u6a21\u5f0f\u8282\u70b9",type:cc.Node})],t.prototype,"creativeModeNode",void 0),i([R({displayName:"\u4e8c\u5468\u76ee\u4efb\u52a1\u8282\u70b9",type:cc.Node})],t.prototype,"weekTwoTaskNode",void 0),i([N],t)}(cc.Component);e.default=L,cc._RF.pop()},{"../Achieve/pzaAchieveView":"pzaAchieveView","../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRecruitTaskConf":"pzaRecruitTaskConf","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Garden/pzaGardenMgr":"pzaGardenMgr","../Garden/pzaGardenView":"pzaGardenView","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzaChannelMy":"pzaChannelMy","../utils/pzakc":"pzakc","./Battle/pzaOptionView":"pzaOptionView","./pzaCommonMask":"pzaCommonMask","./pzaGameClubView":"pzaGameClubView","./pzaRecruitView":"pzaRecruitView","./pzaSaveView":"pzaSaveView","./pzaShareGiftView":"pzaShareGiftView","./pzaShopView":"pzaShopView","./pzaTasksView":"pzaTasksView","./pzaWarningView":"pzaWarningView"}],pzaHotDog:[function(a,t,e){"use strict";cc._RF.push(t,"3421do3vOdHRrq/xEd77B1W","pzaHotDog");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHotDog=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Load/pzaBundleObjectPool"),c=a("../../Load/pzaPreLoadManager"),u=a("../../utils/pzakc"),d=a("../Bullet/pzaBaseBullet"),h=a("../pzaGameState"),m=a("../pzaSunLight"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.shootNode2=null,t.bulletPrefabs=[],t.dropSunTime=25,t.shootPos1=null,t.shootPos2=null,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t);var o=p.pzaNodeManager.getBulletNode(),n=this.shootNode.convertToWorldSpaceAR(cc.v2());this.shootPos1=o.convertToNodeSpaceAR(n);var i=this.shootNode2.convertToWorldSpaceAR(cc.v2());this.shootPos2=o.convertToNodeSpaceAR(i),this.dropSunTime=3;var r=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData)||window.pzazombieManager.hasCanAttackBackZombie(e.baseData))return l.pzaSoundManager.playAudio("PeashooterAtk"),void e.animation.playAnimation("attack",!1,function(){e.animation.playAnimation("idle1",!1,r)},function(){e.shoot()});e.animation.playAnimation("idle1",!1,r)};r()},t.prototype.shootOne=function(a,t,e,o){void 0===o&&(o=!1);var n=r.pzaGameCommonPool.requestInstant2(a);if(null!=n){n.setParent(e),n.setPosition(t);var i=n.getComponent(d.pzaBaseBullet);i.init(this.baseData.yIndex,this.baseData.atk,1,null,o?cc.v2(-1,0):cc.v2(1,0));var p=h.pzaGameState.map.getMapSkewColumn();p>0&&this.baseData.xIndex<=p-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*h.pzaGameState.map.getBlockWidth())}},t.prototype.shoot=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=p.pzaNodeManager.getBulletNode();if(null!=t)for(var e=u.default.randomChoose(this.bulletPrefabs,1)[0],o=0;o<8;o++)this.scheduleOnce(function(){a.shootOne(e,a.shootPos1,t),a.shootOne(e,a.shootPos2,t,!0)},.1*o)}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.dropSunTime-=t,this.dropSunTime<=0&&(this.dropSunTime=25,this.dropSun(25),this.dropSun(25,!0))},t.prototype.dropSun=function(a,t){void 0===t&&(t=!1);var e=this.node.getPosition();t&&(e.x+=70),s.pzaBundleObjectPool.requestInstantByUrl2(c.pzaResourceUrl.SUN,function(t,o){if(null==t&&null!=o){o.setParent(p.pzaNodeManager.getUpBgNode());var n=o.getComponent(m.pzaSunLight);n&&n.init2(e,1,a),window.pzaplantManager.AllSunLight.add(n)}else console.error(t)})},i([g({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([g({displayName:"\u53d1\u5c04\u70b92",type:cc.Node})],t.prototype,"shootNode2",void 0),i([g(cc.Prefab)],t.prototype,"bulletPrefabs",void 0),i([y],t)}(f.pzaBasePlant);e.pzaHotDog=v,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzakc":"pzakc","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","../pzaSunLight":"pzaSunLight","./pzaBasePlant":"pzaBasePlant"}],pzaHtBox:[function(a,t,e){"use strict";cc._RF.push(t,"44316KwvdxB/ppm7+H8BMcc","pzaHtBox");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaGdyxItem"),p=a("./pzakc"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.close=null,t.content=null,t.list=null,t.curr_time=0,t.total_time=.1,t.is_scroll=!1,t.spacing=140,t.itemHeight=130,t.jishu_num=0,t.dir=1,t.start_y=0,t}return n(t,a),t.prototype.onLoad=function(){var a=this;this.close.on(cc.Node.EventType.TOUCH_END,function(){a.hide()}),this.list.on("touch-up",function(){a.node.active&&(a.is_scroll=!0)}),this.content.on(cc.Node.EventType.TOUCH_START,function(){a.is_scroll=!1}),this.content.on(cc.Node.EventType.TOUCH_END,function(){a.is_scroll=!0}),this.content.on(cc.Node.EventType.TOUCH_CANCEL,function(){a.is_scroll=!0})},t.prototype.hide=function(){this.is_scroll=!1,this.node.active=!1,p.default.log("\u4e92\u63a8\u5173\u95ed")},t.prototype.show=function(){var a=this;this.node.active=!0,this.node.setPosition(0,0),p.default.removeNodeChildren(this.content),hzzxsdk.getBannerAdList(!1,0,0).then(function(t){console.log("\u83b7\u53d6banner\u5e7f\u544a\u5217\u8868:",t),t&&(t.forEach(function(t,e){var o=cc.instantiate(pzaResMgr.instance().getPrefab("gdyx_item1"));o.parent=a.content;var n=-a.itemHeight/2-a.spacing*e+2*a.spacing;o.setPosition(o.x,o.y+n),o.getComponent(r.default).init(t.banner,t.title,t.description,t.appid,t.page)}),a.start_y=a.content.children[0].y,a.content.setContentSize(t.length,t.length*a.spacing),a.is_scroll=!0)})},t.prototype.update=function(a){if(this.is_scroll){this.curr_time=0;var t=50*a,e=this.content.childrenCount;if(this.content.y,!(e<=4)){var o;if(this.dir>0)this.content.children[0].y>this.spacing&&(this.jishu_num+=this.dir,this.jishu_num>=e&&(this.dir=-this.dir),this.jishu_num<=0&&(this.dir=-this.dir),(o=this.content.children.shift()).y=-(e-1)*this.spacing*this.dir,this.content.children.push(o));else this.content.childrenCount,this.content.children[0].y<0&&(this.jishu_num+=this.dir,this.jishu_num<=0&&(this.dir=-this.dir),(o=this.content.children.pop()).y=this.start_y,this.content.children.unshift(o));for(var n=0;n<e;++n)this.content.children[n].y+=t*this.dir}}},i([c(cc.Node)],t.prototype,"close",void 0),i([c(cc.Node)],t.prototype,"content",void 0),i([c(cc.Node)],t.prototype,"list",void 0),i([s],t)}(cc.Component);e.default=u,cc._RF.pop()},{"./pzaGdyxItem":"pzaGdyxItem","./pzakc":"pzakc"}],pzaHypnoShroom:[function(a,t,e){"use strict";cc._RF.push(t,"8c657KDT2VN1IijQ4azCEx/","pzaHypnoShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaHypnoShroom=void 0;var r=a("../../Common/pzaSpineController"),p=a("../pzaGameState"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.animation.playAnimation("idle1",!0)),p.pzaGameState.useShroom=!0,p.pzaGameState.onlyBoomPlant=!1},t.prototype.wakeUp=function(){var a=this;null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,function(){a.animation.playAnimation("idle1",!0)}))},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([u({displayName:"\u7761\u89c9\u52a8\u753b",type:r.pzaSpineController})],t.prototype,"sleepAni",void 0),i([c],t)}(l.pzaBasePlant);e.pzaHypnoShroom=d,cc._RF.pop()},{"../../Common/pzaSpineController":"pzaSpineController","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaIceBlover:[function(a,t,e){"use strict";cc._RF.push(t,"20021G+UiVLcbmuYbE3hobt","pzaIceBlover");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceBlover=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaWorldEventManager"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaZombieEnum"),h=a("../pzaGameState"),m=a("./pzaBlover"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.lifeTime=0,this.trigger=!1,l.pzaSoundManager.playAudio("Blover"),this.baseData.isDead=!0,this.animation.playAnimation("attack1",!1,function(){window.pzaplantManager.removePlant(e.baseData),e.death()})},t.prototype.attack=function(){this.trigger=!0,window.pzaMapManager.blowFog(),s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.BLOW_WIND,null),window.pzazombieManager.zombieMap.forEach(function(a){var t=a.baseData;if(!(t.isDead||t.buffData.hasBuff(u.pzaBuffType.DIVE)||t.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||t.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT))){a.baseData.zombieData.zombieType!=d.pzaZombieEnum.NightWear&&t.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,5,.5));var e=1;t.zombieData.zombieType!=d.pzaZombieEnum.ZOMBONI&&t.zombieData.zombieType!=d.pzaZombieEnum.ZOMBONI2&&t.zombieData.zombieType!=d.pzaZombieEnum.CATAPULT_ZOMBIE&&t.zombieData.cate!=d.pzaZombieCate.Gargantuar||(e=.25),a.pushBack(e)}});for(var a=h.pzaGameState.map.getMapRow(),t=h.pzaGameState.map.getMapOriPos(),e=t.x-600,o=t.y,n=0;n<a;n++)for(var i=o+h.pzaGameState.map.yPos[n]+80,r=0;r<10;r++)this.shoot(cc.v2(e+50*r,i),n)},t.prototype.shoot=function(a,t){var e=p.pzaNodeManager.getBulletNode(),o=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);o.setParent(e),o.setPosition(a);var n=o.getComponent(c.pzaBaseBullet);n.maxLifeTime=5,n.init(t,this.baseData.atk)},i([y({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([z],t)}(m.pzaBlover);e.pzaIceBlover=g,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBlover":"pzaBlover"}],pzaIceCat2:[function(a,t,e){"use strict";cc._RF.push(t,"9ec33tBRwpPV48fBTCgPLZR","pzaIceCat2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceCat2=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../Bullet/pzaPeaTrackBullet"),c=a("../Data/pzaBuffData"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.playNormalAni()},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();null==e?a.animation.playAnimation("idle1",!1,t):a.animation.playAnimation("attack",!1,t,function(){a.attack(e)},1.6)};this.animation.playAnimation("idle1",!1,t)},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(c.pzaBuffType.DIVE)&&!r.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(c.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){var o=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);e.setParent(t),o.setParent(t);var n=this.shootNode.convertToWorldSpaceAR(cc.v2()),i=t.convertToNodeSpaceAR(n);e.getComponent(s.pzaPeaTrackBullet).init(this.baseData.atk,a,cc.v2(i.x,i.y),this.baseData.yIndex),o.getComponent(s.pzaPeaTrackBullet).init(this.baseData.atk,a,cc.v2(i.x+50,i.y-50),this.baseData.yIndex),e.getComponent(s.pzaPeaTrackBullet).setBulletLevel(0),o.getComponent(s.pzaPeaTrackBullet).setBulletLevel(0)}}}},i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([h],t)}(u.pzaBasePlant);e.pzaIceCat2=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaPeaTrackBullet":"pzaPeaTrackBullet","../Data/pzaBuffData":"pzaBuffData","./pzaBasePlant":"pzaBasePlant"}],pzaIceCat:[function(a,t,e){"use strict";cc._RF.push(t,"c76b10Uk4xOf7glI5pI0/ht","pzaIceCat");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceCat=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../Bullet/pzaTrackBullet"),c=a("../Data/pzaBuffData"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack2")},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null==e)a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t));else{var o=a.atkAniTime/a.atkInterval*2;a.animation.playAnimation("attack2",!1,function(){a.animation.playAnimation("attack2",!1,function(){a.animation.playAnimation("idle",!1,t)},function(){a.attack(e)},o)},function(){a.attack(e)},o)}};this.animation.playAnimation("idle",!1,t)},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(c.pzaBuffType.DIVE)&&!r.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(c.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o),i=e.getComponent(s.pzaTrackBullet);i&&i.init(this.baseData.atk,a,n,this.baseData.yIndex)}}}},i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([h],t)}(u.pzaBasePlant);e.pzaIceCat=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaTrackBullet":"pzaTrackBullet","../Data/pzaBuffData":"pzaBuffData","./pzaBasePlant":"pzaBasePlant"}],pzaIceFumeShroom:[function(a,t,e){"use strict";cc._RF.push(t,"40f69hEbM1EFZCPcE8Di+Qn","pzaIceFumeShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaFumeShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaZombieEnum"),h=a("../pzaEffectManager"),m=a("./pzaAttackType"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.plantData.sleeping||(this.blinkTime-=t)},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=window.pzazombieManager.getCanAttackZombies(a.baseData,8);if(e&&e.length>0)return l.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(null!=a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x+a.shootNode.x,a.baseData.logicPos.y+a.shootNode.y);h.pzaEffectManager.createIceFumeShroomEffect(a.baseData.yIndex,t,null),a.attack(),a.hurtZombies(e)}});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};this.animation.playAnimation("idle1",!1,t)},t.prototype.attack=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);null!=n&&n.init(this.baseData.yIndex,this.baseData.plantData.atkArr[1],1)}}}},t.prototype.hurtZombies=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=t.baseData){a.zombieData.zombieType==d.pzaZombieEnum.NightWear||a.buffData.hasBuff(u.pzaBuffType.IMM_ICE)||a.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,5,.5));var e=window.pzazombieManager.getZombie(a);e&&e.hurt(t.baseData.atk,t.baseData,m.pzaAttackType.PENETRATE)}})},i([g({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([g({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([y],t)}(f.pzaBasePlant);e.pzaFumeShroom=v,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaIceGroundEffect:[function(a,t,e){"use strict";cc._RF.push(t,"b6d09eU8vpEEqYlH++7vryG","pzaIceGroundEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceGroundEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.iceGround=null,t.iceGround2=null,t.poolPrefab=null,t.lifeTime=0,t.iceInitZombiePosX=0,t.iceLength=0,t.yIndex=-1,t.xIndex=-1,t.xOriginX=-1,t.isStartCreate=!1,t.iceMaxLifeTime=30,t}return n(t,a),t.prototype.init=function(a,t,e,o){void 0===o&&(o=!1),this.baseData=a,this.lifeTime=0,null!=a&&null!=a.logicPos&&(this.node.setPosition(cc.v2(o?700:t,e)),this.iceGround.width=0,this.iceGround2.x=0,this.iceLength=0,this.iceInitZombiePosX=o?700-p.pzaGameState.map.getBlockWidth():a.logicPos.x,this.yIndex=a.yIndex,this.xIndex=-1,(p.pzaGameState.isVaseMode()||p.pzaGameState.isCreativeVaseMode())&&(this.xIndex=a.xIndex,this.xOriginX=this.xIndex),this.isStartCreate=!1,window.pzaMapManager.addIceGround(this),p.pzaGameState.isMiniMode()&&10==p.pzaGameState.curPart?this.iceMaxLifeTime=3e3:this.iceMaxLifeTime=30)},t.prototype.miniInit=function(a,t,e,o){this.lifeTime=0,this.xIndex=e,this.xOriginX=this.xIndex,this.yIndex=o,this.baseData=null,this.node.setPosition(cc.v2(700,t)),this.iceGround.width=620,window.pzaMapManager.addIceGround(this),this.isStartCreate=!0},t.prototype.logicUpdate=function(a){this.isStartCreate||(null==this.baseData||this.baseData.isDead)&&(this.lifeTime+=a,this.lifeTime>=this.iceMaxLifeTime&&this.close())},t.prototype.logicLateUpdate=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a=this.baseData.logicPos.x,t=1;5==p.pzaGameState.curChapter&&(t=4);var e=p.pzaGameState.map.getBlockLogicPos(t,this.baseData.yIndex,0,0);a=Math.max(e.x-p.pzaGameState.map.getBlockWidth()/2,a);var o=Math.abs(this.iceInitZombiePosX-a);this.iceLength=o,this.iceGround.width=o,this.iceGround2.x=-o;var n=p.pzaGameState.map.getMapXIndex(cc.v2(this.node.x-o,0));this.xIndex=n}},t.prototype.containBlock=function(a,t){return t==this.yIndex&&-1!=this.xIndex&&this.xIndex<=a},t.prototype.posHasIce=function(a,t){return t==this.yIndex&&-1!=this.xIndex&&a<=this.xOriginX&&a>=this.xIndex},t.prototype.getIceX=function(){return this.isStartCreate?80:this.node.x-this.iceLength},t.prototype.close=function(){this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy(),window.pzaMapManager.removeIceGround(this)},i([u({displayName:"\u51b0\u5730\u9762",type:cc.Node})],t.prototype,"iceGround",void 0),i([u({displayName:"\u51b0\u5730\u97622",type:cc.Node})],t.prototype,"iceGround2",void 0),i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaIceGroundEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../pzaGameState":"pzaGameState"}],pzaIceMelonBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"f4d66oKKH9LY6omZfinZPZI","pzaIceMelonBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceMelonBaseBullet=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Effect/pzaBaseEffect"),u=a("../pzaGameState"),d=a("./pzaRotateBullet"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.colliderZombie=function(a){if(a&&!a.isDead)if(null!=a.zombieData){if(a.zombieData&&a.zombieData.hypnosis)this.close();else if(!a.buffData.hasBuff(l.pzaBuffType.DIVE)&&!a.buffData.hasBuff(l.pzaBuffType.FLY))if(a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE))this.close();else{var t=window.pzazombieManager.getZombie(a);if(null!=t){if(t.hurt(this.atk),this.close(),this.hitPrefab){var e=cc.v2(this.node.x,this.node.y),o=p.pzaNodeManager.getPlantZombieNode(),n=r.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.setPosition(e);var i=n.getComponent(c.pzaBaseEffect);i&&i.showEffect(null,null),a.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||t.baseData.zombieData.zombieType!=s.pzaZombieEnum.NightWear&&a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5));for(var d=[],h=a.yIndex-1;h<=a.yIndex+1;h++)h<0||h>=u.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[h].forEach(function(t){null!=t&&t!=a&&t.xIndex==a.xIndex&&(t.buffData.hasBuff(l.pzaBuffType.FLY)||t.buffData.hasBuff(l.pzaBuffType.DIVE)||t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||d.push(t))});d.forEach(function(a){var t=window.pzazombieManager.getZombie(a);null!=t&&(t.hurt(26),t.baseData.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||t.baseData.zombieData.zombieType!=s.pzaZombieEnum.NightWear&&t.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5)))})}}else this.close()}}else this.close()},i([m],t)}(d.pzaRotateBullet));e.pzaIceMelonBaseBullet=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../pzaGameState":"pzaGameState","./pzaRotateBullet":"pzaRotateBullet"}],pzaIceMelonBullet:[function(a,t,e){"use strict";cc._RF.push(t,"1ec0apvbm5Ab5fnPlKnZx1N","pzaIceMelonBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceMelonBullet=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Effect/pzaBaseEffect"),u=a("../pzaGameState"),d=a("./pzaTrackBullet"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hitPrefab=null,t}return n(t,a),t.prototype.colliderZombie=function(a){if(a&&!a.isDead)if(null!=a.zombieData)if(a.zombieData&&a.zombieData.hypnosis)this.close();else if(a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE))this.close();else{var t=window.pzazombieManager.getZombie(a);if(null!=t){if(t.hurt(this.atk),this.close(),this.hitPrefab){var e=cc.v2(this.node.x,this.node.y),o=p.pzaNodeManager.getPlantZombieNode(),n=r.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.setPosition(e);var i=n.getComponent(c.pzaBaseEffect);i&&i.showEffect(null,null),a.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||t.baseData.zombieData.zombieType!=s.pzaZombieEnum.NightWear&&a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5));for(var d=[],h=a.yIndex-1;h<=a.yIndex+1;h++)h<0||h>=u.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[h].forEach(function(t){null!=t&&t!=a&&t.xIndex==a.xIndex&&(t.buffData.hasBuff(l.pzaBuffType.FLY)||t.buffData.hasBuff(l.pzaBuffType.DIVE)||t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||d.push(t))});d.forEach(function(a){var t=window.pzazombieManager.getZombie(a);null!=t&&(t.hurt(26),t.baseData.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||t.baseData.zombieData.zombieType!=s.pzaZombieEnum.NightWear&&t.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5)))})}}else this.close()}else this.close()},i([f({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"hitPrefab",void 0),i([m],t)}(d.pzaTrackBullet);e.pzaIceMelonBullet=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../pzaGameState":"pzaGameState","./pzaTrackBullet":"pzaTrackBullet"}],pzaIceNut:[function(a,t,e){"use strict";cc._RF.push(t,"0a5dbbKlR5A/pEHvsIzYSCI","pzaIceNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceNut=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../../Common/pzaWorldEventManager"),u=a("../Bullet/pzaBaseBullet"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaPlantEnum"),m=a("../Data/pzaZombieEnum"),f=a("../pzaEffectManager"),z=a("../pzaGameState"),y=a("./pzaBasePlant"),g=cc._decorator,v=g.ccclass,b=g.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.atkTimes=2,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=h.pzaPlantCate.Nut,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(e.atkTimes>0&&window.pzazombieManager.hasCanAttackZombie(e.baseData))return e.atkTimes--,l.pzaSoundManager.playAudio("SnowPeaAtk"),void e.animation.playAnimation("attack",!1,o,function(){e.shoot()});e.atkTimes=2,e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle2",!1,o))};o()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t)},t.prototype.hurt=function(t,e,o){a.prototype.hurt.call(this,t,e,o),e.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROST,3,.5))},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(u.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk);var i=z.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*z.pzaGameState.map.getBlockWidth())}}}}},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.attack()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.attack()},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},t.prototype.attack=function(){var a=this;l.pzaSoundManager.playAudio("IceShroomBoom"),window.pzaplantManager.removePlant(this.baseData),f.pzaEffectManager.createIceBoomEffect(this.baseData.logicPos),c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.ICE_SHROOM_BOOM,this.baseData);var t=window.pzazombieManager.findAllZombies();null==t&&(t=[]),null!=window.pzazombieManager.drZomBoss&&t.push(window.pzazombieManager.drZomBoss),t.forEach(function(t){t&&null!=t.baseData&&(t.baseData.buffData.hasBuff(d.pzaBuffType.INVINCIBLE)||(t.hurt(a.baseData.atk,a.baseData),t.baseData.buffData.hasBuff(d.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(d.pzaBuffType.IMM_CONTROL)||(t.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROST,15,.5)),t.bePauseControl(),t.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROZEN,4)),null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType!=m.pzaZombieEnum.DR_ZOMBOSS&&f.pzaEffectManager.createFrozenEffect(t.baseData),a.playFrozenSound())))})},t.prototype.playFrozenSound=function(){var a="frozen_"+s.pzaUtil.getRandomNum(1,2);l.pzaSoundManager.playAudio(a)},i([b({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([b({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([v],t)}(y.pzaBasePlant);e.pzaIceNut=S,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaIceShroom:[function(a,t,e){"use strict";cc._RF.push(t,"b65b3EL8DpDPp+QT7IWve1B","pzaIceShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceShroom=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpineController"),c=a("../../Common/pzaUtil"),u=a("../../Common/pzaWorldEventManager"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaZombieEnum"),m=a("../pzaEffectManager"),f=a("../pzaGameState"),z=a("./pzaBasePlant"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.lifeTime=0,t.hasBomb=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.hasBomb=!1,this.lifeTime=0,t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.animation.playAnimation("idle1",!0)),f.pzaGameState.useShroom=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||null==this.baseData.plantData||this.baseData.plantData.sleeping||(this.lifeTime+=t,this.lifeTime>=1&&!this.hasBomb&&this.attack())},t.prototype.wakeUp=function(){var a=this;null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,function(){a.animation.playAnimation("idle1",!0)}))},t.prototype.attack=function(){var a=this;l.pzaSoundManager.playAudio("IceShroomBoom"),this.hasBomb=!0,window.pzaplantManager.removePlant(this.baseData),this.death(),m.pzaEffectManager.createIceBoomEffect(this.baseData.logicPos),u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.ICE_SHROOM_BOOM,this.baseData);var t=window.pzazombieManager.findAllZombies();null==t&&(t=[]),null!=window.pzazombieManager.drZomBoss&&t.push(window.pzazombieManager.drZomBoss);var e=0;t.forEach(function(t){t&&null!=t.baseData&&(t.baseData.buffData.hasBuff(d.pzaBuffType.INVINCIBLE)||t.baseData.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)||(t.hurt(a.baseData.atk,a.baseData),t.baseData.buffData.hasBuff(d.pzaBuffType.IMM_ICE)||(t.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROST,15,.5)),t.baseData.buffData.hasBuff(d.pzaBuffType.IMM_CONTROL)||(t.bePauseControl(),t.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROZEN,4)),null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType!=h.pzaZombieEnum.DR_ZOMBOSS&&m.pzaEffectManager.createFrozenEffect(t.baseData),a.playFrozenSound(),e++))))}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_14,e)},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},t.prototype.playFrozenSound=function(){var a="frozen_"+c.pzaUtil.getRandomNum(1,2);l.pzaSoundManager.playAudio(a)},t.prototype.flaserDeath=function(){var a=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},i([v({displayName:"\u7761\u89c9\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"sleepAni",void 0),i([g],t)}(z.pzaBasePlant);e.pzaIceShroom=b,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaIceSpike:[function(a,t,e){"use strict";cc._RF.push(t,"fd034kXj95K6anyq9qkYYsY","pzaIceSpike");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceSpike=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("../pzaEffectManager"),c=a("./pzaAttackType"),u=a("./pzaSpikeweed"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.bornAttack()},t.prototype.bornAttack=function(){var a=this;r.pzaSoundManager.playAudio("IceShroomBoom");var t=window.pzazombieManager.zombieDatas[this.baseData.yIndex],e=!1;t.forEach(function(t){if(!(null==t||t.isDead||t.buffData.hasBuff(p.pzaBuffType.FLY)||t.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT))&&t.xIndex==a.baseData.xIndex){var o=window.pzazombieManager.getZombie(t);o&&(o&&o.hurt(a.baseData.atk,a.baseData,c.pzaAttackType.SPIKE),o.baseData.isDead||t.buffData.hasBuff(p.pzaBuffType.IMM_ICE)||(o.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.FROST,10,.5)),o.bePauseControl(),o.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.FROZEN,5)),null!=o.baseData.zombieData&&o.baseData.zombieData.zombieType!=l.pzaZombieEnum.DR_ZOMBOSS&&s.pzaEffectManager.createFrozenEffect(o.baseData)),t.zombieData.cate===l.pzaZombieCate.IceCar&&(e=!0))}}),e&&this.flaserDeath()},t.prototype.deadAttack=function(){var a=this;r.pzaSoundManager.playAudio("IceShroomBoom"),window.pzazombieManager.zombieMap.forEach(function(t,e){t?t.baseData&&!t.baseData.isDead&&(t.baseData.buffData.hasBuff(p.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(p.pzaBuffType.FLY)||(t&&t.hurt(a.baseData.atk,a.baseData,c.pzaAttackType.FLOOR_ATK),t.baseData.isDead||(t.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.FROST,20,.5)),t.bePauseControl(),t.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.FROZEN,3)),null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType!=l.pzaZombieEnum.DR_ZOMBOSS&&s.pzaEffectManager.createFrozenEffect(t.baseData)))):window.pzazombieManager.zombieMap.delete(e)})},t.prototype.attack=function(){var a=this;r.pzaSoundManager.playAudio("Spikeweed"),null==this.baseData||this.baseData.isDead||window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(a.baseData&&null!=t&&!t.isDead&&!t.buffData.hasBuff(p.pzaBuffType.FLY)&&!t.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)&&t.xIndex==a.baseData.xIndex){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,c.pzaAttackType.SPIKE),e.baseData.isDead||t.buffData.hasBuff(p.pzaBuffType.IMM_ICE)||e.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.FROST,10,.5))}})},t.prototype.hurt=function(a,t,e){if(this.baseData)if(e==c.pzaAttackType.BOOM)window.pzaplantManager.removePlant(this.baseData),this.death(t);else if(e==c.pzaAttackType.BANG)return this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.deadAttack()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.deadAttack()},i([h],t)}(u.pzaSpikeweed));e.pzaIceSpike=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaAttackType":"pzaAttackType","./pzaSpikeweed":"pzaSpikeweed"}],pzaIceSquash:[function(a,t,e){"use strict";cc._RF.push(t,"a2573ydx3JBGZzw/BihQuX5","pzaIceSquash");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaIceSquash=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../../Common/pzaWorldEventManager"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaPlantEnum"),u=a("../Data/pzaZombieEnum"),d=a("../pzaEffectManager"),h=a("./pzaSquashNut"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani_plant_inact=null,t.ani_plant_hurt=null,t.ani_plant_die=null,t.deathAttack=null,t}return n(t,a),t.prototype.afterBind=function(a){var t=this;a.plantData.cate=c.pzaPlantCate.Null;var e=function(){t.jumpTarget=t.findTarget(),t.jumpTarget?t.attack(t.jumpTarget):t.animation.playAnimation("idle1",!1,e)};e()},t.prototype.attack=function(a){var t=this;this.jumpTarget=a,r.pzaSoundManager.playAudio("SquashStart"),this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,this.animation.playAnimation(a.logicPos.x>=this.baseData.logicPos.x?"lookright":"lookleft",!1,function(){t.animation.playAnimation("jumpup1",!1,function(){if(t.animation.playAnimation("jumpup2",!1,function(){t.animation.playAnimation("jumpup3",!1)}),t.baseData){var e=10*-a.yIndex+6;t.node.zIndex=e,t.jumpUpTime=t.jumpUpMaxTime;var o=t.jumpTarget.logicPos.x-t.baseData.logicPos.x;t.speedX=o/t.jumpUpTime}})})},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.iceAttack()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.iceAttack()},t.prototype.iceAttack=function(){var a=this;r.pzaSoundManager.playAudio("IceShroomBoom"),window.pzaplantManager.removePlant(this.baseData),d.pzaEffectManager.createIceBoomEffect(this.baseData.logicPos),l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.ICE_SHROOM_BOOM,this.baseData);var t=window.pzazombieManager.findAllZombies();null==t&&(t=[]),null!=window.pzazombieManager.drZomBoss&&t.push(window.pzazombieManager.drZomBoss),t.forEach(function(t){if(t&&null!=t.baseData&&!t.baseData.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)&&(t.hurt(a.baseData.plantData.atk2Arr[0]||30,a.baseData),!t.baseData.buffData.hasBuff(s.pzaBuffType.IMM_ICE)&&!t.baseData.buffData.hasBuff(s.pzaBuffType.IMM_CONTROL))){t.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FROST,15,.5)),t.bePauseControl(),t.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.FROZEN,4)),null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType!=u.pzaZombieEnum.DR_ZOMBOSS&&d.pzaEffectManager.createFrozenEffect(t.baseData);var e="frozen_"+p.pzaUtil.getRandomNum(1,2);r.pzaSoundManager.playAudio(e)}})},i([f],t)}(h.pzaSquashNut));e.pzaIceSquash=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","./pzaSquashNut":"pzaSquashNut"}],pzaImitaterSelectView:[function(a,t,e){"use strict";cc._RF.push(t,"a9b36QLlYdJ/qgNLp+39Zdg","pzaImitaterSelectView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaImitaterSelectView=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("./pzaBagPlantCard"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardPrefab=null,t.cardBag=null,t.selectCardCall=null,t.bagCards=[],t}return n(t,a),t.prototype.init=function(a){this.node.active=!0,this.selectCardCall=a;for(var t=r.pzaPlantEnum.PEA_SHOOTER;t<=r.pzaPlantEnum.MELON_PULT;t++){var e=l.pzaGameCommonPool.requestInstant(this.cardPrefab,!1);if(null!=e){e.setParent(this.cardBag);var o=e.getComponent(s.pzaBagPlantCard);null!=o&&(o.bindData(t,this.clickBagCardCall.bind(this),!0),this.bagCards.push(o))}}},t.prototype.clickBagCardCall=function(a){p.pzaGameState.curImitaterPlant=a,this.node.active=!1,this.selectCardCall&&this.selectCardCall()},t.prototype.clickCancel=function(){this.node.active=!1},t.prototype.onDisable=function(){this.bagCards.forEach(function(a){a&&a.close()}),this.bagCards=[]},i([d({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cardPrefab",void 0),i([d({displayName:"\u5361\u7247\u80cc\u5305\u5bb9\u5668",type:cc.Node})],t.prototype,"cardBag",void 0),i([u],t)}(cc.Component);e.pzaImitaterSelectView=h,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","./pzaBagPlantCard":"pzaBagPlantCard"}],pzaImitater:[function(a,t,e){"use strict";cc._RF.push(t,"f40e0hGwCtHWrPXVkj929CB","pzaImitater");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaImitater=void 0;var r=a("../../Common/pzaUtil"),p=a("../pzaEffectManager"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.imitatTime=0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=r.pzaUtil.getRandomFloatNum(3,6),this.imitatTime=1.6;var o=function(){e.imitatTime<=0?e.animation.playAnimation("zhuan",!1,e.imitat.bind(e),function(){p.pzaEffectManager.createImitaterEffect(cc.v2(e.baseData.logicPos.x,e.baseData.logicPos.y+e.baseData.floatY))}):e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=r.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};this.animation.playAnimation("idle",!1,o)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,this.imitatTime-=t)},t.prototype.imitat=function(){this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),this.close(),null!=l.pzaGameState.curImitaterPlant&&window.pzaplantManager.createPlant(l.pzaGameState.curImitaterPlant,this.baseData.xIndex,this.baseData.yIndex,!0)},i([u],t)}(s.pzaBasePlant));e.pzaImitater=d,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaImp:[function(a,t,e){"use strict";cc._RF.push(t,"60cda1HD21OrqK/2G31WX/4","pzaImp");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaImp=void 0;var r=a("../Data/pzaBuffData"),p=a("../pzaGameState"),l=a("./pzaBaseZombie"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.fallASpeed=0,t.fallXSpeed=0,t.fallYSpeed=0,t.fallTime=1.5,t.flying=!0,t.flyTime=0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.butter,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.butter).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.butter,-35.14,96.8))]])},t.prototype.bindData=function(t,e){var o=this;if(void 0===e&&(e=!1),a.prototype.bindData.call(this,t),p.pzaGameState.isZombieMode())return this.flying=!1,this.fallTime=0,void this.playStayAnimation();if((p.pzaGameState.isVaseMode()||p.pzaGameState.isCreativeVaseMode())&&!e)return this.flying=!1,this.fallTime=0,void this.playStayAnimation();this.fallTime=this.animation.getAnimationDuration("fall")/this.animation.spineAnimation.timeScale-.3,this.flying=!0,t.logicPos.x-=45,t.logicPos.y-=250;var n=.1*p.pzaGameState.map.getYInterval(this.baseData.yIndex),i=p.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.baseData.yIndex,0,n);i.x<-250&&(i.x=-250,console.log("\u5f3a\u5236-250")),console.log("\u4f4d\u7f6e",i.x);var l=Math.abs(i.x-t.logicPos.x);this.fallXSpeed=l/this.fallTime,this.fallYSpeed=0;var s=t.logicPos.y-i.y;this.fallASpeed=2*s/(this.fallTime*this.fallTime),this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.UNABLE_SELECT,-1)),this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.INVINCIBLE,-1)),this.animation.playAnimation("fall",!1,function(){o.baseData.buffData.removeBuff(r.pzaBuffType.UNABLE_SELECT),o.baseData.buffData.removeBuff(r.pzaBuffType.INVINCIBLE),o.flying=!1,o.playMoveAnimation(),o.body.curTarget=null}),this.node.setPosition(this.baseData.logicPos),this.flyTime=this.animation.getAnimationDuration("fall")/this.animation.spineAnimation.timeScale+.1},t.prototype.logicUpdate=function(t){if(this.flyTime>0&&(this.flyTime-=t,this.flyTime<=0&&this.flying&&(this.flying=!1,this.baseData.buffData.removeBuff(r.pzaBuffType.UNABLE_SELECT),this.baseData.buffData.removeBuff(r.pzaBuffType.INVINCIBLE),this.playMoveAnimation(),this.body.curTarget=null)),this.fallTime>0)return this.fallTime-=t,void this.fallMove(t);this.flying||a.prototype.logicUpdate.call(this,t)},t.prototype.fallMove=function(a){this.baseData.logicPos.x-=a*this.fallXSpeed,this.baseData.logicPos.y-=a*this.fallYSpeed,this.fallYSpeed+=a*this.fallASpeed},t.prototype.logicLateUpdate=function(t){null!=this.baseData&&null!=this.baseData.logicPos&&(this.node.setPosition(this.baseData.logicPos),a.prototype.logicLateUpdate.call(this,t))},i([u],t)}(l.pzaBaseZombie));e.pzaImp=d,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaJackZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"e6194r8qTBPxrbpe5piZ2Ai","pzaJackZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJackZombie2=void 0;var r=a("./pzaJackZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=p.pzaZombieSlotType.hat,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,73.42,8.53,-85.76))],[p.pzaZombieSlotType.hat,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.hat).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.hat+"1",28.58,-2.41,-93.13)).addState(new p.pzaZombieSlotAtt(2,p.pzaZombieSlotType.hat+"2",21.23,-9.44,-93.13)).addState(new p.pzaZombieSlotAtt(3,p.pzaZombieSlotType.hat+"3",22.44,-9.07,-93.13))]])},i([s],t)}(r.pzaJackZombie));e.pzaJackZombie2=c,cc._RF.pop()},{"./pzaJackZombie":"pzaJackZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaJackZombie:[function(a,t,e){"use strict";cc._RF.push(t,"0acdd8NEJFLu5WbLeyEM4Rs","pzaJackZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJackZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../../Load/pzaPreLoadManager"),s=a("../Data/pzaBuffData"),c=a("../Plant/pzaAttackType"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaBaseZombie"),m=a("./pzaZombieSlot"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.boomLeftTime=0,t.openBoxTime=0,t.hasOpenBox=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,73.42,8.53,-85.76))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.hasOpenBox=!1,this.boomLeftTime=0,d.pzaGameState.gameMode===d.pzaGameMode.BANG_JAR||d.pzaGameState.gameMode===d.pzaGameMode.VASE||d.pzaGameState.gameMode===d.pzaGameMode.VASE_ENDLESS||d.pzaGameState.gameMode===d.pzaGameMode.CREATIVE_VASE?this.openBoxTime=0:Math.random()>.05?this.openBoxTime=p.pzaUtil.getRandomFloatNum(13.22,20):this.openBoxTime=p.pzaUtil.getRandomFloatNum(4.4,7.54),r.pzaSoundManager.playLoopAudio("jack_enter",!0)},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),this.boomLeftTime>0)return this.boomLeftTime-=t,void(this.boomLeftTime<=0&&this.boom());!this.hasOpenBox&&this.hasTool&&(this.openBoxTime-=t,this.baseData.isBeControlled()||this.openBoxTime<=0&&(this.hasOpenBox=!0,this.boomLeftTime=1.1,r.pzaSoundManager.playAudio("boing"),this.scheduleOnce(function(){r.pzaSoundManager.playAudio("jack_surprise")},.5),this.animation.playAnimation("gouout",!1),this.baseData.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.HARD_BODY,-1))))},t.prototype.boom=function(){var a=this;if(null!=this.baseData&&null!=this.baseData.zombieData){this.baseData.zombieDie(),this.death(!1),r.pzaSoundManager.playAudio("explosion"),u.pzaEffectManager.createFrameEffect(l.pzaResourceUrl.JACK_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+70),null);var t=1.5*d.pzaGameState.map.getBlockWidth();if(!this.baseData.zombieData.hypnosis){if(window.pzaplantManager.pzaJarMap.size>0){for(var e=[""+(this.baseData.xIndex-1)+(this.baseData.yIndex-1),""+this.baseData.xIndex+(this.baseData.yIndex-1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex-1),""+(this.baseData.xIndex-1)+this.baseData.yIndex,""+(this.baseData.xIndex+1)+this.baseData.yIndex,""+(this.baseData.xIndex-1)+(this.baseData.yIndex+1),""+this.baseData.xIndex+(this.baseData.yIndex+1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex+1)],o=!1,n=0;n<e.length;n++){var i=e[n],h=window.pzaplantManager.pzaJarMap.get(i);h&&(window.pzaplantManager.pzaJarMap.delete(i),h.bang(),o=!0)}o&&r.pzaSoundManager.playAudio("vase_breaking")}var m=window.pzaplantManager.findFixRangePlants(this.baseData.logicPos,t);return m&&m.forEach(function(t){t&&t.hurt(1800,a.baseData,c.pzaAttackType.BOOM)}),void window.pzazombieManager.hypnoZombieMap.forEach(function(e,o){null==e||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||p.pzaUtil.getDistance(a.baseData.logicPos,o.logicPos)<=t&&e&&e.hurt(1800,a.baseData,c.pzaAttackType.BOOM)})}var f=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,t);null!=f&&f.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(s.pzaBuffType.INVINCIBLE)||t&&t.hurt(1800,a.baseData,c.pzaAttackType.BOOM)})}},t.prototype.zombieIntact=function(){a.prototype.zombieIntact.call(this),this.changeSkin("box1")},t.prototype.toolDeath=function(){a.prototype.toolDeath.call(this),this.changeSkin("box0"),window.pzazombieManager.getJackHasToolAmt()<=0&&r.pzaSoundManager.deleteLoopAudioName("jack_enter")},t.prototype.zombieScream=function(){},t.prototype.close=function(){a.prototype.close.call(this),window.pzazombieManager.getZombieMapData()<=0&&r.pzaSoundManager.deleteLoopAudioName("jack_enter")},i([z],t)}(h.pzaBaseZombie));e.pzaJackZombie=y,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaJalapeno:[function(a,t,e){"use strict";cc._RF.push(t,"b9da2ckJ49KCJ87/y5Ssjij","pzaJalapeno");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJalapeno=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaWorldEventManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.isHideEff=!1,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),r.pzaSoundManager.playAudio("JalapenoReady",.1),this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,this.animation.playAnimation("blow",!1,function(){if(e.isHideEff)return window.pzaplantManager.removePlant(e.baseData),void e.death();r.pzaSoundManager.playAudio("JalapenoBoom",.1),e.body.node.getComponent(cc.BoxCollider).enabled=!0,e.baseData.isDead=!1,e.attack()}),u.pzaGameState.onlyShroomCofee=!1},t.prototype.attack=function(){var a=this;window.pzaplantManager.removePlant(this.baseData),this.death(),window.pzaMapManager.shakeMap();for(var t=u.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,0),e=0;e<12;e++){var o=t.clone();o.x+=100*e,u.pzaGameState.map.fixMapYOffset(this.baseData.yIndex,o,0);var n=.1*e+.5;e>=5&&(n=.05*e+.5),c.pzaEffectManager.createBoomFireEffect(this.baseData.yIndex,n,o,null)}window.pzaMapManager.removeRowIceGround(this.baseData.yIndex);for(var i=0;i<=8;i++)window.pzaMapManager.removeLadder(i,this.baseData.yIndex);p.pzaWorldEventManager.triggerEvent(p.pzaWorldEventType.JALAPENO_BOOM,this.baseData);var r=window.pzazombieManager.zombieDatas[this.baseData.yIndex],h=Array.from(r);null!=window.pzazombieManager.drZomBoss&&h.push(window.pzazombieManager.drZomBoss.baseData),h.forEach(function(t){if(null!=t&&!t.isDead&&!t.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)){var e=window.pzazombieManager.getZombie(t);a.baseData.plantData.adClearPlant?e&&e.hurt(5e4,a.baseData,d.pzaAttackType.BOOM):e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.BOOM),null!=t.zombieData&&t.zombieData.zombieType==s.pzaZombieEnum.DR_ZOMBOSS&&(t.buffData.removeBuff(l.pzaBuffType.FROST),t.buffData.removeBuff(l.pzaBuffType.FROZEN))}})},t.prototype.flaserDeath=function(){var a=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},i([f],t)}(h.pzaBasePlant));e.pzaJalapeno=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaJarBody:[function(a,t,e){"use strict";cc._RF.push(t,"cfe8faavQVIrbpwT69qPorB","pzaJarBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJarBody=void 0;var r=a("../Common/pzaCollisionManager"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jar=null,t}return n(t,a),t.prototype.enable=function(a){this.jar=a,r.pzaCollisionManager.getInstance.addJarByRow(this.jar.jarData.yIndex,this),this.node.active=!0},t.prototype.disable=function(){this.jar&&r.pzaCollisionManager.getInstance.delJarByRow(this.jar.jarData.yIndex,this),this.node&&this.node.isValid&&(this.node.active=!1)},t.prototype.onCollisionEnter=function(a,t){this.jar.onCollision(a,t)},t.prototype.getCollider=function(){if(!this.node||!this.node.isValid)return null;var a=this.node.getComponent(cc.Collider);return a.poSource=this.node.parent,a},i([l],t)}(cc.Component));e.pzaJarBody=s,cc._RF.pop()},{"../Common/pzaCollisionManager":"pzaCollisionManager"}],pzaJarData:[function(a,t,e){"use strict";var o;cc._RF.push(t,"ea249E7+LRBV62siD2HgrTy","pzaJarData"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJarData=e.pzaJarType=void 0,function(a){a[a.BRONZE_JAR=1]="BRONZE_JAR",a[a.GREEN_JAR=2]="GREEN_JAR",a[a.ZOMBIE_JAR=3]="ZOMBIE_JAR"}(o=e.pzaJarType||(e.pzaJarType={}));e.pzaJarData=function(a,t){this.xIndex=-1,this.yIndex=-1,this.jarType=o.BRONZE_JAR,this.plantType=null,this.zombieType=null,this.hasColli=!1,this.isLighted=!1,this.isSunLight=!1,this.xIndex=a,this.yIndex=t},cc._RF.pop()},{}],pzaJar:[function(a,t,e){"use strict";cc._RF.push(t,"9907b58JHRK+JGjaWAfcmxM","pzaJar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaJar=void 0;var r=a("../Common/pzaBaseComponent"),p=a("../Common/pzaGameManager"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaSpineController"),c=a("../Common/pzaSpriteFrameManager"),u=a("../Load/pzaBundleObjectPool"),d=a("../Load/pzaPreLoadManager"),h=a("../utils/pzakc"),m=a("./Data/pzaJarData"),f=a("./Effect/pzaDropPlantCard"),z=a("./Zombie/pzaGargantuar"),y=a("./pzaGameState"),g=a("./pzaJarBody"),v=cc._decorator,b=v.ccclass,S=v.property,P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jar=null,t.collider=null,t.content=null,t.jarData=null,t.dropPlantCall=null,t.isHit=!1,t.isBang=!1,t.lightZombieScaleMap=new Map([[1,.4],[26,.4]]),t}return n(t,a),t.prototype.onDisable=function(){this.lightOff(),a.prototype.onDisable.call(this)},t.prototype.init=function(a,t){this.jarData=a,this.dropPlantCall=t,this.jarData.jarType==m.pzaJarType.BRONZE_JAR?(this.jar.setAnimationSkin("skin1"),this.jar.playAnimation("idle1",!0)):this.jarData.jarType==m.pzaJarType.GREEN_JAR?(this.jar.setAnimationSkin("skin2"),this.jar.playAnimation("idle1",!0)):this.jarData.jarType===m.pzaJarType.ZOMBIE_JAR&&(this.jar.setAnimationSkin("skin3"),this.jar.playAnimation("idle1",!0));var e=10*-a.yIndex;this.node.zIndex=e,this.jarData.hasColli&&this.collider.enable(this),this.isHit=!1,this.isBang=!1,this.jarData.isLighted&&this.lighted()},t.prototype.lightOff=function(){this.jar.playAnimation("idle1",!0),h.default.removeNodeChildren(this.content)},t.prototype.lighted=function(){var a=this;if(!this.isBang)if(this.jar.playAnimation("idle2",!0),h.default.removeNodeChildren(this.content),null!=this.jarData.zombieType){var t=new cc.Node,e=t.addComponent(cc.Sprite);c.pzaSpriteFrameManager.loadZombieCard(this.jarData.zombieType,e),t.parent=this.content,t.y=50,t.scale=this.lightZombieScaleMap.get(this.jarData.zombieType)||.4}else null!=this.jarData.plantType?u.pzaBundleObjectPool.requestInstantByUrl(d.pzaResourceUrl.DROP_PLANT_CARD,!1,function(t,e){if(null==t&&null!=e){e.scale=.6;var o=e.getComponent(f.pzaDropPlantCard);e.setParent(a.content),o&&o.show(a.jarData.plantType,cc.v2(0,45),!1)}else console.error(t)}):this.jarData.isSunLight&&u.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/BattleUI/sun",function(t,e){if(null==t&&null!=e){var o=new cc.Node;o.addComponent(cc.Sprite).spriteFrame=e,o.scale=.8,o.parent=a.content,o.setPosition(0,55)}else console.error(t)})},t.prototype.bang=function(){var a=this;if(!(this.isBang||y.pzaGameState.zombieWinInVase&&(y.pzaGameState.isVaseMode()||y.pzaGameState.isCreativeVaseMode()))){if(this.isBang=!0,this.collider.disable(),window.pzaplantManager.pzaJarMap.delete(""+this.jarData.xIndex+this.jarData.yIndex),l.pzaSoundManager.playAudio("bangjar"),h.default.removeNodeChildren(this.content),null!=this.jarData.zombieType){var t=window.pzazombieManager.createFixBlockZombieData(this.jarData.zombieType,this.jarData.xIndex,this.jarData.yIndex);window.pzazombieManager.createZombie(t,!1)}else null!=this.jarData.plantType?this.dropPlantCall&&this.dropPlantCall(this.jarData.plantType):this.jarData.isSunLight&&window.pzaplantManager.plantCreateSun(this.node.getPosition(),!0,h.default.randomPick([25,50,75],1)[0]);this.jar.playAnimation("blow",!1,function(){if(a.close(),window.pzaplantManager.pzaJarMap.size<=0){var t=0;if(window.pzazombieManager.zombieDatas.forEach(function(a){t+=a.size}),t>0)return;if(y.pzaGameState.gameMode===y.pzaGameMode.VASE||y.pzaGameState.gameMode===y.pzaGameMode.CREATIVE_VASE)return void p.pzaGameManager.passPart(a.node.getPosition());y.pzaGameState.gameMode===y.pzaGameMode.VASE_ENDLESS&&p.pzaGameManager.getCurrentGame().nextPart()}})}},t.prototype.pauseSelf=function(){this.jar.pauseAnimation()},t.prototype.resumeSelf=function(){this.jar.resumeAnimation()},t.prototype.onCollision=function(a){if(!this.isHit){var t=a.node.parent.getComponent(z.pzaGargantuar);t&&(t.baseData.yIndex!==this.jarData.yIndex||a.node.parent.x<this.node.x||(this.isHit=!0,this.collider.disable(),t.attackJar(this)))}},i([S({displayName:"\u7f50\u5b50\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"jar",void 0),i([S(g.pzaJarBody)],t.prototype,"collider",void 0),i([S(cc.Node)],t.prototype,"content",void 0),i([b],t)}(r.pzaBaseComponent);e.pzaJar=P,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaGameManager":"pzaGameManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzakc":"pzakc","./Data/pzaJarData":"pzaJarData","./Effect/pzaDropPlantCard":"pzaDropPlantCard","./Zombie/pzaGargantuar":"pzaGargantuar","./pzaGameState":"pzaGameState","./pzaJarBody":"pzaJarBody"}],pzaKDefine:[function(a,t,e){"use strict";cc._RF.push(t,"3240ehvR6hL063gjjpfAYyj","pzaKDefine"),Object.defineProperty(e,"__esModule",{value:!0}),e.State=e.FavSpine=e.Pet=e.PropFrom=e.TokenType=e.BuffType=e.AudioName=e.PhoneType=e.NextEventType=e.Msg=void 0,function(a){a.showIosAlert="showIosAlert",a.favUpgrade="favUpgrade",a.showPrivacy="showPrivacy",a.closeLoading="closeLoading",a.step1done="step1done",a.step2done="step2done",a.step3done="step3done",a.step4done="step4done",a.mainRoundStart="mainRoundStart",a.propSet="propSet",a.propUpdate="propUpdate",a.plotChoose="plotChoose",a.spPlotChoose="spPlotChoose",a.talkChoose="talkChoose",a.addBuff="addBuff",a.onClick="onClick",a.toTalk="toTalk",a.adGet="adGet",a.addGem="addGem",a.addSoul="addSoul",a.addProp="addProp",a.addTreasure="addTreasure",a.addEffectTxt="addEffectTxt",a.showDiary="showDiary",a.addDrug="addDrug",a.gameOver="gameOver",a.gameOverBackMain="gameOverBackMain",a.miniGameOver="miniGameOver",a.selectTreasure="selectTreasure",a.abortBuy="abortBuy",a.battleEnd="battleEnd",a.sellTr="sellTr",a.sellDrug="sellDrug",a.propItemClick="propItemClick",a.gemAdd="gemAdd",a.djUpgrade="djUpgrade",a.petUpgrade="petUpgrade",a.tokenUse="tokenUse",a.tokenNotUse="tokenNotUse",a.selectTitle="selectTitle",a.getTitle="getTitle",a.allSoundLoaded="allSoundLoaded",a.lateLoaed="lateLoaed",a.phoneAlertDone="phoneAlertDone",a.recorderStart="recorderStart",a.recorderStop="recorderStop",a.recorderFail="recorderFail",a.recorderDone="recorderDone",a.showQA="showQA",a.showDrugBuy="showDrugBuy",a.dateSuc="dateSuc",a.dateFail="dateFail",a.videoSuc="videoSuc",a.shareMaxTimes="shareMaxTimes"}(e.Msg||(e.Msg={})),function(a){a[a.none=0]="none",a[a.checkDating=1]="checkDating",a[a.contacts=2]="contacts",a[a.jump=3]="jump",a[a.choose=4]="choose",a[a.trBuy=5]="trBuy",a[a.drugBuy=6]="drugBuy",a[a.diary=7]="diary",a[a.qa=8]="qa",a[a.petUpgrade=9]="petUpgrade",a[a.dead=10]="dead"}(e.NextEventType||(e.NextEventType={})),function(a){a[a.msg=1]="msg",a[a.social=2]="social",a[a.talk=3]="talk",a[a.dating=4]="dating"}(e.PhoneType||(e.PhoneType={})),function(a){a.bgm="bgm",a.wx="wx",a.main_bgm="main_bgm",a.click="click",a.upgrade="upgrade"}(e.AudioName||(e.AudioName={})),function(a){a.base="base",a.trBase="trBase",a.addWhenSub="addWhenSub",a.addWhenAdd="addWhenAdd",a.special="special"}(e.BuffType||(e.BuffType={})),function(a){a.trRefreshToken="trRefreshToken",a.petRefreshToken="petRefreshToken"}(e.TokenType||(e.TokenType={})),function(a){a.tr="tr",a.pet="pet",a.title="title",a.event="event",a.init="init",a.fav="fav",a.qa="qa",a.xingGe="xingGe",a.drug="drug"}(e.PropFrom||(e.PropFrom={})),function(a){a.tiger="\u767d\u864e",a.rosefinch="\u6731\u96c0"}(e.Pet||(e.Pet={})),function(a){a.J1="role1",a.J2="role2",a.J3="role3"}(e.FavSpine||(e.FavSpine={})),function(a){a.idle="idle",a.init="init",a.normal="normal",a.move="move",a.moving="moving",a.play="play",a.stop="stop",a.pause="pause",a.hurt="hurt",a.hurting="hurting",a.dead="dead",a.deading="deading",a.lock="lock",a.run="run",a.runing="runing"}(e.State||(e.State={})),cc._RF.pop()},{}],pzaKernelPult:[function(a,t,e){"use strict";cc._RF.push(t,"a554b9cVXhM/bC6YEkbOSS+","pzaKernelPult");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaKernelPult=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaThrowBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.cornBulletPrefab=null,t.butterBulletPrefab=null,t.blinkTime=3,t.butterBullet=!1,t.atk1AniTime=1.4,t.atk2AniTime=1.4,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.butterBullet=!1,d.pzaGameState.isZombieMode())return this.attacking=!1,this.atk1AniTime=this.animation.getAnimationDuration("T_attack1"),this.atk2AniTime=this.animation.getAnimationDuration("T_attack2"),void this.animation.playAnimation("T_idle1",!0);this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atk1AniTime=this.animation.getAnimationDuration("attack1"),this.atk2AniTime=this.animation.getAnimationDuration("attack2"),d.pzaGameState.useThrowPlant=!0,d.pzaGameState.onlyShroomCofee=!1,d.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()){var o=this.findAttackTarget();if(null!=o)return this.attacking=!0,void(this.butterBullet?(l.pzaSoundManager.playAudio("kernelpult"),this.animation.playAnimation("T_attack2",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle1",!0)},function(){e.attack(o)},this.atk2AniTime/this.atkInterval)):(l.pzaSoundManager.playAudio("kernelpult"),this.animation.playAnimation("T_attack1",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle1",!0)},function(){e.attack(o)},this.atk1AniTime/this.atkInterval)))}},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();null==e?a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t)):a.butterBullet?(l.pzaSoundManager.playAudio("kernelpult"),a.animation.playAnimation("attack2",!1,t,function(){a.attack(e)},a.atk2AniTime/a.atkInterval)):(l.pzaSoundManager.playAudio("kernelpult"),a.animation.playAnimation("attack1",!1,t,function(){a.attack(e)},a.atk1AniTime/a.atkInterval))};t()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(u.pzaBuffType.FLY)&&!o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){o.x-=15;var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.butterBullet?this.butterBulletPrefab:this.cornBulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var s=this.butterBullet?cc.v2(l.x+this.baseData.logicPos.x+15,l.y+this.baseData.logicPos.y+57):cc.v2(l.x+this.baseData.logicPos.x+8,l.y+this.baseData.logicPos.y+48);i.setPosition(s);var u=i.getComponent(c.pzaThrowBullet);null!=u&&(u.init(!1,this.baseData.yIndex,this.butterBullet?40:this.baseData.atk,a,n),u.updateBulletAngel(this.butterBullet?90:50),this.butterBullet&&(u.hasImmobilize=!0),this.butterBullet=Math.random()<=.25)}}}}}},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u7389\u7c73\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cornBulletPrefab",void 0),i([z({displayName:"\u9ec4\u6cb9\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"butterBulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaKernelPult=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaKnockMiniGame:[function(a,t,e){"use strict";cc._RF.push(t,"98c84tgsCdGFqjTDhs5Kej4","pzaKnockMiniGame");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaKnockMiniGame=void 0;var r=a("../Battle/Data/pzaBuffData"),p=a("../Battle/Data/pzaZombieEnum"),l=a("../Battle/pzaGameState"),s=a("../Load/pzaBundleObjectPool"),c=a("../View/pzaCommonMask"),u=a("../utils/pzaChannel"),d=a("./pzaCollisionManager"),h=a("./pzaGameConfig"),m=a("./pzaGameManager"),f=a("./pzaGameMiniGame"),z=a("./pzaLocalData"),y=a("./pzaSoundManager"),g=a("./pzaStatisticsMgr"),v=a("./pzaUIManager"),b=a("./pzaUtil"),S=a("./pzaWorldEventManager"),P=cc._decorator,C=P.ccclass,D=(P.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.waveZombieDensity=null,t}var e;return n(t,a),e=t,t.prototype.preLoad=function(a,t,e){this.init(),l.pzaGameState.init(a,t,this.gameMode,this.skipPartStar()),this.beforeLoad(a,t),l.pzaGameState.isGameEnd=!1,d.pzaCollisionManager.getInstance.setOn();var o=this.getResArr(a,t);v.pzaUIManager.showLoading(),this.initMapPlantZombie(a,t),y.pzaSoundManager.clearAllLoopAudio(),this.readData(a,t),s.pzaBundleObjectPool.preLoadSubResource(o,function(){v.pzaUIManager.hideLoading(e)},function(a){v.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*a)))}),l.pzaGameState.autoPickLock=!1},t.prototype.gameStart=function(a,t){z.pzaLocalData.gameStartTimeStamp=Date.now(),g.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt("200"+t)}),this.beforeGameStart(a,t),l.pzaGameState.sunLightCount=0,window.pzaMapManager.initMapPos(!1),l.pzaGameState.gameMode=l.pzaGameMode.MINIGAME_KNOCK,c.pzaCommonMask.hideMask(),window.pzaMapManager.miniGameinitMapTomb(function(){window.pzaMapManager.initCleanCar(),window.pzaMapManager.openBattleUI(),window.pzaMapManager.hideSunUI(),l.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=2,y.pzaSoundManager.playBgm(y.pzaBGMName.BOWLING_BGM)})},t.prototype.refreshNextWave=function(a,t){var o=this;if(a.curWaveTime+=t,a.nextWaveTime-=t,!(a.lastWave||a.nextWaveTime>0)){a.wave++,S.pzaWorldEventManager.triggerEvent(S.pzaWorldEventType.UPDATE_PART_PRO,null),1==a.wave&&y.pzaSoundManager.playAudio("awooga"),a.curWaveTime=0,a.preRefreshHp=0,a.hasShowRedTip=!1;var n=m.pzaGameManager.getGame(l.pzaGameMode.MINIGAME_KNOCK,e),i=n.getConf(l.pzaGameState.curPart);if(!(null==n||null==i||i.maxWave<a.wave)){i.maxWave==a.wave&&(a.lastWave=!0);var p=window.pzaMapManager.TombSet.size;if(this.waveZombieDensity=this.getConf(l.pzaGameState.curPart).waveZombieDensity,0==this.waveZombieDensity[a.wave]){a.nextWaveTime=2;var s=1;return p<5&&(s=5-p),window.pzaMapManager.randomCreateTomb(s),void(i.maxWave==a.wave+1&&a.showBigWaveTip(!0,!0))}if(a.nextWaveTime=1.4,0==p)return a.wave--,void window.pzaMapManager.randomCreateTomb(5);var c=this.getRandomWaveZombie(a.wave,!1,window.pzaMapManager.getIceYCount());if(null!=c){var u=Math.min(.4,.05*a.wave);if(a.lastWave)window.pzaMapManager.TombMap.forEach(function(t){if(null!=t&&null!=t.xIndex&&null!=t.yIndex&&!window.pzaplantManager.hasPlant(t.xIndex,t.yIndex)){var e=o.getRandomTombZombie(),n=a.createFixBlockZombieData(e,t.xIndex,t.yIndex);Math.random()<=u&&n.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.SPEED_UP,-1,3)),a.createZombie(n,!1,!0)}});else{var d=[];window.pzaMapManager.TombMap.forEach(function(a){null!=a&&null!=a.xIndex&&null!=a.yIndex&&(window.pzaplantManager.hasPlant(a.xIndex,a.yIndex)||d.push(a))});for(var h=b.pzaUtil.getRandomArrayValue(d,c.length),f=0;f<c.length;f++){var z=h[f];if(null!=z&&null!=z.xIndex&&null!=z.yIndex){var g=a.createFixBlockZombieData(c[f],z.xIndex,z.yIndex);Math.random()<=u&&g.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.SPEED_UP,-1,3)),a.createZombie(g,!1,!0)}}}}}}},t.prototype.getRandomWaveZombie=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[];if(this.waveZombieDensity=this.getConf(l.pzaGameState.curPart).waveZombieDensity,null==this.waveZombieDensity||a-1<0)return[p.pzaZombieEnum.ZOMBIE];var r=this.waveZombieDensity[a-1];if(null==r||r<=1)return[p.pzaZombieEnum.ZOMBIE];if(t&&a%10==0){i.push(p.pzaZombieEnum.FLAG_ZOMBIE),r-=h.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE);for(var s=Math.min(Math.floor(r/2),8),c=0;c<s;c++)i.push(p.pzaZombieEnum.ZOMBIE),r-=h.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE)}var u=this.getConf(l.pzaGameState.curPart),d=u.maxWave,m=u.zombieTypes;for(a==d&&a>=10&&m.forEach(function(a){a!=p.pzaZombieEnum.ZOMBIE&&(i.push(a),r-=h.pzaGameConfig.getZombieLevel(a))});r>0;){var f=this.getRandomZombie1(r,a,e,o,n);if(null==f)break;if(f==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?e--:f==p.pzaZombieEnum.RED_GARGANTUAR&&a%10!=0&&n--,i.push(f),i.length>=50)break;r-=h.pzaGameConfig.getZombieLevel(f)}return i},t.prototype.getRandomZombie1=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[],r=[];if(this.getConf(l.pzaGameState.curPart).zombieTypes.forEach(function(e){if(null!=e){var l=h.pzaGameConfig.getZombieConfig(e);null==l||0==l.refrshWeight||l.refreshLevel>a||l.refrshMinWave>t||o>0&&e==p.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&t%10!=0||(i.push(e),r.push(l.refrshWeight))}}),e>0){var s=h.pzaGameConfig.getZombieConfig(p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM);null!=s&&s.refreshLevel<=a&&(i.push(p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),r.push(s.refrshWeight))}var c=b.pzaUtil.getRandomIndexByWeight(r);return i[c]},t.prototype.lastTombWaterZombie=function(a){var t=this;window.pzaMapManager.TombMap.forEach(function(e){if(null!=e&&null!=e.xIndex&&null!=e.yIndex&&!window.pzaplantManager.hasPlant(e.xIndex,e.yIndex)){var o=t.getRandomTombZombie(),n=a.createFixBlockZombieData(o,e.xIndex,e.yIndex);a.createZombie(n,!1,!0),a.curWaveZombieDatas.add(n)}})},t.prototype.getRandomTombZombie=function(){var a=[p.pzaZombieEnum.ZOMBIE,p.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,p.pzaZombieEnum.CONE_HEAD_ZOMBIE],t=[],e=this.getConf(l.pzaGameState.curPart).zombieTypes;return a.forEach(function(a){if(e.includes(a)){var o=h.pzaGameConfig.getZombieConfig(a);t.push(o.refrshWeight)}}),a[b.pzaUtil.getRandomIndexByWeight(t)]},t.prototype.onZombieDeath=function(a,t,e){if(Math.random()<=.1)for(var o=0;o<3;o++)window.pzaplantManager.plantCreateSun(cc.v2(t.logicPos.x+30*(o-1),t.logicPos.y),!0,!0);e&&!t.zombieData.hypnosis&&this.zombieDeathDrop(t),this.isLastWave(a)&&this.checkAllZombieDeath(a)&&m.pzaGameManager.passPart(t.logicPos)},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1,t.skipPartBtn.active=!1,t.freePlantNode.active=!1,t.speedBtn.active=!0},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=!1,u.pzaChannel.isConfRemote?a.cherryBombNode.active=!0:a.cherryBombNode.active=!1,a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.isLastWave=function(a){var t=m.pzaGameManager.getGame(l.pzaGameMode.MINIGAME_KNOCK,e).getConf(l.pzaGameState.curPart);return a.wave==t.maxWave},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=m.pzaGameManager.getGame(l.pzaGameMode.MINIGAME_KNOCK,e).getConf(l.pzaGameState.curPart);a.maxWave=t.maxWave;for(var o=0;o<a.partFlags.length;o++)a.partFlags[o].active=!1;a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0;var n=this.getConf(l.pzaGameState.curPart);a.partLabel.string=n.name+""},e=i([C],t)}(f.pzaGameMiniGame));e.pzaKnockMiniGame=D,cc._RF.pop()},{"../Battle/Data/pzaBuffData":"pzaBuffData","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","./pzaCollisionManager":"pzaCollisionManager","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGameMiniGame":"pzaGameMiniGame","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaLadderZombie:[function(a,t,e){"use strict";cc._RF.push(t,"1da57fq0vhB656A46n7VtJx","pzaLadderZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLadderZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaGameState"),d=a("./pzaBaseZombie"),h=a("./pzaZombieState"),m=a("./pzaZombieSlot"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=m.pzaZombieSlotType.ladder,t.putting=!1,t.directThrowHurt=!0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.butter).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,-35.39,62.02,0))],[m.pzaZombieSlotType.ladder,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.ladder).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.ladder+"1",221.34,-20,-119.57)).addState(new m.pzaZombieSlotAtt(2,m.pzaZombieSlotType.ladder+"2",223.77,-28.81,-119.57)).addState(new m.pzaZombieSlotAtt(3,m.pzaZombieSlotType.ladder+"3",226.96,-23.19,-119.57))]])},t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.putting=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE_PEA,-1)),this.baseData.zombieData.hurtCate=c.pzaZombieHurtCate.PENETRATE_HURT},t.prototype.attack=function(t,e){if(!this.putting){if(this.hasEquip&&null!=e&&null!=e.plantData){var o=!1;if(e.plantData.cate===s.pzaPlantCate.Nut&&(o=!0),!o){var n=""+e.xIndex+e.yIndex;window.pzaplantManager.pumpkinDataMap.get(n)&&(o=!0)}if(o)return void this.putLadder(e.xIndex,e.yIndex)}a.prototype.attack.call(this,t,e)}},t.prototype.updateMove=function(t){this.putting||a.prototype.updateMove.call(this,t)},t.prototype.putLadder=function(a,t){var e=this;this.hasEquip=!1,this.baseData.zombieData.equipHp=0,this.baseData.zombieData.equipType=c.pzaEquipType.NO_EQUIP,this.putting=!0,this.animation.playAnimation("put",!1,function(){e.equipDeath(!1),window.pzaMapManager.createLadder(a,t,function(){e.putting=!1,e.body.curTarget=null,p.pzaSoundManager.playAudio("ladder_zombie")})})},t.prototype.equipDeath=function(){if(a.prototype.equipDeath.call(this,!1),null!=this.baseData&&null!=this.baseData.zombieData){var t=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/t}this.playMoveAnimation(),this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_ICE_PEA)},t.prototype.getMoveAniName=function(){return this.hasEquip?"move1":"move2"},t.prototype.getAttackAniName=function(){return this.hasEquip?"attack1":"attack2"},t.prototype.zombieHurtSound=function(t){this.hasEquip?p.pzaSoundManager.playAudio("ladderHurt"):a.prototype.zombieHurtSound.call(this,t)},t.prototype.changeMapRow=function(){var a=this;this.zombieState=h.pzaZombieState.EAT_ATK,this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.GARLIC,-1));var t=this.hasEquip?"attack1":"attack2";this.animation.playAnimation(t,!1,null,function(){if(a.baseData.buffData.removeBuff(l.pzaBuffType.GARLIC),Math.random()>.5){var t=a.changeToUpRow();a.changeTargetRow=t?a.baseData.yIndex+1:a.baseData.yIndex-1}else t=a.changeToDownRow(),a.changeTargetRow=t?a.baseData.yIndex-1:a.baseData.yIndex+1;var e=10*-a.changeTargetRow+5;a.node.zIndex=e})},i([z],t)}(d.pzaBaseZombie));e.pzaLadderZombie=y,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaLadder:[function(a,t,e){"use strict";cc._RF.push(t,"7842fvV5qpEkYd8Jnh+OIgm","pzaLadder");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLadder=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.poolPrefab=null,t.xIndex=-1,t.yIndex=-1,t.logicPos=null,t}return n(t,a),t.prototype.init=function(a,t,e){this.xIndex=a,this.yIndex=t,this.logicPos=e;var o=10*-t+2;this.node.zIndex=o},t.prototype.logicUpdate=function(){var a=""+this.xIndex+this.yIndex;window.pzaplantManager.plantDataMap.has(a)||window.pzaplantManager.pumpkinDataMap.has(a)||window.pzaMapManager.removeLadder(this.xIndex,this.yIndex)},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([c(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaLadder=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaLayeredAssembler:[function(a,t,e){"use strict";cc._RF.push(t,"2605eL/qGtPLZGTchPI+EoK","pzaLayeredAssembler");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var r=cc.RenderFlow.FLAG_RENDER|cc.RenderFlow.FLAG_POST_RENDER,p=cc.RenderFlow.FLAG_OPACITY|cc.RenderFlow.FLAG_WORLD_TRANSFORM,l=!0,s=function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.fillBuffers=function(t,e){var o,n;if(a.prototype.fillBuffers.call(this,t,e),l){var s=[];this._layers=[s];var c=(e.worldMatDirty?cc.RenderFlow.FLAG_WORLD_TRANSFORM:0)|(e.parentOpacityDirty?cc.RenderFlow.FLAG_OPACITY_COLOR:0);t.node.__gtDirtyFlag=c;var u=[];u.push(t.node);for(var d,h=1,m=0;m<u.length;){var f=u[m++];c=f.__gtDirtyFlag;try{for(var z=(o=void 0,i(f.children)),y=z.next();!y.done;y=z.next()){var g=y.value;g._activeInHierarchy&&0!==g._opacity&&((d=g._renderFlag&r)>0&&(g.__gtRenderFlag=d,g._renderFlag&=~d,s.push(g)),g.__gtDirtyFlag=c|g._renderFlag&p,u.push(g))}}catch(v){o={error:v}}finally{try{y&&!y.done&&(n=z.return)&&n.call(z)}finally{if(o)throw o.error}}m==h&&(h=u.length,s=[],this._layers.push(s))}}},t.prototype.postFillBuffers=function(a,t){var e,o,n,r,p=t.worldMatDirty;if(l&&this._layers){var s,c;l=!1;try{for(var u=i(this._layers),d=u.next();!d.done;d=u.next()){var h=d.value;if(0!=h.length)try{for(var m=(n=void 0,i(h)),f=m.next();!f.done;f=m.next()){var z=f.value;s=z.__gtRenderFlag,c=z.__gtDirtyFlag,t.worldMatDirty=c>0?1:0,z._renderFlag|=s,cc.RenderFlow.flows[s]._func(z)}}catch(y){n={error:y}}finally{try{f&&!f.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}}}catch(g){e={error:g}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(e)throw e.error}}this._layers=null,l=!0,t.worldMatDirty=p}},t}(cc.Assembler);e.default=s,cc._RF.pop()},{}],pzaLayeredRootSprite:[function(a,t,e){"use strict";cc._RF.push(t,"20f3aEs40NPYZXiSjoceFHQ","pzaLayeredRootSprite");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaLayeredAssembler"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.node._renderFlag|=cc.RenderFlow.FLAG_POST_RENDER},t.prototype._resetAssembler=function(){this.setVertsDirty(),(this._assembler=new r.default).init(this)},i([l],t)}(cc.Sprite));e.default=s,cc._RF.pop()},{"./pzaLayeredAssembler":"pzaLayeredAssembler"}],pzaLilyPad:[function(a,t,e){"use strict";cc._RF.push(t,"6b830Fm1MRJB7qJldotUMJd","pzaLilyPad");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLilyPad=void 0;var r=a("../../Common/pzaUtil"),p=a("../pzaGameState"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.up=!0,t.stayTime=0,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.7,cc.v2(0,5)),cc.delayTime(.1),cc.moveTo(.7,cc.v2()),cc.delayTime(.1))))},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=-1,this.up=!0,this.stayTime=0,this.blinkTime=r.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("idle",!0),p.pzaGameState.onlyShroomCofee=!1,p.pzaGameState.onlyBoomPlant=!1,p.pzaGameState.usePondPlant=!0},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData)return this.floatMove(t),this.blinkTime-=t,this.blinkTime<=0?(this.blinkTime=r.pzaUtil.getRandomFloatNum(3,6),void this.animation.playAnimation("idle_eye",!1,function(){e.animation.playAnimation("idle",!0)})):void 0},t.prototype.floatMove=function(a){this.stayTime-=a,this.stayTime>0||(this.baseData.floatY+=this.up?Math.abs(7-this.baseData.floatY)/7*.2:-.2*Math.abs(this.baseData.floatY+2)/7,this.baseData.floatY>5&&(this.up=!1),this.baseData.floatY<=0&&(this.up=!0,this.stayTime=.3))},t.prototype.logicLateUpdate=function(){a.prototype.logicLateUpdate.call(this);var t=""+this.baseData.xIndex+this.baseData.yIndex,e=window.pzaplantManager.plantDataMap.get(t);null!=e&&(e.floatY=this.baseData.floatY);var o=window.pzaplantManager.pumpkinDataMap.get(t);null!=o&&(o.floatY=this.baseData.floatY)},i([c],t)}(l.pzaBasePlant));e.pzaLilyPad=u,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaLocalData:[function(a,t,e){"use strict";cc._RF.push(t,"4d625P7p1FM7rUmddZZbB7E","pzaLocalData"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaLocalData=e.pzaLocalBattleData=void 0;var o=a("../Battle/Data/pzaPlantEnum"),n=a("../Shop/pzaShopConfig"),i=a("../Task/pzaTaskMgr"),r=a("./pzaGamePropConfig"),p=a("./pzaUtil"),l=function(){function a(){this.survivalBattleData=[],this.endlessBattleData=[],this.zjEndlessBattleData=[],this.zombieEndlessData=null}return a.saveZjEndlessData=function(a){null!=a&&(this.data.zjEndlessBattleData[a.part-1]=a,this.localSaveData())},a.saveSurvivalBattleData=function(a){null!=a&&(this.data.survivalBattleData[a.chapter-1]=a,this.localSaveData())},a.saveEndlessBattleData=function(a){null!=a&&(this.data.endlessBattleData[a.chapter-1]=a,this.localSaveData())},a.clearSurvivalBattleData=function(a){this.data.survivalBattleData[a-1]=null,this.localSaveData()},a.clearEndlessBattleData=function(a){this.data.endlessBattleData[a-1]=null,this.localSaveData()},a.clearZjEndlessBattleData=function(a){this.data.zjEndlessBattleData[a-1]=null,this.localSaveData()},a.getJsonStr=function(){return JSON.stringify(this.data)},a.fixReplace=function(a){if(a)for(var t in a)t.startsWith("_")&&(a[t.substring(1)]=a[t],delete a[t])},a.fixOldBattleData=function(t){if(t)if("Array"!==t.constructor.name)a.fixReplace(t),a.fixOldBattleData(t.plantData),a.fixOldBattleData(t.plantEnvData),a.fixOldBattleData(t.pumpkinData),a.fixOldBattleData(t.noTargetData);else for(var e=0;e<t.length;e++){var o=t[e];a.fixOldBattleData(o)}},a.readLocalData=function(){try{var t=cc.sys.localStorage.getItem(this.DATA_SAVE_KEY);if(!t)return void console.log("\u65e0battle\u5b58\u6863");var e=JSON.parse(t);if(null==e)return;e.survivalBattleData&&(this.data.survivalBattleData=e.survivalBattleData,a.fixOldBattleData(this.data.survivalBattleData)),e.endlessBattleData&&(this.data.endlessBattleData=e.endlessBattleData,a.fixOldBattleData(this.data.endlessBattleData)),e.zjEndlessBattleData&&(this.data.zjEndlessBattleData=e.zjEndlessBattleData,a.fixOldBattleData(this.data.zjEndlessBattleData)),e.zombieEndlessData&&(this.data.zombieEndlessData=e.zombieEndlessData,a.fixOldBattleData(this.data.zombieEndlessData))}catch(o){console.error(o)}},a.localSaveData=function(){var a=this.getJsonStr();cc.sys.localStorage.setItem(this.DATA_SAVE_KEY,a)},a.DATA_SAVE_KEY="pza-battle-data",a.data=new a,a}();e.pzaLocalBattleData=l;var s=function(){function a(){this.saveTime=null,this.saveId=p.pzaUtil.uuid(),this.playerNick=null,this.playerAvatar=null,this.soundValue=.8,this.musicValue=.8,this.gameSound=!0,this.lastLoginTime=null,this.curChapter=1,this.curPart=1,this.passLastPart=!1,this.passWtLastPart=!1,this.plantSlotCount=6,this.coin=0,this.tokenCoin=0,this.unlockZombies=[1],this.ownPlants=[o.pzaPlantEnum.PEA_SHOOTER],this.partStar=[],this.curGuideType=null,this.firstPickCoinTip=!1,this.unlockShop=!1,this.unlockBook=!1,this.unlockAch=!1,this.unlockGarden=!1,this.unlockMoregame=!1,this.unlockSpeed=!1,this.gardenPlants=[],this.gardenToolNum={},this.gardenEnv={},this.achieves={},this.tasks={},this.gardenLastTime=0,this.ownGoods=[],this.purchasedPos=[],this.gameProps=[],this.autoPickLeft=0,this.signDays=0,this.hasSign=!1,this.signDasyEnd=[],this.canMonthSign=!1,this.specailAchTime=0,this.maturePlantCount=0,this.hasGardenPlants=[],this.survivalPassChapter=0,this.survivalFlagCount=[],this.zombieTrophy=[],this.vaseTrophy=[],this.creativeVaseTrophy=[],this.zombieFlagCount=0,this.zombieUnlock=1,this.vasePassChapter=0,this.vaseFlagCount=0,this.zjPassCount=0,this.shareGiftRecIndex=[],this.shareBoomNutPop=!1,this.gatlingAdCount=0,this.twinsFlowerAdCnt=0,this.slot8AdCount=0,this.selectPlants=null,this.imitaterPlant=null,this.modeUsePlants=[],this.imitaterUsePlant=[],this.reachPartTime=null,this.usedRedeemCode=[],this.adShareCount=0,this.freeCoinShareCount=0,this.autoPickShareCount=0,this.newGuide=!1,this.preOpenSurvival=!1,this.gameClubTask=[],this.gameClubState=[],this.openPuzzleTip=!1,this.miniUnLockCnt=[],this.miniClickFlag=!0,this.miniFirstPassArr=[],this.monthSignDays=0,this.retroSignDays=0,this.isSignInMonth=!1,this.nowMonth=0,this.weekDayTime=null,this.getTokenCoinCnt=0,this.getTokenCntByAd=!1,this.miniGameNewFlagArr=[[13,1],[14,1],[15,1]],this.superChomperSwFirstIn=!0,this.zaJiaoPassPart=0,this.zaJiaoRound=0,this.zaJiaoRestartTimes=0,this.zaJiaoTrophy=[],this.crVaseTrophy=[],this.crTradTrophy=[],this.creativeItemState=[],this.isInZj=!1,this.clickCreateModeTip=!1,this.hasInCreateMode=!1,this.hasPassZjTeach=!1,this.creativeNewGameArr=[],this.newGameLevel=2,this.saveNewGameLevel=0,this.creativeTrophyArr=[],this.ttRegisterState=0,this.dataVersion=0,this.saveGameDataCnt=0,this.readGameDataCnt=0,this.canRefreshState=!1,this.recruitTaskState=[0,1,0,0,0,0,0,0,0,0,0,0],this.reportShareState=0,this.recruitInvitateState=0,this.superChomperTrial=0,this.recruitDrawArr=[],this.hasInGame=!1,this.hasKillYeti=!1,this.weekTwoOpenTip1=!0,this.weekTwoOpenTip2=!0,this.dropPlantArr=[],this.weekTwoStartTip=!0}return a.passPart=function(a,t,e){null==this.data.partStar[a-1]&&(this.data.partStar[a-1]=[],this.addDirty("partStar"));var o=this.data.partStar[a-1][t-1];return(null==o||o<e)&&(this.data.partStar[a-1][t-1]=e,this.addDirty("partStar"),i.default.instance().checkStar(this.getAllStar(!0))),a==this.data.curChapter&&t==this.data.curPart&&(i.default.instance().checkWhenPassRank(a,t),a>=5&&t>=10&&(this.data.passLastPart=!0,this.addDirty("passLastPart")),a>=10&&t>=10?(this.data.passWtLastPart=!0,this.addDirty("passWtLastPart"),!0):t>=10?(this.data.curChapter++,this.data.curPart=1,this.data.reachPartTime=Date.now(),this.addDirty("curChapter","curPart","reachPartTime"),!0):(this.data.curPart++,this.data.reachPartTime=Date.now(),this.addDirty("curPart","reachPartTime"),!0))},a.getPassPart=function(a){return a==this.data.curChapter?this.data.curPart-1:a>this.data.curChapter?0:-1},a.getPartStar=function(a,t){var e=this.data.partStar[a-1];if(null==e)return 0;var o=e[t-1];return null==o?0:o},a.getAllStar=function(a){void 0===a&&(a=!1);var t=0;a&&(t=5);for(var e=0,o=t;o<this.data.partStar.length;o++){var n=this.data.partStar[o];if(null!=n)for(var i=0;i<n.length;i++){var r=n[i];null!=r&&(e+=r)}}return e},a.hasUnlockZombie=function(a){return null!=a&&this.data.unlockZombies.indexOf(a)>=0},a.unlockZombie=function(a){null!=a&&(this.data.unlockZombies.indexOf(a)>=0||this.data.unlockZombies.push(a))},a.passSurvival=function(a){return!(this.data.survivalPassChapter>=a||(this.data.survivalPassChapter=a,this.addDirty("survivalPassChapter"),0))},a.passMiniGame=function(a){return this.data.miniFirstPassArr[a]},a.getSurvivalFlagCount=function(a){if(null==a||a<0)return 0;var t=this.data.survivalFlagCount[a-1];return null==t?0:t},a.passSurvivalEndless=function(a,t){var e=this.data.survivalFlagCount[a-1];(null==e||e<t)&&(this.data.survivalFlagCount[a-1]=t,this.addDirty("survivalFlagCount"))},a.passZombieMode=function(a){return 1!=this.data.zombieTrophy[a-1]&&(this.data.zombieTrophy[a-1]=1,this.addDirty("zombiePassChapter"),!0)},a.passVaseMode=function(a){return 1!=this.data.vaseTrophy[a-1]&&(this.data.vaseTrophy[a-1]=1,this.addDirty("passVaseMode"),!0)},a.passCreativeVaseMode=function(a){return 1!=this.data.creativeVaseTrophy[a-1]&&(this.data.creativeVaseTrophy[a-1]=1,this.addDirty("creativeVaseTrophy"),!0)},a.passCrVaseMode=function(a){return 1!=this.data.crVaseTrophy[a-1]&&(this.data.crVaseTrophy[a-1]=1,this.addDirty("crVaseTrophy"),!0)},a.passCrTradMode=function(a){return 1!=this.data.crTradTrophy[a-1]&&(this.data.crTradTrophy[a-1]=1,this.addDirty("crTradTrophy"),!0)},a.passCreativeMode=function(a){return 1!=this.data.creativeTrophyArr[a][0]&&(this.data.creativeTrophyArr[a][0]=1,this.addDirty("creativeTrophyArr"),!0)},a.getTrophy=function(){return this.data.survivalPassChapter+this.getZombieTrophy()+this.getVaseTrophy()+this.getMiniGameTrophy()},a.getVaseTrophy=function(){if(null==this.data.vaseTrophy||this.data.vaseTrophy.length<=0)return 0;var a=0;return this.data.vaseTrophy.forEach(function(t){1==t&&a++}),a},a.getCreativeVaseTrophy=function(){if(null==this.data.creativeVaseTrophy||this.data.creativeVaseTrophy.length<=0)return 0;var a=0;return this.data.creativeVaseTrophy.forEach(function(t){1==t&&a++}),a},a.getCrVaseTrophy=function(){if(null==this.data.crVaseTrophy||this.data.crVaseTrophy.length<=0)return 0;var a=0;return this.data.crVaseTrophy.forEach(function(t){1==t&&a++}),a},a.getCrTradTrophy=function(){if(null==this.data.crTradTrophy||this.data.crTradTrophy.length<=0)return 0;var a=0;return this.data.crTradTrophy.forEach(function(t){1==t&&a++}),a},a.getMiniGameTrophy=function(){for(var a=0,t=0;t<this.data.miniFirstPassArr.length;t++)1==this.data.miniFirstPassArr[t]&&8!=t&&a++;return a},a.getZaJiaoTrophy=function(){if(null==this.data.zaJiaoTrophy||this.data.zaJiaoTrophy.length<=0)return 0;var a=0;return this.data.zaJiaoTrophy.forEach(function(t){1==t&&a++}),a},a.getCreativeAllTrophy=function(){var a=0;return this.data.creativeTrophyArr.forEach(function(t){1==t[0]&&a++}),a},a.getZombieTrophy=function(){if(null==this.data.zombieTrophy||this.data.zombieTrophy.length<=0)return 0;var a=0;return this.data.zombieTrophy.forEach(function(t){1==t&&a++}),a},a.getMaxTrophy=function(){return 14+a.vaseAllTrophy+14},a.getJsonStr=function(){return JSON.stringify(this.data)},a.parseFromData=function(a){if(null==a)return this.data.lastLoginTime=Date.now(),this.data.reachPartTime=Date.now(),cc.audioEngine.setEffectsVolume(this.data.soundValue),void this.addAllDirty();null!=a.soundValue&&(this.data.soundValue=a.soundValue),null!=a.musicValue&&(this.data.musicValue=a.musicValue),null!=a.lastLoginTime&&(this.data.lastLoginTime=a.lastLoginTime),null!=a.curChapter&&(this.data.curChapter=a.curChapter),null!=a.curPart&&(this.data.curPart=a.curPart),null!=a.passLastPart&&(this.data.passLastPart=a.passLastPart),null!=a.passWtLastPart&&(this.data.passWtLastPart=a.passWtLastPart),null!=a.plantSlotCount&&(this.data.plantSlotCount=a.plantSlotCount),null!=a.coin&&(this.data.coin=a.coin),null!=a.tokenCoin&&(this.data.tokenCoin=a.tokenCoin),null!=a.unlockZombies&&(this.data.unlockZombies=a.unlockZombies),null!=a.ownPlants&&(this.data.ownPlants=a.ownPlants),null!=a.partStar&&(this.data.partStar=a.partStar),null!=a.curGuideType&&(this.data.curGuideType=a.curGuideType),null!=a.firstPickCoinTip&&(this.data.firstPickCoinTip=a.firstPickCoinTip),null!=a.unlockShop&&(this.data.unlockShop=a.unlockShop),null!=a.unlockAch&&(this.data.unlockAch=a.unlockAch),null!=a.unlockBook&&(this.data.unlockBook=a.unlockBook),null!=a.unlockMoregame&&(this.data.unlockMoregame=a.unlockMoregame),null!=a.unlockGarden&&(this.data.unlockGarden=a.unlockGarden),null!=a.unlockSpeed&&(this.data.unlockSpeed=a.unlockSpeed),null!=a.ownGoods&&(this.data.ownGoods=a.ownGoods),null!=a.purchasedPos&&(this.data.purchasedPos=a.purchasedPos),null!=a.gameProps&&(this.data.gameProps=a.gameProps),null!=a.autoPickLeft&&(this.data.autoPickLeft=a.autoPickLeft),null!=a.gardenPlants&&(this.data.gardenPlants=a.gardenPlants),null!=a.gardenToolNum&&(this.data.gardenToolNum=a.gardenToolNum),null!=a.gardenEnv&&(this.data.gardenEnv=a.gardenEnv),null!=a.purchasedPos&&(this.data.purchasedPos=a.purchasedPos),null!=a.signDays&&(this.data.signDays=a.signDays),null!=a.hasSign&&(this.data.hasSign=a.hasSign),null!=a.signDasyEnd&&(this.data.signDasyEnd=a.signDasyEnd),null!=a.canMonthSign&&(this.data.canMonthSign=a.canMonthSign),null!=a.specailAchTime&&(this.data.specailAchTime=a.specailAchTime),null!=a.maturePlantCount&&(this.data.maturePlantCount=a.maturePlantCount),null!=a.hasGardenPlants&&(this.data.hasGardenPlants=a.hasGardenPlants),this.data.gardenLastTime=a.gardenLastTime,this.data.achieves=a.achieves||{},this.data.tasks=a.tasks||{},null!=a.survivalPassChapter&&(this.data.survivalPassChapter=a.survivalPassChapter),null!=a.survivalFlagCount&&(this.data.survivalFlagCount=a.survivalFlagCount),null!=a.zombieTrophy&&(this.data.zombieTrophy=a.zombieTrophy),null!=a.vaseTrophy&&(this.data.vaseTrophy=a.vaseTrophy),null!=a.zombieUnlock&&(this.data.zombieUnlock=a.zombieUnlock),null!=a.zombieFlagCount&&(this.data.zombieFlagCount=a.zombieFlagCount),null!=a.vasePassChapter&&(this.data.vasePassChapter=a.vasePassChapter),null!=a.zjPassCount&&(this.data.zjPassCount=a.zjPassCount),null!=a.vaseFlagCount&&(this.data.vaseFlagCount=a.vaseFlagCount),null!=a.saveId&&(this.data.saveId=a.saveId),null!=a.saveTime&&(this.data.saveTime=a.saveTime),null!=a.shareGiftRecIndex&&(this.data.shareGiftRecIndex=a.shareGiftRecIndex),null!=a.shareBoomNutPop&&(this.data.shareBoomNutPop=a.shareBoomNutPop),null!=a.playerNick&&(this.data.playerNick=a.playerNick),null!=a.playerAvatar&&(this.data.playerAvatar=a.playerAvatar),null!=a.gatlingAdCount&&(this.data.gatlingAdCount=a.gatlingAdCount),null!=a.twinsFlowerAdCnt&&(this.data.twinsFlowerAdCnt=a.twinsFlowerAdCnt),null!=a.slot8AdCount&&(this.data.slot8AdCount=a.slot8AdCount),null!=a.modeUsePlants&&(this.data.modeUsePlants=a.modeUsePlants),null!=a.imitaterUsePlant&&(this.data.imitaterUsePlant=a.imitaterUsePlant),null!=a.reachPartTime?this.data.reachPartTime=a.reachPartTime:this.data.reachPartTime=Date.now(),null!=a.usedRedeemCode&&(this.data.usedRedeemCode=a.usedRedeemCode),null!=a.adShareCount&&(this.data.adShareCount=a.adShareCount),null!=a.freeCoinShareCount&&(this.data.freeCoinShareCount=a.freeCoinShareCount),null!=a.autoPickShareCount&&(this.data.autoPickShareCount=a.autoPickShareCount),null!=a.dataVersion&&(this.data.dataVersion=a.dataVersion),null!=a.newGuide&&(this.data.newGuide=a.newGuide),null!=a.preOpenSurvival&&(this.data.preOpenSurvival=a.preOpenSurvival),null!=a.gameClubTask&&(this.data.gameClubTask=a.gameClubTask),null!=a.gameClubState&&(this.data.gameClubState=a.gameClubState),null!=a.openPuzzleTip&&(this.data.openPuzzleTip=a.openPuzzleTip),null!=a.miniUnLockCnt&&(this.data.miniUnLockCnt=a.miniUnLockCnt),null!=a.miniClickFlag&&(this.data.miniClickFlag=a.miniClickFlag),null!=a.miniFirstPassArr&&(this.data.miniFirstPassArr=a.miniFirstPassArr),null!=a.monthSignDays&&(this.data.monthSignDays=a.monthSignDays),null!=a.retroSignDays&&(this.data.retroSignDays=a.retroSignDays),null!=a.isSignInMonth&&(this.data.isSignInMonth=a.isSignInMonth),null!=a.nowMonth&&(this.data.nowMonth=a.nowMonth),null!=a.isInZj&&(this.data.isInZj=a.isInZj),null!=a.clickCreateModeTip&&(this.data.clickCreateModeTip=a.clickCreateModeTip),null!=a.hasInCreateMode&&(this.data.hasInCreateMode=a.hasInCreateMode),null!=a.creativeNewGameArr&&(this.data.creativeNewGameArr=a.creativeNewGameArr),null!=a.creativeTrophyArr&&(this.data.creativeTrophyArr=a.creativeTrophyArr),null!=a.ttRegisterState&&(this.data.ttRegisterState=a.ttRegisterState),null!=a.saveGameDataCnt&&(this.data.saveGameDataCnt=a.saveGameDataCnt),null!=a.readGameDataCnt&&(this.data.readGameDataCnt=a.readGameDataCnt),null!=a.recruitTaskState&&(this.data.recruitTaskState=a.recruitTaskState),null!=a.canRefreshState&&(this.data.canRefreshState=a.canRefreshState),null!=a.reportShareState&&(this.data.reportShareState=a.reportShareState),null!=a.recruitInvitateState&&(this.data.recruitInvitateState=a.recruitInvitateState),null!=a.superChomperTrial&&(this.data.superChomperTrial=a.superChomperTrial),null!=a.recruitDrawArr&&(this.data.recruitDrawArr=a.recruitDrawArr),null!=a.hasInGame&&(this.data.hasInGame=a.hasInGame),null!=a.hasKillYeti&&(this.data.hasKillYeti=a.hasKillYeti),null!=a.weekTwoOpenTip1&&(this.data.weekTwoOpenTip1=a.weekTwoOpenTip1),null!=a.weekTwoOpenTip2&&(this.data.weekTwoOpenTip2=a.weekTwoOpenTip2),null!=a.dropPlantArr&&(this.data.dropPlantArr=a.dropPlantArr),null!=a.weekTwoStartTip&&(this.data.weekTwoStartTip=a.weekTwoStartTip),null!=a.saveNewGameLevel&&(this.data.saveNewGameLevel=a.saveNewGameLevel),null!=a.zaJiaoPassPart&&(this.data.zaJiaoPassPart=a.zaJiaoPassPart),null!=a.weekDayTime&&(this.data.weekDayTime=a.weekDayTime),null!=a.getTokenCoinCnt&&(this.data.getTokenCoinCnt=a.getTokenCoinCnt),null!=a.getTokenCntByAd&&(this.data.getTokenCntByAd=a.getTokenCntByAd),null!=a.miniGameNewFlagArr&&a.miniGameNewFlagArr.length==this.data.miniGameNewFlagArr.length&&(this.data.miniGameNewFlagArr=a.miniGameNewFlagArr),null!=a.superChomperSwFirstIn&&(this.data.superChomperSwFirstIn=a.superChomperSwFirstIn),null!=a.zaJiaoRound&&(this.data.zaJiaoRound=a.zaJiaoRound),null!=a.zaJiaoRestartTimes&&(this.data.zaJiaoRestartTimes=a.zaJiaoRestartTimes),null!=a.zaJiaoTrophy&&(this.data.zaJiaoTrophy=a.zaJiaoTrophy),null!=a.creativeVaseTrophy&&(this.data.creativeVaseTrophy=a.creativeVaseTrophy),null!=a.crVaseTrophy&&(this.data.crVaseTrophy=a.crVaseTrophy),null!=a.crTradTrophy&&(this.data.crTradTrophy=a.crTradTrophy),null!=a.creativeItemState&&(this.data.creativeItemState=a.creativeItemState),cc.audioEngine.setEffectsVolume(this.data.soundValue),this.resetData(),l.readLocalData(),a.survivalBattleData&&a.length>0&&(l.data.survivalBattleData=a.survivalBattleData,l.localSaveData()),a.endlessBattleData&&a.endlessBattleData.length>0&&(l.data.endlessBattleData=a.endlessBattleData,l.localSaveData()),a.selectPlants&&(this.data.modeUsePlants[0]=a.selectPlants,this.addDirty("modeUsePlants"),a.imitaterPlant&&(this.data.imitaterUsePlant[0]=a.imitaterPlant,this.addDirty("imitaterUsePlant")))},a.resetData=function(){var a=Date.now();p.pzaUtil.isSameDay(a,this.data.lastLoginTime)||(this.data.lastLoginTime=a,this.data.purchasedPos=[],this.data.hasSign=!1,this.data.unlockSpeed=!1,this.data.adShareCount=0,this.data.freeCoinShareCount=0,this.data.autoPickShareCount=0,this.data.gameClubTask[1]=0,this.data.gameClubTask[2]=0,this.data.gameClubState=[],this.data.gameClubState[1]=0,this.data.gameClubState[2]=0,this.data.miniClickFlag=!0,this.data.creativeItemState=[],this.data.zaJiaoRestartTimes=0,this.data.saveGameDataCnt=0,this.data.readGameDataCnt=0,this.data.superChomperTrial-=1,this.data.superChomperTrial<=0&&(this.data.superChomperTrial=0,this.data.ownPlants=this.data.ownPlants.filter(function(a){return a!==o.pzaPlantEnum.SUPER_CHOMPER})),this.data.hasInGame=!1,this.addDirty("lastLoginTime","purchasedPos","hasSign","unlockSpeed","adShareCount","freeCoinShareCount","autoPickShareCount","gameClubTask","saveGameDataCnt","readGameDataCnt","superChomperTrial","hasInGame")),this.data.superChomperTrial<=0&&(this.data.superChomperTrial=0,this.data.ownPlants=this.data.ownPlants.filter(function(a){return a!==o.pzaPlantEnum.SUPER_CHOMPER}))},a.testData=function(){this.testMode=!0},a.unlockChapter=function(){if(this.data.plantSlotCount=6,this.data.shareGiftRecIndex=[],this.data.survivalPassChapter=5,this.data.curChapter=10,this.data.curPart=10,this.data.passLastPart=!0,this.data.playerNick=null,this.data.playerAvatar=null,this.data.survivalFlagCount=[1,1,1,1,1],this.data.plantSlotCount=7,this.data.gardenPlants=[],this.data.gardenToolNum={},this.data.partStar=[],this.data.coin=1e5,this.data.curGuideType=null,this.data.plantSlotCount=9,this.data.autoPickLeft=0,this.data.signDays=7,this.data.partStar=[],this.data.unlockBook=!0,this.data.unlockShop=!0,this.data.unlockGarden=!0,this.data.achieves={},this.data.gardenToolNum={7:1},!(this.data.ownPlants.length>=40)){for(var a=[],t=o.pzaPlantEnum.PEA_SHOOTER;t<=o.pzaPlantEnum.MELON_PULT;t++)a.push(t);a.push(o.pzaPlantEnum.BOOM_NUT),this.data.ownPlants=a,this.addAllDirty()}},a.obtainGoods=function(a,t){if(null!=a&&null!=t){var e=this.data.ownGoods[a];this.data.ownGoods[a]=null==e?t:t+e,this.addDirty("ownGoods")}},a.consumeGoods=function(a,t){if(null==a||null==t)return!1;var e=this.data.ownGoods[a];return!(null==e||e<t||(this.data.ownGoods[a]=Math.max(0,e-t),this.addDirty("ownGoods"),0))},a.getGoodsCount=function(a){if(null==a)return 0;var t=this.data.ownGoods[a];return null==t?0:t},a.obtainProp=function(a,t,e){if(void 0===e&&(e=!0),null!=a&&null!=t){var o=this.data.gameProps[a];if(a===r.pzaGamePropEnum.PROP_COIN)return this.data.coin+=t||0,void(e&&this.addDirty("coin"));if(a==r.pzaGamePropEnum.PROP_TOKEN_COIN)return this.data.tokenCoin+=t||0,void this.addDirty("tokenCoin");this.data.gameProps[a]=null==o?t:t+o,e&&this.addDirty("gameProps")}},a.consumeProp=function(a,t){if(void 0===t&&(t=1),null!=a&&null!=t){var e=this.data.gameProps[a];null!=e&&(this.data.gameProps[a]=Math.max(0,e-t),this.addDirty("gameProps"))}},a.getPropCount=function(a){if(null==a)return 0;var t=this.data.gameProps[a];return null==t?0:t},a.hasNutHealing=function(){var a=this.data.ownGoods[n.pzaShopItemType.NUT_HEALING];return null!=a&&a>0},a.getAdvancedPlant=function(){var a=0;return this.data.ownPlants.forEach(function(t){(t>=o.pzaPlantEnum.GATLING_PEA&&t<=o.pzaPlantEnum.COB_CANNON||t==o.pzaPlantEnum.SUPER_CHOMPER)&&a++}),a},a.hasPass12=function(){return this.data.curChapter>1||1==this.data.curChapter&&this.data.curPart>2},a.addAllDirty=function(){a.hasDirty=!0},a.addDirty=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a.hasDirty=!0},a.readLocalData=function(){return cc.sys.localStorage.getItem(this.DATA_SAVE_KEY)},a.localSaveData=function(){a.hasDirty=!1,this.data.saveTime=Date.now();var t=this.getJsonStr();cc.sys.localStorage.setItem(this.DATA_SAVE_KEY,t)},a.data_verison=1,a.DATA_SAVE_KEY="pza-data-2",a.hasDirty=!1,a.data=new a,a.testMode=!1,a.gardenGuiding=!1,a.isNewUser=0,a.maxAdShareCount=0,a.maxShareRwdCount=0,a.isShowSaveView=!1,a.vaseAllTrophy=0,a.serverTime=0,a.loadingIsOver=!1,a.isPopReviveView=!1,a.isClickZj=!1,a.hasUseProp=!1,a.gameStartTimeStamp=0,a.holidayRecruitOver=!1,a.recruitOverTimeStamp=1725120001e3,a.recruitLeftDays=0,a.autoPopInvitateView=!1,a.onlyPopOne=!0,a.redPointOnlyOne=!0,a.isWeekTwo=!1,a.isNoZj=!1,a}();e.pzaLocalData=s,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Shop/pzaShopConfig":"pzaShopConfig","../Task/pzaTaskMgr":"pzaTaskMgr","./pzaGamePropConfig":"pzaGamePropConfig","./pzaUtil":"pzaUtil"}],pzaMagnetNut:[function(a,t,e){"use strict";cc._RF.push(t,"3acf177CfFOi6g4kt+5DmJ/","pzaMagnetNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMagnetNut=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaPlantEnum"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.drawTime=0,t.restTime=0,t.resting=!1,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=l.pzaPlantCate.Nut,this.restTime=0,this.resting=!1,this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),u.pzaGameState.useShroom=!0,u.pzaGameState.onlyBoomPlant=!1},t.prototype.playNormalAni=function(){var a=this,t=function(){if(a.drawTime>0)a.animation.playAnimation("attack",!1,t);else{if(a.restTime<=0){if(a.resting)return a.resting=!1,void a.animation.playAnimation("back",!1,t);var e=a.findTarget(),o=a.findLaddyTarget();if(null!=e)return a.restTime=15,a.resting=!0,a.absorbIronEquip(e),r.pzaSoundManager.playAudio("MagnetShroom"),void a.animation.playAnimation("go",!1,function(){a.drawTime=1.5,a.animation.playAnimation("attack",!1,t)});null!=o&&(a.restTime=15,a.resting=!0,a.absorbLabby(o),r.pzaSoundManager.playAudio("MagnetShroom"),a.attacking=!0,a.animation.playAnimation("go",!1,function(){a.drawTime=1.5,a.animation.playAnimation("attack",!1,function(){a.attacking=!1,a.animation.playAnimation("idle1",!0)})}))}a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))}};this.animation.playAnimation("idle1",!1,t)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.drawTime-=t,this.restTime-=t},t.prototype.findTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1,o=3*u.pzaGameState.map.getBlockWidth();return window.pzazombieManager.zombieMap.forEach(function(n,i){if(!(null==i||null==i.zombieData||(i.zombieData.equipType!=s.pzaEquipType.IRON_EQUIP||i.zombieData.equipHp<=0)&&(i.zombieData.equipType2!=s.pzaEquipType.IRON_EQUIP||i.zombieData.equipHp2<=0)&&i.zombieData.toolType!=s.pzaEquipType.IRON_EQUIP)){var r=i.logicPos.sub(a.baseData.logicPos).len();r<=o&&(-1==e||r<e)&&(t=i,e=r)}}),t}},t.prototype.findLaddyTarget=function(){var a=this,t=null,e=3*u.pzaGameState.map.getBlockWidth(),o=-1;return null==t&&window.pzaMapManager.LadderMap.forEach(function(n){var i=n.logicPos.sub(a.baseData.logicPos).len();i<=e&&(-1==o||i<o)&&(t=n,o=i)}),t},t.prototype.absorbIronEquip=function(a){if(null!=this.baseData&&!this.baseData.isDead&&null!=a&&null!=a.zombieData&&!a.isDead)if(a.zombieData.zombieType!=s.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3&&a.zombieData.zombieType!=s.pzaZombieEnum.GARGANTUAR2&&a.zombieData.zombieType!=s.pzaZombieEnum.GARGANTUAR3){var t,e=s.pzaHurtStateEnum.INTACT;a.zombieData.zombieType==s.pzaZombieEnum.POGO_ZOMBIE?e=(t=a.hp/a.maxHp)<=1/3?s.pzaHurtStateEnum.DYING:t<=2/3?s.pzaHurtStateEnum.HURT:s.pzaHurtStateEnum.INTACT:0!=a.zombieData.maxEquipHp&&(e=(t=a.zombieData.equipHp/a.zombieData.maxEquipHp)<=1/3?s.pzaHurtStateEnum.DYING:t<=2/3?s.pzaHurtStateEnum.HURT:s.pzaHurtStateEnum.INTACT),a.destroyIronEquip(),c.pzaEffectManager.createAbsorbIronEquip(this.baseData,a,e)}else this.absorbIronEquipInZj(a)},t.prototype.absorbIronEquipInZj=function(a){var t,e=s.pzaHurtStateEnum.INTACT,o=0;a.zombieData.equipHp>0&&0!=a.zombieData.maxEquipHp?(o=1,e=(t=a.zombieData.equipHp/a.zombieData.maxEquipHp)<=1/3?s.pzaHurtStateEnum.DYING:t<=2/3?s.pzaHurtStateEnum.HURT:s.pzaHurtStateEnum.INTACT):(o=2,e=(t=a.zombieData.equipHp2/a.zombieData.maxEquipHp2)<=1/3?s.pzaHurtStateEnum.DYING:t<=2/3?s.pzaHurtStateEnum.HURT:s.pzaHurtStateEnum.INTACT),a.destroyIronEquipInZj(o),c.pzaEffectManager.createAbsorbIronEquip(this.baseData,a,e,o)},t.prototype.absorbLabby=function(a){null==this.baseData||this.baseData.isDead||c.pzaEffectManager.createLaddyEff(this.baseData,a)},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([m],t)}(d.pzaBasePlant));e.pzaMagnetNut=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMagnetShroom:[function(a,t,e){"use strict";cc._RF.push(t,"ee7788Nq0hJyLUTPjE/LN6f","pzaMagnetShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMagnetShroom=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaSpineController"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.blinkTime=3,t.restTime=0,t.drawTime=0,t.resting=!1,t.attacking=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.restTime=0,this.resting=!1,u.pzaGameState.isZombieMode())return this.attacking=!1,this.sleepAni.node.active=!1,void this.animation.playAnimation("T_idle",!0);t.plantData.sleeping?(this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):this.sleepAni.node.active=!1,this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),u.pzaGameState.useShroom=!0,u.pzaGameState.onlyBoomPlant=!1},t.prototype.playNormalAni=function(){var a=this,t=function(){if(a.drawTime>0)a.animation.playAnimation("attack",!1,t);else{if(a.restTime<=0&&!a.baseData.plantData.sleeping){if(a.resting)return a.resting=!1,void a.animation.playAnimation("back",!1,t);var e=a.findTarget(),o=a.findLaddyTarget();if(null!=e)return a.restTime=15,a.resting=!0,a.absorbIronEquip(e),r.pzaSoundManager.playAudio("MagnetShroom"),void a.animation.playAnimation("go",!1,function(){a.drawTime=1.5,a.animation.playAnimation("attack",!1,t)});null!=o&&(a.restTime=15,a.resting=!0,a.absorbLabby(o),r.pzaSoundManager.playAudio("MagnetShroom"),a.attacking=!0,a.animation.playAnimation("T_go",!1,function(){a.drawTime=1.5,a.animation.playAnimation("T_attack",!1,function(){a.attacking=!1,a.animation.playAnimation("T_idle4",!0)})}))}if(a.blinkTime>0)return a.restTime>0?void a.animation.playAnimation("idle4",!1,t):void a.animation.playAnimation(a.baseData.plantData.sleeping?"idle3":"idle1",!1,t);a.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),a.restTime>0?a.animation.playAnimation("idle4_eye",!1,t):a.animation.playAnimation(a.baseData.plantData.sleeping?"idle3_eye":"idle1_eye",!1,t)}};this.animation.playAnimation(this.baseData.plantData.sleeping?"idle3":"idle1",!1,t)},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.restTime-=t,this.drawTime-=t,!this.attacking&&u.pzaGameState.isZombieMode()&&this.restTime<=0){if(this.resting)return this.resting=!1,this.attacking=!0,void this.animation.playAnimation("T_back",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)});var o=this.findTarget(),n=this.findLaddyTarget();if(null!=o)return this.restTime=15,this.resting=!0,this.absorbIronEquip(o),r.pzaSoundManager.playAudio("MagnetShroom"),this.attacking=!0,void this.animation.playAnimation("T_go",!1,function(){e.drawTime=1.5,e.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle4",!0)})});null!=n&&(this.restTime=15,this.resting=!0,this.absorbLabby(n),r.pzaSoundManager.playAudio("MagnetShroom"),this.attacking=!0,this.animation.playAnimation("T_go",!1,function(){e.drawTime=1.5,e.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle4",!0)})}))}},t.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.findTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1,o=3*u.pzaGameState.map.getBlockWidth();return window.pzazombieManager.zombieMap.forEach(function(n,i){if(null!=i&&null!=i.zombieData&&(!(i.zombieData.equipType!=s.pzaEquipType.IRON_EQUIP||i.zombieData.equipHp<=0)||i.zombieData.toolType==s.pzaEquipType.IRON_EQUIP)){var r=i.logicPos.sub(a.baseData.logicPos).len();r<=o&&(-1==e||r<e)&&(t=i,e=r)}}),t}},t.prototype.findLaddyTarget=function(){var a=this,t=null,e=3*u.pzaGameState.map.getBlockWidth(),o=-1;return null==t&&window.pzaMapManager.LadderMap.forEach(function(n){var i=n.logicPos.sub(a.baseData.logicPos).len();i<=e&&(-1==o||i<o)&&(t=n,o=i)}),t},t.prototype.absorbIronEquip=function(a){if(null!=this.baseData&&!this.baseData.isDead&&null!=a&&null!=a.zombieData&&!a.isDead){var t,e=s.pzaHurtStateEnum.INTACT;a.zombieData.zombieType==s.pzaZombieEnum.POGO_ZOMBIE?e=(t=a.hp/a.maxHp)<=1/3?s.pzaHurtStateEnum.DYING:t<=2/3?s.pzaHurtStateEnum.HURT:s.pzaHurtStateEnum.INTACT:0!=a.zombieData.maxEquipHp&&(e=(t=a.zombieData.equipHp/a.zombieData.maxEquipHp)<=1/3?s.pzaHurtStateEnum.DYING:t<=2/3?s.pzaHurtStateEnum.HURT:s.pzaHurtStateEnum.INTACT),a.destroyIronEquip(),c.pzaEffectManager.createAbsorbIronEquip(this.baseData,a,e)}},t.prototype.absorbLabby=function(a){null==this.baseData||this.baseData.isDead||c.pzaEffectManager.createLaddyEff(this.baseData,a)},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([f({displayName:"\u7761\u89c9\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"sleepAni",void 0),i([m],t)}(d.pzaBasePlant);e.pzaMagnetShroom=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMapManager:[function(a,t,e){"use strict";cc._RF.push(t,"2ae8cyvWMVGZ5KducPAy6fC","pzaMapManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMapManager=e.pzaBlockType=void 0;var r,p=a("../Battle/Data/pzaBaseData"),l=a("../Battle/Data/pzaZombieEnum"),s=a("../Battle/Effect/pzaLadder"),c=a("../Battle/Effect/pzaPitchFork"),u=a("../Battle/Effect/pzaRoofPreEffect"),d=a("../Battle/Effect/pzaSpeedBlinkEffect"),h=a("../Battle/Zombie/pzaBaseZombie"),m=a("../Battle/pzaCleanCar"),f=a("../Battle/pzaEffectManager"),z=a("../Battle/pzaGameState"),y=a("../Battle/pzaTomb"),g=a("../CreativeMode/pzaGameCreativeTrad"),v=a("../Load/pzaBundleObjectPool"),b=a("../Load/pzaPreLoadManager"),S=a("../Shop/pzaShopConfig"),P=a("../View/Battle/pzaBattleDownView"),C=a("../View/Battle/pzaBattleUpView"),D=a("./pzaGameConfig"),M=a("./pzaGameManager"),E=a("./pzaGameMiniGame"),_=a("./pzaGamePartConfig"),T=a("./pzaGameZJ"),w=a("./pzaKnockMiniGame"),A=a("./pzaLocalData"),B=a("./pzaNodeManager"),G=a("./pzaSoundManager"),O=a("./pzaSpriteFrameManager"),I=a("./pzaTipManager"),N=a("./pzaUtil"),R=cc._decorator,L=R.ccclass,k=R.property;(function(a){a[a.BLANK=0]="BLANK",a[a.GRASS=1]="GRASS",a[a.POND=2]="POND",a[a.ROOF=3]="ROOF",a[a.ICE=4]="ICE",a[a.DOOM_HOLE=5]="DOOM_HOLE",a[a.GOLD_HOLE=6]="GOLD_HOLE"})(r=e.pzaBlockType||(e.pzaBlockType={}));var Z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.mapSprite=null,t.preMapSprite=null,t.inDoorSprite=null,t.tussock=null,t.previewZombieNode=null,t.previewShadowNode=null,t.plantTouchNode=null,t.battleUpView=null,t.battleDownView=null,t.redLine=null,t.blinkAni=null,t.mapOriPos=null,t.BlockTypeMap=new Map,t.TombSet=new Set,t.TombMap=new Map,t.PreviewZombies=new Set,t.IceGroundSet=new Set,t.DoomHoleSet=new Set,t.GoldHoleSet=new Set,t.LadderMap=new Map,t.DropCoinSet=new Set,t.CleanCar=new Set,t.fog=null,t.roofPreBg=null,t.lockAction=!1,t.zjMap=new Map([[6,"Texture/ZaJiao/bg1"],[1,"resources/Texture/Map/background1"],[3,"resources/Texture/Map/background3"]]),t}return n(t,a),t.prototype.onLoad=function(){window.pzaMapManager=this,this.mapOriPos=cc.v2(this.mapSprite.node.position.x,this.mapSprite.node.position.y)},t.prototype.init_zajiao=function(a,t,e){var o=this;this.battleDownView.node.active=!1,this.battleUpView.node.active=!1,this.redLine.active=!1,this.inDoorSprite.node.active=!1,this.preMapSprite.node.active=!1,this.blinkAni.node.active=!1,this.tussock.active=a;var n=M.pzaGameManager.getGame(z.pzaGameMode.ZaJiao,T.pzaGameZJ).getRankConf(e).map;v.pzaBundleObjectPool.requestSpriteFrameByUrl(this.zjMap.get(n),function(a,t){null==a?o.mapSprite.spriteFrame=t:console.error(a)});var i=z.pzaGameState.map.getMapOriPos();null!=i&&this.plantTouchNode.setPosition(i.clone()),this.BlockTypeMap.clear(),this.TombSet.clear(),this.TombMap.clear(),this.PreviewZombies.clear(),this.IceGroundSet.clear(),this.DoomHoleSet.clear(),this.GoldHoleSet.clear(),this.LadderMap.clear(),this.DropCoinSet.clear(),this.fog=null,this.roofPreBg=null,this.initMapPos(!0);var p=z.pzaGameState.map.getMapRow(),l=z.pzaGameState.map.getMapColumn();if(6===n)for(var s={"04":1,14:1,24:1,30:1,40:1},c=0;c<l;c++)for(var u=0;u<p;u++)s[d=""+c+u]?this.BlockTypeMap.set(d,r.BLANK):this.BlockTypeMap.set(d,r.GRASS);else if(3===n){for(c=0;c<l;c++)for(u=0;u<p;u++){var d=""+c+u;2==u||3==u?this.BlockTypeMap.set(d,r.POND):this.BlockTypeMap.set(d,r.GRASS)}f.pzaEffectManager.createWaterLightEffect()}else for(c=0;c<l;c++)for(u=0;u<p;u++)d=""+c+u,this.BlockTypeMap.set(d,r.GRASS)},t.prototype.init=function(a,t){!z.pzaGameState.isMiniMode()||3!=t&&4!=t||(a=5,t=10),this.battleDownView.node.active=!1,this.battleUpView.node.active=!1,this.redLine.active=!1,this.inDoorSprite.node.active=!1,this.preMapSprite.node.active=!1,this.blinkAni.node.active=!1,this.tussock.active=!z.pzaGameState.isSurvival()&&1==a&&t<=4,O.pzaSpriteFrameManager.loadMap(a,t,z.pzaGameState.isSurvival(),this.mapSprite);var e=z.pzaGameState.map.getMapOriPos();null!=e&&this.plantTouchNode.setPosition(e.clone()),this.BlockTypeMap.clear(),this.TombSet.clear(),this.TombMap.clear(),this.PreviewZombies.clear(),this.IceGroundSet.clear(),this.DoomHoleSet.clear(),this.GoldHoleSet.clear(),this.LadderMap.clear(),this.DropCoinSet.clear(),this.fog=null,this.roofPreBg=null,this.initMapPos(!0);var o=z.pzaGameState.map.getMapRow(),n=z.pzaGameState.map.getMapColumn();if(!z.pzaGameState.isSurvival()){if(1==a&&1==t){for(var i=0;i<n;i++)for(var p=0;p<o;p++){var l=""+i+p,s=2==p?r.GRASS:r.BLANK;this.BlockTypeMap.set(l,s)}return}if(1==a&&(2==t||3==t)){for(i=0;i<n;i++)for(p=0;p<o;p++)l=""+i+p,s=1==p||2==p||3==p?r.GRASS:r.BLANK,this.BlockTypeMap.set(l,s);return}}if(1==a||2==a||(4==a||9==a)&&5==t||6==a||7==a)for(i=0;i<n;i++)for(p=0;p<o;p++)l=""+i+p,this.BlockTypeMap.set(l,r.GRASS);else if(3==a||4==a||8==a||9==a){for(i=0;i<n;i++)for(p=0;p<o;p++)l=""+i+p,2==p||3==p?this.BlockTypeMap.set(l,r.POND):this.BlockTypeMap.set(l,r.GRASS);f.pzaEffectManager.createWaterLightEffect()}else if(5==a||10==a){for(i=0;i<n;i++)for(p=0;p<o;p++)l=""+i+p,this.BlockTypeMap.set(l,r.ROOF);(5==a&&10!=t||10==a&&10!=t)&&this.createRoofPreEffect()}},t.prototype.getRandomWayIndex=function(a,t,e){if(null==t||null==e||e.length<=0)return 0;var o=e[a%e.length];if(t==l.pzaZombieEnum.GARGANTUAR&&o==e.length-1)return N.pzaUtil.getRandomValueFromArray([0,1]);var n=D.pzaGameConfig.isWaterZombie(t),i=this.isInWaterWay(o);return i&&n||!i&&!n?o:n?this.getRandomWaterWay():this.getRandomNoWaterWay()},t.prototype.getRandomNoWaterWay=function(){return N.pzaUtil.getRandomValueFromArray([0,1,4,5])},t.prototype.getRandomWaterWay=function(){return Math.random()>.5?2:3},t.prototype.isInWaterWay=function(a){return!(3!=z.pzaGameState.curChapter&&4!=z.pzaGameState.curChapter&&8!=z.pzaGameState.curChapter&&9!=z.pzaGameState.curChapter||!(z.pzaGameState.isSurvival()||4!=z.pzaGameState.curChapter&&9!=z.pzaGameState.curChapter||5!=z.pzaGameState.curPart)||2!=a&&3!=a)},t.prototype.getRowBlockType=function(a){var t="0"+a;return this.BlockTypeMap.get(t)},t.prototype.getPlantBlockType=function(a,t){var e=!1;if(this.DoomHoleSet.forEach(function(o){null!=o&&o.mapXIndex==a&&o.mapYIndex==t&&(e=!0)}),e)return r.DOOM_HOLE;if(this.GoldHoleSet.forEach(function(o){null!=o&&o.mapXIndex==a&&o.mapYIndex==t&&(e=!0)}),e)return r.GOLD_HOLE;var o=!1;if(z.pzaGameState.isVaseMode()||z.pzaGameState.isCreativeVaseMode()?this.IceGroundSet.forEach(function(e){e.posHasIce(a,t)&&(o=!0)}):this.IceGroundSet.forEach(function(e){e.containBlock(a,t)&&(o=!0)}),o)return r.ICE;var n=""+a+t;return this.BlockTypeMap.get(n)},t.prototype.hasTomb=function(a,t){var e=""+a+t;return this.TombSet.has(e)},t.prototype.initMapTomb=function(a,t,e){var o,n=this;if(null==(o=z.pzaGameState.isSurvival()?z.pzaGameState.survivalConfig:_.pzaGamePartConfig.getPartConfig(a,t))||o.tombCount<=0)e&&e();else{for(var i=o.tombCount,p=z.pzaGameState.map.getMapRow(),l=z.pzaGameState.map.getMapColumn(),s=[],c=o.tombMinRow-1;c<l;c++)for(var u=0;u<p;u++){var d=""+c+u,h=this.BlockTypeMap.get(d);h!=r.GRASS&&h!=r.ROOF||s.push(d)}var m=N.pzaUtil.getRandomArrayValue(s,i);null!=m&&m.forEach(function(a){n.TombSet.add(a)});var f=function(){--i<=0&&e&&e()},y=!1;for(c=0;c<l;c++)for(u=0;u<p;u++)d=""+c+u,this.TombSet.has(d)&&(this.createTomb(c,u,f),y=!0);y&&G.pzaSoundManager.playAudio("tombCreate")}},t.prototype.miniGameinitMapTomb=function(a){var t=this,e=M.pzaGameManager.getGame(z.pzaGameMode.MINIGAME_KNOCK,w.pzaKnockMiniGame).getConf(z.pzaGameState.curPart);if(!(null==e||e.tombstone<=0)){for(var o=e.tombstone,n=z.pzaGameState.map.getMapRow(),i=z.pzaGameState.map.getMapColumn(),p=[],l=e.tombstonemini-1;l<i;l++)for(var s=0;s<n;s++){var c=""+l+s,u=this.BlockTypeMap.get(c);u!=r.GRASS&&u!=r.ROOF||p.push(c)}var d=N.pzaUtil.getRandomArrayValue(p,o);null!=d&&d.forEach(function(a){t.TombSet.add(a)});var h=function(){--o<=0&&a&&a()},m=!1;for(l=0;l<i;l++)for(s=0;s<n;s++)c=""+l+s,this.TombSet.has(c)&&(this.createTomb(l,s,h),m=!0);m&&G.pzaSoundManager.playAudio("tombCreate")}},t.prototype.randomCreateTomb=function(a){var t,e=this;if(null!=(t=z.pzaGameState.isSurvival()?z.pzaGameState.survivalConfig:_.pzaGamePartConfig.getPartConfig(z.pzaGameState.curChapter,z.pzaGameState.curPart))){for(var o=z.pzaGameState.map.getMapRow(),n=z.pzaGameState.map.getMapColumn(),i=[],r=[],p=t.tombMinRow-1;p<n;p++)for(var l=0;l<o;l++){var s=""+p+l;this.TombSet.has(s)||(i.push(s),window.pzaplantManager.hasPlant(p,l)||r.push(s))}var c=null;(c=N.pzaUtil.getRandomArrayValue(r,a)).length<a&&(c=N.pzaUtil.getRandomArrayValue(i,a)),c.forEach(function(a){e.TombSet.add(a)});var u=!1;for(p=0;p<n;p++)for(l=0;l<o;l++)s=""+p+l,-1!=c.indexOf(s)&&(this.createTomb(p,l,null),window.pzaplantManager.hasPlant(p,l)&&(window.pzaplantManager.removeNormalPlant(p,l),window.pzaplantManager.removePumpkin(p,l),window.pzaplantManager.removeEnvPlant(p,l)),u=!0);u&&G.pzaSoundManager.playAudio("tombCreate")}},t.prototype.createTomb=function(a,t,e,o){var n=this;void 0===o&&(o=!1);var i=B.pzaNodeManager.getDownEffectNode();if(null!=i){var r=cc.v2(z.pzaGameState.map.getXPos(a)+z.pzaGameState.map.getMapOriPos().x+z.pzaGameState.map.getXInterval(a)/2,z.pzaGameState.map.getYPos(t)+.2*z.pzaGameState.map.getYInterval(t)+z.pzaGameState.map.getMapOriPos().y);v.pzaBundleObjectPool.requestInstantByUrl(b.pzaResourceUrl.TOMB,!1,function(p,l){if(null==p&&null!=l){l.setParent(i),l.setPosition(r);var s=l.getComponent(y.pzaTomb);s&&s.init(a,t,e,o);var c=""+a+t;n.TombMap.set(c,s)}else console.error(p)})}},t.prototype.removeTomb=function(a,t){var e=""+a+t,o=this.TombMap.get(e);o&&o.close(),this.TombMap.delete(e),this.TombSet.delete(e)},t.prototype.initCleanCar=function(){var a=this,t=z.pzaGameState.map.getMapRow(),e=B.pzaNodeManager.getPlantZombieNode();if(null!=e)for(var o=function(t){var o=window.pzaMapManager.getRowBlockType(t),n=1;if(o==r.BLANK)return"continue";if(o==r.ROOF){if(n=3,A.pzaLocalData.getGoodsCount(S.pzaShopItemType.ROOF_CART)<=0)return"continue"}else o==r.POND&&A.pzaLocalData.getGoodsCount(S.pzaShopItemType.POOL_CLEAN_CAR)>0&&(n=2);v.pzaBundleObjectPool.requestInstantByUrl(b.pzaResourceUrl.CLEANER_CAR,!1,function(o,i){if(null==o&&null!=i){i.setParent(e);var r=i.getComponent(m.pzaCleanCar);r&&r.init(n,t),a.CleanCar.add(r)}else console.error(o)})},n=0;n<t;n++)o(n)},t.prototype.recoverMap=function(a){this.recoverCleanCar(a),this.recoverTomb(a),this.recoverLadder(a),this.recoverDoomHole(a),this.recoverGoldHole(a)},t.prototype.recoverCleanCar=function(a){var t=this;if(null!=a&&null!=a.cleanCarState){var e=B.pzaNodeManager.getPlantZombieNode();if(null!=e)for(var o=function(o){var n=a.cleanCarState[o];if(null==n||0==n)return"continue";v.pzaBundleObjectPool.requestInstantByUrl(b.pzaResourceUrl.CLEANER_CAR,!1,function(a,i){if(null==a&&null!=i){i.setParent(e);var r=i.getComponent(m.pzaCleanCar);r&&r.recover(n,o),t.CleanCar.add(r)}else console.error(a)})},n=0;n<6;n++)o(n)}},t.prototype.recoverTomb=function(a){var t=this;null!=a&&null!=a.TombMap&&a.TombMap.forEach(function(a){var e=a.xIndex,o=a.yIndex,n=""+e+o;t.TombSet.add(n),t.createTomb(e,o,null,!0)})},t.prototype.recoverLadder=function(a){var t=this;null!=a&&null!=a.LadderMap&&a.LadderMap.forEach(function(a){var e=a.xIndex,o=a.yIndex;t.createLadder(e,o,null)})},t.prototype.recoverDoomHole=function(a){null!=a&&null!=a.DoomHoleMap&&a.DoomHoleMap.forEach(function(a){var t=a.xIndex,e=a.yIndex,o=z.pzaGameState.map.getXInterval(t)/2,n=z.pzaGameState.map.getYInterval(e)/3;5==z.pzaGameState.curChapter&&(n=z.pzaGameState.map.getYInterval(e)/6);var i=z.pzaGameState.map.getBlockLogicPos(t,e,o,n);f.pzaEffectManager.createDoomHoleEffect(i,t,e,!0,a.time,a.step)})},t.prototype.recoverGoldHole=function(a){null!=a&&null!=a.GoldHoleMap&&a.GoldHoleMap.forEach(function(a){var t=a.xIndex,e=a.yIndex,o=z.pzaGameState.map.getXInterval(t)/2,n=z.pzaGameState.map.getYInterval(e)/3,i=z.pzaGameState.map.getBlockLogicPos(t,e,o,n);f.pzaEffectManager.createGoldHoleEffect(i,t,e,!0,a.time,a.step)})},t.prototype.hasCleanCar=function(a){var t=!1;return this.CleanCar.forEach(function(e){null!=e&&e.yIndex==a&&(t=!0)}),t},t.prototype.getCleanCarState=function(){var a=[];return this.CleanCar.forEach(function(t){null==t||t.hasTrigger||(a[t.yIndex]=t.carType)}),a},t.prototype.createRoofPreEffect=function(){var a=this,t=B.pzaNodeManager.getUpBgNode();null!=t&&v.pzaBundleObjectPool.requestInstantByUrl(b.pzaResourceUrl.ROOF_PRE_EFFECT,!1,function(e,o){null==e&&null!=o?(o.setParent(t),a.roofPreBg=o.getComponent(u.pzaRoofPreEffect)):console.error(e)})},t.prototype.addIceGround=function(a){this.IceGroundSet.add(a)},t.prototype.removeIceGround=function(a){this.IceGroundSet.delete(a)},t.prototype.removeRowIceGround=function(a){this.IceGroundSet.forEach(function(t){null!=t&&t.yIndex==a&&t.close()})},t.prototype.removeColRowIceGround=function(a,t){this.IceGroundSet.forEach(function(e){null==e||e.xIndex!=a&&e.yIndex!=t||e.close()})},t.prototype.removeAllIceGround=function(){this.IceGroundSet.forEach(function(a){a&&a.close()})},t.prototype.getIceGround=function(a){var t=[];return this.IceGroundSet.forEach(function(e){null!=e&&e.yIndex==a&&t.push(e)}),t},t.prototype.getIceYCount=function(){var a=new Set;return window.pzaMapManager.IceGroundSet.forEach(function(t){null==t||t.xIndex<0||t.yIndex<0||a.has(t.yIndex)||a.add(t.yIndex)}),a.size},t.prototype.addDoomHole=function(a){this.DoomHoleSet.add(a)},t.prototype.removeDoomHole=function(a){this.DoomHoleSet.delete(a)},t.prototype.fogEnter=function(a){var t,e;if(z.pzaGameState.isCreativeTrad())return null==(t=M.pzaGameManager.getGame(z.pzaGameMode.CREATIVE_TRAD,g.pzaGameCreativeTrad).getConf(z.pzaGameState.curPart))||t.fog<=0?void(a&&a()):void f.pzaEffectManager.createFogEffect(t.fog,a);if(z.pzaGameState.isMiniMode())return null==(e=M.pzaGameManager.getGame(z.pzaGameMode.MINIGAME,E.pzaGameMiniGame).getConf(z.pzaGameState.curPart))||e.fog<=0?void(a&&a()):void f.pzaEffectManager.createFogEffect(e.fog,a);var o;null==(o=z.pzaGameState.isSurvival()?z.pzaGameState.survivalConfig:_.pzaGamePartConfig.getPartConfig(z.pzaGameState.curChapter,z.pzaGameState.curPart))||o.minFogColumn<=0?a&&a():f.pzaEffectManager.createFogEffect(o.minFogColumn,a)},t.prototype.blowFog=function(){null!=this.fog&&this.fog.blowFog()},t.prototype.planternScatterFog=function(a){null!=this.fog&&this.fog.addPlantern(a)},t.prototype.planternRemove=function(a){null!=this.fog&&this.fog.removePlantern(a)},t.prototype.removeFog=function(){null!=this.fog&&(this.fog.close(),this.fog=null)},t.prototype.createPreviewZombie=function(a,t){var e=this,o=10==t?N.pzaUtil.getRandomNum(16,17):N.pzaUtil.getRandomNum(9,10),n=1;1==a&&1==t&&(o=5),3==a&&5==t&&(o=N.pzaUtil.getRandomNum(13,14),n=D.pzaGameConfig.miniZombieScale);var i=null;if(z.pzaGameState.isSurvival()?(i=z.pzaGameState.survivalConfig,o=N.pzaUtil.getRandomNum(9,10),n=1):i=_.pzaGamePartConfig.getPartConfig(a,t),null!=i){var r=i.getPreviewZombies(o);if(null!=r){var s=[];5==a?(s.push(cc.v2(1450+N.pzaUtil.getRandomFloatNum(-25,25),75)),s.push(cc.v2(1550+N.pzaUtil.getRandomFloatNum(-25,25),75)),s.push(cc.v2(1450+N.pzaUtil.getRandomFloatNum(-25,25),125)),s.push(cc.v2(1550+N.pzaUtil.getRandomFloatNum(-25,25),125)),s.push(cc.v2(1450+N.pzaUtil.getRandomFloatNum(-25,25),175)),s.push(cc.v2(1550+N.pzaUtil.getRandomFloatNum(-25,25),175)),s.push(cc.v2(1450+N.pzaUtil.getRandomFloatNum(-25,25),225)),s.push(cc.v2(1550+N.pzaUtil.getRandomFloatNum(-25,25),225)),s.push(cc.v2(1450+N.pzaUtil.getRandomFloatNum(-25,25),275)),s.push(cc.v2(1550+N.pzaUtil.getRandomFloatNum(-25,25),275)),s.push(cc.v2(1450+N.pzaUtil.getRandomFloatNum(-25,25),325)),s.push(cc.v2(1550+N.pzaUtil.getRandomFloatNum(-25,25),325)),s.push(cc.v2(1450+N.pzaUtil.getRandomFloatNum(-25,25),375)),s.push(cc.v2(1550+N.pzaUtil.getRandomFloatNum(-25,25),375)),s.push(cc.v2(1650+N.pzaUtil.getRandomFloatNum(-25,25),75)),s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),75)),s.push(cc.v2(1650+N.pzaUtil.getRandomFloatNum(-25,25),125)),s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),125)),s.push(cc.v2(1650+N.pzaUtil.getRandomFloatNum(-25,25),175)),s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),175)),s.push(cc.v2(1650+N.pzaUtil.getRandomFloatNum(-25,25),225)),s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),225)),s.push(cc.v2(1650+N.pzaUtil.getRandomFloatNum(-25,25),275)),s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),275)),s.push(cc.v2(1650+N.pzaUtil.getRandomFloatNum(-25,25),325)),s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),325)),s.push(cc.v2(1650+N.pzaUtil.getRandomFloatNum(-25,25),375)),s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),375)),s.push(cc.v2(1650+N.pzaUtil.getRandomFloatNum(-25,25),410)),s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),410))):(s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),40)),s.push(cc.v2(1925+N.pzaUtil.getRandomFloatNum(-25,25),40)),s.push(cc.v2(2025+N.pzaUtil.getRandomFloatNum(-25,25),40)),s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),90)),s.push(cc.v2(1925+N.pzaUtil.getRandomFloatNum(-25,25),90)),s.push(cc.v2(2025+N.pzaUtil.getRandomFloatNum(-25,25),90)),s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),140)),s.push(cc.v2(1925+N.pzaUtil.getRandomFloatNum(-25,25),140)),s.push(cc.v2(2025+N.pzaUtil.getRandomFloatNum(-25,25),140)),s.push(cc.v2(1750+N.pzaUtil.getRandomFloatNum(-25,25),190)),s.push(cc.v2(1925+N.pzaUtil.getRandomFloatNum(-25,25),190)),s.push(cc.v2(2025+N.pzaUtil.getRandomFloatNum(-25,25),190)),s.push(cc.v2(1680+N.pzaUtil.getRandomFloatNum(-20,20),240)),s.push(cc.v2(1780+N.pzaUtil.getRandomFloatNum(-20,20),240)),s.push(cc.v2(1880+N.pzaUtil.getRandomFloatNum(-20,20),240)),s.push(cc.v2(1680+N.pzaUtil.getRandomFloatNum(-20,20),290)),s.push(cc.v2(1780+N.pzaUtil.getRandomFloatNum(-20,20),290)),s.push(cc.v2(1880+N.pzaUtil.getRandomFloatNum(-20,20),290)),s.push(cc.v2(1680+N.pzaUtil.getRandomFloatNum(-20,20),340)),s.push(cc.v2(1780+N.pzaUtil.getRandomFloatNum(-20,20),340)),s.push(cc.v2(1880+N.pzaUtil.getRandomFloatNum(-20,20),340)),s.push(cc.v2(1670+N.pzaUtil.getRandomFloatNum(-30,30),390)),s.push(cc.v2(1770+N.pzaUtil.getRandomFloatNum(-30,30),390)),s.push(cc.v2(1670+N.pzaUtil.getRandomFloatNum(-30,30),440)),s.push(cc.v2(1770+N.pzaUtil.getRandomFloatNum(-30,30),440)),s.push(cc.v2(1670+N.pzaUtil.getRandomFloatNum(-30,30),490)),s.push(cc.v2(1770+N.pzaUtil.getRandomFloatNum(-30,30),490)),s.push(cc.v2(1660+N.pzaUtil.getRandomFloatNum(-20,20),540)),s.push(cc.v2(1700+N.pzaUtil.getRandomFloatNum(-20,20),540))),s.sort(function(){return Math.random()-.5});for(var c=function(a,t){var o=b.pzaPreLoadManager.getZombieUrl(a);v.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(o,i){if(null==o&&null!=i){i.setParent(e.previewZombieNode),i.setPosition(t),i.zIndex=-t.y;var r=i.getComponent(h.pzaBaseZombie),l=new p.pzaBaseData(null,a);l.hp=1,l.logicPos=t,r&&r.preview(l,e.previewShadowNode,n),e.PreviewZombies.add(r)}else console.error(o)})},u=0;u<r.length;u++){var d=r[u],m=s[u];d==l.pzaZombieEnum.BUNGEE_ZOMBIE&&(m=5==a?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),c(d,m)}if((5==a||10==a)&&5==t&&!z.pzaGameState.isSurvival()){var f=[cc.v2(1400,550+100*Math.random()),cc.v2(1500,550+100*Math.random()),cc.v2(1600,550+100*Math.random())];for(u=0;u<3;u++)m=f[u],c(l.pzaZombieEnum.BUNGEE_ZOMBIE,m)}}}},t.prototype.createLadder=function(a,t,e){var o=this,n=B.pzaNodeManager.getPlantZombieNode();if(null!=n){var i=""+a+t;if(this.LadderMap.get(i))e&&e();else{var r=z.pzaGameState.map.getXInterval(a),p=z.pzaGameState.map.getYInterval(t)/3;5==z.pzaGameState.curChapter&&(p=z.pzaGameState.map.getYInterval(t)/6);var l=z.pzaGameState.map.getBlockLogicPos(a,t,r,p);v.pzaBundleObjectPool.requestInstantByUrl2(b.pzaResourceUrl.LADDER,function(i,r){if(null==i&&null!=r){r.setParent(n),r.setPosition(l);var p=r.getComponent(s.pzaLadder);p&&p.init(a,t,l);var c=""+a+t;o.LadderMap.set(c,p),e&&e()}else console.error(i)})}}},t.prototype.createPitchFork=function(){if((2!=z.pzaGameState.curChapter||5!=z.pzaGameState.curPart)&&5!=z.pzaGameState.curChapter&&A.pzaLocalData.consumeGoods(S.pzaShopItemType.PITCHFORK,1)){var a=7,t=[0,1,2,3,4];z.pzaGameState.isSurvival()||4!=z.pzaGameState.curChapter||5!=z.pzaGameState.curPart?3!=z.pzaGameState.curChapter&&4!=z.pzaGameState.curChapter||(t=[0,1,4,5]):a=5;var e=N.pzaUtil.getRandomValueFromArray(t),o=B.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=z.pzaGameState.map.getXInterval(a),i=z.pzaGameState.map.getBlockLogicPos(a,e,n,0);v.pzaBundleObjectPool.requestInstantByUrl(b.pzaResourceUrl.PITCHFORK,!1,function(a,t){if(null==a&&null!=t){t.setParent(o),t.setPosition(i),t.zIndex=10*-e;var n=t.getComponent(c.pzaPitchFork);n&&n.init(e)}else console.error(a)})}}},t.prototype.hasLadder=function(a,t){var e=""+a+t;return this.LadderMap.has(e)},t.prototype.removeLadder=function(a,t){var e=""+a+t,o=this.LadderMap.get(e);null!=o&&(o.close(),this.LadderMap.delete(e))},t.prototype.clearLadder=function(){this.LadderMap.forEach(function(a){a&&a.close()}),this.LadderMap.clear()},t.prototype.closePreviewZombie=function(){this.PreviewZombies.forEach(function(a){a&&a.previewClose()}),this.PreviewZombies.clear()},t.prototype.previewMap=function(a,t){var e=this;M.pzaGameManager.getCurrentGame().createPreviewZombie(this,z.pzaGameState.curChapter,z.pzaGameState.curPart),this.node.stopAllActions(),this.lockAction=!0;var o=this.mapSprite.node.width*(1-this.mapSprite.node.anchorX)-(1280+(cc.winSize.width-1280)/2);5!=z.pzaGameState.curChapter&&10!=z.pzaGameState.curChapter||(o-=250);var n=function(){e.node.runAction(cc.sequence(cc.delayTime(t?.1:1.5),cc.callFunc(function(){e.roofPreBg&&e.roofPreBg.hideTree()}),cc.moveTo(1.5,cc.v2(-o,0)).easing(cc.easeSineIn()),cc.callFunc(function(){e.lockAction=!1,a&&a()})))};if(!t)return n();I.pzaTipManager.showPreviewTip(z.pzaGameState.curChapter,z.pzaGameState.curPart,z.pzaGameState.gameMode,n)},t.prototype.cancelPreviewMap=function(a,t){var e=this;this.createPitchFork(),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.delayTime(a),cc.callFunc(function(){e.roofPreBg&&e.roofPreBg.showTree()}),cc.moveTo(1.5,cc.v2()),cc.delayTime(.3),cc.callFunc(function(){e.closePreviewZombie(),t&&t()})))},t.prototype.lookLawn=function(a){this.node.stopAllActions(),this.roofPreBg&&this.roofPreBg.showTree(),this.node.runAction(cc.sequence(cc.moveTo(1.5,cc.v2()),cc.delayTime(.3),cc.callFunc(function(){a&&a()})))},t.prototype.cancelLookLawn=function(a){this.node.stopAllActions();var t=this.mapSprite.node.width*(1-this.mapSprite.node.anchorX)-(1280+(cc.winSize.width-1280)/2);5==z.pzaGameState.curChapter&&(t-=250),this.roofPreBg&&this.roofPreBg.hideTree(),this.node.runAction(cc.sequence(cc.moveTo(1.5,cc.v2(-t,0)).easing(cc.easeSineIn()),cc.callFunc(function(){a&&a()})))},t.prototype.trampleShakeMap=function(){this.lockAction||(this.node.stopAllActions(),this.node.runAction(cc.repeat(cc.sequence(cc.moveTo(.05,cc.v2(-2,-5)),cc.moveTo(.05,cc.v2())),3)))},t.prototype.shakeMap=function(){this.lockAction||(this.node.stopAllActions(),this.node.runAction(cc.repeat(cc.sequence(cc.moveTo(.05,cc.v2(-2,5)),cc.moveTo(.05,cc.v2())),3)))},t.prototype.failShowInfactMap=function(a){void 0===a&&(a=null),this.node.stopAllActions();var t=this.mapSprite.node.width*this.mapSprite.node.anchorX-(cc.winSize.width-1280)/2;t=Math.max(0,t),this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){a&&a()}),cc.moveTo(1.5,cc.v2(t,0)),cc.callFunc(function(){z.pzaGameState.finishShowWinShowMap=!0})))},t.prototype.initMapPos=function(a){if(this.node.stopAllActions(),a){var t=this.mapSprite.node.width*this.mapSprite.node.anchorX-(cc.winSize.width-1280)/2;t=Math.max(0,t),this.node.setPosition(cc.v2(t,0))}else this.node.setPosition(cc.v2())},t.prototype.openBattleUI=function(){this.battleUpView.node.active=!0,this.battleDownView.node.active=!0},t.prototype.closeBattleUI=function(){this.battleUpView.node.active=!1,this.battleDownView.node.active=!1},t.prototype.showSunUI=function(){this.battleDownView.showSunUI(),z.pzaGameState.showSunUI=!0},t.prototype.hideSunUI=function(){this.battleDownView.hideSunUI(),z.pzaGameState.showSunUI=!1},t.prototype.showCoinUI=function(){this.battleUpView.showCoinNode()},t.prototype.blink=function(a){0==a?this.blinkAni.blinkGreen():1==a?this.blinkAni.blinkRed():2==a&&this.blinkAni.blinkWhite()},t.prototype.showRedLine=function(a){this.redLine.active=!0,this.redLine.x=-440+z.pzaGameState.map.getXPos(a)},t.prototype.showPauseBtn=function(){this.battleDownView.showPauseBtn()},t.prototype.openDoor=function(){var a=z.pzaGameState.curChapter,t=z.pzaGameState.curPart;if(!z.pzaGameState.isMiniMode()||3!=t&&4!=t||(a=5,t=10),z.pzaGameState.isZjMode()){var e=M.pzaGameManager.getGame(z.pzaGameMode.ZaJiao,T.pzaGameZJ).getRankConf(z.pzaGameState.curPart).map;if(e>5)return;a=e,t=5}this.preMapSprite.node.active=!0,O.pzaSpriteFrameManager.loadPreMap(a>5?a-5:a,t,this.preMapSprite),5!=a&&10!=a&&(this.inDoorSprite.node.active=!0,O.pzaSpriteFrameManager.loadInDoor(a>5?a-5:a,t,this.inDoorSprite)),1==a||6==a?(this.preMapSprite.node.setPosition(cc.v2(-729.6,-37.3)),this.inDoorSprite.node.setPosition(cc.v2(-597,-23))):2==a||7==a||(4==a||9==a)&&5==t?(this.preMapSprite.node.setPosition(cc.v2(-729.6,-37.3)),this.inDoorSprite.node.setPosition(cc.v2(-594,-42))):3==a||8==a?(this.preMapSprite.node.setPosition(cc.v2(-768.6,-35.3)),this.inDoorSprite.node.setPosition(cc.v2(-683,-24))):4==a||9==a?(this.preMapSprite.node.setPosition(cc.v2(-768.6,-35.3)),this.inDoorSprite.node.setPosition(cc.v2(-683,-24))):5!=a&&10!=a||this.preMapSprite.node.setPosition(cc.v2(-632,70))},i([k({displayName:"\u5730\u56fe",type:cc.Sprite})],t.prototype,"mapSprite",void 0),i([k({displayName:"\u5730\u56fe\u524d\u666f",type:cc.Sprite})],t.prototype,"preMapSprite",void 0),i([k({displayName:"\u5f00\u95e8",type:cc.Sprite})],t.prototype,"inDoorSprite",void 0),i([k({displayName:"\u8349\u4e1b",type:cc.Node})],t.prototype,"tussock",void 0),i([k({displayName:"\u5730\u56fe\u9884\u89c8\u50f5\u5c38\u8282\u70b9",type:cc.Node})],t.prototype,"previewZombieNode",void 0),i([k({displayName:"\u5730\u56fe\u9884\u89c8\u5f71\u5b50\u8282\u70b9",type:cc.Node})],t.prototype,"previewShadowNode",void 0),i([k({displayName:"\u5730\u56fe\u79cd\u690d\u8282\u70b9",type:cc.Node})],t.prototype,"plantTouchNode",void 0),i([k({displayName:"\u5730\u56fe\u4e0a\u5c42UI",type:C.pzaBattleUpView})],t.prototype,"battleUpView",void 0),i([k({displayName:"\u5730\u56fe\u4e0b\u5c42UI",type:P.pzaBattleDownView})],t.prototype,"battleDownView",void 0),i([k({displayName:"\u7ea2\u7ebf",type:cc.Node})],t.prototype,"redLine",void 0),i([k({displayName:"\u95ea\u5c4f\u52a8\u753b",type:d.pzaSpeedBlinkEffect})],t.prototype,"blinkAni",void 0),i([L],t)}(cc.Component);e.pzaMapManager=Z,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Effect/pzaLadder":"pzaLadder","../Battle/Effect/pzaPitchFork":"pzaPitchFork","../Battle/Effect/pzaRoofPreEffect":"pzaRoofPreEffect","../Battle/Effect/pzaSpeedBlinkEffect":"pzaSpeedBlinkEffect","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaCleanCar":"pzaCleanCar","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Battle/pzaTomb":"pzaTomb","../CreativeMode/pzaGameCreativeTrad":"pzaGameCreativeTrad","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../View/Battle/pzaBattleDownView":"pzaBattleDownView","../View/Battle/pzaBattleUpView":"pzaBattleUpView","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGameMiniGame":"pzaGameMiniGame","./pzaGamePartConfig":"pzaGamePartConfig","./pzaGameZJ":"pzaGameZJ","./pzaKnockMiniGame":"pzaKnockMiniGame","./pzaLocalData":"pzaLocalData","./pzaNodeManager":"pzaNodeManager","./pzaSoundManager":"pzaSoundManager","./pzaSpriteFrameManager":"pzaSpriteFrameManager","./pzaTipManager":"pzaTipManager","./pzaUtil":"pzaUtil"}],pzaMarigoldMammon:[function(a,t,e){"use strict";cc._RF.push(t,"6fa34XdKq1MRr2QURr0cQ7x","pzaMarigoldMammon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMarigoldMammon=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../Bullet/pzaGoldBullet"),c=a("../Data/pzaBuffData"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.shootNode=null,t.blinkTime=3,t.attackTime=5,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle1_eye",!1,o))};this.animation.playAnimation("idle1",!1,o),this.attackTime=5},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData&&this.attackTime>0&&(this.attackTime-=t,this.attackTime<=0)){var e=this.findAttackTarget();if(null!=e)return this.attack(e),void(this.attackTime=5);this.attackTime=.5}},t.prototype.attack=function(a){var t=this;if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var e=p.pzaNodeManager.getBulletNode();if(null!=e){var o=l.pzaUtil.getRandomIndexByWeight([60,30,10]),n=0,i=0;0==o?(n=10,i=100):1==o?(n=4,i=500):2==o&&(n=3,i=1e3);for(var c=0;c<n;c++)this.scheduleOnce(function(){if(t.baseData){var n=r.pzaGameCommonPool.requestInstant2(t.bulletPrefab);if(n){n.setParent(e);var p=t.shootNode.convertToWorldSpaceAR(cc.v2()),l=e.convertToNodeSpaceAR(p),c=n.getComponent(s.pzaGoldBullet);c&&c.bulletInit(t.baseData,o),c&&c.init(i,a,l,t.baseData.yIndex)}}},.1*c)}}},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(c.pzaBuffType.DIVE)&&!r.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(c.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m({displayName:"\u653b\u51fb\u4f4d\u7f6e",type:cc.Node})],t.prototype,"shootNode",void 0),i([h],t)}(u.pzaBasePlant);e.pzaMarigoldMammon=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaGoldBullet":"pzaGoldBullet","../Data/pzaBuffData":"pzaBuffData","./pzaBasePlant":"pzaBasePlant"}],pzaMarigold:[function(a,t,e){"use strict";cc._RF.push(t,"9267fAJVONNm59HBZWdHpJe","pzaMarigold");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMarigold=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaDropType"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};this.animation.playAnimation("idle",!1,o),this.baseData.plantData.atkInterval=24,c.pzaGameState.onlyShroomCofee=!1,c.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),!(null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,c.pzaGameState.maxMarigold<=0||window.pzazombieManager.lastWave||(this.baseData.plantData.atkInterval-=t,this.baseData.plantData.atkInterval>0)))){r.pzaSoundManager.playAudio("Marigold"),this.baseData.plantData.atkInterval=24;var e=null;Math.random()>.9?(e=l.pzaDropType.GOLD_COIN,c.pzaGameState.maxMarigold-=50):(e=l.pzaDropType.SILVER_COIN,c.pzaGameState.maxMarigold-=10),s.pzaEffectManager.createDropCoin(e,this.baseData.logicPos)}},i([h],t)}(u.pzaBasePlant));e.pzaMarigold=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaDropType":"pzaDropType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMelonBullet:[function(a,t,e){"use strict";cc._RF.push(t,"b5ebbvpGcdCgqK2pACZPlcL","pzaMelonBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMelonBullet=void 0;var r=a("../Data/pzaBuffData"),p=a("../Data/pzaZombieEnum"),l=a("../Plant/pzaAttackType"),s=a("../pzaGameState"),c=a("./pzaRotateBullet"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.colliderZombie=function(a){if(a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==p.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&!(a.zombieData&&a.zombieData.hypnosis||a.buffData.hasBuff(r.pzaBuffType.FLY)||a.buffData.hasBuff(r.pzaBuffType.INVINCIBLE)||a.buffData.hasBuff(r.pzaBuffType.DIVE))){var t=window.pzazombieManager.getZombie(a);if(null!=t){t.hurt(this.atk,null,l.pzaAttackType.THROW_ATK);for(var e=[],o=a.yIndex-1;o<=a.yIndex+1;o++)o<0||o>=s.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[o].forEach(function(t){null!=t&&t!=a&&t.xIndex==a.xIndex&&(t.buffData.hasBuff(r.pzaBuffType.FLY)||t.buffData.hasBuff(r.pzaBuffType.DIVE)||t.buffData.hasBuff(r.pzaBuffType.INVINCIBLE)||e.push(t))});e.forEach(function(a){var t=window.pzazombieManager.getZombie(a);null!=t&&t.hurt(26)}),this.close(),this.playHitEffect(a)}}},i([d],t)}(c.pzaRotateBullet));e.pzaMelonBullet=h,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","./pzaRotateBullet":"pzaRotateBullet"}],pzaMelonNut:[function(a,t,e){"use strict";cc._RF.push(t,"fefa2MFDzJDa5Qtr5EbQ0ws","pzaMelonNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMelonNut=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaPlantEnum"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t.atkTimes=2,t.aniCom=function(){if(t.atkTimes>0&&window.pzazombieManager.hasCanAttackZombie(t.baseData))return t.atkTimes--,l.pzaSoundManager.playAudio("melonimpact"),void t.animation.playAnimation("attack",!1,t.aniCom,function(){t.shoot()});t.atkTimes=2,t.blinkTime>0?t.animation.playAnimation("idle1",!1,t.aniCom):(t.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),t.animation.playAnimation("idle2",!1,t.aniCom))},t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),t.plantData.cate=u.pzaPlantCate.Nut,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),d.pzaGameState.isZombieMode())return this.attacking=!1,void this.animation.playAnimation("idle1",!0);this.aniCom(),d.pzaGameState.usePeaPlant=!0,d.pzaGameState.onlyShroomCofee=!1,d.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()&&this.aniCom()},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1);var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},t.prototype.hurt=function(t,e,o){a.prototype.hurt.call(this,t,e,o)},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaMelonNut=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMelonPult:[function(a,t,e){"use strict";cc._RF.push(t,"64a61e7cCtKGIFerGr5ltkK","pzaMelonPult");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMelonPult=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaThrowBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack"),d.pzaGameState.useThrowPlant=!0,d.pzaGameState.onlyShroomCofee=!1,d.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null!=e)return l.pzaSoundManager.playAudio("melonimpact"),void a.animation.playAnimation("attack",!1,t,function(){a.attack(e)},a.atkAniTime/a.atkInterval);a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};t()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(u.pzaBuffType.FLY)&&!o.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var s=cc.v2(l.x+this.baseData.logicPos.x+16,l.y+this.baseData.logicPos.y+57);i.setPosition(s);var u=i.getComponent(c.pzaThrowBullet);null!=u&&(u.init(!1,this.baseData.yIndex,this.baseData.atk,a,n),u.updateBulletAngel(90),u.hasSpatter=!0)}}}}}},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaMelonPult=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaMenuView:[function(a,t,e){"use strict";cc._RF.push(t,"2ba1170aStGH6sXVabAjldb","pzaMenuView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMenuView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameManager"),s=a("../../Common/pzaGameZJ"),c=a("../../Common/pzaLocalData"),u=a("../../Common/pzaNodeManager"),d=a("../../Common/pzaSoundManager"),h=a("../../Common/pzaUIManager"),m=a("../../Common/pzaUtil"),f=a("../../Common/pzaWorldEventManager"),z=a("../../Load/pzaPreLoadManager"),y=a("../../utils/pzaChannel"),g=a("../../utils/pzaResMgr"),v=a("../pzaHandbookView"),b=a("../pzaWarningView"),S=a("./pzaAssessView"),P=a("./pzaBattleDownView"),C=a("./pzaOptionView"),D=cc._decorator,M=D.ccclass,E=(D.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.backGameCall=null,t.needSaveGame=!1,t}return n(t,a),t.prototype.onEnable=function(){d.pzaSoundManager.playAudio("pause"),r.pzaGameState.isMenuShow=!0},t.prototype.onDisable=function(){r.pzaGameState.isMenuShow=!1},t.prototype.init=function(a,t){this.backGameCall=function(){d.pzaSoundManager.resumeMusic(),a&&a()},this.needSaveGame=t},t.prototype.clickAssess=function(){var a=this;h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.GAME_ASSESS_VIEW,function(t){var e=t&&t.getComponent(S.pzaAssessView);e&&e.bindBackGameCall(a.backGameCall),a.close()})},t.prototype.clickMainMenu=function(){var a=this;c.pzaLocalData.data.autoPickLeft=r.pzaGameState.autoPickLeft,c.pzaLocalData.addDirty("autoPickLeft"),this.needSaveGame?h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(b.pzaWarningView),o="\u4f60\u60f3\u8981\u56de\u5230\u4e3b\u83dc\u5355\u5417\uff1f\n\n\u4f60\u7684\u6e38\u620f\u5df2\u50a8\u5b58\u3002";"tt"==y.pzaChannel.instance().channel&&(r.pzaGameState.isZjMode()&&l.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,s.pzaGameZJ).getRankConf(r.pzaGameState.curPart).endLess||r.pzaGameState.gameMode==r.pzaGameMode.SUR_ENDLESS||r.pzaGameState.gameMode==r.pzaGameMode.VASE_ENDLESS||r.pzaGameState.gameMode==r.pzaGameMode.ZOMBIE_ENDLESS)&&(o="\u4f60\u60f3\u8981\u56de\u5230\u4e3b\u83dc\u5355\u5417\uff1f\n\n\u4f60\u7684\u6e38\u620f\u5df2\u50a8\u5b58\u3002\u6e05\u9664\u7f13\u5b58\u6216\u9000\u51fa\u8d26\u53f7\u4f1a\u5bfc\u81f4\u65e0\u5c3d\u5b58\u6863\u4e22\u5931\u3002"),e&&e.show(o,"\u79bb\u5f00","\u53d6\u6d88",function(){r.pzaGameState.midOut=!0,m.pzaUtil.changeGameSpeed(1),h.pzaUIManager.baseShowBoardUI(z.pzaResourceUrl.HOME_SELECT_VIEW,null),a.close()},null,"\u79bb\u5f00\u6e38\u620f\uff1f")}):(l.pzaGameManager.removeBattleUI(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),m.pzaUtil.changeGameSpeed(1),h.pzaUIManager.baseShowBoardUI(z.pzaResourceUrl.HOME_SELECT_VIEW,null),this.close())},t.prototype.clickOption=function(){var a=this;h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.GAME_OPTION_VIEW,function(t){var e=t&&t.getComponent(C.pzaOptionView);e&&e.init(!0,a.backGameCall),a.close()})},t.prototype.clickHandbook=function(){r.pzaGameState.isZjMode()||r.pzaGameState.isCreativeTrad()||r.pzaGameState.isCreativeVaseMode()?h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(v.pzaHandbookView);t&&t.zjInit()}):c.pzaLocalData.data.unlockBook?h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(v.pzaHandbookView);t&&t.jdInit()}):h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(b.pzaWarningView);t&&t.show("\u5728\u5192\u9669\u6a21\u5f0f\u4e2d\u5b8c\u6210\u66f4\u591a\u5173\u5361\n\u89e3\u9501\u5927\u56fe\u9274\u3002","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")})},t.prototype.clickBackGame=function(){this.backGameCall&&this.backGameCall(),this.close()},t.prototype.clickRestart=function(){var a=this;if(r.pzaGameState.gameMode==r.pzaGameMode.ZaJiao&&u.pzaNodeManager.getBattleUINode().getChildByName("BattleDownUI").getComponent(P.pzaBattleDownView).restartCountDownSec>0)h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(b.pzaWarningView);e&&e.show("\u6ce8\uff1a\u5012\u8ba1\u65f6\u7ed3\u675f\u524d\u91cd\u65b0\u5f00\u59cb\u4e0d\u6d88\u8017\u6311\u6218\u6b21\u6570","\u91cd\u65b0\u5f00\u59cb","\u5173\u95ed",function(){l.pzaGameManager.getCurrentGame().gameRestart(),a.close()},function(){},"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1)});else{var t=!1,e=!1,o=0;if(r.pzaGameState.isCreativeVaseMode()||r.pzaGameState.isCreativeTrad()||r.pzaGameState.isZjMode()){var n=l.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,s.pzaGameZJ).rankCount,i=g.pzaResMgr.instance().getConf("a24").length;g.pzaResMgr.instance().getConf("a25").length,r.pzaGameState.isZjMode()?o=r.pzaGameState.curPart:r.pzaGameState.isCreativeVaseMode()?o=r.pzaGameState.curPart+n:r.pzaGameState.isCreativeTrad()&&(o=r.pzaGameState.curPart+n+i),c.pzaLocalData.data.creativeItemState[o]<3?(t=!1,e=!1):c.pzaLocalData.data.creativeItemState[o]%2==1?(t=!1,e=!0):(t=!0,e=!1)}h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.WARNING_VIEW,function(n){var i=n&&n.getComponent(b.pzaWarningView);i&&i.show("\u4f60\u60f3\u8981\u518d\u6b21\u4ece\u5934\u8fdb\u884c\u8fd9\u4e00\u5173\u5361\u5417\uff1f","\u91cd\u65b0\u5f00\u59cb","\u53d6\u6d88",function(){var n=function(){window.pzaplantManager.clearAllPlant(),c.pzaLocalData.data.autoPickLeft=r.pzaGameState.autoPickLeft,c.pzaLocalData.addDirty("autoPickLeft"),l.pzaGameManager.removeBattleUI(),f.pzaWorldEventManager.triggerEvent(f.pzaWorldEventType.GAME_OVER,null),m.pzaUtil.changeGameSpeed(1),l.pzaGameManager.getCurrentGame().gameRestart(),(r.pzaGameState.isCreativeVaseMode()||r.pzaGameState.isCreativeTrad()||r.pzaGameState.isZjMode())&&(c.pzaLocalData.data.creativeItemState[o]++,c.pzaLocalData.addDirty("creativeItemState"))};t?y.pzaChannel.instance().showVideo({sucCall:n,failCall:function(){d.pzaSoundManager.resumeMusic(),a.backGameCall&&a.backGameCall()},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):e?"ks"==y.pzaChannel.instance().channel||"tt"==y.pzaChannel.instance().channel||"my"==y.pzaChannel.instance().channel?y.pzaChannel.instance().showVideo({sucCall:n,failCall:function(){d.pzaSoundManager.resumeMusic(),a.backGameCall&&a.backGameCall()},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):y.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"27"},function(){n()},function(){d.pzaSoundManager.resumeMusic(),a.backGameCall&&a.backGameCall()}):n(),a.close()},null,"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",t,e)})}},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([M],t)}(cc.Component));e.pzaMenuView=E,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameZJ":"pzaGameZJ","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzaResMgr":"pzaResMgr","../pzaHandbookView":"pzaHandbookView","../pzaWarningView":"pzaWarningView","./pzaAssessView":"pzaAssessView","./pzaBattleDownView":"pzaBattleDownView","./pzaOptionView":"pzaOptionView"}],pzaMiniGameConf:[function(a,t,e){"use strict";cc._RF.push(t,"5af1652cu9KdaPvDGA0qgi7","pzaMiniGameConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMiniGameConf=void 0;e.pzaMiniGameConf=function(a,t,e,o,n,i,r,p,l,s,c,u,d,h,m,f,z,y,g,v){void 0===i&&(i=1),void 0===r&&(r=0),this.id=0,this.name="",this.maxWave=0,this.waveZombieDensity=[],this.zombieTypes=[],this.magnification=1,this.flowerPotColumn=0,this.initialCards=[],this.plantCardsId=[],this.plantCardsWeight=[],this.lastBungeeMinColumn=0,this.lastBungeeZombie=0,this.initSun=0,this.bossHp=0,this.tombstone=0,this.tombstonemini=0,this.lastWaterWaveMinColumn=0,this.lastWaterWaveZombie=0,this.minWaterWave=0,this.fog=0,this.id=a,this.name=t,this.maxWave=e,this.waveZombieDensity=o,this.zombieTypes=n,this.magnification=i,this.flowerPotColumn=r,this.initialCards=p,this.plantCardsId=l,this.plantCardsWeight=s,this.lastBungeeMinColumn=c,this.lastBungeeZombie=u,this.initSun=d,this.bossHp=h,this.tombstone=m,this.tombstonemini=f,this.lastWaterWaveMinColumn=z,this.lastWaterWaveZombie=y,this.minWaterWave=g,this.fog=v},cc._RF.pop()},{}],pzaMiniGameItem:[function(a,t,e){"use strict";cc._RF.push(t,"d5afcbz1DpFm4ycnNaxYrDg","pzaMiniGameItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMiniGameItem=void 0;var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameConfig"),l=a("../Common/pzaGameManager"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaUIManager"),u=a("../Load/pzaPreLoadManager"),d=a("../utils/pzaChannel"),h=a("../utils/pzakc"),m=a("./pzaWarningView"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.trophyNode=null,t.lockNode=null,t.bg=null,t.starNode=null,t.starCount=null,t.starPro=null,t.blackCurtain=null,t.tokenCoinNode=null,t.trophySpriArr=[],t.imgBgSprArr=[],t.gameImg=null,t.gameName=null,t.newFlagNode=null,t.rewardUsedTip=null,t.gameMode=null,t.curPart=0,t.unlock=!1,t.startGameCall=null,t.refreshCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.on(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.off(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.bindData=function(a,t,e,o){this.newFlagNode.active=!1,this.rewardUsedTip.active=!1,7==t.id?a=r.pzaGameMode.MINIGAME_KNOCK:8==t.id&&(a=r.pzaGameMode.MINIGAME_SMALL),this.trophyNode.setPosition(cc.v2(-61,65)),this.gameMode=a,this.curPart=t.id,this.startGameCall=e,this.refreshCall=o,this.gameName.string=t.name+"",this.refreshItem();for(var n=0;n<s.pzaLocalData.data.miniGameNewFlagArr.length;n++)s.pzaLocalData.data.miniGameNewFlagArr[n][0]==this.curPart&&1==s.pzaLocalData.data.miniGameNewFlagArr[n][1]&&(this.newFlagNode.active=!0,this.newFlagNode.angle=0,cc.Tween.stopAllByTarget(this.newFlagNode),h.default.ani_JitterNode(this.newFlagNode,.4,15,3,!0));9==this.curPart&&(s.pzaLocalData.data.getTokenCoinCnt>=3?(this.rewardUsedTip.active=!0,this.tokenCoinNode.active=!1):(this.rewardUsedTip.active=!1,this.tokenCoinNode.active=!0))},t.prototype.refreshItem=function(){null==s.pzaLocalData.data.miniUnLockCnt[this.curPart-1]&&(s.pzaLocalData.data.miniUnLockCnt[this.curPart-1]=0),null==s.pzaLocalData.data.miniFirstPassArr[this.curPart-1]&&(s.pzaLocalData.data.miniFirstPassArr[this.curPart-1]=0),this.starCount.string=s.pzaLocalData.getAllStar()+"/"+p.pzaGameConfig.getAllPartStar(!1,!0),this.starPro.width=s.pzaLocalData.getAllStar()/p.pzaGameConfig.getAllPartStar(!1,!0)*150>=150?150:s.pzaLocalData.getAllStar()/p.pzaGameConfig.getAllPartStar(!1,!0)*150,this.unlock=s.pzaLocalData.getAllStar()>=p.pzaGameConfig.getAllPartStar(!1,!0),this.unlock||(this.unlock=s.pzaLocalData.data.miniUnLockCnt[this.curPart-1]>0),9==this.curPart&&(this.unlock=!0),this.starNode.active=!this.unlock,this.lockNode.active=!this.unlock,this.blackCurtain.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.bg.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.trophyNode.active=!1,s.pzaLocalData.data.miniFirstPassArr[this.curPart-1]&&(this.trophyNode.active=!0),this.curPart<=2?this.gameImg.spriteFrame=this.imgBgSprArr[0]:this.curPart<=4?this.gameImg.spriteFrame=this.imgBgSprArr[1]:this.curPart<=6?this.gameImg.spriteFrame=this.imgBgSprArr[2]:7==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[3]:8==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[4]:10==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[6]:11==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[7]:12==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[8]:13==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[9]:14==this.curPart?this.gameImg.spriteFrame=this.imgBgSprArr[10]:15==this.curPart&&(this.gameImg.spriteFrame=this.imgBgSprArr[11]),9==this.curPart?(this.trophyNode.active=!0,this.trophyNode.getComponent(cc.Sprite).spriteFrame=this.trophySpriArr[1],this.gameImg.spriteFrame=this.imgBgSprArr[5],this.tokenCoinNode.active=!0,this.starNode.active=!1,this.trophyNode.setPosition(cc.v2(-67,72))):(this.trophyNode.getComponent(cc.Sprite).spriteFrame=this.trophySpriArr[0],this.tokenCoinNode.active=!1,this.starNode.active=!0)},t.prototype.touchItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#939393"):cc.Color.fromHEX(cc.color(),"#606060")},t.prototype.cancelItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393")},t.prototype.clickItem=function(){var a=this;if(!r.pzaGameState.miniGameIsClickBack){for(var t=0;t<s.pzaLocalData.data.miniGameNewFlagArr.length;t++)s.pzaLocalData.data.miniGameNewFlagArr[t][0]==this.curPart&&1==s.pzaLocalData.data.miniGameNewFlagArr[t][1]&&(this.newFlagNode.active=!1,cc.Tween.stopAllByTarget(this.newFlagNode),s.pzaLocalData.data.miniGameNewFlagArr[t][1]=2,s.pzaLocalData.addDirty("miniGameNewFlagArr"));this.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"),9!=this.curPart?this.unlock?this.startGame():c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(m.pzaWarningView);e&&e.show("\u4f60\u9700\u8981\u5728\u5192\u9669\u6a21\u5f0f\u6536\u96c6\u661f\u7ea7\u8fbe\u5230"+p.pzaGameConfig.getAllPartStar(!1,!0)+"\n\u89e3\u9501\u672c\u5173\u5361\u3002","\u63d0\u524d\u89e3\u9501","\u8fd4\u56de",function(){var t=function(){s.pzaLocalData.data.miniUnLockCnt[a.curPart-1]++,s.pzaLocalData.data.miniClickFlag=!1,s.pzaLocalData.addDirty("miniUnLockCnt","miniClickFlag"),a.refreshCall&&a.refreshCall()};s.pzaLocalData.data.miniClickFlag?"ks"==d.pzaChannel.instance().channel||"my"==d.pzaChannel.instance().channel||"tt"==d.pzaChannel.instance().channel?d.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){a.node.color=cc.Color.fromHEX(cc.color(),"#939393")},endCall:function(){},posName:"\u8ff7\u4f60\u5c0f\u6e38\u620f\u63d0\u524d\u89e3\u9501",adsid:"24"}):d.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"24"},function(){t()}):d.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u8ff7\u4f60\u5c0f\u6e38\u620f\u63d0\u524d\u89e3\u9501",adsid:"24"})},function(){a.node.color=cc.Color.fromHEX(cc.color(),"#939393")},"\u672a\u89e3\u9501\uff01",!s.pzaLocalData.data.miniClickFlag,s.pzaLocalData.data.miniClickFlag)}):this.superChomperItem()}},t.prototype.superChomperItem=function(){var a=this,t=this.getGameScene();r.pzaGameState.midOut?r.pzaGameState.gameMode===this.gameMode&&r.pzaGameState.curPart===this.curPart?(this.startGameCall&&this.startGameCall(),console.log("recover"),l.pzaGameManager.getCurrentGame().gameRecover(t,this.curPart,null)):s.pzaLocalData.data.getTokenCntByAd?l.pzaGameManager.midOutStart(this.gameMode,t,this.curPart,this.startGameCall.bind(this)):s.pzaLocalData.data.getTokenCoinCnt<1?(s.pzaLocalData.data.getTokenCntByAd=!0,l.pzaGameManager.midOutStart(this.gameMode,t,this.curPart,this.startGameCall.bind(this)),s.pzaLocalData.addDirty("getTokenCntByAd")):s.pzaLocalData.data.getTokenCoinCnt<3?c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(e){var o=e&&e.getComponent(m.pzaWarningView);o&&o.show("\u672c\u5468\u5956\u52b1\u6b21\u65700/1\uff0c\u4e0b\u5468\u5237\u65b0\u6b21\u6570","\u7ee7\u7eed\u6311\u6218","\u589e\u52a0\u6b21\u6570",function(){s.pzaLocalData.data.getTokenCntByAd=!1,l.pzaGameManager.midOutStart(a.gameMode,t,a.curPart,a.startGameCall.bind(a)),s.pzaLocalData.addDirty("getTokenCntByAd")},function(){d.pzaChannel.instance().showVideo({sucCall:function(){s.pzaLocalData.data.getTokenCntByAd=!0,l.pzaGameManager.midOutStart(a.gameMode,t,a.curPart,a.startGameCall.bind(a)),s.pzaLocalData.addDirty("getTokenCntByAd")},failCall:function(){},endCall:function(){},posName:"\u8ff7\u4f60\u5c0f\u6e38\u620f\u63d0\u524d\u89e3\u9501",adsid:"24"})},"\u5956\u52b1\u6b21\u6570\u4e0d\u8db3",!1,!1,1)}):(s.pzaLocalData.data.getTokenCntByAd=!1,l.pzaGameManager.midOutStart(this.gameMode,t,this.curPart,this.startGameCall.bind(this))):s.pzaLocalData.data.getTokenCntByAd?(a.startGameCall&&a.startGameCall(),c.pzaUIManager.removeBoardUI(),l.pzaGameManager.preLoadAndStart(a.gameMode,t,a.curPart)):s.pzaLocalData.data.getTokenCoinCnt<1?(s.pzaLocalData.data.getTokenCntByAd=!0,a.startGameCall&&a.startGameCall(),c.pzaUIManager.removeBoardUI(),l.pzaGameManager.preLoadAndStart(a.gameMode,t,a.curPart),s.pzaLocalData.addDirty("getTokenCntByAd")):s.pzaLocalData.data.getTokenCoinCnt<3?c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(e){var o=e&&e.getComponent(m.pzaWarningView);o&&o.show("\u672c\u5468\u5956\u52b1\u6b21\u65700/1\uff0c\u4e0b\u5468\u5237\u65b0\u6b21\u6570","\u7ee7\u7eed\u6311\u6218","\u589e\u52a0\u6b21\u6570",function(){s.pzaLocalData.data.getTokenCntByAd=!1,a.startGameCall&&a.startGameCall(),c.pzaUIManager.removeBoardUI(),l.pzaGameManager.preLoadAndStart(a.gameMode,t,a.curPart),s.pzaLocalData.addDirty("getTokenCntByAd")},function(){d.pzaChannel.instance().showVideo({sucCall:function(){s.pzaLocalData.data.getTokenCntByAd=!0,a.startGameCall&&a.startGameCall(),c.pzaUIManager.removeBoardUI(),l.pzaGameManager.preLoadAndStart(a.gameMode,t,a.curPart),s.pzaLocalData.addDirty("getTokenCntByAd")},failCall:function(){},endCall:function(){},posName:"\u8ff7\u4f60\u5c0f\u6e38\u620f\u63d0\u524d\u89e3\u9501",adsid:"24"})},"\u5956\u52b1\u6b21\u6570\u4e0d\u8db3",!1,!1,1)}):(s.pzaLocalData.data.getTokenCntByAd=!1,a.startGameCall&&a.startGameCall(),c.pzaUIManager.removeBoardUI(),l.pzaGameManager.preLoadAndStart(a.gameMode,t,a.curPart),s.pzaLocalData.addDirty("getTokenCntByAd"))},t.prototype.startGame=function(){s.pzaLocalData.isWeekTwo=!1;var a=this.getGameScene();r.pzaGameState.midOut?r.pzaGameState.gameMode===this.gameMode&&r.pzaGameState.curPart===this.curPart?(this.startGameCall&&this.startGameCall(),console.log("recover"),l.pzaGameManager.getCurrentGame().gameRecover(a,this.curPart,null)):(console.log("midOutStart"),l.pzaGameManager.midOutStart(this.gameMode,a,this.curPart,this.startGameCall.bind(this))):(this.startGameCall&&this.startGameCall(),c.pzaUIManager.removeBoardUI(),l.pzaGameManager.preLoadAndStart(this.gameMode,a,this.curPart))},t.prototype.getGameScene=function(){var a=0;return 1==this.curPart?a=5:2==this.curPart?a=2:3==this.curPart?a=5:4==this.curPart?a=5:5==this.curPart?a=1:6==this.curPart?a=1:7==this.curPart?a=2:8==this.curPart?a=3:9==this.curPart?a=5:10==this.curPart?a=3:11==this.curPart?a=3:12==this.curPart?a=5:13==this.curPart?a=4:14==this.curPart?a=1:15==this.curPart&&(a=1),a},i([y({displayName:"\u5956\u676f",type:cc.Node})],t.prototype,"trophyNode",void 0),i([y({displayName:"\u9501",type:cc.Node})],t.prototype,"lockNode",void 0),i([y({displayName:"\u573a\u666f",type:cc.Node})],t.prototype,"bg",void 0),i([y({displayName:"\u661f\u7ea7\u8282\u70b9",type:cc.Node})],t.prototype,"starNode",void 0),i([y({displayName:"\u661f\u661f\u6570\u91cf",type:cc.Label})],t.prototype,"starCount",void 0),i([y({displayName:"\u661f\u661f\u8fdb\u5ea6\u6761",type:cc.Node})],t.prototype,"starPro",void 0),i([y({displayName:"\u9ed1\u5e55",type:cc.Node})],t.prototype,"blackCurtain",void 0),i([y({displayName:"\u4ee3\u5e01\u8282\u70b9",type:cc.Node})],t.prototype,"tokenCoinNode",void 0),i([y({displayName:"\u9650\u65f6\u6389\u843d\u548c\u5956\u676f\u7cbe\u7075",type:[cc.SpriteFrame]})],t.prototype,"trophySpriArr",void 0),i([y({displayName:"\u6e38\u620f\u80cc\u666f\u56fe\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"imgBgSprArr",void 0),i([y({displayName:"\u6e38\u620f\u80cc\u666f\u56fe",type:cc.Sprite})],t.prototype,"gameImg",void 0),i([y({displayName:"\u6e38\u620f\u540d\u5b57",type:cc.Label})],t.prototype,"gameName",void 0),i([y({displayName:"\u65b0\u6e38\u620f\u6807\u8bc6",type:cc.Node})],t.prototype,"newFlagNode",void 0),i([y({displayName:"\u5956\u52b1\u7528\u5c3d\u63d0\u793a",type:cc.Node})],t.prototype,"rewardUsedTip",void 0),i([z],t)}(cc.Component);e.pzaMiniGameItem=g,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaLocalData":"pzaLocalData","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaWarningView":"pzaWarningView"}],pzaMiniGameView:[function(a,t,e){"use strict";cc._RF.push(t,"597c4RGxHpOPqXq7zBKdhw8","pzaMiniGameView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMiniGameView=void 0;var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGameManager"),s=a("../Common/pzaGameMiniGame"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaSoundManager"),d=a("../Common/pzaUIManager"),h=a("../Common/pzaUtil"),m=a("../Load/pzaPreLoadManager"),f=a("../utils/pzaChannel"),z=a("./pzaCommonMask"),y=a("./pzaMiniGameItem"),g=a("./pzaRankView"),v=cc._decorator,b=v.ccclass,S=v.property,P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.coinCount=null,t.trophyCount=null,t.scrollView=null,t.partPre=null,t.itemContent=null,t.rankWidget=null,t.items=[],t}return n(t,a),t.prototype.onEnable=function(){var a=this;this.node.x=0,this.coinCount.string=h.pzaUtil.getCurrencyStr(c.pzaLocalData.data.coin),this.trophyCount.string=c.pzaLocalData.getMiniGameTrophy()+"/14";for(var t=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).confMap.size,e=0;e<t;e++){var o=p.pzaGameCommonPool.requestInstant(this.partPre);o.setParent(this.itemContent);var n=o.getComponent(y.pzaMiniGameItem),i=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).getConfById(e);n&&n.bindData(r.pzaGameMode.MINIGAME,i,function(){a.close()},this.refreshItem.bind(this)),this.items.push(n)}this.scrollView.node.stopAllActions(),this.scrollView.node.y=580,this.scrollView.node.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(.2,cc.v2(0,180)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){u.pzaSoundManager.playAudio("chapterdown")}))),this.scrollView.scrollToLeft(0),this.rankWidget.updateAlignment(),this.createWxUserInfoButton(!1,null),r.pzaGameState.miniGameIsClickBack=!1},t.prototype.refreshItem=function(){for(var a=l.pzaGameManager.getGame(r.pzaGameMode.MINIGAME,s.pzaGameMiniGame).confMap.size,t=0;t<a;t++){var e=this.items[t];e&&e.refreshItem()}},t.prototype.clickBack=function(){var a=this;u.pzaSoundManager.playSFX(),r.pzaGameState.miniGameIsClickBack=!0,this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.3,cc.v2(0,580)).easing(cc.easeCubicActionOut())),d.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.CHALLENGE_VIEW,function(){z.pzaCommonMask.showMask(),a.node.parent.stopAllActions(),a.node.parent.x=-1680,a.node.x=1680,a.node.parent.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){z.pzaCommonMask.hideMask(),a.close()})))})},t.prototype.clickRankBtn=function(){this.createWxUserInfoButton(!0,function(){d.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.RANK_VIEW,function(a){var t=a&&a.getComponent(g.pzaRankView);t&&t.init(0)})})},t.prototype.createWxUserInfoButton=function(a,t){var e=this,o=f.pzaChannel.instance().getChannel();"wx"!==o.channel||null!=c.pzaLocalData.data.playerNick&&null!=c.pzaLocalData.data.playerAvatar?t&&t():o.wxCheckPrivacySetting(function(n){var i=function(){var a=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width+e.rankWidget.node.x-60)/n.width*a.width,top:(.5*n.height-e.rankWidget.node.y-60)/n.height*a.height,width:120/n.width*a.width,height:120/n.height*a.height};o.getUserInfo(function(){null!=c.pzaLocalData.data.playerNick&&null!=c.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),t&&t())},i,!1)};if(n)return a?void o.wxPrivacyAuthorize(i,null):void(t&&t());i()},null)},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node);var a=f.pzaChannel.instance().getChannel();"wx"==a.channel&&a.destroyAuthorizationButton()},i([S({displayName:"\u91d1\u5e01",type:cc.Label})],t.prototype,"coinCount",void 0),i([S({displayName:"\u5956\u676f\u6570\u91cf",type:cc.Label})],t.prototype,"trophyCount",void 0),i([S({displayName:"scrollView",type:cc.ScrollView})],t.prototype,"scrollView",void 0),i([S({displayName:"\u7ae0\u8282\u9884\u8bbe",type:cc.Prefab})],t.prototype,"partPre",void 0),i([S({displayName:"\u7ae0\u8282\u5217\u8868\u7236\u8282\u70b9",type:cc.Node})],t.prototype,"itemContent",void 0),i([S({displayName:"\u6392\u884c\u699c\u6309\u94aewidget",type:cc.Widget})],t.prototype,"rankWidget",void 0),i([b],t)}(cc.Component);e.pzaMiniGameView=P,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameMiniGame":"pzaGameMiniGame","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaMiniGameItem":"pzaMiniGameItem","./pzaRankView":"pzaRankView"}],pzaMiniVaseConf:[function(a,t,e){"use strict";cc._RF.push(t,"1575aeEzhlHRYkKpWfMkcZ0","pzaMiniVaseConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMiniVaseConf=void 0;e.pzaMiniVaseConf=function(a){this.id=0,this.name="",this.plant="",this.zombie="",this.min=0,this.max=0,this.green=0,this.unlockChapter=0,this.unlockPart=0,this.endless=0,this.id=a.id,this.name=a.name||"",this.plant=a.plant||"",this.zombie=a.zombie||"",this.min=a.min||0,this.max=a.max||0,this.green=a.green||0;var t=a.unlock.trim().split("-");this.unlockChapter=parseInt(t[0]),this.unlockPart=parseInt(t[1]),this.endless=a.endless||0},cc._RF.pop()},{}],pzaMonthSignConf:[function(a,t,e){"use strict";cc._RF.push(t,"dc1c0j6pk5BXLVxMRzCb1Ny","pzaMonthSignConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaMonthSignConf=void 0;var o=a("../Common/pzaGamePropConfig");e.pzaMonthSignConf=function(a){this.day=0,this.name="",this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.recFun=0,this.iconIndex=0,this.day=a.iD,this.name=a.name||"",this.rewardType=a.rewardType,this.rewardCount=parseInt(a.rewardValue),this.recFun=a.aDClaim,this.iconIndex=a.icon?parseInt(a.icon):0},cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig"}],pzaMonthSignItem:[function(a,t,e){"use strict";cc._RF.push(t,"77020VSUuFDqYJdUgLxx3Zt","pzaMonthSignItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameConfig"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSpineController"),c=a("../Common/pzaSpriteFrameManager"),u=a("../utils/pzakc"),d=a("./pzaMonthSignMgr"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.hasGetNode=null,t.coinIcon=null,t.coinFrames=[],t.plantFrames=[],t.propAni=null,t.plantCardNode=null,t.plantCardBgSprArr=[],t.desc=null,t.propCount=null,t.canGetLight=null,t.daysLab=null,t}return n(t,a),t.prototype.refresh=function(a){if(this.hasGetNode.active=!1,this.canGetLight.active=!1,this.coinIcon.node.active=!1,this.propAni.node.active=!1,this.propCount.node.active=!1,this.plantCardNode.active=!1,this.daysLab.string="\u7b2c"+a+"\u5929",a<=l.pzaLocalData.data.monthSignDays)return this.hasGetNode.active=!0,void(this.desc.string="\u5df2\u9886\u53d6");l.pzaLocalData.data.isSignInMonth?u.default.getCurrentDay()-l.pzaLocalData.data.monthSignDays>0&&l.pzaLocalData.data.monthSignDays+1==a&&(this.canGetLight.active=!0):a==l.pzaLocalData.data.monthSignDays+1&&(this.canGetLight.active=!0);var t=d.default.instance().getConf(a);switch(this.desc.node.active=!0,t.rewardType){case p.pzaGamePropEnum.PROP_COIN:this.coinIcon.node.active=!0,this.desc.string=t.rewardCount+"",this.coinIcon.spriteFrame=this.coinFrames[t.iconIndex-1];break;case p.pzaGamePropEnum.PROP_CHERRY_BOMB:this.showProAni(t),this.propAni.playAnimation("3ui_1",!0);break;case p.pzaGamePropEnum.PROP_FREE_SUN:this.showProAni(t),this.propAni.playAnimation("1ui_1",!0);break;case p.pzaGamePropEnum.PROP_AUTO_PICK:this.showProAni(t),this.propAni.playAnimation("2ui_1",!0);break;case p.pzaGamePropEnum.PROP_PLANTE:this.plantCardNode.active=!0,this.showPlant(t,p.pzaGamePropEnum.PROP_PLANTE);break;case p.pzaGamePropEnum.PROP_FERTILIZER:this.showPlant(t,p.pzaGamePropEnum.PROP_FERTILIZER);break;case p.pzaGamePropEnum.PROP_PESTICIDE:this.showPlant(t,p.pzaGamePropEnum.PROP_PESTICIDE)}},t.prototype.showProAni=function(a){this.propAni.node.active=!0,this.propCount.node.active=!0,this.desc.string=a.name,this.propCount.string="X"+a.rewardCount},t.prototype.showPlant=function(a,t){if(this.coinIcon.node.active=!0,this.propCount.node.active=!0,this.desc.string=a.name,a.rewardType==p.pzaGamePropEnum.PROP_PLANTE){this.propCount.string="";var e=r.pzaGameConfig.getPlantConfig(a.rewardCount);e&&(this.plantCardNode.getComponent(cc.Sprite).spriteFrame=this.plantCardBgSprArr[e.rareLevel-1]),c.pzaSpriteFrameManager.loadPlantCard(a.rewardCount,this.coinIcon)}else this.propCount.string="X"+a.rewardCount,this.coinIcon.spriteFrame=this.plantFrames[t-5]},i([f({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],t.prototype,"hasGetNode",void 0),i([f({displayName:"\u91d1\u5e01\u56fe\u6807",type:cc.Sprite})],t.prototype,"coinIcon",void 0),i([f({displayName:"\u91d1\u5e01\u56fe",type:[cc.SpriteFrame]})],t.prototype,"coinFrames",void 0),i([f({displayName:"\u690d\u7269\u80a5\u6599\u6740\u866b\u56fe",type:[cc.SpriteFrame]})],t.prototype,"plantFrames",void 0),i([f({displayName:"\u9053\u5177\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"propAni",void 0),i([f({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"plantCardNode",void 0),i([f({displayName:"\u690d\u7269\u5361\u7247\u7b49\u7ea7\u80cc\u666f\u56fe",type:[cc.SpriteFrame]})],t.prototype,"plantCardBgSprArr",void 0),i([f({displayName:"\u63cf\u8ff0",type:cc.Label})],t.prototype,"desc",void 0),i([f({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],t.prototype,"propCount",void 0),i([f({displayName:"\u53ef\u4ee5\u9886\u53d6\u6807\u8bc6\u6846",type:cc.Node})],t.prototype,"canGetLight",void 0),i([f({displayName:"\u5f53\u524d\u5929\u6570",type:cc.Label})],t.prototype,"daysLab",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../utils/pzakc":"pzakc","./pzaMonthSignMgr":"pzaMonthSignMgr"}],pzaMonthSignMgr:[function(a,t,e){"use strict";cc._RF.push(t,"c2d87H04CxNiJ5zi/DIh4PN","pzaMonthSignMgr");var o=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var n=a("./pzaMonthSignConf"),i=cc._decorator,r=i.ccclass,p=(i.property,function(){function a(){this.monthSignMap=new Map,this.monthSignNewMap=new Map,this.useNewData=!1}var t;return t=a,a.instance=function(){return t._me||(t._me=new t),t._me},a.prototype.init=function(a){for(var t=0;t<a.length;t++){var e=new n.pzaMonthSignConf(a[t]);this.monthSignMap.set(e.day,e)}},a.prototype.resetInit=function(a){for(var t=0;t<a.length;t++){var e=new n.pzaMonthSignConf(a[t]);this.monthSignNewMap.set(e.day,e)}},a.prototype.getConf=function(a){return this.useNewData?this.monthSignNewMap.get(a):this.monthSignMap.get(a)},a._me=null,t=o([r],a)}());e.default=p,cc._RF.pop()},{"./pzaMonthSignConf":"pzaMonthSignConf"}],pzaMonthSignView:[function(a,t,e){"use strict";cc._RF.push(t,"0aec2nHXplDK5gwBP65hwLM","pzaMonthSignView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaRewardManager"),c=a("../Common/pzaSoundManager"),u=a("../utils/pzaChannel"),d=a("../utils/pzakc"),h=a("./pzaMonthSignItem"),m=a("./pzaMonthSignMgr"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.content=null,t.item1Pre=null,t.item2Pre=null,t.video=null,t.desc=null,t.tip=null,t.canClick=!1,t.list=[],t}return n(t,a),t.prototype.onEnable=function(){this.list=[],this.canClick=!1,this.tip.node.active=!1,this.content.removeAllChildren(),this.init(),this.refreshUi()},t.prototype.init=function(){for(var a=d.default.getMonthDays(),t=1;t<=a;t++)this.createMonthItem(t);this.content.height=a<=28?514:645},t.prototype.refreshUi=function(){if(this.tip.node.active=!1,this.video.active=!1,l.pzaLocalData.data.isSignInMonth)if(d.default.getCurrentDay()-l.pzaLocalData.data.monthSignDays>0){this.canClick=!0,this.desc.string="\u8865\u7b7e",this.tip.node.active=!0,this.video.active=!0;var a=d.default.getCurrentDay()-l.pzaLocalData.data.monthSignDays,t=l.pzaLocalData.data.retroSignDays;this.tip.string="\u672c\u6708\u53ef\u8865\u7b7e<color=#ffe659>"+a+"</c>\u5929\u5df2\u8865\u7b7e<color=#ffe659>"+t+"</c>\u5929"}else this.canClick=!1,this.desc.string="\u5df2\u9886\u53d6";else this.canClick=!0,this.desc.string="\u7b7e\u5230"},t.prototype.createMonthItem=function(a){var t;t=a%7==0?this.item2Pre:this.item1Pre;var e=r.pzaGameCommonPool.requestInstant(t,!1);if(null!=e){e.setParent(this.content);var o=e.getComponent(h.default);null!=o&&(o.refresh(a),this.list.push(o))}},t.prototype.start=function(){},t.prototype.close=function(){c.pzaSoundManager.playSFX(),r.pzaGameCommonPool.returnInstant(this.node)},t.prototype.clickRec=function(){var a=this;if(this.canClick){c.pzaSoundManager.playSFX();var t=function(){var t=m.default.instance().getConf(l.pzaLocalData.data.monthSignDays+1);if(null!=t){l.pzaLocalData.data.monthSignDays++,l.pzaLocalData.data.isSignInMonth=!0,l.pzaLocalData.addDirty("monthSignDays","isSignInMonth");var e=new p.pzaRewardPropData(t.rewardType,t.rewardCount);s.pzaRewardManager.recieveRewards([e],function(){}),a.close()}};this.video.active?u.pzaChannel.instance().showVideo({sucCall:function(){l.pzaLocalData.data.retroSignDays++,l.pzaLocalData.addDirty("retroSignDays"),t()},failCall:function(){},endCall:function(){},posName:"\u5468\u7b7e\u5230\u8865\u7b7e",adsid:"26"}):t()}else console.log("can not click")},t.show=function(){},i([y({displayName:"\u5bb9\u5668",type:cc.Node})],t.prototype,"content",void 0),i([y({displayName:"\u5b50\u9884\u8bbe1",type:cc.Prefab})],t.prototype,"item1Pre",void 0),i([y({displayName:"\u5b50\u9884\u8bbe2",type:cc.Prefab})],t.prototype,"item2Pre",void 0),i([y({displayName:"\u89c6\u9891\u6807\u8bc6",type:cc.Node})],t.prototype,"video",void 0),i([y({displayName:"\u63cf\u8ff0",type:cc.Label})],t.prototype,"desc",void 0),i([y({displayName:"\u8865\u7b7e\u63d0\u793a",type:cc.RichText})],t.prototype,"tip",void 0),i([z],t)}(cc.Component);e.default=g,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaMonthSignItem":"pzaMonthSignItem","./pzaMonthSignMgr":"pzaMonthSignMgr"}],pzaNewPlantView:[function(a,t,e){"use strict";cc._RF.push(t,"f9afcKJigNB0qIcbc5rtBY4","pzaNewPlantView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNewPlantView=void 0;var r=a("../../Battle/Data/pzaDropType"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaLocalData"),u=a("../../Common/pzaSoundManager"),d=a("../../Common/pzaSpriteFrameManager"),h=a("../../Common/pzaUIManager"),m=a("../../Common/pzaWorldEventManager"),f=a("../../Load/pzaPreLoadManager"),z=a("../../utils/pzaChannel"),y=a("../pzaHandbookView"),g=cc._decorator,v=g.ccclass,b=g.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tittle=null,t.plantName=null,t.plantDesc=null,t.cardBoard=null,t.cardBoardFrames=[],t.cardIcon=null,t.priceLabel=null,t.shovel=null,t.handbookNode=null,t.baconic=null,t.taco=null,t.sprinkler=null,t.trophy=null,t.btnTxt=null,t.dropType=null,t}return n(t,a),t.prototype.showView=function(a,t){if(u.pzaSoundManager.playBgm(u.pzaBGMName.NEWPLANT_BGM),this.dropType=a,this.shovel.active=a==r.pzaDropType.SHOVEL,this.handbookNode.active=a==r.pzaDropType.HAND_BOOK,this.baconic.active=a==r.pzaDropType.BACONIC,this.taco.active=a==r.pzaDropType.TACO,this.sprinkler.active=a==r.pzaDropType.SPRINKLER,this.trophy.active=a>=r.pzaDropType.SURVIVAL_TROPHY,a==r.pzaDropType.SHOVEL)return this.cardBoard.node.active=!1,this.plantName.string="\u94c1\u94f2",this.plantDesc.string="\u8ba9\u4f60\u6316\u51fa\u4e00\u682a\u690d\u7269\u4ee5\u4fbf\u7ed9\u5176\u4ed6\u690d\u7269\u817e\u51fa\u7a7a\u95f4",this.tittle.string="\u4f60\u5f97\u5230\u4e00\u628a\u94c1\u94f2\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.HAND_BOOK)return this.cardBoard.node.active=!1,this.plantName.string="\u5927\u56fe\u9274",this.plantDesc.string="\u8bb0\u8f7d\u4f60\u9047\u5230\u7684\u690d\u7269\u548c\u50f5\u5c38",this.tittle.string="\u4f60\u53d1\u73b0\u4e86\u5927\u56fe\u9274\uff01",void(this.btnTxt.string="\u67e5\u770b\u56fe\u9274");if(a==r.pzaDropType.BACONIC)return this.cardBoard.node.active=!1,this.plantName.string="\u57f9\u6839",this.plantDesc.string="\u53ef\u57f9\u6839\u53c8\u80fd\u62ff\u6765\u505a\u4ec0\u4e48\u5462?",this.tittle.string="\u4f60\u53d1\u73b0\u4e86\u4e00\u4e2a\u57f9\u6839\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.TACO)return this.cardBoard.node.active=!1,this.plantName.string="\u7389\u7c73\u5377",this.plantDesc.string="\u8fd9\u4e2a\u7389\u7c73\u5377\u5230\u5e95\u80fd\u505a\u4ec0\u4e48?",this.tittle.string="\u4f60\u53d1\u73b0\u4e86\u4e00\u4e2a\u7389\u7c73\u5377\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.SPRINKLER)return this.cardBoard.node.active=!1,this.plantName.string="\u6d12\u6c34\u58f6",this.plantDesc.string="\u73b0\u5728\u4f60\u53ef\u4ee5\u73a9\u82b1\u56ed\u6a21\u5f0f\u4e86\uff01",this.tittle.string="\u4f60\u53d1\u73b0\u4e86\u4e00\u4e2a\u6d12\u6c34\u58f6\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.SURVIVAL_TROPHY)return this.cardBoard.node.active=!1,this.plantName.string="\u5956\u676f",c.pzaLocalData.data.survivalPassChapter>=5?this.plantDesc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\n\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.plantDesc.string="\u4f60\u89e3\u9501\u4e86\u65b0\u7684\u751f\u5b58\u6a21\u5f0f",this.tittle.string="\u4f60\u5f97\u5230\u4e86\u4e00\u5ea7\u5956\u676f\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.ZOMBIE_TROPHY)return this.cardBoard.node.active=!1,this.plantName.string="\u5956\u676f",c.pzaLocalData.getZombieTrophy()>=9?this.plantDesc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\n\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.plantDesc.string="\u7ee7\u7eed\u6536\u96c6\u5956\u676f\u5427\uff01",this.tittle.string="\u4f60\u5f97\u5230\u4e86\u4e00\u5ea7\u5956\u676f\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.VASE_TROPHY)return this.cardBoard.node.active=!1,this.plantName.string="\u5956\u676f",c.pzaLocalData.getVaseTrophy()>=c.pzaLocalData.vaseAllTrophy?this.plantDesc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\n\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.plantDesc.string="\u7ee7\u7eed\u6536\u96c6\u5956\u676f\u5427\uff01",this.tittle.string="\u4f60\u5f97\u5230\u4e86\u4e00\u5ea7\u5956\u676f\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.MINIGAME_TROPHY)return this.cardBoard.node.active=!1,this.plantName.string="\u5956\u676f",c.pzaLocalData.getMiniGameTrophy()>=14?this.plantDesc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\n\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.plantDesc.string="\u7ee7\u7eed\u6536\u96c6\u5956\u676f\u5427\uff01",this.tittle.string="\u4f60\u5f97\u5230\u4e86\u4e00\u5ea7\u5956\u676f\uff01",void(this.btnTxt.string="\u7ee7\u7eed");if(a==r.pzaDropType.CREATIVE_VASE_TROPHY||a==r.pzaDropType.CREATIVE_TRAD_TROPHY||a==r.pzaDropType.ZAJIAO_TROPHY){this.cardBoard.node.active=!1,this.plantName.string="\u5956\u676f";var e=6;return c.pzaLocalData.isNoZj||(e=8),c.pzaLocalData.getCreativeAllTrophy()>=e?this.plantDesc.string="\u563b\uff0c\u4f60\u5df2\u7ecf\u83b7\u5f97\u4e86\n\u6240\u6709\u7684\u5956\u676f\u4e86\u8036\uff01":this.plantDesc.string="\u7ee7\u7eed\u6536\u96c6\u5956\u676f\u5427\uff01",this.tittle.string="\u4f60\u5f97\u5230\u4e86\u4e00\u5ea7\u5956\u676f\uff01",void(this.btnTxt.string="\u7ee7\u7eed")}this.cardBoard.node.active=!0,this.tittle.string="\u4f60\u5f97\u5230\u4e00\u682a\u65b0\u690d\u7269\uff01",this.btnTxt.string="\u7ee7\u7eed";var o=l.pzaGameConfig.getPlantConfig(t);null!=o&&(this.plantName.string=o.name,this.cardBoard.spriteFrame=this.cardBoardFrames[o.rareLevel],this.priceLabel.string=""+o.price);var n=l.pzaGameConfig.PlantDescMap.get(t);null!=n&&(this.plantDesc.string=n),d.pzaSpriteFrameManager.loadPlantCard(t,this.cardIcon)},t.prototype.clickNext=function(){this.close(),this.dropType==r.pzaDropType.HAND_BOOK?(s.pzaGameManager.removeBattleUI(),m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_OVER,null),h.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(y.pzaHandbookView);t&&t.jdInit(),t&&t.bindCloseCall(function(){s.pzaGameManager.getCurrentGame().partWin()})})):s.pzaGameManager.getCurrentGame().partWin()},t.prototype.clickShare=function(){z.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:""},function(){console.log("newPlantView share sucess")})},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([b({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"tittle",void 0),i([b({displayName:"\u690d\u7269\u540d\u79f0",type:cc.Label})],t.prototype,"plantName",void 0),i([b({displayName:"\u690d\u7269\u4ecb\u7ecd",type:cc.Label})],t.prototype,"plantDesc",void 0),i([b({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([b({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([b({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([b({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],t.prototype,"priceLabel",void 0),i([b({displayName:"\u94f2\u5b50",type:cc.Node})],t.prototype,"shovel",void 0),i([b({displayName:"\u56fe\u9274",type:cc.Node})],t.prototype,"handbookNode",void 0),i([b({displayName:"\u57f9\u6839",type:cc.Node})],t.prototype,"baconic",void 0),i([b({displayName:"\u7389\u7c73\u5377",type:cc.Node})],t.prototype,"taco",void 0),i([b({displayName:"\u6c34\u58f6",type:cc.Node})],t.prototype,"sprinkler",void 0),i([b({displayName:"\u5956\u676f",type:cc.Node})],t.prototype,"trophy",void 0),i([b({displayName:"\u6309\u94ae\u6587\u6848",type:cc.Label})],t.prototype,"btnTxt",void 0),i([v],t)}(cc.Component);e.pzaNewPlantView=S,cc._RF.pop()},{"../../Battle/Data/pzaDropType":"pzaDropType","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaHandbookView":"pzaHandbookView"}],pzaNewZombieView:[function(a,t,e){"use strict";cc._RF.push(t,"065d6jtpVlEi5hTXXQxVRdB","pzaNewZombieView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNewZombieView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaWorldEventManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.zombieName=null,t.zombieDesc=null,t.maskNode=null,t}return n(t,a),t.prototype.showNewZombie=function(a,t){var e=l.pzaGameConfig.getZombieConfig(a);if(null!=t&&null!=e){this.zombieName.string=e.name;var o=l.pzaGameConfig.ZombieDescMap.get(a);null!=o&&(this.zombieDesc.string=o),this.node.getComponent(cc.Widget).updateAlignment();var n=this.node.convertToNodeSpaceAR(t);this.maskNode.setPosition(cc.v2(n.x,n.y+100))}else this.close()},t.prototype.clickConfirm=function(){this.close()},t.prototype.close=function(){r.pzaGameState.gamePause=!1,s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.GAME_RESUME,null),p.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u50f5\u5c38\u540d\u79f0",type:cc.Label})],t.prototype,"zombieName",void 0),i([d({displayName:"\u50f5\u5c38\u4ecb\u7ecd",type:cc.Label})],t.prototype,"zombieDesc",void 0),i([d({displayName:"\u900f\u660e\u906e\u7f69",type:cc.Node})],t.prototype,"maskNode",void 0),i([u],t)}(cc.Component);e.pzaNewZombieView=h,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaNewspaperZombie:[function(a,t,e){"use strict";cc._RF.push(t,"d1e17eiULxA2714SgSPTN3g","pzaNewspaperZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNewspaperZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaGameState"),u=a("./pzaBaseZombie"),d=a("./pzaZombieState"),h=a("./pzaZombieSlot"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=h.pzaZombieSlotType.newspaper,t.directThrowHurt=!0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[h.pzaZombieSlotType.butter,new h.pzaZombieSlot(this.animation.spineAnimation,h.pzaZombieSlotType.butter).addState(new h.pzaZombieSlotAtt(1,h.pzaZombieSlotType.butter,-29.17,73.49))],[h.pzaZombieSlotType.newspaper,new h.pzaZombieSlot(this.animation.spineAnimation,h.pzaZombieSlotType.newspaper).addState(new h.pzaZombieSlotAtt(1,this.equip1Slot+"1",-14.96,-64.36,-162.85)).addState(new h.pzaZombieSlotAtt(2,this.equip1Slot+"2",-14.96,-64.36,-162.85)).addState(new h.pzaZombieSlotAtt(3,this.equip1Slot+"3",-20.23,-47.02,-162.85))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE_PEA,-1)),this.baseData.zombieData.hurtCate=s.pzaZombieHurtCate.PENETRATE_HURT},t.prototype.equipDeath=function(){var a=this;this.equipHurtState=s.pzaHurtStateEnum.DEAD,this.hasEquip=!1,null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.zombieData.moveSpd=0),this.isPlayEquipDeath=!0,this.animation.playAnimation("drop",!1,function(){if(a.updateEquipState(a.equip1Slot,0),a.changeSkin("zombie2"),null!=a.baseData&&null!=a.baseData.zombieData){var t=r.pzaGameConfig.getZombieSpecialSpeed(a.baseData.zombieData.zombieType);a.baseData.zombieData.moveSpd=c.pzaGameState.map.getBlockWidth()/t}a.playMoveAnimation(),p.pzaSoundManager.playAudio("newspaper_angel"),a.isPlayEquipDeath=!1}),p.pzaSoundManager.playAudio("newspaper_fall"),this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_ICE_PEA)},t.prototype.playMoveAnimation=function(){this.zombieState=d.pzaZombieState.MOVE;var a=this.hasEquip?"walk":"walk2";this.animation.playAnimation(a,!0,null,null,1)},i([f],t)}(u.pzaBaseZombie));e.pzaNewspaperZombie=z,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaNightWear:[function(a,t,e){"use strict";cc._RF.push(t,"4ed09qT8P1LQqNgFaiLUBYL","pzaNightWear");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNightWear=void 0;var r=a("../Data/pzaBuffData"),p=a("./pzaBaseZombie"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=l.pzaZombieSlotType.hat_night,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[l.pzaZombieSlotType.butter,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.butter).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[l.pzaZombieSlotType.hat_night,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.hat_night).addState(new l.pzaZombieSlotAtt(1,this.equip1Slot+"1",25.41,28.72,-67.62)).addState(new l.pzaZombieSlotAtt(2,this.equip1Slot+"2",25.41,28.72,-67.62)).addState(new l.pzaZombieSlotAtt(3,this.equip1Slot+"3",24.95,28.53,-67.62))],[l.pzaZombieSlotType.hat_night_1,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.hat_night_1).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.hat_night_1,14.42,-4.29,53.23))],[l.pzaZombieSlotType.hat_night_2,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.hat_night_2).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.hat_night_2,77.91,13.14,54.11))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.IMM_ICE,-1))},t.prototype.equipDeath=function(t){a.prototype.equipDeath.call(this,t),this.updateEquipState(l.pzaZombieSlotType.hat_night_1,0),this.updateEquipState(l.pzaZombieSlotType.hat_night_2,0)},t.prototype.equipIntact=function(){a.prototype.equipIntact.call(this),this.updateEquipState(l.pzaZombieSlotType.hat_night_1,1),this.updateEquipState(l.pzaZombieSlotType.hat_night_2,1)},i([c],t)}(p.pzaBaseZombie));e.pzaNightWear=u,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaNodeManager:[function(a,t,e){"use strict";cc._RF.push(t,"df721QfqtJH6ISch33dy7N5","pzaNodeManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNodeManager=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bgNode=null,t.grassNode=null,t.battleUINode=null,t.downEffectNode=null,t.plantZombieNode=null,t.bulletNode=null,t.upEffectNode=null,t.upBgNode=null,t.cards=null,t}var e;return n(t,a),e=t,t.prototype.onLoad=function(){e.instance=this},t.getCardsNode=function(){return null==this.instance?null:this.instance.cards},t.getGrassNode=function(){return null==this.instance?null:this.instance.grassNode},t.getPlantZombieNode=function(){return null==this.instance?null:this.instance.plantZombieNode},t.getBulletNode=function(){return null==this.instance?null:this.instance.bulletNode},t.getDownEffectNode=function(){return null==this.instance?null:this.instance.downEffectNode},t.getUpEffectNode=function(){return null==this.instance?null:this.instance.upEffectNode},t.getUpBgNode=function(){return null==this.instance?null:this.instance.upBgNode},t.getBattleUINode=function(){return null==this.instance?null:this.instance.battleUINode},t.instance=null,i([l({displayName:"\u80cc\u666f\u8282\u70b9",type:cc.Node})],t.prototype,"bgNode",void 0),i([l({displayName:"\u8349\u5730\u8282\u70b9",type:cc.Node})],t.prototype,"grassNode",void 0),i([l({displayName:"\u6218\u6597UI\u8282\u70b9",type:cc.Node})],t.prototype,"battleUINode",void 0),i([l({displayName:"\u4e0b\u5c42\u7279\u6548\u8282\u70b9",type:cc.Node})],t.prototype,"downEffectNode",void 0),i([l({displayName:"\u690d\u7269\u50f5\u5c38\u8282\u70b9",type:cc.Node})],t.prototype,"plantZombieNode",void 0),i([l({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"bulletNode",void 0),i([l({displayName:"\u4e0a\u5c42\u7279\u6548\u8282\u70b9",type:cc.Node})],t.prototype,"upEffectNode",void 0),i([l({displayName:"\u4e0a\u5c42\u80cc\u666f\u8282\u70b9",type:cc.Node})],t.prototype,"upBgNode",void 0),i([l({displayName:"\u6389\u51fa\u7684\u5361",type:cc.Node})],t.prototype,"cards",void 0),e=i([p],t)}(cc.Component);e.pzaNodeManager=s,cc._RF.pop()},{}],pzaNormalZombie:[function(a,t,e){"use strict";cc._RF.push(t,"939b5ISX1BN+oTtVwQEGr8m","pzaNormalZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNormalZombie=void 0;var r=a("../Data/pzaZombieEnum"),p=a("./pzaBaseZombie"),l=a("./pzaZombieSlot"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="zombie_head_1",t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[l.pzaZombieSlotType.butter,new l.pzaZombieSlot(this.animation.spineAnimation,l.pzaZombieSlotType.butter).addState(new l.pzaZombieSlotAtt(1,l.pzaZombieSlotType.butter,61.81,13.02,-93.13))]])},t.prototype.zombieHurt=function(){this.zombieHurtState=r.pzaHurtStateEnum.HURT,this.curSkinName=this.curSkinName+"_1",this.changeSkin(this.curSkinName)},i([c],t)}(p.pzaBaseZombie));e.pzaNormalZombie=u,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaNutZombie:[function(a,t,e){"use strict";cc._RF.push(t,"139ffPnPSJJXaRS/prJ5GYG","pzaNutZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaNutZombie=void 0;var r=a("./pzaConeHeadZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=p.pzaZombieSlotType.head_nut,t.hatType=p.pzaZombieSlotType.head_nut,t.isNut=!0,t.garlicSkinName="",t}return n(t,a),t.prototype.randomZombieSkin=function(){this.curSkinName="6zombie_head1",this.changeSkin(this.curSkinName)},i([s],t)}(r.pzaConeHeadZombie));e.pzaNutZombie=c,cc._RF.pop()},{"./pzaConeHeadZombie":"pzaConeHeadZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaOptionView:[function(a,t,e){"use strict";cc._RF.push(t,"d0d58cuEPJPcoHhY3EJvkOz","pzaOptionView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaOptionView=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaGamePropConfig"),u=a("../../Common/pzaGameZJ"),d=a("../../Common/pzaLocalData"),h=a("../../Common/pzaNodeManager"),m=a("../../Common/pzaRewardManager"),f=a("../../Common/pzaSoundManager"),z=a("../../Common/pzaTipManager"),y=a("../../Common/pzaUIManager"),g=a("../../Common/pzaUtil"),v=a("../../Common/pzaWorldEventManager"),b=a("../../Load/pzaPreLoadManager"),S=a("../../utils/pzaChannel"),P=a("../../utils/pzaResMgr"),C=a("../pzaCommonMask"),D=a("../pzaWarningView"),M=a("./pzaBattleDownView"),E=cc._decorator,_=E.ccclass,T=E.property,w=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.soundTxt=null,t.soundTag=null,t.soundBtn=null,t.musicTxt=null,t.musicTag=null,t.musicBtn=null,t.backTxt=null,t.backBtn=null,t.reBtn=null,t.redeemEdixBox=null,t.backGameCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.soundBtn.on(cc.Node.EventType.TOUCH_START,this.soundTouch,this),this.soundBtn.on(cc.Node.EventType.TOUCH_MOVE,this.soundTouch,this),this.soundBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.soundTouch,this),this.soundBtn.on(cc.Node.EventType.TOUCH_END,this.soundTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_START,this.musicTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_MOVE,this.musicTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.musicTouch,this),this.musicBtn.on(cc.Node.EventType.TOUCH_END,this.musicTouch,this),this.redeemEdixBox.string=""},t.prototype.onDisable=function(){this.soundBtn.off(cc.Node.EventType.TOUCH_START,this.soundTouch,this),this.soundBtn.off(cc.Node.EventType.TOUCH_MOVE,this.soundTouch,this),this.soundBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.soundTouch,this),this.soundBtn.off(cc.Node.EventType.TOUCH_END,this.soundTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_START,this.musicTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_MOVE,this.musicTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.musicTouch,this),this.musicBtn.off(cc.Node.EventType.TOUCH_END,this.musicTouch,this)},t.prototype.init=function(a,t,e){void 0===e&&(e="\u8fd4\u56de\u6e38\u620f"),this.backGameCall=t,this.backTxt.string=e,a?(this.reBtn.active=!0,this.backBtn.x=-204):(this.reBtn.active=!1,this.backBtn.x=0),this.soundTag.x=360*d.pzaLocalData.data.soundValue-180,this.musicTag.x=360*d.pzaLocalData.data.musicValue-180,d.pzaLocalData.data.soundValue<=0?this.soundTxt.string="\u97f3\u6548\uff08\u5173\uff09":this.soundTxt.string="\u97f3\u91cf\uff1a\u97f3\u6548",d.pzaLocalData.data.musicValue<=0?this.musicTxt.string="\u97f3\u4e50\uff08\u5173\uff09":this.musicTxt.string="\u97f3\u91cf\uff1a\u97f3\u4e50"},t.prototype.soundTouch=function(a){var t=a&&a.getLocation();if(null!=t){var e=this.soundBtn.convertToNodeSpaceAR(t),o=cc.misc.clampf(e.x+180,0,360);this.setSound(o/360)}},t.prototype.musicTouch=function(a){var t=a&&a.getLocation();if(null!=t){var e=this.musicBtn.convertToNodeSpaceAR(t),o=cc.misc.clampf(e.x+180,0,360);this.setMusic(o/360)}},t.prototype.setSound=function(a){this.soundTag.x=360*a-180,d.pzaLocalData.data.soundValue=a,d.pzaLocalData.addDirty("soundValue"),cc.audioEngine.setEffectsVolume(a),this.soundTxt.string=a<=0?"\u97f3\u6548\uff08\u5173\uff09":"\u97f3\u91cf\uff1a\u97f3\u6548"},t.prototype.setMusic=function(a){this.musicTag.x=360*a-180,d.pzaLocalData.data.musicValue=a,d.pzaLocalData.addDirty("musicValue"),f.pzaSoundManager.setMusicVolume(a),this.musicTxt.string=a<=0?"\u97f3\u4e50\uff08\u5173\uff09":"\u97f3\u91cf\uff1a\u97f3\u4e50"},t.prototype.clickBackGame=function(){f.pzaSoundManager.playSFX(),this.backGameCall&&this.backGameCall(),this.close()},t.prototype.clickRestart=function(){var a=this;if(p.pzaGameState.gameMode==p.pzaGameMode.ZaJiao&&h.pzaNodeManager.getBattleUINode().getChildByName("BattleDownUI").getComponent(M.pzaBattleDownView).restartCountDownSec>0)y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(D.pzaWarningView);e&&e.show("\u6ce8\uff1a\u5012\u8ba1\u65f6\u7ed3\u675f\u524d\u91cd\u65b0\u5f00\u59cb\u4e0d\u6d88\u8017\u6311\u6218\u6b21\u6570","\u91cd\u65b0\u5f00\u59cb","\u5173\u95ed",function(){s.pzaGameManager.getCurrentGame().gameRestart(),a.close()},function(){},"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",!1)});else{var t=!1,e=!1,o=0;if(p.pzaGameState.isCreativeVaseMode()||p.pzaGameState.isCreativeTrad()||p.pzaGameState.isZjMode()){var n=s.pzaGameManager.getGame(p.pzaGameMode.ZaJiao,u.pzaGameZJ).rankCount,i=P.pzaResMgr.instance().getConf("a24").length;P.pzaResMgr.instance().getConf("a25").length,p.pzaGameState.isZjMode()?o=p.pzaGameState.curPart:p.pzaGameState.isCreativeVaseMode()?o=p.pzaGameState.curPart+n:p.pzaGameState.isCreativeTrad()&&(o=p.pzaGameState.curPart+n+i),d.pzaLocalData.data.creativeItemState[o]<3?(t=!1,e=!1):d.pzaLocalData.data.creativeItemState[o]%2==1?e=!0:t=!0}y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.WARNING_VIEW,function(n){var i=n&&n.getComponent(D.pzaWarningView);i&&i.show("\u4f60\u60f3\u8981\u518d\u6b21\u4ece\u5934\u8fdb\u884c\u8fd9\u4e00\u5173\u5361\u5417\uff1f","\u91cd\u65b0\u5f00\u59cb","\u53d6\u6d88",function(){var n=function(){d.pzaLocalData.data.autoPickLeft=p.pzaGameState.autoPickLeft,d.pzaLocalData.addDirty("autoPickLeft"),s.pzaGameManager.removeBattleUI(),v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GAME_OVER,null),g.pzaUtil.changeGameSpeed(1),s.pzaGameManager.getCurrentGame().gameRestart(),(p.pzaGameState.isCreativeVaseMode()||p.pzaGameState.isCreativeTrad()||p.pzaGameState.isZjMode())&&(d.pzaLocalData.data.creativeItemState[o]++,d.pzaLocalData.addDirty("creativeItemState")),a.close()};t?S.pzaChannel.instance().showVideo({sucCall:n,failCall:function(){},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):e?"ks"==S.pzaChannel.instance().channel||"tt"==S.pzaChannel.instance().channel||"my"==S.pzaChannel.instance().channel?S.pzaChannel.instance().showVideo({sucCall:n,failCall:function(){},endCall:function(){},posName:"\u521b\u610f\u6a21\u5f0f\u89e3\u9501",adsid:"27"}):S.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"24"},function(){n()}):n()},null,"\u91cd\u65b0\u5f00\u59cb\u672c\u5173\uff1f",t,e)})}},t.prototype.clickComfirmRedeemCode=function(){var a=this.redeemEdixBox.string;null==a||a.length<=0?z.pzaTipManager.showHomeTip("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5151\u6362\u7801~",null,3):d.pzaLocalData.data.usedRedeemCode.includes(a.toUpperCase())?z.pzaTipManager.showHomeTip("\u5151\u6362\u7801\u5df2\u4f7f\u7528~",null,3):(C.pzaCommonMask.showMask(),S.pzaChannel.redeem("\u690d\u7269\u5927\u6218\u50f5\u5c38\u539f\u7248",S.pzaChannel.instance().getChannel().channelUserId,a,function(t){if(C.pzaCommonMask.hideMask(),null!=t){var e=[];t.forEach(function(a){var t=new c.pzaRewardPropData(parseInt(a.key),parseInt(a.val));parseInt(a.val)==r.pzaPlantEnum.SUPER_CHOMPER&&(t.limitGet=1),e.push(t)}),m.pzaRewardManager.recieveRewards(e),d.pzaLocalData.data.usedRedeemCode.push(a.toUpperCase()),d.pzaLocalData.addDirty("usedRedeemCode")}else z.pzaTipManager.showHomeTip("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5151\u6362\u7801~",null,3)}))},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([T({displayName:"\u97f3\u6548\u6587\u672c",type:cc.Label})],t.prototype,"soundTxt",void 0),i([T({displayName:"\u97f3\u6548\u6807\u8bb0",type:cc.Node})],t.prototype,"soundTag",void 0),i([T({displayName:"\u97f3\u6548\u6309\u94ae",type:cc.Node})],t.prototype,"soundBtn",void 0),i([T({displayName:"\u97f3\u4e50\u6587\u672c",type:cc.Label})],t.prototype,"musicTxt",void 0),i([T({displayName:"\u97f3\u4e50\u6807\u8bb0",type:cc.Node})],t.prototype,"musicTag",void 0),i([T({displayName:"\u97f3\u4e50\u6309\u94ae",type:cc.Node})],t.prototype,"musicBtn",void 0),i([T({displayName:"\u8fd4\u56de\u6309\u94ae\u6587\u672c",type:cc.Label})],t.prototype,"backTxt",void 0),i([T({displayName:"\u8fd4\u56de\u6309\u94ae",type:cc.Node})],t.prototype,"backBtn",void 0),i([T({displayName:"\u91cd\u65b0\u5f00\u59cb\u6309\u94ae",type:cc.Node})],t.prototype,"reBtn",void 0),i([T({displayName:"\u5151\u6362\u7801\u8f93\u5165\u6846",type:cc.EditBox})],t.prototype,"redeemEdixBox",void 0),i([_],t)}(cc.Component);e.pzaOptionView=w,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaGameZJ":"pzaGameZJ","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaRewardManager":"pzaRewardManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzaResMgr":"pzaResMgr","../pzaCommonMask":"pzaCommonMask","../pzaWarningView":"pzaWarningView","./pzaBattleDownView":"pzaBattleDownView"}],pzaParseCond:[function(a,t,e){"use strict";cc._RF.push(t,"9bcafcyHHxJ6IInsPwGIrzq","pzaParseCond"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaParseCond=void 0;var o=a("./pzakc"),n=function(){function a(){}return a.condMap={">":function(a,t){return a>t},"<":function(a,t){return a<t},">=":function(a,t){return a>=t},"<=":function(a,t){return a<=t},"==":function(a,t){return a==t},"=":function(a,t){return a==t},"!=":function(a,t){return a!=t},"!":function(a,t){return!t}},a.orAndMap={"&":function(a,t){return a&&t},"&&":function(a,t){return a&&t},"|":function(a,t){return a||t},"||":function(a,t){return a||t}},a.parseVar=function(a,t){if("number"==typeof a||!isNaN(Number(a)))return Number(a);var e=t[a];if(void 0===e||"number"!=typeof e)throw"parseVar\u5931\u8d25,\u672a\u77e5\u53d8\u91cf:"+a;return Number(e)},a.scanBracketEnd=function(a){for(var t=0,e=-1,o=a.length,n=0;n<o;n++){var i=a[n];if("("===i)t++;else if(")"===i&&0==--t){e=n;break}}if(e<0)throw"[ERR]scanBracketEnd\u5931\u8d25:"+a;return{outStr:a.substring(1,e),endPos:e}},a.scanOrAndNext=function(t){for(var e=-1,o=t.length,n=0;n<o;n++){var i=t[n];if("|"===i&&"|"===t[n+1]||"&"===i&&"&"===t[n+1]){e=n;break}"("===i&&(n=a.scanBracketEnd(t.substring(n)).endPos+1)}return e<0?{outStr:t,endPos:o-1}:{outStr:t.substring(0,e),endPos:e}},a.parseCond=function(t,e){for(var n="",i=null,r="",p=-1,l=null,s=0,c=t.length;s<c;s++){var u=t[s],d=a.condMap[u];if(d)s+1!==c&&a.condMap[u+t[s+1]]&&(u+=t[s+1],d=a.condMap[u],s++),p=1,i=d;else{var h=a.orAndMap[u];if(h){if(s+1!==c&&a.orAndMap[u+t[s+1]]&&(u+=t[s+1],h=a.orAndMap[u],s++),s+1>=c||p<0&&null===l)throw"[ERR]parseCond\u5931\u8d25,\u65e0\u6548orAnd\u4f4d\u7f6e:"+s+"|"+t;var m=a.scanOrAndNext(t.substring(s+1));p>0&&(l=i(a.parseVar(n,e),a.parseVar(r,e)),n="",r="",i=null),l=h(l,a.parseCond(m.outStr,e)),s=s+m.endPos+1,p=-1}else if("("!==u)p<0?n+=u:p>0&&(r+=u);else{var f=a.scanBracketEnd(t.substring(s));if(f.endPos+2===c)return p>0&&i?i(n,a.parseCond(f.outStr,e)):a.parseCond(f.outStr,e);l=a.parseCond(f.outStr,e),p>0&&i&&(l=i(n,a.parseCond(f.outStr,e))),p=-1,s=s+f.endPos+1}}}return p<0||!i?null!==l?l:(o.default.err("[ERR]parseCond\u5931\u8d25:"+t,e),null):i(a.parseVar(n,e),a.parseVar(r,e))},a.condParse=function(t,e){return!t||(t=t.replace(/\s/g,""),a.parseCond(t,e))},a.test=function(){o.default.log("[realRe]=====",!1),o.default.log("[parseCond]=====",a.condParse("a1 > b1 || !((b1 < a1 || c1 > f1) || b1 > a1 )",{a1:12,b1:23,c1:2,d1:3,e1:5,f1:15,g1:20}))},a}();e.pzaParseCond=n,cc._RF.pop()},{"./pzakc":"pzakc"}],pzaPartSelectView:[function(a,t,e){"use strict";cc._RF.push(t,"bba8c5B9RRFXqNBbFGtKCA0","pzaPartSelectView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGameConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSoundManager"),c=a("../Common/pzaUIManager"),u=a("../Load/pzaPreLoadManager"),d=a("../utils/pzakc"),h=a("./pzaGuanKaItemView"),m=a("./pzaHandbookView"),f=a("./pzaTasksView"),z=a("./pzaWarningView"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.chapterBtnNode=[],t.chapterSpriteNode=[],t.chapterFrames=[],t.taskBtn=null,t.btBtn=null,t.ywBtn=null,t.ycBtn=null,t.wyBtn=null,t.wdBtn=null,t.starCount=null,t.partItem=[],t.scrollView=null,t.scrollViewContent=null,t.bookBtn=null,t.lv_Bg1=null,t.lv_Bg2=null,t.part_Bg1=null,t.part_Bg2=null,t.part1_select=null,t.part2_select=null,t.partSprite=null,t.lv_ImgFh=null,t.star_bg=null,t.record_btn=null,t.weekTwoTipNode=null,t.scrollBeiginOffset=null,t.isTouchUp=!1,t.curChapter=1,t.curPart=1,t.isChangeOver=!0,t}return n(t,a),t.prototype.onEnable=function(){this.part_Bg2.active=!0,this.partInit(),this.bookBtn.active=l.pzaLocalData.data.unlockBook,this.starCount.string=l.pzaLocalData.getAllStar()+"/"+p.pzaGameConfig.getAllPartStar(),this.curChapter=l.pzaLocalData.data.curChapter,this.curPart=l.pzaLocalData.data.curPart,this.chapterBtnNode[0].on(cc.Node.EventType.TOUCH_START,this.touchChapter1,this),this.chapterBtnNode[0].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter1,this),this.chapterBtnNode[0].on(cc.Node.EventType.TOUCH_END,this.clickChapter1,this),this.chapterBtnNode[1].on(cc.Node.EventType.TOUCH_START,this.touchChapter2,this),this.chapterBtnNode[1].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter2,this),this.chapterBtnNode[1].on(cc.Node.EventType.TOUCH_END,this.clickChapter2,this),this.chapterBtnNode[2].on(cc.Node.EventType.TOUCH_START,this.touchChapter3,this),this.chapterBtnNode[2].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter3,this),this.chapterBtnNode[2].on(cc.Node.EventType.TOUCH_END,this.clickChapter3,this),this.chapterBtnNode[3].on(cc.Node.EventType.TOUCH_START,this.touchChapter4,this),this.chapterBtnNode[3].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter4,this),this.chapterBtnNode[3].on(cc.Node.EventType.TOUCH_END,this.clickChapter4,this),this.chapterBtnNode[4].on(cc.Node.EventType.TOUCH_START,this.touchChapter5,this),this.chapterBtnNode[4].on(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter5,this),this.chapterBtnNode[4].on(cc.Node.EventType.TOUCH_END,this.clickChapter5,this),this.part_Bg1.on(cc.Node.EventType.TOUCH_START,this.touchWeek1,this),this.part_Bg1.on(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek1,this),this.part_Bg1.on(cc.Node.EventType.TOUCH_END,this.clickWeek1,this),this.part_Bg2.on(cc.Node.EventType.TOUCH_START,this.touchWeek2,this),this.part_Bg2.on(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek2,this),this.part_Bg2.on(cc.Node.EventType.TOUCH_END,this.clickWeek2,this),this.weekTwoTipNode.active=!1,l.pzaLocalData.data.passLastPart&&l.pzaLocalData.data.weekTwoOpenTip2&&(this.weekTwoTipNode.active=!0,this.weekTwoTipNode.angle=0,cc.Tween.stopAllByTarget(this.weekTwoTipNode),d.default.ani_JitterNode(this.weekTwoTipNode,.4,15,3,!0)),l.pzaLocalData.data.passLastPart&&l.pzaLocalData.data.weekTwoOpenTip2?(this.chapterCommon(null,5,10),this.initChapterNode(5)):(this.chapterCommon(null,this.curChapter,this.curPart),this.initChapterNode(this.curChapter>5?this.curChapter-5:this.curChapter))},t.prototype.onDisable=function(){this.chapterBtnNode[0].off(cc.Node.EventType.TOUCH_START,this.touchChapter1,this),this.chapterBtnNode[0].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter1,this),this.chapterBtnNode[0].off(cc.Node.EventType.TOUCH_END,this.clickChapter1,this),this.chapterBtnNode[1].off(cc.Node.EventType.TOUCH_START,this.touchChapter2,this),this.chapterBtnNode[1].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter2,this),this.chapterBtnNode[1].off(cc.Node.EventType.TOUCH_END,this.clickChapter2,this),this.chapterBtnNode[2].off(cc.Node.EventType.TOUCH_START,this.touchChapter3,this),this.chapterBtnNode[2].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter3,this),this.chapterBtnNode[2].off(cc.Node.EventType.TOUCH_END,this.clickChapter3,this),this.chapterBtnNode[3].off(cc.Node.EventType.TOUCH_START,this.touchChapter4,this),this.chapterBtnNode[3].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter4,this),this.chapterBtnNode[3].off(cc.Node.EventType.TOUCH_END,this.clickChapter4,this),this.chapterBtnNode[4].off(cc.Node.EventType.TOUCH_START,this.touchChapter5,this),this.chapterBtnNode[4].off(cc.Node.EventType.TOUCH_CANCEL,this.clickChapter5,this),this.chapterBtnNode[4].off(cc.Node.EventType.TOUCH_END,this.clickChapter5,this),this.part_Bg1.off(cc.Node.EventType.TOUCH_START,this.touchWeek1,this),this.part_Bg1.off(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek1,this),this.part_Bg1.off(cc.Node.EventType.TOUCH_END,this.clickWeek1,this),this.part_Bg2.off(cc.Node.EventType.TOUCH_START,this.touchWeek2,this),this.part_Bg2.off(cc.Node.EventType.TOUCH_CANCEL,this.clickWeek2,this),this.part_Bg2.off(cc.Node.EventType.TOUCH_END,this.clickWeek2,this)},t.prototype.partInit=function(){l.pzaLocalData.data.weekTwoOpenTip2?(this.lv_Bg1.x=0,this.lv_Bg2.x=1680,this.lv_Bg2.active=!1,this.part_Bg2.active=!0,this.part_Bg1.active=!1):(l.pzaLocalData.isWeekTwo=!0,this.lv_Bg1.x=-1680,this.lv_Bg2.x=0,this.lv_Bg1.active=!1,this.part_Bg2.active=!1,this.part_Bg1.active=!0)},t.prototype.scrollEvent=function(a,t){if(9!=t){var e=this.scrollView.getContentPosition();for(i=0;i<this.partItem.length;i++)(l=this.partItem[i])&&l.scrollMove(e.x)}else{for(var o=this.scrollView.getContentPosition(),n=-1,i=0;i<this.partItem.length;i++){var r=821.65-189.25*i,p=Math.abs(o.x-r);(-1==n||p<n)&&(n=p,this.curPart=i+1)}for(i=0;i<this.partItem.length;i++){var l;(l=this.partItem[i])&&l.updateStartGameNode(this.curPart)}this.scrollView.setContentPosition(cc.v2(821.65-189.25*(this.curPart-1),200))}},t.prototype.touchMove=function(){var a=this.scrollView.getScrollOffset();if(null!=a&&null!=this.scrollBeiginOffset){var t=a.x-this.scrollBeiginOffset.x;if(this.scrollBeiginOffset=null,!(Math.abs(t)<10)){var e=this.curPart;this.curPart=t>0?this.curPart-1:this.curPart+1,this.curPart<1&&(this.curPart=1),this.curPart>=10&&(this.curPart=10),this.scrollView.setContentPosition(cc.v2(821.65-189.25*(this.curPart-1),200));var o=this.partItem[e-1];o&&o.updateUI(this.curPart);var n=this.partItem[this.curPart-1];n&&n.updateUI(this.curPart)}}},t.prototype.selectChapter=function(a){var t=this;this.curChapter!=a?(s.pzaSoundManager.playAudio("gravebutton"),this.curChapter=a,this.curPart=1,this.initChapterNode(a>5?a-5:a),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,660)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){for(var a=0;a<t.partItem.length;a++){var e=t.partItem[a];e&&e.bindData(t.curChapter,a+1,t.curPart)}t.scrollView.setContentPosition(cc.v2(821.65-189.25*(t.curPart-1),200))}),cc.delayTime(.1),cc.callFunc(function(){s.pzaSoundManager.playAudio("chapterdown")}),cc.moveTo(.2,cc.v2(0,145)).easing(cc.easeCubicActionOut())))):this.initChapterNode(a>5?a-5:a)},t.prototype.clickHandBookBtn=function(){s.pzaSoundManager.playSFX(),c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(m.pzaHandbookView);t&&t.jdInit()})},t.prototype.initChapterNode=function(a){this.chapterSpriteNode[0].node.active=1==a,this.chapterSpriteNode[1].node.active=2==a,this.chapterSpriteNode[2].node.active=3==a,this.chapterSpriteNode[3].node.active=4==a,this.chapterSpriteNode[4].node.active=5==a,this.chapterSpriteNode[0].spriteFrame=this.chapterFrames[0],this.chapterSpriteNode[1].spriteFrame=this.chapterFrames[2],this.chapterSpriteNode[2].spriteFrame=this.chapterFrames[4],this.chapterSpriteNode[3].spriteFrame=this.chapterFrames[6],this.chapterSpriteNode[4].spriteFrame=this.chapterFrames[8]},t.prototype.touchChapter1=function(){this.isChangeOver&&(this.chapterSpriteNode[0].node.active=!0,this.chapterSpriteNode[0].spriteFrame=this.chapterFrames[1])},t.prototype.clickChapter1=function(){if(this.isChangeOver){var a=l.pzaLocalData.isWeekTwo?6:1;this.selectChapter(a)}},t.prototype.touchChapter2=function(){this.isChangeOver&&(this.chapterSpriteNode[1].node.active=!0,this.chapterSpriteNode[1].spriteFrame=this.chapterFrames[3])},t.prototype.clickChapter2=function(){if(this.isChangeOver){var a=l.pzaLocalData.isWeekTwo?7:2;this.selectChapter(a)}},t.prototype.touchChapter3=function(){this.isChangeOver&&(this.chapterSpriteNode[2].node.active=!0,this.chapterSpriteNode[2].spriteFrame=this.chapterFrames[5])},t.prototype.clickChapter3=function(){if(this.isChangeOver){var a=l.pzaLocalData.isWeekTwo?8:3;if(l.pzaLocalData.data.curChapter<a-1)return this.chapterSpriteNode[2].node.active=!1,void c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(z.pzaWarningView);t&&t.show("\u89e3\u9501\u9ed1\u591c\u540e\u5373\u53ef\u67e5\u770b\u6c34\u6c60\u5173\u5361","\u786e\u5b9a",null,null,null,"\u6c34\u6c60")});this.selectChapter(a)}},t.prototype.touchChapter4=function(){this.isChangeOver&&(this.chapterSpriteNode[3].node.active=!0,this.chapterSpriteNode[3].spriteFrame=this.chapterFrames[7])},t.prototype.clickChapter4=function(){if(this.isChangeOver){var a=l.pzaLocalData.isWeekTwo?9:4;if(l.pzaLocalData.data.curChapter<a-1)return this.chapterSpriteNode[3].node.active=!1,void c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(z.pzaWarningView);t&&t.show("\u89e3\u9501\u6c34\u6c60\u540e\u5373\u53ef\u67e5\u770b\u6d53\u96fe\u5173\u5361","\u786e\u5b9a",null,null,null,"\u6d53\u96fe")});this.selectChapter(a)}},t.prototype.touchChapter5=function(){this.isChangeOver&&(this.chapterSpriteNode[4].node.active=!0,this.chapterSpriteNode[4].spriteFrame=this.chapterFrames[9])},t.prototype.clickChapter5=function(){if(this.isChangeOver){var a=l.pzaLocalData.isWeekTwo?10:5;if(l.pzaLocalData.data.curChapter<a-1)return this.chapterSpriteNode[4].node.active=!1,void c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(z.pzaWarningView);t&&t.show("\u89e3\u9501\u6d53\u96fe\u540e\u5373\u53ef\u67e5\u770b\u5c4b\u9876\u5173\u5361","\u786e\u5b9a",null,null,null,"\u5c4b\u9876")});this.selectChapter(a)}},t.prototype.touchWeek1=function(){this.part1_select.active=!0},t.prototype.clickWeek1=function(){var a=this;this.isChangeOver=!1,l.pzaLocalData.isWeekTwo=!1,this.imgDiss(),this.bgMove(0,1680,function(){a.lv_Bg1.active=!0,a.lv_Bg2.active=!1,a.imgShow(),a.initChapterNode(5),a.chapterCommon(function(){a.part_Bg2.active=!0,a.isChangeOver=!0},5,10,!0)})},t.prototype.touchWeek2=function(){l.pzaLocalData.data.passLastPart?this.part2_select.active=!0:c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(z.pzaWarningView);t&&t.show("\u5192\u9669\u6a21\u5f0f\u901a\u51735-10\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")})},t.prototype.clickWeek2=function(){var a=this;l.pzaLocalData.data.passLastPart&&(this.isChangeOver=!1,this.weekTwoTipNode.active&&(this.weekTwoTipNode.active=!1,l.pzaLocalData.data.weekTwoOpenTip2=!1,l.pzaLocalData.addDirty("weekTwoOpenTip2")),l.pzaLocalData.isWeekTwo=!0,this.imgDiss(),this.bgMove(-1680,0,function(){a.lv_Bg1.active=!1,a.lv_Bg2.active=!0,a.curChapter=l.pzaLocalData.data.curChapter,a.curPart=l.pzaLocalData.data.curPart,a.imgShow(),a.initChapterNode(a.curChapter%5),a.chapterCommon(function(){a.part_Bg1.active=!0,a.isChangeOver=!0},a.curChapter,a.curPart,!0)}))},t.prototype.chapterCommon=function(a,t,e,o){void 0===a&&(a=null),void 0===o&&(o=!1),this.scrollView.setContentPosition(cc.v2(821.65-189.25*(e-1),200)),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.sequence(cc.delayTime(o?0:.5),cc.moveTo(o?.1:.2,cc.v2(0,145)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){s.pzaSoundManager.playAudio("chapterdown"),a&&a()}))),l.pzaLocalData.isWeekTwo||(t=t>5?t-5:t),this.refreshItem(t,e)},t.prototype.refreshItem=function(a,t){for(var e=this,o=0;o<this.partItem.length;o++){var n=this.partItem[o];n&&(n.bindData(a,o+1,t),n.bindStartGameCall(function(){e.close()}))}},t.prototype.bgMove=function(a,t,e){var o=this;this.lv_Bg1.stopAllActions(),this.lv_Bg1.runAction(cc.sequence(cc.moveTo(.8,cc.v2(a,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){o.lv_Bg1.x=a}))),this.lv_Bg2.stopAllActions(),this.lv_Bg2.runAction(cc.sequence(cc.moveTo(.8,cc.v2(t,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){o.lv_Bg2.x=t,e()})))},t.prototype.imgDiss=function(){this.part_Bg1.active=!1,this.part_Bg2.active=!1,this.part1_select.active=!1,this.part2_select.active=!1,this.partSprite.active=!1,this.lv_ImgFh.active=!1,this.taskBtn.active=!1,this.star_bg.active=!1,this.record_btn.active=!1,this.scrollView.node.y=660,this.lv_Bg1.active=!0,this.lv_Bg2.active=!0},t.prototype.imgShow=function(){this.partSprite.active=!0,this.lv_ImgFh.active=!0,this.taskBtn.active=!0,this.star_bg.active=!0,this.record_btn.active=!0},t.prototype.clickback=function(){var a=this;s.pzaSoundManager.playSFX(),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.2,cc.v2(0,660))),c.pzaUIManager.aniHidePopUI(function(){a.close()})},t.prototype.clickTasks=function(){l.pzaLocalData.data.passLastPart?(s.pzaSoundManager.playSFX(),f.default.show(!1)):c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(z.pzaWarningView);t&&t.show("\u5192\u9669\u6a21\u5f0f\u901a\u51735-10\u89e3\u9501","\u786e\u5b9a",null,null,null,"\u672a\u89e3\u9501\uff01")})},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([v({displayName:"\u7ae0\u8282\u6309\u94ae\u8282\u70b9",type:[cc.Node]})],t.prototype,"chapterBtnNode",void 0),i([v({displayName:"\u7ae0\u8282\u6309\u94ae\u56fe\u8282\u70b9",type:[cc.Sprite]})],t.prototype,"chapterSpriteNode",void 0),i([v({displayName:"\u7ae0\u8282\u6309\u94ae\u56fe",type:[cc.SpriteFrame]})],t.prototype,"chapterFrames",void 0),i([v({displayName:"\u51b2\u5173\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"taskBtn",void 0),i([v({displayName:"\u767d\u5929\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"btBtn",void 0),i([v({displayName:"\u591c\u665a\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"ywBtn",void 0),i([v({displayName:"\u6cf3\u6c60\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"ycBtn",void 0),i([v({displayName:"\u96fe\u591c\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"wyBtn",void 0),i([v({displayName:"\u5c4b\u9876\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"wdBtn",void 0),i([v({displayName:"\u661f\u661f\u6570\u91cf",type:cc.Label})],t.prototype,"starCount",void 0),i([v({displayName:"\u5173\u5361Item",type:[h.default]})],t.prototype,"partItem",void 0),i([v({displayName:"\u6eda\u52a8\u5bb9\u5668",type:cc.ScrollView})],t.prototype,"scrollView",void 0),i([v({displayName:"\u6eda\u52a8content",type:cc.Node})],t.prototype,"scrollViewContent",void 0),i([v({displayName:"\u56fe\u9274\u6309\u94ae",type:cc.Node})],t.prototype,"bookBtn",void 0),i([v(cc.Node)],t.prototype,"lv_Bg1",void 0),i([v(cc.Node)],t.prototype,"lv_Bg2",void 0),i([v(cc.Node)],t.prototype,"part_Bg1",void 0),i([v(cc.Node)],t.prototype,"part_Bg2",void 0),i([v(cc.Node)],t.prototype,"part1_select",void 0),i([v(cc.Node)],t.prototype,"part2_select",void 0),i([v(cc.Node)],t.prototype,"partSprite",void 0),i([v(cc.Node)],t.prototype,"lv_ImgFh",void 0),i([v(cc.Node)],t.prototype,"star_bg",void 0),i([v(cc.Node)],t.prototype,"record_btn",void 0),i([v(cc.Node)],t.prototype,"weekTwoTipNode",void 0),i([g],t)}(cc.Component);e.default=b,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzakc":"pzakc","./pzaGuanKaItemView":"pzaGuanKaItemView","./pzaHandbookView":"pzaHandbookView","./pzaTasksView":"pzaTasksView","./pzaWarningView":"pzaWarningView"}],pzaPeaBullet:[function(a,t,e){"use strict";cc._RF.push(t,"ff576r5pupJj4CweHFNsimX","pzaPeaBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaBullet=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGroupEnum"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaUtil"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaZombieEnum"),h=a("../Effect/pzaBaseEffect"),m=a("../Plant/pzaPlantBody"),f=a("../Zombie/pzaZombieBody"),z=a("../pzaEffectManager"),y=a("../pzaGameState"),g=a("./pzaBaseBullet"),v=cc._decorator,b=v.ccclass,S=v.property,P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.frostBulletNode=null,t.frostEffect=null,t.normalBulletNode=null,t.fireBulletNode=null,t.fireBall=null,t.snowHitPrefab=null,t.bulletLevel=0,t.colliderWoods=new Set,t}return n(t,a),t.prototype.init=function(t,e,o,n,i){void 0===o&&(o=0),void 0===n&&(n=null),void 0===i&&(i=cc.v2(1,0)),a.prototype.init.call(this,t,e,o,n,i),this.bulletLevel=o,this.colliderWoods.clear(),this.refreshBulletState(),i.x<0?this.node.scaleX=-1:this.node.scaleX=1},t.prototype.setSpeed=function(a){this.speed=a},t.prototype.onCollision=function(a){if(null!=a){if(a.node.group==p.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(f.pzaZombieBody);this.colliderZombie(t&&t.baseData)}a.node.group!=p.pzaGroupEnum.TORCHWOOD||this.colliderWoods.has(a)||this.colliderTorchWood(a)}},t.prototype.colliderTorchWood=function(a){var t=a&&a.node.getComponent(m.pzaPlantBody);null==t||null==t.baseData||t.baseData.isDead||this.bulletLevel>=2||(this.bulletLevel++,this.colliderWoods.add(a),this.refreshBulletState(),this.bulletLevel>=2&&s.pzaSoundManager.playAudio("Torchwood",.5))},t.prototype.update=function(){this.fireBulletNode.active&&(this.fireBall.angle-=10)},t.prototype.refreshBulletState=function(){this.frostBulletNode.active=0==this.bulletLevel,this.frostEffect.active=0==this.bulletLevel,this.normalBulletNode.active=1==this.bulletLevel,this.fireBulletNode.active=2==this.bulletLevel},t.prototype.colliderZombie=function(a){a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==d.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&(a.zombieData&&a.zombieData.hypnosis||a.buffData.hasBuff(u.pzaBuffType.DIVE)||a.buffData.hasBuff(u.pzaBuffType.FLY)||a.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||(0==this.bulletLevel?this.frostColliderZombie(a):1==this.bulletLevel?this.normalColliderZombie(a):this.fireColliderZombie(a)))},t.prototype.normalColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(t.hurt(this.atk),2===this.node.scale&&t.pushBack(.2),this.close(),this.playHitEffect(a))},t.prototype.frostColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(t.hurt(this.atk),this.close(),this.playHitEffect(a),t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(u.pzaBuffType.HARD_BODY)||t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE_PEA)||(a.buffData.hasBuff(u.pzaBuffType.FROST)||this.playFrozenSound(),t.baseData.zombieData.zombieType!=d.pzaZombieEnum.NightWear&&a.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,10,.5))))},t.prototype.fireColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);if(2===this.node.scale?(t.pushBack(.2),t&&t.hurt(2*this.atk)):t&&t.hurt(40),a.buffData.removeBuff(u.pzaBuffType.FROST),a.buffData.removeBuff(u.pzaBuffType.FROZEN),this.close(),this.playHitEffect(a),s.pzaSoundManager.playAudio("firepeaHit",.5),!t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_SPATTER)){var e=window.pzazombieManager.findFixRangeZombies(a.logicPos,.5*y.pzaGameState.map.getBlockWidth());e&&e.forEach(function(t){null!=t&&t.baseData!=a&&(a.buffData.hasBuff(u.pzaBuffType.FLY)||a.buffData.hasBuff(u.pzaBuffType.DIVE)||a.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||t.hurt(13))})}},t.prototype.playHitEffect=function(a){var t=5,e=cc.v2(this.node.x,this.node.y);null!=a&&(t=10*-a.yIndex+5,e=cc.v2(a.logicPos.x,a.logicPos.y+70)),this.bulletLevel>=2&&z.pzaEffectManager.createBoomFireEffect(this.bulletYIndex,0,e,null);var o=l.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=r.pzaGameCommonPool.requestInstant2(0==this.bulletLevel?this.snowHitPrefab:this.hitPrefab);n.setParent(o),n.zIndex=t,n.setPosition(e);var i=n.getComponent(h.pzaBaseEffect);i&&i.showEffect(null,null)}},t.prototype.playFrozenSound=function(){var a="frozen_"+c.pzaUtil.getRandomNum(1,2);s.pzaSoundManager.playAudio(a)},i([S({displayName:"\u51b0\u971c\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"frostBulletNode",void 0),i([S({displayName:"\u51b0\u971c\u5b50\u5f39\u7279\u6548",type:cc.Node})],t.prototype,"frostEffect",void 0),i([S({displayName:"\u666e\u901a\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"normalBulletNode",void 0),i([S({displayName:"\u706b\u7130\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"fireBulletNode",void 0),i([S({displayName:"\u706b\u7130\u5b50\u5f39\u7403",type:cc.Node})],t.prototype,"fireBall",void 0),i([S({displayName:"\u51b0\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"snowHitPrefab",void 0),i([b],t)}(g.pzaBaseBullet);e.pzaPeaBullet=P,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../Plant/pzaPlantBody":"pzaPlantBody","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseBullet":"pzaBaseBullet"}],pzaPeaCannon:[function(a,t,e){"use strict";cc._RF.push(t,"19abbyWF0lJs6PA0a5sYsZ5","pzaPeaCannon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaCannon=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData)||e.findAttackTarget())return l.pzaSoundManager.playAudio("PeashooterAtk"),void e.animation.playAnimation("attack",!1,function(){e.animation.playAnimation("idle1",!1,o)},function(){e.shoot()});e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle1_eye",!1,o))};o()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1),t.scale=2;var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},t.prototype.findAttackTarget=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaPeaCannon=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPeaFireBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"df00122vN9KZoblfqmpGDzr","pzaPeaFireBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaFireBaseBullet=void 0;var r=a("./pzaBaseBullet"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.fireBall=null,t}return n(t,a),t.prototype.update=function(){this.fireBall.angle-=10},i([s({displayName:"\u706b\u7403\u8282\u70b9",type:cc.Node})],t.prototype,"fireBall",void 0),i([l],t)}(r.pzaBaseBullet);e.pzaPeaFireBaseBullet=c,cc._RF.pop()},{"./pzaBaseBullet":"pzaBaseBullet"}],pzaPeaFireTrackBullet:[function(a,t,e){"use strict";cc._RF.push(t,"1fb6e3Jc+BJ05p0Khnl9gKX","pzaPeaFireTrackBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaFireTrackBullet=void 0;var r=a("./pzaTrackBullet"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.fireBall=null,t}return n(t,a),t.prototype.update=function(){this.fireBall.angle-=10},i([s({displayName:"\u706b\u7403\u8282\u70b9",type:cc.Node})],t.prototype,"fireBall",void 0),i([l],t)}(r.pzaTrackBullet);e.pzaPeaFireTrackBullet=c,cc._RF.pop()},{"./pzaTrackBullet":"pzaTrackBullet"}],pzaPeaPool:[function(a,t,e){"use strict";cc._RF.push(t,"6d1faS6C75FDLZYGWKTy2LL","pzaPeaPool");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaPool=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Bullet/pzaPeaBullet"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.atkCd=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.animation.playAnimation("idle",!0),this.atkCd=3},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.atkCd>0&&(this.atkCd-=t,this.atkCd<=0&&this.attack())},t.prototype.close=function(){a.prototype.close.call(this)},t.prototype.attack=function(){if(!this.baseData.isDead){var a=cc.v2(1,0),t=2*Math.PI/36,e=p.pzaNodeManager.getBulletNode(),o=this.node.getPosition();o.y=o.y+50;for(var n=0;n<36;n++){var i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);i.setParent(e),i.setPosition(o);var s=i.getComponent(l.pzaPeaBullet);s.init(-1,this.baseData.atk,1,null,a.rotate(t*n)),s.setSpeed(400)}this.atkCd=3}},i([d({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([u],t)}(s.pzaBasePlant);e.pzaPeaPool=h,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Bullet/pzaPeaBullet":"pzaPeaBullet","./pzaBasePlant":"pzaBasePlant"}],pzaPeaSun:[function(a,t,e){"use strict";cc._RF.push(t,"8c341JjVA9Kt5s70lUKcxR5","pzaPeaSun");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaSun=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaBaseBullet"),c=a("../pzaGameState"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.sunTime=25,t.aniCom=function(){if(window.pzazombieManager.hasCanAttackZombie(t.baseData))return l.pzaSoundManager.playAudio("PeashooterAtk"),void t.animation.playAnimation("attack",!1,t.aniCom.bind(t),function(){t.shoot()});t.animation.playAnimation("idle1",!1,t.aniCom.bind(t))},t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.sunTime=3,this.aniCom()},t.prototype.logicUpdate=function(t){var e=this;a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.sunTime-=t,this.sunTime<=0&&(this.sunTime=25,this.animation.playAnimation("Sunlight",!1,this.aniCom.bind(this),function(){window.pzaplantManager.plantCreateSun2(e.node.getPosition(),1,25)})))},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(s.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1);var i=c.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*c.pzaGameState.map.getBlockWidth())}}}}},i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([h],t)}(u.pzaBasePlant);e.pzaPeaSun=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPeaTrackBullet:[function(a,t,e){"use strict";cc._RF.push(t,"84fc5q04nNCj7/0zllpnnRq","pzaPeaTrackBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaTrackBullet=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGroupEnum"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaUtil"),u=a("../Data/pzaBuffData"),d=a("../Data/pzaZombieEnum"),h=a("../Effect/pzaBaseEffect"),m=a("../Plant/pzaPlantBody"),f=a("../Zombie/pzaZombieBody"),z=a("../pzaEffectManager"),y=a("../pzaGameState"),g=a("./pzaTrackBullet"),v=cc._decorator,b=v.ccclass,S=v.property,P=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.frostBulletNode=null,t.frostEffect=null,t.normalBulletNode=null,t.fireBulletNode=null,t.snowHitPrefab=null,t.hitPrefab=null,t.fireBall=null,t.bulletLevel=0,t.frozeTime=10,t.colliderWoods=new Set,t}return n(t,a),t.prototype.init=function(t,e,o,n){a.prototype.init.call(this,t,e,o,n),this.colliderWoods.clear(),this.refreshBulletState()},t.prototype.setBulletLevel=function(a){this.bulletLevel=a,this.refreshBulletState()},t.prototype.onCollision=function(a){if(null!=a&&!this.hasColl){if(a.node.group==p.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(f.pzaZombieBody);this.colliderZombie(t&&t.baseData)}a.node.group!=p.pzaGroupEnum.TORCHWOOD||this.colliderWoods.has(a)||this.colliderTorchWood(a)}},t.prototype.colliderTorchWood=function(a){var t=a&&a.node.getComponent(m.pzaPlantBody);null==t||null==t.baseData||t.baseData.isDead||this.bulletLevel>=2||(this.bulletLevel++,this.colliderWoods.add(a),this.refreshBulletState(),this.bulletLevel>=2&&s.pzaSoundManager.playAudio("Torchwood",.5))},t.prototype.refreshBulletState=function(){this.frostBulletNode.active=0==this.bulletLevel,this.frostEffect.active=0==this.bulletLevel,this.normalBulletNode.active=1==this.bulletLevel,this.fireBulletNode.active=2==this.bulletLevel},t.prototype.colliderZombie=function(a){a&&!a.isDead&&(a.zombieData&&a.zombieData.hypnosis||a.buffData.hasBuff(u.pzaBuffType.DIVE)||a.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||(0==this.bulletLevel?this.frostColliderZombie(a):1==this.bulletLevel?this.normalColliderZombie(a):this.fireColliderZombie(a)))},t.prototype.normalColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(t.hurt(this.atk),2===this.node.scale&&t.pushBack(.2),this.close(),this.playHitEffect(a))},t.prototype.frostColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);t&&(t.hurt(this.atk),this.close(),this.playHitEffect(a),t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(u.pzaBuffType.HARD_BODY)||t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_ICE_PEA)||(a.buffData.hasBuff(u.pzaBuffType.FROST)||this.playFrozenSound(),t.baseData.zombieData.zombieType!=d.pzaZombieEnum.NightWear&&a.buffData.addBuff(new u.pzaBuffInfo(u.pzaBuffType.FROST,this.frozeTime,.5))))},t.prototype.fireColliderZombie=function(a){var t=window.pzazombieManager.getZombie(a);if(t&&t.hurt(40),a.buffData.removeBuff(u.pzaBuffType.FROST),a.buffData.removeBuff(u.pzaBuffType.FROZEN),this.close(),this.playHitEffect(a),s.pzaSoundManager.playAudio("firepeaHit",.5),!t.baseData.buffData.hasBuff(u.pzaBuffType.IMM_SPATTER)){var e=window.pzazombieManager.findFixRangeZombies(a.logicPos,.5*y.pzaGameState.map.getBlockWidth());e&&e.forEach(function(t){null!=t&&t.baseData!=a&&(a.buffData.hasBuff(u.pzaBuffType.FLY)||a.buffData.hasBuff(u.pzaBuffType.DIVE)||a.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||t.hurt(13))})}},t.prototype.playHitEffect=function(a){var t=5,e=cc.v2(this.node.x,this.node.y);null!=a&&(t=10*-a.yIndex+5,e=cc.v2(a.logicPos.x,a.logicPos.y+70)),this.bulletLevel>=2&&z.pzaEffectManager.createBoomFireEffect(this.yIndex,0,e,null);var o=l.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=r.pzaGameCommonPool.requestInstant2(0==this.bulletLevel?this.snowHitPrefab:this.hitPrefab);n.setParent(o),n.zIndex=t,n.setPosition(e);var i=n.getComponent(h.pzaBaseEffect);i&&i.showEffect(null,null)}},t.prototype.playFrozenSound=function(){var a="frozen_"+c.pzaUtil.getRandomNum(1,2);s.pzaSoundManager.playAudio(a)},t.prototype.update=function(){this.fireBulletNode.active&&(this.fireBall.angle-=10)},i([S({displayName:"\u51b0\u971c\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"frostBulletNode",void 0),i([S({displayName:"\u51b0\u971c\u5b50\u5f39\u7279\u6548",type:cc.Node})],t.prototype,"frostEffect",void 0),i([S({displayName:"\u666e\u901a\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"normalBulletNode",void 0),i([S({displayName:"\u706b\u7130\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"fireBulletNode",void 0),i([S({displayName:"\u51b0\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"snowHitPrefab",void 0),i([S({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"hitPrefab",void 0),i([S(cc.Node)],t.prototype,"fireBall",void 0),i([b],t)}(g.pzaTrackBullet);e.pzaPeaTrackBullet=P,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../Plant/pzaPlantBody":"pzaPlantBody","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaTrackBullet":"pzaTrackBullet"}],pzaPeaZombie:[function(a,t,e){"use strict";cc._RF.push(t,"f2ddfXdJO5NHYe/+l4mt4b8","pzaPeaZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeaZombie=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaZombieBaseBullet"),c=a("../Data/pzaPlantEnum"),u=a("../Data/pzaZombieEnum"),d=a("../pzaGameState"),h=a("../pzaSpineTool"),m=a("./pzaNormalZombie"),f=a("./pzaZombieSlot"),z=a("./pzaZombieState"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.equip1Slot=null,t.hatSlotMap=new Map([[u.pzaZombieEnum.PeaZombie2,{slotName:f.pzaZombieSlotType.hat,attNameArr:[f.pzaZombieSlotType.hat+"1",f.pzaZombieSlotType.hat+"2",f.pzaZombieSlotType.helmet_black+"3"],arr1:[81.31,2.96,-93.13],arr2:[61.68,-20.07,-93.13],arr3:[60.85,-19.15,-93.13],isFei:!1}],[u.pzaZombieEnum.PeaZombie3,{slotName:f.pzaZombieSlotType.hat,attNameArr:[f.pzaZombieSlotType.hat_iron+"1",f.pzaZombieSlotType.hat_iron+"2",f.pzaZombieSlotType.hat_iron+"3"],arr1:[-7,45.25,-93.13],arr2:[-4.97,44.2,-93.13],arr3:[-5.46,30.63,-93.13],isFei:!0}],[u.pzaZombieEnum.PeaZombie4,{slotName:f.pzaZombieSlotType.door,attNameArr:[f.pzaZombieSlotType.door+"1",f.pzaZombieSlotType.door+"2",f.pzaZombieSlotType.door+"3"],arr1:[3.58,-9.88,0],arr2:[-11.41,-9.88,0],arr3:[-11.2,-6.09,0],isFei:!1}]]),t.garlicSkinName=null,t}return n(t,a),t.prototype.initEquips=function(){if(this.slotMap)this.slotMap.forEach(function(a){a.updateState(0,!0)});else{if(!this.baseData||!this.baseData.zombieData)return;this.slotMap=new Map([[f.pzaZombieSlotType.butter,new f.pzaZombieSlot(this.animation.spineAnimation,f.pzaZombieSlotType.butter).addState(new f.pzaZombieSlotAtt(1,f.pzaZombieSlotType.butter,61.81,13.02,-93.13))]]);var a=this.hatSlotMap.get(this.baseData.zombieData.zombieType);a&&(this.equip1Slot=a.slotName,this.slotMap.set(a.slotName,new f.pzaZombieSlot(this.animation.spineAnimation,a.slotName).addState(new f.pzaZombieSlotAtt(1,a.attNameArr[0],a.arr1[0],a.arr1[1],a.arr1[2])).addState(new f.pzaZombieSlotAtt(2,a.attNameArr[1],a.arr2[0],a.arr2[1],a.arr2[2])).addState(new f.pzaZombieSlotAtt(3,a.attNameArr[2],a.arr3[0],a.arr3[1],a.arr3[2]))))}},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=z.pzaZombieState.MOVE,this.animation.playAnimation(this.getMoveAniName(),!0,null,function(){a.shoot()},1)},t.prototype.playAttakAnimation=function(){var a=this;this.zombieState=z.pzaZombieState.EAT_ATK,this.animation.playAnimation(this.getAttackAniName(),!0,null,function(){var t=a.findTarget();if(null!=t&&!t.isDead&&null!=t.plantData&&t.plantData.plantType==c.pzaPlantEnum.HYPNO_SHROOM&&!t.plantData.sleeping){l.pzaSoundManager.playAudio("floop"),l.pzaSoundManager.playAudio("mindcontrolled"),t.isDead=!0,window.pzazombieManager.zombieHypnosis(a.baseData);var e=window.pzaplantManager.getPlantByData(t);e&&e.close(),window.pzaplantManager.removePlant(t)}})},t.prototype.shoot=function(){if(this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(a){l.pzaSoundManager.playAudio("PeashooterAtk");var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);t.setParent(a);var e=h.pzaSpineTool.findBonePos(this.animation.spineAnimation,"head3",this.node),o=a.convertToNodeSpaceAR(e);o.y-=15,t.setPosition(o);var n=t.getComponent(s.pzaZombieBaseBullet);n.init(this.baseData.yIndex,20);var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}},i([v(cc.Prefab)],t.prototype,"bulletPrefab",void 0),i([g],t)}(m.pzaNormalZombie);e.pzaPeaZombie=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaZombieBaseBullet":"pzaZombieBaseBullet","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaPeashooter:[function(a,t,e){"use strict";cc._RF.push(t,"136e0qMLeFJNLvOV19FzBd4","pzaPeashooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPeashooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),d.pzaGameState.isZombieMode())return this.attacking=!1,void this.animation.playAnimation("T_idle",!0);var o=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData)||e.findAttackTarget()){var a=s.pzaUtil.getRandomNum(1,5),t=0;e.animation.playAnimation("attack",!1,o,function(){a==++t&&(l.pzaSoundManager.playAudio("PeashooterAtk"),e.shoot())})}else e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle2",!1,o))};o(),d.pzaGameState.usePeaPlant=!0,d.pzaGameState.onlyShroomCofee=!1,d.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()&&window.pzazombieManager.hasCanAttackZombie(this.baseData)){var o=s.pzaUtil.getRandomNum(1,5),n=0;return l.pzaSoundManager.playAudio("PeashooterAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){o==++n&&e.shoot()})}},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,1);var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},t.prototype.findAttackTarget=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaPeashooter=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPitchFork:[function(a,t,e){"use strict";cc._RF.push(t,"1221fKj2XpJZoVlAQRLW44u","pzaPitchFork");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPitchFork=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGroupEnum"),s=a("../../Common/pzaSpineController"),c=a("../Data/pzaBuffData"),u=a("../Plant/pzaAttackType"),d=a("../Zombie/pzaZombieBody"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani=null,t.yIndex=-1,t.hasTrigger=!1,t.collider=null,t}return n(t,a),t.prototype.init=function(a){this.yIndex=a,this.hasTrigger=!1,this.ani.playAnimation("idle",!1),this.ani.pauseAnimation(),p.pzaCollisionManager.getInstance.addBulletByRow(this.yIndex,this)},t.prototype.close=function(){p.pzaCollisionManager.getInstance.delBulletByRow(this.yIndex,this),a.prototype.close.call(this)},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.onCollision=function(a){if(null!=a&&a.node.group==l.pzaGroupEnum.ZOMBIE){var t=a.node.getComponent(d.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderZombie=function(a){var t=this;if(!this.hasTrigger&&a&&!a.isDead&&(-1==this.yIndex||this.yIndex==a.yIndex)&&!(a.buffData.hasBuff(c.pzaBuffType.DIVE)||a.buffData.hasBuff(c.pzaBuffType.FLY)||a.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)||a.buffData.hasBuff(c.pzaBuffType.INVINCIBLE)||a.zombieData&&a.zombieData.hypnosis)){var e=window.pzazombieManager.getZombie(a);e&&e.hurt(5e4,u.pzaAttackType.NORMAL_BOOM),this.hasTrigger=!0,p.pzaCollisionManager.getInstance.delBulletByRow(this.yIndex,this),this.ani.playAnimation("idle",!1,function(){t.close()},function(){console.log("event")})}},t.prototype.pauseSelf=function(){this.hasTrigger&&this.ani.pauseAnimation()},t.prototype.resumeSelf=function(){this.hasTrigger&&this.ani.resumeAnimation()},i([f({displayName:"\u53c9\u5b50\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"ani",void 0),i([m],t)}(r.pzaBaseComponent);e.pzaPitchFork=z,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData","../Plant/pzaAttackType":"pzaAttackType","../Zombie/pzaZombieBody":"pzaZombieBody"}],pzaPlantBeltView:[function(a,t,e){"use strict";cc._RF.push(t,"d48aaIGJ4JNFaarGyGIrRf1","pzaPlantBeltView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantBeltView=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaBeltConfig"),s=a("../../Common/pzaGameCommonPool"),c=a("../../Common/pzaUtil"),u=a("../../Common/pzaWorldEventManager"),d=a("./pzaBeltCard"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.boardNode=null,t.belt1=null,t.belt2=null,t.cardContent=null,t.beltCardPre=null,t.beltSpeed=85,t.beltOriPos=null,t.beltCardList=[],t.createInterval=4,t.beltPause=!1,t.lastBeltPlant=null,t.totalCount=0,t}return n(t,a),t.prototype.onEnable=function(){u.pzaWorldEventManager.addListener(u.pzaWorldEventType.PLANT_PLANT,this.plantCall,this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},t.prototype.onDisable=function(){this.clearBeltCard(),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.PLANT_PLANT,this.plantCall,this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.SELECT_CARD,this.selectCard,this)},t.prototype.onLoad=function(){this.beltOriPos=cc.v2(this.belt1.x,this.belt1.y)},t.prototype.showView=function(a){this.belt1.setPosition(this.beltOriPos.clone()),this.belt2.setPosition(cc.v2(this.beltOriPos.x,this.beltOriPos.y-this.belt1.height)),this.totalCount=0,this.beltPause=!1,this.lastBeltPlant=null,this.boardNode.stopAllActions(),this.boardNode.setPosition(cc.v2(-200,0)),this.boardNode.runAction(cc.sequence(cc.moveTo(.2,cc.v2()),cc.callFunc(function(){a&&a()})));var t=l.pzaBeltConfig.getInitCard(this.totalCount,p.pzaGameState.curChapter,p.pzaGameState.curPart);this.createInterval=null!=t?l.pzaBeltConfig.InitCardInterval:l.pzaBeltConfig.getFirstCardInterval(p.pzaGameState.curChapter,p.pzaGameState.curPart)},t.prototype.update=function(a){if(!p.pzaGameState.gamePause&&!this.beltPause){var t=a*this.beltSpeed;this.belt1.y+=t,this.belt2.y+=t,this.belt1.y>=this.beltOriPos.y+720&&(this.belt1.y-=2*this.belt1.height),this.belt2.y>=this.beltOriPos.y+720&&(this.belt2.y-=2*this.belt1.height);for(var e=0;e<this.beltCardList.length;e++){var o=this.beltCardList[e],n=360-80*e;o.node.y>=n?8==e&&(this.beltPause=!0):o.node.y=Math.min(o.node.y+t,n)}this.createInterval-=a,this.createInterval<=0&&this.createCard()}},t.prototype.createCard=function(){if(!(this.beltCardList.length>=9)){var a=s.pzaGameCommonPool.requestInstant(this.beltCardPre);a.setParent(this.cardContent),a.setPosition(cc.v2(0,-360));var t=a.getComponent(d.pzaBeltCard);if(null!=t){var e=l.pzaBeltConfig.getInitCard(this.totalCount,p.pzaGameState.curChapter,p.pzaGameState.curPart);null==e&&(e=this.getRandomBeltPlant()),null!=e&&(t.bindData(e,this.clickCardCall.bind(this)),this.beltCardList.push(t)),this.totalCount++;var o=l.pzaBeltConfig.getInitCard(this.totalCount,p.pzaGameState.curChapter,p.pzaGameState.curPart);this.createInterval=null!=o?l.pzaBeltConfig.InitCardInterval:l.pzaBeltConfig.getNextCardInterval(p.pzaGameState.curChapter,p.pzaGameState.curPart,this.beltCardList.length)}}},t.prototype.getRandomBeltPlant=function(){var a=l.pzaBeltConfig.getBeltPlants(p.pzaGameState.curChapter,p.pzaGameState.curPart),t=l.pzaBeltConfig.getBeltPlantsWeight(p.pzaGameState.curChapter,p.pzaGameState.curPart);if(null==a||null==t)return null;for(var e=[],o=0;o<a.length;o++){var n=a[o],i=t[o],s=this.getBeltCardCount(n),u=i;if(n==r.pzaPlantEnum.GRAVE_BUSTER){var d=window.pzaplantManager.getPlantCount(n),h=window.pzaMapManager.TombMap.size;u=l.pzaBeltConfig.firstGraveBusterWeight(i,s+d,h)}else if(n==r.pzaPlantEnum.LILY_PAD)d=window.pzaplantManager.getPlantCount(n),u=l.pzaBeltConfig.firstLilypadWeight(i,s+d);else if(n==r.pzaPlantEnum.FLOWER_POT)d=window.pzaplantManager.getPlantCount(n),u=l.pzaBeltConfig.firstPotWeight(i,s+d);else if(n==r.pzaPlantEnum.MELON_PULT||n==r.pzaPlantEnum.CABBAGE_PULT){var m=window.pzaplantManager.getVoidPotCount();u=l.pzaBeltConfig.firstCabbageMelonWeight(i,m)}else n==r.pzaPlantEnum.KERNEL_PULT&&(m=window.pzaplantManager.getVoidPotCount(),u=l.pzaBeltConfig.firstKernelWeight(i,m));var f=l.pzaBeltConfig.sencondWeight(u,a.length,s,this.lastBeltPlant==n);n==r.pzaPlantEnum.FLOWER_POT&&p.pzaGameState.bangCaring&&(f=500),e.push(f)}return a[c.pzaUtil.getRandomIndexByWeight(e)]},t.prototype.getBeltCardCount=function(a){var t=0;return null==this.beltCardList?t:(this.beltCardList.forEach(function(e){null!=e&&e.plantType==a&&t++}),t)},t.prototype.selectCard=function(){p.pzaGameState.selectCard!=p.pzaSelectCardType.BELT_CARD&&this.clickCardCall()},t.prototype.clickCardCall=function(){null!=this.beltCardList&&this.beltCardList.forEach(function(a){a&&a.diselect()})},t.prototype.plantCall=function(){if(null!=this.beltCardList){this.beltCardList.length>=9&&(this.beltPause=!1);for(var a=0,t=0;t<this.beltCardList.length;t++){var e=this.beltCardList[t];null!=e&&e.hasSelect&&(e.close(),a=t)}this.beltCardList.splice(a,1)}},t.prototype.clearBeltCard=function(){null!=this.beltCardList&&(this.beltCardList.forEach(function(a){a&&a.close()}),this.beltCardList=[])},i([f({displayName:"\u9762\u677f\u8282\u70b9",type:cc.Node})],t.prototype,"boardNode",void 0),i([f({displayName:"\u4f20\u9001\u5e261",type:cc.Node})],t.prototype,"belt1",void 0),i([f({displayName:"\u4f20\u9001\u5e262",type:cc.Node})],t.prototype,"belt2",void 0),i([f({displayName:"\u5361\u7247\u5bb9\u5668",type:cc.Node})],t.prototype,"cardContent",void 0),i([f({displayName:"\u4f20\u9001\u5e26\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],t.prototype,"beltCardPre",void 0),i([m],t)}(cc.Component);e.pzaPlantBeltView=z,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaBeltConfig":"pzaBeltConfig","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","./pzaBeltCard":"pzaBeltCard"}],pzaPlantBody:[function(a,t,e){"use strict";cc._RF.push(t,"96c396uvMtPhLUJFoRD9JmK","pzaPlantBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantBody=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaPlantEnum"),s=a("../Data/pzaZombieEnum"),c=a("../pzaBaseBody"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ignoreTarget=new Set,t.yIndex=-1,t.collider=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.ignoreTarget.clear()},t.prototype.onDisable=function(){this.yIndex>-1&&r.pzaCollisionManager.getInstance.delPlantByRow(this.yIndex,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t&&t.yIndex>-1?(this.yIndex=t.yIndex,r.pzaCollisionManager.getInstance.addPlantByRow(this.yIndex,this)):this.yIndex=-1},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node.parent,this.collider):null},t.prototype.onCollisionExit=function(a){if(null!=a&&null!=this.curTarget){var t=a.node.getComponent(c.pzaBaseBody);null!=t&&t.baseData==this.curTarget&&(this.curTarget=null)}},t.prototype.onCollision=function(a){if(null!=a&&null==this.curTarget){var t=a.node.getComponent(c.pzaBaseBody);if(null!=t&&null!=t.baseData&&!t.baseData.isDead&&!this.ignoreTarget.has(t.baseData)&&!t.baseData.buffData.hasBuff(p.pzaBuffType.INVINCIBLE)&&this.baseData.yIndex==t.baseData.yIndex)if(t.baseData.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT))null!=this.baseData.plantData&&this.baseData.plantData.plantType==l.pzaPlantEnum.POTATO_MINE&&null!=t.baseData.zombieData&&t.baseData.zombieData.zombieType==s.pzaZombieEnum.DIGGER_ZOMBIE&&(this.curTarget=t.baseData);else if(null==this.baseData.plantData||this.baseData.plantData.plantType!=l.pzaPlantEnum.HYPNO_SHROOM||!t.baseData.buffData.hasBuff(p.pzaBuffType.IMM_HYPNOSIS))if(this.baseData.plantData.plantType!=l.pzaPlantEnum.POTATO_MINE||t.baseData.zombieData.zombieType!=s.pzaZombieEnum.POLEVAULTING_ZOMBIE||t.baseData.zombieData.toolType==s.pzaEquipType.NO_EQUIP)if(null==this.baseData.plantData||this.baseData.plantData.plantType!=l.pzaPlantEnum.POTATO_MINE&&this.baseData.plantData.plantType!=l.pzaPlantEnum.TANGLE_KELP){if(t.baseData.zombieData.direction>0){if(this.baseData.logicPos.x<t.baseData.logicPos.x)return}else if(this.baseData.logicPos.x>t.baseData.logicPos.x)return;this.curTarget=t.baseData}else this.curTarget=t.baseData;else this.ignoreTarget.add(t.baseData)}},i([d],t)}(c.pzaBaseBody));e.pzaPlantBody=h,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaBaseBody":"pzaBaseBody"}],pzaPlantCard:[function(a,t,e){"use strict";cc._RF.push(t,"7c370pfHupJy6vC3j5aNppR","pzaPlantCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantCard=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameConfig"),s=a("../../Common/pzaLocalData"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaSpriteFrameManager"),d=a("../../Common/pzaUtil"),h=a("../../Common/pzaWorldEventManager"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardBoard=null,t.swIcon=null,t.cardBoardFrames=[],t.cardIcon=null,t.priceLabel=null,t.cdStaticMask=null,t.cdMask=null,t.selectTag=null,t.guideMask=null,t.lockNode=null,t.curPlantType=null,t.imitaterPlant=!1,t.plantConfigData=null,t.clickCall=null,t.clickCallZj=null,t.showGuideArrow=null,t.putPlantToBagCall=null,t.bagSelect=!1,t.curPlantPrice=0,t.plantIdx=0,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.node._touchListener.setSwallowTouches(!1),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.UPDATE_PLANT_PRICE,this.updatePlantPrice,this),h.pzaWorldEventManager.addListener(h.pzaWorldEventType.RESET_CARD_STATE,this.resetCardState,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.UPDATE_PLANT_PRICE,this.updatePlantPrice,this),h.pzaWorldEventManager.removeListener(h.pzaWorldEventType.RESET_CARD_STATE,this.resetCardState,this)},t.prototype.resetCardState=function(){this.selectTag.active=!1},t.prototype.bagSelectPlant=function(a,t,e,o){void 0===e&&(e=!1),void 0===o&&(o=!1),this.bagSelect=!0,this.curPlantType=a,this.imitaterPlant=e,this.putPlantToBagCall=t,null!=this.curPlantType?(this.node.active=!0,this.cdStaticMask.active=!1,this.cdMask.node.active=!1,this.selectTag.active=!1,this.guideMask.active=!1,e&&(a=p.pzaGameState.curImitaterPlant),this.plantConfigData=l.pzaGameConfig.getPlantConfig(a),this.plantConfigData?(u.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),this.cardBoard.spriteFrame=e?this.cardBoardFrames[0]:this.cardBoardFrames[this.plantConfigData.rareLevel],this.priceLabel.node.active=!0,this.curPlantPrice=p.pzaGameState.getPlantPrice(a,!0),p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS&&l.pzaGameConfig.isAdvancePlant(a)?this.priceLabel.string=this.curPlantPrice+"+":this.priceLabel.string=""+this.curPlantPrice,d.pzaUtil.switchGraySprite(this.cardIcon,e),this.swIcon.active=!1,a==r.pzaPlantEnum.SUPER_CHOMPER&&s.pzaLocalData.data.superChomperTrial>0&&s.pzaLocalData.data.superChomperTrial<1e3&&(this.swIcon.active=!0),o&&this.lockNode&&(this.lockNode.active=!0)):console.error("\u65e0\u6b64\u690d\u7269\u914d\u7f6e",a)):this.node.active=!1},t.prototype.bindData=function(a,t,e,o){void 0===o&&(o=0),this.bagSelect=!1,this.curPlantType=a,this.clickCall=t,this.showGuideArrow=e,null!=a?(a==r.pzaPlantEnum.IMITATER&&(a=p.pzaGameState.curImitaterPlant,this.imitaterPlant=!0),p.pzaGameState.isZjMode()?o<8&&(this.node.active=!0):this.node.active=!0,this.cdStaticMask.active=!1,this.cdMask.node.active=!1,this.selectTag.active=!1,this.guideMask.active=!1,this.plantConfigData=l.pzaGameConfig.getPlantConfig(a),u.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),this.imitaterPlant?this.cardBoard.spriteFrame=this.cardBoardFrames[0]:this.cardBoard.spriteFrame=this.cardBoardFrames[this.plantConfigData.rareLevel],this.priceLabel.node.active=!0,this.curPlantPrice=p.pzaGameState.getPlantPrice(a),p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS&&l.pzaGameConfig.isAdvancePlant(a),this.priceLabel.string=""+this.curPlantPrice,d.pzaUtil.switchGraySprite(this.cardIcon,!1),d.pzaUtil.switchGraySprite(this.cardIcon,this.imitaterPlant),this.plantIdx=o+1,this.swIcon.active=!1,a==r.pzaPlantEnum.SUPER_CHOMPER&&s.pzaLocalData.data.superChomperTrial>0&&s.pzaLocalData.data.superChomperTrial<1e3&&(this.swIcon.active=!0)):this.node.active=!1},t.prototype.bindDataZj=function(a,t,e,o){void 0===o&&(o=0),this.bagSelect=!1,this.curPlantType=a,this.clickCallZj=t,this.showGuideArrow=e,null!=a&&(a==r.pzaPlantEnum.IMITATER&&(a=p.pzaGameState.curImitaterPlant,this.imitaterPlant=!0),p.pzaGameState.isZjMode()?o<8&&(this.node.active=!0):this.node.active=!0,this.cdStaticMask.active=!1,this.cdMask.node.active=!1,this.selectTag.active=!1,this.guideMask.active=!1,this.plantConfigData=l.pzaGameConfig.getPlantConfig(a),u.pzaSpriteFrameManager.loadPlantCard(a,this.cardIcon),this.imitaterPlant?this.cardBoard.spriteFrame=this.cardBoardFrames[2]:this.cardBoard.spriteFrame=this.cardBoardFrames[this.plantConfigData.rareLevel],this.priceLabel.node.active=!0,this.curPlantPrice=p.pzaGameState.getPlantPrice(a),p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS&&l.pzaGameConfig.isAdvancePlant(a),this.priceLabel.string=""+this.curPlantPrice,d.pzaUtil.switchGraySprite(this.cardIcon,!1),d.pzaUtil.switchGraySprite(this.cardIcon,this.imitaterPlant),this.plantIdx=o+1,this.swIcon.active=!1)},t.prototype.clickCard=function(){if(!(this.lockNode&&this.lockNode.active||null==this.curPlantType)){if(this.bagSelect)return this.putPlantToBagCall&&this.putPlantToBagCall(this),void c.pzaSoundManager.playSFX();var a=p.pzaGameState.selectPlant;p.pzaGameState.isZjMode()?this.clickCallZj&&this.clickCallZj(this.curPlantType,this.plantIdx):this.clickCall&&this.clickCall(this.curPlantType),a==this.curPlantType&&(p.pzaGameState.selectCard=null,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null,p.pzaGameState.selectIdx=0)}},t.prototype.update=function(){if(null!=this.curPlantType&&!p.pzaGameState.gamePause){this.lockNode&&this.lockNode.active&&(this.lockNode.active=!1);var a=window.pzaplantManager.getPlantCD(this.curPlantType,this.plantIdx);if(a>0){this.selectTag.active=!1,this.cdStaticMask.active=!0,this.cdMask.node.active=!0;var t=this.plantConfigData.createCD;this.cdMask.fillRange=-a/t}else this.cdMask.node.active=!1,p.pzaGameState.sunLightCount>=this.curPlantPrice?(this.cdStaticMask.active=!1,this.refreshGuide()):this.cdStaticMask.active=!0}},t.prototype.select=function(){if(null!=this.curPlantType){if(window.pzaplantManager.getPlantCD(this.curPlantType,this.plantIdx)>0)return p.pzaGameState.selectCard=null,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null,h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SELECT_CARD,null),void c.pzaSoundManager.playAudio("sunlack");if(this.curPlantPrice>p.pzaGameState.sunLightCount)return h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.LACK_SUN,null),c.pzaSoundManager.playAudio("sunlack"),p.pzaGameState.selectCard=null,p.pzaGameState.selectPlant=null,p.pzaGameState.cobCannon=null,void h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SELECT_CARD,null);p.pzaGameState.selectCard=p.pzaSelectCardType.SLOT_CARD,p.pzaGameState.selectPlant=this.curPlantType,p.pzaGameState.selectIdx=this.plantIdx,p.pzaGameState.cobCannon=null,this.selectTag.active=!0,this.refreshGuide(),c.pzaSoundManager.playAudio("selectPlant"),h.pzaWorldEventManager.triggerEvent(h.pzaWorldEventType.SELECT_CARD,null)}},t.prototype.diselect=function(){this.selectTag.active=!1},t.prototype.refreshGuide=function(){if(!this.imitaterPlant){var a=this.curPlantType==window.pzaGuideManager.guidePlant&&null==p.pzaGameState.selectPlant;a?this.guideMask.active||(this.guideMask.active=!0,this.guideMask.stopAllActions(),this.guideMask.opacity=0,this.guideMask.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(1,200),cc.fadeOut(.5)))),this.showGuideArrow&&this.showGuideArrow(cc.v2(this.node.x+63,this.node.y-100))):a||this.guideMask.active&&(this.guideMask.active=!1,this.showGuideArrow&&this.showGuideArrow(null))}},t.prototype.updatePrice=function(){this.curPlantPrice=p.pzaGameState.getPlantPrice(this.curPlantType),this.priceLabel.string=""+this.curPlantPrice},t.prototype.updatePlantPrice=function(a){p.pzaGameState.gameMode==p.pzaGameMode.SUR_ENDLESS&&a==this.curPlantType&&l.pzaGameConfig.isAdvancePlant(a)&&(this.curPlantPrice=p.pzaGameState.getPlantPrice(a),this.priceLabel.string=""+this.curPlantPrice)},t.prototype.moveTo=function(a,t,e){null!=a&&this.node.runAction(cc.sequence(cc.moveTo(t,a),cc.callFunc(function(){e&&e()})))},i([z({displayName:"\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"cardBoard",void 0),i([z({displayName:"\u8bd5\u73a9\u89d2\u6807",type:cc.Node})],t.prototype,"swIcon",void 0),i([z({displayName:"\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"cardBoardFrames",void 0),i([z({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([z({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],t.prototype,"priceLabel",void 0),i([z({displayName:"cd\u906e\u7f69\u9759\u6001",type:cc.Node})],t.prototype,"cdStaticMask",void 0),i([z({displayName:"cd\u906e\u7f69\u52a8\u6001",type:cc.Sprite})],t.prototype,"cdMask",void 0),i([z({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"selectTag",void 0),i([z({displayName:"\u5f15\u5bfc\u906e\u7f69",type:cc.Node})],t.prototype,"guideMask",void 0),i([z({displayName:"\u9501\u6807\u5fd7",type:cc.Node})],t.prototype,"lockNode",void 0),i([f],t)}(cc.Component);e.pzaPlantCard=y,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaPlantEnum:[function(a,t,e){"use strict";cc._RF.push(t,"a65bb2FjL9ESa64+zIqKD9N","pzaPlantEnum"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantEnvEnum=e.pzaPlantCate=e.pzaPlantEnum=void 0,function(a){a[a.PEA_SHOOTER=1]="PEA_SHOOTER",a[a.SUN_FLOWER=2]="SUN_FLOWER",a[a.CHERRY_BOMB=3]="CHERRY_BOMB",a[a.WALL_NUT=4]="WALL_NUT",a[a.POTATO_MINE=5]="POTATO_MINE",a[a.SNOW_PEA=6]="SNOW_PEA",a[a.CHOMPER=7]="CHOMPER",a[a.REPEATER=8]="REPEATER",a[a.PUFF_SHROOM=9]="PUFF_SHROOM",a[a.SUN_SHROOM=10]="SUN_SHROOM",a[a.FUME_SHROOM=11]="FUME_SHROOM",a[a.GRAVE_BUSTER=12]="GRAVE_BUSTER",a[a.HYPNO_SHROOM=13]="HYPNO_SHROOM",a[a.SCAREDY_SHROOM=14]="SCAREDY_SHROOM",a[a.ICE_SHROOM=15]="ICE_SHROOM",a[a.DOOM_SHROOM=16]="DOOM_SHROOM",a[a.LILY_PAD=17]="LILY_PAD",a[a.SQUASH=18]="SQUASH",a[a.THREE_PEATER=19]="THREE_PEATER",a[a.TANGLE_KELP=20]="TANGLE_KELP",a[a.JALAPENO=21]="JALAPENO",a[a.SPIKEWEED=22]="SPIKEWEED",a[a.TORCHWOOD=23]="TORCHWOOD",a[a.TALL_NUT=24]="TALL_NUT",a[a.SEA_SHROOM=25]="SEA_SHROOM",a[a.PLANTERN=26]="PLANTERN",a[a.CACTUS=27]="CACTUS",a[a.BLOVER=28]="BLOVER",a[a.SPLIT_PEA=29]="SPLIT_PEA",a[a.STAR_FRUIT=30]="STAR_FRUIT",a[a.PUMPKIN=31]="PUMPKIN",a[a.MAGNET_SHROOM=32]="MAGNET_SHROOM",a[a.CABBAGE_PULT=33]="CABBAGE_PULT",a[a.FLOWER_POT=34]="FLOWER_POT",a[a.KERNEL_PULT=35]="KERNEL_PULT",a[a.COFFEE_BEAN=36]="COFFEE_BEAN",a[a.GARLIC=37]="GARLIC",a[a.UMBRELLA_LEAF=38]="UMBRELLA_LEAF",a[a.MARIGOLD=39]="MARIGOLD",a[a.MELON_PULT=40]="MELON_PULT",a[a.GATLING_PEA=41]="GATLING_PEA",a[a.TWIN_SUNFLOWER=42]="TWIN_SUNFLOWER",a[a.GLOOM_SHROOM=43]="GLOOM_SHROOM",a[a.CATTAIL=44]="CATTAIL",a[a.WINTER_MELON=45]="WINTER_MELON",a[a.GOLD_MAGNET=46]="GOLD_MAGNET",a[a.SPIKEROCK=47]="SPIKEROCK",a[a.COB_CANNON=48]="COB_CANNON",a[a.IMITATER=49]="IMITATER",a[a.SUPER_CHOMPER=51]="SUPER_CHOMPER",a[a.BOOM_NUT=52]="BOOM_NUT",a[a.WALL_NUT_BOWLING=1e3]="WALL_NUT_BOWLING",a[a.BOOM_NUT_BOWLING=1001]="BOOM_NUT_BOWLING",a[a.TALL_NUT_BOWLING=1002]="TALL_NUT_BOWLING",a[a.ICE_NUT=175]="ICE_NUT",a[a.TreasureBuster=177]="TreasureBuster",a[a.SunBomb=103]="SunBomb",a[a.MelonNut=140]="MelonNut",a[a.HoleNut=167]="HoleNut",a[a.MagnetNut=132]="MagnetNut",a[a.ZombieNut=163]="ZombieNut",a[a.VipNut=162]="VipNut",a[a.HeighIceNut=124]="HeighIceNut",a[a.PumpkinPurple=131]="PumpkinPurple",a[a.TorchNut=104]="TorchNut",a[a.FireNut=150]="FireNut",a[a.IceCat=152]="IceCat",a[a.HamburgShooter=141]="HamburgShooter",a[a.HotDog=156]="HotDog",a[a.ShiftNut=173]="ShiftNut",a[a.DoomCannon=148]="DoomCannon",a[a.SunFlowerPlus=110]="SunFlowerPlus",a[a.SunBean=102]="SunBean",a[a.SunMine=105]="SunMine",a[a.FireMine=149]="FireMine",a[a.SquashNut=174]="SquashNut",a[a.IceSquash=118]="IceSquash",a[a.SquashKing=158]="SquashKing",a[a.ButterJoker=159]="ButterJoker",a[a.GarlicJalapeno=161]="GarlicJalapeno",a[a.CherryJalapeno=121]="CherryJalapeno",a[a.IceBlover=155]="IceBlover",a[a.PeaCannon=127]="PeaCannon",a[a.ButterGloomShroom=143]="ButterGloomShroom",a[a.RandomPlantBox=136]="RandomPlantBox",a[a.PeaPool=119]="PeaPool",a[a.SpikeRockNut=147]="SpikeRockNut",a[a.SunQueen=160]="SunQueen",a[a.PeaSun=101]="PeaSun",a[a.SunPot=134]="SunPot",a[a.WildPea=183]="WildPea",a[a.CupidShooter=164]="CupidShooter",a[a.QQFUME_SHROOM=168]="QQFUME_SHROOM",a[a.ICEFUME_SHROOM=111]="ICEFUME_SHROOM",a[a.IceSpike=169]="IceSpike",a[a.CATLITTERPOT=166]="CATLITTERPOT",a[a.SpikeChomper=191]="SpikeChomper",a[a.PumpkinPurpleFire=153]="PumpkinPurpleFire",a[a.MarigoldMammon=165]="MarigoldMammon",a[a.CatSun=197]="CatSun",a[a.SunShroomShooter=145]="SunShroomShooter",a[a.IceCat2=106]="IceCat2",a[a.HoloCards=178]="HoloCards"}(e.pzaPlantEnum||(e.pzaPlantEnum={})),function(a){a[a.Null=0]="Null",a[a.Nut=1]="Nut",a[a.Spike=2]="Spike",a[a.Gargantuar=3]="Gargantuar"}(e.pzaPlantCate||(e.pzaPlantCate={})),function(a){a[a.NORMAL=0]="NORMAL",a[a.SOIL=1]="SOIL",a[a.TOMB=2]="TOMB",a[a.POND=3]="POND",a[a.GRASS=4]="GRASS",a[a.ROOF=5]="ROOF",a[a.SHROOM=6]="SHROOM",a[a.BOTH=9]="BOTH",a[a.ALL=14]="ALL",a[a.WithRoof=15]="WithRoof"}(e.pzaPlantEnvEnum||(e.pzaPlantEnvEnum={})),cc._RF.pop()},{}],pzaPlantHandbookView:[function(a,t,e){"use strict";cc._RF.push(t,"e34a1VvNv1H9J5Da8DtogW6","pzaPlantHandbookView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantHandbookView=void 0;var r=a("../Battle/Data/pzaPlantEnum"),p=a("../Battle/Plant/pzaBasePlant"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaGameConfig"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaSoundManager"),d=a("../Load/pzaBundleObjectPool"),h=a("../Load/pzaPreLoadManager"),m=a("./pzaHandbookCard"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardPrefab=null,t.cardContent=null,t.plantName=null,t.plantDesc=null,t.plantProp=null,t.special=null,t.bg1=null,t.bg2=null,t.plantCD=null,t.sunPrice=null,t.txtScroll=null,t.zjTxtScroll=null,t.plantAniBg=null,t.plantAniBgFrame=[],t.plantAniNode=null,t.shadow=null,t.cardScroll=null,t.zjProp=null,t.zjPower=null,t.zjArea=null,t.zjSpecial=null,t.zjDeathWord=null,t.zjDesc=null,t.zjCdSpeed=null,t.zjCost=null,t.title=null,t.handbookCardArr=[],t.curPlant=null,t.plantCardList=null,t.plantAni=null,t.closeCall=null,t}return n(t,a),t.prototype.onEnable=function(){if(this.plantCardList=[],c.pzaLocalData.isClickZj){for(var a=[r.pzaPlantEnum.ICE_NUT,r.pzaPlantEnum.TreasureBuster,r.pzaPlantEnum.SunBomb,r.pzaPlantEnum.MelonNut,r.pzaPlantEnum.HoleNut,r.pzaPlantEnum.MagnetNut,r.pzaPlantEnum.ZombieNut,r.pzaPlantEnum.VipNut,r.pzaPlantEnum.HeighIceNut,r.pzaPlantEnum.PumpkinPurple,r.pzaPlantEnum.TorchNut,r.pzaPlantEnum.FireNut,r.pzaPlantEnum.IceCat,r.pzaPlantEnum.HamburgShooter,r.pzaPlantEnum.HotDog,r.pzaPlantEnum.ShiftNut,r.pzaPlantEnum.DoomCannon,r.pzaPlantEnum.SunFlowerPlus,r.pzaPlantEnum.SunBean,r.pzaPlantEnum.SunMine,r.pzaPlantEnum.FireMine,r.pzaPlantEnum.SquashNut,r.pzaPlantEnum.IceSquash,r.pzaPlantEnum.SquashKing,r.pzaPlantEnum.ButterJoker,r.pzaPlantEnum.GarlicJalapeno,r.pzaPlantEnum.CherryJalapeno,r.pzaPlantEnum.IceBlover,r.pzaPlantEnum.PeaCannon,r.pzaPlantEnum.ButterGloomShroom,r.pzaPlantEnum.RandomPlantBox,r.pzaPlantEnum.PeaPool,r.pzaPlantEnum.SpikeRockNut,r.pzaPlantEnum.SunQueen,r.pzaPlantEnum.PeaSun,r.pzaPlantEnum.SunPot,r.pzaPlantEnum.WildPea,r.pzaPlantEnum.CupidShooter,r.pzaPlantEnum.QQFUME_SHROOM,r.pzaPlantEnum.ICEFUME_SHROOM,r.pzaPlantEnum.IceSpike,r.pzaPlantEnum.CATLITTERPOT,r.pzaPlantEnum.SpikeChomper,r.pzaPlantEnum.PumpkinPurpleFire,r.pzaPlantEnum.MarigoldMammon,r.pzaPlantEnum.CatSun,r.pzaPlantEnum.SunShroomShooter,r.pzaPlantEnum.IceCat2,r.pzaPlantEnum.HoloCards],t=0;t<a.length;t++)(o=l.pzaGameCommonPool.requestInstant(this.cardPrefab)).setParent(this.cardContent),null!=(n=o.getComponent(m.pzaHandbookCard))&&(n.zjBindData(a[t],this.showZjPlant.bind(this)),this.plantCardList.push(n),this.handbookCardArr.push(n));this.txtScroll.node.active=!1,this.zjTxtScroll.node.active=!0,this.showZjPlant(r.pzaPlantEnum.ICE_NUT),this.title.string="\u6742\u4ea4\u7248-\u690d\u7269"}else{for(var e=r.pzaPlantEnum.PEA_SHOOTER;e<=r.pzaPlantEnum.IMITATER;e++)(o=l.pzaGameCommonPool.requestInstant(this.cardPrefab)).setParent(this.cardContent),null!=(n=o.getComponent(m.pzaHandbookCard))&&(n.bindData(e,this.showPlant.bind(this)),this.plantCardList.push(n));for(e=r.pzaPlantEnum.SUPER_CHOMPER;e<=r.pzaPlantEnum.BOOM_NUT;e++){var o,n;(o=l.pzaGameCommonPool.requestInstant(this.cardPrefab)).setParent(this.cardContent),(n=o.getComponent(m.pzaHandbookCard)).bindData(e,this.showPlant.bind(this)),this.plantCardList.push(n)}this.txtScroll.node.active=!0,this.zjTxtScroll.node.active=!1,this.curPlant=null,this.showPlant(r.pzaPlantEnum.PEA_SHOOTER),this.cardScroll.scrollToTop(),this.title.string="\u7ecf\u5178\u7248-\u690d\u7269"}},t.prototype.onDisable=function(){null!=this.plantCardList&&this.plantCardList.forEach(function(a){a&&a.close()}),this.plantCardList=null,null!=this.plantAni&&(this.plantAni.close(),this.plantAni=null)},t.prototype.bindCloseCall=function(a){this.closeCall=a},t.prototype.showPlant=function(a){var t=this;if(this.curPlant!=a){this.curPlant=a;var e=s.pzaGameConfig.getPlantConfig(a),o=s.pzaGameConfig.PlantBookMap.get(a);if(null!=e&&null!=o){this.plantName.string=e.name,this.plantDesc.node.active=null!=o.desc,null!=o.desc&&(this.plantDesc.string=o.desc),this.plantProp.node.active=null!=o.prop,null!=o.prop&&(this.plantProp.string=o.prop),this.special.node.active=null!=o.special,null!=o.special&&(this.special.string=o.special),this.bg1.node.active=null!=o.bg1,null!=o.bg1&&(this.bg1.string=o.bg1),this.bg2.node.active=null!=o.bg2,null!=o.bg2&&(this.bg2.string=o.bg2),this.plantCD.node.active=null!=o.cd,null!=o.cd&&(this.plantCD.string=o.cd),a==r.pzaPlantEnum.IMITATER?this.sunPrice.string="":this.sunPrice.string="<color=#aa582b>\u6d88\u8017\u9633\u5149\uff1a</c><color=#e6300d>"+e.price+"</color>",this.txtScroll.scrollToTop(),a==r.pzaPlantEnum.LILY_PAD||a==r.pzaPlantEnum.TANGLE_KELP||a==r.pzaPlantEnum.CATTAIL?this.plantAniBg.spriteFrame=this.plantAniBgFrame[2]:a==r.pzaPlantEnum.SEA_SHROOM?this.plantAniBg.spriteFrame=this.plantAniBgFrame[3]:a==r.pzaPlantEnum.FLOWER_POT?this.plantAniBg.spriteFrame=this.plantAniBgFrame[4]:e.isNight||a==r.pzaPlantEnum.GRAVE_BUSTER||a==r.pzaPlantEnum.PLANTERN?this.plantAniBg.spriteFrame=this.plantAniBgFrame[1]:this.plantAniBg.spriteFrame=this.plantAniBgFrame[0],this.shadow.active=!1,null!=this.plantAni&&(this.plantAni.close(),this.plantAni=null);var n=h.pzaPreLoadManager.getPlantUrl(a);d.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(e,o){null==e&&null!=o?(o.setParent(t.plantAniNode),o.zIndex=0,a==r.pzaPlantEnum.COB_CANNON?o.setPosition(cc.v2(-60,0)):o.setPosition(cc.v2()),null!=t.plantAni&&t.plantAni.close(),t.plantAni=o.getComponent(p.pzaBasePlant),null!=t.plantAni&&(t.plantAni.uiShow(),t.plantAni.needShadow&&(t.shadow.active=!0,t.shadow.setPosition(cc.v2(t.plantAni.shadowOffset.x,t.plantAni.shadowOffset.y)),t.shadow.setScale(t.plantAni.shadowScale)))):console.error(e)})}}},t.prototype.showZjPlant=function(a){var t=this;if(this.curPlant!=a){this.curPlant=a;var e=s.pzaGameConfig.ZjPlantBookMap.get(a);if(null!=e){this.plantName.string=e.name,this.zjProp.node.active=null!=e.prop,null!=e.prop&&(this.zjProp.string=e.prop),this.zjPower.node.active=null!=e.power,null!=e.power&&(this.zjPower.string=e.power),this.zjArea.node.active=null!=e.area,null!=e.area&&(this.zjArea.string=e.area),this.zjSpecial.node.active=null!=e.special,null!=e.special&&(this.zjSpecial.string=e.special),this.zjDeathWord.node.active=null!=e.deathWord,null!=e.deathWord&&(this.zjDeathWord.string=e.deathWord),this.zjDesc.node.active=null!=e.desc,null!=e.desc&&(this.zjDesc.string=e.desc),this.zjCdSpeed.node.active=null!=e.speed,null!=e.speed&&(this.zjCdSpeed.string=e.speed),this.zjCost.node.active=null!=e.cost,null!=e.cost&&(this.zjCost.string=e.cost),this.zjTxtScroll.scrollToTop();var o=h.pzaPreLoadManager.getPlantUrl(a);d.pzaBundleObjectPool.requestInstantByUrl(o,!1,function(e,o){null==e&&null!=o?(o.setParent(t.plantAniNode),o.zIndex=0,a==r.pzaPlantEnum.COB_CANNON?o.setPosition(cc.v2(-60,0)):o.setPosition(cc.v2()),a==r.pzaPlantEnum.HotDog&&(o.setPosition(cc.v2(-45,0)),o.scaleX=.85,o.scaleY=.85),a==r.pzaPlantEnum.DoomCannon&&(o.setPosition(cc.v2(-45,0)),o.scaleX=.9,o.scaleY=.9),a==r.pzaPlantEnum.PeaCannon&&o.setPosition(cc.v2(-45,0)),null!=t.plantAni&&t.plantAni.close(),t.plantAni=o.getComponent(p.pzaBasePlant),null!=t.plantAni&&(t.plantAni.uiShow(),t.plantAni.needShadow&&(t.shadow.active=!0,t.shadow.setPosition(cc.v2(t.plantAni.shadowOffset.x,t.plantAni.shadowOffset.y)),t.shadow.setScale(t.plantAni.shadowScale)))):console.error(e)})}}},t.prototype.clickBack=function(){u.pzaSoundManager.playSFX(),this.close()},t.prototype.clickClose=function(){u.pzaSoundManager.playSFX(),this.close(),this.closeCall&&this.closeCall()},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([y({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cardPrefab",void 0),i([y({displayName:"\u5361\u7247\u5bb9\u5668",type:cc.Node})],t.prototype,"cardContent",void 0),i([y({displayName:"\u690d\u7269\u540d\u79f0",type:cc.Label})],t.prototype,"plantName",void 0),i([y({displayName:"\u690d\u7269\u4ecb\u7ecd",type:cc.Label})],t.prototype,"plantDesc",void 0),i([y({displayName:"\u690d\u7269\u5c5e\u6027",type:cc.RichText})],t.prototype,"plantProp",void 0),i([y({displayName:"\u7279\u6b8a",type:cc.RichText})],t.prototype,"special",void 0),i([y({displayName:"\u80cc\u666f\u63cf\u8ff01",type:cc.Label})],t.prototype,"bg1",void 0),i([y({displayName:"\u80cc\u666f\u63cf\u8ff02",type:cc.Label})],t.prototype,"bg2",void 0),i([y({displayName:"\u6062\u590d\u65f6\u95f4",type:cc.RichText})],t.prototype,"plantCD",void 0),i([y({displayName:"\u6d88\u8017\u9633\u5149",type:cc.RichText})],t.prototype,"sunPrice",void 0),i([y({displayName:"\u6587\u672cScroll",type:cc.ScrollView})],t.prototype,"txtScroll",void 0),i([y({displayName:"\u6742\u4ea4\u6587\u672cscroll",type:cc.ScrollView})],t.prototype,"zjTxtScroll",void 0),i([y({displayName:"\u690d\u7269\u52a8\u753b\u80cc\u666f\u56fe",type:cc.Sprite})],t.prototype,"plantAniBg",void 0),i([y({displayName:"\u690d\u7269\u52a8\u753b\u80cc\u666f\u56fe\u96c6",type:[cc.SpriteFrame]})],t.prototype,"plantAniBgFrame",void 0),i([y({displayName:"\u690d\u7269\u52a8\u753b\u8282\u70b9",type:cc.Node})],t.prototype,"plantAniNode",void 0),i([y({displayName:"\u690d\u7269\u5f71\u5b50",type:cc.Node})],t.prototype,"shadow",void 0),i([y({displayName:"\u5361\u7247Scroll",type:cc.ScrollView})],t.prototype,"cardScroll",void 0),i([y({displayName:"\u6742\u4ea4\u690d\u7269\u5c5e\u6027",type:cc.Label})],t.prototype,"zjProp",void 0),i([y({displayName:"\u6742\u4ea4\u690d\u7269\u5a01\u529b",type:cc.RichText})],t.prototype,"zjPower",void 0),i([y({displayName:"\u6742\u4ea4\u690d\u7269\u8303\u56f4",type:cc.RichText})],t.prototype,"zjArea",void 0),i([y({displayName:"\u6742\u4ea4\u690d\u7269\u7279\u70b9",type:cc.RichText})],t.prototype,"zjSpecial",void 0),i([y({displayName:"\u6742\u4ea4\u690d\u7269\u4ea1\u8bed",type:cc.RichText})],t.prototype,"zjDeathWord",void 0),i([y({displayName:"\u6742\u4ea4\u690d\u7269\u4ecb\u7ecd",type:cc.Label})],t.prototype,"zjDesc",void 0),i([y({displayName:"\u6742\u4ea4\u690d\u7269\u51b7\u5374\u901f\u5ea6",type:cc.RichText})],t.prototype,"zjCdSpeed",void 0),i([y({displayName:"\u6742\u4ea4\u690d\u7269\u6d88\u8017",type:cc.RichText})],t.prototype,"zjCost",void 0),i([y({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"title",void 0),i([z],t)}(cc.Component);e.pzaPlantHandbookView=g,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Plant/pzaBasePlant":"pzaBasePlant","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaHandbookCard":"pzaHandbookCard"}],pzaPlantManager:[function(a,t,e){"use strict";cc._RF.push(t,"43616PuMRlF4ooGSkXeY6Ka","pzaPlantManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantManager=void 0;var r=a("../Achieve/pzaAchieve"),p=a("../Achieve/pzaAchieveMgr"),l=a("../Common/pzaBaseComponent"),s=a("../Common/pzaGameConfig"),c=a("../Common/pzaGameManager"),u=a("../Common/pzaGamePartConfig"),d=a("../Common/pzaGameSurEndless"),h=a("../Common/pzaGameSurvival"),m=a("../Common/pzaGameZJ"),f=a("../Common/pzaLocalData"),z=a("../Common/pzaMapManager"),y=a("../Common/pzaNodeManager"),g=a("../Common/pzaSoundManager"),v=a("../Common/pzaTipManager"),b=a("../Common/pzaUtil"),S=a("../Common/pzaWorldEventManager"),P=a("../Common/pzaZJPlantConf"),C=a("../Load/pzaBundleObjectPool"),D=a("../Load/pzaPreLoadManager"),M=a("./Data/pzaBaseData"),E=a("./Data/pzaGuideType"),_=a("./Data/pzaPlantEnum"),T=a("./Plant/pzaAttackType"),w=a("./Plant/pzaJalapeno"),A=a("./Plant/pzaStarFruitShadow"),B=a("./pzaBrain"),G=a("./pzaEffectManager"),O=a("./pzaGameState"),I=a("./pzaJar"),N=a("./pzaSunLight"),R=cc._decorator,L=R.ccclass,k=(R.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.plantDataMap=new Map,t.plantEnvDataMap=new Map,t.pumpkinDataMap=new Map,t.holeMap=new Map,t.notTargetMap=new Map,t.plantMap=new Map,t.plantCdMap=new Map,t.AllSunLight=new Set,t.pzaJarMap=new Map,t.dropPlantCards=new Set,t.brainMap=new Map,t.curSelectPlants=null,t.starFruitMap=new Map,t.sunAutoCount=0,t.sunAutoCD=0,t.twoBlockPlantMap=new Set([_.pzaPlantEnum.COB_CANNON,_.pzaPlantEnum.HotDog,_.pzaPlantEnum.DoomCannon,_.pzaPlantEnum.PeaCannon]),t.checkPlantTypeMap=new Map([[1e3,function(a){return a<=2?1:0}],[_.pzaPlantEnum.BOOM_NUT_BOWLING,function(a){return a<=2?1:0}],[_.pzaPlantEnum.GRAVE_BUSTER,function(a,t,e,o){return o?2:(e&&v.pzaTipManager.showSpecialPlantTip(O.pzaGameState.selectPlant,s.pzaGameConfig.getPlantConfig(O.pzaGameState.selectPlant).name),0)}],[_.pzaPlantEnum.WALL_NUT,function(a,e){var o=t.plantDataMap.get(""+a+e);return null!=o&&null!=o.plantData&&o.plantData.plantType==O.pzaGameState.selectPlant&&f.pzaLocalData.hasNutHealing()?1:2}],[_.pzaPlantEnum.TALL_NUT,function(a,e){var o=t.plantDataMap.get(""+a+e);return null!=o&&null!=o.plantData&&o.plantData.plantType==O.pzaGameState.selectPlant&&f.pzaLocalData.hasNutHealing()?1:2}],[_.pzaPlantEnum.PUMPKIN,function(a,e){return f.pzaLocalData.hasNutHealing()&&null!=t.pumpkinDataMap.get(""+a+e)?1:2}],[_.pzaPlantEnum.COFFEE_BEAN,function(a,e,o){var n=t.plantDataMap.get(""+a+e);return null!=n&&null!=n.plantData&&n.plantData.sleeping&&s.pzaGameConfig.getPlantConfig(n.plantData.plantType).isNight?1:(o&&v.pzaTipManager.showSpecialPlantTip(O.pzaGameState.selectPlant,s.pzaGameConfig.getPlantConfig(O.pzaGameState.selectPlant).name),0)}],[_.pzaPlantEnum.GATLING_PEA,function(a,e,o){var n=t.plantDataMap.get(""+a+e);return null==n||null==n.plantData||n.plantData.plantType!=_.pzaPlantEnum.REPEATER?(o&&v.pzaTipManager.showSpecialPlantTip(O.pzaGameState.selectPlant,s.pzaGameConfig.getPlantConfig(O.pzaGameState.selectPlant).name),0):1}],[_.pzaPlantEnum.TWIN_SUNFLOWER,function(a,e,o){var n=t.plantDataMap.get(""+a+e);return null==n||null==n.plantData||n.plantData.plantType!=_.pzaPlantEnum.SUN_FLOWER?(o&&v.pzaTipManager.showSpecialPlantTip(O.pzaGameState.selectPlant,s.pzaGameConfig.getPlantConfig(O.pzaGameState.selectPlant).name),0):1}],[_.pzaPlantEnum.GLOOM_SHROOM,function(a,e,o){var n=t.plantDataMap.get(""+a+e);return null==n||null==n.plantData||n.plantData.plantType!=_.pzaPlantEnum.FUME_SHROOM?(o&&v.pzaTipManager.showSpecialPlantTip(O.pzaGameState.selectPlant,s.pzaGameConfig.getPlantConfig(O.pzaGameState.selectPlant).name),0):1}],[_.pzaPlantEnum.WINTER_MELON,function(a,e,o){var n=t.plantDataMap.get(""+a+e);return null==n||null==n.plantData||n.plantData.plantType!=_.pzaPlantEnum.MELON_PULT?(o&&v.pzaTipManager.showSpecialPlantTip(O.pzaGameState.selectPlant,s.pzaGameConfig.getPlantConfig(O.pzaGameState.selectPlant).name),0):1}],[_.pzaPlantEnum.GOLD_MAGNET,function(a,e,o){var n=t.plantDataMap.get(""+a+e);return null==n||null==n.plantData||n.plantData.plantType!=_.pzaPlantEnum.MAGNET_SHROOM?(o&&v.pzaTipManager.showSpecialPlantTip(O.pzaGameState.selectPlant,s.pzaGameConfig.getPlantConfig(O.pzaGameState.selectPlant).name),0):1}],[_.pzaPlantEnum.SPIKEROCK,function(a,e,o){var n=t.plantDataMap.get(""+a+e);return null==n||null==n.plantData||n.plantData.plantType!=_.pzaPlantEnum.SPIKEWEED?(o&&v.pzaTipManager.showSpecialPlantTip(O.pzaGameState.selectPlant,s.pzaGameConfig.getPlantConfig(O.pzaGameState.selectPlant).name),0):1}],[_.pzaPlantEnum.CATTAIL,function(a,e,o){var n=""+a+e,i=t.plantDataMap.get(n),r=t.plantEnvDataMap.get(n);return null!=i||null==r||null==r.plantData||r.plantData.plantType!=_.pzaPlantEnum.LILY_PAD?(o&&v.pzaTipManager.showSpecialPlantTip(O.pzaGameState.selectPlant,s.pzaGameConfig.getPlantConfig(O.pzaGameState.selectPlant).name),0):1}],[_.pzaPlantEnum.COB_CANNON,function(a,e,o){var n=""+a+e,i=t.plantDataMap.get(n);if(null!=t.pumpkinDataMap.get(n)||null==i||null==i.plantData||i.plantData.plantType!=_.pzaPlantEnum.KERNEL_PULT)return o&&v.pzaTipManager.showSpecialPlantTip(O.pzaGameState.selectPlant,s.pzaGameConfig.getPlantConfig(O.pzaGameState.selectPlant).name),0;var r=""+(a+1)+e,p=t.plantDataMap.get(r);if(null==t.pumpkinDataMap.get(r)&&null!=p&&null!=p.plantData&&p.plantData.plantType==_.pzaPlantEnum.KERNEL_PULT)return 1;var l=""+(a-1)+e,c=t.plantDataMap.get(l);return null==t.pumpkinDataMap.get(l)&&null!=c&&null!=c.plantData&&c.plantData.plantType==_.pzaPlantEnum.KERNEL_PULT?1:(o&&v.pzaTipManager.showSpecialPlantTip(O.pzaGameState.selectPlant,s.pzaGameConfig.getPlantConfig(O.pzaGameState.selectPlant).name),0)}]]),t.idxArr=[2e3,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3,13e3,14e3,15e3,16e3,17e3,18e3,19e3,2e4,21e3],t}return n(t,a),t.prototype.onLoad=function(){window.pzaplantManager=this},t.prototype.init=function(){this.plantDataMap.clear(),this.plantEnvDataMap.clear(),this.pumpkinDataMap.clear(),this.holeMap.clear(),this.notTargetMap.clear(),this.plantMap.clear(),this.AllSunLight.clear(),this.pzaJarMap.clear(),this.dropPlantCards.clear(),this.brainMap.clear(),this.sunAutoCount=0,this.randomAutoSunCD(),this.starFruitMap.clear()},t.prototype.logicUpdate=function(a){var t=this,e=[];this.plantCdMap.forEach(function(o,n){o-=a*(1+O.pzaGameState.cdReduceValue),t.plantCdMap.set(n,o),o<=0&&e.push(n)}),e.forEach(function(a){t.plantCdMap.delete(a)}),O.pzaGameState.guideSunPause||(this.sunAutoCD-=a,this.sunAutoCD<=0&&this.autoCreateSun())},t.prototype.randomAutoSunCD=function(){if(O.pzaGameState.isSurvival()||1!=O.pzaGameState.curChapter||1!=O.pzaGameState.curPart&&2!=O.pzaGameState.curPart)if(this.sunAutoCount<=0)this.sunAutoCD=b.pzaUtil.getRandomFloatNum(6.25,9);else{var a=b.pzaUtil.getRandomFloatNum(4.25,7)+.1*this.sunAutoCount;this.sunAutoCD=Math.min(a,9.5)}else this.sunAutoCD=6.25},t.prototype.autoCreateSun=function(){var a=this;if(!O.pzaGameState.gameWin&&O.pzaGameState.gameTimeType!=O.pzaGameTimeType.NIGHT){var t=c.pzaGameManager.getCurrentGame();if(t.isAutoCreateSun()&&!(O.pzaGameState.gameMode==O.pzaGameMode.SURVIVAL&&c.pzaGameManager.getGame(O.pzaGameMode.SURVIVAL,h.pzaGameSurvival).getSurvivalSunState()||O.pzaGameState.gameMode==O.pzaGameMode.SUR_ENDLESS&&c.pzaGameManager.getGame(O.pzaGameMode.SUR_ENDLESS,d.pzaGameSurEndless).getSurvivalSunState())){var e=y.pzaNodeManager.getUpBgNode();if(null!=e){this.randomAutoSunCD(),this.sunAutoCount++;var o=s.pzaGameConfig.getRandomSunPos();t.autoSunCreate?t.autoSunCreate(o):(C.pzaBundleObjectPool.requestInstantByUrl2(D.pzaResourceUrl.SUN,function(t,n){if(null==t&&null!=n){n.setParent(e);var i=n.getComponent(N.pzaSunLight);i&&i.init(o,!0,!0),a.AllSunLight.add(i)}else console.error(t)}),window.pzaGuideManager.guideType==E.pzaGuideType.GUIDE_PLANT_1_1&&2==window.pzaGuideManager.guideStep&&window.pzaGuideManager.guideStepNext())}}}},t.prototype.plantCreateSun2=function(a,t,e){var o=this;void 0===e&&(e=0);var n=y.pzaNodeManager.getUpBgNode();null!=n&&null!=a&&C.pzaBundleObjectPool.requestInstantByUrl2(D.pzaResourceUrl.SUN,function(i,r){if(null==i&&null!=r){r.setParent(n);var p=r.getComponent(N.pzaSunLight);p&&p.init2(a,t,e,!1),e&&p&&(p.sunValue=e),o.AllSunLight.add(p)}else console.error(i)})},t.prototype.plantCreateSun=function(a,t,e,o){var n=this;void 0===e&&(e=!1),void 0===o&&(o=0);var i=y.pzaNodeManager.getUpBgNode();null!=i&&null!=a&&C.pzaBundleObjectPool.requestInstantByUrl2(D.pzaResourceUrl.SUN,function(r,p){if(null==r&&null!=p){p.setParent(i);var l=p.getComponent(N.pzaSunLight);l&&l.init(a,!1,t,e),o&&l&&(l.sunValue=o),n.AllSunLight.add(l)}else console.error(r)})},t.prototype.adCreateSun=function(){var a=y.pzaNodeManager.getBattleUINode();if(null!=a){O.pzaGameState.sunLightCount+=500,O.pzaGameState.pickCoinCount+=500,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_10,O.pzaGameState.pickCoinCount);for(var t=[cc.v2(-120,265),cc.v2(-40,336),cc.v2(70,350),cc.v2(180,336),cc.v2(260,265)],e=function(e){C.pzaBundleObjectPool.requestInstantByUrl2(D.pzaResourceUrl.SUN,function(o,n){if(null==o&&null!=n){n.setParent(a);var i=n.getComponent(N.pzaSunLight);i&&i.initAdSun(cc.v2(70,150),t[e])}else console.error(o)})},o=0;o<5;o++)e(o)}},t.prototype.initFlowerPot=function(){var a;if(!(null==(a=O.pzaGameState.isSurvival()?O.pzaGameState.survivalConfig:u.pzaGamePartConfig.getPartConfig(O.pzaGameState.curChapter,O.pzaGameState.curPart))||a.flowerPotColumn<=0))for(var t=O.pzaGameState.map.getMapRow(),e=0;e<a.flowerPotColumn;e++)for(var o=0;o<t;o++)this.createPlant(_.pzaPlantEnum.FLOWER_POT,e,o,!0)},t.prototype.initSimulatePlant=function(a){var t=this;if(null!=a){var e=function(a){if(null!=a){var e=a.plantData.plantType,o=y.pzaNodeManager.getPlantZombieNode();if(e==_.pzaPlantEnum.LILY_PAD&&(o=y.pzaNodeManager.getDownEffectNode()),null!=o){var n=D.pzaPreLoadManager.getPlantUrl(e);C.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(e,n){if(null==e&&null!=n){n.setParent(o),n.setPosition(a.logicPos);var i=n.getComponent(l.pzaBaseComponent);i&&i.bindData(a),t.plantMap.set(a,i),i.pauseSelf()}else console.error(e)})}}};a.forEach(function(a){if(null!=a&&null!=a.type){var o=t.createPlantData(a.type);o.xIndex=a.x,o.yIndex=a.y;var n=O.pzaGameState.map.getXInterval(o.xIndex)/2,i=O.pzaGameState.map.getYInterval(o.yIndex)/3,r=O.pzaGameState.map.getBlockLogicPos(o.xIndex,o.yIndex,n,i);o.logicPos=r;var p=""+o.xIndex+o.yIndex;t.plantDataMap.set(p,o),e(o)}})}},t.prototype.initBrain=function(){var a=this,t=O.pzaGameState.map.getMapRow(),e=y.pzaNodeManager.getPlantZombieNode();if(null!=e)for(var o=function(t){C.pzaBundleObjectPool.requestInstantByUrl(D.pzaResourceUrl.BRAIN,!1,function(o,n){if(null==o&&null!=n){n.setParent(e);var i=new M.pzaBaseData(null,null,!0);i.maxHp=i.hp=500,i.yIndex=t;var r=n.getComponent(B.pzaBrain);r&&r.bindData(i),a.brainMap.set(i,r)}else console.error(o)})},n=0;n<t;n++)o(n)},t.prototype.blinkBrain=function(a){this.brainMap.forEach(function(t){t&&t.blink(a)})},t.prototype.hasBrain=function(a){var t=!1;return this.brainMap.forEach(function(e,o){null!=o&&o.yIndex==a&&(t=!0)}),t},t.prototype.createPlant=function(a,t,e,o){var n=this;if(void 0===o&&(o=!1),a!=_.pzaPlantEnum.WALL_NUT_BOWLING&&a!=_.pzaPlantEnum.BOOM_NUT_BOWLING&&a!=_.pzaPlantEnum.TALL_NUT_BOWLING){a!=_.pzaPlantEnum.WALL_NUT&&a!=_.pzaPlantEnum.TALL_NUT||!f.pzaLocalData.hasNutHealing()||this.removeNormalPlant(t,e),a==_.pzaPlantEnum.PUMPKIN&&f.pzaLocalData.hasNutHealing()&&this.removePumpkin(t,e);var i=null;if(a==_.pzaPlantEnum.GATLING_PEA||a==_.pzaPlantEnum.TWIN_SUNFLOWER||a==_.pzaPlantEnum.GLOOM_SHROOM||a==_.pzaPlantEnum.WINTER_MELON||a==_.pzaPlantEnum.GOLD_MAGNET||a==_.pzaPlantEnum.SPIKEROCK||a==_.pzaPlantEnum.SUPER_CHOMPER){var r=""+t+e;i=this.plantDataMap.get(r),this.removeNormalPlant(t,e)}if(a==_.pzaPlantEnum.CATTAIL&&this.removeEnvPlant(t,e),a==_.pzaPlantEnum.COB_CANNON){this.removeNormalPlant(t,e);var p=""+(t+1)+e,c=this.pumpkinDataMap.get(p),u=this.plantDataMap.get(p);t<8&&null==c&&null!=u&&null!=u.plantData&&u.plantData.plantType==_.pzaPlantEnum.KERNEL_PULT?this.removeNormalPlant(t+1,e):(this.removeNormalPlant(t-1,e),t-=1)}else this.twoBlockPlantMap.has(a)&&t>0&&(p=""+(t+1)+e,c=this.pumpkinDataMap.get(p),u=this.plantDataMap.get(p),(c||u||this.holeMap.has(p)||t>=8||window.pzaMapManager.getPlantBlockType(t+1,e)===z.pzaBlockType.BLANK)&&(t-=1));var d=s.pzaGameConfig.getPlantConfig(a);if(null!=d&&null!=a){var h=this.createPlantData(a);h.xIndex=t,h.yIndex=e,null!=i&&(h.plantData.sleeping=i.plantData.sleeping);var m=y.pzaNodeManager.getPlantZombieNode();if(a==_.pzaPlantEnum.LILY_PAD&&(m=y.pzaNodeManager.getDownEffectNode()),null!=m){var g=O.pzaGameState.map.getXInterval(t)/2,v=O.pzaGameState.map.getYInterval(e)/3;5==O.pzaGameState.curChapter&&(v=O.pzaGameState.map.getYInterval(e)/6);var b=O.pzaGameState.map.getBlockLogicPos(t,e,g,v);h.logicPos=b;var P=""+t+e;if(a==_.pzaPlantEnum.IMITATER){var M=O.pzaGameState.curImitaterPlant;M!=_.pzaPlantEnum.WALL_NUT&&M!=_.pzaPlantEnum.TALL_NUT||!f.pzaLocalData.hasNutHealing()||this.removeNormalPlant(t,e),M==_.pzaPlantEnum.PUMPKIN&&f.pzaLocalData.hasNutHealing()&&this.removePumpkin(t,e),s.pzaPlantConfigData.isEnvPlant(M)?this.plantEnvDataMap.set(P,h):s.pzaPlantConfigData.isPumPkin(M)?this.pumpkinDataMap.set(P,h):M==_.pzaPlantEnum.COFFEE_BEAN||this.notTargetMap.has(P)||this.plantDataMap.set(P,h)}else if(s.pzaPlantConfigData.isEnvPlant(a))this.plantEnvDataMap.set(P,h);else if(s.pzaPlantConfigData.isPumPkin(a))this.pumpkinDataMap.set(P,h);else if(a==_.pzaPlantEnum.COFFEE_BEAN);else if(a===_.pzaPlantEnum.SunBean)this.notTargetMap.set(P,h);else if(this.plantDataMap.set(P,h),this.twoBlockPlantMap.has(a)){h.secondXIndex=t+1,h.secondYIndex=e;var T=""+(t+1)+e;this.plantDataMap.set(T,h)}var w=D.pzaPreLoadManager.getPlantUrl(a);if(C.pzaBundleObjectPool.requestInstantByUrl(w,!1,function(t,e){if(null==t&&null!=e){if(e.setParent(m),a==_.pzaPlantEnum.GRAVE_BUSTER){var i=window.pzaMapManager.TombMap.get(P);null!=i&&i.smallTomb?b.y+=50:b.y+=70}e.setPosition(b);var r=e.getComponent(l.pzaBaseComponent);r&&r.bindData(h),n.plantMap.set(h,r),o&&a==_.pzaPlantEnum.FLOWER_POT&&r&&r.pauseSelf()}else console.error(t)}),!o){if(O.pzaGameState.isMiniMode()&&14==O.pzaGameState.curPart&&this.starFruitMap.get(P)&&a==_.pzaPlantEnum.STAR_FRUIT)G.pzaEffectManager.createStarFruitEffect(h.logicPos);else{var A=window.pzaMapManager.getPlantBlockType(h.xIndex,h.yIndex);G.pzaEffectManager.createPlantEffect(h.logicPos,A,null)}if(O.pzaGameState.selectCard==O.pzaSelectCardType.DROP_CARD){var B=null;return this.dropPlantCards.forEach(function(a){a&&a.plant()&&(B=a)}),void this.dropPlantCards.delete(B)}if(O.pzaGameState.gameMode!=O.pzaGameMode.BELT&&O.pzaGameState.gameMode!=O.pzaGameMode.SMALL_ZOMBIE&&O.pzaGameState.gameMode!=O.pzaGameMode.ZOM_BOSS){if(a==_.pzaPlantEnum.IMITATER&&(d=s.pzaGameConfig.getPlantConfig(O.pzaGameState.curImitaterPlant)),null!=d&&d.createCD>0&&this.plantCdMap.set(a+this.idxArr[O.pzaGameState.selectIdx],d.createCD),O.pzaGameState.sunLightCount-=O.pzaGameState.getPlantPrice(a),O.pzaGameState.addPlant(a),S.pzaWorldEventManager.triggerEvent(S.pzaWorldEventType.UPDATE_PLANT_PRICE,a),window.pzaGuideManager.guideType==E.pzaGuideType.GUIDE_PLANT_1_1&&(1==window.pzaGuideManager.guideStep?window.pzaGuideManager.guideStepNext():window.pzaGuideManager.guideStep<7&&window.pzaGuideManager.guideStepTo(7)),window.pzaGuideManager.guideType==E.pzaGuideType.GUIDE_NEW_PLANT_1_2){O.pzaGameState.guideZombiePause=!1;var I=this.getPlantCount(_.pzaPlantEnum.SUN_FLOWER);!window.pzaGuideManager.triggerExtraGuide&&I>=2&&window.pzaGuideManager.guideShowNeedMoreSun(),I>=3&&(window.pzaGuideManager.guidePlant=null,window.pzazombieManager.wave<=0&&(window.pzazombieManager.nextWaveTime=0))}}else S.pzaWorldEventManager.triggerEvent(S.pzaWorldEventType.PLANT_PLANT,null)}}}}else this.createBowlingNut(a,t,e)},t.prototype.createAdPlant=function(a,t,e){var o=this,n=null;if(a==_.pzaPlantEnum.GATLING_PEA||a==_.pzaPlantEnum.TWIN_SUNFLOWER||a==_.pzaPlantEnum.GLOOM_SHROOM||a==_.pzaPlantEnum.WINTER_MELON||a==_.pzaPlantEnum.GOLD_MAGNET||a==_.pzaPlantEnum.SPIKEROCK){var i=""+t+e;n=this.plantDataMap.get(i),this.removeNormalPlant(t,e)}if(a==_.pzaPlantEnum.CATTAIL&&this.removeEnvPlant(t,e),this.twoBlockPlantMap.has(a)&&t>0){var r=""+(t+1)+e,p=this.pumpkinDataMap.get(r),c=this.plantDataMap.get(r);(p||c||this.holeMap.has(r)||t>=8||window.pzaMapManager.getPlantBlockType(t+1,e)===z.pzaBlockType.BLANK)&&(t-=1)}if(null!=s.pzaGameConfig.getPlantConfig(a)&&null!=a){var u=this.createPlantData(a);u.xIndex=t,u.yIndex=e,null!=n&&(u.plantData.sleeping=n.plantData.sleeping);var d=y.pzaNodeManager.getPlantZombieNode();if(null!=d){var h=O.pzaGameState.map.getXInterval(t)/2,m=O.pzaGameState.map.getYInterval(e)/3;5==O.pzaGameState.curChapter&&(m=O.pzaGameState.map.getYInterval(e)/6);var f=O.pzaGameState.map.getBlockLogicPos(t,e,h,m);u.logicPos=f;var g=""+u.xIndex+u.yIndex;if(a===_.pzaPlantEnum.SunBean?this.notTargetMap.set(g,u):this.plantDataMap.set(g,u),this.twoBlockPlantMap.has(a)){u.secondXIndex=t+1,u.secondYIndex=e;var v=""+(t+1)+e;this.plantDataMap.set(v,u)}var b=window.pzaMapManager.getPlantBlockType(t,e);a!=_.pzaPlantEnum.CATTAIL&&(b==z.pzaBlockType.ROOF?(null==this.plantEnvDataMap.get(g)&&this.createPlant(_.pzaPlantEnum.FLOWER_POT,t,e,!0),-1!=u.secondXIndex&&-1!=u.secondYIndex&&null==this.plantEnvDataMap.get(""+u.secondXIndex+u.secondYIndex)&&this.createPlant(_.pzaPlantEnum.FLOWER_POT,u.secondXIndex,u.secondYIndex,!0)):b==z.pzaBlockType.POND&&(null==this.plantEnvDataMap.get(g)&&this.createPlant(_.pzaPlantEnum.LILY_PAD,t,e,!0),-1!=u.secondXIndex&&-1!=u.secondYIndex&&null==this.plantEnvDataMap.get(""+u.secondXIndex+u.secondYIndex)&&this.createPlant(_.pzaPlantEnum.LILY_PAD,u.secondXIndex,u.secondYIndex,!0)));var P=D.pzaPreLoadManager.getPlantUrl(a);C.pzaBundleObjectPool.requestInstantByUrl(P,!1,function(a,t){if(null==a&&null!=t){t.setParent(d),t.setPosition(f);var e=t.getComponent(l.pzaBaseComponent);e&&e.bindData(u),o.plantMap.set(u,e)}else console.error(a)}),G.pzaEffectManager.createPlantEffect(u.logicPos,b,null),S.pzaWorldEventManager.triggerEvent(S.pzaWorldEventType.PLANT_AD_PLANT,null)}}},t.prototype.createRandomPlant=function(a,t,e){var o=this;if(a==_.pzaPlantEnum.PUMPKIN&&f.pzaLocalData.hasNutHealing()&&this.removePumpkin(t,e),this.twoBlockPlantMap.has(a)&&t>0){var n=""+(t+1)+e,i=this.pumpkinDataMap.get(n),r=this.plantDataMap.get(n);(i||r||this.holeMap.has(n)||t>=8||window.pzaMapManager.getPlantBlockType(t+1,e)===z.pzaBlockType.BLANK)&&(t-=1)}var p=s.pzaGameConfig.getPlantConfig(a);if(null!=p&&null!=a){var c=this.createPlantData(a);c.xIndex=t,c.yIndex=e;var u=y.pzaNodeManager.getPlantZombieNode();if(a==_.pzaPlantEnum.LILY_PAD&&(u=y.pzaNodeManager.getDownEffectNode()),null!=u){var d=O.pzaGameState.map.getXInterval(t)/2,h=O.pzaGameState.map.getYInterval(e)/3,m=O.pzaGameState.map.getBlockLogicPos(t,e,d,h);c.logicPos=m;var g=""+t+e;if(s.pzaPlantConfigData.isEnvPlant(a))this.plantEnvDataMap.set(g,c);else if(s.pzaPlantConfigData.isPumPkin(a))this.pumpkinDataMap.set(g,c);else if(a==_.pzaPlantEnum.COFFEE_BEAN);else if(a===_.pzaPlantEnum.SunBean)this.notTargetMap.set(g,c);else if(this.plantDataMap.has(g)||this.plantDataMap.set(g,c),this.twoBlockPlantMap.has(a)){c.secondXIndex=t+1,c.secondYIndex=e;var v=""+(t+1)+e;this.plantDataMap.has(v)||this.pumpkinDataMap.has(v)||this.plantDataMap.set(v,c)}var b=D.pzaPreLoadManager.getPlantUrl(a);C.pzaBundleObjectPool.requestInstantByUrl(b,!1,function(a,t){if(null==a&&null!=t){t.setParent(u),t.setPosition(m);var e=t.getComponent(l.pzaBaseComponent);e&&e.bindData(c),o.plantMap.set(c,e)}else console.error(a)});var P=window.pzaMapManager.getPlantBlockType(c.xIndex,c.yIndex);G.pzaEffectManager.createPlantEffect(c.logicPos,P,null),null!=p&&p.createCD>0&&this.plantCdMap.set(a+this.idxArr[O.pzaGameState.selectIdx],p.createCD),S.pzaWorldEventManager.triggerEvent(S.pzaWorldEventType.UPDATE_PLANT_PRICE,a)}}},t.prototype.createBowlingNut=function(a,t,e){var o=this,n=new M.pzaBaseData(a,null);n.xIndex=t,n.yIndex=e;var i=y.pzaNodeManager.getPlantZombieNode();if(null!=i){var r=O.pzaGameState.map.getXInterval(t)/2,p=O.pzaGameState.map.getBlockLogicPos(t,e,r,0);n.logicPos=p;var s=D.pzaPreLoadManager.getPlantUrl(a);C.pzaBundleObjectPool.requestInstantByUrl(s,!1,function(a,t){if(null==a&&null!=t){t.setParent(i),t.setPosition(p);var e=t.getComponent(l.pzaBaseComponent);e&&e.bindData(n),(O.pzaGameState.isMiniMode()&&(5==O.pzaGameState.curPart||6==O.pzaGameState.curPart)||6==O.pzaGameState.curChapter&&5==O.pzaGameState.curPart)&&o.plantMap.set(n,e)}else console.error(a)}),S.pzaWorldEventManager.triggerEvent(S.pzaWorldEventType.PLANT_PLANT,null)}},t.prototype.createAdJalapeno=function(){for(var a=O.pzaGameState.map.getMapRow(),t=O.pzaGameState.map.getMapColumn(),e=0;e<a;e++)for(var o=function(a){var t=0!==a,o=n.createPlantData(_.pzaPlantEnum.JALAPENO);o.plantData.adClearPlant=!0,o.xIndex=a,o.yIndex=e;var i=O.pzaGameState.map.getXInterval(a)/2,r=O.pzaGameState.map.getYInterval(e)/3;5==O.pzaGameState.curChapter&&(r=O.pzaGameState.map.getYInterval(e)/6);var p=O.pzaGameState.map.getBlockLogicPos(a,e,i,r);o.logicPos=p;var l=y.pzaNodeManager.getPlantZombieNode(),s=D.pzaPreLoadManager.getPlantUrl(_.pzaPlantEnum.JALAPENO);C.pzaBundleObjectPool.requestInstantByUrl(s,!1,function(a,e){if(null==a&&null!=e){e.setParent(l),e.setPosition(p);var n=e.getComponent(w.pzaJalapeno);n.isHideEff=t,n.bindData(o)}else console.error(a)});var c=window.pzaMapManager.getPlantBlockType(a,e);G.pzaEffectManager.createPlantEffect(o.logicPos,c,null)},n=this,i=0;i<t;i++)o(i)},t.prototype.createAdCherry=function(){for(var a=O.pzaGameState.map.getMapRow(),t=O.pzaGameState.map.getMapColumn(),e=0;e<t;e++)for(var o=function(a){var t=n.createPlantData(_.pzaPlantEnum.CHERRY_BOMB);t.plantData.adClearPlant=!0,t.xIndex=e,t.yIndex=a;var o=O.pzaGameState.map.getXInterval(e)/2,i=O.pzaGameState.map.getYInterval(a)/3;5==O.pzaGameState.curChapter&&(i=O.pzaGameState.map.getYInterval(a)/6);var r=O.pzaGameState.map.getBlockLogicPos(e,a,o,i);t.logicPos=r;var p=y.pzaNodeManager.getPlantZombieNode();if(null==p)return{value:void 0};var s=D.pzaPreLoadManager.getPlantUrl(_.pzaPlantEnum.CHERRY_BOMB);C.pzaBundleObjectPool.requestInstantByUrl(s,!1,function(a,e){if(null==a&&null!=e){e.setParent(p),e.setPosition(r);var o=e.getComponent(l.pzaBaseComponent);o&&o.bindData(t)}else console.error(a)});var c=window.pzaMapManager.getPlantBlockType(e,a);G.pzaEffectManager.createPlantEffect(t.logicPos,c,null)},n=this,i=0;i<a;i++){var r=o(i);if("object"==typeof r)return r.value}},t.prototype.recoverSurvivalPlant=function(a){var t=this;if(null!=a){var e=function(a){if(null!=a){var e=a.plantData.plantType,o=y.pzaNodeManager.getPlantZombieNode();if(e==_.pzaPlantEnum.LILY_PAD&&(o=y.pzaNodeManager.getDownEffectNode()),null!=o){var n=D.pzaPreLoadManager.getPlantUrl(e);C.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(e,n){if(null==e&&null!=n){n.setParent(o),n.setPosition(a.logicPos);var i=n.getComponent(l.pzaBaseComponent);i&&i.bindData(a),t.plantMap.set(a,i),i.pauseSelf()}else console.error(e)})}}};null!=a.plantEnvData&&a.plantEnvData.forEach(function(a){var o=M.pzaBaseData.clonePlantData(a),n=""+o.xIndex+o.yIndex;t.plantEnvDataMap.set(n,o),e(o)}),null!=a.plantData&&a.plantData.forEach(function(a){var o=M.pzaBaseData.clonePlantData(a),n=""+o.xIndex+o.yIndex;if(t.twoBlockPlantMap.has(o.plantData.plantType)){if(t.plantDataMap.has(n))return;var i=""+o.secondXIndex+o.secondYIndex;t.plantDataMap.set(i,o),t.plantDataMap.set(n,o)}else t.plantDataMap.set(n,o);e(o)}),null!=a.pumpkinData&&a.pumpkinData.forEach(function(a){var o=M.pzaBaseData.clonePlantData(a),n=""+o.xIndex+o.yIndex;t.pumpkinDataMap.set(n,o),e(o)}),null!=a.noTargetData&&a.noTargetData.forEach(function(a){var o=M.pzaBaseData.clonePlantData(a),n=""+o.xIndex+o.yIndex;t.notTargetMap.set(n,o),e(o)})}},t.prototype.createJar=function(a){var t=this;if(null!=a){var e=y.pzaNodeManager.getPlantZombieNode();if(null!=e){var o=O.pzaGameState.map.getMapOriPos(),n=cc.v2(o.x+115*a.xIndex+57.5,o.y+120*a.yIndex);C.pzaBundleObjectPool.requestInstantByUrl(D.pzaResourceUrl.JAR,!1,function(o,i){if(null==o&&null!=i){i.setParent(e),i.setPosition(n);var r=i.getComponent(I.pzaJar);r&&r.init(a,function(a){G.pzaEffectManager.createDropPlantCard(a,n,function(){t.pzaJarMap.size<=0&&window.pzazombieManager.zombieMap.size<=0&&(window.pzazombieManager.specialNextWaveTime=3)})});var p=""+a.xIndex+a.yIndex;t.pzaJarMap.set(p,r)}else console.error(o)})}}},t.prototype.bangJar=function(a,t){var e=""+a+t,o=this.pzaJarMap.get(e);return null!=o&&(o.bang(),window.pzaGuideManager.guideType==E.pzaGuideType.GUIDE_BANG_JAR_4_5&&1==window.pzaGuideManager.guideStep&&window.pzaGuideManager.guideStepNext(),!0)},t.prototype.shovelPlant=function(a,t){g.pzaSoundManager.playAudio("shovelPlant"),this.removeNormalPlant(a,t)||this.removePumpkin(a,t)||this.removeNoTargetPlant(a,t)||this.removeEnvPlant(a,t)},t.prototype.removePlant=function(a){if(null!=a){var t=""+a.xIndex+a.yIndex;if(this.plantDataMap.get(t)==a&&(this.plantDataMap.delete(t),null!=a.plantData&&this.twoBlockPlantMap.has(a.plantData.plantType))){var e=""+a.secondXIndex+a.secondYIndex,o=this.plantDataMap.get(e);o&&o.plantData.plantType==a.plantData.plantType&&this.plantDataMap.delete(e)}this.pumpkinDataMap.get(t)==a&&this.pumpkinDataMap.delete(t),this.plantEnvDataMap.get(t)==a&&this.plantEnvDataMap.delete(t),this.plantMap.delete(a)}},t.prototype.removeNormalPlant=function(a,t){var e=""+a+t,o=this.plantDataMap.get(e);if(null==o)return!1;if(o.isDead=!0,this.plantDataMap.delete(e),null!=o.plantData){if(this.twoBlockPlantMap.has(o.plantData.plantType)){var n=c.pzaGameManager.getGame(O.pzaGameMode.ZaJiao,m.pzaGameZJ).isEndless();if(O.pzaGameState.isZjMode()&&n){var i=""+o.xIndex+o.yIndex,r=this.plantDataMap.get(i),p=""+o.secondXIndex+o.secondYIndex,l=this.plantDataMap.get(p);r&&r.plantData.plantType==o.plantData.plantType&&this.plantDataMap.delete(i),l&&l.plantData.plantType==o.plantData.plantType&&this.plantDataMap.delete(p)}else i=""+o.xIndex+o.yIndex,p=""+o.secondXIndex+o.secondYIndex,this.plantDataMap.delete(i),this.plantDataMap.delete(p)}o.plantData.plantType==_.pzaPlantEnum.HoleNut&&G.pzaEffectManager.createDoomHoleEffect(o.logicPos,o.xIndex,o.yIndex)}var s=this.plantMap.get(o);return this.plantMap.delete(o),s&&s.close(),!0},t.prototype.removePumpkin=function(a,t){var e=""+a+t,o=this.pumpkinDataMap.get(e);if(null==o)return!1;o.isDead=!0,this.pumpkinDataMap.delete(e);var n=this.plantMap.get(o);return this.plantMap.delete(o),n&&n.close(),!0},t.prototype.removeEnvPlant=function(a,t){var e=""+a+t,o=this.plantEnvDataMap.get(e);if(null==o)return!1;o.isDead=!0,this.plantEnvDataMap.delete(e);var n=this.plantMap.get(o);return this.plantMap.delete(o),n&&n.close(),!0},t.prototype.removeNoTargetPlant=function(a,t){var e=""+a+t,o=this.notTargetMap.get(e);if(null==o)return!1;o.isDead=!0,this.notTargetMap.delete(e);var n=this.plantMap.get(o);return this.plantMap.delete(o),n&&n.close(),!0},t.prototype.bangPlant=function(a,t,e,o){var n=""+a+t,i=window.pzaplantManager.pumpkinDataMap.get(n);if(null!=i){var r=window.pzaplantManager.getPlantByData(i);r&&r.hurt(e,o,T.pzaAttackType.BANG)}var p=window.pzaplantManager.plantDataMap.get(n);if(null!=p){var l=window.pzaplantManager.getPlantByData(p);l&&l.hurt(e,o,T.pzaAttackType.BANG)}var s=window.pzaplantManager.plantEnvDataMap.get(n);if(null!=s){var c=window.pzaplantManager.getPlantByData(s);c&&c.hurt(e,o,T.pzaAttackType.BANG)}},t.prototype.hasPlant=function(a,t){var e=""+a+t;return!!(this.plantDataMap.has(e)||this.pumpkinDataMap.has(e)||this.notTargetMap.has(e)||this.plantEnvDataMap.has(e))},t.prototype.canPlant=function(a,t,e){var o=O.pzaGameState.selectPlant;if(o==_.pzaPlantEnum.IMITATER&&(o=O.pzaGameState.curImitaterPlant),o==_.pzaPlantEnum.WALL_NUT_BOWLING||o==_.pzaPlantEnum.BOOM_NUT_BOWLING||o==_.pzaPlantEnum.TALL_NUT_BOWLING)return a<=2;var n=window.pzaMapManager.getPlantBlockType(a,t),i=s.pzaGameConfig.getPlantConfig(o),r=i&&i.env,p=""+a+t;if(o==_.pzaPlantEnum.SunBean&&!this.notTargetMap.has(p))return!0;if(this.pzaJarMap.has(p))return!1;var l=window.pzaMapManager.hasTomb(a,t);if(o==_.pzaPlantEnum.GRAVE_BUSTER){if(!l)return e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1}else if(l)return e&&!O.pzaGameState.tombTip&&(O.pzaGameState.tombTip=!0,v.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u628a\u690d\u7269\u79cd\u5728\u5893\u7891\u4e0a")),!1;var c=this.plantDataMap.get(p);if((o==_.pzaPlantEnum.WALL_NUT||o==_.pzaPlantEnum.TALL_NUT)&&null!=c&&null!=c.plantData&&c.plantData.plantType==o&&f.pzaLocalData.hasNutHealing())return!0;if(s.pzaPlantConfigData.isPumPkin(o)&&f.pzaLocalData.hasNutHealing()&&null!=this.pumpkinDataMap.get(p))return!0;if(o==_.pzaPlantEnum.COFFEE_BEAN)return!(null==c||null==c.plantData||!c.plantData.sleeping||!s.pzaGameConfig.getPlantConfig(c.plantData.plantType).isNight)||(e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==_.pzaPlantEnum.GATLING_PEA)return null!=c&&null!=c.plantData&&c.plantData.plantType==_.pzaPlantEnum.REPEATER||(e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==_.pzaPlantEnum.TWIN_SUNFLOWER)return null!=c&&null!=c.plantData&&c.plantData.plantType==_.pzaPlantEnum.SUN_FLOWER||(e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==_.pzaPlantEnum.GLOOM_SHROOM)return null!=c&&null!=c.plantData&&c.plantData.plantType==_.pzaPlantEnum.FUME_SHROOM||(e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==_.pzaPlantEnum.WINTER_MELON)return null!=c&&null!=c.plantData&&c.plantData.plantType==_.pzaPlantEnum.MELON_PULT||(e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==_.pzaPlantEnum.GOLD_MAGNET)return null!=c&&null!=c.plantData&&c.plantData.plantType==_.pzaPlantEnum.MAGNET_SHROOM||(e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==_.pzaPlantEnum.SPIKEROCK)return null!=c&&null!=c.plantData&&c.plantData.plantType==_.pzaPlantEnum.SPIKEWEED||(e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(O.pzaGameState.isMiniMode()&&14==O.pzaGameState.curPart&&this.starFruitMap.get(p)&&o!=_.pzaPlantEnum.STAR_FRUIT&&!s.pzaPlantConfigData.isPumPkin(o))return v.pzaTipManager.showSpecialPlantTip(_.pzaPlantEnum.STAR_FRUIT,i.name),!1;if(o==_.pzaPlantEnum.SUPER_CHOMPER&&(!O.pzaGameState.isMiniMode()||9!=O.pzaGameState.curPart))return null!=c&&null!=c.plantData&&c.plantData.plantType==_.pzaPlantEnum.CHOMPER||(e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1);if(o==_.pzaPlantEnum.CATTAIL){var u=this.plantEnvDataMap.get(p);return null==c&&null!=u&&null!=u.plantData&&u.plantData.plantType==_.pzaPlantEnum.LILY_PAD||(e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1)}if(o==_.pzaPlantEnum.COB_CANNON){var d=""+(a+1)+t;if(null!=this.pumpkinDataMap.get(p)||null==c||null==c.plantData||c.plantData.plantType!=_.pzaPlantEnum.KERNEL_PULT||this.holeMap.has(d))return e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1;var h=this.plantDataMap.get(d);if(!this.pumpkinDataMap.get(d)&&h&&h.plantData&&h.plantData.plantType==_.pzaPlantEnum.KERNEL_PULT)return!0;var m=""+(a-1)+t,y=this.plantDataMap.get(m);return!((g=this.pumpkinDataMap.get(m))||!y||!y.plantData||y.plantData.plantType!=_.pzaPlantEnum.KERNEL_PULT)||(e&&v.pzaTipManager.showSpecialPlantTip(o,i.name),!1)}if(this.twoBlockPlantMap.has(o)){if(this.pumpkinDataMap.get(p)||c||n===z.pzaBlockType.BLANK)return!1;if(d=""+(a+1)+t,h=this.plantDataMap.get(d),this.pumpkinDataMap.get(d)||h||this.holeMap.has(d)||a>=8||window.pzaMapManager.getPlantBlockType(a+1,t)===z.pzaBlockType.BLANK){m=""+(a-1)+t,y=this.plantDataMap.get(m);var g=this.pumpkinDataMap.get(m);if(0===a||g||y||this.holeMap.has(m)||window.pzaMapManager.getPlantBlockType(a-1,t)===z.pzaBlockType.BLANK)return!1}}switch(n){case z.pzaBlockType.ICE:return!1;case z.pzaBlockType.DOOM_HOLE:case z.pzaBlockType.GOLD_HOLE:return e&&v.pzaTipManager.showEnvPlantTip(n),!1;case z.pzaBlockType.BLANK:return!1;case z.pzaBlockType.GRASS:if(r!=_.pzaPlantEnvEnum.NORMAL&&r!=_.pzaPlantEnvEnum.SOIL&&r!=_.pzaPlantEnvEnum.TOMB&&r!=_.pzaPlantEnvEnum.GRASS&&r!=_.pzaPlantEnvEnum.ROOF&&r!=_.pzaPlantEnvEnum.BOTH&&r!=_.pzaPlantEnvEnum.ALL&&r!=_.pzaPlantEnvEnum.WithRoof)return e&&r==_.pzaPlantEnvEnum.POND&&v.pzaTipManager.showPondPlantTip(o,i.name),!1;break;case z.pzaBlockType.POND:if(r==_.pzaPlantEnvEnum.POND||r==_.pzaPlantEnvEnum.BOTH){if(this.plantEnvDataMap.has(p))return!1}else{if(e&&o==_.pzaPlantEnum.SPIKEWEED&&v.pzaTipManager.showSpecialPlantTip(o,i.name),r!=_.pzaPlantEnvEnum.NORMAL)return e&&o==_.pzaPlantEnum.POTATO_MINE?v.pzaTipManager.showSpecialPlantTip(o,i.name):e&&!O.pzaGameState.cantPlantTip&&(O.pzaGameState.cantPlantTip=!0,v.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u79cd\u5728\u8fd9\u91cc")),!1;if(!(s.pzaPlantConfigData.isPumPkin(o)&&null!=c&&c.plantData.plantType==_.pzaPlantEnum.CATTAIL||this.plantEnvDataMap.has(p)))return!1}break;case z.pzaBlockType.ROOF:if(r==_.pzaPlantEnvEnum.ROOF||r==_.pzaPlantEnvEnum.BOTH){if(this.plantEnvDataMap.has(p))return!1}else{if(e&&o==_.pzaPlantEnum.SPIKEWEED&&v.pzaTipManager.showSpecialPlantTip(o,i.name),r!=_.pzaPlantEnvEnum.NORMAL&&r!=_.pzaPlantEnvEnum.SOIL&&(!O.pzaGameState.isMiniMode()||o!=_.pzaPlantEnum.SUPER_CHOMPER))return e&&r==_.pzaPlantEnvEnum.POND?v.pzaTipManager.showPondPlantTip(o,i.name):e&&!O.pzaGameState.cantPlantTip&&(O.pzaGameState.cantPlantTip=!0,v.pzaTipManager.showGameTip("\u4f60\u4e0d\u80fd\u79cd\u5728\u8fd9\u91cc")),!1;if(!this.plantEnvDataMap.has(p))return e&&v.pzaTipManager.showEnvPlantTip(n),!1}break;default:return!1}if(s.pzaPlantConfigData.isPumPkin(o))return!(null!=c&&this.twoBlockPlantMap.has(c.plantData.plantType)||this.pumpkinDataMap.has(p));if(!(O.pzaGameState.isZjMode()&&s.pzaPlantConfigData.isEnvPlant(o)&&this.plantEnvDataMap.has(p))){if(O.pzaGameState.isZjMode()&&r==_.pzaPlantEnvEnum.GRASS&&this.plantEnvDataMap.has(p)){var b=this.plantEnvDataMap.get(p);if(s.pzaPlantConfigData.isPotPlant(b.plantData.plantType))return}return!this.plantDataMap.has(p)}},t.prototype.adCanPlant=function(a,t,e){var o=function(a){e&&!O.pzaGameState.cantPlantTip&&(O.pzaGameState.cantPlantTip=!0,v.pzaTipManager.showGameTip(a||"\u4f60\u4e0d\u80fd\u79cd\u5728\u8fd9\u91cc"))};if(this.pzaJarMap.has(""+a+t))return o(),!1;if(window.pzaMapManager.hasTomb(a,t))return o("\u4f60\u4e0d\u80fd\u628a\u690d\u7269\u79cd\u5728\u5893\u7891"),!1;var n=O.pzaGameState.selectPlant,i=window.pzaMapManager.getPlantBlockType(a,t);if(i==z.pzaBlockType.BLANK||i==z.pzaBlockType.DOOM_HOLE||i==z.pzaBlockType.GOLD_HOLE||i==z.pzaBlockType.ICE)return o(),!1;if(n==_.pzaPlantEnum.CATTAIL&&i!=z.pzaBlockType.POND)return o(),!1;if(n==_.pzaPlantEnum.SPIKEROCK&&i==z.pzaBlockType.POND)return o(),!1;var r=""+a+t,p=this.plantDataMap.get(r);if(this.twoBlockPlantMap.has(n)){if(this.pumpkinDataMap.get(r)||p||window.pzaMapManager.getPlantBlockType(a,t)===z.pzaBlockType.BLANK)return!1;var l=""+(a+1)+t,s=this.plantDataMap.get(l);if(this.pumpkinDataMap.get(l)||s||this.holeMap.has(l)||a>=8||window.pzaMapManager.getPlantBlockType(a+1,t)===z.pzaBlockType.BLANK){var c=""+(a-1)+t,u=this.plantDataMap.get(c),d=this.pumpkinDataMap.get(c);if(0===a||d||u||this.holeMap.has(c)||window.pzaMapManager.getPlantBlockType(a-1,t)===z.pzaBlockType.BLANK)return!1}}else if(null!=p)return!1;if(!O.pzaGameState.isMiniMode()||14!=O.pzaGameState.curPart||!this.starFruitMap.get(r)||n==_.pzaPlantEnum.STAR_FRUIT)return!0;v.pzaTipManager.showSpecialPlantTip(_.pzaPlantEnum.STAR_FRUIT,"")},t.prototype.getCanAttackPlant=function(a,t){var e=""+a+t,o=this.pumpkinDataMap.get(e);return null==o&&(o=this.plantDataMap.get(e)),null==o&&(o=this.plantEnvDataMap.get(e)),this.plantMap.get(o)},t.prototype.getPlantByData=function(a){return this.plantMap.get(a)},t.prototype.getCanAttackPlantData=function(a,t,e){void 0===e&&(e=!1);var o=""+a+t;return e&&this.plantDataMap.has(o)?this.plantDataMap.get(o):this.pumpkinDataMap.has(o)?this.pumpkinDataMap.get(o):!e&&this.plantDataMap.has(o)?this.plantDataMap.get(o):this.plantEnvDataMap.get(o)},t.prototype.getRandomBlock=function(a,t){var e=this,o=new Set;if(a){var n=new Set;this.plantMap.forEach(function(a,i){if(null!=i){var r=i.xIndex+"-"+i.yIndex;if(!n.has(r)){if(e.twoBlockPlantMap.has(i.plantData.plantType)){var p=i.secondXIndex+"-"+i.secondYIndex;return n.add(r),n.add(p),o.delete(r),void o.delete(p)}o.has(r)||null!=t&&t.includes(r)||o.add(r)}}})}var i=Array.from(o);if(i.length<=0)for(var r=O.pzaGameState.map.getMapRow(),p=O.pzaGameState.map.getMapColumn(),l=0;l<p;l++)for(var s=0;s<r;s++){var c=l+"-"+s;null!=t&&t.includes(c)||i.push(c)}return b.pzaUtil.getRandomValueFromArray(i)},t.prototype.findFixRangePlants=function(a,t){if(null==a)return null;var e=[];return this.plantMap.forEach(function(o,n){null==o||null==n||n.isDead||null==n.logicPos||b.pzaUtil.getDistance(a,n.logicPos)<=t&&e.push(o)}),e},t.prototype.createPlantData=function(a){var t=new M.pzaBaseData(a,null);if(null==t.plantData)return t;t.plantData.sleeping=O.pzaGameState.gameTimeType==O.pzaGameTimeType.DAY;var e=s.pzaGameConfig.getPlantConfig(a);return null==e?t:(t.hp=t.maxHp=e.hp,t.atk=e.atk,e instanceof P.pzaZJPlantConf&&(t.plantData.atk2Arr=e.atk2Arr,t.plantData.atkArr=e.atkArr,t.plantData.atkInterval2=e.atkCD2,t.plantData.atkInterval=e.atkCD),t)},t.prototype.getPlantCD=function(a,t){return this.plantCdMap.has(a+this.idxArr[t])?this.plantCdMap.get(a+this.idxArr[t]):0},t.prototype.clearAllCD=function(){var a=this;this.plantCdMap.forEach(function(t,e){a.plantCdMap.set(e,0)})},t.prototype.initPlantCD=function(a){var t=this;if(this.plantCdMap.clear(),null!=a){this.curSelectPlants=Array.from(a);var e=0;a.forEach(function(a){if(e++,a!=_.pzaPlantEnum.IMITATER||null==O.pzaGameState.curImitaterPlant){var o=s.pzaGameConfig.getPlantConfig(a);o&&o.initCD>0&&t.plantCdMap.set(a+t.idxArr[e],o.initCD)}else{var n=s.pzaGameConfig.getPlantConfig(O.pzaGameState.curImitaterPlant);n&&n.initCD>0&&t.plantCdMap.set(a+t.idxArr[e],n.initCD)}})}},t.prototype.getPlantCount=function(a){var t=0;return this.plantMap.forEach(function(e,o){null!=o&&null!=o.plantData&&o.plantData.plantType==a&&t++}),t},t.prototype.getAllPlant=function(a){var t=[];return this.plantMap.forEach(function(e,o){null!=o&&null!=o.plantData&&o.plantData.plantType==a&&t.push(o)}),t},t.prototype.getVoidPotCount=function(){var a=this,t=0;return this.plantMap.forEach(function(e,o){if(null!=o&&null!=o.plantData&&o.plantData.plantType==_.pzaPlantEnum.FLOWER_POT){var n=""+o.xIndex+o.yIndex,i=a.plantDataMap.get(n),r=a.pumpkinDataMap.get(n);null==i&&null==r&&t++}}),t},t.prototype.getAllPlantCount=function(){return this.plantMap.size},t.prototype.clearAllPlant=function(){this.plantDataMap.clear(),this.plantEnvDataMap.clear(),this.pumpkinDataMap.clear(),this.plantMap.forEach(function(a,t){t&&(t.isDead=!0),a&&a.close()}),this.plantMap.clear(),this.dropPlantCards.forEach(function(a){a&&a.close()}),this.dropPlantCards.clear(),this.pzaJarMap.forEach(function(a){a&&a.close()}),this.pzaJarMap.clear()},t.prototype.createStarFruitShadow=function(a,t){var e=this,o=O.pzaGameState.map.getXInterval(a)/2,n=O.pzaGameState.map.getYInterval(t)/3,i=O.pzaGameState.map.getBlockLogicPos(a,t,o,n),r=y.pzaNodeManager.getPlantZombieNode(),p=""+a+t;C.pzaBundleObjectPool.requestInstantByUrl("resources/Prefab/Plant/StarFruitShadow",!1,function(a,t){if(null==a&&null!=t){t.setParent(r),t.setPosition(i);var o=t.getComponent(A.pzaStarFruitShadow);e.starFruitMap.set(p,o)}else console.error(a)})},i([L],t)}(cc.Component));e.pzaPlantManager=k,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaGameSurEndless":"pzaGameSurEndless","../Common/pzaGameSurvival":"pzaGameSurvival","../Common/pzaGameZJ":"pzaGameZJ","../Common/pzaLocalData":"pzaLocalData","../Common/pzaMapManager":"pzaMapManager","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Common/pzaZJPlantConf":"pzaZJPlantConf","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./Data/pzaBaseData":"pzaBaseData","./Data/pzaGuideType":"pzaGuideType","./Data/pzaPlantEnum":"pzaPlantEnum","./Plant/pzaAttackType":"pzaAttackType","./Plant/pzaJalapeno":"pzaJalapeno","./Plant/pzaStarFruitShadow":"pzaStarFruitShadow","./pzaBrain":"pzaBrain","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState","./pzaJar":"pzaJar","./pzaSunLight":"pzaSunLight"}],pzaPlantSelectCardList:[function(a,t,e){"use strict";cc._RF.push(t,"1fd6bOvfHhGU7STqwU/NFaY","pzaPlantSelectCardList");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantSelectCardList=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaGameZJ"),s=a("./pzaPlantCard"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardList=[],t.oriPosArr=[],t.selectPlants=[],t}return n(t,a),t.prototype.onLoad=function(){for(var a=0;a<this.cardList.length;a++){var t=this.cardList[a];null!=t&&this.oriPosArr.push(cc.v2(t.node.position.x,t.node.position.y))}},t.prototype.init=function(){this.selectPlants=[],this.cardList.forEach(function(a){a&&a.bagSelectPlant(null,null)}),r.pzaGameState.isZjMode()&&(this.cardList[8].node.x=this.cardList[0].node.x,this.cardList[8].node.y=this.cardList[0].node.y)},t.prototype.refreshAllSunVal=function(){for(var a=0;a<this.cardList.length;a++)this.cardList[a].updatePrice()},t.prototype.refreshOriPos=function(){var a=9;r.pzaGameState.isZjMode()&&(a=this.cardList.length),this.oriPosArr=[];for(var t=0;t<a;t++){var e=this.cardList[t];null!=e&&this.oriPosArr.push(cc.v2(e.node.position.x,e.node.position.y))}},t.prototype.getNextVoidPos=function(){r.pzaGameState.isZjMode()&&this.cardList.length;var a=this.oriPosArr[this.selectPlants.length];return null==a?null:this.node.convertToWorldSpaceAR(a)},t.prototype.getNextVoidCard=function(){var a=9;r.pzaGameState.isZjMode()&&(a=this.cardList.length);for(var t=0;t<a;t++){var e=this.cardList[t];if(null!=e&&null==e.curPlantType)return e}return null},t.prototype.selectPlant=function(a,t,e,o){void 0===o&&(o=!1);var n=this.getNextVoidCard();if(null!=n){var i=this.oriPosArr[this.selectPlants.length-1];n.node.setPosition(i.clone()),n.bagSelectPlant(a,t,e,o)}},t.prototype.removeSelect=function(a){var t=this.selectPlants.indexOf(a);if(!(t<0)){for(var e=t+1;e<this.selectPlants.length;e++){var o=this.getCardByPlantType(this.selectPlants[e]);if(null!=o){var n=this.oriPosArr[e-1];o.moveTo(n,.1,null)}}this.selectPlants.splice(t,1)}},t.prototype.getCardByPlantType=function(a){r.pzaGameState.isZjMode()&&this.cardList.length;for(var t=0;t<this.cardList.length;t++){var e=this.cardList[t];if(null!=e&&e.curPlantType==a)return e}return null},t.prototype.hasPlant=function(a){return null!=a&&null!=this.selectPlants&&(r.pzaGameState.curImitaterPlant==a||this.selectPlants.indexOf(a)>=0)},t.prototype.showNext=function(){for(var a=p.pzaGameManager.getGame(r.pzaGameMode.ZaJiao,l.pzaGameZJ).getPlantArr(1,r.pzaGameState.curPart).length,t=0;t<8;t++)this.cardList[t].node.active=!1;for(t=8;t<this.cardList.length;t++)this.cardList[t].node.active=t<a},t.prototype.showPrev=function(){for(var a=0;a<8;a++)this.cardList[a].node.active=!0;for(a=8;a<this.cardList.length;a++)this.cardList[a].node.active=!1},i([d({displayName:"\u5361\u7247\u5217\u8868",type:[s.pzaPlantCard]})],t.prototype,"cardList",void 0),i([u],t)}(cc.Component);e.pzaPlantSelectCardList=h,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameZJ":"pzaGameZJ","./pzaPlantCard":"pzaPlantCard"}],pzaPlantSelectView:[function(a,t,e){"use strict";cc._RF.push(t,"2968fkttspIT5a1kZ/KNhdN","pzaPlantSelectView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantSelectView=void 0;var r=a("../../Battle/Data/pzaGuideType"),p=a("../../Battle/Data/pzaPlantEnum"),l=a("../../Battle/Data/pzaZombieEnum"),s=a("../../Battle/pzaGameState"),c=a("../../Common/pzaGameCommonPool"),u=a("../../Common/pzaGameConfig"),d=a("../../Common/pzaGamePartConfig"),h=a("../../Common/pzaLocalData"),m=a("../../Common/pzaSoundManager"),f=a("../../Common/pzaStatisticsMgr"),z=a("../../Common/pzaTipManager"),y=a("../../Common/pzaUIManager"),g=a("../../Common/pzaUtil"),v=a("../../Common/pzaWorldEventManager"),b=a("../../Load/pzaPreLoadManager"),S=a("../../utils/pzaChannel"),P=a("../pzaCommonMask"),C=a("../pzaHandbookView"),D=a("../pzaShopView"),M=a("../pzaWarningView"),E=a("./pzaBagPlantCard"),_=a("./pzaImitaterSelectView"),T=a("./pzaMenuView"),w=a("./pzaPlantSelectCardList"),A=cc._decorator,B=A.ccclass,G=A.property,O=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardPrefab=null,t.cardBag=null,t.startBtn=null,t.bagNode=null,t.cardSelectList=null,t.cardSlotNode=null,t.cardSlotList=[],t.guideArrowNode=null,t.shopBtn=null,t.lookLawnBtn=null,t.bookBtn=null,t.imitaterNode=null,t.imitaterMask=null,t.imitaterSelectView=null,t.daveRewardNode=null,t.adSlot=null,t.slotAdCount=null,t.adSlotFrames=[],t.nextPage=null,t.nextArrow=null,t.arrowIsDown=!0,t.bagCards=[],t.startGameCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.shopBtn.active=h.pzaLocalData.data.unlockShop,this.bookBtn.active=h.pzaLocalData.data.unlockBook,this.imitaterNode.active=h.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.IMITATER),this.imitaterSelectView.node.active=!1,this.imitaterMask.active=!1,this.daveRewardNode.active=!1,this.lookLawnBtn.active=!1,this.nextPage.active=!1,this.arrowIsDown=!0,v.pzaWorldEventManager.addListener(v.pzaWorldEventType.SELECT_CARD,this.selectCard,this),v.pzaWorldEventManager.addListener(v.pzaWorldEventType.UPDATE_ALL_PLANT_PRICE,this.updateCardsSunVal,this)},t.prototype.onDisable=function(){this.clearBag(),v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.SELECT_CARD,this.selectCard,this),v.pzaWorldEventManager.removeListener(v.pzaWorldEventType.UPDATE_ALL_PLANT_PRICE,this.updateCardsSunVal,this)},t.prototype.init=function(a,t){return void 0===a&&(a=null),void 0===t&&(t=null),this.guideArrowNode.active=!1,this.nextPage.active=!1,s.pzaGameState.cardIsMove=!1,null!=a?(this.adSlot.node.active=!1,this.cardSelectList.init(),this.cardSelectList.selectPlants=Array.from(a),this.bagNode.active=!1,this.cardSlotNode.active=!1,void(t&&t())):(s.pzaGameState.isSelectPlant=!0,h.pzaLocalData.isWeekTwo?(this.startGameCall=t,this.initGameSetup(),void this.weekTwoInit()):(this.startGameCall=t,this.initGameSetup(),void this.initLastSelectPlants()))},t.prototype.initGameSetup=function(){this.initBag(),this.cardSelectList.init(),this.refreshAdSlot(),this.bagNode.active=!0,this.daveRewardNode.active=!0,this.cardSlotNode.active=!0;for(var a=0;a<this.cardSlotList.length;a++){var t=this.cardSlotList[a];null!=t&&(t.active=a<h.pzaLocalData.data.plantSlotCount)}},t.prototype.updateCardsSunVal=function(){this.cardSelectList.refreshAllSunVal()},t.prototype.survivalInit=function(a,t){if(this.guideArrowNode.active=!1,this.nextPage.active=!1,s.pzaGameState.cardIsMove=!1,null!=a)return this.adSlot.node.active=!1,this.cardSelectList.init(),this.cardSelectList.selectPlants=Array.from(a),this.bagNode.active=!1,this.cardSlotNode.active=!1,window.pzaplantManager.initPlantCD(this.cardSelectList.selectPlants),this.initPlant(),void(t&&t());this.startGameCall=t,this.initBag(),this.cardSelectList.init(),this.refreshAdSlot(),this.bagNode.active=!0,this.daveRewardNode.active=!0,this.cardSlotNode.active=!0,this.lookLawnBtn.active=!0;for(var e=0;e<this.cardSlotList.length;e++){var o=this.cardSlotList[e];null!=o&&(o.active=e<h.pzaLocalData.data.plantSlotCount)}this.initLastSelectPlants(),s.pzaGameState.hasPlantSelect=!0},t.prototype.zjGameInit=function(a,t){if(this.guideArrowNode.active=!1,this.nextArrow.angle=0,this.arrowIsDown=!0,null!=a)return this.adSlot.node.active=!1,this.cardSelectList.init(),this.cardSelectList.selectPlants=Array.from(a),this.bagNode.active=!1,this.cardSlotNode.active=!1,window.pzaplantManager.initPlantCD(a),void(t&&t());this.startGameCall=t,this.initZjBag(),this.cardSelectList.init(),this.refreshAdSlot(),this.bagNode.active=!0,this.daveRewardNode.active=!0,this.cardSlotNode.active=!0,this.lookLawnBtn.active=!1;for(var e=0;e<this.cardSlotList.length;e++){var o=this.cardSlotList[e];null!=o&&(o.active=e<h.pzaLocalData.data.plantSlotCount)}this.initLastSelectPlants()},t.prototype.miniGameInit=function(a,t){if(this.guideArrowNode.active=!1,s.pzaGameState.cardIsMove=!1,null!=a)return this.adSlot.node.active=!1,this.cardSelectList.init(),this.cardSelectList.selectPlants=Array.from(a),this.bagNode.active=!1,this.cardSlotNode.active=!1,window.pzaplantManager.initPlantCD(this.cardSelectList.selectPlants),this.initPlant(),void(t&&t());this.startGameCall=t,this.initBag(),this.cardSelectList.init(),this.refreshAdSlot(),this.bagNode.active=!0,this.daveRewardNode.active=!0,this.cardSlotNode.active=!0,this.lookLawnBtn.active=!1;for(var e=0;e<this.cardSlotList.length;e++){var o=this.cardSlotList[e];null!=o&&(o.active=e<h.pzaLocalData.data.plantSlotCount)}14!=s.pzaGameState.curPart?this.initLastSelectPlants():this.initStarFruit()},t.prototype.weekTwoInit=function(){var a=this,t=function(t){var e=u.pzaGameConfig.canChoosePlants(s.pzaGameState.curChapter);e=e.filter(function(a){return!t.includes(a)}),s.pzaGameState.weekTwoInitPlants.length<=0&&(s.pzaGameState.weekTwoInitPlants=g.pzaUtil.getRandomArrayValue(e,3)),s.pzaGameState.weekTwoInitPlants.forEach(function(t){a.cardSelectList.selectPlants.push(t),a.cardSelectList.selectPlant(t,a.putPlantToBagCall.bind(a),t==p.pzaPlantEnum.IMITATER,!0)}),a.bagCards.forEach(function(a){null==a||a.lock||s.pzaGameState.weekTwoInitPlants.indexOf(a.curPlantType)>=0&&a.selectFull(!0)})},e=h.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode];if(null==e||e.length<=0)t([]);else{s.pzaGameState.curImitaterPlant=h.pzaLocalData.data.imitaterUsePlant[s.pzaGameState.gameMode];for(var o=[],n=3;n<e.length;n++)o.push(e[n]);t(o),this.createLastCards(o)}},t.prototype.initStarFruit=function(){this.cardSelectList.selectPlants.push(p.pzaPlantEnum.STAR_FRUIT),this.cardSelectList.selectPlant(p.pzaPlantEnum.STAR_FRUIT,this.putPlantToBagCall.bind(this),!1,!0),this.bagCards.forEach(function(a){null==a||a.lock||a.curPlantType==p.pzaPlantEnum.STAR_FRUIT&&a.selectFull(!0)})},t.prototype.initLastSelectPlants=function(){var a=h.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode];null==a||a.length<=0||a.indexOf(p.pzaPlantEnum.SUPER_CHOMPER)>=0&&h.pzaLocalData.data.superChomperTrial<=0||(s.pzaGameState.curImitaterPlant=h.pzaLocalData.data.imitaterUsePlant[s.pzaGameState.gameMode],this.createLastCards(a))},t.prototype.createLastCards=function(a){var t=this,e=!1;a.forEach(function(a){t.cardSelectList.selectPlants.push(a),t.cardSelectList.selectPlant(a,t.putPlantToBagCall.bind(t),a==p.pzaPlantEnum.IMITATER),a==p.pzaPlantEnum.COFFEE_BEAN?e=!0:a==p.pzaPlantEnum.IMITATER&&(t.imitaterMask.active=!0)});var o=this.cardSelectList.selectPlants.length>=h.pzaLocalData.data.plantSlotCount;this.bagCards.forEach(function(t){null==t||t.lock||(null!=t.curPlantType&&a.indexOf(t.curPlantType)>=0&&t.initSelect(),e&&t.refreshRecommend(!0),o&&t.selectFull(!0))}),g.pzaUtil.switchGraySprite(this.startBtn,!o)},t.prototype.initZjBag=function(){for(var a=[175,177,103,140,167,132,163,162,124,131,104,150,152,141,156,173],t=0;t<a.length;t++)this.createBagCard(a[t])},t.prototype.initBag=function(){for(var a=p.pzaPlantEnum.GATLING_PEA;a<=p.pzaPlantEnum.COB_CANNON;a++)h.pzaLocalData.data.ownPlants.indexOf(a)<0||this.createBagCard(a);for(h.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.SUPER_CHOMPER)>=0&&this.createBagCard(p.pzaPlantEnum.SUPER_CHOMPER),a=p.pzaPlantEnum.PEA_SHOOTER;a<=p.pzaPlantEnum.MELON_PULT;a++)this.createBagCard(a);for(h.pzaLocalData.data.ownPlants.indexOf(p.pzaPlantEnum.BOOM_NUT)>=0&&this.createBagCard(p.pzaPlantEnum.BOOM_NUT),a=p.pzaPlantEnum.GATLING_PEA;a<=p.pzaPlantEnum.COB_CANNON;a++)h.pzaLocalData.data.ownPlants.indexOf(a)>=0||this.createBagCard(a)},t.prototype.createBagCard=function(a){var t=c.pzaGameCommonPool.requestInstant(this.cardPrefab,!1);if(null!=t){t.setParent(this.cardBag);var e=t.getComponent(E.pzaBagPlantCard);null!=e&&(e.bindData(a,this.clickBagCardCall.bind(this)),this.bagCards.push(e))}},t.prototype.selectCard=function(){s.pzaGameState.selectCard!=s.pzaSelectCardType.SLOT_CARD&&(s.pzaGameState.isZjMode()?this.clickListCardCall(null):this.clickListCardCallZj(null,s.pzaGameState.selectIdx))},t.prototype.clickListCardCall=function(a){var t=s.pzaGameState.selectPlant;if(this.cardSelectList.cardList.forEach(function(e){null!=e&&(null!=a&&e.curPlantType!=t||e.diselect())}),null!=a&&a!=t&&this.cardSelectList.cardList.forEach(function(t){null!=t&&t.curPlantType==a&&t.select()}),null!=a&&window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_PLANT_1_1){if(0==window.pzaGuideManager.guideStep&&null!=s.pzaGameState.selectPlant)return void window.pzaGuideManager.guideStepNext();if(6==window.pzaGuideManager.guideStep&&null!=s.pzaGameState.selectPlant)return void window.pzaGuideManager.hideGuide();if((1==window.pzaGuideManager.guideStep||6==window.pzaGuideManager.guideStep)&&null==s.pzaGameState.selectPlant)return void window.pzaGuideManager.guideStepPre()}},t.prototype.clickListCardCallZj=function(a,t){var e=s.pzaGameState.selectPlant,o=s.pzaGameState.selectIdx;if(this.cardSelectList.cardList.forEach(function(t){null!=t&&(null==a||t.curPlantType==e&&t.plantIdx==o)&&t.diselect()}),null!=a&&a!=e&&this.cardSelectList.cardList.forEach(function(e){null!=e&&e.curPlantType==a&&t==e.plantIdx&&e.select()}),null!=a&&window.pzaGuideManager.guideType==r.pzaGuideType.GUIDE_PLANT_1_1){if(0==window.pzaGuideManager.guideStep&&null!=s.pzaGameState.selectPlant)return void window.pzaGuideManager.guideStepNext();if(6==window.pzaGuideManager.guideStep&&null!=s.pzaGameState.selectPlant)return void window.pzaGuideManager.hideGuide();if((1==window.pzaGuideManager.guideStep||6==window.pzaGuideManager.guideStep)&&null==s.pzaGameState.selectPlant)return void window.pzaGuideManager.guideStepPre()}},t.prototype.clickBagCardCall=function(a,t,e){var o=this;void 0===e&&(e=!1);var n=this.cardSelectList.getNextVoidPos();if(null!=t&&null!=n){var i=this.node.convertToNodeSpaceAR(n),r=this.node.convertToNodeSpaceAR(t);e?this.cardSelectList.selectPlants.push(p.pzaPlantEnum.IMITATER):this.cardSelectList.selectPlants.push(a);var l=c.pzaGameCommonPool.requestInstant(this.cardPrefab,!1);if(null!=l){l.setParent(this.node),l.setPosition(r);var u=l.getComponent(E.pzaBagPlantCard);u.bindData(a,null,e),P.pzaCommonMask.showMask(),u.moveTo(i,.2,function(){e?o.cardSelectList.selectPlant(p.pzaPlantEnum.IMITATER,o.putPlantToBagCall.bind(o),!0):o.cardSelectList.selectPlant(a,o.putPlantToBagCall.bind(o),!1),s.pzaGameState.cardIsMove=!1,P.pzaCommonMask.hideMask()}),a==p.pzaPlantEnum.COFFEE_BEAN&&this.bagCards.forEach(function(a){null==a||a.lock||a.refreshRecommend(!0)}),this.cardSelectList.selectPlants.length>=h.pzaLocalData.data.plantSlotCount&&(this.bagCards.forEach(function(a){null==a||a.lock||a.selectFull(!0)}),g.pzaUtil.switchGraySprite(this.startBtn,!1))}else s.pzaGameState.cardIsMove=!1}else s.pzaGameState.cardIsMove=!1},t.prototype.putPlantToBagCall=function(a,t){var e=this;if(void 0===t&&(t=!0),null!=a){var o=a.imitaterPlant,n=null,i=null,r=null;if(o?(r=s.pzaGameState.curImitaterPlant,n=this.imitaterNode.convertToWorldSpaceAR(cc.v2())):(r=a.curPlantType,null!=(i=this.getBagCard(r))&&(n=i.node.convertToWorldSpaceAR(cc.v2()))),n){a.bagSelectPlant(null,null);var l=this.cardSelectList.selectPlants.length>=h.pzaLocalData.data.plantSlotCount,u=this.node.convertToNodeSpaceAR(a.node.convertToWorldSpaceAR(cc.v2())),d=this.node.convertToNodeSpaceAR(n),m=c.pzaGameCommonPool.requestInstant(this.cardPrefab,!1);if(null!=m){m.setParent(this.node),m.setPosition(u);var f=m.getComponent(E.pzaBagPlantCard);f.bindData(r,null,o),P.pzaCommonMask.showMask(),f.moveTo(d,.2,function(){P.pzaCommonMask.hideMask(),o?(e.imitaterMask.active=!1,s.pzaGameState.curImitaterPlant=null):i&&i.disSelect()}),r==p.pzaPlantEnum.COFFEE_BEAN&&this.bagCards.forEach(function(a){null==a||a.lock||a.refreshRecommend(!1)}),l&&(this.bagCards.forEach(function(a){null==a||a.lock||h.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(a.curPlantType)>=0||a.selectFull(!1)}),g.pzaUtil.switchGraySprite(this.startBtn,!0)),t&&(o?this.cardSelectList.removeSelect(p.pzaPlantEnum.IMITATER):this.cardSelectList.removeSelect(r))}}}},t.prototype.getBagCard=function(a){var t=null;return this.bagCards.forEach(function(e){null==e||e.lock||e.curPlantType==a&&(t=e)}),t},t.prototype.clickImitater=function(){var a=this;null==s.pzaGameState.curImitaterPlant&&(this.cardSelectList.selectPlants.length>=h.pzaLocalData.data.plantSlotCount||this.imitaterSelectView.init(function(){if(null!=s.pzaGameState.curImitaterPlant){a.imitaterMask.active=!0;var t=a.imitaterNode.convertToWorldSpaceAR(cc.v2());a.clickBagCardCall(s.pzaGameState.curImitaterPlant,t,!0)}}))},t.prototype.clickHandBook=function(){m.pzaSoundManager.playSFX(),s.pzaGameState.isZjMode()||s.pzaGameState.isCreativeTrad()||s.pzaGameState.isCreativeVaseMode()?y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(C.pzaHandbookView);t&&t.zjInit()}):y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.HANDBOOK_VIEW,function(a){var t=a&&a.getComponent(C.pzaHandbookView);t&&t.jdInit()})},t.prototype.clickShop=function(){var a=this;m.pzaSoundManager.playSFX();var t=this.cardSelectList.selectPlants.length>=h.pzaLocalData.data.plantSlotCount;y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.SHOP_VIEW,function(e){var o=e&&e.getComponent(D.pzaShopView);o&&o.bindCloseCall(!1,function(){a.refreshAdSlot();for(var e=0;e<a.cardSlotList.length;e++){var o=a.cardSlotList[e];null!=o&&(o.active=e<h.pzaLocalData.data.plantSlotCount)}var n=a.cardSelectList.selectPlants.length>=h.pzaLocalData.data.plantSlotCount;t&&!n&&(a.bagCards.forEach(function(a){null==a||a.lock||h.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(a.curPlantType)>=0||a.selectFull(!1)}),g.pzaUtil.switchGraySprite(a.startBtn,!0))},function(t){if(t==p.pzaPlantEnum.IMITATER)a.imitaterNode.active=!0;else for(var e=0;e<a.bagCards.length;e++){var o=a.bagCards[e];if(null!=o&&null==o.curPlantType){var n=a.cardSelectList.selectPlants.length>=h.pzaLocalData.data.plantSlotCount;o.bindData(t,a.clickBagCardCall.bind(a)),n&&o.selectFull(!0);break}}})})},t.prototype.clickMenu=function(){v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GAME_PAUSE,null),m.pzaSoundManager.pausePlayMusic();var a=!1;s.pzaGameState.isSurvival()&&1!=s.pzaGameState.curPart&&(a=!0),y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.GAME_MENU_VIEW,function(t){var e=t&&t.getComponent(T.pzaMenuView);e&&e.init(function(){v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GAME_RESUME,null)},a)})},t.prototype.clickLookLawn=function(){var a=this;this.bagNode.active=!1,window.pzaMapManager.lookLawn(function(){z.pzaTipManager.showGameTip("\u70b9\u51fb\u7ee7\u7eed\u6e38\u620f",function(){window.pzaMapManager.cancelLookLawn(function(){a.bagNode.active=!0})},!0)})},t.prototype.clickStart=function(){var a=this;m.pzaSoundManager.playSFX(),this.cardSelectList.selectPlants.length<h.pzaLocalData.data.plantSlotCount?z.pzaTipManager.showHomeTip("\u8bf7\u5148\u9009\u62e9\u5361\u7247",null,2):this.checkPuffShroom(function(){a.checkBallZombie(function(){a.checkPongPlant(function(){a.checkFlowerPot(function(){a.checkSunPlant(function(){a.checkAdvancePlant(p.pzaPlantEnum.GATLING_PEA,p.pzaPlantEnum.REPEATER,function(){a.checkAdvancePlant(p.pzaPlantEnum.TWIN_SUNFLOWER,p.pzaPlantEnum.SUN_FLOWER,function(){a.checkAdvancePlant(p.pzaPlantEnum.GLOOM_SHROOM,p.pzaPlantEnum.FUME_SHROOM,function(){a.checkAdvancePlant(p.pzaPlantEnum.CATTAIL,p.pzaPlantEnum.LILY_PAD,function(){a.checkAdvancePlant(p.pzaPlantEnum.WINTER_MELON,p.pzaPlantEnum.MELON_PULT,function(){a.checkAdvancePlant(p.pzaPlantEnum.GOLD_MAGNET,p.pzaPlantEnum.MAGNET_SHROOM,function(){a.checkAdvancePlant(p.pzaPlantEnum.SPIKEROCK,p.pzaPlantEnum.SPIKEWEED,function(){a.checkAdvancePlant(p.pzaPlantEnum.COB_CANNON,p.pzaPlantEnum.KERNEL_PULT,function(){a.checkAdvancePlant(p.pzaPlantEnum.SUPER_CHOMPER,p.pzaPlantEnum.CHOMPER,function(){a.clearBag(),a.bagNode.active=!1,a.adSlot.node.active=!1,s.pzaGameState.isSurvival()&&h.pzaLocalData.data.preOpenSurvival||(h.pzaLocalData.data.modeUsePlants[s.pzaGameState.gameMode]=a.cardSelectList.selectPlants,h.pzaLocalData.data.imitaterUsePlant[s.pzaGameState.gameMode]=s.pzaGameState.curImitaterPlant,h.pzaLocalData.addDirty("modeUsePlants","imitaterUsePlant")),window.pzaplantManager.initPlantCD(a.cardSelectList.selectPlants),a.cardSelectList.selectPlants=[],a.cardSelectList.cardList.forEach(function(t){t.curPlantType&&a.cardSelectList.selectPlants.push(t.curPlantType)}),a.startGameCall&&a.startGameCall(),s.pzaGameState.isSurvival()&&(s.pzaGameState.hasPlantSelect=!1)})})})})})})})})})})})})})})},t.prototype.initPlant=function(){if(this.cardSelectList){if(s.pzaGameState.isZjMode()){for(var a=0;a<this.cardSelectList.selectPlants.length;a++){var t=this.cardSelectList.cardList[a],e=this.cardSelectList.selectPlants[a];null!=t&&null!=e&&t.bindDataZj(e,this.clickListCardCallZj.bind(this),this.showGuideArrow.bind(this),a)}this.nextPage.active=!0}else for(a=0;a<this.cardSelectList.selectPlants.length;a++)t=this.cardSelectList.cardList[a],e=this.cardSelectList.selectPlants[a],null!=t&&null!=e&&t.bindData(e,this.clickListCardCall.bind(this),this.showGuideArrow.bind(this),a);this.node.getComponent(cc.Widget).updateAlignment(),this.cardSlotNode.active=!1}},t.prototype.showGuideArrow=function(a){null!=a?(this.guideArrowNode.active=!0,this.guideArrowNode.stopAllActions(),this.guideArrowNode.setPosition(a),this.guideArrowNode.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(a.x,a.y+20)),cc.moveTo(.2,cc.v2(a.x,a.y)))))):this.guideArrowNode.active=!1},t.prototype.clearBag=function(){this.bagCards.forEach(function(a){a&&a.close()}),this.bagCards=[]},t.prototype.checkSunPlant=function(a){this.cardSelectList.hasPlant(p.pzaPlantEnum.SUN_FLOWER)?a&&a():this.cardSelectList.hasPlant(p.pzaPlantEnum.SUN_SHROOM)?a&&a():this.cardSelectList.hasPlant(p.pzaPlantEnum.TWIN_SUNFLOWER)?a&&a():y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(M.pzaWarningView);e&&e.show("\u4f60\u6ca1\u6709\u9009\u80fd\u4ea7\u751f\u9633\u5149\u7684\u690d\u7269\uff0c\n\u786e\u5b9a\u8981\u7ee7\u7eed\u5417\uff1f","\u662f","\u91cd\u9009",a,null)})},t.prototype.checkPuffShroom=function(a){s.pzaGameState.isSurvival()||2!=s.pzaGameState.curChapter||1!=s.pzaGameState.curPart?a&&a():this.cardSelectList.hasPlant(p.pzaPlantEnum.PUFF_SHROOM)?a&&a():y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(M.pzaWarningView);e&&e.show("\u8fd9\u5173\u5982\u679c\u4e0d\u643a\u5e26\u5c0f\u55b7\u83c7\u5c06\u4f1a\u5f88\u96be\u3002\n\u4f60\u786e\u5b9a\u4e0d\u4f7f\u7528\u5c0f\u55b7\u83c7\u5417\uff1f","\u662f","\u91cd\u9009",a,null)})},t.prototype.checkPongPlant=function(a){3==s.pzaGameState.curChapter||4==s.pzaGameState.curChapter?this.cardSelectList.hasPlant(p.pzaPlantEnum.LILY_PAD)||this.cardSelectList.hasPlant(p.pzaPlantEnum.TANGLE_KELP)||this.cardSelectList.hasPlant(p.pzaPlantEnum.SEA_SHROOM)?a&&a():y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(M.pzaWarningView);s.pzaGameState.isSurvival()||3!=s.pzaGameState.curChapter||1!=s.pzaGameState.curPart?e&&e.show("\u8fd9\u5173\u5982\u679c\u4e0d\u4f7f\u7528\u6c34\u751f\u690d\u7269\u5c06\u4f1a\u5f88\u96be\u3002\n\u4f60\u786e\u5b9a\u4e0d\u4f7f\u7528\u4efb\u4f55\u6c34\u751f\u690d\u7269\u5417\uff1f","\u662f","\u91cd\u9009",a,null):e&&e.show("\u8fd9\u5173\u5982\u679c\u4e0d\u4f7f\u7528\u83b2\u53f6\u5c06\u4f1a\u5f88\u96be\u3002\n\u4f60\u786e\u5b9a\u4e0d\u4f7f\u7528\u83b2\u53f6\u5417\uff1f","\u662f","\u91cd\u9009",a,null)}):a&&a()},t.prototype.checkBallZombie=function(a){var t=null;null==(t=s.pzaGameState.isSurvival()?s.pzaGameState.survivalConfig:d.pzaGamePartConfig.getPartConfig(s.pzaGameState.curChapter,s.pzaGameState.curPart))||t.zombieTypes.indexOf(l.pzaZombieEnum.BALLOON_ZOMBIE)<0?a&&a():this.cardSelectList.hasPlant(p.pzaPlantEnum.BLOVER)||this.cardSelectList.hasPlant(p.pzaPlantEnum.CACTUS)||this.cardSelectList.hasPlant(p.pzaPlantEnum.CATTAIL)?a&&a():y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(M.pzaWarningView);e&&e.show("\u4f60\u6ca1\u6709\u9009\u80fd\u5bf9\u4ed8\u6c14\u7403\u50f5\u5c38\u7684\u690d\u7269\uff0c\n\u4f60\u786e\u5b9a\u8981\u7ee7\u7eed\u5417\uff1f","\u662f","\u91cd\u9009",a,null)})},t.prototype.checkFlowerPot=function(a){5!=s.pzaGameState.curChapter||1==s.pzaGameState.curPart&&!s.pzaGameState.isSurvival()?a&&a():this.cardSelectList.hasPlant(p.pzaPlantEnum.FLOWER_POT)?a&&a():y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(M.pzaWarningView);e&&e.show("\u8fd9\u5173\u5982\u679c\u4e0d\u4f7f\u7528\u82b1\u76c6\u5c06\u4f1a\u975e\u5e38\u7684\u96be\u3002\n\u4f60\u786e\u5b9a\u8981\u7ee7\u7eed\u5417\uff1f","\u662f","\u91cd\u9009",a,null)})},t.prototype.checkAdvancePlant=function(a,t,e){if(this.cardSelectList.hasPlant(a))if(this.cardSelectList.hasPlant(t))e&&e();else{var o=u.pzaGameConfig.getPlantConfig(a),n=u.pzaGameConfig.getPlantConfig(t);null!=o&&null!=n?y.pzaUIManager.baseShowPopUI(b.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(M.pzaWarningView);t&&t.show("\u4f60\u786e\u5b9a\u771f\u7684\u60f3\u8981\u5728\u6ca1\u6709"+n.name+"\u7684\u60c5\u51b5\u4e0b\n\u4f7f\u7528"+o.name+"\uff1f","\u662f","\u91cd\u9009",e,null)}):e&&e()}else e&&e()},t.prototype.refreshAdSlot=function(){this.adSlot.node.active=!1,7==h.pzaLocalData.data.plantSlotCount&&(h.pzaLocalData.data.curChapter>2||2==h.pzaLocalData.data.curChapter&&h.pzaLocalData.data.curPart>=6)&&(this.adSlot.node.active=!0,this.adSlot.node.y=-584,this.adSlot.spriteFrame=this.adSlotFrames[1],this.slotAdCount.node.active=!0,this.slotAdCount.string="("+h.pzaLocalData.data.slot8AdCount+"/2)",f.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"11"},{name:"adname",value:"\u89e3\u9501\u5361\u69fd8"})),6==h.pzaLocalData.data.plantSlotCount&&(h.pzaLocalData.data.curChapter>2||2==h.pzaLocalData.data.curChapter&&h.pzaLocalData.data.curPart>=3)&&(this.adSlot.node.active=!0,this.adSlot.node.y=-506,this.adSlot.spriteFrame=this.adSlotFrames[0],this.slotAdCount.node.active=!1,f.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"10"},{name:"adname",value:"\u89e3\u9501\u5361\u69fd7"}))},t.prototype.clickAdSlot=function(){var a=this,t="10";7==h.pzaLocalData.data.plantSlotCount&&(t="11"),S.pzaChannel.instance().showVideo({sucCall:function(){if(7==h.pzaLocalData.data.plantSlotCount&&(h.pzaLocalData.data.slot8AdCount++,h.pzaLocalData.addDirty("slot8AdCount"),h.pzaLocalData.data.slot8AdCount<2))a.slotAdCount.string="("+h.pzaLocalData.data.slot8AdCount+"/2)";else{var t=a.cardSelectList.selectPlants.length>=h.pzaLocalData.data.plantSlotCount;h.pzaLocalData.data.plantSlotCount++,h.pzaLocalData.addDirty("plantSlotCount"),a.adSlot.node.active=!1;for(var e=0;e<a.cardSlotList.length;e++){var o=a.cardSlotList[e];null!=o&&(o.active=e<h.pzaLocalData.data.plantSlotCount)}t&&(a.bagCards.forEach(function(a){null==a||a.lock||h.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(a.curPlantType)>=0||a.selectFull(!1)}),g.pzaUtil.switchGraySprite(a.startBtn,!0)),a.refreshAdSlot()}},failCall:function(){},endCall:function(){},posName:"\u6269\u5145\u5361\u69fd",adsid:t})},t.prototype.clickClear=function(){var a=this;if(m.pzaSoundManager.playSFX(),this.cardSelectList.cardList.forEach(function(t){if(null!=t&&null!=t.curPlantType){if(t.curPlantType==p.pzaPlantEnum.STAR_FRUIT&&s.pzaGameState.isMiniMode()&&14==s.pzaGameState.curPart)return;if(h.pzaLocalData.isWeekTwo&&s.pzaGameState.weekTwoInitPlants.indexOf(t.curPlantType)>=0)return;a.putPlantToBagCall(t,!1)}}),this.cardSelectList.selectPlants=[],s.pzaGameState.isMiniMode()&&14==s.pzaGameState.curPart&&this.cardSelectList.selectPlants.push(p.pzaPlantEnum.STAR_FRUIT),h.pzaLocalData.isWeekTwo)return s.pzaGameState.weekTwoInitPlants.forEach(function(t){a.cardSelectList.selectPlants.push(t)}),void this.bagCards.forEach(function(a){null==a||a.lock||s.pzaGameState.weekTwoInitPlants.indexOf(a.curPlantType)>=0&&a.selectFull(!0)})},t.prototype.clickNextPage=function(){this.arrowIsDown=!this.arrowIsDown,this.arrowIsDown?(this.cardSelectList.showPrev(),this.nextArrow.angle=0):(this.nextArrow.angle=180,this.cardSelectList.showNext())},i([G({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cardPrefab",void 0),i([G({displayName:"\u5361\u7247\u80cc\u5305\u5bb9\u5668",type:cc.Node})],t.prototype,"cardBag",void 0),i([G({displayName:"\u5f00\u59cb\u6309\u94ae",type:cc.Sprite})],t.prototype,"startBtn",void 0),i([G({displayName:"\u80cc\u5305\u8282\u70b9",type:cc.Node})],t.prototype,"bagNode",void 0),i([G({displayName:"\u5361\u7247\u9009\u62e9\u5217\u8868",type:w.pzaPlantSelectCardList})],t.prototype,"cardSelectList",void 0),i([G({displayName:"\u5361\u7247\u69fd\u8282\u70b9",type:cc.Node})],t.prototype,"cardSlotNode",void 0),i([G({displayName:"\u5361\u7247\u69fd",type:[cc.Node]})],t.prototype,"cardSlotList",void 0),i([G({displayName:"\u5361\u7247\u5f15\u5bfc\u7bad\u5934",type:cc.Node})],t.prototype,"guideArrowNode",void 0),i([G({displayName:"\u5546\u5e97\u6309\u94ae",type:cc.Node})],t.prototype,"shopBtn",void 0),i([G({displayName:"\u770b\u8349\u576a\u6309\u94ae",type:cc.Node})],t.prototype,"lookLawnBtn",void 0),i([G({displayName:"\u56fe\u9274\u6309\u94ae",type:cc.Node})],t.prototype,"bookBtn",void 0),i([G({displayName:"\u53d8\u8eab\u8304\u5b50",type:cc.Node})],t.prototype,"imitaterNode",void 0),i([G({displayName:"\u8304\u5b50\u906e\u7f69",type:cc.Node})],t.prototype,"imitaterMask",void 0),i([G({displayName:"\u8304\u5b50\u9009\u62e9\u754c\u9762",type:_.pzaImitaterSelectView})],t.prototype,"imitaterSelectView",void 0),i([G({displayName:"\u6234\u592b\u5b9d\u85cf\u754c\u9762",type:cc.Node})],t.prototype,"daveRewardNode",void 0),i([G({displayName:"\u5e7f\u544a\u5361\u69fd",type:cc.Sprite})],t.prototype,"adSlot",void 0),i([G({displayName:"\u5361\u69fd\u5e7f\u544a\u6b21\u6570",type:cc.Label})],t.prototype,"slotAdCount",void 0),i([G({displayName:"\u5e7f\u544a\u5361\u69fd\u56fe",type:[cc.SpriteFrame]})],t.prototype,"adSlotFrames",void 0),i([G({displayName:"\u4e0b\u4e00\u9875\u6309\u94ae",type:cc.Node})],t.prototype,"nextPage",void 0),i([G({displayName:"\u4e0b\u4e00\u9875\u7bad\u5934",type:cc.Node})],t.prototype,"nextArrow",void 0),i([B],t)}(cc.Component);e.pzaPlantSelectView=O,cc._RF.pop()},{"../../Battle/Data/pzaGuideType":"pzaGuideType","../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaGamePartConfig":"pzaGamePartConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUIManager":"pzaUIManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../../utils/pzaChannel":"pzaChannel","../pzaCommonMask":"pzaCommonMask","../pzaHandbookView":"pzaHandbookView","../pzaShopView":"pzaShopView","../pzaWarningView":"pzaWarningView","./pzaBagPlantCard":"pzaBagPlantCard","./pzaImitaterSelectView":"pzaImitaterSelectView","./pzaMenuView":"pzaMenuView","./pzaPlantSelectCardList":"pzaPlantSelectCardList"}],pzaPlantTouch:[function(a,t,e){"use strict";cc._RF.push(t,"86a4cwtXIlMSrXJ0lrmrlsK","pzaPlantTouch");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantTouch=void 0;var r=a("../Common/pzaNodeManager"),p=a("../Common/pzaTipManager"),l=a("../Common/pzaWorldEventManager"),s=a("../Common/pzaZombieEnermyPartCfg"),c=a("../Load/pzaBundleObjectPool"),u=a("../Load/pzaPreLoadManager"),d=a("./Data/pzaGuideType"),h=a("./Data/pzaPlantEnum"),m=a("./Data/pzaZombieEnum"),f=a("./Effect/pzaShovelEffect"),z=a("./pzaEffectManager"),y=a("./pzaGameState"),g=cc._decorator,v=g.ccclass,b=g.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.plantTouchNode=null,t.touchShowGraph=null,t.crossHair=null,t.curSelectXIndex=-1,t.curSelectYIndex=-1,t.shovelEffect=null,t.selectCobTime=0,t}return n(t,a),t.prototype.onEnable=function(){this.plantTouchNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.plantTouchNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.plantTouchNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.plantTouchNode.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.plantTouchNode._touchListener.setSwallowTouches(!1),this.touchShowGraph.clear(),this.crossHair.active=!1,this.selectCobTime=0},t.prototype.onDisable=function(){this.plantTouchNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.plantTouchNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.plantTouchNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.plantTouchNode.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.isCrossHairOff=function(){return null==y.pzaGameState.selectCard&&null==y.pzaGameState.cobCannon&&!(y.pzaGameState.gameMode==y.pzaGameMode.BANG_JAR||y.pzaGameState.gameMode==y.pzaGameMode.VASE||y.pzaGameState.gameMode==y.pzaGameMode.VASE_ENDLESS||y.pzaGameState.gameMode===y.pzaGameMode.CREATIVE_VASE)},t.prototype.onTouchStart=function(a){if(this.isCrossHairOff()){if(this.crossHair.active=!1,y.pzaGameState.gameMode==y.pzaGameMode.KNOCK_ZOMBIE||y.pzaGameState.gameMode==y.pzaGameMode.MINIGAME_KNOCK){if(y.pzaGameState.gamePause)return;return void this.showHammer(a,!1)}if(this.checkCobCannon(a),null==y.pzaGameState.cobCannon)return}var t=a&&a.getLocation();if(!(null==t||t.y>=620)){var e=this.node.convertToNodeSpaceAR(t);this.showTouchBlock(e)}},t.prototype.onTouchMove=function(a){if(!y.pzaGameState.isGameEnd&&!y.pzaGameState.isMenuShow)if(this.isCrossHairOff())this.crossHair.active=!1;else{var t=a&&a.getLocation();if(!(null==t||t.y>=620)){var e=this.node.convertToNodeSpaceAR(t);this.showTouchBlock(e)}}},t.prototype.onTouchEnd=function(a){if(!y.pzaGameState.isGameEnd&&!y.pzaGameState.isMenuShow){var t=a&&a.getLocation();if(null==t||t.y>=620)this.reset();else if(null==y.pzaGameState.selectPlant){if(null!=y.pzaGameState.selectZombie)return this.curSelectXIndex>=0&&this.curSelectYIndex>=0&&(y.pzaGameState.selectZombie==m.pzaZombieEnum.BUNGEE_ZOMBIE?this.curSelectXIndex<s.pzaZombieEnermyPartCfg.getPlantColumn(y.pzaGameState.gameMode==y.pzaGameMode.ZOMBIE_ENDLESS?y.pzaGameState.zombieEndlessPart:y.pzaGameState.curPart)?(window.pzazombieManager.playerPutZombie(this.curSelectXIndex,this.curSelectYIndex,y.pzaGameState.selectZombie),y.pzaGameState.selectCard=null,y.pzaGameState.selectZombie=null,l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.SELECT_CARD,null)):y.pzaGameState.putZombieTipLeft||(y.pzaGameState.putZombieTipLeft=!0,p.pzaTipManager.showGameTip("\u5728\u7ebf\u7684\u5de6\u8fb9\u624d\u80fd\u653e\u7f6e\u98de\u8d3c\u50f5\u5c38")):this.curSelectXIndex>=s.pzaZombieEnermyPartCfg.getPlantColumn(y.pzaGameState.gameMode==y.pzaGameMode.ZOMBIE_ENDLESS?y.pzaGameState.zombieEndlessPart:y.pzaGameState.curPart)?(window.pzazombieManager.playerPutZombie(this.curSelectXIndex,this.curSelectYIndex,y.pzaGameState.selectZombie),y.pzaGameState.selectCard=null,y.pzaGameState.selectZombie=null,l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.SELECT_CARD,null)):y.pzaGameState.putZombieTipRight||(y.pzaGameState.putZombieTipRight=!0,p.pzaTipManager.showGameTip("\u5728\u7ebf\u7684\u5de6\u8fb9\u624d\u80fd\u653e\u7f6e\u50f5\u5c38"))),void this.reset();if(y.pzaGameState.gameMode!==y.pzaGameMode.BANG_JAR&&y.pzaGameState.gameMode!==y.pzaGameMode.VASE&&y.pzaGameState.gameMode!==y.pzaGameMode.VASE_ENDLESS&&y.pzaGameState.gameMode!==y.pzaGameMode.CREATIVE_VASE||window.pzaplantManager.bangJar(this.curSelectXIndex,this.curSelectYIndex)&&this.showHammer(a,!0),y.pzaGameState.selectCard==y.pzaSelectCardType.SHOVE_CARD)return this.curSelectXIndex>=0&&this.curSelectYIndex>=0&&window.pzaplantManager.hasPlant(this.curSelectXIndex,this.curSelectYIndex)?(window.pzaplantManager.shovelPlant(this.curSelectXIndex,this.curSelectYIndex),window.pzaGuideManager.guideType==d.pzaGuideType.GUIDE_SHOVEL_1_5&&(2==window.pzaGuideManager.guideStep||3==window.pzaGuideManager.guideStep&&window.pzaplantManager.getAllPlantCount()<=0)&&window.pzaGuideManager.guideStepNext()):window.pzaGuideManager.guideType==d.pzaGuideType.GUIDE_SHOVEL_1_5&&2==window.pzaGuideManager.guideStep&&window.pzaGuideManager.guideStepPre(),y.pzaGameState.selectCard=null,l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.SELECT_CARD,null),void this.reset();if(null!=y.pzaGameState.cobCannon&&Date.now()-this.selectCobTime>100){if(this.curSelectXIndex>=0&&this.curSelectYIndex>=0){var e=this.plantTouchNode.convertToNodeSpaceAR(t);l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.LAUNCH_COB_CANNON,{data:y.pzaGameState.cobCannon,pos:e,xIndex:this.curSelectXIndex,yIndex:this.curSelectYIndex})}y.pzaGameState.cobCannon=null}this.reset()}else{if(this.curSelectXIndex>=0&&this.curSelectYIndex>=0)if(y.pzaGameState.selectCard==y.pzaSelectCardType.AD_CARD)if(window.pzaplantManager.canPlant(this.curSelectXIndex,this.curSelectYIndex,!1)||window.pzaplantManager.adCanPlant(this.curSelectXIndex,this.curSelectYIndex,!0)){if(this.canPlantCol()){var o=4;!y.pzaGameState.isCreativeTrad()||2!=y.pzaGameState.curPart&&3!=y.pzaGameState.curPart||(o=5);for(var n=0;n<=o;n++)(window.pzaplantManager.canPlant(this.curSelectXIndex,n,!1)||window.pzaplantManager.adCanPlant(this.curSelectXIndex,n,!1))&&window.pzaplantManager.createAdPlant(y.pzaGameState.selectPlant,this.curSelectXIndex,n)}else window.pzaplantManager.createAdPlant(y.pzaGameState.selectPlant,this.curSelectXIndex,this.curSelectYIndex);y.pzaGameState.selectCard=null,y.pzaGameState.selectPlant=null,l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.SELECT_CARD,null)}else y.pzaGameState.resetCardState();else if(window.pzaplantManager.canPlant(this.curSelectXIndex,this.curSelectYIndex,!0)){if(this.canPlantCol())for(o=4,!y.pzaGameState.isCreativeTrad()||2!=y.pzaGameState.curPart&&3!=y.pzaGameState.curPart||(o=5),n=0;n<=o;n++)window.pzaplantManager.canPlant(this.curSelectXIndex,n,!1)&&window.pzaplantManager.createPlant(y.pzaGameState.selectPlant,this.curSelectXIndex,n);else window.pzaplantManager.createPlant(y.pzaGameState.selectPlant,this.curSelectXIndex,this.curSelectYIndex);y.pzaGameState.selectCard=null,y.pzaGameState.selectPlant=null,(y.pzaGameState.isMiniMode()&&5!=y.pzaGameState.curPart&&6!=y.pzaGameState.curPart||y.pzaGameState.isCreativeTrad())&&l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.PLANT_PLANT,null),l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.SELECT_CARD,null)}else y.pzaGameState.resetCardState();this.reset()}}},t.prototype.onTouchCancel=function(a){if(null!=y.pzaGameState.cobCannon&&Date.now()-this.selectCobTime>100){if(this.curSelectXIndex>=0&&this.curSelectYIndex>=0){var t=a&&a.getLocation();if(null==t||t.y>=620)return void this.reset();var e=this.plantTouchNode.convertToNodeSpaceAR(t);l.pzaWorldEventManager.triggerEvent(l.pzaWorldEventType.LAUNCH_COB_CANNON,{data:y.pzaGameState.cobCannon,pos:e,xIndex:this.curSelectXIndex,yIndex:this.curSelectYIndex})}y.pzaGameState.cobCannon=null}this.reset()},t.prototype.reset=function(){this.curSelectXIndex=-1,this.curSelectYIndex=-1,this.touchShowGraph.clear(),this.crossHair.active=!1,this.selectCobTime=0,null!=this.shovelEffect&&(this.shovelEffect.close(),this.shovelEffect=null)},t.prototype.canPlantCol=function(){return y.pzaGameState.isMiniMode()&&y.pzaGameState.curPart<=2||y.pzaGameState.isCreativeTrad()},t.prototype.showTouchBlock=function(a){if(null!=a){var t=y.pzaGameState.map.getMapXIndex(null,a);if(t<0)return this.reset();var e=y.pzaGameState.map.getMapYIndex(null,a);if(e<0)return this.reset();if(t!=this.curSelectXIndex||e!=this.curSelectYIndex){if(this.touchShowGraph.clear(),null!=y.pzaGameState.selectPlant){if(y.pzaGameState.selectCard==y.pzaSelectCardType.AD_CARD){if(!window.pzaplantManager.canPlant(t,e,!1)&&!window.pzaplantManager.adCanPlant(t,e,!1))return this.curSelectXIndex=t,void(this.curSelectYIndex=e)}else if(!window.pzaplantManager.canPlant(t,e,!1))return this.curSelectXIndex=t,void(this.curSelectYIndex=e)}else if(null!=y.pzaGameState.selectZombie){if(this.curSelectXIndex=t,this.curSelectYIndex=e,y.pzaGameState.selectZombie==m.pzaZombieEnum.BUNGEE_ZOMBIE){if(t>=s.pzaZombieEnermyPartCfg.getPlantColumn(y.pzaGameState.gameMode==y.pzaGameMode.ZOMBIE_ENDLESS?y.pzaGameState.zombieEndlessPart:y.pzaGameState.curPart))return}else if(t<s.pzaZombieEnermyPartCfg.getPlantColumn(y.pzaGameState.gameMode==y.pzaGameMode.ZOMBIE_ENDLESS?y.pzaGameState.zombieEndlessPart:y.pzaGameState.curPart))return}else y.pzaGameState.selectCard==y.pzaSelectCardType.SHOVE_CARD&&(null==this.shovelEffect?this.createShovelEffect(t,e):this.shovelEffect.changeShovelPos(t,e));if(this.curSelectXIndex=t,this.curSelectYIndex=e,null!=y.pzaGameState.selectCard||null!=y.pzaGameState.cobCannon){var o=y.pzaGameState.map.getMapRow(),n=y.pzaGameState.map.getMapColumn(),i=y.pzaGameState.map.getMapSkewRadion(),r=y.pzaGameState.map.getMapSkewColumn(),p=y.pzaGameState.map.getBlockAllPos(t,0,0);this.touchShowGraph.moveTo(p.x,p.y);var l=y.pzaGameState.map.getBlockAllPos(t,0,1);this.touchShowGraph.lineTo(l.x,l.y);var c=y.pzaGameState.map.getBlockAllPos(t,e,1);if(this.touchShowGraph.lineTo(c.x,c.y),i>0&&r>0&&t<r-1){var u=y.pzaGameState.map.getBlockAllPos(r-1,e,1);this.touchShowGraph.lineTo(u.x,u.y)}var d=y.pzaGameState.map.getBlockAllPos(n-1,e,1);this.touchShowGraph.lineTo(d.x,d.y);var h=y.pzaGameState.map.getBlockAllPos(n-1,e,2);this.touchShowGraph.lineTo(h.x,h.y),i>0&&r>0&&t<r-1&&(u=y.pzaGameState.map.getBlockAllPos(r-1,e,2),this.touchShowGraph.lineTo(u.x,u.y));var f=y.pzaGameState.map.getBlockAllPos(t,e,2);this.touchShowGraph.lineTo(f.x,f.y);var z=y.pzaGameState.map.getBlockAllPos(t,o-1,2);this.touchShowGraph.lineTo(z.x,z.y);var g=y.pzaGameState.map.getBlockAllPos(t,o-1,3);this.touchShowGraph.lineTo(g.x,g.y);var v=y.pzaGameState.map.getBlockAllPos(t,e,3);this.touchShowGraph.lineTo(v.x,v.y),i>0&&r>0&&t>r-1&&(u=y.pzaGameState.map.getBlockAllPos(r,e,3),this.touchShowGraph.lineTo(u.x,u.y));var b=y.pzaGameState.map.getBlockAllPos(0,e,3);this.touchShowGraph.lineTo(b.x,b.y);var S=y.pzaGameState.map.getBlockAllPos(0,e,0);this.touchShowGraph.lineTo(S.x,S.y),i>0&&r>0&&t>r-1&&(u=y.pzaGameState.map.getBlockAllPos(r,e,0),this.touchShowGraph.lineTo(u.x,u.y));var P=y.pzaGameState.map.getBlockAllPos(t,e,0);this.touchShowGraph.lineTo(P.x,P.y),this.touchShowGraph.lineTo(p.x,p.y),this.touchShowGraph.fill(),null!=y.pzaGameState.cobCannon&&this.showCrossHair(a)}}else null!=y.pzaGameState.cobCannon&&this.showCrossHair(a)}},t.prototype.checkCobCannon=function(a){var t=a&&a.getLocation();if(!(null==t||t.y>=620)&&y.pzaGameState.map){var e=this.node.convertToNodeSpaceAR(t),o=y.pzaGameState.map.getMapXIndex(null,e);if(!(o<0)){var n=y.pzaGameState.map.getMapYIndex(null,e);if(!(n<0)){var i=""+o+n,r=window.pzaplantManager.plantDataMap.get(i);null==r||null==r.plantData||r.plantData.plantType!=h.pzaPlantEnum.COB_CANNON&&r.plantData.plantType!=h.pzaPlantEnum.DoomCannon||!r.plantData.cobLoadFinish||(y.pzaGameState.cobCannon=r,this.selectCobTime=Date.now())}}}},t.prototype.createShovelEffect=function(a,t){var e=this;if(-1!=a&&-1!=t){var o=r.pzaNodeManager.getBattleUINode();null!=o&&c.pzaBundleObjectPool.requestInstantByUrl(u.pzaResourceUrl.SHOVEL_EFFECT,!1,function(n,i){if(null==n&&null!=i){i.setParent(o);var r=i.getComponent(f.pzaShovelEffect);r&&r.init(a,t),e.shovelEffect=r}else console.error(n)})}},t.prototype.showHammer=function(a,t){var e=a&&a.getLocation();if(!(null==e||e.y>=620)){var o=this.plantTouchNode.convertToNodeSpaceAR(e);z.pzaEffectManager.createHammerEffect(o,t)}},t.prototype.showCrossHair=function(a){this.crossHair.active=!0,this.crossHair.setPosition(a)},i([b({displayName:"\u79cd\u690d\u89e6\u6478\u533a\u57df",type:cc.Node})],t.prototype,"plantTouchNode",void 0),i([b({displayName:"\u89e6\u6478\u663e\u793a\u7ed8\u5236",type:cc.Graphics})],t.prototype,"touchShowGraph",void 0),i([b({displayName:"\u51c6\u5fc3",type:cc.Node})],t.prototype,"crossHair",void 0),i([v],t)}(cc.Component);e.pzaPlantTouch=S,cc._RF.pop()},{"../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaTipManager":"pzaTipManager","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Common/pzaZombieEnermyPartCfg":"pzaZombieEnermyPartCfg","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./Data/pzaGuideType":"pzaGuideType","./Data/pzaPlantEnum":"pzaPlantEnum","./Data/pzaZombieEnum":"pzaZombieEnum","./Effect/pzaShovelEffect":"pzaShovelEffect","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState"}],pzaPlanternEffect:[function(a,t,e){"use strict";cc._RF.push(t,"753510nhkhGFaxmGbSPNYE+","pzaPlanternEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlanternEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.ani.playAnimation("idle",!0)},t.prototype.logicUpdate=function(){(null==this.baseData||this.baseData.isDead)&&this.close()},t.prototype.pauseSelf=function(){this.ani.pauseAnimation()},t.prototype.resumeSelf=function(){this.ani.resumeAnimation()},i([c({displayName:"\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"ani",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaPlanternEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController"}],pzaPlantern:[function(a,t,e){"use strict";cc._RF.push(t,"bb6aaesl+ZIn5FoUcBvWlno","pzaPlantern");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPlantern=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaPlantEnum"),s=a("../pzaEffectManager"),c=a("../pzaGameState"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.getAroundPos=function(){return this.baseData?[""+(this.baseData.xIndex-1)+(this.baseData.yIndex-1),""+this.baseData.xIndex+(this.baseData.yIndex-1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex-1),""+(this.baseData.xIndex-1)+this.baseData.yIndex,""+(this.baseData.xIndex+1)+this.baseData.yIndex,""+(this.baseData.xIndex-1)+(this.baseData.yIndex+1),""+this.baseData.xIndex+(this.baseData.yIndex+1),""+(this.baseData.xIndex+1)+(this.baseData.yIndex+1)]:[]},t.prototype.checkPlanternAround=function(a,t){for(var e=[""+(a-1)+(t-1),""+a+(t-1),""+(a+1)+(t-1),""+(a-1)+t,""+(a+1)+t,""+(a-1)+(t+1),""+a+(t+1),""+(a+1)+(t+1)],o=0;o<e.length;o++){var n=e[o],i=window.pzaplantManager.plantDataMap.get(n);if(i&&i.plantData&&i.plantData.plantType===l.pzaPlantEnum.PLANTERN)return!1}return!0},t.prototype.onDisable=function(){if(a.prototype.onDisable.call(this),c.pzaGameState.isVaseMode()||c.pzaGameState.isCreativeVaseMode())for(var t=this.getAroundPos(),e=0;e<t.length;e++){var o=t[e],n=window.pzaplantManager.pzaJarMap.get(o);n&&this.checkPlanternAround(n.jarData.xIndex,n.jarData.yIndex)&&n.lightOff()}},t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),window.pzaMapManager.planternScatterFog(t),this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};if(this.animation.playAnimation("idle",!1,o),s.pzaEffectManager.createPlanternEffect(this.baseData,this.baseData.logicPos),r.pzaSoundManager.playAudio("plantern_enter"),c.pzaGameState.onlyShroomCofee=!1,c.pzaGameState.onlyBoomPlant=!1,c.pzaGameState.usePlanternBlover=!0,c.pzaGameState.isVaseMode()||c.pzaGameState.isCreativeVaseMode())for(var n=this.getAroundPos(),i=0;i<n.length;i++){var l=n[i],u=window.pzaplantManager.pzaJarMap.get(l);u&&u.lighted()}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.close=function(){a.prototype.close.call(this),window.pzaMapManager.planternRemove(this.baseData)},i([h],t)}(u.pzaBasePlant));e.pzaPlantern=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPogoZombie:[function(a,t,e){"use strict";cc._RF.push(t,"27db4B0lNVCSYrTzm7645M2","pzaPogoZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPogoZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaGameState"),d=a("./pzaBaseZombie"),h=a("./pzaZombieState"),m=a("./pzaZombieSlot"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jumping=!1,t}return n(t,a),t.prototype.updateAllSlot=function(a){this.updateEquipState(m.pzaZombieSlotType.pogo,a),this.updateEquipState(m.pzaZombieSlotType.pogo2,a),a<=1&&this.updateEquipState(m.pzaZombieSlotType.pogo3,a)},t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.butter,new m.pzaZombieSlot(this.animation.spineAnimation,this.butterSlot).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,-28.23,87.93))],[m.pzaZombieSlotType.pogo,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.pogo).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.pogo+"1",14.65,14.43,78.35)).addState(new m.pzaZombieSlotAtt(2,m.pzaZombieSlotType.pogo+"2",14.65,14.43,78.35)).addState(new m.pzaZombieSlotAtt(3,m.pzaZombieSlotType.pogo+"3",14.65,14.43,78.35))],[m.pzaZombieSlotType.pogo2,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.pogo2).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.pogo2+"1",103.17,20.19,79.46)).addState(new m.pzaZombieSlotAtt(2,m.pzaZombieSlotType.pogo2+"2",103.17,20.19,79.46)).addState(new m.pzaZombieSlotAtt(3,m.pzaZombieSlotType.pogo2+"3",103.17,20.19,79.46))],[m.pzaZombieSlotType.pogo3,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.pogo3).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.pogo3+"1",139.24,-8.91,-98.44))]])},t.prototype.bindData=function(t){this.jumping=!1,a.prototype.bindData.call(this,t),t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1))},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(a);else if(this.hasTool)this.updateMove(a);else{var t=this.findTarget();null==t||t.isDead?this.updateMove(a):this.attack(a,t)}else this.changeRowMove(a)}},t.prototype.findJumpTarget=function(){if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;var a=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(this.body.curTarget.plantData){if(this.body.curTarget.plantData.cate===s.pzaPlantCate.Spike){var t=window.pzaplantManager.pumpkinDataMap.get(a);return null==t||t.isDead?null:t}if(this.body.curTarget.plantData.plantType==s.pzaPlantEnum.TALL_NUT||this.body.curTarget.plantData.plantType==s.pzaPlantEnum.SpikeRockNut)return p.pzaSoundManager.playAudio("bonk"),this.body.curTarget}var e=window.pzaplantManager.plantDataMap.get(a);return null==e||e.isDead||e.plantData.plantType!=s.pzaPlantEnum.TALL_NUT&&e.plantData.plantType!=s.pzaPlantEnum.SpikeRockNut?this.body.curTarget:e},t.prototype.jump=function(){var a=this,t=this.findJumpTarget();if(null!=t){var e=t.plantData&&t.plantData.plantType!=s.pzaPlantEnum.TALL_NUT&&t.plantData.plantType!=s.pzaPlantEnum.SpikeRockNut;this.jumping=!0;var o=this.baseData.zombieData.moveSpd;this.baseData.zombieData.moveSpd=0,p.pzaSoundManager.playAudio("pogo_zombie"),this.animation.playAnimation("jump2",!1,function(){p.pzaSoundManager.playAudio("pogo_zombie");var t=a.animation.getAnimationDuration("jump1");a.baseData.zombieData.moveSpd=100/t,a.animation.playAnimation("jump1",!1,function(){a.baseData.zombieData.moveSpd=o,a.body.curTarget=null,a.jumping=!1,a.playMoveAnimation()},function(){e||(a.baseData.zombieData.moveSpd=o,a.jumping=!1,a.toolDeath())})})}else this.playMoveAnimation()},t.prototype.playMoveAnimation=function(){var a=this;this.zombieState=h.pzaZombieState.MOVE,this.hasTool?(p.pzaSoundManager.playAudio("pogo_zombie"),this.animation.playAnimation("jump2",!1,function(){a.jump()})):(this.updateAllSlot(0),this.animation.playAnimation("move",!0,null,null,1))},t.prototype.toolDeath=function(){a.prototype.toolDeath.call(this);var t=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.initMSpd=this.baseData.zombieData.moveSpd=u.pzaGameState.map.getBlockWidth()/t,this.playMoveAnimation(),this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_CONTROL),this.updateEquipState(m.pzaZombieSlotType.pogo,0),this.updateEquipState(m.pzaZombieSlotType.pogo2,0),this.updateEquipState(m.pzaZombieSlotType.pogo3,0),this.slotMap.delete(m.pzaZombieSlotType.butter),this.butterSlot=m.pzaZombieSlotType.butter2,this.slotMap.set(m.pzaZombieSlotType.butter2,new m.pzaZombieSlot(this.animation.spineAnimation,this.butterSlot).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.butter,-28.23,87.93)))},t.prototype.zombieDying=function(){this.zombieHurtState=c.pzaHurtStateEnum.DYING,this.updateAllSlot(3)},t.prototype.zombieHurt=function(){this.zombieHurtState=c.pzaHurtStateEnum.HURT,this.updateAllSlot(2)},t.prototype.zombieIntact=function(){this.zombieHurtState=c.pzaHurtStateEnum.INTACT,this.updateAllSlot(1)},i([z],t)}(d.pzaBaseZombie));e.pzaPogoZombie=y,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaPolevaultingZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"25e52hJW1pAmY9p9WhYyfYB","pzaPolevaultingZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPolevaultingZombie2=void 0;var r=a("./pzaPolevaultingZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=p.pzaZombieSlotType.head_nut,t}return n(t,a),i([s],t)}(r.pzaPolevaultingZombie));e.pzaPolevaultingZombie2=c,cc._RF.pop()},{"./pzaPolevaultingZombie":"pzaPolevaultingZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaPolevaultingZombie:[function(a,t,e){"use strict";cc._RF.push(t,"26b45tyyhtNxoQDjmmxZDGZ","pzaPolevaultingZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPolevaultingZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../../Common/pzaSoundManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaBaseZombie"),m=a("./pzaZombieState"),f=a("./pzaZombieSlot"),z=cc._decorator,y=z.ccclass,g=(z.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="zombie_2",t.hasJump=!1,t.jumping=!1,t.jumpOver=!1,t.jumpMsp=0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[f.pzaZombieSlotType.butter,new f.pzaZombieSlot(this.animation.spineAnimation,f.pzaZombieSlotType.butter).addState(new f.pzaZombieSlotAtt(1,f.pzaZombieSlotType.butter,-11.57,78.5,0))],[f.pzaZombieSlotType.head_nut,new f.pzaZombieSlot(this.animation.spineAnimation,f.pzaZombieSlotType.head_nut).addState(new f.pzaZombieSlotAtt(1,f.pzaZombieSlotType.head_nut+"1",262.41,-1.5,-90.45)).addState(new f.pzaZombieSlotAtt(2,f.pzaZombieSlotType.head_nut+"2",257.29,-1.46,-90.45)).addState(new f.pzaZombieSlotAtt(3,f.pzaZombieSlotType.head_nut+"3",243.17,-2.63,-90.45))]])},t.prototype.bindData=function(t){this.hasJump=!1,this.jumping=!1,this.jumpMsp=0,a.prototype.bindData.call(this,t),this.body.changeBody(cc.v2(-10,75),110)},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead)if(this.jumpMsp>0)this.jumpMove(a);else if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow){if(this.pushBackTime>0)this.pushBackMove(a);else if(!this.jumping)if(this.hasJump){var t=this.findTarget();null==t||t.isDead?this.updateMove(a):this.attack(a,t)}else{var e=this.findJumpTarget();null!=e?this.jump(e):this.updateMove(a)}}else this.changeRowMove(a)},t.prototype.calculateDistance=function(a,t,e,o){var n=e-a,i=o-t;return Math.sqrt(n*n+i*i)},t.prototype.findJumpTarget=function(){var a=this,t=null;if(d.pzaGameState.isMiniMode()&&(5==d.pzaGameState.curPart||6==d.pzaGameState.curPart)||6==d.pzaGameState.curChapter&&5==d.pzaGameState.curPart)return window.pzaplantManager.plantMap.forEach(function(e,o){(o.xIndex==a.baseData.xIndex-2||o.xIndex==a.baseData.xIndex-1)&&o.yIndex==a.baseData.yIndex&&a.calculateDistance(o.logicPos.x,o.logicPos.y,a.baseData.logicPos.x,a.baseData.logicPos.y)<=270&&(t=o)}),t;if(null==this.body||null==this.body.curTarget)return null;if(this.body.curTarget.isDead)return this.body.curTarget=null,null;if(this.body.curTarget.isBrain)return null;if(null==this.body.curTarget.zombieData){var e=""+this.body.curTarget.xIndex+this.body.curTarget.yIndex;if(this.body.curTarget.plantData.cate===s.pzaPlantCate.Spike){var o=window.pzaplantManager.pumpkinDataMap.get(e);return null==o||o.isDead?null:o}if(this.body.curTarget.plantData.plantType==s.pzaPlantEnum.TALL_NUT||this.body.curTarget.plantData.plantType==s.pzaPlantEnum.SpikeRockNut)return this.body.curTarget;if(this.body.curTarget.plantData.plantType==s.pzaPlantEnum.COB_CANNON)return this.body.curTarget;var n=window.pzaplantManager.plantDataMap.get(e);return null==n||n.isDead||n.plantData.plantType!=s.pzaPlantEnum.TALL_NUT&&n.plantData.plantType!=s.pzaPlantEnum.COB_CANNON&&n.plantData.plantType!=s.pzaPlantEnum.SpikeRockNut?this.body.curTarget:n}},t.prototype.jumpMove=function(a){this.baseData.logicPos.x-=a*this.jumpMsp},t.prototype.jumpDone=function(){this.jumping=!1,this.baseData.zombieData.toolType=c.pzaEquipType.NO_EQUIP,this.toolDeath();var a=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/a;var t=d.pzaGameState.map.getMapXIndex(this.baseData.logicPos);this.baseData.xIndex=t,this.hasJump=!0,this.jumpOver?(this.playMoveAnimation(),this.body.curTarget=null):this.animation.playAnimation("attack",!0),this.body.changeBody(cc.v2(20,75),60),this.body.node.getComponent(cc.BoxCollider).enabled=!0,this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_CONTROL),this.jumpMsp=0},t.prototype.jump=function(a){var t=this;if(null!=a){var e=a.xIndex;d.pzaGameState.isMiniMode()?5!=d.pzaGameState.curPart&&6!=d.pzaGameState.curPart||(e=a.xIndex+1):6==d.pzaGameState.curChapter&&5==d.pzaGameState.curPart&&(e=a.xIndex+1),this.jumping=!0;var o=this.animation.getAnimationDuration("jump1");this.baseData.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1)),a.plantData.plantType!=s.pzaPlantEnum.TALL_NUT_BOWLING&&(this.body.node.getComponent(cc.BoxCollider).enabled=!1),this.jumpOver=a.plantData.plantType!=s.pzaPlantEnum.TALL_NUT&&a.plantData.plantType!=s.pzaPlantEnum.SpikeRockNut;var n=this.jumpOver?"jump2":"jump4";o+=this.animation.getAnimationDuration(n)+.1,this.scheduleOnce(function(){t.jumping&&!t.baseData.buffData.hasBuff(l.pzaBuffType.FROZEN)&&(t.body.node.getComponent(cc.BoxCollider).enabled=!0,t.baseData.isDead||t.jumpDone())},o),this.animation.playAnimation("jump1",!1,function(){t.body.curTarget=a;var o=t.baseData.logicPos.clone(),n=t.animation.findBone("body2");if(null!=n?t.baseData.logicPos.x+=t.baseData.zombieData.direction*(15-n.worldX):t.baseData.logicPos.x=d.pzaGameState.map.getXPos(e)+d.pzaGameState.map.getMapOriPos().x,u.pzaEffectManager.createPolevaultingEffect(o,t.node.zIndex-1),t.jumpOver){var i=d.pzaGameState.map.getXPos(e)+d.pzaGameState.map.getMapOriPos().x;t.jumpMsp=(t.baseData.logicPos.x-i)/.27}t.animation.playAnimation(t.jumpOver?"jump2":"jump4",!1,function(){t.jumpDone(),t.jumpOver||p.pzaSoundManager.playAudio("bonk")},function(){t.jumpMsp=0})},function(){p.pzaSoundManager.playAudio("poleland"),t.scheduleOnce(function(){p.pzaSoundManager.playAudio("polevault")},.1)},1)}},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.unscheduleAllCallbacks()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.unscheduleAllCallbacks()},t.prototype.playMoveAnimation=function(){this.zombieState=m.pzaZombieState.MOVE,this.hasJump?this.animation.playAnimation(this.moveAniName[0],!0,null,null,1):this.animation.playAnimation("run",!0,null,null,1)},t.prototype.zombieGoHome=function(){if(d.pzaGameState.isZombieMode()&&window.pzaplantManager.hasBrain(this.baseData.yIndex)){if(this.hasJump)return;this.hasJump=!0;var t=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);return this.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/t,void this.animation.playAnimation(this.moveAniName[0],!0)}a.prototype.zombieGoHome.call(this)},t.prototype.zombieWinMove=function(t){if(a.prototype.zombieWinMove.call(this,t),!this.hasJump){this.hasJump=!0;var e=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=d.pzaGameState.map.getBlockWidth()/e,this.animation.playAnimation(this.moveAniName[0],!0)}},t.prototype.ashesDeath=function(){this.jumping?this.death(!1):a.prototype.ashesDeath.call(this)},i([y],t)}(h.pzaBaseZombie));e.pzaPolevaultingZombie=g,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaPotatoMine:[function(a,t,e){"use strict";cc._RF.push(t,"b1bfb8jog9M2q3U9xqelKMY","pzaPotatoMine");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPotatoMine=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaZombieEnum"),d=a("../pzaGameState"),h=a("./pzaAttackType"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lifeTime=0,t.hasBomb=!1,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),d.pzaGameState.isZombieMode())return this.lifeTime=0,this.hasBomb=!1,t.plantData.hasBreakGround=!0,void this.animation.playAnimation("T_idle",!0);t.plantData.hasBreakGround?this.animation.playAnimation("idle3",!0):this.animation.playAnimation("idle1",!0),this.lifeTime=0,this.hasBomb=!1,this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),d.pzaGameState.onlyShroomCofee=!1,t.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.hasBomb){if(this.baseData.plantData.hasBreakGround){var o=this.findAttackTarget();if(null==o&&(o=this.findDrZomBoss()),null!=o)return void this.attack(o);this.blinkTime-=t,this.blinkTime<=0&&!d.pzaGameState.isZombieMode()&&(this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("idle4",!1,function(){e.animation.playAnimation("idle3",!0)}))}this.baseData.isDead||(this.lifeTime+=t,this.lifeTime>=15&&!this.baseData.plantData.hasBreakGround&&this.breakGround())}},t.prototype.findAttackTarget=function(){return this.body.curTarget},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return this.baseData.xIndex>=7&&null!=a&&null!=a.baseData&&!a.baseData.isDead&&!a.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)?a.baseData:null},t.prototype.breakGround=function(){var a=this;this.baseData.plantData.hasBreakGround=!0,l.pzaSoundManager.playAudio("PotatoMineGrow"),this.animation.playAnimation("idle2",!1,function(){a.animation.playAnimation("idle3",!0)})},t.prototype.attack=function(a){var t=this;this.hasBomb=!0,this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),l.pzaSoundManager.playAudio("PotatoMineBoom"),this.animation.playAnimation(d.pzaGameState.isZombieMode()?"T_blow":"blow",!1,function(){t.death()});var e=new Set;e.add(a);var o=.6*d.pzaGameState.map.getBlockWidth();window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(a){if(t.baseData&&null!=a&&(a.xIndex==t.baseData.xIndex||a.xIndex-1==t.baseData.xIndex)){if(s.pzaUtil.getDistance(t.baseData.logicPos,a.logicPos)>o)return;e.add(a)}});var n=0;e.forEach(function(a){if(t.baseData&&null!=a&&!a.isDead&&!a.buffData.hasBuff(c.pzaBuffType.FLY)&&(a.zombieData.zombieType==u.pzaZombieEnum.DIGGER_ZOMBIE||!a.buffData.hasBuff(c.pzaBuffType.INVINCIBLE)&&!a.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT))){var e=window.pzazombieManager.getZombie(a);e&&e.hurt(t.baseData.atk,t.baseData,h.pzaAttackType.NORMAL_BOOM),e.baseData.isDead&&n++}}),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_2,n)},t.prototype.flaserDeath=function(){this.baseData.plantData.hasBreakGround||this.hasBomb||a.prototype.flaserDeath.call(this)},i([z],t)}(m.pzaBasePlant));e.pzaPotatoMine=y,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaPreLoadManager:[function(a,t,e){"use strict";cc._RF.push(t,"d9bd6gq3PZCwoEpcfU9s174","pzaPreLoadManager"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPreLoadManager=e.pzaResourceUrl=e.pzaResourceDetail=e.pzaResourceType=void 0;var o,n=a("../Battle/Data/pzaPlantEnum"),i=a("../Battle/Data/pzaZombieEnum");(function(a){a[a.Prefab=0]="Prefab",a[a.PrefabDir=1]="PrefabDir",a[a.SpriteFrameDir=2]="SpriteFrameDir",a[a.Scene=3]="Scene"})(o=e.pzaResourceType||(e.pzaResourceType={}));var r,p=function(a,t){void 0===t&&(t=o.Prefab),this.url=null,this.resourceType=null,this.url=a,this.resourceType=t};e.pzaResourceDetail=p,function(a){a.MAIN_SCENE="main",a.ZOMBIE_ICON="resources/Texture/ZombieIcon/",a.PLANT_ICON="resources/Texture/PlantIcon/",a.PART_REWARD="resources/Texture/GuanKa/",a.SHOP_ITEM_ICON="resources/Texture/ShopItemIcon",a.PLANT_SELECT_VIEW="resources/Prefab/View/PlantSelectView",a.PLANT_BELT_VIEW="resources/Prefab/View/PlantBeltView",a.GAME_FAIL_VIEW="resources/Prefab/View/GameFailView",a.GAME_WIN_VIEW="resources/Prefab/View/GameWinView",a.GET_ACHIEVE_VIEW="resources/Prefab/View/GetAchieveView",a.GUIDE_DIALOG_VIEW="resources/Prefab/View/GuideDialogView",a.GUIDE_VIEW="resources/Prefab/View/GuideView",a.NEW_ZOMBIE_VIEW="resources/Prefab/View/NewZombieView",a.NEW_PLANT_VIEW="resources/Prefab/View/NewPlantView",a.GAME_MENU_VIEW="resources/Prefab/View/MenuView",a.GAME_ASSESS_VIEW="resources/Prefab/View/AssessView",a.GAME_OPTION_VIEW="resources/Prefab/View/OptionView",a.GAME_REVIVE_VIEW="resources/Prefab/View/ReviveView",a.TRY_SELECT_VIEW="resources/Prefab/View/TrySelectView",a.CG_PAPER_VIEW="resources/Prefab/View/CGPaperView",a.HANDBOOK_VIEW="resources/Prefab/View/HandbookView",a.PLANT_HANDBOOK_VIEW="resources/Prefab/View/PlantHandbookView",a.ZOMBIE_HANDBOOK_VIEW="resources/Prefab/View/ZombieHandbookView",a.SHOP_VIEW="resources/Prefab/View/ShopView",a.BUY_CONFIRM_VIEW="resources/Prefab/View/BuyConfirmView",a.PART_SELECT_VIEW="resources/Prefab/View/PartSelectView",a.HOME_SELECT_VIEW="resources/Prefab/View/HomeView",a.CHALLENGE_VIEW="resources/Prefab/View/ChallengeView",a.SURVIVAL_VIEW="resources/Prefab/View/SurvivalView",a.PUZZLE_VIEW="resources/Prefab/View/PuzzleView",a.MINIGAME_VIEW="resources/Prefab/View/MiniGameView",a.WARNING_VIEW="resources/Prefab/View/WarningView",a.GARDEN_VIEW="resources/Prefab/View/GardenView",a.DAY_SIGN_VIEW="resources/Prefab/View/SignView",a.MONTH_SIGN_VIEW="resources/Prefab/MonthSign/MonthSignView",a.COMMON_REWARD_VIEW="resources/Prefab/View/CommonRewardView",a.SAVE_VIEW="resources/Prefab/View/SaveView",a.SHARE_GIFT_VIEW="resources/Prefab/View/ShareGiftView",a.DAVE_TREASURE_VIEW="resources/Prefab/View/DaveTreasureView",a.RANK_VIEW="resources/Prefab/View/RankView",a.ZOMBIE_SELECT_VIEW="resources/Prefab/View/ZombieSelectView",a.PRE_OPEN_VIEW="resources/Prefab/View/PreOpenView",a.GAME_CLUB_VIEW="resources/Prefab/View/GameClubView",a.BYTE_SIDEBAR_VIEW="resources/Prefab/View/sideBarView",a.BYTE_RECORD_VIEW="resources/Prefab/View/RecordView",a.CREATIVE_VIEW="resources/Prefab/View/CreativeModeView",a.RECRUIT_VIEW="resources/Prefab/View/RecruitView",a.PEA_SHOOTER="resources/Prefab/Plant/Peashooter",a.SUN_FLOWER="resources/Prefab/Plant/Sunflower",a.CHERRY_BOMB="resources/Prefab/Plant/CherryBomb",a.WALL_NUT="resources/Prefab/Plant/WallNut",a.POTATO_MINE="resources/Prefab/Plant/PotatoMine",a.SNOW_PEA="resources/Prefab/Plant/SnowPea",a.CHOMPER="resources/Prefab/Plant/Chomper",a.REPEATER="resources/Prefab/Plant/Repeater",a.SUN_SHROOM="resources/Prefab/Plant/SunShroom",a.PUFF_SHROOM="resources/Prefab/Plant/PuffShroom",a.FUME_SHROOM="resources/Prefab/Plant/FumeShroom",a.GRAVE_BUSTER="resources/Prefab/Plant/GraveBuster",a.HYPNO_SHROOM="resources/Prefab/Plant/HypnoShroom",a.SCAREDY_SHROOM="resources/Prefab/Plant/ScaredyShroom",a.ICE_SHROOM="resources/Prefab/Plant/IceShroom",a.DOOM_SHROOM="resources/Prefab/Plant/DoomShroom",a.LILY_PAD="resources/Prefab/Plant/LilyPad",a.SQUASH="resources/Prefab/Plant/Squash",a.THREE_PEATER="resources/Prefab/Plant/ThreePeater",a.TANGLE_KELP="resources/Prefab/Plant/TangleKelp",a.JALAPENO="resources/Prefab/Plant/Jalapeno",a.SPIKEWEED="resources/Prefab/Plant/Spikeweed",a.TORCHWOOD="resources/Prefab/Plant/Torchwood",a.TALL_NUT="resources/Prefab/Plant/TallNut",a.SEA_SHROOM="resources/Prefab/Plant/SeaShroom",a.PLANTERN="resources/Prefab/Plant/Plantern",a.CACTUS="resources/Prefab/Plant/Cactus",a.BLOVER="resources/Prefab/Plant/Blover",a.SPLIT_PEA="resources/Prefab/Plant/SplitPea",a.STAR_FRUIT="resources/Prefab/Plant/StarFruit",a.PUMPKIN="resources/Prefab/Plant/Pumpkin",a.MAGNET_SHROOM="resources/Prefab/Plant/MagnetShroom",a.CABBAGE_PULT="resources/Prefab/Plant/CabbagePult",a.FLOWER_POT="resources/Prefab/Plant/FlowerPot",a.KERNEL_PULT="resources/Prefab/Plant/KernelPult",a.COFFEE_BEAN="resources/Prefab/Plant/CoffeeBean",a.GARLIC="resources/Prefab/Plant/Garlic",a.UMBRELLA_LEAF="resources/Prefab/Plant/UmbrellaLeaf",a.MARIGOLD="resources/Prefab/Plant/Marigold",a.MELON_PULT="resources/Prefab/Plant/MelonPult",a.GATLING_PEA="resources/Prefab/Plant/GatlingPea",a.TWIN_SUNFLOWER="resources/Prefab/Plant/TwinSunflower",a.GLOOM_SHROOM="resources/Prefab/Plant/GloomShroom",a.CATTAIL="resources/Prefab/Plant/Cattail",a.WINTER_MELON="resources/Prefab/Plant/WinterMelon",a.GOLD_MAGNET="resources/Prefab/Plant/GoldMagnet",a.SPIKEROCK="resources/Prefab/Plant/Spikerock",a.COB_CANNON="resources/Prefab/Plant/CobCannon",a.IMITATER="resources/Prefab/Plant/Imitater",a.SUPER_CHOMPER="resources/Prefab/Plant/SuperChomper",a.BOOM_NUT="resources/Prefab/Plant/BoomNut",a.STAR_FRUIT_SHADOW="resources/Prefab/Plant/StarFruitShadow",a.WALL_NUT_BOWLING="resources/Prefab/Plant/WallNutBowling",a.BOOM_NUT_BOWLING="resources/Prefab/Plant/BoomNutBowling",a.TALL_NUT_BOWLING="resources/Prefab/Plant/TallNutBowling",a.ZOMBIE="resources/Prefab/Zombie/NormalZombie",a.FLAG_ZOMBIE="resources/Prefab/Zombie/FlagZombie",a.CONE_HEAD_ZOMBIE="resources/Prefab/Zombie/ConeHeadZombie",a.POLEVAULTING_ZOMBIE="resources/Prefab/Zombie/PolevaultingZombie",a.BUCKET_HEAD_ZOMBIE="resources/Prefab/Zombie/BucketHeadZombie",a.NEWSPAPER_ZOMBIE="resources/Prefab/Zombie/NewspaperZombie",a.SCREEN_DOOR_ZOMBIE="resources/Prefab/Zombie/ScreenDoorZombie",a.SCREEN_DOOR_ZOMBIE2="resources/Prefab/Zombie/ScreenDoorZombie2",a.FOOTBALL_ZOMBIE="resources/Prefab/Zombie/FootballZombie",a.DANCING_ZOMBIE="resources/Prefab/Zombie/DancingZombie",a.DANCING_ZOMBIE2="resources/Prefab/Zombie/DancingZombie2",a.DANCING_ZOMBIE3="resources/Prefab/Zombie/DancingZombie3",a.BACKUP_DANCER="resources/Prefab/Zombie/BackupDancerZombie",a.BACKUP_DANCER2="resources/Prefab/Zombie/BackupDancerZombie2",a.DUCKY_TUBE_ZOMBIE="resources/Prefab/Zombie/DuckyTubeZombie",a.DUCKY_TUBE_CONE_ZOMBIE="resources/Prefab/Zombie/DuckyTubeConeZombie",a.DUCKY_TUBE_BUCKET_ZOMBIE="resources/Prefab/Zombie/DuckyTubeBucketZombie",a.SNORKEL_ZOMBIE="resources/Prefab/Zombie/SnorkelZombie",a.ZOMBONI="resources/Prefab/Zombie/Zomboni",a.ZOMBONI2="resources/Prefab/Zombie/Zomboni2",a.ZOMBONI3="resources/Prefab/Zombie/Zomboni3",a.DIGGERFOOTBALL_ZOMBIE2="resources/Prefab/Zombie/DiggerFootBallZombie",a.ZOMBIE_BOBSLED_TEAM="resources/Prefab/Zombie/ZombieBobsledTeam",a.DOLPHIN_RIDER_ZOMBIE="resources/Prefab/Zombie/DolphinRiderZombie",a.JACK_ZOMBIE="resources/Prefab/Zombie/JackZombie",a.JACK_ZOMBIE2="resources/Prefab/Zombie/JackZombie2",a.BALLOON_ZOMBIE="resources/Prefab/Zombie/BalloonZombie",a.DIGGER_ZOMBIE="resources/Prefab/Zombie/DiggerZombie",a.POGO_ZOMBIE="resources/Prefab/Zombie/PogoZombie",a.YETI_ZOMBIE="resources/Prefab/Zombie/YetiZombie",a.BUNGEE_ZOMBIE="resources/Prefab/Zombie/BungeeZombie",a.LADDER_ZOMBIE="resources/Prefab/Zombie/LadderZombie",a.CATAPULT_ZOMBIE="resources/Prefab/Zombie/CatapultZombie",a.GARGANTUAR="resources/Prefab/Zombie/Gargantuar",a.GARGANTUAR2="resources/Prefab/Zombie/Gargantuar2",a.RED_GARGANTUAR="resources/Prefab/Zombie/Gargantuar",a.IMP="resources/Prefab/Zombie/Imp",a.DR_ZOMBOSS="resources/Prefab/Zombie/DrZomBoss",a.ZOMBIE_BOBSLED="resources/Prefab/Zombie/ZombieBobsled",a.SUN="resources/Prefab/Sun",a.CLEANER_CAR="resources/Prefab/CleanerCar",a.BRAIN="resources/Prefab/Brain",a.PITCHFORK="resources/Prefab/PitchFork",a.WORD_EFFECT="resources/Prefab/Effect/WordEffect",a.SHADOW="resources/Prefab/Effect/Shadow",a.SHOVEL_EFFECT="resources/Prefab/Effect/ShovelEffect",a.PLANT_EFFECT="resources/Prefab/Effect/PlantEffect",a.DROP_COIN="resources/Prefab/Effect/DropCoin",a.DROP_CARD="resources/Prefab/Effect/DropCard",a.DROP_PLANT_CARD="resources/Prefab/Effect/DropPlantCard",a.ZOMBIE_CLOTHER_FALL_EFFECT="resources/Prefab/Effect/ZombieClotherFallEffect",a.SHOW_GRASS_EFFECT="resources/Prefab/Effect/ShowGrassEffect",a.GROVE_EFFECT="resources/Prefab/Effect/GroveEffect",a.ROOF_PRE_EFFECT="resources/Prefab/Effect/RoofPreEffect",a.SMOKE_EFFECT="resources/Prefab/Effect/SmokeEffect",a.FOG_EFFECT="resources/Prefab/Effect/FogEffect",a.RAIN_NIGHT_EFFECT="resources/Prefab/Effect/RainNightEffect",a.RAIN_EFFECT="resources/Prefab/Effect/RainEffect",a.WATER_LIGHT_EFFECT="resources/Prefab/Effect/WaterLightEffect",a.WATER_FLOWER_EFFECT="resources/Prefab/Effect/WaterFlowerEffect",a.PLANT_WATER_EFFECT="resources/Prefab/Effect/PlantWaterEffect",a.TOMB="resources/Prefab/Effect/Tomb",a.DIRT_EFFECT="resources/Prefab/Effect/DirtEffect",a.JAR="resources/Prefab/Jar",a.HAMMER_EFFECT="resources/Prefab/Effect/HammerEffect",a.ICE_GROUND="resources/Prefab/Effect/IceGround",a.ABSORB_IRON_EQUIP="resources/Prefab/Effect/AbsorbIronEquip",a.NUT_BOOM_EFFECT="resources/Prefab/Effect/NutBoomEffect",a.CHERRY_BOOM_EFFECT="resources/Prefab/Effect/CherryBoomEffect",a.JACK_BOOM_EFFECT="resources/Prefab/Effect/JackBoomEffect",a.BOOM_FIRE_EFFECT="resources/Prefab/Effect/BoomFireEffect",a.TANGLEKELP_EFFECT="resources/Prefab/Effect/TangleKelpEffect",a.BACK_PUMPKIN="resources/Prefab/Effect/BackPumpkin",a.BACK_PUMPKINFIRE="resources/Prefab/Effect/BackPumpkinFire",a.DOOM_HOLE_EFFECT="resources/Prefab/Effect/DoomHoleEffect",a.GOLD_HOLE_EFFECT="resources/Prefab/Effect/GoldHoleEffect",a.DOOM_BOOM_EFFECT="resources/Prefab/Effect/DoomBoomEffect",a.ICE_BOOM_EFFECT="resources/Prefab/Effect/IceBoomEffect",a.FROZEN_EFFECT="resources/Prefab/Effect/FrozenEffect",a.FUME_SHROOM_EFFECT="resources/Prefab/Effect/FumeShroomEffect",a.ICE_FUME_SHROOM_EFFECT="resources/Prefab/Effect/IceFumeShroomEffect",a.GLOOM_SHROOM_EFFECT="resources/Prefab/Effect/GloomShroomEffect",a.LADDER="resources/Prefab/Effect/Ladder",a.NUT_HURT_EFFECT="resources/Prefab/Effect/NutHurtEffect",a.BUTTER_EFFECT="resources/Prefab/Effect/ButterEffect",a.PLANTERN_EFFECT="resources/Prefab/Effect/PlanternEffect",a.SQUASH_EFFECT="resources/Prefab/Effect/SquashEffect",a.HYPNO_EFFECT="resources/Prefab/Effect/HypnoEffect",a.COB_BOOM_EFFECT="resources/Prefab/Effect/CobBoomEffect",a.COB_BOOM_HOLE="resources/Prefab/Effect/CobHoleEffect",a.IMITATER_EFFECT="resources/Prefab/Effect/ImitaterEffect",a.DR_ZOM_BALL="resources/Prefab/Effect/DrZomBall",a.BUNGEE_ZOMBIE_EFFECT="resources/Prefab/Effect/BungeeZombieEffect",a.RICOCHET_BULLET_EFFECT="resources/Prefab/Effect/RicochetBulletEffect",a.POLEVAULTING_EFFECT="resources/Prefab/Effect/PolevaultingEffect",a.CATAPULT_ASHES_EFFECT="resources/Prefab/Effect/AshesEffect/CatapultAshesEffect",a.DIGGER_ASHES_EFFECT="resources/Prefab/Effect/AshesEffect/DiggerAshesEffect",a.GARGANTUAR_ASHES_EFFECT="resources/Prefab/Effect/AshesEffect/GargantuarAshesEffect",a.IMP_ASHES_EFFECT="resources/Prefab/Effect/AshesEffect/ImpAshesEffect",a.NORMAL_ASHES_EFFECT="resources/Prefab/Effect/AshesEffect/NormalAshesEffect",a.ZOMBONI_ASHES_EFFECT="resources/Prefab/Effect/AshesEffect/ZomboniAshesEffect",a.BALLOON_ASHES_EFFECT="resources/Prefab/Effect/AshesEffect/BalloonAshesEffect",a.IceNut="resources/Prefab/ZJPlant/IceNut",a.TreasureBuster="resources/Prefab/ZJPlant/TreasureBuster",a.SunBomb="resources/Prefab/ZJPlant/SunBomb",a.MelonNut="resources/Prefab/ZJPlant/MelonNut",a.HoleNut="resources/Prefab/ZJPlant/HoleNut",a.MagnetNut="resources/Prefab/ZJPlant/MagnetNut",a.ZombieNut="resources/Prefab/ZJPlant/ZombieNut",a.VipNut="resources/Prefab/ZJPlant/VipNut",a.HeighIceNut="resources/Prefab/ZJPlant/HeighIceNut",a.PumpkinPurple="resources/Prefab/ZJPlant/PumpkinPurple",a.TorchNut="resources/Prefab/ZJPlant/TorchNut",a.FireNut="resources/Prefab/ZJPlant/FireNut",a.IceCat="resources/Prefab/ZJPlant/IceCat",a.HamburgShooter="resources/Prefab/ZJPlant/HamburgShooter",a.HotDog="resources/Prefab/ZJPlant/HotDog",a.ShiftNut="resources/Prefab/ZJPlant/ShiftNut",a.DoomCannon="resources/Prefab/ZJPlant/DoomCannon",a.SunFlowerPlus="resources/Prefab/ZJPlant/SunFlowerPlus",a.SunBean="resources/Prefab/ZJPlant/SunBean",a.SunMine="resources/Prefab/ZJPlant/SunMine",a.FireMine="resources/Prefab/ZJPlant/FireMine",a.SquashNut="resources/Prefab/ZJPlant/SquashNut",a.IceSquash="resources/Prefab/ZJPlant/IceSquash",a.SquashKing="resources/Prefab/ZJPlant/SquashKing",a.ButterJoker="resources/Prefab/ZJPlant/ButterJoker",a.GarlicJalapeno="resources/Prefab/ZJPlant/GarlicJalapeno",a.CherryJalapeno="resources/Prefab/ZJPlant/CherryJalapeno",a.IceBlover="resources/Prefab/ZJPlant/IceBlover",a.PeaCannon="resources/Prefab/ZJPlant/PeaCannon",a.ButterGloomShroom="resources/Prefab/ZJPlant/ButterGloomShroom",a.RandomPlantBox="resources/Prefab/ZJPlant/RandomPlantBox",a.PeaPool="resources/Prefab/ZJPlant/PeaPool",a.SpikeRockNut="resources/Prefab/ZJPlant/SpikeRockNut",a.SunQueen="resources/Prefab/ZJPlant/SunQueen",a.WildPea="resources/Prefab/ZJPlant/WildPea",a.CupidShooter="resources/Prefab/ZJPlant/CupidShooter",a.PeaSun="resources/Prefab/ZJPlant/PeaSun",a.SunPot="resources/Prefab/ZJPlant/SunPot",a.QQFUME_SHROOM="resources/Prefab/ZJPlant/QqFumeShroom",a.ICEFUME_SHROOM="resources/Prefab/ZJPlant/IceFumeShroom",a.IceSpike="resources/Prefab/ZJPlant/IceSpike",a.CATLITTERPOT="resources/Prefab/ZJPlant/CatLitterPot",a.SpikeChomper="resources/Prefab/ZJPlant/SpikeChomper",a.PumpkinPurpleFire="resources/Prefab/ZJPlant/PumpkinFire",a.MarigoldMammon="resources/Prefab/ZJPlant/MarigoldMammon",a.CatSun="resources/Prefab/ZJPlant/CatSun",a.SunShroomShooter="resources/Prefab/ZJPlant/SunShroomShooter",a.IceCat2="resources/Prefab/ZJPlant/IceCat2",a.HoloCards="resources/Prefab/ZJPlant/HoloCards",a.CONE_HEAD_ZOMBIE2="resources/Prefab/Zombie/ConeHeadZombie2",a.POLEVAULTING_ZOMBIE2="resources/Prefab/Zombie/PolevaultingZombie2",a.BedCar="resources/Prefab/Zombie/BedCar",a.NightWear="resources/Prefab/Zombie/NightWear",a.PeaZombie="resources/Prefab/Zombie/PeaZombie",a.Nut_Zombie="resources/Prefab/Zombie/NutZombie"}(r=e.pzaResourceUrl||(e.pzaResourceUrl={}));var l=function(){function a(){}return a.getSubResources=function(a){return this.SubResourceMap.get(a)},a.getPartSubResources=function(a,t){var e=a+"-"+t,o=this.PartSubResourceMap.get(e);return null!=o?o:(o=[new p(r.SUN),new p(r.CLEANER_CAR),new p(r.WORD_EFFECT),new p(r.SHADOW),new p(r.SHOVEL_EFFECT),new p(r.PLANT_EFFECT),new p(r.DROP_COIN),new p(r.DROP_CARD),new p(r.DROP_PLANT_CARD),new p(r.ZOMBIE_CLOTHER_FALL_EFFECT),new p(r.NORMAL_ASHES_EFFECT),new p(r.SMOKE_EFFECT)],1==a&&t<=4&&o.push(new p(r.SHOW_GRASS_EFFECT)),2==a&&(o.push(new p(r.TOMB)),o.push(new p(r.DIRT_EFFECT)),5==t&&o.push(new p(r.HAMMER_EFFECT))),a<=4?o.push(new p(r.GROVE_EFFECT)):o.push(new p(r.ROOF_PRE_EFFECT)),4==a&&(o.push(new p(r.FOG_EFFECT)),5==t&&(o.push(new p(r.JAR)),o.push(new p(r.HAMMER_EFFECT))),10==t&&(o.push(new p(r.RAIN_NIGHT_EFFECT)),o.push(new p(r.RAIN_EFFECT)))),3==a||4==a?(o.push(new p(r.WATER_FLOWER_EFFECT)),o.push(new p(r.WATER_LIGHT_EFFECT)),o.push(new p(r.PLANT_WATER_EFFECT))):5==a&&(o.push(new p(r.BUNGEE_ZOMBIE)),o.push(new p(r.BUNGEE_ZOMBIE_EFFECT))),this.PartSubResourceMap.set(e,o),o)},a.getPlantUrl=function(t){return a.plantPrefabMap.get(t)},a.getZombieUrl=function(t){return a.zombiePrefabMap.get(t)},a.MainResourceMap=new Map([[r.MAIN_SCENE,new p(r.MAIN_SCENE,o.Scene)],[r.HOME_SELECT_VIEW,new p(r.HOME_SELECT_VIEW,o.Prefab)]]),a.SubResourceMap=new Map([[r.ZOMBIE_HANDBOOK_VIEW,[new p(r.ZOMBIE_ICON,o.SpriteFrameDir)]],[r.PLANT_HANDBOOK_VIEW,[new p(r.PLANT_ICON,o.SpriteFrameDir)]],[r.PLANT_SELECT_VIEW,[new p(r.PLANT_ICON,o.SpriteFrameDir)]],[r.PLANT_BELT_VIEW,[new p(r.PLANT_ICON,o.SpriteFrameDir)]],[r.PART_SELECT_VIEW,[new p(r.PART_REWARD,o.SpriteFrameDir)]],[r.SHOP_VIEW,[new p(r.SHOP_ITEM_ICON,o.SpriteFrameDir)]],[r.MAGNET_SHROOM,[new p(r.ABSORB_IRON_EQUIP)]],[r.BOOM_NUT_BOWLING,[new p(r.NUT_BOOM_EFFECT)]],[r.CHERRY_BOMB,[new p(r.CHERRY_BOOM_EFFECT)]],[r.JALAPENO,[new p(r.BOOM_FIRE_EFFECT)]],[r.TORCHWOOD,[new p(r.BOOM_FIRE_EFFECT)]],[r.TANGLE_KELP,[new p(r.TANGLEKELP_EFFECT)]],[r.PUMPKIN,[new p(r.BACK_PUMPKIN)]],[r.PumpkinPurpleFire,[new p(r.BACK_PUMPKINFIRE)]],[r.DOOM_SHROOM,[new p(r.DOOM_BOOM_EFFECT),new p(r.DOOM_HOLE_EFFECT)]],[r.ICE_SHROOM,[new p(r.ICE_BOOM_EFFECT),new p(r.FROZEN_EFFECT)]],[r.FUME_SHROOM,[new p(r.FUME_SHROOM_EFFECT)]],[r.ICEFUME_SHROOM,[new p(r.ICE_FUME_SHROOM_EFFECT)]],[r.WALL_NUT,[new p(r.NUT_HURT_EFFECT)]],[r.TALL_NUT,[new p(r.NUT_HURT_EFFECT)]],[r.KERNEL_PULT,[new p(r.BUTTER_EFFECT)]],[r.PLANTERN,[new p(r.PLANTERN_EFFECT)]],[r.SQUASH,[new p(r.SQUASH_EFFECT)]],[r.HYPNO_SHROOM,[new p(r.HYPNO_EFFECT)]],[r.GLOOM_SHROOM,[new p(r.GLOOM_SHROOM_EFFECT)]],[r.COB_CANNON,[new p(r.COB_BOOM_EFFECT),new p(r.COB_BOOM_HOLE)]],[r.IMITATER,[new p(r.IMITATER_EFFECT)]],[r.POLEVAULTING_ZOMBIE,[new p(r.POLEVAULTING_EFFECT)]],[r.ZOMBONI,[new p(r.ICE_GROUND),new p(r.ZOMBONI_ASHES_EFFECT),new p(r.ZOMBIE_BOBSLED_TEAM),new p(r.ZOMBIE_BOBSLED)]],[r.ZOMBONI2,[new p(r.ICE_GROUND),new p(r.ZOMBONI_ASHES_EFFECT),new p(r.ZOMBIE_BOBSLED_TEAM),new p(r.ZOMBIE_BOBSLED)]],[r.JACK_ZOMBIE,[new p(r.JACK_BOOM_EFFECT)]],[r.JACK_ZOMBIE2,[new p(r.JACK_BOOM_EFFECT)]],[r.BALLOON_ZOMBIE,[new p(r.BALLOON_ASHES_EFFECT)]],[r.LADDER_ZOMBIE,[new p(r.LADDER)]],[r.CATAPULT_ZOMBIE,[new p(r.CATAPULT_ASHES_EFFECT)]],[r.DIGGER_ZOMBIE,[new p(r.DIGGER_ASHES_EFFECT)]],[r.GARGANTUAR,[new p(r.GARGANTUAR_ASHES_EFFECT),new p(r.IMP_ASHES_EFFECT),new p(r.IMP)]],[r.RED_GARGANTUAR,[new p(r.GARGANTUAR_ASHES_EFFECT),new p(r.IMP_ASHES_EFFECT),new p(r.IMP)]],[r.DR_ZOMBOSS,[new p(r.DR_ZOM_BALL)]],[r.BedCar,[new p(r.NightWear)]]]),a.PartSubResourceMap=new Map,a.plantPrefabMap=new Map([[n.pzaPlantEnum.PEA_SHOOTER,r.PEA_SHOOTER],[n.pzaPlantEnum.SUN_FLOWER,r.SUN_FLOWER],[n.pzaPlantEnum.CHERRY_BOMB,r.CHERRY_BOMB],[n.pzaPlantEnum.WALL_NUT,r.WALL_NUT],[n.pzaPlantEnum.POTATO_MINE,r.POTATO_MINE],[n.pzaPlantEnum.SNOW_PEA,r.SNOW_PEA],[n.pzaPlantEnum.CHOMPER,r.CHOMPER],[n.pzaPlantEnum.REPEATER,r.REPEATER],[n.pzaPlantEnum.SUN_SHROOM,r.SUN_SHROOM],[n.pzaPlantEnum.PUFF_SHROOM,r.PUFF_SHROOM],[n.pzaPlantEnum.FUME_SHROOM,r.FUME_SHROOM],[n.pzaPlantEnum.GRAVE_BUSTER,r.GRAVE_BUSTER],[n.pzaPlantEnum.HYPNO_SHROOM,r.HYPNO_SHROOM],[n.pzaPlantEnum.SCAREDY_SHROOM,r.SCAREDY_SHROOM],[n.pzaPlantEnum.ICE_SHROOM,r.ICE_SHROOM],[n.pzaPlantEnum.DOOM_SHROOM,r.DOOM_SHROOM],[n.pzaPlantEnum.LILY_PAD,r.LILY_PAD],[n.pzaPlantEnum.SQUASH,r.SQUASH],[n.pzaPlantEnum.THREE_PEATER,r.THREE_PEATER],[n.pzaPlantEnum.TANGLE_KELP,r.TANGLE_KELP],[n.pzaPlantEnum.JALAPENO,r.JALAPENO],[n.pzaPlantEnum.SPIKEWEED,r.SPIKEWEED],[n.pzaPlantEnum.TORCHWOOD,r.TORCHWOOD],[n.pzaPlantEnum.TALL_NUT,r.TALL_NUT],[n.pzaPlantEnum.SEA_SHROOM,r.SEA_SHROOM],[n.pzaPlantEnum.PLANTERN,r.PLANTERN],[n.pzaPlantEnum.CACTUS,r.CACTUS],[n.pzaPlantEnum.BLOVER,r.BLOVER],[n.pzaPlantEnum.SPLIT_PEA,r.SPLIT_PEA],[n.pzaPlantEnum.STAR_FRUIT,r.STAR_FRUIT],[n.pzaPlantEnum.PUMPKIN,r.PUMPKIN],[n.pzaPlantEnum.MAGNET_SHROOM,r.MAGNET_SHROOM],[n.pzaPlantEnum.CABBAGE_PULT,r.CABBAGE_PULT],[n.pzaPlantEnum.FLOWER_POT,r.FLOWER_POT],[n.pzaPlantEnum.KERNEL_PULT,r.KERNEL_PULT],[n.pzaPlantEnum.COFFEE_BEAN,r.COFFEE_BEAN],[n.pzaPlantEnum.GARLIC,r.GARLIC],[n.pzaPlantEnum.UMBRELLA_LEAF,r.UMBRELLA_LEAF],[n.pzaPlantEnum.MARIGOLD,r.MARIGOLD],[n.pzaPlantEnum.MELON_PULT,r.MELON_PULT],[n.pzaPlantEnum.GATLING_PEA,r.GATLING_PEA],[n.pzaPlantEnum.TWIN_SUNFLOWER,r.TWIN_SUNFLOWER],[n.pzaPlantEnum.GLOOM_SHROOM,r.GLOOM_SHROOM],[n.pzaPlantEnum.CATTAIL,r.CATTAIL],[n.pzaPlantEnum.WINTER_MELON,r.WINTER_MELON],[n.pzaPlantEnum.GOLD_MAGNET,r.GOLD_MAGNET],[n.pzaPlantEnum.SPIKEROCK,r.SPIKEROCK],[n.pzaPlantEnum.COB_CANNON,r.COB_CANNON],[n.pzaPlantEnum.IMITATER,r.IMITATER],[n.pzaPlantEnum.WALL_NUT_BOWLING,r.WALL_NUT_BOWLING],[n.pzaPlantEnum.BOOM_NUT_BOWLING,r.BOOM_NUT_BOWLING],[n.pzaPlantEnum.TALL_NUT_BOWLING,r.TALL_NUT_BOWLING],[n.pzaPlantEnum.SUPER_CHOMPER,r.SUPER_CHOMPER],[n.pzaPlantEnum.BOOM_NUT,r.BOOM_NUT],[n.pzaPlantEnum.ICE_NUT,r.IceNut],[n.pzaPlantEnum.TreasureBuster,r.TreasureBuster],[n.pzaPlantEnum.SunBomb,r.SunBomb],[n.pzaPlantEnum.MelonNut,r.MelonNut],[n.pzaPlantEnum.HoleNut,r.HoleNut],[n.pzaPlantEnum.MagnetNut,r.MagnetNut],[n.pzaPlantEnum.ZombieNut,r.ZombieNut],[n.pzaPlantEnum.VipNut,r.VipNut],[n.pzaPlantEnum.HeighIceNut,r.HeighIceNut],[n.pzaPlantEnum.PumpkinPurple,r.PumpkinPurple],[n.pzaPlantEnum.TorchNut,r.TorchNut],[n.pzaPlantEnum.FireNut,r.FireNut],[n.pzaPlantEnum.IceCat,r.IceCat],[n.pzaPlantEnum.HamburgShooter,r.HamburgShooter],[n.pzaPlantEnum.HotDog,r.HotDog],[n.pzaPlantEnum.ShiftNut,r.ShiftNut],[n.pzaPlantEnum.DoomCannon,r.DoomCannon],[n.pzaPlantEnum.SunFlowerPlus,r.SunFlowerPlus],[n.pzaPlantEnum.SunBean,r.SunBean],[n.pzaPlantEnum.SunMine,r.SunMine],[n.pzaPlantEnum.FireMine,r.FireMine],[n.pzaPlantEnum.SquashNut,r.SquashNut],[n.pzaPlantEnum.IceSquash,r.IceSquash],[n.pzaPlantEnum.SquashKing,r.SquashKing],[n.pzaPlantEnum.ButterJoker,r.ButterJoker],[n.pzaPlantEnum.GarlicJalapeno,r.GarlicJalapeno],[n.pzaPlantEnum.CherryJalapeno,r.CherryJalapeno],[n.pzaPlantEnum.IceBlover,r.IceBlover],[n.pzaPlantEnum.PeaCannon,r.PeaCannon],[n.pzaPlantEnum.ButterGloomShroom,r.ButterGloomShroom],[n.pzaPlantEnum.RandomPlantBox,r.RandomPlantBox],[n.pzaPlantEnum.PeaPool,r.PeaPool],[n.pzaPlantEnum.SpikeRockNut,r.SpikeRockNut],[n.pzaPlantEnum.SunQueen,r.SunQueen],[n.pzaPlantEnum.WildPea,r.WildPea],[n.pzaPlantEnum.CupidShooter,r.CupidShooter],[n.pzaPlantEnum.PeaSun,r.PeaSun],[n.pzaPlantEnum.SunPot,r.SunPot],[n.pzaPlantEnum.QQFUME_SHROOM,r.QQFUME_SHROOM],[n.pzaPlantEnum.ICEFUME_SHROOM,r.ICEFUME_SHROOM],[n.pzaPlantEnum.IceSpike,r.IceSpike],[n.pzaPlantEnum.CATLITTERPOT,r.CATLITTERPOT],[n.pzaPlantEnum.SpikeChomper,r.SpikeChomper],[n.pzaPlantEnum.PumpkinPurpleFire,r.PumpkinPurpleFire],[n.pzaPlantEnum.MarigoldMammon,r.MarigoldMammon],[n.pzaPlantEnum.CatSun,r.CatSun],[n.pzaPlantEnum.SunShroomShooter,r.SunShroomShooter],[n.pzaPlantEnum.IceCat2,r.IceCat2],[n.pzaPlantEnum.HoloCards,r.HoloCards]]),a.zombiePrefabMap=new Map([[i.pzaZombieEnum.ZOMBIE,r.ZOMBIE],[i.pzaZombieEnum.FLAG_ZOMBIE,r.FLAG_ZOMBIE],[i.pzaZombieEnum.CONE_HEAD_ZOMBIE,r.CONE_HEAD_ZOMBIE],[i.pzaZombieEnum.POLEVAULTING_ZOMBIE,r.POLEVAULTING_ZOMBIE],[i.pzaZombieEnum.BUCKET_HEAD_ZOMBIE,r.BUCKET_HEAD_ZOMBIE],[i.pzaZombieEnum.NEWSPAPER_ZOMBIE,r.NEWSPAPER_ZOMBIE],[i.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,r.SCREEN_DOOR_ZOMBIE],[i.pzaZombieEnum.FOOTBALL_ZOMBIE,r.FOOTBALL_ZOMBIE],[i.pzaZombieEnum.DANCING_ZOMBIE,r.DANCING_ZOMBIE],[i.pzaZombieEnum.BACKUP_DANCER,r.BACKUP_DANCER],[i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE,r.DUCKY_TUBE_ZOMBIE],[i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE,r.DUCKY_TUBE_CONE_ZOMBIE],[i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE,r.DUCKY_TUBE_BUCKET_ZOMBIE],[i.pzaZombieEnum.SNORKEL_ZOMBIE,r.SNORKEL_ZOMBIE],[i.pzaZombieEnum.ZOMBONI,r.ZOMBONI],[i.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM,r.ZOMBIE_BOBSLED_TEAM],[i.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE,r.DOLPHIN_RIDER_ZOMBIE],[i.pzaZombieEnum.JACK_ZOMBIE,r.JACK_ZOMBIE],[i.pzaZombieEnum.BALLOON_ZOMBIE,r.BALLOON_ZOMBIE],[i.pzaZombieEnum.DIGGER_ZOMBIE,r.DIGGER_ZOMBIE],[i.pzaZombieEnum.POGO_ZOMBIE,r.POGO_ZOMBIE],[i.pzaZombieEnum.YETI_ZOMBIE,r.YETI_ZOMBIE],[i.pzaZombieEnum.BUNGEE_ZOMBIE,r.BUNGEE_ZOMBIE],[i.pzaZombieEnum.LADDER_ZOMBIE,r.LADDER_ZOMBIE],[i.pzaZombieEnum.CATAPULT_ZOMBIE,r.CATAPULT_ZOMBIE],[i.pzaZombieEnum.GARGANTUAR,r.GARGANTUAR],[i.pzaZombieEnum.RED_GARGANTUAR,r.RED_GARGANTUAR],[i.pzaZombieEnum.IMP,r.IMP],[i.pzaZombieEnum.IMP_MINI,r.IMP],[i.pzaZombieEnum.DR_ZOMBOSS,r.DR_ZOMBOSS],[i.pzaZombieEnum.ZOMBIE_BOBSLED,r.ZOMBIE_BOBSLED],[i.pzaZombieEnum.CONE_HEAD_ZOMBIE2,r.CONE_HEAD_ZOMBIE2],[i.pzaZombieEnum.POLEVAULTING_ZOMBIE2,r.POLEVAULTING_ZOMBIE2],[i.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2,r.SCREEN_DOOR_ZOMBIE2],[i.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3,r.SCREEN_DOOR_ZOMBIE2],[i.pzaZombieEnum.SCREEN_DOOR_ZOMBIE4,r.SCREEN_DOOR_ZOMBIE2],[i.pzaZombieEnum.SCREEN_DOOR_ZOMBIE5,r.SCREEN_DOOR_ZOMBIE2],[i.pzaZombieEnum.DANCING_ZOMBIE2,r.DANCING_ZOMBIE2],[i.pzaZombieEnum.DANCING_ZOMBIE3,r.DANCING_ZOMBIE3],[i.pzaZombieEnum.BACKUP_DANCER2,r.BACKUP_DANCER2],[i.pzaZombieEnum.JACK_ZOMBIE2,r.JACK_ZOMBIE2],[i.pzaZombieEnum.GARGANTUAR2,r.GARGANTUAR2],[i.pzaZombieEnum.GARGANTUAR3,r.GARGANTUAR2],[i.pzaZombieEnum.GARGANTUAR4,r.GARGANTUAR2],[i.pzaZombieEnum.RED_GARGANTUAR2,r.GARGANTUAR2],[i.pzaZombieEnum.RED_GARGANTUAR3,r.GARGANTUAR2],[i.pzaZombieEnum.RED_GARGANTUAR4,r.GARGANTUAR2],[i.pzaZombieEnum.ZOMBONI2,r.ZOMBONI2],[i.pzaZombieEnum.ZOMBONI3,r.ZOMBONI3],[i.pzaZombieEnum.DIGGERFOOTBALL_ZOMBIE2,r.DIGGERFOOTBALL_ZOMBIE2],[i.pzaZombieEnum.BedCar,r.BedCar],[i.pzaZombieEnum.NightWear,r.NightWear],[i.pzaZombieEnum.PeaZombie,r.PeaZombie],[i.pzaZombieEnum.NormalPeaZombie,r.PeaZombie],[i.pzaZombieEnum.PeaZombie2,r.PeaZombie],[i.pzaZombieEnum.PeaZombie3,r.PeaZombie],[i.pzaZombieEnum.PeaZombie4,r.PeaZombie],[i.pzaZombieEnum.Nut_Zombie,r.Nut_Zombie]]),a}();e.pzaPreLoadManager=l,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/Data/pzaZombieEnum":"pzaZombieEnum"}],pzaPreOpenView:[function(a,t,e){"use strict";cc._RF.push(t,"6b42db5VpFESKI76+GXAAZl","pzaPreOpenView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPreOpenView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaSoundManager"),l=a("../Common/pzaStatisticsMgr"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.confirmTxt=null,t.adIcon=null,t.confirmBtn=null,t.confirmCall=null,t.cutDown=3,t}return n(t,a),t.prototype.show=function(a){this.confirmCall=a,this.cutDown=3,this.confirmBtn.interactable=!1,this.refreshBtnTxt()},t.prototype.update=function(a){this.cutDown<=0||(this.cutDown-=a,this.refreshBtnTxt())},t.prototype.refreshBtnTxt=function(){if(this.cutDown<=0)return this.confirmBtn.interactable=!0,this.adIcon.active=!0,this.confirmTxt.string="\u63d0\u524d\u4f53\u9a8c",void l.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"19"},{name:"adname",value:"\u65e0\u5c3d\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"});this.adIcon.active=!1,this.confirmTxt.string=""+Math.ceil(this.cutDown)},t.prototype.clickConfirm=function(){p.pzaSoundManager.playSFX(),this.close(),this.confirmCall&&this.confirmCall()},t.prototype.clickCancel=function(){p.pzaSoundManager.playSFX(),this.close()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([u({displayName:"\u786e\u5b9a\u6309\u94ae\u6587\u6848",type:cc.Label})],t.prototype,"confirmTxt",void 0),i([u({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Node})],t.prototype,"adIcon",void 0),i([u({displayName:"\u786e\u5b9a\u6309\u94ae",type:cc.Button})],t.prototype,"confirmBtn",void 0),i([c],t)}(cc.Component);e.pzaPreOpenView=d,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr"}],pzaPreviewTip:[function(a,t,e){"use strict";cc._RF.push(t,"f8bc1KUK1dFB62k9KmZdlgF","pzaPreviewTip");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPreviewTip=void 0;var r=a("./pzaGameCommonPool"),p=a("./pzaGameManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.word=null,t.flagWord=null,t.chapterPreviewTips=["\u8fd9\u91cc\u662f\u4f60\u7684\u623f\u5b50","\u8fd9\u91cc\u662f\u4f60\u7684\u623f\u5b50","\u50f5\u5c38\u4eec\u5728\u540e\u9662","\u50f5\u5c38\u4eec\u5728\u540e\u9662","\u4fdd\u62a4\u597d\u4f60\u7684\u5c4b\u9876","\u8fd9\u91cc\u662f\u4f60\u7684\u623f\u5b50","\u8fd9\u91cc\u662f\u4f60\u7684\u623f\u5b50","\u50f5\u5c38\u4eec\u5728\u540e\u9662","\u50f5\u5c38\u4eec\u5728\u540e\u9662","\u4fdd\u62a4\u597d\u4f60\u7684\u5c4b\u9876"],t.survivalPreviewTips=["\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876","\u767d\u5929","\u9ed1\u591c","\u6c34\u6c60","\u6d53\u96fe","\u5c4b\u9876"],t}return n(t,a),t.prototype.showTip=function(a,t,e,o){var n=this;p.pzaGameManager.getCurrentGame().showPreviewTip(this,a,t),this.word.node.stopAllActions(),this.word.node.opacity=255,null!=o&&this.word.node.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(o),cc.delayTime(.5),cc.fadeOut(.4),cc.callFunc(function(){n.close()})))},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u6587\u5b57",type:cc.Label})],t.prototype,"word",void 0),i([c({displayName:"\u65d7\u5e1c\u6587\u5b57",type:cc.Label})],t.prototype,"flagWord",void 0),i([s],t)}(cc.Component);e.pzaPreviewTip=u,cc._RF.pop()},{"./pzaGameCommonPool":"pzaGameCommonPool","./pzaGameManager":"pzaGameManager"}],pzaPrivacyWin:[function(a,t,e){"use strict";cc._RF.push(t,"a87761x8ORPppXOssBXcfCw","pzaPrivacyWin");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaChannel"),p=a("./pzaKDefine"),l=a("./pzakc"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.txt_main=null,t.bt_agree=null,t.bt_reject=null,t.win2=null,t.txt=null,t.bt_next=null,t.bt_pre=null,t.close=null,t.bt_type1=null,t.bt_type2=null,t.pType=0,t}return n(t,a),t.prototype.onLoad=function(){var a=this;this.close.on(cc.Node.EventType.TOUCH_END,function(){a.closeDetail()}),this.bt_pre.on(cc.Node.EventType.TOUCH_END,function(){a.txt.string=r.pzaChannel.instance().privacyPrePage(a.pType)}),this.bt_next.on(cc.Node.EventType.TOUCH_END,function(){a.txt.string=r.pzaChannel.instance().privacyNextPage(a.pType)}),this.bt_type1.on(cc.Node.EventType.TOUCH_END,function(){a.pType=0,a.txt.string=r.pzaChannel.instance().privacyPage1(a.pType)}),this.bt_type2.on(cc.Node.EventType.TOUCH_END,function(){a.pType=1,a.txt.string=r.pzaChannel.instance().privacyPage1(a.pType)}),this.txt.string=r.pzaChannel.instance().privacyPage1(this.pType),this.bt_agree.on(cc.Node.EventType.TOUCH_END,function(){a.agree()}),this.bt_reject.on(cc.Node.EventType.TOUCH_END,function(){a.node.active=!1,r.pzaChannel.instance().privacyReject(),r.pzaChannel.instance().exit()}),this.txt_main.on(cc.Node.EventType.TOUCH_END,function(){a.win2.active=!0}),this.win2.active=!1},t.prototype.closeDetail=function(){this.win2.active=!1},t.prototype.agree=function(){r.pzaChannel.instance().privacyAgree(),this.node.active=!1,l.default.sendMsg(p.Msg.closeLoading)},i([u(cc.Node)],t.prototype,"txt_main",void 0),i([u(cc.Node)],t.prototype,"bt_agree",void 0),i([u(cc.Node)],t.prototype,"bt_reject",void 0),i([u(cc.Node)],t.prototype,"win2",void 0),i([u(cc.Label)],t.prototype,"txt",void 0),i([u(cc.Node)],t.prototype,"bt_next",void 0),i([u(cc.Node)],t.prototype,"bt_pre",void 0),i([u(cc.Node)],t.prototype,"close",void 0),i([u(cc.Node)],t.prototype,"bt_type1",void 0),i([u(cc.Node)],t.prototype,"bt_type2",void 0),i([c],t)}(cc.Component);e.default=d,cc._RF.pop()},{"./pzaChannel":"pzaChannel","./pzaKDefine":"pzaKDefine","./pzakc":"pzakc"}],pzaPuffShroom:[function(a,t,e){"use strict";cc._RF.push(t,"ed4225QSM9JNoAv41wvq5Yv","pzaPuffShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPuffShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpineController"),c=a("../../Common/pzaUtil"),u=a("../Bullet/pzaBaseBullet"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t.atkAniTime=1.4,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),d.pzaGameState.isZombieMode())return this.attacking=!1,this.sleepAni.node.active=!1,this.animation.playAnimation("T_idle",!0),void(this.atkAniTime=this.animation.getAnimationDuration("T_attack"));this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()),d.pzaGameState.useShroom=!0,d.pzaGameState.onlyBoomPlant=!1,t.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData&&!this.baseData.plantData.sleeping)return this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()&&window.pzazombieManager.hasCanAttackZombie(this.baseData,3)?(l.pzaSoundManager.playAudio("PuffShroomAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot()},this.atkAniTime/1.4)):void 0},t.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.playNormalAni=function(){var a=this,t=function(){if(window.pzazombieManager.hasCanAttackZombie(a.baseData,3))return l.pzaSoundManager.playAudio("PuffShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){a.shoot()});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};t()},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(u.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0));var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([z({displayName:"\u7761\u89c9\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"sleepAni",void 0),i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaPuffShroom=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPumpkinPurpleFire:[function(a,t,e){"use strict";cc._RF.push(t,"3c194GTwf5MB7A4G2ThoGFo","pzaPumpkinPurpleFire");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPumpkinPurple=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaPlantEnum"),s=a("../pzaEffectManager"),c=a("./pzaAttackType"),u=a("./pzaBasePlant"),d=a("./pzaPlantBody"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.torchwoodBody=null,t}return n(t,a),t.prototype.uiShow=function(){this.animation.setAnimationSkin("skin_1"),a.prototype.uiShow.call(this)},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),t.plantData.cate=l.pzaPlantCate.Nut,null!=t&&null!=t.yIndex){var e=10*-this.baseData.yIndex+1;this.node.zIndex=e,s.pzaEffectManager.createBackPumpkinFire(t)}this.playNormalAni()},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.getTargetArr(1);e.length>0&&e.forEach(function(t){var e=t&&t.baseData;null==e||e.isDead||e.buffData.hasBuff(p.pzaBuffType.INVINCIBLE)||e.buffData.hasBuff(p.pzaBuffType.DIVE)||e.buffData.hasBuff(p.pzaBuffType.FLY)||e.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)||e.buffData.hasBuff(p.pzaBuffType.INVINCIBLE)||(t&&t.hurt(a.baseData.atk,a.baseData,c.pzaAttackType.FLOOR_ATK),s.pzaEffectManager.createBoomFireEffect(a.baseData.yIndex,.2,e.logicPos,null))}),a.animation.playAnimation("idle",!1,t)};this.animation.playAnimation("idle",!1,t)},t.prototype.getTargetArr=function(a){var t=this,e=[];return window.pzazombieManager.zombieMap.forEach(function(o,n){null==o||null==n||n.isDead||null==n.logicPos||n.xIndex>=t.baseData.xIndex-a&&n.xIndex<=t.baseData.xIndex+a&&n.yIndex==t.baseData.yIndex&&e.push(o)}),e},t.prototype.logicLateUpdate=function(){this.bodyBindData||(this.torchwoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody)),a.prototype.logicLateUpdate.call(this)},t.prototype.death=function(t,e){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.flaserDeath.call(this)},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([f({displayName:"\u706b\u7130\u5357\u74dc\u78b0\u649e\u8eab\u4f53",type:d.pzaPlantBody})],t.prototype,"torchwoodBody",void 0),i([m],t)}(u.pzaBasePlant);e.pzaPumpkinPurple=z,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant","./pzaPlantBody":"pzaPlantBody"}],pzaPumpkinPurple:[function(a,t,e){"use strict";cc._RF.push(t,"a6ce71s5EZOboNP1Kf3QfoV","pzaPumpkinPurple");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPumpkinPurple=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.uiShow=function(){this.animation.setAnimationSkin("skin_4"),a.prototype.uiShow.call(this)},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),t.plantData.cate=s.pzaPlantCate.Nut,null!=t&&null!=t.yIndex){var e=10*-this.baseData.yIndex+1;this.node.zIndex=e}this.playNormalAni()},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=!1,o=1.7*u.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(t,n){null==t||null==n||n.isDead||null==n.logicPos||n.buffData.hasBuff(l.pzaBuffType.DIVE)||n.buffData.hasBuff(l.pzaBuffType.FLY)||n.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||n.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||p.pzaUtil.getDistance(a.baseData.logicPos,n.logicPos)<o&&(e=!0)}),e||a.canJoinDrZomBoss(a.baseData)&&(e=!0),e)return r.pzaSoundManager.playAudio("FumeShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){if(null!=a.baseData&&!a.baseData.isDead){var t=cc.v2(a.baseData.logicPos.x,a.baseData.logicPos.y+47);c.pzaEffectManager.createGloomShroomEffect(a.baseData.yIndex,t,null),a.hurtZombies()}});a.animation.playAnimation("idle",!1,t)};this.animation.playAnimation("idle",!1,t)},t.prototype.canJoinDrZomBoss=function(a){if(a.xIndex<5)return null;var t=window.pzazombieManager.drZomBoss;return null==t||null==t.baseData||t.baseData.isDead||t.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)?null:t.baseData},t.prototype.hurtZombies=function(){var a=this,t=1.7*u.pzaGameState.map.getBlockWidth();if(window.pzazombieManager.zombieMap.forEach(function(e,o){null==e||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(l.pzaBuffType.DIVE)||o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.INVINCIBLE)||p.pzaUtil.getDistance(a.baseData.logicPos,o.logicPos)<t&&e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.PENETRATE)}),this.canJoinDrZomBoss(this.baseData)){var e=this.canJoinDrZomBoss(this.baseData),o=window.pzazombieManager.getZombie(e);o&&o.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.PENETRATE)}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([f],t)}(h.pzaBasePlant));e.pzaPumpkinPurple=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaPumpkin:[function(a,t,e){"use strict";cc._RF.push(t,"e8b25lxRy5Gm5x3+k2egv7w","pzaPumpkin");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPumpkin=void 0;var r=a("../../Common/pzaSpineController"),p=a("../Data/pzaPlantEnum"),l=a("../pzaEffectManager"),s=a("../pzaGameState"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.backSpine=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.backSpine.node.active=!1},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.backSpine.node.active=!0,this.backSpine.playAnimation(this.uiIdleName,!0)},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,this.animation.playAnimation("idle",!0),null!=t&&null!=t.yIndex){var e=10*-this.baseData.yIndex+1;this.node.zIndex=e,l.pzaEffectManager.createBackPumpkin(t)}s.pzaGameState.onlyShroomCofee=!1,s.pzaGameState.onlyBoomPlant=!1},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([h({displayName:"\u80cc\u9762\u52a8\u753b",type:r.pzaSpineController})],t.prototype,"backSpine",void 0),i([d],t)}(c.pzaBasePlant);e.pzaPumpkin=m,cc._RF.pop()},{"../../Common/pzaSpineController":"pzaSpineController","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaPuzzleItem:[function(a,t,e){"use strict";cc._RF.push(t,"152c6CDYKRKvqa11g13cl9O","pzaPuzzleItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPuzzleItem=void 0;var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameManager"),l=a("../Common/pzaGameVase"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaStatisticsMgr"),d=a("../Common/pzaUIManager"),h=a("../Common/pzaZombieEnermyPartCfg"),m=a("../Load/pzaPreLoadManager"),f=a("../utils/pzaChannel"),z=a("./pzaWarningView"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.trophyNode=null,t.lockNode=null,t.bg=null,t.bgFrames=[],t.flagNode=null,t.flagCount=null,t.chapterName=null,t.preUnLock=null,t.gameMode=null,t.curPart=1,t.unlock=!1,t.canPreUnlock=!1,t.startGameCall=null,t.refreshCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.on(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.off(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.bindData=function(a,t,e,o){this.curPart=t,this.startGameCall=e,this.refreshCall=o,this.gameMode=a,this.refreshItem()},t.prototype.refreshItem=function(){if(this.gameMode==r.pzaGameMode.ZOMBIE_ENERMY){if(this.canPreUnlock=!1,this.unlock=s.pzaLocalData.data.zombieUnlock>=this.curPart,this.trophyNode.active=1==s.pzaLocalData.data.zombieTrophy[this.curPart-1],this.bg.spriteFrame=this.bgFrames[0],null==(a=h.pzaZombieEnermyPartCfg.PartConfigMap.get(this.curPart)))return;this.unlock||(s.pzaLocalData.data.curChapter>a.unlockChapter||s.pzaLocalData.data.curChapter==a.unlockChapter&&s.pzaLocalData.data.curPart>a.unlockPart)&&(this.unlock=!0,s.pzaLocalData.data.zombieUnlock++,s.pzaLocalData.addDirty("zombieUnlock")),this.unlock||(this.canPreUnlock=this.curPart==s.pzaLocalData.data.zombieUnlock+1),this.canPreUnlock?(u.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"22"},{name:"adname",value:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"}),this.chapterName.string="\u901a\u5173"+a.unlockChapter+"-"+a.unlockPart+"\u89e3\u9501"):this.chapterName.string=this.unlock?h.pzaZombieEnermyPartCfg.getName(this.curPart):"\uff1f",this.flagNode.active=!1}else if(this.gameMode==r.pzaGameMode.ZOMBIE_ENDLESS)this.canPreUnlock=!1,this.bg.spriteFrame=this.bgFrames[0],this.unlock=s.pzaLocalData.data.zombieUnlock>=this.curPart,this.unlock||(s.pzaLocalData.data.curChapter>5||5==s.pzaLocalData.data.curChapter&&s.pzaLocalData.data.curPart>8)&&(this.unlock=!0,s.pzaLocalData.data.zombieUnlock++,s.pzaLocalData.addDirty("zombieUnlock")),this.unlock?(this.flagNode.active=!0,this.flagCount.string=""+s.pzaLocalData.data.zombieFlagCount):(this.canPreUnlock=this.curPart==s.pzaLocalData.data.zombieUnlock+1,this.flagNode.active=!1),this.canPreUnlock?(u.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"22"},{name:"adname",value:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"}),this.chapterName.string="\u901a\u51735-8\u89e3\u9501"):this.chapterName.string=this.unlock?"\u50f5\u5c38\u516c\u654c(\u65e0\u5c3d)":"\uff1f";else if(this.gameMode==r.pzaGameMode.VASE){if(this.canPreUnlock=!1,this.unlock=s.pzaLocalData.data.vasePassChapter+1>=this.curPart,this.trophyNode.active=1==s.pzaLocalData.data.vaseTrophy[this.curPart-1],this.bg.spriteFrame=this.bgFrames[1],null==(a=p.pzaGameManager.getGame(r.pzaGameMode.VASE,l.pzaGameVase).getConf(this.curPart)))return;this.unlock||(s.pzaLocalData.data.curChapter>a.unlockChapter||s.pzaLocalData.data.curChapter==a.unlockChapter&&s.pzaLocalData.data.curPart>a.unlockPart)&&(this.unlock=!0,s.pzaLocalData.data.vasePassChapter++,s.pzaLocalData.addDirty("vasePassChapter")),this.unlock||(this.canPreUnlock=this.curPart==s.pzaLocalData.data.vasePassChapter+2),this.canPreUnlock?(u.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"22"},{name:"adname",value:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501"}),this.chapterName.string="\u901a\u5173"+a.unlockChapter+"-"+a.unlockPart+"\u89e3\u9501"):this.chapterName.string=this.unlock?a.name:"\uff1f",this.flagNode.active=!1}else if(this.gameMode==r.pzaGameMode.VASE_ENDLESS){var a;if(this.bg.spriteFrame=this.bgFrames[1],this.unlock=s.pzaLocalData.data.passLastPart,this.flagNode.active=this.unlock,null==(a=p.pzaGameManager.getGame(r.pzaGameMode.VASE_ENDLESS,l.pzaGameVase).getConf(this.curPart)))return;this.unlock||(s.pzaLocalData.data.curChapter>a.unlockChapter||s.pzaLocalData.data.curChapter==a.unlockChapter&&s.pzaLocalData.data.curPart>a.unlockPart)&&(this.unlock=!0,s.pzaLocalData.data.vasePassChapter++,s.pzaLocalData.addDirty("vasePassChapter")),this.unlock||15!=s.pzaLocalData.data.vasePassChapter||(this.unlock=!0),this.unlock?(this.flagCount.string=""+s.pzaLocalData.data.vaseFlagCount,this.chapterName.string=a.name,this.canPreUnlock=!1):(this.canPreUnlock=this.curPart==s.pzaLocalData.data.vasePassChapter+2,this.canPreUnlock?this.chapterName.string="\u901a\u5173"+a.unlockChapter+"-"+a.unlockPart+"\u89e3\u9501":this.chapterName.string=this.unlock?a.name:"\uff1f")}this.lockNode.active=!this.unlock,this.preUnLock.active=this.canPreUnlock,this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.bg.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393")},t.prototype.touchItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#939393"):cc.Color.fromHEX(cc.color(),"#606060")},t.prototype.cancelItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393")},t.prototype.clickItem=function(){var a=this;if(!this.unlock){this.node.color=cc.Color.fromHEX(cc.color(),"#939393"),c.pzaSoundManager.playAudio("unlockpart");var t;return t=this.gameMode===r.pzaGameMode.VASE||this.gameMode===r.pzaGameMode.VASE_ENDLESS?p.pzaGameManager.getGame(r.pzaGameMode.VASE,l.pzaGameVase).getConf(this.curPart):h.pzaZombieEnermyPartCfg.PartConfigMap.get(this.curPart),void(this.canPreUnlock?d.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.WARNING_VIEW,function(e){var o=e&&e.getComponent(z.pzaWarningView);o&&o.show("\u4f60\u5fc5\u987b\u5b8c\u6210\u5192\u9669\u6a21\u5f0f"+t.unlockChapter+"-"+t.unlockPart+"\u6765\u89e3\u9501\u672c\u5173\u5361","\u63d0\u524d\u89e3\u9501","\u8fd4\u56de",function(){f.pzaChannel.instance().showVideo({sucCall:function(){s.pzaLocalData.data.zombieUnlock++,s.pzaLocalData.addDirty("zombieUnlock"),a.refreshCall&&a.refreshCall()},failCall:function(){},endCall:function(){},posName:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501",adsid:"22"})},null,"\u672a\u89e3\u9501\uff01",!0)}):d.pzaUIManager.baseShowPopUI(m.pzaResourceUrl.WARNING_VIEW,function(a){var t=a&&a.getComponent(z.pzaWarningView);t&&t.show("\u4f60\u5fc5\u987b\u5b8c\u6210\u5192\u9669\u6a21\u5f0f\uff1f\u6765\u89e3\u9501\u672c\u5173\u5361","\u8fd4\u56de",null,null,null,"\u672a\u89e3\u9501\uff01")}))}s.pzaLocalData.isWeekTwo=!1,this.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"),r.pzaGameState.midOut?r.pzaGameState.gameMode==this.gameMode&&r.pzaGameState.curPart==this.curPart?(this.startGameCall&&this.startGameCall(),p.pzaGameManager.getCurrentGame().gameRecover(2,this.curPart,null)):p.pzaGameManager.midOutStart(this.gameMode,r.pzaGameState.curChapter,this.curPart,this.startGameCall.bind(this)):(this.startGameCall&&this.startGameCall(),d.pzaUIManager.removeBoardUI(),p.pzaGameManager.preLoadAndStart(this.gameMode,r.pzaGameState.curChapter,this.curPart))},t.prototype.clickPreUnLock=function(){var a=this;f.pzaChannel.instance().showVideo({sucCall:function(){a.gameMode===r.pzaGameMode.VASE||a.gameMode===r.pzaGameMode.VASE_ENDLESS?(s.pzaLocalData.data.vasePassChapter++,s.pzaLocalData.addDirty("vasePassChapter")):(s.pzaLocalData.data.zombieUnlock++,s.pzaLocalData.addDirty("zombieUnlock")),a.refreshCall&&a.refreshCall()},failCall:function(){},endCall:function(){},posName:"\u76ca\u667a\u6a21\u5f0f\u63d0\u524d\u89e3\u9501",adsid:"22"})},i([v({displayName:"\u5956\u676f",type:cc.Node})],t.prototype,"trophyNode",void 0),i([v({displayName:"\u9501",type:cc.Node})],t.prototype,"lockNode",void 0),i([v({displayName:"\u573a\u666f",type:cc.Sprite})],t.prototype,"bg",void 0),i([v({displayName:"\u573a\u666f\u56fe",type:[cc.SpriteFrame]})],t.prototype,"bgFrames",void 0),i([v({displayName:"\u65d7\u5e1c\u8282\u70b9",type:cc.Node})],t.prototype,"flagNode",void 0),i([v({displayName:"\u65d7\u5e1c\u6570\u91cf",type:cc.Label})],t.prototype,"flagCount",void 0),i([v({displayName:"\u5173\u5361\u540d\u79f0",type:cc.Label})],t.prototype,"chapterName",void 0),i([v({displayName:"\u63d0\u524d\u89e3\u9501\u6309\u94ae",type:cc.Node})],t.prototype,"preUnLock",void 0),i([g],t)}(cc.Component);e.pzaPuzzleItem=b,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameVase":"pzaGameVase","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaZombieEnermyPartCfg":"pzaZombieEnermyPartCfg","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaWarningView":"pzaWarningView"}],pzaPuzzleView:[function(a,t,e){"use strict";cc._RF.push(t,"df561IB41BNuI3UzRT3y9Of","pzaPuzzleView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaPuzzleView=void 0;var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGameManager"),s=a("../Common/pzaGameVase"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaSoundManager"),d=a("../Common/pzaStatisticsMgr"),h=a("../Common/pzaUIManager"),m=a("../Common/pzaUtil"),f=a("../Load/pzaPreLoadManager"),z=a("../utils/pzaChannel"),y=a("../utils/pzaResMgr"),g=a("./pzaCommonMask"),v=a("./pzaPuzzleItem"),b=a("./pzaRankView"),S=cc._decorator,P=S.ccclass,C=S.property,D=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.zombieNode=null,t.zombieBtn=null,t.vaseNode=null,t.vaseBtn=null,t.trophyCount=null,t.coinCount=null,t.scrollView=null,t.items=[],t.rankWidget=null,t.itemPrefab=null,t.content=null,t.curPage=0,t}return n(t,a),t.prototype.onEnable=function(){this.createItem(),this.node.x=0,this.coinCount.string=m.pzaUtil.getCurrencyStr(c.pzaLocalData.data.coin),this.zombieBtn.on(cc.Node.EventType.TOUCH_START,this.touchZombieBtn,this),this.zombieBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.clickZombieBtn,this),this.zombieBtn.on(cc.Node.EventType.TOUCH_END,this.clickZombieBtn,this),this.vaseBtn.on(cc.Node.EventType.TOUCH_START,this.touchVaseBtn,this),this.vaseBtn.on(cc.Node.EventType.TOUCH_CANCEL,this.clickVaseBtn,this),this.vaseBtn.on(cc.Node.EventType.TOUCH_END,this.clickVaseBtn,this),this.showPage(this.curPage,!0),this.rankWidget.updateAlignment(),this.createWxUserInfoButton(!1,null),"ks"==z.pzaChannel.instance().channel&&(this.rankWidget.node.active=!1)},t.prototype.createItem=function(){var a=y.pzaResMgr.instance().getConf("a17");if(a&&!(this.content.childrenCount>0))for(var t=0;t<a.length;t++){var e=p.pzaGameCommonPool.requestInstant(this.itemPrefab,!1);if(null==e)return;e.setParent(this.content),this.items.push(e.getComponent(v.pzaPuzzleItem))}},t.prototype.onDisable=function(){this.zombieBtn.off(cc.Node.EventType.TOUCH_START,this.touchZombieBtn,this),this.zombieBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.clickZombieBtn,this),this.zombieBtn.off(cc.Node.EventType.TOUCH_END,this.clickZombieBtn,this),this.vaseBtn.off(cc.Node.EventType.TOUCH_START,this.touchVaseBtn,this),this.vaseBtn.off(cc.Node.EventType.TOUCH_CANCEL,this.clickVaseBtn,this),this.vaseBtn.off(cc.Node.EventType.TOUCH_END,this.clickVaseBtn,this)},t.prototype.touchZombieBtn=function(){this.zombieNode.active=!0},t.prototype.clickZombieBtn=function(){u.pzaSoundManager.playAudio("gravebutton"),this.showPage(0,!1)},t.prototype.touchVaseBtn=function(){this.vaseNode.active=!0},t.prototype.clickVaseBtn=function(){u.pzaSoundManager.playAudio("gravebutton"),this.showPage(1,!1)},t.prototype.showPage=function(a,t){var e=this;if(t||this.curPage!=a){if(this.curPage=a,this.zombieNode.active=0==this.curPage,this.vaseNode.active=1==this.curPage,this.scrollView.node.stopAllActions(),this.scrollView.node.y=580,this.scrollView.node.runAction(cc.sequence(cc.delayTime(t?.5:.1),cc.moveTo(.2,cc.v2(0,180)).easing(cc.easeCubicActionOut()))),0==this.curPage){this.trophyCount.string=c.pzaLocalData.getZombieTrophy()+"/9";for(var o=1;o<=9;o++)(n=this.items[o-1])&&n.bindData(r.pzaGameMode.ZOMBIE_ENERMY,o,function(){e.close()},this.refreshItem.bind(this));for((i=this.items[9])&&i.bindData(r.pzaGameMode.ZOMBIE_ENDLESS,10,function(){e.close()},this.refreshItem.bind(this)),d.pzaStatisticsMgr.sendEvent("System",{name:"system",value:10}),o=10;o<this.items.length;o++)this.items[o].node.active=!1}else if(1==this.curPage){for(d.pzaStatisticsMgr.sendEvent("System",{name:"system",value:11}),this.trophyCount.string=c.pzaLocalData.getVaseTrophy()+"/"+c.pzaLocalData.vaseAllTrophy,o=1;o<l.pzaGameManager.getGame(r.pzaGameMode.VASE,s.pzaGameVase).endLessId;o++){var n;(n=this.items[o-1]).node.active=!0,n&&n.bindData(r.pzaGameMode.VASE,o,function(){e.close()},this.refreshItem.bind(this))}var i,p=l.pzaGameManager.getGame(r.pzaGameMode.VASE,s.pzaGameVase).endLessId;(i=this.items[p-1]).node.active=!0,i&&i.bindData(r.pzaGameMode.VASE_ENDLESS,p,function(){e.close()},this.refreshItem.bind(this))}this.content.getComponent(cc.Layout).updateLayout(),this.scrollView.setContentPosition(cc.v2(this.content.width/2,180))}},t.prototype.refreshItem=function(){var a=10;1==this.curPage&&(a=y.pzaResMgr.instance().getConf("a17")&&y.pzaResMgr.instance().getConf("a17").length);for(var t=1;t<=a;t++){var e=this.items[t-1];e&&e.refreshItem()}},t.prototype.clickBack=function(){var a=this;u.pzaSoundManager.playSFX(),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.3,cc.v2(0,580)).easing(cc.easeCubicActionOut())),h.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.CHALLENGE_VIEW,function(){g.pzaCommonMask.showMask(),a.node.parent.stopAllActions(),a.node.parent.x=-1680,a.node.x=1680,a.node.parent.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){g.pzaCommonMask.hideMask(),a.close()})))})},t.prototype.clickRankBtn=function(){var a=this;this.createWxUserInfoButton(!0,function(){h.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.RANK_VIEW,function(t){var e=t&&t.getComponent(b.pzaRankView);e&&e.init(a.curPage+1)})})},t.prototype.createWxUserInfoButton=function(a,t){var e=this,o=z.pzaChannel.instance().getChannel();"wx"!==o.channel||null!=c.pzaLocalData.data.playerNick&&null!=c.pzaLocalData.data.playerAvatar?t&&t():o.wxCheckPrivacySetting(function(n){var i=function(){var a=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width+e.rankWidget.node.x-60)/n.width*a.width,top:(.5*n.height-e.rankWidget.node.y-60)/n.height*a.height,width:120/n.width*a.width,height:120/n.height*a.height};o.getUserInfo(function(){null!=c.pzaLocalData.data.playerNick&&null!=c.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),t&&t())},i,!1)};if(n)return a?void o.wxPrivacyAuthorize(i,null):void(t&&t());i()},null)},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node);var a=z.pzaChannel.instance().getChannel();"wx"==a.channel&&a.destroyAuthorizationButton()},i([C({displayName:"\u50f5\u5c38\u516c\u654c\u6309\u94ae\u56fe\u8282\u70b9",type:cc.Node})],t.prototype,"zombieNode",void 0),i([C({displayName:"\u50f5\u5c38\u516c\u654c\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"zombieBtn",void 0),i([C({displayName:"\u82b1\u74f6\u6309\u94ae\u56fe\u8282\u70b9",type:cc.Node})],t.prototype,"vaseNode",void 0),i([C({displayName:"\u82b1\u74f6\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"vaseBtn",void 0),i([C({displayName:"\u5956\u676f\u6570\u91cf",type:cc.Label})],t.prototype,"trophyCount",void 0),i([C({displayName:"\u91d1\u5e01",type:cc.Label})],t.prototype,"coinCount",void 0),i([C({displayName:"scrollView",type:cc.ScrollView})],t.prototype,"scrollView",void 0),i([C({displayName:"\u6392\u884c\u699c\u6309\u94aewidget",type:cc.Widget})],t.prototype,"rankWidget",void 0),i([C({displayName:"\u7ae0\u8282\u5217\u8868\u9884\u8bbe",type:cc.Prefab})],t.prototype,"itemPrefab",void 0),i([C({displayName:"\u5bb9\u5668",type:cc.Node})],t.prototype,"content",void 0),i([P],t)}(cc.Component);e.pzaPuzzleView=D,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGameVase":"pzaGameVase","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzaResMgr":"pzaResMgr","./pzaCommonMask":"pzaCommonMask","./pzaPuzzleItem":"pzaPuzzleItem","./pzaRankView":"pzaRankView"}],pzaQQFumeShroom:[function(a,t,e){"use strict";cc._RF.push(t,"f0658+dyQtCtYXTqLbNS2oB","pzaQQFumeShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaQQFumeShroom=void 0;var r=a("../Data/pzaZombieEnum"),p=a("./pzaAttackType"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.animation.playAnimation("idle",!0)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t)},t.prototype.hurt=function(t,e,o){var n=this,i=window.pzazombieManager.zombieMap.get(e);e&&e.zombieData&&this.baseData&&(e.zombieData.zombieType!=r.pzaZombieEnum.ZOMBONI&&e.zombieData.zombieType!=r.pzaZombieEnum.ZOMBONI2&&e.zombieData.cate!=r.pzaZombieCate.Gargantuar||(t=100,o=p.pzaAttackType.FLOOR_ATK),a.prototype.hurt.call(this,t,e,o),e.zombieData.zombieType==r.pzaZombieEnum.GARGANTUAR4||e.zombieData.zombieType==r.pzaZombieEnum.RED_GARGANTUAR4?e.zombieData.equipHp<=0&&i.pushBack(1):i.pushBack(1),"attack"!=this.animation.spineAnimation.name&&this.baseData.hp>0&&this.animation.playAnimation("attack",!1,function(){n.animation.playAnimation("idle",!0)},null))},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this)},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this)},i([c],t)}(l.pzaBasePlant));e.pzaQQFumeShroom=u,cc._RF.pop()},{"../Data/pzaZombieEnum":"pzaZombieEnum","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaRainEffect:[function(a,t,e){"use strict";cc._RF.push(t,"3895fHlA39Djo2nQYtZMqsb","pzaRainEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRainEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../utils/pzaFrameAnim"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.anis=[],t.ani=null,t}return n(t,a),t.prototype.showAnim=function(a){var t=this;this.anis.forEach(function(a){a.node.active=!1}),this.ani=a?Math.random()>.5?this.anis[0]:this.anis[1]:this.anis[2],this.ani.node.active=!0,this.ani.setEndFn(function(){t.close()}),this.ani.reset(),this.ani.play()},t.prototype.logicUpdate=function(a){this.ani.updateFrame(a)},i([c({displayName:"\u96e8\u52a8\u753b",type:[p.default]})],t.prototype,"anis",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaRainEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../utils/pzaFrameAnim":"pzaFrameAnim"}],pzaRainNightEffect:[function(a,t,e){"use strict";cc._RF.push(t,"0789e0Ur+lOyI/rZddhfjTc","pzaRainNightEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRainNightEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaSpineController"),s=a("../../Common/pzaUtil"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.rainAni=null,t.mask=null,t.rainInterval=.5,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.rainAni.playAnimation("rain",!0),u.pzaGameState.isMiniMode()?this.mask.opacity=0:this.playBlinkAni(),this.rainInterval=.5},t.prototype.logicUpdate=function(a){this.rainInterval-=a,this.rainInterval>0||this.randomRain()},t.prototype.playBlinkAni=function(){var a=this;this.mask.stopAllActions();var t=s.pzaUtil.getRandomFloatNum(2.5,4);this.mask.runAction(cc.sequence(cc.callFunc(function(){a.mask&&(a.mask.color=cc.Color.fromHEX(cc.color(),"#000000"),a.mask.opacity=255)}),cc.delayTime(t),cc.callFunc(function(){a.mask&&(p.pzaSoundManager.playAudio("thunder"),a.mask.color=cc.Color.fromHEX(cc.color(),"#ffffff"))}),cc.fadeOut(1),cc.callFunc(function(){a.mask&&(a.mask.color=cc.Color.fromHEX(cc.color(),"#000000"),a.mask.opacity=25.5)}),cc.fadeTo(.2,76.5),cc.fadeTo(.2,51),cc.fadeTo(.2,102),cc.fadeTo(.2,51),cc.fadeTo(.2,127.5),cc.fadeTo(.15,51),cc.fadeTo(.15,76.5),cc.fadeTo(.13,51),cc.fadeTo(.13,102),cc.fadeTo(.11,51),cc.fadeTo(.11,127.5),cc.fadeTo(.13,204),cc.fadeTo(.16,127.5),cc.fadeTo(.14,229.5),cc.fadeTo(.17,127.5),cc.fadeTo(.15,229.5),cc.fadeTo(.18,127.5),cc.fadeTo(.2,229.5),cc.fadeTo(.2,127.5),cc.fadeTo(.2,1),cc.callFunc(function(){a.playBlinkAni()})))},t.prototype.pauseSelf=function(){this.rainAni.pauseAnimation(),this.mask.pauseAllActions()},t.prototype.resumeSelf=function(){this.rainAni.resumeAnimation(),this.mask.resumeAllActions()},t.prototype.randomRain=function(){this.rainInterval=.5,s.pzaUtil.getRandomArrayValue([0,1,2,3,4,5],2).forEach(function(a){var t=s.pzaUtil.getRandomArrayValue([0,1,2,3,4,5,6,7,8],3),e=u.pzaGameState.map.getYInterval(a);t.forEach(function(t){var o=u.pzaGameState.map.getXInterval(t),n=u.pzaGameState.map.getBlockLogicPos(t,a,0,0);n.x+=Math.random()*o,n.y+=Math.random()*e,c.pzaEffectManager.createRainEffect(n,2!=a&&3!=a)})})},i([m({displayName:"\u96e8\u52a8\u753b",type:l.pzaSpineController})],t.prototype,"rainAni",void 0),i([m({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([h],t)}(r.pzaBaseComponent);e.pzaRainNightEffect=f,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState"}],pzaRandomPlantBox:[function(a,t,e){"use strict";cc._RF.push(t,"420ceKsg/tFdobNAOmL8s5d","pzaRandomPlantBox");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRandomPlantBox=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaGameZJ"),s=a("../Data/pzaPlantEnum"),c=a("../pzaGameState"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.boxXindex=0,t.boxYindex=0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=s.pzaPlantCate.Nut,this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,this.animation.playAnimation("idle",!1,function(){e.body.node.getComponent(cc.BoxCollider).enabled=!0,e.baseData.isDead=!1,e.createRandomBox(),e.close()})},t.prototype.createRandomBox=function(){if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var a=""+this.baseData.xIndex+this.baseData.yIndex,t=window.pzaplantManager.plantDataMap.get(a);this.baseData.isDead=!0,window.pzaplantManager.plantMap.delete(t),window.pzaplantManager.plantDataMap.delete(a);var e=p.pzaGameManager.getGame(c.pzaGameMode.ZaJiao,l.pzaGameZJ).getRandomBoxCard(this.baseData.xIndex,this.baseData.yIndex);window.pzaplantManager.createRandomPlant(e,this.baseData.xIndex,this.baseData.yIndex)},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([h],t)}(u.pzaBasePlant));e.pzaRandomPlantBox=m,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameZJ":"pzaGameZJ","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaRankItem:[function(a,t,e){"use strict";cc._RF.push(t,"7d3a7Ws9V1NF5AmcmUXp4UN","pzaRankItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRankItem=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaSpriteFrameManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.rankTag=null,t.rankTagFrames=[],t.rank=null,t.headIcon=null,t.nick=null,t.flagCount=null,t.curAvatarUrl=null,t}return n(t,a),t.prototype.bindData=function(a,t){var e=this;null!=a&&(t>3?(this.rankTag.node.active=!1,this.rank.node.active=!0,this.rank.string=""+t):(this.rankTag.node.active=!0,this.rank.node.active=!1,this.rankTag.spriteFrame=this.rankTagFrames[t-1]),null==a.nickName||"\u672a\u77e5"==a.nickName?this.nick.string="\u73a9\u5bb6"+t:this.nick.string=a.nickName,this.headIcon.spriteFrame=null,this.curAvatarUrl=a.avatar,null==this.curAvatarUrl||""==this.curAvatarUrl?p.pzaSpriteFrameManager.showDefaultHead(this.headIcon):p.pzaSpriteFrameManager.showPlayerHeadImage(this.curAvatarUrl,function(a,t){e.curAvatarUrl==a&&(e.headIcon.spriteFrame=t)}),this.flagCount.string=""+a.score)},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u6392\u540d\u6807\u8bb0",type:cc.Sprite})],t.prototype,"rankTag",void 0),i([c({displayName:"\u6392\u540d\u6807\u8bb0\u56fe",type:[cc.SpriteFrame]})],t.prototype,"rankTagFrames",void 0),i([c({displayName:"\u6392\u540d",type:cc.Label})],t.prototype,"rank",void 0),i([c({displayName:"\u5934\u50cf",type:cc.Sprite})],t.prototype,"headIcon",void 0),i([c({displayName:"\u6635\u79f0",type:cc.Label})],t.prototype,"nick",void 0),i([c({displayName:"\u65d7\u5e1c\u6570",type:cc.Label})],t.prototype,"flagCount",void 0),i([s],t)}(cc.Component);e.pzaRankItem=u,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaRankMgr:[function(a,t,e){"use strict";cc._RF.push(t,"1fe3801F8RMkqdH3qC9KQ0T","pzaRankMgr"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRankMgr=void 0;var o=a("../utils/pzaChannel"),n=a("./pzaLocalData"),i=function(){function a(){}return Object.defineProperty(a,"Rank_Key",{get:function(){var t=o.pzaChannel.instance().channel;return"wx"!=t?t+a._Rank_Key:a._Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(a,"Zombie_Rank_Key",{get:function(){var t=o.pzaChannel.instance().channel;return"wx"!=t?t+a._Zombie_Rank_Key:a._Zombie_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(a,"Vase_Rank_Key",{get:function(){var t=o.pzaChannel.instance().channel;return"wx"!=t?t+a._Vase_Rank_Key:a._Vase_Rank_Key},enumerable:!1,configurable:!0}),Object.defineProperty(a,"zj_Rank_Key",{get:function(){var t=o.pzaChannel.instance().channel;return"wx"!=t?t+a._zj_Rank_Key:a._zj_Rank_Key},enumerable:!1,configurable:!0}),a.syncOldRankData=function(){var a=o.pzaChannel.instance().getChannel().channelUserId;if(null!=a)for(var t=0;t<5;t++){var e=n.pzaLocalData.data.survivalFlagCount[t];if(!(null==e||e<=0)){var i=this.Rank_Key+(t+1);o.pzaChannel.leaderBoradUpdate(i,a,e,function(){})}}},a.queryMyRank=function(a,t){var e=this,n=this.Rank_Key+a,i=o.pzaChannel.instance().getChannel().channelUserId;null!=i?o.pzaChannel.leaderBoradRank(n,i,function(o){-1!=o?(o+=1,e.endlessRank[a-1]=o,t&&t()):t&&t()}):t&&t()},a.uploadEndlssScore=function(a,t,e){var i=n.pzaLocalData.data.survivalFlagCount[a-1],r=t+"\u9762\u65d7\u5e1c\u5b8c\u6210";if(null!=i&&i>=t)return null!=i&&i>t&&(r+="\uff0c\u8ddd\u79bb\u5386\u53f2\u6700\u9ad8\u65d7\u5e1c\u8fd8\u5dee"+(i-t)),void(e&&e(r));var p=this.Rank_Key+a,l=o.pzaChannel.instance().getChannel().channelUserId;null!=l?o.pzaChannel.leaderBoradUpdate(p,l,t,function(a){if(null!=a&&-1!=a.newRank){var t=-1==a.oldRank?a.newRank:Math.max(0,a.oldRank-a.newRank);a.newRank=a.newRank+1,a.newRank>9999?r+="\uff0c\u5168\u670d\u6392\u540d\u63d0\u5347 "+t+"\uff0c\u5f53\u524d 9999+ \u540d":r+="\uff0c\u5168\u670d\u6392\u540d\u63d0\u5347 "+t+"\uff0c\u5f53\u524d "+a.newRank+" \u540d",e&&e(r)}else e&&e(r)}):e&&e(r)},a.queryLeaderBoardRank=function(a,t){var e=o.pzaChannel.instance().getChannel().channel+"_"+a,n=o.pzaChannel.instance().getChannel().channelUserId;null!=n?o.pzaChannel.leaderBoradRank(e,n,function(a){-1!=a?t&&t(a+1):t&&t(null)}):t&&t(null)},a.uploadLeaderboardScore=function(a,t,e,n){var i=e+"\u9762\u65d7\u5e1c\u5b8c\u6210";if(null!=t&&t>=e){var r=null;return null!=t&&t>e&&(r="\u8ddd\u79bb\u5386\u53f2\u6700\u9ad8\u8bb0\u5f55\u8fd8\u5dee"+(t-e)),void(n&&n(r))}var p=a,l=o.pzaChannel.instance().getChannel().channelUserId;null!=l?o.pzaChannel.leaderBoradUpdate(p,l,e,function(a){if(null!=a&&-1!=a.newRank){var t=-1==a.oldRank?a.newRank:Math.max(0,a.oldRank-a.newRank);a.newRank=a.newRank+1;var e="";a.newRank>9999?e+="\u5168\u670d\u6392\u540d\u63d0\u5347 "+t+"\uff0c\u5f53\u524d 9999+ \u540d":e+="\u5168\u670d\u6392\u540d\u63d0\u5347 "+t+"\uff0c\u5f53\u524d "+a.newRank+" \u540d",n&&n(e)}else n&&n(null)}):n&&n(i)},a.endlessRank=[],a._Rank_Key="endless_rank_",a._Zombie_Rank_Key="zombie_endless_rank",a._Vase_Rank_Key="vase_endless_rank",a._zj_Rank_Key="zj_endless_rank",a}();e.pzaRankMgr=i,cc._RF.pop()},{"../utils/pzaChannel":"pzaChannel","./pzaLocalData":"pzaLocalData"}],pzaRankView:[function(a,t,e){"use strict";cc._RF.push(t,"79949TBDxRMSY7yeG415W7n","pzaRankView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRankView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaRankMgr"),l=a("../utils/pzaChannel"),s=a("./pzaCommonMask"),c=a("./pzaRankItem"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.itemPrefab=null,t.content=null,t.rankBtns=[],t.curSelectRank=null,t.curRankLabel=null,t.items=null,t.curRankId=null,t.rankType=0,t}return n(t,a),t.prototype.init=function(a){this.rankType=a,s.pzaCommonMask.showMask(),this.showRank(1)},t.prototype.showRank=function(a){var t=this;s.pzaCommonMask.showMask();var e=p.pzaRankMgr.Rank_Key+a;1==this.rankType?e=p.pzaRankMgr.Zombie_Rank_Key:2==this.rankType?e=p.pzaRankMgr.Vase_Rank_Key:3==this.rankType&&(e=p.pzaRankMgr.zj_Rank_Key),l.pzaChannel.getLeaderBorad(e,function(e){if(s.pzaCommonMask.hideMask(),null!=e){t.curRankId=a,t.clearItem(),t.items=[];for(var o=0;o<e.length;o++){var n=e[o],i=r.pzaGameCommonPool.requestInstant(t.itemPrefab);i.setParent(t.content);var p=i.getComponent(c.pzaRankItem);p&&p.bindData(n,o+1),t.items.push(p)}t.refreshRankBtn()}})},t.prototype.clearItem=function(){null!=this.items&&(this.items.forEach(function(a){a&&a.close()}),this.items=null)},t.prototype.refreshRankBtn=function(){if(1!=this.rankType)if(2!=this.rankType)if(3!=this.rankType){for(t=0;t<5;t++){var a=t+1==this.curRankId;a&&(this.curSelectRank.y=this.rankBtns[t].y),this.rankBtns[t].active=!a}this.curRankLabel.string=["\u767d\u5929","\u9ed1\u591c","\u6cf3\u6c60","\u6d53\u96fe","\u5c4b\u9876"][this.curRankId-1]+"\u65e0\u5c3d"}else{for(t=0;t<5;t++)this.rankBtns[t].active=!1;this.curRankLabel.string="\u62bd\u5956\u76d2\u5b50"}else{for(var t=0;t<5;t++)this.rankBtns[t].active=!1;this.curRankLabel.string="\u7834\u7f50\u8005"}else{for(t=0;t<5;t++)this.rankBtns[t].active=!1;this.curRankLabel.string="\u50f5\u5c38\u516c\u654c"}},t.prototype.clickRank1=function(){this.showRank(1)},t.prototype.clickRank2=function(){this.showRank(2)},t.prototype.clickRank3=function(){this.showRank(3)},t.prototype.clickRank4=function(){this.showRank(4)},t.prototype.clickRank5=function(){this.showRank(5)},t.prototype.clickShare=function(){var a=l.pzaChannel.instance().getChannel();"wx"==a.channel?a.shareByScreenShot("\u7ecf\u5178IP\u6b63\u7248\u6388\u6743\uff0c\u5168\u65b0\u73a9\u6cd5\u8da3\u5473\u5347\u7ea7\uff01"):l.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"100"})},t.prototype.clickClose=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([h({displayName:"item\u9884\u8bbe",type:cc.Prefab})],t.prototype,"itemPrefab",void 0),i([h({displayName:"item\u5bb9\u5668",type:cc.Node})],t.prototype,"content",void 0),i([h({displayName:"\u6392\u884c\u699c\u6309\u94ae",type:[cc.Node]})],t.prototype,"rankBtns",void 0),i([h({displayName:"\u5f53\u524d\u9009\u4e2d\u6392\u884c\u699c\u663e\u793a",type:cc.Node})],t.prototype,"curSelectRank",void 0),i([h({displayName:"\u5f53\u524d\u9009\u4e2d\u6392\u884c\u699c\u540d\u79f0",type:cc.Label})],t.prototype,"curRankLabel",void 0),i([d],t)}(cc.Component);e.pzaRankView=m,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaRankMgr":"pzaRankMgr","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaRankItem":"pzaRankItem"}],pzaRecordBtn:[function(a,t,e){"use strict";cc._RF.push(t,"4c598GgxydIZ4J/snCF5xab","pzaRecordBtn");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r,p=a("../Common/pzaUIManager"),l=a("../Load/pzaPreLoadManager"),s=a("../utils/pzaChannel"),c=a("../utils/pzaChannelTT"),u=a("../utils/pzaKDefine"),d=a("../utils/pzakc"),h=cc._decorator,m=h.ccclass,f=h.property;(function(a){a[a.null=0]="null",a[a.lobby=1]="lobby",a[a.game=2]="game"})(r||(r={}));var z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bt_label=null,t.shareRewardNode=null,t.btnPos=r.null,t}return n(t,a),t.prototype.start=function(){},t.prototype.onEnable=function(){var a=this;if(d.default.getData("shareData",{today:"",shareCount:"0"}).shareCount>=c.pzaChannelTT.shareMaxTimes)return console.log("\u5206\u4eab\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650"),void(this.node.active=!1);this.node.active=!0,"tt"==s.pzaChannel.instance().channel?(this.shareRewardNode.active=!1,this.updateUI(),d.default.regMsgReciever(u.Msg.recorderStart,function(){return a.updateUI(),!0}),d.default.regMsgReciever(u.Msg.recorderStop,function(){return a.updateUI(),!0}),d.default.regMsgReciever(u.Msg.recorderFail,function(){return a.updateUI(),!0}),d.default.regMsgReciever(u.Msg.recorderDone,function(){return a.updateUI(),!0}),d.default.regMsgReciever(u.Msg.shareMaxTimes,function(){return a.node.active=!1,!0})):this.node.active=!1},t.prototype.updateUI=function(){"idle"==c.pzaChannelTT.rState?(this.bt_label.string="\u5f55\u5236",this.shareRewardNode.active=!1):"recording"==c.pzaChannelTT.rState?(this.bt_label.string="\u5f55\u5236\u4e2d",this.shareRewardNode.active=!1):"recordEnd"==c.pzaChannelTT.rState&&(this.bt_label.string="\u5f55\u5236\u5b8c\u6bd5",this.btnPos==r.lobby&&(this.shareRewardNode.active=!0))},t.prototype.onClick=function(){"idle"==c.pzaChannelTT.rState?s.pzaChannel.instance().recorderStart():"recording"==c.pzaChannelTT.rState?s.pzaChannel.instance().recorderStop():"recordEnd"==c.pzaChannelTT.rState&&p.pzaUIManager.baseShowPopUI(l.pzaResourceUrl.BYTE_RECORD_VIEW,function(){})},t.prototype.onDestroy=function(){d.default.delMsgReciever(u.Msg.recorderStart),d.default.delMsgReciever(u.Msg.recorderStop),d.default.delMsgReciever(u.Msg.recorderFail),d.default.delMsgReciever(u.Msg.recorderDone),d.default.delMsgReciever(u.Msg.shareMaxTimes)},i([f({displayName:"\u6309\u94ae\u4e0a\u6587\u5b57",type:cc.Label})],t.prototype,"bt_label",void 0),i([f({displayName:"\u5206\u4eab\u5956\u52b1",type:cc.Node})],t.prototype,"shareRewardNode",void 0),i([f({type:cc.Enum(r),tooltip:"\u6309\u94ae\u6240\u5904\u4f4d\u7f6e"})],t.prototype,"btnPos",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzaChannelTT":"pzaChannelTT","../utils/pzaKDefine":"pzaKDefine","../utils/pzakc":"pzakc"}],pzaRecordView:[function(a,t,e){"use strict";cc._RF.push(t,"501c98UqDNCh4VWbhSYgRLO","pzaRecordView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRecordView=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGamePropConfig"),l=a("../../Common/pzaLocalData"),s=a("../../Common/pzaRewardManager"),c=a("../../utils/pzaChannel"),u=a("../../utils/pzaChannelTT"),d=a("../../utils/pzaKDefine"),h=a("../../utils/pzakc"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onEnable=function(){},t.prototype.clickShare=function(){var a=this,t=h.default.getData("shareData",{today:"",shareCount:"0"}),e=t.shareCount;e>=u.pzaChannelTT.shareMaxTimes?console.log("\u5206\u4eab\u6b21\u6570\u5df2\u8fbe\u4e0a\u9650"):c.pzaChannel.instance().shareVideo(function(){e++,t.shareCount=e,h.default.saveData("shareData",t),l.pzaLocalData.data.coin+=200,l.pzaLocalData.addDirty("coin"),a.close(),e>=u.pzaChannelTT.shareMaxTimes&&h.default.sendMsg(d.Msg.shareMaxTimes);var o=[new p.pzaRewardPropData(p.pzaGamePropEnum.PROP_COIN,200)];s.pzaRewardManager.recieveRewards(o,function(){})})},t.prototype.clickAbandon=function(){this.close()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([f],t)}(cc.Component));e.pzaRecordView=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGamePropConfig":"pzaGamePropConfig","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaRewardManager":"pzaRewardManager","../../utils/pzaChannel":"pzaChannel","../../utils/pzaChannelTT":"pzaChannelTT","../../utils/pzaKDefine":"pzaKDefine","../../utils/pzakc":"pzakc"}],pzaRecruitDrawConf:[function(a,t,e){"use strict";cc._RF.push(t,"dc3dcQp18JKfLaC4jnSsFg+","pzaRecruitDrawConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRecruitDrawConf=void 0;var o=a("../utils/pzakc");e.pzaRecruitDrawConf=function(a){this.id=0,this.reward=[],this.probability=0,this.nb=0,this.id=a.id,this.probability=a.probability||0,this.reward=o.default.strArr(a.reward),this.nb=a.nb||0},cc._RF.pop()},{"../utils/pzakc":"pzakc"}],pzaRecruitDrawItem:[function(a,t,e){"use strict";cc._RF.push(t,"0e4b5/YGkpFTbypTrSOi+FN","pzaRecruitDrawItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRecruitDrawItem=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSpineController"),c=a("../Common/pzaSpriteFrameManager"),u=a("../Load/pzaBundleObjectPool"),d=a("../Shop/pzaShopConfig"),h=a("../utils/pzakc"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.propAni=null,t.proIcon=null,t.propAmountLab=null,t.hasGet1=null,t.hasGet2=null,t.propSpr=null,t.spriArr=[],t.itemIdx=0,t.drawConf=null,t.propType=0,t.propAmount=0,t}return n(t,a),t.prototype.bindData=function(a,t,e,o){var n=this;if(this.node.setPosition(a,t),this.itemIdx=e,this.drawConf=o,this.hasGet1.active=!1,this.hasGet2.active=!1,this.propSpr.spriteFrame=this.spriArr[o.nb],1==o.reward.length){var i=o.reward[0].split("-");this.propType=parseInt(i[0]),this.propAmount=parseInt(i[1])}else for(var r=0;r<o.reward.length&&(i=o.reward[r].split("-"),this.propType=parseInt(i[0]),this.propAmount=parseInt(i[1]),this.propType==p.pzaGamePropEnum.PROP_PLANTE&&l.pzaLocalData.data.ownPlants.includes(this.propAmount));r++);switch(this.propType){case p.pzaGamePropEnum.PROP_PLANTE:this.propAni.node.active=!1,this.proIcon.node.active=!0,this.propAmountLab.string="X1",c.pzaSpriteFrameManager.loadPlantCard(this.propAmount,this.proIcon);break;case p.pzaGamePropEnum.PROP_CHERRY_BOMB:case p.pzaGamePropEnum.PROP_AUTO_PICK:case p.pzaGamePropEnum.PROP_FREE_SUN:this.proIcon.node.active=!1,this.propAni.node.active=!0,this.propType==p.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAni.playAnimation("3ui_1",!0):this.propType==p.pzaGamePropEnum.PROP_AUTO_PICK?this.propAni.playAnimation("2ui_1",!0):this.propType==p.pzaGamePropEnum.PROP_FREE_SUN&&this.propAni.playAnimation("1ui_1",!0),this.propAmountLab.string="X"+this.propAmount;break;case p.pzaGamePropEnum.PROP_GOLD_FLOWER:this.propAni.node.active=!1,this.proIcon.node.active=!0,c.pzaSpriteFrameManager.loadShopItemIcon(d.pzaShopItemType.GOLD_FLOWER_SEED,this.proIcon),this.propAmountLab.string="X"+this.propAmount;break;case p.pzaGamePropEnum.PROP_COIN:this.propAni.node.active=!1,this.proIcon.node.active=!0,u.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/BattleUI/coin_icon",function(a,t){null==a?t?n.proIcon.spriteFrame=t:h.default.err("\u65e0tool\u56fe"):console.error(a)}),this.propAmountLab.string="X"+this.propAmount;break;case p.pzaGamePropEnum.PROP_FERTILIZER:this.propAni.node.active=!1,this.proIcon.node.active=!0,c.pzaSpriteFrameManager.loadShopItemIcon(d.pzaShopItemType.FERTILIZER,this.proIcon),this.propAmountLab.string="X"+this.propAmount;break;case p.pzaGamePropEnum.PROP_PESTICIDE:this.propAni.node.active=!1,this.proIcon.node.active=!0,c.pzaSpriteFrameManager.loadShopItemIcon(d.pzaShopItemType.PESTICIDE,this.proIcon),this.propAmountLab.string="X"+this.propAmount;break;case p.pzaGamePropEnum.PROP_CHOCOLATES:this.propAni.node.active=!1,this.proIcon.node.active=!0,u.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/chocolate",function(a,t){null==a?t?n.proIcon.spriteFrame=t:h.default.err("\u65e0tool\u56fe"):console.error(a)}),this.propAmountLab.string="X"+this.propAmount}l.pzaLocalData.data.recruitDrawArr[e-1]>=1&&(this.hasGet1.active=!0,this.hasGet2.active=!0)},t.prototype.refreshGet=function(){this.hasGet1.active=!0,this.hasGet2.active=!0},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([z({displayName:"\u9053\u5177\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"propAni",void 0),i([z({displayName:"\u9053\u5177\u56fe\u6807",type:cc.Sprite})],t.prototype,"proIcon",void 0),i([z({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],t.prototype,"propAmountLab",void 0),i([z({displayName:"\u5df2\u7ecf\u9886\u53d6\u8282\u70b91",type:cc.Node})],t.prototype,"hasGet1",void 0),i([z({displayName:"\u5df2\u7ecf\u9886\u53d6\u8282\u70b92",type:cc.Node})],t.prototype,"hasGet2",void 0),i([z({displayName:"\u9053\u5177\u6846",type:cc.Sprite})],t.prototype,"propSpr",void 0),i([z({displayName:"\u9053\u5177\u6846\u7cbe\u7075\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"spriArr",void 0),i([f],t)}(cc.Component);e.pzaRecruitDrawItem=y,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Shop/pzaShopConfig":"pzaShopConfig","../utils/pzakc":"pzakc"}],pzaRecruitInvitateItem:[function(a,t,e){"use strict";cc._RF.push(t,"ad4057oqflOHanPzL8Dfsei","pzaRecruitInvitateItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRecruitInvitateItem=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../utils/pzakc"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.itemName=null,t.itemTime=null,t}return n(t,a),t.prototype.bindData=function(a,t){this.itemName.string=a+"",this.itemTime.string=t?p.default.returnNowTime(t):""},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u540d\u5b57",type:cc.Label})],t.prototype,"itemName",void 0),i([c({displayName:"\u65f6\u95f4",type:cc.Label})],t.prototype,"itemTime",void 0),i([s],t)}(cc.Component);e.pzaRecruitInvitateItem=u,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../utils/pzakc":"pzakc"}],pzaRecruitTaskConf:[function(a,t,e){"use strict";cc._RF.push(t,"8de0ewvEtFAE4HAz45mOdQ6","pzaRecruitTaskConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRecruitTaskConf=void 0;var o=function(){function a(a){this.id=0,this.tokenCoinCnt=0,this.trial=0,this.name="",this.id=a.id,this.tokenCoinCnt=a.amount,this.name=a.name||"",this.trial=a.trial||0}return a.act="recruit_share",a.taskRemoteData=[],a}();e.pzaRecruitTaskConf=o,cc._RF.pop()},{}],pzaRecruitTaskItem:[function(a,t,e){"use strict";cc._RF.push(t,"ee1a2sCModLlrIpMrEHIzDJ","pzaRecruitTaskItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRecruitTaskItem=void 0;var r=a("../Battle/Data/pzaPlantEnum"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGamePropConfig"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaRewardManager"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.descLab=null,t.reward1=null,t.reward1Amount=null,t.reward2=null,t.getBtn=null,t.itemIdx=0,t.taskConf=null,t.refreshCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.getBtn.on(cc.Node.EventType.TOUCH_END,this.clickGet,this)},t.prototype.onDisable=function(){this.getBtn.off(cc.Node.EventType.TOUCH_END,this.clickGet,this)},t.prototype.bindData=function(a,t,e){this.taskConf=a,this.reward2.active=!1,this.descLab.string=a.name,this.reward2.active=1==a.trial,this.reward1Amount.string=a.tokenCoinCnt+"",this.itemIdx=t,this.refreshCall=e,this.refreshItem()},t.prototype.refreshItem=function(){var a=!1;s.pzaLocalData.data.recruitTaskState[this.itemIdx]?1==s.pzaLocalData.data.recruitTaskState[this.itemIdx]?this.getBtn.active=!0:2==s.pzaLocalData.data.recruitTaskState[this.itemIdx]&&(this.getBtn.active=!1,a=!0):this.getBtn.active=!1,this.reward1.getChildByName("slot_mask").active=a,this.reward1.getChildByName("select").active=a,this.reward2.getChildByName("slot_mask").active=a,this.reward2.getChildByName("select").active=a},t.prototype.clickGet=function(){var a=this;this.reward1.active&&(this.reward1.getChildByName("slot_mask").active=!1,this.reward1.getChildByName("select").active=!1),this.reward2.active&&(this.reward2.getChildByName("slot_mask").active=!1,this.reward2.getChildByName("select").active=!1),s.pzaLocalData.data.recruitTaskState[this.itemIdx]=2,s.pzaLocalData.addDirty("recruitTaskState"),this.refreshItem();var t=[],e=new l.pzaRewardPropData(l.pzaGamePropEnum.PROP_TOKEN_COIN,this.taskConf.tokenCoinCnt);if(t.push(e),this.taskConf.trial){var o=new l.pzaRewardPropData(l.pzaGamePropEnum.PROP_PLANTE,r.pzaPlantEnum.SUPER_CHOMPER);o.limitGet=1,t.push(o)}c.pzaRewardManager.recieveRewards(t,function(){a.refreshCall&&a.refreshCall()})},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([h({displayName:"\u63cf\u8ff0",type:cc.Label})],t.prototype,"descLab",void 0),i([h({displayName:"\u5956\u52b1\u4ee3\u5e01\u8282\u70b9",type:cc.Node})],t.prototype,"reward1",void 0),i([h({displayName:"\u5956\u52b1\u4ee3\u5e01\u6570\u91cf",type:cc.Label})],t.prototype,"reward1Amount",void 0),i([h({displayName:"\u5956\u52b12",type:cc.Node})],t.prototype,"reward2",void 0),i([h({displayName:"\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"getBtn",void 0),i([d],t)}(cc.Component);e.pzaRecruitTaskItem=m,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager"}],pzaRecruitView:[function(a,t,e){"use strict";cc._RF.push(t,"0619cNWi29ExKrmoJOGYAgE","pzaRecruitView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRecruitView=void 0;var r=a("../Battle/Data/pzaPlantEnum"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGamePropConfig"),s=a("../Common/pzaGameRecruitMgr"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaRecruitTaskConf"),d=a("../Common/pzaRewardManager"),h=a("../Common/pzaSoundManager"),m=a("../Common/pzaUtil"),f=a("../Garden/pzaGardenMgr"),z=a("../utils/pzaChannel"),y=a("./pzaRecruitDrawItem"),g=a("./pzaRecruitInvitateItem"),v=a("./pzaRecruitTaskItem"),b=cc._decorator,S=b.ccclass,P=b.property,C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.clickBtnNodeArr=[],t.viewNodeArr=[],t.shareBtn=null,t.inviteRecordItemPre=null,t.inviteRecordNode=null,t.inviteContent=null,t.recruitTaskContent=null,t.recruitDrawContent=null,t.inviteTip=null,t.recruitTaskNode=null,t.recruitTaskItemPre=null,t.drawSelectNode=null,t.drawBtn=null,t.drawGridNode=null,t.drawItemPre=null,t.notClickDrawNode=null,t.reportGetBtn=null,t.reportShareBtn=null,t.reportShareLab=null,t.reportShareSucNode1=null,t.reportShareSucNode2=null,t.tokenCoinLab=null,t.sucessInviteLab=null,t.leftDaysLab=null,t.redNodeTip=null,t.drawCost=45,t.gridNodes=[],t.nowBtnIdx=0,t.inviteUser=[],t.drawSelectIdx=0,t.isDrawing=!1,t.drawTargetIdx=0,t.drawCnt=1,t.blinkTween=null,t.step=0,t}return n(t,a),t.prototype.onEnable=function(){this.shareBtn.on(cc.Node.EventType.TOUCH_END,this.clickInvitateShare,this),this.drawBtn.on(cc.Node.EventType.TOUCH_END,this.clickDraw,this),this.reportGetBtn.on(cc.Node.EventType.TOUCH_END,this.clickReportGet,this),this.reportShareBtn.on(cc.Node.EventType.TOUCH_END,this.clickReportShare,this)},t.prototype.onDisable=function(){this.shareBtn.off(cc.Node.EventType.TOUCH_END,this.clickInvitateShare,this),this.drawBtn.off(cc.Node.EventType.TOUCH_END,this.clickDraw,this),this.reportGetBtn.off(cc.Node.EventType.TOUCH_END,this.clickReportGet,this),this.reportShareBtn.off(cc.Node.EventType.TOUCH_END,this.clickReportShare,this)},t.prototype.bindData=function(a){this.nowBtnIdx=0,this.redNodeTip.active=!1,this.inviteUser=[],this.inviteRecordNode.removeAllChildren(),this.recruitTaskNode.removeAllChildren(),this.inviteUser=a,this.init(),this.checkTask(a)&&(this.redNodeTip.active=!0),this.sucessInviteLab.string=""+a.length,this.leftDaysLab.string=c.pzaLocalData.recruitLeftDays+"",c.pzaLocalData.redPointOnlyOne=!1},t.prototype.init=function(){this.drawSelectNode.active=!1,2!=c.pzaLocalData.data.reportShareState?this.nowBtnIdx=0:this.nowBtnIdx=1,this.refreshTokenCoin(),this.refreshBtnState(),0==this.nowBtnIdx?this.showRecruitReport():1==this.nowBtnIdx&&this.showRecruitShare()},t.prototype.refreshView=function(){this.refreshBtnState()},t.prototype.refreshTokenCoin=function(){this.tokenCoinLab.string=c.pzaLocalData.data.tokenCoin+""},t.prototype.showRecruitReport=function(){this.inviteTip.active=!1,this.reportShareSucNode1&&(this.reportShareSucNode1.active=!1),this.reportShareSucNode2&&(this.reportShareSucNode2.active=!1),0==c.pzaLocalData.data.reportShareState?(this.reportShareBtn&&(this.reportShareBtn.active=!0),this.reportGetBtn&&(this.reportGetBtn.active=!1),this.reportShareLab.string=""):1==c.pzaLocalData.data.reportShareState?(this.reportShareBtn&&(this.reportShareBtn.active=!1),this.reportGetBtn&&(this.reportGetBtn.active=!0),this.reportShareLab.string="\u5206\u4eab\u6210\u529f",this.reportShareLab.node.color=new cc.Color(41,54,107),this.reportShareLab.node.getComponent(cc.LabelOutline).width=0):2==c.pzaLocalData.data.reportShareState&&(this.reportShareBtn&&(this.reportShareBtn.active=!1),this.reportGetBtn&&(this.reportGetBtn.active=!1),this.reportShareLab.string="\u5df2\u9886\u53d6",this.reportShareLab.node.color=new cc.Color(255,173,29),this.reportShareLab.node.getComponent(cc.LabelOutline).width=2,this.reportShareLab.node.getComponent(cc.LabelOutline).color=new cc.Color(75,51,6),this.reportShareSucNode1&&this.reportShareSucNode2&&(this.reportShareSucNode1.active=!0,this.reportShareSucNode2.active=!0))},t.prototype.showRecruitShare=function(){if(c.pzaLocalData.data.curChapter<2||2==c.pzaLocalData.data.curChapter&&c.pzaLocalData.data.curPart<=1)return this.inviteTip.active=!0,void(this.inviteContent.active=!1);if(this.inviteTip.active=!1,this.inviteContent.active=!0,this.inviteRecordNode.childrenCount<=0){for(var a=0;a<this.inviteUser.length;a++){var t=p.pzaGameCommonPool.requestInstant(this.inviteRecordItemPre);t.setParent(this.inviteRecordNode);var e=t.getComponent(g.pzaRecruitInvitateItem);e&&e.bindData(this.inviteUser[a].nickName,this.inviteUser[a].shareTime)}this.inviteUser.length>0&&(this.inviteRecordNode.height=38*this.inviteUser.length+5*(this.inviteUser.length-1)+15)}},t.prototype.showRecruitTaskView=function(){var a=this;if(c.pzaLocalData.data.curChapter<2||2==c.pzaLocalData.data.curChapter&&c.pzaLocalData.data.curPart<=1)return this.inviteTip.active=!0,void(this.recruitTaskContent.active=!1);if(this.redNodeTip.active=!1,this.inviteTip.active=!1,this.recruitTaskContent.active=!0,this.recruitTaskNode.childrenCount<=0){for(var t=0;t<s.pzaGameRecruitMgr.instance().recruitTaskMap.size;t++){var e=p.pzaGameCommonPool.requestInstant(this.recruitTaskItemPre);e.setParent(this.recruitTaskNode);var o=e.getComponent(v.pzaRecruitTaskItem),n=s.pzaGameRecruitMgr.instance().recruitTaskMap.get(t+1);o&&o.bindData(n,t+1,function(){a.refreshTokenCoin()})}this.recruitTaskNode.height=100*s.pzaGameRecruitMgr.instance().recruitTaskMap.size}},t.prototype.showRecruitDrawView=function(){if(c.pzaLocalData.data.curChapter<2||2==c.pzaLocalData.data.curChapter&&c.pzaLocalData.data.curPart<=1)return this.inviteTip.active=!0,void(this.recruitDrawContent.active=!1);this.inviteTip.active=!1,this.recruitDrawContent.active=!0,this.notClickDrawNode.active=c.pzaLocalData.data.tokenCoin<this.drawCost;for(var a=[],t=0;t<c.pzaLocalData.data.recruitDrawArr.length;t++)c.pzaLocalData.data.recruitDrawArr[t]>=1&&a.push(t);if(a.length>=20&&(this.notClickDrawNode.active=!0),this.drawGridNode.childrenCount<=0)for(this.gridNodes=[],t=0;t<s.pzaGameRecruitMgr.instance().recruitDrawMap.size;t++){var e=p.pzaGameCommonPool.requestInstant(this.drawItemPre);e.setParent(this.drawGridNode);var o=e.getComponent(y.pzaRecruitDrawItem),n=90*t-315,i=165-95*t;t<=7?(n=90*t-315,i=165):t>=8&&t<=10?(n=315,i=165-95*(t-7)):t>=11&&t<=17?(n=315-90*(t-10),i=-120):t>=18&&t<=19&&(n=-315,i=95*(t-17)-120);var r=s.pzaGameRecruitMgr.instance().recruitDrawMap.get(t+1);o&&o.bindData(n,i,t+1,r),this.gridNodes.push(e)}},t.prototype.refreshBtnState=function(){for(var a=0;a<this.clickBtnNodeArr.length;a++)a==this.nowBtnIdx?(this.clickBtnNodeArr[a].getChildByName("recruitImg23").active=!0,this.clickBtnNodeArr[a].getChildByName("recruitImg2").active=!0,this.clickBtnNodeArr[a].getChildByName("btnLab").color=new cc.Color(255,173,29),this.clickBtnNodeArr[a].getChildByName("btnLab").getComponent(cc.LabelOutline).width=2,this.clickBtnNodeArr[a].getChildByName("btnLab").getComponent(cc.LabelOutline).color=new cc.Color(75,51,6)):(this.clickBtnNodeArr[a].getChildByName("recruitImg23").active=!1,this.clickBtnNodeArr[a].getChildByName("recruitImg2").active=!1,this.clickBtnNodeArr[a].getChildByName("btnLab").color=new cc.Color(34,36,52),this.clickBtnNodeArr[a].getChildByName("btnLab").getComponent(cc.LabelOutline).width=0);for(a=0;a<this.viewNodeArr.length;a++)a==this.nowBtnIdx?this.viewNodeArr[a].active=!0:this.viewNodeArr[a].active=!1},t.prototype.clickBtn=function(a,t){var e=parseInt(t);if(this.nowBtnIdx!=e&&!this.isDrawing)switch(this.nowBtnIdx=e,this.refreshView(),h.pzaSoundManager.playSFX(),e){case 0:this.checkTask(this.inviteUser)&&(this.redNodeTip.active=!0),this.showRecruitReport();break;case 1:this.checkTask(this.inviteUser)&&(this.redNodeTip.active=!0),this.showRecruitShare();break;case 2:this.showRecruitTaskView();break;case 3:this.checkTask(this.inviteUser)&&(this.redNodeTip.active=!0),this.showRecruitDrawView()}},t.prototype.clickReportGet=function(){var a=this;c.pzaLocalData.data.reportShareState=2,c.pzaLocalData.addDirty("reportShareState"),this.showRecruitReport();var t=[],e=new l.pzaRewardPropData(l.pzaGamePropEnum.PROP_PLANTE,r.pzaPlantEnum.SUPER_CHOMPER);e.limitGet=1,t.push(e),d.pzaRewardManager.recieveRewards(t,function(){a.refreshTokenCoin()})},t.prototype.clickReportShare=function(){var a=this;z.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:null},function(){c.pzaLocalData.data.reportShareState=1,c.pzaLocalData.addDirty("reportShareState"),a.showRecruitReport()})},t.prototype.clickDraw=function(){if(!this.isDrawing)if(this.gridNodes.length<20)console.log("\u5956\u9879\u8d44\u6e90\u6ca1\u52a0\u8f7d\u5b8c\u6bd5");else{c.pzaLocalData.data.tokenCoin-=this.drawCost,c.pzaLocalData.addDirty("tokenCoin"),this.notClickDrawNode.active=c.pzaLocalData.data.tokenCoin<this.drawCost,this.drawSelectNode.active=!0,this.drawSelectNode.color=new cc.Color(255,255,255),this.blinkTween&&this.blinkTween.stop(),this.drawSelectIdx=0,this.isDrawing=!0;for(var a=[],t=0;t<s.pzaGameRecruitMgr.instance().recruitDrawMap.size;t++){var e=s.pzaGameRecruitMgr.instance().recruitDrawMap.get(t+1).probability;a.push(e),c.pzaLocalData.data.recruitDrawArr[t]||(c.pzaLocalData.data.recruitDrawArr[t]=0)}var o=[];for(t=0;t<c.pzaLocalData.data.recruitDrawArr.length;t++)1==c.pzaLocalData.data.recruitDrawArr[t]&&o.push(t);for(t=0;t<o.length;t++)a[o[t]]=0;c.pzaLocalData.addDirty("recruitDrawArr"),this.drawTargetIdx=m.pzaUtil.getRandomIndexByWeight(a),this.drawCnt=1,19==o.length&&(this.drawCnt=2),this.step=0,this.schedule(this.updateLottery,.1),this.updateDrawSelectBox()}},t.prototype.updateLottery=function(){this.drawSelectIdx=(this.drawSelectIdx+1)%this.gridNodes.length,this.updateDrawSelectBox(),this.step++,this.step>=20&&(this.drawCnt=2),this.drawSelectIdx===this.drawTargetIdx&&2==this.drawCnt&&(this.unschedule(this.updateLottery),this.isDrawing=!1,this.showResult())},t.prototype.updateDrawSelectBox=function(){var a=this.gridNodes[this.drawSelectIdx];this.drawSelectNode.setPosition(a.position)},t.prototype.showResult=function(){var a=this,t=function(t,e,o,n){var i=t+(e-t)*n,r=new cc.Color(i,i,i);return a.drawSelectNode.color=r,i};this.blinkTween=cc.tween({c:255}).repeat(3,cc.tween().to(.5,{c:40},{progress:t}).to(.5,{c:255},{progress:t})).call(function(){a.drawSelectNode.active=!1,a.blinkTween.stop()}),this.blinkTween.start();var e=s.pzaGameRecruitMgr.instance().recruitDrawMap.get(this.drawTargetIdx+1);if(e){var o=0,n=0,i=null;if(1==e.reward.length){var p=e.reward[0].split("-");o=parseInt(p[0]),n=parseInt(p[1])}else for(var u=0;u<e.reward.length&&(p=e.reward[u].split("-"),o=parseInt(p[0]),n=parseInt(p[1]),o==l.pzaGamePropEnum.PROP_PLANTE&&c.pzaLocalData.data.ownPlants.includes(n));u++);var h=new l.pzaRewardPropData(o,n);if(o==l.pzaGamePropEnum.PROP_GOLD_FLOWER)if(!c.pzaLocalData.data.unlockGarden||c.pzaLocalData.data.unlockGarden&&f.default.instance().getEmptyPos(f.pzaGardenEnv.normal)<0)h.propType=l.pzaGamePropEnum.PROP_COIN,h.propCount=5e4,h.trunToCoin=1,i=c.pzaLocalData.data.unlockGarden?"\u5f53\u524d\u82b1\u56ed\u5df2\u6ee1\uff0c\u5956\u52b1\u81ea\u52a8\u5151\u6362\u4e3a\u91d1\u5e01\u3002":"\u5f53\u524d\u672a\u89e3\u9501\u82b1\u56ed\uff0c\u5956\u52b1\u81ea\u52a8\u5151\u6362\u4e3a\u91d1\u5e01\u3002";else{var m=f.default.instance().randomGardenPlant(1);h.propCount=m,i="\u795e\u79d8\u7684\u9ec4\u91d1\u82b1\u82d7\u8fdb\u5165\u4f11\u95f2\u82b1\u56ed\uff01\u6709100%\u7684\u673a\u4f1a\u53d8\u6210\u4f60\u6ca1\u6709\u7684\u690d\u7269\uff01"}d.pzaRewardManager.recieveRewards([h],function(){n==r.pzaPlantEnum.TWIN_SUNFLOWER&&c.pzaLocalData.data.ownPlants.includes(n)&&(a.drawGridNode.removeAllChildren(),a.showRecruitDrawView()),a.refreshTokenCoin()},!1,i)}c.pzaLocalData.data.recruitDrawArr[this.drawTargetIdx]+=1,c.pzaLocalData.addDirty("recruitDrawArr"),this.gridNodes[this.drawTargetIdx]&&this.gridNodes[this.drawTargetIdx].getComponent(y.pzaRecruitDrawItem).refreshGet();var z=[];for(u=0;u<c.pzaLocalData.data.recruitDrawArr.length;u++)1==c.pzaLocalData.data.recruitDrawArr[u]&&z.push(u);z.length>=20&&(this.notClickDrawNode.active=!0)},t.prototype.clickInvitateShare=function(){var a=this;h.pzaSoundManager.playSFX(),z.pzaChannel.instance().shareAppMessage({title:null,act:u.pzaRecruitTaskConf.act,adsid:null},function(){c.pzaLocalData.data.recruitInvitateState||(c.pzaLocalData.data.recruitInvitateState=1,z.pzaChannel.isConfRemote||"noAD"!=z.pzaChannel.instance().channel||(c.pzaLocalData.data.recruitInvitateState=0),c.pzaLocalData.data.tokenCoin+=10,c.pzaLocalData.addDirty("recruitInvitateState","tokenCoin"),a.refreshTokenCoin())})},t.prototype.checkTask=function(a){var t=!1;if(c.pzaLocalData.data.curChapter<2||1==c.pzaLocalData.data.curPart&&2==c.pzaLocalData.data.curChapter)return!1;1==c.pzaLocalData.data.recruitTaskState[1]&&(t=!0),a.length>=20?2!=c.pzaLocalData.data.recruitTaskState[6]&&(c.pzaLocalData.data.recruitTaskState[6]=1,t=!0):a.length>=15?2!=c.pzaLocalData.data.recruitTaskState[5]&&(c.pzaLocalData.data.recruitTaskState[5]=1,t=!0):a.length>=10?2!=c.pzaLocalData.data.recruitTaskState[4]&&(c.pzaLocalData.data.recruitTaskState[4]=1,t=!0):a.length>=5?2!=c.pzaLocalData.data.recruitTaskState[3]&&(c.pzaLocalData.data.recruitTaskState[3]=1,t=!0):a.length>=1&&2!=c.pzaLocalData.data.recruitTaskState[2]&&(c.pzaLocalData.data.recruitTaskState[2]=1,t=!0);for(var e=0,o=0;o<a.length;o++)a[o].star&&a[o].star>=45&&e++;return e>=18?2!=c.pzaLocalData.data.recruitTaskState[11]&&(c.pzaLocalData.data.recruitTaskState[11]=1,t=!0):e>=12?2!=c.pzaLocalData.data.recruitTaskState[10]&&(c.pzaLocalData.data.recruitTaskState[10]=1,t=!0):e>=9?2!=c.pzaLocalData.data.recruitTaskState[9]&&(c.pzaLocalData.data.recruitTaskState[9]=1,t=!0):e>=6?2!=c.pzaLocalData.data.recruitTaskState[8]&&(c.pzaLocalData.data.recruitTaskState[8]=1,t=!0):e>=3&&2!=c.pzaLocalData.data.recruitTaskState[7]&&(c.pzaLocalData.data.recruitTaskState[7]=1,t=!0),t},t.prototype.close=function(){this.isDrawing||(this.blinkTween&&this.blinkTween.stop(),h.pzaSoundManager.playSFX(),p.pzaGameCommonPool.returnInstant(this.node))},i([P({displayName:"\u56db\u4e2a\u70b9\u51fb\u6309\u94ae\u8282\u70b9",type:[cc.Node]})],t.prototype,"clickBtnNodeArr",void 0),i([P({displayName:"\u56db\u4e2a\u6309\u94ae\u5bf9\u5e94\u7684\u89c6\u56fe",type:[cc.Node]})],t.prototype,"viewNodeArr",void 0),i([P({displayName:"\u7acb\u5373\u5206\u4eab\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"shareBtn",void 0),i([P({displayName:"\u9080\u8bf7\u8bb0\u5f55\u9884\u8bbe",type:cc.Prefab})],t.prototype,"inviteRecordItemPre",void 0),i([P({displayName:"\u9080\u8bf7\u8bb0\u5f55\u7236\u8282\u70b9",type:cc.Node})],t.prototype,"inviteRecordNode",void 0),i([P({displayName:"\u9080\u8bf7\u8bb0\u5f55\u5185\u5bb9",type:cc.Node})],t.prototype,"inviteContent",void 0),i([P({displayName:"\u62db\u52df\u4efb\u52a1\u5185\u5bb9",type:cc.Node})],t.prototype,"recruitTaskContent",void 0),i([P({displayName:"\u62db\u52df\u62bd\u5956\u5185\u5bb9",type:cc.Node})],t.prototype,"recruitDrawContent",void 0),i([P({displayName:"\u9080\u8bf7\u63d0\u793a",type:cc.Node})],t.prototype,"inviteTip",void 0),i([P({displayName:"\u62db\u52df\u4efb\u52a1\u8282\u70b9",type:cc.Node})],t.prototype,"recruitTaskNode",void 0),i([P({displayName:"\u62db\u52df\u4efb\u52a1\u5b50item",type:cc.Prefab})],t.prototype,"recruitTaskItemPre",void 0),i([P({displayName:"\u62bd\u5956\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"drawSelectNode",void 0),i([P({displayName:"\u62bd\u5956\u6309\u94ae",type:cc.Node})],t.prototype,"drawBtn",void 0),i([P({displayName:"\u62bd\u5956\u9884\u8bbe\u7236\u8282\u70b9",type:cc.Node})],t.prototype,"drawGridNode",void 0),i([P({displayName:"\u62bd\u5956\u9884\u8bbe",type:cc.Prefab})],t.prototype,"drawItemPre",void 0),i([P({displayName:"\u62bd\u5956\u4e0d\u53ef\u70b9\u51fb\u8282\u70b9",type:cc.Node})],t.prototype,"notClickDrawNode",void 0),i([P({displayName:"\u62db\u52df\u62a5\u5230\u7acb\u5373\u9886\u53d6\u6309\u94ae",type:cc.Node})],t.prototype,"reportGetBtn",void 0),i([P({displayName:"\u62db\u52df\u62a5\u5230\u5206\u4eab\u6309\u94ae",type:cc.Node})],t.prototype,"reportShareBtn",void 0),i([P({displayName:"\u62db\u52df\u62a5\u5230\u5206\u4eab\u6587\u5b57",type:cc.Label})],t.prototype,"reportShareLab",void 0),i([P({displayName:"\u62db\u52df\u62a5\u5230\u5206\u4eab\u6210\u529f\u6807\u8bc61",type:cc.Node})],t.prototype,"reportShareSucNode1",void 0),i([P({displayName:"\u62db\u52df\u62a5\u5230\u5206\u4eab\u6210\u529f\u6807\u8bc62",type:cc.Node})],t.prototype,"reportShareSucNode2",void 0),i([P({displayName:"\u4ee3\u5e01label",type:cc.Label})],t.prototype,"tokenCoinLab",void 0),i([P({displayName:"\u7d2f\u8ba1\u6210\u529f\u9080\u8bf7",type:cc.Label})],t.prototype,"sucessInviteLab",void 0),i([P({displayName:"\u6d3b\u52a8\u5269\u4f59\u5929\u6570",type:cc.Label})],t.prototype,"leftDaysLab",void 0),i([P({displayName:"\u7ea2\u70b9\u63d0\u793a",type:cc.Node})],t.prototype,"redNodeTip",void 0),i([S],t)}(cc.Component);e.pzaRecruitView=C,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaGameRecruitMgr":"pzaGameRecruitMgr","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRecruitTaskConf":"pzaRecruitTaskConf","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../Garden/pzaGardenMgr":"pzaGardenMgr","../utils/pzaChannel":"pzaChannel","./pzaRecruitDrawItem":"pzaRecruitDrawItem","./pzaRecruitInvitateItem":"pzaRecruitInvitateItem","./pzaRecruitTaskItem":"pzaRecruitTaskItem"}],pzaRedPointMgr:[function(a,t,e){"use strict";cc._RF.push(t,"0c8c7sXsaRMZ4adaa2ij6aR","pzaRedPointMgr");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r,p=a("../Garden/pzaGardenMgr"),l=a("../Task/pzaTaskMgr"),s=a("../utils/pzaChannel"),c=a("../utils/pzakc"),u=a("./pzaLocalData"),d=a("./pzaRecruitTaskConf"),h=cc._decorator,m=h.ccclass,f=h.property;(function(a){a[a.null=0]="null",a[a.sign=1]="sign",a[a.monthsign=2]="monthsign",a[a.achieve=3]="achieve",a[a.garden=4]="garden",a[a.club=5]="club",a[a.invitate=6]="invitate",a[a.welfare=7]="welfare",a[a.sharegift=8]="sharegift",a[a.weektwo=9]="weektwo"})(r||(r={}));var z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.type=r.null,t.tipNode=null,t.endTime=new Date("2024-08-25 00:00:00").getTime(),t}return n(t,a),t.prototype.start=function(){var a=this;this.scheduleOnce(function(){if(("wx"==s.pzaChannel.instance().channel||a.type!=r.club)&&(u.pzaLocalData.loadingIsOver&&a.checkRed(),a.schedule(function(){u.pzaLocalData.loadingIsOver&&a.checkRed()},3,cc.macro.REPEAT_FOREVER),a.type==r.invitate)){var t=s.pzaChannel.instance().getChannel();"wx"==t.channel?t.getShareResult(d.pzaRecruitTaskConf.act,function(a){d.pzaRecruitTaskConf.taskRemoteData=a}):"tt"==t.channel?t.getShareResult(d.pzaRecruitTaskConf.act,function(a){d.pzaRecruitTaskConf.taskRemoteData=a}):"my"==t.channel?t.getShareResult(d.pzaRecruitTaskConf.act,function(a){d.pzaRecruitTaskConf.taskRemoteData=a}):"ks"==t.channel&&t.getShareResult(d.pzaRecruitTaskConf.act,function(a){d.pzaRecruitTaskConf.taskRemoteData=a})}},1)},t.prototype.checkRed=function(){this.tipNode.active?this.getTipState(this.type)||(this.tipNode.active=!1):this.getTipState(this.type)&&(this.tipNode.active=!0,this.tipNode.angle=0,cc.Tween.stopAllByTarget(this.tipNode),c.default.ani_JitterNode(this.tipNode,.4,15,3,!0))},t.prototype.getTipState=function(a){var t=!1;switch(a){case r.sign:t=this.checkDaySign();break;case r.monthsign:t=this.checkMonthSign();break;case r.achieve:t=this.checkAchieve();break;case r.garden:t=this.checkGarden();break;case r.club:t=this.checkClub();break;case r.invitate:t=this.checkInvitate();break;case r.sharegift:u.pzaLocalData.data.shareGiftRecIndex.indexOf(3)>=0&&!u.pzaLocalData.data.shareBoomNutPop&&(t=!0);break;case r.weektwo:t=this.checkWeekTwo();break;case r.welfare:(t=this.checkInvitate())||(t=this.checkDaySign()),t||(t=this.checkMonthSign()),t||(t=this.checkWeekTwo()),u.pzaLocalData.data.shareGiftRecIndex.indexOf(3)>=0&&!u.pzaLocalData.data.shareBoomNutPop&&(t=!0)}return t},t.prototype.checkDaySign=function(){return!(u.pzaLocalData.data||u.pzaLocalData.data.canMonthSign||u.pzaLocalData.data||u.pzaLocalData.data.hasSign)},t.prototype.checkMonthSign=function(){return!(u.pzaLocalData.data&&!u.pzaLocalData.data.canMonthSign||u.pzaLocalData.data.isSignInMonth)},t.prototype.checkAchieve=function(){for(var a=!1,t=Object.values(u.pzaLocalData.data.achieves),e=0;e<t.length;e++)if(1==t[e]){a=!0;break}return a},t.prototype.checkGarden=function(){return p.default.instance().canOperate()},t.prototype.checkClub=function(){var a=!1;if(null==u.pzaLocalData.data.gameClubState[0])return!0;for(var t=0;t<u.pzaLocalData.data.gameClubState.length;t++)u.pzaLocalData.data.gameClubState[t]&&1==u.pzaLocalData.data.gameClubState[t]&&(a=!0);return a},t.prototype.checkInvitate=function(){var a=!1;return!u.pzaLocalData.holidayRecruitOver&&(u.pzaLocalData.isNewUser&&!u.pzaLocalData.holidayRecruitOver&&u.pzaLocalData.redPointOnlyOne&&(a=!0),1==u.pzaLocalData.data.reportShareState&&(a=!0),!!a||!(u.pzaLocalData.data.curChapter<2||1==u.pzaLocalData.data.curPart&&2==u.pzaLocalData.data.curChapter)&&(1==u.pzaLocalData.data.recruitTaskState[1]&&(a=!0),d.pzaRecruitTaskConf.taskRemoteData.length>0&&(a=this.checkTask(d.pzaRecruitTaskConf.taskRemoteData)),a))},t.prototype.checkWeekTwo=function(){var a=!1;if(!u.pzaLocalData.data.passLastPart||u.pzaLocalData.serverTime>this.endTime)return!1;var t=l.default.instance().getTaskList();if(!t)return!1;for(var e=0;e<t.length;e++)2==t[e].state&&(a=!0);return a||(a=u.pzaLocalData.data.weekTwoStartTip),a},t.prototype.checkTask=function(a){var t=!1,e=!1,o=0,n=!1,i=0;a.length>=20?(2!=u.pzaLocalData.data.recruitTaskState[6]&&(u.pzaLocalData.data.recruitTaskState[6]=1,t=!0),e=!0,o=5):a.length>=15?(2!=u.pzaLocalData.data.recruitTaskState[5]&&(u.pzaLocalData.data.recruitTaskState[5]=1,t=!0),e=!0,o=4):a.length>=10?(2!=u.pzaLocalData.data.recruitTaskState[4]&&(u.pzaLocalData.data.recruitTaskState[4]=1,t=!0),e=!0,o=3):a.length>=5?(2!=u.pzaLocalData.data.recruitTaskState[3]&&(u.pzaLocalData.data.recruitTaskState[3]=1,t=!0),e=!0,o=2):a.length>=1&&2!=u.pzaLocalData.data.recruitTaskState[2]&&(u.pzaLocalData.data.recruitTaskState[2]=1,t=!0);for(var r=0,p=0;p<a.length;p++)a[p].star&&a[p].star>=45&&r++;if(r>=18?(2!=u.pzaLocalData.data.recruitTaskState[11]&&(u.pzaLocalData.data.recruitTaskState[11]=1,t=!0),n=!0,i=10):r>=12?(2!=u.pzaLocalData.data.recruitTaskState[10]&&(u.pzaLocalData.data.recruitTaskState[10]=1,t=!0),n=!0,i=9):r>=9?(2!=u.pzaLocalData.data.recruitTaskState[9]&&(u.pzaLocalData.data.recruitTaskState[9]=1,t=!0),n=!0,i=8):r>=6?(2!=u.pzaLocalData.data.recruitTaskState[8]&&(u.pzaLocalData.data.recruitTaskState[8]=1,t=!0),n=!0,i=7):r>=3&&2!=u.pzaLocalData.data.recruitTaskState[7]&&(u.pzaLocalData.data.recruitTaskState[7]=1,t=!0),e)for(p=2;p<=o;p++)2!=u.pzaLocalData.data.recruitTaskState[p]&&(u.pzaLocalData.data.recruitTaskState[p]=1,t=!0);if(n)for(p=7;p<=i;p++)2!=u.pzaLocalData.data.recruitTaskState[p]&&(u.pzaLocalData.data.recruitTaskState[p]=1,t=!0);return t},i([f({type:cc.Enum(r),tooltip:"\u7ea2\u70b9\u7c7b\u578b"})],t.prototype,"type",void 0),i([f({displayName:"\u63d0\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"tipNode",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Garden/pzaGardenMgr":"pzaGardenMgr","../Task/pzaTaskMgr":"pzaTaskMgr","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaLocalData":"pzaLocalData","./pzaRecruitTaskConf":"pzaRecruitTaskConf"}],pzaRepeater:[function(a,t,e){"use strict";cc._RF.push(t,"084b5XksgtEvpNLAM4svCKL","pzaRepeater");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRepeater=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t);var o=window.pzazombieManager.hasCanAttackZombie;if(u.pzaGameState.isZombieMode())return this.attacking=!1,this.animation.playAnimation("T_idle",!0),void(this.atkAniTime=this.animation.getAnimationDuration("T_attack"));(u.pzaGameState.isVaseMode()||u.pzaGameState.isCreativeVaseMode())&&(this.node.scaleX=-1,o=window.pzazombieManager.hasCanAttackBackZombie),this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6);var n=function(){o.call(window.pzazombieManager,e.baseData)?e.animation.playAnimation("attack",!1,n,function(){e.shoot(),l.pzaSoundManager.playAudio("PeashooterAtk")}):e.blinkTime>0?e.animation.playAnimation("idle2",!1,n):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle2",!1,n))};n(),u.pzaGameState.usePeaPlant=!0,u.pzaGameState.onlyShroomCofee=!1,u.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData)return this.blinkTime-=t,!this.attacking&&u.pzaGameState.isZombieMode()&&window.pzazombieManager.hasCanAttackZombie(this.baseData)?(this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot(),l.pzaSoundManager.playAudio("PeashooterAtk")},this.atkAniTime/1.4)):void 0},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){var e=!u.pzaGameState.isVaseMode();u.pzaGameState.isCreativeVaseMode()&&(e=!u.pzaGameState.isCreativeVaseMode()),t.setParent(a);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=a.convertToNodeSpaceAR(o);t.setPosition(n);var i=t.getComponent(c.pzaBaseBullet);if(null!=i){i.init(this.baseData.yIndex,this.baseData.atk,1,null,e?cc.v2(1,0):cc.v2(-1,0));var l=u.pzaGameState.map.getMapSkewColumn();l>0&&this.baseData.xIndex<=l-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},i([f({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaRepeater=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaResMgr:[function(a,t,e){"use strict";cc._RF.push(t,"bfe23rKP+xApq5lrOWvYJyF","pzaResMgr"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaResMgr=void 0;var o=a("../../start/pzaBundleController"),n=a("./pzaChannel"),i=a("./pzakc"),r=function(){function a(){this.cId=n.pzaChannel.verMap[n.pzaChannel.remoteVerKey].id,this.confCache=new Map}return a.instance=function(){return a._me||(a._me=new a),a._me},a.prototype.getConf=function(a){return this.confCache.get(a)},a.prototype.readDC=function(a){var t=JSON.parse(a);for(var e in t)this.confCache.set(e,t[e][e]);i.default.log("conf loaded:",this.confCache.size),i.default.log("ccv:"+this.getConf("a1")[0].ver,n.pzaChannel.remoteVerKey)},a.prototype.loadConf=function(a){var t=this;cc.resources.load("conf/conf",function(e,o){e?console.error(e):cc.assetManager.loadAny({url:o.nativeUrl,type:"binary"},function(e,o){if(e)i.default.err(e);else{var r=fflate.unzipSync(new Uint8Array(o),{filter:function(a){return"conf.txt"===a.name}}),p=fflate.strFromU8(r["conf.txt"]);t.readDC(p),n.pzaChannel.isConfRemote?i.default.jget("https://ga.gamejym.com/fcm199/zip/"+t.cId+".bin",function(e,o){if(e)a(e);else{var n=fflate.unzipSync(new Uint8Array(o),{filter:function(a){return"conf.txt"===a.name}}),i=fflate.strFromU8(n["conf.txt"]);t.readDC(i),a(null)}}):a(null)}})})},a.prototype.getSpineSync=function(a,t){var e=o.pzaBundleController.getBundle(o.pzaBundleType.Spine);if(!e)return t(new Error("\u65e0spineBundle"),null);e.load(a,sp.SkeletonData,function(a,e){a?t(a,null):t(null,e)})},a._me=null,a}();e.pzaResMgr=r,cc._RF.pop()},{"../../start/pzaBundleController":"pzaBundleController","./pzaChannel":"pzaChannel","./pzakc":"pzakc"}],pzaReviveView:[function(a,t,e){"use strict";cc._RF.push(t,"7b1d0A87u9CfKLGpAwdUwi5","pzaReviveView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaReviveView=void 0;var r=a("../../Battle/Plant/pzaAttackType"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaGameVaseEndless"),u=a("../../Common/pzaLocalData"),d=a("../../Common/pzaSoundManager"),h=a("../../Common/pzaStatisticsMgr"),m=a("../../Common/pzaWorldEventManager"),f=a("../../utils/pzaChannel"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tip=null,t.videoNode=null,t.shareNode=null,t.btnState=!1,t.confirmCall=null,t.cancelCall=null,t.giveSun=!0,t}return n(t,a),t.prototype.init=function(a,t){this.confirmCall=a,this.cancelCall=t,p.pzaGameState.isZombieMode()?this.tip.string="\u6ca1\u6709\u9633\u5149\u53ec\u5524\u50f5\u5c38\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u83b7\u5f97500\u9633\u5149":p.pzaGameState.gameMode===p.pzaGameMode.VASE_ENDLESS?this.tip.string="\u50f5\u5c38\u8d70\u8fdb\u623f\u5b50\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u4fdd\u7559\u8bb0\u5f55\u4ece\u5f53\u524d\u5173\u5361\u91cd\u65b0\u5f00\u59cb\u3002":p.pzaGameState.isMiniMode()?(this.tip.string="\u50f5\u5c38\u8d70\u8fdb\u623f\u5b50\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u6e05\u7406\u6240\u6709\u50f5\u5c38",this.giveSun=!1):(this.giveSun=p.pzaGameState.isSurvival()||5!=p.pzaGameState.curPart&&10!=p.pzaGameState.curPart,this.tip.string=this.giveSun?"\u50f5\u5c38\u8d70\u8fdb\u623f\u5b50\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u6e05\u7406\u6240\u6709\u50f5\u5c38\uff0c\u5e76\u8d60\u9001500\u9633\u5149":"\u50f5\u5c38\u8d70\u8fdb\u623f\u5b50\u4f60\u5c31\u8981\u8f93\u4e86\uff0c\u770b\u4e00\u6b21\u5e7f\u544a\u53ef\u4ee5\u7acb\u5373\u6e05\u7406\u6240\u6709\u50f5\u5c38"),this.btnState=p.pzaGameState.reviveViewBtnState%2==1,"wx"!=f.pzaChannel.instance().channel&&(this.btnState=!1),this.shareNode.active=this.btnState,this.videoNode.active=!this.btnState,h.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"12"},{name:"adname",value:"\u5173\u5361\u590d\u6d3b"}),d.pzaSoundManager.stopLoopAudio(),d.pzaSoundManager.stopLongAudio()},t.prototype.clickRevive=function(){var a=this,t=function(){a.close(),a.confirmCall&&a.confirmCall();var t=s.pzaGameManager.getCurrentGame();p.pzaGameState.gamePause=!1,p.pzaGameState.hadRevived=!0,m.pzaWorldEventManager.triggerEvent(m.pzaWorldEventType.GAME_RESUME,null),p.pzaGameState.reviveViewBtnState++,p.pzaGameState.isZombieMode()?window.pzaplantManager.adCreateSun():p.pzaGameState.gameMode===p.pzaGameMode.VASE_ENDLESS?s.pzaGameManager.getGame(p.pzaGameMode.VASE_ENDLESS,c.pzaGameVaseEndless).doNextPart():(window.pzazombieManager.zombieMap.forEach(function(a,t){null!=a&&null!=t&&null!=t.logicPos&&null!=a.baseData&&a.baseData.logicPos.x<-157&&a.hurt(1e6,null,r.pzaAttackType.DEATH)}),t.createAdBomb(),a.giveSun&&window.pzaplantManager.adCreateSun())};this.videoNode.active&&f.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){},posName:"\u5173\u5361\u590d\u6d3b",adsid:"12"}),this.shareNode.active&&f.pzaChannel.instance().shareAppMessage({title:null,act:null,adsid:"12"},function(){t()})},t.prototype.clickClose=function(){this.close(),this.cancelCall&&this.cancelCall(),d.pzaSoundManager.resumeLoopAudio(),d.pzaSoundManager.resumeLongAudio()},t.prototype.close=function(){u.pzaLocalData.isPopReviveView=!1,l.pzaGameCommonPool.returnInstant(this.node)},i([g({displayName:"\u63d0\u793a\u8bed",type:cc.Label})],t.prototype,"tip",void 0),i([g({displayName:"\u89c6\u9891\u6807\u8bc6\u8282\u70b9",type:cc.Node})],t.prototype,"videoNode",void 0),i([g({displayName:"\u5206\u4eab\u6807\u8bc6\u8282\u70b9",type:cc.Node})],t.prototype,"shareNode",void 0),i([y],t)}(cc.Component);e.pzaReviveView=v,cc._RF.pop()},{"../../Battle/Plant/pzaAttackType":"pzaAttackType","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameVaseEndless":"pzaGameVaseEndless","../../Common/pzaLocalData":"pzaLocalData","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzaChannel":"pzaChannel"}],pzaRewardItem:[function(a,t,e){"use strict";cc._RF.push(t,"88504bcAuVIU6o/+NgxpLtt","pzaRewardItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRewardItem=void 0;var r=a("../Battle/Data/pzaPlantEnum"),p=a("../Common/pzaGameConfig"),l=a("../Common/pzaGamePropConfig"),s=a("../Common/pzaSpineController"),c=a("../Common/pzaSpriteFrameManager"),u=a("../Load/pzaBundleObjectPool"),d=a("../Shop/pzaShopConfig"),h=a("../utils/pzakc"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.proIcon=null,t.propAni=null,t.plantCardNode=null,t.plantIcon=null,t.propName=null,t.shopItemIcon=null,t.swIcon=null,t.coin_path="Texture/BattleUI/coin_icon",t.taken_coin_path="Texture/MainView/RecruitView/recruitImg6",t}return n(t,a),t.prototype.init=function(a){var t=this;if(this.swIcon.active=!1,null!=a){var e=a.propType,o=a.propCount;switch(this.shopItemIcon.node.active=!1,e){case l.pzaGamePropEnum.PROP_COIN:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u91d1\u5e01X"+o,u.pzaBundleObjectPool.requestSpriteFrameByUrl(this.coin_path,function(a,e){null==a?e?t.proIcon.spriteFrame=e:h.default.err("\u65e0tool\u56fe"):console.error(a)});break;case l.pzaGamePropEnum.PROP_CHERRY_BOMB:case l.pzaGamePropEnum.PROP_AUTO_PICK:case l.pzaGamePropEnum.PROP_FREE_SUN:this.proIcon.node.active=!1,this.propAni.node.active=!0,this.plantCardNode.active=!1,e==l.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAni.playAnimation("3ui_1",!0):e==l.pzaGamePropEnum.PROP_AUTO_PICK?this.propAni.playAnimation("2ui_1",!0):e==l.pzaGamePropEnum.PROP_FREE_SUN&&this.propAni.playAnimation("1ui_1",!0);var n=l.pzaGamePropConfig.PorpConfigMap.get(e);null!=n&&(this.propName.string=n.propName+"X"+o);break;case l.pzaGamePropEnum.PROP_PLANTE:this.proIcon.node.active=!1,this.propAni.node.active=!1,this.plantCardNode.active=!0;var i;null!=(i=42==o?p.pzaGameConfig.getPlantConfig(r.pzaPlantEnum.TWIN_SUNFLOWER):p.pzaGameConfig.getPlantConfig(o))&&(this.propName.string=i.name+"X1",c.pzaSpriteFrameManager.loadPlantCard(o,this.plantIcon)),1==a.limitGet&&(this.propName.string="\u514d\u8d39\u8bd5\u7528\u4e00\u5929",this.swIcon.active=!0);break;case l.pzaGamePropEnum.PROP_FERTILIZER:this.proIcon.node.active=!1,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.shopItemIcon.node.active=!0,this.propName.string="\u80a5\u6599X"+o,c.pzaSpriteFrameManager.loadShopItemIcon(d.pzaShopItemType.FERTILIZER,this.shopItemIcon);break;case l.pzaGamePropEnum.PROP_PESTICIDE:this.proIcon.node.active=!1,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.shopItemIcon.node.active=!0,this.propName.string="\u6740\u866b\u5242X"+o,c.pzaSpriteFrameManager.loadShopItemIcon(d.pzaShopItemType.PESTICIDE,this.shopItemIcon);break;case l.pzaGamePropEnum.PROP_TOKEN_COIN:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u4ee3\u5e01X"+o,u.pzaBundleObjectPool.requestSpriteFrameByUrl(this.taken_coin_path,function(a,e){null==a?e?t.proIcon.spriteFrame=e:h.default.err("\u65e0tool\u56fe"):console.error(a)});break;case l.pzaGamePropEnum.PROP_CHOCOLATES:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u5de7\u514b\u529bX"+o,u.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/GardenView/chocolate",function(a,e){null==a?e?t.proIcon.spriteFrame=e:h.default.err("\u65e0tool\u56fe"):console.error(a)});break;case l.pzaGamePropEnum.PROP_GOLD_FLOWER:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u9ec4\u91d1\u82b1\u82d7X1",c.pzaSpriteFrameManager.loadGoldPlant(33,this.proIcon);break;case l.pzaGamePropEnum.PROP_SECRET_FLOWER:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u795e\u79d8\u82b1\u82d7X"+o,c.pzaSpriteFrameManager.loadGoldPlant(30,this.proIcon);break;case l.pzaGamePropEnum.PROP_BRONZE_FLOWE:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u9752\u94dc\u82b1\u82d7X"+o,c.pzaSpriteFrameManager.loadGoldPlant(31,this.proIcon);break;case l.pzaGamePropEnum.PROP_SILVER_FLOWE:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u767d\u94f6\u82b1\u82d7X"+o,c.pzaSpriteFrameManager.loadGoldPlant(32,this.proIcon);break;case l.pzaGamePropEnum.PROP_ACHIEVE:this.proIcon.node.active=!0,this.propAni.node.active=!1,this.plantCardNode.active=!1,this.propName.string="\u9650\u65f6\u6210\u5c31\u201c\u738b\u724c\u5192\u9669\u5bb6\u201d",u.pzaBundleObjectPool.requestSpriteFrameByUrl("Texture/MainView/Merger/tasksView/icon_59",function(a,e){null==a?e?t.proIcon.spriteFrame=e:h.default.err("\u65e0tool\u56fe"):console.error(a)})}}},i([z({displayName:"\u9053\u5177\u56fe\u6807",type:cc.Sprite})],t.prototype,"proIcon",void 0),i([z({displayName:"\u9053\u5177\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"propAni",void 0),i([z({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"plantCardNode",void 0),i([z({displayName:"\u690d\u7269\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"plantIcon",void 0),i([z({displayName:"\u9053\u5177\u540d\u79f0",type:cc.Label})],t.prototype,"propName",void 0),i([z({displayName:"\u5546\u5e97\u7269\u54c1",type:cc.Sprite})],t.prototype,"shopItemIcon",void 0),i([z({displayName:"\u8bd5\u73a9\u8282\u70b9",type:cc.Node})],t.prototype,"swIcon",void 0),i([f],t)}(cc.Component);e.pzaRewardItem=y,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Shop/pzaShopConfig":"pzaShopConfig","../utils/pzakc":"pzakc"}],pzaRewardManager:[function(a,t,e){"use strict";cc._RF.push(t,"e44bdHqe5ZLuqradI8T/8b2","pzaRewardManager"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRewardManager=void 0;var o=a("../Achieve/pzaAchieveMgr"),n=a("../Battle/Data/pzaPlantEnum"),i=a("../Garden/pzaGardenMgr"),r=a("../Load/pzaPreLoadManager"),p=a("../Shop/pzaShopConfig"),l=a("../View/pzaCommonRewardView"),s=a("./pzaGamePropConfig"),c=a("./pzaLocalData"),u=a("./pzaUIManager"),d=function(){function a(){}return a.recieveRewards=function(a,t,e,o){void 0===t&&(t=null),void 0===e&&(e=!1),void 0===o&&(o=null),null!=a&&(!e&&this.recieveRewardData(a),u.pzaUIManager.baseShowPopUI(r.pzaResourceUrl.COMMON_REWARD_VIEW,function(e){var n=e&&e.getComponent(l.pzaCommonRewardView);n&&n.bindData(a,t),o&&n&&n.setTip(o)}))},a.recieveRewardData=function(a){null!=a&&a.forEach(function(a){if(null!=a)if(a.propType==s.pzaGamePropEnum.PROP_PLANTE)if(c.pzaLocalData.data.ownPlants.includes(a.propCount))if(a.propCount==n.pzaPlantEnum.SUPER_CHOMPER)if(1==a.limitGet)if(c.pzaLocalData.data.superChomperTrial>=9e4){var t=p.pzaShopConfig.getPlantPrice(a.propCount);a.propType=s.pzaGamePropEnum.PROP_COIN,a.propCount=t,c.pzaLocalData.obtainProp(a.propType,a.propCount)}else c.pzaLocalData.data.superChomperTrial+=1,c.pzaLocalData.addDirty("superChomperTrial");else 0==a.limitGet&&(c.pzaLocalData.data.superChomperTrial=99999,c.pzaLocalData.addDirty("superChomperTrial"));else t=p.pzaShopConfig.getPlantPrice(a.propCount),a.propType=s.pzaGamePropEnum.PROP_COIN,a.propCount=t,c.pzaLocalData.obtainProp(a.propType,a.propCount);else a.propCount==n.pzaPlantEnum.SUPER_CHOMPER&&(1==a.limitGet?(c.pzaLocalData.data.superChomperTrial+=1,c.pzaLocalData.addDirty("superChomperTrial")):0==a.limitGet&&(c.pzaLocalData.data.superChomperTrial=99999,c.pzaLocalData.addDirty("superChomperTrial"))),c.pzaLocalData.data.ownPlants.push(a.propCount),c.pzaLocalData.addDirty("ownPlants"),o.default.instance().obtainPlant();else if(a.propType==s.pzaGamePropEnum.PROP_FERTILIZER)console.log("\u6dfb\u52a0\u80a5\u6599:",a.propCount),i.default.instance().addGardenTool(i.pzaGardenToolType.manure,a.propCount);else if(a.propType==s.pzaGamePropEnum.PROP_PESTICIDE)console.log("\u6dfb\u52a0\u6740\u866b\u5242: ",a.propCount),i.default.instance().addGardenTool(i.pzaGardenToolType.pesticide,a.propCount);else if(a.propType==s.pzaGamePropEnum.PROP_CHOCOLATES)console.log("\u6dfb\u52a0\u5de7\u514b\u529b: ",a.propCount),i.default.instance().addGardenTool(i.pzaGardenToolType.chocolate,a.propCount);else if(a.propType==s.pzaGamePropEnum.PROP_GOLD_FLOWER){for(var e=0;e<a.propCount;e++){var r=i.default.instance().randomGardenPlant(1);c.pzaLocalData.data.dropPlantArr.push(r)}c.pzaLocalData.addDirty("dropPlantArr")}else if(a.propType==s.pzaGamePropEnum.PROP_SECRET_FLOWER||a.propType==s.pzaGamePropEnum.PROP_BRONZE_FLOWE||a.propType==s.pzaGamePropEnum.PROP_SILVER_FLOWE){var l=0;for(a.propType==s.pzaGamePropEnum.PROP_SECRET_FLOWER?l=0:a.propType==s.pzaGamePropEnum.PROP_BRONZE_FLOWE?l=.25:a.propType==s.pzaGamePropEnum.PROP_SILVER_FLOWE&&(l=.5),e=0;e<a.propCount;e++)r=i.default.instance().randomGardenPlant(l),c.pzaLocalData.data.dropPlantArr.push(r);c.pzaLocalData.addDirty("dropPlantArr")}else c.pzaLocalData.obtainProp(a.propType,a.propCount)})},a}();e.pzaRewardManager=d,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../View/pzaCommonRewardView":"pzaCommonRewardView","./pzaGamePropConfig":"pzaGamePropConfig","./pzaLocalData":"pzaLocalData","./pzaUIManager":"pzaUIManager"}],pzaRicochetBulletEffect:[function(a,t,e){"use strict";cc._RF.push(t,"f80fbJLm4FPkbsC+16mztX5","pzaRicochetBulletEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRicochetBulletEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletNode=null,t.poolPrefab=null,t}return n(t,a),t.prototype.init=function(){var a=this;this.bulletNode.stopAllActions(),this.bulletNode.setPosition(cc.v2()),this.bulletNode.runAction(cc.sequence(cc.jumpTo(.7,cc.v2(-(100*Math.random()+80),0),50*Math.random()+70,1),cc.callFunc(function(){a.close()})))},t.prototype.pauseSelf=function(){this.bulletNode.pauseAllActions()},t.prototype.resumeSelf=function(){this.bulletNode.resumeAllActions()},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([c({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"bulletNode",void 0),i([c(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaRicochetBulletEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaRoofPreEffect:[function(a,t,e){"use strict";cc._RF.push(t,"cc08fOhbu9MfoyNMOPOI8P3","pzaRoofPreEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRoofPreEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tree=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.tree.stopAllActions(),this.tree.setPosition(cc.v2(796,-17))},t.prototype.showTree=function(){this.tree.stopAllActions(),this.tree.setPosition(cc.v2(-1200,-17)),this.tree.runAction(cc.moveTo(1.5,cc.v2(796,-17)).easing(cc.easeCubicActionOut()))},t.prototype.hideTree=function(){this.tree.stopAllActions(),this.tree.setPosition(cc.v2(796,-17)),this.tree.runAction(cc.moveTo(1.5,cc.v2(-1200,-17)).easing(cc.easeCubicActionOut()))},i([s({displayName:"\u6811",type:cc.Node})],t.prototype,"tree",void 0),i([l],t)}(r.pzaBaseComponent);e.pzaRoofPreEffect=c,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent"}],pzaRotateBullet:[function(a,t,e){"use strict";cc._RF.push(t,"85830j47eFFJb5jMljzmpXE","pzaRotateBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaRotateBullet=void 0;var r=a("./pzaBaseBullet"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.rotateSpeed=0,t}return n(t,a),t.prototype.updateMove=function(t){a.prototype.updateMove.call(this,t),this.rotateSpeed>0&&(this.node.angle-=this.rotateSpeed*t)},i([s({displayName:"\u5b50\u5f39\u65cb\u8f6c\u901f\u5ea6"})],t.prototype,"rotateSpeed",void 0),i([l],t)}(r.pzaBaseBullet);e.pzaRotateBullet=c,cc._RF.pop()},{"./pzaBaseBullet":"pzaBaseBullet"}],pzaSaveView:[function(a,t,e){"use strict";cc._RF.push(t,"cacb6kS7VhEgZEyI4PwrDDj","pzaSaveView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSaveView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaUIManager"),c=a("../Common/pzaUtil"),u=a("../Load/pzaPreLoadManager"),d=a("../utils/pzaChannel"),h=a("../utils/pzakc"),m=a("./pzaCommonMask"),f=a("./pzaWarningView"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.remoteTime=null,t.remotePart=null,t.remoteCoin=null,t.localTime=null,t.localPart=null,t.localCoin=null,t.deleteBtn=null,t.unlockChapter=null,t.saveBtn=null,t.remoteReadBtn=null,t.localReadBtn=null,t.remoteAd=null,t.saveAd=null,t.remoteTimeNode=null,t.remoteProNode=null,t.refreshOrReadLab=null,t.errTip=null,t.remoteData=null,t.canRefresh=!1,t}return n(t,a),t.prototype.init=function(a){this.canRefresh=!1,this.remoteData=null,this.remoteData=a,this.localTime.string=c.pzaUtil.formatDateTime(p.pzaLocalData.data.saveTime),this.localPart.string="\u4e00\u5468\u76ee "+p.pzaLocalData.data.curChapter+"-"+p.pzaLocalData.data.curPart,this.localCoin.string=c.pzaUtil.getCurrencyStr(p.pzaLocalData.data.coin),null==a?(this.remoteTime.string="\u65e0",this.remotePart.string="",this.remoteCoin.string=""):(this.remoteTime.string=c.pzaUtil.formatDateTime(a.saveTime),this.remotePart.string="\u4e00\u5468\u76ee "+a.curChapter+"-"+a.curPart,this.remoteCoin.string=c.pzaUtil.getCurrencyStr(a.coin)),this.remoteTimeNode.active=!0,this.remoteProNode.active=!0,this.saveAd.active=!1,this.remoteAd.active=!1,this.deleteBtn.active=!1,this.localReadBtn.active=!1,this.remoteReadBtn.active=!0,this.saveBtn.active=!0,this.deleteBtn.active=p.pzaLocalData.testMode,p.pzaLocalData.data.readGameDataCnt>0&&(this.remoteAd.active=!0),this.errTip.node.active=!1,this.refreshOrReadLab.string="\u8bfb\u53d6","noAD"!=d.pzaChannel.instance().channel||d.pzaChannel.isConfRemote||(this.saveBtn.active=!1,this.remoteReadBtn.active=!1,this.unlockChapter.active=!0)},t.prototype.gameInit=function(a){this.canRefresh=!0,this.remoteData=null,this.remoteAd.active=!1,this.deleteBtn.active=!1,this.saveBtn.active=!1,this.remoteReadBtn.active=!0,this.localReadBtn.active=!0,this.remoteData=a,this.localTime.string=c.pzaUtil.formatDateTime(p.pzaLocalData.data.saveTime),this.localPart.string="\u4e00\u5468\u76ee "+p.pzaLocalData.data.curChapter+"-"+p.pzaLocalData.data.curPart,this.localCoin.string=c.pzaUtil.getCurrencyStr(p.pzaLocalData.data.coin),this.remoteTimeNode.active=!1,this.remoteProNode.active=!1,this.refreshOrReadLab.string="\u5237\u65b0",this.errTip.node.active=!0},t.prototype.clickReadLocal=function(){var a=this;s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(f.pzaWarningView);e&&e.show("\u8bfb\u53d6\u672c\u5730\u5b58\u6863\u4f1a\u8986\u76d6\u4e91\u7aef\u5b58\u6863,\u5efa\u8bae\u8c28\u614e\u64cd\u4f5c","\u8bfb\u53d6","\u53d6\u6d88",function(){h.default.sendMsg("readGameData");var t=d.pzaChannel.instance().getChannel();d.pzaChannel.saveToRemote(t.channelUserId,p.pzaLocalData.data,!0),a.close()},null,"")})},t.prototype.clickReadRemote=function(){var a=this;if(this.canRefresh){m.pzaCommonMask.showMask();var t=d.pzaChannel.instance().getChannel();d.pzaChannel.loadFromRemote(t.channelUserId,function(t,e){t?m.pzaCommonMask.hideMask():(m.pzaCommonMask.hideMask(),a.init(e))})}else{var e=!!this.remoteAd.active;s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(t){var o=t&&t.getComponent(f.pzaWarningView);o&&o.show("\u8bfb\u53d6\u4e91\u7aef\u5b58\u6863\u4f1a\u8986\u76d6\u672c\u5730\u5b58\u6863,\u5efa\u8bae\u8c28\u614e\u64cd\u4f5c","\u8bfb\u53d6","\u53d6\u6d88",function(){var t=function(){p.pzaLocalData.parseFromData(a.remoteData),p.pzaLocalData.localSaveData(),h.default.sendMsg("readGameData"),p.pzaLocalData.data.readGameDataCnt=1,p.pzaLocalData.addDirty("readGameDataCnt"),a.close()};e?d.pzaChannel.instance().showVideo({sucCall:t,failCall:function(){},endCall:function(){}}):t()},null,"\u8b66\u544a",e)})}},t.prototype.clickSave=function(){var a=this;l.pzaSoundManager.playSFX(),this.saveAd.active,s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(f.pzaWarningView);e&&e.show("\u4fdd\u5b58\u672c\u5730\u5b58\u6863\u4f1a\u8986\u76d6\u4e91\u7aef\u5b58\u6863,\u5efa\u8bae\u8c28\u614e\u64cd\u4f5c","\u4fdd\u5b58","\u53d6\u6d88",function(){(function(){p.pzaLocalData.data.saveGameDataCnt=1,p.pzaLocalData.addDirty("saveGameDataCnt");var t=d.pzaChannel.instance().getChannel();d.pzaChannel.saveToRemote(t.channelUserId,p.pzaLocalData.data,!0),a.close()})()},null,"\u8b66\u544a",!1)})},t.prototype.clickUnlockChapter=function(){l.pzaSoundManager.playSFX(),p.pzaLocalData.unlockChapter(),h.default.sendMsg("readGameData"),this.close()},t.prototype.clickClose=function(){var a=this;l.pzaSoundManager.playSFX(),this.canRefresh?s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.WARNING_VIEW,function(t){var e=t&&t.getComponent(f.pzaWarningView);e&&e.show("\u786e\u5b9a\u4ee5\u672c\u5730\u5b58\u6863\u8fdb\u5165\u6e38\u620f","\u786e\u8ba4","\u53d6\u6d88",function(){a.close()},null,"\u8b66\u544a")}):this.close()},t.prototype.clickDelete=function(){l.pzaSoundManager.playSFX();var a=new p.pzaLocalData,t=d.pzaChannel.instance().getChannel();d.pzaChannel.saveToRemote(t.channelUserId,a),this.close()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([g({displayName:"\u4e91\u7aef\u8fdb\u5ea6\u65f6\u95f4",type:cc.Label})],t.prototype,"remoteTime",void 0),i([g({displayName:"\u4e91\u7aef\u5173\u5361\u8fdb\u5ea6",type:cc.Label})],t.prototype,"remotePart",void 0),i([g({displayName:"\u4e91\u7aef\u91d1\u5e01",type:cc.Label})],t.prototype,"remoteCoin",void 0),i([g({displayName:"\u672c\u5730\u8fdb\u5ea6\u65f6\u95f4",type:cc.Label})],t.prototype,"localTime",void 0),i([g({displayName:"\u672c\u5730\u5173\u5361\u8fdb\u5ea6",type:cc.Label})],t.prototype,"localPart",void 0),i([g({displayName:"\u672c\u5730\u91d1\u5e01",type:cc.Label})],t.prototype,"localCoin",void 0),i([g({displayName:"\u6e05\u6570\u636e\u6309\u94ae",type:cc.Node})],t.prototype,"deleteBtn",void 0),i([g({displayName:"\u5f00\u653e\u5173\u5361",type:cc.Node})],t.prototype,"unlockChapter",void 0),i([g({displayName:"\u4fdd\u5b58\u6309\u94ae",type:cc.Node})],t.prototype,"saveBtn",void 0),i([g({displayName:"\u8fdc\u7a0b\u8bfb\u53d6",type:cc.Node})],t.prototype,"remoteReadBtn",void 0),i([g({displayName:"\u672c\u5730\u8bfb\u53d6",type:cc.Node})],t.prototype,"localReadBtn",void 0),i([g({displayName:"\u8fdc\u7a0b\u8bfb\u53d6\u89c6\u9891\u6807\u8bc6",type:cc.Node})],t.prototype,"remoteAd",void 0),i([g({displayName:"\u4fdd\u5b58\u89c6\u9891\u6807\u8bc6",type:cc.Node})],t.prototype,"saveAd",void 0),i([g({displayName:"\u8fdc\u7aef\u65f6\u95f4\u8282\u70b9",type:cc.Node})],t.prototype,"remoteTimeNode",void 0),i([g({displayName:"\u8fdc\u7aef\u8fdb\u5ea6\u8282\u70b9",type:cc.Node})],t.prototype,"remoteProNode",void 0),i([g({displayName:"\u5237\u65b0\u6216\u8005\u8bfb\u53d6",type:cc.Label})],t.prototype,"refreshOrReadLab",void 0),i([g({displayName:"\u8bfb\u53d6\u4e91\u7aef\u5931\u8d25\u63d0\u793a",type:cc.Label})],t.prototype,"errTip",void 0),i([y],t)}(cc.Component);e.pzaSaveView=v,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaCommonMask":"pzaCommonMask","./pzaWarningView":"pzaWarningView"}],pzaScaredyShroom:[function(a,t,e){"use strict";cc._RF.push(t,"5b53daDLMZBKa9zrcCsOB5E","pzaScaredyShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaScaredyShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpineController"),c=a("../../Common/pzaUtil"),u=a("../Bullet/pzaBaseBullet"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.hiding=!1,t.attacking=!1,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.hiding=!1,d.pzaGameState.isZombieMode())return this.attacking=!1,this.sleepAni.node.active=!1,void this.animation.playAnimation("T_idle",!0);t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()),d.pzaGameState.useShroom=!0,d.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData&&!this.baseData.plantData.sleeping&&(this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode())){var o=window.pzazombieManager.findZombiesByXY(this.baseData.xIndex,this.baseData.yIndex);if(null!=o&&o.length>0)return void(this.hiding||(this.attacking=!0,this.animation.playAnimation("T_scared1",!1,function(){e.hiding=!0,e.attacking=!1,e.animation.playAnimation("T_scared_idle",!0)})));if(this.hiding)return this.attacking=!0,void this.animation.playAnimation("T_scared2",!1,function(){e.hiding=!1,e.attacking=!1,e.animation.playAnimation("T_idle",!0)});if(window.pzazombieManager.hasCanAttackZombie(this.baseData))return l.pzaSoundManager.playAudio("ScaredyShroomAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot()})}},t.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.sleepAni.node.active=!1,this.baseData.plantData.sleeping=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=window.pzazombieManager.findFixRangeZombies(a.baseData.logicPos,1.5*d.pzaGameState.map.getBlockWidth());if(!(null!=e&&e.length>0))return a.hiding?(a.hiding=!1,void a.animation.playAnimation("scared2",!1,t)):window.pzazombieManager.hasCanAttackZombie(a.baseData)?(l.pzaSoundManager.playAudio("ScaredyShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){a.shoot()})):void(a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t)));a.hiding?a.animation.playAnimation("scared_idle",!1,t):(a.hiding=!0,a.animation.playAnimation("scared1",!1,t))};t()},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(u.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0));var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([z({displayName:"\u7761\u89c9\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"sleepAni",void 0),i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaScaredyShroom=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaScreenDoorZombie2:[function(a,t,e){"use strict";cc._RF.push(t,"3a9979RtSpAr49cg+vRqu1X","pzaScreenDoorZombie2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaScreenDoorZombie2=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaZombieEnum"),l=a("../Plant/pzaAttackType"),s=a("./pzaScreenDoorZombie"),c=a("./pzaZombieSlot"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip2Slot=c.pzaZombieSlotType.hat,t.hatSlotMap=new Map([[p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2,{slotName:c.pzaZombieSlotType.hat,attNameArr:[c.pzaZombieSlotType.hat+"1",c.pzaZombieSlotType.hat+"2",c.pzaZombieSlotType.hat+"3"],arr1:[81.31,2.96,-93.13],arr2:[61.68,-20.07,-93.13],arr3:[60.85,-19.15,-93.13]}],[p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3,{slotName:c.pzaZombieSlotType.hat,attNameArr:[c.pzaZombieSlotType.hat_iron+"1",c.pzaZombieSlotType.hat_iron+"2",c.pzaZombieSlotType.hat_iron+"3"],arr1:[-7,45.25,-93.13],arr2:[-4.97,44.2,-93.13],arr3:[-5.46,30.63,-93.13]}]]),t.headSlotMap=new Map([[p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE4,{slotName:c.pzaZombieSlotType.head_nut,attNameArr:[c.pzaZombieSlotType.head_nut+"1",c.pzaZombieSlotType.head_nut+"2",c.pzaZombieSlotType.head_nut+"3"],arr1:[262.41,-1.5,-90.45],arr2:[258.29,-1.21,-90.45],arr3:[244.29,-2.07,-90.45]}],[p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE5,{slotName:c.pzaZombieSlotType.head_nut,attNameArr:[c.pzaZombieSlotType.head_nut_hole+"1",c.pzaZombieSlotType.head_nut_hole+"2",c.pzaZombieSlotType.head_nut_hole+"3"],arr1:[262.46,-2.37,-90.45],arr2:[262.46,-2.37,-90.45],arr3:[262.46,-2.37,-90.45]}]]),t.directThrowHurt=!0,t}return n(t,a),t.prototype.initEquips=function(){if(this.baseData&&this.baseData.zombieData){var a=this.hatSlotMap.get(this.baseData.zombieData.zombieType);a?this.equip2Slot=c.pzaZombieSlotType.hat:(a=this.headSlotMap.get(this.baseData.zombieData.zombieType),this.equip2Slot=c.pzaZombieSlotType.head_nut),this.slotMap=new Map([[c.pzaZombieSlotType.butter,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.butter).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[c.pzaZombieSlotType.door,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.door).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.door+"1",22.63,-62.52)).addState(new c.pzaZombieSlotAtt(2,c.pzaZombieSlotType.door+"2",7.87,-62.52)).addState(new c.pzaZombieSlotAtt(3,c.pzaZombieSlotType.door+"3",9.26,-57.6))]]),this.slotMap.set(a.slotName,new c.pzaZombieSlot(this.animation.spineAnimation,a.slotName).addState(new c.pzaZombieSlotAtt(1,a.attNameArr[0],a.arr1[0],a.arr1[1],a.arr1[2])).addState(new c.pzaZombieSlotAtt(2,a.attNameArr[1],a.arr2[0],a.arr2[1],a.arr2[2])).addState(new c.pzaZombieSlotAtt(3,a.attNameArr[2],a.arr3[0],a.arr3[1],a.arr3[2])))}},t.prototype.bindData=function(t){this.baseData=t,this.initEquips(),a.prototype.bindData.call(this,t),this.baseData.zombieData.hurtCate=p.pzaZombieHurtCate.Null},t.prototype.randomZombieSkin=function(){this.equip2Slot===c.pzaZombieSlotType.head_nut?(this.curSkinName="6zombie_head1",this.changeSkin(this.curSkinName)):a.prototype.randomZombieSkin.call(this)},t.prototype.handBookPreview=function(t){a.prototype.handBookPreview.call(this,t),this.equipIntact(),this.equipIntact2(),this.playStayAnimation()},t.prototype.zombieHurtSound=function(t){this.hasEquip&&t!=l.pzaAttackType.PENETRATE?r.pzaSoundManager.playAudio("screenHurt"):a.prototype.zombieHurtSound.call(this,t)},i([d],t)}(s.pzaScreenDoorZombie));e.pzaScreenDoorZombie2=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","./pzaScreenDoorZombie":"pzaScreenDoorZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaScreenDoorZombie:[function(a,t,e){"use strict";cc._RF.push(t,"380c7Jm5iRIh58Mj/TsP22t","pzaScreenDoorZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaScreenDoorZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Plant/pzaAttackType"),u=a("./pzaNormalZombie"),d=a("./pzaZombieSlot"),h=a("./pzaZombieState"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="zombie_head1",t.equip1Slot=d.pzaZombieSlotType.door,t.directThrowHurt=!0,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[d.pzaZombieSlotType.butter,new d.pzaZombieSlot(this.animation.spineAnimation,d.pzaZombieSlotType.butter).addState(new d.pzaZombieSlotAtt(1,d.pzaZombieSlotType.butter,61.81,13.02,-93.13))],[d.pzaZombieSlotType.door,new d.pzaZombieSlot(this.animation.spineAnimation,d.pzaZombieSlotType.door).addState(new d.pzaZombieSlotAtt(1,d.pzaZombieSlotType.door+"1",22.63,-62.52)).addState(new d.pzaZombieSlotAtt(2,d.pzaZombieSlotType.door+"2",7.87,-62.52)).addState(new d.pzaZombieSlotAtt(3,d.pzaZombieSlotType.door+"3",9.26,-57.6))]])},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE_PEA,-1)),this.baseData.zombieData.hurtCate=s.pzaZombieHurtCate.PENETRATE_HURT},t.prototype.equipDeath=function(){switch(a.prototype.equipDeath.call(this,!1),this.zombieState){case h.pzaZombieState.STAY:this.playStayAnimation();break;case h.pzaZombieState.MOVE:this.playMoveAnimation();break;case h.pzaZombieState.EAT_ATK:var t=this.findTarget();null==t||t.isDead?this.playMoveAnimation():this.playAttakAnimation()}this.baseData.buffData.removeBuff(l.pzaBuffType.IMM_ICE_PEA)},t.prototype.getStayAniName=function(){var a=p.pzaUtil.getRandomValueFromArray(this.idleAniName);return this.hasEquip||(a+="_1"),a},t.prototype.getMoveAniName=function(){var a=p.pzaUtil.getRandomValueFromArray(this.moveAniName);return this.hasEquip||(a+="_1"),a},t.prototype.getAttackAniName=function(){var a=p.pzaUtil.getRandomValueFromArray(this.attackAniName);return this.hasEquip||(a+="_1"),a},t.prototype.zombieHurtSound=function(t){this.hasEquip&&t!=c.pzaAttackType.PENETRATE?r.pzaSoundManager.playAudio("screenHurt"):a.prototype.zombieHurtSound.call(this,t)},i([f],t)}(u.pzaNormalZombie));e.pzaScreenDoorZombie=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","./pzaNormalZombie":"pzaNormalZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaSeaShroom:[function(a,t,e){"use strict";cc._RF.push(t,"5796ctByRNPe78i2kmko1Pi","pzaSeaShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSeaShroom=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpineController"),c=a("../../Common/pzaUtil"),u=a("../Bullet/pzaBaseBullet"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.sleeping?(this.animation.playAnimation("idle2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni()),d.pzaGameState.useShroom=!0,d.pzaGameState.onlyBoomPlant=!1,d.pzaGameState.usePondPlant=!0},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.baseData.plantData.sleeping=!1,this.sleepAni.node.active=!1,this.animation.playAnimation("awoke",!1,this.playNormalAni.bind(this)))},t.prototype.playNormalAni=function(){var a=this,t=function(){if(window.pzazombieManager.hasCanAttackZombie(a.baseData,3))return l.pzaSoundManager.playAudio("SeaShroomAtk"),void a.animation.playAnimation("attack",!1,t,function(){a.shoot()});a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle1_eye",!1,t))};t()},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(u.pzaBaseBullet);null!=n&&n.init(this.baseData.yIndex,this.baseData.atk,0,null,cc.v2(1,0))}}}},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([z({displayName:"\u7761\u89c9\u52a8\u753b",type:s.pzaSpineController})],t.prototype,"sleepAni",void 0),i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaSeaShroom=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaShadowEffect:[function(a,t,e){"use strict";cc._RF.push(t,"5a5631Pu8pMi7fB/Bp6K4iY","pzaShadowEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShadowEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaGameCommonPool"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shadowSp=null,t.poolPrefab=null,t}return n(t,a),t.prototype.init=function(t,e,o){void 0===e&&(e=cc.v2(0,30)),void 0===o&&(o=1),a.prototype.bindData.call(this,t),this.shadowSp.stopAllActions(),null!=e&&this.shadowSp.setPosition(e),this.shadowSp.scale=o,this.showShadow(),this.updatePos()},t.prototype.update=function(){null!=this.baseData&&(this.baseData.isDead||this.baseData.hp<=0?this.close():this.updatePos())},t.prototype.pauseSelf=function(){this.shadowSp.pauseAllActions()},t.prototype.resumeSelf=function(){this.shadowSp.resumeAllActions()},t.prototype.updatePos=function(){null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.followMove=function(a){a&&this.node&&this.node.setPosition(a)},t.prototype.hideShadow=function(){this.shadowSp.active=!1},t.prototype.showShadow=function(){this.shadowSp&&(this.shadowSp.active=!0)},t.prototype.scaleShadow=function(a,t){this.shadowSp.runAction(cc.scaleTo(a,t))},t.prototype.changeOffset=function(a){void 0===a&&(a=cc.v2(0,30)),null!=a&&this.shadowSp.setPosition(a)},t.prototype.close=function(){this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([c({displayName:"\u5f71\u5b50\u56fe",type:cc.Node})],t.prototype,"shadowSp",void 0),i([c(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaShadowEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGameCommonPool":"pzaGameCommonPool"}],pzaShareGiftConfig:[function(a,t,e){"use strict";cc._RF.push(t,"10176WQUUxB6YSqxxOpgxH0","pzaShareGiftConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShareGiftConfig=void 0;var o=a("./pzaGamePropConfig"),n=function(){function a(a,t,e){this.index=0,this.rewardType=o.pzaGamePropEnum.PROP_CHERRY_BOMB,this.rewardCount=0,this.index=a,this.rewardType=t,this.rewardCount=e}return a.initGiftConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=parseInt(t.iD),n=new a(o,parseInt(t.rewardType),parseInt(t.rewardValue));e.ShareGiftConfigMap.set(o,n)}})},a.act="share_gift",a.ShareGiftConfigMap=new Map,a}();e.pzaShareGiftConfig=n,cc._RF.pop()},{"./pzaGamePropConfig":"pzaGamePropConfig"}],pzaShareGiftJar:[function(a,t,e){"use strict";cc._RF.push(t,"6ad9fmS+35NobPzmEvJo8an","pzaShareGiftJar");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShareGiftJar=void 0;var r=a("../Common/pzaLocalData"),p=a("../Common/pzaSpriteFrameManager"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jar=null,t.jarFrames=[],t.headIcon=null,t.canBang=!1,t.curAvatarUrl=null,t}return n(t,a),t.prototype.init=function(a,t,e){var o=this;this.curAvatarUrl=e,null==e||""==e?null!=t?p.pzaSpriteFrameManager.showDefaultHead(this.headIcon):this.headIcon.spriteFrame=null:(this.headIcon.spriteFrame=null,p.pzaSpriteFrameManager.showPlayerHeadImage(e,function(a,t){o.curAvatarUrl==a&&(o.headIcon.spriteFrame=t)}));var n=null!=r.pzaLocalData.data.shareGiftRecIndex[a];this.jar.spriteFrame=n?this.jarFrames[1]:this.jarFrames[0],this.canBang=!n},t.prototype.bang=function(){this.jar.spriteFrame=this.jarFrames[1],this.canBang=!1},i([c({displayName:"\u7f50\u5b50",type:cc.Sprite})],t.prototype,"jar",void 0),i([c({displayName:"\u7f50\u5b50\u56fe",type:[cc.SpriteFrame]})],t.prototype,"jarFrames",void 0),i([c({displayName:"\u5934\u50cf",type:cc.Sprite})],t.prototype,"headIcon",void 0),i([s],t)}(cc.Component);e.pzaShareGiftJar=u,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaShareGiftView:[function(a,t,e){"use strict";cc._RF.push(t,"63728q69AlKXoxl35G3xnhW","pzaShareGiftView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShareGiftView=void 0;var r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaGamePropConfig"),c=a("../Common/pzaLocalData"),u=a("../Common/pzaRewardManager"),d=a("../Common/pzaShareGiftConfig"),h=a("../Common/pzaStatisticsMgr"),m=a("../Common/pzaSoundManager"),f=a("../Common/pzaUtil"),z=a("../utils/pzaChannel"),y=a("./pzaCommonMask"),g=a("./pzaShareGiftJar"),v=a("./pzaShareRewardItem"),b=a("../Common/pzaUIManager"),S=a("../Load/pzaPreLoadManager"),P=a("./pzaCommonRewardView"),C=cc._decorator,D=C.ccclass,M=C.property,E=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.rewardItems=[],t.jars=[],t.proBar=null,t.finalRewardNoRec=null,t.finalRewardRec=null,t.shareTag=null,t.hammerTag=null,t.shareTxt=null,t.hammerShowNode=null,t.hammer=null,t.hammerTip=null,t.leftArrow=null,t.rightArrow=null,t.shareBtn=null,t.showBangJar=!1,t.finishCount=0,t}return n(t,a),t.prototype.onEnable=function(){if(c.pzaLocalData.data.shareGiftRecIndex.indexOf(3)>=0){if(!c.pzaLocalData.data.shareBoomNutPop){var a=new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_PLANTE,52);b.pzaUIManager.baseShowPopUI(S.pzaResourceUrl.COMMON_REWARD_VIEW,function(t){var e=t&&t.getComponent(P.pzaCommonRewardView);e&&e.bindData([a],null)}),c.pzaLocalData.data.shareBoomNutPop=!0,c.pzaLocalData.addDirty("shareBoomNutPop")}}else c.pzaLocalData.data.shareBoomNutPop=!0,c.pzaLocalData.addDirty("shareBoomNutPop");h.pzaStatisticsMgr.sendEvent("System",{name:"system",value:6}),this.hammerShowNode.on(cc.Node.EventType.TOUCH_START,this.touchHammer,this),this.hammerShowNode.on(cc.Node.EventType.TOUCH_MOVE,this.moveHammer,this),this.hammerShowNode.on(cc.Node.EventType.TOUCH_CANCEL,this.endHammer,this),this.hammerShowNode.on(cc.Node.EventType.TOUCH_END,this.endHammer,this)},t.prototype.onDisable=function(){this.hammerShowNode.off(cc.Node.EventType.TOUCH_START,this.touchHammer,this),this.hammerShowNode.off(cc.Node.EventType.TOUCH_MOVE,this.moveHammer,this),this.hammerShowNode.off(cc.Node.EventType.TOUCH_CANCEL,this.endHammer,this),this.hammerShowNode.off(cc.Node.EventType.TOUCH_END,this.endHammer,this)},t.prototype.init=function(a){for(var t=1;t<=5;t++){var e=this.rewardItems[t-1];e&&e.init(t)}this.finishCount=a?a.length:0;var o=0;for(this.finishCount>0&&(o=this.finishCount>=5?-1:-(.1+.2*(this.finishCount-1))),this.proBar.fillRange=o,t=0;t<5;t++){var n=this.jars[t];if(null!=n){var i=a&&a[t]&&a[t].avatar,r=a&&a[t]&&a[t].nickName;n.init(t,r,i)}}this.refreshBtn(),this.hammerShowNode.active=!1},t.prototype.clcikShare=function(){if(m.pzaSoundManager.playSFX(),this.showBangJar)return this.hammerShowNode.active=!0,this.hammerTip.active=!0,this.hammer.angle=0,this.hammer.setPosition(cc.v2(44,-49)),void this.showArrowAni();z.pzaChannel.instance().shareAppMessage({title:"",act:d.pzaShareGiftConfig.act,adsid:"101"})},t.prototype.clickClose=function(){m.pzaSoundManager.playSFX(),l.pzaGameCommonPool.returnInstant(this.node)},t.prototype.touchHammer=function(a){this.hammerTip.active=!1,this.updateHammerPos(a,!1)},t.prototype.moveHammer=function(a){this.updateHammerPos(a,!1)},t.prototype.endHammer=function(a){this.updateHammerPos(a,!0)},t.prototype.updateHammerPos=function(a,t){var e=a&&a.getLocation(),o=this.hammerShowNode.convertToNodeSpaceAR(e),n=cc.misc.clampf(o.x+69,-261,480);this.hammer.setPosition(cc.v2(n,-49)),t&&this.bangJar(n)},t.prototype.showArrowAni=function(){cc.Tween.stopAllByTarget(this.leftArrow),cc.Tween.stopAllByTarget(this.rightArrow),this.leftArrow.scaleX=-.5,cc.tween(this.leftArrow).repeatForever(cc.tween().to(1,{scaleX:-1}).to(1,{scaleX:-.5})).start(),this.rightArrow.scaleX=.5,cc.tween(this.rightArrow).repeatForever(cc.tween().to(1,{scaleX:1}).to(1,{scaleX:.5})).start()},t.prototype.bangJar=function(a){var t=this,e=cc.misc.clampf(Math.floor((549-a)/170),0,4),o=this.jars[e];if(null==o||!o.canBang)return this.hammerShowNode.active=!0,this.hammerTip.active=!0,this.hammer.angle=0,this.hammer.setPosition(cc.v2(44,-49)),void this.showArrowAni();y.pzaCommonMask.showMask(),this.hammer.stopAllActions(),this.hammer.runAction(cc.sequence(cc.rotateTo(.2,20),cc.rotateTo(.1,-30),cc.callFunc(function(){t.hammerShowNode.active=!1,o.bang(),t.recieveReward(e),t.refreshBtn(),y.pzaCommonMask.hideMask()})))},t.prototype.recieveReward=function(a){var t=[];d.pzaShareGiftConfig.ShareGiftConfigMap.forEach(function(a,e){c.pzaLocalData.data.shareGiftRecIndex.includes(e)||t.push(a)});var e=f.pzaUtil.getRandomValueFromArray(t);if(null!=e){c.pzaLocalData.data.shareGiftRecIndex[a]=e.index,c.pzaLocalData.addDirty("shareGiftRecIndex");for(var o=!0,n=0;n<5;n++)if(null==c.pzaLocalData.data.shareGiftRecIndex[n]){o=!1;break}if(o){var i=new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_PLANTE,p.pzaPlantEnum.TWIN_SUNFLOWER);u.pzaRewardManager.recieveRewardData([i]),r.default.instance().obtainPlant()}var l=new s.pzaRewardPropData(e.rewardType,e.rewardCount);u.pzaRewardManager.recieveRewards([l],function(){if(o){var a=new s.pzaRewardPropData(s.pzaGamePropEnum.PROP_PLANTE,p.pzaPlantEnum.TWIN_SUNFLOWER);u.pzaRewardManager.recieveRewards([a],null,!0)}});var h=this.rewardItems[e.index-1];h&&h.recieve()}},t.prototype.refreshBtn=function(){this.showBangJar=!1;for(var a=!1,t=0,e=0;e<5;e++)null==c.pzaLocalData.data.shareGiftRecIndex[e]?a=!0:t++;if(!a)return this.finalRewardNoRec.active=!1,this.finalRewardRec.active=!0,void(this.shareBtn.active=!1);this.finalRewardNoRec.active=!0,this.finalRewardRec.active=!1,this.shareBtn.active=!0,this.showBangJar=this.finishCount>t,this.showBangJar?(this.shareTag.active=!1,this.hammerTag.active=!0,this.shareTxt.string="\u7838\u91d1\u7f50"):(this.shareTag.active=!0,this.hammerTag.active=!1,this.shareTxt.string="\u5206\u4eab")},i([M({displayName:"\u5956\u52b1items",type:[v.pzaShareRewardItem]})],t.prototype,"rewardItems",void 0),i([M({displayName:"\u5956\u52b1\u7f50\u5b50",type:[g.pzaShareGiftJar]})],t.prototype,"jars",void 0),i([M({displayName:"\u8fdb\u5ea6\u6761",type:cc.Sprite})],t.prototype,"proBar",void 0),i([M({displayName:"\u6700\u7ec8\u5956\u52b1\u672a\u9886\u53d6",type:cc.Node})],t.prototype,"finalRewardNoRec",void 0),i([M({displayName:"\u6700\u7ec8\u5956\u52b1\u5df2\u9886\u53d6",type:cc.Node})],t.prototype,"finalRewardRec",void 0),i([M({displayName:"\u5206\u4eab\u6309\u94ae\u56fe",type:cc.Node})],t.prototype,"shareTag",void 0),i([M({displayName:"\u9524\u5b50\u6309\u94ae\u56fe",type:cc.Node})],t.prototype,"hammerTag",void 0),i([M({displayName:"\u5206\u4eab\u6309\u94ae\u6587\u5b57",type:cc.Label})],t.prototype,"shareTxt",void 0),i([M({displayName:"\u9524\u5b50\u663e\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"hammerShowNode",void 0),i([M({displayName:"\u9524\u5b50",type:cc.Node})],t.prototype,"hammer",void 0),i([M({displayName:"\u9524\u5b50\u63d0\u793a\u8282\u70b9",type:cc.Node})],t.prototype,"hammerTip",void 0),i([M({displayName:"\u7bad\u5934\u5de6",type:cc.Node})],t.prototype,"leftArrow",void 0),i([M({displayName:"\u7bad\u5934\u53f3",type:cc.Node})],t.prototype,"rightArrow",void 0),i([M({displayName:"\u5206\u4eab\u6309\u94ae",type:cc.Node})],t.prototype,"shareBtn",void 0),i([D],t)}(cc.Component);e.pzaShareGiftView=E,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaCommonRewardView":"pzaCommonRewardView","./pzaShareGiftJar":"pzaShareGiftJar","./pzaShareRewardItem":"pzaShareRewardItem"}],pzaShareRewardItem:[function(a,t,e){"use strict";cc._RF.push(t,"eb89604ollH6a3w00CzIq9A","pzaShareRewardItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShareRewardItem=void 0;var r=a("../Common/pzaGameConfig"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaShareGiftConfig"),c=a("../Common/pzaSpineController"),u=a("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.recedNode=null,t.coinIcon=null,t.coinFrames=[],t.propAni=null,t.propName=null,t.propCount=null,t}return n(t,a),t.prototype.init=function(a){this.recedNode.active=l.pzaLocalData.data.shareGiftRecIndex.includes(a),this.propCount.node.active=!1;var t=s.pzaShareGiftConfig.ShareGiftConfigMap.get(a);if(null!=t)switch(t.rewardType){case p.pzaGamePropEnum.PROP_COIN:this.propAni&&(this.propAni.node.active=!1),this.propName.string=""+t.rewardCount,this.coinIcon.node.active=!0;var e=t.rewardCount>=5e3?1:0;this.coinIcon.spriteFrame=this.coinFrames[e];break;case p.pzaGamePropEnum.PROP_CHERRY_BOMB:case p.pzaGamePropEnum.PROP_AUTO_PICK:case p.pzaGamePropEnum.PROP_FREE_SUN:this.coinIcon.node.active=!1,this.propCount.node.active=!0,this.propCount.string="x"+t.rewardCount,this.propAni&&(this.propAni.node.active=!0,t.rewardType==p.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAni.playAnimation("3ui_1",!0):t.rewardType==p.pzaGamePropEnum.PROP_AUTO_PICK?this.propAni.playAnimation("2ui_1",!0):t.rewardType==p.pzaGamePropEnum.PROP_FREE_SUN&&this.propAni.playAnimation("1ui_1",!0));var o=p.pzaGamePropConfig.PorpConfigMap.get(t.rewardType);null!=o&&(this.propName.string=""+o.propName);break;case p.pzaGamePropEnum.PROP_PLANTE:var n;(n=r.pzaGameConfig.getPlantConfig(t.rewardCount))&&(this.propName.string=""+n.name,this.propAni&&(this.propAni.node.active=!1),this.coinIcon.node.active=!0,u.pzaSpriteFrameManager.loadPlantCard(t.rewardCount,this.coinIcon))}},t.prototype.recieve=function(){this.recedNode.active=!0},i([m({displayName:"\u5df2\u9886\u53d6\u8282\u70b9",type:cc.Node})],t.prototype,"recedNode",void 0),i([m({displayName:"\u91d1\u5e01\u56fe\u6807",type:cc.Sprite})],t.prototype,"coinIcon",void 0),i([m({displayName:"\u91d1\u5e01\u56fe",type:[cc.SpriteFrame]})],t.prototype,"coinFrames",void 0),i([m({displayName:"\u9053\u5177\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"propAni",void 0),i([m({displayName:"\u9053\u5177\u540d\u79f0",type:cc.Label})],t.prototype,"propName",void 0),i([m({displayName:"\u9053\u5177\u6570\u91cf",type:cc.Label})],t.prototype,"propCount",void 0),i([h],t)}(cc.Component);e.pzaShareRewardItem=f,cc._RF.pop()},{"../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaShiftNut:[function(a,t,e){"use strict";cc._RF.push(t,"3ba8bI4lGVJ0Ii191ECjQ14","pzaShiftNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShiftNut=void 0;var r=a("../../utils/pzakc"),p=a("../Data/pzaPlantEnum"),l=a("../pzaEffectManager"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.nutArr=[p.pzaPlantEnum.ICE_NUT,p.pzaPlantEnum.MelonNut,p.pzaPlantEnum.VipNut,p.pzaPlantEnum.FireNut,p.pzaPlantEnum.HoleNut,p.pzaPlantEnum.MagnetNut,p.pzaPlantEnum.ZombieNut,p.pzaPlantEnum.TorchNut,p.pzaPlantEnum.SquashNut],t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,this.animation.playAnimation("idle",!1,function(){e.baseData.hp<=0||e.animation.playAnimation("zhuan",!1,function(){e.baseData.hp<=0||(l.pzaEffectManager.createImitaterEffect(cc.v2(e.baseData.logicPos.x,e.baseData.logicPos.y-25)),e.startShift())})})},t.prototype.startShift=function(){var a=""+this.baseData.xIndex+this.baseData.yIndex,t=window.pzaplantManager.plantDataMap.get(a);t.isDead=!0,window.pzaplantManager.plantMap.delete(t),window.pzaplantManager.plantDataMap.delete(a),this.close();var e=r.default.randomChoose(this.nutArr,1)[0];window.pzaplantManager.createPlant(e,this.baseData.xIndex,this.baseData.yIndex,!0)},i([u],t)}(s.pzaBasePlant));e.pzaShiftNut=d,cc._RF.pop()},{"../../utils/pzakc":"pzakc","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","./pzaBasePlant":"pzaBasePlant"}],pzaShopConfig:[function(a,t,e){"use strict";cc._RF.push(t,"d2b36zP1kZHN4M7r1NAkwvE","pzaShopConfig"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShopConfig=e.pzaShopItemType=void 0;var o,n=a("../Battle/Data/pzaPlantEnum");(function(a){a[a.CARD_SLOT_7=1]="CARD_SLOT_7",a[a.CARD_SLOT_8=2]="CARD_SLOT_8",a[a.CARD_SLOT_9=3]="CARD_SLOT_9",a[a.BACONIC_SMALL=4]="BACONIC_SMALL",a[a.BACONIC_BIG=5]="BACONIC_BIG",a[a.POOL_CLEAN_CAR=6]="POOL_CLEAN_CAR",a[a.PITCHFORK=8]="PITCHFORK",a[a.ROOF_CART=9]="ROOF_CART",a[a.GATLING_PEA=10]="GATLING_PEA",a[a.TWIN_SUNFLOWER=11]="TWIN_SUNFLOWER",a[a.GLOOM_SHROOM=12]="GLOOM_SHROOM",a[a.CATTAIL=13]="CATTAIL",a[a.SPIKEROCK=14]="SPIKEROCK",a[a.GOLD_MAGNET=15]="GOLD_MAGNET",a[a.WINTER_MELON=16]="WINTER_MELON",a[a.COB_CANNON=17]="COB_CANNON",a[a.IMITATER=18]="IMITATER",a[a.NUT_HEALING=19]="NUT_HEALING",a[a.MARIGOLD_FLOWERPOT=20]="MARIGOLD_FLOWERPOT",a[a.GOLD_KETTLE=21]="GOLD_KETTLE",a[a.FERTILIZER=22]="FERTILIZER",a[a.PESTICIDE=23]="PESTICIDE",a[a.JUKEBOX=24]="JUKEBOX",a[a.GLOVE=25]="GLOVE",a[a.SHROOM_GARDEN=26]="SHROOM_GARDEN",a[a.AQUARIUM=27]="AQUARIUM",a[a.WHEELBARROW=28]="WHEELBARROW",a[a.SNAIL=29]="SNAIL",a[a.FLOWER_SEED=30]="FLOWER_SEED",a[a.BRONZE_FLOWER_SEED=31]="BRONZE_FLOWER_SEED",a[a.SILVER_FLOWER_SEED=32]="SILVER_FLOWER_SEED",a[a.GOLD_FLOWER_SEED=33]="GOLD_FLOWER_SEED",a[a.DAVE_COIN=1e3]="DAVE_COIN"})(o=e.pzaShopItemType||(e.pzaShopItemType={}));var i=function(){function a(a,t,e,o,n){this.itemType=null,this.price=0,this.desc=null,this.unlockChapter=0,this.unlockPart=0,this.itemType=a,this.price=t,this.desc=e,this.unlockChapter=o,this.unlockPart=n}return a.initShopConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=parseInt(t.id),n=parseInt(t.gold),i=t.desc,r=t.new,p=0,l=0;if(null!=r){var s=r.split("-");p=parseInt(s[0]),l=parseInt(s[1])}var c=new a(o,n,i,p,l);e.SHOP_CONFIG.set(o,c)}})},a.getPlantTypeByItem=function(a){switch(a){case o.GATLING_PEA:return n.pzaPlantEnum.GATLING_PEA;case o.TWIN_SUNFLOWER:return n.pzaPlantEnum.TWIN_SUNFLOWER;case o.GLOOM_SHROOM:return n.pzaPlantEnum.GLOOM_SHROOM;case o.CATTAIL:return n.pzaPlantEnum.CATTAIL;case o.SPIKEROCK:return n.pzaPlantEnum.SPIKEROCK;case o.GOLD_MAGNET:return n.pzaPlantEnum.GOLD_MAGNET;case o.WINTER_MELON:return n.pzaPlantEnum.WINTER_MELON;case o.COB_CANNON:return n.pzaPlantEnum.COB_CANNON;case o.IMITATER:return n.pzaPlantEnum.IMITATER}return null},a.getPlantPrice=function(a){var t=null;switch(a){case n.pzaPlantEnum.GATLING_PEA:t=o.GATLING_PEA;break;case n.pzaPlantEnum.TWIN_SUNFLOWER:t=o.TWIN_SUNFLOWER;break;case n.pzaPlantEnum.GLOOM_SHROOM:t=o.GLOOM_SHROOM;break;case n.pzaPlantEnum.CATTAIL:t=o.CATTAIL;break;case n.pzaPlantEnum.WINTER_MELON:t=o.WINTER_MELON;break;case n.pzaPlantEnum.GOLD_MAGNET:t=o.GOLD_MAGNET;break;case n.pzaPlantEnum.SPIKEROCK:t=o.SPIKEROCK;break;case n.pzaPlantEnum.COB_CANNON:t=o.COB_CANNON;break;case n.pzaPlantEnum.IMITATER:t=o.IMITATER;break;case n.pzaPlantEnum.SUPER_CHOMPER:t=o.COB_CANNON}if(a==n.pzaPlantEnum.SUPER_CHOMPER)return 100;if(a==n.pzaPlantEnum.BOOM_NUT)return 5e3;if(null==t)return 0;var e=this.SHOP_CONFIG.get(t);return null==e?0:e.price},a.SHOP_CONFIG=new Map,a}();e.pzaShopConfig=i,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum"}],pzaShopDave:[function(a,t,e){"use strict";cc._RF.push(t,"b5b2cEuGkdC97sMnawdSsxr","pzaShopDave");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShopDave=void 0;var r=a("../Common/pzaSoundManager"),p=a("../Common/pzaSpineController"),l=a("../Common/pzaUtil"),s=a("../Common/pzaWorldEventManager"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.dave=null,t.dialogNode=null,t.word=null,t.continueNode=null,t.words=null,t.dialogEndCall=null,t.idleDave=!1,t.allPlantDave=!1,t.idleWords=["\u6211\u4eec\u7684\u4ef7\u683c\n\u5f88\u4e0d\u53ef\u601d\u8bae\u5427\uff01","\u6742\u8d27\u5e97\u7684\u5546\u54c1\n\u90fd\u5df2\u7ecf\u4e0a\u67b6\u4e86\uff01\uff01","\u4e00\u8d77\u6765\u5427\uff01\u6211\u75af\u6389\u5566\n\uff01\uff01","\u6389\u5728\u5730\u4e0a\u7684\u4e1c\u897f\n\u5f02\u5e38\u7f8e\u5473\u3002"],t.lastIdleWord=null,t.idleInterval=0,t.hideDialogTime=0,t.plantDaveIndex=0,t.canContinue=!1,t}return n(t,a),t.prototype.onEnable=function(){s.pzaWorldEventManager.addListener(s.pzaWorldEventType.HIDE_DAVE_DIALOG,this.hideDaveDialog,this),s.pzaWorldEventManager.addListener(s.pzaWorldEventType.HIDE_DAVE_DIALOG,this.showDaveDialog,this)},t.prototype.onDisable=function(){s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.HIDE_DAVE_DIALOG,this.hideDaveDialog,this),s.pzaWorldEventManager.removeListener(s.pzaWorldEventType.HIDE_DAVE_DIALOG,this.showDaveDialog,this)},t.prototype.hideDaveDialog=function(){this.allPlantDave||this.hideNormalDave(!0)},t.prototype.showDaveDialog=function(){this.allPlantDave||this.showNormalDave(!1)},t.prototype.showGuideDave=function(a,t){var e=this;this.idleDave=!1,this.allPlantDave=!1,this.dialogNode.active=!1,this.words=a,this.dialogEndCall=t,this.continueNode.active=!0,this.canContinue=!1,this.dave.playAnimation("1enter1",!1,function(){e.dave.playAnimation("1idle1",!0),e.dialogNode.active=!0,e.canContinue=!0,e.showNextWord()}),this.node.on(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.node._touchListener.setSwallowTouches(!1)},t.prototype.showNormalDave=function(a){var t=this;void 0===a&&(a=!0),this.idleDave=!0,this.allPlantDave=!1,this.dialogNode.active=!1,this.continueNode.active=!1,this.idleInterval=5,this.hideDialogTime=0,this.lastIdleWord=null,this.canContinue=!0,a&&this.dave.playAnimation("1enter1",!1,function(){t.dave.playAnimation("1idle1",!0)})},t.prototype.hideNormalDave=function(a){this.dialogNode.active=!1,this.idleInterval=5,this.hideDialogTime=0,a&&(this.idleDave=!0)},t.prototype.showCrazyDave=function(){var a=this;this.idleDave=!1,this.allPlantDave=!1,this.dialogNode.active=!0,this.continueNode.active=!0,this.canContinue=!0,this.words=null,this.dialogEndCall=function(){a.idleDave=!0,a.dialogNode.active=!1,a.continueNode.active=!1,a.idleInterval=5,a.hideDialogTime=0,a.lastIdleWord=null,a.dave.playAnimation("1idle1",!0)},this.word.string="\u55ef...\xb7\xb7\xb7\u7f8e\u5473\u963f\uff01\uff01",r.pzaSoundManager.playAudio("crazydavecrazy"),this.dave.playAnimation("crazy",!1,function(){a.dave.playAnimation("1idle2",!0)}),this.node.on(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.node._touchListener.setSwallowTouches(!1)},t.prototype.showNutWord=function(){var a=this;this.dialogNode.active=!0,this.word.string="\u60f3\u8ba9\u575a\u679c\u5f97\u5230\u6cbb\u7597\n\u5f88\u7b80\u5355\uff0c\u5728\u5df2\u7ecf\u53d7\u4f24\n\u7684\u575a\u679c\u4e0a\u518d\u79cd\u4e00\u4e2a\u65b0\n\u7684\uff01",this.lastIdleWord=null,this.idleInterval=10,this.hideDialogTime=5,this.playShortSound(),this.dave.playAnimation("1talk3",!1,function(){a.dave.playAnimation("1idle1",!0)})},t.prototype.showAllPlantWord=function(){this.idleDave=!1,this.allPlantDave=!0,this.dialogNode.active=!0,this.continueNode.active=!1,this.words=null,this.dialogEndCall=null,this.idleInterval=0,this.plantDaveIndex=0,this.showPlantDaveWord(this.plantDaveIndex),this.node.on(cc.Node.EventType.TOUCH_START,this.clickNextWord,this)},t.prototype.update=function(a){this.allPlantDave?this.updatePlantDave(a):this.idleDave&&(this.idleInterval-=a,this.idleInterval<=0?this.showIdleWord():this.hideDialogTime<=0||(this.hideDialogTime-=a,this.hideDialogTime<=0&&(this.dialogNode.active=!1)))},t.prototype.updatePlantDave=function(a){this.idleInterval<=0||(this.idleInterval-=a,this.idleInterval<=0&&this.showPlantDaveWord(this.plantDaveIndex))},t.prototype.showPlantDaveWord=function(a){var t=this;if(a>=5)return this.node.off(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),void this.showNormalDave(!1);var e=[1,1,1,2,2];this.word.string=["\u4f60\u521a\u521a\u4e70\u5230\u4e86\u6700\u540e\u4e00\n\u4e2a\u690d\u7269\uff01","\u4f60\u73b0\u5728\u8fbe\u6210\u5168\u690d\u7269\u5236\u9738\u4e86\uff01","\u8fd9\u6837\u4e00\u4e2a\u6210\u5c31\u603b\u5f97\u6709\u4e2a\u540d\u5b57\u5427\uff1f","\u6709\u4e86\xb7\xb7\xb7","\u690d\u7269\u730e\u4eba\uff01\uff01\uff01"][a],a<=3?(this.playShortSound(),this.dave.playAnimation("1talk3",!1,function(){t.idleInterval=e[a],t.dave.playAnimation("1idle1",!0)})):(r.pzaSoundManager.playAudio("crazydavecrazy"),this.dave.playAnimation("crazy",!1,function(){t.idleInterval=e[a],t.dave.playAnimation("1idle1",!0)})),this.plantDaveIndex++},t.prototype.showIdleWord=function(){for(var a=this,t=[],e=0;e<this.idleWords.length;e++)this.idleWords[e]!=this.lastIdleWord&&t.push(this.idleWords[e]);var o=l.pzaUtil.getRandomValueFromArray(t);this.dialogNode.active=!0,this.word.string=o,this.lastIdleWord=o,this.idleInterval=10,this.hideDialogTime=5,this.playShortSound(),this.dave.playAnimation("1talk3",!1,function(){a.dave.playAnimation("1idle1",!0)})},t.prototype.clickNextWord=function(){this.allPlantDave||this.canContinue&&this.showNextWord()},t.prototype.showNextWord=function(){var a=this;if(null==this.words)return this.node.off(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.dialogNode.active=!1,void(this.dialogEndCall&&this.dialogEndCall());var t=this.words.shift();if(null==t)return this.node.off(cc.Node.EventType.TOUCH_START,this.clickNextWord,this),this.dialogNode.active=!1,void(this.dialogEndCall&&this.dialogEndCall());this.word.string=t.word,t.event&&t.event(),this.playShortSound(),this.dave.playAnimation("1talk3",!1,function(){a.dave.playAnimation("1idle1",!0)})},t.prototype.playShortSound=function(){var a=l.pzaUtil.getRandomNum(1,3);r.pzaSoundManager.playAudio("crazydaveshort"+a)},i([d({displayName:"\u6234\u592b\u52a8\u753b",type:p.pzaSpineController})],t.prototype,"dave",void 0),i([d({displayName:"\u5bf9\u8bdd\u6846",type:cc.Node})],t.prototype,"dialogNode",void 0),i([d({displayName:"\u6587\u5b57",type:cc.Label})],t.prototype,"word",void 0),i([d({displayName:"\u7ee7\u7eed",type:cc.Node})],t.prototype,"continueNode",void 0),i([u],t)}(cc.Component);e.pzaShopDave=h,cc._RF.pop()},{"../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpineController":"pzaSpineController","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaShopItem:[function(a,t,e){"use strict";cc._RF.push(t,"945eaXxxrdJMqWmnEpN5n5u","pzaShopItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShopItem=void 0;var r=a("../Achieve/pzaAchieveMgr"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaShareGiftConfig"),u=a("../Common/pzaSpriteFrameManager"),d=a("../Common/pzaStatisticsMgr"),h=a("../Common/pzaUIManager"),m=a("../Common/pzaUtil"),f=a("../Garden/pzaGardenMgr"),z=a("../Load/pzaPreLoadManager"),y=a("../Shop/pzaShopConfig"),g=a("../utils/pzaChannel"),v=a("../utils/pzakc"),b=a("./pzaBuyConfirmView"),S=a("./pzaShareGiftView"),P=cc._decorator,C=P.ccclass,D=P.property,M=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.price=null,t.specialAd=null,t.adCountPro=null,t.itemIcon=null,t.plantCard=null,t.plantIcon=null,t.plantCardBoard=null,t.plantCardBoardFrames=[],t.soldNode=null,t.comingNode=null,t.itemName=null,t.itemCount=null,t.itemPosArr=[cc.v2(99,85),cc.v2(216,85),cc.v2(333,85),cc.v2(450,85),cc.v2(59,-58),cc.v2(176,-58),cc.v2(293,-58),cc.v2(410,-58)],t.itemType=null,t.shopPos=null,t.sold=!1,t.coming=!1,t.buyCall=null,t}return n(t,a),t.prototype.bindData=function(a,t,e,o,n){void 0===o&&(o=!1),void 0===n&&(n=null),a==y.pzaShopItemType.CARD_SLOT_7&&(7==s.pzaLocalData.data.plantSlotCount?a=y.pzaShopItemType.CARD_SLOT_8:8==s.pzaLocalData.data.plantSlotCount?a=y.pzaShopItemType.CARD_SLOT_9:s.pzaLocalData.data.plantSlotCount>=9&&(a=s.pzaLocalData.getGoodsCount(y.pzaShopItemType.BACONIC_SMALL)>0?y.pzaShopItemType.BACONIC_BIG:y.pzaShopItemType.BACONIC_SMALL)),this.itemType=a,this.coming=o,this.buyCall=n,this.shopPos=t+"-"+e;var i=this.itemPosArr[e];null!=i&&this.node.setPosition(i);var r=y.pzaShopConfig.SHOP_CONFIG.get(a);null!=r&&(a==y.pzaShopItemType.TWIN_SUNFLOWER?(this.price.node.active=!0,this.specialAd.active=!1,this.price.string="\u6d3b\u52a8\u83b7\u53d6","ks"!=g.pzaChannel.instance().channel&&"tt"!=g.pzaChannel.instance().channel||(this.price.node.active=!1,this.specialAd.active=!0,this.adCountPro.string="("+s.pzaLocalData.data.twinsFlowerAdCnt+"/2)")):a==y.pzaShopItemType.GATLING_PEA?(this.price.node.active=!1,this.specialAd.active=!0,this.adCountPro.string="("+s.pzaLocalData.data.gatlingAdCount+"/2)",d.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"17"},{name:"adname",value:"\u83b7\u53d6\u673a\u67aa\u5c04\u624b"})):(this.price.node.active=!0,this.specialAd.active=!1,this.price.string=m.pzaUtil.getCurrencyStr(r.price)),this.comingNode.active=this.coming,this.itemName.node.active=!1,this.itemCount.node.active=!1,a>=y.pzaShopItemType.CARD_SLOT_7&&a<=y.pzaShopItemType.CARD_SLOT_9?(this.itemIcon.node.active=!0,this.plantCard.active=!1,this.itemName.node.active=!0,this.itemIcon.node.setPosition(cc.v2(-5,66)),u.pzaSpriteFrameManager.loadShopItemIcon(1,this.itemIcon),a==y.pzaShopItemType.CARD_SLOT_7?this.itemName.string="7\n\u5361\u7247\u69fd":a==y.pzaShopItemType.CARD_SLOT_8?this.itemName.string="8\n\u5361\u7247\u69fd":this.itemName.string="9\n\u5361\u7247\u69fd"):a==y.pzaShopItemType.BACONIC_SMALL||a==y.pzaShopItemType.BACONIC_BIG?(this.itemIcon.node.active=!0,this.plantCard.active=!1,this.itemIcon.node.setPosition(cc.v2(5,74)),u.pzaSpriteFrameManager.loadShopItemIcon(4,this.itemIcon)):a<y.pzaShopItemType.GATLING_PEA||a>y.pzaShopItemType.IMITATER?(this.itemIcon.node.active=!0,this.plantCard.active=!1,this.itemIcon.node.setPosition(cc.v2(5,74)),u.pzaSpriteFrameManager.loadShopItemIcon(a,this.itemIcon),a!=y.pzaShopItemType.FERTILIZER&&a!=y.pzaShopItemType.PESTICIDE||(this.itemCount.node.active=!0)):(this.itemIcon.node.active=!1,this.plantCard.active=!0,u.pzaSpriteFrameManager.loadPlantCard(y.pzaShopConfig.getPlantTypeByItem(a),this.plantIcon),a==y.pzaShopItemType.IMITATER?this.plantCardBoard.spriteFrame=this.plantCardBoardFrames[0]:this.plantCardBoard.spriteFrame=this.plantCardBoardFrames[1]),this.refreshPurchasedState())},t.prototype.refreshPurchasedState=function(){switch(this.sold=!1,this.itemType){case y.pzaShopItemType.GATLING_PEA:this.sold=s.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.GATLING_PEA);break;case y.pzaShopItemType.TWIN_SUNFLOWER:this.sold=s.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.TWIN_SUNFLOWER);break;case y.pzaShopItemType.GLOOM_SHROOM:this.sold=s.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.GLOOM_SHROOM);break;case y.pzaShopItemType.CATTAIL:this.sold=s.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.CATTAIL);break;case y.pzaShopItemType.SPIKEROCK:this.sold=s.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.SPIKEROCK);break;case y.pzaShopItemType.GOLD_MAGNET:this.sold=s.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.GOLD_MAGNET);break;case y.pzaShopItemType.WINTER_MELON:this.sold=s.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.WINTER_MELON);break;case y.pzaShopItemType.COB_CANNON:this.sold=s.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.COB_CANNON);break;case y.pzaShopItemType.IMITATER:this.sold=s.pzaLocalData.data.ownPlants.includes(p.pzaPlantEnum.IMITATER);break;case y.pzaShopItemType.POOL_CLEAN_CAR:case y.pzaShopItemType.PITCHFORK:case y.pzaShopItemType.ROOF_CART:case y.pzaShopItemType.NUT_HEALING:this.sold=s.pzaLocalData.getGoodsCount(this.itemType)>0;break;case y.pzaShopItemType.SHROOM_GARDEN:this.sold=null!=s.pzaLocalData.data.gardenEnv[""+f.pzaGardenEnv.night];break;case y.pzaShopItemType.AQUARIUM:this.sold=null!=s.pzaLocalData.data.gardenEnv[""+f.pzaGardenEnv.water];break;case y.pzaShopItemType.SNAIL:this.sold=(s.pzaLocalData.data.gardenToolNum[""+f.pzaGardenToolType.snail]||0)>0;break;case y.pzaShopItemType.GOLD_KETTLE:this.sold=(s.pzaLocalData.data.gardenToolNum[""+f.pzaGardenToolType.goldWaterPot]||0)>0;break;case y.pzaShopItemType.JUKEBOX:this.sold=(s.pzaLocalData.data.gardenToolNum[""+f.pzaGardenToolType.phonograph]||0)>0;break;case y.pzaShopItemType.GLOVE:this.sold=(s.pzaLocalData.data.gardenToolNum[""+f.pzaGardenToolType.glove]||0)>0;break;case y.pzaShopItemType.WHEELBARROW:this.sold=(s.pzaLocalData.data.gardenToolNum[""+f.pzaGardenToolType.cart]||0)>0;break;case y.pzaShopItemType.FERTILIZER:this.sold=(s.pzaLocalData.data.gardenToolNum[""+f.pzaGardenToolType.manure]||0)>=999;break;case y.pzaShopItemType.PESTICIDE:this.sold=(s.pzaLocalData.data.gardenToolNum[""+f.pzaGardenToolType.pesticide]||0)>=999;break;case y.pzaShopItemType.MARIGOLD_FLOWERPOT:case y.pzaShopItemType.FLOWER_SEED:case y.pzaShopItemType.BRONZE_FLOWER_SEED:case y.pzaShopItemType.SILVER_FLOWER_SEED:case y.pzaShopItemType.GOLD_FLOWER_SEED:this.sold=s.pzaLocalData.data.purchasedPos.includes(this.shopPos)||!f.default.instance().hasEmptyPos(f.pzaGardenEnv.normal)}this.soldNode.active=this.sold},t.prototype.click=function(){var a=this;if(!this.sold&&!this.coming){var t=function(){h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.BUY_CONFIRM_VIEW,function(t){var e=t&&t.getComponent(b.pzaBuyConfirmView);e&&e.bindData(a.itemType,a.shopPos,function(){a.buyCall&&a.buyCall(a.itemType),a.itemType>=y.pzaShopItemType.CARD_SLOT_7&&a.itemType<=y.pzaShopItemType.BACONIC_BIG?a.bindData(y.pzaShopItemType.CARD_SLOT_7,1,0,a.coming,a.buyCall):(a.refreshPurchasedState(),!a.sold||a.itemType!==y.pzaShopItemType.FLOWER_SEED&&a.itemType!==y.pzaShopItemType.GOLD_FLOWER_SEED&&a.itemType!==y.pzaShopItemType.SILVER_FLOWER_SEED&&a.itemType!==y.pzaShopItemType.BRONZE_FLOWER_SEED||v.default.sendMsg("refreshOtherItems",a.itemType))})})};if(this.itemType!=y.pzaShopItemType.TWIN_SUNFLOWER)this.itemType!=y.pzaShopItemType.GATLING_PEA?t():(o=function(){s.pzaLocalData.data.gatlingAdCount++,s.pzaLocalData.addDirty("gatlingAdCount"),a.adCountPro.string="("+s.pzaLocalData.data.gatlingAdCount+"/2)",s.pzaLocalData.data.gatlingAdCount>=2&&t()},g.pzaChannel.instance().showVideo({sucCall:o,failCall:function(){},endCall:function(){},posName:"\u83b7\u53d6\u673a\u67aa\u5c04\u624b",adsid:"17"}));else{var e=g.pzaChannel.instance().getChannel();if("tt"==e.channel||"ks"==e.channel){var o=function(){s.pzaLocalData.data.twinsFlowerAdCnt++,s.pzaLocalData.addDirty("twinsFlowerAdCnt"),a.adCountPro.string="("+s.pzaLocalData.data.twinsFlowerAdCnt+"/2)",s.pzaLocalData.data.twinsFlowerAdCnt>=2&&(s.pzaLocalData.data.ownPlants.push(p.pzaPlantEnum.TWIN_SUNFLOWER),s.pzaLocalData.addDirty("ownPlants"),r.default.instance().obtainPlant(),a.refreshPurchasedState())};return void g.pzaChannel.instance().showVideo({sucCall:o,failCall:function(){},endCall:function(){},posName:"\u83b7\u53d6\u53cc\u5b50\u5411\u65e5\u8475",adsid:"28"})}"wx"==e.channel?e.getShareResult(c.pzaShareGiftConfig.act,function(a){h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.SHARE_GIFT_VIEW,function(t){var e=t&&t.getComponent(S.pzaShareGiftView);e&&e.init(a)})}):"my"==e.channel&&e.getShareResult(c.pzaShareGiftConfig.act,function(a){h.pzaUIManager.baseShowPopUI(z.pzaResourceUrl.SHARE_GIFT_VIEW,function(t){var e=t&&t.getComponent(S.pzaShareGiftView);e&&e.init(a)})})}}},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([D({displayName:"\u4ef7\u683c",type:cc.Label})],t.prototype,"price",void 0),i([D({displayName:"\u7279\u6b8a\u5e7f\u544a",type:cc.Node})],t.prototype,"specialAd",void 0),i([D({displayName:"\u5e7f\u544a\u8fdb\u5ea6",type:cc.Label})],t.prototype,"adCountPro",void 0),i([D({displayName:"\u7269\u54c1\u56fe\u6807",type:cc.Sprite})],t.prototype,"itemIcon",void 0),i([D({displayName:"\u690d\u7269\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"plantCard",void 0),i([D({displayName:"\u690d\u7269\u56fe\u7247",type:cc.Sprite})],t.prototype,"plantIcon",void 0),i([D({displayName:"\u690d\u7269\u5361\u7247\u6846",type:cc.Sprite})],t.prototype,"plantCardBoard",void 0),i([D({displayName:"\u690d\u7269\u5361\u7247\u6846\u5143\u7d20",type:[cc.SpriteFrame]})],t.prototype,"plantCardBoardFrames",void 0),i([D({displayName:"\u5df2\u552e\u51fa",type:cc.Node})],t.prototype,"soldNode",void 0),i([D({displayName:"\u5373\u5c06\u63a8\u51fa",type:cc.Node})],t.prototype,"comingNode",void 0),i([D({displayName:"\u5546\u54c1\u540d\u79f0",type:cc.Label})],t.prototype,"itemName",void 0),i([D({displayName:"\u5546\u54c1\u6570\u91cf",type:cc.Label})],t.prototype,"itemCount",void 0),i([C],t)}(cc.Component);e.pzaShopItem=M,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaShareGiftConfig":"pzaShareGiftConfig","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc","./pzaBuyConfirmView":"pzaBuyConfirmView","./pzaShareGiftView":"pzaShareGiftView"}],pzaShopView:[function(a,t,e){"use strict";cc._RF.push(t,"33f42AEVkRP07M+oYZJtsjF","pzaShopView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShopView=void 0;var r=a("../Battle/Data/pzaGuideType"),p=a("../Battle/Data/pzaPlantEnum"),l=a("../Common/pzaGameCommonPool"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaStatisticsMgr"),d=a("../Common/pzaUIManager"),h=a("../Common/pzaUtil"),m=a("../Garden/pzaGardenMgr"),f=a("../Load/pzaPreLoadManager"),z=a("../Shop/pzaShopConfig"),y=a("../Shop/pzaShopDave"),g=a("../utils/pzakc"),v=a("./pzaBuyConfirmView"),b=a("./pzaCommonMask"),S=a("./pzaShopItem"),P=cc._decorator,C=P.ccclass,D=P.property,M=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bg=null,t.bgFrames=[],t.backCarNode=null,t.backCarDoor=null,t.backCarCloseDoor=null,t.nightWindow=null,t.nightbackWindow=null,t.coin=null,t.mainBtnNode=null,t.mainBtn=null,t.mainBtnFrames=[],t.itemPrefab=null,t.shopContent=null,t.leftLightBtn=null,t.rightLightBtn=null,t.dialogDave=null,t.diamond=null,t.lastCoinCount=null,t.shopItems=[],t.curPage=null,t.closeCall=null,t.buyPlantCall=null,t.words=null,t.maxPage=1,t.pageShops=[[z.pzaShopItemType.CARD_SLOT_7,z.pzaShopItemType.POOL_CLEAN_CAR,z.pzaShopItemType.PITCHFORK,z.pzaShopItemType.ROOF_CART,z.pzaShopItemType.GATLING_PEA,z.pzaShopItemType.TWIN_SUNFLOWER,z.pzaShopItemType.GLOOM_SHROOM,z.pzaShopItemType.CATTAIL],[z.pzaShopItemType.SPIKEROCK,z.pzaShopItemType.GOLD_MAGNET,z.pzaShopItemType.WINTER_MELON,z.pzaShopItemType.COB_CANNON,z.pzaShopItemType.IMITATER,z.pzaShopItemType.NUT_HEALING],[z.pzaShopItemType.MARIGOLD_FLOWERPOT,z.pzaShopItemType.MARIGOLD_FLOWERPOT,z.pzaShopItemType.MARIGOLD_FLOWERPOT,z.pzaShopItemType.GOLD_KETTLE,z.pzaShopItemType.FERTILIZER,z.pzaShopItemType.PESTICIDE,z.pzaShopItemType.JUKEBOX,z.pzaShopItemType.GLOVE],[z.pzaShopItemType.SHROOM_GARDEN,z.pzaShopItemType.AQUARIUM,z.pzaShopItemType.WHEELBARROW,z.pzaShopItemType.SNAIL,z.pzaShopItemType.FLOWER_SEED,z.pzaShopItemType.BRONZE_FLOWER_SEED,z.pzaShopItemType.SILVER_FLOWER_SEED,z.pzaShopItemType.GOLD_FLOWER_SEED]],t.unlocks=[["3-4","3-4","3-4","5-1","3-4","3-4","4-4","4-4"],["5-1","5-1","5-10","5-10","5-10","5-10"],["5-10","5-10","5-10","5-4","5-4","5-4","5-4","5-4"],["5-10","5-10","5-10","5-10","5-10","5-10","5-10","5-10"]],t}return n(t,a),t.prototype.onEnable=function(){var a=this;u.pzaStatisticsMgr.sendEvent("System",{name:"system",value:3}),this.words=null,this.lastCoinCount=null,this.refreshCoinCount(),this.curPage=null,this.diamond.active=!1,this.initMaxPage(),s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_3_4||s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_4_4||s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_5_1||s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_GARDEN_5_4&&s.pzaLocalData.gardenGuiding?(this.bindCloseCall(!1,function(){d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.PART_SELECT_VIEW,null)}),this.mainBtnNode.active=!1,s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_3_4?this.words=[new r.pzaDialog("\u4f60\u627e\u5230\u4e86\u6211\u7684\u57f9\u6839\uff01\n!"),new r.pzaDialog("\u6211\u7684\u5b9d\u8d1d\uff0c\u6cb9\u5149\u57f9\u6839\n\uff01"),new r.pzaDialog("\u6211\u51fa1000\u91d1\u5e01\u4e70\u4e86\uff01"),new r.pzaDialog("\u54c8\u54c8\u54c8\uff01\u554a\u54c8\u54c8\xb7\xb7\xb7\n\u54c8\uff01",function(){a.showDiamondAni()}),new r.pzaDialog("\u6162\u6162\u6570\u94b1\u5427!"),new r.pzaDialog("\u73b0\u5728\u6211\u8981\u53bb\u6577\u57f9\u6839\u9762\n\u819c\u4e86\uff01",function(){a.openCarDoor()})]:s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_4_4?this.words=[new r.pzaDialog("\u4f60\u627e\u5230\u4e86\u6211\u7684\n\u9b54\u6cd5\u7389\u7c73\u5377\uff01\uff01"),new r.pzaDialog("\u5b83\u53ea\u80fd\u662f\u6211\u7684\uff01\n\u6211\u7ed9\u4f601000\u91d1\u5e01\uff01"),new r.pzaDialog("\u5f88\u597d\uff01\u7389\u7c73\u5377\n\u73b0\u5728\u662f\u6211\u7684\u5566\uff01",function(){a.showDiamondAni()}),new r.pzaDialog("\u4e3a\u4ec0\u4e48\u6211\u8981\u82b1\u8fd9\u4e48\u591a\n\u94b1\u4e70\u4f60\u90a3\u4e2a\u7389\u7c73\u5377\uff1f"),new r.pzaDialog("\u56e0\u4e3a\u6211\u5f88\u75af\u72c2\uff01\uff01\uff01\n\uff01"),new r.pzaDialog("\u6211\u7684\u5c0f\u5e97\uff01\u4f60\u4f1a\u6ce8\u610f\n\u5230\u6211\u8fdb\u4e86\u4e9b\u65b0\u8d27\uff01",function(){a.openCarDoor()})]:s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_5_1?this.words=[new r.pzaDialog("\u563f\uff0c\u6211\u7684\u90bb\u5c45\uff01\u6211\u6709\n\u4e00\u4e9b\u65b0\u4e1c\u897f\u51fa\u552e\u5566\uff01")]:s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_GARDEN_5_4&&(this.words=[new r.pzaDialog("\u6b22\u8fce\u6765\u5230\u4f11\u95f2\u82b1\u56ed\uff01"),new r.pzaDialog("\u6211\u4f1a\u987a\u4fbf\u7ed9\u4f60\u4e00\u4e9b\u5316\n\u80a5\u7684\uff01",function(){a.openCarDoor(3),m.default.instance().addGardenTool(m.pzaGardenToolType.manure,5)}),new r.pzaDialog("\u5468\u56f4\u6709\u6ca1\u6709\u4ec0\u4e48\u4f60\u559c\n\u6b22\u7684\u4e1c\u897f\uff01")],this.bindCloseCall(!1,null)),this.show(s.pzaLocalData.data.curGuideType!=r.pzaGuideType.GUIDE_SHOP_4_4,!1)):(this.mainBtnNode.active=!0,this.show(!0,!0),this.bindCloseCall(!1,null),this.showShopItem(1)),g.default.regMsgReciever("refreshOtherItems",function(t){return console.log("refreshOtherItems!!!!",t),a.refreshOtherItems(t),!1})},t.prototype.onDisable=function(){g.default.delMsgReciever("refreshOtherItems"),this.clearShopItem()},t.prototype.bindCloseCall=function(a,t,e){void 0===e&&(e=null),this.closeCall=t,this.buyPlantCall=e,this.mainBtn.spriteFrame=a?this.mainBtnFrames[0]:this.mainBtnFrames[1]},t.prototype.show=function(a,t){var e=this;a?(this.bg.spriteFrame=this.bgFrames[0],this.nightWindow.active=!1,this.nightbackWindow.active=!1,t?(this.backCarDoor.opacity=255,this.backCarDoor.active=!0,this.backCarCloseDoor.active=!1,this.leftLightBtn.interactable=this.maxPage>1,this.rightLightBtn.interactable=this.maxPage>1):(this.backCarDoor.active=!1,this.backCarCloseDoor.opacity=255,this.backCarCloseDoor.active=!0,this.leftLightBtn.interactable=!1,this.rightLightBtn.interactable=!1)):(this.bg.spriteFrame=this.bgFrames[1],this.nightWindow.active=!0,t?(this.nightbackWindow.active=!1,this.backCarDoor.opacity=255,this.backCarDoor.active=!0,this.backCarCloseDoor.active=!1,this.leftLightBtn.interactable=this.maxPage>1,this.rightLightBtn.interactable=this.maxPage>1):(this.nightbackWindow.active=!0,this.backCarDoor.active=!1,this.backCarCloseDoor.opacity=255,this.backCarCloseDoor.active=!0,this.leftLightBtn.interactable=!1,this.rightLightBtn.interactable=!1)),this.shopContent.opacity=255,null!=this.words?this.dialogDave.showGuideDave(this.words,function(){e.mainBtnNode.active=!0,s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_SHOP_5_1&&e.openCarDoor(),s.pzaLocalData.data.curGuideType=null,s.pzaLocalData.addDirty("curGuideType"),e.dialogDave.showNormalDave(!1)}):this.dialogDave.showNormalDave()},t.prototype.update=function(){this.refreshCoinCount()},t.prototype.refreshCoinCount=function(){this.lastCoinCount!=s.pzaLocalData.data.coin&&(this.lastCoinCount=s.pzaLocalData.data.coin,this.coin.string=h.pzaUtil.getCurrencyStr(this.lastCoinCount))},t.prototype.clickMainView=function(){c.pzaSoundManager.playSFX(),this.close(),this.closeCall&&this.closeCall()},t.prototype.clickBuyMoreCoin=function(){c.pzaSoundManager.playSFX(),d.pzaUIManager.baseShowPopUI(f.pzaResourceUrl.BUY_CONFIRM_VIEW,function(a){var t=a&&a.getComponent(v.pzaBuyConfirmView);t&&t.bindData(z.pzaShopItemType.DAVE_COIN,null,null)})},t.prototype.refreshOtherItems=function(a){for(var t=this.shopContent.children,e=0;e<t.length;e++){var o=t[e].getComponent(S.pzaShopItem);o.itemType!==a&&o.refreshPurchasedState()}},t.prototype.showShopItem=function(a){if(this.curPage!=a){this.curPage=a,this.clearShopItem();var t=this.pageShops[this.curPage-1],e=this.unlocks[this.curPage-1];if(null!=t)for(var o=0;o<t.length;o++){var n=e[o],i=!1,r=t[o];if(!this.hasUnlock(n)){if(r!=z.pzaShopItemType.MARIGOLD_FLOWERPOT)continue;i=!0}var p=l.pzaGameCommonPool.requestInstant(this.itemPrefab);p.setParent(this.shopContent);var s=p.getComponent(S.pzaShopItem);s&&s.bindData(r,this.curPage,o,i,this.buyCall.bind(this)),this.shopItems.push(s)}}},t.prototype.clearShopItem=function(){this.shopItems.forEach(function(a){a&&a.close()}),this.shopItems=[]},t.prototype.clickPrePage=function(){var a=this.curPage-1;a<1&&(a=this.maxPage),this.showChangeAni(a),c.pzaSoundManager.playAudio("hatchback_close")},t.prototype.clickNextPage=function(){var a=this.curPage+1;a>this.maxPage&&(a=1),this.showChangeAni(a),this.dialogDave.hideNormalDave(!1),c.pzaSoundManager.playAudio("hatchback_close")},t.prototype.showChangeAni=function(a){var t=this;b.pzaCommonMask.showMask(),this.backCarDoor.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){t.leftLightBtn.interactable=!1,t.rightLightBtn.interactable=!1}),cc.delayTime(.47),cc.fadeIn(.15))),this.backCarCloseDoor.active=!0,this.backCarCloseDoor.opacity=1,this.backCarCloseDoor.runAction(cc.sequence(cc.delayTime(.15),cc.fadeIn(.15),cc.delayTime(.22),cc.fadeOut(.2))),this.backCarNode.y=0,this.backCarNode.runAction(cc.sequence(cc.delayTime(.3),cc.repeat(cc.sequence(cc.moveTo(.02,cc.v2(0,-2)),cc.moveTo(.02,cc.v2(0,0))),3))),this.shopContent.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){t.showShopItem(a)}),cc.delayTime(.47),cc.callFunc(function(){t.leftLightBtn.interactable=!0,t.rightLightBtn.interactable=!0}),cc.fadeIn(.15),cc.callFunc(function(){b.pzaCommonMask.hideMask(),t.backCarCloseDoor.active=!1})))},t.prototype.openCarDoor=function(a){var t=this;void 0===a&&(a=1),b.pzaCommonMask.showMask(),this.backCarNode.y=0,this.backCarNode.runAction(cc.repeat(cc.sequence(cc.moveTo(.02,cc.v2(0,-2)),cc.moveTo(.02,cc.v2(0,0))),3)),this.backCarDoor.active=!0,this.backCarDoor.opacity=1,this.backCarDoor.runAction(cc.sequence(cc.delayTime(.37),cc.fadeIn(.15))),this.backCarCloseDoor.runAction(cc.sequence(cc.delayTime(.22),cc.fadeOut(.2))),this.shopContent.opacity=1,c.pzaSoundManager.playAudio("hatchback_open"),this.shopContent.runAction(cc.sequence(cc.callFunc(function(){t.showShopItem(a)}),cc.delayTime(.37),cc.callFunc(function(){t.leftLightBtn.interactable=t.maxPage>1,t.rightLightBtn.interactable=t.maxPage>1}),cc.fadeIn(.15),cc.callFunc(function(){b.pzaCommonMask.hideMask(),t.backCarCloseDoor.active=!1})))},t.prototype.showDiamondAni=function(){this.diamond.active=!0,this.diamond.stopAllActions(),this.diamond.setPosition(cc.v2(-424,-262)),this.diamond.opacity=255,this.diamond.runAction(cc.sequence(cc.moveTo(.5,cc.v2(281,-288)),cc.callFunc(function(){s.pzaLocalData.data.coin+=1e3,s.pzaLocalData.addDirty("coin")}),cc.fadeOut(.3)))},t.prototype.initMaxPage=function(){for(var a=this,t=function(t){if(t>=3&&s.pzaLocalData.data.curGuideType==r.pzaGuideType.GUIDE_GARDEN_5_4)return"continue";e.unlocks[t-1].forEach(function(e){a.hasUnlock(e)&&(a.maxPage=t)})},e=this,o=1;o<=this.unlocks.length;o++)t(o)},t.prototype.hasUnlock=function(a){if(s.pzaLocalData.data.passLastPart)return!0;if(null==a)return!1;var t=a.split("-"),e=parseInt(t[0]),o=parseInt(t[1]);return s.pzaLocalData.data.curChapter>e||s.pzaLocalData.data.curChapter==e&&s.pzaLocalData.data.curPart>o},t.prototype.buyCall=function(a){if(a==z.pzaShopItemType.BACONIC_BIG||a==z.pzaShopItemType.BACONIC_SMALL)this.dialogDave.showCrazyDave();else if(a==z.pzaShopItemType.NUT_HEALING)this.dialogDave.showNutWord();else if(a>=z.pzaShopItemType.GATLING_PEA&&a<=z.pzaShopItemType.IMITATER){s.pzaLocalData.data.ownPlants.length>=p.pzaPlantEnum.IMITATER&&this.dialogDave.showAllPlantWord();var t=z.pzaShopConfig.getPlantTypeByItem(a);this.buyPlantCall&&this.buyPlantCall(t)}},t.prototype.close=function(){l.pzaGameCommonPool.returnInstant(this.node)},i([D({displayName:"\u80cc\u666f",type:cc.Sprite})],t.prototype,"bg",void 0),i([D({displayName:"\u80cc\u666f\u56fe",type:[cc.SpriteFrame]})],t.prototype,"bgFrames",void 0),i([D({displayName:"\u540e\u8f66\u8282\u70b9",type:cc.Node})],t.prototype,"backCarNode",void 0),i([D({displayName:"\u540e\u8f66\u95e8-\u5f00",type:cc.Node})],t.prototype,"backCarDoor",void 0),i([D({displayName:"\u540e\u8f66\u95e8-\u5173",type:cc.Node})],t.prototype,"backCarCloseDoor",void 0),i([D({displayName:"\u591c\u665a\u7a97",type:cc.Node})],t.prototype,"nightWindow",void 0),i([D({displayName:"\u591c\u665a\u540e\u7a97",type:cc.Node})],t.prototype,"nightbackWindow",void 0),i([D({displayName:"\u91d1\u5e01\u6570\u91cf",type:cc.Label})],t.prototype,"coin",void 0),i([D({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae\u8282\u70b9",type:cc.Node})],t.prototype,"mainBtnNode",void 0),i([D({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae",type:cc.Sprite})],t.prototype,"mainBtn",void 0),i([D({displayName:"\u4e3b\u83dc\u5355\u6309\u94ae\u56fe",type:[cc.SpriteFrame]})],t.prototype,"mainBtnFrames",void 0),i([D({displayName:"\u5546\u54c1\u9884\u8bbe",type:cc.Prefab})],t.prototype,"itemPrefab",void 0),i([D({displayName:"\u5546\u54c1\u5bb9\u5668",type:cc.Node})],t.prototype,"shopContent",void 0),i([D({displayName:"\u5de6\u8f66\u706f\u6309\u94ae",type:cc.Button})],t.prototype,"leftLightBtn",void 0),i([D({displayName:"\u53f3\u8f66\u706f\u6309\u94ae",type:cc.Button})],t.prototype,"rightLightBtn",void 0),i([D({displayName:"\u6234\u592b\u5bf9\u8bdd",type:y.pzaShopDave})],t.prototype,"dialogDave",void 0),i([D({displayName:"\u94bb\u77f3",type:cc.Node})],t.prototype,"diamond",void 0),i([C],t)}(cc.Component);e.pzaShopView=M,cc._RF.pop()},{"../Battle/Data/pzaGuideType":"pzaGuideType","../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Shop/pzaShopConfig":"pzaShopConfig","../Shop/pzaShopDave":"pzaShopDave","../utils/pzakc":"pzakc","./pzaBuyConfirmView":"pzaBuyConfirmView","./pzaCommonMask":"pzaCommonMask","./pzaShopItem":"pzaShopItem"}],pzaShovelEffect:[function(a,t,e){"use strict";cc._RF.push(t,"180dahVd7hG1a5MYuVZoAx0","pzaShovelEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShovelEffect=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../pzaGameState"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shovelNode=null,t}return n(t,a),t.prototype.init=function(a,t){this.changeShovelPos(a,t),this.shovelNode.stopAllActions(),this.shovelNode.setPosition(cc.v2()),this.shovelNode.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.2,cc.v2(60,60)),cc.moveTo(.3,cc.v2()))))},t.prototype.changeShovelPos=function(a,t){if(null!=a&&null!=a){var e=p.pzaGameState.map.getBlockLogicPos(a,t,0,0),o=p.pzaGameState.map.getXInterval(a),n=p.pzaGameState.map.getYInterval(t);e.x+=.5*o,e.y+=.5*n,this.node.setPosition(e)}else this.close()},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([c({displayName:"\u94f2\u5b50\u8282\u70b9",type:cc.Node})],t.prototype,"shovelNode",void 0),i([s],t)}(cc.Component);e.pzaShovelEffect=u,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../pzaGameState":"pzaGameState"}],pzaShowGrassEffect:[function(a,t,e){"use strict";cc._RF.push(t,"2b996IP4bdIDLNEomB4BUYn","pzaShowGrassEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaShowGrassEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaSpineController"),s=a("../Data/pzaGuideType"),c=a("../pzaGameState"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.grassAni=null,t.grassBlackNode=null,t}return n(t,a),t.prototype.showStaticGrass=function(a){this.grassBlackNode.active=!1,this.grassAni.playAnimation("grass"+a+"_1",!0)},t.prototype.showGrass=function(a,t){this.grassBlackNode.active=!1,p.pzaSoundManager.playAudio("grassstep");var e="grass"+a;this.grassAni.playAnimation(e,!1,t)},t.prototype.update=function(){window.pzaGuideManager.guideType==s.pzaGuideType.GUIDE_PLANT_1_1&&(this.grassBlackNode.active||1!=window.pzaGuideManager.guideStep&&(6!=window.pzaGuideManager.guideStep||null==c.pzaGameState.selectPlant)?!this.grassBlackNode.active||1==window.pzaGuideManager.guideStep||6==window.pzaGuideManager.guideStep&&null!=c.pzaGameState.selectPlant||this.hideBlankGrass():this.blankGrass())},t.prototype.pauseSelf=function(){this.grassAni.pauseAnimation(),this.grassBlackNode.active&&this.grassBlackNode.pauseAllActions()},t.prototype.resumeSelf=function(){this.grassAni.resumeAnimation(),this.grassBlackNode.active&&this.grassBlackNode.resumeAllActions()},t.prototype.blankGrass=function(){this.grassBlackNode.stopAllActions(),this.grassBlackNode.active=!0,this.grassBlackNode.opacity=0,this.grassBlackNode.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.4,177),cc.fadeOut(.4))))},t.prototype.hideBlankGrass=function(){this.grassBlackNode.active=!1},i([h({displayName:"\u8349\u5730\u52a8\u753b",type:l.pzaSpineController})],t.prototype,"grassAni",void 0),i([h({displayName:"\u8349\u5730\u9ed1\u52a8\u753b",type:cc.Node})],t.prototype,"grassBlackNode",void 0),i([d],t)}(r.pzaBaseComponent);e.pzaShowGrassEffect=m,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaGuideType":"pzaGuideType","../pzaGameState":"pzaGameState"}],pzaSidebarView:[function(a,t,e){"use strict";cc._RF.push(t,"459adWyfklAsqz4rY8LOrdD","pzaSidebarView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaGamePropConfig"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaRewardManager"),c=a("../Common/pzaSoundManager"),u=a("../utils/pzaChannel"),d=a("../utils/pzakc"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.btnLabel=null,t.hasGet=!1,t}return n(t,a),t.prototype.start=function(){},t.prototype.onEnable=function(){var a=d.default.getData("sidebar",{today:"",canGet:"-1"}),t=new Date,e=t.getUTCFullYear()+"-"+t.getUTCMonth()+"-"+t.getUTCDay();a.today==e?(this.hasGet=!0,this.btnLabel.string="\u5df2\u9886\u53d6"):"1"==a.canGet?(this.hasGet=!1,this.btnLabel.string="\u9886\u53d6"):(this.hasGet=!1,this.btnLabel.string="\u6253\u5f00\u4fa7\u8fb9\u680f")},t.prototype.clickSidebar=function(){var a=this;c.pzaSoundManager.playSFX();var t=d.default.getData("sidebar",{today:"",canGet:"-1"}),e=new Date,o=e.getUTCFullYear()+"-"+e.getUTCMonth()+"-"+e.getUTCDay();if(this.hasGet)console.log("\u4eca\u65e5\u5956\u52b1\u5df2\u9886\u53d6");else if("0"==t.canGet)u.pzaChannel.instance().getChannel().showSidebar(function(t){t&&(a.btnLabel.string="\u9886\u53d6")});else if(o==t.today)console.log("\u4eca\u65e5\u5956\u52b1\u5df2\u9886\u53d6");else{this.hasGet=!0,t.today=o,l.pzaLocalData.data.coin+=200,l.pzaLocalData.addDirty("coin"),d.default.saveData("sidebar",t),this.btnLabel.string="\u5df2\u9886\u53d6";var n=[new p.pzaRewardPropData(p.pzaGamePropEnum.PROP_COIN,200)];s.pzaRewardManager.recieveRewards(n,function(){})}},t.prototype.clickClose=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([f(cc.Label)],t.prototype,"btnLabel",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaSoundManager":"pzaSoundManager","../utils/pzaChannel":"pzaChannel","../utils/pzakc":"pzakc"}],pzaSmallMiniGame:[function(a,t,e){"use strict";cc._RF.push(t,"3c49fk+gI1F5KHZgGXMQrCh","pzaSmallMiniGame");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSmallMiniGame=void 0;var r=a("../Battle/Data/pzaBaseData"),p=a("../Battle/Data/pzaZombieEnum"),l=a("../Battle/Zombie/pzaBaseZombie"),s=a("../Battle/pzaEffectManager"),c=a("../Battle/pzaGameState"),u=a("../Load/pzaBundleObjectPool"),d=a("../Load/pzaPreLoadManager"),h=a("../View/Battle/pzaPlantBeltView"),m=a("../View/pzaCommonMask"),f=a("../utils/pzaChannel"),z=a("./pzaBeltConfig"),y=a("./pzaCollisionManager"),g=a("./pzaGameConfig"),v=a("./pzaGameManager"),b=a("./pzaGameMiniGame"),S=a("./pzaLocalData"),P=a("./pzaSoundManager"),C=a("./pzaStatisticsMgr"),D=a("./pzaUIManager"),M=a("./pzaUtil"),E=a("./pzaWorldEventManager"),_=cc._decorator,T=_.ccclass,w=(_.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.waveZombieDensity=null,t}var e;return n(t,a),e=t,t.prototype.preLoad=function(a,t,e){this.init(),c.pzaGameState.init(a,t,this.gameMode,this.skipPartStar(),0),this.beforeLoad(a,t),c.pzaGameState.isGameEnd=!1,y.pzaCollisionManager.getInstance.setOn();var o=this.getResArr(a,t);D.pzaUIManager.showLoading(),this.initMapPlantZombie(a,t),P.pzaSoundManager.clearAllLoopAudio(),this.readData(a,t),u.pzaBundleObjectPool.preLoadSubResource(o,function(){D.pzaUIManager.hideLoading(e)},function(a){D.pzaUIManager.updateLoadPro(Math.min(100,Math.ceil(100*a)))}),P.pzaSoundManager.playAudio("loadingbar_zombie"),c.pzaGameState.autoPickLock=!1},t.prototype.gameStart=function(a,t){S.pzaLocalData.gameStartTimeStamp=Date.now(),C.pzaStatisticsMgr.sendEvent("leveling",{name:"Leveling",value:parseInt("200"+t)}),c.pzaGameState.gameMode=c.pzaGameMode.MINIGAME_SMALL,this.beforeGameStart(a,t),this.normalStartGameCall(a,t)},t.prototype.beforeGameStart=function(){C.pzaStatisticsMgr.sendEvent("System",{name:"system",value:13}),m.pzaCommonMask.showMask(),s.pzaEffectManager.createGroveEffect()},t.prototype.normalStartGameCall=function(){window.pzaMapManager.previewMap(function(){m.pzaCommonMask.showMask(),window.pzaMapManager.cancelPreviewMap(1,function(){v.pzaGameManager.showBattleUI(d.pzaResourceUrl.PLANT_BELT_VIEW,function(a){var t=a&&a.getComponent(h.pzaPlantBeltView);t&&t.showView(function(){window.pzaMapManager.initCleanCar(),s.pzaEffectManager.createReadyWord(function(){m.pzaCommonMask.hideMask(),window.pzaMapManager.openBattleUI(),c.pzaGameState.gamePause=!1,window.pzazombieManager.nextWaveTime=8,z.pzaBeltConfig.initMiniSmallPlants(),E.pzaWorldEventManager.triggerEvent(E.pzaWorldEventType.GAME_RESUME,null),P.pzaSoundManager.playBgm(P.pzaBGMName.BOWLING_BGM)})})})})},!0)},t.prototype.createWave=function(t){a.prototype.createWave.call(this,t),t.nextWaveTime=g.pzaGameConfig.miniZombieWaveInterval;var e=this.getConf(c.pzaGameState.curPart);if(!(null==e||e.maxWave<t.wave)){e.maxWave==t.wave&&(t.lastWave=!0);var o=this.getRandomWaveZombie(t.wave,!0,window.pzaMapManager.getIceYCount(),0,c.pzaGameState.redLeft);if(null!=o){var n=[];window.pzaMapManager.IceGroundSet.forEach(function(a){null==a||a.xIndex<0||a.yIndex<0||n.indexOf(a.yIndex)>=0||n.push(a.yIndex)});for(var i=c.pzaGameState.map.getMapRow(),r=!0,l=[],s=[],u=0;u<i;u++)s.push(u);s.sort(function(){return Math.random()-.5});var d=0;o.forEach(function(a){var e=window.pzaMapManager.getRandomWayIndex(d,a,s);if(d++,a==p.pzaZombieEnum.BUNGEE_ZOMBIE){var o=window.pzaplantManager.getRandomBlock(!0,l);if(null==o)return;l.push(o);var i=o.split("-"),u=t.createFixBlockZombieData(a,parseInt(i[0]),parseInt(i[1]));return t.createZombie(u),void t.curWaveZombieDatas.add(u)}a==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&n.length>0&&(e=n.shift());var h=t.createZombieData(a,e);!r&&h.logicPos&&(h.logicPos.x+=M.pzaUtil.getRandomFloatNum(.2,1)*c.pzaGameState.map.getBlockWidth()),t.createZombie(h),t.curWaveZombieDatas.add(h),r=!1}),t.lastWave&&(t.lastWayZombieTime=2)}}},t.prototype.lastTombWaterZombie=function(a){var t=this.getConf(c.pzaGameState.curPart);if(null!=t&&t.lastWaterWaveZombie>0){for(var e=[],o=t.lastWaterWaveMinColumn-1;o<9;o++)e.push([o,2]),e.push([o,3]);e.sort(function(){return Math.random()-.5});for(var n=0;n<t.lastWaterWaveZombie;n++){var i=e[n];if(null!=i){var r=this.getRandomDiveZombie(),p=a.createFixBlockZombieData(r,i[0],i[1]);a.createZombie(p,!1,!1,!0),a.curWaveZombieDatas.add(p)}}}},t.prototype.getRandomDiveZombie=function(){var a=[p.pzaZombieEnum.DUCKY_TUBE_ZOMBIE],t=this.getConf(c.pzaGameState.curPart).zombieTypes;null!=t&&(t.indexOf(p.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE)>=0&&a.push(p.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),t.indexOf(p.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE)>=0&&a.push(p.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE));var e=[];return a.forEach(function(a){var t=g.pzaGameConfig.getZombieConfig(a);e.push(t.refrshWeight)}),a[M.pzaUtil.getRandomIndexByWeight(e)]},t.prototype.getRandomWaveZombie=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[];if(this.waveZombieDensity=this.getConf(c.pzaGameState.curPart).waveZombieDensity,null==this.waveZombieDensity||a-1<0)return[p.pzaZombieEnum.ZOMBIE];var r=this.waveZombieDensity[a-1];if(null==r||r<=1)return[p.pzaZombieEnum.ZOMBIE];if(t&&a%10==0){i.push(p.pzaZombieEnum.FLAG_ZOMBIE),r-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.FLAG_ZOMBIE);for(var l=Math.min(Math.floor(r/2),8),s=0;s<l;s++)i.push(p.pzaZombieEnum.ZOMBIE),r-=g.pzaGameConfig.getZombieLevel(p.pzaZombieEnum.ZOMBIE)}var u=this.getConf(c.pzaGameState.curPart),d=u.maxWave,h=u.zombieTypes;for(a==d&&a>=10&&h.forEach(function(a){a!=p.pzaZombieEnum.ZOMBIE&&(i.push(a),r-=g.pzaGameConfig.getZombieLevel(a))});r>0;){var m=this.getRandomZombie1(r,a,e,o,n);if(null==m)break;if(m==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?e--:m==p.pzaZombieEnum.RED_GARGANTUAR&&a%10!=0&&n--,i.push(m),i.length>=50)break;r-=g.pzaGameConfig.getZombieLevel(m)}return i},t.prototype.getRandomZombie1=function(a,t,e,o,n){void 0===o&&(o=0),void 0===n&&(n=0);var i=[],r=[];if(this.getConf(c.pzaGameState.curPart).zombieTypes.forEach(function(e){if(null!=e){var l=g.pzaGameConfig.getZombieConfig(e);null==l||0==l.refrshWeight||l.refreshLevel>a||l.refrshMinWave>t||o>0&&e==p.pzaZombieEnum.RED_GARGANTUAR&&n<=0&&t%10!=0||(i.push(e),r.push(l.refrshWeight))}}),e>0){var l=g.pzaGameConfig.getZombieConfig(p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM);null!=l&&l.refreshLevel<=a&&(i.push(p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM),r.push(l.refrshWeight))}var s=M.pzaUtil.getRandomIndexByWeight(r);return i[s]},t.prototype.createPreviewZombie=function(a,t){var e=M.pzaUtil.getRandomNum(13,14),o=g.pzaGameConfig.miniZombieScale,n=this.getPreviewZombies(e);if(null!=n){var i=[];5==t?(i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),75)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),75)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),125)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),125)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),175)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),175)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),225)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),225)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),275)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),275)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),325)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),325)),i.push(cc.v2(1450+M.pzaUtil.getRandomFloatNum(-25,25),375)),i.push(cc.v2(1550+M.pzaUtil.getRandomFloatNum(-25,25),375)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),75)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),75)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),125)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),125)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),175)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),175)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),225)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),225)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),275)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),275)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),325)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),325)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),375)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),375)),i.push(cc.v2(1650+M.pzaUtil.getRandomFloatNum(-25,25),410)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),410))):(i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),40)),i.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),40)),i.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),40)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),90)),i.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),90)),i.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),90)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),140)),i.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),140)),i.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),140)),i.push(cc.v2(1750+M.pzaUtil.getRandomFloatNum(-25,25),190)),i.push(cc.v2(1925+M.pzaUtil.getRandomFloatNum(-25,25),190)),i.push(cc.v2(2025+M.pzaUtil.getRandomFloatNum(-25,25),190)),i.push(cc.v2(1680+M.pzaUtil.getRandomFloatNum(-20,20),240)),i.push(cc.v2(1780+M.pzaUtil.getRandomFloatNum(-20,20),240)),i.push(cc.v2(1880+M.pzaUtil.getRandomFloatNum(-20,20),240)),i.push(cc.v2(1680+M.pzaUtil.getRandomFloatNum(-20,20),290)),i.push(cc.v2(1780+M.pzaUtil.getRandomFloatNum(-20,20),290)),i.push(cc.v2(1880+M.pzaUtil.getRandomFloatNum(-20,20),290)),i.push(cc.v2(1680+M.pzaUtil.getRandomFloatNum(-20,20),340)),i.push(cc.v2(1780+M.pzaUtil.getRandomFloatNum(-20,20),340)),i.push(cc.v2(1880+M.pzaUtil.getRandomFloatNum(-20,20),340)),i.push(cc.v2(1670+M.pzaUtil.getRandomFloatNum(-30,30),390)),i.push(cc.v2(1770+M.pzaUtil.getRandomFloatNum(-30,30),390)),i.push(cc.v2(1670+M.pzaUtil.getRandomFloatNum(-30,30),440)),i.push(cc.v2(1770+M.pzaUtil.getRandomFloatNum(-30,30),440)),i.push(cc.v2(1670+M.pzaUtil.getRandomFloatNum(-30,30),490)),i.push(cc.v2(1770+M.pzaUtil.getRandomFloatNum(-30,30),490)),i.push(cc.v2(1660+M.pzaUtil.getRandomFloatNum(-20,20),540)),i.push(cc.v2(1700+M.pzaUtil.getRandomFloatNum(-20,20),540))),i.sort(function(){return Math.random()-.5});for(var s=function(t,e){var n=d.pzaPreLoadManager.getZombieUrl(t);u.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(n,i){if(null==n&&null!=i){i.setParent(a.previewZombieNode),i.setPosition(e),i.zIndex=-e.y;var p=i.getComponent(l.pzaBaseZombie),s=new r.pzaBaseData(null,t);s.hp=1,s.logicPos=e,p&&p.preview(s,a.previewShadowNode,o),a.PreviewZombies.add(p)}else console.error(n)})},c=0;c<n.length;c++){var h=n[c],m=i[c];h==p.pzaZombieEnum.BUNGEE_ZOMBIE&&(m=5==t?cc.v2(1400,500+100*Math.random()):cc.v2(1650,500+100*Math.random())),s(h,m)}P.pzaSoundManager.playBgm(P.pzaBGMName.PRE_BGM)}},t.prototype.showBattleDown=function(t){a.prototype.showBattleDown.call(this,t),t.sunUIShowNode.active=!1,t.skipPartBtn.active=!1,t.freePlantNode.active=!1,t.speedBtn.active=!0},t.prototype.showBattlePropButtons=function(a){a.freeSunNode.active=!1,f.pzaChannel.isConfRemote?a.cherryBombNode.active=!0:a.cherryBombNode.active=!1,a.autoPickNode.active=!0,a.clearCDNode.active=!1},t.prototype.isLastWave=function(a){var t=v.pzaGameManager.getGame(c.pzaGameMode.MINIGAME_SMALL,e).getConf(c.pzaGameState.curPart);return a.wave==t.maxWave},t.prototype.initPartProcess=function(a){a.proLabel.node.active=!1;var t=v.pzaGameManager.getGame(c.pzaGameMode.MINIGAME_SMALL,e).getConf(c.pzaGameState.curPart);a.maxWave=t.maxWave;for(var o=Math.floor(a.maxWave/10),n=0;n<a.partFlags.length;n++){var i=a.partFlags[n];n+1>o?i.active=!1:(i.active=!0,i.setPosition(-315*(n+1)/o-30,42))}a.zombieHeadNode.setPosition(-15,37),a.partProNode.active=!1,a.partProgress.fillRange=0;var r=this.getConf(c.pzaGameState.curPart).name;a.partLabel.string=r},e=i([T],t)}(b.pzaGameMiniGame));e.pzaSmallMiniGame=w,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Battle/pzaEffectManager":"pzaEffectManager","../Battle/pzaGameState":"pzaGameState","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantBeltView":"pzaPlantBeltView","../View/pzaCommonMask":"pzaCommonMask","../utils/pzaChannel":"pzaChannel","./pzaBeltConfig":"pzaBeltConfig","./pzaCollisionManager":"pzaCollisionManager","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGameMiniGame":"pzaGameMiniGame","./pzaLocalData":"pzaLocalData","./pzaSoundManager":"pzaSoundManager","./pzaStatisticsMgr":"pzaStatisticsMgr","./pzaUIManager":"pzaUIManager","./pzaUtil":"pzaUtil","./pzaWorldEventManager":"pzaWorldEventManager"}],pzaSnorkelZombie:[function(a,t,e){"use strict";cc._RF.push(t,"17264xFfYRMaY/c70hgyGYu","pzaSnorkelZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSnorkelZombie=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../pzaEffectManager"),s=a("./pzaBaseZombie"),c=a("./pzaZombieState"),u=a("./pzaZombieSlot"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="biaoqing2",t.diving=!1,t.isJumping=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[u.pzaZombieSlotType.butter,new u.pzaZombieSlot(this.animation.spineAnimation,u.pzaZombieSlotType.butter).addState(new u.pzaZombieSlotAtt(1,u.pzaZombieSlotType.butter,-19.69,85.77))]])},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.animation.node.y=20},t.prototype.preview=function(t,e,o){a.prototype.preview.call(this,t,e,o),this.animation.node.y=20*this.zombieScale},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.diving=!1,this.animation.node.y=20*this.zombieScale},t.prototype.updateMove=function(t){var e=this;if(!this.diving&&!this.isJumping){var o=this.baseData.xIndex;if(o>=0&&!this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE))return this.diving=!0,void this.animation.playAnimation("down",!1,function(){e.diving=!1,e.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.DIVE,-1))});a.prototype.updateMove.call(this,t);var n=this.baseData.xIndex;o<0&&n>=0?(this.baseData.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.DIVE,-1)),this.curShadow&&this.curShadow.hideShadow(),this.isJumping=!0,this.animation.playAnimation("jump",!1,function(){e.isJumping=!1,e.playMoveAnimation()},function(){r.pzaSoundManager.playAudio("zombie_entering_water"),l.pzaEffectManager.createWaterFlowerEffect(e.baseData.yIndex,e.baseData.logicPos,null)})):n<0&&o>=0&&(null!=this.mask&&(this.mask.enabled=!0),r.pzaSoundManager.playAudio("zombie_leave_water"),l.pzaEffectManager.createWaterFlowerEffect(this.baseData.yIndex,this.baseData.logicPos,null),this.animation.node.y=-85*this.zombieScale,this.animation.playAnimation("move",!0),this.animation.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,20*this.zombieScale)),cc.callFunc(function(){e.curShadow&&e.curShadow.showShadow(),null!=e.mask&&(e.mask.enabled=!1)}))))}},t.prototype.attack=function(t,e){var o=this;if(!this.diving)return this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE)?(this.diving=!0,r.pzaSoundManager.playAudio("zombie_leave_water"),void this.animation.playAnimation("up",!1,function(){o.diving=!1,o.baseData.buffData.removeBuff(p.pzaBuffType.DIVE)})):void a.prototype.attack.call(this,t,e)},t.prototype.playMoveAnimation=function(){this.zombieState=c.pzaZombieState.MOVE,this.baseData.buffData.hasBuff(p.pzaBuffType.DIVE)?this.animation.playAnimation("move2",!0):this.animation.playAnimation("move",!0)},i([h],t)}(s.pzaBaseZombie));e.pzaSnorkelZombie=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzaSnowBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"7c6fbo6q+BFrawlX/VV8KkB","pzaSnowBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSnowBaseBullet=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Effect/pzaBaseEffect"),u=a("./pzaBaseBullet"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.colliderZombie=function(a){if(a&&!a.isDead)if(null!=a.zombieData){if(a.zombieData&&a.zombieData.hypnosis)this.close();else if(!a.buffData.hasBuff(l.pzaBuffType.DIVE)&&!a.buffData.hasBuff(l.pzaBuffType.FLY))if(a.buffData.hasBuff(l.pzaBuffType.INVINCIBLE))this.close();else{var t=window.pzazombieManager.getZombie(a);if(null!=t){if(t.hurt(this.atk),this.close(),this.hitPrefab){var e=cc.v2(this.node.x,this.node.y),o=p.pzaNodeManager.getPlantZombieNode(),n=r.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.setPosition(e);var i=n.getComponent(c.pzaBaseEffect);i&&i.showEffect(null,null),a.buffData.hasBuff(l.pzaBuffType.IMM_ICE)||t.baseData.buffData.hasBuff(l.pzaBuffType.HARD_BODY)||t.baseData.zombieData.zombieType!=s.pzaZombieEnum.NightWear&&a.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.FROST,10,.5))}}else this.close()}}else this.close()},i([h],t)}(u.pzaBaseBullet));e.pzaSnowBaseBullet=m,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","./pzaBaseBullet":"pzaBaseBullet"}],pzaSnowPea:[function(a,t,e){"use strict";cc._RF.push(t,"d0858T0P0xCCbkWdXg2wTUe","pzaSnowPea");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSnowPea=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),d.pzaGameState.isZombieMode())return this.attacking=!1,void this.animation.playAnimation("T_idle",!0);this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(window.pzazombieManager.hasCanAttackZombie(e.baseData)){var a=s.pzaUtil.getRandomNum(1,4),t=0;return l.pzaSoundManager.playAudio("SnowPeaAtk"),void e.animation.playAnimation("attack",!1,o,function(){a==++t&&e.shoot()})}e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle2",!1,o))};o(),d.pzaGameState.usePeaPlant=!0,d.pzaGameState.onlyShroomCofee=!1,d.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData&&(this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()&&(window.pzazombieManager.hasCanAttackZombie(this.baseData)||this.findAttackTarget()))){var o=s.pzaUtil.getRandomNum(1,4),n=0;return l.pzaSoundManager.playAudio("SnowPeaAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){o==++n&&e.shoot()})}},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a){var t=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=t){t.setParent(a);var e=this.shootNode.convertToWorldSpaceAR(cc.v2()),o=a.convertToNodeSpaceAR(e);t.setPosition(o);var n=t.getComponent(c.pzaBaseBullet);if(null!=n){n.init(this.baseData.yIndex,this.baseData.atk);var i=d.pzaGameState.map.getMapSkewColumn();i>0&&this.baseData.xIndex<=i-2&&(n.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},t.prototype.findAttackTarget=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)?null:a.baseData},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaSnowPea=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSoundManager:[function(a,t,e){"use strict";cc._RF.push(t,"b22d3Pe1rVO/psEpbJ2xye9","pzaSoundManager");var o=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var o,n,i=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBGMName=e.pzaSoundManager=void 0;var i=a("../../start/pzaBundleController"),r=a("./pzaLocalData"),p=function(){function a(){}return a.playAudio=function(a,t,e){var o=this;r.pzaLocalData.data.soundValue<=0||this.getAudioByName(a,function(a){if(null!=a){if(null!=t){var n=Date.now(),i=o.soundTimeMap.get(a);if(null!=i&&(n-i)/1e3<t)return;o.soundTimeMap.set(a,n)}var r=cc.audioEngine.playEffect(a,!1);e&&e(r)}})},a.getAudioByName=function(a,t){var e=this;if(null!=a){var o=this.gameSoundMap.get(a);null==o?cc.assetManager.loadBundle(i.pzaBundleType.Audio,function(o,n){!o&&n?n.load(a,cc.AudioClip,function(o,n){!o&&n?(t&&t(n),e.gameSoundMap.set(a,n)):console.error(o)}):console.error(o)}):t&&t(o)}},a.playBattleAudio=function(a,t,e){r.pzaLocalData.data.soundValue<=0||this.playAudio(a,t,e)},a.stop=function(a){null!=a&&cc.audioEngine.getState(a)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.stop(a)},a.playBgm=function(a){var t=this;if(!(null!=a&&a==this.lastbgmName&&cc.audioEngine.isMusicPlaying()||(null==a&&(a=this.lastbgmName),null==a||(this.lastbgmName=a,r.pzaLocalData.data.musicValue<=0)))){var e=this.gameSoundMap.get(a);if(e)return cc.audioEngine.playMusic(e,!0),void this.setMusicVolume(r.pzaLocalData.data.musicValue);this.getAudioByName(a,function(a){cc.audioEngine.playMusic(a,!0),t.setMusicVolume(r.pzaLocalData.data.musicValue)})}},a.stopBgm=function(){cc.audioEngine.isMusicPlaying()&&cc.audioEngine.stopMusic(),this.clearAllLoopAudio()},a.pausePlayMusic=function(){cc.audioEngine.isMusicPlaying()&&cc.audioEngine.pauseMusic(),this.stopLoopAudio(),this.stopLongAudio()},a.setMusicVolume=function(a){null==a||a<=0?this.stopBgm():cc.audioEngine.isMusicPlaying()?cc.audioEngine.setMusicVolume(a):this.resumeMusic()},a.resumeMusic=function(){r.pzaLocalData.data.musicValue<=0||(cc.audioEngine.resumeMusic(),null==this.lastbgmName||cc.audioEngine.isMusicPlaying()||this.playBgm(this.lastbgmName),this.resumeLoopAudio(),this.resumeLongAudio())},a.playLongAudio=function(a,t,e,o){var n=this;r.pzaLocalData.data.soundValue<=0||this.getAudioByName(a,function(i){if(null!=i){if(null!=e){var r=Date.now(),p=n.soundTimeMap.get(i);if(null!=p&&(r-p)/1e3<e)return;n.soundTimeMap.set(i,r)}var l=cc.audioEngine.playEffect(i,!1),s=a+t;n.longAudioMap.set(s,l),n.longId2AudioIdMap.set(t,l),o&&o(l)}})},a.resumeLongAudio=function(){var a,t;if(this.longAudioMap.size>0)try{for(var e=o(this.longAudioMap),i=e.next();!i.done;i=e.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PAUSED&&cc.audioEngine.resume(p)}}catch(l){a={error:l}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(a)throw a.error}}},a.stopLongAudio=function(){var a,t;if(this.longAudioMap.size>0)try{for(var e=o(this.longAudioMap),i=e.next();!i.done;i=e.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.pause(p)}}catch(l){a={error:l}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(a)throw a.error}}},a.deleteLongAudio=function(a,t){if(null!=a){var e=this.longId2AudioIdMap.get(t);cc.audioEngine.getState(e)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.stop(e),this.longId2AudioIdMap.delete(t);var o=a+t;this.longAudioMap.delete(o)}},a.cleatAllLongAudio=function(){this.longAudioMap.forEach(function(a){cc.audioEngine.stop(a)}),this.longAudioMap.clear(),this.longId2AudioIdMap.clear()},a.playLoopAudio=function(a,t,e){var o=this;if(!(r.pzaLocalData.data.soundValue<=0||null==a||this.loopAudioNameArr.indexOf(a)>=0)){var n=this.loopSoundMap.get(a);cc.audioEngine.getState(n)!=cc.audioEngine.AudioState.PLAYING&&(this.getAudioByName(a,function(n){if(null!=n){var i=cc.audioEngine.playEffect(n,t);o.loopSoundMap.set(a,i),e&&e(i)}}),this.loopAudioNameArr.push(a))}},a.stopLoopAudio=function(){var a,t;try{for(var e=o(this.loopSoundMap),i=e.next();!i.done;i=e.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.pause(p)}}catch(l){a={error:l}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(a)throw a.error}}},a.resumeLoopAudio=function(){var a,t;try{for(var e=o(this.loopSoundMap),i=e.next();!i.done;i=e.next()){var r=n(i.value,2),p=(r[0],r[1]);cc.audioEngine.getState(p)==cc.audioEngine.AudioState.PAUSED&&cc.audioEngine.resume(p)}}catch(l){a={error:l}}finally{try{i&&!i.done&&(t=e.return)&&t.call(e)}finally{if(a)throw a.error}}},a.deleteLoopAudioName=function(a){if(!(null==a||this.loopAudioNameArr.indexOf(a)<0)){var t=this.loopSoundMap.get(a);if(t){if(cc.audioEngine.getState(t)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.stop(t),this.loopSoundMap.delete(a),this.loopAudioNameArr.indexOf(a)>=0){var e=this.loopAudioNameArr.indexOf(a);this.loopAudioNameArr.splice(e,1)}}else console.error("audioName\u4e0d\u5b58\u5728",a)}},a.clearAllLoopAudio=function(){this.loopSoundMap.forEach(function(a){cc.audioEngine.stop(a)}),this.loopSoundMap.clear(),this.loopAudioNameArr=[],this.cleatAllLongAudio()},a.playSFX=function(){var a=Math.random()>.5?"tap":"tap2";this.playAudio(a)},a.gameSoundMap=new Map,a.soundTimeMap=new Map,a.loopSoundMap=new Map,a.loopAudioNameArr=[],a.longAudioMap=new Map,a.longId2AudioIdMap=new Map,a.lastbgmName=null,a}();e.pzaSoundManager=p,function(a){a.LOADING="loadingbgm",a.PRE_BGM="fightbeforebgm",a.CHAPTER_1="Grasswalk",a.CHAPTER_2="Moongrains",a.CHAPTER_3="WateryGraves",a.CHAPTER_4="RigorMormist",a.CHAPTER_5="GrazetheRoof",a.GARDEN="ZenGarden",a.BOWLING_BGM="BowlingBgm",a.BELT_BGM="BeltBgm",a.PUZZLE_BGM="PuzzleBgm",a.RAIN_BGM="rain",a.NEWPLANT_BGM="newplant",a.ZOMBIEBOSS_BGM="zombiebossbgm"}(e.pzaBGMName||(e.pzaBGMName={})),cc._RF.pop()},{"../../start/pzaBundleController":"pzaBundleController","./pzaLocalData":"pzaLocalData"}],pzaSpeedBlinkEffect:[function(a,t,e){"use strict";cc._RF.push(t,"3ba1eDemKtOa7Hl1T9eYLkk","pzaSpeedBlinkEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpeedBlinkEffect=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani=null,t.mask=null,t}return n(t,a),t.prototype.blinkGreen=function(){this.node.active=!0,this.mask.color=cc.Color.fromHEX(cc.color(),"#78db30"),this.ani.play("speed_blink")},t.prototype.blinkRed=function(){this.node.active=!0,this.mask.color=cc.Color.fromHEX(cc.color(),"#ff865e"),this.ani.play("speed_blink")},t.prototype.blinkWhite=function(){this.node.active=!0,this.mask.color=cc.Color.fromHEX(cc.color(),"#ffffff"),this.ani.play("speed_blink")},i([l({displayName:"\u52a8\u753b",type:cc.Animation})],t.prototype,"ani",void 0),i([l({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([p],t)}(cc.Component);e.pzaSpeedBlinkEffect=s,cc._RF.pop()},{}],pzaSpikeChomper:[function(a,t,e){"use strict";cc._RF.push(t,"3c7b00HOItMMJjB7u3FLeto","pzaSpikeChomper");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpikeChomper=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.eating=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.eating=!1,this.baseData.plantData.eatTime=0,this.baseData.plantData.cate=s.pzaPlantCate.Spike,this.animation.playAnimation("idle1",!0),this.baseData.plantData.atkInterval=0,this.baseData.plantData.atkInterval2=0},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead&&!this.eating){if(this.baseData.plantData.eatTime>0)return this.baseData.plantData.eatTime-=t,this.baseData.plantData.eatTime<=0?(this.eating=!0,void this.animation.playAnimation("back",!1,function(){e.eating=!1,e.animation.playAnimation("idle1",!0)})):(this.baseData.plantData.atkInterval-=t,void(this.baseData.plantData.atkInterval<0&&this.findSpikeAttackTarget()&&(this.baseData.plantData.atkInterval=this.atkInterval,this.spikeAttack())));if(this.baseData.plantData.atkInterval2>0)this.baseData.plantData.atkInterval2-=t;else{var o=this.findAttackTarget();null!=o&&(this.baseData.plantData.atkInterval2=1.5,this.attack(o))}}},t.prototype.findAttackTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1;if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.DIVE))&&(o.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(l.pzaBuffType.FROZEN)||o.zombieData.toolType==c.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType!=c.pzaZombieEnum.BUNGEE_ZOMBIE||o.xIndex!=a.baseData.xIndex)){var n=p.pzaUtil.getDistance(o.logicPos,a.baseData.logicPos);if(o.logicPos.x<=a.baseData.logicPos.x)n<=.5*u.pzaGameState.map.getBlockWidth()&&(t=o,e=0);else if(!(n>1.8*u.pzaGameState.map.getBlockWidth()))return-1==e?(t=o,void(e=n)):void(e<=n||(t=o,e=n))}}),null==t){var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t}},t.prototype.findSpikeAttackTarget=function(){var a=this;if(null==this.baseData)return null;var t=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(e){null==t&&(null==e||e.isDead||e.buffData.hasBuff(l.pzaBuffType.FLY)||e.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||e.xIndex==a.baseData.xIndex&&(t=e))}),t},t.prototype.spikeAttack=function(){var a=this;r.pzaSoundManager.playAudio("Spikeweed"),this.animation.playAnimation("attack2",!1,function(){a.animation.playAnimation(a.baseData.plantData.eatTime>0?"idle2":"idle1",!0)}),null==this.baseData||this.baseData.isDead||window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(!(null==t||t.isDead||t.buffData.hasBuff(l.pzaBuffType.FLY)||t.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT))&&t.xIndex==a.baseData.xIndex){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.plantData.atkArr[1],a.baseData,d.pzaAttackType.SPIKE)}})},t.prototype.attack=function(a){var t=this;this.baseData.plantData.eatTime=40,this.animation.playAnimation("attack1",!1,function(){t.animation.playAnimation(t.baseData.plantData.eatTime>0?"idle2":"idle1",!0)},function(){if(t.baseData&&!t.baseData.isDead){var e=window.pzazombieManager.getZombie(a);if(null==e||null==e.baseData||e.baseData.isDead)t.baseData.plantData.eatTime=0;else{if(null!=a.zombieData&&(a.zombieData.cate===c.pzaZombieCate.Gargantuar||a.zombieData.cate===c.pzaZombieCate.IceCar||a.zombieData.zombieType==c.pzaZombieEnum.DR_ZOMBOSS))return e.hurt(t.baseData.atk,t.baseData,d.pzaAttackType.FLOOR_ATK),void(t.baseData.plantData.eatTime=0);e.hurt(t.baseData.atk,t.baseData,d.pzaAttackType.EAT),r.pzaSoundManager.playAudio("ChomperAtk"),a.isDead||(t.baseData.plantData.eatTime=0)}}})},t.prototype.hurt=function(a,t,e){if(this.baseData)if(e==d.pzaAttackType.BOOM)window.pzaplantManager.removePlant(this.baseData),this.death(t);else if(e==d.pzaAttackType.BANG)return this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()},t.prototype.deadAttack=function(){var a=this;window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(!(null==t||t.isDead||t.buffData.hasBuff(l.pzaBuffType.FLY)||t.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT))&&t.xIndex==a.baseData.xIndex){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(1800,a.baseData,d.pzaAttackType.FLOOR_ATK)}})},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.deadAttack()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.deadAttack()},i([f],t)}(h.pzaBasePlant));e.pzaSpikeChomper=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSpikeRockNut:[function(a,t,e){"use strict";cc._RF.push(t,"304beCVvU9EGZSEPDWKsxKD","pzaSpikeRockNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpikeRockNut=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaPlantEnum"),s=a("./pzaAttackType"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.xArr=[],t}return n(t,a),t.prototype.canAttack=function(a){for(var t=0;t<this.xArr.length;t++)if(a===this.xArr[t])return!0;return!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=l.pzaPlantCate.Nut;var e=this.baseData.xIndex;this.xArr=[e],0==e?this.xArr.push(e+1):8==e?this.xArr.push(e-1):(this.xArr.push(e-1),this.xArr.push(e+1)),this.animation.playAnimation("idle",!0)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.atkInterval-=t,this.atkInterval>0||(this.atkInterval=this.baseData.plantData.atkInterval,null!=this.findAttackTarget()&&this.attack())},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData)return null;var t=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(e){null==t&&(null==e||e.isDead||e.buffData.hasBuff(p.pzaBuffType.FLY)||e.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)||a.canAttack(e.xIndex)&&(t=e))}),t},t.prototype.attack=function(){var a=this;r.pzaSoundManager.playAudio("Spikeweed"),this.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("idle",!0)}),null==this.baseData||this.baseData.isDead||window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(a.baseData&&t&&!t.isDead&&!t.buffData.hasBuff(p.pzaBuffType.FLY)&&!t.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)&&a.canAttack(t.xIndex)){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,s.pzaAttackType.SPIKE)}})},t.prototype.hurt=function(a,t,e){if(this.baseData)if(e==s.pzaAttackType.BOOM)window.pzaplantManager.removePlant(this.baseData),this.death(t);else if(e==s.pzaAttackType.BANG){if(a=this.baseData.maxHp/8,this.baseData.hurtPlanet(a),this.refreshHurtState(!1),!this.baseData.isDead)return;return window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin1")},i([d],t)}(c.pzaBasePlant));e.pzaSpikeRockNut=h,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSpikerock:[function(a,t,e){"use strict";cc._RF.push(t,"fd1cd8QNDZCH6f0AV+eOBfD","pzaSpikerock");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpikerock=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaTipManager"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaPlantEnum"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=c.pzaPlantCate.Spike,this.animation.playAnimation("idle",!0),this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),u.pzaGameState.onlyShroomCofee=!1,u.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.isDead||(this.blinkTime-=t,this.baseData.plantData.atkInterval+=t,this.baseData.plantData.atkInterval<this.atkInterval?this.blinkTime<=0&&(this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("idle_eye",!1,function(){e.animation.playAnimation("idle",!0)})):null!=this.findAttackTarget()&&this.attack())},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData)return null;var t=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(e){null==t&&(null==e||e.isDead||e.buffData.hasBuff(s.pzaBuffType.FLY)||e.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||e.xIndex==a.baseData.xIndex&&(t=e))}),t},t.prototype.attack=function(){var a=this;r.pzaSoundManager.playAudio("Spikeweed"),this.animation.playAnimation("attack",!1,function(){a.animation.playAnimation("idle",!0)}),null==this.baseData||this.baseData.isDead||(this.baseData.plantData.atkInterval=0,window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(a.baseData&&null!=t&&!t.isDead&&!t.buffData.hasBuff(s.pzaBuffType.FLY)&&!t.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)&&t.xIndex==a.baseData.xIndex){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.SPIKE)}}))},t.prototype.hurt=function(a,t,e){var o;if(this.baseData)if(e==d.pzaAttackType.BOOM)window.pzaplantManager.removePlant(this.baseData),this.death(t),0,o=1==u.pzaGameState.curChapter||3==u.pzaGameState.curChapter||5==u.pzaGameState.curChapter||6==u.pzaGameState.curChapter||8==u.pzaGameState.curChapter||10==u.pzaGameState.curChapter?4:6,u.pzaGameState.partStar>0&&u.pzaGameState.lossPlantCount==o&&(p.pzaTipManager.showLossStarTip(!1,!0),u.pzaGameState.partStar--),u.pzaGameState.lossPlantCount++;else if(e==d.pzaAttackType.BANG){if(this.baseData.hurtPlanet(a),this.refreshHurtState(!1),!this.baseData.isDead)return;return window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()}},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin1")},i([f],t)}(h.pzaBasePlant));e.pzaSpikerock=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSpikeweed:[function(a,t,e){"use strict";cc._RF.push(t,"4ecf2vQkM1HfaFg6WAuXHm/","pzaSpikeweed");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpikeweed=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaTipManager"),l=a("../../Common/pzaUtil"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaPlantEnum"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=c.pzaPlantCate.Spike,t.plantData.canBeShoot=!1;var o=u.pzaGameState.isZombieMode()?"T_idle":"idle";if(this.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),u.pzaGameState.onlyShroomCofee=!1,u.pzaGameState.onlyBoomPlant=!1,this.baseData.plantData.atkInterval=this.atkInterval,u.pzaGameState.isZombieMode())this.animation.playAnimation(o,!0);else{var n=function(){e.blinkTime>0?e.animation.playAnimation(o,!1,n):(e.blinkTime=l.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,n))};n()}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.isDead||(this.blinkTime-=t,this.baseData.plantData.atkInterval-=t,this.baseData.plantData.atkInterval>0||(this.baseData.plantData.atkInterval=this.atkInterval,null!=this.findAttackTarget()&&this.attack()))},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData)return null;var t=null;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(e){null==t&&(null==e||e.isDead||e.buffData.hasBuff(s.pzaBuffType.FLY)||e.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||e.xIndex==a.baseData.xIndex&&(t=e))}),t},t.prototype.attack=function(){var a=this;r.pzaSoundManager.playAudio("Spikeweed"),this.animation.playAnimation(u.pzaGameState.isZombieMode()?"T_attack":"attack",!1,function(){a.animation.playAnimation(u.pzaGameState.isZombieMode()?"T_idle":"idle",!0)}),null==this.baseData||this.baseData.isDead||window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(t){if(a.baseData&&t&&!t.isDead&&!t.buffData.hasBuff(s.pzaBuffType.FLY)&&!t.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)&&t.xIndex==a.baseData.xIndex){var e=window.pzazombieManager.getZombie(t);e&&e.hurt(a.baseData.atk,a.baseData,d.pzaAttackType.SPIKE)}})},t.prototype.hurt=function(a,t,e){var o;if(this.baseData)if(e==d.pzaAttackType.BOOM)window.pzaplantManager.removePlant(this.baseData),0,o=1==u.pzaGameState.curChapter||3==u.pzaGameState.curChapter||5==u.pzaGameState.curChapter||6==u.pzaGameState.curChapter||8==u.pzaGameState.curChapter||10==u.pzaGameState.curChapter?4:6,u.pzaGameState.partStar>0&&u.pzaGameState.lossPlantCount==o&&(p.pzaTipManager.showLossStarTip(!1,!0),u.pzaGameState.partStar--),u.pzaGameState.lossPlantCount++,this.death(t);else if(e==d.pzaAttackType.BANG)return this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),void this.flaserDeath()},i([f],t)}(h.pzaBasePlant));e.pzaSpikeweed=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaTipManager":"pzaTipManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSpineController:[function(a,t,e){"use strict";cc._RF.push(t,"261d4+Q1HdGA5w3tjdBw83c","pzaSpineController");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpineController=void 0;var r=cc._decorator,p=r.ccclass,l=r.property,s=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spineAnimation=null,t.activeFlash=!1,t._material=null,t.flashTime=0,t.lightTime=0,t.currentTimeScale=1,t}return n(t,a),t.prototype.onLoad=function(){this.activeFlash&&(this._material=this.spineAnimation.getMaterial(0))},t.prototype.onEnable=function(){this.activeFlash&&(this._material.setProperty("u_rate",1),this.flashTime=0,this.lightTime=0)},t.prototype.playAnimation=function(a,t,e,o,n){void 0===o&&(o=null),void 0===n&&(n=1),e?this.spineAnimation.setCompleteListener(e):this.spineAnimation.setCompleteListener(null),o?this.spineAnimation.setEventListener(o):this.spineAnimation.setEventListener(null),this.spineAnimation.loop=t,this.spineAnimation.timeScale=n,this.currentTimeScale=n,this.spineAnimation.paused=!1,this.spineAnimation.animation=a},t.prototype.setAnimationSkin=function(a){null!=a&&""!=a&&this.spineAnimation.setSkin(a)},t.prototype.pauseAnimation=function(){this.spineAnimation.paused||(this.spineAnimation.paused=!0)},t.prototype.resumeAnimation=function(){this.spineAnimation.paused&&(this.spineAnimation.paused=!1)},t.prototype.changeAnimationTimeScale=function(a){var t=this.currentTimeScale*a;return this.spineAnimation.timeScale!==t&&(this.spineAnimation.timeScale=t,!0)},t.prototype.setColor=function(a,t){null==a.setFromString?(t="#"==t.charAt(0)?t.substr(1):t,a.r=parseInt(t.substr(0,2),16)/255,a.g=parseInt(t.substr(2,2),16)/255,a.b=parseInt(t.substr(4,2),16)/255,a.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255):a.setFromString(t)},t.prototype.getAnimationDuration=function(a){var t=this.spineAnimation.findAnimation(a);return null==t?.5:t.duration},t.prototype.findBone=function(a){return this.spineAnimation.findBone(a)},t.prototype.flashUpdate=function(a){if(this.activeFlash&&(this.lightTime>0&&(this.lightTime-=a,this.lightTime<=0&&this.hideLight()),!(this.flashTime<=0))){this.flashTime-=a;var t=(2-Math.max(this.flashTime/.1,0))/2;this._material.setProperty("u_rate",t)}},t.prototype.flash=function(){this.activeFlash&&(this.flashTime=.1)},t.prototype.closeFlash=function(){this.activeFlash&&this._material.setProperty("u_rate",1)},t.prototype.showLight=function(){this.activeFlash&&(this.lightTime=.3,this._material.setProperty("u_color",[1,252/255,87/255,1]),this._material.setProperty("u_rate",.5))},t.prototype.hideLight=function(){this.activeFlash&&this._material.setProperty("u_rate",1)},i([l({displayName:"spine\u52a8\u753b\u7ec4\u4ef6",type:sp.Skeleton})],t.prototype,"spineAnimation",void 0),i([l({displayName:"\u5f00\u542f\u95ea\u767d"})],t.prototype,"activeFlash",void 0),i([p],t)}(cc.Component);e.pzaSpineController=s,cc._RF.pop()},{}],pzaSpineTool:[function(a,t,e){"use strict";cc._RF.push(t,"54c87MgY1NI065puHBCk/Uy","pzaSpineTool"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpineTool=void 0;var o=function(){function a(){this.zombieAtlasSpine=null,this.atlasSlotAttMap=new Map}return a.instance=function(){return a._me||(a._me=new a),a._me},a.prototype.init=function(a){this.zombieAtlasSpine=a,this.initAtlasSlot()},a.prototype.initAtlasSlot=function(){this.zombieAtlasSpine.setSkin("skin1");for(var a=this.zombieAtlasSpine._skeleton.slots,t=0;t<a.length;t++){var e=a[t],o=e.getAttachment();o&&this.atlasSlotAttMap.set(e.data.name,o)}},a.prototype.copyAttr=function(a,t){var e=new sp.spine.RegionAttachment(a);return e.region=t.region,e.rendererObject=t.rendererObject,e.path=t.path,e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.rotation=t.rotation,e.width=t.width,e.height=t.height,sp.spine.Utils.arrayCopy(t.uvs,0,e.uvs,0,8),sp.spine.Utils.arrayCopy(t.offset,0,e.offset,0,8),e.color.setFromColor(t.color),e},a.prototype.setSlotAtt=function(a,t,e,o,n,i){void 0===i&&(i=0);var r=a.findSlot(t);if(r)if(e){var p=this.atlasSlotAttMap.get(e);if(p){var l=this.copyAttr(e,p);return l.x=o,l.y=n,i&&(l.rotation=i),l.updateOffset(),r.setAttachment(l),r}console.log("atlasSlotName\u4e0d\u5b58\u5728",e)}else r.setAttachment(null);else console.log("targetSlotName\u4e0d\u5b58\u5728",t)},a.findBonePos=function(a,t,e){if(!t)return null;var o=a.findBone(t);if(!o)return console.log("findBonePos\u672a\u627e\u5230",t),null;var n=e.convertToWorldSpaceAR(a.node.getPosition());return n.x+=o.worldX,n.y+=o.worldY,n},a._me=null,a}();e.pzaSpineTool=o,cc._RF.pop()},{}],pzaSplitPea:[function(a,t,e){"use strict";cc._RF.push(t,"fe46bSZniRJ554OYK8IgKeB","pzaSplitPea");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSplitPea=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.lShootNode=null,t.rShootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t.atkAniTime1=1.4,t.atkAniTime2=1.4,t.atkAniTime3=1.4,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),u.pzaGameState.isZombieMode())return this.attacking=!1,this.animation.playAnimation("T_idle",!0),this.atkAniTime1=this.animation.getAnimationDuration("T_attack1"),this.atkAniTime2=this.animation.getAnimationDuration("T_attack2"),void(this.atkAniTime3=this.animation.getAnimationDuration("T_attack3"));this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),u.pzaGameState.usePeaPlant=!0,u.pzaGameState.onlyShroomCofee=!1,u.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&u.pzaGameState.isZombieMode()){var o=window.pzazombieManager.hasCanAttackZombie(this.baseData),n=window.pzazombieManager.hasCanAttackBackZombie(this.baseData);if(n&&o){l.pzaSoundManager.playAudio("PeashooterAtk");var i=0;return this.attacking=!0,void this.animation.playAnimation("T_attack3",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){0==i&&e.shoot(!0),e.shoot(!1),i++},this.atkAniTime3/1.4)}if(n)return l.pzaSoundManager.playAudio("PeashooterAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack2",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot(!1)},this.atkAniTime2/1.4);if(o)return l.pzaSoundManager.playAudio("PeashooterAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack1",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot(!0)},this.atkAniTime1/1.4)}},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=window.pzazombieManager.hasCanAttackZombie(a.baseData),o=window.pzazombieManager.hasCanAttackBackZombie(a.baseData);if(!o||!e)return o?(l.pzaSoundManager.playAudio("PeashooterAtk"),void a.animation.playAnimation("attack2",!1,t,function(){a.shoot(!1)})):e?(l.pzaSoundManager.playAudio("PeashooterAtk"),void a.animation.playAnimation("attack1",!1,t,function(){a.shoot(!0)})):void(a.blinkTime>0?a.animation.playAnimation("idle1",!1,t):(a.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle2",!1,t)));l.pzaSoundManager.playAudio("PeashooterAtk");var n=0;a.animation.playAnimation("attack3",!1,t,function(){0==n&&a.shoot(!0),a.shoot(!1),n++})};t()},t.prototype.shoot=function(a){if(null!=this.baseData&&!this.baseData.isDead){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=a?this.rShootNode.convertToWorldSpaceAR(cc.v2()):this.lShootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o);e.setPosition(n);var i=e.getComponent(c.pzaBaseBullet);if(null!=i&&(i.init(this.baseData.yIndex,this.baseData.atk,1,null,a?cc.v2(1,0):cc.v2(-1,0)),a)){var l=u.pzaGameState.map.getMapSkewColumn();l>0&&this.baseData.xIndex<=l-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*u.pzaGameState.map.getBlockWidth())}}}}},i([f({displayName:"\u5de6\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"lShootNode",void 0),i([f({displayName:"\u53f3\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"rShootNode",void 0),i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaSplitPea=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSpriteFrameManager:[function(a,t,e){"use strict";cc._RF.push(t,"d13677cUm5Cm5ueL3UZ51Y4","pzaSpriteFrameManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSpriteFrameManager=void 0;var r=a("../Load/pzaBundleObjectPool"),p=a("./pzaLocalData"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.defaultHead=null,t}var e;return n(t,a),e=t,t.prototype.onLoad=function(){e.instance=this},t.loadZombieCard=function(a,t){var e="resources/Texture/ZombieIcon/"+a;r.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadPlantCard=function(a,t){var e="resources/Texture/PlantIcon/"+a;r.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadGoldPlant=function(a,t){var e="resources/Texture/ShopItemIcon/"+a;r.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadMap=function(a,t,e,o){var n=!1;e||(1==a&&t<=4&&(a=0,n=!0),4!=a&&9!=a||5!=t||(a=2,n=!0),5!=a&&10!=a||10!=t||(a=6,n=!0)),p.pzaLocalData.isWeekTwo&&!n&&(a-=5);var i="resources/Texture/Map/background"+a;r.pzaBundleObjectPool.requestSpriteFrameByUrl(i,function(a,t){null==a?null!=o&&(o.spriteFrame=t):console.error(a)})},t.loadPreMap=function(a,t,e){4==a&&5==t&&(a=2),5!=a&&10!=a||10!=t||(a=6);var o="resources/Texture/Map/pre_bg_"+a;r.pzaBundleObjectPool.requestSpriteFrameByUrl(o,function(a,t){null==a?null!=e&&(e.spriteFrame=t):console.error(a)})},t.loadInDoor=function(a,t,e){4==a&&5==t&&(a=2);var o="resources/Texture/Map/indoor_"+a;r.pzaBundleObjectPool.requestSpriteFrameByUrl(o,function(a,t){null==a?null!=e&&(e.spriteFrame=t):console.error(a)})},t.loadShopItemIcon=function(a,t){var e="resources/Texture/ShopItemIcon/"+a;r.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadGuanKaImg=function(a,t){var e="resources/Texture/GuanKa/"+a;r.pzaBundleObjectPool.requestSpriteFrameByUrl(e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.loadAchieveIcon=function(a,t){var e="achieve_"+a;r.pzaBundleObjectPool.requestSpriteFrameByAtlas("Texture/Achieve2",e,function(a,e){null==a?null!=t&&(t.spriteFrame=e):console.error(a)})},t.showPlayerHeadImage=function(a,t){a&&"null"!=a&&cc.assetManager.loadRemote(a,{ext:".head"},function(e,o){if(!e&&o){var n=new cc.SpriteFrame(o);t&&t(a,n)}else t&&t(a,this.instance&&this.instance.defaultHead)})},t.showDefaultHead=function(a){null!=a&&(a.spriteFrame=this.instance&&this.instance.defaultHead)},t.instance=null,i([c({displayName:"\u9ed8\u8ba4\u73a9\u5bb6\u5934\u50cf",type:cc.SpriteFrame})],t.prototype,"defaultHead",void 0),e=i([s],t)}(cc.Component);e.pzaSpriteFrameManager=u,cc._RF.pop()},{"../Load/pzaBundleObjectPool":"pzaBundleObjectPool","./pzaLocalData":"pzaLocalData"}],pzaSquashKing:[function(a,t,e){"use strict";cc._RF.push(t,"92b58H5QzdFBKk5UPYaw3wK","pzaSquashKing");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSquashKing=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaPlantEnum"),s=a("../Data/pzaZombieEnum"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaSquashNut"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.ani_plant_inact=null,t.ani_plant_hurt=null,t.ani_plant_die=null,t.ani_jump_down="jumpdown",t.deathAttack=null,t}return n(t,a),t.prototype.afterBind=function(a){var t=this;a.plantData.cate=l.pzaPlantCate.Nut;var e=function(){t.jumpTarget=t.findTarget(),t.jumpTarget?t.attack(t.jumpTarget):t.animation.playAnimation("idle",!1,e)};e()},t.prototype.attack=function(a){var t=this;this.jumpTarget=a,this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,r.pzaSoundManager.playAudio("SquashStart"),this.animation.playAnimation(a.logicPos.x>=this.baseData.logicPos.x?"lookright":"lookleft",!1,function(){t.animation.playAnimation("jumpup1",!1,function(){if(t.animation.playAnimation("jumpup2",!1,function(){t.animation.playAnimation("jumpup3",!1)}),t.baseData){var e=10*-a.yIndex+6;t.node.zIndex=e,t.jumpUpTime=t.jumpUpMaxTime;var o=t.jumpTarget.logicPos.x-t.baseData.logicPos.x;t.speedX=o/t.jumpUpTime}})})},t.prototype.damageTarget=function(a){var t=this;if(null!=this.baseData&&null!=a){var e=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null!=e){e.forEach(function(e){if(e&&!e.isDead&&e.logicPos&&!(Math.abs(a.x-e.logicPos.x)>1.5*c.pzaGameState.map.getBlockWidth())){var o=window.pzazombieManager.getZombie(e),n=e.zombieData.cate===s.pzaZombieCate.Gargantuar?3*t.baseData.atk:t.baseData.atk;o&&o.hurt(n,t.baseData,u.pzaAttackType.BANG),e.isDead}});var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)&&o&&o.hurt(this.baseData.atk,this.baseData,u.pzaAttackType.BANG)}}},i([m],t)}(d.pzaSquashNut));e.pzaSquashKing=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaSquashNut":"pzaSquashNut"}],pzaSquashNut:[function(a,t,e){"use strict";cc._RF.push(t,"932edZFHrZNNI2+77mADcd4","pzaSquashNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSquashNut=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaPlantEnum"),s=a("../Data/pzaZombieEnum"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaAttackType"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.jumpTarget=null,t.jumpUpTime=0,t.jumpUpMaxTime=0,t.speedX=0,t.speedY=0,t.isDeadAttacked=!1,t.ani_plant_inact="body_1",t.ani_plant_hurt="body_2",t.ani_plant_die="body_3",t.ani_jump_down="jumpdown4",t.deathAttack=function(){var e=t.findTarget();if(!e)return console.log("\u7a9d\u74dc\u575a\u679c\u6b7b\u4ea1\u65e0\u76ee\u6807"),void a.prototype.death.call(t);t.attack(e)},t}return n(t,a),t.prototype.afterBind=function(){this.animation.playAnimation("idle1",!0)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),t.plantData.cate=l.pzaPlantCate.Nut,this.jumpTarget=null,this.jumpUpTime=0,this.speedX=0,this.speedY=0,this.isDeadAttacked=!1,this.jumpUpMaxTime=this.animation.getAnimationDuration("jumpup2"),this.speedY=135/this.jumpUpMaxTime,this.afterBind(t),this.body.node.getComponent(cc.BoxCollider).enabled=!0},t.prototype.findTarget=function(){var a=this;if(null==this.baseData||this.isDeadAttacked||null==this.baseData.logicPos)return null;var t=null,e=-1,o=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null==o)return null;if(o.forEach(function(o){if(o&&!o.isDead&&o.logicPos&&!(o.buffData.hasBuff(p.pzaBuffType.FLY)||o.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(p.pzaBuffType.DIVE)&&o.zombieData.zombieType!=s.pzaZombieEnum.SNORKEL_ZOMBIE)){var n=Math.abs(a.baseData.logicPos.x-o.logicPos.x);-1!=e&&n>=e||o.logicPos.x<a.baseData.logicPos.x&&n>u.pzaGameState.map.getBlockWidth()||o.logicPos.x>a.baseData.logicPos.x&&n>1.7*u.pzaGameState.map.getBlockWidth()||(e=n,t=o)}}),!t){var n=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=n&&!n.baseData.isDead&&!n.baseData.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t},t.prototype.attack=function(a){var t=this;this.jumpTarget=a,r.pzaSoundManager.playAudio("SquashStart"),this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,this.animation.playAnimation("jumpup1",!1,function(){if(t.animation.playAnimation("jumpup2",!1,function(){t.animation.playAnimation("jumpup3",!1)}),t.baseData){var e=10*-a.yIndex+6;t.node.zIndex=e,t.jumpUpTime=t.jumpUpMaxTime;var o=t.jumpTarget.logicPos.x-t.baseData.logicPos.x;t.speedX=o/t.jumpUpTime}})},t.prototype.damageTarget=function(a){var t=this;if(null!=this.baseData&&null!=a){var e=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null!=e){e.forEach(function(e){if(e&&!e.isDead&&e.logicPos&&!(Math.abs(a.x-e.logicPos.x)>u.pzaGameState.map.getBlockWidth())){var o=window.pzazombieManager.getZombie(e);o&&o.hurt(t.baseData.atk,t.baseData,d.pzaAttackType.BANG),e.isDead}});var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(p.pzaBuffType.UNABLE_SELECT)&&o&&o.hurt(this.baseData.atk,this.baseData,d.pzaAttackType.BANG)}}},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.jumpUpTime>0&&this.jumpTarget&&this.jumpTarget.logicPos&&(this.jumpUpTime-=t,this.baseData.logicPos.x+=this.speedX*t,this.animation.node.y+=this.speedY*t,this.jumpUpTime<=0)){var o=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);this.animation.node.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){o?r.pzaSoundManager.playAudio("zombiesplash"):r.pzaSoundManager.playAudio("gargantuar_thump"),e.animation.playAnimation(e.ani_jump_down,!1,function(){o||c.pzaEffectManager.createSquashEffect(e.baseData.logicPos)})}),cc.spawn(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){window.pzaplantManager.removePlant(e.baseData),e.damageTarget(e.jumpTarget.logicPos)})),cc.moveTo(2/15,cc.v2(0,-5)).easing(cc.easeBackIn())),cc.delayTime(o?0:.3),cc.callFunc(function(){o&&c.pzaEffectManager.createWaterFlowerEffect(e.baseData.yIndex,e.baseData.logicPos,null),e.isDeadAttacked=!0,e.deathAttack?a.prototype.death.call(e):e.death()})))}},t.prototype.logicLateUpdate=function(){this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null==this.baseData||this.isDeadAttacked||null==this.baseData.logicPos||this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.death=function(t,e){this.deathAttack?this.deathAttack():a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.deathAttack?this.deathAttack():a.prototype.flaserDeath.call(this)},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.ani_plant_die&&this.animation.setAnimationSkin(this.ani_plant_die)},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.ani_plant_die&&this.animation.setAnimationSkin(this.ani_plant_hurt)},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.ani_plant_die&&this.animation.setAnimationSkin(this.ani_plant_inact)},i([f],t)}(h.pzaBasePlant));e.pzaSquashNut=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSquash:[function(a,t,e){"use strict";cc._RF.push(t,"81fc9M/dexOrq+atyCuJ59k","pzaSquash");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSquash=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Data/pzaBuffData"),u=a("../Data/pzaZombieEnum"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=a("./pzaAttackType"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=(z.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.jumpTarget=null,t.jumpUpTime=0,t.speedX=0,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.animation.node.stopAllActions(),this.animation.node.y=-5,this.jumpTarget=null,this.jumpUpTime=0,this.speedX=0,h.pzaGameState.isZombieMode())return this.attacking=!1,void this.animation.playAnimation("T_idle",!0);this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.playNorAni(),this.body.node.getComponent(cc.BoxCollider).enabled=!0,h.pzaGameState.onlyShroomCofee=!1,h.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.jumpUpTime>0&&null!=this.jumpTarget&&null!=this.jumpTarget.logicPos){if(this.jumpUpTime-=t,this.baseData.logicPos.x+=this.speedX*t,this.jumpUpTime<=0){var o=window.pzaMapManager.isInWaterWay(this.baseData.yIndex);this.animation.node.runAction(cc.sequence(cc.delayTime(.2),cc.callFunc(function(){o?l.pzaSoundManager.playAudio("zombiesplash"):l.pzaSoundManager.playAudio("gargantuar_thump"),e.animation.playAnimation(h.pzaGameState.isZombieMode()?"T_jumpdown":"jumpdown",!1,function(){o||d.pzaEffectManager.createSquashEffect(e.baseData.logicPos)})}),cc.spawn(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){window.pzaplantManager.removePlant(e.baseData),e.damageTarget(e.jumpTarget.logicPos)})),cc.moveTo(2/15,cc.v2(0,-5)).easing(cc.easeBackIn())),cc.delayTime(o?0:.3),cc.callFunc(function(){o&&d.pzaEffectManager.createWaterFlowerEffect(e.baseData.yIndex,e.baseData.logicPos,null),e.death()})))}}else if(!this.attacking&&h.pzaGameState.isZombieMode()){var n=this.findTarget();if(null!=n)return this.jumpTarget=n,l.pzaSoundManager.playAudio("SquashStart"),this.attacking=!0,void this.animation.playAnimation(n.logicPos.x>=this.baseData.logicPos.x?"T_lookright":"T_lookleft",!1,function(){e.animation.playAnimation("T_jumpup1",!1,function(){e.animation.playAnimation("T_jumpup2",!1,function(){e.animation.playAnimation("T_jumpup3",!0)});var a=e.animation.getAnimationDuration("T_jumpup2");e.jumpUpTime=a;var t=10*-n.yIndex+6;e.node.zIndex=t,e.animation.node.runAction(cc.moveTo(a,cc.v2(0,135)));var o=e.jumpTarget.logicPos.x-e.baseData.logicPos.x;e.speedX=o/a})})}},t.prototype.logicLateUpdate=function(){this.bodyBindData||null==this.body||(this.bodyBindData=!0,this.body.bindData(this.baseData)),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+this.baseData.floatY))},t.prototype.findTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null==o)return null;if(o.forEach(function(o){if(o&&!o.isDead&&o.logicPos&&!(o.buffData.hasBuff(c.pzaBuffType.FLY)||o.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(c.pzaBuffType.DIVE)&&o.zombieData.zombieType!=u.pzaZombieEnum.SNORKEL_ZOMBIE)){var n=Math.abs(a.baseData.logicPos.x-o.logicPos.x);-1!=e&&n>=e||o.logicPos.x<a.baseData.logicPos.x&&n>.5*h.pzaGameState.map.getBlockWidth()||o.logicPos.x>a.baseData.logicPos.x&&n>1.7*h.pzaGameState.map.getBlockWidth()||(e=n,t=o)}}),!t){var n=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=n&&!n.baseData.isDead&&!n.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t},t.prototype.damageTarget=function(a){var t=this;if(null!=this.baseData&&null!=a){var e=window.pzazombieManager.zombieDatas[this.baseData.yIndex];if(null!=e){var o=0;e.forEach(function(e){if(e&&!e.isDead&&e.logicPos&&!(Math.ceil(Math.abs(a.x-e.logicPos.x))>=h.pzaGameState.map.getBlockWidth())){var n=window.pzazombieManager.getZombie(e);n&&n.hurt(t.baseData.atk,t.baseData,m.pzaAttackType.BANG),e.isDead&&o++}});var n=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=n&&!n.baseData.isDead&&!n.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)&&n&&n.hurt(this.baseData.atk,this.baseData,m.pzaAttackType.BANG),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_20,o)}}},t.prototype.playNorAni=function(){var a=this,t=this.findTarget();if(null!=t)return this.jumpTarget=t,l.pzaSoundManager.playAudio("SquashStart"),this.body.node.getComponent(cc.BoxCollider).enabled=!1,this.baseData.isDead=!0,void this.animation.playAnimation(t.logicPos.x>=this.baseData.logicPos.x?"lookright":"lookleft",!1,function(){a.animation.playAnimation("jumpup1",!1,function(){a.animation.playAnimation("jumpup2",!1,function(){a.animation.playAnimation("jumpup3",!0)});var e=a.animation.getAnimationDuration("jumpup2");a.jumpUpTime=e;var o=10*-t.yIndex+6;a.node.zIndex=o,a.animation.node.runAction(cc.moveTo(e,cc.v2(0,135)));var n=a.jumpTarget.logicPos.x-a.baseData.logicPos.x;a.speedX=n/e})});this.blinkTime>0?this.animation.playAnimation("idle",!1,this.playNorAni.bind(this)):(this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("idle_eye",!1,this.playNorAni.bind(this)))},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.animation.node.pauseAllActions()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.animation.node.resumeAllActions()},i([y],t)}(f.pzaBasePlant));e.pzaSquash=g,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaStarFruitShadow:[function(a,t,e){"use strict";cc._RF.push(t,"68b4f/6l2NC8IeaIP9jO6rZ","pzaStarFruitShadow");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaStarFruitShadow=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaWorldEventManager"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.onEnable=function(){p.pzaWorldEventManager.addListener(p.pzaWorldEventType.BACK_HOME,this.closeNode,this),p.pzaWorldEventManager.addListener(p.pzaWorldEventType.GAME_OVER,this.closeNode,this),this.node.zIndex=-300},t.prototype.showNode=function(){this.node.opacity=120},t.prototype.hideNode=function(){this.node.opacity=0},t.prototype.onDisable=function(){p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.BACK_HOME,this.closeNode,this),p.pzaWorldEventManager.removeListener(p.pzaWorldEventType.GAME_OVER,this.closeNode,this)},t.prototype.closeNode=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([s],t)}(cc.Component));e.pzaStarFruitShadow=c,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaStarFruit:[function(a,t,e){"use strict";cc._RF.push(t,"16374wVFltJwqD9k1Th58af","pzaStarFruit");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaStarFruit=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaGameManager"),l=a("../../Common/pzaNodeManager"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaUtil"),u=a("../Bullet/pzaBaseBullet"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaPlantEnum"),m=a("../pzaGameState"),f=a("./pzaAttackType"),z=a("./pzaBasePlant"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t}return n(t,a),t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),m.pzaGameState.isZombieMode())return this.attacking=!1,void this.animation.playAnimation("T_idle",!0);if(this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),m.pzaGameState.onlyShroomCofee=!1,m.pzaGameState.onlyBoomPlant=!1,m.pzaGameState.isMiniMode()&&14==m.pzaGameState.curPart){var e=""+this.baseData.xIndex+this.baseData.yIndex;window.pzaplantManager.starFruitMap.get(e)&&window.pzaplantManager.starFruitMap.get(e).hideNode();var o=0;window.pzaplantManager.starFruitMap.forEach(function(a,t){window.pzaplantManager.plantDataMap.get(t)&&window.pzaplantManager.plantDataMap.get(t).plantData.plantType==h.pzaPlantEnum.STAR_FRUIT&&o++}),o==window.pzaplantManager.starFruitMap.size&&(p.pzaGameManager.passPart(this.baseData.logicPos),window.pzazombieManager.zombieMap.forEach(function(a,t){null!=a&&null!=t&&null!=t.logicPos&&null!=a.baseData&&a.hurt(1e6,null,f.pzaAttackType.DEATH_ANI)}),m.pzaGameState.starModeGameOver=!0)}},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&m.pzaGameState.isZombieMode()&&null!=this.findAttackTarget())return s.pzaSoundManager.playAudio("StarFruit"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.attack()})},t.prototype.playNormalAni=function(){var a=this,t=function(){if(null!=a.findAttackTarget())return s.pzaSoundManager.playAudio("StarFruit"),void a.animation.playAnimation("attack",!1,t,function(){a.attack()});a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};t()},t.prototype.findAttackTarget=function(){var a=this,t=null;return window.pzazombieManager.zombieMap.forEach(function(e,o){if(null==t&&null!=o&&!o.buffData.hasBuff(d.pzaBuffType.FLY)&&!o.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT))if(o.yIndex==a.baseData.yIndex&&o.logicPos.x<=a.baseData.logicPos.x)t=o;else if(o.xIndex!=a.baseData.xIndex){var n=cc.v2(a.baseData.logicPos.x+a.shootNode.x,a.baseData.logicPos.y+a.shootNode.y),i=o.logicPos.sub(n);if(a.baseData.logicPos.y<o.logicPos.y){var r=c.pzaUtil.getVectorsRadion(cc.v2(Math.sqrt(3)/2,.5),i),p=Math.sin(r)*i.len();if(p>=-30&&p<=30)return void(t=o)}var l=c.pzaUtil.getVectorsRadion(cc.v2(Math.sqrt(3)/2,-.5),i),s=Math.sin(l)*i.len();s>=-40&&s<=30&&(t=o)}else t=o}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(d.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(){var a=this;null==this.baseData||this.baseData.isDead||[cc.v2(-1,0),cc.v2(0,1),cc.v2(Math.sqrt(3)/2,.5),cc.v2(Math.sqrt(3)/2,-.5),cc.v2(0,-1)].forEach(function(t){a.shoot(t)})},t.prototype.shoot=function(a){var t=l.pzaNodeManager.getBulletNode();if(null!=t){var e=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=e){e.setParent(t);var o=this.shootNode.convertToWorldSpaceAR(cc.v2()),n=t.convertToNodeSpaceAR(o);e.setPosition(n);var i=e.getComponent(u.pzaBaseBullet);if(null!=i&&(i.init(-1,this.baseData.atk,1,null,a),!(a.x<=0))){var p=m.pzaGameState.map.getMapSkewColumn();p>0&&this.baseData.xIndex<=p-2&&(i.maxPosX=this.baseData.logicPos.x+1.5*m.pzaGameState.map.getBlockWidth())}}}},t.prototype.close=function(){if(a.prototype.close.call(this),m.pzaGameState.isMiniMode()&&14==m.pzaGameState.curPart){var t=""+this.baseData.xIndex+this.baseData.yIndex;window.pzaplantManager.starFruitMap.get(t)&&window.pzaplantManager.starFruitMap.get(t).showNode()}},i([v({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([v({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([g],t)}(z.pzaBasePlant);e.pzaStarFruit=b,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaStartScene:[function(a,t,e){"use strict";cc._RF.push(t,"515d7ydUEFPi7pJbn4jnVpG","pzaStartScene");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaStartScene=void 0;var r=a("./pzaBundleController"),p=cc._decorator,l=p.ccclass,s=p.property,c=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.logoOrinal=null,t.logo1=null,t.label=null,t}return n(t,a),t.prototype.onLoad=function(){cc.sys.platform==cc.sys.WECHAT_GAME?this.logo1.active=!1:cc.sys.platform==cc.sys.ALIPAY_GAME?(this.logo1.active=!0,this.logoOrinal.active=!1):cc.sys.platform==cc.sys.BYTEDANCE_GAME?(this.logo1.active=!1,this.logoOrinal.active=!1):this.logo1.active=!1,this.label.string="Load Game",this.loadGame()},t.prototype.onEnable=function(){},t.prototype.loadGame=function(){var a=this;this.label.string="Load Game Start",this.label.string="Load Scripts Sucess",cc.assetManager.loadBundle(r.pzaBundleType.Spine,function(t,e){if(null!=t||null==e)return console.error(t),void(a.label.string="Spine: "+t);a.label.string="Load Spine Sucess",cc.assetManager.loadBundle(r.pzaBundleType.Loading,function(t,e){if(null!=t||null==e)return console.error(t),void(a.label.string="Loading: "+t);a.label.string="Load Loading Sucess",e.load("Loading",cc.Prefab,function(t,e){var o=cc.instantiate(e);if(null!=t||null==o)return console.error(t),void(a.label.string="Loading Error");a.label.node.active=!1,o.setParent(a.node)})}),r.pzaBundleController.loadBundle(r.pzaBundleType.Spine,function(t){if(null==t)return console.error("\u52a0\u8f7dSpine Bundle\u5f02\u5e38~"),void(a.label.string="Load Spine Exception")})})},i([s({displayName:"logo-\u539f",type:cc.Node})],t.prototype,"logoOrinal",void 0),i([s({displayName:"logo-1",type:cc.Node})],t.prototype,"logo1",void 0),i([s({displayName:"\u52a0\u8f7dlabel",type:cc.Label})],t.prototype,"label",void 0),i([l],t)}(cc.Component);e.pzaStartScene=c,cc._RF.pop()},{"./pzaBundleController":"pzaBundleController"}],pzaStateComponent:[function(a,t,e){"use strict";cc._RF.push(t,"9e2c0GREKJPX5OImvXLEtIa","pzaStateComponent");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("./pzaKDefine"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.state=r.State.idle,t.stateMap={idle:function(){}},t}return n(t,a),t.prototype.setState=function(a){cc.Tween.stopAllByTarget(this.node),this.state=a},t.prototype.regState=function(a,t){this.stateMap[a]=t},t.prototype.updateFrame=function(a){this.stateMap[this.state].call(this,a)},i([l],t)}(cc.Component));e.default=s,cc._RF.pop()},{"./pzaKDefine":"pzaKDefine"}],pzaStatisticsMgr:[function(a,t,e){"use strict";cc._RF.push(t,"a28a0oabexCVLrIFbs0weJy","pzaStatisticsMgr"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaStatisticsMgr=void 0;var o=a("../utils/pzaChannel"),n=a("./pzaLocalData"),i=a("./pzaUtil"),r=function(){function a(){}return a.setUserProp=function(){var a=o.pzaChannel.instance().getChannel();if("wx"===a.channel||"tt"==o.pzaChannel.instance().channel){var t={openid:a.channelUserId,gameid:6666,gameversion:o.pzaChannel.version,level:parseInt(n.pzaLocalData.data.curChapter+""+n.pzaLocalData.data.curPart),coins:n.pzaLocalData.data.coin};1==n.pzaLocalData.isNewUser?(t.tracetime=new Date,t.channel=a.channelId,TDAnalytics.userSetOnce({properties:t})):TDAnalytics.userSet({properties:t})}},a.setPubProp=function(){var a=o.pzaChannel.instance().getChannel();if("wx"===a.channel||"tt"==o.pzaChannel.instance().channel){var t=1;null!=n.pzaLocalData.data.reachPartTime&&(t=i.pzaUtil.getDayInterval(n.pzaLocalData.data.reachPartTime,Date.now())+1);var e={level:parseInt(n.pzaLocalData.data.curChapter+""+n.pzaLocalData.data.curPart),day:t,coins:n.pzaLocalData.data.coin,channel:a.channelId,openid:a.channelUserId,is_new:n.pzaLocalData.isNewUser};TDAnalytics.setSuperProperties(e)}},a.sendEvent=function(a){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=o.pzaChannel.instance().getChannel();if("wx"===n.channel||"tt"==o.pzaChannel.instance().channel||"my"==o.pzaChannel.instance().channel||"ks"==o.pzaChannel.instance().channel){this.setPubProp();var i={};null!=t&&t.forEach(function(a){i[a.name]=a.value}),TDAnalytics.track({eventName:a,properties:i})}},a}();e.pzaStatisticsMgr=r,cc._RF.pop()},{"../utils/pzaChannel":"pzaChannel","./pzaLocalData":"pzaLocalData","./pzaUtil":"pzaUtil"}],pzaSunBean:[function(a,t,e){"use strict";cc._RF.push(t,"f4af1F1i7FDmaEsbuiYrqOm","pzaSunBean");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunBean=void 0;var r=a("../../Common/pzaSoundManager"),p=a("./pzaBasePlant"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sunTime=12.5,t.growTime=90,t.isBig=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.sunTime=3,this.growTime=90,this.isBig=!1,this.node.scale=1,this.animation.playAnimation("idle1",!0);var e=10*-this.baseData.yIndex+2;this.node.zIndex=e,this.bodyBindData=!0,this.body.node.getComponent(cc.Collider).enabled=!1,t.plantData&&t.plantData.isGrow&&(this.growTime=0,this.isBig=!0,this.node.scale=1.5)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.sunTime-=t,this.sunTime<=0&&(this.sunTime=12.5,this.isBig?window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1,25):window.pzaplantManager.plantCreateSun2(this.node.getPosition(),.7,15)),this.isBig||(this.growTime-=t,this.growTime<=0&&(this.growUp(),this.baseData&&this.baseData.plantData&&(this.baseData.plantData.isGrow=!0))))},t.prototype.growUp=function(){this.isBig=!0,this.baseData.hp+=this.baseData.maxHp,r.pzaSoundManager.playAudio("garden_plantgrow"),cc.tween(this.node).to(.5,{scale:1.5}).start()},t.prototype.close=function(){a.prototype.close.call(this),this.baseData&&window.pzaplantManager.notTargetMap.delete(""+this.baseData.xIndex+this.baseData.yIndex)},i([s],t)}(p.pzaBasePlant));e.pzaSunBean=c,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","./pzaBasePlant":"pzaBasePlant"}],pzaSunBomb:[function(a,t,e){"use strict";cc._RF.push(t,"4c473JnJutHG6va77M4sq2L","pzaSunBomb");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunBomb=void 0;var r=a("../../Common/pzaNodeManager"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaUtil"),s=a("../../Load/pzaBundleObjectPool"),c=a("../../Load/pzaPreLoadManager"),u=a("../Data/pzaBuffData"),d=a("../pzaEffectManager"),h=a("../pzaGameState"),m=a("../pzaSunLight"),f=a("./pzaAttackType"),z=a("./pzaBasePlant"),y=cc._decorator,g=y.ccclass,v=(y.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),p.pzaSoundManager.playAudio("JalapenoReady",1),this.animation.playAnimation("attack",!1,function(){p.pzaSoundManager.playAudio("cherrybomb",1),e.attack()}),h.pzaGameState.onlyShroomCofee=!1},t.prototype.attack=function(){var a=this;d.pzaEffectManager.createFrameEffect(c.pzaResourceUrl.CHERRY_BOOM_EFFECT,cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+30),null),window.pzaMapManager.shakeMap(),this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),this.death();var t=0,e=1.5*h.pzaGameState.map.getBlockWidth(),o=window.pzazombieManager.findFixRangeZombies(this.baseData.logicPos,e);null==o&&(o=[]),this.baseData.xIndex>=7&&null!=window.pzazombieManager.drZomBoss&&o.push(window.pzazombieManager.drZomBoss),o.forEach(function(e){var o=e&&e.baseData;null==o||o.isDead||o.buffData.hasBuff(u.pzaBuffType.INVINCIBLE)||(e&&e.hurt(a.baseData.atk,a.baseData,f.pzaAttackType.BOOM),e.baseData.isDead&&t++)}),window.pzaMapManager.LadderMap.forEach(function(t,o){l.pzaUtil.getDistance(a.baseData.logicPos,t.logicPos)>e||(t.close(),window.pzaMapManager.LadderMap.delete(o))});for(var n=this.node.getPosition(),i=0;i<t;i++)this.dropSun(n)},t.prototype.dropSun=function(a){s.pzaBundleObjectPool.requestInstantByUrl2(c.pzaResourceUrl.SUN,function(t,e){if(null==t&&null!=e){e.setParent(r.pzaNodeManager.getUpBgNode());var o=e.getComponent(m.pzaSunLight);o&&o.init2(a,1,25),window.pzaplantManager.AllSunLight.add(o)}else console.error(t)})},t.prototype.flaserDeath=function(){var a=this;this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(.15,1,.3),cc.delayTime(5),cc.callFunc(function(){a.node.scale=1,a.close()})))},i([g],t)}(z.pzaBasePlant));e.pzaSunBomb=v,cc._RF.pop()},{"../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","../pzaSunLight":"pzaSunLight","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSunFlowerPlus:[function(a,t,e){"use strict";cc._RF.push(t,"29d6cNlGhdLoqqs/4nrQIV2","pzaSunFlowerPlus");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunFlowerPlus=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.growTime=120,t.isBig=!1,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.growTime=120,this.isBig=!1,this.node.scale=1,this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=p.pzaUtil.getRandomFloatNum(3,12.5));var o=function(){if(!l.pzaGameState.gameWin&&e.baseData.plantData.atkInterval<=0){if(e.baseData.plantData.atkInterval=0,null==e.baseData||e.baseData.isDead)return;return e.baseData.plantData.atkInterval=p.pzaUtil.getRandomFloatNum(23.5,25),r.pzaSoundManager.playAudio("SunShroom"),void e.animation.playAnimation("Sunlight",!1,o,function(){window.pzaplantManager.plantCreateSun2(e.baseData.logicPos.clone(),1,e.isBig?75:40)})}e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle1_eye",!1,o))};this.animation.playAnimation("idle1",!1,o),t.plantData&&t.plantData.isGrow&&(this.growTime=0,this.isBig=!0,this.node.scale=1.5)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,this.baseData.plantData.atkInterval-=t,this.isBig||(this.growTime-=t,this.growTime<=0&&(this.growUp(),this.baseData&&this.baseData.plantData&&(this.baseData.plantData.isGrow=!0))))},t.prototype.growUp=function(){this.isBig=!0,this.baseData.hp+=this.baseData.maxHp,r.pzaSoundManager.playAudio("garden_plantgrow"),cc.tween(this.node).to(.5,{scale:1.5}).start()},i([u],t)}(s.pzaBasePlant));e.pzaSunFlowerPlus=d,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSunFlower:[function(a,t,e){"use strict";cc._RF.push(t,"a67d7VbSSNC2qvchm9+QwqV","pzaSunFlower");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunFlower=void 0;var r=a("../../Common/pzaGameManager"),p=a("../../Common/pzaGameSurEndless"),l=a("../../Common/pzaGameSurvival"),s=a("../../Common/pzaSoundManager"),c=a("../../Common/pzaUtil"),u=a("../pzaGameState"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),u.pzaGameState.isZombieMode())this.animation.playAnimation("T_idle",!0);else{this.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=c.pzaUtil.getRandomFloatNum(3,12.5));var o=function(){if(!u.pzaGameState.gameWin&&e.baseData.plantData.atkInterval<=0){if(u.pzaGameState.gameMode==u.pzaGameMode.SURVIVAL&&r.pzaGameManager.getGame(u.pzaGameMode.SURVIVAL,l.pzaGameSurvival).getSurvivalSunState())return void e.animation.playAnimation("idle1",!1,o);if(u.pzaGameState.gameMode==u.pzaGameMode.SUR_ENDLESS&&r.pzaGameManager.getGame(u.pzaGameMode.SUR_ENDLESS,p.pzaGameSurEndless).getSurvivalSunState())return void e.animation.playAnimation("idle1",!1,o);if(e.baseData.plantData.atkInterval=0,null==e.baseData||e.baseData.isDead)return;return e.baseData.plantData.atkInterval=c.pzaUtil.getRandomFloatNum(23.5,25),s.pzaSoundManager.playAudio("SunShroom"),void e.animation.playAnimation("Sunlight",!1,o,function(){window.pzaplantManager.plantCreateSun(e.baseData.logicPos.clone(),!0)})}e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=c.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle2",!1,o))};this.animation.playAnimation("idle1",!1,o),u.pzaGameState.onlyShroomCofee=!1,u.pzaGameState.onlyBoomPlant=!1}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,this.baseData.plantData.atkInterval-=t)},t.prototype.hurt=function(t,e,o){var n=this.baseData.maxHp-this.baseData.hp;if(a.prototype.hurt.call(this,t,e,o),u.pzaGameState.isZombieMode())for(var i=this.baseData.maxHp-this.baseData.hp,r=Math.floor(i/37)-Math.floor(n/37),p=0;p<r;p++)window.pzaplantManager.plantCreateSun(this.baseData.logicPos.clone(),!0)},t.prototype.steal=function(){if(u.pzaGameState.isZombieMode())for(var a=this.baseData.maxHp-this.baseData.hp,t=this.baseData.hp,e=Math.floor(t/37)-Math.floor(a/37),o=0;o<e;o++)window.pzaplantManager.plantCreateSun(this.baseData.logicPos.clone(),!0)},i([m],t)}(d.pzaBasePlant));e.pzaSunFlower=f,cc._RF.pop()},{"../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameSurEndless":"pzaGameSurEndless","../../Common/pzaGameSurvival":"pzaGameSurvival","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSunLight:[function(a,t,e){"use strict";cc._RF.push(t,"42f77b1njtIFLkVhJG239kv","pzaSunLight");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunLight=void 0;var r=a("../Achieve/pzaAchieve"),p=a("../Achieve/pzaAchieveMgr"),l=a("../Common/pzaBaseComponent"),s=a("../Common/pzaGameCommonPool"),c=a("../Common/pzaGameConfig"),u=a("../Common/pzaGameManager"),d=a("../Common/pzaGamePartConfig"),h=a("../Common/pzaNodeManager"),m=a("../Common/pzaSoundManager"),f=a("../Common/pzaUtil"),z=a("../Common/pzaWorldEventManager"),y=a("../Load/pzaPreLoadManager"),g=a("../View/Battle/pzaPlantSelectView"),v=a("./Data/pzaGuideType"),b=a("./Data/pzaPlantEnum"),S=a("./pzaGameState"),P=cc._decorator,C=P.ccclass,D=P.property,M=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spineAnimation=null,t.poolPrefab=null,t.liveTime=0,t.disappearing=!1,t.picked=!1,t.leftDropDis=0,t.sunValue=0,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.spineAnimation.paused=!1,z.pzaWorldEventManager.addListener(z.pzaWorldEventType.AUTO_PICK,this.autoPick,this),z.pzaWorldEventManager.addListener(z.pzaWorldEventType.PASS_PICK,this.passPick,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.AUTO_PICK,this.autoPick,this),z.pzaWorldEventManager.removeListener(z.pzaWorldEventType.PASS_PICK,this.passPick,this)},t.prototype.init2=function(a,t,e,o){var n=this;if(void 0===o&&(o=!1),null!=a){if(this.node.stopAllActions(),this.node.opacity=255,this.sunValue=e,this.node.scale=t,this.liveTime=0,this.disappearing=!1,this.picked=!1,o)return this.node.setPosition(a),void(this.leftDropDis=c.pzaGameConfig.getRandomSunDis());this.leftDropDis=0;var i=t;a.y+=50*Math.random()*i,this.node.setPosition(a);var r=f.pzaUtil.getRandomFloatNum(-50,50)*i;this.node.runAction(cc.sequence(cc.jumpTo(.6*i,cc.v2(a.x+r,a.y),80*i,1),cc.callFunc(function(){n.autoPick()})))}else this.close()},t.prototype.init=function(a,t,e,o){var n=this;if(void 0===o&&(o=!1),null!=a){if(this.node.stopAllActions(),this.node.opacity=255,this.sunValue=e?c.pzaGameConfig.bigSunValue:c.pzaGameConfig.smallSunValue,this.node.scale=e?1:.5,this.liveTime=0,this.disappearing=!1,this.picked=!1,t)return this.node.setPosition(a),void(this.leftDropDis=c.pzaGameConfig.getRandomSunDis());this.leftDropDis=0;var i=e?1:.5;a.y+=50*Math.random()*i,this.node.setPosition(a);var r=o?0:f.pzaUtil.getRandomFloatNum(-50,50)*i;this.node.runAction(cc.sequence(cc.jumpTo(.6*i,cc.v2(a.x+r,a.y),80*i,1),cc.callFunc(function(){n.autoPick()})))}else this.close()},t.prototype.initAdSun=function(a,t){var e=this;this.node.stopAllActions(),this.node.opacity=255,this.sunValue=0,this.node.scale=1,this.liveTime=0,this.disappearing=!0,this.picked=!0,this.node.setPosition(a),this.node.runAction(cc.sequence(cc.moveTo(.5,t).easing(cc.easeQuarticActionOut()),cc.delayTime(.1),cc.callFunc(function(){e.moveToUI()})))},t.prototype.logicUpdate=function(a){this.disappearing||(this.liveTime+=a,this.liveTime>=c.pzaGameConfig.sunLiveTime?this.disappear():this.drop(a))},t.prototype.drop=function(a){if(!(this.leftDropDis<=0)){var t=a*c.pzaGameConfig.autoSunSpeed;t>this.leftDropDis&&(t=this.leftDropDis),this.leftDropDis-=t,this.node.y=this.node.y-t,this.node.y<=100&&this.autoPick()}},t.prototype.clickSun=function(){S.pzaGameState.gamePause||this.disappearing||(window.pzaplantManager.AllSunLight.delete(this),this.moveToUI(),m.pzaSoundManager.playAudio("getSun"),window.pzaGuideManager.guideType!=v.pzaGuideType.GUIDE_PLANT_1_1||3!=window.pzaGuideManager.guideStep&&4!=window.pzaGuideManager.guideStep||window.pzaGuideManager.guideStepNext())},t.prototype.autoPick=function(){S.pzaGameState.autoPickLeft<=0&&!S.pzaGameState.isZjMode()||this.disappearing||(window.pzaplantManager.AllSunLight.delete(this),this.moveToUI(),m.pzaSoundManager.playAudio("getSun"))},t.prototype.passPick=function(){this.disappearing||(window.pzaplantManager.AllSunLight.delete(this),this.moveToUI(),m.pzaSoundManager.playAudio("getSun"))},t.prototype.disappear=function(){window.pzaplantManager.AllSunLight.delete(this),this.disappearing=!0,this.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(this.close.bind(this)))),window.pzazombieManager.zombieModeCheckTime=2},t.prototype.moveToUI=function(){var a=this;if(this.disappearing=!0,this.picked=!0,null==S.pzaGameState.sunMoveUIPos)return S.pzaGameState.sunLightCount+=this.sunValue,void this.close();var t=h.pzaNodeManager.getBattleUINode();if(this.node.setParent(t),this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.spawn(cc.moveTo(.5,S.pzaGameState.sunMoveUIPos).easing(cc.easeQuinticActionOut()),cc.sequence(cc.delayTime(.3),cc.fadeOut(.2))),cc.callFunc(function(){S.pzaGameState.sunLightCount+=a.sunValue,S.pzaGameState.pickCoinCount+=a.sunValue,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_10,S.pzaGameState.pickCoinCount),a.close()}))),!S.pzaGameState.showSunUI){if(S.pzaGameState.isVaseMode()||S.pzaGameState.isCreativeVaseMode())return window.pzaMapManager.showSunUI(),void u.pzaGameManager.showBattleUI(y.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(g.pzaPlantSelectView);t&&t.init([b.pzaPlantEnum.CHERRY_BOMB],function(){t&&t.initPlant()})});if(S.pzaGameState.gameMode==S.pzaGameMode.KNOCK_ZOMBIE||S.pzaGameState.gameMode==S.pzaGameMode.MINIGAME_KNOCK){window.pzaMapManager.showSunUI();var e;e=S.pzaGameState.gameMode==S.pzaGameMode.MINIGAME_KNOCK?d.pzaGamePartConfig.getPartDefaultPlant(2,5):d.pzaGamePartConfig.getPartDefaultPlant(S.pzaGameState.curChapter,S.pzaGameState.curPart),u.pzaGameManager.showBattleUI(y.pzaResourceUrl.PLANT_SELECT_VIEW,function(a){var t=a&&a.getComponent(g.pzaPlantSelectView);t&&t.init(e,null),t&&t.initPlant()})}}},t.prototype.pauseSelf=function(){this.picked||(this.spineAnimation.paused=!0,this.node.pauseAllActions())},t.prototype.resumeSelf=function(){this.spineAnimation.paused=!1,this.node.resumeAllActions()},t.prototype.close=function(){this.poolPrefab?s.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([D({displayName:"spine\u52a8\u753b\u7ec4\u4ef6",type:sp.Skeleton})],t.prototype,"spineAnimation",void 0),i([D(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([C],t)}(l.pzaBaseComponent);e.pzaSunLight=M,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaPlantSelectView":"pzaPlantSelectView","./Data/pzaGuideType":"pzaGuideType","./Data/pzaPlantEnum":"pzaPlantEnum","./pzaGameState":"pzaGameState"}],pzaSunMine:[function(a,t,e){"use strict";cc._RF.push(t,"ff855joZqVLO7D/cbF7VFC1","pzaSunMine");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunMine=void 0;var r=a("./pzaPotatoMine"),p=cc._decorator,l=p.ccclass,s=(p.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.attack=function(t){a.prototype.attack.call(this,t),window.pzaplantManager.plantCreateSun2(this.node.getPosition(),2,50)},i([l],t)}(r.pzaPotatoMine));e.pzaSunMine=s,cc._RF.pop()},{"./pzaPotatoMine":"pzaPotatoMine"}],pzaSunPot:[function(a,t,e){"use strict";cc._RF.push(t,"4b94aVkRhxP3r7IvInVPTM2","pzaSunPot");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunPot=void 0;var r=a("../Data/pzaBuffData"),p=a("./pzaBasePlant"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sunTime=25,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.sunTime=3,this.node.zIndex=10*-this.baseData.yIndex-1,this.animation.playAnimation("idle",!0)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||(this.sunTime-=t,this.sunTime<=0&&(this.sunTime=25,window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1,25)))},t.prototype.flaserDeath=function(){var a=this;this.baseData.buffData.addBuff(new r.pzaBuffInfo(r.pzaBuffType.FLASER,-1)),this.pauseSelf(),this.node.scaleX=1,this.node.scaleY=.3,this.scheduleOnce(function(){a.node.scale=1,a.close()},5),this.animation.node.stopAllActions()},i([s],t)}(p.pzaBasePlant));e.pzaSunPot=c,cc._RF.pop()},{"../Data/pzaBuffData":"pzaBuffData","./pzaBasePlant":"pzaBasePlant"}],pzaSunQueen:[function(a,t,e){"use strict";cc._RF.push(t,"ccce5cebKFE34/BAZjMCNSy","pzaSunQueen");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunQueen=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaUtil"),s=a("../../utils/pzakc"),c=a("../Bullet/pzaTrackBullet"),u=a("../Data/pzaBuffData"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.sunTime=25,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.sunTime=3,this.animation.playAnimation("idle1",!0)},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.plantData){if(this.sunTime-=t,this.atkInterval-=t,this.sunTime<=0){this.sunTime=25;for(var e=0;e<3;e++)window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1.5,50)}if(!(this.atkInterval>0)){this.atkInterval=this.baseData.plantData.atkInterval;var o=this.findAttackTarget();null!=o&&this.attack(o)}}},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1,o=null,n=-1;return window.pzazombieManager.zombieMap.forEach(function(i,r){if(null!=r&&null!=r.logicPos&&!r.buffData.hasBuff(u.pzaBuffType.DIVE)&&!r.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)){var p=l.pzaUtil.getDistance(a.baseData.logicPos,r.logicPos);r.buffData.hasBuff(u.pzaBuffType.FLY)?(-1==n||n>p)&&(n=p,o=r):(-1==e||e>p)&&(e=p,t=r)}}),null!=o?o:t},t.prototype.attack=function(a){if(!(this.baseData.isDead||window.pzazombieManager.zombieMap.size<=0))for(var t=p.pzaNodeManager.getBulletNode(),e=this.node.convertToWorldSpaceAR(cc.v2()),o=t.convertToNodeSpaceAR(e),n=0;n<6;n++){var i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);i.setParent(t);var l=cc.v2(o.x,o.y);l.y+=s.default.randomInt(-20,20),l.x+=s.default.randomInt(-20,20);var u=i.getComponent(c.pzaTrackBullet);u.moveSpeed=400,u.init(this.baseData.atk,a,l,this.baseData.yIndex)}},i([f({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m],t)}(d.pzaBasePlant);e.pzaSunQueen=z,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../utils/pzakc":"pzakc","../Bullet/pzaTrackBullet":"pzaTrackBullet","../Data/pzaBuffData":"pzaBuffData","./pzaBasePlant":"pzaBasePlant"}],pzaSunShroomShooter:[function(a,t,e){"use strict";cc._RF.push(t,"97140gi7dhElbDGhwARRRZP","pzaSunShroomShooter");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunShroomShooter=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../Bullet/pzaThrowBullet"),c=a("../Data/pzaBuffData"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.atkTime=0,t.sunTime=25,t.growTime=120,t.isBig=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.growTime=120,this.sunTime=3,this.isBig=!1,this.atkTime=this.atkInterval,this.node.scale=1,this.aniCom(),t.plantData&&t.plantData.isGrow&&(this.growTime=0,this.isBig=!0,this.node.scale=1.5)},t.prototype.aniCom=function(){var a=this;if(this.atkTime>0)this.animation.playAnimation("idle",!1,this.aniCom.bind(this));else{var t=this.findAttackTarget();if(t)return this.atkTime=this.atkInterval,void this.animation.playAnimation("attack",!1,this.aniCom.bind(this),function(){a.attack(t)});this.animation.playAnimation("idle",!1,this.aniCom.bind(this))}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.sunTime-=t,this.atkTime-=t,this.sunTime<=0&&(this.sunTime=25,window.pzaplantManager.plantCreateSun2(this.node.getPosition(),1,this.isBig?50:25)),this.isBig||(this.growTime-=t,!this.isBig&&this.growTime<=0&&(this.growUp(),this.baseData&&this.baseData.plantData&&(this.baseData.plantData.isGrow=!0))))},t.prototype.growUp=function(){this.isBig=!0,l.pzaSoundManager.playAudio("garden_plantgrow"),cc.tween(this.node).to(.5,{scale:1.5}).start()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(c.pzaBuffType.FLY)&&!o.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(c.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=p.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){var n=t.convertToNodeSpaceAR(o),i=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var l=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var c=cc.v2(l.x+this.baseData.logicPos.x+16,l.y+this.baseData.logicPos.y+57);i.setPosition(c);var u=i.getComponent(s.pzaThrowBullet);null!=u&&(u.init(!1,this.baseData.yIndex,this.isBig?this.baseData.plantData.atk2Arr[0]:this.baseData.atk,a,n),this.isBig&&(i.scale=1.5))}}}}}},i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([h],t)}(u.pzaBasePlant);e.pzaSunShroomShooter=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","./pzaBasePlant":"pzaBasePlant"}],pzaSunShroom:[function(a,t,e){"use strict";cc._RF.push(t,"24255GcIXxBbJDyg2usbMpg","pzaSunShroom");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSunShroom=void 0;var r=a("../../Common/pzaGameManager"),p=a("../../Common/pzaGameSurEndless"),l=a("../../Common/pzaGameSurvival"),s=a("../../Common/pzaNodeManager"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaSpineController"),d=a("../../Common/pzaUtil"),h=a("../../Load/pzaBundleObjectPool"),m=a("../../Load/pzaPreLoadManager"),f=a("../Effect/pzaShadowEffect"),z=a("../pzaGameState"),y=a("./pzaBasePlant"),g=cc._decorator,v=g.ccclass,b=g.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.sleepAni=null,t.blinkTime=3,t.shadow=null,t}return n(t,a),t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.sleepAni.node.active=!1},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=24),t.plantData.sleeping?(this.animation.playAnimation("idle_small2",!0),this.sleepAni.node.active=!0,this.sleepAni.playAnimation("idle",!0)):(this.sleepAni.node.active=!1,t.plantData.growStep>0?this.animation.playAnimation("idle_big1",!1,this.playIdleAni.bind(this)):this.animation.playAnimation("idle_small1",!1,this.playIdleAni.bind(this))),this.blinkTime=d.pzaUtil.getRandomFloatNum(3,6),z.pzaGameState.useShroom=!0,z.pzaGameState.onlyBoomPlant=!1,t.plantData.canBeShoot=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||this.baseData.plantData.sleeping||(this.grow(t),this.blinkTime-=t,this.baseData.plantData.atkInterval-=t,z.pzaGameState.gameWin||this.baseData.plantData.atkInterval>0||(this.baseData.plantData.atkInterval=24,z.pzaGameState.gameMode==z.pzaGameMode.SURVIVAL&&r.pzaGameManager.getGame(z.pzaGameMode.SURVIVAL,l.pzaGameSurvival).getSurvivalSunState()||z.pzaGameState.gameMode==z.pzaGameMode.SUR_ENDLESS&&r.pzaGameManager.getGame(z.pzaGameMode.SUR_ENDLESS,p.pzaGameSurEndless).getSurvivalSunState()||(c.pzaSoundManager.playAudio("SunShroom"),window.pzaplantManager.plantCreateSun(this.baseData.logicPos.clone(),this.baseData.plantData.growStep>=1),this.animation.showLight())))},t.prototype.wakeUp=function(){null!=this.baseData&&null!=this.baseData.plantData&&this.baseData.plantData.sleeping&&(this.baseData.plantData.sleeping=!1,this.sleepAni.node.active=!1,this.blinkTime=d.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("small_bawoke",!1,this.playIdleAni.bind(this)))},t.prototype.grow=function(a){var t=this;if(this.baseData.plantData.growTime+=a,!(this.baseData.plantData.growStep>=1||this.baseData.plantData.growTime<=120)){this.baseData.plantData.growStep=1,this.blinkTime=d.pzaUtil.getRandomFloatNum(3,6),c.pzaSoundManager.playAudio("garden_plantgrow"),this.animation.playAnimation("idle_small_big",!1,function(){t.animation.playAnimation("idle_big1",!1,t.playIdleAni.bind(t))});var e=this.animation.getAnimationDuration("idle_small_big");this.shadow&&this.shadow.scaleShadow(e,1)}},t.prototype.playIdleAni=function(){var a=this;this.blinkTime>0?this.animation.playAnimation(this.baseData.plantData.growStep>=1?"idle_big1":"idle_small1",!1,this.playIdleAni.bind(this)):(this.blinkTime=d.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation(this.baseData.plantData.growStep>=1?"idle_big1_eye":"idle_small1_eye",!1,function(){a.animation.playAnimation(a.baseData.plantData.growStep>=1?"idle_big1":"idle_small1",!1,a.playIdleAni.bind(a))}))},t.prototype.createShadow=function(){var a=this;this.needShadow?h.pzaBundleObjectPool.requestInstantByUrl2(m.pzaResourceUrl.SHADOW,function(t,e){if(null==t&&null!=e){var o=s.pzaNodeManager.getDownEffectNode();if(null!=o){e.setParent(o);var n=e.getComponent(f.pzaShadowEffect);n&&n.init(a.baseData,a.shadowOffset,a.shadowScale),a.shadow=n}}else console.error(t)}):this.shadow=null},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.sleepAni.pauseAnimation()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.sleepAni.resumeAnimation()},i([b({displayName:"\u7761\u89c9\u52a8\u753b",type:u.pzaSpineController})],t.prototype,"sleepAni",void 0),i([v],t)}(y.pzaBasePlant);e.pzaSunShroom=S,cc._RF.pop()},{"../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameSurEndless":"pzaGameSurEndless","../../Common/pzaGameSurvival":"pzaGameSurvival","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../../Common/pzaUtil":"pzaUtil","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Effect/pzaShadowEffect":"pzaShadowEffect","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaSuperChomper:[function(a,t,e){"use strict";cc._RF.push(t,"40a3e3X5CxDVZCnOfVaBBMz","pzaSuperChomper");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSuperChomper=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../pzaGameState"),u=a("./pzaAttackType"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.eating=!1,t.isEat=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.eating=!1,this.animation.playAnimation(t.plantData.eatTime>0?"idle2":"idle1",!0),c.pzaGameState.onlyShroomCofee=!1,c.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead){if(this.baseData.plantData.eatTime>0)return this.baseData.plantData.eatTime-=t,void(this.baseData.plantData.eatTime<=0&&(this.eating=!0,this.animation.playAnimation("eat",!1,function(){e.eating=!1,e.animation.playAnimation("idle1",!0)})));if(!this.eating&&!this.isEat){var o=this.findAttackTarget();if(null!=o)if(Math.random()<.2){var n=this.findSpecialAttackTarget();n.length>0&&this.specialAttack(n)}else this.attack(o)}}},t.prototype.findAttackTarget=function(){var a=this;if(null!=this.baseData&&!this.baseData.isDead){var t=null,e=-1;if(window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.DIVE))&&(o.zombieData.zombieType!=s.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(l.pzaBuffType.FROZEN)||o.zombieData.toolType==s.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType!=s.pzaZombieEnum.BUNGEE_ZOMBIE||o.xIndex!=a.baseData.xIndex)){var n=p.pzaUtil.getDistance(o.logicPos,a.baseData.logicPos);if(o.logicPos.x<=a.baseData.logicPos.x)n<=.5*c.pzaGameState.map.getBlockWidth()&&(t=o,e=0);else if(!(n>1.8*c.pzaGameState.map.getBlockWidth()))return-1==e?(t=o,void(e=n)):void(e<=n||(t=o,e=n))}}),null==t){var o=window.pzazombieManager.drZomBoss;this.baseData.xIndex>=7&&null!=o&&!o.baseData.isDead&&!o.baseData.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)&&(t=window.pzazombieManager.drZomBoss.baseData)}return t}},t.prototype.findSpecialAttackTarget=function(){var a=this,t=[];return window.pzazombieManager.zombieMap.forEach(function(e,o){null==e||null==o||o.isDead||null==o.logicPos||o.buffData.hasBuff(l.pzaBuffType.FLY)||o.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(l.pzaBuffType.DIVE)||(o.zombieData.zombieType!=s.pzaZombieEnum.POLEVAULTING_ZOMBIE||o.buffData.hasBuff(l.pzaBuffType.FROZEN)||o.zombieData.toolType==s.pzaEquipType.NO_EQUIP)&&(o.zombieData.zombieType==s.pzaZombieEnum.BUNGEE_ZOMBIE&&o.xIndex==a.baseData.xIndex||a.baseData.yIndex==o.yIndex&&o.xIndex>=a.baseData.xIndex&&o.xIndex<=a.baseData.xIndex+3&&t.push(o))}),t},t.prototype.attack=function(a){var t=this;this.baseData.plantData.eatTime=20,this.isEat=!0,this.animation.playAnimation("attack1",!1,function(){t.animation.playAnimation(t.baseData.plantData.eatTime>0?"idle2":"idle1",!0)},function(){if(t.isEat=!1,t.baseData&&!t.baseData.isDead){var e=window.pzazombieManager.getZombie(a);null==e||null==e.baseData||e.baseData.isDead?t.baseData.plantData.eatTime=0:(e.hurt(t.baseData.atk,t.baseData,u.pzaAttackType.EAT),null==a.zombieData||a.zombieData.cate!==s.pzaZombieCate.Gargantuar&&a.zombieData.zombieType!=s.pzaZombieEnum.DR_ZOMBOSS?(r.pzaSoundManager.playAudio("ChomperAtk"),a.isDead||(t.baseData.plantData.eatTime=0)):t.baseData.plantData.eatTime=0)}})},t.prototype.specialAttack=function(a){var t=this,e=0,o=0;this.isEat=!0,this.animation.playAnimation("attack2",!1,function(){t.animation.playAnimation(t.baseData.plantData.eatTime>0?"idle2":"idle1",!0)},function(){t.isEat=!1,t.baseData&&!t.baseData.isDead&&(a.forEach(function(a){var n=window.pzazombieManager.getZombie(a);null==n||null==n.baseData||n.baseData.isDead?t.baseData.plantData.eatTime=0:null==a.zombieData||a.zombieData.zombieType!=s.pzaZombieEnum.DR_ZOMBOSS?(n.hurt(200*t.baseData.atk,t.baseData,u.pzaAttackType.DEATH),null!=a.zombieData&&a.zombieData.zombieType==s.pzaZombieEnum.GARGANTUAR?e+=20:null!=a.zombieData&&a.zombieData.zombieType==s.pzaZombieEnum.RED_GARGANTUAR?e+=40:o=(o+=5)>=20?20:o,r.pzaSoundManager.playAudio("ChomperAtk")):n.hurt(t.baseData.atk,t.baseData,u.pzaAttackType.EAT)}),t.baseData.plantData.eatTime=e+o)})},i([m],t)}(d.pzaBasePlant));e.pzaSuperChomper=f,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaSurvivalConfig:[function(a,t,e){"use strict";cc._RF.push(t,"029eafKdDNAf7+1SwbYKfUY","pzaSurvivalConfig");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSurvivalConfig=void 0;var i=a("../Battle/Data/pzaZombieEnum"),r=a("./pzaGamePartConfig"),p=a("./pzaUtil"),l=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.minRandomTypeC=0,t.maxRandomTypeC=0,t.randomTypePool=[],t}return n(t,a),t.initSurvivalConfig=function(a){var e=this;null!=a&&a.forEach(function(a){if(null!=a){var o=null;null!=a.density&&(o=a.density.split(",")).forEach(function(a,t){o[t]=parseInt(a)});var n=null;null!=a.type&&(n=a.type.split(",")).forEach(function(a,t){n[t]=parseInt(a)});var i=new t(a.Level,parseInt(a.wave),o,null,null,parseInt(a.multiple),parseInt(a.tombstone),parseInt(a.tombstonemini),parseInt(a.flowerpot));if(i.randomTypePool=n,null!=a.waterexit&&(i.minWaterWave=parseInt(a.waterexit)),null!=a.waterend){var r=a.waterend.split(",");null!=r&&(i.lastWaterWaveMinColumn=parseInt(r[0]),i.lastWaterWaveZombie=parseInt(r[1]))}if(null!=a.fall){var p=a.fall.split(",");null!=p&&(i.lastBungeeMinColumn=parseInt(p[0]),i.lastBungeeZombie=parseInt(p[1]))}if(null!=a.fog&&(i.minFogColumn=parseInt(a.fog)),null!=a.typenumber){var l=a.typenumber.split(",");null!=l&&null!=l[0]&&null!=l[1]&&(i.minRandomTypeC=parseInt(l[0]),i.maxRandomTypeC=parseInt(l[1]))}e.survivalConfigMap.set(a.Level,i)}})},t.prototype.createNewConfig=function(){var a=new t(this.part,this.maxWave,this.waveZombieDensity,this.zombieTypes,this.newZombieType,this.magnification,this.tombCount,this.tombMinRow,this.flowerPotColumn);if(a.minWaterWave=this.minWaterWave,a.lastWaterWaveMinColumn=this.lastWaterWaveMinColumn,a.lastWaterWaveZombie=this.lastWaterWaveZombie,a.lastBungeeMinColumn=this.lastBungeeMinColumn,a.lastBungeeZombie=this.lastBungeeZombie,a.minFogColumn=this.minFogColumn,a.zombieTypes=[],0==this.minRandomTypeC&&0==this.maxRandomTypeC)this.randomTypePool.forEach(function(t){a.zombieTypes.push(t)});else{a.zombieTypes.push(i.pzaZombieEnum.ZOMBIE),Math.random()>=.2?a.zombieTypes.push(i.pzaZombieEnum.CONE_HEAD_ZOMBIE):a.zombieTypes.push(i.pzaZombieEnum.NEWSPAPER_ZOMBIE);var e=p.pzaUtil.getRandomNum(this.minRandomTypeC,this.maxRandomTypeC),o=[];this.randomTypePool.forEach(function(t){t!=i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE&&t!=i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE&&t!=i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE&&a.zombieTypes.indexOf(t)<0&&o.push(t)});var n=p.pzaUtil.getRandomArrayValue(o,e);a.zombieTypes=a.zombieTypes.concat(n),this.randomTypePool.forEach(function(t){t!=i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE?t==i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE&&a.zombieTypes.indexOf(i.pzaZombieEnum.CONE_HEAD_ZOMBIE)>=0?a.zombieTypes.push(t):t==i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE&&a.zombieTypes.indexOf(i.pzaZombieEnum.BUCKET_HEAD_ZOMBIE)>=0&&a.zombieTypes.push(t):a.zombieTypes.push(t)})}return a},t.createEndlessConfig=function(a,e){var o=new t(a+"-"+e,20,this.createZombieDensity(e),[],null,1,0,0,0);if(2==a?(o.tombCount=6,o.tombMinRow=6):3==a?(o.minWaterWave=1==e?8:6,o.lastWaterWaveMinColumn=6,o.lastWaterWaveZombie=3):4==a?(o.minWaterWave=1==e?8:6,o.lastWaterWaveMinColumn=6,o.lastWaterWaveZombie=3,o.minFogColumn=6):5==a&&(o.flowerPotColumn=3,o.lastBungeeMinColumn=5,o.lastBungeeZombie=3),o.redLimit=Math.min(50,e-5),1==e)o.zombieTypes.push(i.pzaZombieEnum.ZOMBIE),o.zombieTypes.push(i.pzaZombieEnum.CONE_HEAD_ZOMBIE),o.zombieTypes.push(i.pzaZombieEnum.BUCKET_HEAD_ZOMBIE),3!=a&&4!=a||(o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE),o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE));else{var n=[4,5,7,8,18,19,21,23,24,25];o.zombieTypes.push(i.pzaZombieEnum.ZOMBIE),Math.random()>=.2?(o.zombieTypes.push(i.pzaZombieEnum.CONE_HEAD_ZOMBIE),n.push(i.pzaZombieEnum.NEWSPAPER_ZOMBIE)):(o.zombieTypes.push(i.pzaZombieEnum.NEWSPAPER_ZOMBIE),n.push(i.pzaZombieEnum.CONE_HEAD_ZOMBIE)),3!=a&&4!=a||(n.push(i.pzaZombieEnum.SNORKEL_ZOMBIE),n.push(i.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE)),2!=a&&e>4&&n.push(i.pzaZombieEnum.ZOMBONI),5!=a&&(n.push(i.pzaZombieEnum.DANCING_ZOMBIE),n.push(i.pzaZombieEnum.DIGGER_ZOMBIE)),e>4&&n.push(i.pzaZombieEnum.GARGANTUAR),e>10&&n.push(i.pzaZombieEnum.RED_GARGANTUAR);var r=Math.min(e,9),l=p.pzaUtil.getRandomArrayValue(n,r);o.zombieTypes=o.zombieTypes.concat(l),3!=a&&4!=a||(o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE),o.zombieTypes.indexOf(i.pzaZombieEnum.CONE_HEAD_ZOMBIE)>=0&&o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),o.zombieTypes.indexOf(i.pzaZombieEnum.BUCKET_HEAD_ZOMBIE)>=0&&o.zombieTypes.push(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE))}return o},t.createZombieDensity=function(a){for(var t=[],e=1;e<=20;e++){var o=Math.floor(Math.floor(.8*(e+20*(a-1)-1))/2)+1;e%10==0&&(o=Math.floor(2.5*o)),t.push(o)}return t},t.getSurvivaliConfig=function(a,t){var e=this.survivalConfigMap.get(a+"-"+t);return null==e?(console.error("\u672a\u627e\u5230\u5bf9\u5e94\u5173\u5361\u914d\u7f6e"),null):e.createNewConfig()},t.getAllZombies=function(a){for(var t=[],e=1;e<=5;e++){var o=this.survivalConfigMap.get(a+"-"+e);null!=o&&null!=o.randomTypePool&&o.randomTypePool.forEach(function(a){t.indexOf(a)<0&&t.push(a)})}return t},t.getAllEndlessZombies=function(a){var t=[1,2,3,4,5,6,7,8,18,19,21,23,24,25,26,27];return 3!=a&&4!=a||(t.push(i.pzaZombieEnum.DUCKY_TUBE_ZOMBIE),t.push(i.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE),t.push(i.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE),t.push(i.pzaZombieEnum.SNORKEL_ZOMBIE),t.push(i.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE)),2!=a&&t.push(i.pzaZombieEnum.ZOMBONI),5!=a&&(t.push(i.pzaZombieEnum.DANCING_ZOMBIE),t.push(i.pzaZombieEnum.DIGGER_ZOMBIE)),t},t.cloneConfig=function(a){if(null==a)return null;var e=new t(a.part,a.maxWave,a.waveZombieDensity,a.zombieTypes,a.newZombieType,a.magnification,a.tombCount,a.tombMinRow,a.flowerPotColumn);return e.minWaterWave=a.minWaterWave,e.lastWaterWaveMinColumn=a.lastWaterWaveMinColumn,e.lastWaterWaveZombie=a.lastWaterWaveZombie,e.lastBungeeMinColumn=a.lastBungeeMinColumn,e.lastBungeeZombie=a.lastBungeeZombie,e.minFogColumn=a.minFogColumn,e.minRandomTypeC=a.minRandomTypeC,e.maxRandomTypeC=a.maxRandomTypeC,e.randomTypePool=a.randomTypePool,e.redLimit=a.redLimit,e},t.survivalConfigMap=new Map,t}(r.pzaGamePartConfig);e.pzaSurvivalConfig=l,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","./pzaGamePartConfig":"pzaGamePartConfig","./pzaUtil":"pzaUtil"}],pzaSurvivalItem:[function(a,t,e){"use strict";cc._RF.push(t,"43c35UedddIXZJuEZQCzZjm","pzaSurvivalItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSurvivalItem=void 0;var r=a("../Battle/pzaGameState"),p=a("../Common/pzaGameManager"),l=a("../Common/pzaLocalData"),s=a("../Common/pzaSoundManager"),c=a("../Common/pzaUIManager"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.trophyNode=null,t.lockNode=null,t.zombie=[],t.bg=null,t.flagNode=null,t.flagCount=null,t.curChapter=1,t.unlock=!1,t.startGameCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.on(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchItem,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.cancelItem,this),this.node.off(cc.Node.EventType.TOUCH_END,this.clickItem,this)},t.prototype.bindData=function(a,t){this.curChapter=a,this.startGameCall=t,this.unlock=l.pzaLocalData.data.survivalPassChapter+1>=a||l.pzaLocalData.data.survivalPassChapter>=5||l.pzaLocalData.data.preOpenSurvival,this.trophyNode.active=a<=5&&l.pzaLocalData.data.survivalPassChapter>=a,this.lockNode.active=!this.unlock,this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.bg.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393"),this.unlock?(this.zombie.forEach(function(a){a.color=cc.Color.fromHEX(cc.color(),"#FFFFFF")}),a>5&&(this.flagNode.active=!0,this.flagCount.string=""+l.pzaLocalData.getSurvivalFlagCount(a-5))):(this.zombie.forEach(function(a){a.color=cc.Color.fromHEX(cc.color(),"#939393")}),this.flagNode&&(this.flagNode.active=!1))},t.prototype.touchItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#939393"):cc.Color.fromHEX(cc.color(),"#606060")},t.prototype.cancelItem=function(){this.node.color=this.unlock?cc.Color.fromHEX(cc.color(),"#FFFFFF"):cc.Color.fromHEX(cc.color(),"#939393")},t.prototype.clickItem=function(){if(!this.unlock)return this.node.color=cc.Color.fromHEX(cc.color(),"#939393"),void s.pzaSoundManager.playAudio("unlockpart");this.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF");var a=r.pzaGameState.gameMode,t=this.curChapter,e=r.pzaGameMode.SURVIVAL;this.curChapter>5&&(t=this.curChapter-5,e=r.pzaGameMode.SUR_ENDLESS),l.pzaLocalData.isWeekTwo=!1,r.pzaGameState.midOut?(console.log("newGameMode",e,"oldGameMode",a,"this.curChapter",this.curChapter,"curChapter",t),e===a&&r.pzaGameState.curChapter===t?(this.startGameCall&&this.startGameCall(),console.log("recover"),p.pzaGameManager.getCurrentGame().gameRecover(t,1,e===r.pzaGameMode.SURVIVAL?l.pzaLocalBattleData.data.survivalBattleData[t-1]:l.pzaLocalBattleData.data.endlessBattleData[t-1])):(console.log("midOutStart"),p.pzaGameManager.midOutStart(e,t,1,this.startGameCall.bind(this)))):(this.startGameCall&&this.startGameCall(),c.pzaUIManager.removeBoardUI(),p.pzaGameManager.preLoadAndStart(e,t,1))},i([h({displayName:"\u5956\u676f",type:cc.Node})],t.prototype,"trophyNode",void 0),i([h({displayName:"\u9501",type:cc.Node})],t.prototype,"lockNode",void 0),i([h({displayName:"\u50f5\u5c38",type:[cc.Node]})],t.prototype,"zombie",void 0),i([h({displayName:"\u573a\u666f",type:cc.Node})],t.prototype,"bg",void 0),i([h({displayName:"\u65d7\u5e1c\u8282\u70b9",type:cc.Node})],t.prototype,"flagNode",void 0),i([h({displayName:"\u65d7\u5e1c\u6570\u91cf",type:cc.Label})],t.prototype,"flagCount",void 0),i([d],t)}(cc.Component);e.pzaSurvivalItem=m,cc._RF.pop()},{"../Battle/pzaGameState":"pzaGameState","../Common/pzaGameManager":"pzaGameManager","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUIManager":"pzaUIManager"}],pzaSurvivalView:[function(a,t,e){"use strict";cc._RF.push(t,"dc77cBkXi5Pj6oAJ6X9XOtJ","pzaSurvivalView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaSurvivalView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSoundManager"),s=a("../Common/pzaUIManager"),c=a("../Common/pzaUtil"),u=a("../Load/pzaPreLoadManager"),d=a("../utils/pzaChannel"),h=a("./pzaCommonMask"),m=a("./pzaRankView"),f=a("./pzaSurvivalItem"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.coinCount=null,t.trophyCount=null,t.scrollView=null,t.items=[],t.rankWidget=null,t}return n(t,a),t.prototype.onEnable=function(){var a=this;this.node.x=0,this.coinCount.string=c.pzaUtil.getCurrencyStr(p.pzaLocalData.data.coin),this.trophyCount.string=p.pzaLocalData.data.survivalPassChapter+"/5",this.scrollView.node.stopAllActions(),this.scrollView.node.y=580,this.scrollView.node.runAction(cc.sequence(cc.delayTime(.5),cc.moveTo(.2,cc.v2(0,180)).easing(cc.easeCubicActionOut()),cc.callFunc(function(){l.pzaSoundManager.playAudio("chapterdown")}))),p.pzaLocalData.data.survivalPassChapter<5?this.scrollView.scrollToLeft(0):this.scrollView.scrollToRight(0);for(var t=1;t<=10;t++){var e=this.items[t-1];e&&e.bindData(t,function(){a.close()})}this.rankWidget.updateAlignment(),this.createWxUserInfoButton(!1,null),"ks"==d.pzaChannel.instance().channel&&(this.rankWidget.node.active=!1)},t.prototype.clickBack=function(){var a=this;l.pzaSoundManager.playSFX(),this.scrollView.node.stopAllActions(),this.scrollView.node.runAction(cc.moveTo(.3,cc.v2(0,580)).easing(cc.easeCubicActionOut())),s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.CHALLENGE_VIEW,function(){h.pzaCommonMask.showMask(),a.node.parent.stopAllActions(),a.node.parent.x=-1680,a.node.x=1680,a.node.parent.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){h.pzaCommonMask.hideMask(),a.close()})))})},t.prototype.clickRankBtn=function(){this.createWxUserInfoButton(!0,function(){s.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.RANK_VIEW,function(a){var t=a&&a.getComponent(m.pzaRankView);t&&t.init(0)})})},t.prototype.createWxUserInfoButton=function(a,t){var e=this,o=d.pzaChannel.instance().getChannel();"wx"!==o.channel||null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar?t&&t():o.wxCheckPrivacySetting(function(n){var i=function(){var a=cc.view.getFrameSize(),n=cc.director.getWinSize(),i={left:(.5*n.width+e.rankWidget.node.x-60)/n.width*a.width,top:(.5*n.height-e.rankWidget.node.y-60)/n.height*a.height,width:120/n.width*a.width,height:120/n.height*a.height};o.getUserInfo(function(){null!=p.pzaLocalData.data.playerNick&&null!=p.pzaLocalData.data.playerAvatar&&(o.destroyAuthorizationButton(),t&&t())},i,!1)};if(n)return a?void o.wxPrivacyAuthorize(i,null):void(t&&t());i()},null)},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node);var a=d.pzaChannel.instance().getChannel();"wx"==a.channel&&a.destroyAuthorizationButton()},i([g({displayName:"\u91d1\u5e01",type:cc.Label})],t.prototype,"coinCount",void 0),i([g({displayName:"\u5956\u676f\u6570\u91cf",type:cc.Label})],t.prototype,"trophyCount",void 0),i([g({displayName:"scrollView",type:cc.ScrollView})],t.prototype,"scrollView",void 0),i([g({displayName:"\u7ae0\u8282\u5217\u8868",type:[f.pzaSurvivalItem]})],t.prototype,"items",void 0),i([g({displayName:"\u6392\u884c\u699c\u6309\u94aewidget",type:cc.Widget})],t.prototype,"rankWidget",void 0),i([y],t)}(cc.Component);e.pzaSurvivalView=v,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Load/pzaPreLoadManager":"pzaPreLoadManager","../utils/pzaChannel":"pzaChannel","./pzaCommonMask":"pzaCommonMask","./pzaRankView":"pzaRankView","./pzaSurvivalItem":"pzaSurvivalItem"}],pzaTallBowlingNut:[function(a,t,e){"use strict";cc._RF.push(t,"1784dclvO5NaI7VOK7taKOf","pzaTallBowlingNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaBowlingNut=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaBaseComponent"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaSoundManager"),u=a("../Zombie/pzaZombieBody"),d=a("../pzaGameState"),h=a("./pzaAttackType"),m=a("./pzaBowlingBody"),f=cc._decorator,z=f.ccclass,y=f.property,g=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.colliderBody=null,t.rotateNode=null,t.isBoom=!1,t.bodyBindData=!1,t.rotateSpeed=180,t.speedX=200,t.yDirection=0,t.colliderInterval=0,t.killCount=0,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.rotateNode.angle=0,this.yDirection=0,this.bodyBindData=!1,this.colliderInterval=0,this.killCount=0;var e=10*-this.baseData.yIndex+6;this.node.zIndex=e,c.pzaSoundManager.playAudio("plantplant"),c.pzaSoundManager.playAudio("throwBowling")},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.logicPos){this.colliderInterval-=a,this.rotateNode.angle-=a*this.rotateSpeed,this.baseData.logicPos.x+=this.speedX*a,this.baseData.logicPos.y+=this.speedX*a*this.yDirection;var t=d.pzaGameState.map.getMapYIndex(this.baseData.logicPos),e=d.pzaGameState.map.getMapXIndex(this.baseData.logicPos);if(this.baseData.yIndex!=t){this.baseData.yIndex=t;var o=10*-this.baseData.yIndex+5+this.yDirection;this.node.zIndex=o}this.baseData.xIndex!=e&&(this.baseData.xIndex=e),this.baseData.logicPos.x>=640&&this.close()}},t.prototype.logicLateUpdate=function(t){a.prototype.logicLateUpdate.call(this,t),this.bodyBindData||null==this.colliderBody||(this.bodyBindData=!0,this.colliderBody.bindData(this.baseData,this.onCollision.bind(this),this.onCollisionExit.bind(this))),null!=this.baseData&&null!=this.baseData.logicPos&&this.node.setPosition(this.baseData.logicPos)},t.prototype.onCollision=function(a){if(a.node.group==s.pzaGroupEnum.ZOMBIE){if(this.colliderInterval>0)return;var t=a.node.getComponent(u.pzaZombieBody);if(null==t||null==t.baseData)return;if(this.baseData.yIndex!=t.baseData.yIndex)return;var e=window.pzazombieManager.getZombie(t.baseData);e&&e.hurt(1e4,null,h.pzaAttackType.TALL_BOWLING),t.baseData.isDead&&(this.killCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_6,this.killCount)),this.colliderInterval=0;var o=10*-(this.baseData.yIndex+this.yDirection)+5+this.yDirection;this.node.zIndex=o}},t.prototype.onCollisionExit=function(){},i([y({displayName:"\u78b0\u649e\u8eab\u4f53",type:m.pzaBowlingBody})],t.prototype,"colliderBody",void 0),i([y({displayName:"\u65cb\u8f6c\u8282\u70b9",type:cc.Node})],t.prototype,"rotateNode",void 0),i([y({displayName:"\u7206\u70b8\u575a\u679c"})],t.prototype,"isBoom",void 0),i([z],t)}(l.pzaBaseComponent);e.pzaBowlingNut=g,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaSoundManager":"pzaSoundManager","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBowlingBody":"pzaBowlingBody"}],pzaTallNut:[function(a,t,e){"use strict";cc._RF.push(t,"bf049L/anZKXoHAQ0j0pCKJ","pzaTallNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTallNut=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaPlantEnum"),l=a("../pzaEffectManager"),s=a("../pzaGameState"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=8,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,s.pzaGameState.isZombieMode())this.animation.playAnimation("T_idle",!0);else{this.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=r.pzaUtil.getRandomFloatNum(8,10),e.animation.playAnimation(Math.random()>.5?"idle_eye1":"idle_eye2",!1,o))};this.animation.playAnimation("idle",!1,o),s.pzaGameState.onlyShroomCofee=!1,s.pzaGameState.onlyBoomPlant=!1}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("skin_3");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+130),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow2",e)},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("skin_2");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+130),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow1",e)},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("skin_1")},i([d],t)}(c.pzaBasePlant));e.pzaTallNut=h,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaTangleKelpEffect:[function(a,t,e){"use strict";cc._RF.push(t,"53e72GuT55P6JIIbXGWKW40","pzaTangleKelpEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTangleKelpEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSpineController"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spine1=null,t.spine2=null,t.pullStartCall=null,t.pullEndCall=null,t}return n(t,a),t.prototype.showEffect=function(a,t){var e=this;this.pullStartCall=a,this.pullEndCall=t,this.spine1.node.stopAllActions(),this.spine1.node.y=30,this.spine1.playAnimation("attack1_1",!1,function(){e.pullDown(),e.pullStartCall&&e.pullStartCall()}),this.spine2.playAnimation("attack1_2",!1,null)},t.prototype.pullDown=function(){var a=this;this.spine1.node.runAction(cc.sequence(cc.moveTo(.4,cc.v2(-30,-70)),cc.callFunc(function(){a.close(),a.pullEndCall&&a.pullEndCall()})))},t.prototype.pauseSelf=function(){this.spine1.pauseAnimation(),this.spine2.pauseAnimation(),this.spine1.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.spine1.resumeAnimation(),this.spine2.resumeAnimation(),this.spine1.node.resumeAllActions()},i([c({displayName:"\u6c34\u83491",type:p.pzaSpineController})],t.prototype,"spine1",void 0),i([c({displayName:"\u6c34\u83492",type:p.pzaSpineController})],t.prototype,"spine2",void 0),i([s],t)}(r.pzaBaseComponent);e.pzaTangleKelpEffect=u,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSpineController":"pzaSpineController"}],pzaTangleKelp:[function(a,t,e){"use strict";cc._RF.push(t,"ce5f4Bw6xJFdLASTNSw7c7E","pzaTangleKelp");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTangleKelp=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../pzaEffectManager"),s=a("../pzaGameState"),c=a("./pzaAttackType"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.node.stopAllActions(),this.node.opacity=255,this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle1_eye",!1,o))};this.animation.playAnimation("idle1",!1,o),s.pzaGameState.onlyShroomCofee=!1,s.pzaGameState.onlyBoomPlant=!1,s.pzaGameState.usePondPlant=!0},t.prototype.logicUpdate=function(t){if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&null!=this.baseData.plantData&&!this.baseData.isDead){this.blinkTime-=t;var e=this.findAttackTarget();null!=e&&this.attack(e)}},t.prototype.findAttackTarget=function(){return this.body.curTarget},t.prototype.attack=function(a){var t=this;this.baseData.isDead=!0,window.pzaplantManager.removePlant(this.baseData),r.pzaSoundManager.playAudio("floop"),r.pzaSoundManager.playAudio("TangleKelp"),l.pzaEffectManager.createWaterFlowerEffect(a.yIndex,cc.v2(a.logicPos.x+7,a.logicPos.y+3),null,.5),l.pzaEffectManager.createTangleKelpEffect(a.logicPos,function(){l.pzaEffectManager.createWaterFlowerEffect(t.baseData.yIndex,cc.v2(t.baseData.logicPos.x,t.baseData.logicPos.y-25),null);var e=window.pzazombieManager.getZombie(a);e&&t.baseData&&e.hurt(t.baseData.atk,t.baseData,c.pzaAttackType.TWINE)},function(){l.pzaEffectManager.createWaterFlowerEffect(a.yIndex,a.logicPos,null,.5),t.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){t.death(null)})))})},i([h],t)}(u.pzaBasePlant));e.pzaTangleKelp=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant"}],pzaTaskMgr:[function(a,t,e){"use strict";cc._RF.push(t,"78294NVJKZNLKTaS0KOgc5f","pzaTaskMgr"),Object.defineProperty(e,"__esModule",{value:!0});var o=a("../Achieve/pzaAchieveMgr"),n=a("../Common/pzaGameManager"),i=a("../Common/pzaGamePropConfig"),r=a("../Common/pzaLocalData"),p=a("../Common/pzaRewardManager"),l=a("../Common/pzaTipManager"),s=a("../utils/pzaResMgr"),c=a("../utils/pzakc"),u=a("./pzaTask"),d=function(){function a(){this.taskMap=null,this.list=null,this.tmpConf=null}return a.instance=function(){return a._me||(a._me=new a),a._me},a.prototype.init=function(){if(this.tmpConf||(this.tmpConf=s.pzaResMgr.instance().getConf("a32")),!this.tmpConf)return null;this.taskMap=new Map,this.list=[];for(var a=r.pzaLocalData.data.tasks||{},t=0;t<this.tmpConf.length;t++){var e=new u.pzaTask(this.tmpConf[t]),o=a[""+e.id];e.state=o||0,this.taskMap.set(e.id,e),this.list.push(e)}return this.list.sort(function(a,t){var e={2:0,0:1,1:2};return e[a.state]-e[t.state]}),this.list},a.prototype.getTask=function(a){return this.taskMap.get(a)},a.prototype.canGetTask=function(a,t){var e=this.taskMap.get(a);return!(!e||e.state)&&(t>=e.condNum?(this.addTask(e),!0):void 0)},a.prototype.hasTask=function(a){return this.taskMap.has(a)},a.prototype.addTask=function(a,t,e){void 0===t&&(t=2),void 0===e&&(e=!1),a&&1!==a.state&&(a.state=t,r.pzaLocalData.data.tasks[""+a.id]=t,e||(r.pzaLocalData.addDirty("tasks"),c.default.sendMsg("taskUpdate")))},a.prototype.obtainReward=function(a){var t=this.taskMap.get(a);if(t){t.state=2,r.pzaLocalData.data.tasks[""+a]=1,r.pzaLocalData.addDirty("tasks"),c.default.sendMsg("taskUpdate");var e=[];null!=t.reward&&t.reward.forEach(function(a){if(null!=a){var t=a.split("_"),o=new i.pzaRewardPropData(parseInt(t[0]),parseInt(t[1]));e.push(o)}}),p.pzaRewardManager.recieveRewards(e),t.condRank<0&&o.default.instance().addAchieve(37)}else console.error("\u65e0\u6b64\u4efb\u52a1id",a)},a.prototype.getTaskList=function(){return this.init()},a.prototype.checkWhenPassRank=function(a,t,e){if(void 0===e&&(e=!0),n.pzaGameManager.getCurrentGame().isMainMode()&&!(a<6||t<10)){t>=10&&a++;var o=a-5-1,i=this.taskMap.get(o);1!=r.pzaLocalData.data.tasks[""+o]&&a>=i.condRank&&this.addTask(i),r.pzaLocalData.addDirty("tasks")}},a.prototype.checkStar=function(a){if(n.pzaGameManager.getCurrentGame().isMainMode()){for(var t=0;t<this.list.length;t++){var e=this.list[t];e.condRank>0||e.condNum<=a&&this.addTask(e,2,!0)}r.pzaLocalData.addDirty("tasks"),c.default.sendMsg("taskUpdate")}},a.prototype.checkAddTask=function(a,t,e){if(void 0===t&&(t=1),void 0===e&&(e=!0),a&&n.pzaGameManager.getCurrentGame().isMainMode()&&!r.pzaLocalData.data.tasks[""+a]){var o=this.getTask(a);if(null!=o&&0==o.state&&!(o.condNum>t)&&(this.addTask(o),e)){var i=o.name+" \u4efb\u52a1\u8fbe\u6210";l.pzaTipManager.showGameTip(i)}}},a._me=null,a}();e.default=d,cc._RF.pop()},{"../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaRewardManager":"pzaRewardManager","../Common/pzaTipManager":"pzaTipManager","../utils/pzaResMgr":"pzaResMgr","../utils/pzakc":"pzakc","./pzaTask":"pzaTask"}],pzaTasksIcon:[function(a,t,e){"use strict";cc._RF.push(t,"43ed1OSNRlOhKabNFu9qsgm","pzaTasksIcon");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaGamePropConfig"),p=a("../Common/pzaLocalData"),l=a("../Common/pzaSpineController"),s=a("../Common/pzaSpriteFrameManager"),c=a("../Common/pzaUIManager"),u=a("../Load/pzaPreLoadManager"),d=a("./pzaBuyConfirmView"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.t_num=null,t.pic=null,t.icon=null,t.select1=null,t.select2=null,t.propAni=null,t.iconFrameArr=[],t.limitImg=null,t.achieveFrameArr=[],t.goodsType=null,t}return n(t,a),t.prototype.init=function(a,t,e){var o=a.split("_");switch(2===o.length?this.t_num.string="X"+o[1]:this.t_num.node.active=!1,this.icon.node.active=!0,this.propAni.node.active=!1,this.limitImg.active=!1,this.goodsType=parseInt(o[0]),parseInt(o[0])){case r.pzaGamePropEnum.PROP_SECRET_FLOWER:s.pzaSpriteFrameManager.loadGoldPlant(30,this.icon);break;case r.pzaGamePropEnum.PROP_BRONZE_FLOWE:s.pzaSpriteFrameManager.loadGoldPlant(31,this.icon);break;case r.pzaGamePropEnum.PROP_SILVER_FLOWE:s.pzaSpriteFrameManager.loadGoldPlant(32,this.icon);break;case r.pzaGamePropEnum.PROP_GOLD_FLOWER:s.pzaSpriteFrameManager.loadGoldPlant(33,this.icon);break;case r.pzaGamePropEnum.PROP_CHOCOLATES:this.icon.spriteFrame=this.iconFrameArr[0];break;case r.pzaGamePropEnum.PROP_COIN:this.icon.spriteFrame=this.iconFrameArr[1];break;case r.pzaGamePropEnum.PROP_CHERRY_BOMB:case r.pzaGamePropEnum.PROP_AUTO_PICK:case r.pzaGamePropEnum.PROP_FREE_SUN:this.icon.node.active=!1,this.propAni.node.active=!0,parseInt(o[0])==r.pzaGamePropEnum.PROP_CHERRY_BOMB?this.propAni.playAnimation("3ui_1",!0):parseInt(o[0])==r.pzaGamePropEnum.PROP_AUTO_PICK?this.propAni.playAnimation("2ui_1",!0):parseInt(o[0])==r.pzaGamePropEnum.PROP_FREE_SUN&&this.propAni.playAnimation("1ui_1",!0);break;case r.pzaGamePropEnum.PROP_ACHIEVE:this.t_num.node.active=!1,this.icon.node.active=!1,this.pic.spriteFrame=this.achieveFrameArr[0],this.limitImg.active=!0}1===p.pzaLocalData.data.tasks[""+e]&&(this.select1.active=!0,this.select2.active=!0),this.node.parent=t},t.prototype.clickFlowerIcon=function(){var a=this;switch(this.goodsType){case r.pzaGamePropEnum.PROP_SECRET_FLOWER:case r.pzaGamePropEnum.PROP_BRONZE_FLOWE:case r.pzaGamePropEnum.PROP_SILVER_FLOWE:case r.pzaGamePropEnum.PROP_GOLD_FLOWER:c.pzaUIManager.baseShowPopUI(u.pzaResourceUrl.BUY_CONFIRM_VIEW,function(t){var e=t&&t.getComponent(d.pzaBuyConfirmView);e&&e.tasksBindData(a.goodsType)})}},t.prototype.hasGet=function(){this.select1.active=!0,this.select2.active=!0},i([f(cc.Label)],t.prototype,"t_num",void 0),i([f(cc.Sprite)],t.prototype,"pic",void 0),i([f(cc.Sprite)],t.prototype,"icon",void 0),i([f(cc.Node)],t.prototype,"select1",void 0),i([f(cc.Node)],t.prototype,"select2",void 0),i([f(l.pzaSpineController)],t.prototype,"propAni",void 0),i([f([cc.SpriteFrame])],t.prototype,"iconFrameArr",void 0),i([f(cc.Node)],t.prototype,"limitImg",void 0),i([f([cc.SpriteFrame])],t.prototype,"achieveFrameArr",void 0),i([m],t)}(cc.Component);e.default=z,cc._RF.pop()},{"../Common/pzaGamePropConfig":"pzaGamePropConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSpineController":"pzaSpineController","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaBuyConfirmView":"pzaBuyConfirmView"}],pzaTasksItem:[function(a,t,e){"use strict";cc._RF.push(t,"356616dRkFGepXVwmW62Cfq","pzaTasksItem");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaLocalData"),p=a("./pzaTasksIcon"),l=cc._decorator,s=l.ccclass,c=l.property,u=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.t_name1=null,t.t_name2=null,t.t_name3=null,t.bt_pick=null,t.container_reward=null,t.prefab_reward=null,t.btn_lab=null,t.btnSpriFArr=[],t.view=null,t.task=null,t.call=null,t.showToWeekBtn=!1,t}return n(t,a),t.prototype.init=function(a,t,e){this.t_name2.node.color=cc.Color.fromHEX(cc.color(),"#E6300D"),this.call=e,this.t_name2.string="",this.t_name3.string="",this.t_name1.string=a.name,a.condNum&&(this.t_name1.string=a.name+"(",this.t_name2.string=r.pzaLocalData.getAllStar(!0)+"",this.t_name3.string="/"+a.condNum+")"),this.view=t,this.task=a,this.node.parent=this.view.container;for(var o=0;o<a.reward.length;o++){var n=a.reward[o];cc.instantiate(this.prefab_reward).getComponent(p.default).init(n,this.container_reward,a.id)}1===r.pzaLocalData.data.tasks[""+this.task.id]&&(this.bt_pick.active=!1),this.showToWeekBtn=!r.pzaLocalData.data.tasks[""+this.task.id],this.showToWeekBtn?(this.btn_lab.string="\u524d\u5f80",this.bt_pick.getComponent(cc.Sprite).spriteFrame=this.btnSpriFArr[1]):(this.btn_lab.string="\u9886\u53d6",this.bt_pick.getComponent(cc.Sprite).spriteFrame=this.btnSpriFArr[0],this.t_name2.node.color=cc.Color.fromHEX(cc.color(),"#0E9000"))},t.prototype.onClickPick=function(){if(this.showToWeekBtn)this.call();else{this.view.pickReward(this.task.id),this.bt_pick.active=!1;for(var a=0;a<this.container_reward.childrenCount;a++)this.container_reward.children[a].getComponent(p.default).hasGet()}},i([c(cc.Label)],t.prototype,"t_name1",void 0),i([c(cc.Label)],t.prototype,"t_name2",void 0),i([c(cc.Label)],t.prototype,"t_name3",void 0),i([c(cc.Node)],t.prototype,"bt_pick",void 0),i([c(cc.Node)],t.prototype,"container_reward",void 0),i([c(cc.Prefab)],t.prototype,"prefab_reward",void 0),i([c(cc.Label)],t.prototype,"btn_lab",void 0),i([c([cc.SpriteFrame])],t.prototype,"btnSpriFArr",void 0),i([s],t)}(cc.Component);e.default=u,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","./pzaTasksIcon":"pzaTasksIcon"}],pzaTasksView:[function(a,t,e){"use strict";cc._RF.push(t,"18792uaQChA84v8ThmwFEKO","pzaTasksView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaLocalData"),p=a("../Common/pzaUIManager"),l=a("../Load/pzaPreLoadManager"),s=a("../Task/pzaTaskMgr"),c=a("../utils/pzakc"),u=a("./pzaTasksItem"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.t_left_time=null,t.container=null,t.prefab_item=null,t.isInHomeView=!1,t.endTime=new Date("2024-08-25 00:00:00").getTime(),t}var e;return n(t,a),e=t,t.prototype.showLeftTime=function(){this.t_left_time.string=c.default.showPassTime(this.endTime-Date.now())},t.prototype.init=function(a){var t=this;this.isInHomeView=a,this.unschedule(this.showLeftTime),this.showLeftTime(),this.schedule(this.showLeftTime.bind(this),1);for(var e=s.default.instance().getTaskList(),o=0;o<e.length;o++){var n=e[o];cc.instantiate(this.prefab_item).getComponent(u.default).init(n,this,function(){t.clickClose(),t.isInHomeView&&p.pzaUIManager.aniShowPopUI(l.pzaResourceUrl.PART_SELECT_VIEW,null)})}},t.prototype.pickReward=function(a){s.default.instance().obtainReward(a)},t.prototype.clickClose=function(){this.unscheduleAllCallbacks(),this.node.destroy()},t.show=function(a){void 0===a&&(a=!0),r.pzaLocalData.data.weekTwoStartTip&&(r.pzaLocalData.data.weekTwoStartTip=!1,r.pzaLocalData.addDirty("weekTwoStartTip")),p.pzaUIManager.baseShowPopUI("resources/Prefab/View/tasksView",function(t){t.getComponent(e).init(a)})},i([m(cc.Label)],t.prototype,"t_left_time",void 0),i([m(cc.Node)],t.prototype,"container",void 0),i([m(cc.Prefab)],t.prototype,"prefab_item",void 0),e=i([h],t)}(cc.Component);e.default=f,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","../Common/pzaUIManager":"pzaUIManager","../Load/pzaPreLoadManager":"pzaPreLoadManager","../Task/pzaTaskMgr":"pzaTaskMgr","../utils/pzakc":"pzakc","./pzaTasksItem":"pzaTasksItem"}],pzaTask:[function(a,t,e){"use strict";cc._RF.push(t,"43f05V/ouRMjbIlNw8kt2YK","pzaTask"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTask=void 0;var o=a("../utils/pzakc");e.pzaTask=function(a){this.id=0,this.name="",this.reward=[],this.condNum=0,this.condRank=0,this.state=0,this.id=a.id,this.name=a.name||"",this.reward=o.default.strArr(a.reward),this.condNum=a.condNum||0,this.condRank=a.condRank||0},cc._RF.pop()},{"../utils/pzakc":"pzakc"}],pzaThreePeater:[function(a,t,e){"use strict";cc._RF.push(t,"9c84c/GRQpOC6M8xFkB02aA","pzaThreePeater");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaThreePeater=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("../Data/pzaBuffData"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.attacking=!1,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),d.pzaGameState.isZombieMode())return this.attacking=!1,this.atkAniTime=this.animation.getAnimationDuration("T_attack"),void this.animation.playAnimation("T_idle",!0);this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(e.canAttack()){var a=s.pzaUtil.getRandomNum(1,2),t=0;return l.pzaSoundManager.playAudio("PeashooterAtk"),void e.animation.playAnimation("attack",!1,o,function(){a==++t&&e.shoot()})}e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};o(),d.pzaGameState.usePeaPlant=!0,d.pzaGameState.onlyShroomCofee=!1,d.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,!this.attacking&&d.pzaGameState.isZombieMode()&&this.canAttack())return l.pzaSoundManager.playAudio("PeashooterAtk"),this.attacking=!0,void this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)},function(){e.shoot()},this.atkAniTime/1.4)},t.prototype.shoot=function(){if(null!=this.baseData&&!this.baseData.isDead){var a=p.pzaNodeManager.getBulletNode();if(null!=a)for(var t=2;t>=0;t--){var e=null,o=this.baseData.yIndex+t-1;if(!(o<0||o>=d.pzaGameState.map.getMapRow())){var n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=n){n.setParent(a);var i=this.shootNode.convertToWorldSpaceAR(cc.v2()),l=a.convertToNodeSpaceAR(i);if(n.setPosition(l),o!=this.baseData.yIndex){var s=d.pzaGameState.map.getYInterval(o)/3+this.shootNode.y;e=d.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,o,0,s).y}var u=n.getComponent(c.pzaBaseBullet);u&&u.init(o,this.baseData.atk,1,e);var h=d.pzaGameState.map.getMapSkewColumn();h>0&&this.baseData.xIndex<=h-2&&(u.maxPosX=this.baseData.logicPos.x+1.5*d.pzaGameState.map.getBlockWidth())}}}}},t.prototype.canAttack=function(){var a=this;if(null==this.baseData||null==this.baseData.logicPos)return!1;for(var t=function(t){var o=e.baseData.yIndex+t-1;if(o<0||o>=d.pzaGameState.map.getMapRow())return"continue";var n=!1;return window.pzazombieManager.zombieDatas[o].forEach(function(t){!t||!t.logicPos||t.logicPos.x<a.baseData.logicPos.x||t.buffData.hasBuff(u.pzaBuffType.DIVE)||t.buffData.hasBuff(u.pzaBuffType.FLY)||t.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)||(n=!0)}),n||(n=e.findDrZomBoss()),n?{value:!0}:void 0},e=this,o=0;o<3;o++){var n=t(o);if("object"==typeof n)return n.value}return!1},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null!=a&&null!=a.baseData&&!a.baseData.isDead&&!a.baseData.buffData.hasBuff(u.pzaBuffType.UNABLE_SELECT)},i([z({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([z({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([f],t)}(h.pzaBasePlant);e.pzaThreePeater=y,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaThrowBullet:[function(a,t,e){"use strict";cc._RF.push(t,"fee5cYvFCdESpVzGX06894o","pzaThrowBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaThrowBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaNodeManager"),u=a("../../Common/pzaWorldEventManager"),d=a("../Data/pzaBuffData"),h=a("../Data/pzaPlantEnum"),m=a("../Data/pzaZombieEnum"),f=a("../Effect/pzaBaseEffect"),z=a("../Plant/pzaAttackType"),y=a("../Plant/pzaPlantBody"),g=a("../Zombie/pzaZombieBody"),v=a("../pzaGameState"),b=cc._decorator,S=b.ccclass,P=b.property,C=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.throwMaxHeight=270,t.maxLifeTime=3,t.hitPrefab=null,t.bulletNode=null,t.poolPrefab=null,t.lifeTime=0,t.bulletYIndex=-1,t.targetXIndex=-1,t.atk=0,t.aSpeed=-1e3,t.xSpeed=450,t.ySpeed=800,t.hasImmobilize=!1,t.hasSpatter=!1,t.hasFrost=!1,t.hasColl=!1,t.floorCheckY=0,t.target=null,t.xOffset=0,t.leftThrowTime=0,t.collider=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),u.pzaWorldEventManager.addListener(u.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),u.pzaWorldEventManager.removeListener(u.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.init=function(a,t,e,o,n,i,r){if(void 0===i&&(i=-1),void 0===r&&(r=!1),this.bulletYIndex=t,this.targetXIndex=i,this.atk=e,this.lifeTime=0,this.hasImmobilize=!1,this.hasSpatter=r,this.hasFrost=r,this.hasColl=!1,null!=n&&null!=o){this.target=o,this.xOffset=n.x-this.target.logicPos.x,this.floorCheckY=n.y-130,this.ySpeed=Math.sqrt(2*this.throwMaxHeight*Math.abs(this.aSpeed));var l=Math.abs(this.ySpeed/this.aSpeed)+Math.sqrt(2*Math.abs(this.node.y+this.throwMaxHeight-n.y)/Math.abs(this.aSpeed));this.leftThrowTime=l,this.floorCheckY=n.y-130;var s=n.x-this.node.x;this.xSpeed=s/l,a?p.pzaCollisionManager.getInstance.addZombieByRow(this.bulletYIndex,this):p.pzaCollisionManager.getInstance.addBulletByRow(this.bulletYIndex,this),this.node.scale=1}},t.prototype.updateBulletAngel=function(a){this.bulletNode.angle=a},t.prototype.logicUpdate=function(a){this.lifeTime+=a,this.leftThrowTime-=a,this.lifeTime>=this.maxLifeTime?this.close():(this.bulletNode.angle-=180*a,this.updateMove(a))},t.prototype.updateMove=function(a){if(this.node.x+=this.xSpeed*a,this.node.y+=this.ySpeed*a,this.ySpeed+=this.aSpeed*a,this.ySpeed<0&&this.node.y<this.floorCheckY)return this.close(),void this.playHitEffect(null);if(null!=this.target){var t=this.target.logicPos.x+this.xOffset-this.node.x;this.xSpeed=t/this.leftThrowTime}},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.onCollision=function(a){if(null!=a&&!this.hasColl)if(a.node.group!=s.pzaGroupEnum.ZOMBIE){if(a.node.group==s.pzaGroupEnum.PLANT){var t=a.node.getComponent(y.pzaPlantBody);this.colliderPlant(t&&t.baseData)}}else{var e=a.node.getComponent(g.pzaZombieBody);this.colliderZombie(e&&e.baseData)}},t.prototype.colliderZombie=function(a){var t=this;if(a&&!a.isDead&&(null!=a.zombieData&&a.zombieData.zombieType==m.pzaZombieEnum.DR_ZOMBOSS||-1==this.bulletYIndex||this.bulletYIndex==a.yIndex)&&!(a.zombieData&&a.zombieData.hypnosis||a.buffData.hasBuff(d.pzaBuffType.FLY)||a.buffData.hasBuff(d.pzaBuffType.INVINCIBLE))){var e=window.pzazombieManager.getZombie(a);if(e){if(e.hurt(this.atk,null,z.pzaAttackType.THROW_ATK),this.hasImmobilize&&!a.buffData.hasBuff(d.pzaBuffType.IMM_CONTROL)&&!a.buffData.hasBuff(d.pzaBuffType.IMM_IMMOBILIZE)){var o=a.buffData.releaseBuff(d.pzaBuffType.IMMOBILIZE);null!=o?o.buffTime=5:(o=new d.pzaBuffInfo(d.pzaBuffType.IMMOBILIZE,5),a.buffData.addBuff(o),e.bePauseControl())}if(!this.hasFrost||a.buffData.hasBuff(d.pzaBuffType.IMM_ICE)||e.baseData.buffData.hasBuff(d.pzaBuffType.HARD_BODY)||e.baseData.zombieData.zombieType!=m.pzaZombieEnum.NightWear&&a.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROST,10,.5)),this.hasSpatter){for(var n=[],i=a.yIndex-1;i<=a.yIndex+1;i++)i<0||i>=v.pzaGameState.map.getMapRow()||window.pzazombieManager.zombieDatas[i].forEach(function(t){null!=t&&t!=a&&t.xIndex==a.xIndex&&(t.buffData.hasBuff(d.pzaBuffType.FLY)||t.buffData.hasBuff(d.pzaBuffType.DIVE)||t.buffData.hasBuff(d.pzaBuffType.INVINCIBLE)||n.push(t))});n.forEach(function(a){var e=window.pzazombieManager.getZombie(a);null!=e&&(e.hurt(26),!t.hasFrost||e.baseData.buffData.hasBuff(d.pzaBuffType.IMM_ICE)||e.baseData.buffData.hasBuff(d.pzaBuffType.HARD_BODY)||e.baseData.zombieData.zombieType!=m.pzaZombieEnum.NightWear&&e.baseData.buffData.addBuff(new d.pzaBuffInfo(d.pzaBuffType.FROST,10,.5)))})}this.close(),this.playHitEffect(a)}}},t.prototype.colliderPlant=function(a){if(!(!a||a.isDead||-1!=this.bulletYIndex&&this.bulletYIndex!=a.yIndex||-1!=this.targetXIndex&&this.targetXIndex!=a.xIndex)){this.close();var t=null,e=-1;if(window.pzaplantManager.getAllPlant(h.pzaPlantEnum.UMBRELLA_LEAF).forEach(function(o){if(null==t||0!=e)if(o.xIndex==a.xIndex&&o.yIndex==a.yIndex)t=o,e=0;else if(Math.abs(o.xIndex-a.xIndex)<=1&&Math.abs(o.yIndex-a.yIndex)<=1){var n=Math.abs(o.xIndex-a.xIndex)+Math.abs(o.yIndex-a.yIndex);(null==t||n<e)&&(t=o,e=n)}}),null==t){var o=""+a.xIndex+a.yIndex,n=window.pzaplantManager.pumpkinDataMap.get(o);if(null==n){var i=window.pzaplantManager.plantDataMap.get(o);if(null==i){var r=window.pzaplantManager.plantEnvDataMap.get(o);null==r||(p=window.pzaplantManager.getPlantByData(r))&&p.hurt(this.atk,null,z.pzaAttackType.THROW_ATK)}else(p=window.pzaplantManager.getPlantByData(i))&&p.hurt(this.atk,null,z.pzaAttackType.THROW_ATK)}else{var p;(p=window.pzaplantManager.getPlantByData(n))&&p.hurt(this.atk,null,z.pzaAttackType.THROW_ATK)}}else u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.RICOCHET_BULLET,t)}},t.prototype.playHitEffect=function(a){if(null!=this.hitPrefab){var t=10*-this.bulletYIndex+5,e=cc.v2(this.node.x,this.node.y);null!=a&&(null==a.zombieData||a.zombieData.zombieType!=m.pzaZombieEnum.DR_ZOMBOSS?(t=10*-a.yIndex+5,e=cc.v2(a.logicPos.x,a.logicPos.y+70)):t=5);var o=c.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=l.pzaGameCommonPool.requestInstant2(this.hitPrefab);n.setParent(o),n.zIndex=t,n.setPosition(e);var i=n.getComponent(f.pzaBaseEffect);i&&i.showEffect(null,null)}}},t.prototype.close=function(){p.pzaCollisionManager.getInstance.delBulletByRow(this.bulletYIndex,this),this.hasColl=!0,this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([P({displayName:"\u6295\u5c04\u6700\u5927\u9ad8\u5ea6"})],t.prototype,"throwMaxHeight",void 0),i([P({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],t.prototype,"maxLifeTime",void 0),i([P({displayName:"\u5b50\u5f39\u51fb\u4e2d\u7279\u6548",type:cc.Prefab})],t.prototype,"hitPrefab",void 0),i([P({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"bulletNode",void 0),i([P(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([S],t)}(r.pzaBaseComponent);e.pzaThrowBullet=C,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../Effect/pzaBaseEffect":"pzaBaseEffect","../Plant/pzaAttackType":"pzaAttackType","../Plant/pzaPlantBody":"pzaPlantBody","../Zombie/pzaZombieBody":"pzaZombieBody","../pzaGameState":"pzaGameState"}],pzaTipManager:[function(a,t,e){"use strict";cc._RF.push(t,"39a22IkorxKOZqNP3AroKAb","pzaTipManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTipManager=void 0;var r=a("../Battle/Data/pzaPlantEnum"),p=a("../Battle/pzaGameState"),l=a("./pzaGameCommonPool"),s=a("./pzaGuideTip"),c=a("./pzaHomeTip"),u=a("./pzaMapManager"),d=a("./pzaPreviewTip"),h=cc._decorator,m=h.ccclass,f=h.property,z=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.guideTipNode=null,t.homeTipNode=null,t.previewTipPrefab=null,t.guideTipPrefab=null,t.homeTipPrefab=null,t.curGuideTip=null,t.curHomeTip=null,t.curPreviewTip=null,t}var e;return n(t,a),e=t,t.prototype.onLoad=function(){e.instance=this},t.showHomeTip=function(a,t,o){void 0===t&&(t=null),void 0===o&&(o=0);var n=e.instance;if(null!=n&&null!=n.homeTipNode){this.hideHomeTip();var i=l.pzaGameCommonPool.requestInstant(n.homeTipPrefab);if(null!=i){t?i.setParent(t):i.setParent(n.homeTipNode);var r=i.getComponent(c.pzaHomeTip);r&&r.showTip(a,o),n.curHomeTip=r}}},t.hideHomeTip=function(){var a=e.instance;null!=a&&null!=a.curHomeTip&&(a.curHomeTip.close(),a.curHomeTip=null)},t.showPreviewTip=function(a,t,o,n){var i=e.instance;if(null!=i&&null!=i.guideTipNode){i.curPreviewTip&&i.curPreviewTip.close(),i.curPreviewTip=null;var r=l.pzaGameCommonPool.requestInstant(i.previewTipPrefab);if(null!=r){r.setParent(i.guideTipNode);var p=r.getComponent(d.pzaPreviewTip);p&&p.showTip(a,t,o,n),i.curPreviewTip=p}}},t.showGuideTip=function(a,t){void 0===t&&(t=0);var o=e.instance;if(null!=o&&null!=o.guideTipNode){this.hideGuideTip();var n=l.pzaGameCommonPool.requestInstant(o.guideTipPrefab);if(null!=n){n.setParent(o.guideTipNode);var i=n.getComponent(s.pzaGuideTip);i&&i.showGuideTip(a,t),o.curGuideTip=i}}},t.hideGuideTip=function(){var a=e.instance;null!=a&&null!=a.curGuideTip&&(a.curGuideTip.close(),a.curGuideTip=null)},t.showLossStarTip=function(a,t){var o=e.instance;if(null!=o&&null!=o.guideTipNode){this.hideGuideTip();var n=l.pzaGameCommonPool.requestInstant(o.guideTipPrefab);if(null!=n){n.setParent(o.guideTipNode);var i=n.getComponent(s.pzaGuideTip);i&&i.showStarLoseTip(a,t),o.curGuideTip=i}}},t.showGameTip=function(a,t,o){void 0===t&&(t=null),void 0===o&&(o=!1);var n=e.instance;if(null!=n&&null!=n.guideTipNode)if(a){this.hideGuideTip();var i=l.pzaGameCommonPool.requestInstant(n.guideTipPrefab);if(null!=i){i.setParent(n.guideTipNode);var r=i.getComponent(s.pzaGuideTip);r&&r.showGameTip(a,t,o),n.curGuideTip=r}}else t&&t()},t.showEnvPlantTip=function(a){p.pzaGameState.envPlantTip.has(a)||(p.pzaGameState.envPlantTip.add(a),a!=u.pzaBlockType.POND?a!=u.pzaBlockType.ROOF?a!=u.pzaBlockType.DOOM_HOLE&&a!=u.pzaBlockType.GOLD_HOLE||this.showGameTip("\u4f60\u4e0d\u80fd\u628a\u690d\u7269\u79cd\u5728\u5f39\u5751\u4e0a"):this.showGameTip("\u4f60\u53ea\u80fd\u628a\u690d\u7269\u79cd\u5728\u82b1\u76c6\u91cc"):this.showGameTip("\u8bf7\u5148\u79cd\u83b2\u53f6"))},t.showPondPlantTip=function(a,t){p.pzaGameState.pondPlantTip.has(a)||(p.pzaGameState.pondPlantTip.add(a),this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u6c34\u91cc"))},t.showSpecialPlantTip=function(a,t){p.pzaGameState.specialPlantTip.has(a)||(p.pzaGameState.specialPlantTip.add(a),a!=r.pzaPlantEnum.GRAVE_BUSTER?a!=r.pzaPlantEnum.POTATO_MINE?a!=r.pzaPlantEnum.SPIKEWEED?a!=r.pzaPlantEnum.COFFEE_BEAN?a!=r.pzaPlantEnum.GATLING_PEA?a!=r.pzaPlantEnum.TWIN_SUNFLOWER?a!=r.pzaPlantEnum.GLOOM_SHROOM?a!=r.pzaPlantEnum.CATTAIL?a!=r.pzaPlantEnum.WINTER_MELON?a!=r.pzaPlantEnum.GOLD_MAGNET?a!=r.pzaPlantEnum.SPIKEROCK?a!=r.pzaPlantEnum.COB_CANNON?a!=r.pzaPlantEnum.SUPER_CHOMPER?a!=r.pzaPlantEnum.STAR_FRUIT||this.showGameTip("\u4f60\u53ea\u80fd\u628a\u661f\u661f\u679c\u79cd\u5b50\u79cd\u5728\u8fd9\u91cc"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u5927\u5634\u82b1\u4e0a"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u4e00\u5bf9\u7389\u7c73\u6295\u624b"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u5730\u523a"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u78c1\u529b\u83c7"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u897f\u74dc\u6295\u624b"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u83b2\u53f6"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u5927\u55b7\u83c7"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u5411\u65e5\u8475"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u53cc\u91cd\u5c04\u624b"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u7761\u89c9\u4e2d\u7684\u8611\u83c7"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u575a\u56fa\u7684\u5730\u9762"):this.showGameTip(t+"\u4e0d\u80fd\u79cd\u5728\u83b2\u53f6"):this.showGameTip(t+"\u53ea\u80fd\u79cd\u5728\u5893\u7891\u4e0a"))},t.showGameSpecialTip=function(a,t){p.pzaGameState.gameSpecialTip.has(a)||(p.pzaGameState.gameSpecialTip.add(a),this.showGameTip(t))},t.instance=null,i([f({displayName:"\u663e\u793a\u5f15\u5bfc\u63d0\u793a\u6846\u7684\u8282\u70b9",type:cc.Node})],t.prototype,"guideTipNode",void 0),i([f({displayName:"\u663e\u793a\u5927\u5385\u63d0\u793a\u6846\u7684\u8282\u70b9",type:cc.Node})],t.prototype,"homeTipNode",void 0),i([f({displayName:"\u9884\u89c8\u63d0\u793a\u6846\u9884\u8bbe",type:cc.Prefab})],t.prototype,"previewTipPrefab",void 0),i([f({displayName:"\u5f15\u5bfc\u63d0\u793a\u6846\u9884\u8bbe",type:cc.Prefab})],t.prototype,"guideTipPrefab",void 0),i([f({displayName:"\u5927\u5385\u63d0\u793a\u6846\u9884\u8bbe",type:cc.Prefab})],t.prototype,"homeTipPrefab",void 0),e=i([m],t)}(cc.Component);e.pzaTipManager=z,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameCommonPool":"pzaGameCommonPool","./pzaGuideTip":"pzaGuideTip","./pzaHomeTip":"pzaHomeTip","./pzaMapManager":"pzaMapManager","./pzaPreviewTip":"pzaPreviewTip"}],pzaTomb:[function(a,t,e){"use strict";cc._RF.push(t,"cbb17mM/rdJO6fjRCGZFwHz","pzaTomb");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTomb=void 0;var r=a("../Common/pzaBaseComponent"),p=a("../Common/pzaUtil"),l=a("./pzaEffectManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tomb=null,t.tombFrames=[],t.taft=null,t.taftFrames=[],t.xIndex=0,t.yIndex=0,t.dirtAniEnd=!1,t.tombGrowTime=0,t.growEnd=!1,t.smallTomb=!1,t.createCall=null,t}return n(t,a),t.prototype.init=function(a,t,e,o){var n=this;if(void 0===o&&(o=!1),this.xIndex=a,this.yIndex=t,this.createCall=e,this.dirtAniEnd=!1,this.tombGrowTime=0,this.growEnd=!1,this.smallTomb=Math.random()>.5,this.taft.spriteFrame=this.smallTomb?this.taftFrames[0]:this.taftFrames[1],this.tomb.spriteFrame=p.pzaUtil.getRandomValueFromArray(this.tombFrames),this.tomb.node.active=!1,this.taft.node.active=!1,this.node.zIndex=10*-t,window.pzaplantManager.holeMap.set(""+a+t,1),o)return this.dirtAniEnd=!0,this.growEnd=!0,this.tomb.node.active=!0,this.taft.node.active=!0,void(this.tomb.node.y=this.smallTomb?26:44);l.pzaEffectManager.createDirtEffect("idle1",t,cc.v2(this.node.x,this.node.y),function(){n.dirtAniEnd=!0})},t.prototype.update=function(a){if(!this.growEnd){if(this.tombGrowTime>0){this.tombGrowTime-=a;var t=this.smallTomb?26:44;return this.tomb.node.y=Math.min(.3,.3-this.tombGrowTime)/.3*(t+this.tomb.node.height/2)-this.tomb.node.height/2,void(this.tombGrowTime<=0&&(this.createCall&&this.createCall(),this.growEnd=!0))}this.dirtAniEnd&&(this.tomb.node.active=!0,this.taft.node.active=!0,this.tomb.node.y=-this.tomb.node.height/2,this.tombGrowTime=.3)}},t.prototype.close=function(){a.prototype.close.call(this),window.pzaplantManager.holeMap.delete(""+this.xIndex+this.yIndex)},i([u({displayName:"\u5893\u7891",type:cc.Sprite})],t.prototype,"tomb",void 0),i([u({displayName:"\u5893\u7891\u56fe",type:[cc.SpriteFrame]})],t.prototype,"tombFrames",void 0),i([u({displayName:"\u571f\u5806",type:cc.Sprite})],t.prototype,"taft",void 0),i([u({displayName:"\u571f\u5806\u56fe",type:[cc.SpriteFrame]})],t.prototype,"taftFrames",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaTomb=d,cc._RF.pop()},{"../Common/pzaBaseComponent":"pzaBaseComponent","../Common/pzaUtil":"pzaUtil","./pzaEffectManager":"pzaEffectManager"}],pzaTorchNut:[function(a,t,e){"use strict";cc._RF.push(t,"93d33OnRxFOf5VCxchjjSiG","pzaTorchNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTorchNut=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaUtil"),l=a("../Data/pzaPlantEnum"),s=a("./pzaAttackType"),c=a("./pzaBasePlant"),u=a("./pzaPlantBody"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.torchwoodBody=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=l.pzaPlantCate.Nut,this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(e.blinkTime<=0)return e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),void e.animation.playAnimation("idle2",!1,o);e.animation.playAnimation("idle1",!1,o)};this.animation.playAnimation("idle1",!1,o)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.logicLateUpdate=function(){this.bodyBindData||(this.torchwoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody)),a.prototype.logicLateUpdate.call(this)},t.prototype.hurt=function(t,e,o){a.prototype.hurt.call(this,t,e,o);var n=window.pzazombieManager.getZombie(e);n&&n.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.FLOOR_ATK)},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody)},t.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.flaserDeath.call(this)},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([m({displayName:"\u706b\u70ac\u78b0\u649e\u8eab\u4f53",type:u.pzaPlantBody})],t.prototype,"torchwoodBody",void 0),i([h],t)}(c.pzaBasePlant);e.pzaTorchNut=f,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","./pzaAttackType":"pzaAttackType","./pzaBasePlant":"pzaBasePlant","./pzaPlantBody":"pzaPlantBody"}],pzaTorchwood:[function(a,t,e){"use strict";cc._RF.push(t,"ec469XJcg1Ccr6pdk9quX8Q","pzaTorchwood");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTorchwood=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaUtil"),l=a("../pzaGameState"),s=a("./pzaBasePlant"),c=a("./pzaPlantBody"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.torchwoodBody=null,t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),l.pzaGameState.isZombieMode())this.animation.playAnimation("T_idle",!0);else{this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var o=function(){if(e.blinkTime<=0)return e.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),void e.animation.playAnimation("idle_eye",!1,o);e.animation.playAnimation("idle",!1,o)};this.animation.playAnimation("idle",!1,o),l.pzaGameState.onlyShroomCofee=!1,l.pzaGameState.onlyBoomPlant=!1}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.logicLateUpdate=function(){this.bodyBindData||(this.torchwoodBody.bindData(this.baseData),this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.addBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody)),a.prototype.logicLateUpdate.call(this)},t.prototype.death=function(t,e){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.death.call(this,t,e)},t.prototype.flaserDeath=function(){this.baseData&&this.baseData.yIndex>-1&&r.pzaCollisionManager.getInstance.delBulletPlantByRow(this.baseData.yIndex,this.torchwoodBody),a.prototype.flaserDeath.call(this)},i([h({displayName:"\u706b\u70ac\u78b0\u649e\u8eab\u4f53",type:c.pzaPlantBody})],t.prototype,"torchwoodBody",void 0),i([d],t)}(s.pzaBasePlant);e.pzaTorchwood=m,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant","./pzaPlantBody":"pzaPlantBody"}],pzaTrackBullet:[function(a,t,e){"use strict";cc._RF.push(t,"6b0f9fmLplNC4K6TIvIqKNh","pzaTrackBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTrackBullet=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaCollisionManager"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGroupEnum"),c=a("../../Common/pzaNodeManager"),u=a("../../Common/pzaUtil"),d=a("../../Common/pzaWorldEventManager"),h=a("../../Load/pzaBundleObjectPool"),m=a("../../Load/pzaPreLoadManager"),f=a("../Data/pzaBuffData"),z=a("../Effect/pzaShadowEffect"),y=a("../Zombie/pzaZombieBody"),g=cc._decorator,v=g.ccclass,b=g.property,S=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletNode=null,t.maxLifeTime=3,t.poolPrefab=null,t.moveSpeed=500,t.angelSpeed=250,t.moveDirection=cc.v2(1,0),t.targetData=null,t.yIndex=-1,t.logicPos=null,t.atk=0,t.hasColl=!1,t.curShadow=null,t.lifeTime=0,t.collider=null,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),d.pzaWorldEventManager.addListener(d.pzaWorldEventType.CLEAR_SCREEN,this.close,this)},t.prototype.onDisable=function(){p.pzaCollisionManager.getInstance.delBulletOther(this),a.prototype.onDisable.call(this)},t.prototype.getCollider=function(){return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.collider.poSource=this.node,this.collider):null},t.prototype.init=function(a,t,e,o){this.targetData=t,this.logicPos=e,this.atk=a,this.yIndex=o,this.hasColl=!1,this.lifeTime=0,this.moveDirection=cc.v2(1,0),this.node.setPosition(e),this.node.angle=0,this.lifeTime=0,this.createShadow(),p.pzaCollisionManager.getInstance.addBulletOther(this)},t.prototype.logicUpdate=function(a){this.lifeTime+=a,this.lifeTime>=this.maxLifeTime?this.close():(null==this.targetData||this.targetData.isDead||null==this.targetData.zombieData||this.targetData.zombieData.hypnosis||this.updateDirection(a),this.updateMove(a))},t.prototype.updateDirection=function(a){var t=window.pzazombieManager.getZombie(this.targetData);if(null!=t){var e=t.getZombieHeadWps(this.yIndex);if(null!=e){var o=this.node.parent.convertToNodeSpaceAR(e).sub(this.logicPos).normalizeSelf(),n=u.pzaUtil.getVectorsRadion(o,this.moveDirection)*(180/Math.PI);if(!(Math.abs(n)<=1)){var i=n>=0?-this.angelSpeed*a:this.angelSpeed*a,r=u.pzaUtil.rotateAngle(this.moveDirection,i);this.moveDirection=r.normalizeSelf(),this.node.angle=u.pzaUtil.getVectorsRadion(this.moveDirection,cc.v2(1,0))*(180/Math.PI)}}}},t.prototype.updateMove=function(a){this.logicPos.x+=a*this.moveSpeed*this.moveDirection.x,this.logicPos.y+=a*this.moveSpeed*this.moveDirection.y,this.node.setPosition(this.logicPos),this.shadowMove()},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.onCollision=function(a){if(null!=a&&!this.hasColl)if(a.node.group!=s.pzaGroupEnum.ZOMBIE);else{var t=a.node.getComponent(y.pzaZombieBody);this.colliderZombie(t&&t.baseData)}},t.prototype.colliderZombie=function(a){if(a&&!a.isDead)if(null!=a.zombieData){if(a.zombieData&&a.zombieData.hypnosis)this.close();else if(a.buffData.hasBuff(f.pzaBuffType.INVINCIBLE))this.close();else if(!a.buffData.hasBuff(f.pzaBuffType.DIVE)){var t=window.pzazombieManager.getZombie(a);null!=t?(t.hurt(this.atk),this.close()):this.close()}}else this.close()},t.prototype.close=function(){d.pzaWorldEventManager.removeListener(d.pzaWorldEventType.CLEAR_SCREEN,this.close,this),this.hasColl=!0,null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?l.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},t.prototype.createShadow=function(){var a=this,t=c.pzaNodeManager.getDownEffectNode();h.pzaBundleObjectPool.requestInstantByUrl2(m.pzaResourceUrl.SHADOW,function(e,o){if(null==e&&null!=o){o.setParent(t);var n=o.getComponent(z.pzaShadowEffect);n&&n.init(null,cc.v2(),.35),a.curShadow=n,a.shadowMove()}else console.error(e)})},t.prototype.shadowMove=function(){if(null!=this.curShadow){var a=cc.v2(this.node.x,this.node.y-80);this.curShadow.followMove(a)}},i([b({displayName:"\u5b50\u5f39\u8282\u70b9",type:cc.Node})],t.prototype,"bulletNode",void 0),i([b({displayName:"\u5b50\u5f39\u6700\u5927\u751f\u547d\u5468\u671f"})],t.prototype,"maxLifeTime",void 0),i([b(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([v],t)}(r.pzaBaseComponent);e.pzaTrackBullet=S,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaBuffData":"pzaBuffData","../Effect/pzaShadowEffect":"pzaShadowEffect","../Zombie/pzaZombieBody":"pzaZombieBody"}],pzaTreasureBuster:[function(a,t,e){"use strict";cc._RF.push(t,"6818bgoM6FJV4IzR/w6WscP","pzaTreasureBuster");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTreasureBuster=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../pzaEffectManager"),l=a("./pzaBasePlant"),s=cc._decorator,c=s.ccclass,u=(s.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.swallTime=0,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.swallTime=0,r.pzaSoundManager.playAudio("GraveBuster"),this.animation.playAnimation("idle1",!1,function(){r.pzaSoundManager.playAudio("gravebusterchomp"),e.animation.playAnimation("idle2",!0)}),this.atkInterval=4.5},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||(this.swallTime+=t,this.swallTime>=this.atkInterval?this.swallowEnd():this.baseData.logicPos)},t.prototype.logicLateUpdate=function(){a.prototype.logicLateUpdate.call(this)},t.prototype.swallowEnd=function(){window.pzaplantManager.removePlant(this.baseData),this.death(),p.pzaEffectManager.createImitaterEffect(cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y-25)),p.pzaEffectManager.createGoldHoleEffect(this.baseData.logicPos,this.baseData.xIndex,this.baseData.yIndex)},i([c],t)}(l.pzaBasePlant));e.pzaTreasureBuster=u,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../pzaEffectManager":"pzaEffectManager","./pzaBasePlant":"pzaBasePlant"}],pzaTryPlantCard:[function(a,t,e){"use strict";cc._RF.push(t,"25e79xufflKz5dPfz55BIRZ","pzaTryPlantCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTryPlantCard=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaSpriteFrameManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.plantIcon=null,t.mask=null,t.curPlantType=null,t.isSelect=!1,t.noCommend=!1,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.clickCard,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_END,this.clickCard,this)},t.prototype.bindData=function(a,t){this.curPlantType=a,this.selectCall=t,this.isSelect=!1,this.noCommend=3!=p.pzaGameState.curChapter&&4!=p.pzaGameState.curChapter&&8!=p.pzaGameState.curChapter&&9!=p.pzaGameState.curChapter&&a==r.pzaPlantEnum.CATTAIL||(5==p.pzaGameState.curChapter||10==p.pzaGameState.curChapter)&&a==r.pzaPlantEnum.SPIKEROCK,l.pzaSpriteFrameManager.loadPlantCard(a,this.plantIcon),this.noCommend?(this.mask.active=!0,this.mask.opacity=200):this.mask.active=!1},t.prototype.clickCard=function(){this.noCommend||(this.selectCall&&this.selectCall(this.curPlantType),this.isSelect=!0,this.mask.active=!0,this.mask.opacity=177)},t.prototype.disSelect=function(){this.isSelect&&(this.isSelect=!1,this.mask.active=!1)},i([u({displayName:"\u690d\u7269\u56fe\u6807",type:cc.Sprite})],t.prototype,"plantIcon",void 0),i([u({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([c],t)}(cc.Component);e.pzaTryPlantCard=d,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaTrySelectView:[function(a,t,e){"use strict";cc._RF.push(t,"027b4eBRt5OLbIEDm+3D9Qu","pzaTrySelectView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTrySelectView=void 0;var r=a("../../Battle/Data/pzaPlantEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaGameManager"),c=a("../../Common/pzaStatisticsMgr"),u=a("../../Common/pzaWorldEventManager"),d=a("../../utils/pzaChannel"),h=a("./pzaTryPlantCard"),m=cc._decorator,f=m.ccclass,z=m.property,y=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tryBtn=null,t.cards=[],t.curPlant=null,t.selectCall=null,t}return n(t,a),t.prototype.init=function(a){this.selectCall=a,this.curPlant=null,this.tryBtn.active=!1;var t=s.pzaGameManager.getCurrentGame().getAdPlantArr();if(t)for(o=0;o<this.cards.length;o++){var e=t.shift();e?(this.cards[o].node.active=!0,this.cards[o].bindData(e,this.selectCardCall.bind(this))):this.cards[o].node.active=!1}else for(var o=0;o<this.cards.length;o++)this.cards[o].node.active=!0,this.cards[o].bindData(r.pzaPlantEnum.GATLING_PEA+o,this.selectCardCall.bind(this))},t.prototype.selectCardCall=function(a){this.curPlant=a,this.cards.forEach(function(a){a&&a.disSelect()}),this.tryBtn.active=!0,p.pzaGameState.isVaseMode()?c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"23"+a},{name:"adname",value:"\u7834\u7f50\u8005\u8bd5\u73a9\u9ad8\u7ea7\u690d\u7269"}):p.pzaGameState.isMiniMode()?c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"25"+a},{name:"adname",value:"\u8ff7\u4f60\u6e38\u620f\u8bd5\u73a9\u9ad8\u7ea7\u690d\u7269"}):c.pzaStatisticsMgr.sendEvent("AdsExposure",{name:"adsid",value:"9"+a},{name:"adname",value:"\u5c40\u5185\u8bd5\u73a9\u9ad8\u7ea7\u690d\u7269"})},t.prototype.clickTry=function(){var a=this,t="9"+this.curPlant;p.pzaGameState.isVaseMode()&&(t="23"+this.curPlant),d.pzaChannel.instance().showVideo({sucCall:function(){a.close(),a.selectCall&&a.selectCall(a.curPlant)},failCall:function(){},endCall:function(){},posName:"\u8bd5\u73a9\u9ad8\u7ea7\u690d\u7269",adsid:t})},t.prototype.clickClose=function(){this.close()},t.prototype.close=function(){p.pzaGameState.gamePause=!1,u.pzaWorldEventManager.triggerEvent(u.pzaWorldEventType.GAME_RESUME,null),l.pzaGameCommonPool.returnInstant(this.node)},i([z({displayName:"\u8bd5\u7528\u6309\u94ae",type:cc.Node})],t.prototype,"tryBtn",void 0),i([z({displayName:"\u5361\u7247",type:[h.pzaTryPlantCard]})],t.prototype,"cards",void 0),i([f],t)}(cc.Component);e.pzaTrySelectView=y,cc._RF.pop()},{"../../Battle/Data/pzaPlantEnum":"pzaPlantEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../../utils/pzaChannel":"pzaChannel","./pzaTryPlantCard":"pzaTryPlantCard"}],pzaTwinSunflower:[function(a,t,e){"use strict";cc._RF.push(t,"b1ab1UU/d5FBq7i+EZv8G8N","pzaTwinSunflower");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaTwinSunflower=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGameManager"),s=a("../../Common/pzaGameSurEndless"),c=a("../../Common/pzaGameSurvival"),u=a("../../Common/pzaSoundManager"),d=a("../../Common/pzaUtil"),h=a("../pzaGameState"),m=a("./pzaBasePlant"),f=cc._decorator,z=f.ccclass,y=(f.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=d.pzaUtil.getRandomFloatNum(3,6),0==this.baseData.plantData.atkInterval&&(this.baseData.plantData.atkInterval=d.pzaUtil.getRandomFloatNum(3,12.5));var o=function(){if(!h.pzaGameState.gameWin&&e.baseData.plantData.atkInterval<=0){if(null==e.baseData||e.baseData.isDead)return;return h.pzaGameState.gameMode==h.pzaGameMode.SURVIVAL&&l.pzaGameManager.getGame(h.pzaGameMode.SURVIVAL,c.pzaGameSurvival).getSurvivalSunState()?void e.animation.playAnimation("idle",!1,o):h.pzaGameState.gameMode==h.pzaGameMode.SUR_ENDLESS&&l.pzaGameManager.getGame(h.pzaGameMode.SUR_ENDLESS,s.pzaGameSurEndless).getSurvivalSunState()?void e.animation.playAnimation("idle",!1,o):(e.baseData.plantData.atkInterval=d.pzaUtil.getRandomFloatNum(23.5,25),u.pzaSoundManager.playAudio("SunShroom"),void e.animation.playAnimation("Sunlight",!1,o,function(){window.pzaplantManager.plantCreateSun(e.baseData.logicPos.clone(),!0),window.pzaplantManager.plantCreateSun(e.baseData.logicPos.clone(),!0)}))}e.blinkTime>0?e.animation.playAnimation("idle",!1,o):(e.blinkTime=d.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle_eye",!1,o))};this.animation.playAnimation("idle",!1,o),h.pzaGameState.twinFlowerCount++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_15,h.pzaGameState.twinFlowerCount),h.pzaGameState.onlyShroomCofee=!1,h.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,this.baseData.plantData.atkInterval-=t)},i([z],t)}(m.pzaBasePlant));e.pzaTwinSunflower=y,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameManager":"pzaGameManager","../../Common/pzaGameSurEndless":"pzaGameSurEndless","../../Common/pzaGameSurvival":"pzaGameSurvival","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaUIManager:[function(a,t,e){"use strict";cc._RF.push(t,"5fc2bwtxBVEhpbi01E3sB0R","pzaUIManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaUIManager=void 0;var r=a("../Load/pzaBundleObjectPool"),p=a("../Load/pzaPreLoadManager"),l=a("../View/pzaCommonMask"),s=a("./pzaGameCommonPool"),c=a("./pzaSpineController"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.boardNode=null,t.popNode=null,t.loadNode=null,t.loadPro=null,t.snailAni=null,t.boardUINode=null,t.popUIMap=new Map,t}var e;return n(t,a),e=t,t.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),e.instance=this,this.loadNode.active=!1},t.baseShowBoardUI=function(a,t){var e=this.instance;if(null!=e&&null!=a){if(null!=e.boardUINode){if(e.boardUINode.url==a)return e.boardUINode.active=!0,void(t&&t(e.boardUINode));s.pzaGameCommonPool.returnInstant(e.boardUINode),e.boardUINode=null}l.pzaCommonMask.showMask(!0);var o=function(){r.pzaBundleObjectPool.requestInstantByUrl(a,!1,function(o,n){null==o&&null!=n?(n.url=a,n.setParent(e.boardNode),l.pzaCommonMask.hideMask(),t&&t(n),e.boardUINode=n):console.error(o)})},n=p.pzaPreLoadManager.getSubResources(a);null!=n?r.pzaBundleObjectPool.preLoadSubResource(n,function(){o()}):o()}},t.baseShowPopUI=function(a,t){var e=this.instance;if(null!=e&&null!=a){var o=e.popUIMap.get(a);if(null!=o&&o.active)t&&t(o);else{l.pzaCommonMask.showMask(!0);var n=function(){"resources/Prefab/View/WarningView"==a?r.pzaBundleObjectPool.requestInstantByUrl2(a,function(o,n){!o&&n?(n.setParent(e.popNode),l.pzaCommonMask.hideMask(),t&&t(n),e.popUIMap.set(a,n)):console.error(o)}):r.pzaBundleObjectPool.requestInstantByUrl(a,!1,function(o,n){!o&&n?(n.setParent(e.popNode),l.pzaCommonMask.hideMask(),t&&t(n),e.popUIMap.set(a,n)):console.error(o)})},i=p.pzaPreLoadManager.getSubResources(a);null!=i?r.pzaBundleObjectPool.preLoadSubResource(i,function(){n()}):n()}}},t.removeAllPopUI=function(){var a=this.instance;null!=a&&null!=a.popNode.children&&a.popNode.children.forEach(function(a){s.pzaGameCommonPool.returnInstant(a)})},t.removeBoardUI=function(){var a=this.instance;null!=a&&null!=a.boardUINode&&(s.pzaGameCommonPool.returnInstant(a.boardUINode),a.boardUINode=null)},t.showLoading=function(){var a=this.instance;null!=a&&(a.loadNode.active=!0,a.loadPro.string="0%",a.snailAni.playAnimation("idle2",!0))},t.updateLoadPro=function(a){var t=this.instance;null!=t&&(t.loadPro.string=a+"%")},t.hideLoading=function(a){var t=this.instance;null!=t?(a&&a(),t.loadNode.active=!1):a&&a()},t.aniShowPopUI=function(a,t){var e=this.instance;null!=e&&null!=a&&this.baseShowPopUI(a,function(a){l.pzaCommonMask.showMask(!1),e.boardNode.stopAllActions(),e.boardNode.x=0,e.boardNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(-1680,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){e.boardNode.x=0}))),e.popNode.stopAllActions(),e.popNode.x=1680,e.popNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){e.popNode.x=0,l.pzaCommonMask.hideMask(),t&&t(a)})))})},t.aniHidePopUI=function(a){var t=this.instance;null!=t&&(l.pzaCommonMask.showMask(!1),t.boardNode.stopAllActions(),t.boardNode.x=-1680,t.boardNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(0,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){t.boardNode.x=0}))),t.popNode.stopAllActions(),t.popNode.x=0,t.popNode.runAction(cc.sequence(cc.moveTo(.8,cc.v2(1680,0)).easing(cc.easeQuarticActionOut()),cc.callFunc(function(){t.popNode.x=0,l.pzaCommonMask.hideMask(),a&&a()}))))},t.hasPopUI=function(){var a=this.instance;return null!=a&&null!=a.popNode.children&&a.popNode.children.length>0},t.instance=null,i([h({displayName:"\u9762\u677f\u8282\u70b9",type:cc.Node})],t.prototype,"boardNode",void 0),i([h({displayName:"\u5f39\u7a97\u8282\u70b9",type:cc.Node})],t.prototype,"popNode",void 0),i([h({displayName:"\u52a0\u8f7d\u754c\u9762\u8282\u70b9",type:cc.Node})],t.prototype,"loadNode",void 0),i([h({displayName:"\u52a0\u8f7d\u8fdb\u5ea6",type:cc.Label})],t.prototype,"loadPro",void 0),i([h({displayName:"\u8717\u725b\u52a8\u753b",type:c.pzaSpineController})],t.prototype,"snailAni",void 0),e=i([d],t)}(cc.Component);e.pzaUIManager=m,cc._RF.pop()},{"../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/pzaCommonMask":"pzaCommonMask","./pzaGameCommonPool":"pzaGameCommonPool","./pzaSpineController":"pzaSpineController"}],pzaUmbrellaLeaf:[function(a,t,e){"use strict";cc._RF.push(t,"029c8UfLAZMhr0KRIDyS44u","pzaUmbrellaLeaf");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaUmbrellaLeaf=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../../Common/pzaUtil"),l=a("../../Common/pzaWorldEventManager"),s=a("../Data/pzaBuffData"),c=a("../Data/pzaZombieEnum"),u=a("../pzaEffectManager"),d=a("../pzaGameState"),h=a("./pzaBasePlant"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=3,t.attacking=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.RICOCHET_BULLET,this.ricochetBullet,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.RICOCHET_ZOMBIE,this.ricochetZombie,this)},t.prototype.onDisable=function(){a.prototype.onDisable.call(this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.RICOCHET_BULLET,this.ricochetBullet,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.RICOCHET_ZOMBIE,this.ricochetZombie,this)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.attacking=!1,d.pzaGameState.isZombieMode()?this.animation.playAnimation("T_idle",!0):(this.playNormalAni(),d.pzaGameState.onlyShroomCofee=!1,d.pzaGameState.onlyBoomPlant=!1)},t.prototype.logicUpdate=function(t){var e=this;if(a.prototype.logicUpdate.call(this,t),null!=this.baseData&&!this.baseData.isDead&&!this.attacking){var o=!1;window.pzazombieManager.zombieMap.forEach(function(a,t){null==t||t.isDead||null==t.zombieData||t.zombieData.zombieType!=c.pzaZombieEnum.BUNGEE_ZOMBIE||t.buffData.hasBuff(s.pzaBuffType.UNABLE_SELECT)||t.xIndex>e.baseData.xIndex+1||t.xIndex<e.baseData.xIndex-1||t.yIndex>e.baseData.yIndex+1||t.yIndex<e.baseData.yIndex-1||(t.buffData.addBuff(new s.pzaBuffInfo(s.pzaBuffType.RICOCHET,-1)),o=!0)}),o&&(this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),d.pzaGameState.isZombieMode()?this.animation.playAnimation("T_attack",!1,function(){e.attacking=!1,e.animation.playAnimation("T_idle",!0)}):this.animation.playAnimation("attack",!1,function(){e.attacking=!1,e.playNormalAni()}))}},t.prototype.ricochetBullet=function(a){var t=this;if(a==this.baseData){this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),d.pzaGameState.isZombieMode()?this.animation.playAnimation("T_attack",!1,function(){t.attacking=!1,t.animation.playAnimation("T_idle",!0)}):this.animation.playAnimation("attack",!1,function(){t.attacking=!1,t.playNormalAni()});var e=cc.v2(this.baseData.logicPos.x-80,this.baseData.logicPos.y+70);u.pzaEffectManager.createRicochetBulletEffect(e)}},t.prototype.ricochetZombie=function(a){var t=this;a==this.baseData&&(this.attacking=!0,r.pzaSoundManager.playAudio("PeashooterAtk"),d.pzaGameState.isZombieMode()?this.animation.playAnimation("T_attack",!1,function(){t.attacking=!1,t.animation.playAnimation("T_idle",!0)}):this.animation.playAnimation("attack",!1,function(){t.attacking=!1,t.playNormalAni()}))},t.prototype.playNormalAni=function(){var a=this;this.blinkTime=p.pzaUtil.getRandomFloatNum(3,6);var t=function(){a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=p.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};this.animation.playAnimation("idle",!1,t)},i([f],t)}(h.pzaBasePlant));e.pzaUmbrellaLeaf=z,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaUtil:[function(a,t,e){"use strict";cc._RF.push(t,"f1088fhgM5C05+lhr93RDcO","pzaUtil");var o=this&&this.__values||function(a){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&a[t],o=0;if(e)return e.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&o>=a.length&&(a=void 0),{value:a&&a[o++],done:!a}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaUtil=void 0;var n=function(){function a(){}return a.uuid=function(){var a,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),e=[];for(a=0;a<16;a++)e[a]=t[0|16*Math.random()];return e.join("")},a.getRandomNum=function(a,t){if(a==t)return a;var e=a>t?t:a,o=(a>t?a+1:t+1)-e;return Math.floor(Math.random()*o)+e},a.getRandomFloatNum=function(a,t){return t<=a?a:a+(t-a)*Math.random()},a.getDistance=function(a,t){return null==a||null==t?0:Math.sqrt(Math.pow(a.x-t.x,2)+Math.pow(a.y-t.y,2))},a.getRandomIndexByWeight=function(a){var t,e;if(null==a||a.length<=0)return 0;var n=0;try{for(var i=o(a),r=i.next();!r.done;r=i.next())n+=r.value}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}n*=Math.random();for(var p=0,l=a.length;p<l;p++)if((n-=a[p])<=0)return p;return a.length-1},a.getRandomValueFromArray=function(a){if(null==a||a.length<=0)return null;var t=a.length,e=Math.random();return a[Math.floor(e*t)]},a.getRandomArrayValue=function(a,t){if(null==a||a.length<=1||a.length<=t)return a||[];for(var e=a.slice(0),o=a.length,n=o-t,i=null,r=null;o-- >n;)i=e[r=Math.floor((o+1)*Math.random())],e[r]=e[o],e[o]=i;return e.slice(n)},a.switchGraySprite=function(a,t){var e=t?cc.Material.getBuiltinMaterial("2d-gray-sprite"):cc.Material.getBuiltinMaterial("2d-sprite");a&&a.setMaterial(0,e)},a.getAngle=function(a,t){return null==a||null==t?0:Math.atan2(a.y-t.y,a.x-t.x)*(180/Math.PI)},a.getVectorsRadion=function(a,t){return null==a||null==t?0:t.signAngle(a)},a.rotateAngle=function(a,t){if(0==t)return a;if(null==a)return cc.v2();var e=Math.PI/180*t,o=Math.sin(e),n=Math.cos(e),i=a.x*n+a.y*o,r=-a.x*o+a.y*n;return cc.v2(i,r)},a.isSameDay=function(a,t){return null!=a&&null!=t&&new Date(a).toDateString()===new Date(t).toDateString()},a.getDayInterval=function(a,t){var e=new Date(a),o=new Date(t),n=e.setHours(0,0,0,0),i=o.setHours(0,0,0,0)-n;return i=Math.abs(i),Math.floor(i/864e5)},a.getCurrencyStr=function(a){if(null==a)return"";if(a<1e3)return a+"";var t="",e=(a+"").split("");e=e.reverse();for(var o=0,n=0;n<e.length;n++)t=e[n]+t,o++,n<e.length-1&&o>=3&&(t=","+t,o=0);return t},a.blinkAni=function(a,t){if(void 0===t&&(t=!1),t){if(!a)return;var e=a.tw;return e&&e.stop(),void(a&&(a.color=cc.Color.WHITE))}var o=null,n=function(t,e,n,i){var r=t+(e-t)*i;if(!a||!a.name)return o&&o.stop(),r;var p=new cc.Color(r,r,r);return a&&(a.color=p),r};o=cc.tween({c:255}).repeatForever(cc.tween().to(.5,{c:40},{progress:n}).to(.5,{c:255},{progress:n})),a.tw=o,o.start()},a.formatDateTime=function(a){var t=function(a){return a<10?"0"+a:a},e=new Date(a);return t(e.getMonth()+1)+"/"+t(e.getDate())+" "+t(e.getHours())+":"+t(e.getMinutes())},a.initGameSpeed=function(){cc.gameSpeed=1,cc.director.calculateDeltaTime=function(a){a||(a=performance.now()),this._deltaTime=a>this._lastUpdate?(a-this._lastUpdate)/1e3:0,this._deltaTime*=cc.gameSpeed,this._lastUpdate=a}},a.changeGameSpeed=function(a){cc.gameSpeed=a},a}();e.pzaUtil=n,cc._RF.pop()},{}],pzaVipNut:[function(a,t,e){"use strict";cc._RF.push(t,"781aaP0ZV9KuJrV9UgQGfUL","pzaVipNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaVipNut=void 0;var r=a("../../Common/pzaNodeManager"),p=a("../../Common/pzaUtil"),l=a("../../Load/pzaBundleObjectPool"),s=a("../../Load/pzaPreLoadManager"),c=a("../Data/pzaPlantEnum"),u=a("../pzaSunLight"),d=a("./pzaBasePlant"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=8,t.sunTime=25,t.growTime=100,t.isBig=!1,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=c.pzaPlantCate.Nut,this.isBig=!1,this.blinkTime=p.pzaUtil.getRandomFloatNum(8,10),this.sunTime=3,this.growTime=100,this.isBig=!1;var o=function(){e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=p.pzaUtil.getRandomFloatNum(8,10),e.animation.playAnimation("idle2",!1,o))};this.animation.playAnimation("idle1",!1,o),o(),t.plantData&&t.plantData.isGrow&&(this.growTime=0,this.isBig=!0,this.node.scale=1.8)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.sunTime-=t,this.blinkTime-=t,this.sunTime-=t,this.sunTime<=0&&(this.sunTime=25,this.dropSun(25)),this.isBig||(this.growTime-=t,this.growTime<=0&&(this.growUp(),this.baseData&&this.baseData.plantData&&(this.baseData.plantData.isGrow=!0))))},t.prototype.growUp=function(){this.isBig=!0,this.baseData.hp+=this.baseData.maxHp,cc.tween(this.node).to(.5,{scale:1.8}).start()},t.prototype.dropSun=function(a){var t=this.node.getPosition();l.pzaBundleObjectPool.requestInstantByUrl2(s.pzaResourceUrl.SUN,function(e,o){if(null==e&&null!=o){o.setParent(r.pzaNodeManager.getUpBgNode());var n=o.getComponent(u.pzaSunLight);n&&n.init2(t,1,a),window.pzaplantManager.AllSunLight.add(n)}else console.error(e)})},t.prototype.deadDropSun=function(){for(var a=this.isBig?600:300,t=Math.round(a/50),e=0;e<t;e++)this.dropSun(50)},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.deadDropSun()},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.deadDropSun()},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3")},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([m],t)}(d.pzaBasePlant));e.pzaVipNut=f,cc._RF.pop()},{"../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaUtil":"pzaUtil","../../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../../Load/pzaPreLoadManager":"pzaPreLoadManager","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaSunLight":"pzaSunLight","./pzaBasePlant":"pzaBasePlant"}],pzaWallNut:[function(a,t,e){"use strict";cc._RF.push(t,"7f523i63cpNt5U+azxQROnr","pzaWallNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWallNut=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaPlantEnum"),l=a("../pzaEffectManager"),s=a("../pzaGameState"),c=a("./pzaBasePlant"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.blinkTime=8,t}return n(t,a),t.prototype.bindData=function(t){var e=this;if(a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,s.pzaGameState.isZombieMode())this.animation.playAnimation("T_idle1",!0);else{this.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=r.pzaUtil.getRandomFloatNum(8,10),e.animation.playAnimation(Math.random()>.5?"idle2":"idle3",!1,o))};this.animation.playAnimation("idle1",!1,o),s.pzaGameState.onlyShroomCofee=!1,s.pzaGameState.onlyBoomPlant=!1}},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.plantDying=function(){a.prototype.plantDying.call(this),this.animation.setAnimationSkin("body_3");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+80),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow2",e)},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2");var t=cc.v2(this.baseData.logicPos.x,this.baseData.logicPos.y+80),e=10*-this.baseData.yIndex;l.pzaEffectManager.createNutHurtEffect(t,"blow1",e)},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([d],t)}(c.pzaBasePlant));e.pzaWallNut=h,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaWarningView:[function(a,t,e){"use strict";cc._RF.push(t,"c8b2eMkM0xK7bVO1Yn/Wwm0","pzaWarningView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWarningView=void 0;var r=a("../Common/pzaGameCommonPool"),p=a("../Common/pzaSoundManager"),l=a("../utils/pzaChannel"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.tittle=null,t.tip=null,t.confirmBtn=null,t.cancelBtn=null,t.confirmTxt=null,t.cancelTxt=null,t.adIcon=null,t.shareIcon=null,t.rightAdIcon=null,t.rightShareIcon=null,t.poolPrefab=null,t.confirmCall=null,t.cancelCall=null,t}return n(t,a),t.prototype.show=function(a,t,e,o,n,i,r,p,s){void 0===i&&(i="\u8b66\u544a"),void 0===r&&(r=!1),void 0===p&&(p=!1),void 0===s&&(s=0),this.tip.string=a,this.confirmCall=o,this.cancelCall=n,this.confirmTxt.string=t,this.tittle.string=i,null!=e?(this.cancelTxt.string=e,this.cancelBtn.active=!0,this.confirmBtn.x=-121):(this.cancelBtn.active=!1,this.confirmBtn.x=0),this.adIcon.active=r,this.shareIcon.active=p,"ks"!=l.pzaChannel.instance().channel&&"tt"!=l.pzaChannel.instance().channel&&"my"!=l.pzaChannel.instance().channel||(this.shareIcon.active=!1,this.adIcon.active=r,p&&(this.adIcon.active=!0)),this.rightAdIcon.active=!1,this.rightShareIcon.active=!1,s&&(1==s&&(this.rightAdIcon.active=!0),2==s&&(this.rightShareIcon.active=!0,"ks"!=l.pzaChannel.instance().channel&&"tt"!=l.pzaChannel.instance().channel&&"my"!=l.pzaChannel.instance().channel||(this.rightAdIcon.active=!0,this.rightShareIcon.active=!1)))},t.prototype.clickConfirm=function(){p.pzaSoundManager.playSFX(),this.close(),this.confirmCall&&this.confirmCall()},t.prototype.clickCancel=function(){p.pzaSoundManager.playSFX(),this.close(),this.cancelCall&&this.cancelCall()},t.prototype.close=function(){this.poolPrefab?r.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):r.pzaGameCommonPool.returnInstant(this.node)},i([u({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"tittle",void 0),i([u({displayName:"\u63d0\u793a\u8bed",type:cc.Label})],t.prototype,"tip",void 0),i([u({displayName:"\u786e\u5b9a\u6309\u94ae",type:cc.Node})],t.prototype,"confirmBtn",void 0),i([u({displayName:"\u53d6\u6d88\u6309\u94ae",type:cc.Node})],t.prototype,"cancelBtn",void 0),i([u({displayName:"\u786e\u5b9a\u6309\u94ae\u6587\u6848",type:cc.Label})],t.prototype,"confirmTxt",void 0),i([u({displayName:"\u53d6\u6d88\u6309\u94ae\u6587\u6848",type:cc.Label})],t.prototype,"cancelTxt",void 0),i([u({displayName:"\u5e7f\u544a\u56fe\u6807",type:cc.Node})],t.prototype,"adIcon",void 0),i([u({displayName:"\u5206\u4eab\u56fe\u6807",type:cc.Node})],t.prototype,"shareIcon",void 0),i([u({displayName:"\u53f3\u4fa7\u5e7f\u544a\u6807\u8bc6",type:cc.Node})],t.prototype,"rightAdIcon",void 0),i([u({displayName:"\u53f3\u4fa7\u5206\u4eab\u6807\u8bc6",type:cc.Node})],t.prototype,"rightShareIcon",void 0),i([u(cc.Prefab)],t.prototype,"poolPrefab",void 0),i([c],t)}(cc.Component);e.pzaWarningView=d,cc._RF.pop()},{"../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaSoundManager":"pzaSoundManager","../utils/pzaChannel":"pzaChannel"}],pzaWaterLightEffect:[function(a,t,e){"use strict";cc._RF.push(t,"02c0fxAip5MbqgSRlsznf+Y","pzaWaterLightEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWaterLightEffect=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaUtil"),l=a("../../Common/pzaWorldEventManager"),s=a("../pzaGameState"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.waterLight1=null,t.waterLight2=null,t.waterLight3=null,t.interval=0,t.freeWaterArr1=[],t.freeWaterArr2=[],t.freeWaterArr3=[],t.activeWater=new Set,t.pause=!1,t}return n(t,a),t.prototype.onLoad=function(){this.freeWaterArr1.push(this.waterLight1),this.freeWaterArr2.push(this.waterLight2),this.freeWaterArr3.push(this.waterLight3),this.waterLight1.name="1",this.waterLight2.name="2",this.waterLight3.name="3"},t.prototype.onEnable=function(){this.interval=0,this.pause=!1,this.createLight(!1),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.BACK_HOME,this.close,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_OVER,this.close,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),l.pzaWorldEventManager.addListener(l.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),s.pzaGameState.gameTimeType==s.pzaGameTimeType.NIGHT?this.node.opacity=76.5:this.node.opacity=255},t.prototype.onDisable=function(){var a=this;l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.BACK_HOME,this.close,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_OVER,this.close,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_PAUSE,this.pauseSelf,this),l.pzaWorldEventManager.removeListener(l.pzaWorldEventType.GAME_RESUME,this.resumeSelf,this),this.activeWater.forEach(function(t){t.stopAllActions(),"1"==t.name?a.freeWaterArr1.push(t):"2"==t.name?a.freeWaterArr2.push(t):a.freeWaterArr3.push(t)}),this.activeWater.clear()},t.prototype.update=function(a){this.pause||(this.interval+=a,this.interval>=.07&&(this.interval=0,this.createLight(!1)))},t.prototype.createLight=function(a){var t=Math.random();(a||t<=.07)&&this.createLittleLight(-365,-265),(a||t<=.14&&t>.07)&&this.createLittleLight(-265,-165),(a||t<=.21&&t>.14)&&this.createLittleLight(-165,-65),(a||t<=.28&&t>.21)&&this.createLittleLight(-65,65),(a||t<=.37&&t>.28)&&this.createMiddleLight(65,175),(a||t<=.46&&t>.37)&&this.createMiddleLight(425,570),(a||t<=.52&&t>.46)&&this.createLargeLight(175,200),(a||t<=.57&&t>.52)&&this.createLargeLight(200,225),(a||t<=.62&&t>.57)&&this.createLargeLight(225,250),(a||t<=.67&&t>.62)&&this.createLargeLight(250,275),(a||t<=.72&&t>.67)&&this.createLargeLight(275,300),(a||t<=.77&&t>.72)&&this.createLargeLight(300,325),(a||t<=.82&&t>.77)&&this.createLargeLight(325,350),(a||t<=.87&&t>.82)&&this.createLargeLight(350,375),(a||t<=.92&&t>.87)&&this.createLargeLight(375,400),(a||t>=.92)&&this.createLargeLight(400,425)},t.prototype.createLittleLight=function(a,t){for(var e=p.pzaUtil.getRandomNum(0,3),o=0;o<e;o++){var n=p.pzaUtil.getRandomNum(a,t),i=p.pzaUtil.getRandomNum(-130,40),r=this.getWaterLight();r.x=n,r.y=i,this.activeWater.add(r)}},t.prototype.createMiddleLight=function(a,t){for(var e=p.pzaUtil.getRandomNum(1,4),o=0;o<e;o++){var n=p.pzaUtil.getRandomNum(a,t),i=p.pzaUtil.getRandomNum(-130,40),r=this.getWaterLight();r.x=n,r.y=i,this.activeWater.add(r)}},t.prototype.createLargeLight=function(a,t){for(var e=p.pzaUtil.getRandomNum(2,6),o=0;o<e;o++){var n=p.pzaUtil.getRandomNum(a,t),i=p.pzaUtil.getRandomNum(-130,40),r=this.getWaterLight();r.x=n,r.y=i,this.activeWater.add(r)}},t.prototype.getWaterLight=function(){var a=this,t=Math.random();if(t<=.1){var e=this.freeWaterArr1.pop();null==e?((e=cc.instantiate(this.waterLight1)).setParent(this.node),e.name="1"):e.active=!0,e.opacity=122;var o=1*Math.random()+.4;return e.runAction(cc.sequence(cc.fadeIn(.1),cc.spawn(cc.sequence(cc.delayTime(o),cc.fadeOut(.2)),cc.moveBy(o,cc.v2(-5,0))),cc.callFunc(function(){e.active=!1,a.freeWaterArr1.push(e),a.activeWater.delete(e)}))),e}if(t<=.7){var n=this.freeWaterArr2.pop();return null==n?((n=cc.instantiate(this.waterLight2)).setParent(this.node),n.name="2"):n.active=!0,n.opacity=122,o=1*Math.random()+.4,n.runAction(cc.sequence(cc.fadeIn(.1),cc.spawn(cc.sequence(cc.delayTime(o),cc.fadeOut(.2)),cc.moveBy(o,cc.v2(-5,0))),cc.callFunc(function(){n.active=!1,a.freeWaterArr2.push(n),a.activeWater.delete(n)}))),n}var i=this.freeWaterArr3.pop();return null==i?((i=cc.instantiate(this.waterLight3)).setParent(this.node),i.name="3"):i.active=!0,i.opacity=122,o=1*Math.random()+.4,i.runAction(cc.sequence(cc.fadeIn(.1),cc.spawn(cc.sequence(cc.delayTime(o),cc.fadeOut(.2)),cc.moveBy(o,cc.v2(-5,0))),cc.callFunc(function(){i.active=!1,a.freeWaterArr3.push(i),a.activeWater.delete(i)}))),i},t.prototype.pauseSelf=function(){this.pause=!0,this.activeWater.forEach(function(a){a&&a.pauseAllActions()})},t.prototype.resumeSelf=function(){this.pause=!1,this.activeWater.forEach(function(a){a&&a.resumeAllActions()})},t.prototype.close=function(){r.pzaGameCommonPool.returnInstant(this.node)},i([d({displayName:"\u6c34\u51491",type:cc.Node})],t.prototype,"waterLight1",void 0),i([d({displayName:"\u6c34\u51492",type:cc.Node})],t.prototype,"waterLight2",void 0),i([d({displayName:"\u6c34\u51493",type:cc.Node})],t.prototype,"waterLight3",void 0),i([u],t)}(cc.Component);e.pzaWaterLightEffect=h,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaUtil":"pzaUtil","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../pzaGameState":"pzaGameState"}],pzaWildPea:[function(a,t,e){"use strict";cc._RF.push(t,"bff51oCdtZLqppGLGmbfRsI","pzaWildPea");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWildPea=void 0;var r=a("../../Common/pzaGameCommonPool"),p=a("../../Common/pzaNodeManager"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaUtil"),c=a("../Bullet/pzaBaseBullet"),u=a("./pzaBasePlant"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.bulletPrefab=null,t.shootNode=null,t.blinkTime=3,t.atk=20,t.atkCd=0,t.originAng=20,t.bulletCnt=5,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),this.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),this.animation.playAnimation("idle1",!0);var o=function(){window.pzazombieManager.hasWildShootCanAttackZombie(e.baseData)&&e.atkCd<=0?e.animation.playAnimation("attack",!1,function(){e.atkCd=1,o()},function(){e.shoot(),l.pzaSoundManager.playAudio("PeashooterAtk")}):e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=s.pzaUtil.getRandomFloatNum(3,6),e.animation.playAnimation("idle2",!1,o))};o()},t.prototype.close=function(){a.prototype.close.call(this)},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),null==this.baseData||this.baseData.isDead||null==this.baseData.plantData||(this.blinkTime-=t,this.atkCd>0&&(this.atkCd-=t))},t.prototype.shoot=function(){for(var a=this.originAng/(this.bulletCnt-1),t=-this.originAng/2,e=p.pzaNodeManager.getBulletNode(),o=0;o<5;o++){var n=r.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null==n)return;n.setParent(e);var i=this.shootNode.convertToWorldSpaceAR(cc.v2()),l=e.convertToNodeSpaceAR(i);n.setPosition(l);var s=t+o*a,u=cc.misc.degreesToRadians(s),d=cc.v2(Math.cos(u),Math.sin(u)),h=n.getComponent(c.pzaBaseBullet);if(null==h)return;h.init(-1,this.baseData.atk,1,null,d)}},i([m({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([m({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([h],t)}(u.pzaBasePlant);e.pzaWildPea=f,cc._RF.pop()},{"../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaBaseBullet":"pzaBaseBullet","./pzaBasePlant":"pzaBasePlant"}],pzaWinterMelonPult:[function(a,t,e){"use strict";cc._RF.push(t,"1c94fQ/hjZIqrQ4DMAZvZUU","pzaWinterMelonPult");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWinterMelonPult=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../../Common/pzaGameCommonPool"),s=a("../../Common/pzaNodeManager"),c=a("../../Common/pzaSoundManager"),u=a("../../Common/pzaUtil"),d=a("../Bullet/pzaThrowBullet"),h=a("../Data/pzaBuffData"),m=a("../pzaGameState"),f=a("./pzaBasePlant"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.shootNode=null,t.bulletPrefab=null,t.blinkTime=3,t.atkAniTime=1.4,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.node.zIndex=10*-this.baseData.yIndex-1,this.blinkTime=u.pzaUtil.getRandomFloatNum(3,6),this.playNormalAni(),this.atkAniTime=this.animation.getAnimationDuration("attack"),m.pzaGameState.winterMelon[t.yIndex]=1;for(var e=m.pzaGameState.map.getMapRow(),o=!0,n=0;n<e;n++)if(1!=m.pzaGameState.winterMelon[n]){o=!1;break}o&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_23),m.pzaGameState.useThrowPlant=!0,m.pzaGameState.onlyShroomCofee=!1,m.pzaGameState.onlyBoomPlant=!1},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t},t.prototype.playNormalAni=function(){var a=this,t=function(){var e=a.findAttackTarget();if(null!=e)return c.pzaSoundManager.playAudio("melonimpact"),void a.animation.playAnimation("attack",!1,t,function(){a.attack(e)},a.atkAniTime/a.atkInterval);a.blinkTime>0?a.animation.playAnimation("idle",!1,t):(a.blinkTime=u.pzaUtil.getRandomFloatNum(3,6),a.animation.playAnimation("idle_eye",!1,t))};t()},t.prototype.findAttackTarget=function(){var a=this;if(null==this.baseData||this.baseData.isDead||null==this.baseData.logicPos)return null;var t=null,e=-1;return window.pzazombieManager.zombieDatas[this.baseData.yIndex].forEach(function(o){if(o&&o.logicPos&&!(o.logicPos.x<a.baseData.logicPos.x)&&!o.buffData.hasBuff(h.pzaBuffType.FLY)&&!o.buffData.hasBuff(h.pzaBuffType.UNABLE_SELECT)){var n=o.logicPos.x-a.baseData.logicPos.x;(-1==e||n<e)&&(t=o,e=n)}}),null==t?this.findDrZomBoss():t},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null==a||null==a.baseData||a.baseData.isDead||a.baseData.buffData.hasBuff(h.pzaBuffType.UNABLE_SELECT)?null:a.baseData},t.prototype.attack=function(a){if(null!=a&&null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var t=s.pzaNodeManager.getBulletNode();if(null!=t){var e=window.pzazombieManager.getZombie(a);if(null!=e){var o=e.getZombieHeadWps(this.baseData.yIndex);if(null!=o){var n=t.convertToNodeSpaceAR(o),i=l.pzaGameCommonPool.requestInstant2(this.bulletPrefab);if(null!=i){var r=this.node.convertToNodeSpaceAR(this.shootNode.convertToWorldSpaceAR(cc.v2()));i.setParent(t);var p=cc.v2(r.x+this.baseData.logicPos.x+16,r.y+this.baseData.logicPos.y+57);i.setPosition(p);var c=i.getComponent(d.pzaThrowBullet);null!=c&&(c.init(!1,this.baseData.yIndex,this.baseData.atk,a,n,-1,!0),c.updateBulletAngel(90),c.hasSpatter=!0,c.hasFrost=!0)}}}}}},i([g({displayName:"\u53d1\u5c04\u70b9",type:cc.Node})],t.prototype,"shootNode",void 0),i([g({displayName:"\u5b50\u5f39\u9884\u8bbe",type:cc.Prefab})],t.prototype,"bulletPrefab",void 0),i([y],t)}(f.pzaBasePlant);e.pzaWinterMelonPult=v,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaNodeManager":"pzaNodeManager","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaUtil":"pzaUtil","../Bullet/pzaThrowBullet":"pzaThrowBullet","../Data/pzaBuffData":"pzaBuffData","../pzaGameState":"pzaGameState","./pzaBasePlant":"pzaBasePlant"}],pzaWordEffect:[function(a,t,e){"use strict";cc._RF.push(t,"dfe58WKdXhPIIN3qd6gO7l7","pzaWordEffect");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWordEffect=void 0;var r=a("../../Common/pzaBaseComponent"),p=a("../../Common/pzaSoundManager"),l=a("../../Common/pzaWorldEventManager"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.wordSprite=null,t.wordFrames=[],t.endCall=null,t}return n(t,a),t.prototype.onEnable=function(){l.pzaWorldEventManager.addListener(l.pzaWorldEventType.CLOSE_REDTIP,this.closeWord,this)},t.prototype.onDisable=function(){l.pzaWorldEventManager.addListener(l.pzaWorldEventType.CLOSE_REDTIP,this.closeWord,this)},t.prototype.closeWord=function(){this.node.stopAllActions(),this.close()},t.prototype.playReadyPlant=function(a){var t=this;this.endCall=a,this.node.stopAllActions(),this.node.scale=.01,this.wordSprite.spriteFrame=this.wordFrames[0],this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){t.node.scale=1,p.pzaSoundManager.playAudio("readygo")}),cc.scaleTo(.5,1.5),cc.callFunc(function(){t.wordSprite.spriteFrame=null}),cc.delayTime(.1),cc.callFunc(function(){t.node.scale=1,t.wordSprite.spriteFrame=t.wordFrames[1]}),cc.scaleTo(.5,1.5),cc.callFunc(function(){t.wordSprite.spriteFrame=null}),cc.delayTime(.1),cc.callFunc(function(){t.wordSprite.spriteFrame=t.wordFrames[2]}),cc.delayTime(.5),cc.callFunc(function(){t.endCall&&t.endCall(),t.close()})))},t.prototype.playLargeWave=function(a){var t=this;this.node.stopAllActions(),this.node.scale=1.4,this.wordSprite.spriteFrame=this.wordFrames[3],p.pzaSoundManager.playAudio("hugewave"),this.node.runAction(cc.sequence(cc.scaleTo(1,.8),cc.delayTime(1),cc.callFunc(function(){p.pzaSoundManager.playAudio("siren"),a?t.playLastWave():t.close()})))},t.prototype.playLastWave=function(){var a=this;this.node.stopAllActions(),this.node.scale=3,this.wordSprite.spriteFrame=this.wordFrames[4],p.pzaSoundManager.playAudio("finalwave"),this.node.runAction(cc.sequence(cc.scaleTo(1,1.5),cc.delayTime(4),cc.callFunc(function(){a.close()})))},t.prototype.pauseSelf=function(){this.node.pauseAllActions()},t.prototype.resumeSelf=function(){this.node.resumeAllActions()},i([u({displayName:"\u6587\u5b57\u56fe",type:cc.Sprite})],t.prototype,"wordSprite",void 0),i([u({displayName:"\u6587\u5b57\u56fe\u7ec4",type:[cc.SpriteFrame]})],t.prototype,"wordFrames",void 0),i([c],t)}(r.pzaBaseComponent);e.pzaWordEffect=d,cc._RF.pop()},{"../../Common/pzaBaseComponent":"pzaBaseComponent","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaWorldEventManager:[function(a,t,e){"use strict";cc._RF.push(t,"132dcxtIelN5q2Nk4+WL4Rp","pzaWorldEventManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaWorldEventManager=e.pzaWorldEventType=void 0,function(a){a.BACK_HOME="BACK_HOME",a.GAME_PAUSE="GAME_PAUSE",a.GAME_RESUME="GAME_RESUME",a.GAME_OVER="GAME_OVER",a.GAME_WIN="GAME_WIN",a.SELECT_CARD="SELECT_CARD",a.BLOW_WIND="BLOW_WIND",a.PLANT_PLANT="PLANT_PLANT",a.PLANT_AD_PLANT="PLANT_AD_PLANT",a.GROVE_SHAKE="GROVE_SHAKE",a.CLEAR_SCREEN="CLEAR_SCREEN",a.LACK_SUN="LACK_SUN",a.JALAPENO_BOOM="JALAPENO_BOOM",a.ICE_SHROOM_BOOM="ICE_SHROOM_BOOM",a.LAUNCH_COB_CANNON="LAUNCH_COB_CANNON",a.AUTO_PICK="AUTO_PICK",a.PASS_PICK="PASS_PICK",a.GUIDE_REFRESH_PROP="GUIDE_REFRESH_PROP",a.GUIDE_SHOW_SPEED="GUIDE_SHOW_SPEED",a.GUIDE_USE_SPEED="GUIDE_USE_SPEED",a.USE_GAME_PROP="USE_GAME_PROP",a.SPECIAL_ACH="SPECIAL_ACH",a.HIDE_DAVE_DIALOG="HIDE_DAVE_DIALOG",a.SHOW_DAVE_DIALOG="SHOW_DAVE_DIALOG",a.UPDATE_PART_PRO="UPDATE_PART_PRO",a.UPDATE_PLANT_PRICE="UPDATE_PLANT_PRICE",a.RICOCHET_BULLET="RICOCHET_BULLET",a.RICOCHET_ZOMBIE="RICOCHET_ZOMBIE",a.CLOSE_REDTIP="CLOSE_REDTIP",a.CLICK_CREATIVE="CLICK_CREATIVE",a.RESET_CARD_STATE="RESET_CARD_STATE",a.UPDATE_ALL_PLANT_PRICE="UPDATE_ALL_PLANT_PRICE"}(e.pzaWorldEventType||(e.pzaWorldEventType={}));var r=cc._decorator,p=r.ccclass,l=(r.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}var e;return n(t,a),e=t,t.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),e.worldEventNode=this.node},t.addListener=function(a,t,o){null!=e.worldEventNode&&e.worldEventNode.on(a,t,o,!1)},t.removeListener=function(a,t,o){null!=e.worldEventNode&&e.worldEventNode.off(a,t,o)},t.triggerEvent=function(a,t){null!=e.worldEventNode&&e.worldEventNode.emit(a,t)},t.worldEventNode=null,e=i([p],t)}(cc.Component));e.pzaWorldEventManager=l,cc._RF.pop()},{}],pzaYetiZombie:[function(a,t,e){"use strict";cc._RF.push(t,"6bf68f5cVRDSpfEXCibGTwO","pzaYetiZombie");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaYetiZombie=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../pzaGameState"),l=a("./pzaBaseZombie"),s=a("../../Achieve/pzaAchieveMgr"),c=a("../../Achieve/pzaAchieve"),u=cc._decorator,d=u.ccclass,h=(u.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.runAwayIndex=0,t.runAwayFlag=!1,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.runAwayIndex=Math.random()>.5?4:5,this.runAwayFlag=!1},t.prototype.logicUpdate=function(a){if(null!=this.baseData&&null!=this.baseData.zombieData&&!this.baseData.isDead){if(this.baseData.zombieData.needRefreshEquip)return this.baseData.zombieData.needRefreshEquip=!1,void this.refreshHurtState(!1);if(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),!this.baseData.isBeControlled())if(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow)if(this.pushBackTime>0)this.pushBackMove(a);else if(this.hasTool)this.updateMove(a);else{var t=this.findTarget();null==t||t.isDead?this.updateMove(a):this.attack(a,t),this.canRunAway(),8==p.pzaGameState.map.getMapXIndex(this.baseData.logicPos)&&s.default.instance().checkAddAchieve(c.pzaAchieveType.ACH_38)}else this.changeRowMove(a)}},t.prototype.canRunAway=function(){if(this.baseData.xIndex>=0&&this.baseData.xIndex<=this.runAwayIndex&&!this.runAwayFlag){var a=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.baseData.zombieData.moveSpd=p.pzaGameState.map.getBlockWidth()/a,this.runAwayFlag||(this.runAwayFlag=!0,this.baseData.zombieData.direction=1,this.refreshOrientation())}},i([d],t)}(l.pzaBaseZombie));e.pzaYetiZombie=h,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../../Common/pzaGameConfig":"pzaGameConfig","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie"}],pzaZJPlantConf:[function(a,t,e){"use strict";cc._RF.push(t,"eaeb5zaxm1EoLvQdjBLCHiZ","pzaZJPlantConf");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZJPlantConf=void 0;var i=a("../utils/pzakc"),r=function(a){function t(t){var e=this,o=parseInt(t.id);return(e=a.call(this,o,t.name,parseInt(t.env),parseInt(t.hp),0,0,parseInt(t.gold),parseFloat(t.createCD),parseFloat(t.initCD),!!t.isNight)||this).atkArr=null,e.atk2Arr=null,e.atkCD=0,e.atkCD2=0,e.senior=0,e.completed=0,e.atkArr=i.default.strNumArr(t.atk),e.atk2Arr=i.default.strNumArr(t.atk2),e.atkCD=parseFloat(t.atkCD||0),e.atkCD2=parseFloat(t.atkCD2||0),e.atkInterval=e.atkCD,e.atkArr&&(e.atk=e.atkArr[0]),e.senior=parseInt(t.senior),e.completed=parseInt(t.Completed),e.rareLevel=e.senior,e}return n(t,a),t}(a("./pzaGameConfig").pzaPlantConfigData);e.pzaZJPlantConf=r,cc._RF.pop()},{"../utils/pzakc":"pzakc","./pzaGameConfig":"pzaGameConfig"}],pzaZJRankConf:[function(a,t,e){"use strict";cc._RF.push(t,"f0ee4pfW7pMraUL2Sx10/lO","pzaZJRankConf"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZJRankConf=void 0;var o=a("../Battle/Data/pzaZombieEnum"),n=a("../Battle/pzaGameState"),i=a("./pzaGameConfig"),r=a("./pzaGameManager"),p=a("./pzaGameZJ"),l=a("./pzaUtil"),s=a("./pzaZJZombieConf"),c=function(){function a(a){this.id=0,this.name="",this.type="",this.density="",this.wave=0,this.fog=0,this.tombstoneMin=0,this.tombstoneNum=0,this.waterEnd=0,this.initSun=0,this.plant="",this.creator="",this.isNew=0,this.map=0,this.itembg="",this.itemicon="",this.daverestart=0,this.endLess=0,this.type2="",this.trophyid=0,this.id=a.id,this.name=a.name||"",this.type=a.type||"",this.density=a.density||"",this.wave=a.wave||0,this.fog=a.fog||0,this.tombstoneMin=a.tombstoneMin||0,this.tombstoneNum=parseInt(a.tombstoneNum||0),this.waterEnd=parseInt(a.waterEnd||0),this.initSun=parseInt(a.lnitial||0),this.plant=a.plant||"",this.creator=a.creator||"",this.isNew=a.isnew||0,this.endLess=a.endLess||0,this.trophyid=a.trophyid||0,this.map=a.map||0,this.itembg=a.itembg,this.itemicon=a.itemicon,this.daverestart=a.daverestart||0,this.type2=a.type2||""}return a.getRandomWaveZombies=function(a,t,e,n,r,p,l,s){void 0===r&&(r=0),void 0===p&&(p=0);var c=[],u=[];if(null!=l.density&&(u=l.density.split(",")).forEach(function(a,t){u[t]=parseInt(a)}),null==u||t-1<0)return[o.pzaZombieEnum.ZOMBIE];var d=u[t-1];if(null==d||d<=1)return[o.pzaZombieEnum.ZOMBIE];if(e&&t%10==0){c.push(o.pzaZombieEnum.FLAG_ZOMBIE),d-=i.pzaGameConfig.getZombieLevel(o.pzaZombieEnum.FLAG_ZOMBIE);for(var h=Math.min(Math.floor(d/2),8),m=0;m<h;m++)c.push(o.pzaZombieEnum.ZOMBIE),d-=i.pzaGameConfig.getZombieLevel(o.pzaZombieEnum.ZOMBIE)}for(;d>0;){var f=this.getRandomZombie(d,t,n,r,p,l,s);if(null==f)break;if(f==o.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM?n--:f==o.pzaZombieEnum.RED_GARGANTUAR&&t%10!=0&&p--,c.push(f),c.length>=50)break;if(d-=i.pzaGameConfig.getZombieLevel(f),r>0){var z=this.sameTypeIdZombie(f,l);if(z.length>0)for(m=0;m<z.length;m++)if(c.push(z[m]),d-=i.pzaGameConfig.getZombieLevel(z[m]),c.length>=50||d<0)return c}}return c},a.getRandomZombie=function(a,t,e,n,r,p,s){void 0===n&&(n=0),void 0===r&&(r=0);var c=1;t>=10&&t<15?c=3:t>=15&&(c=4);var u=[],d=[],h=[];null!=p.type&&(h=p.type.split(",")).forEach(function(a,t){h[t]=parseInt(a)}),n>0&&(h=this.createEndlessZombieType(s)),h.forEach(function(e){if(null!=e&&e!=o.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM){var r=i.pzaGameConfig.getZombieConfig(e);if(!(null==r||0==r.refrshWeight||r.refreshLevel>a||(n>0&&t<=1||n<=0)&&r.refrshMinWave>c))if(u.push(e),n>0)if(e==o.pzaZombieEnum.RED_GARGANTUAR)d.push(t%10==0?6e3:1e3);else if(e==o.pzaZombieEnum.ZOMBIE){var p=r.refrshWeight;n>5&&(p=Math.max(p-180*(n-5),400)),d.push(p)}else e==o.pzaZombieEnum.CONE_HEAD_ZOMBIE?(p=r.refrshWeight,n>5&&(p=Math.max(p-150*(n-5),1e3)),d.push(p)):d.push(r.refrshWeight);else d.push(r.refrshWeight)}});var m=l.pzaUtil.getRandomIndexByWeight(d);return u[m]},a.getPrevewZombies=function(a,t,e){var o=[];if(null!=e.type&&e.type.split(",").forEach(function(a){var t=parseInt(a);o.indexOf(t)<0&&o.push(t)}),e.endLess){this.endLessPartZombie=[],o=this.createEndlessZombieType(r.pzaGameManager.getGame(n.pzaGameMode.ZaJiao,p.pzaGameZJ).endLessRound);for(var i=[],l=0;l<o.length;l++){var s=this.sameTypeIdZombie(o[l],e);if(s.length>0)for(var c=0;c<s.length;c++)i.push(s[c])}o=o.concat(i)}return Array.from(new Set(o))},a.createZombieDensity=function(a){var t=[];a=a>3?3:a;for(var e=1;e<=20;e++){var o,n=Math.floor(Math.floor(.8*(e+20*(a-1)-1))/2)+1;o=10==e?Math.floor(4*n)+20:20==e?Math.floor(4*n)+36:4*n,t.push(o)}return t},a.sameTypeIdZombie=function(a){var t=[],e=0;if(a>=100){var n=i.pzaGameConfig.getZombieConfig(a);n instanceof s.pzaZJZombieConf&&(e=n.typeId)}else e=a;return[1,3,5,7,101,102,103,104,105,108,113,117,125,126,127,136,140].forEach(function(n){if(!(n<100||n==o.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM||n==a||0==e)){var r=i.pzaGameConfig.getZombieConfig(n);r instanceof s.pzaZJZombieConf&&r.typeId==e&&t.push(n)}}),t},a.createEndlessZombieType=function(a){if(this.endLessPartZombie.length>0)return this.endLessPartZombie;var t=[],e=[];t.push(o.pzaZombieEnum.ZOMBIE),t.push(o.pzaZombieEnum.CONE_HEAD_ZOMBIE),0==a?t.push(o.pzaZombieEnum.BUCKET_HEAD_ZOMBIE):a+=1;var n=this.getZombieType2(),i=[113,164];a>0&&a<3&&(n=n.filter(function(a){return!i.includes(a)}));var r=Math.min(a<=0?0:1,9),p=l.pzaUtil.getRandomArrayValue(n,r);0==a&&(p=[]),t=t.concat(p),e=this.getZombieType1(),a>0&&a<3&&(e=e.filter(function(a){return!i.includes(a)})),e=e.filter(function(a){return!p.includes(a)});var s=Math.min(a-1<0?0:a-1,9),c=l.pzaUtil.getRandomArrayValue(e,s);return t=t.concat(c),this.endLessPartZombie=t,this.endLessPartZombie},a.getZombieType1=function(){var a=r.pzaGameManager.getGame(n.pzaGameMode.ZaJiao,p.pzaGameZJ).getRankConf(n.pzaGameState.curPart),t=[];return null!=a.type&&(t=a.type.split(",")).forEach(function(a,e){t[e]=parseInt(a)}),t},a.getZombieType2=function(){var a=r.pzaGameManager.getGame(n.pzaGameMode.ZaJiao,p.pzaGameZJ).getRankConf(n.pzaGameState.curPart),t=[];return null!=a.type2&&(t=a.type2.split(",")).forEach(function(a,e){t[e]=parseInt(a)}),t},a.endLessPartZombie=[],a}();e.pzaZJRankConf=c,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/pzaGameState":"pzaGameState","./pzaGameConfig":"pzaGameConfig","./pzaGameManager":"pzaGameManager","./pzaGameZJ":"pzaGameZJ","./pzaUtil":"pzaUtil","./pzaZJZombieConf":"pzaZJZombieConf"}],pzaZJZombieConf:[function(a,t,e){"use strict";cc._RF.push(t,"a964faMAJFBxbXrAfbVOuCq","pzaZJZombieConf");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZJZombieConf=void 0;var i=function(a){function t(t){var e,o=this,n=parseInt(t.id);if((o=a.call(this,n,t.name,parseInt(t.hp),parseInt(t.armorHP),parseInt(t.armor),parseInt(t.tool),0,parseFloat(t.atkCD),0,parseInt(t.level),parseInt(t.weight),parseInt(t.min))||this).typeId=0,o.showWeight=100,o.equipType2=0,o.equipHp2=0,o.atkArr=null,o.atkInterval2=0,o.typeId=parseInt(t.typeId||0),o.showWeight=parseInt(t.showWeight||0),o.equipType2=parseInt(t.armor2||0),o.equipHp2=parseInt(t.armorHP2||0),o.atkArr=[t.atk],t.atk2&&o.atkArr.push(t.atk2),o.atkInterval2=parseInt(t.atkCD2||0),o.atk=o.atkArr[0]||0,null!=t.speed)if((e=t.speed.split(",")).length>1){var i=parseFloat(e[0]),r=parseFloat(e[1]);o.minSpeed=Math.min(i,r),o.maxSpeed=Math.max(i,r)}else o.minSpeed=o.maxSpeed=parseFloat(e[0]);return null!=t.speed2&&((e=t.speed2.split(",")).length>1?(i=parseFloat(e[0]),r=parseFloat(e[1]),o.specialMinSpeed=Math.min(i,r),o.specialMaxSpeed=Math.max(i,r)):o.specialMinSpeed=o.specialMaxSpeed=parseFloat(e[0])),o}return n(t,a),t}(a("./pzaGameConfig").pzaZombieConfigData);e.pzaZJZombieConf=i,cc._RF.pop()},{"./pzaGameConfig":"pzaGameConfig"}],pzaZombieBaseBullet:[function(a,t,e){"use strict";cc._RF.push(t,"0bd3e1+3rpDrYGxQK8+qEfk","pzaZombieBaseBullet");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieBaseBullet=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaGameCommonPool"),l=a("../../Common/pzaGroupEnum"),s=a("../../Common/pzaWorldEventManager"),c=a("../Data/pzaPlantEnum"),u=a("../Plant/pzaAttackType"),d=a("../Plant/pzaPlantBody"),h=a("./pzaBaseBullet"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.direction=cc.v2(-1,0),t}return n(t,a),t.prototype.init=function(a,t,e,o,n){void 0===e&&(e=0),void 0===o&&(o=null),void 0===n&&(n=cc.v2(-1,0)),this.bulletYIndex=a,r.pzaCollisionManager.getInstance.addZombieBulletByRow(this.bulletYIndex,this),this.atk=t,this.lifeTime=0,this.yTargetPos=o,this.realYSpeed=this.ySpeed,this.direction=n,this.isInAir=!1,this.maxPosX=null,this.node.scale=1,this.createShadow(),this.speed=this.originSpeed},t.prototype.onCollision=function(a){if(a&&a.node.group==l.pzaGroupEnum.PLANT){var t=a.node.getComponent(d.pzaPlantBody);this.colliderPlant(t&&t.baseData)}},t.prototype.colliderPlant=function(a){if(a&&!a.isDead&&a.plantData.canBeShoot){this.playHitEffect(a),this.close();var t=null,e=-1;if(window.pzaplantManager.getAllPlant(c.pzaPlantEnum.UMBRELLA_LEAF).forEach(function(o){if(null==t||0!=e)if(o.xIndex==a.xIndex&&o.yIndex==a.yIndex)t=o,e=0;else if(Math.abs(o.xIndex-a.xIndex)<=1&&Math.abs(o.yIndex-a.yIndex)<=1){var n=Math.abs(o.xIndex-a.xIndex)+Math.abs(o.yIndex-a.yIndex);(null==t||n<e)&&(t=o,e=n)}}),null==t){var o=""+a.xIndex+a.yIndex,n=window.pzaplantManager.pumpkinDataMap.get(o);if(null==n){var i=window.pzaplantManager.plantDataMap.get(o);if(null==i){var r=window.pzaplantManager.plantEnvDataMap.get(o);null==r||(p=window.pzaplantManager.getPlantByData(r))&&p.hurt(this.atk,null,u.pzaAttackType.FLOOR_ATK)}else(p=window.pzaplantManager.getPlantByData(i))&&p.hurt(this.atk,null,u.pzaAttackType.FLOOR_ATK)}else{var p;(p=window.pzaplantManager.getPlantByData(n))&&p.hurt(this.atk,null,u.pzaAttackType.FLOOR_ATK)}}else s.pzaWorldEventManager.triggerEvent(s.pzaWorldEventType.RICOCHET_BULLET,t)}},t.prototype.close=function(){this.bulletYIndex<0?r.pzaCollisionManager.getInstance.delZombieBulletOther(this):r.pzaCollisionManager.getInstance.delZombieBulletByRow(this.bulletYIndex,this),null!=this.curShadow&&(this.curShadow.close(),this.curShadow=null),this.poolPrefab?p.pzaGameCommonPool.returnInstant2(this.node,this.poolPrefab._uuid):this.node.destroy()},i([f],t)}(h.pzaBaseBullet));e.pzaZombieBaseBullet=z,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGameCommonPool":"pzaGameCommonPool","../../Common/pzaGroupEnum":"pzaGroupEnum","../../Common/pzaWorldEventManager":"pzaWorldEventManager","../Data/pzaPlantEnum":"pzaPlantEnum","../Plant/pzaAttackType":"pzaAttackType","../Plant/pzaPlantBody":"pzaPlantBody","./pzaBaseBullet":"pzaBaseBullet"}],pzaZombieBobsledTeam:[function(a,t,e){"use strict";cc._RF.push(t,"7a718blukBMlonF38uNGJmf","pzaZombieBobsledTeam");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieBobsledTeam=void 0;var r=a("../../Achieve/pzaAchieve"),p=a("../../Achieve/pzaAchieveMgr"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaZombieEnum"),c=a("../Plant/pzaAttackType"),u=a("../pzaGameState"),d=a("./pzaBaseZombie"),h=a("./pzaZombieState"),m=cc._decorator,f=m.ccclass,z=(m.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.butterSlot=null,t.zombieInCar=!1,t}return n(t,a),t.prototype.onEnable=function(){a.prototype.onEnable.call(this),this.animation.node.stopAllActions(),this.animation.node.opacity=255,this.animation.node.x=80},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.changeSkin("biaoqing1_1"),this.animation.playAnimation(this.uiIdleName,!0,null,null,.5)},t.prototype.preview=function(t,e,o){void 0===o&&(o=1),a.prototype.bindData.call(this,t),this.hasEquip=!0,this.hasTool=!0,this.zombieWin=!1,this.setZombieScale(o),this.node.scaleX=o,this.refreshFrostState(!0),this.changeSkin("biaoqing1_1"),this.playStayAnimation(),u.pzaGameState.isZjMode()&&2==u.pzaGameState.curPart?this.animation.playAnimation("move2",!0,null,null):u.pzaGameState.isMiniMode()&&10==u.pzaGameState.curPart&&this.animation.playAnimation("move2",!0,null,null)},t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),this.zombieInCar=!1,t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_ICE,-1)),t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_SPATTER,-1)),t.buffData.addBuff(new l.pzaBuffInfo(l.pzaBuffType.IMM_CONTROL,-1))},t.prototype.logicUpdate=function(a){null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.isDead||(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),this.updateMove(a))))},t.prototype.updateMove=function(t){a.prototype.updateMove.call(this,t),this.leaveIce()?this.playDieAnimation(!1):this.zombieInCar||-1!=this.baseData.xIndex&&this.baseData.xIndex<=5&&this.jumpInCar()},t.prototype.leaveIce=function(){var a=this,t=window.pzaMapManager.getIceGround(this.baseData.yIndex);if(null==t||t.length<=0)return!0;var e=!0;return t.forEach(function(t){null!=t&&t.getIceX()<a.baseData.logicPos.x&&(e=!1)}),e},t.prototype.jumpInCar=function(){var a=this;this.zombieInCar=!0,this.animation.playAnimation("jump",!1,function(){a.animation.playAnimation("idle2",!0)})},t.prototype.playDeathAnimation=function(t){a.prototype.playDeathAnimation.call(this,t),this.zombieState=h.pzaZombieState.DEAD,this.zombieHurtState=s.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),this.changeSkin("biaoqing1_4"),this.animation.playAnimation("die",!1,t)},t.prototype.zombieDying=function(){this.zombieHurtState=s.pzaHurtStateEnum.DYING,this.changeSkin("biaoqing1_3")},t.prototype.zombieHurt=function(){this.zombieHurtState=s.pzaHurtStateEnum.HURT,this.changeSkin("biaoqing1_2")},t.prototype.zombieIntact=function(){this.zombieHurtState=s.pzaHurtStateEnum.INTACT,this.changeSkin("biaoqing1_1")},t.prototype.pauseSelf=function(){a.prototype.pauseSelf.call(this),this.animation.node.pauseAllActions()},t.prototype.resumeSelf=function(){a.prototype.resumeSelf.call(this),this.animation.node.resumeAllActions()},t.prototype.hurt=function(a,t,e){if(u.pzaGameState.critValue>0&&Math.random()<u.pzaGameState.critValue&&(a=Math.round(1.5*a)),this.baseData&&!this.baseData.isDead){if(e==c.pzaAttackType.CLEAN_CAR)return this.baseData.zombieDie(),void this.flaserDeath();if(e==c.pzaAttackType.BANG)return this.baseData.zombieDie(),void this.death(!1);if(e==c.pzaAttackType.EAT||e==c.pzaAttackType.DEATH)return this.baseData.zombieDie(),void this.death(!1);if(e!=c.pzaAttackType.TWINE)if(e!=c.pzaAttackType.BOOM){if(e==c.pzaAttackType.NORMAL_BOOM)return this.baseData.zombieDie(),void this.death(!1);e==c.pzaAttackType.SPIKE?this.baseData.hurtZombieBody(a):this.baseData.hurtZombie(a),this.baseData.isDead||this.baseData.hp<=0?this.playDieAnimation(!0):(this.refreshHurtState(!1),this.animation.flash())}else this.ashesDeath();else this.twineDeath()}},t.prototype.playDieAnimation=function(a){for(var t=this,e=0;e<4;e++){var o=cc.v2(this.baseData.logicPos.x+120+50*e,this.baseData.logicPos.y),n=u.pzaGameState.map.getMapXIndex(o),i=window.pzazombieManager.createFixBlockZombieData(s.pzaZombieEnum.ZOMBIE_BOBSLED,n,this.baseData.yIndex);i.logicPos=o,window.pzazombieManager.createZombie(i,!1)}this.baseData.zombieDie(),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData,a),this.animation.setAnimationSkin("biaoqing1_4"),this.animation.playAnimation("idle2",!0),this.animation.node.runAction(cc.sequence(cc.moveTo(1,cc.v2(-40,0)),cc.fadeOut(.2),cc.callFunc(function(){t.close()})))},t.prototype.ashesDeath=function(){a.prototype.ashesDeath.call(this)},t.prototype.death=function(t,e){void 0===e&&(e=null),a.prototype.death.call(this,t,e),u.pzaGameState.killZombieTeam++,p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_18,u.pzaGameState.killZombieTeam)},i([f],t)}(d.pzaBaseZombie));e.pzaZombieBobsledTeam=z,cc._RF.pop()},{"../../Achieve/pzaAchieve":"pzaAchieve","../../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieState":"pzaZombieState"}],pzaZombieBobsled:[function(a,t,e){"use strict";cc._RF.push(t,"cc21b+6q0xMHKir0g6acnU1","pzaZombieBobsled");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieBobsled=void 0;var r=a("./pzaBaseZombie"),p=a("./pzaZombieSlot"),l=cc._decorator,s=l.ccclass,c=(l.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.garlicSkinName="biaoqing2_1",t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[p.pzaZombieSlotType.butter,new p.pzaZombieSlot(this.animation.spineAnimation,p.pzaZombieSlotType.butter).addState(new p.pzaZombieSlotAtt(1,p.pzaZombieSlotType.butter,-21.62,61.78,0))]])},i([s],t)}(r.pzaBaseZombie));e.pzaZombieBobsled=c,cc._RF.pop()},{"./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot"}],pzaZombieBody:[function(a,t,e){"use strict";cc._RF.push(t,"b1abdSI13NE76lu3aJ+NI5X","pzaZombieBody");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieBody=void 0;var r=a("../../Common/pzaCollisionManager"),p=a("../../Common/pzaGroupEnum"),l=a("../Data/pzaBuffData"),s=a("../Data/pzaPlantEnum"),c=a("../Data/pzaZombieEnum"),u=a("../pzaBaseBody"),d=a("../pzaGameState"),h=cc._decorator,m=h.ccclass,f=(h.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.collider=null,t}return n(t,a),t.prototype.bindData=function(t){a.prototype.bindData.call(this,t),null!=t.zombieData&&t.zombieData.hypnosis?(this.node.group=p.pzaGroupEnum.PLANT,r.pzaCollisionManager.getInstance.zombieToPlant(t.yIndex,this)):(this.node.group=p.pzaGroupEnum.ZOMBIE,r.pzaCollisionManager.getInstance.addZombieByRow(t.yIndex,this))},t.prototype.hypnosischangeGroup=function(){this.curTarget=null,this.node.group=p.pzaGroupEnum.PLANT},t.prototype.onCollisionEnter=function(a,t){this.onCollision(a,t)},t.prototype.onCollisionStay=function(a,t){this.onCollision(a,t)},t.prototype.getCollider=function(){var a=this;return this.node&&this.node.isValid?this.collider?this.collider:(this.collider=this.node.getComponent(cc.Collider),this.baseData&&this.baseData.zombieData&&this.baseData.zombieData.zombieType===c.pzaZombieEnum.BUNGEE_ZOMBIE?this.collider.poSource=function(){return{x:a.node.parent.parent.x,y:a.node.parent.parent.y}}:this.collider.poSource=function(){return{x:a.node.parent.x+a.node.x,y:a.node.parent.y+a.node.y}},this.collider):null},t.prototype.onCollisionExit=function(a){if(null!=a&&null!=this.curTarget){if(a.node.group==p.pzaGroupEnum.PLANT){var t=a.node.getComponent(u.pzaBaseBody);if(null!=t)return void(t.baseData==this.curTarget&&(this.curTarget=null));if(null!=(e=a.node.getComponent(u.pzaBaseBody)))return void(e.baseData==this.curTarget&&(this.curTarget=null))}var e;if(a.node.group==p.pzaGroupEnum.ZOMBIE&&null!=(e=a.node.getComponent(u.pzaBaseBody))&&e.baseData==this.curTarget&&(this.curTarget=null),a.node.group==p.pzaGroupEnum.BRAIN){var o=a.node.getComponent(u.pzaBaseBody);if(null!=o)return void(o.baseData==this.curTarget&&(this.curTarget=null))}}},t.prototype.onCollision=function(a){if(null!=a&&null==this.curTarget){if(a.node.group==p.pzaGroupEnum.PLANT){var t=a.node.getComponent(u.pzaBaseBody);if(null!=t)return void this.colliderPlant(t.baseData);if(null!=(e=a.node.getComponent(u.pzaBaseBody)))return void this.colliderZombie(e.baseData)}var e;if(a.node.group==p.pzaGroupEnum.ZOMBIE&&null!=(e=a.node.getComponent(u.pzaBaseBody)))return void this.colliderZombie(e.baseData);if(a.node.group==p.pzaGroupEnum.BRAIN){var o=a.node.getComponent(u.pzaBaseBody);if(this.baseData.zombieData.direction<0&&null!=o&&null!=o.baseData&&o.baseData.yIndex==this.baseData.yIndex)return void(this.curTarget=o.baseData)}}},t.prototype.isCanClimbLabby=function(){return this.baseData.zombieData.cate!=c.pzaZombieCate.Gargantuar&&this.baseData.zombieData.cate!=c.pzaZombieCate.IceCar&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.CATAPULT_ZOMBIE},t.prototype.colliderPlant=function(a){if(!(null==this.baseData||null==a||a.isDead||a.buffData.hasBuff(l.pzaBuffType.UNABLE_SELECT)||null!=a.plantData&&a.plantData.plantType==s.pzaPlantEnum.SQUASH&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.DOLPHIN_RIDER_ZOMBIE||this.baseData.yIndex!=a.yIndex||null!=this.baseData.zombieData&&-1==this.baseData.zombieData.direction&&window.pzaMapManager.hasLadder(a.xIndex,a.yIndex)&&this.isCanClimbLabby()))if(null==this.baseData.zombieData||this.baseData.zombieData.zombieType!=c.pzaZombieEnum.ZOMBONI&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.CATAPULT_ZOMBIE){if(null==a.plantData||a.plantData.cate!==s.pzaPlantCate.Spike||this.baseData.zombieData.cate==c.pzaZombieCate.Gargantuar)if(null!=a.plantData&&a.plantData.adClearPlant)this.curTarget=a;else{if(this.baseData.zombieData.direction>0){if(this.baseData.logicPos.x>a.logicPos.x)return}else if(this.baseData.logicPos.x<a.logicPos.x)return;(d.pzaGameState.isZjMode()||this.baseData.zombieData.zombieType!=c.pzaZombieEnum.CATAPULT_ZOMBIE&&this.baseData.zombieData.cate!==c.pzaZombieCate.Gargantuar&&this.baseData.zombieData.cate!==c.pzaZombieCate.IceCar&&(this.baseData.zombieData.zombieType!=c.pzaZombieEnum.POLEVAULTING_ZOMBIE&&this.baseData.zombieData.zombieType!=c.pzaZombieEnum.POGO_ZOMBIE||this.baseData.zombieData.toolType==c.pzaEquipType.NO_EQUIP)||null!=a.plantData||this.baseData.zombieData.hypnosis)&&(this.curTarget=a)}}else this.curTarget=a},t.prototype.colliderZombie=function(a){if(null!=this.baseData&&null!=a&&!a.isDead&&this.baseData.yIndex==a.yIndex){if(this.baseData.zombieData.direction>0){if(this.baseData.logicPos.x>a.logicPos.x)return}else if(this.baseData.logicPos.x<a.logicPos.x)return;this.curTarget=a}},i([m],t)}(u.pzaBaseBody));e.pzaZombieBody=f,cc._RF.pop()},{"../../Common/pzaCollisionManager":"pzaCollisionManager","../../Common/pzaGroupEnum":"pzaGroupEnum","../Data/pzaBuffData":"pzaBuffData","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","../pzaBaseBody":"pzaBaseBody","../pzaGameState":"pzaGameState"}],pzaZombieCard:[function(a,t,e){"use strict";cc._RF.push(t,"3b719bhP+NDUpgv/kC7a5T2","pzaZombieCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieCard=void 0;var r=a("../../Battle/Data/pzaZombieEnum"),p=a("../../Battle/pzaGameState"),l=a("../../Common/pzaSoundManager"),s=a("../../Common/pzaSpriteFrameManager"),c=a("../../Common/pzaWorldEventManager"),u=cc._decorator,d=u.ccclass,h=u.property,m=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardIcon=null,t.priceLabel=null,t.mask=null,t.selectTag=null,t.curZombieType=null,t.curPrice=0,t.clickCall=null,t}return n(t,a),t.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.clickCard,this),this.node._touchListener.setSwallowTouches(!1),c.pzaWorldEventManager.addListener(c.pzaWorldEventType.SELECT_CARD,this.diselect,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.clickCard,this),c.pzaWorldEventManager.removeListener(c.pzaWorldEventType.SELECT_CARD,this.diselect,this)},t.prototype.bindData=function(a,t,e){this.curZombieType=a,this.curPrice=t,this.clickCall=e,null!=a?(this.node.active=!0,this.mask.active=!1,this.selectTag.active=!1,s.pzaSpriteFrameManager.loadZombieCard(a,this.cardIcon),a==r.pzaZombieEnum.POLEVAULTING_ZOMBIE?this.cardIcon.node.setPosition(cc.v2(-34,-24)):a==r.pzaZombieEnum.FOOTBALL_ZOMBIE?this.cardIcon.node.setPosition(cc.v2(-8,-26)):a==r.pzaZombieEnum.DANCING_ZOMBIE?this.cardIcon.node.setPosition(cc.v2(-12,-22)):a==r.pzaZombieEnum.ZOMBONI?this.cardIcon.node.setPosition(cc.v2(-35,-30)):a==r.pzaZombieEnum.BALLOON_ZOMBIE?this.cardIcon.node.setPosition(cc.v2(-2,-5)):a==r.pzaZombieEnum.POGO_ZOMBIE?this.cardIcon.node.setPosition(cc.v2(-6,-21)):a==r.pzaZombieEnum.BUNGEE_ZOMBIE?this.cardIcon.node.setPosition(cc.v2(-2,-12)):a==r.pzaZombieEnum.LADDER_ZOMBIE?this.cardIcon.node.setPosition(cc.v2(-2,-15)):a==r.pzaZombieEnum.CATAPULT_ZOMBIE?this.cardIcon.node.setPosition(cc.v2(-4,-18)):a==r.pzaZombieEnum.GARGANTUAR||a==r.pzaZombieEnum.RED_GARGANTUAR?this.cardIcon.node.setPosition(cc.v2(-4,-25)):a==r.pzaZombieEnum.IMP||a==r.pzaZombieEnum.IMP_MINI?this.cardIcon.node.setPosition(cc.v2(-8,-7)):this.cardIcon.node.setPosition(cc.v2(-2,-22)),this.priceLabel.string=""+this.curPrice):this.node.active=!1},t.prototype.clickCard=function(){if(null!=this.curZombieType){var a=p.pzaGameState.selectZombie;this.clickCall&&this.clickCall(this.curZombieType),a==this.curZombieType&&(p.pzaGameState.selectCard=null,p.pzaGameState.selectZombie=null)}},t.prototype.update=function(){null==this.curZombieType||p.pzaGameState.gamePause||(p.pzaGameState.sunLightCount>=this.curPrice?this.mask.active=!1:this.mask.active=!0)},t.prototype.select=function(){if(null!=this.curZombieType){if(this.curPrice>p.pzaGameState.sunLightCount)return c.pzaWorldEventManager.triggerEvent(c.pzaWorldEventType.LACK_SUN,null),l.pzaSoundManager.playAudio("sunlack"),p.pzaGameState.selectCard=null,void(p.pzaGameState.selectZombie=null);p.pzaGameState.selectCard=p.pzaSelectCardType.SLOT_CARD,p.pzaGameState.selectZombie=this.curZombieType,this.selectTag.active=!0,l.pzaSoundManager.playAudio("selectPlant")}},t.prototype.diselect=function(){this.selectTag.active=!1},i([h({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([h({displayName:"\u9633\u5149\u4ef7\u683c",type:cc.Label})],t.prototype,"priceLabel",void 0),i([h({displayName:"\u906e\u7f69",type:cc.Node})],t.prototype,"mask",void 0),i([h({displayName:"\u9009\u4e2d\u6846",type:cc.Node})],t.prototype,"selectTag",void 0),i([d],t)}(cc.Component);e.pzaZombieCard=m,cc._RF.pop()},{"../../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../../Battle/pzaGameState":"pzaGameState","../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager","../../Common/pzaWorldEventManager":"pzaWorldEventManager"}],pzaZombieEnermyPartCfg:[function(a,t,e){"use strict";cc._RF.push(t,"0e450UTG6JPxKRTcmtcZjNM","pzaZombieEnermyPartCfg"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieEnermyPartCfg=void 0;var o=a("../Battle/Data/pzaPlantEnum"),n=a("./pzaUtil"),i=function(){function a(a,t,e,o,n,i,r){this.level=1,this.name=null,this.plantPool=null,this.zombiePool=null,this.plantColumn=4,this.fixPlant=null,this.fixRowPlant=null,this.unlockChapter=1,this.unlockPart=1,this.endlessWeight=0,this.level=a,this.name=t,this.plantPool=e,this.zombiePool=o,this.plantColumn=n,this.fixPlant=i,this.fixRowPlant=r}return a.initPartConfig=function(t){var e=this;null!=t&&t.forEach(function(t){if(null!=t){var o=null,n=null,i=null,r=[],p=1,l=1;try{if(null!=t.plant&&""!=t.plant&&(o=JSON.parse(t.plant)),null!=t.special&&""!=t.special&&(n=JSON.parse(t.special)),null!=t.special2&&""!=t.special2&&(i=JSON.parse(t.special2)),null!=t.unlock){var s=t.unlock.split("-").map(Number);p=s[0],l=s[1]}}catch(d){console.log(d)}null!=t.zombie&&(r=t.zombie.split(",").map(Number));var c=parseInt(t.level),u=new a(c,t.name,o,r,parseInt(t.green),n,i);u.unlockChapter=p,u.unlockPart=l,u.endlessWeight=t.probability&&parseInt(t.probability),e.PartConfigMap.set(c,u)}})},a.initPuffFloat=function(a){var t=this;null!=a&&a.forEach(function(a){if(null!=a){var e=parseInt(a.level),o=parseInt(a.mini),n=parseInt(a.max);t.PuffFloatMap.set(e,{min:o,max:n}),t.maxPuffPart=Math.max(e,t.maxPuffPart)}})},a.getName=function(a){var t=this.PartConfigMap.get(a);return t&&t.name},a.getZombiePool=function(a){var t=this.PartConfigMap.get(a);return t&&t.zombiePool},a.getPlantType=function(a){var t=this.PartConfigMap.get(a);if(null==t)return[];var e=new Set;return null!=t.fixPlant&&t.fixPlant.forEach(function(a){if(null!=a){var t=a[1];e.add(t)}}),null!=t.fixRowPlant&&t.fixRowPlant.forEach(function(a){if(null!=a)for(var t=1;t<a.length;t++){var o=a[t];e.add(o)}}),null!=t.plantPool&&t.plantPool.forEach(function(a){if(null!=a){var t=a[0];e.add(t)}}),Array.from(e)},a.getPlantList=function(a,t){var e=[],n=this.PartConfigMap.get(a);if(null==n)return e;var i=new Set;if(null!=n.fixPlant&&n.fixPlant.forEach(function(a){if(null!=a){var t=a[1],o=a[0],r=(o-1)%n.plantColumn,p=4-Math.floor((o-1)/n.plantColumn);e.push({x:r,y:p,type:t}),i.add(""+r+p)}}),null!=n.fixRowPlant&&n.fixRowPlant.forEach(function(a){if(null!=a){for(var t=4-(a[0]-1),o=[],r=0;r<n.plantColumn;r++){var p=""+r+t;i.has(p)||o.push(r)}o.sort(function(){return Math.random()-.5});for(var l=1;l<a.length;l++){o.push(l),r=o[l-1];var s=a[l];e.push({x:r,y:t,type:s}),i.add(""+r+t)}}}),null!=n.plantPool){var r=[];n.plantPool.forEach(function(a){if(null!=a)for(var e=a[0],n=a[1],i=0;i<n;i++)t>0&&e==o.pzaPlantEnum.SUN_FLOWER?(t--,r.push(o.pzaPlantEnum.PUFF_SHROOM)):r.push(e)}),r.sort(function(){return Math.random()-.5});for(var p=0,l=0;l<n.plantColumn;l++)for(var s=0;s<5;s++){var c=""+l+s;if(!i.has(c)){var u=r[p];l<=1&&(u==o.pzaPlantEnum.WALL_NUT||u==o.pzaPlantEnum.TALL_NUT)?(p++,s--,r.push(u)):(e.push({x:l,y:s,type:r[p]}),p++)}}}return e},a.getPlantColumn=function(a){var t=this.PartConfigMap.get(a);return null==t?0:t.plantColumn},a.getEndlessCfgLevel=function(a){var t=[];1==a?t.push(10,11,12):t.push(10,11,12,13,14,15,16,17);for(var e=[],o=0;o<t.length;o++){var i=this.PartConfigMap.get(t[o]);e.push(i&&i.endlessWeight||0)}return t[n.pzaUtil.getRandomIndexByWeight(e)]},a.getRandomPuff=function(a){a=Math.min(this.maxPuffPart,a);var t=this.PuffFloatMap.get(a);return n.pzaUtil.getRandomNum(t.min,t.max)},a.PartConfigMap=new Map,a.PuffFloatMap=new Map,a.maxPuffPart=1,a}();e.pzaZombieEnermyPartCfg=i,cc._RF.pop()},{"../Battle/Data/pzaPlantEnum":"pzaPlantEnum","./pzaUtil":"pzaUtil"}],pzaZombieEnum:[function(a,t,e){"use strict";cc._RF.push(t,"b5ab5QGCLlGqZm0T4j6hFMJ","pzaZombieEnum"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaEquipType=e.pzaHurtStateEnum=e.pzaZombieHurtCate=e.pzaZombieCate=e.pzaZombieEnum=void 0,function(a){a[a.ZOMBIE=1]="ZOMBIE",a[a.FLAG_ZOMBIE=2]="FLAG_ZOMBIE",a[a.CONE_HEAD_ZOMBIE=3]="CONE_HEAD_ZOMBIE",a[a.POLEVAULTING_ZOMBIE=4]="POLEVAULTING_ZOMBIE",a[a.BUCKET_HEAD_ZOMBIE=5]="BUCKET_HEAD_ZOMBIE",a[a.NEWSPAPER_ZOMBIE=6]="NEWSPAPER_ZOMBIE",a[a.SCREEN_DOOR_ZOMBIE=7]="SCREEN_DOOR_ZOMBIE",a[a.FOOTBALL_ZOMBIE=8]="FOOTBALL_ZOMBIE",a[a.DANCING_ZOMBIE=9]="DANCING_ZOMBIE",a[a.BACKUP_DANCER=10]="BACKUP_DANCER",a[a.DUCKY_TUBE_ZOMBIE=11]="DUCKY_TUBE_ZOMBIE",a[a.DUCKY_TUBE_CONE_ZOMBIE=12]="DUCKY_TUBE_CONE_ZOMBIE",a[a.DUCKY_TUBE_BUCKET_ZOMBIE=13]="DUCKY_TUBE_BUCKET_ZOMBIE",a[a.SNORKEL_ZOMBIE=14]="SNORKEL_ZOMBIE",a[a.ZOMBONI=15]="ZOMBONI",a[a.ZOMBIE_BOBSLED_TEAM=16]="ZOMBIE_BOBSLED_TEAM",a[a.DOLPHIN_RIDER_ZOMBIE=17]="DOLPHIN_RIDER_ZOMBIE",a[a.JACK_ZOMBIE=18]="JACK_ZOMBIE",a[a.BALLOON_ZOMBIE=19]="BALLOON_ZOMBIE",a[a.DIGGER_ZOMBIE=20]="DIGGER_ZOMBIE",a[a.POGO_ZOMBIE=21]="POGO_ZOMBIE",a[a.YETI_ZOMBIE=22]="YETI_ZOMBIE",a[a.BUNGEE_ZOMBIE=23]="BUNGEE_ZOMBIE",a[a.LADDER_ZOMBIE=24]="LADDER_ZOMBIE",a[a.CATAPULT_ZOMBIE=25]="CATAPULT_ZOMBIE",a[a.GARGANTUAR=26]="GARGANTUAR",a[a.RED_GARGANTUAR=27]="RED_GARGANTUAR",a[a.IMP=28]="IMP",a[a.DR_ZOMBOSS=29]="DR_ZOMBOSS",a[a.ZOMBIE_BOBSLED=30]="ZOMBIE_BOBSLED",a[a.IMP_MINI=31]="IMP_MINI",a[a.NormalPeaZombie=32]="NormalPeaZombie",a[a.Nut_Zombie=33]="Nut_Zombie",a[a.CONE_HEAD_ZOMBIE2=101]="CONE_HEAD_ZOMBIE2",a[a.POLEVAULTING_ZOMBIE2=102]="POLEVAULTING_ZOMBIE2",a[a.SCREEN_DOOR_ZOMBIE2=104]="SCREEN_DOOR_ZOMBIE2",a[a.SCREEN_DOOR_ZOMBIE3=105]="SCREEN_DOOR_ZOMBIE3",a[a.SCREEN_DOOR_ZOMBIE4=136]="SCREEN_DOOR_ZOMBIE4",a[a.SCREEN_DOOR_ZOMBIE5=140]="SCREEN_DOOR_ZOMBIE5",a[a.DANCING_ZOMBIE2=108]="DANCING_ZOMBIE2",a[a.DANCING_ZOMBIE3=109]="DANCING_ZOMBIE3",a[a.BACKUP_DANCER2=110]="BACKUP_DANCER2",a[a.JACK_ZOMBIE2=115]="JACK_ZOMBIE2",a[a.GARGANTUAR2=125]="GARGANTUAR2",a[a.GARGANTUAR3=126]="GARGANTUAR3",a[a.GARGANTUAR4=127]="GARGANTUAR4",a[a.RED_GARGANTUAR2=154]="RED_GARGANTUAR2",a[a.RED_GARGANTUAR3=155]="RED_GARGANTUAR3",a[a.RED_GARGANTUAR4=156]="RED_GARGANTUAR4",a[a.ZOMBONI2=103]="ZOMBONI2",a[a.ZOMBONI3=113]="ZOMBONI3",a[a.DIGGERFOOTBALL_ZOMBIE2=117]="DIGGERFOOTBALL_ZOMBIE2",a[a.BedCar=164]="BedCar",a[a.NightWear=165]="NightWear",a[a.PeaZombie=129]="PeaZombie",a[a.PeaZombie2=130]="PeaZombie2",a[a.PeaZombie3=131]="PeaZombie3",a[a.PeaZombie4=132]="PeaZombie4"}(e.pzaZombieEnum||(e.pzaZombieEnum={})),function(a){a[a.Null=0]="Null",a[a.Gargantuar=1]="Gargantuar",a[a.IceCar=2]="IceCar"}(e.pzaZombieCate||(e.pzaZombieCate={})),function(a){a[a.Null=0]="Null",a[a.PENETRATE_HURT=1]="PENETRATE_HURT"}(e.pzaZombieHurtCate||(e.pzaZombieHurtCate={})),function(a){a[a.INTACT=0]="INTACT",a[a.HURT=1]="HURT",a[a.DYING=2]="DYING",a[a.DEAD=3]="DEAD"}(e.pzaHurtStateEnum||(e.pzaHurtStateEnum={})),function(a){a[a.NO_EQUIP=0]="NO_EQUIP",a[a.NORMAL_EQUIP=1]="NORMAL_EQUIP",a[a.IRON_EQUIP=2]="IRON_EQUIP"}(e.pzaEquipType||(e.pzaEquipType={})),cc._RF.pop()},{}],pzaZombieHandbookView:[function(a,t,e){"use strict";cc._RF.push(t,"52c7fSRVGhMCbajYpKgtYzJ","pzaZombieHandbookView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieHandbookView=void 0;var r=a("../Battle/Data/pzaBaseData"),p=a("../Battle/Data/pzaZombieEnum"),l=a("../Battle/Zombie/pzaBaseZombie"),s=a("../Common/pzaGameCommonPool"),c=a("../Common/pzaGameConfig"),u=a("../Common/pzaLocalData"),d=a("../Common/pzaSoundManager"),h=a("../Load/pzaBundleObjectPool"),m=a("../Load/pzaPreLoadManager"),f=a("./pzaZombiebookCard"),z=cc._decorator,y=z.ccclass,g=z.property,v=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardPrefab=null,t.cardContent=null,t.zombieName=null,t.zombieDesc=null,t.zombieProp=null,t.special=null,t.bg=null,t.bg2=null,t.txtScroll=null,t.zJtxtScroll=null,t.zombieAniNode=null,t.shadow=null,t.cardScroll=null,t.zjDesc=null,t.zjTenacty=null,t.zjWear=null,t.zjDmage=null,t.zjSpeed=null,t.zjSpecial=null,t.zjBg=null,t.title=null,t.curZombie=null,t.zombieCardList=null,t.zombieAni=null,t.closeCall=null,t}return n(t,a),t.prototype.onEnable=function(){if(this.zombieCardList=[],u.pzaLocalData.isClickZj){for(var a=[p.pzaZombieEnum.CONE_HEAD_ZOMBIE2,p.pzaZombieEnum.POLEVAULTING_ZOMBIE2,p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE,p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2,p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3,p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE4,p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE5,p.pzaZombieEnum.DANCING_ZOMBIE2,p.pzaZombieEnum.DANCING_ZOMBIE3,p.pzaZombieEnum.BACKUP_DANCER2,p.pzaZombieEnum.JACK_ZOMBIE2,p.pzaZombieEnum.GARGANTUAR2,p.pzaZombieEnum.GARGANTUAR3,p.pzaZombieEnum.GARGANTUAR4,p.pzaZombieEnum.RED_GARGANTUAR2,p.pzaZombieEnum.RED_GARGANTUAR3,p.pzaZombieEnum.RED_GARGANTUAR4,p.pzaZombieEnum.RED_GARGANTUAR4,p.pzaZombieEnum.ZOMBONI2,p.pzaZombieEnum.DIGGERFOOTBALL_ZOMBIE2,p.pzaZombieEnum.ZOMBONI3,p.pzaZombieEnum.BedCar,p.pzaZombieEnum.NightWear],t=0;t<a.length;t++)a[t]!=p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3&&a[t]!=p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2&&a[t]!=p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE5&&a[t]!=p.pzaZombieEnum.GARGANTUAR3&&a[t]!=p.pzaZombieEnum.GARGANTUAR4&&a[t]!=p.pzaZombieEnum.RED_GARGANTUAR3&&a[t]!=p.pzaZombieEnum.RED_GARGANTUAR4&&a[t]!=p.pzaZombieEnum.DANCING_ZOMBIE3&&a[t]!=p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE5&&a[t]!=p.pzaZombieEnum.JACK_ZOMBIE2&&((o=s.pzaGameCommonPool.requestInstant(this.cardPrefab)).setParent(this.cardContent),null!=(n=o.getComponent(f.pzaZombiebookCard))&&(n.zjBindData(a[t],this.showZjZombie.bind(this)),this.zombieCardList.push(n)));this.txtScroll.node.active=!1,this.zJtxtScroll.node.active=!0,this.curZombie=null,this.showZjZombie(p.pzaZombieEnum.CONE_HEAD_ZOMBIE2),this.cardScroll.scrollToTop(),this.title.string="\u6742\u4ea4\u7248-\u50f5\u5c38"}else{for(var e=p.pzaZombieEnum.ZOMBIE;e<=p.pzaZombieEnum.DR_ZOMBOSS;e++){var o,n;e!=p.pzaZombieEnum.DUCKY_TUBE_CONE_ZOMBIE&&e!=p.pzaZombieEnum.DUCKY_TUBE_BUCKET_ZOMBIE&&e!=p.pzaZombieEnum.RED_GARGANTUAR&&((o=s.pzaGameCommonPool.requestInstant(this.cardPrefab)).setParent(this.cardContent),null!=(n=o.getComponent(f.pzaZombiebookCard))&&(n.bindData(e,this.showZombie.bind(this)),this.zombieCardList.push(n)))}this.txtScroll.node.active=!0,this.zJtxtScroll.node.active=!1,this.curZombie=null,this.showZombie(p.pzaZombieEnum.ZOMBIE),this.cardScroll.scrollToTop(),this.title.string="\u7ecf\u5178\u7248-\u50f5\u5c38"}},t.prototype.onDisable=function(){null!=this.zombieCardList&&this.zombieCardList.forEach(function(a){a&&a.close()}),this.zombieCardList=null,null!=this.zombieAni&&(this.zombieAni.close(),this.zombieAni=null)},t.prototype.bindCloseCall=function(a){this.closeCall=a},t.prototype.showZombie=function(a){var t=this;if(this.curZombie!=a){this.shadow.active=!1,null!=this.zombieAni&&(this.zombieAni.close(),this.zombieAni=null),this.curZombie=a;var e=c.pzaGameConfig.getZombieConfig(a),o=c.pzaGameConfig.ZombieBookMap.get(a);if(null!=e&&null!=o){if(this.zombieName.string=e.name,u.pzaLocalData.hasUnlockZombie(a))this.zombieDesc.node.active=null!=o.desc,null!=o.desc&&(this.zombieDesc.string=o.desc),this.zombieProp.node.active=null!=o.prop,null!=o.prop&&(this.zombieProp.string=o.prop),this.special.active=o.special,this.bg.node.active=null!=o.bg,null!=o.bg&&(this.bg.string=o.bg),this.bg2.node.active=null!=o.bg2,null!=o.bg2&&(this.bg2.string=o.bg2);else if(this.zombieDesc.node.active=!0,this.zombieDesc.string="(\u672a\u9047\u5230)",this.zombieProp.node.active=!1,this.special.active=!1,this.bg.node.active=!1,this.bg2.node.active=!1,a==p.pzaZombieEnum.YETI_ZOMBIE)return this.zombieName.string="\uff1f\uff1f\uff1f",void this.txtScroll.scrollToTop();this.txtScroll.scrollToTop(),a==p.pzaZombieEnum.ZOMBIE_BOBSLED_TEAM&&(a=p.pzaZombieEnum.ZOMBIE_BOBSLED);var n=m.pzaPreLoadManager.getZombieUrl(a);h.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(e,o){if(null==e&&null!=o){o.setParent(t.zombieAniNode),o.zIndex=0;var n=-75,i=0;a==p.pzaZombieEnum.BALLOON_ZOMBIE?(o.setPosition(cc.v2(0,-100)),n=-80):a==p.pzaZombieEnum.BUNGEE_ZOMBIE?o.setPosition(cc.v2()):a==p.pzaZombieEnum.CATAPULT_ZOMBIE?o.setPosition(cc.v2(-65,-70)):a==p.pzaZombieEnum.DR_ZOMBOSS?o.setPosition(cc.v2(300,-166)):a==p.pzaZombieEnum.GARGANTUAR?(o.setPosition(cc.v2(0,-140)),n=-110):a==p.pzaZombieEnum.POLEVAULTING_ZOMBIE?(o.setPosition(cc.v2(60,-70)),i=60):a==p.pzaZombieEnum.SNORKEL_ZOMBIE?o.setPosition(cc.v2(0,-90)):a==p.pzaZombieEnum.ZOMBONI?o.setPosition(cc.v2(-60,-100)):o.setPosition(cc.v2(0,-70)),null!=t.zombieAni&&t.zombieAni.close(),t.zombieAni=o.getComponent(l.pzaBaseZombie),null!=t.zombieAni&&(t.zombieAni.uiShow(),t.zombieAni.needShadow&&(t.shadow.active=!0,t.shadow.setPosition(cc.v2(i+t.zombieAni.shadowOffset.x,n+t.zombieAni.shadowOffset.y))))}else console.error(e)})}}},t.prototype.showZjZombie=function(a){var t=this;if(this.curZombie!=a){this.shadow.active=!1,null!=this.zombieAni&&(this.zombieAni.close(),this.zombieAni=null),this.curZombie=a,a==p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE&&(a=1*Math.random()<.5?p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2:p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3),a==p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE4&&Math.random()<.5&&(a=p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE5),a==p.pzaZombieEnum.DANCING_ZOMBIE2&&(a=Math.random()<.5?p.pzaZombieEnum.DANCING_ZOMBIE2:p.pzaZombieEnum.DANCING_ZOMBIE3),a==p.pzaZombieEnum.GARGANTUAR2&&(a=1*Math.random()<.5?p.pzaZombieEnum.GARGANTUAR3:p.pzaZombieEnum.GARGANTUAR4),a==p.pzaZombieEnum.RED_GARGANTUAR2&&(a=1*Math.random()<.5?p.pzaZombieEnum.RED_GARGANTUAR3:p.pzaZombieEnum.RED_GARGANTUAR4),a==p.pzaZombieEnum.ZOMBONI&&(a=p.pzaZombieEnum.ZOMBONI2);var e=c.pzaGameConfig.getZombieConfig(a),o=c.pzaGameConfig.ZjZombieBookMap.get(a);if(null!=e&&null!=o){this.zJtxtScroll.scrollToTop(),this.zombieName.string=o.name,this.zombieName.node.active=null!=o.name,this.zjDesc.node.active=null!=o.desc,null!=o.desc&&(this.zjDesc.string=o.desc),this.zjTenacty.node.active=null!=o.tenacty,null!=o.tenacty&&(this.zjTenacty.string=o.tenacty),this.zjWear.node.active=null!=o.wear,null!=o.wear&&(this.zjWear.string=o.wear),this.zjDmage.node.active=null!=o.dmage,null!=o.dmage&&(this.zjDmage.string=o.dmage),this.zjSpeed.node.active=null!=o.speed,null!=o.speed&&(this.zjSpeed.string=o.speed),this.zjSpecial.node.active=null!=o.special,null!=o.special&&(this.zjSpecial.string=o.special),this.zjBg.node.active=null!=o.bg,null!=o.bg&&(this.zjBg.string=o.bg),this.txtScroll.scrollToTop();var n=m.pzaPreLoadManager.getZombieUrl(a);h.pzaBundleObjectPool.requestInstantByUrl(n,!1,function(e,o){if(null==e&&null!=o){if(o.setParent(t.zombieAniNode),o.zIndex=0,null!=t.zombieAni&&t.zombieAni.close(),o.setPosition(cc.v2(0,-70)),t.zombieAni=o.getComponent(l.pzaBaseZombie),null!=t.zombieAni){var n=new r.pzaBaseData(null,a);n.zombieData.zombieType=a,t.zombieAni&&t.zombieAni.bindData(n),t.zombieAni.uiShow(),a==p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE2||a==p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE3||a==p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE4||a==p.pzaZombieEnum.SCREEN_DOOR_ZOMBIE5?(t.zombieAni.handBookPreview(a),o.setPosition(cc.v2(0,-70))):a==p.pzaZombieEnum.BACKUP_DANCER2?t.zombieAni.handBookPreview(a):a==p.pzaZombieEnum.GARGANTUAR3||a==p.pzaZombieEnum.GARGANTUAR4?(t.zombieAni.handBookPreview(a),o.scale=.75):a==p.pzaZombieEnum.RED_GARGANTUAR3||a==p.pzaZombieEnum.RED_GARGANTUAR4?(t.zombieAni.handBookPreview(a),o.scale=.75):a==p.pzaZombieEnum.ZOMBONI2?o.setPosition(cc.v2(-50,-80)):a==p.pzaZombieEnum.DIGGERFOOTBALL_ZOMBIE2?t.zombieAni.handBookPreview(a):a==p.pzaZombieEnum.ZOMBONI3?(t.zombieAni.handBookPreview(a),o.scale=.65,o.setPosition(cc.v2(-50,-80))):a==p.pzaZombieEnum.BedCar&&(o.scale=.8,o.setPosition(cc.v2(-50,-80))),t.zombieAni.needShadow&&(t.shadow.active=!0,t.shadow.setPosition(cc.v2(0+t.zombieAni.shadowOffset.x,-75+t.zombieAni.shadowOffset.y)))}}else console.error(e)})}}},t.prototype.clickBack=function(){d.pzaSoundManager.playSFX(),this.close()},t.prototype.clickClose=function(){d.pzaSoundManager.playSFX(),this.close(),this.closeCall&&this.closeCall()},t.prototype.close=function(){s.pzaGameCommonPool.returnInstant(this.node)},i([g({displayName:"\u5361\u7247\u9884\u8bbe",type:cc.Prefab})],t.prototype,"cardPrefab",void 0),i([g({displayName:"\u5361\u7247\u5bb9\u5668",type:cc.Node})],t.prototype,"cardContent",void 0),i([g({displayName:"\u50f5\u5c38\u540d\u79f0",type:cc.Label})],t.prototype,"zombieName",void 0),i([g({displayName:"\u50f5\u5c38\u4ecb\u7ecd",type:cc.Label})],t.prototype,"zombieDesc",void 0),i([g({displayName:"\u50f5\u5c38\u5c5e\u6027",type:cc.RichText})],t.prototype,"zombieProp",void 0),i([g({displayName:"\u7279\u6b8a",type:cc.Node})],t.prototype,"special",void 0),i([g({displayName:"\u80cc\u666f\u63cf\u8ff0",type:cc.Label})],t.prototype,"bg",void 0),i([g({displayName:"\u80cc\u666f\u63cf\u8ff02",type:cc.Label})],t.prototype,"bg2",void 0),i([g({displayName:"\u6587\u672cScroll",type:cc.ScrollView})],t.prototype,"txtScroll",void 0),i([g({displayName:"\u6742\u4ea4\u6587\u672cScroll",type:cc.ScrollView})],t.prototype,"zJtxtScroll",void 0),i([g({displayName:"\u50f5\u5c38\u52a8\u753b\u8282\u70b9",type:cc.Node})],t.prototype,"zombieAniNode",void 0),i([g({displayName:"\u50f5\u5c38\u5f71\u5b50",type:cc.Node})],t.prototype,"shadow",void 0),i([g({displayName:"\u5361\u7247Scroll",type:cc.ScrollView})],t.prototype,"cardScroll",void 0),i([g({displayName:"\u6742\u4ea4\u63cf\u8ff0",type:cc.Label})],t.prototype,"zjDesc",void 0),i([g({displayName:"\u6742\u4ea4\u97e7\u6027",type:cc.RichText})],t.prototype,"zjTenacty",void 0),i([g({displayName:"\u6742\u4ea4\u7a7f\u6234",type:cc.RichText})],t.prototype,"zjWear",void 0),i([g({displayName:"\u6742\u4ea4\u4f24\u5bb3",type:cc.RichText})],t.prototype,"zjDmage",void 0),i([g({displayName:"\u6742\u4ea4\u901f\u5ea6",type:cc.RichText})],t.prototype,"zjSpeed",void 0),i([g({displayName:"\u6742\u4ea4\u7279\u70b9",type:cc.RichText})],t.prototype,"zjSpecial",void 0),i([g({displayName:"\u6742\u4ea4\u80cc\u666f",type:cc.Label})],t.prototype,"zjBg",void 0),i([g({displayName:"\u6807\u9898",type:cc.Label})],t.prototype,"title",void 0),i([y],t)}(cc.Component);e.pzaZombieHandbookView=v,cc._RF.pop()},{"../Battle/Data/pzaBaseData":"pzaBaseData","../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Battle/Zombie/pzaBaseZombie":"pzaBaseZombie","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","./pzaZombiebookCard":"pzaZombiebookCard"}],pzaZombieManager:[function(a,t,e){"use strict";cc._RF.push(t,"3114bnqbzFBEqjH2YiD/Eos","pzaZombieManager");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieManager=void 0;var r=a("../Achieve/pzaAchieve"),p=a("../Achieve/pzaAchieveMgr"),l=a("../Common/pzaCollisionManager"),s=a("../Common/pzaGameConfig"),c=a("../Common/pzaGameManager"),u=a("../Common/pzaGamePartConfig"),d=a("../Common/pzaGroupEnum"),h=a("../Common/pzaLocalData"),m=a("../Common/pzaNodeManager"),f=a("../Common/pzaSoundManager"),z=a("../Common/pzaStatisticsMgr"),y=a("../Common/pzaUIManager"),g=a("../Common/pzaUtil"),v=a("../Common/pzaWorldEventManager"),b=a("../Common/pzaZJZombieConf"),S=a("../Garden/pzaGardenMgr"),P=a("../Load/pzaBundleObjectPool"),C=a("../Load/pzaPreLoadManager"),D=a("../View/Battle/pzaNewPlantView"),M=a("../View/Battle/pzaReviveView"),E=a("../utils/pzakc"),_=a("./Data/pzaBaseData"),T=a("./Data/pzaBuffData"),w=a("./Data/pzaDropType"),A=a("./Data/pzaGuideType"),B=a("./Data/pzaZombieEnum"),G=a("./Zombie/pzaBaseZombie"),O=a("./Zombie/pzaDrZomBoss"),I=a("./pzaEffectManager"),N=a("./pzaGameState"),R=a("./pzaSpineTool"),L=cc._decorator,k=L.ccclass,Z=L.property,U=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.atlasSpine=null,t.zombieDatas=[new Set,new Set,new Set,new Set,new Set,new Set],t.zombieMap=new Map,t.hypnoZombieMap=new Map,t.curWaveZombieDatas=new Set,t.drZomBoss=null,t.wave=0,t.lastWave=!1,t.nextWaveTime=u.pzaWaveConfig.firstWaveTime,t.curWaveTime=0,t.preRefreshHp=0,t.hasShowRedTip=!1,t.specialNextWaveTime=0,t.lastWayZombieTime=0,t.zombieModeCheckTime=0,t}return n(t,a),t.prototype.onLoad=function(){window.pzazombieManager=this,R.pzaSpineTool.instance().init(this.atlasSpine),this.atlasSpine.node.y=3e3},t.prototype.init=function(){this.zombieDatas.forEach(function(a){a&&a.clear()}),this.zombieMap.clear(),this.hypnoZombieMap.clear(),this.curWaveZombieDatas.clear(),this.drZomBoss=null,this.wave=0,this.nextWaveTime=u.pzaWaveConfig.firstWaveTime,this.curWaveTime=0,this.preRefreshHp=0,this.hasShowRedTip=!1,this.lastWave=!1,this.specialNextWaveTime=0,this.lastWayZombieTime=0,this.zombieModeCheckTime=0},t.prototype.logicUpdate=function(a){N.pzaGameState.guideZombiePause||(this.refreshWaveZombie(a),this.lastWayZombieTime>0&&(this.lastWayZombieTime-=a,this.lastWayZombieTime<=0&&this.lastTombWaterZombie()),this.zombieModeCheckTime>0&&(this.zombieModeCheckTime-=a,this.zombieModeCheckTime<=0&&this.checkZombieGameFail()))},t.prototype.refreshWaveZombie=function(a){c.pzaGameManager.getCurrentGame().refreshNextWave(this,a)},t.prototype.lastTombWaterZombie=function(){c.pzaGameManager.getCurrentGame().lastTombWaterZombie(this)},t.prototype.createMiniBungee=function(a,t){for(var e=[],o=a-1;o<9;o++)e.push([o,0]),e.push([o,1]),e.push([o,2]),e.push([o,3]),e.push([o,4]);e.sort(function(){return Math.random()-.5});for(var n=0;n<t;n++){var i=e[n];if(null!=i){var r=window.pzazombieManager.createFixBlockZombieData(B.pzaZombieEnum.ZOMBIE,i[0],i[1]);this.zombieDatas[i[1]].delete(r),I.pzaEffectManager.createBungeeZombieEffect(r),this.curWaveZombieDatas.add(r)}}},t.prototype.createBungeePutZombie=function(a,t){if(null!=t){for(var e=[],o=a-1;o<9;o++)e.push([o,0]),e.push([o,1]),e.push([o,2]),e.push([o,3]),e.push([o,4]);e.sort(function(){return Math.random()-.5});for(var n=0;n<t.length;n++){var i=e[n],r=t[n];if(null!=i&&null!=r){if(r==B.pzaZombieEnum.GARGANTUAR||r==B.pzaZombieEnum.RED_GARGANTUAR){var p=[5,6,7,8],l=Math.floor(Math.random()*p.length);i[0]=p[l]}var s=window.pzazombieManager.createFixBlockZombieData(r,i[0],i[1]);this.zombieDatas[i[1]].delete(s),this.curWaveZombieDatas.add(s),I.pzaEffectManager.createBungeeZombieEffect(s)}}}},t.prototype.createZombie=function(a,t,e,o,n,i,r){var p=this;if(void 0===t&&(t=!0),void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===n&&(n=null),void 0===i&&(i=!0),void 0===r&&(r=!1),null!=a&&null!=a.zombieData){var l=m.pzaNodeManager.getPlantZombieNode();if(null!=l){var c=a.zombieData.zombieType,u=C.pzaPreLoadManager.getZombieUrl(c);h.pzaLocalData.unlockZombie(c),P.pzaBundleObjectPool.requestInstantByUrl(u,!1,function(t,i){if(null==t&&null!=i){i.setParent(l),i.setPosition(a.logicPos);var u=i.getComponent(G.pzaBaseZombie);null!=u&&(N.pzaGameState.gameMode==N.pzaGameMode.SMALL_ZOMBIE||N.pzaGameState.gameMode==N.pzaGameMode.MINIGAME_SMALL?u.setZombieScale(s.pzaGameConfig.miniZombieScale):u.setZombieScale(1),r?u.bindData(a,!0):u.bindData(a),e&&u.breakDirt(n),o&&u.breakWater(n),p.zombieMap.set(a,u))}else console.error(t,"\u50f5\u5c38\u52a0\u8f7d\u5931\u8d25",c)}),t&&v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GROVE_SHAKE,a.yIndex),e&&i&&(f.pzaSoundManager.playAudio("tombzombie"),I.pzaEffectManager.createDirtEffect("idle3",a.yIndex,a.logicPos,null)),o&&(f.pzaSoundManager.playAudio("zombie_entering_water"),I.pzaEffectManager.createWaterFlowerEffect(a.yIndex,a.logicPos,null))}}},t.prototype.createHypnZombie=function(a,t){var e=this;if(void 0===t&&(t=null),null!=a&&null!=a.zombieData){var o=m.pzaNodeManager.getPlantZombieNode();if(null!=o){var n=a.zombieData.zombieType,i=C.pzaPreLoadManager.getZombieUrl(n);a.buffData.addBuff(new T.pzaBuffInfo(T.pzaBuffType.IMM_CONTROL,-1)),P.pzaBundleObjectPool.requestInstantByUrl(i,!1,function(n,i){if(null==n&&null!=i){i.setParent(o),i.setPosition(a.logicPos);var r=i.getComponent(G.pzaBaseZombie);null!=r&&(N.pzaGameState.gameMode==N.pzaGameMode.SMALL_ZOMBIE||N.pzaGameState.gameMode==N.pzaGameMode.MINIGAME_SMALL?r.setZombieScale(s.pzaGameConfig.miniZombieScale):r.setZombieScale(1),r.bindData(a),r.body.node.group=d.pzaGroupEnum.PLANT,t&&r.breakDirt(t),e.hypnoZombieMap.set(a,r),l.pzaCollisionManager.getInstance.zombieToPlant(a.yIndex,r.body))}else console.error(n)})}}},t.prototype.createDrZomBoss=function(a,t){var e=this;void 0===t&&(t=0);var o=B.pzaZombieEnum.DR_ZOMBOSS,n=s.pzaGameConfig.getZombieConfig(o),i=new _.pzaBaseData(null,o);i.hp=i.maxHp=t>0?t:n.hp,i.atk=n.atk,i.logicPos=cc.v2(655,-20);var r=m.pzaNodeManager.getPlantZombieNode();if(null!=r){var p=C.pzaPreLoadManager.getZombieUrl(o);h.pzaLocalData.unlockZombie(o),P.pzaBundleObjectPool.requestInstantByUrl(p,!1,function(t,o){if(null==t&&null!=o){o.setParent(r),o.setPosition(i.logicPos);var n=o.getComponent(O.pzaDrZomBoss);null!=n&&(n.bindData(i),n.playEnterAni(a),e.drZomBoss=n)}else console.error(t)})}},t.prototype.playerPutZombie=function(a,t,e){var o=this.createFixBlockZombieData(e,a,t);this.createZombie(o,!1);var n=s.pzaGameConfig.getZombieConfig(e);null==n&&MediaElementAudioSourceNode,N.pzaGameState.sunLightCount-=n.price},t.prototype.hasCanAttackZombie=function(a,t){if(null==a||null==a.logicPos)return!1;var e=!1;return this.zombieDatas[a.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x<a.logicPos.x||o.buffData.hasBuff(T.pzaBuffType.DIVE)||o.buffData.hasBuff(T.pzaBuffType.FLY)||o.buffData.hasBuff(T.pzaBuffType.UNABLE_SELECT)||t&&(o.xIndex<=-1||a.xIndex+t<o.xIndex)||(e=!0)}),e||(e=this.findDrZomBoss()),e},t.prototype.hasWildShootCanAttackZombie=function(a,t){if(null==a||null==a.logicPos)return!1;for(var e=!1,o=a.yIndex-1;o<=a.yIndex+1;o++)o<0||o>=N.pzaGameState.map.getMapRow()||this.zombieDatas[o].forEach(function(o){!o||!o.logicPos||o.logicPos.x<a.logicPos.x||o.buffData.hasBuff(T.pzaBuffType.DIVE)||o.buffData.hasBuff(T.pzaBuffType.FLY)||o.buffData.hasBuff(T.pzaBuffType.UNABLE_SELECT)||t&&(o.xIndex<=-1||a.xIndex+t<o.xIndex)||(e=!0)});return e||(e=this.findDrZomBoss()),e},t.prototype.hasCanAttackBackZombie=function(a,t){if(null==a||null==a.logicPos)return!1;var e=!1;return this.zombieDatas[a.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x>a.logicPos.x||o.buffData.hasBuff(T.pzaBuffType.DIVE)||o.buffData.hasBuff(T.pzaBuffType.FLY)||o.buffData.hasBuff(T.pzaBuffType.UNABLE_SELECT)||t&&(o.xIndex<=-1||a.xIndex+t>o.xIndex)||(e=!0)}),e||(e=this.findDrZomBoss()),e},t.prototype.findDrZomBoss=function(){var a=window.pzazombieManager.drZomBoss;return null!=a&&null!=a.baseData&&!a.baseData.isDead&&!a.baseData.buffData.hasBuff(T.pzaBuffType.UNABLE_SELECT)},t.prototype.getCanAttackZombies=function(a,t){if(null==a||null==a.logicPos)return null;var e=[];return this.zombieDatas[a.yIndex].forEach(function(o){!o||!o.logicPos||o.logicPos.x<a.logicPos.x||o.buffData.hasBuff(T.pzaBuffType.DIVE)||o.buffData.hasBuff(T.pzaBuffType.FLY)||o.buffData.hasBuff(T.pzaBuffType.UNABLE_SELECT)||o.buffData.hasBuff(T.pzaBuffType.INVINCIBLE)||t&&(o.xIndex<=-1||a.xIndex+t<o.xIndex)||e.push(o)}),this.canJoinDrZomBoss(a)&&e.push(this.canJoinDrZomBoss(a)),e},t.prototype.canJoinDrZomBoss=function(a){if(a.xIndex<5)return null;var t=window.pzazombieManager.drZomBoss;return null==t||null==t.baseData||t.baseData.isDead||t.baseData.buffData.hasBuff(T.pzaBuffType.UNABLE_SELECT)?null:t.baseData},t.prototype.getZombie=function(a){return null!=this.drZomBoss&&this.drZomBoss.baseData==a?this.drZomBoss:this.zombieMap.get(a)},t.prototype.getHypnoZombie=function(a){return this.hypnoZombieMap.get(a)},t.prototype.findFixRangeZombies=function(a,t){if(null==a)return null;var e=[];return this.zombieMap.forEach(function(o,n){null==o||null==n||n.isDead||null==n.logicPos||g.pzaUtil.getDistance(a,n.logicPos)<=t&&e.push(o)}),e},t.prototype.findZombiesByXY=function(a,t,e){void 0===e&&(e=1);var o=[];return this.zombieMap.forEach(function(n,i){null==n||null==i||i.isDead||null==i.logicPos||i.xIndex>=a-e&&i.xIndex<=a+e&&i.yIndex>=t-e&&i.yIndex<=t+e&&o.push(n)}),o},t.prototype.findFixNearestZombie=function(a,t,e){if(null==t)return null;var o=null,n=-1;return this.zombieDatas[a].forEach(function(a){if(a&&a.logicPos&&!(a.logicPos.x<t.x)&&!a.buffData.hasBuff(T.pzaBuffType.FLY)&&!a.buffData.hasBuff(T.pzaBuffType.UNABLE_SELECT)){var i=g.pzaUtil.getDistance(a.logicPos,t);if(!(i>e))return-1==n?(o=a,void(n=i)):void(n<=i||(o=a,n=i))}}),o},t.prototype.findFixNearestHypnoZombie=function(a,t,e){if(null==t)return null;var o=null,n=-1;return this.hypnoZombieMap.forEach(function(i,r){if(r&&r.logicPos&&r.yIndex==a&&!(r.logicPos.x>t.x)){var p=g.pzaUtil.getDistance(r.logicPos,t);if(!(p>e))return-1==n?(o=r,void(n=p)):void(n<=p||(o=r,n=p))}}),o},t.prototype.findAllZombies=function(){var a=[];return this.zombieMap.forEach(function(t,e){null==t||null==e||e.isDead||a.push(t)}),a},t.prototype.showBigWaveTip=function(a,t){this.hasShowRedTip||(this.hasShowRedTip=!0,this.nextWaveTime=u.pzaWaveConfig.redTipNextWaveTime,I.pzaEffectManager.createLargeWord(a,t))},t.prototype.zombieDeath=function(a,t,e){if(void 0===t&&(t=!0),void 0===e&&(e=null),null!=a){this.zombieMap.delete(a);var o=this.zombieDatas[a.yIndex];null!=o&&o.delete(a),a.zombieData.hypnosis||(a.hp=0),N.pzaGameState.isGameEnd||c.pzaGameManager.getCurrentGame().onZombieDeath(this,a,t,e)}},t.prototype.passPart=function(a){h.pzaLocalData.data.autoPickLeft=N.pzaGameState.autoPickLeft,h.pzaLocalData.addDirty("autoPickLeft"),c.pzaGameManager.getCurrentGame().checkAchieve(!0),N.pzaGameState.gameWin=!0;var t=c.pzaGameManager.getCurrentGame().winDrop();if(null==t)return f.pzaSoundManager.stopBgm(),void c.pzaGameManager.getCurrentGame().partWin();switch(t){case w.pzaDropType.PLANT_CARD:var e=N.pzaGameState.curChapter+"-"+N.pzaGameState.curPart,o=s.pzaGameConfig.newPlantDropMap.get(e);h.pzaLocalData.data.ownPlants.push(o),h.pzaLocalData.addDirty("ownPlants"),I.pzaEffectManager.createDropCard(w.pzaDropType.PLANT_CARD,o,a),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_4,h.pzaLocalData.data.ownPlants.length,!1);break;case w.pzaDropType.HAND_BOOK:h.pzaLocalData.data.unlockBook=!0,h.pzaLocalData.addDirty("unlockBook"),I.pzaEffectManager.createDropCard(t,null,a);break;case w.pzaDropType.SHOVEL:case w.pzaDropType.CG_PAPER:case w.pzaDropType.BACONIC:case w.pzaDropType.TACO:case w.pzaDropType.COIN_PACKAGE:case w.pzaDropType.SURVIVAL_TROPHY:case w.pzaDropType.ZOMBIE_TROPHY:case w.pzaDropType.VASE_TROPHY:I.pzaEffectManager.createDropCard(t,null,a);break;case w.pzaDropType.SPRINKLER:I.pzaEffectManager.createDropCard(t,null,a),S.default.instance().addGardenTool(S.pzaGardenToolType.waterPot,1);break;case w.pzaDropType.MINIGAME_TROPHY:I.pzaEffectManager.createDropCard(t,null,a);break;case w.pzaDropType.ZAJIAO_TROPHY:case w.pzaDropType.CREATIVE_VASE_TROPHY:case w.pzaDropType.CREATIVE_TRAD_TROPHY:I.pzaEffectManager.createDropCard(t,null,a);break;default:c.pzaGameManager.getCurrentGame().partWin()}},t.prototype.checkZombieGameFail=function(){if(N.pzaGameState.isZombieMode()){var a=0;if(!(this.zombieDatas.forEach(function(t){a+=t.size}),a>0||window.pzaplantManager.brainMap.size<=0||N.pzaGameState.sunLightCount+25*window.pzaplantManager.AllSunLight.size>=50)){var t=function(){c.pzaGameManager.getCurrentGame().partFail(),c.pzaGameManager.showGameFail()};if(!N.pzaGameState.hadRevived)return N.pzaGameState.gamePause=!0,v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GAME_PAUSE,null),h.pzaLocalData.isPopReviveView=!0,void y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.GAME_REVIVE_VIEW,function(a){var e=a&&a.getComponent(M.pzaReviveView);e&&e.init(null,t)});t()}}},t.prototype.skipPassPart=function(){var a=0;h.pzaLocalData.hasUseProp&&(a=1);var t=Date.now()-h.pzaLocalData.gameStartTimeStamp;t=Math.ceil(t/1e3),z.pzaStatisticsMgr.sendEvent("level",{name:"level",value:parseInt(N.pzaGameState.curChapter+""+N.pzaGameState.curPart)},{name:"is_Win",value:1},{name:"Use",value:a},{name:"time",value:t}),h.pzaLocalData.hasUseProp=!1,E.default.eventReport(N.pzaGameState.curChapter+"-"+N.pzaGameState.curPart+"\u6210\u529f"),h.pzaLocalData.data.autoPickLeft=N.pzaGameState.autoPickLeft,h.pzaLocalData.addDirty("autoPickLeft"),N.pzaGameState.gameWin=!0,N.pzaGameState.lossPlantCount=7,N.pzaGameState.lossCar=!0,0!=N.pzaGameState.partStar&&(N.pzaGameState.partStar=1),h.pzaLocalData.passPart(N.pzaGameState.curChapter,N.pzaGameState.curPart,N.pzaGameState.partStar),5==N.pzaGameState.curChapter&&10==N.pzaGameState.curPart&&p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_1);var e=s.pzaGameConfig.getPartDrop(N.pzaGameState.curChapter,N.pzaGameState.curPart);switch(3==N.pzaGameState.curChapter&&4==N.pzaGameState.curPart?(h.pzaLocalData.data.curGuideType=A.pzaGuideType.GUIDE_SHOP_3_4,h.pzaLocalData.data.unlockShop=!0,h.pzaLocalData.addDirty("curGuideType","unlockShop")):4==N.pzaGameState.curChapter&&4==N.pzaGameState.curPart?(h.pzaLocalData.data.curGuideType=A.pzaGuideType.GUIDE_SHOP_4_4,h.pzaLocalData.addDirty("curGuideType")):5==N.pzaGameState.curChapter&&1==N.pzaGameState.curPart?(h.pzaLocalData.data.curGuideType=A.pzaGuideType.GUIDE_SHOP_5_1,h.pzaLocalData.addDirty("curGuideType")):5==N.pzaGameState.curChapter&&4==N.pzaGameState.curPart&&(h.pzaLocalData.data.curGuideType=A.pzaGuideType.GUIDE_GARDEN_5_4,h.pzaLocalData.data.unlockGarden=!0,h.pzaLocalData.addDirty("curGuideType","unlockGarden")),e){case w.pzaDropType.PLANT_CARD:var o=N.pzaGameState.curChapter+"-"+N.pzaGameState.curPart,n=s.pzaGameConfig.newPlantDropMap.get(o);h.pzaLocalData.data.ownPlants.push(n),h.pzaLocalData.addDirty("ownPlants"),p.default.instance().checkAddAchieve(r.pzaAchieveType.ACH_4,h.pzaLocalData.data.ownPlants.length,!1),y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(D.pzaNewPlantView)).showView(e,n)});break;case w.pzaDropType.HAND_BOOK:h.pzaLocalData.data.unlockBook=!0,h.pzaLocalData.addDirty("unlockBook"),y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(D.pzaNewPlantView)).showView(e,null)});break;case w.pzaDropType.CG_PAPER:y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.CG_PAPER_VIEW,null);break;case w.pzaDropType.COIN_PACKAGE:N.pzaGameState.curChapter<5||(s.pzaGameConfig.getPartStar(N.pzaGameState.curChapter,N.pzaGameState.curPart)<=0?(v.pzaWorldEventManager.triggerEvent(v.pzaWorldEventType.GAME_OVER,null),c.pzaGameManager.removeBattleUI(),c.pzaGameManager.getCurrentGame().showPassUiNoStar(),g.pzaUtil.changeGameSpeed(1)):(y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.GAME_WIN_VIEW,null),g.pzaUtil.changeGameSpeed(1)));break;case w.pzaDropType.SHOVEL:case w.pzaDropType.BACONIC:case w.pzaDropType.TACO:case w.pzaDropType.SURVIVAL_TROPHY:y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(D.pzaNewPlantView)).showView(e,null)});break;case w.pzaDropType.SPRINKLER:S.default.instance().addGardenTool(S.pzaGardenToolType.waterPot,1),y.pzaUIManager.baseShowPopUI(C.pzaResourceUrl.NEW_PLANT_VIEW,function(a){(a&&a.getComponent(D.pzaNewPlantView)).showView(e,null)});break;default:c.pzaGameManager.getCurrentGame().partWin()}},t.prototype.hypnoZombieDeath=function(a){this.hypnoZombieMap.delete(a),a.hp=0},t.prototype.zombieHypnosis=function(a){if(null!=a&&null!=a.zombieData){a.zombieData.direction=1,a.zombieData.hypnosis=!0;var t=this.zombieMap.get(a);null!=t&&(this.hypnoZombieMap.set(a,t),l.pzaCollisionManager.getInstance.zombieToPlant(a.yIndex,t.body)),this.zombieDeath(a)}},t.prototype.zombieChangeMapRow=function(a,t,e){null!=t&&null!=e&&(this.zombieDatas[t.yIndex].delete(t),this.zombieDatas[e].add(t),l.pzaCollisionManager.getInstance.zombieChangeRow(a,t.yIndex,e),t.yIndex=e)},t.prototype.getCurWaveLeftHp=function(){var a=0,t=0;return this.curWaveZombieDatas.forEach(function(e){null!=e&&(t+=e.maxHp,e.zombieData.hypnosis||(a+=e.hp))}),0==t?0:a/t},t.prototype.createZombieData=function(a,t){var e=s.pzaGameConfig.getZombieConfig(a),o=new _.pzaBaseData(null,a);o.hp=o.maxHp=e.hp,o.atk=e.atk,o.zombieData.equipHp=o.zombieData.maxEquipHp=e.equipHp,o.zombieData.direction=-1,o.zombieData.initMSpd=o.zombieData.moveSpd=N.pzaGameState.map.getBlockWidth()/e.speed,o.zombieData.equipType=e.equipType,o.zombieData.toolType=e.toolType,e instanceof b.pzaZJZombieConf&&(o.zombieData.typeId=e.typeId,o.zombieData.showWeight=e.showWeight,o.zombieData.equipType2=e.equipType2,o.zombieData.equipHp2=o.zombieData.maxEquipHp2=e.equipHp2,o.zombieData.atkArr=e.atkArr,o.zombieData.atkInterval2=e.atkInterval2),N.pzaGameState.gameMode!=N.pzaGameMode.SMALL_ZOMBIE&&N.pzaGameState.gameMode!=N.pzaGameMode.MINIGAME_SMALL||(o.hp=o.maxHp=e.hp*s.pzaGameConfig.miniZombieHp,o.zombieData.equipHp=o.zombieData.maxEquipHp=e.equipHp*s.pzaGameConfig.miniZombieHp),o.yIndex=t;var n=N.pzaGameState.map.getMapColumn(),i=.1*N.pzaGameState.map.getYInterval(t),r=N.pzaGameState.map.getBlockLogicPos(n-1,t,0,i);return r.x=670,o.logicPos=r,this.zombieDatas[o.yIndex].add(o),o},t.prototype.createFixBlockZombieData=function(a,t,e,o){void 0===o&&(o=!1);var n=s.pzaGameConfig.getZombieConfig(a);N.pzaGameState.isZombieMode()&&a==B.pzaZombieEnum.IMP&&(n=s.pzaGameConfig.getZombieConfig(B.pzaZombieEnum.IMP_MINI));var i=new _.pzaBaseData(null,a);i.hp=i.maxHp=n.hp,i.atk=n.atk,i.zombieData.equipHp=i.zombieData.maxEquipHp=n.equipHp,i.zombieData.direction=-1,i.zombieData.initMSpd=i.zombieData.moveSpd=N.pzaGameState.map.getBlockWidth()/n.speed,i.zombieData.equipType=n.equipType,i.zombieData.toolType=n.toolType,n instanceof b.pzaZJZombieConf&&(i.zombieData.typeId=n.typeId,i.zombieData.showWeight=n.showWeight,i.zombieData.equipType2=n.equipType2,i.zombieData.equipHp2=i.zombieData.maxEquipHp2=n.equipHp2,i.zombieData.atkArr=n.atkArr,i.zombieData.atkInterval2=n.atkInterval2),N.pzaGameState.gameMode!=N.pzaGameMode.SMALL_ZOMBIE&&N.pzaGameState.gameMode!=N.pzaGameMode.MINIGAME_SMALL||(i.hp=i.maxHp=n.hp*s.pzaGameConfig.miniZombieHp,i.zombieData.equipHp=i.zombieData.maxEquipHp=n.equipHp),i.xIndex=t,i.yIndex=e;var r=N.pzaGameState.map.getXInterval(t)/2,p=.1*N.pzaGameState.map.getYInterval(e);a==B.pzaZombieEnum.BUNGEE_ZOMBIE&&(p=N.pzaGameState.map.getYInterval(e)/3+40);var l=N.pzaGameState.map.getBlockLogicPos(t,e,r,p);if(i.logicPos=l,o)i.zombieData.hypnosis=o;else{var c=this.zombieDatas[i.yIndex];c&&c.add(i)}return i},t.prototype.clearAllZombie=function(){this.zombieDatas.forEach(function(a){a&&a.clear()}),this.zombieMap.forEach(function(a,t){t&&(t.isDead=!0),a&&a.close()}),this.zombieMap.clear(),this.hypnoZombieMap.forEach(function(a,t){t&&(t.isDead=!0),a&&a.close()}),this.hypnoZombieMap.clear()},t.prototype.getZombieMapData=function(){var a=0;return this.zombieMap.forEach(function(t,e){18==e.zombieData.zombieType&&a++}),a},t.prototype.getJackHasToolAmt=function(){var a=0;return this.zombieMap.forEach(function(t,e){18==e.zombieData.zombieType&&2==e.zombieData.toolType&&a++}),a},i([Z(sp.Skeleton)],t.prototype,"atlasSpine",void 0),i([k],t)}(cc.Component);e.pzaZombieManager=U,cc._RF.pop()},{"../Achieve/pzaAchieve":"pzaAchieve","../Achieve/pzaAchieveMgr":"pzaAchieveMgr","../Common/pzaCollisionManager":"pzaCollisionManager","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaGameManager":"pzaGameManager","../Common/pzaGamePartConfig":"pzaGamePartConfig","../Common/pzaGroupEnum":"pzaGroupEnum","../Common/pzaLocalData":"pzaLocalData","../Common/pzaNodeManager":"pzaNodeManager","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaStatisticsMgr":"pzaStatisticsMgr","../Common/pzaUIManager":"pzaUIManager","../Common/pzaUtil":"pzaUtil","../Common/pzaWorldEventManager":"pzaWorldEventManager","../Common/pzaZJZombieConf":"pzaZJZombieConf","../Garden/pzaGardenMgr":"pzaGardenMgr","../Load/pzaBundleObjectPool":"pzaBundleObjectPool","../Load/pzaPreLoadManager":"pzaPreLoadManager","../View/Battle/pzaNewPlantView":"pzaNewPlantView","../View/Battle/pzaReviveView":"pzaReviveView","../utils/pzakc":"pzakc","./Data/pzaBaseData":"pzaBaseData","./Data/pzaBuffData":"pzaBuffData","./Data/pzaDropType":"pzaDropType","./Data/pzaGuideType":"pzaGuideType","./Data/pzaZombieEnum":"pzaZombieEnum","./Zombie/pzaBaseZombie":"pzaBaseZombie","./Zombie/pzaDrZomBoss":"pzaDrZomBoss","./pzaEffectManager":"pzaEffectManager","./pzaGameState":"pzaGameState","./pzaSpineTool":"pzaSpineTool"}],pzaZombieNut:[function(a,t,e){"use strict";cc._RF.push(t,"58ab3m2fwBPJYF5Ex3ehGOV","pzaZombieNut");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieNut=void 0;var r=a("../../Common/pzaUtil"),p=a("../Data/pzaPlantEnum"),l=a("../Data/pzaZombieEnum"),s=a("./pzaBasePlant"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.spawnMaxTime=30,t.spawnTime=t.spawnMaxTime,t.blinkTime=8,t}return n(t,a),t.prototype.bindData=function(t){var e=this;a.prototype.bindData.call(this,t),t.plantData.cate=p.pzaPlantCate.Nut,this.spawnTime=this.spawnMaxTime,this.blinkTime=r.pzaUtil.getRandomFloatNum(8,10);var o=function(){e.blinkTime>0?e.animation.playAnimation("idle1",!1,o):(e.blinkTime=r.pzaUtil.getRandomFloatNum(8,10),e.animation.playAnimation("idle1_eye",!1,o))};this.animation.playAnimation("idle1",!1,o),o()},t.prototype.logicUpdate=function(t){a.prototype.logicUpdate.call(this,t),this.blinkTime-=t,this.spawnTime-=t,this.spawnTime<=0&&(this.spawnTime=this.spawnMaxTime,this.spawnZombie(l.pzaZombieEnum.SCREEN_DOOR_ZOMBIE4))},t.prototype.death=function(t,e){a.prototype.death.call(this,t,e),this.spawnZombie(l.pzaZombieEnum.GARGANTUAR2,1800)},t.prototype.flaserDeath=function(){a.prototype.flaserDeath.call(this),this.spawnZombie(l.pzaZombieEnum.GARGANTUAR2,1800)},t.prototype.spawnZombie=function(a,t){void 0===t&&(t=0);var e=window.pzazombieManager.createFixBlockZombieData(a,this.baseData.xIndex,this.baseData.yIndex,!0);e.zombieData.direction=1,t&&(e.atk=t),window.pzazombieManager.createHypnZombie(e)},t.prototype.plantHurt=function(){a.prototype.plantHurt.call(this),this.animation.setAnimationSkin("body_2")},t.prototype.plantIntact=function(){a.prototype.plantIntact.call(this),this.animation.setAnimationSkin("body_1")},i([u],t)}(s.pzaBasePlant));e.pzaZombieNut=d,cc._RF.pop()},{"../../Common/pzaUtil":"pzaUtil","../Data/pzaPlantEnum":"pzaPlantEnum","../Data/pzaZombieEnum":"pzaZombieEnum","./pzaBasePlant":"pzaBasePlant"}],pzaZombieSelectView:[function(a,t,e){"use strict";cc._RF.push(t,"7618fDpLWdEeIIeX3WkhaY6","pzaZombieSelectView");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieSelectView=void 0;var r=a("../../Battle/pzaGameState"),p=a("../../Common/pzaGameConfig"),l=a("./pzaZombieCard"),s=cc._decorator,c=s.ccclass,u=s.property,d=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardList=[],t}return n(t,a),t.prototype.init=function(a){for(var t=0;t<this.cardList.length;t++){var e=this.cardList[t],o=a[t];if(null==o)e.bindData(null,null,null);else{var n=p.pzaGameConfig.getZombieConfig(o).price;e.bindData(o,n,this.clickCardCall.bind(this))}}},t.prototype.clickCardCall=function(a){r.pzaGameState.selectZombie==a&&(r.pzaGameState.selectCard=null,r.pzaGameState.selectZombie=null,a=null),this.cardList.forEach(function(t){t.curZombieType==a?t.select():t.diselect()})},i([u({displayName:"\u5361\u7247\u5217\u8868",type:[l.pzaZombieCard]})],t.prototype,"cardList",void 0),i([c],t)}(cc.Component);e.pzaZombieSelectView=d,cc._RF.pop()},{"../../Battle/pzaGameState":"pzaGameState","../../Common/pzaGameConfig":"pzaGameConfig","./pzaZombieCard":"pzaZombieCard"}],pzaZombieSlot:[function(a,t,e){"use strict";cc._RF.push(t,"f1301n9mitKk6/Wjk7m2ZLL","pzaZombieSlot"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieSlot=e.pzaZombieSlotAtt=e.pzaZombieSlotType=void 0;var o=a("../pzaSpineTool");(function(a){a.butter="10pr",a.butter2="10pr2",a.hat="1hat",a.hat_green="2hat",a.hat_iron="3hat",a.door="4door",a.head_nut="5body",a.head_nut_hole="11body",a.helmet_red="6hat",a.helmet_black="7hat",a.helmet_fei="8hat",a.gar_hand="9weapon",a.hat_digger="19hat",a.hat_digger_in="19hat1",a.hat_digger2="12hat",a.hat_digger2_in="12hat1",a.gao="20pr",a.gao2="20pr1",a.flag="18pr",a.hat_night="15hat",a.hat_night_1="15hat01",a.hat_night_2="15hata02",a.ladder="14pr",a.newspaper="16pr",a.pogo="13pra",a.pogo2="13prb",a.pogo3="13prc",a.ice_car="17pra",a.ice_car_b="17prb",a.ice_car_z1="17prz1",a.ice_car_z2="17prz2",a.ice_car_z3="17prz3",a.ice_car_z4="17prz4",a.ice_car_z5="17prz5",a.ice_car_z6="17prz6",a.ice_car_z7="17prz7"})(e.pzaZombieSlotType||(e.pzaZombieSlotType={}));e.pzaZombieSlotAtt=function(a,t,e,o,n){void 0===e&&(e=0),void 0===o&&(o=0),void 0===n&&(n=0),this.attName=null,this.x=0,this.y=0,this.rotation=0,this.state=0,this.attName=t,this.x=e,this.y=o,this.state=a,this.rotation=n};var n=function(){function a(a,t){this.zombieSpine=null,this.slotName=null,this.state=0,this.stateMap=new Map,this.zombieSpine=a,this.slotName=t}return a.prototype.addState=function(a){return this.stateMap.set(a.state,a),this},a.prototype.updateState=function(a,t){if(void 0===t&&(t=!1),t||this.state!==a){if(a<=0)return o.pzaSpineTool.instance().setSlotAtt(this.zombieSpine,this.slotName,null,0,0),void(this.state=a);var e=this.stateMap.get(a);e?(o.pzaSpineTool.instance().setSlotAtt(this.zombieSpine,this.slotName,e.attName,e.x,e.y,e.rotation),this.state=e.state):console.log("\u65e0\u6b64equipState",a,this.slotName)}},a}();e.pzaZombieSlot=n,cc._RF.pop()},{"../pzaSpineTool":"pzaSpineTool"}],pzaZombieState:[function(a,t,e){"use strict";cc._RF.push(t,"1254fuzgXhNfbmLza1fO2Do","pzaZombieState"),Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombieState=void 0,function(a){a[a.STAY=1]="STAY",a[a.MOVE=2]="MOVE",a[a.EAT_ATK=3]="EAT_ATK",a[a.DEAD=4]="DEAD",a[a.SPECIAL=5]="SPECIAL"}(e.pzaZombieState||(e.pzaZombieState={})),cc._RF.pop()},{}],pzaZombiebookCard:[function(a,t,e){"use strict";cc._RF.push(t,"9484177j0tLUo9Ri0pFBdw8","pzaZombiebookCard");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZombiebookCard=void 0;var r=a("../Battle/Data/pzaZombieEnum"),p=a("../Common/pzaGameCommonPool"),l=a("../Common/pzaGameConfig"),s=a("../Common/pzaLocalData"),c=a("../Common/pzaSoundManager"),u=a("../Common/pzaSpriteFrameManager"),d=cc._decorator,h=d.ccclass,m=d.property,f=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.cardIcon=null,t.cardNode=null,t.voidNode=null,t.zombieType=null,t.clickCall=null,t.unlock=!1,t}return n(t,a),t.prototype.bindData=function(a,t){this.zombieType=a,this.clickCall=t;var e=l.pzaGameConfig.getZombieConfig(a);if(null==e||s.pzaLocalData.data.curChapter<e.unlockChapter||s.pzaLocalData.data.curChapter==e.unlockChapter&&s.pzaLocalData.data.curPart<e.unlockPart?this.unlock=!1:this.unlock=!0,!this.unlock)return this.voidNode.active=!0,void(this.cardNode.active=!1);this.voidNode.active=!1,this.cardNode.active=!0,u.pzaSpriteFrameManager.loadZombieCard(a,this.cardIcon),a==r.pzaZombieEnum.POLEVAULTING_ZOMBIE||a==r.pzaZombieEnum.ZOMBONI?(this.cardIcon.node.scale=.8,this.cardIcon.node.x=-30,this.cardIcon.node.y=-30):a==r.pzaZombieEnum.DR_ZOMBOSS||a==r.pzaZombieEnum.IMP?(this.cardIcon.node.scale=.9,this.cardIcon.node.x=4,this.cardIcon.node.y=-4):a==r.pzaZombieEnum.BUNGEE_ZOMBIE?(this.cardIcon.node.scale=.8,this.cardIcon.node.x=0,this.cardIcon.node.y=-4):(this.cardIcon.node.scale=.8,this.cardIcon.node.x=10,this.cardIcon.node.y=-30),a!=r.pzaZombieEnum.YETI_ZOMBIE||s.pzaLocalData.hasUnlockZombie(a)?this.cardIcon.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"):this.cardIcon.node.color=cc.Color.fromHEX(cc.color(),"#000000")},t.prototype.zjBindData=function(a,t){this.zombieType=a,this.clickCall=t,this.unlock=!0,this.cardIcon.node.color=cc.Color.fromHEX(cc.color(),"#FFFFFF"),this.voidNode.active=!1,this.cardNode.active=!0,this.cardIcon.node.scale=.8,this.cardIcon.node.x=10,this.cardIcon.node.y=-30,a!=r.pzaZombieEnum.POLEVAULTING_ZOMBIE2&&a!=r.pzaZombieEnum.POLEVAULTING_ZOMBIE&&a!=r.pzaZombieEnum.ZOMBONI&&a!=r.pzaZombieEnum.BedCar||(this.cardIcon.node.scale=.8,this.cardIcon.node.x=-30,this.cardIcon.node.y=-30),u.pzaSpriteFrameManager.loadZombieCard(a,this.cardIcon)},t.prototype.clickCard=function(){this.unlock&&(c.pzaSoundManager.playSFX(),this.clickCall&&this.clickCall(this.zombieType))},t.prototype.close=function(){p.pzaGameCommonPool.returnInstant(this.node)},i([m({displayName:"\u5361\u7247\u56fe",type:cc.Sprite})],t.prototype,"cardIcon",void 0),i([m({displayName:"\u5361\u7247\u8282\u70b9",type:cc.Node})],t.prototype,"cardNode",void 0),i([m({displayName:"\u7a7a\u69fd",type:cc.Node})],t.prototype,"voidNode",void 0),i([h],t)}(cc.Component);e.pzaZombiebookCard=f,cc._RF.pop()},{"../Battle/Data/pzaZombieEnum":"pzaZombieEnum","../Common/pzaGameCommonPool":"pzaGameCommonPool","../Common/pzaGameConfig":"pzaGameConfig","../Common/pzaLocalData":"pzaLocalData","../Common/pzaSoundManager":"pzaSoundManager","../Common/pzaSpriteFrameManager":"pzaSpriteFrameManager"}],pzaZomboni2:[function(a,t,e){"use strict";cc._RF.push(t,"33a9ev6e5JP5oviGosr9GRa","pzaZomboni2");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZomboni2=void 0;var r=a("../../Common/pzaGameConfig"),p=a("../pzaGameState"),l=a("./pzaZomboni"),s=a("./pzaZombieSlot"),c=cc._decorator,u=c.ccclass,d=(c.property,function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.equip1Slot=s.pzaZombieSlotType.newspaper,t.isLockSpeed=!1,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[s.pzaZombieSlotType.ice_car,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.ice_car).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.ice_car+"1",-5.96,36.56,0)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.ice_car+"2",-5.63,36.56,0)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.ice_car+"3",-.83,36.56,0))],[s.pzaZombieSlotType.ice_car_b,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.ice_car_b).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.ice_car_b+"1",.48,64.18,0)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.ice_car_b+"2",2.37,64.18,0)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.ice_car_b+"3",3.45,64.18,0))],[s.pzaZombieSlotType.newspaper,new s.pzaZombieSlot(this.animation.spineAnimation,s.pzaZombieSlotType.newspaper).addState(new s.pzaZombieSlotAtt(1,s.pzaZombieSlotType.newspaper+"1",33.78,112.65,-6.18)).addState(new s.pzaZombieSlotAtt(2,s.pzaZombieSlotType.newspaper+"2",33.78,112.65,-6.18)).addState(new s.pzaZombieSlotAtt(3,s.pzaZombieSlotType.newspaper+"3",31.85,94.8,-6.18))]])},t.prototype.logicUpdate=function(a){null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.isDead||(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow?this.pushBackTime>0?this.pushBackMove(a):(!this.isLockSpeed&&-1!=this.baseData.xIndex&&this.baseData.xIndex<8&&(this.baseData.zombieData.moveSpd-=this.baseData.zombieData.initMSpd/100,this.baseData.zombieData.moveSpd=Math.max(this.baseData.zombieData.moveSpd,3*this.baseData.zombieData.initMSpd/8)),this.updateMove(a),this.rollingPlant()):this.changeRowMove(a))))},t.prototype.equipDeath=function(t){if(a.prototype.equipDeath.call(this,t),null!=this.baseData&&null!=this.baseData.zombieData){var e=r.pzaGameConfig.getZombieSpecialSpeed(this.baseData.zombieData.zombieType);this.isLockSpeed=!0,this.baseData.zombieData.moveSpd=p.pzaGameState.map.getBlockWidth()/e,this.changeSkin("head2"),this.updateCarState(1)}},i([u],t)}(l.pzaZomboni));e.pzaZomboni2=d,cc._RF.pop()},{"../../Common/pzaGameConfig":"pzaGameConfig","../pzaGameState":"pzaGameState","./pzaZombieSlot":"pzaZombieSlot","./pzaZomboni":"pzaZomboni"}],pzaZomboni3:[function(a,t,e){"use strict";cc._RF.push(t,"6a0a9R2Y2dPN7v958mzIW+j","pzaZomboni3");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZomboni3=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaZombieEnum"),l=a("../pzaGameState"),s=a("./pzaZomboni"),c=a("./pzaZombieSlot"),u=a("../Plant/pzaAttackType"),d=cc._decorator,h=d.ccclass,m=(d.property,function(a){function t(){return null!==a&&a.apply(this,arguments)||this}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[c.pzaZombieSlotType.ice_car,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.ice_car).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.ice_car+"1",-9.95,37.51,0)).addState(new c.pzaZombieSlotAtt(2,c.pzaZombieSlotType.ice_car+"2",-9.95,37.51,0)).addState(new c.pzaZombieSlotAtt(3,c.pzaZombieSlotType.ice_car+"3",-10.61,34.15,0))],[c.pzaZombieSlotType.ice_car_b,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.ice_car_b).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.ice_car_b+"1",2.56,63.87,0)).addState(new c.pzaZombieSlotAtt(2,c.pzaZombieSlotType.ice_car_b+"2",3.75,63.87,0)).addState(new c.pzaZombieSlotAtt(3,c.pzaZombieSlotType.ice_car_b+"3",4.09,63.87,0))],[c.pzaZombieSlotType.hat_iron,new c.pzaZombieSlot(this.animation.spineAnimation,c.pzaZombieSlotType.hat_iron).addState(new c.pzaZombieSlotAtt(1,c.pzaZombieSlotType.hat_iron+"1",1.94,40.88,0)).addState(new c.pzaZombieSlotAtt(2,c.pzaZombieSlotType.hat_iron+"2",1.94,40.88,0)).addState(new c.pzaZombieSlotAtt(3,c.pzaZombieSlotType.hat_iron+"3",1.94,40.88,0))]])},t.prototype.updateCarState=function(t){a.prototype.updateCarState.call(this,t),this.slotMap.get(c.pzaZombieSlotType.hat_iron).updateState(t)},t.prototype.speedDown=function(){},t.prototype.handBookPreview=function(){this.animation.playAnimation("move",!0)},t.prototype.death=function(a,t){var e=this;if(void 0===t&&(t=null),this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData),!a)return this.close(),void(t!=u.pzaAttackType.DEATH&&this.spawnZombie(p.pzaZombieEnum.GARGANTUAR2,1800));this.playDeathAnimation(function(){t!=u.pzaAttackType.DEATH&&e.spawnZombie(p.pzaZombieEnum.GARGANTUAR2,1800),e.close()}),r.pzaSoundManager.playAudio("explosion")},t.prototype.spawnZombie=function(a,t){void 0===t&&(t=0);var e=window.pzazombieManager.createFixBlockZombieData(a,this.baseData.xIndex+1,this.baseData.yIndex,!1);if(t&&(e.atk=t),this.baseData.xIndex<0||this.baseData.xIndex>=8){var o=.1*l.pzaGameState.map.getYInterval(this.baseData.yIndex),n=l.pzaGameState.map.getBlockLogicPos(0,this.baseData.yIndex,0,o);n.x=600,e.logicPos=n}window.pzazombieManager.createZombie(e,!1)},i([h],t)}(s.pzaZomboni));e.pzaZomboni3=m,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaGameState":"pzaGameState","./pzaZombieSlot":"pzaZombieSlot","./pzaZomboni":"pzaZomboni"}],pzaZomboni:[function(a,t,e){"use strict";cc._RF.push(t,"48dea0mPk5KtqXNcJhrI6kz","pzaZomboni");var o,n=this&&this.__extends||(o=function(a,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,t){a.__proto__=t}||function(a,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(a[e]=t[e])})(a,t)},function(a,t){function e(){this.constructor=a}o(a,t),a.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),i=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r};Object.defineProperty(e,"__esModule",{value:!0}),e.pzaZomboni=void 0;var r=a("../../Common/pzaSoundManager"),p=a("../Data/pzaBuffData"),l=a("../Data/pzaZombieEnum"),s=a("../Plant/pzaAttackType"),c=a("../pzaEffectManager"),u=a("../pzaGameState"),d=a("./pzaBaseZombie"),h=a("./pzaZombieState"),m=a("./pzaZombieSlot"),f=a("../../Common/pzaSpineController"),z=a("../pzaSpineTool"),y=cc._decorator,g=y.ccclass,v=y.property,b=function(a){function t(){var t=null!==a&&a.apply(this,arguments)||this;return t.dieSpine=null,t.butterSlot=null,t.iceMakeNode=null,t}return n(t,a),t.prototype.initEquips=function(){this.slotMap?this.slotMap.forEach(function(a){a.updateState(0,!0)}):this.slotMap=new Map([[m.pzaZombieSlotType.ice_car,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.ice_car).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.ice_car+"1",-9.95,37.51,0)).addState(new m.pzaZombieSlotAtt(2,m.pzaZombieSlotType.ice_car+"2",-9.41,37.51,0)).addState(new m.pzaZombieSlotAtt(3,m.pzaZombieSlotType.ice_car+"3",-4.52,37.51,0))],[m.pzaZombieSlotType.ice_car_b,new m.pzaZombieSlot(this.animation.spineAnimation,m.pzaZombieSlotType.ice_car_b).addState(new m.pzaZombieSlotAtt(1,m.pzaZombieSlotType.ice_car_b+"1",.19,63.87,0)).addState(new m.pzaZombieSlotAtt(2,m.pzaZombieSlotType.ice_car_b+"2",2.04,63.87,0)).addState(new m.pzaZombieSlotAtt(3,m.pzaZombieSlotType.ice_car_b+"3",2.6,63.87,0))]])},t.prototype.updateCarState=function(a){this.slotMap||this.initEquips(),this.slotMap.get(m.pzaZombieSlotType.ice_car).updateState(a),this.slotMap.get(m.pzaZombieSlotType.ice_car_b).updateState(a),z.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,"17prz1","17prz1",-17.05,25.48),z.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,"17prz2","17prz2",10.65,8.37),z.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,"17prz3","17prz3",13.02,-2.2),z.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,"17prz4","17prz4",4.68,.96),z.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,"17prz5","17prz5",-.96,-6.72),z.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,"17prz6","17prz6",.52,3.26),z.pzaSpineTool.instance().setSlotAtt(this.animation.spineAnimation,"17prz7","17prz7",-.8,3.88)},t.prototype.uiShow=function(){a.prototype.uiShow.call(this),this.updateCarState(1),this.animation.node.x=40},t.prototype.preview=function(t,e,o){a.prototype.preview.call(this,t,e,o),this.animation.node.x=-50},t.prototype.bindData=function(t){if(a.prototype.bindData.call(this,t),this.animation.node.active=!0,this.dieSpine.node.active=!1,this.animation.node.x=40,this.baseData.zombieData.cate=l.pzaZombieCate.IceCar,null!=t.logicPos){var e=t.logicPos.x+this.iceMakeNode.x,o=t.logicPos.y+this.iceMakeNode.y;c.pzaEffectManager.createIceGround(t,e,o),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_ICE,-1)),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_SPATTER,-1)),t.buffData.addBuff(new p.pzaBuffInfo(p.pzaBuffType.IMM_IMMOBILIZE,-1))}},t.prototype.speedDown=function(){-1!=this.baseData.xIndex&&this.baseData.xIndex<8&&(this.baseData.zombieData.moveSpd-=this.baseData.zombieData.initMSpd/100,this.baseData.zombieData.moveSpd=Math.max(this.baseData.zombieData.moveSpd,3*this.baseData.zombieData.initMSpd/8))},t.prototype.logicUpdate=function(a){null!=this.baseData&&null!=this.baseData.zombieData&&(this.baseData.isDead||(!this.hypnosisState&&this.baseData.zombieData.hypnosis&&this.beHypnosis(),this.updateRoleBuff(a),this.refreshFrostState(!1),this.animation.flashUpdate(a),this.baseData.isBeControlled()||(this.lastBePasueControled&&(this.lastBePasueControled=!1,this.resumeSelf()),-1==this.changeTargetRow?this.pushBackTime>0?this.pushBackMove(a):(this.speedDown(),this.updateMove(a),this.rollingPlant()):this.changeRowMove(a))))},t.prototype.changeRowMove=function(a){this.updateMove(a),this.baseData.logicPos.y+=150*a*(this.baseData.yIndex<this.changeTargetRow?1:-1);var t=.1*u.pzaGameState.map.getYInterval(this.changeTargetRow),e=u.pzaGameState.map.getBlockLogicPos(this.baseData.xIndex,this.changeTargetRow,0,t);if(this.baseData.yIndex<this.changeTargetRow&&e.y<=this.baseData.logicPos.y||this.baseData.yIndex>this.changeTargetRow&&e.y>=this.baseData.logicPos.y){this.baseData.logicPos.y=e.y,this.body.curTarget=null,window.pzazombieManager.zombieChangeMapRow(this.body,this.baseData,this.changeTargetRow),this.changeTargetRow=-1;var o=this.baseData.logicPos.x+this.iceMakeNode.x,n=this.baseData.logicPos.y+this.iceMakeNode.y;c.pzaEffectManager.createIceGround(this.baseData,o,n,!0)}},t.prototype.rollingPlant=function(){if(null!=this.baseData&&!this.baseData.isDead&&null!=this.baseData.logicPos){var a,t=this.findTarget();a=t?""+t.xIndex+t.yIndex:""+this.baseData.xIndex+this.baseData.yIndex;var e=window.pzaplantManager.plantDataMap.get(a);if(null!=e){var o=window.pzaplantManager.getPlantByData(e);o&&o.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var n=window.pzaplantManager.plantEnvDataMap.get(a);if(null!=n){var i=window.pzaplantManager.getPlantByData(n);i&&i.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var r=window.pzaplantManager.pumpkinDataMap.get(a);if(null!=r){var p=window.pzaplantManager.getPlantByData(r);p&&p.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}var l=window.pzaplantManager.notTargetMap.get(a);if(null!=l){var c=window.pzaplantManager.getPlantByData(l);c&&c.hurt(this.baseData.atk,this.baseData,s.pzaAttackType.ROLLING)}}},t.prototype.hurt=function(t,e,o){var n=this;if(void 0===o&&(o=s.pzaAttackType.FLOOR_ATK),this.baseData&&!this.baseData.isDead){if(o==s.pzaAttackType.BANG)return this.baseData.zombieDie(),this.death(!0),void r.pzaSoundManager.playAudio("zomboniDeath");if(o!=s.pzaAttackType.SPIKE){if(o==s.pzaAttackType.NORMAL_BOOM)return this.baseData.zombieDie(),void this.death(!0);a.prototype.hurt.call(this,t,e,o)}else{if(this.baseData.zombieDie(),r.pzaSoundManager.playAudio("ball_fall"),this.animation.playAnimation("jump",!1,function(){n.death(!0)}),null!=e){var i=window.pzaplantManager.getPlantByData(e);i&&i.hurt(50,this.baseData,s.pzaAttackType.BANG)}r.pzaSoundManager.playAudio("zomboniDeath")}}},t.prototype.death=function(a){var t=this;this.baseData.zombieData.hypnosis?window.pzazombieManager.hypnoZombieDeath(this.baseData):window.pzazombieManager.zombieDeath(this.baseData),a?(this.playDeathAnimation(function(){t.close()}),r.pzaSoundManager.playAudio("explosion")):this.close()},t.prototype.playDeathAnimation=function(a){this.zombieState=h.pzaZombieState.DEAD,this.zombieHurtState=l.pzaHurtStateEnum.DEAD,this.animation.closeFlash(),this.refreshFrostState(!1),this.animation.node.active=!1,this.dieSpine.node.active=!0,z.pzaSpineTool.instance().setSlotAtt(this.dieSpine.spineAnimation,"17pra","17pra3",0,0,-7.51),this.dieSpine.playAnimation("blow",!1,a)},t.prototype.zombieDying=function(){this.zombieHurtState=l.pzaHurtStateEnum.DYING,this.updateCarState(3)},t.prototype.zombieHurt=function(){this.zombieHurtState=l.pzaHurtStateEnum.HURT,this.updateCarState(2)},t.prototype.zombieIntact=function(){this.zombieHurtState=l.pzaHurtStateEnum.INTACT,this.updateCarState(1)},t.prototype.zombieScream=function(){r.pzaSoundManager.playAudio("Zomboni_Enter")},i([v(f.pzaSpineController)],t.prototype,"dieSpine",void 0),i([v({displayName:"\u5236\u51b0\u8282\u70b9",type:cc.Node})],t.prototype,"iceMakeNode",void 0),i([g],t)}(d.pzaBaseZombie);e.pzaZomboni=b,cc._RF.pop()},{"../../Common/pzaSoundManager":"pzaSoundManager","../../Common/pzaSpineController":"pzaSpineController","../Data/pzaBuffData":"pzaBuffData","../Data/pzaZombieEnum":"pzaZombieEnum","../Plant/pzaAttackType":"pzaAttackType","../pzaEffectManager":"pzaEffectManager","../pzaGameState":"pzaGameState","../pzaSpineTool":"pzaSpineTool","./pzaBaseZombie":"pzaBaseZombie","./pzaZombieSlot":"pzaZombieSlot","./pzaZombieState":"pzaZombieState"}],pzakc:[function(a,t,e){"use strict";cc._RF.push(t,"5665dxzSypCQ67E4BI2w4Lq","pzakc");var o=this&&this.__decorate||function(a,t,e,o){var n,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,e):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(a,t,e,o);else for(var p=a.length-1;p>=0;p--)(n=a[p])&&(r=(i<3?n(r):i>3?n(t,e,r):n(t,e))||r);return i>3&&r&&Object.defineProperty(t,e,r),r},n=this&&this.__read||function(a,t){var e="function"==typeof Symbol&&a[Symbol.iterator];if(!e)return a;var o,n,i=e.call(a),r=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)r.push(o.value)}catch(p){n={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(n)throw n.error}}return r},i=this&&this.__spread||function(){for(var a=[],t=0;t<arguments.length;t++)a=a.concat(n(arguments[t]));return a};Object.defineProperty(e,"__esModule",{value:!0});var r=a("../Common/pzaLocalData"),p=a("./pzaChannel"),l=cc._decorator,s=l.ccclass,c=(l.property,function(){function a(){}var t;return t=a,a.log=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];a.unshift("====>"),console.log.apply(window,a)},a.err=function(){for(var a=[],t=0;t<arguments.length;t++)a[t]=arguments[t];a.unshift("====>"),console.error.apply(window,a)},a.removeNodeChildren=function(a){a.children.forEach(function(a){a.isValid&&a.destroy()})},a.objToMap=function(a){var e=new Map;return t.forMap(a,function(t){e.set(t,Number(a[t]))}),e},a.mapToObj=function(a){var t={};return a.forEach(function(a,e){t[e]=a}),t},a.str=function(a){return null==a?"":a.trim()},a.num=function(a){return a?Number(a):0},a.strArr=function(a){return a?(a=a.replace(/\s/g,"").replace(/\uff0c/g,",")).split(","):null},a.strNumArr=function(a){if(!a)return null;for(var t=[],e=(a=a.replace(/\s/g,"").replace(/\uff0c/g,",")).split(","),o=0;o<e.length;o++)t.push(Number(e[o]||0));return t},a.strSet=function(a){if(!a)return null;for(var e=t.strArr(a),o=new Set,n=0;n<e.length;n++)o.add(e[n]);return o},a.strMap=function(a){if(!a)return null;for(var e=t.strArr(a),o=new Map,n=0;n<e.length;n++){var i=e[n].split(":");if(2!==i.length)throw new Error("\u89e3\u6790\u9519\u8bef!"+a);i[1].replace(/%/g,"");var r=parseInt(i[1]);if(isNaN(r))throw new Error("\u89e3\u6790\u9519\u8bef!"+i+","+a);o.set(i[0],r)}return o},a.forMap=function(a,t){for(var e=Object.keys(a),o=0,n=e.length;o<n;o++){var i=t(e[o],o);if(void 0!==i)return i}return null},a.loadSubGame=function(a,t,e,o,n){cc.assetManager.loadAny({url:a},{version:e,ext:"bundle",preset:"bundle",__isNative__:!0},function(){},function(e,i){if(e)n(e);else{var r=new cc.AssetManager.Bundle;i.base=i.base||a+"/",r.init(i),r.load("pkg/"+t,cc.Prefab,o,function(a,t){a?n(a):n(null,t,r)})}})},a.init=function(){var a=cc.view.getVisibleSize();t.view_x=a.width/2,t.view_y=a.height/2,t.view_mag=cc.v2(t.view_x,t.view_y).mag(),t.log("\u53ef\u89c6\u533a\u57df",t.view_x,t.view_y),cc.view.setResizeCallback(t.init),t.loadData(null)},a.leftPad=function(a,t,e){void 0===e&&(e="0");var o=t-a.length;if(o<=0)return a;for(var n=0;n<o;n++)a=e+a;return a},a.showPassTime=function(a){var t=Math.floor(a/1e3),e=Math.floor(t/86400);e>0&&(t%=86400);var o=Math.floor(t/3600);o>0&&(t%=3600);var n=""+Math.floor(t/60),i=""+t%60;return(e>0?e+"\u5929":"")+this.leftPad(""+o,2)+":"+this.leftPad(n,2)+":"+this.leftPad(i,2)},a.showPercent=function(a){return 100*a+"%"},a.bezier=function(a,t,e,o,n){var i=1-n;return i*(i*(a+(3*t-a)*n)+3*e*n*n)+o*n*n*n},a.bezierTo=function(a,e,o,n,i,r){return r||(r=Object.create(null)),r.progress=function(e,i,r,p){var l=t.bezier(e.x,o.x,n.x,i.x,p),s=t.bezier(e.y,o.y,n.y,i.y,p);return a.angle=t.posToAngle(r.x,r.y,l,s),r.x=l,r.y=s,r},cc.tween(a).to(e,{position:i},r)},a.posToAngle=function(a,t,e,o){return 180*Math.atan2(o-t,e-a)/Math.PI},a.posToRadian=function(a,t,e,o){return Math.atan2(o-t,e-a)},a.clone=function(a){if(Array.isArray(a)){for(var e=[],o=0,n=a.length;o<n;o++)e.push(t.clone(a[o]));return e}if("[object Object]"===Object.prototype.toString.call(a)){var i={};return t.forMap(a,function(e){i[e]=t.clone(a[e])}),i}return a},a.isNewDay=function(a){if(a<=0)return!0;var t=new Date(a),e=new Date;return t.getFullYear()!==e.getFullYear()||t.getMonth()!==e.getMonth()||t.getDate()!==e.getDate()},a.randomInt=function(a,t){return Math.floor(Math.random()*(t-a+1)+a)},a.randomBool=function(a){return void 0===a&&(a=.5),Math.random()<a},a.randomPosNeg1=function(){return Math.random()>.5?1:-1},a.randomStr=function(a,e){for(var o=e||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",i=0;i<a;i++)n+=o[t.randomInt(0,a-1)];return n},a.distinctArr=function(a,t){return void 0===t&&(t=[]),Array.from(new Set(i(a,t)))},a.arrSub=function(a,t){for(var e=new Set(t),o=[],n=0,i=a.length;n<i;n++){var r=a[n];e.has(r)||o.push(r)}return o},a.randomChooseIndex=function(a,e){for(var o=new Array,n=new Array,i=a.length,r=0;r<i;r++)n[r]=r;for(var p=0;p<e;p++){var l=t.randomInt(0,n.length-1);o.push(n.splice(l,1)[0])}return o},a.randomChoose=function(a,t){if(!t||1===t)return[a[Math.floor(Math.random()*a.length)]];var e=a.slice(0);if(t>a.length)return e;for(var o=0,n=0,i=a.length,r=i-t;i-- >r;)o=e[n=Math.floor((i+1)*Math.random())],e[n]=e[i],e[i]=o;return e.slice(r)},a.randomDraw=function(a){var e=Math.random(),o=0;return t.forMap(a,function(t){if(e>o&&e<o+a[t])return t;o+=a[t]})},a.randomPick=function(a,t){if(!t||1===t)return a.splice(Math.floor(Math.random()*a.length),1);if(t>a.length)return a;for(var e=[],o=0;o<t;o++){var n=Math.floor(Math.random()*a.length);e.push(a.splice(n,1)[0])}return e},a.resetTexRect=function(a){if(a.spriteFrame){var e=a.spriteFrame.getRect(),o=a.spriteFrame.getTexture(),n=e.x/o.width,i=e.y/o.height,r=(e.x+e.width)/o.width,p=(e.y+e.height)/o.height,l=new cc.Vec4(n,i,r-n,p-i);a.getMaterial(0).setProperty("_TexRect",l)}else t.err("[ERR]resetTexRect",a)},a.shake=function(a,t,e,o){void 0===t&&(t=3),void 0===e&&(e=0),void 0===o&&(o=10);var n={shakeCount:t,node:a,orgX:a.x,orgY:a.y,isDone:!1,doneFn:function(){},done:null,tw:null};return n.done=function(a,t){return a&&(n.doneFn=function(){a.call(t||n.node)}),n},n.tw=cc.tween(n.node).repeat(n.shakeCount,cc.tween().to(.05,{x:n.orgX+o,y:n.orgY+e}).to(.05,{x:n.orgX-o,y:n.orgY-e})).call(function(){n.doneFn()}),n.tw.start(),n},a.resetMsgReciever=function(a,e){t.msgMap[a]=e},a.delMsgReciever=function(a){delete t.msgMap[a]},a.regMsgReciever=function(a,e){var o=t.msgMap[a];o?t.msgMap[a]=function(a){return!!o(a)&&e(a)}:t.resetMsgReciever(a,e)},a.sendMsg=function(a,e){var o=t.msgMap[a];o&&o(e)},a.moveTo=function(a,t,e,o,n){void 0===o&&(o=.5),void 0===n&&(n=function(){});var i=t.sub(cc.v2(a.position)),r=i.mag();if(0!==r){var p=i.x/r*e,l=i.y/r*e;cc.tween(a).to(o,{x:a.x+p,y:a.y+l}).call(n).start()}else n()},a.updateMove=function(a,t,e,o,n,i){if(void 0===o&&(o=10),void 0===n&&(n=0),a&&0!==o){var r=t.sub(e),p=r.mag();if(!(p<10)){0!==n&&(r.x<0&&a.scaleX>0||r.x>0&&a.scaleX<0)&&(a.scaleX=-a.scaleX);var l=r.x/p,s=r.y/p;i&&!i(r,p,l,s)||(a.x+=l*o,a.y+=s*o)}}},a.twoInt=function(a){return a<10?"0"+a:a},a.todayStr=function(){var a=new Date;return""+a.getFullYear()+t.twoInt(a.getMonth()+1)+t.twoInt(a.getDate())},a.saveData=function(a,e){var o=window.localStorage;o&&(t.saveObj[a]=e,o.setItem(t.gameName,JSON.stringify(t.saveObj)))},a.getData=function(a,e){var o=t.saveObj[a];return null==o?e:o},a.loadData=function(a){var e=window.localStorage;if(e){var o=e.getItem(t.gameName);if(o){if(t.saveObj=JSON.parse(o),!t.saveObj.userId){var n=""+t.randomInt(1e8,999999999);this.saveData("userId",n)}return t.saveObj[a]}n=""+t.randomInt(1e8,999999999),this.saveData("userId",n)}return null},a.clearData=function(){var a=window.localStorage;a&&a.removeItem(t.gameName)},a.jget=function(a,e){e||(e=function(a){if(a)return t.err(a)});var o=new XMLHttpRequest;o.responseType="arraybuffer",o.open("GET",a,!0),o.onload=function(){return 200==o.status?e(null,o.response):e("[ERR-jget]:"+o.status)},o.onerror=function(a){e(a)},o.send()},a.jgetJson=function(a,e){e||(e=function(a){if(a)return t.err(a)});var o=new XMLHttpRequest;o.responseType="json",o.open("GET",a,!0),o.onload=function(){return 200==o.status?(console.error("fail 200"),e(null,o.response)):(console.error("fail 2001"),e("[ERR-jget]:"+o.status))},o.onerror=function(a){console.error("fail 2002"),e(a)},o.send()},a.jpost=function(a,e,o){o||(o=function(a){if(a)return t.err(a)});var n=new XMLHttpRequest;n.open("POST",a,!0),n.setRequestHeader("Content-Type","application/json; charset=utf-8");var i=JSON.stringify(e);n.send(i),n.onerror=function(a){o(a)},n.onload=function(){if(200==n.status){if("object"==typeof n.responseText)return o(null,n.responseText);var e={postERR:""+n.responseText};try{e=JSON.parse(n.responseText)}catch(i){return t.err(i),o(null,{code:"1111",err:"jsonErr:"+n.responseText,url:a})}return o(null,e)}return o(null,{code:""+n.status})}},a.encodeUTF8=function(a){var t,e,o,n=[];for(t=0;t<a.length;t++)(e=a.charCodeAt(t))<128?n.push(e):e<2048?n.push(192+(e>>6&31),128+(63&e)):((o=55296^e)>>10==0?(e=(o<<10)+(56320^a.charCodeAt(++t))+65536,n.push(240+(e>>18&7),128+(e>>12&63))):n.push(224+(e>>12&15)),n.push(128+(e>>6&63),128+(63&e)));return n},a.s=function(a){var e,o,n,i=new Uint8Array(t.encodeUTF8(a)),r=16+(i.length+8>>>6<<4);for((a=new Uint8Array(r<<2)).set(new Uint8Array(i.buffer)),a=new Uint32Array(a.buffer),n=new DataView(a.buffer),e=0;e<r;e++)a[e]=n.getUint32(e<<2);a[i.length>>2]|=128<<24-8*(3&i.length),a[r-1]=i.length<<3;var p=[],l=[function(){return u[1]&u[2]|~u[1]&u[3]},function(){return u[1]^u[2]^u[3]},function(){return u[1]&u[2]|u[1]&u[3]|u[2]&u[3]},function(){return u[1]^u[2]^u[3]}],s=function(a,t){return a<<t|a>>>32-t},c=[1518500249,1859775393,-1894007588,-899497514],u=[1732584193,-271733879,null,null,-1009589776];for(u[2]=~u[0],u[3]=~u[1],e=0;e<a.length;e+=16){var d=u.slice(0);for(o=0;o<80;o++)p[o]=o<16?a[e+o]:s(p[o-3]^p[o-8]^p[o-14]^p[o-16],1),n=s(u[0],5)+l[o/20|0]()+u[4]+p[o]+c[o/20|0]|0,u[1]=s(u[1],30),u.pop(),u.unshift(n);for(o=0;o<5;o++)u[o]=u[o]+d[o]|0}for(n=new DataView(new Uint32Array(u).buffer),e=0;e<5;e++)u[e]=n.getUint32(e<<2);return Array.prototype.map.call(new Uint8Array(new Uint32Array(u).buffer),function(a){return(a<16?"0":"")+a.toString(16)}).join("")},a.b=function(a){var t=[];for(var e in a)t.push(e);t=t.sort();for(var o="",n=0;n<t.length;n++){var i=a[t[n]];"object"==typeof i&&(i=this.b(i)),o+=t[n]+i}return o},a.a=function(a,e,o){var n=[];for(var i in a)null!==a[i]&&void 0!==a[i]?n.push(i):delete a[i];n=n.sort();var r=t.b(a);return e&&(r+=e),r+=o||"pH0Xhyenu2e1zdUg",t.s(r)},a.jax=function(a,e,o){o||(o=function(a){if(a)return t.err(a)});var n=new XMLHttpRequest,i=Date.now();e.s=t.a(e,i),n.open("POST",a,!0),n.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.setRequestHeader("ts",""+i);var r=JSON.stringify(e);n.send(r),n.onload=function(){if(200==n.status){var a={jaxERR:""+n.responseText};try{a=JSON.parse(n.responseText)}catch(e){return t.err(e),o(null,{re:"1111",err:"jsonErr:"+n.responseText})}return o(null,a)}return o(null,{re:"9"+n.status})}},a.eventReport=function(a,e,o){!p.pzaChannel.isConfRemote&&p.pzaChannel.instance().getPara("gid")&&p.pzaChannel.instance().getChannel().jpost("https://dk.gametdd.com/htApi/ht_api/eventReport",{eventName:a,eventProp:e,gid:p.pzaChannel.instance().getPara("gid"),uid:r.pzaLocalData.data.saveId,userProps:o},function(a){a&&t.err(a)})},a.htInit=function(a,e){if(void 0===e&&(e=function(){}),a){var o={gid:a,uid:t.getData("user",{}).id||"u"+Date.now(),v:t.htVer};t.jax(t.htHost+"init2",o,function(a,o){if(a||!o)return t.err("jhtERR",a),e(a||new Error("no re"));if(0!==o.re)return t.err("jht FAILED!"+JSON.stringify(o)),e(new Error("err:"+o.re));if(t.log("HT init OK:"+t.htVer),o.uid){var n=t.getData("user",{});n.id=o.uid,t.saveData("user",n)}o.picType&&(t.picType=o.picType),t.iconPre=o.iconPre,e(null,o)})}},a.htGetBox=function(a,e){if(void 0===e&&(e=function(){}),a){var o={bid:a};t.jax(t.htHost+"getBox",o,function(o,n){if(o)return e(o);if(0!==n.re||!n.arr)return e(new Error("\u670d\u52a1\u914d\u7f6e\u6709\u8befbid:"+a+",re:"+n.re));for(var i=[],r={},p=0;p<n.arr.length;p++)for(var l=n.arr[p],s=0;s<l.length;s++){var c=l[s].split("@"),u="",d="";c.length>=4&&"0"!==c[3]&&(u="_"+c[3]),c.length>=5&&(d=c[4]),r[c[0]]||(i.push({jumpKey:c[1],mid:c[0],iconUrl:t.iconPre+c[0]+u+"."+t.picType,txt:c[2],mark:d}),r[c[0]]=c[0])}e(null,i)})}else t.err("htGetBox bid\u4e3a\u7a7a!!")},a.ani_JitterNode=function(a,t,e,o,n){if(void 0===n&&(n=!1),n){var i=(r=cc.tween(a).by(t/4,{angle:e}).by(t/2,{angle:2*-e}).by(t/4,{angle:e})).delay(.5);cc.tween(a).repeatForever(i).start()}else{var r=cc.tween(a).by(t/2,{angle:e}).by(t/2,{angle:-e});(i=cc.tween(a).sequence(r,cc.tween(a).delay(.1),r.reverseTime()).delay(.1)).repeat(o).start()}},a.getMonthDays=function(){var a;a=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:new Date;var t=new Date(a),e=(t.getDate(),t.getMonth()+1);return new Date(t.getFullYear(),e,0).getDate()},a.getCurrentDay=function(){var a;return a=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:new Date,new Date(a).getDate()},a.getCurrentMonty=function(){var a;return a=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:new Date,new Date(a).getMonth()+1},a.getCurrentYear=function(){var a;return a=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:new Date,new Date(a).getFullYear()},a.returnNowTime=function(a){var t=new Date(a),e=t.getDate(),o=t.getMonth()+1;return t.getFullYear()+"\u5e74"+o+"\u6708"+e+"\u65e5"},a.setServerTimeToLocal=function(a){console.log("\u4f7f\u7528\u670d\u52a1\u5668\u65f6\u95f4"),r.pzaLocalData.serverTime=a},a.overRecruitTime=function(){var a;a=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:Date.now(),"tt"!=p.pzaChannel.instance().channel&&"my"!=p.pzaChannel.instance().channel&&"ks"!=p.pzaChannel.instance().channel||(r.pzaLocalData.recruitOverTimeStamp=1725379201e3),a>r.pzaLocalData.recruitOverTimeStamp&&(r.pzaLocalData.holidayRecruitOver=!0),r.pzaLocalData.recruitLeftDays=this.getDaysDifference(a,r.pzaLocalData.recruitOverTimeStamp)},a.getDaysDifference=function(a,t){var e=new Date(a),o=new Date(t),n=Math.abs(o.getTime()-e.getTime());return Math.floor(n/864e5)},a.judgeMonth=function(){this.getCurrentMonty()!=r.pzaLocalData.data.nowMonth&&(r.pzaLocalData.data.monthSignDays=0,r.pzaLocalData.data.retroSignDays=0,r.pzaLocalData.data.nowMonth=this.getCurrentMonty(),r.pzaLocalData.addDirty("monthSignDays","retroSignDays","nowMonth")),this.judgeDay(),this.judgeWeek(),this.canLockMonthSign()},a.judgeWeek=function(){var a;a=r.pzaLocalData.serverTime?r.pzaLocalData.serverTime:Date.now();var t=!1;null==r.pzaLocalData.data.weekDayTime?(t=!1,r.pzaLocalData.data.weekDayTime=a):(t=this.isSameWeek(r.pzaLocalData.data.weekDayTime,a),r.pzaLocalData.data.weekDayTime=a),t||(r.pzaLocalData.data.getTokenCoinCnt=0,r.pzaLocalData.data.getTokenCntByAd=!1),r.pzaLocalData.addDirty("weekDayTime","getTokenCoinCnt")},a.isSameWeek=function(a,t){var e=new Date(a),o=new Date(t),n=new Date(e);n.setDate(e.getDate()-(e.getDay()+6)%7),n.setHours(0,0,0,0);var i=new Date(o);i.setDate(o.getDate()-(o.getDay()+6)%7),i.setHours(0,0,0,0);var r=new Date(n);r.setDate(n.getDate()+6),r.setHours(23,59,59,999);var p=new Date(i);return p.setDate(p.getDate()+6),p.setHours(23,59,59,999),n<=o&&o<=r||i<=e&&e<=p},a.judgeDay=function(){var a=!1,e=t.getCurrentYear(),o=t.getCurrentMonty(),n=t.getCurrentDay();if(r.pzaLocalData.data.signDasyEnd.length<3)r.pzaLocalData.data.signDasyEnd=[e,o,n],r.pzaLocalData.data.isSignInMonth=!1,r.pzaLocalData.addDirty("signDasyEnd","isSignInMonth"),a=!0;else{var i=!1;e==r.pzaLocalData.data.signDasyEnd[0]&&o==r.pzaLocalData.data.signDasyEnd[1]&&n==r.pzaLocalData.data.signDasyEnd[2]&&(i=!0),i||(r.pzaLocalData.data.isSignInMonth=!1,r.pzaLocalData.data.signDasyEnd=[e,o,n],r.pzaLocalData.addDirty("signDasyEnd"),a=!0)}(a||r.pzaLocalData.data.recruitTaskState.length<=0)&&(r.pzaLocalData.data.recruitTaskState[1]=1,r.pzaLocalData.data.recruitInvitateState=0,r.pzaLocalData.addDirty("recruitTaskState","recruitInvitateState","canRefreshState"))},a.canLockMonthSign=function(){r.pzaLocalData.data.canMonthSign||r.pzaLocalData.data&&r.pzaLocalData.data.signDays>=7&&(r.pzaLocalData.data.canMonthSign=!0,r.pzaLocalData.addDirty("canMonthSign"))},a.gameName="td_hwcsmlq",a.dancingZomIdx=1,a.callbackArr=function(a,t,e,o){void 0===o&&(o=!1);for(var n=[],i=a.length,r=function(a,t){return a?e(a,n):(void 0===t&&(t=null),n.push(t),o||n.length===i?e(null,n):void 0)},p=0;p<i;p++)t(a[p],r)},a.view_x=0,a.view_y=0,a.view_mag=0,a.shuffle=function(a){for(var t,e=a.length,o=0;e;)o=Math.random()*e-->>>0,t=n([a[o],a[e]],2),a[e]=t[0],a[o]=t[1];return a},a.msgMap={},a.saveObj={},a.htVer="203",a.picType="",a.iconPre="",a.htHost="https://dk.gametdd.com/htApi/ht_api/",t=o([s],a)}());e.default=c,cc._RF.pop()},{"../Common/pzaLocalData":"pzaLocalData","./pzaChannel":"pzaChannel"}]},{},["pzaAchieve","pzaAchieveItem","pzaAchieveMgr","pzaAchieveRewardItem","pzaAchieveView","pzaBaseBullet","pzaButterBaseBullet","pzaCatSunBullet","pzaCobBullet","pzaCupidBullet","pzaDirBullet","pzaDoomBullet","pzaGoldBullet","pzaIceMelonBaseBullet","pzaIceMelonBullet","pzaMelonBullet","pzaPeaBullet","pzaPeaFireBaseBullet","pzaPeaFireTrackBullet","pzaPeaTrackBullet","pzaRotateBullet","pzaSnowBaseBullet","pzaThrowBullet","pzaTrackBullet","pzaZombieBaseBullet","pzaBaseData","pzaBattleData","pzaBuffData","pzaDropType","pzaGuideType","pzaJarData","pzaPlantEnum","pzaZombieEnum","pzaATest","pzaAbsorbIronEquip","pzaBackPumpkin","pzaBaseEffect","pzaBattleFrameAnim","pzaBoomFireEffect","pzaBungeeTarget","pzaBungeeZombieEffect","pzaButterEffect","pzaCobHoleEffect","pzaDoomHoleEffect","pzaDrZomBall","pzaDropCard","pzaDropCoin","pzaDropPlantCard","pzaFogEffect","pzaFrozenEffect","pzaGoldHoleEffect","pzaGroveEffect","pzaHammerEffect","pzaIceGroundEffect","pzaLadder","pzaPitchFork","pzaPlanternEffect","pzaRainEffect","pzaRainNightEffect","pzaRicochetBulletEffect","pzaRoofPreEffect","pzaShadowEffect","pzaShovelEffect","pzaShowGrassEffect","pzaSpeedBlinkEffect","pzaTangleKelpEffect","pzaWaterLightEffect","pzaWordEffect","pzaAttackType","pzaBasePlant","pzaBlover","pzaBoomNut","pzaBowlingBody","pzaBowlingNut","pzaBowlingWallBody","pzaButterGloomShroom","pzaButterJoker","pzaCabbagePult","pzaCactus","pzaCatLitterPot","pzaCatSun","pzaCattail","pzaCherryBomb","pzaCherryJalapeno","pzaChomper","pzaCobCannon","pzaCoffeeBean","pzaCupidShooter","pzaDoomCannon","pzaDoomShroom","pzaFireMine","pzaFireNut","pzaFlowerPot","pzaFumeShroom","pzaGarlic","pzaGarlicJalapeno","pzaGatlingPea","pzaGloomShroom","pzaGoldMagnet","pzaGraveBuster","pzaHamburgShooter","pzaHeighIceNut","pzaHoleNut","pzaHoloCards","pzaHotDog","pzaHypnoShroom","pzaIceBlover","pzaIceCat","pzaIceCat2","pzaIceFumeShroom","pzaIceNut","pzaIceShroom","pzaIceSpike","pzaIceSquash","pzaImitater","pzaJalapeno","pzaKernelPult","pzaLilyPad","pzaMagnetNut","pzaMagnetShroom","pzaMarigold","pzaMarigoldMammon","pzaMelonNut","pzaMelonPult","pzaPeaCannon","pzaPeaPool","pzaPeaSun","pzaPeashooter","pzaPlantBody","pzaPlantern","pzaPotatoMine","pzaPuffShroom","pzaPumpkin","pzaPumpkinPurple","pzaPumpkinPurpleFire","pzaQQFumeShroom","pzaRandomPlantBox","pzaRepeater","pzaScaredyShroom","pzaSeaShroom","pzaShiftNut","pzaSnowPea","pzaSpikeChomper","pzaSpikeRockNut","pzaSpikerock","pzaSpikeweed","pzaSplitPea","pzaSquash","pzaSquashKing","pzaSquashNut","pzaStarFruit","pzaStarFruitShadow","pzaSunBean","pzaSunBomb","pzaSunFlower","pzaSunFlowerPlus","pzaSunMine","pzaSunPot","pzaSunQueen","pzaSunShroom","pzaSunShroomShooter","pzaSuperChomper","pzaTallBowlingNut","pzaTallNut","pzaTangleKelp","pzaThreePeater","pzaTorchNut","pzaTorchwood","pzaTreasureBuster","pzaTwinSunflower","pzaUmbrellaLeaf","pzaVipNut","pzaWallNut","pzaWildPea","pzaWinterMelonPult","pzaZombieNut","pzaBackupDancerZombie","pzaBackupDancerZombie2","pzaBalloonZombie","pzaBaseZombie","pzaBedCar","pzaBucketHeadZombie","pzaBungeeZombie","pzaCatapultZombie","pzaConeHeadZombie","pzaConeHeadZombie2","pzaDancingZombie","pzaDancingZombie2","pzaDancingZombie3","pzaDiggerFootBallZombie","pzaDiggerZombie","pzaDolphinRiderZombie","pzaDrZomBoss","pzaDuckyTubeBucketZombie","pzaDuckyTubeConeZombie","pzaDuckyTubeZombie","pzaFlagZombie","pzaFootballZombie","pzaGargantuar","pzaGargantuar2","pzaImp","pzaJackZombie","pzaJackZombie2","pzaLadderZombie","pzaNewspaperZombie","pzaNightWear","pzaNormalZombie","pzaNutZombie","pzaPeaZombie","pzaPogoZombie","pzaPolevaultingZombie","pzaPolevaultingZombie2","pzaScreenDoorZombie","pzaScreenDoorZombie2","pzaSnorkelZombie","pzaYetiZombie","pzaZombieBobsled","pzaZombieBobsledTeam","pzaZombieBody","pzaZombieSlot","pzaZombieState","pzaZomboni","pzaZomboni2","pzaZomboni3","pzaBaseBody","pzaBrain","pzaCleanCar","pzaEffectManager","pzaGameState","pzaGameTouch","pzaJar","pzaJarBody","pzaPlantManager","pzaPlantTouch","pzaSpineTool","pzaSunLight","pzaTomb","pzaZombieManager","pzaBaseComponent","pzaBaseComponentManager","pzaBeltConfig","pzaChapterConfig","pzaCollisionManager","pzaDaySignConfig","pzaGameBase","pzaGameBelt","pzaGameBoss","pzaGameCommonPool","pzaGameConfig","pzaGameJar","pzaGameKnock","pzaGameManager","pzaGameMiniGame","pzaGameNormal","pzaGamePartConfig","pzaGamePropConfig","pzaGameRecruitMgr","pzaGameSmall","pzaGameSurEndless","pzaGameSurvival","pzaGameTime","pzaGameVase","pzaGameVaseEndless","pzaGameZJ","pzaGameZombieEnemy","pzaGameZombieEnemyEndless","pzaGroupEnum","pzaGuideManager","pzaGuideTip","pzaHomeTip","pzaKnockMiniGame","pzaLocalData","pzaMapManager","pzaNodeManager","pzaPreviewTip","pzaRankMgr","pzaRecruitDrawConf","pzaRecruitTaskConf","pzaRedPointMgr","pzaRewardManager","pzaShareGiftConfig","pzaSmallMiniGame","pzaSoundManager","pzaSpineController","pzaSpriteFrameManager","pzaStatisticsMgr","pzaSurvivalConfig","pzaTipManager","pzaUIManager","pzaUtil","pzaWorldEventManager","pzaZJPlantConf","pzaZJRankConf","pzaZJZombieConf","pzaZombieEnermyPartCfg","pzaCreativeModeItem","pzaCreativeModeView","pzaCreativeTradConf","pzaCreativeVaseConf","pzaGameCreativeTrad","pzaGameCreativeVase","pzaGardenDave","pzaGardenDropCoin","pzaGardenMgr","pzaGardenPlant","pzaGardenPlantConfig","pzaGardenPot","pzaGardenShadow","pzaGardenSnail","pzaGardenTool","pzaGardenView","pzaBundleObjectPool","pzaPreLoadManager","pzaMiniGameConf","pzaMiniVaseConf","pzaMonthSignConf","pzaMonthSignItem","pzaMonthSignMgr","pzaMonthSignView","pzaShopConfig","pzaShopDave","pzaTask","pzaTaskMgr","pzaAssessView","pzaBagPlantCard","pzaBattleDownView","pzaBattleFreePlant","pzaBattlePropView","pzaBattleUpView","pzaBeltCard","pzaCGPaperView","pzaDaveAdReward","pzaDaveTreasureView","pzaGameFailView","pzaGameWinView","pzaGetAchieveItem","pzaGetAchieveView","pzaGuideView","pzaImitaterSelectView","pzaMenuView","pzaNewPlantView","pzaNewZombieView","pzaOptionView","pzaPlantBeltView","pzaPlantCard","pzaPlantSelectCardList","pzaPlantSelectView","pzaRecordView","pzaReviveView","pzaTryPlantCard","pzaTrySelectView","pzaZombieCard","pzaZombieSelectView","pzaBuyConfirmView","pzaChallengeView","pzaCommonMask","pzaCommonRewardView","pzaDaySignItem","pzaDaySignView","pzaFitIPhoneX","pzaGameClubView","pzaGuanKaItemView","pzaGuideDialogView","pzaHandbookCard","pzaHandbookView","pzaHomeView","pzaMiniGameItem","pzaMiniGameView","pzaPartSelectView","pzaPlantHandbookView","pzaPreOpenView","pzaPuzzleItem","pzaPuzzleView","pzaRankItem","pzaRankView","pzaRecordBtn","pzaRecruitDrawItem","pzaRecruitInvitateItem","pzaRecruitTaskItem","pzaRecruitView","pzaRewardItem","pzaSaveView","pzaShareGiftJar","pzaShareGiftView","pzaShareRewardItem","pzaShopItem","pzaShopView","pzaSidebarView","pzaSurvivalItem","pzaSurvivalView","pzaTasksIcon","pzaTasksItem","pzaTasksView","pzaWarningView","pzaZombieHandbookView","pzaZombiebookCard","Byte_analytics","ShufenManager","ks_analytics","pzaAES","pzaAdNative","pzaBulletPool","pzaChannel","pzaChannelIOS","pzaChannelKs","pzaChannelMy","pzaChannelMy1","pzaChannelNoAD","pzaChannelOppo","pzaChannelTT","pzaChannelTap","pzaChannelVivo","pzaChannelWeb","pzaChannelWx","pzaChannelWx1","pzaFrameAnim","pzaFrameAnimComponent","pzaGdyxIcon","pzaGdyxItem","pzaHtBox","pzaKDefine","pzaLayeredAssembler","pzaLayeredRootSprite","pzaParseCond","pzaPrivacyWin","pzaResMgr","pzaStateComponent","pzakc","pzaBundleController","pzaFitIpad","pzaStartScene"]);