var hzzxsdk,__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return c([e,t])}}function c(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};(function(e){(function(e){var t=function(){function e(){}return e.sdkVersion="1.0.6",e.sdkBuildTimeStamp="2022829173519",e.storagePrefix="hzzxsdk_",e.server_login="https://sdk.tianjinyuren.cn",e.server_report="https://sdk.tianjinyuren.cn",e.server_res="https://cdnht.tianjinyuren.cn",e.isInit=!1,e.totalCount=0,e.gapCount=0,e.lastAddUpDate="",e.totalKey="hzzx_ol_time_total",e.gapKey="hzzx_ol_time_count",e.lastAddUpDataKey="hzzx_ol_last_add_up_date",e.sharePicDataKey="hzzx_share_pic_data",e}();e.Global=t})(e.c||(e.c={}))})(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return t.prototype.findStorageByKey=function(t){return wx.getStorageSync(e.Global.storagePrefix+t)},t.prototype.putStorage=function(t,n,r){void 0===r&&(r=!0);try{r?wx.setStorageSync(e.Global.storagePrefix+t,n):wx.setStorage({key:e.Global.storagePrefix+t,data:n})}catch(o){}},t.prototype.httpRequest=function(e,t,n,r){return void 0===n&&(n="get"),void 0===r&&(r=2),__awaiter(this,void 0,void 0,function(){var o,i;return __generator(this,function(a){switch(a.label){case 0:return[4,new Promise(function(e,t){wx.getNetworkType({success:function(t){e(t)},fail:function(e){t(e)}})})];case 1:if("none"==a.sent().networkType)throw"current network type is none";if(o="",t){for(i in t)o+=i+"="+t[i]+"&";o&&(o=o.substr(0,o.length-1),"get"==n&&(e+=-1==e.indexOf("?")?"?":"&",e+=o))}return[4,new Promise(function(o,i){var a={url:e,header:{"Content-Type":"application/json;charset=UTF-8"}};"get"!=n&&(a.method="post",a.data=t);var s=0,c=function(e){return++s<=r?(wx.request(a),!0):(i(e),!1)};a.success=function(e){e.statusCode&&e.statusCode>=200&&e.statusCode<400?o(e.data):c(e)},a.fail=function(e){c(e)},wx.request(a)})];case 2:return[2,a.sent()]}})})},t.prototype.getUser=function(e){var t=this;return new Promise(function(n,r){t.getUserByCode(e).then(function(e){n(e)}).catch(function(){t.getUserByCode(e).then(function(e){n(e)}).catch(function(){t.getUserByCode(e).then(function(e){n(e)}).catch(function(e){r(e)})})})})},t.prototype.getUserByCode=function(t){var n=this;return new Promise(function(r,o){wx.login({success:function(i){var a={code:i.code,encryptedData:"",iv:""};e.Global.isNeedUnionid?wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?wx.getUserInfo({withCredentials:!0,success:function(e){a.encryptedData=e.encryptedData,a.iv=e.iv,n.loginByCredentialData(a,t).then(function(e){r(e)}).catch(function(e){o(e)})}}):n.loginByCredentialData(a,t).then(function(e){r(e)}).catch(function(e){o(e)})},fail:function(){n.loginByCredentialData(a,t).then(function(e){r(e)}).catch(function(e){o(e)})}}):n.loginByCredentialData(a,t).then(function(e){r(e)}).catch(function(e){o(e)})},fail:function(e){o(e)}})})},t.prototype.loginByCredentialData=function(t,n){var r=this,o=e.CommHelper.parseUserChannel(n);return new Promise(function(i,a){var s={product_id:e.Global.pid,code:t.code,unionid:t.encryptedData&&t.iv?"true":"false",channel_type:o.channelType,channel_id:o.channelId,channel_openid:e.CommHelper.paraseChannelUserId(n),encryptedData:encodeURIComponent(t.encryptedData),iv:encodeURIComponent(t.iv),model:encodeURIComponent(r.getSystemInfo().model)},c=e.Global.server_login+"/server/login.do";r.httpRequest(c,s,"post",0).then(function(t){t&&200==t.code&&t.result&&t.result.openid?(e.CommHelper.log("login success. ",t),i(t.result)):(e.CommHelper.log("login fail, openid is null. ",t),a("login fail."))}).catch(function(t){e.CommHelper.log("login error.",t),a(t)})})},t.prototype.getUserInfo=function(){return new Promise(function(e,t){wx.getSetting({fail:function(){t()},success:function(n){n.authSetting["scope.userInfo"]?wx.getUserInfo({fail:function(){t()},success:function(t){e(t.userInfo)}}):t()}})})},t.prototype.getSystemInfo=function(){var e=wx.getSystemInfoSync();return{platform:e.platform,model:e.model}},t.prototype.getEnterOptions=function(){return wx.getLaunchOptionsSync()},t.prototype.navigateTo=function(t){return new Promise(function(n,r){if(!wx.redirectTo&&-1==e.CommHelper.compareVersionTx(wx.getSystemInfoSync().SDKVersion,"2.2.0"))return e.CommHelper.log("navigateTo app fail\uff0cappId=",t.appid,"path=",t.page,"SDKVersion=",wx.getSystemInfoSync().SDKVersion),void n();wx.showLoading({title:"waiting...",mask:!0}),setTimeout(wx.hideLoading,5e3),wx.navigateToMiniProgram({appId:t.appid,path:t.page,success:function(){wx.hideLoading(),n(),e.CommHelper.log("navigateTo app success\uff0cappId=",t.appid,"path=",t.page)},fail:function(o){wx.hideLoading(),t.ad_image&&-1!=[".jpg",".gif",".png"].indexOf(t.ad_image.substr(-4))?(wx.previewImage({urls:[t.ad_image]}),n(),e.CommHelper.log("navigateTo app fail,open image\uff0cappId=",t.appid,"path=",t.page)):(r(),e.CommHelper.log("navigateTo app fail,image is null\uff0cappId=",t.appid,"path=",t.page,JSON.stringify(o)))}})})},t.prototype.navigateToSync=function(t,n){wx.redirectTo||-1!=e.CommHelper.compareVersionTx(wx.getSystemInfoSync().SDKVersion,"2.2.0")?(wx.showLoading({title:"waiting...",mask:!0}),setTimeout(wx.hideLoading,5e3),wx.navigateToMiniProgram({appId:t.appid,path:t.page,success:function(){wx.hideLoading(),n(!0)},fail:function(){wx.hideLoading(),t.ad_image&&-1!=[".jpg",".gif",".png"].indexOf(t.ad_image.substr(-4))?(wx.previewImage({urls:[t.ad_image]}),n(!0)):n(!1)}})):n(!0)},t.prototype.getShareObject=function(t){var n=e.ShareHelper.getRandomShareObject(t),r={};r.title=n.title,r.imageUrl=n.imageUrl;var o="",i=n.imageId?n.imageId:"";wx.redirectTo?(r.path=e.ShareHelper.genSharePath(t.sceneCode,t.path||"/pages/index/index",t.params||{},i),o=r.path):(r.query=e.ShareHelper.genShareQuery(n.sceneCode,n.params||{},i),o=r.query);var a=o?e.CommHelper.getHttpQueryValueByKey(o,"partakeTime"):"";return e.ReportHelper.partakeOutletEvent(t.sceneCode,i.toString(),"","",a),e.CommHelper.log("get share object :",JSON.stringify(r)),r},t.prototype.getLocalCacheResUrl=function(n,r){var o=this;return void 0===r&&(r=!1),new Promise(function(i){if("https://"===n.substr(0,8).toLowerCase())if(t.downloadQueue.indexOf(n)>=0)i(n);else{var a=wx.env.USER_DATA_PATH+"/hzzxsdk/"+n.substr(8),s=wx.getFileSystemManager();try{if(s.accessSync(a),s.statSync(a).isFile())return i(a),void e.CommHelper.addRes2MemoryCache(a);s.rmdirSync(a)}catch(c){}!r&&i(n),t.downloadQueue.push(n),wx.downloadFile({targetUrl:n,success:function(t){200===t.statusCode?(o.mkdirRecursiveSync(a.substring(0,a.lastIndexOf("/"))),s.saveFileSync(t.tempFilePath,a),e.CommHelper.addRes2MemoryCache(a),r&&i(a)):r&&i(n)},fail:function(){r&&i(n)},complete:function(){t.downloadQueue.splice(t.downloadQueue.indexOf(n),1)}})}else i(n)})},t.prototype.mkdirRecursiveSync=function(e){for(var t=wx.getFileSystemManager(),n=e.replace(wx.Global.USER_DATA_PATH,"").split("/"),r=wx.Global.USER_DATA_PATH,o=0,i=n;o<i.length;o++){var a=i[o];if(a){r+="/"+a;try{t.accessSync(r),t.statSync(r).isDirectory()||(t.unlinkSync(r),t.mkdirSync(r))}catch(s){t.mkdirSync(r)}}}return r},t.prototype.setTimeout=function(e,t){return setTimeout(e,t)},t.prototype.setInterval=function(e,t){return setInterval(e,t)},t.prototype.clearTimeout=function(e){clearTimeout(e)},t.prototype.clearInterval=function(e){clearInterval(e)},t.prototype.preHandleInit=function(){try{wx.onAppShow(function(t){e.ReportHelper.appRunEvent(t),e.ReportHelper.hotLaunchEvent(t)}),wx.onAppHide(function(){e.ReportHelper.addUpGapOnlineTimeOnHide()})}catch(t){}try{wx.onShow(function(t){e.ReportHelper.appRunEvent(t),e.ReportHelper.hotLaunchEvent(t)}),wx.onHide(function(){e.ReportHelper.addUpGapOnlineTimeOnHide()})}catch(t){}},t.prototype.handleAfterLogin=function(){},t.downloadQueue=[],t}();e.WXPlat=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return t.prototype.findStorageByKey=function(t){try{var n=egret.localStorage.getItem(e.Global.storagePrefix+t);return n?JSON.parse(n):""}catch(r){return""}},t.prototype.putStorage=function(t,n){egret.localStorage.setItem(e.Global.storagePrefix+t,JSON.stringify(n))},t.prototype.httpRequest=function(e,t,n,r){void 0===n&&(n="get"),void 0===r&&(r=2);var o="";if(t){for(var i in t)o+=i+"="+t[i]+"&";o&&(o=o.substr(0,o.length-1),"get"==n&&(e+=-1==e.indexOf("?")?"?":"&",e+=o))}return new Promise(function(t){var r=new egret.HttpRequest;r.once(egret.Event.COMPLETE,function(e){var n=e.currentTarget.response;try{t(JSON.parse(n))}catch(r){t(n)}},null),r.once(egret.IOErrorEvent.IO_ERROR,function(){},null),"get"==n?(r.open(e,egret.HttpMethod.GET),r.send()):(r.open(e,egret.HttpMethod.POST),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(o))})},t.prototype.getUser=function(){return new Promise(function(e){e({openid:"debug-egret-user-openid"})})},t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,{nickName:"debug-nick-name",avatarUrl:"",gender:-1}]})})},t.prototype.getSystemInfo=function(){return{platform:egret.Capabilities.os,model:""}},t.prototype.getEnterOptions=function(){return{scene:0,query:{}}},t.prototype.navigateTo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.navigateToSync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.getShareObject=function(){},t.prototype.getLocalCacheResUrl=function(e,t){return void 0===t&&(t=!1),Promise.resolve(e)},t.prototype.setTimeout=function(e,t){return setTimeout(e,t)},t.prototype.setInterval=function(e,t){return setInterval(e,t)},t.prototype.clearTimeout=function(e){clearTimeout(e)},t.prototype.clearInterval=function(e){clearInterval(e)},t.prototype.preHandleInit=function(){},t}();e.EgretPlat=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return t.prototype.findStorageByKey=function(t){try{var n=cc.sys.localStorage.getItem(e.Global.storagePrefix+t);return n?JSON.parse(n):""}catch(r){return""}},t.prototype.putStorage=function(t,n){cc.sys.localStorage.setItem(e.Global.storagePrefix+t,JSON.stringify(n))},t.prototype.httpRequest=function(e,t,n,r){void 0===n&&(n="get"),void 0===r&&(r=2);var o="";if(t){for(var i in t)o+=i+"="+t[i]+"&";o&&(o=o.substr(0,o.length-1),"get"==n&&(e+=-1==e.indexOf("?")?"?":"&",e+=o))}return new Promise(function(t){var r=cc.loader.getXMLHttpRequest();r.onreadystatechange=function(){if(4==r.readyState&&r.status>=200&&r.status<400)try{t(JSON.parse(r.responseText))}catch(e){t(r.responseText)}},"get"==n?(r.open("GET",e,!0),r.send()):(r.open("POST",e,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(o))})},t.prototype.getUser=function(){return new Promise(function(e){e({openid:"debug-cocos-user-openid"})})},t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,{nickName:"debug-nick-name",avatarUrl:"",gender:-1}]})})},t.prototype.getSystemInfo=function(){return{platform:cc.sys.os,model:""}},t.prototype.getEnterOptions=function(){return{scene:0,query:{}}},t.prototype.navigateTo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.navigateToSync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.getShareObject=function(){},t.prototype.getLocalCacheResUrl=function(e,t){return void 0===t&&(t=!1),Promise.resolve(e)},t.prototype.setTimeout=function(e,t){return setTimeout(e,t)},t.prototype.setInterval=function(e,t){return setInterval(e,t)},t.prototype.clearTimeout=function(e){clearTimeout(e)},t.prototype.clearInterval=function(e){clearInterval(e)},t.prototype.preHandleInit=function(){},t}();e.CocosPlat=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return t.prototype.findStorageByKey=function(t){try{var n=window.localStorage.getItem(e.Global.storagePrefix+t);return n?JSON.parse(n):""}catch(r){return""}},t.prototype.putStorage=function(t,n){window.localStorage.setItem(e.Global.storagePrefix+t,JSON.stringify(n))},t.prototype.httpRequest=function(e,t,n,r){var o=this;void 0===n&&(n="get"),void 0===r&&(r=2);var i="";if(t){for(var a in t)i+=a+"="+t[a]+"&";i&&(i=i.substr(0,i.length-1),"get"==n&&(e+=-1==e.indexOf("?")?"?":"&",e+=i))}return new Promise(function(t){var r=new Laya.HttpRequest;r.once(Laya.Event.COMPLETE,o,function(e){try{t(JSON.parse(e))}catch(n){t(e)}}),r.once(Laya.Event.ERROR,o,function(){}),"get"==n?r.send(e,"","get","text"):r.send(e,i,"post","text")})},t.prototype.getUser=function(){return new Promise(function(e){e({openid:"debug-laya-user-openid"})})},t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,{nickName:"debug-nick-name",avatarUrl:"",gender:-1}]})})},t.prototype.getSystemInfo=function(){return{platform:"laya",model:""}},t.prototype.getEnterOptions=function(){return{scene:0,query:{}}},t.prototype.navigateTo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.navigateToSync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.getShareObject=function(){},t.prototype.setTimeout=function(e,t){return setTimeout(e,t)},t.prototype.setInterval=function(e,t){return setInterval(e,t)},t.prototype.clearTimeout=function(e){clearTimeout(e)},t.prototype.clearInterval=function(e){clearInterval(e)},t.prototype.getLocalCacheResUrl=function(e,t){return void 0===t&&(t=!1),Promise.resolve(e)},t.prototype.preHandleInit=function(){},t}();e.LayaPlat=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return t.prototype.findStorageByKey=function(t){try{var n=window.localStorage.getItem(e.Global.storagePrefix+t);return n?JSON.parse(n):""}catch(r){return""}},t.prototype.putStorage=function(t,n){window.localStorage.setItem(e.Global.storagePrefix+t,JSON.stringify(n))},t.prototype.httpRequest=function(e,t,n,r){void 0===n&&(n="get"),void 0===r&&(r=2);var o="";if(t){for(var i in t)o+=i+"="+t[i]+"&";o&&(o=o.substr(0,o.length-1),"get"==n&&(e+=-1==e.indexOf("?")?"?":"&",e+=o))}return new Promise(function(t,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status)try{t(JSON.parse(i.responseText))}catch(e){t(i.responseText)}else r("HTTP request fail\uff0cstatus ="+i.status)},"get"==n?(i.open("GET",e),i.send()):(i.open("POST",e),i.send(o))})},t.prototype.getUser=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,{openid:"debug-user-openid"}]})})},t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2,{nickName:"debug-nick-name",avatarUrl:"",gender:-1}]})})},t.prototype.getSystemInfo=function(){return{platform:navigator.platform,model:""}},t.prototype.getEnterOptions=function(){return{scene:0,query:{}}},t.prototype.navigateTo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.navigateToSync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.getShareObject=function(){},t.prototype.getLocalCacheResUrl=function(e,t){return void 0===t&&(t=!1),Promise.resolve(e)},t.prototype.setTimeout=function(e,t){return setTimeout(e,t)},t.prototype.setInterval=function(e,t){return setInterval(e,t)},t.prototype.clearTimeout=function(e){clearTimeout(e)},t.prototype.clearInterval=function(e){clearInterval(e)},t.prototype.preHandleInit=function(){},t}();e.DefaultPlat=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){if(!this._inst)switch(this.platMark){case"wx":this._inst=new e.WXPlat,e.CommHelper.log("platform=wx");break;case"egret":this._inst=new e.EgretPlat,e.CommHelper.log("platform=Egret");break;case"cocos":this._inst=new e.CocosPlat,e.CommHelper.log("platform=Cocos");break;case"laya":this._inst=new e.LayaPlat,e.CommHelper.log("platform=Laya");break;default:e.CommHelper.log("platform=default"),this._inst=new e.DefaultPlat}return this._inst},enumerable:!1,configurable:!0}),Object.defineProperty(t,"platMark",{get:function(){return"object"==typeof wx?"wx":"object"==typeof egret?"egret":"object"==typeof cc?"cocos":"object"==typeof Laya?"laya":"unknow"},enumerable:!1,configurable:!0}),t}();e.BasePlat=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return t.setUser=function(t){return t.openid?(t.unionid||(t.unionid=""),'"null"'!=t.unionid&&"null"!=t.unionid||(t.unionid=""),t.channel_openid||(t.channel_openid=""),'"null"'!=t.channel_openid&&"null"!=t.channel_openid||(t.channel_openid=""),e.BasePlat.instance.putStorage("hzzx_user_data",t),e.CommHelper.log("set user data success. openid = ",t.openid),!0):(e.CommHelper.log("set user data fail\uff0copenid is null. user =",t),!1)},t.getUser=function(){var t=e.BasePlat.instance.findStorageByKey("hzzx_user_data");return t&&t.openid?(t.unionid=t.unionid||"",t):{openid:"",unionid:"",last_login_time:0,create_time:0}},t.getUserAsyn=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(){return[2,new Promise(function(n){if(t.getUser().openid)n(t.getUser());else var r=e.BasePlat.instance.setInterval(function(){t.getUser().openid&&(e.BasePlat.instance.clearInterval(r),e.BasePlat.instance.clearTimeout(o),n(t.getUser()))},150),o=e.BasePlat.instance.setTimeout(function(){e.BasePlat.instance.clearInterval(r)},2e4)})]})})},t.thirdLogin=function(n){var r=this;return new Promise(function(o,i){var a=e.CommHelper.parseUserChannel(e.Global.enterOptions);if(n&&(n.channel_type=a.channelType?a.channelType:"",n.channel_id=a.channelId?a.channelId:""),r.setUser(n)){var s=n.openid,c=n.unionid,l=n.channel_type,u=n.channel_id,p={product_id:e.Global.pid,openid:s,unionid:c,channel_type:l,chennal_id:u};e.BasePlat.instance.httpRequest(e.Global.server_login+"/server/otherLogin.do",p,"post").then(function(n){n&&200==n.code&&n.result&&n.result.openid?(e.CommHelper.log("third login success. ",n),t.setUser(n.result),o(n.result)):(e.CommHelper.log("third login fail, openid is null. ",n),i())}).catch(function(t){e.CommHelper.log("third login error, "+t),i()})}else e.CommHelper.log("init with third user fail. openid is null."),i()})},t.getOpenId=function(){return t.getUser().openid},t.isAdUser=function(){var e=this.getUser();if(!e||!e.openid)return!1;if(e.channel_type&&"ad"==e.channel_type)return!0;if(e.channel_type&&"oth"==e.channel_type){var t=e.channel_id?Number(e.channel_id):0;if(-1!=[1095,1084,1045,1046,1067,1065].indexOf(t))return!0}return!1},t}();e.UserHelper=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return t.customEvent=function(t,n,r){void 0===t&&(t=0),void 0===n&&(n=""),void 0===r&&(r=""),e.Global.isInit&&e.UserHelper.getUserAsyn().then(function(o){var i={product_id:e.Global.pid,openid:o.openid,event_id:t,custom_param_1:encodeURIComponent(n),custom_param_2:encodeURIComponent(r)};e.BasePlat.instance.httpRequest(e.Global.server_report+"/log/event.do",i,"post").then(function(){e.CommHelper.log("custom event report success. eventid:"+t)})}).catch(function(n){e.CommHelper.log("custom event report fail. eventid:"+t+", err@"+n)})},t.partakeIntoEvent=function(t,n,r,o,i){void 0===o&&(o=""),void 0===i&&(i=""),e.Global.isInit&&e.UserHelper.getUserAsyn().then(function(a){var s=a.openid,c={product_id:e.Global.pid,openid:s,from_id:t,from_type:r?1:0,from_userid:n,custom_param_1:o,custom_param_2:i};e.BasePlat.instance.httpRequest(e.Global.server_report+"/log/partakeInto.do",c,"post").then(function(){e.CommHelper.log("report partakeInto event success. partakeId="+t)})}).catch(function(){e.CommHelper.log("report partakeInto event fail. partakeId="+t)})},t.adIntoEvent=function(t,n,r){void 0===r&&(r=""),e.Global.isInit&&e.UserHelper.getUserAsyn().then(function(r){var o=r.openid,i={product_id:e.Global.pid,openid:o,custom_ad_id:t,from_appid:n};e.BasePlat.instance.httpRequest(e.Global.server_report+"/log/linkIn.do",i,"post").then(function(){e.CommHelper.log("report ad into success. adid="+t)})}).catch(function(){e.CommHelper.log("report ad into fail. adid="+t)})},t.partakeOutletEvent=function(t,n,r,o,i){void 0===n&&(n=""),void 0===r&&(r=""),void 0===o&&(o=""),void 0===i&&(i=""),e.Global.isInit&&e.UserHelper.getUserAsyn().then(function(a){var s="share_"+e.Global.pid+"_"+t,c=a.openid,l={product_id:e.Global.pid,openid:c,share_words_id:s,share_photo_id:n,share_type:r,custom_param_1:o,custom_param_2:i};e.BasePlat.instance.httpRequest(e.Global.server_report+"/log/partakeOutlet.do",l,"post").then(function(){e.CommHelper.log("report PartakeOutlet event success. imageId="+n)})}).catch(function(){e.CommHelper.log("report PartakeOutlet event fail. imageId="+n)})},t.addUpGapOnlineTime=function(){return __awaiter(this,void 0,void 0,function(){var n,r,o,i,a,s,c,l,u,p,d;return __generator(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),e.CommHelper.resetTotalCount(e.Global.lastAddUpDate),e.Global.totalCount>=this.MAX_DAY_TIME&&(e.Global.totalCount=this.MAX_DAY_TIME-1),n=e.Global.totalCount+1,r=e.Global.gapCount+1,e.Global.totalCount=n,e.Global.gapCount=r,e.BasePlat.instance.putStorage(e.Global.totalKey,n,!1),e.BasePlat.instance.putStorage(e.Global.gapKey,r,!1),e.Global.isInit?(o=new Date).getTime()-t.lastAddUpTime<59e3?[2]:(i=n>=300&&r>300,n<300&&r>60||i?(t.lastAddUpTime=o.getTime(),e.BasePlat.instance.putStorage(e.Global.lastAddUpDataKey,e.Global.lastAddUpDate,!1),[4,e.UserHelper.getUserAsyn()]):[2]):[2];case 1:return a=f.sent(),s=a.channel_type,c=a.channel_id,l=a.openid,u=a.unionid?a.unionid:"",p={product_id:e.Global.pid,openid:l,unionid:u,channel_type:s,channel_id:c,total_time:r},e.Global.gapCount=0,n<=0||e.Global.totalCount<=0?[2]:(e.BasePlat.instance.httpRequest(e.Global.server_report+"/log/onlineTime.do",p,"post").then(function(){e.BasePlat.instance.putStorage(e.Global.gapKey,0,!1),e.CommHelper.log("add up online time success.","gap time",r)}).catch(function(){}),[3,3]);case 2:return d=f.sent(),e.CommHelper.log("add up online time error:",d),[3,3];case 3:return[2]}})})},t.addUpGapOnlineTimeOnHide=function(){return __awaiter(this,void 0,void 0,function(){var t,n,r,o,i,a,s,c,l;return __generator(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),e.CommHelper.resetTotalCount(e.Global.lastAddUpDate),e.Global.totalCount>=this.MAX_DAY_TIME&&(e.Global.totalCount=this.MAX_DAY_TIME-1),t=e.Global.totalCount,n=e.Global.gapCount,t<=0?(e.Global.totalCount=0,[2]):e.Global.isInit?(e.BasePlat.instance.putStorage("last_report_date",e.Global.lastAddUpDate,!1),[4,e.UserHelper.getUserAsyn()]):[2];case 1:return r=u.sent(),o=r.channel_type,i=r.channel_id,a=r.openid,s=r.unionid?r.unionid:"",c={product_id:e.Global.pid,openid:a,unionid:s,channel_type:o,channel_id:i,total_time:n},e.Global.gapCount=0,e.BasePlat.instance.httpRequest(e.Global.server_report+"/log/onlineTime.do",c,"post").then(function(){e.BasePlat.instance.putStorage(e.Global.gapKey,0,!1),e.CommHelper.log("add up online time(hide) success.","gap time",n)}).catch(function(){}),[3,3];case 2:return l=u.sent(),e.CommHelper.log("add up online time(hide). error:",l),[3,3];case 3:return[2]}})})},t.hotLaunchEvent=function(t){e.Global.isInit&&t&&Promise.all([e.UserHelper.getUserAsyn(),e.GameConfigHelper.getGameVerContrLevel("")]).then(function(n){var r=n[0],o=n[1],i=o&&o.ip?o.ip:"",a=e.CommHelper.parseUserChannel(t),s=a.channelType,c=a.channelId,l=e.BasePlat.instance.getSystemInfo(),u=l.model?l.model:"",p=r.openid,d=r.unionid?r.unionid:"",f={product_id:e.Global.pid,openid:p,unionid:d,channel_type:s,channel_id:c,ip:i,model:encodeURIComponent(u),behavior_id:1};e.BasePlat.instance.httpRequest(e.Global.server_report+"/log/login.do",f,"post").then(function(){e.CommHelper.log("hot run event success")})}).catch(function(t){e.CommHelper.log("hot run event error. ",t)})},t.videoShowAndClickCountEvent=function(t){void 0===t&&(t=!1),e.Global.isInit&&e.UserHelper.getUserAsyn().then(function(n){var r=n.channel_type,o=n.channel_id,i=n.openid,a=n.unionid?n.unionid:"",s={product_id:e.Global.pid,openid:i,unionid:a,channel_type:r,channel_id:o,total_count:1,total_click_count:t?1:0};e.BasePlat.instance.httpRequest(e.Global.server_report+"/log/videoCount.do",s,"post").then(function(){e.CommHelper.log("video end event success.")})}).catch(function(t){e.CommHelper.log("video end event error."+t)})},t.batchShowEvent=function(t){e.Global.isInit&&e.UserHelper.getUserAsyn().then(function(n){for(var r=n.openid,o=[],i=[],a=[],s=0,c=t;s<c.length;s++){var l=c[s];o[o.length]=l.pid,i[i.length]=l.id,a[a.length]=l.category.toString()}var u={product_id:e.Global.pid,openid:r,spread_game_id:o.join(","),custom_ad_id:i.join(","),custom_param_1:a.join(",")};e.BasePlat.instance.httpRequest(e.Global.server_report+"/log/spread.do",u,"post").then(function(){e.CommHelper.log("report batch show event success. adIds="+i)})}).catch(function(){e.CommHelper.log("report batch show event error")})},t.clickEvent=function(t,n){if(void 0===n&&(n=0),e.Global.isInit){var r=t.id,o=t.pid;e.UserHelper.getUserAsyn().then(function(t){var i=t.openid,a={product_id:e.Global.pid,openid:i,target_to_product_id:o,custom_ad_id:r,custom_param_1:n};e.BasePlat.instance.httpRequest(e.Global.server_report+"/log/linkEvent.do",a,"post").then(function(){e.CommHelper.log("report ad click event success . adid = "+r)})}).catch(function(){e.CommHelper.log("report ad click event error. adid="+r)})}},t.adJumpEvent=function(t,n){if(void 0===n&&(n=0),e.Global.isInit){var r=t.pid,o=t.id;e.UserHelper.getUserAsyn().then(function(t){var i=t.openid,a={product_id:e.Global.pid,openid:i,leapt_to_game_id:r,custom_ad_id:o,custom_param_1:n};e.BasePlat.instance.httpRequest(e.Global.server_report+"/log/leapt.do",a,"post").then(function(){e.CommHelper.log("report ad jump event success. adid="+o)})}).catch(function(){e.CommHelper.log("report ad jump event error. adid="+o)})}},t.appRunEvent=function(e){"partake"==e.query.t?this.partakeIntoEvent(e.query.sid,e.query.uid,e.shareTicket||"",e.query.imgId||"",e.query.partakeTime||""):e.query.t&&this.adIntoEvent(e.query.a,e.referrerInfo?e.referrerInfo.appId:"")},t.lastAddUpTime=0,t.MAX_DAY_TIME=86400,t}();e.ReportHelper=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return t.loadSharePicData=function(){var t=this;return this.sharePicPromise?this.sharePicPromise:(this.sharePicPromise=new Promise(function(n){t.sharePicConfig=e.BasePlat.instance.findStorageByKey(e.Global.sharePicDataKey)||[];var r=e.Global.server_res+"/cdn/conf/"+e.Global.appResPath+"/share_photo.conf";e.BasePlat.instance.httpRequest(r).then(function(r){"object"==typeof r?(t.sharePicConfig=r,e.BasePlat.instance.putStorage(e.Global.sharePicDataKey,r),e.CommHelper.log("load share pic data success.")):e.CommHelper.log("load share pic data fail.",r),n(t.sharePicConfig)}).catch(function(){n(t.sharePicConfig)})}),this.sharePicPromise)},t.getRandomShareObject=function(t){if(!this.sharePicConfig||!this.sharePicConfig.length||"object"!=typeof this.sharePicConfig)return e.CommHelper.log("get share object fail. sharePicConfig is null or error."),t;if(0==t.imageId)return e.CommHelper.log("get share object success. imageId=0."),t;if(t.imageId){e.CommHelper.log("get share object , imageId="+t.imageId);var n=this.findShareObjectByImageId(t);if(n)return n}return this.findShareObjectByRandom(this.filterSecondary(t),t)},t.filterSecondary=function(e){var t=this,n=this.sharePicConfig.filter(function(n){if(n.ver){if(!e.version||n.ver!=e.version)return!1}else if(e.version)return!1;return t.filterOtherParam(n,e)},this),r=n;return!n.length&&e.version&&(r=this.sharePicConfig.filter(function(n){return!n.ver&&t.filterOtherParam(n,e)},this)),r},t.findShareObjectByRandom=function(t,n){if(!t||0==t.length)return e.CommHelper.log("get share object1 : filter share image list is null"),n;var r=e.CommHelper.roundTableSort(t,"weight");return r?this.getShareImageInfo(r,n):(e.CommHelper.log("get share object3 : random share image is null"),n)},t.findShareObjectByImageId=function(t){for(var n,r=this.sharePicConfig.length,o=0;o<r;o++)if(this.sharePicConfig[o].pic_id==t.imageId){n=this.sharePicConfig[o],e.CommHelper.log("find share object imageId = ",t.imageId," , shareImage = ",n);break}return this.getShareImageInfo(n,t)},t.getShareImageInfo=function(t,n){if(t){var r=__assign({},n);return r.title=r.nickName?t.text.replace("{nickname}",r.nickName):t.text,r.imageUrl=t.pic,r.imageId=t.pic_id,delete r.nickName,delete r.scoreValue,r}e.CommHelper.log("get share image info : share image is null.")},t.filterOtherParam=function(t,n){if(1===Number(t.shield)&&!e.GameConfigHelper.checkFission())return e.CommHelper.log("pic filter--shield=",t.shield," , id=",t.pic_id),!1;if((n.scoreValue||0)<(Number(t.number)||0))return e.CommHelper.log("pic filter--number=",t.number," , id=",t.pic_id),!1;if(!this.checkMoreOpenPeriodLimit(t.time_show))return e.CommHelper.log("pic filter--time_show=",t.time_show," , id=",t.pic_id),!1;if(!e.GameConfigHelper.gameVerContrData)return e.CommHelper.log("pic filter--version controller config is null"," , id=",t.pic_id),!0;if(1===Number(t.shield)&&1===Number(e.GameConfigHelper.gameVerContrData.check))return e.CommHelper.log("pic filter--shield=",t.shield,", version controller config check=1 , id=",t.pic_id),!1;if(t.city){var r=e.GameConfigHelper.gameVerContrData.city,o=e.GameConfigHelper.gameVerContrData.province;if(e.CommHelper.isAbroadCity(e.GameConfigHelper.gameVerContrData))return e.CommHelper.log("pic filter--city=",t.city,", id=",t.pic_id),!1;if(r&&-1!=t.city.indexOf(r))return e.CommHelper.log("pic filter--city=",t.city,", current city=",r,", id=",t.pic_id),!1;if(o&&-1!=t.city.indexOf(o))return e.CommHelper.log("pic filter--city=",t.city,", current province=",o,", id=",t.pic_id),!1}return!0},t.checkMoreOpenPeriodLimit=function(e){if(!e)return!0;for(var t=e.split(","),n=0;n<t.length;n++)if(this.checkOpenTimes(t[n]))return!0;return!1},t.checkOpenTimes=function(e){var t=!1;if(e){var n=e.indexOf("_")>0?e.split("_",2):e.split("-",2),r=n[0],o=n[1],i=(new Date).getHours();parseInt(r||"0")<=i&&i<=parseInt(o||"24")&&(t=!0)}return t},t.genSharePath=function(e,t,n,r){return void 0===t&&(t="/pages/index/index"),t+"?"+this.genShareQuery(e,n,r)},t.genShareQuery=function(t,n,r){return"object"!=typeof n&&(n={}),n.t="partake",n.sid="partake_"+e.Global.pid+"_"+t,n.uid=e.UserHelper.getUser().openid,n.partakeTime=(new Date).getTime(),r&&(n.imgId=r),e.CommHelper.buildHttpQuery(n)},t.sharePicConfig=[],t}();e.ShareHelper=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return t.getRecommedList=function(e,t,n){return void 0===e&&(e=!1),void 0===t&&(t=0),void 0===n&&(n=0),this.getAdList(e,t,n,this.AD_TYPE_KEY_RECOMMED)},t.getBannerList=function(e,t,n){return void 0===e&&(e=!1),void 0===t&&(t=0),void 0===n&&(n=0),this.getAdList(e,t,n,this.AD_TYPE_KEY_BANNER)},t.getRewardedList=function(e,t,n){return void 0===e&&(e=!1),void 0===t&&(t=0),void 0===n&&(n=0),this.getAdList(e,t,n,this.AD_TYPE_KEY_REWARDED)},t.getIconAd=function(t){var n=this;return void 0===t&&(t=0),new Promise(function(t){var r=n.iconDataList;if(null==r||null==r||!r.length)return e.CommHelper.log("get icon ad , No qualified ad item."),void t();n.handleResCache(r).then(function(n){var r=e.CommHelper.roundTableSort(n,"table");e.ReportHelper.batchShowEvent([r]),t(r)})})},t.preLoadAdData=function(){this.loadAdConfData()},t.loadAdConfData=function(){var t=this;return this.adConfPromise?this.adConfPromise:(this.adConfPromise=new Promise(function(n){var r=e.BasePlat.instance.findStorageByKey("hzzxAdConfData")||[];t.checkAdConfVersion().then(function(o){o&&t.fetchAdConfByVersion(o).then(function(r){if(r)return t.fixAdData(r),n(r),e.BasePlat.instance.putStorage("hzzxAdConfVersion",o),e.BasePlat.instance.putStorage("hzzxAdConfData",r),void e.CommHelper.log("update ad config data success.",r)}),t.fixAdData(r),n(r)})}),this.adConfPromise)},t.checkAdConfVersion=function(){return new Promise(function(t){var n=e.Global.server_res+"/cdn/conf/"+e.Global.appResPath+"/v.conf",r=void 0;e.BasePlat.instance.httpRequest(n).then(function(n){var o=e.BasePlat.instance.findStorageByKey("hzzxAdConfVersion");e.CommHelper.log("check ad config version: res=",n),"object"!=typeof n?e.CommHelper.log("check ad config version fail."):o==n.ver?e.CommHelper.log("check ad config version success, update=false. localVer="+o+"; currVer="+n.ver):(r=n.ver,e.CommHelper.log("check ad config version success, update=true. localVer="+o+"; currVer="+n.ver)),t(r)}).catch(function(n){e.CommHelper.log("check ad config version error. ",n),t(r)})})},t.fetchAdConfByVersion=function(t){return new Promise(function(n){var r=e.Global.server_res+"/cdn/conf/"+e.Global.appResPath+"/"+t;e.BasePlat.instance.httpRequest(r).then(function(t){if("object"!=typeof t)return e.CommHelper.log("fetch ad conf fail. res=",t),void n();n(t),e.CommHelper.log("fetch ad conf success. len="+t.length)}).catch(function(t){e.CommHelper.log("fetch ad conf error. ",t),n()})})},t.fixAdData=function(t){var n=this;return new Promise(function(r){Promise.all([e.GameConfigHelper.getGameVerContrLevel(""),n.loadFilterData()]).then(function(e){var o=e[0],i=e[1];n.mFilterData=i;for(var a=0,s=JSON.parse(JSON.stringify(t));a<s.length;a++){var c=s[a];n.reviseAd(c,n.mFilterData.gender),n.classifyAd(c,i,o)}r()}).catch(function(){r()})})},t.classifyAd=function(t,n,r){t.platform&&n.os&&t.platform!=n.os&&"devtools"!=n.os||t.sex&&3!=t.sex&&t.sex!=n.gender||(this.isCityInvisible(r,t.city_hide)?e.CommHelper.log("check city hide\uff1a",t.city_hide," ; id:",t.id):this.isCityVisible(r,t.city_show)?t.category==this.AD_TYPE_ICON?(this.iconDataList||(this.iconDataList=[]),this.iconDataList.push(t)):t.category==this.AD_TYPE_REWARDED?(this.rewardDataList||(this.rewardDataList=[]),this.rewardDataList.push(t)):t.category==this.AD_TYPE_BANNER?(this.bannerDataList||(this.bannerDataList=[]),this.bannerDataList.push(t)):t.category==this.AD_TYPE_RECOMMED&&(this.recommedDataList||(this.recommedDataList=[]),this.recommedDataList.push(t)):e.CommHelper.log("check city show\uff1a",t.city_show," ; id:",t.id))},t.reviseAd=function(t,n){t.start_time&&t.end_time&&t.plan_number||(t.page+=-1==t.page.indexOf("?")?"?":"&",t.page+="t=inner&a="+t.id+"&gender="+n+"&pid="+e.Global.pid);var r=e.CommHelper.getHttpQueryValueByKey(t.page,"bridge_appid"),o=e.CommHelper.getHttpQueryValueByKey(t.page,"bridge_path");return r&&(t.page=o+"?"+t.page.replace("bridge_appid="+r,"bridge2appid="+t.appid).replace("bridge_path="+o,"bridge2path="+t.page.split("?")[0]).split("?")[1],t.appid=r),t.ad_image&&0!=t.ad_image.indexOf("http")&&(t.ad_image=e.Global.server_res+"/cdn/images/"+t.ad_image),t.icon&&0!=t.icon.indexOf("http")&&(t.icon=e.Global.server_res+"/cdn/images/"+t.icon),t.image&&0!=t.image.indexOf("http")&&(t.image=e.Global.server_res+"/cdn/images/"+t.image),t.banner&&0!=t.banner.indexOf("http")&&(t.banner=e.Global.server_res+"/cdn/images/"+t.banner),t.clicked=!this.checkFirstClick(Number(t.id)),t.clicked&&(t.table=Number(t.table)/2),t},t.loadFilterData=function(){return new Promise(function(t){e.BasePlat.instance.getUserInfo().then(function(n){t({os:e.BasePlat.instance.getSystemInfo().platform,gender:Number(n.gender)})}).catch(function(){t({os:e.BasePlat.instance.getSystemInfo().platform,gender:-1})})})},t.getAdList=function(t,n,r,o){var i=this;return void 0===t&&(t=!1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=""),new Promise(function(r){var a=i.recommedDataList;if(o==i.AD_TYPE_KEY_REWARDED?a=i.rewardDataList:o==i.AD_TYPE_KEY_ICON?a=i.iconDataList:o==i.AD_TYPE_KEY_RECOMMED?a=i.recommedDataList:o==i.AD_TYPE_KEY_BANNER&&(a=i.bannerDataList),null==a||null==a||!a.length)return e.CommHelper.log("get ad list, No qualified ad item, ad list is null. adType = "+o),void r();i.handleResCache(a).then(function(i){var a=t?e.CommHelper.roundTableSort(i,"table",!1):i;n&&(a=a.slice(0,n)),e.ReportHelper.batchShowEvent(a),r(a),e.CommHelper.log("get ad list, adType=",o," , data list = ",a)})})},t.isCityVisible=function(t,n){var r=t.province,o=t.city;return(!n||"all"==n)&&!e.CommHelper.isAbroadCity(t)||n&&o&&-1!=n.indexOf(o)||n&&r&&-1!=n.indexOf(r)},t.isCityInvisible=function(t,n){var r=t.province,o=t.city;return"all"==n||e.CommHelper.isAbroadCity(t)||n&&o&&-1!=n.indexOf(o)||n&&r&&-1!=n.indexOf(r)},t.handleResCache=function(e,t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){var n,r,o;return __generator(this,function(){if(!e)return[2,e];for(n=e.length,r=0;r<n;r++)o=e[r],this.handleResCacheByKey("ad_image",o,t),this.handleResCacheByKey("icon",o,t),this.handleResCacheByKey("image",o,t),this.handleResCacheByKey("banner",o,t);return[2,e]})})},t.handleResCacheByKey=function(t,n,r){return void 0===r&&(r=!1),__awaiter(this,void 0,void 0,function(){var o,i,a;return __generator(this,function(s){switch(s.label){case 0:return(o=n[t])&&-1==o.indexOf("://usr/hzzxsdk/")?r?(i=n,a=t,[4,e.BasePlat.instance.getLocalCacheResUrl(o,!1)]):[3,2]:[3,3];case 1:return i[a]=s.sent(),[3,3];case 2:n[t]=e.CommHelper.getResFromMemoryCache(o),n[t]||(n[t]=o,e.BasePlat.instance.getLocalCacheResUrl(n[t],!1)),s.label=3;case 3:return[2,n]}})})},t.clickAndNavigate=function(t,n){var r=this;return void 0===n&&(n=0),new Promise(function(o){wx.getNetworkType({success:function(i){if("none"==i.networkType)return wx.showToast({title:"network error,navigate to app fail.",icon:"none"}),void o({navigateTo:!1,firstClick:!1});e.ReportHelper.clickEvent(t,n),e.BasePlat.instance.navigateTo(t).then(function(){var i=r.checkFirstClick(Number(t.id),!0);o({navigateTo:!0,firstClick:i}),e.ReportHelper.adJumpEvent(t,n)}).catch(function(){o({navigateTo:!1,firstClick:!1})})},fail:function(){o({navigateTo:!1,firstClick:!1})}})})},t.checkFirstClick=function(t,n){void 0===n&&(n=!1);var r=!1,o=e.BasePlat.instance.findStorageByKey("hzzxadClick")||[];return-1==o.indexOf(t)&&(r=!0,n&&(o.push(t),e.BasePlat.instance.putStorage("hzzxadClick",o))),r},t.AD_TYPE_RECOMMED=1,t.AD_TYPE_ICON=2,t.AD_TYPE_REWARDED=3,t.AD_TYPE_BANNER=4,t.AD_TYPE_KEY_RECOMMED="RECOMMED",t.AD_TYPE_KEY_ICON="ICON",t.AD_TYPE_KEY_REWARDED="REWARDED",t.AD_TYPE_KEY_BANNER="BANNER",t}();e.AdHelper=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return t.preHandelInitParams=function(t,n){return void 0===n&&(n=!1),e.Global.isInit?(e.CommHelper.log("multiple init sdk."),!0):(e.Global.pid=t,e.Global.appResPath=t,e.Global.enterOptions=e.BasePlat.instance.getEnterOptions(),e.Global.isNeedUnionid=n,e.Global.isInit=!0,e.CommHelper.log("sdk init begin, pid=",t,"enterOptions",JSON.stringify(e.Global.enterOptions)),e.Global.totalCount=Number(e.BasePlat.instance.findStorageByKey(e.Global.totalKey)||0),e.Global.gapCount=Number(e.BasePlat.instance.findStorageByKey(e.Global.gapKey)||0),e.Global.lastAddUpDate=e.BasePlat.instance.findStorageByKey(e.Global.lastAddUpDataKey),e.CommHelper.resetTotalCount(e.Global.lastAddUpDate),e.BasePlat.instance.setInterval(e.ReportHelper.addUpGapOnlineTime,1e3),e.ShareHelper.loadSharePicData(),e.AdHelper.preLoadAdData(),e.GameConfigHelper.getGameConfig(),!1)},t.init=function(t,n){return void 0===n&&(n=!1),e.InitHelper.preHandelInitParams(t,n)?(e.CommHelper.log("multiple init sdk."),e.UserHelper.getUserAsyn().then(function(e){return e.openid})):(e.BasePlat.instance.preHandleInit(),new Promise(function(t,n){e.BasePlat.instance.getUser(e.Global.enterOptions).then(function(r){e.UserHelper.setUser(r)?(e.ReportHelper.appRunEvent(e.Global.enterOptions),e.CommHelper.log("init success. openid="+r.openid),t(r.openid)):(e.CommHelper.log("init fail."),n())}).catch(function(t){e.CommHelper.log("init error.",t),n()})}))},t.initWithThirdUser=function(t,n){return e.InitHelper.preHandelInitParams(t)?(e.CommHelper.log("multiple init sdk."),e.UserHelper.getUserAsyn().then(function(e){return e.openid})):(e.BasePlat.instance.preHandleInit(),new Promise(function(t,r){e.UserHelper.thirdLogin(n).then(function(n){e.ReportHelper.appRunEvent(e.Global.enterOptions),t(n.openid),e.CommHelper.log("init with third user success. openid="+n.openid)}).catch(function(t){e.CommHelper.log("init with third user error.",t),r()})}))},t}();e.InitHelper=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){e.initAndGetOpenId=function(t,n){return void 0===n&&(n=!1),e.c.InitHelper.init(t,n)},e.initWithThirdUser=function(t,n){return e.c.InitHelper.initWithThirdUser(t,n)},e.getUser=function(){return e.c.UserHelper.getUser()},e.setDebugMode=function(t){e.c.CommHelper.openDebugMode(t)},e.getGameConfig=function(t){return e.c.GameConfigHelper.getGameConfig(t)},e.getGameVerContrLevel=function(t,n){return e.c.GameConfigHelper.getGameVerContrLevel(t,n)},e.checkFission=function(){return e.c.GameConfigHelper.checkFission()},e.getShareObject=function(t){return e.c.BasePlat.instance.getShareObject(t)},e.getIconAd=function(t){return void 0===t&&(t=0),e.c.AdHelper.getIconAd(t)},e.getRecommedAdList=function(t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=0),void 0===r&&(r=0),e.c.AdHelper.getRecommedList(t,n,r)},e.getBannerAdList=function(t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=0),void 0===r&&(r=0),e.c.AdHelper.getBannerList(t,n,r)},e.getRewardedAdList=function(t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=0),void 0===r&&(r=0),e.c.AdHelper.getRewardedList(t,n,r)},e.clickAndNavigate=function(t,n){return void 0===n&&(n=0),e.c.AdHelper.clickAndNavigate(t,n)},e.reportCustomEvent=function(t,n,r){void 0===t&&(t=0),void 0===n&&(n=""),void 0===r&&(r=""),e.c.ReportHelper.customEvent(t,n,r)},e.reportAdVideoEndEvent=function(t){void 0===t&&(t=!1),e.c.ReportHelper.videoShowAndClickCountEvent(t)}}(hzzxsdk||(hzzxsdk={})),console.log("\u6b22\u8fce\u4f7f\u7528hzzxsdk,\u5f53\u524d\u7248\u672c\u53f7"+hzzxsdk.c.Global.sdkVersion+",\u53d1\u5e03\u65f6\u95f4:"+hzzxsdk.c.Global.sdkBuildTimeStamp),"object"==typeof wx&&!wx.redirectTo||"undefined"==typeof module?window.hzzxsdk=hzzxsdk:module.exports=hzzxsdk,function(e){(function(e){var t=function(){function t(){}return t.openDebugMode=function(e){this.isDebug=e},t.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="hzzx==>";this.isDebug&&console.log.apply(console,__spreadArray([n],e,!1))},t.parseUserChannel=function(e){var t={channelType:"",channelId:""};return"partake"==e.query.t?(t.channelType=e.query.t,t.channelId=e.query.sid):e.query.t?(t.channelType=e.query.t,t.channelId=e.query.a):(t.channelType="oth",t.channelId=e.scene),t},t.getHttpQueryValueByKey=function(e,t){try{var n=e.match(new RegExp("(\\?|&)"+t+"=([^&]*)(&|$)"));if(n)return n[2]}catch(r){}return""},t.buildHttpQuery=function(e){var t="";for(var n in e)t+=n+"="+e[n]+"&";return t.substr(0,t.length-1)},t.roundTableSort=function(e,t,n){if(void 0===n&&(n=!0),!e||!e.length)return[];for(var r=[],o=[],i=0,a=0;a<e.length;a++)isNaN(e[a][t])||(e[a][t]=Number(e[a][t]),e[a][t]<=this.thresholdLow||(e[a][t]>=this.thresholdUp?r.push(e[a]):(o.push(e[a]),i+=e[a][t])));if(!i||!o.length)return r;for(var s=[];o.length;){var c=Math.random(),l=0;for(a=0;a<o.length;a++){var u=l+o[a][t]/i;if(c>=l&&c<u){s.push(o[a]),i-=o[a][t],o.splice(a,1);break}l=u}}var p=r.concat(s);return n?p[0]:p},t.getFormatNowDate=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate();return t<=9&&(t="0"+t),n<=9&&(n="0"+n),e.getFullYear()+"-"+t+"-"+n},t.resetTotalCount=function(t){var n=this.getFormatNowDate();t!=n&&(e.Global.lastAddUpDate=n,e.Global.totalCount=0,e.Global.gapCount=0,e.BasePlat.instance.putStorage(e.Global.totalKey,0,!1),e.BasePlat.instance.putStorage(e.Global.gapKey,0,!1))},t.compareVersionTx=function(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var r=0;r<n;r++){var o=parseInt(e[r]),i=parseInt(t[r]);if(o>i)return 1;if(o<i)return-1}return 0},t.paraseChannelUserId=function(e){return e&&e.query&&e.query.userid?e.query.uid:""},t.addRes2MemoryCache=function(e){null!=this.mCacheDataList&&null!=this.mCacheDataList&&-1==this.mCacheDataList.indexOf(e)&&this.mCacheDataList.push(e)},t.getResFromMemoryCache=function(e){if(null==this.mCacheDataList||null==this.mCacheDataList)return"";e=e.replace("https://","");for(var t=this.mCacheDataList.length,n=0;n<t;n++){var r=this.mCacheDataList[n];if(-1!=r.indexOf(e))return r}return""},t.isAbroadCity=function(e){var t=e.province,n=e.city,r=e.country;return r&&-1==r.indexOf("\u4e2d\u56fd")||t&&-1!=t.indexOf("\u53f0\u6e7e")||n&&-1!=n.indexOf("\u53f0\u6e7e")||t&&-1!=t.indexOf("\u9999\u6e2f")||n&&-1!=n.indexOf("\u9999\u6e2f")||t&&-1!=t.indexOf("\u6fb3\u95e8")||n&&-1!=n.indexOf("\u6fb3\u95e8")},t.isDebug=!1,t.thresholdUp=Number.MAX_VALUE,t.thresholdLow=0,t.mCacheDataList=[],t}();e.CommHelper=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={})),function(e){(function(e){var t=function(){function t(){}return t.getGameConfig=function(t){var n=this;return new Promise(function(r){if(!(t=t||e.Global.pid))return e.CommHelper.log("fetch game config fail. pid is null.\uff09"),void r();if(!n.gameConfigPromise){var o=e.Global.server_login+"/conf/pull.do?product_id="+t;n.gameConfigPromise=e.BasePlat.instance.httpRequest(o)}n.gameConfigPromise.then(function(t){200==t.code&&t.result&&"object"==typeof t.result?(e.CommHelper.log("fetch game config success. res=",t.result),r(t.result)):(e.CommHelper.log("fetch game config fail. res=",t),r())}).catch(function(t){e.CommHelper.log("fetch game config error.",t),r()})})},t.getGameVerContrLevel=function(t,n){var r=this;return new Promise(function(o){e.Global.appCodeVersion=t||"",n=n||e.Global.pid;var i={check:1};if(n){if(!r.gameVerContrPromise){var a=e.Global.server_login+"/server/shield.do?product_id="+n+"&ver="+t;r.gameVerContrPromise=e.BasePlat.instance.httpRequest(a)}r.gameVerContrPromise.then(function(n){200==n.code&&n.result&&"object"==typeof n.result?(e.CommHelper.log("fetch game version controller level success. res=",n.result),i=n.result,o(n.result)):(e.CommHelper.log("fetch game version controller level fail. res=",n),o({check:1})),t&&(r.gameVerContrData=i)}).catch(function(n){e.CommHelper.log("fetch game version controller level error.",n),o(i),t&&(r.gameVerContrData=i)})}else e.CommHelper.log("fetch game version controller level fail. pid is null."),o(i),t&&(r.gameVerContrData=i)})},t.checkFission=function(){var e=[1031,1032,1042,1011,1012,1013,1017,1047,1049,1053,1054,1084,1106,2001,2970,1e3,1005,1006,1025,1027,1030];return!!this.checkCurrentScene(e)&&this.checkHistoryScene(e)},t.checkHistoryScene=function(t){var n=e.UserHelper.getUser().channel_id?Number(e.UserHelper.getUser().channel_id):0;if(1048==n)return e.CommHelper.log("check history scene , fission1=false , history scene = "+n),!1;var r=-1==t.indexOf(n);return e.CommHelper.log("check history scene , fission2=",r,", history scene = "+n),r},t.checkCurrentScene=function(t){return e.Global.enterOptions&&"1037"==e.Global.enterOptions.scene&&e.Global.enterOptions.referrerInfo&&"wxcff7381e631cf54e"==e.Global.enterOptions.referrerInfo.appId?(e.CommHelper.log("check current scene , fission1=false"),!1):!e.Global.enterOptions||1048!=e.Global.enterOptions.scene||e.Global.enterOptions.query&&e.Global.enterOptions.query.type?!(-1!=t.indexOf(e.Global.enterOptions.scene)&&(e.CommHelper.log("check current scene , fission3=false , current scene = "+e.Global.enterOptions.scene),1)):(e.CommHelper.log("check current scene , fission2=false , current scene = "+e.Global.enterOptions.scene),!1)},t}();e.GameConfigHelper=t})(e.c||(e.c={}))}(hzzxsdk||(hzzxsdk={}));